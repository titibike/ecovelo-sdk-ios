import {
  raf
} from "./chunk-RZR7LWTQ.js";
import {
  Build,
  config,
  printIonWarning,
  writeTask
} from "./chunk-BFPTXCSH.js";
import {
  __async
} from "./chunk-UESUV5PM.js";

// node_modules/@ionic/core/dist/esm/index-Dp7GXH1z.js
var LIFECYCLE_WILL_ENTER = "ionViewWillEnter";
var LIFECYCLE_DID_ENTER = "ionViewDidEnter";
var LIFECYCLE_WILL_LEAVE = "ionViewWillLeave";
var LIFECYCLE_DID_LEAVE = "ionViewDidLeave";
var LIFECYCLE_WILL_UNLOAD = "ionViewWillUnload";
var moveFocus = (el) => {
  el.tabIndex = -1;
  el.focus();
};
var isVisible = (el) => {
  return el.offsetParent !== null;
};
var createFocusController = () => {
  const saveViewFocus = (referenceEl) => {
    const focusManagerEnabled = config.get("focusManagerPriority", false);
    if (focusManagerEnabled) {
      const activeEl = document.activeElement;
      if (activeEl !== null && (referenceEl === null || referenceEl === void 0 ? void 0 : referenceEl.contains(activeEl))) {
        activeEl.setAttribute(LAST_FOCUS, "true");
      }
    }
  };
  const setViewFocus = (referenceEl) => {
    const focusManagerPriorities = config.get("focusManagerPriority", false);
    if (Array.isArray(focusManagerPriorities) && !referenceEl.contains(document.activeElement)) {
      const lastFocus = referenceEl.querySelector(`[${LAST_FOCUS}]`);
      if (lastFocus && isVisible(lastFocus)) {
        moveFocus(lastFocus);
        return;
      }
      for (const priority of focusManagerPriorities) {
        switch (priority) {
          case "content":
            const content = referenceEl.querySelector('main, [role="main"]');
            if (content && isVisible(content)) {
              moveFocus(content);
              return;
            }
            break;
          case "heading":
            const headingOne = referenceEl.querySelector('h1, [role="heading"][aria-level="1"]');
            if (headingOne && isVisible(headingOne)) {
              moveFocus(headingOne);
              return;
            }
            break;
          case "banner":
            const header = referenceEl.querySelector('header, [role="banner"]');
            if (header && isVisible(header)) {
              moveFocus(header);
              return;
            }
            break;
          default:
            printIonWarning(`Unrecognized focus manager priority value ${priority}`);
            break;
        }
      }
      moveFocus(referenceEl);
    }
  };
  return {
    saveViewFocus,
    setViewFocus
  };
};
var LAST_FOCUS = "ion-last-focus";
var iosTransitionAnimation = () => import("./ios.transition-eAEkgVAv-LFF4Z6PW.js");
var mdTransitionAnimation = () => import("./md.transition-D8TeJ_Pz-R3RT6TPB.js");
var focusController = createFocusController();
var transition = (opts) => {
  return new Promise((resolve, reject) => {
    writeTask(() => {
      beforeTransition(opts);
      runTransition(opts).then((result) => {
        if (result.animation) {
          result.animation.destroy();
        }
        afterTransition(opts);
        resolve(result);
      }, (error) => {
        afterTransition(opts);
        reject(error);
      });
    });
  });
};
var beforeTransition = (opts) => {
  const enteringEl = opts.enteringEl;
  const leavingEl = opts.leavingEl;
  focusController.saveViewFocus(leavingEl);
  setZIndex(enteringEl, leavingEl, opts.direction);
  if (opts.showGoBack) {
    enteringEl.classList.add("can-go-back");
  } else {
    enteringEl.classList.remove("can-go-back");
  }
  setPageHidden(enteringEl, false);
  enteringEl.style.setProperty("pointer-events", "none");
  if (leavingEl) {
    setPageHidden(leavingEl, false);
    leavingEl.style.setProperty("pointer-events", "none");
  }
};
var runTransition = (opts) => __async(null, null, function* () {
  const animationBuilder = yield getAnimationBuilder(opts);
  const ani = animationBuilder && Build.isBrowser ? animation(animationBuilder, opts) : noAnimation(opts);
  return ani;
});
var afterTransition = (opts) => {
  const enteringEl = opts.enteringEl;
  const leavingEl = opts.leavingEl;
  enteringEl.classList.remove("ion-page-invisible");
  enteringEl.style.removeProperty("pointer-events");
  if (leavingEl !== void 0) {
    leavingEl.classList.remove("ion-page-invisible");
    leavingEl.style.removeProperty("pointer-events");
  }
  focusController.setViewFocus(enteringEl);
};
var getAnimationBuilder = (opts) => __async(null, null, function* () {
  if (!opts.leavingEl || !opts.animated || opts.duration === 0) {
    return void 0;
  }
  if (opts.animationBuilder) {
    return opts.animationBuilder;
  }
  const getAnimation = opts.mode === "ios" ? (yield iosTransitionAnimation()).iosTransitionAnimation : (yield mdTransitionAnimation()).mdTransitionAnimation;
  return getAnimation;
});
var animation = (animationBuilder, opts) => __async(null, null, function* () {
  yield waitForReady(opts, true);
  const trans = animationBuilder(opts.baseEl, opts);
  fireWillEvents(opts.enteringEl, opts.leavingEl);
  const didComplete = yield playTransition(trans, opts);
  if (opts.progressCallback) {
    opts.progressCallback(void 0);
  }
  if (didComplete) {
    fireDidEvents(opts.enteringEl, opts.leavingEl);
  }
  return {
    hasCompleted: didComplete,
    animation: trans
  };
});
var noAnimation = (opts) => __async(null, null, function* () {
  const enteringEl = opts.enteringEl;
  const leavingEl = opts.leavingEl;
  const focusManagerEnabled = config.get("focusManagerPriority", false);
  yield waitForReady(opts, focusManagerEnabled);
  fireWillEvents(enteringEl, leavingEl);
  fireDidEvents(enteringEl, leavingEl);
  return {
    hasCompleted: true
  };
});
var waitForReady = (opts, defaultDeep) => __async(null, null, function* () {
  const deep = opts.deepWait !== void 0 ? opts.deepWait : defaultDeep;
  if (deep) {
    yield Promise.all([deepReady(opts.enteringEl), deepReady(opts.leavingEl)]);
  }
  yield notifyViewReady(opts.viewIsReady, opts.enteringEl);
});
var notifyViewReady = (viewIsReady, enteringEl) => __async(null, null, function* () {
  if (viewIsReady) {
    yield viewIsReady(enteringEl);
  }
});
var playTransition = (trans, opts) => {
  const progressCallback = opts.progressCallback;
  const promise = new Promise((resolve) => {
    trans.onFinish((currentStep) => resolve(currentStep === 1));
  });
  if (progressCallback) {
    trans.progressStart(true);
    progressCallback(trans);
  } else {
    trans.play();
  }
  return promise;
};
var fireWillEvents = (enteringEl, leavingEl) => {
  lifecycle(leavingEl, LIFECYCLE_WILL_LEAVE);
  lifecycle(enteringEl, LIFECYCLE_WILL_ENTER);
};
var fireDidEvents = (enteringEl, leavingEl) => {
  lifecycle(enteringEl, LIFECYCLE_DID_ENTER);
  lifecycle(leavingEl, LIFECYCLE_DID_LEAVE);
};
var lifecycle = (el, eventName) => {
  if (el) {
    const ev = new CustomEvent(eventName, {
      bubbles: false,
      cancelable: false
    });
    el.dispatchEvent(ev);
  }
};
var waitForMount = () => {
  return new Promise((resolve) => raf(() => raf(() => resolve())));
};
var deepReady = (el) => __async(null, null, function* () {
  const element = el;
  if (element) {
    if (element.componentOnReady != null) {
      const stencilEl = yield element.componentOnReady();
      if (stencilEl != null) {
        return;
      }
    } else if (element.__registerHost != null) {
      const waitForCustomElement = new Promise((resolve) => raf(resolve));
      yield waitForCustomElement;
      return;
    }
    yield Promise.all(Array.from(element.children).map(deepReady));
  }
});
var setPageHidden = (el, hidden) => {
  if (hidden) {
    el.setAttribute("aria-hidden", "true");
    el.classList.add("ion-page-hidden");
  } else {
    el.hidden = false;
    el.removeAttribute("aria-hidden");
    el.classList.remove("ion-page-hidden");
  }
};
var setZIndex = (enteringEl, leavingEl, direction) => {
  if (enteringEl !== void 0) {
    enteringEl.style.zIndex = direction === "back" ? "99" : "101";
  }
  if (leavingEl !== void 0) {
    leavingEl.style.zIndex = "100";
  }
};
var getIonPageElement = (element) => {
  if (element.classList.contains("ion-page")) {
    return element;
  }
  const ionPage = element.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");
  if (ionPage) {
    return ionPage;
  }
  return element;
};

export {
  LIFECYCLE_WILL_LEAVE,
  LIFECYCLE_DID_LEAVE,
  LIFECYCLE_WILL_UNLOAD,
  transition,
  lifecycle,
  waitForMount,
  deepReady,
  setPageHidden,
  getIonPageElement
};
/*! Bundled license information:

@ionic/core/dist/esm/index-Dp7GXH1z.js:
  (*!
   * (C) Ionic http://ionicframework.com - MIT License
   *)
*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pbmRleC1EcDdHWEgxei5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgZSBhcyBjb25maWcsIGYgYXMgcHJpbnRJb25XYXJuaW5nLCB3IGFzIHdyaXRlVGFzaywgQiBhcyBCdWlsZCB9IGZyb20gJy4vaW5kZXgtNER4WTZfZ0cuanMnO1xuaW1wb3J0IHsgciBhcyByYWYgfSBmcm9tICcuL2hlbHBlcnMtOEtTUVFHUXkuanMnO1xuY29uc3QgTElGRUNZQ0xFX1dJTExfRU5URVIgPSAnaW9uVmlld1dpbGxFbnRlcic7XG5jb25zdCBMSUZFQ1lDTEVfRElEX0VOVEVSID0gJ2lvblZpZXdEaWRFbnRlcic7XG5jb25zdCBMSUZFQ1lDTEVfV0lMTF9MRUFWRSA9ICdpb25WaWV3V2lsbExlYXZlJztcbmNvbnN0IExJRkVDWUNMRV9ESURfTEVBVkUgPSAnaW9uVmlld0RpZExlYXZlJztcbmNvbnN0IExJRkVDWUNMRV9XSUxMX1VOTE9BRCA9ICdpb25WaWV3V2lsbFVubG9hZCc7XG5cbi8qKlxuICogTW92ZXMgZm9jdXMgdG8gYSBzcGVjaWZpZWQgZWxlbWVudC4gTm90ZSB0aGF0IHdlIGRvIG5vdCByZW1vdmUgdGhlIHRhYmluZGV4XG4gKiBiZWNhdXNlIHRoYXQgY2FuIHJlc3VsdCBpbiBhbiB1bmludGVudGlvbmFsIGJsdXIuIE5vbi1mb2N1c2FibGVzIGNhbid0IGJlXG4gKiBmb2N1c2VkLCBzbyB0aGUgYm9keSB3aWxsIGdldCBmb2N1c2VkIGFnYWluLlxuICovXG5jb25zdCBtb3ZlRm9jdXMgPSBlbCA9PiB7XG4gIGVsLnRhYkluZGV4ID0gLTE7XG4gIGVsLmZvY3VzKCk7XG59O1xuLyoqXG4gKiBFbGVtZW50cyB0aGF0IGFyZSBoaWRkZW4gdXNpbmcgYGRpc3BsYXk6IG5vbmVgIHNob3VsZCBub3QgYmUgZm9jdXNlZCBldmVuIGlmXG4gKiB0aGV5IGFyZSBwcmVzZW50IGluIHRoZSBET00uXG4gKi9cbmNvbnN0IGlzVmlzaWJsZSA9IGVsID0+IHtcbiAgcmV0dXJuIGVsLm9mZnNldFBhcmVudCAhPT0gbnVsbDtcbn07XG4vKipcbiAqIFRoZSBmb2N1cyBjb250cm9sbGVyIGFsbG93cyB1cyB0byBtYW5hZ2UgZm9jdXMgd2l0aGluIGEgdmlldyBzbyBhc3Npc3RpdmVcbiAqIHRlY2hub2xvZ2llcyBjYW4gaW5mb3JtIHVzZXJzIG9mIGNoYW5nZXMgdG8gdGhlIG5hdmlnYXRpb24gc3RhdGUuIFRyYWRpdGlvbmFsXG4gKiBuYXRpdmUgYXBwcyBoYXZlIGEgd2F5IG9mIGluZm9ybWluZyBhc3Npc3RpdmUgdGVjaG5vbG9neSBhYm91dCBhIG5hdmlnYXRpb25cbiAqIHN0YXRlIGNoYW5nZS4gTW9iaWxlIGJyb3dzZXJzIGhhdmUgdGhpcyB0b28sIGJ1dCBvbmx5IHdoZW4gZG9pbmcgYSBmdWxsIHBhZ2VcbiAqIGxvYWQuIEluIGEgc2luZ2xlIHBhZ2UgYXBwIHdlIGRvIG5vdCBkbyB0aGF0LCBzbyB3ZSBuZWVkIHRvIGJ1aWxkIHRoaXNcbiAqIGludGVncmF0aW9uIG91cnNlbHZlcy5cbiAqL1xuY29uc3QgY3JlYXRlRm9jdXNDb250cm9sbGVyID0gKCkgPT4ge1xuICBjb25zdCBzYXZlVmlld0ZvY3VzID0gcmVmZXJlbmNlRWwgPT4ge1xuICAgIGNvbnN0IGZvY3VzTWFuYWdlckVuYWJsZWQgPSBjb25maWcuZ2V0KCdmb2N1c01hbmFnZXJQcmlvcml0eScsIGZhbHNlKTtcbiAgICAvKipcbiAgICAgKiBXaGVuIGdvaW5nIGJhY2sgdG8gYSBwcmV2aW91c2x5IHZpc2l0ZWQgcGFnZSBmb2N1cyBzaG91bGQgdHlwaWNhbGx5IGJlIG1vdmVkXG4gICAgICogYmFjayB0byB0aGUgZWxlbWVudCB0aGF0IHdhcyBsYXN0IGZvY3VzZWQgd2hlbiB0aGUgdXNlciB3YXMgb24gdGhpcyB2aWV3LlxuICAgICAqL1xuICAgIGlmIChmb2N1c01hbmFnZXJFbmFibGVkKSB7XG4gICAgICBjb25zdCBhY3RpdmVFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICBpZiAoYWN0aXZlRWwgIT09IG51bGwgJiYgKHJlZmVyZW5jZUVsID09PSBudWxsIHx8IHJlZmVyZW5jZUVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWZlcmVuY2VFbC5jb250YWlucyhhY3RpdmVFbCkpKSB7XG4gICAgICAgIGFjdGl2ZUVsLnNldEF0dHJpYnV0ZShMQVNUX0ZPQ1VTLCAndHJ1ZScpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2V0Vmlld0ZvY3VzID0gcmVmZXJlbmNlRWwgPT4ge1xuICAgIGNvbnN0IGZvY3VzTWFuYWdlclByaW9yaXRpZXMgPSBjb25maWcuZ2V0KCdmb2N1c01hbmFnZXJQcmlvcml0eScsIGZhbHNlKTtcbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZm9jdXNlZCBlbGVtZW50IGlzIGEgZGVzY2VuZGFudCBvZiB0aGUgcmVmZXJlbmNlRWwgdGhlbiBpdCdzIHBvc3NpYmxlXG4gICAgICogdGhhdCB0aGUgYXBwIGRldmVsb3BlciBtYW51YWxseSBtb3ZlZCBmb2N1cywgc28gd2UgZG8gbm90IHdhbnQgdG8gb3ZlcnJpZGUgdGhhdC5cbiAgICAgKiBUaGlzIGNhbiBoYXBwZW4gd2l0aCBpbnB1dHMgdGhlIGFyZSBmb2N1c2VkIHdoZW4gYSB2aWV3IHRyYW5zaXRpb25zIGluLlxuICAgICAqL1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZvY3VzTWFuYWdlclByaW9yaXRpZXMpICYmICFyZWZlcmVuY2VFbC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIGdvaW5nIGJhY2sgdG8gYSBwcmV2aW91c2x5IHZpc2l0ZWQgdmlldyBmb2N1cyBzaG91bGQgYWx3YXlzIGJlIG1vdmVkIGJhY2tcbiAgICAgICAqIHRvIHRoZSBlbGVtZW50IHRoYXQgdGhlIHVzZXIgd2FzIGxhc3QgZm9jdXNlZCBvbiB3aGVuIHRoZXkgd2VyZSBvbiB0aGlzIHZpZXcuXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IGxhc3RGb2N1cyA9IHJlZmVyZW5jZUVsLnF1ZXJ5U2VsZWN0b3IoYFske0xBU1RfRk9DVVN9XWApO1xuICAgICAgaWYgKGxhc3RGb2N1cyAmJiBpc1Zpc2libGUobGFzdEZvY3VzKSkge1xuICAgICAgICBtb3ZlRm9jdXMobGFzdEZvY3VzKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBwcmlvcml0eSBvZiBmb2N1c01hbmFnZXJQcmlvcml0aWVzKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3IgZWFjaCByZWNvZ25pemVkIGNhc2UgKGV4Y2x1ZGluZyB0aGUgZGVmYXVsdCBjYXNlKSBtYWtlIHN1cmUgdG8gcmV0dXJuXG4gICAgICAgICAqIHNvIHRoYXQgdGhlIGZhbGxiYWNrIGZvY3VzIGJlaGF2aW9yIGRvZXMgbm90IHJ1bi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2UgaW50ZW50aW9uYWxseSBxdWVyeSBmb3Igc3BlY2lmaWMgcm9sZXMvc2VtYW50aWMgZWxlbWVudHMgc28gdGhhdCB0aGVcbiAgICAgICAgICogdHJhbnNpdGlvbiBtYW5hZ2VyIGNhbiB3b3JrIHdpdGggYm90aCBJb25pYyBhbmQgbm9uLUlvbmljIFVJIGNvbXBvbmVudHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIG5ldyBzZWxlY3RvcnMgYXJlIGFkZGVkLCBiZSBzdXJlIHRvIHJlbW92ZSB0aGUgb3V0bGluZSByaW5nIGJ5IGFkZGluZ1xuICAgICAgICAgKiBuZXcgc2VsZWN0b3JzIHRvIHJ1bGUgaW4gY29yZS5zY3NzLlxuICAgICAgICAgKi9cbiAgICAgICAgc3dpdGNoIChwcmlvcml0eSkge1xuICAgICAgICAgIGNhc2UgJ2NvbnRlbnQnOlxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHJlZmVyZW5jZUVsLnF1ZXJ5U2VsZWN0b3IoJ21haW4sIFtyb2xlPVwibWFpblwiXScpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQgJiYgaXNWaXNpYmxlKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgIG1vdmVGb2N1cyhjb250ZW50KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnaGVhZGluZyc6XG4gICAgICAgICAgICBjb25zdCBoZWFkaW5nT25lID0gcmVmZXJlbmNlRWwucXVlcnlTZWxlY3RvcignaDEsIFtyb2xlPVwiaGVhZGluZ1wiXVthcmlhLWxldmVsPVwiMVwiXScpO1xuICAgICAgICAgICAgaWYgKGhlYWRpbmdPbmUgJiYgaXNWaXNpYmxlKGhlYWRpbmdPbmUpKSB7XG4gICAgICAgICAgICAgIG1vdmVGb2N1cyhoZWFkaW5nT25lKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnYmFubmVyJzpcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHJlZmVyZW5jZUVsLnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciwgW3JvbGU9XCJiYW5uZXJcIl0nKTtcbiAgICAgICAgICAgIGlmIChoZWFkZXIgJiYgaXNWaXNpYmxlKGhlYWRlcikpIHtcbiAgICAgICAgICAgICAgbW92ZUZvY3VzKGhlYWRlcik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBwcmludElvbldhcm5pbmcoYFVucmVjb2duaXplZCBmb2N1cyBtYW5hZ2VyIHByaW9yaXR5IHZhbHVlICR7cHJpb3JpdHl9YCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBJZiB0aGVyZSBpcyBub3RoaW5nIHRvIGZvY3VzIHRoZW4gZm9jdXMgdGhlIHBhZ2Ugc28gZm9jdXMgYXQgbGVhc3QgbW92ZXMgdG9cbiAgICAgICAqIHRoZSBjb3JyZWN0IHZpZXcuIFRoZSBicm93c2VyIHdpbGwgdGhlbiBkZXRlcm1pbmUgd2hlcmUgd2l0aGluIHRoZSBwYWdlIHRvXG4gICAgICAgKiBtb3ZlIGZvY3VzIHRvLlxuICAgICAgICovXG4gICAgICBtb3ZlRm9jdXMocmVmZXJlbmNlRWwpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBzYXZlVmlld0ZvY3VzLFxuICAgIHNldFZpZXdGb2N1c1xuICB9O1xufTtcbmNvbnN0IExBU1RfRk9DVVMgPSAnaW9uLWxhc3QtZm9jdXMnO1xuY29uc3QgaW9zVHJhbnNpdGlvbkFuaW1hdGlvbiA9ICgpID0+IGltcG9ydCgnLi9pb3MudHJhbnNpdGlvbi1lQUVrZ1ZBdi5qcycpO1xuY29uc3QgbWRUcmFuc2l0aW9uQW5pbWF0aW9uID0gKCkgPT4gaW1wb3J0KCcuL21kLnRyYW5zaXRpb24tRDhUZUpfUHouanMnKTtcbmNvbnN0IGZvY3VzQ29udHJvbGxlciA9IGNyZWF0ZUZvY3VzQ29udHJvbGxlcigpO1xuLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbmNvbnN0IHRyYW5zaXRpb24gPSBvcHRzID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB3cml0ZVRhc2soKCkgPT4ge1xuICAgICAgYmVmb3JlVHJhbnNpdGlvbihvcHRzKTtcbiAgICAgIHJ1blRyYW5zaXRpb24ob3B0cykudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICBpZiAocmVzdWx0LmFuaW1hdGlvbikge1xuICAgICAgICAgIHJlc3VsdC5hbmltYXRpb24uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGFmdGVyVHJhbnNpdGlvbihvcHRzKTtcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICBhZnRlclRyYW5zaXRpb24ob3B0cyk7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuY29uc3QgYmVmb3JlVHJhbnNpdGlvbiA9IG9wdHMgPT4ge1xuICBjb25zdCBlbnRlcmluZ0VsID0gb3B0cy5lbnRlcmluZ0VsO1xuICBjb25zdCBsZWF2aW5nRWwgPSBvcHRzLmxlYXZpbmdFbDtcbiAgZm9jdXNDb250cm9sbGVyLnNhdmVWaWV3Rm9jdXMobGVhdmluZ0VsKTtcbiAgc2V0WkluZGV4KGVudGVyaW5nRWwsIGxlYXZpbmdFbCwgb3B0cy5kaXJlY3Rpb24pO1xuICBpZiAob3B0cy5zaG93R29CYWNrKSB7XG4gICAgZW50ZXJpbmdFbC5jbGFzc0xpc3QuYWRkKCdjYW4tZ28tYmFjaycpO1xuICB9IGVsc2Uge1xuICAgIGVudGVyaW5nRWwuY2xhc3NMaXN0LnJlbW92ZSgnY2FuLWdvLWJhY2snKTtcbiAgfVxuICBzZXRQYWdlSGlkZGVuKGVudGVyaW5nRWwsIGZhbHNlKTtcbiAgLyoqXG4gICAqIFdoZW4gdHJhbnNpdGlvbmluZywgdGhlIHBhZ2Ugc2hvdWxkIG5vdFxuICAgKiByZXNwb25kIHRvIGNsaWNrIGV2ZW50cy4gVGhpcyByZXNvbHZlcyBzbWFsbFxuICAgKiBpc3N1ZXMgbGlrZSB1c2VycyBkb3VibGUgdGFwcGluZyB0aGUgaW9uLWJhY2stYnV0dG9uLlxuICAgKiBUaGVzZSBwb2ludGVyIGV2ZW50cyBhcmUgcmVtb3ZlZCBpbiBgYWZ0ZXJUcmFuc2l0aW9uYC5cbiAgICovXG4gIGVudGVyaW5nRWwuc3R5bGUuc2V0UHJvcGVydHkoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcbiAgaWYgKGxlYXZpbmdFbCkge1xuICAgIHNldFBhZ2VIaWRkZW4obGVhdmluZ0VsLCBmYWxzZSk7XG4gICAgbGVhdmluZ0VsLnN0eWxlLnNldFByb3BlcnR5KCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG4gIH1cbn07XG5jb25zdCBydW5UcmFuc2l0aW9uID0gYXN5bmMgb3B0cyA9PiB7XG4gIGNvbnN0IGFuaW1hdGlvbkJ1aWxkZXIgPSBhd2FpdCBnZXRBbmltYXRpb25CdWlsZGVyKG9wdHMpO1xuICBjb25zdCBhbmkgPSBhbmltYXRpb25CdWlsZGVyICYmIEJ1aWxkLmlzQnJvd3NlciA/IGFuaW1hdGlvbihhbmltYXRpb25CdWlsZGVyLCBvcHRzKSA6IG5vQW5pbWF0aW9uKG9wdHMpOyAvLyBmYXN0IHBhdGggZm9yIG5vIGFuaW1hdGlvblxuICByZXR1cm4gYW5pO1xufTtcbmNvbnN0IGFmdGVyVHJhbnNpdGlvbiA9IG9wdHMgPT4ge1xuICBjb25zdCBlbnRlcmluZ0VsID0gb3B0cy5lbnRlcmluZ0VsO1xuICBjb25zdCBsZWF2aW5nRWwgPSBvcHRzLmxlYXZpbmdFbDtcbiAgZW50ZXJpbmdFbC5jbGFzc0xpc3QucmVtb3ZlKCdpb24tcGFnZS1pbnZpc2libGUnKTtcbiAgZW50ZXJpbmdFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncG9pbnRlci1ldmVudHMnKTtcbiAgaWYgKGxlYXZpbmdFbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgbGVhdmluZ0VsLmNsYXNzTGlzdC5yZW1vdmUoJ2lvbi1wYWdlLWludmlzaWJsZScpO1xuICAgIGxlYXZpbmdFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncG9pbnRlci1ldmVudHMnKTtcbiAgfVxuICBmb2N1c0NvbnRyb2xsZXIuc2V0Vmlld0ZvY3VzKGVudGVyaW5nRWwpO1xufTtcbmNvbnN0IGdldEFuaW1hdGlvbkJ1aWxkZXIgPSBhc3luYyBvcHRzID0+IHtcbiAgaWYgKCFvcHRzLmxlYXZpbmdFbCB8fCAhb3B0cy5hbmltYXRlZCB8fCBvcHRzLmR1cmF0aW9uID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBpZiAob3B0cy5hbmltYXRpb25CdWlsZGVyKSB7XG4gICAgcmV0dXJuIG9wdHMuYW5pbWF0aW9uQnVpbGRlcjtcbiAgfVxuICBjb25zdCBnZXRBbmltYXRpb24gPSBvcHRzLm1vZGUgPT09ICdpb3MnID8gKGF3YWl0IGlvc1RyYW5zaXRpb25BbmltYXRpb24oKSkuaW9zVHJhbnNpdGlvbkFuaW1hdGlvbiA6IChhd2FpdCBtZFRyYW5zaXRpb25BbmltYXRpb24oKSkubWRUcmFuc2l0aW9uQW5pbWF0aW9uO1xuICByZXR1cm4gZ2V0QW5pbWF0aW9uO1xufTtcbmNvbnN0IGFuaW1hdGlvbiA9IGFzeW5jIChhbmltYXRpb25CdWlsZGVyLCBvcHRzKSA9PiB7XG4gIGF3YWl0IHdhaXRGb3JSZWFkeShvcHRzLCB0cnVlKTtcbiAgY29uc3QgdHJhbnMgPSBhbmltYXRpb25CdWlsZGVyKG9wdHMuYmFzZUVsLCBvcHRzKTtcbiAgZmlyZVdpbGxFdmVudHMob3B0cy5lbnRlcmluZ0VsLCBvcHRzLmxlYXZpbmdFbCk7XG4gIGNvbnN0IGRpZENvbXBsZXRlID0gYXdhaXQgcGxheVRyYW5zaXRpb24odHJhbnMsIG9wdHMpO1xuICBpZiAob3B0cy5wcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgb3B0cy5wcm9ncmVzc0NhbGxiYWNrKHVuZGVmaW5lZCk7XG4gIH1cbiAgaWYgKGRpZENvbXBsZXRlKSB7XG4gICAgZmlyZURpZEV2ZW50cyhvcHRzLmVudGVyaW5nRWwsIG9wdHMubGVhdmluZ0VsKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGhhc0NvbXBsZXRlZDogZGlkQ29tcGxldGUsXG4gICAgYW5pbWF0aW9uOiB0cmFuc1xuICB9O1xufTtcbmNvbnN0IG5vQW5pbWF0aW9uID0gYXN5bmMgb3B0cyA9PiB7XG4gIGNvbnN0IGVudGVyaW5nRWwgPSBvcHRzLmVudGVyaW5nRWw7XG4gIGNvbnN0IGxlYXZpbmdFbCA9IG9wdHMubGVhdmluZ0VsO1xuICBjb25zdCBmb2N1c01hbmFnZXJFbmFibGVkID0gY29uZmlnLmdldCgnZm9jdXNNYW5hZ2VyUHJpb3JpdHknLCBmYWxzZSk7XG4gIC8qKlxuICAgKiBJZiB0aGUgZm9jdXMgbWFuYWdlciBpcyBlbmFibGVkIHRoZW4gd2UgbmVlZCB0byB3YWl0IGZvciBJb25pYyBjb21wb25lbnRzIHRvIGJlXG4gICAqIHJlbmRlcmVkIG90aGVyd2lzZSB0aGUgY29tcG9uZW50IHRvIGZvY3VzIG1heSBub3QgYmUgZm9jdXNlZCBiZWNhdXNlIGl0IGlzIGhpZGRlbi5cbiAgICovXG4gIGF3YWl0IHdhaXRGb3JSZWFkeShvcHRzLCBmb2N1c01hbmFnZXJFbmFibGVkKTtcbiAgZmlyZVdpbGxFdmVudHMoZW50ZXJpbmdFbCwgbGVhdmluZ0VsKTtcbiAgZmlyZURpZEV2ZW50cyhlbnRlcmluZ0VsLCBsZWF2aW5nRWwpO1xuICByZXR1cm4ge1xuICAgIGhhc0NvbXBsZXRlZDogdHJ1ZVxuICB9O1xufTtcbmNvbnN0IHdhaXRGb3JSZWFkeSA9IGFzeW5jIChvcHRzLCBkZWZhdWx0RGVlcCkgPT4ge1xuICBjb25zdCBkZWVwID0gb3B0cy5kZWVwV2FpdCAhPT0gdW5kZWZpbmVkID8gb3B0cy5kZWVwV2FpdCA6IGRlZmF1bHREZWVwO1xuICBpZiAoZGVlcCkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFtkZWVwUmVhZHkob3B0cy5lbnRlcmluZ0VsKSwgZGVlcFJlYWR5KG9wdHMubGVhdmluZ0VsKV0pO1xuICB9XG4gIGF3YWl0IG5vdGlmeVZpZXdSZWFkeShvcHRzLnZpZXdJc1JlYWR5LCBvcHRzLmVudGVyaW5nRWwpO1xufTtcbmNvbnN0IG5vdGlmeVZpZXdSZWFkeSA9IGFzeW5jICh2aWV3SXNSZWFkeSwgZW50ZXJpbmdFbCkgPT4ge1xuICBpZiAodmlld0lzUmVhZHkpIHtcbiAgICBhd2FpdCB2aWV3SXNSZWFkeShlbnRlcmluZ0VsKTtcbiAgfVxufTtcbmNvbnN0IHBsYXlUcmFuc2l0aW9uID0gKHRyYW5zLCBvcHRzKSA9PiB7XG4gIGNvbnN0IHByb2dyZXNzQ2FsbGJhY2sgPSBvcHRzLnByb2dyZXNzQ2FsbGJhY2s7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICB0cmFucy5vbkZpbmlzaChjdXJyZW50U3RlcCA9PiByZXNvbHZlKGN1cnJlbnRTdGVwID09PSAxKSk7XG4gIH0pO1xuICAvLyBjb29sLCBsZXQncyBkbyB0aGlzLCBzdGFydCB0aGUgdHJhbnNpdGlvblxuICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgIC8vIHRoaXMgaXMgYSBzd2lwZSB0byBnbyBiYWNrLCBqdXN0IGdldCB0aGUgdHJhbnNpdGlvbiBwcm9ncmVzcyByZWFkeVxuICAgIC8vIGtpY2sgb2ZmIHRoZSBzd2lwZSBhbmltYXRpb24gc3RhcnRcbiAgICB0cmFucy5wcm9ncmVzc1N0YXJ0KHRydWUpO1xuICAgIHByb2dyZXNzQ2FsbGJhY2sodHJhbnMpO1xuICB9IGVsc2Uge1xuICAgIC8vIG9ubHkgdGhlIHRvcCBsZXZlbCB0cmFuc2l0aW9uIHNob3VsZCBhY3R1YWxseSBzdGFydCBcInBsYXlcIlxuICAgIC8vIGtpY2sgaXQgb2ZmIGFuZCBsZXQgaXQgcGxheSB0aHJvdWdoXG4gICAgLy8gKioqKioqKiogRE9NIFdSSVRFICoqKioqKioqKioqKioqKipcbiAgICB0cmFucy5wbGF5KCk7XG4gIH1cbiAgLy8gY3JlYXRlIGEgY2FsbGJhY2sgZm9yIHdoZW4gdGhlIGFuaW1hdGlvbiBpcyBkb25lXG4gIHJldHVybiBwcm9taXNlO1xufTtcbmNvbnN0IGZpcmVXaWxsRXZlbnRzID0gKGVudGVyaW5nRWwsIGxlYXZpbmdFbCkgPT4ge1xuICBsaWZlY3ljbGUobGVhdmluZ0VsLCBMSUZFQ1lDTEVfV0lMTF9MRUFWRSk7XG4gIGxpZmVjeWNsZShlbnRlcmluZ0VsLCBMSUZFQ1lDTEVfV0lMTF9FTlRFUik7XG59O1xuY29uc3QgZmlyZURpZEV2ZW50cyA9IChlbnRlcmluZ0VsLCBsZWF2aW5nRWwpID0+IHtcbiAgbGlmZWN5Y2xlKGVudGVyaW5nRWwsIExJRkVDWUNMRV9ESURfRU5URVIpO1xuICBsaWZlY3ljbGUobGVhdmluZ0VsLCBMSUZFQ1lDTEVfRElEX0xFQVZFKTtcbn07XG5jb25zdCBsaWZlY3ljbGUgPSAoZWwsIGV2ZW50TmFtZSkgPT4ge1xuICBpZiAoZWwpIHtcbiAgICBjb25zdCBldiA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHtcbiAgICAgIGJ1YmJsZXM6IGZhbHNlLFxuICAgICAgY2FuY2VsYWJsZTogZmFsc2VcbiAgICB9KTtcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGV2KTtcbiAgfVxufTtcbi8qKlxuICogV2FpdCB0d28gcmVxdWVzdCBhbmltYXRpb24gZnJhbWUgbG9vcHMuXG4gKiBUaGlzIGFsbG93cyB0aGUgZnJhbWV3b3JrIGltcGxlbWVudGF0aW9ucyBlbm91Z2ggdGltZSB0byBtb3VudFxuICogdGhlIHVzZXItZGVmaW5lZCBjb250ZW50cy4gVGhpcyBpcyBvZnRlbiBuZWVkZWQgd2hlbiB1c2luZyBpbmxpbmVcbiAqIG1vZGFscyBhbmQgcG9wb3ZlcnMgdGhhdCBhY2NlcHQgdXNlciBjb21wb25lbnRzLiBGb3IgcG9wb3ZlcixcbiAqIHRoZSBjb250ZW50cyBtdXN0IGJlIG1vdW50ZWQgZm9yIHRoZSBwb3BvdmVyIHRvIGJlIHNpemVkIGNvcnJlY3RseS5cbiAqIEZvciBtb2RhbHMsIHRoZSBjb250ZW50cyBtdXN0IGJlIG1vdW50ZWQgZm9yIGlPUyB0byBydW4gdGhlXG4gKiB0cmFuc2l0aW9uIGNvcnJlY3RseS5cbiAqXG4gKiBPbiBBbmd1bGFyIGFuZCBSZWFjdCwgYSBzaW5nbGUgcmFmIGlzIGVub3VnaCB0aW1lLCBidXQgZm9yIFZ1ZVxuICogd2UgbmVlZCB0byB3YWl0IHR3byByYWZzLiBBcyBhIHJlc3VsdCB3ZSBhcmUgdXNpbmcgdHdvIHJhZnMgZm9yXG4gKiBhbGwgZnJhbWV3b3JrcyB0byBlbnN1cmUgY29udGVudHMgYXJlIG1vdW50ZWQuXG4gKi9cbmNvbnN0IHdhaXRGb3JNb3VudCA9ICgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gcmFmKCgpID0+IHJhZigoKSA9PiByZXNvbHZlKCkpKSk7XG59O1xuY29uc3QgZGVlcFJlYWR5ID0gYXN5bmMgZWwgPT4ge1xuICBjb25zdCBlbGVtZW50ID0gZWw7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuY29tcG9uZW50T25SZWFkeSAhPSBudWxsKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY3VzdG9tLXJ1bGVzL25vLWNvbXBvbmVudC1vbi1yZWFkeS1tZXRob2RcbiAgICAgIGNvbnN0IHN0ZW5jaWxFbCA9IGF3YWl0IGVsZW1lbnQuY29tcG9uZW50T25SZWFkeSgpO1xuICAgICAgaWYgKHN0ZW5jaWxFbCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3VzdG9tIGVsZW1lbnRzIGluIFN0ZW5jaWwgd2lsbCBoYXZlIF9fcmVnaXN0ZXJIb3N0LlxuICAgICAgICovXG4gICAgfSBlbHNlIGlmIChlbGVtZW50Ll9fcmVnaXN0ZXJIb3N0ICE9IG51bGwpIHtcbiAgICAgIC8qKlxuICAgICAgICogTm9uLWxhenkgbG9hZGVkIGN1c3RvbSBlbGVtZW50cyBuZWVkIHRvIHdhaXRcbiAgICAgICAqIG9uZSBmcmFtZSBmb3IgY29tcG9uZW50IHRvIGJlIGxvYWRlZC5cbiAgICAgICAqL1xuICAgICAgY29uc3Qgd2FpdEZvckN1c3RvbUVsZW1lbnQgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJhZihyZXNvbHZlKSk7XG4gICAgICBhd2FpdCB3YWl0Rm9yQ3VzdG9tRWxlbWVudDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkcmVuKS5tYXAoZGVlcFJlYWR5KSk7XG4gIH1cbn07XG5jb25zdCBzZXRQYWdlSGlkZGVuID0gKGVsLCBoaWRkZW4pID0+IHtcbiAgaWYgKGhpZGRlbikge1xuICAgIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lvbi1wYWdlLWhpZGRlbicpO1xuICB9IGVsc2Uge1xuICAgIGVsLmhpZGRlbiA9IGZhbHNlO1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpb24tcGFnZS1oaWRkZW4nKTtcbiAgfVxufTtcbmNvbnN0IHNldFpJbmRleCA9IChlbnRlcmluZ0VsLCBsZWF2aW5nRWwsIGRpcmVjdGlvbikgPT4ge1xuICBpZiAoZW50ZXJpbmdFbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW50ZXJpbmdFbC5zdHlsZS56SW5kZXggPSBkaXJlY3Rpb24gPT09ICdiYWNrJyA/ICc5OScgOiAnMTAxJztcbiAgfVxuICBpZiAobGVhdmluZ0VsICE9PSB1bmRlZmluZWQpIHtcbiAgICBsZWF2aW5nRWwuc3R5bGUuekluZGV4ID0gJzEwMCc7XG4gIH1cbn07XG5jb25zdCBnZXRJb25QYWdlRWxlbWVudCA9IGVsZW1lbnQgPT4ge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2lvbi1wYWdlJykpIHtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuICBjb25zdCBpb25QYWdlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAuaW9uLXBhZ2UsIDpzY29wZSA+IGlvbi1uYXYsIDpzY29wZSA+IGlvbi10YWJzJyk7XG4gIGlmIChpb25QYWdlKSB7XG4gICAgcmV0dXJuIGlvblBhZ2U7XG4gIH1cbiAgLy8gaWRrLCByZXR1cm4gdGhlIG9yaWdpbmFsIGVsZW1lbnQgc28gYXQgbGVhc3Qgc29tZXRoaW5nIGFuaW1hdGVzIGFuZCB3ZSBkb24ndCBoYXZlIGEgbnVsbCBwb2ludGVyXG4gIHJldHVybiBlbGVtZW50O1xufTtcbmV4cG9ydCB7IExJRkVDWUNMRV9XSUxMX0VOVEVSIGFzIEwsIExJRkVDWUNMRV9ESURfRU5URVIgYXMgYSwgTElGRUNZQ0xFX1dJTExfTEVBVkUgYXMgYiwgTElGRUNZQ0xFX0RJRF9MRUFWRSBhcyBjLCBMSUZFQ1lDTEVfV0lMTF9VTkxPQUQgYXMgZCwgZGVlcFJlYWR5IGFzIGUsIGdldElvblBhZ2VFbGVtZW50IGFzIGcsIGxpZmVjeWNsZSBhcyBsLCBzZXRQYWdlSGlkZGVuIGFzIHMsIHRyYW5zaXRpb24gYXMgdCwgd2FpdEZvck1vdW50IGFzIHcgfTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBS0EsSUFBTSx1QkFBdUI7QUFDN0IsSUFBTSxzQkFBc0I7QUFDNUIsSUFBTSx1QkFBdUI7QUFDN0IsSUFBTSxzQkFBc0I7QUFDNUIsSUFBTSx3QkFBd0I7QUFPOUIsSUFBTSxZQUFZLFFBQU07QUFDdEIsS0FBRyxXQUFXO0FBQ2QsS0FBRyxNQUFNO0FBQ1g7QUFLQSxJQUFNLFlBQVksUUFBTTtBQUN0QixTQUFPLEdBQUcsaUJBQWlCO0FBQzdCO0FBU0EsSUFBTSx3QkFBd0IsTUFBTTtBQUNsQyxRQUFNLGdCQUFnQixpQkFBZTtBQUNuQyxVQUFNLHNCQUFzQixPQUFPLElBQUksd0JBQXdCLEtBQUs7QUFLcEUsUUFBSSxxQkFBcUI7QUFDdkIsWUFBTSxXQUFXLFNBQVM7QUFDMUIsVUFBSSxhQUFhLFNBQVMsZ0JBQWdCLFFBQVEsZ0JBQWdCLFNBQVMsU0FBUyxZQUFZLFNBQVMsUUFBUSxJQUFJO0FBQ25ILGlCQUFTLGFBQWEsWUFBWSxNQUFNO0FBQUEsTUFDMUM7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNBLFFBQU0sZUFBZSxpQkFBZTtBQUNsQyxVQUFNLHlCQUF5QixPQUFPLElBQUksd0JBQXdCLEtBQUs7QUFNdkUsUUFBSSxNQUFNLFFBQVEsc0JBQXNCLEtBQUssQ0FBQyxZQUFZLFNBQVMsU0FBUyxhQUFhLEdBQUc7QUFLMUYsWUFBTSxZQUFZLFlBQVksY0FBYyxJQUFJLFVBQVUsR0FBRztBQUM3RCxVQUFJLGFBQWEsVUFBVSxTQUFTLEdBQUc7QUFDckMsa0JBQVUsU0FBUztBQUNuQjtBQUFBLE1BQ0Y7QUFDQSxpQkFBVyxZQUFZLHdCQUF3QjtBQVc3QyxnQkFBUSxVQUFVO0FBQUEsVUFDaEIsS0FBSztBQUNILGtCQUFNLFVBQVUsWUFBWSxjQUFjLHFC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
