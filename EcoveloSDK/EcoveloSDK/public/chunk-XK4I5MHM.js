import {
  environment
} from "./chunk-FOJAXRYS.js";
import {
  ErrorHandlerService,
  ToastService,
  ToastType
} from "./chunk-SARQRLZR.js";
import {
  StorageService
} from "./chunk-U6SJAXLK.js";
import {
  BehaviorSubject,
  HttpClient,
  HttpContext,
  HttpHeaders,
  HttpParams,
  Inject,
  Injectable,
  InjectionToken,
  NgModule,
  Optional,
  SkipSelf,
  TranslateService,
  setClassMetadata,
  signal,
  ɵɵdefineInjectable,
  ɵɵdefineInjector,
  ɵɵdefineNgModule,
  ɵɵinject
} from "./chunk-DGENMXJW.js";
import {
  __async,
  __spreadProps,
  __spreadValues
} from "./chunk-UESUV5PM.js";

// src/api-cyclist/variables.ts
var BASE_PATH = new InjectionToken("basePath");

// src/api-cyclist/encoder.ts
var CustomHttpParameterCodec = class {
  encodeKey(k) {
    return encodeURIComponent(k);
  }
  encodeValue(v) {
    return encodeURIComponent(v);
  }
  decodeKey(k) {
    return decodeURIComponent(k);
  }
  decodeValue(v) {
    return decodeURIComponent(v);
  }
};

// src/api-cyclist/configuration.ts
var Configuration = class {
  constructor({ accessToken, apiKeys, basePath, credentials, encodeParam, encoder, password, username, withCredentials } = {}) {
    if (apiKeys) {
      this.apiKeys = apiKeys;
    }
    if (username !== void 0) {
      this.username = username;
    }
    if (password !== void 0) {
      this.password = password;
    }
    if (accessToken !== void 0) {
      this.accessToken = accessToken;
    }
    if (basePath !== void 0) {
      this.basePath = basePath;
    }
    if (withCredentials !== void 0) {
      this.withCredentials = withCredentials;
    }
    if (encoder) {
      this.encoder = encoder;
    }
    this.encodeParam = encodeParam != null ? encodeParam : (param) => this.defaultEncodeParam(param);
    this.credentials = credentials != null ? credentials : {};
  }
  /**
   * Select the correct content-type to use for a request.
   * Uses {@link Configuration#isJsonMime} to determine the correct content-type.
   * If no content type is found return the first found type if the contentTypes is not empty
   * @param contentTypes - the array of content types that are available for selection
   * @returns the selected content-type or <code>undefined</code> if no selection could be made.
   */
  selectHeaderContentType(contentTypes) {
    if (contentTypes.length === 0) {
      return void 0;
    }
    const type = contentTypes.find((x) => this.isJsonMime(x));
    if (type === void 0) {
      return contentTypes[0];
    }
    return type;
  }
  /**
   * Select the correct accept content-type to use for a request.
   * Uses {@link Configuration#isJsonMime} to determine the correct accept content-type.
   * If no content type is found return the first found type if the contentTypes is not empty
   * @param accepts - the array of content types that are available for selection.
   * @returns the selected content-type or <code>undefined</code> if no selection could be made.
   */
  selectHeaderAccept(accepts) {
    if (accepts.length === 0) {
      return void 0;
    }
    const type = accepts.find((x) => this.isJsonMime(x));
    if (type === void 0) {
      return accepts[0];
    }
    return type;
  }
  /**
   * Check if the given MIME is a JSON MIME.
   * JSON MIME examples:
   *   application/json
   *   application/json; charset=UTF8
   *   APPLICATION/JSON
   *   application/vnd.company+json
   * @param mime - MIME (Multipurpose Internet Mail Extensions)
   * @return True if the given MIME is JSON, false otherwise.
   */
  isJsonMime(mime) {
    const jsonMime = new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$", "i");
    return mime !== null && (jsonMime.test(mime) || mime.toLowerCase() === "application/json-patch+json");
  }
  lookupCredential(key) {
    const value = this.credentials[key];
    return typeof value === "function" ? value() : value;
  }
  addCredentialToHeaders(credentialKey, headerName, headers, prefix) {
    const value = this.lookupCredential(credentialKey);
    return value ? headers.set(headerName, (prefix != null ? prefix : "") + value) : headers;
  }
  addCredentialToQuery(credentialKey, paramName, query) {
    const value = this.lookupCredential(credentialKey);
    return value ? query.set(paramName, value) : query;
  }
  defaultEncodeParam(param) {
    const value = param.dataFormat === "date-time" && param.value instanceof Date ? param.value.toISOString() : param.value;
    return encodeURIComponent(String(value));
  }
};

// src/api-cyclist/api.base.service.ts
var BaseService = class {
  constructor(basePath, configuration) {
    this.basePath = environment.basePath;
    this.defaultHeaders = new HttpHeaders();
    this.configuration = configuration || new Configuration();
    if (typeof this.configuration.basePath !== "string") {
      const firstBasePath = Array.isArray(basePath) ? basePath[0] : void 0;
      if (firstBasePath != void 0) {
        basePath = firstBasePath;
      }
      if (typeof basePath !== "string") {
        basePath = this.basePath;
      }
      this.configuration.basePath = basePath;
    }
    this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
  }
  canConsumeForm(consumes) {
    return consumes.indexOf("multipart/form-data") !== -1;
  }
  addToHttpParams(httpParams, value, key, isDeep = false) {
    if (typeof value === "object" && !(value instanceof Date)) {
      return this.addToHttpParamsRecursive(httpParams, value, isDeep ? key : void 0, isDeep);
    }
    return this.addToHttpParamsRecursive(httpParams, value, key);
  }
  addToHttpParamsRecursive(httpParams, value, key, isDeep = false) {
    if (value === null || value === void 0) {
      return httpParams;
    }
    if (typeof value === "object") {
      if (key != null) {
        return isDeep ? Object.keys(value).reduce((hp, k) => hp.append(`${key}[${k}]`, value[k]), httpParams) : httpParams.append(key, JSON.stringify(value));
      }
      if (Array.isArray(value)) {
        value.forEach((elem) => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
      } else if (value instanceof Date) {
        if (key != null) {
          httpParams = httpParams.append(key, value.toISOString());
        } else {
          throw Error("key may not be null if value is Date");
        }
      } else {
        Object.keys(value).forEach((k) => {
          const paramKey = key ? `${key}.${k}` : k;
          httpParams = this.addToHttpParamsRecursive(httpParams, value[k], paramKey);
        });
      }
      return httpParams;
    } else if (key != null) {
      return httpParams.append(key, value);
    }
    throw Error("key may not be null if value is not object or array");
  }
};

// src/api-cyclist/api/cyclists.service.ts
var _CyclistsService = class _CyclistsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  changeCyclistEmail(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const changeCyclistEmailRequest = requestParameters == null ? void 0 : requestParameters.changeCyclistEmailRequest;
    let localVarHeaders = this.defaultHeaders;
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists/change-email`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: changeCyclistEmailRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  changeCyclistPassword(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const changeCyclistPasswordRequest = requestParameters == null ? void 0 : requestParameters.changeCyclistPasswordRequest;
    let localVarHeaders = this.defaultHeaders;
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists/change-password`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: changeCyclistPasswordRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  confirmCyclist(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists/confirm`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  createCyclist(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling createCyclist.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  cyclistExists(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const phoneNumber = requestParameters == null ? void 0 : requestParameters.phoneNumber;
    if (phoneNumber === null || phoneNumber === void 0) {
      throw new Error("Required parameter phoneNumber was null or undefined when calling cyclistExists.");
    }
    let localVarHeaders = this.defaultHeaders;
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists/${this.configuration.encodeParam({ name: "phoneNumber", value: phoneNumber, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/exists`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  deleteCyclist(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling deleteCyclist.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("delete", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveCyclist(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveCyclist.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const currentProgram = requestParameters == null ? void 0 : requestParameters.currentProgram;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, currentProgram, "current_program");
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_CyclistsService.\u0275fac = function CyclistsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CyclistsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_CyclistsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _CyclistsService, factory: _CyclistsService.\u0275fac, providedIn: "root" });
var CyclistsService = _CyclistsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(CyclistsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/notificationPreferences.service.ts
var _NotificationPreferencesService = class _NotificationPreferencesService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  createNotificationPreference(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling createNotificationPreference.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/notification_preferences`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  deleteNotificationPreference(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling deleteNotificationPreference.");
    }
    const notificationSubscriptionId = requestParameters == null ? void 0 : requestParameters.notificationSubscriptionId;
    if (notificationSubscriptionId === null || notificationSubscriptionId === void 0) {
      throw new Error("Required parameter notificationSubscriptionId was null or undefined when calling deleteNotificationPreference.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/notification_preferences/${this.configuration.encodeParam({ name: "notificationSubscriptionId", value: notificationSubscriptionId, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("delete", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  listNotificationPreference(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listNotificationPreference.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/notification_preferences`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_NotificationPreferencesService.\u0275fac = function NotificationPreferencesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _NotificationPreferencesService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_NotificationPreferencesService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _NotificationPreferencesService, factory: _NotificationPreferencesService.\u0275fac, providedIn: "root" });
var NotificationPreferencesService = _NotificationPreferencesService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NotificationPreferencesService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/vehicules.service.ts
var _VehiculesService = class _VehiculesService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  listVehicule(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listVehicule.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const created = requestParameters == null ? void 0 : requestParameters.created;
    const createdGt = requestParameters == null ? void 0 : requestParameters.createdGt;
    const createdLt = requestParameters == null ? void 0 : requestParameters.createdLt;
    const createdGte = requestParameters == null ? void 0 : requestParameters.createdGte;
    const createdLte = requestParameters == null ? void 0 : requestParameters.createdLte;
    const battery = requestParameters == null ? void 0 : requestParameters.battery;
    const batteryGte = requestParameters == null ? void 0 : requestParameters.batteryGte;
    const batteryLte = requestParameters == null ? void 0 : requestParameters.batteryLte;
    const batteryVae = requestParameters == null ? void 0 : requestParameters.batteryVae;
    const batteryVaeGte = requestParameters == null ? void 0 : requestParameters.batteryVaeGte;
    const batteryVaeLte = requestParameters == null ? void 0 : requestParameters.batteryVaeLte;
    const chainType = requestParameters == null ? void 0 : requestParameters.chainType;
    const chainTypeIn = requestParameters == null ? void 0 : requestParameters.chainTypeIn;
    const connected = requestParameters == null ? void 0 : requestParameters.connected;
    const dockless = requestParameters == null ? void 0 : requestParameters.dockless;
    const fw = requestParameters == null ? void 0 : requestParameters.fw;
    const fwGte = requestParameters == null ? void 0 : requestParameters.fwGte;
    const fwLte = requestParameters == null ? void 0 : requestParameters.fwLte;
    const fwIn = requestParameters == null ? void 0 : requestParameters.fwIn;
    const lock = requestParameters == null ? void 0 : requestParameters.lock;
    const lockIn = requestParameters == null ? void 0 : requestParameters.lockIn;
    const model = requestParameters == null ? void 0 : requestParameters.model;
    const modelIn = requestParameters == null ? void 0 : requestParameters.modelIn;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    const rentable = requestParameters == null ? void 0 : requestParameters.rentable;
    const score = requestParameters == null ? void 0 : requestParameters.score;
    const scoreGte = requestParameters == null ? void 0 : requestParameters.scoreGte;
    const scoreLte = requestParameters == null ? void 0 : requestParameters.scoreLte;
    const station = requestParameters == null ? void 0 : requestParameters.station;
    const stationIn = requestParameters == null ? void 0 : requestParameters.stationIn;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    const statusIn = requestParameters == null ? void 0 : requestParameters.statusIn;
    const type = requestParameters == null ? void 0 : requestParameters.type;
    const typeIn = requestParameters == null ? void 0 : requestParameters.typeIn;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, created, "created");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdGt, "created_gt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdLt, "created_lt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdGte, "created_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdLte, "created_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, battery, "battery");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, batteryGte, "battery_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, batteryLte, "battery_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, batteryVae, "battery_vae");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, batteryVaeGte, "battery_vae_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, batteryVaeLte, "battery_vae_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, chainType, "chain_type");
    if (chainTypeIn) {
      chainTypeIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "chain_type_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, connected, "connected");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, dockless, "dockless");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, fw, "fw");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, fwGte, "fw_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, fwLte, "fw_lte");
    if (fwIn) {
      fwIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "fw_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, lock, "lock");
    if (lockIn) {
      lockIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "lock_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, model, "model");
    if (modelIn) {
      modelIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "model_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, rentable, "rentable");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, score, "score");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, scoreGte, "score_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, scoreLte, "score_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, station, "station");
    if (stationIn) {
      stationIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "station_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    if (statusIn) {
      statusIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "status_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, type, "type");
    if (typeIn) {
      typeIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "type_in");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/vehicules`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveVehicule(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveVehicule.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveVehicule.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/vehicules/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_VehiculesService.\u0275fac = function VehiculesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _VehiculesService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_VehiculesService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _VehiculesService, factory: _VehiculesService.\u0275fac, providedIn: "root" });
var VehiculesService = _VehiculesService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(VehiculesService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/abonnements.service.ts
var _AbonnementsService = class _AbonnementsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  createAbonnement(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling createAbonnement.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const createAbonnementRequest = requestParameters == null ? void 0 : requestParameters.createAbonnementRequest;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/abonnements`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: createAbonnementRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  deleteAbonnement(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling deleteAbonnement.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling deleteAbonnement.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/abonnements/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("delete", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  listAbonnement(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listAbonnement.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const created = requestParameters == null ? void 0 : requestParameters.created;
    const createdGt = requestParameters == null ? void 0 : requestParameters.createdGt;
    const createdLt = requestParameters == null ? void 0 : requestParameters.createdLt;
    const createdGte = requestParameters == null ? void 0 : requestParameters.createdGte;
    const createdLte = requestParameters == null ? void 0 : requestParameters.createdLte;
    const language = requestParameters == null ? void 0 : requestParameters.language;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const activatedAt = requestParameters == null ? void 0 : requestParameters.activatedAt;
    const activatedAtGte = requestParameters == null ? void 0 : requestParameters.activatedAtGte;
    const activatedAtLte = requestParameters == null ? void 0 : requestParameters.activatedAtLte;
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    const forfait = requestParameters == null ? void 0 : requestParameters.forfait;
    const forfaitIn = requestParameters == null ? void 0 : requestParameters.forfaitIn;
    const organization = requestParameters == null ? void 0 : requestParameters.organization;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    const statusIn = requestParameters == null ? void 0 : requestParameters.statusIn;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, created, "created");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdGt, "created_gt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdLt, "created_lt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdGte, "created_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdLte, "created_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, language, "language");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, activatedAt, "activated_at");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, activatedAtGte, "activated_at_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, activatedAtLte, "activated_at_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, cyclist, "cyclist");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, forfait, "forfait");
    if (forfaitIn) {
      forfaitIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "forfait_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, organization, "organization");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    if (statusIn) {
      statusIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "status_in");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/abonnements`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveAbonnement(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveAbonnement.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveAbonnement.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const language = requestParameters == null ? void 0 : requestParameters.language;
    const valid = requestParameters == null ? void 0 : requestParameters.valid;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, language, "language");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, valid, "valid");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/abonnements/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_AbonnementsService.\u0275fac = function AbonnementsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AbonnementsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_AbonnementsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _AbonnementsService, factory: _AbonnementsService.\u0275fac, providedIn: "root" });
var AbonnementsService = _AbonnementsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(AbonnementsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/cards.service.ts
var _CardsService = class _CardsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  createSetupIntent(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling createSetupIntent.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const createSetupIntentRequest = requestParameters == null ? void 0 : requestParameters.createSetupIntentRequest;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cards/create_setup_intent`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: createSetupIntentRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  deleteCard(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling deleteCard.");
    }
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    if (cyclist === null || cyclist === void 0) {
      throw new Error("Required parameter cyclist was null or undefined when calling deleteCard.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling deleteCard.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cards/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("delete", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  listCards(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listCards.");
    }
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    if (cyclist === null || cyclist === void 0) {
      throw new Error("Required parameter cyclist was null or undefined when calling listCards.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cards`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  updateCard(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling updateCard.");
    }
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    if (cyclist === null || cyclist === void 0) {
      throw new Error("Required parameter cyclist was null or undefined when calling updateCard.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling updateCard.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cards/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_CardsService.\u0275fac = function CardsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CardsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_CardsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _CardsService, factory: _CardsService.\u0275fac, providedIn: "root" });
var CardsService = _CardsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(CardsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/default.service.ts
var _DefaultService = class _DefaultService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  tasksPost(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling tasksPost.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const tasksPostRequest = requestParameters == null ? void 0 : requestParameters.tasksPostRequest;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/tasks`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: tasksPostRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_DefaultService.\u0275fac = function DefaultService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DefaultService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_DefaultService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _DefaultService, factory: _DefaultService.\u0275fac, providedIn: "root" });
var DefaultService = _DefaultService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(DefaultService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/devices.service.ts
var _DevicesService = class _DevicesService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  subscribeDevice(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling subscribeDevice.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const subscribeDeviceRequest = requestParameters == null ? void 0 : requestParameters.subscribeDeviceRequest;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/devices`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: subscribeDeviceRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  unsubscribeDevice(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling unsubscribeDevice.");
    }
    const token = requestParameters == null ? void 0 : requestParameters.token;
    if (token === null || token === void 0) {
      throw new Error("Required parameter token was null or undefined when calling unsubscribeDevice.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/devices/${this.configuration.encodeParam({ name: "token", value: token, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("delete", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_DevicesService.\u0275fac = function DevicesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DevicesService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_DevicesService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _DevicesService, factory: _DevicesService.\u0275fac, providedIn: "root" });
var DevicesService = _DevicesService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(DevicesService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/docks.service.ts
var _DocksService = class _DocksService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  listDock(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listDock.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    const station = requestParameters == null ? void 0 : requestParameters.station;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    const statusIn = requestParameters == null ? void 0 : requestParameters.statusIn;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, station, "station");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    if (statusIn) {
      statusIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "status_in");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/docks`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveDock(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveDock.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveDock.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/docks/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_DocksService.\u0275fac = function DocksService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DocksService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_DocksService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _DocksService, factory: _DocksService.\u0275fac, providedIn: "root" });
var DocksService = _DocksService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(DocksService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/fAQ.service.ts
var _FAQService = class _FAQService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  retrieveFaq(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveFaq.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const language = requestParameters == null ? void 0 : requestParameters.language;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, language, "language");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/faq`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_FAQService.\u0275fac = function FAQService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FAQService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_FAQService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _FAQService, factory: _FAQService.\u0275fac, providedIn: "root" });
var FAQService = _FAQService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(FAQService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/factures.service.ts
var _FacturesService = class _FacturesService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  listFacture(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listFacture.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const created = requestParameters == null ? void 0 : requestParameters.created;
    const createdGt = requestParameters == null ? void 0 : requestParameters.createdGt;
    const createdLt = requestParameters == null ? void 0 : requestParameters.createdLt;
    const createdGte = requestParameters == null ? void 0 : requestParameters.createdGte;
    const createdLte = requestParameters == null ? void 0 : requestParameters.createdLte;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const abonnement = requestParameters == null ? void 0 : requestParameters.abonnement;
    const amount = requestParameters == null ? void 0 : requestParameters.amount;
    const amountGt = requestParameters == null ? void 0 : requestParameters.amountGt;
    const amountLt = requestParameters == null ? void 0 : requestParameters.amountLt;
    const amountGte = requestParameters == null ? void 0 : requestParameters.amountGte;
    const amountLte = requestParameters == null ? void 0 : requestParameters.amountLte;
    const closed = requestParameters == null ? void 0 : requestParameters.closed;
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    const organization = requestParameters == null ? void 0 : requestParameters.organization;
    const pastDue = requestParameters == null ? void 0 : requestParameters.pastDue;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, created, "created");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdGt, "created_gt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdLt, "created_lt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdGte, "created_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdLte, "created_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, abonnement, "abonnement");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, amount, "amount");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, amountGt, "amount_gt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, amountLt, "amount_lt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, amountGte, "amount_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, amountLte, "amount_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, closed, "closed");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, cyclist, "cyclist");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, organization, "organization");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, pastDue, "past_due");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/factures`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveFacture(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveFacture.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveFacture.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/factures/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  upcomingFactures(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling upcomingFactures.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/factures/upcoming`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_FacturesService.\u0275fac = function FacturesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FacturesService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_FacturesService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _FacturesService, factory: _FacturesService.\u0275fac, providedIn: "root" });
var FacturesService = _FacturesService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(FacturesService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/fileUpload.service.ts
var _FileUploadService = class _FileUploadService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  filesUpload(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/files`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_FileUploadService.\u0275fac = function FileUploadService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FileUploadService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_FileUploadService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _FileUploadService, factory: _FileUploadService.\u0275fac, providedIn: "root" });
var FileUploadService = _FileUploadService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(FileUploadService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/forfaits.service.ts
var _ForfaitsService = class _ForfaitsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  listForfait(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listForfait.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const language = requestParameters == null ? void 0 : requestParameters.language;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const organization = requestParameters == null ? void 0 : requestParameters.organization;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    const statusIn = requestParameters == null ? void 0 : requestParameters.statusIn;
    const type = requestParameters == null ? void 0 : requestParameters.type;
    const typeIn = requestParameters == null ? void 0 : requestParameters.typeIn;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, language, "language");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, organization, "organization");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    if (statusIn) {
      statusIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "status_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, type, "type");
    if (typeIn) {
      typeIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "type_in");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/forfaits`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveForfait(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveForfait.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveForfait.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const language = requestParameters == null ? void 0 : requestParameters.language;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, language, "language");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/forfaits/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_ForfaitsService.\u0275fac = function ForfaitsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ForfaitsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_ForfaitsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ForfaitsService, factory: _ForfaitsService.\u0275fac, providedIn: "root" });
var ForfaitsService = _ForfaitsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ForfaitsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/kYC.service.ts
var _KYCService = class _KYCService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  createKycDocument(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const createKycDocumentRequest = requestParameters == null ? void 0 : requestParameters.createKycDocumentRequest;
    let localVarHeaders = this.defaultHeaders;
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/kycs`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: createKycDocumentRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  uploadFile(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling uploadFile.");
    }
    const uploadFileRequest = requestParameters == null ? void 0 : requestParameters.uploadFileRequest;
    let localVarHeaders = this.defaultHeaders;
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/kycs/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/upload`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: uploadFileRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_KYCService.\u0275fac = function KYCService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _KYCService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_KYCService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _KYCService, factory: _KYCService.\u0275fac, providedIn: "root" });
var KYCService = _KYCService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(KYCService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/memberships.service.ts
var _MembershipsService = class _MembershipsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  removeMemberOrganization(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling removeMemberOrganization.");
    }
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling removeMemberOrganization.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/organizations/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/members`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("delete", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_MembershipsService.\u0275fac = function MembershipsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MembershipsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_MembershipsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _MembershipsService, factory: _MembershipsService.\u0275fac, providedIn: "root" });
var MembershipsService = _MembershipsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(MembershipsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/news.service.ts
var _NewsService = class _NewsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  listNew(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listNew.");
    }
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    if (program2 === null || program2 === void 0) {
      throw new Error("Required parameter program2 was null or undefined when calling listNew.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const language = requestParameters == null ? void 0 : requestParameters.language;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    const priority = requestParameters == null ? void 0 : requestParameters.priority;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, language, "language");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, priority, "priority");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/news`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_NewsService.\u0275fac = function NewsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _NewsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_NewsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _NewsService, factory: _NewsService.\u0275fac, providedIn: "root" });
var NewsService = _NewsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NewsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/passes.service.ts
var _PassesService = class _PassesService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  associatePass(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling associatePass.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const associatePassRequest = requestParameters == null ? void 0 : requestParameters.associatePassRequest;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/pass`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: associatePassRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  disassociatePass(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling disassociatePass.");
    }
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling disassociatePass.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/pass/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("delete", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  listPass(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listPass.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const disabled = requestParameters == null ? void 0 : requestParameters.disabled;
    const model = requestParameters == null ? void 0 : requestParameters.model;
    const modelIn = requestParameters == null ? void 0 : requestParameters.modelIn;
    const passId = requestParameters == null ? void 0 : requestParameters.passId;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    const type = requestParameters == null ? void 0 : requestParameters.type;
    const typeIn = requestParameters == null ? void 0 : requestParameters.typeIn;
    const user = requestParameters == null ? void 0 : requestParameters.user;
    const uid = requestParameters == null ? void 0 : requestParameters.uid;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, disabled, "disabled");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, model, "model");
    if (modelIn) {
      modelIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "model_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, passId, "pass_id");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, type, "type");
    if (typeIn) {
      typeIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "type_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, user, "user");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, uid, "uid");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/pass`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrievePass(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrievePass.");
    }
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrievePass.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/pass/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_PassesService.\u0275fac = function PassesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _PassesService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_PassesService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _PassesService, factory: _PassesService.\u0275fac, providedIn: "root" });
var PassesService = _PassesService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PassesService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/programs.service.ts
var _ProgramsService = class _ProgramsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  retrieveProgram(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveProgram.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const language = requestParameters == null ? void 0 : requestParameters.language;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, language, "language");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/programs`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_ProgramsService.\u0275fac = function ProgramsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ProgramsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_ProgramsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ProgramsService, factory: _ProgramsService.\u0275fac, providedIn: "root" });
var ProgramsService = _ProgramsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ProgramsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/registrations.service.ts
var _RegistrationsService = class _RegistrationsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  retrieveRegistration(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveRegistration.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists/registrations`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  updateRegistration(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling updateRegistration.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/cyclists/registrations`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_RegistrationsService.\u0275fac = function RegistrationsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RegistrationsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_RegistrationsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _RegistrationsService, factory: _RegistrationsService.\u0275fac, providedIn: "root" });
var RegistrationsService = _RegistrationsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(RegistrationsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/remises.service.ts
var _RemisesService = class _RemisesService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  createRemise(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling createRemise.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const createRemiseRequest = requestParameters == null ? void 0 : requestParameters.createRemiseRequest;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/remises`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: createRemiseRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_RemisesService.\u0275fac = function RemisesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RemisesService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_RemisesService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _RemisesService, factory: _RemisesService.\u0275fac, providedIn: "root" });
var RemisesService = _RemisesService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(RemisesService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/search.service.ts
var _SearchService = class _SearchService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  search(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling search.");
    }
    const query = requestParameters == null ? void 0 : requestParameters.query;
    if (query === null || query === void 0) {
      throw new Error("Required parameter query was null or undefined when calling search.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, query, "query");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/search`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_SearchService.\u0275fac = function SearchService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SearchService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_SearchService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _SearchService, factory: _SearchService.\u0275fac, providedIn: "root" });
var SearchService = _SearchService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(SearchService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/stations.service.ts
var _StationsService = class _StationsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  listStation(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listStation.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    const electrical = requestParameters == null ? void 0 : requestParameters.electrical;
    const favorite = requestParameters == null ? void 0 : requestParameters.favorite;
    const latitude = requestParameters == null ? void 0 : requestParameters.latitude;
    const longitude = requestParameters == null ? void 0 : requestParameters.longitude;
    const option = requestParameters == null ? void 0 : requestParameters.option;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    const score = requestParameters == null ? void 0 : requestParameters.score;
    const scoreGte = requestParameters == null ? void 0 : requestParameters.scoreGte;
    const scoreLte = requestParameters == null ? void 0 : requestParameters.scoreLte;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    const statusIn = requestParameters == null ? void 0 : requestParameters.statusIn;
    const user = requestParameters == null ? void 0 : requestParameters.user;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, cyclist, "cyclist");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, electrical, "electrical");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, favorite, "favorite");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, latitude, "latitude");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, longitude, "longitude");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, option, "option");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, score, "score");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, scoreGte, "score_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, scoreLte, "score_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    if (statusIn) {
      statusIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "status_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, user, "user");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/stations`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveStation(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveStation.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveStation.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    const user = requestParameters == null ? void 0 : requestParameters.user;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, cyclist, "cyclist");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, user, "user");
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/stations/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  toggleStationFavorite(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling toggleStationFavorite.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling toggleStationFavorite.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/stations/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/favorite`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_StationsService.\u0275fac = function StationsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _StationsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_StationsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _StationsService, factory: _StationsService.\u0275fac, providedIn: "root" });
var StationsService = _StationsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(StationsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/subscriptions.service.ts
var _SubscriptionsService = class _SubscriptionsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  createSubscription(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling createSubscription.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const createSubscriptionRequest = requestParameters == null ? void 0 : requestParameters.createSubscriptionRequest;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/subscriptions`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body: createSubscriptionRequest,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_SubscriptionsService.\u0275fac = function SubscriptionsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SubscriptionsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_SubscriptionsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _SubscriptionsService, factory: _SubscriptionsService.\u0275fac, providedIn: "root" });
var SubscriptionsService = _SubscriptionsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(SubscriptionsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/terminationRequests.service.ts
var _TerminationRequestsService = class _TerminationRequestsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  markTripForTermination(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling markTripForTermination.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling markTripForTermination.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/mark_for_termination`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  updateTerminationRequest(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling updateTerminationRequest.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling updateTerminationRequest.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/update_termination_request`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_TerminationRequestsService.\u0275fac = function TerminationRequestsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _TerminationRequestsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_TerminationRequestsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _TerminationRequestsService, factory: _TerminationRequestsService.\u0275fac, providedIn: "root" });
var TerminationRequestsService = _TerminationRequestsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(TerminationRequestsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/terms.service.ts
var _TermsService = class _TermsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  retrieveTerms(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveTerms.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const language = requestParameters == null ? void 0 : requestParameters.language;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, language, "language");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/terms`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_TermsService.\u0275fac = function TermsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _TermsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_TermsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _TermsService, factory: _TermsService.\u0275fac, providedIn: "root" });
var TermsService = _TermsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(TermsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/transactionsDeSolde.service.ts
var _TransactionsDeSoldeService = class _TransactionsDeSoldeService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  listBalanceTransaction(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listBalanceTransaction.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    const type = requestParameters == null ? void 0 : requestParameters.type;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, cyclist, "cyclist");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, type, "type");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/balance_transactions`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveBalanceTransaction(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveBalanceTransaction.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveBalanceTransaction.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/balance_transactions/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_TransactionsDeSoldeService.\u0275fac = function TransactionsDeSoldeService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _TransactionsDeSoldeService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_TransactionsDeSoldeService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _TransactionsDeSoldeService, factory: _TransactionsDeSoldeService.\u0275fac, providedIn: "root" });
var TransactionsDeSoldeService = _TransactionsDeSoldeService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(TransactionsDeSoldeService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/trips.service.ts
var _TripsService = class _TripsService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  createTrip(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling createTrip.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  listTrip(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listTrip.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const created = requestParameters == null ? void 0 : requestParameters.created;
    const createdGt = requestParameters == null ? void 0 : requestParameters.createdGt;
    const createdLt = requestParameters == null ? void 0 : requestParameters.createdLt;
    const createdGte = requestParameters == null ? void 0 : requestParameters.createdGte;
    const createdLte = requestParameters == null ? void 0 : requestParameters.createdLte;
    const agent = requestParameters == null ? void 0 : requestParameters.agent;
    const agentRole = requestParameters == null ? void 0 : requestParameters.agentRole;
    const agentRoleIn = requestParameters == null ? void 0 : requestParameters.agentRoleIn;
    const amount = requestParameters == null ? void 0 : requestParameters.amount;
    const amountGte = requestParameters == null ? void 0 : requestParameters.amountGte;
    const amountLte = requestParameters == null ? void 0 : requestParameters.amountLte;
    const cyclist = requestParameters == null ? void 0 : requestParameters.cyclist;
    const cyclistRole = requestParameters == null ? void 0 : requestParameters.cyclistRole;
    const cyclistRoleIn = requestParameters == null ? void 0 : requestParameters.cyclistRoleIn;
    const distance = requestParameters == null ? void 0 : requestParameters.distance;
    const distanceGte = requestParameters == null ? void 0 : requestParameters.distanceGte;
    const distanceLte = requestParameters == null ? void 0 : requestParameters.distanceLte;
    const endRegion = requestParameters == null ? void 0 : requestParameters.endRegion;
    const endRegionIn = requestParameters == null ? void 0 : requestParameters.endRegionIn;
    const endStation = requestParameters == null ? void 0 : requestParameters.endStation;
    const endStationIn = requestParameters == null ? void 0 : requestParameters.endStationIn;
    const endTimestamp = requestParameters == null ? void 0 : requestParameters.endTimestamp;
    const endTimestampGte = requestParameters == null ? void 0 : requestParameters.endTimestampGte;
    const endTimestampLte = requestParameters == null ? void 0 : requestParameters.endTimestampLte;
    const endTimestampGt = requestParameters == null ? void 0 : requestParameters.endTimestampGt;
    const endTimestampLt = requestParameters == null ? void 0 : requestParameters.endTimestampLt;
    const forfait = requestParameters == null ? void 0 : requestParameters.forfait;
    const forfaitIn = requestParameters == null ? void 0 : requestParameters.forfaitIn;
    const organization = requestParameters == null ? void 0 : requestParameters.organization;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    const startRegion = requestParameters == null ? void 0 : requestParameters.startRegion;
    const startRegionIn = requestParameters == null ? void 0 : requestParameters.startRegionIn;
    const startStation = requestParameters == null ? void 0 : requestParameters.startStation;
    const startStationIn = requestParameters == null ? void 0 : requestParameters.startStationIn;
    const startTimestamp = requestParameters == null ? void 0 : requestParameters.startTimestamp;
    const startTimestampGte = requestParameters == null ? void 0 : requestParameters.startTimestampGte;
    const startTimestampLte = requestParameters == null ? void 0 : requestParameters.startTimestampLte;
    const startTimestampGt = requestParameters == null ? void 0 : requestParameters.startTimestampGt;
    const startTimestampLt = requestParameters == null ? void 0 : requestParameters.startTimestampLt;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    const statusIn = requestParameters == null ? void 0 : requestParameters.statusIn;
    const vehicule = requestParameters == null ? void 0 : requestParameters.vehicule;
    const vehiculeIn = requestParameters == null ? void 0 : requestParameters.vehiculeIn;
    const user = requestParameters == null ? void 0 : requestParameters.user;
    const userRole = requestParameters == null ? void 0 : requestParameters.userRole;
    const userRoleIn = requestParameters == null ? void 0 : requestParameters.userRoleIn;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, created, "created");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdGt, "created_gt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdLt, "created_lt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdGte, "created_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, createdLte, "created_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, agent, "agent");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, agentRole, "agent_role");
    if (agentRoleIn) {
      agentRoleIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "agent_role_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, amount, "amount");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, amountGte, "amount_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, amountLte, "amount_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, cyclist, "cyclist");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, cyclistRole, "cyclist_role");
    if (cyclistRoleIn) {
      cyclistRoleIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "cyclist_role_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, distance, "distance");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, distanceGte, "distance_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, distanceLte, "distance_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endRegion, "end_region");
    if (endRegionIn) {
      endRegionIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "end_region_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endStation, "end_station");
    if (endStationIn) {
      endStationIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "end_station_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endTimestamp, "end_timestamp");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endTimestampGte, "end_timestamp_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endTimestampLte, "end_timestamp_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endTimestampGt, "end_timestamp_gt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endTimestampLt, "end_timestamp_lt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, forfait, "forfait");
    if (forfaitIn) {
      forfaitIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "forfait_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, organization, "organization");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startRegion, "start_region");
    if (startRegionIn) {
      startRegionIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "start_region_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startStation, "start_station");
    if (startStationIn) {
      startStationIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "start_station_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startTimestamp, "start_timestamp");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startTimestampGte, "start_timestamp_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startTimestampLte, "start_timestamp_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startTimestampGt, "start_timestamp_gt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startTimestampLt, "start_timestamp_lt");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    if (statusIn) {
      statusIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "status_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, vehicule, "vehicule");
    if (vehiculeIn) {
      vehiculeIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "vehicule_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, user, "user");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, userRole, "user_role");
    if (userRoleIn) {
      userRoleIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "user_role_in");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  pauseTrip(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling pauseTrip.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/pony/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/pause`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  pauseTrip_1(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling pauseTrip_1.");
    }
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling pauseTrip_1.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/pause`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  recommendVehicule(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling recommendVehicule.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling recommendVehicule.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/recommended`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  resumeTrip(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling resumeTrip.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const body = requestParameters == null ? void 0 : requestParameters.body;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    const consumes = [
      "application/json"
    ];
    const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
    if (httpContentTypeSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Content-Type", httpContentTypeSelected);
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/pony/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/resume`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      body,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  resumeTrip_2(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling resumeTrip_2.");
    }
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling resumeTrip_2.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/resume`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveTrip(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveTrip.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveTrip.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  unlockTrip(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling unlockTrip.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling unlockTrip.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/trips/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}/unlock`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("post", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_TripsService.\u0275fac = function TripsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _TripsService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_TripsService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _TripsService, factory: _TripsService.\u0275fac, providedIn: "root" });
var TripsService = _TripsService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(TripsService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api/zones.service.ts
var _ZonesService = class _ZonesService extends BaseService {
  constructor(httpClient, basePath, configuration) {
    super(basePath, configuration);
    this.httpClient = httpClient;
  }
  listZone(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling listZone.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    const ids = requestParameters == null ? void 0 : requestParameters.ids;
    const limit = requestParameters == null ? void 0 : requestParameters.limit;
    const startingAfter = requestParameters == null ? void 0 : requestParameters.startingAfter;
    const endingBefore = requestParameters == null ? void 0 : requestParameters.endingBefore;
    const withTotal = requestParameters == null ? void 0 : requestParameters.withTotal;
    const latitude = requestParameters == null ? void 0 : requestParameters.latitude;
    const longitude = requestParameters == null ? void 0 : requestParameters.longitude;
    const option = requestParameters == null ? void 0 : requestParameters.option;
    const program2 = requestParameters == null ? void 0 : requestParameters.program2;
    const score = requestParameters == null ? void 0 : requestParameters.score;
    const scoreGte = requestParameters == null ? void 0 : requestParameters.scoreGte;
    const scoreLte = requestParameters == null ? void 0 : requestParameters.scoreLte;
    const status = requestParameters == null ? void 0 : requestParameters.status;
    const statusIn = requestParameters == null ? void 0 : requestParameters.statusIn;
    const type = requestParameters == null ? void 0 : requestParameters.type;
    const typeIn = requestParameters == null ? void 0 : requestParameters.typeIn;
    const vehiculeType = requestParameters == null ? void 0 : requestParameters.vehiculeType;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    if (ids) {
      ids.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "ids");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, limit, "limit");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, startingAfter, "starting_after");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, endingBefore, "ending_before");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, withTotal, "with_total");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, latitude, "latitude");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, longitude, "longitude");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, option, "option");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, program2, "program");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, score, "score");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, scoreGte, "score_gte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, scoreLte, "score_lte");
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, status, "status");
    if (statusIn) {
      statusIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "status_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, type, "type");
    if (typeIn) {
      typeIn.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "type_in");
      });
    }
    localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, vehiculeType, "vehicule_type");
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/zones`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
  retrieveZone(requestParameters, observe = "body", reportProgress = false, options) {
    var _a, _b, _c;
    const program = requestParameters == null ? void 0 : requestParameters.program;
    if (program === null || program === void 0) {
      throw new Error("Required parameter program was null or undefined when calling retrieveZone.");
    }
    const id = requestParameters == null ? void 0 : requestParameters.id;
    if (id === null || id === void 0) {
      throw new Error("Required parameter id was null or undefined when calling retrieveZone.");
    }
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    if (program !== void 0 && program !== null) {
      localVarHeaders = localVarHeaders.set("program", String(program));
    }
    const localVarHttpHeaderAcceptSelected = (_a = options == null ? void 0 : options.httpHeaderAccept) != null ? _a : this.configuration.selectHeaderAccept([
      "application/json"
    ]);
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    const localVarHttpContext = (_b = options == null ? void 0 : options.context) != null ? _b : new HttpContext();
    const localVarTransferCache = (_c = options == null ? void 0 : options.transferCache) != null ? _c : true;
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/zones/${this.configuration.encodeParam({ name: "id", value: id, in: "path", style: "simple", explode: false, dataType: "string", dataFormat: void 0 })}`;
    const { basePath, withCredentials } = this.configuration;
    return this.httpClient.request("get", `${basePath}${localVarPath}`, __spreadProps(__spreadValues({
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_
    }, withCredentials ? { withCredentials } : {}), {
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    }));
  }
};
_ZonesService.\u0275fac = function ZonesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ZonesService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_ZonesService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ZonesService, factory: _ZonesService.\u0275fac, providedIn: "root" });
var ZonesService = _ZonesService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ZonesService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/api-cyclist/api.module.ts
var _ApiModule = class _ApiModule {
  static forRoot(configurationFactory) {
    return {
      ngModule: _ApiModule,
      providers: [{ provide: Configuration, useFactory: configurationFactory }]
    };
  }
  constructor(parentModule, http) {
    if (parentModule) {
      throw new Error("ApiModule is already loaded. Import in your base AppModule only.");
    }
    if (!http) {
      throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575");
    }
  }
};
_ApiModule.\u0275fac = function ApiModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ApiModule)(\u0275\u0275inject(_ApiModule, 12), \u0275\u0275inject(HttpClient, 8));
};
_ApiModule.\u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({ type: _ApiModule });
_ApiModule.\u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({});
var ApiModule = _ApiModule;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ApiModule, [{
    type: NgModule,
    args: [{
      imports: [],
      declarations: [],
      exports: [],
      providers: []
    }]
  }], () => [{ type: ApiModule, decorators: [{
    type: Optional
  }, {
    type: SkipSelf
  }] }, { type: HttpClient, decorators: [{
    type: Optional
  }] }], null);
})();

// src/app/services/utils/subscription-process.service.ts
var _SubscriptionProcessService = class _SubscriptionProcessService {
  constructor(storage) {
    this.storage = storage;
    this.currentProcess = new BehaviorSubject(null);
    this.initFromStorage();
  }
  // Méthodes d'initialisation et de gestion du stockage
  initFromStorage() {
    return __async(this, null, function* () {
      const stored = yield this.storage.get(_SubscriptionProcessService.STORAGE_KEY);
      if (stored) {
        this.currentProcess.next(stored);
      }
    });
  }
  // Méthodes de gestion du processus d'abonnement
  startProcess(forfait, reduction) {
    return __async(this, null, function* () {
      const process = {
        forfait,
        startedAt: Date.now(),
        reduction: reduction && reduction.length > 0 ? reduction : null,
        currentStep: "forfait"
      };
      yield this.storage.set(_SubscriptionProcessService.STORAGE_KEY, process);
      this.currentProcess.next(process);
    });
  }
  // Méthodes de mise à jour
  updateStep(step) {
    return __async(this, null, function* () {
      const current = this.currentProcess.value;
      if (current) {
        const updated = __spreadProps(__spreadValues({}, current), { currentStep: step });
        yield this.storage.set(_SubscriptionProcessService.STORAGE_KEY, updated);
        this.currentProcess.next(updated);
      }
    });
  }
  updateSupportingDocuments(documents) {
    return __async(this, null, function* () {
      const current = this.currentProcess.value;
      if (current) {
        const updated = __spreadProps(__spreadValues({}, current), { supportingDocuments: documents });
        yield this.storage.set(_SubscriptionProcessService.STORAGE_KEY, updated);
        this.currentProcess.next(updated);
      }
    });
  }
  updateReduction(reduction) {
    return __async(this, null, function* () {
      const current = this.currentProcess.value;
      if (current) {
        if (reduction.length > 0) {
          const updated = __spreadProps(__spreadValues({}, current), { reduction });
          yield this.storage.set(_SubscriptionProcessService.STORAGE_KEY, updated);
          this.currentProcess.next(updated);
        } else {
          const updated = __spreadProps(__spreadValues({}, current), { reduction: null });
          yield this.storage.set(_SubscriptionProcessService.STORAGE_KEY, updated);
          this.currentProcess.next(updated);
        }
      } else {
        this.startProcess(null, reduction);
      }
    });
  }
  // Méthodes utilitaires
  clearProcess() {
    return __async(this, null, function* () {
      yield this.storage.remove(_SubscriptionProcessService.STORAGE_KEY);
      this.currentProcess.next(null);
    });
  }
  getCurrentProcess() {
    return this.currentProcess.asObservable();
  }
  // Méthodes de validation et de préparation des données
  hasForfaitSelected() {
    return __async(this, null, function* () {
      var _a;
      const process = this.currentProcess.value;
      return !!((_a = process == null ? void 0 : process.forfait) == null ? void 0 : _a.id);
    });
  }
  getCreateAbonnementPayload() {
    return __async(this, null, function* () {
      var _a;
      const process = this.currentProcess.value;
      if (!((_a = process == null ? void 0 : process.forfait) == null ? void 0 : _a.id))
        return null;
      return __spreadValues(__spreadValues({
        forfaitID: process.forfait.id
      }, process.reduction && { reduction: process.reduction }), process.supportingDocuments && {
        supporting_documents: process.supportingDocuments
      });
    });
  }
};
_SubscriptionProcessService.STORAGE_KEY = "subscription_process";
_SubscriptionProcessService.\u0275fac = function SubscriptionProcessService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SubscriptionProcessService)(\u0275\u0275inject(StorageService));
};
_SubscriptionProcessService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _SubscriptionProcessService, factory: _SubscriptionProcessService.\u0275fac, providedIn: "root" });
var SubscriptionProcessService = _SubscriptionProcessService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(SubscriptionProcessService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: StorageService }], null);
})();

// src/api-cyclist/api/aPIAccount.service.ts
var _APIAccountService = class _APIAccountService {
  constructor(httpClient, basePath, configuration) {
    this.httpClient = httpClient;
    this.basePath = environment.basePath;
    this.defaultHeaders = new HttpHeaders();
    this.configuration = new Configuration();
    if (configuration) {
      this.configuration = configuration;
    }
    if (typeof this.configuration.basePath !== "string") {
      const firstBasePath = Array.isArray(basePath) ? basePath[0] : void 0;
      if (firstBasePath != void 0) {
        basePath = firstBasePath;
      }
      if (typeof basePath !== "string") {
        basePath = this.basePath;
      }
      this.configuration.basePath = basePath;
    }
    this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
  }
  // @ts-ignore
  addToHttpParams(httpParams, value, key) {
    if (typeof value === "object" && value instanceof Date === false) {
      httpParams = this.addToHttpParamsRecursive(httpParams, value);
    } else {
      httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
    }
    return httpParams;
  }
  addToHttpParamsRecursive(httpParams, value, key) {
    if (value == null) {
      return httpParams;
    }
    if (typeof value === "object") {
      if (Array.isArray(value)) {
        ;
        value.forEach((elem) => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
      } else if (value instanceof Date) {
        if (key != null) {
          httpParams = httpParams.append(key, value.toISOString().substring(0, 10));
        } else {
          throw Error("key may not be null if value is Date");
        }
      } else {
        Object.keys(value).forEach((k) => httpParams = this.addToHttpParamsRecursive(httpParams, value[k], key != null ? `${key}.${k}` : k));
      }
    } else if (key != null) {
      httpParams = httpParams.append(key, value);
    } else {
      throw Error("key may not be null if value is not object or array");
    }
    return httpParams;
  }
  deleteMyUser(requestParameters, observe = "body", reportProgress = false, options) {
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    let localVarHttpHeaderAcceptSelected = options && options.httpHeaderAccept;
    if (localVarHttpHeaderAcceptSelected === void 0) {
      const httpHeaderAccepts = ["application/json"];
      localVarHttpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
    }
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    let localVarHttpContext = options && options.context;
    if (localVarHttpContext === void 0) {
      localVarHttpContext = new HttpContext();
    }
    let localVarTransferCache = options && options.transferCache;
    if (localVarTransferCache === void 0) {
      localVarTransferCache = true;
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/users/me`;
    return this.httpClient.request("delete", `${this.configuration.basePath}${localVarPath}`, {
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_,
      withCredentials: this.configuration.withCredentials,
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    });
  }
  retrieveMyUser(requestParameters, observe = "body", reportProgress = false, options) {
    const liveMode = requestParameters == null ? void 0 : requestParameters.liveMode;
    const expand = requestParameters == null ? void 0 : requestParameters.expand;
    let localVarQueryParameters = new HttpParams({ encoder: this.encoder });
    if (expand) {
      expand.forEach((element) => {
        localVarQueryParameters = this.addToHttpParams(localVarQueryParameters, element, "expand");
      });
    }
    let localVarHeaders = this.defaultHeaders;
    if (liveMode !== void 0 && liveMode !== null) {
      localVarHeaders = localVarHeaders.set("Live-Mode", String(liveMode));
    }
    let localVarHttpHeaderAcceptSelected = options && options.httpHeaderAccept;
    if (localVarHttpHeaderAcceptSelected === void 0) {
      const httpHeaderAccepts = ["application/json"];
      localVarHttpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
    }
    if (localVarHttpHeaderAcceptSelected !== void 0) {
      localVarHeaders = localVarHeaders.set("Accept", localVarHttpHeaderAcceptSelected);
    }
    let localVarHttpContext = options && options.context;
    if (localVarHttpContext === void 0) {
      localVarHttpContext = new HttpContext();
    }
    let localVarTransferCache = options && options.transferCache;
    if (localVarTransferCache === void 0) {
      localVarTransferCache = true;
    }
    let responseType_ = "json";
    if (localVarHttpHeaderAcceptSelected) {
      if (localVarHttpHeaderAcceptSelected.startsWith("text")) {
        responseType_ = "text";
      } else if (this.configuration.isJsonMime(localVarHttpHeaderAcceptSelected)) {
        responseType_ = "json";
      } else {
        responseType_ = "blob";
      }
    }
    let localVarPath = `/users/me`;
    return this.httpClient.request("get", `${this.configuration.basePath}${localVarPath}`, {
      context: localVarHttpContext,
      params: localVarQueryParameters,
      responseType: responseType_,
      withCredentials: this.configuration.withCredentials,
      headers: localVarHeaders,
      observe,
      transferCache: localVarTransferCache,
      reportProgress
    });
  }
};
_APIAccountService.\u0275fac = function APIAccountService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _APIAccountService)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(BASE_PATH, 8), \u0275\u0275inject(Configuration, 8));
};
_APIAccountService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _APIAccountService, factory: _APIAccountService.\u0275fac, providedIn: "root" });
var APIAccountService = _APIAccountService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(APIAccountService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: HttpClient }, { type: void 0, decorators: [{
    type: Optional
  }, {
    type: Inject,
    args: [BASE_PATH]
  }] }, { type: Configuration, decorators: [{
    type: Optional
  }] }], null);
})();

// src/app/services/api-wrappers/account.service.ts
var _AccountService = class _AccountService {
  constructor(CyclistsService2, accountService, subscriptionProcess, registrationsService, errorHandler, toastService, translateService) {
    this.CyclistsService = CyclistsService2;
    this.accountService = accountService;
    this.subscriptionProcess = subscriptionProcess;
    this.registrationsService = registrationsService;
    this.errorHandler = errorHandler;
    this.toastService = toastService;
    this.translateService = translateService;
    this.cyclistState = signal({
      state: "unknown",
      blocked_reasons: ["Unknown account state"]
    });
  }
  loadCyclist() {
    return __async(this, null, function* () {
      yield this.registrationsService.retrieveRegistration({
        program: environment.program,
        liveMode: environment.production
      }).toPromise();
      return new Promise((resolve) => {
        this.CyclistsService.retrieveCyclist({
          program: environment.program,
          currentProgram: environment.program,
          expand: [
            "registrations.customer,kyc_documents,registrations.grace_period_usage,registrations.memberships"
          ],
          liveMode: environment.production
        }).subscribe({
          next: (cyclist) => {
            this.checkCyclistAccount(cyclist);
            resolve(cyclist);
          },
          error: (error) => __async(this, null, function* () {
            this.cyclistState.set({
              state: "error",
              error,
              blocked_reasons: ["Error loading account"]
            });
            this.errorHandler.handleError(error);
            throw error;
          })
        });
      });
    });
  }
  deleteAccount() {
    return __async(this, null, function* () {
      const currentState = this.cyclistState();
      if (currentState.state !== "unknown" && currentState.state !== "error" && currentState.state !== "deletion_requested" && currentState.state !== "deleted") {
        this.accountService.deleteMyUser().subscribe({
          next: () => __async(this, null, function* () {
            if ("cyclist" in currentState) {
              if (currentState.state === "unconfirmed") {
                this.cyclistState.set({
                  state: "unconfirmed",
                  cyclist: currentState.cyclist,
                  blocked_reasons: currentState.blocked_reasons,
                  deletionRequested: true
                });
              } else {
                this.cyclistState.set({
                  state: "deletion_requested",
                  cyclist: currentState.cyclist,
                  blocked_reasons: ["Deletion requested"]
                });
              }
            }
            this.subscriptionProcess.clearProcess();
          }),
          error: (err) => __async(this, null, function* () {
            this.errorHandler.handleError(err);
            throw err;
          })
        });
      } else {
        this.toastService.createWithJustMessage(this.translateService.instant("generic.deletion_account_impossible"), ToastType.Error);
        throw new Error("Account is already deleted");
      }
    });
  }
  changeEmail(email) {
    return new Promise((resolve, reject) => {
      this.CyclistsService.changeCyclistEmail({
        changeCyclistEmailRequest: {
          email
        }
      }).subscribe({
        next: (cyclist) => {
          this.checkCyclistAccount(cyclist);
          this.toastService.createWithJustMessage(this.translateService.instant("settings.infos.email_changed"), ToastType.Success);
          resolve(cyclist);
        },
        error: (error) => {
          this.errorHandler.handleError(error);
          reject(error);
        }
      });
    });
  }
  /**
   * Gets the current cyclist if available, or throws an error if not
   * @returns The current cyclist
   * @throws Error if cyclist is not available
   */
  getCurrentCyclist() {
    const currentState = this.cyclistState();
    if (!("cyclist" in currentState)) {
      throw new Error("No cyclist available");
    }
    return currentState.cyclist;
  }
  /**
   * Updates the cyclist data while preserving the current state
   * @param cyclist The updated cyclist data
   */
  updateCyclistData(cyclist) {
    const currentState = this.cyclistState();
    if (currentState.state !== "unknown" && currentState.state !== "error") {
      this.cyclistState.set(__spreadProps(__spreadValues({}, currentState), {
        cyclist
      }));
    }
  }
  checkCyclistAccount(cyclist) {
    var _a;
    const currentState = this.cyclistState();
    const getFilteredBlockedReasons = (reasons) => reasons.filter((reason) => reason !== "Unknown account state");
    if ("blocked_reasons" in currentState) {
      switch (cyclist.status) {
        case "active":
          this.cyclistState.set({
            state: "active",
            cyclist,
            blocked_reasons: getFilteredBlockedReasons(currentState.blocked_reasons)
          });
          break;
        case "unconfirmed":
          this.cyclistState.set({
            state: "unconfirmed",
            cyclist,
            blocked_reasons: [
              ...getFilteredBlockedReasons(currentState.blocked_reasons),
              "Account not confirmed"
            ],
            deletionRequested: false
          });
          break;
        case "deleted":
          this.cyclistState.set({
            state: "deleted",
            cyclist,
            blocked_reasons: [
              ...getFilteredBlockedReasons(currentState.blocked_reasons),
              "Account deleted"
            ]
          });
          break;
        case "deletion_requested":
          this.cyclistState.set({
            state: "deletion_requested",
            cyclist,
            blocked_reasons: [
              ...getFilteredBlockedReasons(currentState.blocked_reasons),
              "Account deletion requested"
            ]
          });
          break;
        case "blocked":
          this.cyclistState.set({
            state: "blocked",
            cyclist,
            blocked_reasons: [
              ...getFilteredBlockedReasons(currentState.blocked_reasons),
              "Account blocked"
            ]
          });
          break;
        default:
          this.cyclistState.set({
            state: "unknown",
            blocked_reasons: [
              ...getFilteredBlockedReasons(currentState.blocked_reasons),
              "Unknown account state"
            ]
          });
          break;
      }
      if (((_a = cyclist.registrations) == null ? void 0 : _a.data[0].status) === "blocked") {
        this.cyclistState.set({
          state: "blocked",
          cyclist,
          blocked_reasons: [
            ...getFilteredBlockedReasons(currentState.blocked_reasons),
            "Account blocked"
          ]
        });
      }
    }
  }
  /**
   * Safely gets blocked reasons from the current cyclist state
   * External users bypass blocked reasons
   * @returns Array of blocked reasons, empty array if none exist or if user is external
   */
  getBlockedReasons() {
    const currentState = this.cyclistState();
    return "blocked_reasons" in currentState ? currentState.blocked_reasons : [];
  }
  /**
   * Checks if the cyclist has any blocked reasons
   * @returns true if there are blocked reasons, false otherwise
   */
  hasBlockedReasons() {
    return this.getBlockedReasons().length > 0;
  }
  /**
   * Checks if the cyclist has a specific blocked reason
   * @param reason The reason to check for
   * @returns true if the reason exists, false otherwise
   */
  hasBlockedReason(reason) {
    return this.getBlockedReasons().includes(reason);
  }
  addBlockedReason(reason) {
    var _a, _b, _c;
    const currentState = this.cyclistState();
    if ("cyclist" in currentState && (currentState.cyclist.role == "guest" || ((_c = (_b = (_a = currentState.cyclist.registrations) == null ? void 0 : _a.data) == null ? void 0 : _b[0]) == null ? void 0 : _c.role) == "guest")) {
      return;
    }
    if ("blocked_reasons" in currentState && !currentState.blocked_reasons.includes(reason)) {
      this.cyclistState.set(__spreadProps(__spreadValues({}, currentState), {
        blocked_reasons: [...currentState.blocked_reasons, reason]
      }));
    }
  }
  removeBlockedReason(reason) {
    const currentState = this.cyclistState();
    if (currentState.state !== "unknown" && currentState.state !== "error" && "blocked_reasons" in currentState && currentState.blocked_reasons.includes(reason)) {
      const newReasons = currentState.blocked_reasons.filter((r) => r !== reason);
      this.cyclistState.set(__spreadProps(__spreadValues({}, currentState), {
        blocked_reasons: newReasons
      }));
    }
  }
  hasMissingPaymentMethodOrCgu() {
    var _a, _b, _c, _d, _e, _f;
    const cyclistState = this.cyclistState();
    if ("cyclist" in cyclistState && (cyclistState.cyclist.role == "guest" || ((_c = (_b = (_a = cyclistState.cyclist.registrations) == null ? void 0 : _a.data) == null ? void 0 : _b[0]) == null ? void 0 : _c.role) == "guest")) {
      return false;
    }
    if (cyclistState.state !== "unknown" && cyclistState.state !== "error") {
      if (!((_d = cyclistState.cyclist.registrations) == null ? void 0 : _d.data[0].terms_validated) || !((_f = (_e = cyclistState.cyclist.registrations) == null ? void 0 : _e.data[0].customer) == null ? void 0 : _f.invoice_settings.default_payment_method)) {
        return true;
      } else {
        return false;
      }
    } else {
      return true;
    }
  }
  /**
   * Checks if the current user has requested account deletion
   * @returns true if deletion has been requested, false otherwise
   */
  hasRequestedDeletion() {
    const currentState = this.cyclistState();
    if (currentState.state === "deletion_requested") {
      return true;
    }
    if (currentState.state === "unconfirmed" && currentState.deletionRequested) {
      return true;
    }
    return false;
  }
};
_AccountService.\u0275fac = function AccountService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AccountService)(\u0275\u0275inject(CyclistsService), \u0275\u0275inject(APIAccountService), \u0275\u0275inject(SubscriptionProcessService), \u0275\u0275inject(RegistrationsService), \u0275\u0275inject(ErrorHandlerService), \u0275\u0275inject(ToastService), \u0275\u0275inject(TranslateService));
};
_AccountService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _AccountService, factory: _AccountService.\u0275fac, providedIn: "root" });
var AccountService = _AccountService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(AccountService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: CyclistsService }, { type: APIAccountService }, { type: SubscriptionProcessService }, { type: RegistrationsService }, { type: ErrorHandlerService }, { type: ToastService }, { type: TranslateService }], null);
})();

export {
  BASE_PATH,
  CustomHttpParameterCodec,
  Configuration,
  AbonnementsService,
  CardsService,
  CyclistsService,
  DefaultService,
  DevicesService,
  FAQService,
  FacturesService,
  FileUploadService,
  ForfaitsService,
  KYCService,
  NewsService,
  NotificationPreferencesService,
  PassesService,
  ProgramsService,
  RegistrationsService,
  RemisesService,
  SearchService,
  StationsService,
  TerminationRequestsService,
  TermsService,
  TransactionsDeSoldeService,
  TripsService,
  VehiculesService,
  ZonesService,
  SubscriptionProcessService,
  AccountService
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2FwaS1jeWNsaXN0L3ZhcmlhYmxlcy50cyIsICJzcmMvYXBpLWN5Y2xpc3QvZW5jb2Rlci50cyIsICJzcmMvYXBpLWN5Y2xpc3QvY29uZmlndXJhdGlvbi50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpLmJhc2Uuc2VydmljZS50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpL2N5Y2xpc3RzLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS9ub3RpZmljYXRpb25QcmVmZXJlbmNlcy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvdmVoaWN1bGVzLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS9hYm9ubmVtZW50cy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvY2FyZHMuc2VydmljZS50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpL2RlZmF1bHQuc2VydmljZS50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpL2RldmljZXMuc2VydmljZS50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpL2RvY2tzLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS9mQVEuc2VydmljZS50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpL2ZhY3R1cmVzLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS9maWxlVXBsb2FkLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS9mb3JmYWl0cy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkva1lDLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS9tZW1iZXJzaGlwcy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvbmV3cy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvcGFzc2VzLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS9wcm9ncmFtcy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvcmVnaXN0cmF0aW9ucy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvcmVtaXNlcy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvc2VhcmNoLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS9zdGF0aW9ucy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvc3Vic2NyaXB0aW9ucy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvdGVybWluYXRpb25SZXF1ZXN0cy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkvdGVybXMuc2VydmljZS50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpL3RyYW5zYWN0aW9uc0RlU29sZGUuc2VydmljZS50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpL3RyaXBzLnNlcnZpY2UudHMiLCAic3JjL2FwaS1jeWNsaXN0L2FwaS96b25lcy5zZXJ2aWNlLnRzIiwgInNyYy9hcGktY3ljbGlzdC9hcGkubW9kdWxlLnRzIiwgInNyYy9hcHAvc2VydmljZXMvdXRpbHMvc3Vic2NyaXB0aW9uLXByb2Nlc3Muc2VydmljZS50cyIsICJzcmMvYXBpLWN5Y2xpc3QvYXBpL2FQSUFjY291bnQuc2VydmljZS50cyIsICJzcmMvYXBwL3NlcnZpY2VzL2FwaS13cmFwcGVycy9hY2NvdW50LnNlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmV4cG9ydCBjb25zdCBCQVNFX1BBVEggPSBuZXcgSW5qZWN0aW9uVG9rZW48c3RyaW5nPignYmFzZVBhdGgnKTtcbmV4cG9ydCBjb25zdCBDT0xMRUNUSU9OX0ZPUk1BVFMgPSB7XG4gICAgJ2Nzdic6ICcsJyxcbiAgICAndHN2JzogJyAgICcsXG4gICAgJ3Nzdic6ICcgJyxcbiAgICAncGlwZXMnOiAnfCdcbn1cbiIsICJpbXBvcnQgeyBIdHRwUGFyYW1ldGVyQ29kZWMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cbi8qKlxuICogQ3VzdG9tIEh0dHBQYXJhbWV0ZXJDb2RlY1xuICogV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9pc3N1ZXMvMTgyNjFcbiAqL1xuZXhwb3J0IGNsYXNzIEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyBpbXBsZW1lbnRzIEh0dHBQYXJhbWV0ZXJDb2RlYyB7XG4gICAgZW5jb2RlS2V5KGs6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoayk7XG4gICAgfVxuICAgIGVuY29kZVZhbHVlKHY6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodik7XG4gICAgfVxuICAgIGRlY29kZUtleShrOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGspO1xuICAgIH1cbiAgICBkZWNvZGVWYWx1ZSh2OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBIdHRwSGVhZGVycywgSHR0cFBhcmFtcywgSHR0cFBhcmFtZXRlckNvZGVjIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuL3BhcmFtJztcblxuZXhwb3J0IGludGVyZmFjZSBDb25maWd1cmF0aW9uUGFyYW1ldGVycyB7XG4gICAgLyoqXG4gICAgICogIEBkZXByZWNhdGVkIFNpbmNlIDUuMC4gVXNlIGNyZWRlbnRpYWxzIGluc3RlYWRcbiAgICAgKi9cbiAgICBhcGlLZXlzPzoge1sga2V5OiBzdHJpbmcgXTogc3RyaW5nfTtcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgICBwYXNzd29yZD86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiAgQGRlcHJlY2F0ZWQgU2luY2UgNS4wLiBVc2UgY3JlZGVudGlhbHMgaW5zdGVhZFxuICAgICAqL1xuICAgIGFjY2Vzc1Rva2VuPzogc3RyaW5nIHwgKCgpID0+IHN0cmluZyk7XG4gICAgYmFzZVBhdGg/OiBzdHJpbmc7XG4gICAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBUYWtlcyBjYXJlIG9mIGVuY29kaW5nIHF1ZXJ5LSBhbmQgZm9ybS1wYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIGVuY29kZXI/OiBIdHRwUGFyYW1ldGVyQ29kZWM7XG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgdGhlIGRlZmF1bHQgbWV0aG9kIGZvciBlbmNvZGluZyBwYXRoIHBhcmFtZXRlcnMgaW4gdmFyaW91c1xuICAgICAqIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vT0FJL09wZW5BUEktU3BlY2lmaWNhdGlvbi9ibG9iL21haW4vdmVyc2lvbnMvMy4xLjAubWQjc3R5bGUtdmFsdWVzXCI+c3R5bGVzPC9hPi5cbiAgICAgKiA8cD5cbiAgICAgKiBTZWUge0BsaW5rIFJFQURNRS5tZH0gZm9yIG1vcmUgZGV0YWlsc1xuICAgICAqIDwvcD5cbiAgICAgKi9cbiAgICBlbmNvZGVQYXJhbT86IChwYXJhbTogUGFyYW0pID0+IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBUaGUga2V5cyBhcmUgdGhlIG5hbWVzIGluIHRoZSBzZWN1cml0eVNjaGVtZXMgc2VjdGlvbiBvZiB0aGUgT3BlbkFQSVxuICAgICAqIGRvY3VtZW50LiBUaGV5IHNob3VsZCBtYXAgdG8gdGhlIHZhbHVlIHVzZWQgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAgICogbWludXMgYW55IHN0YW5kYXJkIHByZWZpeGVzIHN1Y2ggYXMgJ0Jhc2ljJyBvciAnQmVhcmVyJy5cbiAgICAgKi9cbiAgICBjcmVkZW50aWFscz86IHtbIGtleTogc3RyaW5nIF06IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcgfCB1bmRlZmluZWQpfTtcbn1cblxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRpb24ge1xuICAgIC8qKlxuICAgICAqICBAZGVwcmVjYXRlZCBTaW5jZSA1LjAuIFVzZSBjcmVkZW50aWFscyBpbnN0ZWFkXG4gICAgICovXG4gICAgYXBpS2V5cz86IHtbIGtleTogc3RyaW5nIF06IHN0cmluZ307XG4gICAgdXNlcm5hbWU/OiBzdHJpbmc7XG4gICAgcGFzc3dvcmQ/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogIEBkZXByZWNhdGVkIFNpbmNlIDUuMC4gVXNlIGNyZWRlbnRpYWxzIGluc3RlYWRcbiAgICAgKi9cbiAgICBhY2Nlc3NUb2tlbj86IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xuICAgIGJhc2VQYXRoPzogc3RyaW5nO1xuICAgIHdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogVGFrZXMgY2FyZSBvZiBlbmNvZGluZyBxdWVyeS0gYW5kIGZvcm0tcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICBlbmNvZGVyPzogSHR0cFBhcmFtZXRlckNvZGVjO1xuICAgIC8qKlxuICAgICAqIEVuY29kaW5nIG9mIHZhcmlvdXMgcGF0aCBwYXJhbWV0ZXJcbiAgICAgKiA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL09BSS9PcGVuQVBJLVNwZWNpZmljYXRpb24vYmxvYi9tYWluL3ZlcnNpb25zLzMuMS4wLm1kI3N0eWxlLXZhbHVlc1wiPnN0eWxlczwvYT4uXG4gICAgICogPHA+XG4gICAgICogU2VlIHtAbGluayBSRUFETUUubWR9IGZvciBtb3JlIGRldGFpbHNcbiAgICAgKiA8L3A+XG4gICAgICovXG4gICAgZW5jb2RlUGFyYW06IChwYXJhbTogUGFyYW0pID0+IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBUaGUga2V5cyBhcmUgdGhlIG5hbWVzIGluIHRoZSBzZWN1cml0eVNjaGVtZXMgc2VjdGlvbiBvZiB0aGUgT3BlbkFQSVxuICAgICAqIGRvY3VtZW50LiBUaGV5IHNob3VsZCBtYXAgdG8gdGhlIHZhbHVlIHVzZWQgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAgICogbWludXMgYW55IHN0YW5kYXJkIHByZWZpeGVzIHN1Y2ggYXMgJ0Jhc2ljJyBvciAnQmVhcmVyJy5cbiAgICAgKi9cbiAgICBjcmVkZW50aWFsczoge1sga2V5OiBzdHJpbmcgXTogc3RyaW5nIHwgKCgpID0+IHN0cmluZyB8IHVuZGVmaW5lZCl9O1xuXG5jb25zdHJ1Y3Rvcih7IGFjY2Vzc1Rva2VuLCBhcGlLZXlzLCBiYXNlUGF0aCwgY3JlZGVudGlhbHMsIGVuY29kZVBhcmFtLCBlbmNvZGVyLCBwYXNzd29yZCwgdXNlcm5hbWUsIHdpdGhDcmVkZW50aWFscyB9OiBDb25maWd1cmF0aW9uUGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGlmIChhcGlLZXlzKSB7XG4gICAgICAgICAgICB0aGlzLmFwaUtleXMgPSBhcGlLZXlzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VybmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhc3N3b3JkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNjZXNzVG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiYXNlUGF0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmJhc2VQYXRoID0gYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpdGhDcmVkZW50aWFscyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLndpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFscztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5jb2Rlcikge1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVyID0gZW5jb2RlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuY29kZVBhcmFtID0gZW5jb2RlUGFyYW0gPz8gKHBhcmFtID0+IHRoaXMuZGVmYXVsdEVuY29kZVBhcmFtKHBhcmFtKSk7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscyA/PyB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3QgdGhlIGNvcnJlY3QgY29udGVudC10eXBlIHRvIHVzZSBmb3IgYSByZXF1ZXN0LlxuICAgICAqIFVzZXMge0BsaW5rIENvbmZpZ3VyYXRpb24jaXNKc29uTWltZX0gdG8gZGV0ZXJtaW5lIHRoZSBjb3JyZWN0IGNvbnRlbnQtdHlwZS5cbiAgICAgKiBJZiBubyBjb250ZW50IHR5cGUgaXMgZm91bmQgcmV0dXJuIHRoZSBmaXJzdCBmb3VuZCB0eXBlIGlmIHRoZSBjb250ZW50VHlwZXMgaXMgbm90IGVtcHR5XG4gICAgICogQHBhcmFtIGNvbnRlbnRUeXBlcyAtIHRoZSBhcnJheSBvZiBjb250ZW50IHR5cGVzIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3Igc2VsZWN0aW9uXG4gICAgICogQHJldHVybnMgdGhlIHNlbGVjdGVkIGNvbnRlbnQtdHlwZSBvciA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIG5vIHNlbGVjdGlvbiBjb3VsZCBiZSBtYWRlLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZWxlY3RIZWFkZXJDb250ZW50VHlwZSAoY29udGVudFR5cGVzOiBzdHJpbmdbXSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChjb250ZW50VHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHlwZSA9IGNvbnRlbnRUeXBlcy5maW5kKCh4OiBzdHJpbmcpID0+IHRoaXMuaXNKc29uTWltZSh4KSk7XG4gICAgICAgIGlmICh0eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50VHlwZXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0IHRoZSBjb3JyZWN0IGFjY2VwdCBjb250ZW50LXR5cGUgdG8gdXNlIGZvciBhIHJlcXVlc3QuXG4gICAgICogVXNlcyB7QGxpbmsgQ29uZmlndXJhdGlvbiNpc0pzb25NaW1lfSB0byBkZXRlcm1pbmUgdGhlIGNvcnJlY3QgYWNjZXB0IGNvbnRlbnQtdHlwZS5cbiAgICAgKiBJZiBubyBjb250ZW50IHR5cGUgaXMgZm91bmQgcmV0dXJuIHRoZSBmaXJzdCBmb3VuZCB0eXBlIGlmIHRoZSBjb250ZW50VHlwZXMgaXMgbm90IGVtcHR5XG4gICAgICogQHBhcmFtIGFjY2VwdHMgLSB0aGUgYXJyYXkgb2YgY29udGVudCB0eXBlcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHNlbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJucyB0aGUgc2VsZWN0ZWQgY29udGVudC10eXBlIG9yIDxjb2RlPnVuZGVmaW5lZDwvY29kZT4gaWYgbm8gc2VsZWN0aW9uIGNvdWxkIGJlIG1hZGUuXG4gICAgICovXG4gICAgcHVibGljIHNlbGVjdEhlYWRlckFjY2VwdChhY2NlcHRzOiBzdHJpbmdbXSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChhY2NlcHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGUgPSBhY2NlcHRzLmZpbmQoKHg6IHN0cmluZykgPT4gdGhpcy5pc0pzb25NaW1lKHgpKTtcbiAgICAgICAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGFjY2VwdHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIGdpdmVuIE1JTUUgaXMgYSBKU09OIE1JTUUuXG4gICAgICogSlNPTiBNSU1FIGV4YW1wbGVzOlxuICAgICAqICAgYXBwbGljYXRpb24vanNvblxuICAgICAqICAgYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEY4XG4gICAgICogICBBUFBMSUNBVElPTi9KU09OXG4gICAgICogICBhcHBsaWNhdGlvbi92bmQuY29tcGFueStqc29uXG4gICAgICogQHBhcmFtIG1pbWUgLSBNSU1FIChNdWx0aXB1cnBvc2UgSW50ZXJuZXQgTWFpbCBFeHRlbnNpb25zKVxuICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgZ2l2ZW4gTUlNRSBpcyBKU09OLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgcHVibGljIGlzSnNvbk1pbWUobWltZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGpzb25NaW1lOiBSZWdFeHAgPSBuZXcgUmVnRXhwKCdeKGFwcGxpY2F0aW9uXFwvanNvbnxbXjsvIFxcdF0rXFwvW147LyBcXHRdK1srXWpzb24pWyBcXHRdKig7LiopPyQnLCAnaScpO1xuICAgICAgICByZXR1cm4gbWltZSAhPT0gbnVsbCAmJiAoanNvbk1pbWUudGVzdChtaW1lKSB8fCBtaW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhcHBsaWNhdGlvbi9qc29uLXBhdGNoK2pzb24nKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9va3VwQ3JlZGVudGlhbChrZXk6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jcmVkZW50aWFsc1trZXldO1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICA/IHZhbHVlKClcbiAgICAgICAgICAgIDogdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZENyZWRlbnRpYWxUb0hlYWRlcnMoY3JlZGVudGlhbEtleTogc3RyaW5nLCBoZWFkZXJOYW1lOiBzdHJpbmcsIGhlYWRlcnM6IEh0dHBIZWFkZXJzLCBwcmVmaXg/OiBzdHJpbmcpOiBIdHRwSGVhZGVycyB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5sb29rdXBDcmVkZW50aWFsKGNyZWRlbnRpYWxLZXkpO1xuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgICAgID8gaGVhZGVycy5zZXQoaGVhZGVyTmFtZSwgKHByZWZpeCA/PyAnJykgKyB2YWx1ZSlcbiAgICAgICAgICAgIDogaGVhZGVycztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQ3JlZGVudGlhbFRvUXVlcnkoY3JlZGVudGlhbEtleTogc3RyaW5nLCBwYXJhbU5hbWU6IHN0cmluZywgcXVlcnk6IEh0dHBQYXJhbXMpOiBIdHRwUGFyYW1zIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmxvb2t1cENyZWRlbnRpYWwoY3JlZGVudGlhbEtleSk7XG4gICAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgICAgICAgPyBxdWVyeS5zZXQocGFyYW1OYW1lLCB2YWx1ZSlcbiAgICAgICAgICAgIDogcXVlcnk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWZhdWx0RW5jb2RlUGFyYW0ocGFyYW06IFBhcmFtKTogc3RyaW5nIHtcbiAgICAgICAgLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBleGlzdHMgYXMgZmFsbGJhY2sgZm9yIG1pc3NpbmcgY29uZmlndXJhdGlvblxuICAgICAgICAvLyBhbmQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHRvIG9sZGVyIHR5cGVzY3JpcHQtYW5ndWxhciBnZW5lcmF0b3IgdmVyc2lvbnMuXG4gICAgICAgIC8vIEl0IG9ubHkgd29ya3MgZm9yIHRoZSAnc2ltcGxlJyBwYXJhbWV0ZXIgc3R5bGUuXG4gICAgICAgIC8vIERhdGUtaGFuZGxpbmcgb25seSB3b3JrcyBmb3IgdGhlICdkYXRlLXRpbWUnIGZvcm1hdC5cbiAgICAgICAgLy8gQWxsIG90aGVyIHN0eWxlcyBhbmQgRGF0ZS1mb3JtYXRzIGFyZSBwcm9iYWJseSBoYW5kbGVkIGluY29ycmVjdGx5LlxuICAgICAgICAvL1xuICAgICAgICAvLyBCdXQ6IGlmIHRoYXQncyBhbGwgeW91IG5lZWQgKGkuZS46IHRoZSBtb3N0IGNvbW1vbiB1c2UtY2FzZSk6IG5vIG5lZWQgZm9yIGN1c3RvbWl6YXRpb24hXG5cbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbS5kYXRhRm9ybWF0ID09PSAnZGF0ZS10aW1lJyAmJiBwYXJhbS52YWx1ZSBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgICAgID8gKHBhcmFtLnZhbHVlIGFzIERhdGUpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgIDogcGFyYW0udmFsdWU7XG5cbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcodmFsdWUpKTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBhcGktY3ljbGlzdFxuICpcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG5pbXBvcnQge1xuICBIdHRwSGVhZGVycyxcbiAgSHR0cFBhcmFtcyxcbiAgSHR0cFBhcmFtZXRlckNvZGVjLFxufSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCdcbmltcG9ydCB7IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyB9IGZyb20gJy4vZW5jb2RlcidcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSBmcm9tICcuL2NvbmZpZ3VyYXRpb24nXG5pbXBvcnQgeyBlbnZpcm9ubWVudCB9IGZyb20gJ3NyYy9lbnZpcm9ubWVudHMvZW52aXJvbm1lbnQnXG5leHBvcnQgY2xhc3MgQmFzZVNlcnZpY2Uge1xuICBwcm90ZWN0ZWQgYmFzZVBhdGggPSBlbnZpcm9ubWVudC5iYXNlUGF0aFxuICBwdWJsaWMgZGVmYXVsdEhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKVxuICBwdWJsaWMgY29uZmlndXJhdGlvbjogQ29uZmlndXJhdGlvblxuICBwdWJsaWMgZW5jb2RlcjogSHR0cFBhcmFtZXRlckNvZGVjXG5cbiAgY29uc3RydWN0b3IoYmFzZVBhdGg/OiBzdHJpbmcgfCBzdHJpbmdbXSwgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICB0aGlzLmNvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uIHx8IG5ldyBDb25maWd1cmF0aW9uKClcbiAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IGZpcnN0QmFzZVBhdGggPSBBcnJheS5pc0FycmF5KGJhc2VQYXRoKSA/IGJhc2VQYXRoWzBdIDogdW5kZWZpbmVkXG4gICAgICBpZiAoZmlyc3RCYXNlUGF0aCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmFzZVBhdGggPSBmaXJzdEJhc2VQYXRoXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGJhc2VQYXRoID0gdGhpcy5iYXNlUGF0aFxuICAgICAgfVxuICAgICAgdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoID0gYmFzZVBhdGhcbiAgICB9XG4gICAgdGhpcy5lbmNvZGVyID0gdGhpcy5jb25maWd1cmF0aW9uLmVuY29kZXIgfHwgbmV3IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYygpXG4gIH1cblxuICBwcm90ZWN0ZWQgY2FuQ29uc3VtZUZvcm0oY29uc3VtZXM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGNvbnN1bWVzLmluZGV4T2YoJ211bHRpcGFydC9mb3JtLWRhdGEnKSAhPT0gLTFcbiAgfVxuXG4gIHByb3RlY3RlZCBhZGRUb0h0dHBQYXJhbXMoXG4gICAgaHR0cFBhcmFtczogSHR0cFBhcmFtcyxcbiAgICB2YWx1ZTogYW55LFxuICAgIGtleT86IHN0cmluZyxcbiAgICBpc0RlZXA6IGJvb2xlYW4gPSBmYWxzZVxuICApOiBIdHRwUGFyYW1zIHtcbiAgICAvLyBJZiB0aGUgdmFsdWUgaXMgYW4gb2JqZWN0IChidXQgbm90IGEgRGF0ZSksIHJlY3Vyc2l2ZWx5IGFkZCBpdHMga2V5cy5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShcbiAgICAgICAgaHR0cFBhcmFtcyxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIGlzRGVlcCA/IGtleSA6IHVuZGVmaW5lZCxcbiAgICAgICAgaXNEZWVwXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCB2YWx1ZSwga2V5KVxuICB9XG5cbiAgcHJvdGVjdGVkIGFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShcbiAgICBodHRwUGFyYW1zOiBIdHRwUGFyYW1zLFxuICAgIHZhbHVlPzogYW55LFxuICAgIGtleT86IHN0cmluZyxcbiAgICBpc0RlZXA6IGJvb2xlYW4gPSBmYWxzZVxuICApOiBIdHRwUGFyYW1zIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGh0dHBQYXJhbXNcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIElmIEpTT04gZm9ybWF0IGlzIHByZWZlcnJlZCwga2V5IG11c3QgYmUgcHJvdmlkZWQuXG4gICAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGlzRGVlcFxuICAgICAgICAgID8gT2JqZWN0LmtleXModmFsdWUgYXMgUmVjb3JkPHN0cmluZywgYW55PikucmVkdWNlKFxuICAgICAgICAgICAgICAoaHAsIGspID0+IGhwLmFwcGVuZChgJHtrZXl9WyR7a31dYCwgdmFsdWVba10pLFxuICAgICAgICAgICAgICBodHRwUGFyYW1zXG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBodHRwUGFyYW1zLmFwcGVuZChrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSlcbiAgICAgIH1cbiAgICAgIC8vIE90aGVyd2lzZSwgaWYgaXQncyBhbiBhcnJheSwgYWRkIGVhY2ggZWxlbWVudC5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZS5mb3JFYWNoKFxuICAgICAgICAgIChlbGVtKSA9PlxuICAgICAgICAgICAgKGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCBlbGVtLCBrZXkpKVxuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICBodHRwUGFyYW1zID0gaHR0cFBhcmFtcy5hcHBlbmQoa2V5LCB2YWx1ZS50b0lTT1N0cmluZygpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IEVycm9yKCdrZXkgbWF5IG5vdCBiZSBudWxsIGlmIHZhbHVlIGlzIERhdGUnKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaCgoaykgPT4ge1xuICAgICAgICAgIGNvbnN0IHBhcmFtS2V5ID0ga2V5ID8gYCR7a2V5fS4ke2t9YCA6IGtcbiAgICAgICAgICBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoXG4gICAgICAgICAgICBodHRwUGFyYW1zLFxuICAgICAgICAgICAgdmFsdWVba10sXG4gICAgICAgICAgICBwYXJhbUtleVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBodHRwUGFyYW1zXG4gICAgfSBlbHNlIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGh0dHBQYXJhbXMuYXBwZW5kKGtleSwgdmFsdWUpXG4gICAgfVxuICAgIHRocm93IEVycm9yKCdrZXkgbWF5IG5vdCBiZSBudWxsIGlmIHZhbHVlIGlzIG5vdCBvYmplY3Qgb3IgYXJyYXknKVxuICB9XG59XG4iLCAiLyoqXG4gKiBhcGktY3ljbGlzdFxuICpcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMsIEh0dHBDb250ZXh0IFxuICAgICAgICB9ICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyB9ICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9lbmNvZGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdyeGpzJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQ2hhbmdlQ3ljbGlzdEVtYWlsUmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL2NoYW5nZUN5Y2xpc3RFbWFpbFJlcXVlc3QnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQ2hhbmdlQ3ljbGlzdFBhc3N3b3JkUmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL2NoYW5nZUN5Y2xpc3RQYXNzd29yZFJlcXVlc3QnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQ3JlYXRlQ3ljbGlzdFJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC9jcmVhdGVDeWNsaXN0UmVxdWVzdCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBEZWxldGVDeWNsaXN0UmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL2RlbGV0ZUN5Y2xpc3RSZXF1ZXN0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvcmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2UnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLmJhc2Uuc2VydmljZSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBDaGFuZ2VDeWNsaXN0RW1haWxSZXF1ZXN0UGFyYW1zIHtcbiAgICBjaGFuZ2VDeWNsaXN0RW1haWxSZXF1ZXN0PzogQ2hhbmdlQ3ljbGlzdEVtYWlsUmVxdWVzdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaGFuZ2VDeWNsaXN0UGFzc3dvcmRSZXF1ZXN0UGFyYW1zIHtcbiAgICBjaGFuZ2VDeWNsaXN0UGFzc3dvcmRSZXF1ZXN0PzogQ2hhbmdlQ3ljbGlzdFBhc3N3b3JkUmVxdWVzdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25maXJtQ3ljbGlzdFJlcXVlc3RQYXJhbXMge1xuICAgIGJvZHk/OiBhbnkgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUN5Y2xpc3RSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG4gICAgYm9keT86IENyZWF0ZUN5Y2xpc3RSZXF1ZXN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN5Y2xpc3RFeGlzdHNSZXF1ZXN0UGFyYW1zIHtcbiAgICBwaG9uZU51bWJlcjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlbGV0ZUN5Y2xpc3RSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG4gICAgYm9keT86IERlbGV0ZUN5Y2xpc3RSZXF1ZXN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJpZXZlQ3ljbGlzdFJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBUaGlzIGlzIHVzZWQgdG8gcmV0dXJuIG9ubHkgdGhlIFJlZ2lzdHJhdGlvbiBmb3IgdGhlIHNwZWNpZmllZCBQcm9ncmFtIGluIHRoZSBVc2VyXFwmIzM5O3MgcmVnaXN0cmF0aW9ucyBsaXN0LiBPbmx5IG9uZSBjYW4gYmUgcHJvdmlkZWQgd2l0aCAmI3g2MDtwcm9ncmFtJiN4NjA7LiBJZiBvbmUgb2YgdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXIgaXMgYWxzbyBwcm92aWRlZCwgdGhlIGZpbHRlciB3aWxsIGJlIGRvbmUgb24gdGhlIFJlZ2lzdHJhdGlvbiBhdHRyaWJ1dGUgYW5kIG5vdCB0aGUgVXNlclxcJiMzOTtzIG9uZS4gZGVsZXRlZF9hdCwgcm9sZSwgc3RhdHVzLCBmaXJzdF90cmlwX2RhdGUsIGxhc3RfdHJpcF9kYXRlICovXG4gICAgY3VycmVudFByb2dyYW0/OiBzdHJpbmc7XG4gICAgLyoqIEluc3BpcmVkIGJ5IFN0cmlwZS4gTWFueSBvYmplY3RzIGNvbnRhaW4gdGhlIElEIG9mIGEgcmVsYXRlZCBvYmplY3QgaW4gdGhlaXIgcmVzcG9uc2UgcHJvcGVydGllcy4gRm9yIGV4YW1wbGUsIGEgVHJpcCBoYXZlIGFuIGFzc29jaWF0ZWQgVmVoaWN1bGUgSUQuIFRob3NlIG9iamVjdHMgY2FuIGJlIGV4cGFuZGVkIGlubGluZSB3aXRoIHRoZSBleHBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE9iamVjdHMgdGhhdCBjYW4gYmUgZXhwYW5kZWQgYXJlIG5vdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbi4gVGhpcyBwYXJhbWV0ZXIgaXMgYXZhaWxhYmxlIG9uIGFsbCBBUEkgcmVxdWVzdHMsIGFuZCBhcHBsaWVzIHRvIHRoZSByZXNwb25zZSBvZiB0aGF0IHJlcXVlc3Qgb25seS4gWW91IGNhbiBuZXN0IGV4cGFuZCByZXF1ZXN0cyB3aXRoIHRoZSBkb3QgcHJvcGVydHkuIEZvciBleGFtcGxlLCByZXF1ZXN0aW5nIGludm9pY2UuY3VzdG9tZXIgb24gYSBjaGFyZ2Ugd2lsbCBleHBhbmQgdGhlIGludm9pY2UgcHJvcGVydHkgaW50byBhIGZ1bGwgSW52b2ljZSBvYmplY3QsIGFuZCB3aWxsIHRoZW4gZXhwYW5kIHRoZSBjdXN0b21lciBwcm9wZXJ0eSBvbiB0aGF0IGludm9pY2UgaW50byBhIGZ1bGwgQ3VzdG9tZXIgb2JqZWN0LiBZb3UgY2FuIGV4cGFuZCBtdWx0aXBsZSBvYmplY3RzIGF0IG9uY2UgYnkgaWRlbnRpZnlpbmcgbXVsdGlwbGUgaXRlbXMgaW4gdGhlIGV4cGFuZCBhcnJheS4gKi9cbiAgICBleHBhbmQ/OiBBcnJheTxzdHJpbmc+O1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEN5Y2xpc3RzU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjaGFuZ2VDeWNsaXN0RW1haWwocmVxdWVzdFBhcmFtZXRlcnM/OiBDaGFuZ2VDeWNsaXN0RW1haWxSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPjtcbiAgICBwdWJsaWMgY2hhbmdlQ3ljbGlzdEVtYWlsKHJlcXVlc3RQYXJhbWV0ZXJzPzogQ2hhbmdlQ3ljbGlzdEVtYWlsUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGNoYW5nZUN5Y2xpc3RFbWFpbChyZXF1ZXN0UGFyYW1ldGVycz86IENoYW5nZUN5Y2xpc3RFbWFpbFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgY2hhbmdlQ3ljbGlzdEVtYWlsKHJlcXVlc3RQYXJhbWV0ZXJzPzogQ2hhbmdlQ3ljbGlzdEVtYWlsUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgY2hhbmdlQ3ljbGlzdEVtYWlsUmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jaGFuZ2VDeWNsaXN0RW1haWxSZXF1ZXN0O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvY3ljbGlzdHMvY2hhbmdlLWVtYWlsYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZT4oJ3Bvc3QnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgYm9keTogY2hhbmdlQ3ljbGlzdEVtYWlsUmVxdWVzdCxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGNoYW5nZUN5Y2xpc3RQYXNzd29yZChyZXF1ZXN0UGFyYW1ldGVycz86IENoYW5nZUN5Y2xpc3RQYXNzd29yZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyBjaGFuZ2VDeWNsaXN0UGFzc3dvcmQocmVxdWVzdFBhcmFtZXRlcnM/OiBDaGFuZ2VDeWNsaXN0UGFzc3dvcmRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgY2hhbmdlQ3ljbGlzdFBhc3N3b3JkKHJlcXVlc3RQYXJhbWV0ZXJzPzogQ2hhbmdlQ3ljbGlzdFBhc3N3b3JkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBjaGFuZ2VDeWNsaXN0UGFzc3dvcmQocmVxdWVzdFBhcmFtZXRlcnM/OiBDaGFuZ2VDeWNsaXN0UGFzc3dvcmRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBjaGFuZ2VDeWNsaXN0UGFzc3dvcmRSZXF1ZXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNoYW5nZUN5Y2xpc3RQYXNzd29yZFJlcXVlc3Q7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9jeWNsaXN0cy9jaGFuZ2UtcGFzc3dvcmRgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiBjaGFuZ2VDeWNsaXN0UGFzc3dvcmRSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY29uZmlybUN5Y2xpc3QocmVxdWVzdFBhcmFtZXRlcnM/OiBDb25maXJtQ3ljbGlzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyBjb25maXJtQ3ljbGlzdChyZXF1ZXN0UGFyYW1ldGVycz86IENvbmZpcm1DeWNsaXN0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGNvbmZpcm1DeWNsaXN0KHJlcXVlc3RQYXJhbWV0ZXJzPzogQ29uZmlybUN5Y2xpc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGNvbmZpcm1DeWNsaXN0KHJlcXVlc3RQYXJhbWV0ZXJzPzogQ29uZmlybUN5Y2xpc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmJvZHk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9jeWNsaXN0cy9jb25maXJtYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZT4oJ3Bvc3QnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY3ljbGlzdFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVDeWNsaXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVDeWNsaXN0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZT47XG4gICAgcHVibGljIGNyZWF0ZUN5Y2xpc3QocmVxdWVzdFBhcmFtZXRlcnM6IENyZWF0ZUN5Y2xpc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlQ3ljbGlzdChyZXF1ZXN0UGFyYW1ldGVyczogQ3JlYXRlQ3ljbGlzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlQ3ljbGlzdChyZXF1ZXN0UGFyYW1ldGVyczogQ3JlYXRlQ3ljbGlzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlQ3ljbGlzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5ib2R5O1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZXhwYW5kJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9jeWNsaXN0c2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2U+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGN5Y2xpc3RFeGlzdHMocmVxdWVzdFBhcmFtZXRlcnM6IEN5Y2xpc3RFeGlzdHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGN5Y2xpc3RFeGlzdHMocmVxdWVzdFBhcmFtZXRlcnM6IEN5Y2xpc3RFeGlzdHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGN5Y2xpc3RFeGlzdHMocmVxdWVzdFBhcmFtZXRlcnM6IEN5Y2xpc3RFeGlzdHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBjeWNsaXN0RXhpc3RzKHJlcXVlc3RQYXJhbWV0ZXJzOiBDeWNsaXN0RXhpc3RzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcGhvbmVOdW1iZXIgPSByZXF1ZXN0UGFyYW1ldGVycz8ucGhvbmVOdW1iZXI7XG4gICAgICAgIGlmIChwaG9uZU51bWJlciA9PT0gbnVsbCB8fCBwaG9uZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwaG9uZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGN5Y2xpc3RFeGlzdHMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL2N5Y2xpc3RzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcInBob25lTnVtYmVyXCIsIHZhbHVlOiBwaG9uZU51bWJlciwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX0vZXhpc3RzYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxhbnk+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIGN5Y2xpc3RcbiAgICAgKiBEb2VzblxcJiMzOTt0IHJlYWxseSBkZWxldGUgdGhlIHVzZXIuIE9ubHkgY2hhbmdlIGl0XFwmIzM5O3Mgc3RhdHVzIHRvICYjeDYwO2RlbGV0aW9uX3JlcXVlc3RlZCYjeDYwOy5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlQ3ljbGlzdChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQ3ljbGlzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyBkZWxldGVDeWNsaXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVDeWNsaXN0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGRlbGV0ZUN5Y2xpc3QocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZUN5Y2xpc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGRlbGV0ZUN5Y2xpc3QocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZUN5Y2xpc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUN5Y2xpc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0UGFyYW1ldGVycz8uYm9keTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvY3ljbGlzdHNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPignZGVsZXRlJywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYSBjeWNsaXN0XG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJldHJpZXZlQ3ljbGlzdChyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVDeWNsaXN0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZT47XG4gICAgcHVibGljIHJldHJpZXZlQ3ljbGlzdChyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVDeWNsaXN0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIHJldHJpZXZlQ3ljbGlzdChyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVDeWNsaXN0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZUN5Y2xpc3QocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlQ3ljbGlzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVDeWNsaXN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBjdXJyZW50UHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jdXJyZW50UHJvZ3JhbTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jdXJyZW50UHJvZ3JhbSwgJ2N1cnJlbnRfcHJvZ3JhbScpO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvY3ljbGlzdHNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlPignZ2V0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHBhcmFtczogbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IENyZWF0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VSZXF1ZXN0IH0gZnJvbSAnLi4vbW9kZWwvY3JlYXRlTm90aWZpY2F0aW9uUHJlZmVyZW5jZVJlcXVlc3QnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdE5vdGlmaWNhdGlvblByZWZlcmVuY2UyMDBSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL2xpc3ROb3RpZmljYXRpb25QcmVmZXJlbmNlMjAwUmVzcG9uc2UnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdE5vdGlmaWNhdGlvblByZWZlcmVuY2UyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyIH0gZnJvbSAnLi4vbW9kZWwvbGlzdE5vdGlmaWNhdGlvblByZWZlcmVuY2UyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlTm90aWZpY2F0aW9uUHJlZmVyZW5jZVJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIGJvZHk/OiBDcmVhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVOb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIG5vdGlmaWNhdGlvblN1YnNjcmlwdGlvbklkOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaXN0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZVJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogQSBsaW1pdCBvbiB0aGUgbnVtYmVyIG9mIG9iamVjdHMgdG8gYmUgcmV0dXJuZWQuICovXG4gICAgbGltaXQ/OiBudW1iZXI7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7c3RhcnRpbmdfYWZ0ZXImI3g2MDsgaXMgYW4gb2JqZWN0IElEIHRoYXQgZGVmaW5lcyB5b3VyIHBsYWNlIGluIHRoZSBsaXN0LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSBtYWtlIGEgbGlzdCByZXF1ZXN0IGFuZCByZWNlaXZlIDEwMCBvYmplY3RzLCBlbmRpbmcgd2l0aCAmI3g2MDtvYmpfZm9vJiN4NjA7LCB5b3VyIHN1YnNlcXVlbnQgY2FsbCBjYW4gaW5jbHVkZSAmI3g2MDtzdGFydGluZ19hZnRlciYjeDNEO29ial9mb28mI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIG5leHQgcGFnZSBvZiB0aGUgbGlzdC4gKi9cbiAgICBzdGFydGluZ0FmdGVyPzogc3RyaW5nO1xuICAgIC8qKiBBIGN1cnNvciBmb3IgdXNlIGluIHBhZ2luYXRpb24uICYjeDYwO2VuZGluZ19iZWZvcmUmI3g2MDsgaXMgYW4gb2JqZWN0IElEIHRoYXQgZGVmaW5lcyB5b3VyIHBsYWNlIGluIHRoZSBsaXN0LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSBtYWtlIGEgbGlzdCByZXF1ZXN0IGFuZCByZWNlaXZlIDEwMCBvYmplY3RzLCBzdGFydGluZyB3aXRoICYjeDYwO29ial9iYXImI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO2VuZGluZ19iZWZvcmUmI3gzRDtvYmpfYmFyJiN4NjA7IGluIG9yZGVyIHRvIGZldGNoIHRoZSBwcmV2aW91cyBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIGVuZGluZ0JlZm9yZT86IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIGRvIGEgJiN4NjA7Y291bnQoKSYjeDYwOyBpbiB0aGUgVGl0eW5hbW9EQiAmI3g2MDtmaWx0ZXIoKSYjeDYwOyBmdW5jdGlvbiBhbmQgcmV0dXJuIGEgJiN4NjA7dG90YWwmI3g2MDsgYXR0cmlidXRlcy4gVGhlIER5bmFtb0RCICYjeDYwO2NvdW50KCkmI3g2MDsgZnVuY3Rpb24gaXNuXFwmIzM5O3QgZWZmaWNpZW50LiBSZXF1ZXN0cyBtYXkgdGFrZSBtb3JlIHRpbWUgd2l0aCB0aGlzIHBhcmFtZXRlciBzZXQgdG8gJiN4NjA7VHJ1ZSYjeDYwOy4gKi9cbiAgICB3aXRoVG90YWw/OiBib29sZWFuO1xuICAgIC8qKiBGaWx0ZXIgYWxsIE5vdGlmaWNhdGlvbiBQcmVmZXJlbmNlcyB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7cHJvZ3JhbSYjeDYwOy4gKi9cbiAgICBwcm9ncmFtMj86IHN0cmluZztcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25QcmVmZXJlbmNlc1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBOb3RpZmljYXRpb24gUHJlZmVyZW5jZVxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyBjcmVhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3ROb3RpZmljYXRpb25QcmVmZXJlbmNlMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyBjcmVhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgY3JlYXRlTm90aWZpY2F0aW9uUHJlZmVyZW5jZShyZXF1ZXN0UGFyYW1ldGVyczogQ3JlYXRlTm90aWZpY2F0aW9uUHJlZmVyZW5jZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlTm90aWZpY2F0aW9uUHJlZmVyZW5jZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5ib2R5O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvbm90aWZpY2F0aW9uX3ByZWZlcmVuY2VzYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIE5vdGlmaWNhdGlvbiBQcmVmZXJlbmNlXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2UocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2UocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2UocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVOb3RpZmljYXRpb25QcmVmZXJlbmNlKHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVOb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVOb3RpZmljYXRpb25QcmVmZXJlbmNlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvblN1YnNjcmlwdGlvbklkID0gcmVxdWVzdFBhcmFtZXRlcnM/Lm5vdGlmaWNhdGlvblN1YnNjcmlwdGlvbklkO1xuICAgICAgICBpZiAobm90aWZpY2F0aW9uU3Vic2NyaXB0aW9uSWQgPT09IG51bGwgfHwgbm90aWZpY2F0aW9uU3Vic2NyaXB0aW9uSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgbm90aWZpY2F0aW9uU3Vic2NyaXB0aW9uSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVOb3RpZmljYXRpb25QcmVmZXJlbmNlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvbm90aWZpY2F0aW9uX3ByZWZlcmVuY2VzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcIm5vdGlmaWNhdGlvblN1YnNjcmlwdGlvbklkXCIsIHZhbHVlOiBub3RpZmljYXRpb25TdWJzY3JpcHRpb25JZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX1gO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ2RlbGV0ZScsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdCBhbGwgTm90aWZpY2F0aW9uIFByZWZlcmVuY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgbGlzdE5vdGlmaWNhdGlvblByZWZlcmVuY2UocmVxdWVzdFBhcmFtZXRlcnM6IExpc3ROb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZTIwMFJlc3BvbnNlPjtcbiAgICBwdWJsaWMgbGlzdE5vdGlmaWNhdGlvblByZWZlcmVuY2UocmVxdWVzdFBhcmFtZXRlcnM6IExpc3ROb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3ROb3RpZmljYXRpb25QcmVmZXJlbmNlMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgbGlzdE5vdGlmaWNhdGlvblByZWZlcmVuY2UocmVxdWVzdFBhcmFtZXRlcnM6IExpc3ROb3RpZmljYXRpb25QcmVmZXJlbmNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZTIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3ROb3RpZmljYXRpb25QcmVmZXJlbmNlKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdE5vdGlmaWNhdGlvblByZWZlcmVuY2UuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpbWl0O1xuICAgICAgICBjb25zdCBzdGFydGluZ0FmdGVyID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXJ0aW5nQWZ0ZXI7XG4gICAgICAgIGNvbnN0IGVuZGluZ0JlZm9yZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRpbmdCZWZvcmU7XG4gICAgICAgIGNvbnN0IHdpdGhUb3RhbCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy53aXRoVG90YWw7XG4gICAgICAgIGNvbnN0IHByb2dyYW0yID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW0yO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZXhwYW5kJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5saW1pdCwgJ2xpbWl0Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGFydGluZ0FmdGVyLCAnc3RhcnRpbmdfYWZ0ZXInKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVuZGluZ0JlZm9yZSwgJ2VuZGluZ19iZWZvcmUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PndpdGhUb3RhbCwgJ3dpdGhfdG90YWwnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnByb2dyYW0yLCAncHJvZ3JhbScpO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9ub3RpZmljYXRpb25fcHJlZmVyZW5jZXNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3ROb3RpZmljYXRpb25QcmVmZXJlbmNlMjAwUmVzcG9uc2U+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG59XG4iLCAiLyoqXG4gKiBhcGktY3ljbGlzdFxuICpcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMsIEh0dHBDb250ZXh0IFxuICAgICAgICB9ICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyB9ICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9lbmNvZGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdyeGpzJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdFZlaGljdWxlMjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9saXN0VmVoaWN1bGUyMDBSZXNwb25zZSc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0VmVoaWN1bGUyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyIH0gZnJvbSAnLi4vbW9kZWwvbGlzdFZlaGljdWxlMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0VmVoaWN1bGVDaGFpblR5cGVQYXJhbWV0ZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0VmVoaWN1bGVDaGFpblR5cGVQYXJhbWV0ZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdFZlaGljdWxlTG9ja1BhcmFtZXRlciB9IGZyb20gJy4uL21vZGVsL2xpc3RWZWhpY3VsZUxvY2tQYXJhbWV0ZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdFZlaGljdWxlTW9kZWxQYXJhbWV0ZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0VmVoaWN1bGVNb2RlbFBhcmFtZXRlcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0VmVoaWN1bGVTdGF0dXNQYXJhbWV0ZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0VmVoaWN1bGVTdGF0dXNQYXJhbWV0ZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdFZlaGljdWxlVHlwZVBhcmFtZXRlciB9IGZyb20gJy4uL21vZGVsL2xpc3RWZWhpY3VsZVR5cGVQYXJhbWV0ZXInO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLmJhc2Uuc2VydmljZSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBMaXN0VmVoaWN1bGVSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIFVzZWQgdG8gbWFrZSBhIGdldCBiYXRjaCB3aXRoIHRoZSBzcGVjaWZpZWQgaWRzLiBXaWxsIG92ZXJyaWRlIGFsbCBvdGhlciBmaWx0ZXJzIGlmIHNldC4gKi9cbiAgICBpZHM/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBBIGxpbWl0IG9uIHRoZSBudW1iZXIgb2Ygb2JqZWN0cyB0byBiZSByZXR1cm5lZC4gKi9cbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICAvKiogQSBjdXJzb3IgZm9yIHVzZSBpbiBwYWdpbmF0aW9uLiAmI3g2MDtzdGFydGluZ19hZnRlciYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIGVuZGluZyB3aXRoICYjeDYwO29ial9mb28mI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO3N0YXJ0aW5nX2FmdGVyJiN4M0Q7b2JqX2ZvbyYjeDYwOyBpbiBvcmRlciB0byBmZXRjaCB0aGUgbmV4dCBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIHN0YXJ0aW5nQWZ0ZXI/OiBzdHJpbmc7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIHN0YXJ0aW5nIHdpdGggJiN4NjA7b2JqX2JhciYjeDYwOywgeW91ciBzdWJzZXF1ZW50IGNhbGwgY2FuIGluY2x1ZGUgJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDNEO29ial9iYXImI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIHByZXZpb3VzIHBhZ2Ugb2YgdGhlIGxpc3QuICovXG4gICAgZW5kaW5nQmVmb3JlPzogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgZG8gYSAmI3g2MDtjb3VudCgpJiN4NjA7IGluIHRoZSBUaXR5bmFtb0RCICYjeDYwO2ZpbHRlcigpJiN4NjA7IGZ1bmN0aW9uIGFuZCByZXR1cm4gYSAmI3g2MDt0b3RhbCYjeDYwOyBhdHRyaWJ1dGVzLiBUaGUgRHluYW1vREIgJiN4NjA7Y291bnQoKSYjeDYwOyBmdW5jdGlvbiBpc25cXCYjMzk7dCBlZmZpY2llbnQuIFJlcXVlc3RzIG1heSB0YWtlIG1vcmUgdGltZSB3aXRoIHRoaXMgcGFyYW1ldGVyIHNldCB0byAmI3g2MDtUcnVlJiN4NjA7LiAqL1xuICAgIHdpdGhUb3RhbD86IGJvb2xlYW47XG4gICAgLyoqIEZpbHRlciBhbGwgb2JqZWN0cyB3aXRoIHRoaXMgc3BlY2lmaWMgJiN4NjA7Y3JlYXRlZCYjeDYwOyB0aW1lc3RhbXAuICovXG4gICAgY3JlYXRlZD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBvYmplY3RzIHdpdGggYSAmI3g2MDtjcmVhdGVkJiN4NjA7IHRpbWVzdGFtcCBncmVhdGVyIHRoYW4gc3BlY2lmaWVkIHZhbHVlLiAqL1xuICAgIGNyZWF0ZWRHdD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBvYmplY3RzIHdpdGggYSAmI3g2MDtjcmVhdGVkJiN4NjA7IHRpbWVzdGFtcCBsb3dlciB0aGFuIHNwZWNpZmllZCB2YWx1ZS4gKi9cbiAgICBjcmVhdGVkTHQ/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgb2JqZWN0cyB3aXRoIGEgJiN4NjA7Y3JlYXRlZCYjeDYwOyB0aW1lc3RhbXAgZ3JlYXRlciBvciBlcXVhbCB0aGFuIHNwZWNpZmllZCB2YWx1ZS4gKi9cbiAgICBjcmVhdGVkR3RlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIG9iamVjdHMgd2l0aCBhICYjeDYwO2NyZWF0ZWQmI3g2MDsgdGltZXN0YW1wIGxvd2VyIG9yIGVxdWFsIHRoYW4gc3BlY2lmaWVkIHZhbHVlLiAqL1xuICAgIGNyZWF0ZWRMdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCBhICYjeDYwO2JhdHRlcnkudmFsdWUmI3g2MDsgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgYmF0dGVyeT86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIGEgJiN4NjA7YmF0dGVyeS52YWx1ZSYjeDYwOyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgYmF0dGVyeUd0ZT86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIGEgJiN4NjA7YmF0dGVyeS52YWx1ZSYjeDYwOyBsb3dlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIGJhdHRlcnlMdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCBhICYjeDYwO2JhdHRlcnlfdmFlLnZhbHVlJiN4NjA7IGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIGJhdHRlcnlWYWU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCBhICYjeDYwO2JhdHRlcnlfdmFlLnZhbHVlJiN4NjA7IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBiYXR0ZXJ5VmFlR3RlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggYSAmI3g2MDtiYXR0ZXJ5X3ZhZS52YWx1ZSYjeDYwOyBsb3dlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIGJhdHRlcnlWYWVMdGU/OiBudW1iZXI7XG4gICAgLyoqIExpc3QgYWxsIFZlaGljdWxlIHdpdGggdGhlIHNwZWNpZmllZCBjaGFpbl90eXBlIHZhbHVlLiAqL1xuICAgIGNoYWluVHlwZT86IExpc3RWZWhpY3VsZUNoYWluVHlwZVBhcmFtZXRlcjtcbiAgICAvKiogQ2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgVmVoaWN1bGVzIHdob3NlICYjeDYwO2NoYWluX3R5cGUmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBjaGFpblR5cGVJbj86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIElmIHNldCB0byAmI3g2MDtUcnVlJiN4NjA7LCByZXR1cm5zIG9ubHkgdGhlIFZlaGljdWxlcyBjdXJyZW50bHkgY29ubmVjdGVkLiAqL1xuICAgIGNvbm5lY3RlZD86IGJvb2xlYW47XG4gICAgLyoqIEZpbHRlciBhbGwgVmVoaWN1bGVzIHBhcmtlZCBpbiBhIGRvY2tsZXNzIFpvbmUuICovXG4gICAgZG9ja2xlc3M/OiBib29sZWFuO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFZlaGljdWxlcyB3aXRoIGEgJiN4NjA7ZncmI3g2MDsgZXF1YWwgdG8gdGhlIGdpdmVuIHN0cmluZyAobXVzdCBzdGFydCB3aXRoIDAgbGlrZSBpbiB0aGUgZncpLiAqL1xuICAgIGZ3Pzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFZlaGljdWxlcyB3aXRoIGEgJiN4NjA7ZncmI3g2MDsgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiBzdHJpbmcgKG11c3Qgc3RhcnQgd2l0aCAwIGxpa2UgaW4gdGhlIGZ3KS4gKi9cbiAgICBmd0d0ZT86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBWZWhpY3VsZXMgd2l0aCBhICYjeDYwO2Z3JiN4NjA7IGxvd2VyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIHN0cmluZyAobXVzdCBzdGFydCB3aXRoIDAgbGlrZSBpbiB0aGUgZncpLiAqL1xuICAgIGZ3THRlPzogc3RyaW5nO1xuICAgIC8qKiBDYW4gYmUgdXNlZCB0byByZXRyaWV2ZSBWZWhpY3VsZXMgd2hvc2UgJiN4NjA7ZncmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBmd0luPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogTGlzdCBhbGwgVmVoaWN1bGUgd2l0aCB0aGUgc3BlY2lmaWVkIGxvY2sgdmFsdWUuICovXG4gICAgbG9jaz86IExpc3RWZWhpY3VsZUxvY2tQYXJhbWV0ZXI7XG4gICAgLyoqIENhbiBiZSB1c2VkIHRvIHJldHJpZXZlIFZlaGljdWxlcyB3aG9zZSAmI3g2MDtsb2NrJiN4NjA7IGJlbG9uZyB0byB0aGUgc3BlY2lmaWVkIGxpc3QuICovXG4gICAgbG9ja0luPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogTGlzdCBhbGwgdmVoaWN1bGVzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDttb2RlbCYjeDYwOy4gKi9cbiAgICBtb2RlbD86IExpc3RWZWhpY3VsZU1vZGVsUGFyYW1ldGVyO1xuICAgIC8qKiBDYW4gYmUgdXNlZCB0byByZXRyaWV2ZSBWZWhpY3VsZXMgd2hvc2UgJiN4NjA7bW9kZWwmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBtb2RlbEluPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogRmlsdGVyIGFsbCBWZWhpY3VsZXMgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO3Byb2dyYW0mI3g2MDsuICovXG4gICAgcHJvZ3JhbTI/OiBzdHJpbmc7XG4gICAgLyoqIElmIHNldCB0byAmI3g2MDtUcnVlJiN4NjA7LCByZXR1cm5zIG9ubHkgdGhlIFZlaGljdWxlcyB0aGF0IGNhbiBiZSByZW50ZWQgYXQgdGhlIHRpbWUgb2YgdGhlIHJlcXVlc3QuICovXG4gICAgcmVudGFibGU/OiBib29sZWFuO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFZlaGljdWxlcyB3aXRoIGEgJiN4NjA7c2NvcmUmI3g2MDsgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgc2NvcmU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVmVoaWN1bGVzIHdpdGggYSAmI3g2MDtzY29yZSYjeDYwOyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgc2NvcmVHdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVmVoaWN1bGVzIHdpdGggYSAmI3g2MDtzY29yZSYjeDYwOyBsb3dlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIHNjb3JlTHRlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFZlaGljdWxlcyBhY3R1YWxseSBwYXJrZWQgaW4gdGhlIHNwZWNpZmllZCAmI3g2MDtzdGF0aW9uJiN4NjA7LiAqL1xuICAgIHN0YXRpb24/OiBzdHJpbmc7XG4gICAgLyoqIENhbiBiZSB1c2VkIHRvIHJldHJpZXZlIFZlaGljdWxlcyB3aG9zZSAmI3g2MDtzdGF0aW9uJiN4NjA7IGJlbG9uZyB0byB0aGUgc3BlY2lmaWVkIGxpc3QuICovXG4gICAgc3RhdGlvbkluPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogTGlzdCBhbGwgdmVoaWN1bGVzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtzdGF0dXMmI3g2MDsuICovXG4gICAgc3RhdHVzPzogTGlzdFZlaGljdWxlU3RhdHVzUGFyYW1ldGVyO1xuICAgIC8qKiBDYW4gYmUgdXNlZCB0byByZXRyaWV2ZSBWZWhpY3VsZXMgd2hvc2UgJiN4NjA7c3RhdHVzJiN4NjA7IGJlbG9uZyB0byB0aGUgc3BlY2lmaWVkIGxpc3QuICovXG4gICAgc3RhdHVzSW4/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBMaXN0IGFsbCB2ZWhpY3VsZXMgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO3R5cGUmI3g2MDsuICovXG4gICAgdHlwZT86IExpc3RWZWhpY3VsZVR5cGVQYXJhbWV0ZXI7XG4gICAgLyoqIENhbiBiZSB1c2VkIHRvIHJldHJpZXZlIFZlaGljdWxlcyB3aG9zZSAmI3g2MDt0eXBlJiN4NjA7IGJlbG9uZyB0byB0aGUgc3BlY2lmaWVkIGxpc3QuICovXG4gICAgdHlwZUluPzogQXJyYXk8c3RyaW5nPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXRyaWV2ZVZlaGljdWxlUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBPYmplY3QgaXMgcHJlZmVyYWJseSByZXRyaWV2ZSB0aHJvdWdoIGl0cyAmI3g2MDtpZCYjeDYwOyBidXQgaXMgYWxzbyBhY2Nlc3NpYmxlIHRocm91Z2ggaXRzICYjeDYwO2JvaXRpZXImI3g2MDssICYjeDYwO251bWJlciYjeDYwOyBhbmQgJiN4NjA7cmZpZCYjeDYwOyBmaWVsZC4gKi9cbiAgICBpZDogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgLyoqIEluc3BpcmVkIGJ5IFN0cmlwZS4gTWFueSBvYmplY3RzIGNvbnRhaW4gdGhlIElEIG9mIGEgcmVsYXRlZCBvYmplY3QgaW4gdGhlaXIgcmVzcG9uc2UgcHJvcGVydGllcy4gRm9yIGV4YW1wbGUsIGEgVHJpcCBoYXZlIGFuIGFzc29jaWF0ZWQgVmVoaWN1bGUgSUQuIFRob3NlIG9iamVjdHMgY2FuIGJlIGV4cGFuZGVkIGlubGluZSB3aXRoIHRoZSBleHBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE9iamVjdHMgdGhhdCBjYW4gYmUgZXhwYW5kZWQgYXJlIG5vdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbi4gVGhpcyBwYXJhbWV0ZXIgaXMgYXZhaWxhYmxlIG9uIGFsbCBBUEkgcmVxdWVzdHMsIGFuZCBhcHBsaWVzIHRvIHRoZSByZXNwb25zZSBvZiB0aGF0IHJlcXVlc3Qgb25seS4gWW91IGNhbiBuZXN0IGV4cGFuZCByZXF1ZXN0cyB3aXRoIHRoZSBkb3QgcHJvcGVydHkuIEZvciBleGFtcGxlLCByZXF1ZXN0aW5nIGludm9pY2UuY3VzdG9tZXIgb24gYSBjaGFyZ2Ugd2lsbCBleHBhbmQgdGhlIGludm9pY2UgcHJvcGVydHkgaW50byBhIGZ1bGwgSW52b2ljZSBvYmplY3QsIGFuZCB3aWxsIHRoZW4gZXhwYW5kIHRoZSBjdXN0b21lciBwcm9wZXJ0eSBvbiB0aGF0IGludm9pY2UgaW50byBhIGZ1bGwgQ3VzdG9tZXIgb2JqZWN0LiBZb3UgY2FuIGV4cGFuZCBtdWx0aXBsZSBvYmplY3RzIGF0IG9uY2UgYnkgaWRlbnRpZnlpbmcgbXVsdGlwbGUgaXRlbXMgaW4gdGhlIGV4cGFuZCBhcnJheS4gKi9cbiAgICBleHBhbmQ/OiBBcnJheTxzdHJpbmc+O1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFZlaGljdWxlc1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IHZlaGljdWxlc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBsaXN0VmVoaWN1bGUocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RWZWhpY3VsZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdFZlaGljdWxlMjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyBsaXN0VmVoaWN1bGUocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RWZWhpY3VsZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0VmVoaWN1bGUyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0VmVoaWN1bGUocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RWZWhpY3VsZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdFZlaGljdWxlMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgbGlzdFZlaGljdWxlKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0VmVoaWN1bGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGxpc3RWZWhpY3VsZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcbiAgICAgICAgY29uc3QgaWRzID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkcztcbiAgICAgICAgY29uc3QgbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGltaXQ7XG4gICAgICAgIGNvbnN0IHN0YXJ0aW5nQWZ0ZXIgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRpbmdBZnRlcjtcbiAgICAgICAgY29uc3QgZW5kaW5nQmVmb3JlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmVuZGluZ0JlZm9yZTtcbiAgICAgICAgY29uc3Qgd2l0aFRvdGFsID0gcmVxdWVzdFBhcmFtZXRlcnM/LndpdGhUb3RhbDtcbiAgICAgICAgY29uc3QgY3JlYXRlZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVkO1xuICAgICAgICBjb25zdCBjcmVhdGVkR3QgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlZEd0O1xuICAgICAgICBjb25zdCBjcmVhdGVkTHQgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlZEx0O1xuICAgICAgICBjb25zdCBjcmVhdGVkR3RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNyZWF0ZWRHdGU7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRMdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlZEx0ZTtcbiAgICAgICAgY29uc3QgYmF0dGVyeSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5iYXR0ZXJ5O1xuICAgICAgICBjb25zdCBiYXR0ZXJ5R3RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmJhdHRlcnlHdGU7XG4gICAgICAgIGNvbnN0IGJhdHRlcnlMdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uYmF0dGVyeUx0ZTtcbiAgICAgICAgY29uc3QgYmF0dGVyeVZhZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5iYXR0ZXJ5VmFlO1xuICAgICAgICBjb25zdCBiYXR0ZXJ5VmFlR3RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmJhdHRlcnlWYWVHdGU7XG4gICAgICAgIGNvbnN0IGJhdHRlcnlWYWVMdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uYmF0dGVyeVZhZUx0ZTtcbiAgICAgICAgY29uc3QgY2hhaW5UeXBlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNoYWluVHlwZTtcbiAgICAgICAgY29uc3QgY2hhaW5UeXBlSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8uY2hhaW5UeXBlSW47XG4gICAgICAgIGNvbnN0IGNvbm5lY3RlZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jb25uZWN0ZWQ7XG4gICAgICAgIGNvbnN0IGRvY2tsZXNzID0gcmVxdWVzdFBhcmFtZXRlcnM/LmRvY2tsZXNzO1xuICAgICAgICBjb25zdCBmdyA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5mdztcbiAgICAgICAgY29uc3QgZndHdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uZndHdGU7XG4gICAgICAgIGNvbnN0IGZ3THRlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmZ3THRlO1xuICAgICAgICBjb25zdCBmd0luID0gcmVxdWVzdFBhcmFtZXRlcnM/LmZ3SW47XG4gICAgICAgIGNvbnN0IGxvY2sgPSByZXF1ZXN0UGFyYW1ldGVycz8ubG9jaztcbiAgICAgICAgY29uc3QgbG9ja0luID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxvY2tJbjtcbiAgICAgICAgY29uc3QgbW9kZWwgPSByZXF1ZXN0UGFyYW1ldGVycz8ubW9kZWw7XG4gICAgICAgIGNvbnN0IG1vZGVsSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8ubW9kZWxJbjtcbiAgICAgICAgY29uc3QgcHJvZ3JhbTIgPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTI7XG4gICAgICAgIGNvbnN0IHJlbnRhYmxlID0gcmVxdWVzdFBhcmFtZXRlcnM/LnJlbnRhYmxlO1xuICAgICAgICBjb25zdCBzY29yZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zY29yZTtcbiAgICAgICAgY29uc3Qgc2NvcmVHdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uc2NvcmVHdGU7XG4gICAgICAgIGNvbnN0IHNjb3JlTHRlID0gcmVxdWVzdFBhcmFtZXRlcnM/LnNjb3JlTHRlO1xuICAgICAgICBjb25zdCBzdGF0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXRpb247XG4gICAgICAgIGNvbnN0IHN0YXRpb25JbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGF0aW9uSW47XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGF0dXM7XG4gICAgICAgIGNvbnN0IHN0YXR1c0luID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXR1c0luO1xuICAgICAgICBjb25zdCB0eXBlID0gcmVxdWVzdFBhcmFtZXRlcnM/LnR5cGU7XG4gICAgICAgIGNvbnN0IHR5cGVJbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy50eXBlSW47XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkcykge1xuICAgICAgICAgICAgaWRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaWRzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5saW1pdCwgJ2xpbWl0Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGFydGluZ0FmdGVyLCAnc3RhcnRpbmdfYWZ0ZXInKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVuZGluZ0JlZm9yZSwgJ2VuZGluZ19iZWZvcmUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PndpdGhUb3RhbCwgJ3dpdGhfdG90YWwnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmNyZWF0ZWQsICdjcmVhdGVkJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkR3QsICdjcmVhdGVkX2d0Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkTHQsICdjcmVhdGVkX2x0Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkR3RlLCAnY3JlYXRlZF9ndGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmNyZWF0ZWRMdGUsICdjcmVhdGVkX2x0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+YmF0dGVyeSwgJ2JhdHRlcnknKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmJhdHRlcnlHdGUsICdiYXR0ZXJ5X2d0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+YmF0dGVyeUx0ZSwgJ2JhdHRlcnlfbHRlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5iYXR0ZXJ5VmFlLCAnYmF0dGVyeV92YWUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmJhdHRlcnlWYWVHdGUsICdiYXR0ZXJ5X3ZhZV9ndGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmJhdHRlcnlWYWVMdGUsICdiYXR0ZXJ5X3ZhZV9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmNoYWluVHlwZSwgJ2NoYWluX3R5cGUnKTtcbiAgICAgICAgaWYgKGNoYWluVHlwZUluKSB7XG4gICAgICAgICAgICBjaGFpblR5cGVJbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2NoYWluX3R5cGVfaW4nKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmNvbm5lY3RlZCwgJ2Nvbm5lY3RlZCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZG9ja2xlc3MsICdkb2NrbGVzcycpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZncsICdmdycpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZndHdGUsICdmd19ndGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmZ3THRlLCAnZndfbHRlJyk7XG4gICAgICAgIGlmIChmd0luKSB7XG4gICAgICAgICAgICBmd0luLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZndfaW4nKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmxvY2ssICdsb2NrJyk7XG4gICAgICAgIGlmIChsb2NrSW4pIHtcbiAgICAgICAgICAgIGxvY2tJbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2xvY2tfaW4nKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pm1vZGVsLCAnbW9kZWwnKTtcbiAgICAgICAgaWYgKG1vZGVsSW4pIHtcbiAgICAgICAgICAgIG1vZGVsSW4uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdtb2RlbF9pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cHJvZ3JhbTIsICdwcm9ncmFtJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5yZW50YWJsZSwgJ3JlbnRhYmxlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zY29yZSwgJ3Njb3JlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zY29yZUd0ZSwgJ3Njb3JlX2d0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c2NvcmVMdGUsICdzY29yZV9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXRpb24sICdzdGF0aW9uJyk7XG4gICAgICAgIGlmIChzdGF0aW9uSW4pIHtcbiAgICAgICAgICAgIHN0YXRpb25Jbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3N0YXRpb25faW4nKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXR1cywgJ3N0YXR1cycpO1xuICAgICAgICBpZiAoc3RhdHVzSW4pIHtcbiAgICAgICAgICAgIHN0YXR1c0luLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3RhdHVzX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT50eXBlLCAndHlwZScpO1xuICAgICAgICBpZiAodHlwZUluKSB7XG4gICAgICAgICAgICB0eXBlSW4uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd0eXBlX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL3ZlaGljdWxlc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdFZlaGljdWxlMjAwUmVzcG9uc2U+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYSB2ZWhpY3VsZVxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZXRyaWV2ZVZlaGljdWxlKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVZlaGljdWxlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0VmVoaWN1bGUyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPjtcbiAgICBwdWJsaWMgcmV0cmlldmVWZWhpY3VsZShyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVWZWhpY3VsZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0VmVoaWN1bGUyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHJldHJpZXZlVmVoaWN1bGUocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlVmVoaWN1bGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3RWZWhpY3VsZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVWZWhpY3VsZShyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVWZWhpY3VsZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVWZWhpY3VsZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZDtcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVWZWhpY3VsZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC92ZWhpY3VsZXMvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfWA7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdFZlaGljdWxlMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBDcmVhdGVBYm9ubmVtZW50UmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL2NyZWF0ZUFib25uZW1lbnRSZXF1ZXN0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RBYm9ubmVtZW50MjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9saXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RBYm9ubmVtZW50MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lciB9IGZyb20gJy4uL21vZGVsL2xpc3RBYm9ubmVtZW50MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0QWJvbm5lbWVudFN0YXR1c1BhcmFtZXRlciB9IGZyb20gJy4uL21vZGVsL2xpc3RBYm9ubmVtZW50U3RhdHVzUGFyYW1ldGVyJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQWJvbm5lbWVudFJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIGNyZWF0ZUFib25uZW1lbnRSZXF1ZXN0PzogQ3JlYXRlQWJvbm5lbWVudFJlcXVlc3Q7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRlQWJvbm5lbWVudFJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogT2JqZWN0IGlzIHByZWZlcmFibHkgcmV0cmlldmUgdGhyb3VnaCBpdHMgJiN4NjA7aWQmI3g2MDsgYnV0IGlzIGFsc28gYWNjZXNzaWJsZSB0aHJvdWdoIHRoZSAmI3g2MDtzdWJzY3JpcHRpb25faWQmI3g2MDsuIEl0IGNhbiBhbHNvIGJlIHJldHJpZXZlIHRocm91Z2ggdGhlICYjeDYwO2N5Y2xpc3RfaWQmI3g2MDsgb3IgJiN4NjA7Y3VzdG9tZXJfaWQmI3g2MDsgZm9yIGl0cyBjdXJyZW50ICYjeDYwO2FjdGl2ZSYjeDYwOyBBYm9ubmVtZW50LiAqL1xuICAgIGlkOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICBib2R5PzogYW55IHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaXN0QWJvbm5lbWVudFJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogVXNlZCB0byBtYWtlIGEgZ2V0IGJhdGNoIHdpdGggdGhlIHNwZWNpZmllZCBpZHMuIFdpbGwgb3ZlcnJpZGUgYWxsIG90aGVyIGZpbHRlcnMgaWYgc2V0LiAqL1xuICAgIGlkcz86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEZpbHRlciBhbGwgb2JqZWN0cyB3aXRoIHRoaXMgc3BlY2lmaWMgJiN4NjA7Y3JlYXRlZCYjeDYwOyB0aW1lc3RhbXAuICovXG4gICAgY3JlYXRlZD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBvYmplY3RzIHdpdGggYSAmI3g2MDtjcmVhdGVkJiN4NjA7IHRpbWVzdGFtcCBncmVhdGVyIHRoYW4gc3BlY2lmaWVkIHZhbHVlLiAqL1xuICAgIGNyZWF0ZWRHdD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBvYmplY3RzIHdpdGggYSAmI3g2MDtjcmVhdGVkJiN4NjA7IHRpbWVzdGFtcCBsb3dlciB0aGFuIHNwZWNpZmllZCB2YWx1ZS4gKi9cbiAgICBjcmVhdGVkTHQ/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgb2JqZWN0cyB3aXRoIGEgJiN4NjA7Y3JlYXRlZCYjeDYwOyB0aW1lc3RhbXAgZ3JlYXRlciBvciBlcXVhbCB0aGFuIHNwZWNpZmllZCB2YWx1ZS4gKi9cbiAgICBjcmVhdGVkR3RlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIG9iamVjdHMgd2l0aCBhICYjeDYwO2NyZWF0ZWQmI3g2MDsgdGltZXN0YW1wIGxvd2VyIG9yIGVxdWFsIHRoYW4gc3BlY2lmaWVkIHZhbHVlLiAqL1xuICAgIGNyZWF0ZWRMdGU/OiBudW1iZXI7XG4gICAgLyoqIFRoaXMgaXMgdXNlZCB0byBjaGFuZ2UgdGhlIGxhbmd1YWdlIG9mIHRoZSB0ZXh0cyBpbiB0aGUgb2JqZWN0IG9yIGluIGEgc3ViLW9iamVjdC4gKi9cbiAgICBsYW5ndWFnZT86IHN0cmluZztcbiAgICAvKiogQSBsaW1pdCBvbiB0aGUgbnVtYmVyIG9mIG9iamVjdHMgdG8gYmUgcmV0dXJuZWQuICovXG4gICAgbGltaXQ/OiBudW1iZXI7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7c3RhcnRpbmdfYWZ0ZXImI3g2MDsgaXMgYW4gb2JqZWN0IElEIHRoYXQgZGVmaW5lcyB5b3VyIHBsYWNlIGluIHRoZSBsaXN0LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSBtYWtlIGEgbGlzdCByZXF1ZXN0IGFuZCByZWNlaXZlIDEwMCBvYmplY3RzLCBlbmRpbmcgd2l0aCAmI3g2MDtvYmpfZm9vJiN4NjA7LCB5b3VyIHN1YnNlcXVlbnQgY2FsbCBjYW4gaW5jbHVkZSAmI3g2MDtzdGFydGluZ19hZnRlciYjeDNEO29ial9mb28mI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIG5leHQgcGFnZSBvZiB0aGUgbGlzdC4gKi9cbiAgICBzdGFydGluZ0FmdGVyPzogc3RyaW5nO1xuICAgIC8qKiBBIGN1cnNvciBmb3IgdXNlIGluIHBhZ2luYXRpb24uICYjeDYwO2VuZGluZ19iZWZvcmUmI3g2MDsgaXMgYW4gb2JqZWN0IElEIHRoYXQgZGVmaW5lcyB5b3VyIHBsYWNlIGluIHRoZSBsaXN0LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSBtYWtlIGEgbGlzdCByZXF1ZXN0IGFuZCByZWNlaXZlIDEwMCBvYmplY3RzLCBzdGFydGluZyB3aXRoICYjeDYwO29ial9iYXImI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO2VuZGluZ19iZWZvcmUmI3gzRDtvYmpfYmFyJiN4NjA7IGluIG9yZGVyIHRvIGZldGNoIHRoZSBwcmV2aW91cyBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIGVuZGluZ0JlZm9yZT86IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIGRvIGEgJiN4NjA7Y291bnQoKSYjeDYwOyBpbiB0aGUgVGl0eW5hbW9EQiAmI3g2MDtmaWx0ZXIoKSYjeDYwOyBmdW5jdGlvbiBhbmQgcmV0dXJuIGEgJiN4NjA7dG90YWwmI3g2MDsgYXR0cmlidXRlcy4gVGhlIER5bmFtb0RCICYjeDYwO2NvdW50KCkmI3g2MDsgZnVuY3Rpb24gaXNuXFwmIzM5O3QgZWZmaWNpZW50LiBSZXF1ZXN0cyBtYXkgdGFrZSBtb3JlIHRpbWUgd2l0aCB0aGlzIHBhcmFtZXRlciBzZXQgdG8gJiN4NjA7VHJ1ZSYjeDYwOy4gKi9cbiAgICB3aXRoVG90YWw/OiBib29sZWFuO1xuICAgIC8qKiBGaWx0ZXIgYWxsIEFib25uZW1lbnRzIHdpdGggYW4gJiN4NjA7YWN0aXZhdGVkX2F0JiN4NjA7IGZpZWxkIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIGFjdGl2YXRlZEF0PzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIEFib25uZW1lbnRzIHdpdGggYW4gJiN4NjA7YWN0aXZhdGVkX2F0JiN4NjA7IGZpZWxkIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBhY3RpdmF0ZWRBdEd0ZT86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBBYm9ubmVtZW50cyB3aXRoIGFuICYjeDYwO2FjdGl2YXRlZF9hdCYjeDYwOyBmaWVsZCBsb3dlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIGFjdGl2YXRlZEF0THRlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIEFib25uZW1lbnRzIGNyZWF0ZWQgZm9yIHRoZSBzcGVjaWZpZWQgJiN4NjA7Y3ljbGlzdCYjeDYwOy4gKi9cbiAgICBjeWNsaXN0Pzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIEFib25uZW1lbnRzIGNyZWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO2ZvcmZhaXQmI3g2MDsuICovXG4gICAgZm9yZmFpdD86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBBYm9ubmVtZW50cyBjcmVhdGVkIHdpdGggYSAmI3g2MDtmb3JmYWl0JiN4NjA7IHRoYXQgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBmb3JmYWl0SW4/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBGaWx0ZXIgYWxsIEFib25uZW1lbnRzIGNyZWF0ZWQgZm9yIHRoZSBzcGVjaWZpZWQgJiN4NjA7b3JnYW5pemF0aW9uJiN4NjA7LiAqL1xuICAgIG9yZ2FuaXphdGlvbj86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBBYm9ubmVtZW50IHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtzdGF0dXMmI3g2MDsuICovXG4gICAgc3RhdHVzPzogTGlzdEFib25uZW1lbnRTdGF0dXNQYXJhbWV0ZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgQWJvbm5lbWVudCB3aG9zZSAmI3g2MDtzdGF0dXMmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBzdGF0dXNJbj86IEFycmF5PHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cmlldmVBYm9ubmVtZW50UmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBPYmplY3QgaXMgcHJlZmVyYWJseSByZXRyaWV2ZSB0aHJvdWdoIGl0cyAmI3g2MDtpZCYjeDYwOyBidXQgaXMgYWxzbyBhY2Nlc3NpYmxlIHRocm91Z2ggdGhlICYjeDYwO3N1YnNjcmlwdGlvbl9pZCYjeDYwOy4gSXQgY2FuIGFsc28gYmUgcmV0cmlldmUgdGhyb3VnaCB0aGUgJiN4NjA7Y3ljbGlzdF9pZCYjeDYwOyBvciAmI3g2MDtjdXN0b21lcl9pZCYjeDYwOyBmb3IgaXRzIGN1cnJlbnQgJiN4NjA7YWN0aXZlJiN4NjA7IEFib25uZW1lbnQuICovXG4gICAgaWQ6IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogVGhpcyBpcyB1c2VkIHRvIGNoYW5nZSB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIHRleHRzIGluIHRoZSBvYmplY3Qgb3IgaW4gYSBzdWItb2JqZWN0LiAqL1xuICAgIGxhbmd1YWdlPzogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7LCB2ZXJpZnkgdGhhdCB0aGUgQWJvbm5lbWVudFxcJiMzOTtzIFN1YnNjcmlwdGlvbnMgYXJlIHZhbGlkIGFuZCB0aGF0IHRoZSBDdXN0b21lciBoYXMgYSBwYXltZW50IGNhcmQuICovXG4gICAgdmFsaWQ/OiBib29sZWFuO1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEFib25uZW1lbnRzU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVBYm9ubmVtZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVBYm9ubmVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyBjcmVhdGVBYm9ubmVtZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVBYm9ubmVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RBYm9ubmVtZW50MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyBjcmVhdGVBYm9ubmVtZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVBYm9ubmVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgY3JlYXRlQWJvbm5lbWVudChyZXF1ZXN0UGFyYW1ldGVyczogQ3JlYXRlQWJvbm5lbWVudFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlQWJvbm5lbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgY3JlYXRlQWJvbm5lbWVudFJlcXVlc3QgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlQWJvbm5lbWVudFJlcXVlc3Q7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9hYm9ubmVtZW50c2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdEFib25uZW1lbnQyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiBjcmVhdGVBYm9ubmVtZW50UmVxdWVzdCxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUFib25uZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZUFib25uZW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3RBYm9ubmVtZW50MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj47XG4gICAgcHVibGljIGRlbGV0ZUFib25uZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZUFib25uZW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdEFib25uZW1lbnQyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIGRlbGV0ZUFib25uZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZUFib25uZW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3RBYm9ubmVtZW50MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyBkZWxldGVBYm9ubmVtZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVBYm9ubmVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVBYm9ubmVtZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkO1xuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVBYm9ubmVtZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmJvZHk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9hYm9ubmVtZW50cy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJpZFwiLCB2YWx1ZTogaWQsIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdkZWxldGUnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdCBhbGwgYWJvbm5lbWVudHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgbGlzdEFib25uZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RBYm9ubmVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlPjtcbiAgICBwdWJsaWMgbGlzdEFib25uZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RBYm9ubmVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RBYm9ubmVtZW50MjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgbGlzdEFib25uZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RBYm9ubmVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3RBYm9ubmVtZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0QWJvbm5lbWVudFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdEFib25uZW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG4gICAgICAgIGNvbnN0IGlkcyA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZHM7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlZDtcbiAgICAgICAgY29uc3QgY3JlYXRlZEd0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNyZWF0ZWRHdDtcbiAgICAgICAgY29uc3QgY3JlYXRlZEx0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNyZWF0ZWRMdDtcbiAgICAgICAgY29uc3QgY3JlYXRlZEd0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVkR3RlO1xuICAgICAgICBjb25zdCBjcmVhdGVkTHRlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNyZWF0ZWRMdGU7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlID0gcmVxdWVzdFBhcmFtZXRlcnM/Lmxhbmd1YWdlO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saW1pdDtcbiAgICAgICAgY29uc3Qgc3RhcnRpbmdBZnRlciA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGFydGluZ0FmdGVyO1xuICAgICAgICBjb25zdCBlbmRpbmdCZWZvcmUgPSByZXF1ZXN0UGFyYW1ldGVycz8uZW5kaW5nQmVmb3JlO1xuICAgICAgICBjb25zdCB3aXRoVG90YWwgPSByZXF1ZXN0UGFyYW1ldGVycz8ud2l0aFRvdGFsO1xuICAgICAgICBjb25zdCBhY3RpdmF0ZWRBdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5hY3RpdmF0ZWRBdDtcbiAgICAgICAgY29uc3QgYWN0aXZhdGVkQXRHdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uYWN0aXZhdGVkQXRHdGU7XG4gICAgICAgIGNvbnN0IGFjdGl2YXRlZEF0THRlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmFjdGl2YXRlZEF0THRlO1xuICAgICAgICBjb25zdCBjeWNsaXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmN5Y2xpc3Q7XG4gICAgICAgIGNvbnN0IGZvcmZhaXQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZm9yZmFpdDtcbiAgICAgICAgY29uc3QgZm9yZmFpdEluID0gcmVxdWVzdFBhcmFtZXRlcnM/LmZvcmZhaXRJbjtcbiAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnM/Lm9yZ2FuaXphdGlvbjtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXR1cztcbiAgICAgICAgY29uc3Qgc3RhdHVzSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhdHVzSW47XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkcykge1xuICAgICAgICAgICAgaWRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaWRzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkLCAnY3JlYXRlZCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3JlYXRlZEd0LCAnY3JlYXRlZF9ndCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3JlYXRlZEx0LCAnY3JlYXRlZF9sdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3JlYXRlZEd0ZSwgJ2NyZWF0ZWRfZ3RlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkTHRlLCAnY3JlYXRlZF9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pmxhbmd1YWdlLCAnbGFuZ3VhZ2UnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmxpbWl0LCAnbGltaXQnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXJ0aW5nQWZ0ZXIsICdzdGFydGluZ19hZnRlcicpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZW5kaW5nQmVmb3JlLCAnZW5kaW5nX2JlZm9yZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+d2l0aFRvdGFsLCAnd2l0aF90b3RhbCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+YWN0aXZhdGVkQXQsICdhY3RpdmF0ZWRfYXQnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmFjdGl2YXRlZEF0R3RlLCAnYWN0aXZhdGVkX2F0X2d0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+YWN0aXZhdGVkQXRMdGUsICdhY3RpdmF0ZWRfYXRfbHRlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jeWNsaXN0LCAnY3ljbGlzdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Zm9yZmFpdCwgJ2ZvcmZhaXQnKTtcbiAgICAgICAgaWYgKGZvcmZhaXRJbikge1xuICAgICAgICAgICAgZm9yZmFpdEluLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZm9yZmFpdF9pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+b3JnYW5pemF0aW9uLCAnb3JnYW5pemF0aW9uJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGF0dXMsICdzdGF0dXMnKTtcbiAgICAgICAgaWYgKHN0YXR1c0luKSB7XG4gICAgICAgICAgICBzdGF0dXNJbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3N0YXR1c19pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9hYm9ubmVtZW50c2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdEFib25uZW1lbnQyMDBSZXNwb25zZT4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhbiBhYm9ubmVtZW50XG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJldHJpZXZlQWJvbm5lbWVudChyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVBYm9ubmVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyByZXRyaWV2ZUFib25uZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlQWJvbm5lbWVudFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVBYm9ubmVtZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZUFib25uZW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3RBYm9ubmVtZW50MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZUFib25uZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlQWJvbm5lbWVudFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVBYm9ubmVtZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkO1xuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXRyaWV2ZUFib25uZW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlID0gcmVxdWVzdFBhcmFtZXRlcnM/Lmxhbmd1YWdlO1xuICAgICAgICBjb25zdCB2YWxpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy52YWxpZDtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+bGFuZ3VhZ2UsICdsYW5ndWFnZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+dmFsaWQsICd2YWxpZCcpO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9hYm9ubmVtZW50cy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJpZFwiLCB2YWx1ZTogaWQsIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0QWJvbm5lbWVudDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG59XG4iLCAiLyoqXG4gKiBhcGktY3ljbGlzdFxuICpcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMsIEh0dHBDb250ZXh0IFxuICAgICAgICB9ICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyB9ICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9lbmNvZGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdyeGpzJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQ3JlYXRlU2V0dXBJbnRlbnQyMDFSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL2NyZWF0ZVNldHVwSW50ZW50MjAxUmVzcG9uc2UnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQ3JlYXRlU2V0dXBJbnRlbnRSZXF1ZXN0IH0gZnJvbSAnLi4vbW9kZWwvY3JlYXRlU2V0dXBJbnRlbnRSZXF1ZXN0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RDYXJkczIwMFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvbGlzdENhcmRzMjAwUmVzcG9uc2UnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdENhcmRzMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lciB9IGZyb20gJy4uL21vZGVsL2xpc3RDYXJkczIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgVXBkYXRlQ2FyZFJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC91cGRhdGVDYXJkUmVxdWVzdCc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVNldHVwSW50ZW50UmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgY3JlYXRlU2V0dXBJbnRlbnRSZXF1ZXN0PzogQ3JlYXRlU2V0dXBJbnRlbnRSZXF1ZXN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlbGV0ZUNhcmRSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgY3ljbGlzdDogc3RyaW5nO1xuICAgIGlkOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaXN0Q2FyZHNSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgY3ljbGlzdDogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlQ2FyZFJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICBjeWNsaXN0OiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIGJvZHk/OiBVcGRhdGVDYXJkUmVxdWVzdDtcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBDYXJkc1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgU2V0dXAgSW50ZW50IGZvciAzRCBzZWN1cmVcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlU2V0dXBJbnRlbnQocmVxdWVzdFBhcmFtZXRlcnM6IENyZWF0ZVNldHVwSW50ZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxDcmVhdGVTZXR1cEludGVudDIwMVJlc3BvbnNlPjtcbiAgICBwdWJsaWMgY3JlYXRlU2V0dXBJbnRlbnQocmVxdWVzdFBhcmFtZXRlcnM6IENyZWF0ZVNldHVwSW50ZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENyZWF0ZVNldHVwSW50ZW50MjAxUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlU2V0dXBJbnRlbnQocmVxdWVzdFBhcmFtZXRlcnM6IENyZWF0ZVNldHVwSW50ZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDcmVhdGVTZXR1cEludGVudDIwMVJlc3BvbnNlPj47XG4gICAgcHVibGljIGNyZWF0ZVNldHVwSW50ZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVTZXR1cEludGVudFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlU2V0dXBJbnRlbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVNldHVwSW50ZW50UmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVTZXR1cEludGVudFJlcXVlc3Q7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9jYXJkcy9jcmVhdGVfc2V0dXBfaW50ZW50YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxDcmVhdGVTZXR1cEludGVudDIwMVJlc3BvbnNlPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiBjcmVhdGVTZXR1cEludGVudFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGNhcmQgZnJvbSB0aGUgQ3ljbGlzdFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVDYXJkKHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVDYXJkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVDYXJkKHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVDYXJkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVDYXJkKHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVDYXJkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlQ2FyZChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQ2FyZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlQ2FyZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjeWNsaXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmN5Y2xpc3Q7XG4gICAgICAgIGlmIChjeWNsaXN0ID09PSBudWxsIHx8IGN5Y2xpc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY3ljbGlzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNhcmQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNhcmQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9jYXJkcy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJpZFwiLCB2YWx1ZTogaWQsIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxhbnk+KCdkZWxldGUnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhcmRzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGxpc3RDYXJkcyhyZXF1ZXN0UGFyYW1ldGVyczogTGlzdENhcmRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0Q2FyZHMyMDBSZXNwb25zZT47XG4gICAgcHVibGljIGxpc3RDYXJkcyhyZXF1ZXN0UGFyYW1ldGVyczogTGlzdENhcmRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RDYXJkczIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3RDYXJkcyhyZXF1ZXN0UGFyYW1ldGVyczogTGlzdENhcmRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0Q2FyZHMyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0Q2FyZHMocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RDYXJkc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdENhcmRzLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN5Y2xpc3QgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3ljbGlzdDtcbiAgICAgICAgaWYgKGN5Y2xpc3QgPT09IG51bGwgfHwgY3ljbGlzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjeWNsaXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdENhcmRzLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9jYXJkc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdENhcmRzMjAwUmVzcG9uc2U+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBDeWNsaXN0IGNhcmQgYXMgZGVmYXVsdFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVDYXJkKHJlcXVlc3RQYXJhbWV0ZXJzOiBVcGRhdGVDYXJkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0Q2FyZHMyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPjtcbiAgICBwdWJsaWMgdXBkYXRlQ2FyZChyZXF1ZXN0UGFyYW1ldGVyczogVXBkYXRlQ2FyZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0Q2FyZHMyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHVwZGF0ZUNhcmQocmVxdWVzdFBhcmFtZXRlcnM6IFVwZGF0ZUNhcmRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3RDYXJkczIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgdXBkYXRlQ2FyZChyZXF1ZXN0UGFyYW1ldGVyczogVXBkYXRlQ2FyZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ2FyZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjeWNsaXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmN5Y2xpc3Q7XG4gICAgICAgIGlmIChjeWNsaXN0ID09PSBudWxsIHx8IGN5Y2xpc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY3ljbGlzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNhcmQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNhcmQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0UGFyYW1ldGVycz8uYm9keTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL2NhcmRzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcImlkXCIsIHZhbHVlOiBpZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX1gO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3RDYXJkczIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IFRhc2tzUG9zdDIwMVJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvdGFza3NQb3N0MjAxUmVzcG9uc2UnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgVGFza3NQb3N0UmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL3Rhc2tzUG9zdFJlcXVlc3QnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLmJhc2Uuc2VydmljZSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBUYXNrc1Bvc3RSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICB0YXNrc1Bvc3RSZXF1ZXN0PzogVGFza3NQb3N0UmVxdWVzdDtcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBEZWZhdWx0U2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB0YXNrc1Bvc3QocmVxdWVzdFBhcmFtZXRlcnM6IFRhc2tzUG9zdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8VGFza3NQb3N0MjAxUmVzcG9uc2U+O1xuICAgIHB1YmxpYyB0YXNrc1Bvc3QocmVxdWVzdFBhcmFtZXRlcnM6IFRhc2tzUG9zdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxUYXNrc1Bvc3QyMDFSZXNwb25zZT4+O1xuICAgIHB1YmxpYyB0YXNrc1Bvc3QocmVxdWVzdFBhcmFtZXRlcnM6IFRhc2tzUG9zdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8VGFza3NQb3N0MjAxUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgdGFza3NQb3N0KHJlcXVlc3RQYXJhbWV0ZXJzOiBUYXNrc1Bvc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHRhc2tzUG9zdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgdGFza3NQb3N0UmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy50YXNrc1Bvc3RSZXF1ZXN0O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvdGFza3NgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFRhc2tzUG9zdDIwMVJlc3BvbnNlPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiB0YXNrc1Bvc3RSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBTdWJzY3JpYmVEZXZpY2UyMDFSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL3N1YnNjcmliZURldmljZTIwMVJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IFN1YnNjcmliZURldmljZVJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC9zdWJzY3JpYmVEZXZpY2VSZXF1ZXN0JztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaWJlRGV2aWNlUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgc3Vic2NyaWJlRGV2aWNlUmVxdWVzdD86IFN1YnNjcmliZURldmljZVJlcXVlc3Q7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5zdWJzY3JpYmVEZXZpY2VSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgdG9rZW46IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIERldmljZXNTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nfHN0cmluZ1tdLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihiYXNlUGF0aCwgY29uZmlndXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHN1YnNjcmliZURldmljZShyZXF1ZXN0UGFyYW1ldGVyczogU3Vic2NyaWJlRGV2aWNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxTdWJzY3JpYmVEZXZpY2UyMDFSZXNwb25zZT47XG4gICAgcHVibGljIHN1YnNjcmliZURldmljZShyZXF1ZXN0UGFyYW1ldGVyczogU3Vic2NyaWJlRGV2aWNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFN1YnNjcmliZURldmljZTIwMVJlc3BvbnNlPj47XG4gICAgcHVibGljIHN1YnNjcmliZURldmljZShyZXF1ZXN0UGFyYW1ldGVyczogU3Vic2NyaWJlRGV2aWNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxTdWJzY3JpYmVEZXZpY2UyMDFSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBzdWJzY3JpYmVEZXZpY2UocmVxdWVzdFBhcmFtZXRlcnM6IFN1YnNjcmliZURldmljZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc3Vic2NyaWJlRGV2aWNlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBzdWJzY3JpYmVEZXZpY2VSZXF1ZXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN1YnNjcmliZURldmljZVJlcXVlc3Q7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9kZXZpY2VzYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxTdWJzY3JpYmVEZXZpY2UyMDFSZXNwb25zZT4oJ3Bvc3QnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgYm9keTogc3Vic2NyaWJlRGV2aWNlUmVxdWVzdCxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5zdWJzY3JpYmUgYSBkZXZpY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5zdWJzY3JpYmVEZXZpY2UocmVxdWVzdFBhcmFtZXRlcnM6IFVuc3Vic2NyaWJlRGV2aWNlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyB1bnN1YnNjcmliZURldmljZShyZXF1ZXN0UGFyYW1ldGVyczogVW5zdWJzY3JpYmVEZXZpY2VSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIHVuc3Vic2NyaWJlRGV2aWNlKHJlcXVlc3RQYXJhbWV0ZXJzOiBVbnN1YnNjcmliZURldmljZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIHVuc3Vic2NyaWJlRGV2aWNlKHJlcXVlc3RQYXJhbWV0ZXJzOiBVbnN1YnNjcmliZURldmljZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5zdWJzY3JpYmVEZXZpY2UuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXF1ZXN0UGFyYW1ldGVycz8udG9rZW47XG4gICAgICAgIGlmICh0b2tlbiA9PT0gbnVsbCB8fCB0b2tlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB0b2tlbiB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuc3Vic2NyaWJlRGV2aWNlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvZGV2aWNlcy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJ0b2tlblwiLCB2YWx1ZTogdG9rZW4sIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxhbnk+KCdkZWxldGUnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3REb2NrMjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9saXN0RG9jazIwMFJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3REb2NrMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lciB9IGZyb20gJy4uL21vZGVsL2xpc3REb2NrMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0RG9ja1N0YXR1c1BhcmFtZXRlciB9IGZyb20gJy4uL21vZGVsL2xpc3REb2NrU3RhdHVzUGFyYW1ldGVyJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdERvY2tSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIFVzZWQgdG8gbWFrZSBhIGdldCBiYXRjaCB3aXRoIHRoZSBzcGVjaWZpZWQgaWRzLiBXaWxsIG92ZXJyaWRlIGFsbCBvdGhlciBmaWx0ZXJzIGlmIHNldC4gKi9cbiAgICBpZHM/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBBIGxpbWl0IG9uIHRoZSBudW1iZXIgb2Ygb2JqZWN0cyB0byBiZSByZXR1cm5lZC4gKi9cbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICAvKiogQSBjdXJzb3IgZm9yIHVzZSBpbiBwYWdpbmF0aW9uLiAmI3g2MDtzdGFydGluZ19hZnRlciYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIGVuZGluZyB3aXRoICYjeDYwO29ial9mb28mI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO3N0YXJ0aW5nX2FmdGVyJiN4M0Q7b2JqX2ZvbyYjeDYwOyBpbiBvcmRlciB0byBmZXRjaCB0aGUgbmV4dCBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIHN0YXJ0aW5nQWZ0ZXI/OiBzdHJpbmc7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIHN0YXJ0aW5nIHdpdGggJiN4NjA7b2JqX2JhciYjeDYwOywgeW91ciBzdWJzZXF1ZW50IGNhbGwgY2FuIGluY2x1ZGUgJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDNEO29ial9iYXImI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIHByZXZpb3VzIHBhZ2Ugb2YgdGhlIGxpc3QuICovXG4gICAgZW5kaW5nQmVmb3JlPzogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgZG8gYSAmI3g2MDtjb3VudCgpJiN4NjA7IGluIHRoZSBUaXR5bmFtb0RCICYjeDYwO2ZpbHRlcigpJiN4NjA7IGZ1bmN0aW9uIGFuZCByZXR1cm4gYSAmI3g2MDt0b3RhbCYjeDYwOyBhdHRyaWJ1dGVzLiBUaGUgRHluYW1vREIgJiN4NjA7Y291bnQoKSYjeDYwOyBmdW5jdGlvbiBpc25cXCYjMzk7dCBlZmZpY2llbnQuIFJlcXVlc3RzIG1heSB0YWtlIG1vcmUgdGltZSB3aXRoIHRoaXMgcGFyYW1ldGVyIHNldCB0byAmI3g2MDtUcnVlJiN4NjA7LiAqL1xuICAgIHdpdGhUb3RhbD86IGJvb2xlYW47XG4gICAgLyoqIEZpbHRlciBhbGwgRG9jayB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7cHJvZ3JhbSYjeDYwOy4gKi9cbiAgICBwcm9ncmFtMj86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBEb2NrIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtzdGF0aW9uJiN4NjA7LiAqL1xuICAgIHN0YXRpb24/OiBzdHJpbmc7XG4gICAgLyoqIEZpbHRlciBhbGwgRG9jayB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7c3RhdHVzJiN4NjA7LiAqL1xuICAgIHN0YXR1cz86IExpc3REb2NrU3RhdHVzUGFyYW1ldGVyO1xuICAgIC8qKiBDYW4gYmUgdXNlZCB0byByZXRyaWV2ZSBEb2NrIHdob3NlICYjeDYwO3N0YXR1cyYjeDYwOyBiZWxvbmcgdG8gdGhlIHNwZWNpZmllZCBsaXN0LiAqL1xuICAgIHN0YXR1c0luPzogQXJyYXk8c3RyaW5nPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXRyaWV2ZURvY2tSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIE9iamVjdCBpcyBwcmVmZXJhYmx5IHJldHJpZXZlIHRocm91Z2ggaXRzICYjeDYwO2lkJiN4NjA7IGJ1dCBpcyBhbHNvIGFjY2Vzc2libGUgdGhyb3VnaCBpdHMgJiN4NjA7cmZpZCYjeDYwOyBmaWVsZC4gKi9cbiAgICBpZDogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgLyoqIEluc3BpcmVkIGJ5IFN0cmlwZS4gTWFueSBvYmplY3RzIGNvbnRhaW4gdGhlIElEIG9mIGEgcmVsYXRlZCBvYmplY3QgaW4gdGhlaXIgcmVzcG9uc2UgcHJvcGVydGllcy4gRm9yIGV4YW1wbGUsIGEgVHJpcCBoYXZlIGFuIGFzc29jaWF0ZWQgVmVoaWN1bGUgSUQuIFRob3NlIG9iamVjdHMgY2FuIGJlIGV4cGFuZGVkIGlubGluZSB3aXRoIHRoZSBleHBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE9iamVjdHMgdGhhdCBjYW4gYmUgZXhwYW5kZWQgYXJlIG5vdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbi4gVGhpcyBwYXJhbWV0ZXIgaXMgYXZhaWxhYmxlIG9uIGFsbCBBUEkgcmVxdWVzdHMsIGFuZCBhcHBsaWVzIHRvIHRoZSByZXNwb25zZSBvZiB0aGF0IHJlcXVlc3Qgb25seS4gWW91IGNhbiBuZXN0IGV4cGFuZCByZXF1ZXN0cyB3aXRoIHRoZSBkb3QgcHJvcGVydHkuIEZvciBleGFtcGxlLCByZXF1ZXN0aW5nIGludm9pY2UuY3VzdG9tZXIgb24gYSBjaGFyZ2Ugd2lsbCBleHBhbmQgdGhlIGludm9pY2UgcHJvcGVydHkgaW50byBhIGZ1bGwgSW52b2ljZSBvYmplY3QsIGFuZCB3aWxsIHRoZW4gZXhwYW5kIHRoZSBjdXN0b21lciBwcm9wZXJ0eSBvbiB0aGF0IGludm9pY2UgaW50byBhIGZ1bGwgQ3VzdG9tZXIgb2JqZWN0LiBZb3UgY2FuIGV4cGFuZCBtdWx0aXBsZSBvYmplY3RzIGF0IG9uY2UgYnkgaWRlbnRpZnlpbmcgbXVsdGlwbGUgaXRlbXMgaW4gdGhlIGV4cGFuZCBhcnJheS4gKi9cbiAgICBleHBhbmQ/OiBBcnJheTxzdHJpbmc+O1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIERvY2tzU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3QgZG9ja3NcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgbGlzdERvY2socmVxdWVzdFBhcmFtZXRlcnM6IExpc3REb2NrUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0RG9jazIwMFJlc3BvbnNlPjtcbiAgICBwdWJsaWMgbGlzdERvY2socmVxdWVzdFBhcmFtZXRlcnM6IExpc3REb2NrUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3REb2NrMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgbGlzdERvY2socmVxdWVzdFBhcmFtZXRlcnM6IExpc3REb2NrUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0RG9jazIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3REb2NrKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0RG9ja1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdERvY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG4gICAgICAgIGNvbnN0IGlkcyA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZHM7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpbWl0O1xuICAgICAgICBjb25zdCBzdGFydGluZ0FmdGVyID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXJ0aW5nQWZ0ZXI7XG4gICAgICAgIGNvbnN0IGVuZGluZ0JlZm9yZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRpbmdCZWZvcmU7XG4gICAgICAgIGNvbnN0IHdpdGhUb3RhbCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy53aXRoVG90YWw7XG4gICAgICAgIGNvbnN0IHByb2dyYW0yID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW0yO1xuICAgICAgICBjb25zdCBzdGF0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXRpb247XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGF0dXM7XG4gICAgICAgIGNvbnN0IHN0YXR1c0luID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXR1c0luO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZXhwYW5kJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpZHMpIHtcbiAgICAgICAgICAgIGlkcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2lkcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+bGltaXQsICdsaW1pdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c3RhcnRpbmdBZnRlciwgJ3N0YXJ0aW5nX2FmdGVyJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5lbmRpbmdCZWZvcmUsICdlbmRpbmdfYmVmb3JlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT53aXRoVG90YWwsICd3aXRoX3RvdGFsJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5wcm9ncmFtMiwgJ3Byb2dyYW0nKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXRpb24sICdzdGF0aW9uJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGF0dXMsICdzdGF0dXMnKTtcbiAgICAgICAgaWYgKHN0YXR1c0luKSB7XG4gICAgICAgICAgICBzdGF0dXNJbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3N0YXR1c19pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9kb2Nrc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdERvY2syMDBSZXNwb25zZT4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhIGRvY2tcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV0cmlldmVEb2NrKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZURvY2tSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3REb2NrMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj47XG4gICAgcHVibGljIHJldHJpZXZlRG9jayhyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVEb2NrUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3REb2NrMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZURvY2socmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlRG9ja1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdERvY2syMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHJldHJpZXZlRG9jayhyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVEb2NrUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXRyaWV2ZURvY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldHJpZXZlRG9jay4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9kb2Nrcy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJpZFwiLCB2YWx1ZTogaWQsIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0RG9jazIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG59XG4iLCAiLyoqXG4gKiBhcGktY3ljbGlzdFxuICpcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMsIEh0dHBDb250ZXh0IFxuICAgICAgICB9ICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyB9ICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9lbmNvZGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdyeGpzJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgUmV0cmlldmVGYXEyMDBSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL3JldHJpZXZlRmFxMjAwUmVzcG9uc2UnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLmJhc2Uuc2VydmljZSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBSZXRyaWV2ZUZhcVJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIGxhbmd1YWdlPzogc3RyaW5nO1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEZBUVNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBGYXFcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV0cmlldmVGYXEocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlRmFxUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxSZXRyaWV2ZUZhcTIwMFJlc3BvbnNlPjtcbiAgICBwdWJsaWMgcmV0cmlldmVGYXEocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlRmFxUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlRmFxMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVGYXEocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlRmFxUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXRyaWV2ZUZhcTIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIHJldHJpZXZlRmFxKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZUZhcVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVGYXEuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlID0gcmVxdWVzdFBhcmFtZXRlcnM/Lmxhbmd1YWdlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pmxhbmd1YWdlLCAnbGFuZ3VhZ2UnKTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvZmFxYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxSZXRyaWV2ZUZhcTIwMFJlc3BvbnNlPignZ2V0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHBhcmFtczogbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RGYWN0dXJlMjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9saXN0RmFjdHVyZTIwMFJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RGYWN0dXJlMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lciB9IGZyb20gJy4uL21vZGVsL2xpc3RGYWN0dXJlMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0RmFjdHVyZVN0YXR1c1BhcmFtZXRlciB9IGZyb20gJy4uL21vZGVsL2xpc3RGYWN0dXJlU3RhdHVzUGFyYW1ldGVyJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IFVwY29taW5nRmFjdHVyZXMyMDBSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL3VwY29taW5nRmFjdHVyZXMyMDBSZXNwb25zZSc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIExpc3RGYWN0dXJlUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgLyoqIEluc3BpcmVkIGJ5IFN0cmlwZS4gTWFueSBvYmplY3RzIGNvbnRhaW4gdGhlIElEIG9mIGEgcmVsYXRlZCBvYmplY3QgaW4gdGhlaXIgcmVzcG9uc2UgcHJvcGVydGllcy4gRm9yIGV4YW1wbGUsIGEgVHJpcCBoYXZlIGFuIGFzc29jaWF0ZWQgVmVoaWN1bGUgSUQuIFRob3NlIG9iamVjdHMgY2FuIGJlIGV4cGFuZGVkIGlubGluZSB3aXRoIHRoZSBleHBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE9iamVjdHMgdGhhdCBjYW4gYmUgZXhwYW5kZWQgYXJlIG5vdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbi4gVGhpcyBwYXJhbWV0ZXIgaXMgYXZhaWxhYmxlIG9uIGFsbCBBUEkgcmVxdWVzdHMsIGFuZCBhcHBsaWVzIHRvIHRoZSByZXNwb25zZSBvZiB0aGF0IHJlcXVlc3Qgb25seS4gWW91IGNhbiBuZXN0IGV4cGFuZCByZXF1ZXN0cyB3aXRoIHRoZSBkb3QgcHJvcGVydHkuIEZvciBleGFtcGxlLCByZXF1ZXN0aW5nIGludm9pY2UuY3VzdG9tZXIgb24gYSBjaGFyZ2Ugd2lsbCBleHBhbmQgdGhlIGludm9pY2UgcHJvcGVydHkgaW50byBhIGZ1bGwgSW52b2ljZSBvYmplY3QsIGFuZCB3aWxsIHRoZW4gZXhwYW5kIHRoZSBjdXN0b21lciBwcm9wZXJ0eSBvbiB0aGF0IGludm9pY2UgaW50byBhIGZ1bGwgQ3VzdG9tZXIgb2JqZWN0LiBZb3UgY2FuIGV4cGFuZCBtdWx0aXBsZSBvYmplY3RzIGF0IG9uY2UgYnkgaWRlbnRpZnlpbmcgbXVsdGlwbGUgaXRlbXMgaW4gdGhlIGV4cGFuZCBhcnJheS4gKi9cbiAgICBleHBhbmQ/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBGaWx0ZXIgYWxsIG9iamVjdHMgd2l0aCB0aGlzIHNwZWNpZmljICYjeDYwO2NyZWF0ZWQmI3g2MDsgdGltZXN0YW1wLiAqL1xuICAgIGNyZWF0ZWQ/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgb2JqZWN0cyB3aXRoIGEgJiN4NjA7Y3JlYXRlZCYjeDYwOyB0aW1lc3RhbXAgZ3JlYXRlciB0aGFuIHNwZWNpZmllZCB2YWx1ZS4gKi9cbiAgICBjcmVhdGVkR3Q/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgb2JqZWN0cyB3aXRoIGEgJiN4NjA7Y3JlYXRlZCYjeDYwOyB0aW1lc3RhbXAgbG93ZXIgdGhhbiBzcGVjaWZpZWQgdmFsdWUuICovXG4gICAgY3JlYXRlZEx0PzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIG9iamVjdHMgd2l0aCBhICYjeDYwO2NyZWF0ZWQmI3g2MDsgdGltZXN0YW1wIGdyZWF0ZXIgb3IgZXF1YWwgdGhhbiBzcGVjaWZpZWQgdmFsdWUuICovXG4gICAgY3JlYXRlZEd0ZT86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBvYmplY3RzIHdpdGggYSAmI3g2MDtjcmVhdGVkJiN4NjA7IHRpbWVzdGFtcCBsb3dlciBvciBlcXVhbCB0aGFuIHNwZWNpZmllZCB2YWx1ZS4gKi9cbiAgICBjcmVhdGVkTHRlPzogbnVtYmVyO1xuICAgIC8qKiBBIGxpbWl0IG9uIHRoZSBudW1iZXIgb2Ygb2JqZWN0cyB0byBiZSByZXR1cm5lZC4gKi9cbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICAvKiogQSBjdXJzb3IgZm9yIHVzZSBpbiBwYWdpbmF0aW9uLiAmI3g2MDtzdGFydGluZ19hZnRlciYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIGVuZGluZyB3aXRoICYjeDYwO29ial9mb28mI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO3N0YXJ0aW5nX2FmdGVyJiN4M0Q7b2JqX2ZvbyYjeDYwOyBpbiBvcmRlciB0byBmZXRjaCB0aGUgbmV4dCBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIHN0YXJ0aW5nQWZ0ZXI/OiBzdHJpbmc7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIHN0YXJ0aW5nIHdpdGggJiN4NjA7b2JqX2JhciYjeDYwOywgeW91ciBzdWJzZXF1ZW50IGNhbGwgY2FuIGluY2x1ZGUgJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDNEO29ial9iYXImI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIHByZXZpb3VzIHBhZ2Ugb2YgdGhlIGxpc3QuICovXG4gICAgZW5kaW5nQmVmb3JlPzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIEZhY3R1cmVzIGNyZWF0ZWQgZm9yIHRoZSBzcGVjaWZpZWQgJiN4NjA7YWJvbm5lbWVudCYjeDYwOy4gKi9cbiAgICBhYm9ubmVtZW50Pzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIEZhY3R1cmVzIHdpdGggYW4gJiN4NjA7YW1vdW50JiN4NjA7IGZpZWxkIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIGFtb3VudD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBGYWN0dXJlcyB3aXRoIGFuICYjeDYwO2Ftb3VudCYjeDYwOyBmaWVsZCBncmVhdGVyIHRoYW4gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgYW1vdW50R3Q/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgRmFjdHVyZXMgd2l0aCBhbiAmI3g2MDthbW91bnQmI3g2MDsgZmllbGQgbG93ZXIgdGhhbiB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBhbW91bnRMdD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBGYWN0dXJlcyB3aXRoIGFuICYjeDYwO2Ftb3VudCYjeDYwOyBmaWVsZCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgYW1vdW50R3RlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIEZhY3R1cmVzIHdpdGggYW4gJiN4NjA7YW1vdW50JiN4NjA7IGZpZWxkIGxvd2VyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgYW1vdW50THRlPzogbnVtYmVyO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IGZpdGxlciBhbGwgJiN4NjA7b3V0c3RhbmRpbmcmI3g2MDsgaW52b2ljZXMuICovXG4gICAgY2xvc2VkPzogYm9vbGVhbjtcbiAgICAvKiogRmlsdGVyIGFsbCBGYWN0dXJlcyBjcmVhdGVkIGZvciB0aGUgc3BlY2lmaWVkICYjeDYwO2N5Y2xpc3QmI3g2MDsuICovXG4gICAgY3ljbGlzdD86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBGYWN0dXJlcyBjcmVhdGVkIGZvciB0aGUgc3BlY2lmaWVkICYjeDYwO29yZ2FuaXphdGlvbiYjeDYwOy4gKi9cbiAgICBvcmdhbml6YXRpb24/OiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgZml0bGVyIGFsbCAmI3g2MDtvdmVyZHVlJiN4NjA7IGludm9pY2VzLiAqL1xuICAgIHBhc3REdWU/OiBib29sZWFuO1xuICAgIC8qKiBGaWx0ZXIgYWxsIEZhY3R1cmVzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtzdGF0dXMmI3g2MDsuICovXG4gICAgc3RhdHVzPzogTGlzdEZhY3R1cmVTdGF0dXNQYXJhbWV0ZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cmlldmVGYWN0dXJlUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIGlkOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBjb21pbmdGYWN0dXJlc1JlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEZhY3R1cmVzU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3QgYWxsIGZhY3R1cmVzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGxpc3RGYWN0dXJlKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0RmFjdHVyZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdEZhY3R1cmUyMDBSZXNwb25zZT47XG4gICAgcHVibGljIGxpc3RGYWN0dXJlKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0RmFjdHVyZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0RmFjdHVyZTIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3RGYWN0dXJlKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0RmFjdHVyZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdEZhY3R1cmUyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0RmFjdHVyZShyZXF1ZXN0UGFyYW1ldGVyczogTGlzdEZhY3R1cmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGxpc3RGYWN0dXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBleHBhbmQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZXhwYW5kO1xuICAgICAgICBjb25zdCBjcmVhdGVkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNyZWF0ZWQ7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRHdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVkR3Q7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRMdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVkTHQ7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRHdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlZEd0ZTtcbiAgICAgICAgY29uc3QgY3JlYXRlZEx0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVkTHRlO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saW1pdDtcbiAgICAgICAgY29uc3Qgc3RhcnRpbmdBZnRlciA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGFydGluZ0FmdGVyO1xuICAgICAgICBjb25zdCBlbmRpbmdCZWZvcmUgPSByZXF1ZXN0UGFyYW1ldGVycz8uZW5kaW5nQmVmb3JlO1xuICAgICAgICBjb25zdCBhYm9ubmVtZW50ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmFib25uZW1lbnQ7XG4gICAgICAgIGNvbnN0IGFtb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5hbW91bnQ7XG4gICAgICAgIGNvbnN0IGFtb3VudEd0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmFtb3VudEd0O1xuICAgICAgICBjb25zdCBhbW91bnRMdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5hbW91bnRMdDtcbiAgICAgICAgY29uc3QgYW1vdW50R3RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmFtb3VudEd0ZTtcbiAgICAgICAgY29uc3QgYW1vdW50THRlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmFtb3VudEx0ZTtcbiAgICAgICAgY29uc3QgY2xvc2VkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNsb3NlZDtcbiAgICAgICAgY29uc3QgY3ljbGlzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jeWNsaXN0O1xuICAgICAgICBjb25zdCBvcmdhbml6YXRpb24gPSByZXF1ZXN0UGFyYW1ldGVycz8ub3JnYW5pemF0aW9uO1xuICAgICAgICBjb25zdCBwYXN0RHVlID0gcmVxdWVzdFBhcmFtZXRlcnM/LnBhc3REdWU7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGF0dXM7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmNyZWF0ZWQsICdjcmVhdGVkJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkR3QsICdjcmVhdGVkX2d0Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkTHQsICdjcmVhdGVkX2x0Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkR3RlLCAnY3JlYXRlZF9ndGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmNyZWF0ZWRMdGUsICdjcmVhdGVkX2x0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+bGltaXQsICdsaW1pdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c3RhcnRpbmdBZnRlciwgJ3N0YXJ0aW5nX2FmdGVyJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5lbmRpbmdCZWZvcmUsICdlbmRpbmdfYmVmb3JlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5hYm9ubmVtZW50LCAnYWJvbm5lbWVudCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+YW1vdW50LCAnYW1vdW50Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5hbW91bnRHdCwgJ2Ftb3VudF9ndCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+YW1vdW50THQsICdhbW91bnRfbHQnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmFtb3VudEd0ZSwgJ2Ftb3VudF9ndGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmFtb3VudEx0ZSwgJ2Ftb3VudF9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmNsb3NlZCwgJ2Nsb3NlZCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3ljbGlzdCwgJ2N5Y2xpc3QnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pm9yZ2FuaXphdGlvbiwgJ29yZ2FuaXphdGlvbicpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cGFzdER1ZSwgJ3Bhc3RfZHVlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGF0dXMsICdzdGF0dXMnKTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvZmFjdHVyZXNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3RGYWN0dXJlMjAwUmVzcG9uc2U+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYSBmYWN0dXJlXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJldHJpZXZlRmFjdHVyZShyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVGYWN0dXJlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0RmFjdHVyZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyByZXRyaWV2ZUZhY3R1cmUocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlRmFjdHVyZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0RmFjdHVyZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVGYWN0dXJlKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZUZhY3R1cmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3RGYWN0dXJlMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZUZhY3R1cmUocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlRmFjdHVyZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVGYWN0dXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkO1xuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXRyaWV2ZUZhY3R1cmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvZmFjdHVyZXMvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfWA7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdEZhY3R1cmUyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPignZ2V0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHBhcmFtczogbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwY29taW5nIGZhY3R1cmVzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwY29taW5nRmFjdHVyZXMocmVxdWVzdFBhcmFtZXRlcnM6IFVwY29taW5nRmFjdHVyZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPFVwY29taW5nRmFjdHVyZXMyMDBSZXNwb25zZT47XG4gICAgcHVibGljIHVwY29taW5nRmFjdHVyZXMocmVxdWVzdFBhcmFtZXRlcnM6IFVwY29taW5nRmFjdHVyZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8VXBjb21pbmdGYWN0dXJlczIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIHVwY29taW5nRmFjdHVyZXMocmVxdWVzdFBhcmFtZXRlcnM6IFVwY29taW5nRmFjdHVyZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFVwY29taW5nRmFjdHVyZXMyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyB1cGNvbWluZ0ZhY3R1cmVzKHJlcXVlc3RQYXJhbWV0ZXJzOiBVcGNvbWluZ0ZhY3R1cmVzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGNvbWluZ0ZhY3R1cmVzLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9mYWN0dXJlcy91cGNvbWluZ2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8VXBjb21pbmdGYWN0dXJlczIwMFJlc3BvbnNlPignZ2V0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBGaWxlc1VwbG9hZDIwMFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvZmlsZXNVcGxvYWQyMDBSZXNwb25zZSc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBGaWxlc1VwbG9hZFJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC9maWxlc1VwbG9hZFJlcXVlc3QnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLmJhc2Uuc2VydmljZSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlc1VwbG9hZFJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgYm9keT86IEZpbGVzVXBsb2FkUmVxdWVzdDtcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBGaWxlVXBsb2FkU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbGVzIHVwbG9hZFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBmaWxlc1VwbG9hZChyZXF1ZXN0UGFyYW1ldGVycz86IEZpbGVzVXBsb2FkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxGaWxlc1VwbG9hZDIwMFJlc3BvbnNlPjtcbiAgICBwdWJsaWMgZmlsZXNVcGxvYWQocmVxdWVzdFBhcmFtZXRlcnM/OiBGaWxlc1VwbG9hZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxGaWxlc1VwbG9hZDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGZpbGVzVXBsb2FkKHJlcXVlc3RQYXJhbWV0ZXJzPzogRmlsZXNVcGxvYWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEZpbGVzVXBsb2FkMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgZmlsZXNVcGxvYWQocmVxdWVzdFBhcmFtZXRlcnM/OiBGaWxlc1VwbG9hZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmJvZHk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvZmlsZXNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PEZpbGVzVXBsb2FkMjAwUmVzcG9uc2U+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RGb3JmYWl0MjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9saXN0Rm9yZmFpdDIwMFJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RGb3JmYWl0MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lciB9IGZyb20gJy4uL21vZGVsL2xpc3RGb3JmYWl0MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0Rm9yZmFpdFN0YXR1c1BhcmFtZXRlciB9IGZyb20gJy4uL21vZGVsL2xpc3RGb3JmYWl0U3RhdHVzUGFyYW1ldGVyJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdEZvcmZhaXRSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIFVzZWQgdG8gbWFrZSBhIGdldCBiYXRjaCB3aXRoIHRoZSBzcGVjaWZpZWQgaWRzLiBXaWxsIG92ZXJyaWRlIGFsbCBvdGhlciBmaWx0ZXJzIGlmIHNldC4gKi9cbiAgICBpZHM/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBUaGlzIGlzIHVzZWQgdG8gY2hhbmdlIHRoZSBsYW5ndWFnZSBvZiB0aGUgdGV4dHMgaW4gdGhlIG9iamVjdCBvciBpbiBhIHN1Yi1vYmplY3QuICovXG4gICAgbGFuZ3VhZ2U/OiBzdHJpbmc7XG4gICAgLyoqIEEgbGltaXQgb24gdGhlIG51bWJlciBvZiBvYmplY3RzIHRvIGJlIHJldHVybmVkLiAqL1xuICAgIGxpbWl0PzogbnVtYmVyO1xuICAgIC8qKiBBIGN1cnNvciBmb3IgdXNlIGluIHBhZ2luYXRpb24uICYjeDYwO3N0YXJ0aW5nX2FmdGVyJiN4NjA7IGlzIGFuIG9iamVjdCBJRCB0aGF0IGRlZmluZXMgeW91ciBwbGFjZSBpbiB0aGUgbGlzdC4gRm9yIGluc3RhbmNlLCBpZiB5b3UgbWFrZSBhIGxpc3QgcmVxdWVzdCBhbmQgcmVjZWl2ZSAxMDAgb2JqZWN0cywgZW5kaW5nIHdpdGggJiN4NjA7b2JqX2ZvbyYjeDYwOywgeW91ciBzdWJzZXF1ZW50IGNhbGwgY2FuIGluY2x1ZGUgJiN4NjA7c3RhcnRpbmdfYWZ0ZXImI3gzRDtvYmpfZm9vJiN4NjA7IGluIG9yZGVyIHRvIGZldGNoIHRoZSBuZXh0IHBhZ2Ugb2YgdGhlIGxpc3QuICovXG4gICAgc3RhcnRpbmdBZnRlcj86IHN0cmluZztcbiAgICAvKiogQSBjdXJzb3IgZm9yIHVzZSBpbiBwYWdpbmF0aW9uLiAmI3g2MDtlbmRpbmdfYmVmb3JlJiN4NjA7IGlzIGFuIG9iamVjdCBJRCB0aGF0IGRlZmluZXMgeW91ciBwbGFjZSBpbiB0aGUgbGlzdC4gRm9yIGluc3RhbmNlLCBpZiB5b3UgbWFrZSBhIGxpc3QgcmVxdWVzdCBhbmQgcmVjZWl2ZSAxMDAgb2JqZWN0cywgc3RhcnRpbmcgd2l0aCAmI3g2MDtvYmpfYmFyJiN4NjA7LCB5b3VyIHN1YnNlcXVlbnQgY2FsbCBjYW4gaW5jbHVkZSAmI3g2MDtlbmRpbmdfYmVmb3JlJiN4M0Q7b2JqX2JhciYjeDYwOyBpbiBvcmRlciB0byBmZXRjaCB0aGUgcHJldmlvdXMgcGFnZSBvZiB0aGUgbGlzdC4gKi9cbiAgICBlbmRpbmdCZWZvcmU/OiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBkbyBhICYjeDYwO2NvdW50KCkmI3g2MDsgaW4gdGhlIFRpdHluYW1vREIgJiN4NjA7ZmlsdGVyKCkmI3g2MDsgZnVuY3Rpb24gYW5kIHJldHVybiBhICYjeDYwO3RvdGFsJiN4NjA7IGF0dHJpYnV0ZXMuIFRoZSBEeW5hbW9EQiAmI3g2MDtjb3VudCgpJiN4NjA7IGZ1bmN0aW9uIGlzblxcJiMzOTt0IGVmZmljaWVudC4gUmVxdWVzdHMgbWF5IHRha2UgbW9yZSB0aW1lIHdpdGggdGhpcyBwYXJhbWV0ZXIgc2V0IHRvICYjeDYwO1RydWUmI3g2MDsuICovXG4gICAgd2l0aFRvdGFsPzogYm9vbGVhbjtcbiAgICAvKiogRmlsdGVyIGFsbCBGb3JmYWl0IHRoYXQgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgJiN4NjA7b3JnYW5pemF0aW9uJiN4NjA7LiAqL1xuICAgIG9yZ2FuaXphdGlvbj86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBGb3JmYWl0IHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtzdGF0dXMmI3g2MDsuICovXG4gICAgc3RhdHVzPzogTGlzdEZvcmZhaXRTdGF0dXNQYXJhbWV0ZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgRm9yZmFpdHMgd2hvc2UgJiN4NjA7c3RhdHVzJiN4NjA7IGJlbG9uZyB0byB0aGUgc3BlY2lmaWVkIGxpc3QuICovXG4gICAgc3RhdHVzSW4/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBGaWx0ZXIgYWxsIEZvcmZhaXQgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO3R5cGUmI3g2MDsuICovXG4gICAgdHlwZT86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBGb3JmYWl0cyB3aG9zZSAmI3g2MDt0eXBlJiN4NjA7IGJlbG9uZyB0byB0aGUgc3BlY2lmaWVkIGxpc3QuICovXG4gICAgdHlwZUluPzogQXJyYXk8c3RyaW5nPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXRyaWV2ZUZvcmZhaXRSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIE9iamVjdCBpcyBwcmVmZXJhYmx5IHJldHJpZXZlIHRocm91Z2ggaXRzICYjeDYwO2lkJiN4NjA7IGJ1dCBpcyBhbHNvIGFjY2Vzc2libGUgdGhyb3VnaCB0aGUgJiN4NjA7ZmljaGVfaWQmI3g2MDsuICovXG4gICAgaWQ6IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogVGhpcyBpcyB1c2VkIHRvIGNoYW5nZSB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIHRleHRzIGluIHRoZSBvYmplY3Qgb3IgaW4gYSBzdWItb2JqZWN0LiAqL1xuICAgIGxhbmd1YWdlPzogc3RyaW5nO1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEZvcmZhaXRzU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3QgYWxsIGZvcmZhaXRzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGxpc3RGb3JmYWl0KHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0Rm9yZmFpdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdEZvcmZhaXQyMDBSZXNwb25zZT47XG4gICAgcHVibGljIGxpc3RGb3JmYWl0KHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0Rm9yZmFpdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0Rm9yZmFpdDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3RGb3JmYWl0KHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0Rm9yZmFpdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdEZvcmZhaXQyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0Rm9yZmFpdChyZXF1ZXN0UGFyYW1ldGVyczogTGlzdEZvcmZhaXRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGxpc3RGb3JmYWl0LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBleHBhbmQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZXhwYW5kO1xuICAgICAgICBjb25zdCBpZHMgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWRzO1xuICAgICAgICBjb25zdCBsYW5ndWFnZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5sYW5ndWFnZTtcbiAgICAgICAgY29uc3QgbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGltaXQ7XG4gICAgICAgIGNvbnN0IHN0YXJ0aW5nQWZ0ZXIgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRpbmdBZnRlcjtcbiAgICAgICAgY29uc3QgZW5kaW5nQmVmb3JlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmVuZGluZ0JlZm9yZTtcbiAgICAgICAgY29uc3Qgd2l0aFRvdGFsID0gcmVxdWVzdFBhcmFtZXRlcnM/LndpdGhUb3RhbDtcbiAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnM/Lm9yZ2FuaXphdGlvbjtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXR1cztcbiAgICAgICAgY29uc3Qgc3RhdHVzSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhdHVzSW47XG4gICAgICAgIGNvbnN0IHR5cGUgPSByZXF1ZXN0UGFyYW1ldGVycz8udHlwZTtcbiAgICAgICAgY29uc3QgdHlwZUluID0gcmVxdWVzdFBhcmFtZXRlcnM/LnR5cGVJbjtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWRzKSB7XG4gICAgICAgICAgICBpZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpZHMnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pmxhbmd1YWdlLCAnbGFuZ3VhZ2UnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmxpbWl0LCAnbGltaXQnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXJ0aW5nQWZ0ZXIsICdzdGFydGluZ19hZnRlcicpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZW5kaW5nQmVmb3JlLCAnZW5kaW5nX2JlZm9yZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+d2l0aFRvdGFsLCAnd2l0aF90b3RhbCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+b3JnYW5pemF0aW9uLCAnb3JnYW5pemF0aW9uJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGF0dXMsICdzdGF0dXMnKTtcbiAgICAgICAgaWYgKHN0YXR1c0luKSB7XG4gICAgICAgICAgICBzdGF0dXNJbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3N0YXR1c19pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+dHlwZSwgJ3R5cGUnKTtcbiAgICAgICAgaWYgKHR5cGVJbikge1xuICAgICAgICAgICAgdHlwZUluLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAndHlwZV9pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9mb3JmYWl0c2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdEZvcmZhaXQyMDBSZXNwb25zZT4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhIGZvcmZhaXRcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV0cmlldmVGb3JmYWl0KHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZUZvcmZhaXRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3RGb3JmYWl0MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj47XG4gICAgcHVibGljIHJldHJpZXZlRm9yZmFpdChyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVGb3JmYWl0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RGb3JmYWl0MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZUZvcmZhaXQocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlRm9yZmFpdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdEZvcmZhaXQyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHJldHJpZXZlRm9yZmFpdChyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVGb3JmYWl0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXRyaWV2ZUZvcmZhaXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldHJpZXZlRm9yZmFpdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGFuZ3VhZ2U7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pmxhbmd1YWdlLCAnbGFuZ3VhZ2UnKTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvZm9yZmFpdHMvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfWA7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdEZvcmZhaXQyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPignZ2V0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHBhcmFtczogbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IENyZWF0ZUt5Y0RvY3VtZW50MjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9jcmVhdGVLeWNEb2N1bWVudDIwMFJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IENyZWF0ZUt5Y0RvY3VtZW50UmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL2NyZWF0ZUt5Y0RvY3VtZW50UmVxdWVzdCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBVcGxvYWRGaWxlUmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL3VwbG9hZEZpbGVSZXF1ZXN0JztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlS3ljRG9jdW1lbnRSZXF1ZXN0UGFyYW1zIHtcbiAgICBjcmVhdGVLeWNEb2N1bWVudFJlcXVlc3Q/OiBDcmVhdGVLeWNEb2N1bWVudFJlcXVlc3Q7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkRmlsZVJlcXVlc3RQYXJhbXMge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdXBsb2FkRmlsZVJlcXVlc3Q/OiBVcGxvYWRGaWxlUmVxdWVzdDtcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBLWUNTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nfHN0cmluZ1tdLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihiYXNlUGF0aCwgY29uZmlndXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgS1lDIGRvY3VtZW50IGZvciBhIGN5Y2xpc3RcbiAgICAgKiBBbGwgdGhlIGJhc2ljIEtZQyBkb2N1bWVudHMgYXJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSB3aGVuIHRoZSBjeWNsaXN0IGlzIGNyZWF0ZWQuIFRoaXMgZW5kcG9pbnQgaXMgdXNlZCB0byBjcmVhdGUgYWRkaXRpb25hbCBLWUMgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVLeWNEb2N1bWVudChyZXF1ZXN0UGFyYW1ldGVycz86IENyZWF0ZUt5Y0RvY3VtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxDcmVhdGVLeWNEb2N1bWVudDIwMFJlc3BvbnNlPjtcbiAgICBwdWJsaWMgY3JlYXRlS3ljRG9jdW1lbnQocmVxdWVzdFBhcmFtZXRlcnM/OiBDcmVhdGVLeWNEb2N1bWVudFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDcmVhdGVLeWNEb2N1bWVudDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGNyZWF0ZUt5Y0RvY3VtZW50KHJlcXVlc3RQYXJhbWV0ZXJzPzogQ3JlYXRlS3ljRG9jdW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENyZWF0ZUt5Y0RvY3VtZW50MjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlS3ljRG9jdW1lbnQocmVxdWVzdFBhcmFtZXRlcnM/OiBDcmVhdGVLeWNEb2N1bWVudFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUt5Y0RvY3VtZW50UmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVLeWNEb2N1bWVudFJlcXVlc3Q7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9reWNzYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxDcmVhdGVLeWNEb2N1bWVudDIwMFJlc3BvbnNlPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiBjcmVhdGVLeWNEb2N1bWVudFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwbG9hZCBmaWxlcyBmb3IgYSBLWUMgZG9jdW1lbnRcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBsb2FkRmlsZShyZXF1ZXN0UGFyYW1ldGVyczogVXBsb2FkRmlsZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8Q3JlYXRlS3ljRG9jdW1lbnQyMDBSZXNwb25zZT47XG4gICAgcHVibGljIHVwbG9hZEZpbGUocmVxdWVzdFBhcmFtZXRlcnM6IFVwbG9hZEZpbGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q3JlYXRlS3ljRG9jdW1lbnQyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyB1cGxvYWRGaWxlKHJlcXVlc3RQYXJhbWV0ZXJzOiBVcGxvYWRGaWxlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDcmVhdGVLeWNEb2N1bWVudDIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIHVwbG9hZEZpbGUocmVxdWVzdFBhcmFtZXRlcnM6IFVwbG9hZEZpbGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZDtcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBsb2FkRmlsZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cGxvYWRGaWxlUmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy51cGxvYWRGaWxlUmVxdWVzdDtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL2t5Y3MvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfS91cGxvYWRgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PENyZWF0ZUt5Y0RvY3VtZW50MjAwUmVzcG9uc2U+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IHVwbG9hZEZpbGVSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbW92ZU1lbWJlck9yZ2FuaXphdGlvblJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBPYmplY3QgaXMgcHJlZmVyYWJseSByZXRyaWV2ZSB0aHJvdWdoIGl0cyAmI3g2MDtpZCYjeDYwOyBidXQgaXMgYWxzbyBhY2Nlc3NpYmxlIHRocm91Z2ggaXRzICYjeDYwO2N1c3RvbWVyX2lkJiN4NjA7IGZpZWxkLiAqL1xuICAgIGlkOiBzdHJpbmc7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG59XG5cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgTWVtYmVyc2hpcHNTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nfHN0cmluZ1tdLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihiYXNlUGF0aCwgY29uZmlndXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgbWVtYmVyIGZyb20gYW4gb3JnYW5pemF0aW9uXG4gICAgICogSWYgdGhlIGN5Y2xpc3QgaGF2ZSBhbiBhYm9ubmVtZW50IHdpbGwgdHJ5IHRvIGRlbGV0ZSBpdHMgYWJvbm5lbWVudC4gSWYgdGhpcyBmYWlscywgd2lsbCBwYXNzIHRoZSBzdGF0dXMgb2YgdGhlIG1lbWJlcnNoaXAgdG8gJiN4NjA7ZGVsZXRpb25fcGVuZGluZyYjeDYwOyBhbmQgYSBDUk9OIHdpbGwgdHJ5IHRvIGNhbmNlbCB0aGUgbWVtYmVyc2hpcCByZWd1bGFybHlcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVtb3ZlTWVtYmVyT3JnYW5pemF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZW1vdmVNZW1iZXJPcmdhbml6YXRpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIHJlbW92ZU1lbWJlck9yZ2FuaXphdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogUmVtb3ZlTWVtYmVyT3JnYW5pemF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyByZW1vdmVNZW1iZXJPcmdhbml6YXRpb24ocmVxdWVzdFBhcmFtZXRlcnM6IFJlbW92ZU1lbWJlck9yZ2FuaXphdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIHJlbW92ZU1lbWJlck9yZ2FuaXphdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogUmVtb3ZlTWVtYmVyT3JnYW5pemF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlbW92ZU1lbWJlck9yZ2FuaXphdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlbW92ZU1lbWJlck9yZ2FuaXphdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL29yZ2FuaXphdGlvbnMvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfS9tZW1iZXJzYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxhbnk+KCdkZWxldGUnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3ROZXcyMDBSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL2xpc3ROZXcyMDBSZXNwb25zZSc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIExpc3ROZXdSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIFRoZSBQcm9ncmFtIHRoZSBOZXcgYmVsb25ncyB0by4gKi9cbiAgICBwcm9ncmFtMjogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgLyoqIEluc3BpcmVkIGJ5IFN0cmlwZS4gTWFueSBvYmplY3RzIGNvbnRhaW4gdGhlIElEIG9mIGEgcmVsYXRlZCBvYmplY3QgaW4gdGhlaXIgcmVzcG9uc2UgcHJvcGVydGllcy4gRm9yIGV4YW1wbGUsIGEgVHJpcCBoYXZlIGFuIGFzc29jaWF0ZWQgVmVoaWN1bGUgSUQuIFRob3NlIG9iamVjdHMgY2FuIGJlIGV4cGFuZGVkIGlubGluZSB3aXRoIHRoZSBleHBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE9iamVjdHMgdGhhdCBjYW4gYmUgZXhwYW5kZWQgYXJlIG5vdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbi4gVGhpcyBwYXJhbWV0ZXIgaXMgYXZhaWxhYmxlIG9uIGFsbCBBUEkgcmVxdWVzdHMsIGFuZCBhcHBsaWVzIHRvIHRoZSByZXNwb25zZSBvZiB0aGF0IHJlcXVlc3Qgb25seS4gWW91IGNhbiBuZXN0IGV4cGFuZCByZXF1ZXN0cyB3aXRoIHRoZSBkb3QgcHJvcGVydHkuIEZvciBleGFtcGxlLCByZXF1ZXN0aW5nIGludm9pY2UuY3VzdG9tZXIgb24gYSBjaGFyZ2Ugd2lsbCBleHBhbmQgdGhlIGludm9pY2UgcHJvcGVydHkgaW50byBhIGZ1bGwgSW52b2ljZSBvYmplY3QsIGFuZCB3aWxsIHRoZW4gZXhwYW5kIHRoZSBjdXN0b21lciBwcm9wZXJ0eSBvbiB0aGF0IGludm9pY2UgaW50byBhIGZ1bGwgQ3VzdG9tZXIgb2JqZWN0LiBZb3UgY2FuIGV4cGFuZCBtdWx0aXBsZSBvYmplY3RzIGF0IG9uY2UgYnkgaWRlbnRpZnlpbmcgbXVsdGlwbGUgaXRlbXMgaW4gdGhlIGV4cGFuZCBhcnJheS4gKi9cbiAgICBleHBhbmQ/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBVc2VkIHRvIG1ha2UgYSBnZXQgYmF0Y2ggd2l0aCB0aGUgc3BlY2lmaWVkIGlkcy4gV2lsbCBvdmVycmlkZSBhbGwgb3RoZXIgZmlsdGVycyBpZiBzZXQuICovXG4gICAgaWRzPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogVGhpcyBpcyB1c2VkIHRvIGNoYW5nZSB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIHRleHRzIGluIHRoZSBvYmplY3Qgb3IgaW4gYSBzdWItb2JqZWN0LiAqL1xuICAgIGxhbmd1YWdlPzogc3RyaW5nO1xuICAgIC8qKiBBIGxpbWl0IG9uIHRoZSBudW1iZXIgb2Ygb2JqZWN0cyB0byBiZSByZXR1cm5lZC4gKi9cbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICAvKiogQSBjdXJzb3IgZm9yIHVzZSBpbiBwYWdpbmF0aW9uLiAmI3g2MDtzdGFydGluZ19hZnRlciYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIGVuZGluZyB3aXRoICYjeDYwO29ial9mb28mI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO3N0YXJ0aW5nX2FmdGVyJiN4M0Q7b2JqX2ZvbyYjeDYwOyBpbiBvcmRlciB0byBmZXRjaCB0aGUgbmV4dCBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIHN0YXJ0aW5nQWZ0ZXI/OiBzdHJpbmc7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIHN0YXJ0aW5nIHdpdGggJiN4NjA7b2JqX2JhciYjeDYwOywgeW91ciBzdWJzZXF1ZW50IGNhbGwgY2FuIGluY2x1ZGUgJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDNEO29ial9iYXImI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIHByZXZpb3VzIHBhZ2Ugb2YgdGhlIGxpc3QuICovXG4gICAgZW5kaW5nQmVmb3JlPzogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgZG8gYSAmI3g2MDtjb3VudCgpJiN4NjA7IGluIHRoZSBUaXR5bmFtb0RCICYjeDYwO2ZpbHRlcigpJiN4NjA7IGZ1bmN0aW9uIGFuZCByZXR1cm4gYSAmI3g2MDt0b3RhbCYjeDYwOyBhdHRyaWJ1dGVzLiBUaGUgRHluYW1vREIgJiN4NjA7Y291bnQoKSYjeDYwOyBmdW5jdGlvbiBpc25cXCYjMzk7dCBlZmZpY2llbnQuIFJlcXVlc3RzIG1heSB0YWtlIG1vcmUgdGltZSB3aXRoIHRoaXMgcGFyYW1ldGVyIHNldCB0byAmI3g2MDtUcnVlJiN4NjA7LiAqL1xuICAgIHdpdGhUb3RhbD86IGJvb2xlYW47XG4gICAgLyoqIEZpbHRlciBhbGwgTmV3cyB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7c3RhdHVzJiN4NjA7LiAqL1xuICAgIHN0YXR1cz86IHN0cmluZztcbiAgICAvKiogSWYgZ2l2ZW4sIHdpbGwgcmV0dXJuZWQgb25seSB0aGUgdW5zZWVuIE5ld3MgZm9yIHRoZSBzcGVjaWZpZWQgJiN4NjA7cHJpb3JpdHkmI3g2MDsuICovXG4gICAgcHJpb3JpdHk/OiBzdHJpbmc7XG59XG5cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgTmV3c1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IGFsbCBOZXdzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGxpc3ROZXcocmVxdWVzdFBhcmFtZXRlcnM6IExpc3ROZXdSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3ROZXcyMDBSZXNwb25zZT47XG4gICAgcHVibGljIGxpc3ROZXcocmVxdWVzdFBhcmFtZXRlcnM6IExpc3ROZXdSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdE5ldzIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3ROZXcocmVxdWVzdFBhcmFtZXRlcnM6IExpc3ROZXdSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3ROZXcyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0TmV3KHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0TmV3UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBsaXN0TmV3LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2dyYW0yID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW0yO1xuICAgICAgICBpZiAocHJvZ3JhbTIgPT09IG51bGwgfHwgcHJvZ3JhbTIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbTIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBsaXN0TmV3LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBleHBhbmQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZXhwYW5kO1xuICAgICAgICBjb25zdCBpZHMgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWRzO1xuICAgICAgICBjb25zdCBsYW5ndWFnZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5sYW5ndWFnZTtcbiAgICAgICAgY29uc3QgbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGltaXQ7XG4gICAgICAgIGNvbnN0IHN0YXJ0aW5nQWZ0ZXIgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRpbmdBZnRlcjtcbiAgICAgICAgY29uc3QgZW5kaW5nQmVmb3JlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmVuZGluZ0JlZm9yZTtcbiAgICAgICAgY29uc3Qgd2l0aFRvdGFsID0gcmVxdWVzdFBhcmFtZXRlcnM/LndpdGhUb3RhbDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXR1cztcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJpb3JpdHk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkcykge1xuICAgICAgICAgICAgaWRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaWRzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5sYW5ndWFnZSwgJ2xhbmd1YWdlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5saW1pdCwgJ2xpbWl0Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGFydGluZ0FmdGVyLCAnc3RhcnRpbmdfYWZ0ZXInKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVuZGluZ0JlZm9yZSwgJ2VuZGluZ19iZWZvcmUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PndpdGhUb3RhbCwgJ3dpdGhfdG90YWwnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXR1cywgJ3N0YXR1cycpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cHJpb3JpdHksICdwcmlvcml0eScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cHJvZ3JhbTIsICdwcm9ncmFtJyk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL25ld3NgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3ROZXcyMDBSZXNwb25zZT4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBBc3NvY2lhdGVQYXNzUmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL2Fzc29jaWF0ZVBhc3NSZXF1ZXN0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RQYXNzMjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9saXN0UGFzczIwMFJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RQYXNzMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lciB9IGZyb20gJy4uL21vZGVsL2xpc3RQYXNzMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcic7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIEFzc29jaWF0ZVBhc3NSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICBhc3NvY2lhdGVQYXNzUmVxdWVzdD86IEFzc29jaWF0ZVBhc3NSZXF1ZXN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERpc2Fzc29jaWF0ZVBhc3NSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogT2JqZWN0IGlzIHByZWZlcmFibHkgcmV0cmlldmUgdGhyb3VnaCBpdHMgJiN4NjA7aWQmI3g2MDsgYnV0IGlzIGFsc28gYWNjZXNzaWJsZSB0aHJvdWdoIGl0cyAmI3g2MDt1aWQmI3g2MDsgZmllbGQuICovXG4gICAgaWQ6IHN0cmluZztcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogRmlsdGVyIGFsbCBQYXNzZXMgdGhhdCBiZWxvbmdzIHRvIHRoZSBzcGVjaWZpZWQgJiN4NjA7cHJvZ3JhbSYjeDYwOy4gKi9cbiAgICBwcm9ncmFtMj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaXN0UGFzc1JlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogVXNlZCB0byBtYWtlIGEgZ2V0IGJhdGNoIHdpdGggdGhlIHNwZWNpZmllZCBpZHMuIFdpbGwgb3ZlcnJpZGUgYWxsIG90aGVyIGZpbHRlcnMgaWYgc2V0LiAqL1xuICAgIGlkcz86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEEgbGltaXQgb24gdGhlIG51bWJlciBvZiBvYmplY3RzIHRvIGJlIHJldHVybmVkLiAqL1xuICAgIGxpbWl0PzogbnVtYmVyO1xuICAgIC8qKiBBIGN1cnNvciBmb3IgdXNlIGluIHBhZ2luYXRpb24uICYjeDYwO3N0YXJ0aW5nX2FmdGVyJiN4NjA7IGlzIGFuIG9iamVjdCBJRCB0aGF0IGRlZmluZXMgeW91ciBwbGFjZSBpbiB0aGUgbGlzdC4gRm9yIGluc3RhbmNlLCBpZiB5b3UgbWFrZSBhIGxpc3QgcmVxdWVzdCBhbmQgcmVjZWl2ZSAxMDAgb2JqZWN0cywgZW5kaW5nIHdpdGggJiN4NjA7b2JqX2ZvbyYjeDYwOywgeW91ciBzdWJzZXF1ZW50IGNhbGwgY2FuIGluY2x1ZGUgJiN4NjA7c3RhcnRpbmdfYWZ0ZXImI3gzRDtvYmpfZm9vJiN4NjA7IGluIG9yZGVyIHRvIGZldGNoIHRoZSBuZXh0IHBhZ2Ugb2YgdGhlIGxpc3QuICovXG4gICAgc3RhcnRpbmdBZnRlcj86IHN0cmluZztcbiAgICAvKiogQSBjdXJzb3IgZm9yIHVzZSBpbiBwYWdpbmF0aW9uLiAmI3g2MDtlbmRpbmdfYmVmb3JlJiN4NjA7IGlzIGFuIG9iamVjdCBJRCB0aGF0IGRlZmluZXMgeW91ciBwbGFjZSBpbiB0aGUgbGlzdC4gRm9yIGluc3RhbmNlLCBpZiB5b3UgbWFrZSBhIGxpc3QgcmVxdWVzdCBhbmQgcmVjZWl2ZSAxMDAgb2JqZWN0cywgc3RhcnRpbmcgd2l0aCAmI3g2MDtvYmpfYmFyJiN4NjA7LCB5b3VyIHN1YnNlcXVlbnQgY2FsbCBjYW4gaW5jbHVkZSAmI3g2MDtlbmRpbmdfYmVmb3JlJiN4M0Q7b2JqX2JhciYjeDYwOyBpbiBvcmRlciB0byBmZXRjaCB0aGUgcHJldmlvdXMgcGFnZSBvZiB0aGUgbGlzdC4gKi9cbiAgICBlbmRpbmdCZWZvcmU/OiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBkbyBhICYjeDYwO2NvdW50KCkmI3g2MDsgaW4gdGhlIFRpdHluYW1vREIgJiN4NjA7ZmlsdGVyKCkmI3g2MDsgZnVuY3Rpb24gYW5kIHJldHVybiBhICYjeDYwO3RvdGFsJiN4NjA7IGF0dHJpYnV0ZXMuIFRoZSBEeW5hbW9EQiAmI3g2MDtjb3VudCgpJiN4NjA7IGZ1bmN0aW9uIGlzblxcJiMzOTt0IGVmZmljaWVudC4gUmVxdWVzdHMgbWF5IHRha2UgbW9yZSB0aW1lIHdpdGggdGhpcyBwYXJhbWV0ZXIgc2V0IHRvICYjeDYwO1RydWUmI3g2MDsuICovXG4gICAgd2l0aFRvdGFsPzogYm9vbGVhbjtcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyBmaWx0ZXIgYWxsIFBhc3NlcyB3aXRoIGEgJiN4NjA7ZGlzYWJsZWRfYXQmI3g2MDsgZmllbGQgbm90ICYjeDYwO251bGwmI3g2MDsuIElmICYjeDYwO0ZhbHNlJiN4NjA7IGZpbHRlciBhbGwgUGFzc2VzIHdpdGggYSAmI3g2MDtudWxsJiN4NjA7ICYjeDYwO2Rpc2FibGVkX2F0JiN4NjA7IGZpZWxkLiAqL1xuICAgIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgICAvKiogRmlsdGVyIGFsbCBQYXNzZXMgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO21vZGVsJiN4NjA7LiAqL1xuICAgIG1vZGVsPzogc3RyaW5nO1xuICAgIC8qKiBDYW4gYmUgdXNlZCB0byByZXRyaWV2ZSBQYXNzZXMgd2hvc2UgJiN4NjA7bW9kZWwmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBtb2RlbEluPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogUGxlYXNlIHVzZSAmI3g2MDt1aWQmI3g2MDsgbm93LiAqL1xuICAgIHBhc3NJZD86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBQYXNzZXMgdGhhdCBiZWxvbmdzIHRvIHRoZSBzcGVjaWZpZWQgJiN4NjA7cHJvZ3JhbSYjeDYwOy4gKi9cbiAgICBwcm9ncmFtMj86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBQYXNzZXMgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO3R5cGUmI3g2MDsuICovXG4gICAgdHlwZT86IHN0cmluZztcbiAgICAvKiogQ2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgUGFzc2VzIHdob3NlICYjeDYwO3R5cGUmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICB0eXBlSW4/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBGaWx0ZXIgYWxsIFBhc3NlcyB0aGF0IGJlbG9uZ3MgdG8gdGhlIHNwZWNpZmllZCAmI3g2MDt1c2VyJiN4NjA7LiAqL1xuICAgIHVzZXI/OiBzdHJpbmc7XG4gICAgLyoqIEZpbHRlciBhbGwgUGFzc2VzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDt1aWQmI3g2MDsuICovXG4gICAgdWlkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJpZXZlUGFzc1JlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBPYmplY3QgaXMgcHJlZmVyYWJseSByZXRyaWV2ZSB0aHJvdWdoIGl0cyAmI3g2MDtpZCYjeDYwOyBidXQgaXMgYWxzbyBhY2Nlc3NpYmxlIHRocm91Z2ggaXRzICYjeDYwO3VpZCYjeDYwOyBmaWVsZC4gKi9cbiAgICBpZDogc3RyaW5nO1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogRmlsdGVyIGFsbCBQYXNzZXMgdGhhdCBiZWxvbmdzIHRvIHRoZSBzcGVjaWZpZWQgJiN4NjA7cHJvZ3JhbSYjeDYwOy4gKi9cbiAgICBwcm9ncmFtMj86IHN0cmluZztcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBQYXNzZXNTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nfHN0cmluZ1tdLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihiYXNlUGF0aCwgY29uZmlndXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXNzb2NpYXRlIGEgcGFzcyB0byBhIEN5Y2xpc3RcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXNzb2NpYXRlUGFzcyhyZXF1ZXN0UGFyYW1ldGVyczogQXNzb2NpYXRlUGFzc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdFBhc3MyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPjtcbiAgICBwdWJsaWMgYXNzb2NpYXRlUGFzcyhyZXF1ZXN0UGFyYW1ldGVyczogQXNzb2NpYXRlUGFzc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0UGFzczIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgYXNzb2NpYXRlUGFzcyhyZXF1ZXN0UGFyYW1ldGVyczogQXNzb2NpYXRlUGFzc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdFBhc3MyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIGFzc29jaWF0ZVBhc3MocmVxdWVzdFBhcmFtZXRlcnM6IEFzc29jaWF0ZVBhc3NSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFzc29jaWF0ZVBhc3MuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGFzc29jaWF0ZVBhc3NSZXF1ZXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmFzc29jaWF0ZVBhc3NSZXF1ZXN0O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvcGFzc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdFBhc3MyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiBhc3NvY2lhdGVQYXNzUmVxdWVzdCxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzYXNzb2NpYXRlIGEgcGFzc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkaXNhc3NvY2lhdGVQYXNzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEaXNhc3NvY2lhdGVQYXNzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkaXNhc3NvY2lhdGVQYXNzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEaXNhc3NvY2lhdGVQYXNzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkaXNhc3NvY2lhdGVQYXNzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEaXNhc3NvY2lhdGVQYXNzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGlzYXNzb2NpYXRlUGFzcyhyZXF1ZXN0UGFyYW1ldGVyczogRGlzYXNzb2NpYXRlUGFzc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IGlkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkO1xuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkaXNhc3NvY2lhdGVQYXNzLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGlzYXNzb2NpYXRlUGFzcy4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgcHJvZ3JhbTIgPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTI7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cHJvZ3JhbTIsICdwcm9ncmFtJyk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9wYXNzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcImlkXCIsIHZhbHVlOiBpZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX1gO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ2RlbGV0ZScsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IGFsbCBQYXNzZXNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgbGlzdFBhc3MocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RQYXNzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0UGFzczIwMFJlc3BvbnNlPjtcbiAgICBwdWJsaWMgbGlzdFBhc3MocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RQYXNzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RQYXNzMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgbGlzdFBhc3MocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RQYXNzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0UGFzczIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3RQYXNzKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0UGFzc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdFBhc3MuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG4gICAgICAgIGNvbnN0IGlkcyA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZHM7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpbWl0O1xuICAgICAgICBjb25zdCBzdGFydGluZ0FmdGVyID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXJ0aW5nQWZ0ZXI7XG4gICAgICAgIGNvbnN0IGVuZGluZ0JlZm9yZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRpbmdCZWZvcmU7XG4gICAgICAgIGNvbnN0IHdpdGhUb3RhbCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy53aXRoVG90YWw7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmRpc2FibGVkO1xuICAgICAgICBjb25zdCBtb2RlbCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5tb2RlbDtcbiAgICAgICAgY29uc3QgbW9kZWxJbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5tb2RlbEluO1xuICAgICAgICBjb25zdCBwYXNzSWQgPSByZXF1ZXN0UGFyYW1ldGVycz8ucGFzc0lkO1xuICAgICAgICBjb25zdCBwcm9ncmFtMiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtMjtcbiAgICAgICAgY29uc3QgdHlwZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy50eXBlO1xuICAgICAgICBjb25zdCB0eXBlSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8udHlwZUluO1xuICAgICAgICBjb25zdCB1c2VyID0gcmVxdWVzdFBhcmFtZXRlcnM/LnVzZXI7XG4gICAgICAgIGNvbnN0IHVpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy51aWQ7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkcykge1xuICAgICAgICAgICAgaWRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaWRzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5saW1pdCwgJ2xpbWl0Jyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGFydGluZ0FmdGVyLCAnc3RhcnRpbmdfYWZ0ZXInKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVuZGluZ0JlZm9yZSwgJ2VuZGluZ19iZWZvcmUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PndpdGhUb3RhbCwgJ3dpdGhfdG90YWwnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmRpc2FibGVkLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pm1vZGVsLCAnbW9kZWwnKTtcbiAgICAgICAgaWYgKG1vZGVsSW4pIHtcbiAgICAgICAgICAgIG1vZGVsSW4uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdtb2RlbF9pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cGFzc0lkLCAncGFzc19pZCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cHJvZ3JhbTIsICdwcm9ncmFtJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT50eXBlLCAndHlwZScpO1xuICAgICAgICBpZiAodHlwZUluKSB7XG4gICAgICAgICAgICB0eXBlSW4uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd0eXBlX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT51c2VyLCAndXNlcicpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+dWlkLCAndWlkJyk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL3Bhc3NgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3RQYXNzMjAwUmVzcG9uc2U+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYSBQYXNzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJldHJpZXZlUGFzcyhyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVQYXNzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0UGFzczIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyByZXRyaWV2ZVBhc3MocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlUGFzc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0UGFzczIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVQYXNzKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVBhc3NSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3RQYXNzMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZVBhc3MocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlUGFzc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IGlkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkO1xuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXRyaWV2ZVBhc3MuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXRyaWV2ZVBhc3MuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG4gICAgICAgIGNvbnN0IHByb2dyYW0yID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW0yO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZXhwYW5kJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5wcm9ncmFtMiwgJ3Byb2dyYW0nKTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvcGFzcy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJpZFwiLCB2YWx1ZTogaWQsIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0UGFzczIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG59XG4iLCAiLyoqXG4gKiBhcGktY3ljbGlzdFxuICpcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMsIEh0dHBDb250ZXh0IFxuICAgICAgICB9ICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyB9ICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9lbmNvZGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdyeGpzJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgUmV0cmlldmVQcm9ncmFtMjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9yZXRyaWV2ZVByb2dyYW0yMDBSZXNwb25zZSc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJpZXZlUHJvZ3JhbVJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogVGhpcyBpcyB1c2VkIHRvIGNoYW5nZSB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIHRleHRzIGluIHRoZSBvYmplY3Qgb3IgaW4gYSBzdWItb2JqZWN0LiAqL1xuICAgIGxhbmd1YWdlPzogc3RyaW5nO1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFByb2dyYW1zU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGEgcHJvZ3JhbVxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZXRyaWV2ZVByb2dyYW0ocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlUHJvZ3JhbVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8UmV0cmlldmVQcm9ncmFtMjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyByZXRyaWV2ZVByb2dyYW0ocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlUHJvZ3JhbVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxSZXRyaWV2ZVByb2dyYW0yMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZVByb2dyYW0ocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlUHJvZ3JhbVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UmV0cmlldmVQcm9ncmFtMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVQcm9ncmFtKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVByb2dyYW1SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldHJpZXZlUHJvZ3JhbS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGFuZ3VhZ2U7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pmxhbmd1YWdlLCAnbGFuZ3VhZ2UnKTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvcHJvZ3JhbXNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFJldHJpZXZlUHJvZ3JhbTIwMFJlc3BvbnNlPignZ2V0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHBhcmFtczogbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlQWxsT2ZSZWdpc3RyYXRpb25zQWxsT2ZEYXRhSW5uZXIgfSBmcm9tICcuLi9tb2RlbC9yZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZUFsbE9mUmVnaXN0cmF0aW9uc0FsbE9mRGF0YUlubmVyJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IFVwZGF0ZVJlZ2lzdHJhdGlvblJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC91cGRhdGVSZWdpc3RyYXRpb25SZXF1ZXN0JztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cmlldmVSZWdpc3RyYXRpb25SZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlUmVnaXN0cmF0aW9uUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgYm9keT86IFVwZGF0ZVJlZ2lzdHJhdGlvblJlcXVlc3Q7XG59XG5cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgUmVnaXN0cmF0aW9uc1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBvciBDcmVhdGUgYSByZWdpc3RyYXRpb25cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV0cmlldmVSZWdpc3RyYXRpb24ocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlUmVnaXN0cmF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZUFsbE9mUmVnaXN0cmF0aW9uc0FsbE9mRGF0YUlubmVyPjtcbiAgICBwdWJsaWMgcmV0cmlldmVSZWdpc3RyYXRpb24ocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlUmVnaXN0cmF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlQWxsT2ZSZWdpc3RyYXRpb25zQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVSZWdpc3RyYXRpb24ocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlUmVnaXN0cmF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZUFsbE9mUmVnaXN0cmF0aW9uc0FsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHJldHJpZXZlUmVnaXN0cmF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVJlZ2lzdHJhdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVSZWdpc3RyYXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICBleHBhbmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdleHBhbmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvY3ljbGlzdHMvcmVnaXN0cmF0aW9uc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8UmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2VBbGxPZlJlZ2lzdHJhdGlvbnNBbGxPZkRhdGFJbm5lcj4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYSByZWdpc3RyYXRpb25cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlUmVnaXN0cmF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBVcGRhdGVSZWdpc3RyYXRpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlQWxsT2ZSZWdpc3RyYXRpb25zQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyB1cGRhdGVSZWdpc3RyYXRpb24ocmVxdWVzdFBhcmFtZXRlcnM6IFVwZGF0ZVJlZ2lzdHJhdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZUFsbE9mUmVnaXN0cmF0aW9uc0FsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHVwZGF0ZVJlZ2lzdHJhdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogVXBkYXRlUmVnaXN0cmF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZUFsbE9mUmVnaXN0cmF0aW9uc0FsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHVwZGF0ZVJlZ2lzdHJhdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogVXBkYXRlUmVnaXN0cmF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVSZWdpc3RyYXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0UGFyYW1ldGVycz8uYm9keTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL2N5Y2xpc3RzL3JlZ2lzdHJhdGlvbnNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlQWxsT2ZSZWdpc3RyYXRpb25zQWxsT2ZEYXRhSW5uZXI+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IENyZWF0ZVJlbWlzZTIwMVJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvY3JlYXRlUmVtaXNlMjAxUmVzcG9uc2UnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQ3JlYXRlUmVtaXNlUmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL2NyZWF0ZVJlbWlzZVJlcXVlc3QnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLmJhc2Uuc2VydmljZSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVSZW1pc2VSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICBjcmVhdGVSZW1pc2VSZXF1ZXN0PzogQ3JlYXRlUmVtaXNlUmVxdWVzdDtcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBSZW1pc2VzU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHJlbWlzZVxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVSZW1pc2UocmVxdWVzdFBhcmFtZXRlcnM6IENyZWF0ZVJlbWlzZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8Q3JlYXRlUmVtaXNlMjAxUmVzcG9uc2U+O1xuICAgIHB1YmxpYyBjcmVhdGVSZW1pc2UocmVxdWVzdFBhcmFtZXRlcnM6IENyZWF0ZVJlbWlzZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDcmVhdGVSZW1pc2UyMDFSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVSZW1pc2UocmVxdWVzdFBhcmFtZXRlcnM6IENyZWF0ZVJlbWlzZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8Q3JlYXRlUmVtaXNlMjAxUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUmVtaXNlKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVSZW1pc2VSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZVJlbWlzZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgY3JlYXRlUmVtaXNlUmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVSZW1pc2VSZXF1ZXN0O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvcmVtaXNlc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8Q3JlYXRlUmVtaXNlMjAxUmVzcG9uc2U+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGNyZWF0ZVJlbWlzZVJlcXVlc3QsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IFNlYXJjaDIwMFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvc2VhcmNoMjAwUmVzcG9uc2UnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLmJhc2Uuc2VydmljZSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIFRoZSB0ZXh0IHRvIG1hdGNoIGluIHRoZSBxdWVyeS4gKi9cbiAgICBxdWVyeTogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG59XG5cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZ3xzdHJpbmdbXSwgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoYmFzZVBhdGgsIGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZWFyY2gocmVxdWVzdFBhcmFtZXRlcnM6IFNlYXJjaFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8U2VhcmNoMjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyBzZWFyY2gocmVxdWVzdFBhcmFtZXRlcnM6IFNlYXJjaFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxTZWFyY2gyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBzZWFyY2gocmVxdWVzdFBhcmFtZXRlcnM6IFNlYXJjaFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8U2VhcmNoMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgc2VhcmNoKHJlcXVlc3RQYXJhbWV0ZXJzOiBTZWFyY2hSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNlYXJjaC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyeSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5xdWVyeTtcbiAgICAgICAgaWYgKHF1ZXJ5ID09PSBudWxsIHx8IHF1ZXJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXJ5IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2VhcmNoLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnF1ZXJ5LCAncXVlcnknKTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvc2VhcmNoYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxTZWFyY2gyMDBSZXNwb25zZT4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0U3RhdGlvbjIwMFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvbGlzdFN0YXRpb24yMDBSZXNwb25zZSc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0U3RhdGlvbjIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0U3RhdGlvbjIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdFN0YXRpb25TdGF0dXNQYXJhbWV0ZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0U3RhdGlvblN0YXR1c1BhcmFtZXRlcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBUb2dnbGVTdGF0aW9uRmF2b3JpdGVSZXF1ZXN0IH0gZnJvbSAnLi4vbW9kZWwvdG9nZ2xlU3RhdGlvbkZhdm9yaXRlUmVxdWVzdCc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIExpc3RTdGF0aW9uUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgLyoqIEluc3BpcmVkIGJ5IFN0cmlwZS4gTWFueSBvYmplY3RzIGNvbnRhaW4gdGhlIElEIG9mIGEgcmVsYXRlZCBvYmplY3QgaW4gdGhlaXIgcmVzcG9uc2UgcHJvcGVydGllcy4gRm9yIGV4YW1wbGUsIGEgVHJpcCBoYXZlIGFuIGFzc29jaWF0ZWQgVmVoaWN1bGUgSUQuIFRob3NlIG9iamVjdHMgY2FuIGJlIGV4cGFuZGVkIGlubGluZSB3aXRoIHRoZSBleHBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE9iamVjdHMgdGhhdCBjYW4gYmUgZXhwYW5kZWQgYXJlIG5vdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbi4gVGhpcyBwYXJhbWV0ZXIgaXMgYXZhaWxhYmxlIG9uIGFsbCBBUEkgcmVxdWVzdHMsIGFuZCBhcHBsaWVzIHRvIHRoZSByZXNwb25zZSBvZiB0aGF0IHJlcXVlc3Qgb25seS4gWW91IGNhbiBuZXN0IGV4cGFuZCByZXF1ZXN0cyB3aXRoIHRoZSBkb3QgcHJvcGVydHkuIEZvciBleGFtcGxlLCByZXF1ZXN0aW5nIGludm9pY2UuY3VzdG9tZXIgb24gYSBjaGFyZ2Ugd2lsbCBleHBhbmQgdGhlIGludm9pY2UgcHJvcGVydHkgaW50byBhIGZ1bGwgSW52b2ljZSBvYmplY3QsIGFuZCB3aWxsIHRoZW4gZXhwYW5kIHRoZSBjdXN0b21lciBwcm9wZXJ0eSBvbiB0aGF0IGludm9pY2UgaW50byBhIGZ1bGwgQ3VzdG9tZXIgb2JqZWN0LiBZb3UgY2FuIGV4cGFuZCBtdWx0aXBsZSBvYmplY3RzIGF0IG9uY2UgYnkgaWRlbnRpZnlpbmcgbXVsdGlwbGUgaXRlbXMgaW4gdGhlIGV4cGFuZCBhcnJheS4gKi9cbiAgICBleHBhbmQ/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBVc2VkIHRvIG1ha2UgYSBnZXQgYmF0Y2ggd2l0aCB0aGUgc3BlY2lmaWVkIGlkcy4gV2lsbCBvdmVycmlkZSBhbGwgb3RoZXIgZmlsdGVycyBpZiBzZXQuICovXG4gICAgaWRzPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogQSBsaW1pdCBvbiB0aGUgbnVtYmVyIG9mIG9iamVjdHMgdG8gYmUgcmV0dXJuZWQuICovXG4gICAgbGltaXQ/OiBudW1iZXI7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7c3RhcnRpbmdfYWZ0ZXImI3g2MDsgaXMgYW4gb2JqZWN0IElEIHRoYXQgZGVmaW5lcyB5b3VyIHBsYWNlIGluIHRoZSBsaXN0LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSBtYWtlIGEgbGlzdCByZXF1ZXN0IGFuZCByZWNlaXZlIDEwMCBvYmplY3RzLCBlbmRpbmcgd2l0aCAmI3g2MDtvYmpfZm9vJiN4NjA7LCB5b3VyIHN1YnNlcXVlbnQgY2FsbCBjYW4gaW5jbHVkZSAmI3g2MDtzdGFydGluZ19hZnRlciYjeDNEO29ial9mb28mI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIG5leHQgcGFnZSBvZiB0aGUgbGlzdC4gKi9cbiAgICBzdGFydGluZ0FmdGVyPzogc3RyaW5nO1xuICAgIC8qKiBBIGN1cnNvciBmb3IgdXNlIGluIHBhZ2luYXRpb24uICYjeDYwO2VuZGluZ19iZWZvcmUmI3g2MDsgaXMgYW4gb2JqZWN0IElEIHRoYXQgZGVmaW5lcyB5b3VyIHBsYWNlIGluIHRoZSBsaXN0LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSBtYWtlIGEgbGlzdCByZXF1ZXN0IGFuZCByZWNlaXZlIDEwMCBvYmplY3RzLCBzdGFydGluZyB3aXRoICYjeDYwO29ial9iYXImI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO2VuZGluZ19iZWZvcmUmI3gzRDtvYmpfYmFyJiN4NjA7IGluIG9yZGVyIHRvIGZldGNoIHRoZSBwcmV2aW91cyBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIGVuZGluZ0JlZm9yZT86IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIGRvIGEgJiN4NjA7Y291bnQoKSYjeDYwOyBpbiB0aGUgVGl0eW5hbW9EQiAmI3g2MDtmaWx0ZXIoKSYjeDYwOyBmdW5jdGlvbiBhbmQgcmV0dXJuIGEgJiN4NjA7dG90YWwmI3g2MDsgYXR0cmlidXRlcy4gVGhlIER5bmFtb0RCICYjeDYwO2NvdW50KCkmI3g2MDsgZnVuY3Rpb24gaXNuXFwmIzM5O3QgZWZmaWNpZW50LiBSZXF1ZXN0cyBtYXkgdGFrZSBtb3JlIHRpbWUgd2l0aCB0aGlzIHBhcmFtZXRlciBzZXQgdG8gJiN4NjA7VHJ1ZSYjeDYwOy4gKi9cbiAgICB3aXRoVG90YWw/OiBib29sZWFuO1xuICAgIC8qKiBJcyB1c2VkIHdpdGggJiN4NjA7ZmF2b3JpdGUmI3g2MDsgdG8gcmV0cmlldmUgdGhlIGZhdm9yaXRlIFN0YXRpb25zIG9mIHRoZSBzcGVjaWZpZWQgJiN4NjA7Y3ljbGlzdCYjeDYwOy4gKi9cbiAgICBjeWNsaXN0Pzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIGVsZWN0cmljYWwgb3Igbm90IGVsZWN0cmljYWwgU3RhdGlvbnMuICovXG4gICAgZWxlY3RyaWNhbD86IGJvb2xlYW47XG4gICAgLyoqIFNob3VsZCBiZSB1c2VkIHdpdGggdGhlICYjeDYwO2N5Y2xpc3QmI3g2MDsgYW5kICYjeDYwO3Byb2dyYW0mI3g2MDsgcGFyYW1ldGVyLiBJZiAmI3g2MDtUcnVlJiN4NjA7IGxpc3QgYWxsIGZhdm9yaXRlIFN0YXRpb25zIG9mIHRoZSBzcGVjaWZpZWQgQ3ljbGlzdC4gSWYgJiN4NjA7RmFsc2UmI3g2MDsgbGlzdCBhbGwgbm9uLWZhdm9yaXRlIFN0YXRpb25zIG9mIHRoZSBzcGVjaWZpZWQgQ3ljbGlzdC4gKi9cbiAgICBmYXZvcml0ZT86IGJvb2xlYW47XG4gICAgLyoqIElzIHVzZWQgd2l0aCB0aGUgJiN4NjA7b3B0aW9uJiN4NjA7IHBhcmFtZXRlci4gQm90aCAmI3g2MDtsYXRpdHVkZSYjeDYwOyBhbmQgJiN4NjA7bG9uZ2l0dWRlJiN4NjA7IHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkIGlmICYjeDYwO29wdGlvbiYjeDYwOyBpcyBzcGVjaWZpZWQuICovXG4gICAgbGF0aXR1ZGU/OiBzdHJpbmc7XG4gICAgLyoqIElzIHVzZWQgd2l0aCB0aGUgJiN4NjA7b3B0aW9uJiN4NjA7IHBhcmFtZXRlci4gQm90aCAmI3g2MDtsYXRpdHVkZSYjeDYwOyBhbmQgJiN4NjA7bG9uZ2l0dWRlJiN4NjA7IHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkIGlmICYjeDYwO29wdGlvbiYjeDYwOyBpcyBzcGVjaWZpZWQuICovXG4gICAgbG9uZ2l0dWRlPzogc3RyaW5nO1xuICAgIC8qKiBPcHRpb24gZm9yIGZpbHRlcmluZyBvbiBjb29yZGluYXRlLiBJZ25vcmVkIHdoZW4gJiN4NjA7bGF0aXR1ZGUmI3g2MDsgb3IgJiN4NjA7bG9uZ2l0dWRlJiN4NjA7IGFyZSBub3Qgc3BlY2lmaWVkLiAqL1xuICAgIG9wdGlvbj86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBTdGF0aW9uIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtwcm9ncmFtJiN4NjA7LiAqL1xuICAgIHByb2dyYW0yPzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFN0YXRpb25zIHdpdGggYSAmI3g2MDtzY29yZSYjeDYwOyBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBzY29yZT86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBTdGF0aW9ucyB3aXRoIGEgJiN4NjA7c2NvcmUmI3g2MDsgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIHNjb3JlR3RlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFN0YXRpb25zIHdpdGggYSAmI3g2MDtzY29yZSYjeDYwOyBsb3dlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIHNjb3JlTHRlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFN0YXRpb25zIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtzdGF0dXMmI3g2MDsuICovXG4gICAgc3RhdHVzPzogTGlzdFN0YXRpb25TdGF0dXNQYXJhbWV0ZXI7XG4gICAgLyoqIENhbiBiZSB1c2VkIHRvIHJldHJpZXZlIFN0YXRpb25zIHdob3NlICYjeDYwO3N0YXR1cyYjeDYwOyBiZWxvbmcgdG8gdGhlIHNwZWNpZmllZCBsaXN0LiAqL1xuICAgIHN0YXR1c0luPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogUGxlYXNlIHVzZSAmI3g2MDtjeWNsaXN0JiN4NjA7LiAqL1xuICAgIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cmlldmVTdGF0aW9uUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIGlkOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSXMgdXNlZCB0byBrbm93IGlmIHRoZSBTdGF0aW9uIGlzIGluIHRoZSBDeWNsaXN0IGZhdm9yaXRlcy4gKi9cbiAgICBjeWNsaXN0Pzogc3RyaW5nO1xuICAgIC8qKiBQbGVhc2UgdXNlICYjeDYwO2N5Y2xpc3QmI3g2MDsuICovXG4gICAgdXNlcj86IHN0cmluZztcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9nZ2xlU3RhdGlvbkZhdm9yaXRlUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIGlkOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICBib2R5PzogVG9nZ2xlU3RhdGlvbkZhdm9yaXRlUmVxdWVzdDtcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBTdGF0aW9uc1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IHN0YXRpb25zXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGxpc3RTdGF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0U3RhdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdFN0YXRpb24yMDBSZXNwb25zZT47XG4gICAgcHVibGljIGxpc3RTdGF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0U3RhdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0U3RhdGlvbjIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3RTdGF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0U3RhdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdFN0YXRpb24yMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0U3RhdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogTGlzdFN0YXRpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGxpc3RTdGF0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBleHBhbmQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZXhwYW5kO1xuICAgICAgICBjb25zdCBpZHMgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWRzO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saW1pdDtcbiAgICAgICAgY29uc3Qgc3RhcnRpbmdBZnRlciA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGFydGluZ0FmdGVyO1xuICAgICAgICBjb25zdCBlbmRpbmdCZWZvcmUgPSByZXF1ZXN0UGFyYW1ldGVycz8uZW5kaW5nQmVmb3JlO1xuICAgICAgICBjb25zdCB3aXRoVG90YWwgPSByZXF1ZXN0UGFyYW1ldGVycz8ud2l0aFRvdGFsO1xuICAgICAgICBjb25zdCBjeWNsaXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmN5Y2xpc3Q7XG4gICAgICAgIGNvbnN0IGVsZWN0cmljYWwgPSByZXF1ZXN0UGFyYW1ldGVycz8uZWxlY3RyaWNhbDtcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uZmF2b3JpdGU7XG4gICAgICAgIGNvbnN0IGxhdGl0dWRlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxhdGl0dWRlO1xuICAgICAgICBjb25zdCBsb25naXR1ZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubG9uZ2l0dWRlO1xuICAgICAgICBjb25zdCBvcHRpb24gPSByZXF1ZXN0UGFyYW1ldGVycz8ub3B0aW9uO1xuICAgICAgICBjb25zdCBwcm9ncmFtMiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtMjtcbiAgICAgICAgY29uc3Qgc2NvcmUgPSByZXF1ZXN0UGFyYW1ldGVycz8uc2NvcmU7XG4gICAgICAgIGNvbnN0IHNjb3JlR3RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LnNjb3JlR3RlO1xuICAgICAgICBjb25zdCBzY29yZUx0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zY29yZUx0ZTtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXR1cztcbiAgICAgICAgY29uc3Qgc3RhdHVzSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhdHVzSW47XG4gICAgICAgIGNvbnN0IHVzZXIgPSByZXF1ZXN0UGFyYW1ldGVycz8udXNlcjtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWRzKSB7XG4gICAgICAgICAgICBpZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpZHMnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmxpbWl0LCAnbGltaXQnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXJ0aW5nQWZ0ZXIsICdzdGFydGluZ19hZnRlcicpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZW5kaW5nQmVmb3JlLCAnZW5kaW5nX2JlZm9yZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+d2l0aFRvdGFsLCAnd2l0aF90b3RhbCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3ljbGlzdCwgJ2N5Y2xpc3QnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVsZWN0cmljYWwsICdlbGVjdHJpY2FsJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5mYXZvcml0ZSwgJ2Zhdm9yaXRlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5sYXRpdHVkZSwgJ2xhdGl0dWRlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5sb25naXR1ZGUsICdsb25naXR1ZGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pm9wdGlvbiwgJ29wdGlvbicpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cHJvZ3JhbTIsICdwcm9ncmFtJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zY29yZSwgJ3Njb3JlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zY29yZUd0ZSwgJ3Njb3JlX2d0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c2NvcmVMdGUsICdzY29yZV9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXR1cywgJ3N0YXR1cycpO1xuICAgICAgICBpZiAoc3RhdHVzSW4pIHtcbiAgICAgICAgICAgIHN0YXR1c0luLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3RhdHVzX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT51c2VyLCAndXNlcicpO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9zdGF0aW9uc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdFN0YXRpb24yMDBSZXNwb25zZT4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhIHN0YXRpb25cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV0cmlldmVTdGF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVN0YXRpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3RTdGF0aW9uMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj47XG4gICAgcHVibGljIHJldHJpZXZlU3RhdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVTdGF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RTdGF0aW9uMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZVN0YXRpb24ocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlU3RhdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdFN0YXRpb24yMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHJldHJpZXZlU3RhdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVTdGF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXRyaWV2ZVN0YXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldHJpZXZlU3RhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgY3ljbGlzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jeWNsaXN0O1xuICAgICAgICBjb25zdCB1c2VyID0gcmVxdWVzdFBhcmFtZXRlcnM/LnVzZXI7XG4gICAgICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmQ7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3ljbGlzdCwgJ2N5Y2xpc3QnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnVzZXIsICd1c2VyJyk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9zdGF0aW9ucy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJpZFwiLCB2YWx1ZTogaWQsIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0U3RhdGlvbjIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdnZXQnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHN0YXRpb24gZmF2b3JpdGVcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdG9nZ2xlU3RhdGlvbkZhdm9yaXRlKHJlcXVlc3RQYXJhbWV0ZXJzOiBUb2dnbGVTdGF0aW9uRmF2b3JpdGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3RTdGF0aW9uMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj47XG4gICAgcHVibGljIHRvZ2dsZVN0YXRpb25GYXZvcml0ZShyZXF1ZXN0UGFyYW1ldGVyczogVG9nZ2xlU3RhdGlvbkZhdm9yaXRlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RTdGF0aW9uMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyB0b2dnbGVTdGF0aW9uRmF2b3JpdGUocmVxdWVzdFBhcmFtZXRlcnM6IFRvZ2dsZVN0YXRpb25GYXZvcml0ZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdFN0YXRpb24yMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHRvZ2dsZVN0YXRpb25GYXZvcml0ZShyZXF1ZXN0UGFyYW1ldGVyczogVG9nZ2xlU3RhdGlvbkZhdm9yaXRlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB0b2dnbGVTdGF0aW9uRmF2b3JpdGUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHRvZ2dsZVN0YXRpb25GYXZvcml0ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5ib2R5O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvc3RhdGlvbnMvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfS9mYXZvcml0ZWA7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdFN0YXRpb24yMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBDcmVhdGVTdWJzY3JpcHRpb24yMDFSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL2NyZWF0ZVN1YnNjcmlwdGlvbjIwMVJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IENyZWF0ZVN1YnNjcmlwdGlvblJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC9jcmVhdGVTdWJzY3JpcHRpb25SZXF1ZXN0JztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlU3Vic2NyaXB0aW9uUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgY3JlYXRlU3Vic2NyaXB0aW9uUmVxdWVzdD86IENyZWF0ZVN1YnNjcmlwdGlvblJlcXVlc3Q7XG59XG5cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uc1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlU3Vic2NyaXB0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVTdWJzY3JpcHRpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPENyZWF0ZVN1YnNjcmlwdGlvbjIwMVJlc3BvbnNlPjtcbiAgICBwdWJsaWMgY3JlYXRlU3Vic2NyaXB0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVTdWJzY3JpcHRpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q3JlYXRlU3Vic2NyaXB0aW9uMjAxUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlU3Vic2NyaXB0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVTdWJzY3JpcHRpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENyZWF0ZVN1YnNjcmlwdGlvbjIwMVJlc3BvbnNlPj47XG4gICAgcHVibGljIGNyZWF0ZVN1YnNjcmlwdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogQ3JlYXRlU3Vic2NyaXB0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVTdWJzY3JpcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVN1YnNjcmlwdGlvblJlcXVlc3QgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlU3Vic2NyaXB0aW9uUmVxdWVzdDtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL3N1YnNjcmlwdGlvbnNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PENyZWF0ZVN1YnNjcmlwdGlvbjIwMVJlc3BvbnNlPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiBjcmVhdGVTdWJzY3JpcHRpb25SZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTWFya1RyaXBGb3JUZXJtaW5hdGlvblJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC9tYXJrVHJpcEZvclRlcm1pbmF0aW9uUmVxdWVzdCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBVcGRhdGVUZXJtaW5hdGlvblJlcXVlc3RSZXF1ZXN0IH0gZnJvbSAnLi4vbW9kZWwvdXBkYXRlVGVybWluYXRpb25SZXF1ZXN0UmVxdWVzdCc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIE1hcmtUcmlwRm9yVGVybWluYXRpb25SZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIE9iamVjdCBpcyBwcmVmZXJhYmx5IHJldHJpZXZlIHRocm91Z2ggaXRzICYjeDYwO2lkJiN4NjA7IGJ1dCBpcyBhbHNvIGFjY2Vzc2libGUgdGhyb3VnaCBpdHMgJiN4NjA7bnVtYmVyJiN4NjA7IGZpZWxkLiAqL1xuICAgIGlkOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICBib2R5PzogTWFya1RyaXBGb3JUZXJtaW5hdGlvblJlcXVlc3Q7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlVGVybWluYXRpb25SZXF1ZXN0UmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBPYmplY3QgaXMgcHJlZmVyYWJseSByZXRyaWV2ZSB0aHJvdWdoIGl0cyAmI3g2MDtpZCYjeDYwOyBidXQgaXMgYWxzbyBhY2Nlc3NpYmxlIHRocm91Z2ggaXRzICYjeDYwO251bWJlciYjeDYwOyBmaWVsZC4gKi9cbiAgICBpZDogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgYm9keT86IFVwZGF0ZVRlcm1pbmF0aW9uUmVxdWVzdFJlcXVlc3Q7XG59XG5cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgVGVybWluYXRpb25SZXF1ZXN0c1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIGEgdHJpcCBmb3IgdGVybWluYXRpb25cbiAgICAgKiBNYXJrIGEgdHJpcCBmb3IgdGVybWluYXRpb24uIFJlcXVpcmUgbm8gY2VydGFpbnR5IGFib3V0IHRoZSB3aGVyZWFib3V0IG9mIHRoZSB2ZWhpY3VsZS4gVGhlIHRyaXAgd2lsbCBiZSB0ZXJtaW5hdGUgYXMgc29vbiBhcyB0aGUgdmVoaWN1bGUgd2lsbCBiZSBsb2NhbGl6ZWQgYW5kIHNhZmUgb3IgcmVudGVkIGFnYWluLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBtYXJrVHJpcEZvclRlcm1pbmF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBNYXJrVHJpcEZvclRlcm1pbmF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyBtYXJrVHJpcEZvclRlcm1pbmF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBNYXJrVHJpcEZvclRlcm1pbmF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RUcmlwMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyBtYXJrVHJpcEZvclRlcm1pbmF0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBNYXJrVHJpcEZvclRlcm1pbmF0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgbWFya1RyaXBGb3JUZXJtaW5hdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogTWFya1RyaXBGb3JUZXJtaW5hdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbWFya1RyaXBGb3JUZXJtaW5hdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZDtcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbWFya1RyaXBGb3JUZXJtaW5hdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5ib2R5O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvdHJpcHMvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfS9tYXJrX2Zvcl90ZXJtaW5hdGlvbmA7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdFRyaXAyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgVGVybWluYXRpb24gUmVxdWVzdFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVUZXJtaW5hdGlvblJlcXVlc3QocmVxdWVzdFBhcmFtZXRlcnM6IFVwZGF0ZVRlcm1pbmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdFRyaXAyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPjtcbiAgICBwdWJsaWMgdXBkYXRlVGVybWluYXRpb25SZXF1ZXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBVcGRhdGVUZXJtaW5hdGlvblJlcXVlc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdFRyaXAyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHVwZGF0ZVRlcm1pbmF0aW9uUmVxdWVzdChyZXF1ZXN0UGFyYW1ldGVyczogVXBkYXRlVGVybWluYXRpb25SZXF1ZXN0UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgdXBkYXRlVGVybWluYXRpb25SZXF1ZXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBVcGRhdGVUZXJtaW5hdGlvblJlcXVlc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVRlcm1pbmF0aW9uUmVxdWVzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZDtcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlVGVybWluYXRpb25SZXF1ZXN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmJvZHk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC90cmlwcy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJpZFwiLCB2YWx1ZTogaWQsIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9L3VwZGF0ZV90ZXJtaW5hdGlvbl9yZXF1ZXN0YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IFJldHJpZXZlVGVybXMyMDBSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL3JldHJpZXZlVGVybXMyMDBSZXNwb25zZSc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJpZXZlVGVybXNSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBUZXJtc1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBUZXJtc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZXRyaWV2ZVRlcm1zKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVRlcm1zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxSZXRyaWV2ZVRlcm1zMjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyByZXRyaWV2ZVRlcm1zKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVRlcm1zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlVGVybXMyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZVRlcm1zKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVRlcm1zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXRyaWV2ZVRlcm1zMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVUZXJtcyhyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVUZXJtc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVUZXJtcy4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGFuZ3VhZ2U7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+bGFuZ3VhZ2UsICdsYW5ndWFnZScpO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC90ZXJtc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8UmV0cmlldmVUZXJtczIwMFJlc3BvbnNlPignZ2V0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHBhcmFtczogbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwgIi8qKlxuICogYXBpLWN5Y2xpc3RcbiAqXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjLCBIdHRwQ29udGV4dCBcbiAgICAgICAgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RCYWxhbmNlVHJhbnNhY3Rpb24yMDBSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL2xpc3RCYWxhbmNlVHJhbnNhY3Rpb24yMDBSZXNwb25zZSc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0QmFsYW5jZVRyYW5zYWN0aW9uMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lciB9IGZyb20gJy4uL21vZGVsL2xpc3RCYWxhbmNlVHJhbnNhY3Rpb24yMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uL2FwaS5iYXNlLnNlcnZpY2UnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdEJhbGFuY2VUcmFuc2FjdGlvblJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogQSBsaW1pdCBvbiB0aGUgbnVtYmVyIG9mIG9iamVjdHMgdG8gYmUgcmV0dXJuZWQuICovXG4gICAgbGltaXQ/OiBudW1iZXI7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7c3RhcnRpbmdfYWZ0ZXImI3g2MDsgaXMgYW4gb2JqZWN0IElEIHRoYXQgZGVmaW5lcyB5b3VyIHBsYWNlIGluIHRoZSBsaXN0LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSBtYWtlIGEgbGlzdCByZXF1ZXN0IGFuZCByZWNlaXZlIDEwMCBvYmplY3RzLCBlbmRpbmcgd2l0aCAmI3g2MDtvYmpfZm9vJiN4NjA7LCB5b3VyIHN1YnNlcXVlbnQgY2FsbCBjYW4gaW5jbHVkZSAmI3g2MDtzdGFydGluZ19hZnRlciYjeDNEO29ial9mb28mI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIG5leHQgcGFnZSBvZiB0aGUgbGlzdC4gKi9cbiAgICBzdGFydGluZ0FmdGVyPzogc3RyaW5nO1xuICAgIC8qKiBBIGN1cnNvciBmb3IgdXNlIGluIHBhZ2luYXRpb24uICYjeDYwO2VuZGluZ19iZWZvcmUmI3g2MDsgaXMgYW4gb2JqZWN0IElEIHRoYXQgZGVmaW5lcyB5b3VyIHBsYWNlIGluIHRoZSBsaXN0LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSBtYWtlIGEgbGlzdCByZXF1ZXN0IGFuZCByZWNlaXZlIDEwMCBvYmplY3RzLCBzdGFydGluZyB3aXRoICYjeDYwO29ial9iYXImI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO2VuZGluZ19iZWZvcmUmI3gzRDtvYmpfYmFyJiN4NjA7IGluIG9yZGVyIHRvIGZldGNoIHRoZSBwcmV2aW91cyBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIGVuZGluZ0JlZm9yZT86IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIGRvIGEgJiN4NjA7Y291bnQoKSYjeDYwOyBpbiB0aGUgVGl0eW5hbW9EQiAmI3g2MDtmaWx0ZXIoKSYjeDYwOyBmdW5jdGlvbiBhbmQgcmV0dXJuIGEgJiN4NjA7dG90YWwmI3g2MDsgYXR0cmlidXRlcy4gVGhlIER5bmFtb0RCICYjeDYwO2NvdW50KCkmI3g2MDsgZnVuY3Rpb24gaXNuXFwmIzM5O3QgZWZmaWNpZW50LiBSZXF1ZXN0cyBtYXkgdGFrZSBtb3JlIHRpbWUgd2l0aCB0aGlzIHBhcmFtZXRlciBzZXQgdG8gJiN4NjA7VHJ1ZSYjeDYwOy4gKi9cbiAgICB3aXRoVG90YWw/OiBib29sZWFuO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFJlbWJvdXJzZW1lbnQgbWFkZSBmb3IgdGhlIHNwZWNpZmllZCAmI3g2MDtjeWNsaXN0JiN4NjA7LiAqL1xuICAgIGN5Y2xpc3Q/OiBzdHJpbmc7XG4gICAgLyoqIEZpbHRlciBhbGwgUmVtYm91cnNlbWVudCBtYWRlIGZvciB0aGUgc3BlY2lmaWVkICYjeDYwO3R5cGUmI3g2MDsuICovXG4gICAgdHlwZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXRyaWV2ZUJhbGFuY2VUcmFuc2FjdGlvblJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICBpZDogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG4gICAgLyoqIEluc3BpcmVkIGJ5IFN0cmlwZS4gTWFueSBvYmplY3RzIGNvbnRhaW4gdGhlIElEIG9mIGEgcmVsYXRlZCBvYmplY3QgaW4gdGhlaXIgcmVzcG9uc2UgcHJvcGVydGllcy4gRm9yIGV4YW1wbGUsIGEgVHJpcCBoYXZlIGFuIGFzc29jaWF0ZWQgVmVoaWN1bGUgSUQuIFRob3NlIG9iamVjdHMgY2FuIGJlIGV4cGFuZGVkIGlubGluZSB3aXRoIHRoZSBleHBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE9iamVjdHMgdGhhdCBjYW4gYmUgZXhwYW5kZWQgYXJlIG5vdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbi4gVGhpcyBwYXJhbWV0ZXIgaXMgYXZhaWxhYmxlIG9uIGFsbCBBUEkgcmVxdWVzdHMsIGFuZCBhcHBsaWVzIHRvIHRoZSByZXNwb25zZSBvZiB0aGF0IHJlcXVlc3Qgb25seS4gWW91IGNhbiBuZXN0IGV4cGFuZCByZXF1ZXN0cyB3aXRoIHRoZSBkb3QgcHJvcGVydHkuIEZvciBleGFtcGxlLCByZXF1ZXN0aW5nIGludm9pY2UuY3VzdG9tZXIgb24gYSBjaGFyZ2Ugd2lsbCBleHBhbmQgdGhlIGludm9pY2UgcHJvcGVydHkgaW50byBhIGZ1bGwgSW52b2ljZSBvYmplY3QsIGFuZCB3aWxsIHRoZW4gZXhwYW5kIHRoZSBjdXN0b21lciBwcm9wZXJ0eSBvbiB0aGF0IGludm9pY2UgaW50byBhIGZ1bGwgQ3VzdG9tZXIgb2JqZWN0LiBZb3UgY2FuIGV4cGFuZCBtdWx0aXBsZSBvYmplY3RzIGF0IG9uY2UgYnkgaWRlbnRpZnlpbmcgbXVsdGlwbGUgaXRlbXMgaW4gdGhlIGV4cGFuZCBhcnJheS4gKi9cbiAgICBleHBhbmQ/OiBBcnJheTxzdHJpbmc+O1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFRyYW5zYWN0aW9uc0RlU29sZGVTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nfHN0cmluZ1tdLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihiYXNlUGF0aCwgY29uZmlndXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdCBhbGwgdHJhbnNhY3Rpb25zIGRlIHNvbGRlXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGxpc3RCYWxhbmNlVHJhbnNhY3Rpb24ocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RCYWxhbmNlVHJhbnNhY3Rpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3RCYWxhbmNlVHJhbnNhY3Rpb24yMDBSZXNwb25zZT47XG4gICAgcHVibGljIGxpc3RCYWxhbmNlVHJhbnNhY3Rpb24ocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RCYWxhbmNlVHJhbnNhY3Rpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdEJhbGFuY2VUcmFuc2FjdGlvbjIwMFJlc3BvbnNlPj47XG4gICAgcHVibGljIGxpc3RCYWxhbmNlVHJhbnNhY3Rpb24ocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RCYWxhbmNlVHJhbnNhY3Rpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3RCYWxhbmNlVHJhbnNhY3Rpb24yMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0QmFsYW5jZVRyYW5zYWN0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBMaXN0QmFsYW5jZVRyYW5zYWN0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBsaXN0QmFsYW5jZVRyYW5zYWN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBleHBhbmQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZXhwYW5kO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saW1pdDtcbiAgICAgICAgY29uc3Qgc3RhcnRpbmdBZnRlciA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGFydGluZ0FmdGVyO1xuICAgICAgICBjb25zdCBlbmRpbmdCZWZvcmUgPSByZXF1ZXN0UGFyYW1ldGVycz8uZW5kaW5nQmVmb3JlO1xuICAgICAgICBjb25zdCB3aXRoVG90YWwgPSByZXF1ZXN0UGFyYW1ldGVycz8ud2l0aFRvdGFsO1xuICAgICAgICBjb25zdCBjeWNsaXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmN5Y2xpc3Q7XG4gICAgICAgIGNvbnN0IHR5cGUgPSByZXF1ZXN0UGFyYW1ldGVycz8udHlwZTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+bGltaXQsICdsaW1pdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c3RhcnRpbmdBZnRlciwgJ3N0YXJ0aW5nX2FmdGVyJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5lbmRpbmdCZWZvcmUsICdlbmRpbmdfYmVmb3JlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT53aXRoVG90YWwsICd3aXRoX3RvdGFsJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jeWNsaXN0LCAnY3ljbGlzdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+dHlwZSwgJ3R5cGUnKTtcblxuICAgICAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKGxpdmVNb2RlICE9PSB1bmRlZmluZWQgJiYgbGl2ZU1vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0xpdmUtTW9kZScsIFN0cmluZyhsaXZlTW9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmFtICE9PSB1bmRlZmluZWQgJiYgcHJvZ3JhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgncHJvZ3JhbScsIFN0cmluZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvYmFsYW5jZV90cmFuc2FjdGlvbnNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3RCYWxhbmNlVHJhbnNhY3Rpb24yMDBSZXNwb25zZT4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhIHRyYW5zYWN0aW9uIGRlIHNvbGRlXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJldHJpZXZlQmFsYW5jZVRyYW5zYWN0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZUJhbGFuY2VUcmFuc2FjdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdEJhbGFuY2VUcmFuc2FjdGlvbjIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyByZXRyaWV2ZUJhbGFuY2VUcmFuc2FjdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVCYWxhbmNlVHJhbnNhY3Rpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdEJhbGFuY2VUcmFuc2FjdGlvbjIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVCYWxhbmNlVHJhbnNhY3Rpb24ocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlQmFsYW5jZVRyYW5zYWN0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0QmFsYW5jZVRyYW5zYWN0aW9uMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyByZXRyaWV2ZUJhbGFuY2VUcmFuc2FjdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVCYWxhbmNlVHJhbnNhY3Rpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldHJpZXZlQmFsYW5jZVRyYW5zYWN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkO1xuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXRyaWV2ZUJhbGFuY2VUcmFuc2FjdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcblxuICAgICAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2V4cGFuZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9iYWxhbmNlX3RyYW5zYWN0aW9ucy8ke3RoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVQYXJhbSh7bmFtZTogXCJpZFwiLCB2YWx1ZTogaWQsIGluOiBcInBhdGhcIiwgc3R5bGU6IFwic2ltcGxlXCIsIGV4cGxvZGU6IGZhbHNlLCBkYXRhVHlwZTogXCJzdHJpbmdcIiwgZGF0YUZvcm1hdDogdW5kZWZpbmVkfSl9YDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0QmFsYW5jZVRyYW5zYWN0aW9uMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBDcmVhdGVUcmlwUmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL2NyZWF0ZVRyaXBSZXF1ZXN0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RUcmlwMjAwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9saXN0VHJpcDIwMFJlc3BvbnNlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RUcmlwMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lciB9IGZyb20gJy4uL21vZGVsL2xpc3RUcmlwMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0VHJpcEFnZW50Um9sZVBhcmFtZXRlciB9IGZyb20gJy4uL21vZGVsL2xpc3RUcmlwQWdlbnRSb2xlUGFyYW1ldGVyJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RUcmlwQ3ljbGlzdFJvbGVQYXJhbWV0ZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0VHJpcEN5Y2xpc3RSb2xlUGFyYW1ldGVyJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IExpc3RUcmlwU3RhdHVzUGFyYW1ldGVyIH0gZnJvbSAnLi4vbW9kZWwvbGlzdFRyaXBTdGF0dXNQYXJhbWV0ZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgUGF1c2VUcmlwUmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL3BhdXNlVHJpcFJlcXVlc3QnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgUmVzdW1lVHJpcFJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC9yZXN1bWVUcmlwUmVxdWVzdCc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuLi9hcGkuYmFzZS5zZXJ2aWNlJztcblxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVRyaXBSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICBib2R5PzogQ3JlYXRlVHJpcFJlcXVlc3Q7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdFRyaXBSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbiAgICAvKiogSW5zcGlyZWQgYnkgU3RyaXBlLiBNYW55IG9iamVjdHMgY29udGFpbiB0aGUgSUQgb2YgYSByZWxhdGVkIG9iamVjdCBpbiB0aGVpciByZXNwb25zZSBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSBUcmlwIGhhdmUgYW4gYXNzb2NpYXRlZCBWZWhpY3VsZSBJRC4gVGhvc2Ugb2JqZWN0cyBjYW4gYmUgZXhwYW5kZWQgaW5saW5lIHdpdGggdGhlIGV4cGFuZCByZXF1ZXN0IHBhcmFtZXRlci4gT2JqZWN0cyB0aGF0IGNhbiBiZSBleHBhbmRlZCBhcmUgbm90ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uLiBUaGlzIHBhcmFtZXRlciBpcyBhdmFpbGFibGUgb24gYWxsIEFQSSByZXF1ZXN0cywgYW5kIGFwcGxpZXMgdG8gdGhlIHJlc3BvbnNlIG9mIHRoYXQgcmVxdWVzdCBvbmx5LiBZb3UgY2FuIG5lc3QgZXhwYW5kIHJlcXVlc3RzIHdpdGggdGhlIGRvdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIHJlcXVlc3RpbmcgaW52b2ljZS5jdXN0b21lciBvbiBhIGNoYXJnZSB3aWxsIGV4cGFuZCB0aGUgaW52b2ljZSBwcm9wZXJ0eSBpbnRvIGEgZnVsbCBJbnZvaWNlIG9iamVjdCwgYW5kIHdpbGwgdGhlbiBleHBhbmQgdGhlIGN1c3RvbWVyIHByb3BlcnR5IG9uIHRoYXQgaW52b2ljZSBpbnRvIGEgZnVsbCBDdXN0b21lciBvYmplY3QuIFlvdSBjYW4gZXhwYW5kIG11bHRpcGxlIG9iamVjdHMgYXQgb25jZSBieSBpZGVudGlmeWluZyBtdWx0aXBsZSBpdGVtcyBpbiB0aGUgZXhwYW5kIGFycmF5LiAqL1xuICAgIGV4cGFuZD86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIFVzZWQgdG8gbWFrZSBhIGdldCBiYXRjaCB3aXRoIHRoZSBzcGVjaWZpZWQgaWRzLiBXaWxsIG92ZXJyaWRlIGFsbCBvdGhlciBmaWx0ZXJzIGlmIHNldC4gKi9cbiAgICBpZHM/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBBIGxpbWl0IG9uIHRoZSBudW1iZXIgb2Ygb2JqZWN0cyB0byBiZSByZXR1cm5lZC4gKi9cbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICAvKiogQSBjdXJzb3IgZm9yIHVzZSBpbiBwYWdpbmF0aW9uLiAmI3g2MDtzdGFydGluZ19hZnRlciYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIGVuZGluZyB3aXRoICYjeDYwO29ial9mb28mI3g2MDssIHlvdXIgc3Vic2VxdWVudCBjYWxsIGNhbiBpbmNsdWRlICYjeDYwO3N0YXJ0aW5nX2FmdGVyJiN4M0Q7b2JqX2ZvbyYjeDYwOyBpbiBvcmRlciB0byBmZXRjaCB0aGUgbmV4dCBwYWdlIG9mIHRoZSBsaXN0LiAqL1xuICAgIHN0YXJ0aW5nQWZ0ZXI/OiBzdHJpbmc7XG4gICAgLyoqIEEgY3Vyc29yIGZvciB1c2UgaW4gcGFnaW5hdGlvbi4gJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDYwOyBpcyBhbiBvYmplY3QgSUQgdGhhdCBkZWZpbmVzIHlvdXIgcGxhY2UgaW4gdGhlIGxpc3QuIEZvciBpbnN0YW5jZSwgaWYgeW91IG1ha2UgYSBsaXN0IHJlcXVlc3QgYW5kIHJlY2VpdmUgMTAwIG9iamVjdHMsIHN0YXJ0aW5nIHdpdGggJiN4NjA7b2JqX2JhciYjeDYwOywgeW91ciBzdWJzZXF1ZW50IGNhbGwgY2FuIGluY2x1ZGUgJiN4NjA7ZW5kaW5nX2JlZm9yZSYjeDNEO29ial9iYXImI3g2MDsgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIHByZXZpb3VzIHBhZ2Ugb2YgdGhlIGxpc3QuICovXG4gICAgZW5kaW5nQmVmb3JlPzogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgZG8gYSAmI3g2MDtjb3VudCgpJiN4NjA7IGluIHRoZSBUaXR5bmFtb0RCICYjeDYwO2ZpbHRlcigpJiN4NjA7IGZ1bmN0aW9uIGFuZCByZXR1cm4gYSAmI3g2MDt0b3RhbCYjeDYwOyBhdHRyaWJ1dGVzLiBUaGUgRHluYW1vREIgJiN4NjA7Y291bnQoKSYjeDYwOyBmdW5jdGlvbiBpc25cXCYjMzk7dCBlZmZpY2llbnQuIFJlcXVlc3RzIG1heSB0YWtlIG1vcmUgdGltZSB3aXRoIHRoaXMgcGFyYW1ldGVyIHNldCB0byAmI3g2MDtUcnVlJiN4NjA7LiAqL1xuICAgIHdpdGhUb3RhbD86IGJvb2xlYW47XG4gICAgLyoqIEZpbHRlciBhbGwgb2JqZWN0cyB3aXRoIHRoaXMgc3BlY2lmaWMgJiN4NjA7Y3JlYXRlZCYjeDYwOyB0aW1lc3RhbXAuICovXG4gICAgY3JlYXRlZD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBvYmplY3RzIHdpdGggYSAmI3g2MDtjcmVhdGVkJiN4NjA7IHRpbWVzdGFtcCBncmVhdGVyIHRoYW4gc3BlY2lmaWVkIHZhbHVlLiAqL1xuICAgIGNyZWF0ZWRHdD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBvYmplY3RzIHdpdGggYSAmI3g2MDtjcmVhdGVkJiN4NjA7IHRpbWVzdGFtcCBsb3dlciB0aGFuIHNwZWNpZmllZCB2YWx1ZS4gKi9cbiAgICBjcmVhdGVkTHQ/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgb2JqZWN0cyB3aXRoIGEgJiN4NjA7Y3JlYXRlZCYjeDYwOyB0aW1lc3RhbXAgZ3JlYXRlciBvciBlcXVhbCB0aGFuIHNwZWNpZmllZCB2YWx1ZS4gKi9cbiAgICBjcmVhdGVkR3RlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIG9iamVjdHMgd2l0aCBhICYjeDYwO2NyZWF0ZWQmI3g2MDsgdGltZXN0YW1wIGxvd2VyIG9yIGVxdWFsIHRoYW4gc3BlY2lmaWVkIHZhbHVlLiAqL1xuICAgIGNyZWF0ZWRMdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO2FnZW50JiN4NjA7LiAqL1xuICAgIGFnZW50Pzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDthZ2VudF9yb2xlJiN4NjA7LiAqL1xuICAgIGFnZW50Um9sZT86IExpc3RUcmlwQWdlbnRSb2xlUGFyYW1ldGVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdob3NlICYjeDYwO2FnZW50X3JvbGUmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBhZ2VudFJvbGVJbj86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCBhbiAmI3g2MDthbW91bnQmI3g2MDsgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgYW1vdW50PzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggYW4gJiN4NjA7YW1vdW50JiN4NjA7IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBhbW91bnRHdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCBhbiAmI3g2MDthbW91bnQmI3g2MDsgbG93ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBhbW91bnRMdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO2N5Y2xpc3QmI3g2MDsuICovXG4gICAgY3ljbGlzdD86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7Y3ljbGlzdF9yb2xlJiN4NjA7LiAqL1xuICAgIGN5Y2xpc3RSb2xlPzogTGlzdFRyaXBDeWNsaXN0Um9sZVBhcmFtZXRlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aG9zZSAmI3g2MDtjeWNsaXN0X3JvbGUmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBjeWNsaXN0Um9sZUluPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIGFuICYjeDYwO2Rpc3RhbmNlJiN4NjA7IGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIGRpc3RhbmNlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggYW4gJiN4NjA7ZGlzdGFuY2UmI3g2MDsgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIGRpc3RhbmNlR3RlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggYW4gJiN4NjA7ZGlzdGFuY2UmI3g2MDsgbG93ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBkaXN0YW5jZUx0ZT86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7ZW5kX3JlZ2lvbiYjeDYwOy4gKi9cbiAgICBlbmRSZWdpb24/OiBzdHJpbmc7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2hvc2UgJiN4NjA7ZW5kX3JlZ2lvbl9pbiYjeDYwOyBiZWxvbmcgdG8gdGhlIHNwZWNpZmllZCBsaXN0LiAqL1xuICAgIGVuZFJlZ2lvbkluPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7ZW5kX3N0YXRpb24mI3g2MDsuICovXG4gICAgZW5kU3RhdGlvbj86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aG9zZSAmI3g2MDtlbmRfc3RhdGlvbiYjeDYwOyBiZWxvbmcgdG8gdGhlIHNwZWNpZmllZCBsaXN0LiAqL1xuICAgIGVuZFN0YXRpb25Jbj86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCBhICYjeDYwO2VuZF90aW1lc3RhbXAmI3g2MDsgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgZW5kVGltZXN0YW1wPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggYSAmI3g2MDtlbmRfdGltZXN0YW1wJiN4NjA7IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBlbmRUaW1lc3RhbXBHdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCBhICYjeDYwO2VuZF90aW1lc3RhbXAmI3g2MDsgbG93ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBlbmRUaW1lc3RhbXBMdGU/OiBudW1iZXI7XG4gICAgLyoqIFBsZWFzZSB1c2UgJiN4NjA7ZW5kX3RpbWVzdGFtcF9ndGUmI3g2MDsgbm93LiAqL1xuICAgIGVuZFRpbWVzdGFtcEd0PzogbnVtYmVyO1xuICAgIC8qKiBQbGVhc2UgdXNlICYjeDYwO2VuZF90aW1lc3RhbXBfbHRlJiN4NjA7IG5vdy4gKi9cbiAgICBlbmRUaW1lc3RhbXBMdD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7Zm9yZmFpdCYjeDYwOy4gKi9cbiAgICBmb3JmYWl0Pzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdob3NlICYjeDYwO2ZvcmZhaXQmI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBmb3JmYWl0SW4/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtvcmdhbml6YXRpb24mI3g2MDsuICovXG4gICAgb3JnYW5pemF0aW9uPzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtwcm9ncmFtJiN4NjA7LiAqL1xuICAgIHByb2dyYW0yPzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtzdGFydF9yZWdpb24mI3g2MDsuICovXG4gICAgc3RhcnRSZWdpb24/OiBzdHJpbmc7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2hvc2UgJiN4NjA7c3RhcnRfcmVnaW9uJiN4NjA7IGJlbG9uZyB0byB0aGUgc3BlY2lmaWVkIGxpc3QuICovXG4gICAgc3RhcnRSZWdpb25Jbj86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO3N0YXJ0X3N0YXRpb24mI3g2MDsuICovXG4gICAgc3RhcnRTdGF0aW9uPzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdob3NlICYjeDYwO3N0YXJ0X3N0YXRpb24mI3g2MDsgYmVsb25nIHRvIHRoZSBzcGVjaWZpZWQgbGlzdC4gKi9cbiAgICBzdGFydFN0YXRpb25Jbj86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2l0aCBhICYjeDYwO3N0YXJ0X3RpbWVzdGFtcCYjeDYwOyBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBzdGFydFRpbWVzdGFtcD86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIGEgJiN4NjA7c3RhcnRfdGltZXN0YW1wJiN4NjA7IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gaW50ZWdlci4gKi9cbiAgICBzdGFydFRpbWVzdGFtcEd0ZT86IG51bWJlcjtcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aXRoIGEgJiN4NjA7c3RhcnRfdGltZXN0YW1wJiN4NjA7IGxvd2VyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgc3RhcnRUaW1lc3RhbXBMdGU/OiBudW1iZXI7XG4gICAgLyoqIFBsZWFzZSB1c2UgJiN4NjA7c3RhcnRfdGltZXN0YW1wX2d0ZSYjeDYwOyBub3cuICovXG4gICAgc3RhcnRUaW1lc3RhbXBHdD86IG51bWJlcjtcbiAgICAvKiogUGxlYXNlIHVzZSAmI3g2MDtzdGFydF90aW1lc3RhbXBfbHRlJiN4NjA7IG5vdy4gKi9cbiAgICBzdGFydFRpbWVzdGFtcEx0PzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDtzdGF0dXMmI3g2MDsuICovXG4gICAgc3RhdHVzPzogTGlzdFRyaXBTdGF0dXNQYXJhbWV0ZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgVHJpcHMgd2hvc2UgJiN4NjA7c3RhdHVzJiN4NjA7IGJlbG9uZyB0byB0aGUgc3BlY2lmaWVkIGxpc3QuICovXG4gICAgc3RhdHVzSW4/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBGaWx0ZXIgYWxsIFRyaXBzIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDt2ZWhpY3VsZSYjeDYwOy4gKi9cbiAgICB2ZWhpY3VsZT86IHN0cmluZztcbiAgICAvKiogRmlsdGVyIGFsbCBUcmlwcyB3aG9zZSAmI3g2MDt2ZWhpY3VsZSYjeDYwOyBiZWxvbmcgdG8gdGhlIHNwZWNpZmllZCBsaXN0LiAqL1xuICAgIHZlaGljdWxlSW4/OiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBQbGVhc2UgdXNlICYjeDYwO2N5Y2xpc3QmI3g2MDsuICovXG4gICAgdXNlcj86IHN0cmluZztcbiAgICAvKiogUGxlYXNlIHVzZSAmI3g2MDtjeWNsaXN0X3JvbGUmI3g2MDsuICovXG4gICAgdXNlclJvbGU/OiBMaXN0VHJpcEN5Y2xpc3RSb2xlUGFyYW1ldGVyO1xuICAgIC8qKiBQbGVhc2UgdXNlICYjeDYwO2N5Y2xpc3Rfcm9sZV9pbiYjeDYwOy4gKi9cbiAgICB1c2VyUm9sZUluPzogQXJyYXk8c3RyaW5nPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXVzZVRyaXBSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogVHJpcCBpZGVudGlmaWVyIGluIEVjb3ZlbG8gZGF0YWJhc2UuICovXG4gICAgaWQ6IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIGJvZHk/OiBQYXVzZVRyaXBSZXF1ZXN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhdXNlVHJpcDBSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogT2JqZWN0IGlzIHByZWZlcmFibHkgcmV0cmlldmUgdGhyb3VnaCBpdHMgJiN4NjA7aWQmI3g2MDsgYnV0IGlzIGFsc28gYWNjZXNzaWJsZSB0aHJvdWdoIGl0cyAmI3g2MDtudW1iZXImI3g2MDsgZmllbGQuICovXG4gICAgaWQ6IHN0cmluZztcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICAgIGxpdmVNb2RlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWNvbW1lbmRWZWhpY3VsZVJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogT2JqZWN0IGlzIHByZWZlcmFibHkgcmV0cmlldmUgdGhyb3VnaCBpdHMgJiN4NjA7aWQmI3g2MDsgYnV0IGlzIGFsc28gYWNjZXNzaWJsZSB0aHJvdWdoIGl0cyAmI3g2MDtudW1iZXImI3g2MDsgZmllbGQuICovXG4gICAgaWQ6IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIGJvZHk/OiBhbnkgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3VtZVRyaXBSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogVHJpcCBpZGVudGlmaWVyIGluIEVjb3ZlbG8gZGF0YWJhc2UuICovXG4gICAgaWQ6IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIGJvZHk/OiBSZXN1bWVUcmlwUmVxdWVzdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXN1bWVUcmlwMFJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBPYmplY3QgaXMgcHJlZmVyYWJseSByZXRyaWV2ZSB0aHJvdWdoIGl0cyAmI3g2MDtpZCYjeDYwOyBidXQgaXMgYWxzbyBhY2Nlc3NpYmxlIHRocm91Z2ggaXRzICYjeDYwO251bWJlciYjeDYwOyBmaWVsZC4gKi9cbiAgICBpZDogc3RyaW5nO1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJpZXZlVHJpcFJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogT2JqZWN0IGlzIHByZWZlcmFibHkgcmV0cmlldmUgdGhyb3VnaCBpdHMgJiN4NjA7aWQmI3g2MDsgYnV0IGlzIGFsc28gYWNjZXNzaWJsZSB0aHJvdWdoIGl0cyAmI3g2MDtudW1iZXImI3g2MDsgZmllbGQuICovXG4gICAgaWQ6IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVbmxvY2tUcmlwUmVxdWVzdFBhcmFtcyB7XG4gICAgcHJvZ3JhbTogc3RyaW5nO1xuICAgIC8qKiBPYmplY3QgaXMgcHJlZmVyYWJseSByZXRyaWV2ZSB0aHJvdWdoIGl0cyAmI3g2MDtpZCYjeDYwOyBidXQgaXMgYWxzbyBhY2Nlc3NpYmxlIHRocm91Z2ggaXRzICYjeDYwO251bWJlciYjeDYwOyBmaWVsZC4gKi9cbiAgICBpZDogc3RyaW5nO1xuICAgIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgICBsaXZlTW9kZT86IGJvb2xlYW47XG59XG5cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgVHJpcHNTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nfHN0cmluZ1tdLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihiYXNlUGF0aCwgY29uZmlndXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgdHJpcFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVUcmlwKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVUcmlwUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+O1xuICAgIHB1YmxpYyBjcmVhdGVUcmlwKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVUcmlwUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPExpc3RUcmlwMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4+O1xuICAgIHB1YmxpYyBjcmVhdGVUcmlwKHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVUcmlwUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgY3JlYXRlVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogQ3JlYXRlVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlVHJpcC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5ib2R5O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvdHJpcHNgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3RUcmlwMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4oJ3Bvc3QnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdCB0cmlwc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBsaXN0VHJpcChyZXF1ZXN0UGFyYW1ldGVyczogTGlzdFRyaXBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3RUcmlwMjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyBsaXN0VHJpcChyZXF1ZXN0UGFyYW1ldGVyczogTGlzdFRyaXBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdFRyaXAyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0VHJpcChyZXF1ZXN0UGFyYW1ldGVyczogTGlzdFRyaXBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3RUcmlwMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgbGlzdFRyaXAocmVxdWVzdFBhcmFtZXRlcnM6IExpc3RUcmlwUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBsaXN0VHJpcC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcbiAgICAgICAgY29uc3QgaWRzID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkcztcbiAgICAgICAgY29uc3QgbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGltaXQ7XG4gICAgICAgIGNvbnN0IHN0YXJ0aW5nQWZ0ZXIgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRpbmdBZnRlcjtcbiAgICAgICAgY29uc3QgZW5kaW5nQmVmb3JlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmVuZGluZ0JlZm9yZTtcbiAgICAgICAgY29uc3Qgd2l0aFRvdGFsID0gcmVxdWVzdFBhcmFtZXRlcnM/LndpdGhUb3RhbDtcbiAgICAgICAgY29uc3QgY3JlYXRlZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5jcmVhdGVkO1xuICAgICAgICBjb25zdCBjcmVhdGVkR3QgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlZEd0O1xuICAgICAgICBjb25zdCBjcmVhdGVkTHQgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlZEx0O1xuICAgICAgICBjb25zdCBjcmVhdGVkR3RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmNyZWF0ZWRHdGU7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRMdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uY3JlYXRlZEx0ZTtcbiAgICAgICAgY29uc3QgYWdlbnQgPSByZXF1ZXN0UGFyYW1ldGVycz8uYWdlbnQ7XG4gICAgICAgIGNvbnN0IGFnZW50Um9sZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5hZ2VudFJvbGU7XG4gICAgICAgIGNvbnN0IGFnZW50Um9sZUluID0gcmVxdWVzdFBhcmFtZXRlcnM/LmFnZW50Um9sZUluO1xuICAgICAgICBjb25zdCBhbW91bnQgPSByZXF1ZXN0UGFyYW1ldGVycz8uYW1vdW50O1xuICAgICAgICBjb25zdCBhbW91bnRHdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uYW1vdW50R3RlO1xuICAgICAgICBjb25zdCBhbW91bnRMdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uYW1vdW50THRlO1xuICAgICAgICBjb25zdCBjeWNsaXN0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmN5Y2xpc3Q7XG4gICAgICAgIGNvbnN0IGN5Y2xpc3RSb2xlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmN5Y2xpc3RSb2xlO1xuICAgICAgICBjb25zdCBjeWNsaXN0Um9sZUluID0gcmVxdWVzdFBhcmFtZXRlcnM/LmN5Y2xpc3RSb2xlSW47XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmRpc3RhbmNlO1xuICAgICAgICBjb25zdCBkaXN0YW5jZUd0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5kaXN0YW5jZUd0ZTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VMdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uZGlzdGFuY2VMdGU7XG4gICAgICAgIGNvbnN0IGVuZFJlZ2lvbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRSZWdpb247XG4gICAgICAgIGNvbnN0IGVuZFJlZ2lvbkluID0gcmVxdWVzdFBhcmFtZXRlcnM/LmVuZFJlZ2lvbkluO1xuICAgICAgICBjb25zdCBlbmRTdGF0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnM/LmVuZFN0YXRpb247XG4gICAgICAgIGNvbnN0IGVuZFN0YXRpb25JbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRTdGF0aW9uSW47XG4gICAgICAgIGNvbnN0IGVuZFRpbWVzdGFtcCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRUaW1lc3RhbXA7XG4gICAgICAgIGNvbnN0IGVuZFRpbWVzdGFtcEd0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRUaW1lc3RhbXBHdGU7XG4gICAgICAgIGNvbnN0IGVuZFRpbWVzdGFtcEx0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRUaW1lc3RhbXBMdGU7XG4gICAgICAgIGNvbnN0IGVuZFRpbWVzdGFtcEd0ID0gcmVxdWVzdFBhcmFtZXRlcnM/LmVuZFRpbWVzdGFtcEd0O1xuICAgICAgICBjb25zdCBlbmRUaW1lc3RhbXBMdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5lbmRUaW1lc3RhbXBMdDtcbiAgICAgICAgY29uc3QgZm9yZmFpdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5mb3JmYWl0O1xuICAgICAgICBjb25zdCBmb3JmYWl0SW4gPSByZXF1ZXN0UGFyYW1ldGVycz8uZm9yZmFpdEluO1xuICAgICAgICBjb25zdCBvcmdhbml6YXRpb24gPSByZXF1ZXN0UGFyYW1ldGVycz8ub3JnYW5pemF0aW9uO1xuICAgICAgICBjb25zdCBwcm9ncmFtMiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtMjtcbiAgICAgICAgY29uc3Qgc3RhcnRSZWdpb24gPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRSZWdpb247XG4gICAgICAgIGNvbnN0IHN0YXJ0UmVnaW9uSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRSZWdpb25JbjtcbiAgICAgICAgY29uc3Qgc3RhcnRTdGF0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXJ0U3RhdGlvbjtcbiAgICAgICAgY29uc3Qgc3RhcnRTdGF0aW9uSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRTdGF0aW9uSW47XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZXN0YW1wID0gcmVxdWVzdFBhcmFtZXRlcnM/LnN0YXJ0VGltZXN0YW1wO1xuICAgICAgICBjb25zdCBzdGFydFRpbWVzdGFtcEd0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGFydFRpbWVzdGFtcEd0ZTtcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lc3RhbXBMdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRUaW1lc3RhbXBMdGU7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZXN0YW1wR3QgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRUaW1lc3RhbXBHdDtcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lc3RhbXBMdCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGFydFRpbWVzdGFtcEx0O1xuICAgICAgICBjb25zdCBzdGF0dXMgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhdHVzO1xuICAgICAgICBjb25zdCBzdGF0dXNJbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGF0dXNJbjtcbiAgICAgICAgY29uc3QgdmVoaWN1bGUgPSByZXF1ZXN0UGFyYW1ldGVycz8udmVoaWN1bGU7XG4gICAgICAgIGNvbnN0IHZlaGljdWxlSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8udmVoaWN1bGVJbjtcbiAgICAgICAgY29uc3QgdXNlciA9IHJlcXVlc3RQYXJhbWV0ZXJzPy51c2VyO1xuICAgICAgICBjb25zdCB1c2VyUm9sZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy51c2VyUm9sZTtcbiAgICAgICAgY29uc3QgdXNlclJvbGVJbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy51c2VyUm9sZUluO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZXhwYW5kJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpZHMpIHtcbiAgICAgICAgICAgIGlkcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2lkcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+bGltaXQsICdsaW1pdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c3RhcnRpbmdBZnRlciwgJ3N0YXJ0aW5nX2FmdGVyJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5lbmRpbmdCZWZvcmUsICdlbmRpbmdfYmVmb3JlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT53aXRoVG90YWwsICd3aXRoX3RvdGFsJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkLCAnY3JlYXRlZCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3JlYXRlZEd0LCAnY3JlYXRlZF9ndCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3JlYXRlZEx0LCAnY3JlYXRlZF9sdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3JlYXRlZEd0ZSwgJ2NyZWF0ZWRfZ3RlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5jcmVhdGVkTHRlLCAnY3JlYXRlZF9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmFnZW50LCAnYWdlbnQnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmFnZW50Um9sZSwgJ2FnZW50X3JvbGUnKTtcbiAgICAgICAgaWYgKGFnZW50Um9sZUluKSB7XG4gICAgICAgICAgICBhZ2VudFJvbGVJbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2FnZW50X3JvbGVfaW4nKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmFtb3VudCwgJ2Ftb3VudCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+YW1vdW50R3RlLCAnYW1vdW50X2d0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+YW1vdW50THRlLCAnYW1vdW50X2x0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Y3ljbGlzdCwgJ2N5Y2xpc3QnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmN5Y2xpc3RSb2xlLCAnY3ljbGlzdF9yb2xlJyk7XG4gICAgICAgIGlmIChjeWNsaXN0Um9sZUluKSB7XG4gICAgICAgICAgICBjeWNsaXN0Um9sZUluLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnY3ljbGlzdF9yb2xlX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5kaXN0YW5jZSwgJ2Rpc3RhbmNlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5kaXN0YW5jZUd0ZSwgJ2Rpc3RhbmNlX2d0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZGlzdGFuY2VMdGUsICdkaXN0YW5jZV9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVuZFJlZ2lvbiwgJ2VuZF9yZWdpb24nKTtcbiAgICAgICAgaWYgKGVuZFJlZ2lvbkluKSB7XG4gICAgICAgICAgICBlbmRSZWdpb25Jbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2VuZF9yZWdpb25faW4nKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVuZFN0YXRpb24sICdlbmRfc3RhdGlvbicpO1xuICAgICAgICBpZiAoZW5kU3RhdGlvbkluKSB7XG4gICAgICAgICAgICBlbmRTdGF0aW9uSW4uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdlbmRfc3RhdGlvbl9pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZW5kVGltZXN0YW1wLCAnZW5kX3RpbWVzdGFtcCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+ZW5kVGltZXN0YW1wR3RlLCAnZW5kX3RpbWVzdGFtcF9ndGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVuZFRpbWVzdGFtcEx0ZSwgJ2VuZF90aW1lc3RhbXBfbHRlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5lbmRUaW1lc3RhbXBHdCwgJ2VuZF90aW1lc3RhbXBfZ3QnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVuZFRpbWVzdGFtcEx0LCAnZW5kX3RpbWVzdGFtcF9sdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+Zm9yZmFpdCwgJ2ZvcmZhaXQnKTtcbiAgICAgICAgaWYgKGZvcmZhaXRJbikge1xuICAgICAgICAgICAgZm9yZmFpdEluLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZm9yZmFpdF9pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+b3JnYW5pemF0aW9uLCAnb3JnYW5pemF0aW9uJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5wcm9ncmFtMiwgJ3Byb2dyYW0nKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXJ0UmVnaW9uLCAnc3RhcnRfcmVnaW9uJyk7XG4gICAgICAgIGlmIChzdGFydFJlZ2lvbkluKSB7XG4gICAgICAgICAgICBzdGFydFJlZ2lvbkluLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3RhcnRfcmVnaW9uX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGFydFN0YXRpb24sICdzdGFydF9zdGF0aW9uJyk7XG4gICAgICAgIGlmIChzdGFydFN0YXRpb25Jbikge1xuICAgICAgICAgICAgc3RhcnRTdGF0aW9uSW4uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzdGFydF9zdGF0aW9uX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGFydFRpbWVzdGFtcCwgJ3N0YXJ0X3RpbWVzdGFtcCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c3RhcnRUaW1lc3RhbXBHdGUsICdzdGFydF90aW1lc3RhbXBfZ3RlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zdGFydFRpbWVzdGFtcEx0ZSwgJ3N0YXJ0X3RpbWVzdGFtcF9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXJ0VGltZXN0YW1wR3QsICdzdGFydF90aW1lc3RhbXBfZ3QnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXJ0VGltZXN0YW1wTHQsICdzdGFydF90aW1lc3RhbXBfbHQnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXR1cywgJ3N0YXR1cycpO1xuICAgICAgICBpZiAoc3RhdHVzSW4pIHtcbiAgICAgICAgICAgIHN0YXR1c0luLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3RhdHVzX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT52ZWhpY3VsZSwgJ3ZlaGljdWxlJyk7XG4gICAgICAgIGlmICh2ZWhpY3VsZUluKSB7XG4gICAgICAgICAgICB2ZWhpY3VsZUluLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAndmVoaWN1bGVfaW4nKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnVzZXIsICd1c2VyJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT51c2VyUm9sZSwgJ3VzZXJfcm9sZScpO1xuICAgICAgICBpZiAodXNlclJvbGVJbikge1xuICAgICAgICAgICAgdXNlclJvbGVJbi5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3VzZXJfcm9sZV9pbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQWNjZXB0JywgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgPSBvcHRpb25zPy5jb250ZXh0ID8/IG5ldyBIdHRwQ29udGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFyVHJhbnNmZXJDYWNoZTogYm9vbGVhbiA9IG9wdGlvbnM/LnRyYW5zZmVyQ2FjaGUgPz8gdHJ1ZTtcblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC90cmlwc2A7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8TGlzdFRyaXAyMDBSZXNwb25zZT4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSBhIFRyaXAgKGFycmV0IG1pbnV0ZSlcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcGF1c2VUcmlwKHJlcXVlc3RQYXJhbWV0ZXJzOiBQYXVzZVRyaXBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIHBhdXNlVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogUGF1c2VUcmlwUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBwYXVzZVRyaXAocmVxdWVzdFBhcmFtZXRlcnM6IFBhdXNlVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIHBhdXNlVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogUGF1c2VUcmlwUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBhdXNlVHJpcC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5ib2R5O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9wb255L3RyaXBzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcImlkXCIsIHZhbHVlOiBpZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX0vcGF1c2VgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ3Bvc3QnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGF1c2UgYSB0cmlwXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBhdXNlVHJpcF8xKHJlcXVlc3RQYXJhbWV0ZXJzOiBQYXVzZVRyaXAwUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBwYXVzZVRyaXBfMShyZXF1ZXN0UGFyYW1ldGVyczogUGF1c2VUcmlwMFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgcGF1c2VUcmlwXzEocmVxdWVzdFBhcmFtZXRlcnM6IFBhdXNlVHJpcDBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBwYXVzZVRyaXBfMShyZXF1ZXN0UGFyYW1ldGVyczogUGF1c2VUcmlwMFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IGlkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkO1xuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwYXVzZVRyaXBfMS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBhdXNlVHJpcF8xLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvdHJpcHMvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfS9wYXVzZWA7XG4gICAgICAgIGNvbnN0IHsgYmFzZVBhdGgsIHdpdGhDcmVkZW50aWFscyB9ID0gdGhpcy5jb25maWd1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8YW55PigncG9zdCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJlY29tbWVuZFZlaGljdWxlKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZWNvbW1lbmRWZWhpY3VsZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgcmVjb21tZW5kVmVoaWN1bGUocmVxdWVzdFBhcmFtZXRlcnM6IFJlY29tbWVuZFZlaGljdWxlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyByZWNvbW1lbmRWZWhpY3VsZShyZXF1ZXN0UGFyYW1ldGVyczogUmVjb21tZW5kVmVoaWN1bGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyByZWNvbW1lbmRWZWhpY3VsZShyZXF1ZXN0UGFyYW1ldGVyczogUmVjb21tZW5kVmVoaWN1bGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlY29tbWVuZFZlaGljdWxlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlkID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkO1xuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWNvbW1lbmRWZWhpY3VsZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5ib2R5O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL3RyaXBzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcImlkXCIsIHZhbHVlOiBpZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX0vcmVjb21tZW5kZWRgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ3Bvc3QnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgICAgICAgICAuLi4od2l0aENyZWRlbnRpYWxzID8geyB3aXRoQ3JlZGVudGlhbHMgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzdW1lIGEgVHJpcCAoZW5kIGFycmV0IG1pbnV0ZSlcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVzdW1lVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogUmVzdW1lVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgcmVzdW1lVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogUmVzdW1lVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgcmVzdW1lVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogUmVzdW1lVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIHJlc3VtZVRyaXAocmVxdWVzdFBhcmFtZXRlcnM6IFJlc3VtZVRyaXBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZDtcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVzdW1lVHJpcC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5ib2R5O1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucz8uaHR0cEhlYWRlckFjY2VwdCA/PyB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KFtcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGVfOiAndGV4dCcgfCAnanNvbicgfCAnYmxvYicgPSAnanNvbic7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC9wb255L3RyaXBzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcImlkXCIsIHZhbHVlOiBpZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX0vcmVzdW1lYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxhbnk+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc3VtZSBhIHRyaXBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVzdW1lVHJpcF8yKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXN1bWVUcmlwMFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogdW5kZWZpbmVkLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgcmVzdW1lVHJpcF8yKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXN1bWVUcmlwMFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgcmVzdW1lVHJpcF8yKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXN1bWVUcmlwMFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiB1bmRlZmluZWQsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIHJlc3VtZVRyaXBfMihyZXF1ZXN0UGFyYW1ldGVyczogUmVzdW1lVHJpcDBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86IHVuZGVmaW5lZCwgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZDtcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVzdW1lVHJpcF8yLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSByZXF1ZXN0UGFyYW1ldGVycz8ucHJvZ3JhbTtcbiAgICAgICAgaWYgKHByb2dyYW0gPT09IG51bGwgfHwgcHJvZ3JhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm9ncmFtIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVzdW1lVHJpcF8yLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhckhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyYW0gIT09IHVuZGVmaW5lZCAmJiBwcm9ncmFtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdwcm9ncmFtJywgU3RyaW5nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zPy5odHRwSGVhZGVyQWNjZXB0ID8/IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoW1xuICAgICAgICBdKTtcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ0FjY2VwdCcsIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvY2FsVmFySHR0cENvbnRleHQ6IEh0dHBDb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/PyBuZXcgSHR0cENvbnRleHQoKTtcblxuICAgICAgICBjb25zdCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gPSBvcHRpb25zPy50cmFuc2ZlckNhY2hlID8/IHRydWU7XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nO1xuICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvdHJpcHMvJHt0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlUGFyYW0oe25hbWU6IFwiaWRcIiwgdmFsdWU6IGlkLCBpbjogXCJwYXRoXCIsIHN0eWxlOiBcInNpbXBsZVwiLCBleHBsb2RlOiBmYWxzZSwgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGRhdGFGb3JtYXQ6IHVuZGVmaW5lZH0pfS9yZXN1bWVgO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ3Bvc3QnLCBgJHtiYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGxvY2FsVmFySHR0cENvbnRleHQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGEgdHJpcFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZXRyaWV2ZVRyaXAocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdFRyaXAyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPjtcbiAgICBwdWJsaWMgcmV0cmlldmVUcmlwKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVRyaXBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdFRyaXAyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHJldHJpZXZlVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVUcmlwUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVUcmlwKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVRyaXBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldHJpZXZlVHJpcC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZDtcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVUcmlwLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBleHBhbmQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZXhwYW5kO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZXhwYW5kJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL3RyaXBzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcImlkXCIsIHZhbHVlOiBpZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX1gO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3RUcmlwMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbmxvY2sgdmVoaWN1bGUgZnJvbSBHU01cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5sb2NrVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogVW5sb2NrVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdFRyaXAyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPjtcbiAgICBwdWJsaWMgdW5sb2NrVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogVW5sb2NrVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgdW5sb2NrVHJpcChyZXF1ZXN0UGFyYW1ldGVyczogVW5sb2NrVHJpcFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8TGlzdFRyaXAyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHVubG9ja1RyaXAocmVxdWVzdFBhcmFtZXRlcnM6IFVubG9ja1RyaXBSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVubG9ja1RyaXAuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSByZXF1ZXN0UGFyYW1ldGVycz8uaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVubG9ja1RyaXAuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGU7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL3RyaXBzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcImlkXCIsIHZhbHVlOiBpZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX0vdW5sb2NrYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0VHJpcDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+KCdwb3N0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICIvKipcbiAqIGFwaS1jeWNsaXN0XG4gKlxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYywgSHR0cENvbnRleHQgXG4gICAgICAgIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0Wm9uZTIwMFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvbGlzdFpvbmUyMDBSZXNwb25zZSc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0Wm9uZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0Wm9uZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgTGlzdFpvbmVTdGF0dXNQYXJhbWV0ZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0Wm9uZVN0YXR1c1BhcmFtZXRlcic7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBMaXN0Wm9uZVR5cGVQYXJhbWV0ZXIgfSBmcm9tICcuLi9tb2RlbC9saXN0Wm9uZVR5cGVQYXJhbWV0ZXInO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLmJhc2Uuc2VydmljZSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBMaXN0Wm9uZVJlcXVlc3RQYXJhbXMge1xuICAgIHByb2dyYW06IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogVXNlZCB0byBtYWtlIGEgZ2V0IGJhdGNoIHdpdGggdGhlIHNwZWNpZmllZCBpZHMuIFdpbGwgb3ZlcnJpZGUgYWxsIG90aGVyIGZpbHRlcnMgaWYgc2V0LiAqL1xuICAgIGlkcz86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEEgbGltaXQgb24gdGhlIG51bWJlciBvZiBvYmplY3RzIHRvIGJlIHJldHVybmVkLiAqL1xuICAgIGxpbWl0PzogbnVtYmVyO1xuICAgIC8qKiBBIGN1cnNvciBmb3IgdXNlIGluIHBhZ2luYXRpb24uICYjeDYwO3N0YXJ0aW5nX2FmdGVyJiN4NjA7IGlzIGFuIG9iamVjdCBJRCB0aGF0IGRlZmluZXMgeW91ciBwbGFjZSBpbiB0aGUgbGlzdC4gRm9yIGluc3RhbmNlLCBpZiB5b3UgbWFrZSBhIGxpc3QgcmVxdWVzdCBhbmQgcmVjZWl2ZSAxMDAgb2JqZWN0cywgZW5kaW5nIHdpdGggJiN4NjA7b2JqX2ZvbyYjeDYwOywgeW91ciBzdWJzZXF1ZW50IGNhbGwgY2FuIGluY2x1ZGUgJiN4NjA7c3RhcnRpbmdfYWZ0ZXImI3gzRDtvYmpfZm9vJiN4NjA7IGluIG9yZGVyIHRvIGZldGNoIHRoZSBuZXh0IHBhZ2Ugb2YgdGhlIGxpc3QuICovXG4gICAgc3RhcnRpbmdBZnRlcj86IHN0cmluZztcbiAgICAvKiogQSBjdXJzb3IgZm9yIHVzZSBpbiBwYWdpbmF0aW9uLiAmI3g2MDtlbmRpbmdfYmVmb3JlJiN4NjA7IGlzIGFuIG9iamVjdCBJRCB0aGF0IGRlZmluZXMgeW91ciBwbGFjZSBpbiB0aGUgbGlzdC4gRm9yIGluc3RhbmNlLCBpZiB5b3UgbWFrZSBhIGxpc3QgcmVxdWVzdCBhbmQgcmVjZWl2ZSAxMDAgb2JqZWN0cywgc3RhcnRpbmcgd2l0aCAmI3g2MDtvYmpfYmFyJiN4NjA7LCB5b3VyIHN1YnNlcXVlbnQgY2FsbCBjYW4gaW5jbHVkZSAmI3g2MDtlbmRpbmdfYmVmb3JlJiN4M0Q7b2JqX2JhciYjeDYwOyBpbiBvcmRlciB0byBmZXRjaCB0aGUgcHJldmlvdXMgcGFnZSBvZiB0aGUgbGlzdC4gKi9cbiAgICBlbmRpbmdCZWZvcmU/OiBzdHJpbmc7XG4gICAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBkbyBhICYjeDYwO2NvdW50KCkmI3g2MDsgaW4gdGhlIFRpdHluYW1vREIgJiN4NjA7ZmlsdGVyKCkmI3g2MDsgZnVuY3Rpb24gYW5kIHJldHVybiBhICYjeDYwO3RvdGFsJiN4NjA7IGF0dHJpYnV0ZXMuIFRoZSBEeW5hbW9EQiAmI3g2MDtjb3VudCgpJiN4NjA7IGZ1bmN0aW9uIGlzblxcJiMzOTt0IGVmZmljaWVudC4gUmVxdWVzdHMgbWF5IHRha2UgbW9yZSB0aW1lIHdpdGggdGhpcyBwYXJhbWV0ZXIgc2V0IHRvICYjeDYwO1RydWUmI3g2MDsuICovXG4gICAgd2l0aFRvdGFsPzogYm9vbGVhbjtcbiAgICAvKiogSXMgdXNlZCB3aXRoIHRoZSAmI3g2MDtvcHRpb24mI3g2MDsgcGFyYW1ldGVyLiBCb3RoICYjeDYwO2xhdGl0dWRlJiN4NjA7IGFuZCAmI3g2MDtsb25naXR1ZGUmI3g2MDsgcGFyYW1ldGVycyBhcmUgcmVxdWlyZWQgaWYgJiN4NjA7b3B0aW9uJiN4NjA7IGlzIHNwZWNpZmllZC4gKi9cbiAgICBsYXRpdHVkZT86IHN0cmluZztcbiAgICAvKiogSXMgdXNlZCB3aXRoIHRoZSAmI3g2MDtvcHRpb24mI3g2MDsgcGFyYW1ldGVyLiBCb3RoICYjeDYwO2xhdGl0dWRlJiN4NjA7IGFuZCAmI3g2MDtsb25naXR1ZGUmI3g2MDsgcGFyYW1ldGVycyBhcmUgcmVxdWlyZWQgaWYgJiN4NjA7b3B0aW9uJiN4NjA7IGlzIHNwZWNpZmllZC4gKi9cbiAgICBsb25naXR1ZGU/OiBzdHJpbmc7XG4gICAgLyoqIE9wdGlvbiBmb3IgZmlsdGVyaW5nIG9uIGNvb3JkaW5hdGUuIElnbm9yZWQgd2hlbiAmI3g2MDtsYXRpdHVkZSYjeDYwOyBvciAmI3g2MDtsb25naXR1ZGUmI3g2MDsgYXJlIG5vdCBzcGVjaWZpZWQuICovXG4gICAgb3B0aW9uPzogc3RyaW5nO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFpvbmUgd2l0aCB0aGUgc3BlY2lmaWVkICYjeDYwO3Byb2dyYW0mI3g2MDsuICovXG4gICAgcHJvZ3JhbTI/OiBzdHJpbmc7XG4gICAgLyoqIEZpbHRlciBhbGwgWm9uZXMgd2l0aCBhICYjeDYwO3Njb3JlJiN4NjA7IGVxdWFsIHRvIHRoZSBnaXZlbiBpbnRlZ2VyLiAqL1xuICAgIHNjb3JlPzogbnVtYmVyO1xuICAgIC8qKiBGaWx0ZXIgYWxsIFpvbmVzIHdpdGggYSAmI3g2MDtzY29yZSYjeDYwOyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgc2NvcmVHdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgWm9uZXMgd2l0aCBhICYjeDYwO3Njb3JlJiN4NjA7IGxvd2VyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIGludGVnZXIuICovXG4gICAgc2NvcmVMdGU/OiBudW1iZXI7XG4gICAgLyoqIEZpbHRlciBhbGwgWm9uZSB3aXRoIHRoZSBzcGVjaWZpZWQgJiN4NjA7c3RhdHVzJiN4NjA7LiAqL1xuICAgIHN0YXR1cz86IExpc3Rab25lU3RhdHVzUGFyYW1ldGVyO1xuICAgIC8qKiBDYW4gYmUgdXNlZCB0byByZXRyaWV2ZSBab25lIHdob3NlICYjeDYwO3N0YXR1cyYjeDYwOyBiZWxvbmcgdG8gdGhlIHNwZWNpZmllZCBsaXN0LiAqL1xuICAgIHN0YXR1c0luPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogRmlsdGVyIGFsbCBab25lIHdpdGggdGhlIHNwZWNpZmllZCAmI3g2MDt0eXBlJiN4NjA7LiAqL1xuICAgIHR5cGU/OiBMaXN0Wm9uZVR5cGVQYXJhbWV0ZXI7XG4gICAgLyoqIENhbiBiZSB1c2VkIHRvIHJldHJpZXZlIFpvbmUgd2hvc2UgJiN4NjA7dHlwZSYjeDYwOyBiZWxvbmcgdG8gdGhlIHNwZWNpZmllZCBsaXN0LiAqL1xuICAgIHR5cGVJbj86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEZpbHRlciBhbGwgWm9uZSB3aXRoIHRoYXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCAmI3g2MDt2ZWhpY3VsZV90eXBlJiN4NjA7LiAqL1xuICAgIHZlaGljdWxlVHlwZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXRyaWV2ZVpvbmVSZXF1ZXN0UGFyYW1zIHtcbiAgICBwcm9ncmFtOiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZztcbiAgICAvKiogSWYgJiN4NjA7VHJ1ZSYjeDYwOyB3aWxsIG1ha2UgdGhlIGNhbGwgaW4gUHJvZC4gRWxzZSB3aWxsIGRvIGl0IGluIFByZXByb2QuICovXG4gICAgbGl2ZU1vZGU/OiBib29sZWFuO1xuICAgIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gICAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPjtcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBab25lc1NlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChCQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmd8c3RyaW5nW10sIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGJhc2VQYXRoLCBjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IGFsbCB6b25lc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBsaXN0Wm9uZShyZXF1ZXN0UGFyYW1ldGVyczogTGlzdFpvbmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPExpc3Rab25lMjAwUmVzcG9uc2U+O1xuICAgIHB1YmxpYyBsaXN0Wm9uZShyZXF1ZXN0UGFyYW1ldGVyczogTGlzdFpvbmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdFpvbmUyMDBSZXNwb25zZT4+O1xuICAgIHB1YmxpYyBsaXN0Wm9uZShyZXF1ZXN0UGFyYW1ldGVyczogTGlzdFpvbmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PExpc3Rab25lMjAwUmVzcG9uc2U+PjtcbiAgICBwdWJsaWMgbGlzdFpvbmUocmVxdWVzdFBhcmFtZXRlcnM6IExpc3Rab25lUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5wcm9ncmFtO1xuICAgICAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCB8fCBwcm9ncmFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2dyYW0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBsaXN0Wm9uZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZTtcbiAgICAgICAgY29uc3QgZXhwYW5kID0gcmVxdWVzdFBhcmFtZXRlcnM/LmV4cGFuZDtcbiAgICAgICAgY29uc3QgaWRzID0gcmVxdWVzdFBhcmFtZXRlcnM/LmlkcztcbiAgICAgICAgY29uc3QgbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGltaXQ7XG4gICAgICAgIGNvbnN0IHN0YXJ0aW5nQWZ0ZXIgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhcnRpbmdBZnRlcjtcbiAgICAgICAgY29uc3QgZW5kaW5nQmVmb3JlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmVuZGluZ0JlZm9yZTtcbiAgICAgICAgY29uc3Qgd2l0aFRvdGFsID0gcmVxdWVzdFBhcmFtZXRlcnM/LndpdGhUb3RhbDtcbiAgICAgICAgY29uc3QgbGF0aXR1ZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGF0aXR1ZGU7XG4gICAgICAgIGNvbnN0IGxvbmdpdHVkZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5sb25naXR1ZGU7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5vcHRpb247XG4gICAgICAgIGNvbnN0IHByb2dyYW0yID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW0yO1xuICAgICAgICBjb25zdCBzY29yZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zY29yZTtcbiAgICAgICAgY29uc3Qgc2NvcmVHdGUgPSByZXF1ZXN0UGFyYW1ldGVycz8uc2NvcmVHdGU7XG4gICAgICAgIGNvbnN0IHNjb3JlTHRlID0gcmVxdWVzdFBhcmFtZXRlcnM/LnNjb3JlTHRlO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSByZXF1ZXN0UGFyYW1ldGVycz8uc3RhdHVzO1xuICAgICAgICBjb25zdCBzdGF0dXNJbiA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5zdGF0dXNJbjtcbiAgICAgICAgY29uc3QgdHlwZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy50eXBlO1xuICAgICAgICBjb25zdCB0eXBlSW4gPSByZXF1ZXN0UGFyYW1ldGVycz8udHlwZUluO1xuICAgICAgICBjb25zdCB2ZWhpY3VsZVR5cGUgPSByZXF1ZXN0UGFyYW1ldGVycz8udmVoaWN1bGVUeXBlO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZXhwYW5kJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpZHMpIHtcbiAgICAgICAgICAgIGlkcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2lkcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+bGltaXQsICdsaW1pdCcpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c3RhcnRpbmdBZnRlciwgJ3N0YXJ0aW5nX2FmdGVyJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5lbmRpbmdCZWZvcmUsICdlbmRpbmdfYmVmb3JlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT53aXRoVG90YWwsICd3aXRoX3RvdGFsJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5sYXRpdHVkZSwgJ2xhdGl0dWRlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5sb25naXR1ZGUsICdsb25naXR1ZGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55Pm9wdGlvbiwgJ29wdGlvbicpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+cHJvZ3JhbTIsICdwcm9ncmFtJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zY29yZSwgJ3Njb3JlJyk7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5zY29yZUd0ZSwgJ3Njb3JlX2d0ZScpO1xuICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgIDxhbnk+c2NvcmVMdGUsICdzY29yZV9sdGUnKTtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PnN0YXR1cywgJ3N0YXR1cycpO1xuICAgICAgICBpZiAoc3RhdHVzSW4pIHtcbiAgICAgICAgICAgIHN0YXR1c0luLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3RhdHVzX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT50eXBlLCAndHlwZScpO1xuICAgICAgICBpZiAodHlwZUluKSB7XG4gICAgICAgICAgICB0eXBlSW4uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd0eXBlX2luJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMobG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT52ZWhpY3VsZVR5cGUsICd2ZWhpY3VsZV90eXBlJyk7XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL3pvbmVzYDtcbiAgICAgICAgY29uc3QgeyBiYXNlUGF0aCwgd2l0aENyZWRlbnRpYWxzIH0gPSB0aGlzLmNvbmZpZ3VyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxMaXN0Wm9uZTIwMFJlc3BvbnNlPignZ2V0JywgYCR7YmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICAgICAgICAgIHBhcmFtczogbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgICAgICAgICAgLi4uKHdpdGhDcmVkZW50aWFscyA/IHsgd2l0aENyZWRlbnRpYWxzIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJDYWNoZTogbG9jYWxWYXJUcmFuc2ZlckNhY2hlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGEgem9uZVxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZXRyaWV2ZVpvbmUocmVxdWVzdFBhcmFtZXRlcnM6IFJldHJpZXZlWm9uZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nLCBjb250ZXh0PzogSHR0cENvbnRleHQsIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFufSk6IE9ic2VydmFibGU8TGlzdFpvbmUyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPjtcbiAgICBwdWJsaWMgcmV0cmlldmVab25lKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVpvbmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicsIGNvbnRleHQ/OiBIdHRwQ29udGV4dCwgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW59KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8TGlzdFpvbmUyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyPj47XG4gICAgcHVibGljIHJldHJpZXZlWm9uZShyZXF1ZXN0UGFyYW1ldGVyczogUmV0cmlldmVab25lUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxMaXN0Wm9uZTIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXI+PjtcbiAgICBwdWJsaWMgcmV0cmlldmVab25lKHJlcXVlc3RQYXJhbWV0ZXJzOiBSZXRyaWV2ZVpvbmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJywgY29udGV4dD86IEh0dHBDb250ZXh0LCB0cmFuc2ZlckNhY2hlPzogYm9vbGVhbn0pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gcmVxdWVzdFBhcmFtZXRlcnM/LnByb2dyYW07XG4gICAgICAgIGlmIChwcm9ncmFtID09PSBudWxsIHx8IHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZ3JhbSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldHJpZXZlWm9uZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5pZDtcbiAgICAgICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV0cmlldmVab25lLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpdmVNb2RlID0gcmVxdWVzdFBhcmFtZXRlcnM/LmxpdmVNb2RlO1xuICAgICAgICBjb25zdCBleHBhbmQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZXhwYW5kO1xuXG4gICAgICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZXhwYW5kJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvZ3JhbSAhPT0gdW5kZWZpbmVkICYmIHByb2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoJ3Byb2dyYW0nLCBTdHJpbmcocHJvZ3JhbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnM/Lmh0dHBIZWFkZXJBY2NlcHQgPz8gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXSk7XG4gICAgICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdBY2NlcHQnLCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPz8gbmV3IEh0dHBDb250ZXh0KCk7XG5cbiAgICAgICAgY29uc3QgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuID0gb3B0aW9ucz8udHJhbnNmZXJDYWNoZSA/PyB0cnVlO1xuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJztcbiAgICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdqc29uJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlXyA9ICdibG9iJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbFZhclBhdGggPSBgL3pvbmVzLyR7dGhpcy5jb25maWd1cmF0aW9uLmVuY29kZVBhcmFtKHtuYW1lOiBcImlkXCIsIHZhbHVlOiBpZCwgaW46IFwicGF0aFwiLCBzdHlsZTogXCJzaW1wbGVcIiwgZXhwbG9kZTogZmFsc2UsIGRhdGFUeXBlOiBcInN0cmluZ1wiLCBkYXRhRm9ybWF0OiB1bmRlZmluZWR9KX1gO1xuICAgICAgICBjb25zdCB7IGJhc2VQYXRoLCB3aXRoQ3JlZGVudGlhbHMgfSA9IHRoaXMuY29uZmlndXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PExpc3Rab25lMjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcj4oJ2dldCcsIGAke2Jhc2VQYXRofSR7bG9jYWxWYXJQYXRofWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGVfLFxuICAgICAgICAgICAgICAgIC4uLih3aXRoQ3JlZGVudGlhbHMgPyB7IHdpdGhDcmVkZW50aWFscyB9IDoge30pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGxvY2FsVmFySGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cbiIsICJpbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycywgU2tpcFNlbGYsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gZnJvbSAnLi9jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogICAgICBbXSxcbiAgZGVjbGFyYXRpb25zOiBbXSxcbiAgZXhwb3J0czogICAgICBbXSxcbiAgcHJvdmlkZXJzOiBbXVxufSlcbmV4cG9ydCBjbGFzcyBBcGlNb2R1bGUge1xuICAgIHB1YmxpYyBzdGF0aWMgZm9yUm9vdChjb25maWd1cmF0aW9uRmFjdG9yeTogKCkgPT4gQ29uZmlndXJhdGlvbik6IE1vZHVsZVdpdGhQcm92aWRlcnM8QXBpTW9kdWxlPiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogQXBpTW9kdWxlLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbIHsgcHJvdmlkZTogQ29uZmlndXJhdGlvbiwgdXNlRmFjdG9yeTogY29uZmlndXJhdGlvbkZhY3RvcnkgfSBdXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoIEBPcHRpb25hbCgpIEBTa2lwU2VsZigpIHBhcmVudE1vZHVsZTogQXBpTW9kdWxlLFxuICAgICAgICAgICAgICAgICBAT3B0aW9uYWwoKSBodHRwOiBIdHRwQ2xpZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnRNb2R1bGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXBpTW9kdWxlIGlzIGFscmVhZHkgbG9hZGVkLiBJbXBvcnQgaW4geW91ciBiYXNlIEFwcE1vZHVsZSBvbmx5LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaHR0cCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBpbXBvcnQgdGhlIEh0dHBDbGllbnRNb2R1bGUgaW4geW91ciBBcHBNb2R1bGUhIFxcbicgK1xuICAgICAgICAgICAgJ1NlZSBhbHNvIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzIwNTc1Jyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyBTdG9yYWdlU2VydmljZSB9IGZyb20gJy4vc3RvcmFnZS5zZXJ2aWNlJ1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcydcbmltcG9ydCB7XG4gIExpc3RGb3JmYWl0MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcixcbiAgQ3JlYXRlQWJvbm5lbWVudFJlcXVlc3RTdXBwb3J0aW5nRG9jdW1lbnRzSW5uZXIsXG59IGZyb20gJ3NyYy9hcGktY3ljbGlzdCdcblxuaW50ZXJmYWNlIFN1YnNjcmlwdGlvblByb2Nlc3Mge1xuICBmb3JmYWl0OiBMaXN0Rm9yZmFpdDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXIgfCBudWxsXG4gIHN0YXJ0ZWRBdDogbnVtYmVyXG4gIHJlZHVjdGlvbj86IHN0cmluZyB8IG51bGxcbiAgc3VwcG9ydGluZ0RvY3VtZW50cz86IENyZWF0ZUFib25uZW1lbnRSZXF1ZXN0U3VwcG9ydGluZ0RvY3VtZW50c0lubmVyW11cbiAgY3VycmVudFN0ZXA6ICdmb3JmYWl0JyB8ICdwYXltZW50JyB8ICdkb2N1bWVudHMnIHwgJ3Bob25lJyB8ICdjb21wbGV0ZWQnXG59XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxufSlcbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25Qcm9jZXNzU2VydmljZSB7XG4gIC8vIENvbnN0YW50ZXMgZGUgY29uZmlndXJhdGlvblxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTVE9SQUdFX0tFWSA9ICdzdWJzY3JpcHRpb25fcHJvY2VzcydcblxuICAvLyDDiXRhdCBkdSBwcm9jZXNzdXMgZCdhYm9ubmVtZW50IGFjdHVlbFxuICBwcml2YXRlIGN1cnJlbnRQcm9jZXNzID0gbmV3IEJlaGF2aW9yU3ViamVjdDxTdWJzY3JpcHRpb25Qcm9jZXNzIHwgbnVsbD4obnVsbClcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHN0b3JhZ2U6IFN0b3JhZ2VTZXJ2aWNlKSB7XG4gICAgdGhpcy5pbml0RnJvbVN0b3JhZ2UoKVxuICB9XG5cbiAgLy8gTcOpdGhvZGVzIGQnaW5pdGlhbGlzYXRpb24gZXQgZGUgZ2VzdGlvbiBkdSBzdG9ja2FnZVxuICBwcml2YXRlIGFzeW5jIGluaXRGcm9tU3RvcmFnZSgpIHtcbiAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0KFxuICAgICAgU3Vic2NyaXB0aW9uUHJvY2Vzc1NlcnZpY2UuU1RPUkFHRV9LRVlcbiAgICApXG4gICAgaWYgKHN0b3JlZCkge1xuICAgICAgdGhpcy5jdXJyZW50UHJvY2Vzcy5uZXh0KHN0b3JlZClcbiAgICB9XG4gIH1cblxuICAvLyBNw6l0aG9kZXMgZGUgZ2VzdGlvbiBkdSBwcm9jZXNzdXMgZCdhYm9ubmVtZW50XG4gIGFzeW5jIHN0YXJ0UHJvY2VzcyhcbiAgICBmb3JmYWl0OiBMaXN0Rm9yZmFpdDIwMFJlc3BvbnNlQWxsT2ZEYXRhSW5uZXIgfCBudWxsLFxuICAgIHJlZHVjdGlvbj86IHN0cmluZ1xuICApIHtcbiAgICBjb25zdCBwcm9jZXNzOiBTdWJzY3JpcHRpb25Qcm9jZXNzID0ge1xuICAgICAgZm9yZmFpdCxcbiAgICAgIHN0YXJ0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgIHJlZHVjdGlvbjogcmVkdWN0aW9uICYmIHJlZHVjdGlvbi5sZW5ndGggPiAwID8gcmVkdWN0aW9uIDogbnVsbCxcbiAgICAgIGN1cnJlbnRTdGVwOiAnZm9yZmFpdCcsXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc3RvcmFnZS5zZXQoU3Vic2NyaXB0aW9uUHJvY2Vzc1NlcnZpY2UuU1RPUkFHRV9LRVksIHByb2Nlc3MpXG4gICAgdGhpcy5jdXJyZW50UHJvY2Vzcy5uZXh0KHByb2Nlc3MpXG4gIH1cblxuICAvLyBNw6l0aG9kZXMgZGUgbWlzZSDDoCBqb3VyXG4gIGFzeW5jIHVwZGF0ZVN0ZXAoc3RlcDogU3Vic2NyaXB0aW9uUHJvY2Vzc1snY3VycmVudFN0ZXAnXSkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnRQcm9jZXNzLnZhbHVlXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmN1cnJlbnQsIGN1cnJlbnRTdGVwOiBzdGVwIH1cbiAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZS5zZXQoU3Vic2NyaXB0aW9uUHJvY2Vzc1NlcnZpY2UuU1RPUkFHRV9LRVksIHVwZGF0ZWQpXG4gICAgICB0aGlzLmN1cnJlbnRQcm9jZXNzLm5leHQodXBkYXRlZClcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTdXBwb3J0aW5nRG9jdW1lbnRzKFxuICAgIGRvY3VtZW50czogQ3JlYXRlQWJvbm5lbWVudFJlcXVlc3RTdXBwb3J0aW5nRG9jdW1lbnRzSW5uZXJbXVxuICApIHtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50UHJvY2Vzcy52YWx1ZVxuICAgIGlmIChjdXJyZW50KSB7XG4gICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5jdXJyZW50LCBzdXBwb3J0aW5nRG9jdW1lbnRzOiBkb2N1bWVudHMgfVxuICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlLnNldChTdWJzY3JpcHRpb25Qcm9jZXNzU2VydmljZS5TVE9SQUdFX0tFWSwgdXBkYXRlZClcbiAgICAgIHRoaXMuY3VycmVudFByb2Nlc3MubmV4dCh1cGRhdGVkKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVJlZHVjdGlvbihyZWR1Y3Rpb246IHN0cmluZykge1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnRQcm9jZXNzLnZhbHVlXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIC8vIFNpIHVuIHByb2Nlc3N1cyBleGlzdGUgZMOpasOgLCBvbiBtZXQgw6Agam91ciBsYSByw6lkdWN0aW9uXG4gICAgICBpZiAocmVkdWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uY3VycmVudCwgcmVkdWN0aW9uIH1cbiAgICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlLnNldChTdWJzY3JpcHRpb25Qcm9jZXNzU2VydmljZS5TVE9SQUdFX0tFWSwgdXBkYXRlZClcbiAgICAgICAgdGhpcy5jdXJyZW50UHJvY2Vzcy5uZXh0KHVwZGF0ZWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5jdXJyZW50LCByZWR1Y3Rpb246IG51bGwgfVxuICAgICAgICBhd2FpdCB0aGlzLnN0b3JhZ2Uuc2V0KFN1YnNjcmlwdGlvblByb2Nlc3NTZXJ2aWNlLlNUT1JBR0VfS0VZLCB1cGRhdGVkKVxuICAgICAgICB0aGlzLmN1cnJlbnRQcm9jZXNzLm5leHQodXBkYXRlZClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydFByb2Nlc3MobnVsbCwgcmVkdWN0aW9uKVxuICAgIH1cbiAgfVxuXG4gIC8vIE3DqXRob2RlcyB1dGlsaXRhaXJlc1xuICBhc3luYyBjbGVhclByb2Nlc3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zdG9yYWdlLnJlbW92ZShTdWJzY3JpcHRpb25Qcm9jZXNzU2VydmljZS5TVE9SQUdFX0tFWSlcbiAgICB0aGlzLmN1cnJlbnRQcm9jZXNzLm5leHQobnVsbClcbiAgfVxuXG4gIGdldEN1cnJlbnRQcm9jZXNzKCk6IE9ic2VydmFibGU8U3Vic2NyaXB0aW9uUHJvY2VzcyB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50UHJvY2Vzcy5hc09ic2VydmFibGUoKVxuICB9XG5cbiAgLy8gTcOpdGhvZGVzIGRlIHZhbGlkYXRpb24gZXQgZGUgcHLDqXBhcmF0aW9uIGRlcyBkb25uw6llc1xuICBhc3luYyBoYXNGb3JmYWl0U2VsZWN0ZWQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcHJvY2VzcyA9IHRoaXMuY3VycmVudFByb2Nlc3MudmFsdWVcbiAgICByZXR1cm4gISFwcm9jZXNzPy5mb3JmYWl0Py5pZFxuICB9XG5cbiAgYXN5bmMgZ2V0Q3JlYXRlQWJvbm5lbWVudFBheWxvYWQoKSB7XG4gICAgY29uc3QgcHJvY2VzcyA9IHRoaXMuY3VycmVudFByb2Nlc3MudmFsdWVcbiAgICBpZiAoIXByb2Nlc3M/LmZvcmZhaXQ/LmlkKSByZXR1cm4gbnVsbFxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZvcmZhaXRJRDogcHJvY2Vzcy5mb3JmYWl0LmlkLFxuICAgICAgLi4uKHByb2Nlc3MucmVkdWN0aW9uICYmIHsgcmVkdWN0aW9uOiBwcm9jZXNzLnJlZHVjdGlvbiB9KSxcbiAgICAgIC4uLihwcm9jZXNzLnN1cHBvcnRpbmdEb2N1bWVudHMgJiYge1xuICAgICAgICBzdXBwb3J0aW5nX2RvY3VtZW50czogcHJvY2Vzcy5zdXBwb3J0aW5nRG9jdW1lbnRzLFxuICAgICAgfSksXG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBhcGktY3ljbGlzdFxuICpcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHtcbiAgSHR0cENsaWVudCxcbiAgSHR0cEhlYWRlcnMsXG4gIEh0dHBQYXJhbXMsXG4gIEh0dHBSZXNwb25zZSxcbiAgSHR0cEV2ZW50LFxuICBIdHRwUGFyYW1ldGVyQ29kZWMsXG4gIEh0dHBDb250ZXh0LFxufSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCdcbmltcG9ydCB7IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyB9IGZyb20gJy4uL2VuY29kZXInXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcydcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgUmV0cmlldmVNeVVzZXIyMDBSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL3JldHJpZXZlTXlVc2VyMjAwUmVzcG9uc2UnXG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEJBU0VfUEFUSCwgQ09MTEVDVElPTl9GT1JNQVRTIH0gZnJvbSAnLi4vdmFyaWFibGVzJ1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9IGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nXG5pbXBvcnQgeyBlbnZpcm9ubWVudCB9IGZyb20gJy4uLy4uL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudCdcblxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVNeVVzZXJSZXF1ZXN0UGFyYW1zIHtcbiAgLyoqIElmICYjeDYwO1RydWUmI3g2MDsgd2lsbCBtYWtlIHRoZSBjYWxsIGluIFByb2QuIEVsc2Ugd2lsbCBkbyBpdCBpbiBQcmVwcm9kLiAqL1xuICBsaXZlTW9kZT86IGJvb2xlYW5cbiAgLyoqIEluc3BpcmVkIGJ5IFN0cmlwZS4gTWFueSBvYmplY3RzIGNvbnRhaW4gdGhlIElEIG9mIGEgcmVsYXRlZCBvYmplY3QgaW4gdGhlaXIgcmVzcG9uc2UgcHJvcGVydGllcy4gRm9yIGV4YW1wbGUsIGEgVHJpcCBoYXZlIGFuIGFzc29jaWF0ZWQgVmVoaWN1bGUgSUQuIFRob3NlIG9iamVjdHMgY2FuIGJlIGV4cGFuZGVkIGlubGluZSB3aXRoIHRoZSBleHBhbmQgcmVxdWVzdCBwYXJhbWV0ZXIuIE9iamVjdHMgdGhhdCBjYW4gYmUgZXhwYW5kZWQgYXJlIG5vdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbi4gVGhpcyBwYXJhbWV0ZXIgaXMgYXZhaWxhYmxlIG9uIGFsbCBBUEkgcmVxdWVzdHMsIGFuZCBhcHBsaWVzIHRvIHRoZSByZXNwb25zZSBvZiB0aGF0IHJlcXVlc3Qgb25seS4gWW91IGNhbiBuZXN0IGV4cGFuZCByZXF1ZXN0cyB3aXRoIHRoZSBkb3QgcHJvcGVydHkuIEZvciBleGFtcGxlLCByZXF1ZXN0aW5nIGludm9pY2UuY3VzdG9tZXIgb24gYSBjaGFyZ2Ugd2lsbCBleHBhbmQgdGhlIGludm9pY2UgcHJvcGVydHkgaW50byBhIGZ1bGwgSW52b2ljZSBvYmplY3QsIGFuZCB3aWxsIHRoZW4gZXhwYW5kIHRoZSBjdXN0b21lciBwcm9wZXJ0eSBvbiB0aGF0IGludm9pY2UgaW50byBhIGZ1bGwgQ3VzdG9tZXIgb2JqZWN0LiBZb3UgY2FuIGV4cGFuZCBtdWx0aXBsZSBvYmplY3RzIGF0IG9uY2UgYnkgaWRlbnRpZnlpbmcgbXVsdGlwbGUgaXRlbXMgaW4gdGhlIGV4cGFuZCBhcnJheS4gKi9cbiAgZXhwYW5kPzogQXJyYXk8c3RyaW5nPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJpZXZlTXlVc2VyUmVxdWVzdFBhcmFtcyB7XG4gIC8qKiBJZiAmI3g2MDtUcnVlJiN4NjA7IHdpbGwgbWFrZSB0aGUgY2FsbCBpbiBQcm9kLiBFbHNlIHdpbGwgZG8gaXQgaW4gUHJlcHJvZC4gKi9cbiAgbGl2ZU1vZGU/OiBib29sZWFuXG4gIC8qKiBJbnNwaXJlZCBieSBTdHJpcGUuIE1hbnkgb2JqZWN0cyBjb250YWluIHRoZSBJRCBvZiBhIHJlbGF0ZWQgb2JqZWN0IGluIHRoZWlyIHJlc3BvbnNlIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIFRyaXAgaGF2ZSBhbiBhc3NvY2lhdGVkIFZlaGljdWxlIElELiBUaG9zZSBvYmplY3RzIGNhbiBiZSBleHBhbmRlZCBpbmxpbmUgd2l0aCB0aGUgZXhwYW5kIHJlcXVlc3QgcGFyYW1ldGVyLiBPYmplY3RzIHRoYXQgY2FuIGJlIGV4cGFuZGVkIGFyZSBub3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24uIFRoaXMgcGFyYW1ldGVyIGlzIGF2YWlsYWJsZSBvbiBhbGwgQVBJIHJlcXVlc3RzLCBhbmQgYXBwbGllcyB0byB0aGUgcmVzcG9uc2Ugb2YgdGhhdCByZXF1ZXN0IG9ubHkuIFlvdSBjYW4gbmVzdCBleHBhbmQgcmVxdWVzdHMgd2l0aCB0aGUgZG90IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgcmVxdWVzdGluZyBpbnZvaWNlLmN1c3RvbWVyIG9uIGEgY2hhcmdlIHdpbGwgZXhwYW5kIHRoZSBpbnZvaWNlIHByb3BlcnR5IGludG8gYSBmdWxsIEludm9pY2Ugb2JqZWN0LCBhbmQgd2lsbCB0aGVuIGV4cGFuZCB0aGUgY3VzdG9tZXIgcHJvcGVydHkgb24gdGhhdCBpbnZvaWNlIGludG8gYSBmdWxsIEN1c3RvbWVyIG9iamVjdC4gWW91IGNhbiBleHBhbmQgbXVsdGlwbGUgb2JqZWN0cyBhdCBvbmNlIGJ5IGlkZW50aWZ5aW5nIG11bHRpcGxlIGl0ZW1zIGluIHRoZSBleHBhbmQgYXJyYXkuICovXG4gIGV4cGFuZD86IEFycmF5PHN0cmluZz5cbn1cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCcsXG59KVxuZXhwb3J0IGNsYXNzIEFQSUFjY291bnRTZXJ2aWNlIHtcbiAgcHJvdGVjdGVkIGJhc2VQYXRoID0gZW52aXJvbm1lbnQuYmFzZVBhdGhcbiAgcHVibGljIGRlZmF1bHRIZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKClcbiAgcHVibGljIGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbigpXG4gIHB1YmxpYyBlbmNvZGVyOiBIdHRwUGFyYW1ldGVyQ29kZWNcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCxcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZyB8IHN0cmluZ1tdLFxuICAgIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb246IENvbmZpZ3VyYXRpb25cbiAgKSB7XG4gICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb25cbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBmaXJzdEJhc2VQYXRoID0gQXJyYXkuaXNBcnJheShiYXNlUGF0aCkgPyBiYXNlUGF0aFswXSA6IHVuZGVmaW5lZFxuICAgICAgaWYgKGZpcnN0QmFzZVBhdGggIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJhc2VQYXRoID0gZmlyc3RCYXNlUGF0aFxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGJhc2VQYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgICBiYXNlUGF0aCA9IHRoaXMuYmFzZVBhdGhcbiAgICAgIH1cbiAgICAgIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCA9IGJhc2VQYXRoXG4gICAgfVxuICAgIHRoaXMuZW5jb2RlciA9IHRoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVyIHx8IG5ldyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMoKVxuICB9XG5cbiAgLy8gQHRzLWlnbm9yZVxuICBwcml2YXRlIGFkZFRvSHR0cFBhcmFtcyhcbiAgICBodHRwUGFyYW1zOiBIdHRwUGFyYW1zLFxuICAgIHZhbHVlOiBhbnksXG4gICAga2V5Pzogc3RyaW5nXG4gICk6IEh0dHBQYXJhbXMge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCB2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIHZhbHVlLCBrZXkpXG4gICAgfVxuICAgIHJldHVybiBodHRwUGFyYW1zXG4gIH1cblxuICBwcml2YXRlIGFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShcbiAgICBodHRwUGFyYW1zOiBIdHRwUGFyYW1zLFxuICAgIHZhbHVlPzogYW55LFxuICAgIGtleT86IHN0cmluZ1xuICApOiBIdHRwUGFyYW1zIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGh0dHBQYXJhbXNcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIDsodmFsdWUgYXMgYW55W10pLmZvckVhY2goXG4gICAgICAgICAgKGVsZW0pID0+XG4gICAgICAgICAgICAoaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIGVsZW0sIGtleSkpXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgIGh0dHBQYXJhbXMgPSBodHRwUGFyYW1zLmFwcGVuZChcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICh2YWx1ZSBhcyBEYXRlKS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMClcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoJ2tleSBtYXkgbm90IGJlIG51bGwgaWYgdmFsdWUgaXMgRGF0ZScpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKFxuICAgICAgICAgIChrKSA9PlxuICAgICAgICAgICAgKGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShcbiAgICAgICAgICAgICAgaHR0cFBhcmFtcyxcbiAgICAgICAgICAgICAgdmFsdWVba10sXG4gICAgICAgICAgICAgIGtleSAhPSBudWxsID8gYCR7a2V5fS4ke2t9YCA6IGtcbiAgICAgICAgICAgICkpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICBodHRwUGFyYW1zID0gaHR0cFBhcmFtcy5hcHBlbmQoa2V5LCB2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgRXJyb3IoJ2tleSBtYXkgbm90IGJlIG51bGwgaWYgdmFsdWUgaXMgbm90IG9iamVjdCBvciBhcnJheScpXG4gICAgfVxuICAgIHJldHVybiBodHRwUGFyYW1zXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIG15IHVzZXJcbiAgICogRG9lc25cXCYjMzk7dCByZWFsbHkgZGVsZXRlIHRoZSB1c2VyLiBPbmx5IGNoYW5nZSBpdFxcJiMzOTtzIHN0YXR1cyB0byAmI3g2MDtkZWxldGlvbl9yZXF1ZXN0ZWQmI3g2MDsuXG4gICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlTXlVc2VyKFxuICAgIHJlcXVlc3RQYXJhbWV0ZXJzPzogRGVsZXRlTXlVc2VyUmVxdWVzdFBhcmFtcyxcbiAgICBvYnNlcnZlPzogJ2JvZHknLFxuICAgIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbixcbiAgICBvcHRpb25zPzoge1xuICAgICAgaHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgY29udGV4dD86IEh0dHBDb250ZXh0XG4gICAgICB0cmFuc2ZlckNhY2hlPzogYm9vbGVhblxuICAgIH1cbiAgKTogT2JzZXJ2YWJsZTxSZXRyaWV2ZU15VXNlcjIwMFJlc3BvbnNlPlxuICBwdWJsaWMgZGVsZXRlTXlVc2VyKFxuICAgIHJlcXVlc3RQYXJhbWV0ZXJzPzogRGVsZXRlTXlVc2VyUmVxdWVzdFBhcmFtcyxcbiAgICBvYnNlcnZlPzogJ3Jlc3BvbnNlJyxcbiAgICByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGh0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIGNvbnRleHQ/OiBIdHRwQ29udGV4dFxuICAgICAgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW5cbiAgICB9XG4gICk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlTXlVc2VyMjAwUmVzcG9uc2U+PlxuICBwdWJsaWMgZGVsZXRlTXlVc2VyKFxuICAgIHJlcXVlc3RQYXJhbWV0ZXJzPzogRGVsZXRlTXlVc2VyUmVxdWVzdFBhcmFtcyxcbiAgICBvYnNlcnZlPzogJ2V2ZW50cycsXG4gICAgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICBjb250ZXh0PzogSHR0cENvbnRleHRcbiAgICAgIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFuXG4gICAgfVxuICApOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXRyaWV2ZU15VXNlcjIwMFJlc3BvbnNlPj5cbiAgcHVibGljIGRlbGV0ZU15VXNlcihcbiAgICByZXF1ZXN0UGFyYW1ldGVycz86IERlbGV0ZU15VXNlclJlcXVlc3RQYXJhbXMsXG4gICAgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLFxuICAgIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGh0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIGNvbnRleHQ/OiBIdHRwQ29udGV4dFxuICAgICAgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW5cbiAgICB9XG4gICk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgY29uc3QgbGl2ZU1vZGUgPSByZXF1ZXN0UGFyYW1ldGVycz8ubGl2ZU1vZGVcbiAgICBjb25zdCBleHBhbmQgPSByZXF1ZXN0UGFyYW1ldGVycz8uZXhwYW5kXG5cbiAgICBsZXQgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7IGVuY29kZXI6IHRoaXMuZW5jb2RlciB9KVxuICAgIGlmIChleHBhbmQpIHtcbiAgICAgIGV4cGFuZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMoXG4gICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgPGFueT5lbGVtZW50LFxuICAgICAgICAgICdleHBhbmQnXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGV0IGxvY2FsVmFySGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnNcbiAgICBpZiAobGl2ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiBsaXZlTW9kZSAhPT0gbnVsbCkge1xuICAgICAgbG9jYWxWYXJIZWFkZXJzID0gbG9jYWxWYXJIZWFkZXJzLnNldCgnTGl2ZS1Nb2RlJywgU3RyaW5nKGxpdmVNb2RlKSlcbiAgICB9XG5cbiAgICBsZXQgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9XG4gICAgICBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdFxuICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFsnYXBwbGljYXRpb24vanNvbiddXG4gICAgICBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9XG4gICAgICAgIHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpXG4gICAgfVxuICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KFxuICAgICAgICAnQWNjZXB0JyxcbiAgICAgICAgbG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWRcbiAgICAgIClcbiAgICB9XG5cbiAgICBsZXQgbG9jYWxWYXJIdHRwQ29udGV4dDogSHR0cENvbnRleHQgfCB1bmRlZmluZWQgPVxuICAgICAgb3B0aW9ucyAmJiBvcHRpb25zLmNvbnRleHRcbiAgICBpZiAobG9jYWxWYXJIdHRwQ29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsb2NhbFZhckh0dHBDb250ZXh0ID0gbmV3IEh0dHBDb250ZXh0KClcbiAgICB9XG5cbiAgICBsZXQgbG9jYWxWYXJUcmFuc2ZlckNhY2hlOiBib29sZWFuIHwgdW5kZWZpbmVkID1cbiAgICAgIG9wdGlvbnMgJiYgb3B0aW9ucy50cmFuc2ZlckNhY2hlXG4gICAgaWYgKGxvY2FsVmFyVHJhbnNmZXJDYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsb2NhbFZhclRyYW5zZmVyQ2FjaGUgPSB0cnVlXG4gICAgfVxuXG4gICAgbGV0IHJlc3BvbnNlVHlwZV86ICd0ZXh0JyB8ICdqc29uJyB8ICdibG9iJyA9ICdqc29uJ1xuICAgIGlmIChsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCkge1xuICAgICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICByZXNwb25zZVR5cGVfID0gJ3RleHQnXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZClcbiAgICAgICkge1xuICAgICAgICByZXNwb25zZVR5cGVfID0gJ2pzb24nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNwb25zZVR5cGVfID0gJ2Jsb2InXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGxvY2FsVmFyUGF0aCA9IGAvdXNlcnMvbWVgXG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFJldHJpZXZlTXlVc2VyMjAwUmVzcG9uc2U+KFxuICAgICAgJ2RlbGV0ZScsXG4gICAgICBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9JHtsb2NhbFZhclBhdGh9YCxcbiAgICAgIHtcbiAgICAgICAgY29udGV4dDogbG9jYWxWYXJIdHRwQ29udGV4dCxcbiAgICAgICAgcGFyYW1zOiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZV8sXG4gICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgaGVhZGVyczogbG9jYWxWYXJIZWFkZXJzLFxuICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICB0cmFuc2ZlckNhY2hlOiBsb2NhbFZhclRyYW5zZmVyQ2FjaGUsXG4gICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzcyxcbiAgICAgIH1cbiAgICApXG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgbXkgdXNlclxuICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgKi9cbiAgcHVibGljIHJldHJpZXZlTXlVc2VyKFxuICAgIHJlcXVlc3RQYXJhbWV0ZXJzPzogUmV0cmlldmVNeVVzZXJSZXF1ZXN0UGFyYW1zLFxuICAgIG9ic2VydmU/OiAnYm9keScsXG4gICAgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICBjb250ZXh0PzogSHR0cENvbnRleHRcbiAgICAgIHRyYW5zZmVyQ2FjaGU/OiBib29sZWFuXG4gICAgfVxuICApOiBPYnNlcnZhYmxlPFJldHJpZXZlTXlVc2VyMjAwUmVzcG9uc2U+XG4gIHB1YmxpYyByZXRyaWV2ZU15VXNlcihcbiAgICByZXF1ZXN0UGFyYW1ldGVycz86IFJldHJpZXZlTXlVc2VyUmVxdWVzdFBhcmFtcyxcbiAgICBvYnNlcnZlPzogJ3Jlc3BvbnNlJyxcbiAgICByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGh0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIGNvbnRleHQ/OiBIdHRwQ29udGV4dFxuICAgICAgdHJhbnNmZXJDYWNoZT86IGJvb2xlYW5cbiAgICB9XG4gICk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFJldHJpZXZlTXlVc2VyMjAwUmVzcG9uc2U+PlxuICBwdWJsaWMgcmV0cmlldmVNeVVzZXIoXG4gICAgcmVxdWVzdFBhcmFtZXRlcnM/OiBSZXRyaWV2ZU15VXNlclJlcXVlc3RQYXJhbXMsXG4gICAgb2JzZXJ2ZT86ICdldmVudHMnLFxuICAgIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbixcbiAgICBvcHRpb25zPzoge1xuICAgICAgaHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgY29udGV4dD86IEh0dHBDb250ZXh0XG4gICAgICB0cmFuc2ZlckNhY2hlPzogYm9vbGVhblxuICAgIH1cbiAgKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UmV0cmlldmVNeVVzZXIyMDBSZXNwb25zZT4+XG4gIHB1YmxpYyByZXRyaWV2ZU15VXNlcihcbiAgICByZXF1ZXN0UGFyYW1ldGVycz86IFJldHJpZXZlTXlVc2VyUmVxdWVzdFBhcmFtcyxcbiAgICBvYnNlcnZlOiBhbnkgPSAnYm9keScsXG4gICAgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBvcHRpb25zPzoge1xuICAgICAgaHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgY29udGV4dD86IEh0dHBDb250ZXh0XG4gICAgICB0cmFuc2ZlckNhY2hlPzogYm9vbGVhblxuICAgIH1cbiAgKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICBjb25zdCBsaXZlTW9kZSA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5saXZlTW9kZVxuICAgIGNvbnN0IGV4cGFuZCA9IHJlcXVlc3RQYXJhbWV0ZXJzPy5leHBhbmRcblxuICAgIGxldCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHsgZW5jb2RlcjogdGhpcy5lbmNvZGVyIH0pXG4gICAgaWYgKGV4cGFuZCkge1xuICAgICAgZXhwYW5kLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhcbiAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICA8YW55PmVsZW1lbnQsXG4gICAgICAgICAgJ2V4cGFuZCdcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBsZXQgbG9jYWxWYXJIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVyc1xuICAgIGlmIChsaXZlTW9kZSAhPT0gdW5kZWZpbmVkICYmIGxpdmVNb2RlICE9PSBudWxsKSB7XG4gICAgICBsb2NhbFZhckhlYWRlcnMgPSBsb2NhbFZhckhlYWRlcnMuc2V0KCdMaXZlLU1vZGUnLCBTdHJpbmcobGl2ZU1vZGUpKVxuICAgIH1cblxuICAgIGxldCBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID1cbiAgICAgIG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0XG4gICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gWydhcHBsaWNhdGlvbi9qc29uJ11cbiAgICAgIGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID1cbiAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cylcbiAgICB9XG4gICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxvY2FsVmFySGVhZGVycyA9IGxvY2FsVmFySGVhZGVycy5zZXQoXG4gICAgICAgICdBY2NlcHQnLFxuICAgICAgICBsb2NhbFZhckh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZFxuICAgICAgKVxuICAgIH1cblxuICAgIGxldCBsb2NhbFZhckh0dHBDb250ZXh0OiBIdHRwQ29udGV4dCB8IHVuZGVmaW5lZCA9XG4gICAgICBvcHRpb25zICYmIG9wdGlvbnMuY29udGV4dFxuICAgIGlmIChsb2NhbFZhckh0dHBDb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxvY2FsVmFySHR0cENvbnRleHQgPSBuZXcgSHR0cENvbnRleHQoKVxuICAgIH1cblxuICAgIGxldCBsb2NhbFZhclRyYW5zZmVyQ2FjaGU6IGJvb2xlYW4gfCB1bmRlZmluZWQgPVxuICAgICAgb3B0aW9ucyAmJiBvcHRpb25zLnRyYW5zZmVyQ2FjaGVcbiAgICBpZiAobG9jYWxWYXJUcmFuc2ZlckNhY2hlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxvY2FsVmFyVHJhbnNmZXJDYWNoZSA9IHRydWVcbiAgICB9XG5cbiAgICBsZXQgcmVzcG9uc2VUeXBlXzogJ3RleHQnIHwgJ2pzb24nIHwgJ2Jsb2InID0gJ2pzb24nXG4gICAgaWYgKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKSB7XG4gICAgICBpZiAobG9jYWxWYXJIdHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgIHJlc3BvbnNlVHlwZV8gPSAndGV4dCdcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHRoaXMuY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFySHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKVxuICAgICAgKSB7XG4gICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnanNvbidcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3BvbnNlVHlwZV8gPSAnYmxvYidcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbG9jYWxWYXJQYXRoID0gYC91c2Vycy9tZWBcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8UmV0cmlldmVNeVVzZXIyMDBSZXNwb25zZT4oXG4gICAgICAnZ2V0JyxcbiAgICAgIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0ke2xvY2FsVmFyUGF0aH1gLFxuICAgICAge1xuICAgICAgICBjb250ZXh0OiBsb2NhbFZhckh0dHBDb250ZXh0LFxuICAgICAgICBwYXJhbXM6IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlXyxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICBoZWFkZXJzOiBsb2NhbFZhckhlYWRlcnMsXG4gICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgIHRyYW5zZmVyQ2FjaGU6IGxvY2FsVmFyVHJhbnNmZXJDYWNoZSxcbiAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzLFxuICAgICAgfVxuICAgIClcbiAgfVxufVxuIiwgImltcG9ydCB7IEluamVjdGFibGUsIHNpZ25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyBDeWNsaXN0c1NlcnZpY2UsIFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlIH0gZnJvbSAnc3JjL2FwaS1jeWNsaXN0J1xuaW1wb3J0IHsgQVBJQWNjb3VudFNlcnZpY2UgfSBmcm9tICdzcmMvYXBpLWN5Y2xpc3QvYXBpL2FQSUFjY291bnQuc2VydmljZSdcbmltcG9ydCB7IGVudmlyb25tZW50IH0gZnJvbSAnc3JjL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudCdcbmltcG9ydCB7IFN1YnNjcmlwdGlvblByb2Nlc3NTZXJ2aWNlIH0gZnJvbSAnLi4vdXRpbHMvc3Vic2NyaXB0aW9uLXByb2Nlc3Muc2VydmljZSdcbmltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJ1xuaW1wb3J0IHsgVG9hc3RTZXJ2aWNlLCBUb2FzdFR5cGUgfSBmcm9tICcuLi91dGlscy90b2FzdC5zZXJ2aWNlJ1xuaW1wb3J0IHsgUmVnaXN0cmF0aW9uc1NlcnZpY2UgfSBmcm9tICdzcmMvYXBpLWN5Y2xpc3QvYXBpL3JlZ2lzdHJhdGlvbnMuc2VydmljZSdcbmltcG9ydCB7IEVycm9ySGFuZGxlclNlcnZpY2UgfSBmcm9tICcuLi91dGlscy9lcnJvci1oYW5kbGVyLnNlcnZpY2UnXG5cbmV4cG9ydCB0eXBlIGN5Y2xpc3RTdGF0ZSA9XG4gIHwge1xuICAgICAgc3RhdGU6ICd1bmtub3duJ1xuICAgICAgYmxvY2tlZF9yZWFzb25zOiBzdHJpbmdbXVxuICAgIH1cbiAgfCB7XG4gICAgICBzdGF0ZTogJ2FjdGl2ZSdcbiAgICAgIGN5Y2xpc3Q6IFJldHJpZXZlQ3ljbGlzdDIwMFJlc3BvbnNlXG4gICAgICBibG9ja2VkX3JlYXNvbnM6IHN0cmluZ1tdXG4gICAgfVxuICB8IHtcbiAgICAgIHN0YXRlOiAndW5jb25maXJtZWQnXG4gICAgICBjeWNsaXN0OiBSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZVxuICAgICAgYmxvY2tlZF9yZWFzb25zOiBzdHJpbmdbXVxuICAgICAgZGVsZXRpb25SZXF1ZXN0ZWQ/OiBib29sZWFuXG4gICAgfVxuICB8IHtcbiAgICAgIHN0YXRlOiAnZGVsZXRpb25fcmVxdWVzdGVkJ1xuICAgICAgY3ljbGlzdDogUmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2VcbiAgICAgIGJsb2NrZWRfcmVhc29uczogc3RyaW5nW11cbiAgICB9XG4gIHwge1xuICAgICAgc3RhdGU6ICdkZWxldGVkJ1xuICAgICAgY3ljbGlzdDogUmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2VcbiAgICAgIGJsb2NrZWRfcmVhc29uczogc3RyaW5nW11cbiAgICB9XG4gIHwge1xuICAgICAgc3RhdGU6ICdibG9ja2VkJ1xuICAgICAgY3ljbGlzdDogUmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2VcbiAgICAgIGJsb2NrZWRfcmVhc29uczogc3RyaW5nW11cbiAgICB9XG4gIHwge1xuICAgICAgc3RhdGU6ICdlcnJvcidcbiAgICAgIGVycm9yOiBFcnJvclxuICAgICAgYmxvY2tlZF9yZWFzb25zOiBzdHJpbmdbXVxuICAgIH1cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCcsXG59KVxuZXhwb3J0IGNsYXNzIEFjY291bnRTZXJ2aWNlIHtcbiAgY3ljbGlzdFN0YXRlID0gc2lnbmFsPGN5Y2xpc3RTdGF0ZT4oe1xuICAgIHN0YXRlOiAndW5rbm93bicsXG4gICAgYmxvY2tlZF9yZWFzb25zOiBbJ1Vua25vd24gYWNjb3VudCBzdGF0ZSddLFxuICB9KVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgQ3ljbGlzdHNTZXJ2aWNlOiBDeWNsaXN0c1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBhY2NvdW50U2VydmljZTogQVBJQWNjb3VudFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBzdWJzY3JpcHRpb25Qcm9jZXNzOiBTdWJzY3JpcHRpb25Qcm9jZXNzU2VydmljZSxcbiAgICBwcml2YXRlIHJlZ2lzdHJhdGlvbnNTZXJ2aWNlOiBSZWdpc3RyYXRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyU2VydmljZSxcbiAgICBwcml2YXRlIHRvYXN0U2VydmljZTogVG9hc3RTZXJ2aWNlLFxuICAgIHByaXZhdGUgdHJhbnNsYXRlU2VydmljZTogVHJhbnNsYXRlU2VydmljZVxuICApIHt9XG4gIGFzeW5jIGxvYWRDeWNsaXN0KCkge1xuICAgIGF3YWl0IHRoaXMucmVnaXN0cmF0aW9uc1NlcnZpY2VcbiAgICAgIC5yZXRyaWV2ZVJlZ2lzdHJhdGlvbih7XG4gICAgICAgIHByb2dyYW06IGVudmlyb25tZW50LnByb2dyYW0sXG4gICAgICAgIGxpdmVNb2RlOiBlbnZpcm9ubWVudC5wcm9kdWN0aW9uLFxuICAgICAgfSlcbiAgICAgIC50b1Byb21pc2UoKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5DeWNsaXN0c1NlcnZpY2UucmV0cmlldmVDeWNsaXN0KHtcbiAgICAgICAgcHJvZ3JhbTogZW52aXJvbm1lbnQucHJvZ3JhbSxcbiAgICAgICAgY3VycmVudFByb2dyYW06IGVudmlyb25tZW50LnByb2dyYW0sXG4gICAgICAgIGV4cGFuZDogW1xuICAgICAgICAgICdyZWdpc3RyYXRpb25zLmN1c3RvbWVyLGt5Y19kb2N1bWVudHMscmVnaXN0cmF0aW9ucy5ncmFjZV9wZXJpb2RfdXNhZ2UscmVnaXN0cmF0aW9ucy5tZW1iZXJzaGlwcycsXG4gICAgICAgIF0sXG4gICAgICAgIGxpdmVNb2RlOiBlbnZpcm9ubWVudC5wcm9kdWN0aW9uLFxuICAgICAgfSkuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogKGN5Y2xpc3QpID0+IHtcbiAgICAgICAgICB0aGlzLmNoZWNrQ3ljbGlzdEFjY291bnQoY3ljbGlzdClcbiAgICAgICAgICByZXNvbHZlKGN5Y2xpc3QpXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBhc3luYyAoZXJyb3IpID0+IHtcbiAgICAgICAgICB0aGlzLmN5Y2xpc3RTdGF0ZS5zZXQoe1xuICAgICAgICAgICAgc3RhdGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIGJsb2NrZWRfcmVhc29uczogWydFcnJvciBsb2FkaW5nIGFjY291bnQnXSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yKVxuICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBkZWxldGVBY2NvdW50KCkge1xuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHRoaXMuY3ljbGlzdFN0YXRlKClcbiAgICBpZiAoXG4gICAgICBjdXJyZW50U3RhdGUuc3RhdGUgIT09ICd1bmtub3duJyAmJlxuICAgICAgY3VycmVudFN0YXRlLnN0YXRlICE9PSAnZXJyb3InICYmXG4gICAgICBjdXJyZW50U3RhdGUuc3RhdGUgIT09ICdkZWxldGlvbl9yZXF1ZXN0ZWQnICYmXG4gICAgICBjdXJyZW50U3RhdGUuc3RhdGUgIT09ICdkZWxldGVkJ1xuICAgICkge1xuICAgICAgdGhpcy5hY2NvdW50U2VydmljZS5kZWxldGVNeVVzZXIoKS5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKCdjeWNsaXN0JyBpbiBjdXJyZW50U3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUuc3RhdGUgPT09ICd1bmNvbmZpcm1lZCcpIHtcbiAgICAgICAgICAgICAgLy8gUG91ciBsZXMgdXRpbGlzYXRldXJzIG5vbiBjb25maXJtw6lzLCBvbiBnYXJkZSBsJ8OpdGF0IHVuY29uZmlybWVkIG1haXMgb24gYWpvdXRlIGxlIGZsYWdcbiAgICAgICAgICAgICAgdGhpcy5jeWNsaXN0U3RhdGUuc2V0KHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ3VuY29uZmlybWVkJyxcbiAgICAgICAgICAgICAgICBjeWNsaXN0OiBjdXJyZW50U3RhdGUuY3ljbGlzdCxcbiAgICAgICAgICAgICAgICBibG9ja2VkX3JlYXNvbnM6IGN1cnJlbnRTdGF0ZS5ibG9ja2VkX3JlYXNvbnMsXG4gICAgICAgICAgICAgICAgZGVsZXRpb25SZXF1ZXN0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBQb3VyIGxlcyB1dGlsaXNhdGV1cnMgYWN0aWZzLCBvbiBwYXNzZSBlbiBkZWxldGlvbl9yZXF1ZXN0ZWRcbiAgICAgICAgICAgICAgdGhpcy5jeWNsaXN0U3RhdGUuc2V0KHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ2RlbGV0aW9uX3JlcXVlc3RlZCcsXG4gICAgICAgICAgICAgICAgY3ljbGlzdDogY3VycmVudFN0YXRlLmN5Y2xpc3QsXG4gICAgICAgICAgICAgICAgYmxvY2tlZF9yZWFzb25zOiBbJ0RlbGV0aW9uIHJlcXVlc3RlZCddLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblByb2Nlc3MuY2xlYXJQcm9jZXNzKClcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGFzeW5jIChlcnIpID0+IHtcbiAgICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnIpXG4gICAgICAgICAgdGhyb3cgZXJyXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRvYXN0U2VydmljZS5jcmVhdGVXaXRoSnVzdE1lc3NhZ2UoXG4gICAgICAgIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdnZW5lcmljLmRlbGV0aW9uX2FjY291bnRfaW1wb3NzaWJsZScpLFxuICAgICAgICBUb2FzdFR5cGUuRXJyb3JcbiAgICAgIClcbiAgICAgIHRocm93IG5ldyBFcnJvcignQWNjb3VudCBpcyBhbHJlYWR5IGRlbGV0ZWQnKVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjaGFuZ2VFbWFpbChlbWFpbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuQ3ljbGlzdHNTZXJ2aWNlLmNoYW5nZUN5Y2xpc3RFbWFpbCh7XG4gICAgICAgIGNoYW5nZUN5Y2xpc3RFbWFpbFJlcXVlc3Q6IHtcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgfSxcbiAgICAgIH0pLnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQ6IChjeWNsaXN0KSA9PiB7XG4gICAgICAgICAgdGhpcy5jaGVja0N5Y2xpc3RBY2NvdW50KGN5Y2xpc3QpXG4gICAgICAgICAgdGhpcy50b2FzdFNlcnZpY2UuY3JlYXRlV2l0aEp1c3RNZXNzYWdlKFxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ3NldHRpbmdzLmluZm9zLmVtYWlsX2NoYW5nZWQnKSxcbiAgICAgICAgICAgIFRvYXN0VHlwZS5TdWNjZXNzXG4gICAgICAgICAgKVxuICAgICAgICAgIHJlc29sdmUoY3ljbGlzdClcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yKVxuICAgICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGN5Y2xpc3QgaWYgYXZhaWxhYmxlLCBvciB0aHJvd3MgYW4gZXJyb3IgaWYgbm90XG4gICAqIEByZXR1cm5zIFRoZSBjdXJyZW50IGN5Y2xpc3RcbiAgICogQHRocm93cyBFcnJvciBpZiBjeWNsaXN0IGlzIG5vdCBhdmFpbGFibGVcbiAgICovXG4gIHB1YmxpYyBnZXRDdXJyZW50Q3ljbGlzdCgpOiBSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZSB7XG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gdGhpcy5jeWNsaXN0U3RhdGUoKVxuICAgIGlmICghKCdjeWNsaXN0JyBpbiBjdXJyZW50U3RhdGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGN5Y2xpc3QgYXZhaWxhYmxlJylcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZS5jeWNsaXN0XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY3ljbGlzdCBkYXRhIHdoaWxlIHByZXNlcnZpbmcgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICogQHBhcmFtIGN5Y2xpc3QgVGhlIHVwZGF0ZWQgY3ljbGlzdCBkYXRhXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlQ3ljbGlzdERhdGEoY3ljbGlzdDogUmV0cmlldmVDeWNsaXN0MjAwUmVzcG9uc2UpIHtcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB0aGlzLmN5Y2xpc3RTdGF0ZSgpXG4gICAgaWYgKGN1cnJlbnRTdGF0ZS5zdGF0ZSAhPT0gJ3Vua25vd24nICYmIGN1cnJlbnRTdGF0ZS5zdGF0ZSAhPT0gJ2Vycm9yJykge1xuICAgICAgdGhpcy5jeWNsaXN0U3RhdGUuc2V0KHtcbiAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICBjeWNsaXN0LFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY2hlY2tDeWNsaXN0QWNjb3VudChjeWNsaXN0OiBSZXRyaWV2ZUN5Y2xpc3QyMDBSZXNwb25zZSkge1xuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHRoaXMuY3ljbGlzdFN0YXRlKClcblxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBmaWx0ZXIgb3V0IFwiVW5rbm93biBhY2NvdW50IHN0YXRlXCIgZnJvbSBibG9ja2VkIHJlYXNvbnNcbiAgICBjb25zdCBnZXRGaWx0ZXJlZEJsb2NrZWRSZWFzb25zID0gKHJlYXNvbnM6IHN0cmluZ1tdKSA9PlxuICAgICAgcmVhc29ucy5maWx0ZXIoKHJlYXNvbikgPT4gcmVhc29uICE9PSAnVW5rbm93biBhY2NvdW50IHN0YXRlJylcblxuICAgIGlmICgnYmxvY2tlZF9yZWFzb25zJyBpbiBjdXJyZW50U3RhdGUpIHtcbiAgICAgIC8vIENoZWNrIGZvciBleHRlcm5hbCB1c2VycyBGSVJTVCAtIHJvbGUgdGFrZXMgcHJpb3JpdHkgb3ZlciBjb25maXJtYXRpb24gc3RhdHVzXG5cbiAgICAgIC8vIEZvciByZWd1bGFyIGN5Y2xpc3RzLCBjaGVjayBjb25maXJtYXRpb24gc3RhdHVzXG4gICAgICBzd2l0Y2ggKGN5Y2xpc3Quc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgJ2FjdGl2ZSc6XG4gICAgICAgICAgdGhpcy5jeWNsaXN0U3RhdGUuc2V0KHtcbiAgICAgICAgICAgIHN0YXRlOiAnYWN0aXZlJyxcbiAgICAgICAgICAgIGN5Y2xpc3QsXG4gICAgICAgICAgICBibG9ja2VkX3JlYXNvbnM6IGdldEZpbHRlcmVkQmxvY2tlZFJlYXNvbnMoXG4gICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZS5ibG9ja2VkX3JlYXNvbnNcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd1bmNvbmZpcm1lZCc6XG4gICAgICAgICAgdGhpcy5jeWNsaXN0U3RhdGUuc2V0KHtcbiAgICAgICAgICAgIHN0YXRlOiAndW5jb25maXJtZWQnLFxuICAgICAgICAgICAgY3ljbGlzdCxcbiAgICAgICAgICAgIGJsb2NrZWRfcmVhc29uczogW1xuICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJlZEJsb2NrZWRSZWFzb25zKGN1cnJlbnRTdGF0ZS5ibG9ja2VkX3JlYXNvbnMpLFxuICAgICAgICAgICAgICAnQWNjb3VudCBub3QgY29uZmlybWVkJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkZWxldGlvblJlcXVlc3RlZDogZmFsc2UsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdkZWxldGVkJzpcbiAgICAgICAgICB0aGlzLmN5Y2xpc3RTdGF0ZS5zZXQoe1xuICAgICAgICAgICAgc3RhdGU6ICdkZWxldGVkJyxcbiAgICAgICAgICAgIGN5Y2xpc3QsXG4gICAgICAgICAgICBibG9ja2VkX3JlYXNvbnM6IFtcbiAgICAgICAgICAgICAgLi4uZ2V0RmlsdGVyZWRCbG9ja2VkUmVhc29ucyhjdXJyZW50U3RhdGUuYmxvY2tlZF9yZWFzb25zKSxcbiAgICAgICAgICAgICAgJ0FjY291bnQgZGVsZXRlZCcsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZGVsZXRpb25fcmVxdWVzdGVkJzpcbiAgICAgICAgICB0aGlzLmN5Y2xpc3RTdGF0ZS5zZXQoe1xuICAgICAgICAgICAgc3RhdGU6ICdkZWxldGlvbl9yZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgY3ljbGlzdCxcbiAgICAgICAgICAgIGJsb2NrZWRfcmVhc29uczogW1xuICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJlZEJsb2NrZWRSZWFzb25zKGN1cnJlbnRTdGF0ZS5ibG9ja2VkX3JlYXNvbnMpLFxuICAgICAgICAgICAgICAnQWNjb3VudCBkZWxldGlvbiByZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2Jsb2NrZWQnOlxuICAgICAgICAgIHRoaXMuY3ljbGlzdFN0YXRlLnNldCh7XG4gICAgICAgICAgICBzdGF0ZTogJ2Jsb2NrZWQnLFxuICAgICAgICAgICAgY3ljbGlzdCxcbiAgICAgICAgICAgIGJsb2NrZWRfcmVhc29uczogW1xuICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJlZEJsb2NrZWRSZWFzb25zKGN1cnJlbnRTdGF0ZS5ibG9ja2VkX3JlYXNvbnMpLFxuICAgICAgICAgICAgICAnQWNjb3VudCBibG9ja2VkJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuY3ljbGlzdFN0YXRlLnNldCh7XG4gICAgICAgICAgICBzdGF0ZTogJ3Vua25vd24nLFxuICAgICAgICAgICAgYmxvY2tlZF9yZWFzb25zOiBbXG4gICAgICAgICAgICAgIC4uLmdldEZpbHRlcmVkQmxvY2tlZFJlYXNvbnMoY3VycmVudFN0YXRlLmJsb2NrZWRfcmVhc29ucyksXG4gICAgICAgICAgICAgICdVbmtub3duIGFjY291bnQgc3RhdGUnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGZvciByZWdpc3RyYXRpb24tbGV2ZWwgYmxvY2tpbmcgKG9ubHkgZm9yIG5vbi1leHRlcm5hbCB1c2VycylcbiAgICAgIGlmIChjeWNsaXN0LnJlZ2lzdHJhdGlvbnM/LmRhdGEhWzBdLnN0YXR1cyA9PT0gJ2Jsb2NrZWQnKSB7XG4gICAgICAgIHRoaXMuY3ljbGlzdFN0YXRlLnNldCh7XG4gICAgICAgICAgc3RhdGU6ICdibG9ja2VkJyxcbiAgICAgICAgICBjeWNsaXN0LFxuICAgICAgICAgIGJsb2NrZWRfcmVhc29uczogW1xuICAgICAgICAgICAgLi4uZ2V0RmlsdGVyZWRCbG9ja2VkUmVhc29ucyhjdXJyZW50U3RhdGUuYmxvY2tlZF9yZWFzb25zKSxcbiAgICAgICAgICAgICdBY2NvdW50IGJsb2NrZWQnLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNhZmVseSBnZXRzIGJsb2NrZWQgcmVhc29ucyBmcm9tIHRoZSBjdXJyZW50IGN5Y2xpc3Qgc3RhdGVcbiAgICogRXh0ZXJuYWwgdXNlcnMgYnlwYXNzIGJsb2NrZWQgcmVhc29uc1xuICAgKiBAcmV0dXJucyBBcnJheSBvZiBibG9ja2VkIHJlYXNvbnMsIGVtcHR5IGFycmF5IGlmIG5vbmUgZXhpc3Qgb3IgaWYgdXNlciBpcyBleHRlcm5hbFxuICAgKi9cbiAgcHVibGljIGdldEJsb2NrZWRSZWFzb25zKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB0aGlzLmN5Y2xpc3RTdGF0ZSgpXG4gICAgcmV0dXJuICdibG9ja2VkX3JlYXNvbnMnIGluIGN1cnJlbnRTdGF0ZSA/IGN1cnJlbnRTdGF0ZS5ibG9ja2VkX3JlYXNvbnMgOiBbXVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3ljbGlzdCBoYXMgYW55IGJsb2NrZWQgcmVhc29uc1xuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZXJlIGFyZSBibG9ja2VkIHJlYXNvbnMsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgcHVibGljIGhhc0Jsb2NrZWRSZWFzb25zKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdldEJsb2NrZWRSZWFzb25zKCkubGVuZ3RoID4gMFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3ljbGlzdCBoYXMgYSBzcGVjaWZpYyBibG9ja2VkIHJlYXNvblxuICAgKiBAcGFyYW0gcmVhc29uIFRoZSByZWFzb24gdG8gY2hlY2sgZm9yXG4gICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlYXNvbiBleGlzdHMsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgcHVibGljIGhhc0Jsb2NrZWRSZWFzb24ocmVhc29uOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5nZXRCbG9ja2VkUmVhc29ucygpLmluY2x1ZGVzKHJlYXNvbilcbiAgfVxuXG4gIHB1YmxpYyBhZGRCbG9ja2VkUmVhc29uKHJlYXNvbjogc3RyaW5nKSB7XG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gdGhpcy5jeWNsaXN0U3RhdGUoKVxuICAgIGlmIChcbiAgICAgICdjeWNsaXN0JyBpbiBjdXJyZW50U3RhdGUgJiZcbiAgICAgIChjdXJyZW50U3RhdGUuY3ljbGlzdC5yb2xlID09ICdndWVzdCcgfHxcbiAgICAgICAgY3VycmVudFN0YXRlLmN5Y2xpc3QucmVnaXN0cmF0aW9ucz8uZGF0YT8uWzBdPy5yb2xlID09ICdndWVzdCcpXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgJ2Jsb2NrZWRfcmVhc29ucycgaW4gY3VycmVudFN0YXRlICYmXG4gICAgICAhY3VycmVudFN0YXRlLmJsb2NrZWRfcmVhc29ucy5pbmNsdWRlcyhyZWFzb24pXG4gICAgKSB7XG4gICAgICB0aGlzLmN5Y2xpc3RTdGF0ZS5zZXQoe1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIGJsb2NrZWRfcmVhc29uczogWy4uLmN1cnJlbnRTdGF0ZS5ibG9ja2VkX3JlYXNvbnMsIHJlYXNvbl0sXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVCbG9ja2VkUmVhc29uKHJlYXNvbjogc3RyaW5nKSB7XG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gdGhpcy5jeWNsaXN0U3RhdGUoKVxuICAgIGlmIChcbiAgICAgIGN1cnJlbnRTdGF0ZS5zdGF0ZSAhPT0gJ3Vua25vd24nICYmXG4gICAgICBjdXJyZW50U3RhdGUuc3RhdGUgIT09ICdlcnJvcicgJiZcbiAgICAgICdibG9ja2VkX3JlYXNvbnMnIGluIGN1cnJlbnRTdGF0ZSAmJlxuICAgICAgY3VycmVudFN0YXRlLmJsb2NrZWRfcmVhc29ucy5pbmNsdWRlcyhyZWFzb24pXG4gICAgKSB7XG4gICAgICBjb25zdCBuZXdSZWFzb25zID0gY3VycmVudFN0YXRlLmJsb2NrZWRfcmVhc29ucy5maWx0ZXIoXG4gICAgICAgIChyKSA9PiByICE9PSByZWFzb25cbiAgICAgIClcbiAgICAgIHRoaXMuY3ljbGlzdFN0YXRlLnNldCh7XG4gICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgYmxvY2tlZF9yZWFzb25zOiBuZXdSZWFzb25zLFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFzTWlzc2luZ1BheW1lbnRNZXRob2RPckNndSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBjeWNsaXN0U3RhdGUgPSB0aGlzLmN5Y2xpc3RTdGF0ZSgpXG4gICAgaWYgKFxuICAgICAgJ2N5Y2xpc3QnIGluIGN5Y2xpc3RTdGF0ZSAmJlxuICAgICAgKGN5Y2xpc3RTdGF0ZS5jeWNsaXN0LnJvbGUgPT0gJ2d1ZXN0JyB8fFxuICAgICAgICBjeWNsaXN0U3RhdGUuY3ljbGlzdC5yZWdpc3RyYXRpb25zPy5kYXRhPy5bMF0/LnJvbGUgPT0gJ2d1ZXN0JylcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoY3ljbGlzdFN0YXRlLnN0YXRlICE9PSAndW5rbm93bicgJiYgY3ljbGlzdFN0YXRlLnN0YXRlICE9PSAnZXJyb3InKSB7XG4gICAgICBpZiAoXG4gICAgICAgICFjeWNsaXN0U3RhdGUuY3ljbGlzdC5yZWdpc3RyYXRpb25zPy5kYXRhIVswXS50ZXJtc192YWxpZGF0ZWQgfHxcbiAgICAgICAgIWN5Y2xpc3RTdGF0ZS5jeWNsaXN0LnJlZ2lzdHJhdGlvbnM/LmRhdGEhWzBdLmN1c3RvbWVyPy5pbnZvaWNlX3NldHRpbmdzXG4gICAgICAgICAgLmRlZmF1bHRfcGF5bWVudF9tZXRob2RcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyByZXF1ZXN0ZWQgYWNjb3VudCBkZWxldGlvblxuICAgKiBAcmV0dXJucyB0cnVlIGlmIGRlbGV0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBwdWJsaWMgaGFzUmVxdWVzdGVkRGVsZXRpb24oKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gdGhpcy5jeWNsaXN0U3RhdGUoKVxuICAgIGlmIChjdXJyZW50U3RhdGUuc3RhdGUgPT09ICdkZWxldGlvbl9yZXF1ZXN0ZWQnKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBjdXJyZW50U3RhdGUuc3RhdGUgPT09ICd1bmNvbmZpcm1lZCcgJiZcbiAgICAgIGN1cnJlbnRTdGF0ZS5kZWxldGlvblJlcXVlc3RlZFxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRU8sSUFBTSxZQUFZLElBQUksZUFBdUIsVUFBVTs7O0FDSXhELElBQU8sMkJBQVAsTUFBK0I7RUFDakMsVUFBVSxHQUFTO0FBQ2YsV0FBTyxtQkFBbUIsQ0FBQztFQUMvQjtFQUNBLFlBQVksR0FBUztBQUNqQixXQUFPLG1CQUFtQixDQUFDO0VBQy9CO0VBQ0EsVUFBVSxHQUFTO0FBQ2YsV0FBTyxtQkFBbUIsQ0FBQztFQUMvQjtFQUNBLFlBQVksR0FBUztBQUNqQixXQUFPLG1CQUFtQixDQUFDO0VBQy9COzs7O0FDa0JFLElBQU8sZ0JBQVAsTUFBb0I7RUFnQzFCLFlBQVksRUFBRSxhQUFhLFNBQVMsVUFBVSxhQUFhLGFBQWEsU0FBUyxVQUFVLFVBQVUsZ0JBQWUsSUFBOEIsQ0FBQSxHQUFFO0FBQzVJLFFBQUksU0FBUztBQUNULFdBQUssVUFBVTtJQUNuQjtBQUNBLFFBQUksYUFBYSxRQUFXO0FBQ3hCLFdBQUssV0FBVztJQUNwQjtBQUNBLFFBQUksYUFBYSxRQUFXO0FBQ3hCLFdBQUssV0FBVztJQUNwQjtBQUNBLFFBQUksZ0JBQWdCLFFBQVc7QUFDM0IsV0FBSyxjQUFjO0lBQ3ZCO0FBQ0EsUUFBSSxhQUFhLFFBQVc7QUFDeEIsV0FBSyxXQUFXO0lBQ3BCO0FBQ0EsUUFBSSxvQkFBb0IsUUFBVztBQUMvQixXQUFLLGtCQUFrQjtJQUMzQjtBQUNBLFFBQUksU0FBUztBQUNULFdBQUssVUFBVTtJQUNuQjtB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
