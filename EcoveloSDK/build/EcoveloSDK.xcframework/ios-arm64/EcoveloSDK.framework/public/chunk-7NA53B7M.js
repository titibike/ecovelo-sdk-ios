import {
  GESTURE_CONTROLLER
} from "./chunk-J5JVDPFK.js";

// node_modules/@ionic/core/dist/esm/index-CfgBF1SE.js
var addEventListener = (el, eventName, callback, opts) => {
  const listenerOpts = supportsPassive(el) ? {
    capture: false,
    passive: !!opts.passive
  } : false;
  let add;
  let remove;
  if (el["__zone_symbol__addEventListener"]) {
    add = "__zone_symbol__addEventListener";
    remove = "__zone_symbol__removeEventListener";
  } else {
    add = "addEventListener";
    remove = "removeEventListener";
  }
  el[add](eventName, callback, listenerOpts);
  return () => {
    el[remove](eventName, callback, listenerOpts);
  };
};
var supportsPassive = (node) => {
  if (_sPassive === void 0) {
    try {
      const opts = Object.defineProperty({}, "passive", {
        get: () => {
          _sPassive = true;
        }
      });
      node.addEventListener("optsTest", () => {
        return;
      }, opts);
    } catch (e) {
      _sPassive = false;
    }
  }
  return !!_sPassive;
};
var _sPassive;
var MOUSE_WAIT = 2e3;
var createPointerEvents = (el, pointerDown, pointerMove, pointerUp, options) => {
  let rmTouchStart;
  let rmTouchMove;
  let rmTouchEnd;
  let rmTouchCancel;
  let rmMouseStart;
  let rmMouseMove;
  let rmMouseUp;
  let lastTouchEvent = 0;
  const handleTouchStart = (ev) => {
    lastTouchEvent = Date.now() + MOUSE_WAIT;
    if (!pointerDown(ev)) {
      return;
    }
    if (!rmTouchMove && pointerMove) {
      rmTouchMove = addEventListener(el, "touchmove", pointerMove, options);
    }
    if (!rmTouchEnd) {
      rmTouchEnd = addEventListener(ev.target, "touchend", handleTouchEnd, options);
    }
    if (!rmTouchCancel) {
      rmTouchCancel = addEventListener(ev.target, "touchcancel", handleTouchEnd, options);
    }
  };
  const handleMouseDown = (ev) => {
    if (lastTouchEvent > Date.now()) {
      return;
    }
    if (!pointerDown(ev)) {
      return;
    }
    if (!rmMouseMove && pointerMove) {
      rmMouseMove = addEventListener(getDocument(el), "mousemove", pointerMove, options);
    }
    if (!rmMouseUp) {
      rmMouseUp = addEventListener(getDocument(el), "mouseup", handleMouseUp, options);
    }
  };
  const handleTouchEnd = (ev) => {
    stopTouch();
    if (pointerUp) {
      pointerUp(ev);
    }
  };
  const handleMouseUp = (ev) => {
    stopMouse();
    if (pointerUp) {
      pointerUp(ev);
    }
  };
  const stopTouch = () => {
    if (rmTouchMove) {
      rmTouchMove();
    }
    if (rmTouchEnd) {
      rmTouchEnd();
    }
    if (rmTouchCancel) {
      rmTouchCancel();
    }
    rmTouchMove = rmTouchEnd = rmTouchCancel = void 0;
  };
  const stopMouse = () => {
    if (rmMouseMove) {
      rmMouseMove();
    }
    if (rmMouseUp) {
      rmMouseUp();
    }
    rmMouseMove = rmMouseUp = void 0;
  };
  const stop = () => {
    stopTouch();
    stopMouse();
  };
  const enable = (isEnabled = true) => {
    if (!isEnabled) {
      if (rmTouchStart) {
        rmTouchStart();
      }
      if (rmMouseStart) {
        rmMouseStart();
      }
      rmTouchStart = rmMouseStart = void 0;
      stop();
    } else {
      if (!rmTouchStart) {
        rmTouchStart = addEventListener(el, "touchstart", handleTouchStart, options);
      }
      if (!rmMouseStart) {
        rmMouseStart = addEventListener(el, "mousedown", handleMouseDown, options);
      }
    }
  };
  const destroy = () => {
    enable(false);
    pointerUp = pointerMove = pointerDown = void 0;
  };
  return {
    enable,
    stop,
    destroy
  };
};
var getDocument = (node) => {
  return node instanceof Document ? node : node.ownerDocument;
};
var createPanRecognizer = (direction, thresh, maxAngle) => {
  const radians = maxAngle * (Math.PI / 180);
  const isDirX = direction === "x";
  const maxCosine = Math.cos(radians);
  const threshold = thresh * thresh;
  let startX = 0;
  let startY = 0;
  let dirty = false;
  let isPan = 0;
  return {
    start(x, y) {
      startX = x;
      startY = y;
      isPan = 0;
      dirty = true;
    },
    detect(x, y) {
      if (!dirty) {
        return false;
      }
      const deltaX = x - startX;
      const deltaY = y - startY;
      const distance = deltaX * deltaX + deltaY * deltaY;
      if (distance < threshold) {
        return false;
      }
      const hypotenuse = Math.sqrt(distance);
      const cosine = (isDirX ? deltaX : deltaY) / hypotenuse;
      if (cosine > maxCosine) {
        isPan = 1;
      } else if (cosine < -maxCosine) {
        isPan = -1;
      } else {
        isPan = 0;
      }
      dirty = false;
      return true;
    },
    isGesture() {
      return isPan !== 0;
    },
    getDirection() {
      return isPan;
    }
  };
};
var createGesture = (config) => {
  let hasCapturedPan = false;
  let hasStartedPan = false;
  let hasFiredStart = true;
  let isMoveQueued = false;
  const finalConfig = Object.assign({
    disableScroll: false,
    direction: "x",
    gesturePriority: 0,
    passive: true,
    maxAngle: 40,
    threshold: 10
  }, config);
  const canStart = finalConfig.canStart;
  const onWillStart = finalConfig.onWillStart;
  const onStart = finalConfig.onStart;
  const onEnd = finalConfig.onEnd;
  const notCaptured = finalConfig.notCaptured;
  const onMove = finalConfig.onMove;
  const threshold = finalConfig.threshold;
  const passive = finalConfig.passive;
  const blurOnStart = finalConfig.blurOnStart;
  const detail = {
    type: "pan",
    startX: 0,
    startY: 0,
    startTime: 0,
    currentX: 0,
    currentY: 0,
    velocityX: 0,
    velocityY: 0,
    deltaX: 0,
    deltaY: 0,
    currentTime: 0,
    event: void 0,
    data: void 0
  };
  const pan = createPanRecognizer(finalConfig.direction, finalConfig.threshold, finalConfig.maxAngle);
  const gesture = GESTURE_CONTROLLER.createGesture({
    name: config.gestureName,
    priority: config.gesturePriority,
    disableScroll: config.disableScroll
  });
  const pointerDown = (ev) => {
    const timeStamp = now(ev);
    if (hasStartedPan || !hasFiredStart) {
      return false;
    }
    updateDetail(ev, detail);
    detail.startX = detail.currentX;
    detail.startY = detail.currentY;
    detail.startTime = detail.currentTime = timeStamp;
    detail.velocityX = detail.velocityY = detail.deltaX = detail.deltaY = 0;
    detail.event = ev;
    if (canStart && canStart(detail) === false) {
      return false;
    }
    gesture.release();
    if (!gesture.start()) {
      return false;
    }
    hasStartedPan = true;
    if (threshold === 0) {
      return tryToCapturePan();
    }
    pan.start(detail.startX, detail.startY);
    return true;
  };
  const pointerMove = (ev) => {
    if (hasCapturedPan) {
      if (!isMoveQueued && hasFiredStart) {
        isMoveQueued = true;
        calcGestureData(detail, ev);
        requestAnimationFrame(fireOnMove);
      }
      return;
    }
    calcGestureData(detail, ev);
    if (pan.detect(detail.currentX, detail.currentY)) {
      if (!pan.isGesture() || !tryToCapturePan()) {
        abortGesture();
      }
    }
  };
  const fireOnMove = () => {
    if (!hasCapturedPan) {
      return;
    }
    isMoveQueued = false;
    if (onMove) {
      onMove(detail);
    }
  };
  const tryToCapturePan = () => {
    if (!gesture.capture()) {
      return false;
    }
    hasCapturedPan = true;
    hasFiredStart = false;
    detail.startX = detail.currentX;
    detail.startY = detail.currentY;
    detail.startTime = detail.currentTime;
    if (onWillStart) {
      onWillStart(detail).then(fireOnStart);
    } else {
      fireOnStart();
    }
    return true;
  };
  const blurActiveElement = () => {
    if (typeof document !== "undefined") {
      const activeElement = document.activeElement;
      if (activeElement === null || activeElement === void 0 ? void 0 : activeElement.blur) {
        activeElement.blur();
      }
    }
  };
  const fireOnStart = () => {
    if (blurOnStart) {
      blurActiveElement();
    }
    if (onStart) {
      onStart(detail);
    }
    hasFiredStart = true;
  };
  const reset = () => {
    hasCapturedPan = false;
    hasStartedPan = false;
    isMoveQueued = false;
    hasFiredStart = true;
    gesture.release();
  };
  const pointerUp = (ev) => {
    const tmpHasCaptured = hasCapturedPan;
    const tmpHasFiredStart = hasFiredStart;
    reset();
    if (!tmpHasFiredStart) {
      return;
    }
    calcGestureData(detail, ev);
    if (tmpHasCaptured) {
      if (onEnd) {
        onEnd(detail);
      }
      return;
    }
    if (notCaptured) {
      notCaptured(detail);
    }
  };
  const pointerEvents = createPointerEvents(finalConfig.el, pointerDown, pointerMove, pointerUp, {
    passive
  });
  const abortGesture = () => {
    reset();
    pointerEvents.stop();
    if (notCaptured) {
      notCaptured(detail);
    }
  };
  return {
    enable(enable = true) {
      if (!enable) {
        if (hasCapturedPan) {
          pointerUp(void 0);
        }
        reset();
      }
      pointerEvents.enable(enable);
    },
    destroy() {
      gesture.destroy();
      pointerEvents.destroy();
    }
  };
};
var calcGestureData = (detail, ev) => {
  if (!ev) {
    return;
  }
  const prevX = detail.currentX;
  const prevY = detail.currentY;
  const prevT = detail.currentTime;
  updateDetail(ev, detail);
  const currentX = detail.currentX;
  const currentY = detail.currentY;
  const timestamp = detail.currentTime = now(ev);
  const timeDelta = timestamp - prevT;
  if (timeDelta > 0 && timeDelta < 100) {
    const velocityX = (currentX - prevX) / timeDelta;
    const velocityY = (currentY - prevY) / timeDelta;
    detail.velocityX = velocityX * 0.7 + detail.velocityX * 0.3;
    detail.velocityY = velocityY * 0.7 + detail.velocityY * 0.3;
  }
  detail.deltaX = currentX - detail.startX;
  detail.deltaY = currentY - detail.startY;
  detail.event = ev;
};
var updateDetail = (ev, detail) => {
  let x = 0;
  let y = 0;
  if (ev) {
    const changedTouches = ev.changedTouches;
    if (changedTouches && changedTouches.length > 0) {
      const touch = changedTouches[0];
      x = touch.clientX;
      y = touch.clientY;
    } else if (ev.pageX !== void 0) {
      x = ev.pageX;
      y = ev.pageY;
    }
  }
  detail.currentX = x;
  detail.currentY = y;
};
var now = (ev) => {
  return ev.timeStamp || Date.now();
};

export {
  createGesture
};
/*! Bundled license information:

@ionic/core/dist/esm/index-CfgBF1SE.js:
  (*!
   * (C) Ionic http://ionicframework.com - MIT License
   *)
*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pbmRleC1DZmdCRjFTRS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgRyBhcyBHRVNUVVJFX0NPTlRST0xMRVIgfSBmcm9tICcuL2dlc3R1cmUtY29udHJvbGxlci1CVEVPczFhdC5qcyc7XG5jb25zdCBhZGRFdmVudExpc3RlbmVyID0gKGVsLFxuLy8gVE9ETyhGVy0yODMyKTogdHlwZVxuZXZlbnROYW1lLCBjYWxsYmFjaywgb3B0cykgPT4ge1xuICAvLyB1c2UgZXZlbnQgbGlzdGVuZXIgb3B0aW9ucyB3aGVuIHN1cHBvcnRlZFxuICAvLyBvdGhlcndpc2UgaXQncyBqdXN0IGEgYm9vbGVhbiBmb3IgdGhlIFwiY2FwdHVyZVwiIGFyZ1xuICBjb25zdCBsaXN0ZW5lck9wdHMgPSBzdXBwb3J0c1Bhc3NpdmUoZWwpID8ge1xuICAgIGNhcHR1cmU6IGZhbHNlLFxuICAgIHBhc3NpdmU6ICEhb3B0cy5wYXNzaXZlXG4gIH0gOiBmYWxzZTtcbiAgbGV0IGFkZDtcbiAgbGV0IHJlbW92ZTtcbiAgaWYgKGVsWydfX3pvbmVfc3ltYm9sX19hZGRFdmVudExpc3RlbmVyJ10pIHtcbiAgICBhZGQgPSAnX196b25lX3N5bWJvbF9fYWRkRXZlbnRMaXN0ZW5lcic7XG4gICAgcmVtb3ZlID0gJ19fem9uZV9zeW1ib2xfX3JlbW92ZUV2ZW50TGlzdGVuZXInO1xuICB9IGVsc2Uge1xuICAgIGFkZCA9ICdhZGRFdmVudExpc3RlbmVyJztcbiAgICByZW1vdmUgPSAncmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG4gIH1cbiAgZWxbYWRkXShldmVudE5hbWUsIGNhbGxiYWNrLCBsaXN0ZW5lck9wdHMpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGVsW3JlbW92ZV0oZXZlbnROYW1lLCBjYWxsYmFjaywgbGlzdGVuZXJPcHRzKTtcbiAgfTtcbn07XG5jb25zdCBzdXBwb3J0c1Bhc3NpdmUgPSBub2RlID0+IHtcbiAgaWYgKF9zUGFzc2l2ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9wdHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuICAgICAgICBnZXQ6ICgpID0+IHtcbiAgICAgICAgICBfc1Bhc3NpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignb3B0c1Rlc3QnLCAoKSA9PiB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0sIG9wdHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIF9zUGFzc2l2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gISFfc1Bhc3NpdmU7XG59O1xubGV0IF9zUGFzc2l2ZTtcbmNvbnN0IE1PVVNFX1dBSVQgPSAyMDAwO1xuLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbmNvbnN0IGNyZWF0ZVBvaW50ZXJFdmVudHMgPSAoZWwsIHBvaW50ZXJEb3duLCBwb2ludGVyTW92ZSwgcG9pbnRlclVwLCBvcHRpb25zKSA9PiB7XG4gIGxldCBybVRvdWNoU3RhcnQ7XG4gIGxldCBybVRvdWNoTW92ZTtcbiAgbGV0IHJtVG91Y2hFbmQ7XG4gIGxldCBybVRvdWNoQ2FuY2VsO1xuICBsZXQgcm1Nb3VzZVN0YXJ0O1xuICBsZXQgcm1Nb3VzZU1vdmU7XG4gIGxldCBybU1vdXNlVXA7XG4gIGxldCBsYXN0VG91Y2hFdmVudCA9IDA7XG4gIGNvbnN0IGhhbmRsZVRvdWNoU3RhcnQgPSBldiA9PiB7XG4gICAgbGFzdFRvdWNoRXZlbnQgPSBEYXRlLm5vdygpICsgTU9VU0VfV0FJVDtcbiAgICBpZiAoIXBvaW50ZXJEb3duKGV2KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXJtVG91Y2hNb3ZlICYmIHBvaW50ZXJNb3ZlKSB7XG4gICAgICBybVRvdWNoTW92ZSA9IGFkZEV2ZW50TGlzdGVuZXIoZWwsICd0b3VjaG1vdmUnLCBwb2ludGVyTW92ZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2ZW50cyBhcmUgZGlzcGF0Y2hlZCBvbiB0aGUgZWxlbWVudCB0aGF0IGlzIHRhcHBlZCBhbmQgYnViYmxlIHVwIHRvXG4gICAgICogdGhlIHJlZmVyZW5jZSBlbGVtZW50IGluIHRoZSBnZXN0dXJlLiBJbiB0aGUgZXZlbnQgdGhhdCB0aGUgZWxlbWVudCB0aGlzXG4gICAgICogZXZlbnQgd2FzIGZpcnN0IGRpc3BhdGNoZWQgb24gaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00sIHRoZSBldmVudCB3aWxsIG5vXG4gICAgICogbG9uZ2VyIGJ1YmJsZSB1cCB0byBvdXIgcmVmZXJlbmNlIGVsZW1lbnQuIFRoaXMgbGVhdmVzIHRoZSBnZXN0dXJlIGluIGFuXG4gICAgICogdW51c2FibGUgc3RhdGUuIFRvIGFjY291bnQgZm9yIHRoaXMsIHRoZSB0b3VjaGVuZCBhbmQgdG91Y2hjYW5jZWwgbGlzdGVuZXJzXG4gICAgICogc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSBldmVudCB0YXJnZXQgc28gdGhhdCB0aGV5IHN0aWxsIGZpcmUgZXZlbiBpZiB0aGUgdGFyZ2V0XG4gICAgICogaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00uXG4gICAgICovXG4gICAgaWYgKCFybVRvdWNoRW5kKSB7XG4gICAgICBybVRvdWNoRW5kID0gYWRkRXZlbnRMaXN0ZW5lcihldi50YXJnZXQsICd0b3VjaGVuZCcsIGhhbmRsZVRvdWNoRW5kLCBvcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKCFybVRvdWNoQ2FuY2VsKSB7XG4gICAgICBybVRvdWNoQ2FuY2VsID0gYWRkRXZlbnRMaXN0ZW5lcihldi50YXJnZXQsICd0b3VjaGNhbmNlbCcsIGhhbmRsZVRvdWNoRW5kLCBvcHRpb25zKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IGV2ID0+IHtcbiAgICBpZiAobGFzdFRvdWNoRXZlbnQgPiBEYXRlLm5vdygpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcG9pbnRlckRvd24oZXYpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcm1Nb3VzZU1vdmUgJiYgcG9pbnRlck1vdmUpIHtcbiAgICAgIHJtTW91c2VNb3ZlID0gYWRkRXZlbnRMaXN0ZW5lcihnZXREb2N1bWVudChlbCksICdtb3VzZW1vdmUnLCBwb2ludGVyTW92ZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmICghcm1Nb3VzZVVwKSB7XG4gICAgICBybU1vdXNlVXAgPSBhZGRFdmVudExpc3RlbmVyKGdldERvY3VtZW50KGVsKSwgJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwLCBvcHRpb25zKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZVRvdWNoRW5kID0gZXYgPT4ge1xuICAgIHN0b3BUb3VjaCgpO1xuICAgIGlmIChwb2ludGVyVXApIHtcbiAgICAgIHBvaW50ZXJVcChldik7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVNb3VzZVVwID0gZXYgPT4ge1xuICAgIHN0b3BNb3VzZSgpO1xuICAgIGlmIChwb2ludGVyVXApIHtcbiAgICAgIHBvaW50ZXJVcChldik7XG4gICAgfVxuICB9O1xuICBjb25zdCBzdG9wVG91Y2ggPSAoKSA9PiB7XG4gICAgaWYgKHJtVG91Y2hNb3ZlKSB7XG4gICAgICBybVRvdWNoTW92ZSgpO1xuICAgIH1cbiAgICBpZiAocm1Ub3VjaEVuZCkge1xuICAgICAgcm1Ub3VjaEVuZCgpO1xuICAgIH1cbiAgICBpZiAocm1Ub3VjaENhbmNlbCkge1xuICAgICAgcm1Ub3VjaENhbmNlbCgpO1xuICAgIH1cbiAgICBybVRvdWNoTW92ZSA9IHJtVG91Y2hFbmQgPSBybVRvdWNoQ2FuY2VsID0gdW5kZWZpbmVkO1xuICB9O1xuICBjb25zdCBzdG9wTW91c2UgPSAoKSA9PiB7XG4gICAgaWYgKHJtTW91c2VNb3ZlKSB7XG4gICAgICBybU1vdXNlTW92ZSgpO1xuICAgIH1cbiAgICBpZiAocm1Nb3VzZVVwKSB7XG4gICAgICBybU1vdXNlVXAoKTtcbiAgICB9XG4gICAgcm1Nb3VzZU1vdmUgPSBybU1vdXNlVXAgPSB1bmRlZmluZWQ7XG4gIH07XG4gIGNvbnN0IHN0b3AgPSAoKSA9PiB7XG4gICAgc3RvcFRvdWNoKCk7XG4gICAgc3RvcE1vdXNlKCk7XG4gIH07XG4gIGNvbnN0IGVuYWJsZSA9IChpc0VuYWJsZWQgPSB0cnVlKSA9PiB7XG4gICAgaWYgKCFpc0VuYWJsZWQpIHtcbiAgICAgIGlmIChybVRvdWNoU3RhcnQpIHtcbiAgICAgICAgcm1Ub3VjaFN0YXJ0KCk7XG4gICAgICB9XG4gICAgICBpZiAocm1Nb3VzZVN0YXJ0KSB7XG4gICAgICAgIHJtTW91c2VTdGFydCgpO1xuICAgICAgfVxuICAgICAgcm1Ub3VjaFN0YXJ0ID0gcm1Nb3VzZVN0YXJ0ID0gdW5kZWZpbmVkO1xuICAgICAgc3RvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXJtVG91Y2hTdGFydCkge1xuICAgICAgICBybVRvdWNoU3RhcnQgPSBhZGRFdmVudExpc3RlbmVyKGVsLCAndG91Y2hzdGFydCcsIGhhbmRsZVRvdWNoU3RhcnQsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgaWYgKCFybU1vdXNlU3RhcnQpIHtcbiAgICAgICAgcm1Nb3VzZVN0YXJ0ID0gYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ21vdXNlZG93bicsIGhhbmRsZU1vdXNlRG93biwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xuICAgIGVuYWJsZShmYWxzZSk7XG4gICAgcG9pbnRlclVwID0gcG9pbnRlck1vdmUgPSBwb2ludGVyRG93biA9IHVuZGVmaW5lZDtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBlbmFibGUsXG4gICAgc3RvcCxcbiAgICBkZXN0cm95XG4gIH07XG59O1xuY29uc3QgZ2V0RG9jdW1lbnQgPSBub2RlID0+IHtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBEb2N1bWVudCA/IG5vZGUgOiBub2RlLm93bmVyRG9jdW1lbnQ7XG59O1xuY29uc3QgY3JlYXRlUGFuUmVjb2duaXplciA9IChkaXJlY3Rpb24sIHRocmVzaCwgbWF4QW5nbGUpID0+IHtcbiAgY29uc3QgcmFkaWFucyA9IG1heEFuZ2xlICogKE1hdGguUEkgLyAxODApO1xuICBjb25zdCBpc0RpclggPSBkaXJlY3Rpb24gPT09ICd4JztcbiAgY29uc3QgbWF4Q29zaW5lID0gTWF0aC5jb3MocmFkaWFucyk7XG4gIGNvbnN0IHRocmVzaG9sZCA9IHRocmVzaCAqIHRocmVzaDtcbiAgbGV0IHN0YXJ0WCA9IDA7XG4gIGxldCBzdGFydFkgPSAwO1xuICBsZXQgZGlydHkgPSBmYWxzZTtcbiAgbGV0IGlzUGFuID0gMDtcbiAgcmV0dXJuIHtcbiAgICBzdGFydCh4LCB5KSB7XG4gICAgICBzdGFydFggPSB4O1xuICAgICAgc3RhcnRZID0geTtcbiAgICAgIGlzUGFuID0gMDtcbiAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICB9LFxuICAgIGRldGVjdCh4LCB5KSB7XG4gICAgICBpZiAoIWRpcnR5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlbHRhWCA9IHggLSBzdGFydFg7XG4gICAgICBjb25zdCBkZWx0YVkgPSB5IC0gc3RhcnRZO1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSBkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVk7XG4gICAgICBpZiAoZGlzdGFuY2UgPCB0aHJlc2hvbGQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgaHlwb3RlbnVzZSA9IE1hdGguc3FydChkaXN0YW5jZSk7XG4gICAgICBjb25zdCBjb3NpbmUgPSAoaXNEaXJYID8gZGVsdGFYIDogZGVsdGFZKSAvIGh5cG90ZW51c2U7XG4gICAgICBpZiAoY29zaW5lID4gbWF4Q29zaW5lKSB7XG4gICAgICAgIGlzUGFuID0gMTtcbiAgICAgIH0gZWxzZSBpZiAoY29zaW5lIDwgLW1heENvc2luZSkge1xuICAgICAgICBpc1BhbiA9IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNQYW4gPSAwO1xuICAgICAgfVxuICAgICAgZGlydHkgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaXNHZXN0dXJlKCkge1xuICAgICAgcmV0dXJuIGlzUGFuICE9PSAwO1xuICAgIH0sXG4gICAgZ2V0RGlyZWN0aW9uKCkge1xuICAgICAgcmV0dXJuIGlzUGFuO1xuICAgIH1cbiAgfTtcbn07XG5cbi8vIFRPRE8oRlctMjgzMik6IHR5cGVzXG5jb25zdCBjcmVhdGVHZXN0dXJlID0gY29uZmlnID0+IHtcbiAgbGV0IGhhc0NhcHR1cmVkUGFuID0gZmFsc2U7XG4gIGxldCBoYXNTdGFydGVkUGFuID0gZmFsc2U7XG4gIGxldCBoYXNGaXJlZFN0YXJ0ID0gdHJ1ZTtcbiAgbGV0IGlzTW92ZVF1ZXVlZCA9IGZhbHNlO1xuICBjb25zdCBmaW5hbENvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGRpc2FibGVTY3JvbGw6IGZhbHNlLFxuICAgIGRpcmVjdGlvbjogJ3gnLFxuICAgIGdlc3R1cmVQcmlvcml0eTogMCxcbiAgICBwYXNzaXZlOiB0cnVlLFxuICAgIG1heEFuZ2xlOiA0MCxcbiAgICB0aHJlc2hvbGQ6IDEwXG4gIH0sIGNvbmZpZyk7XG4gIGNvbnN0IGNhblN0YXJ0ID0gZmluYWxDb25maWcuY2FuU3RhcnQ7XG4gIGNvbnN0IG9uV2lsbFN0YXJ0ID0gZmluYWxDb25maWcub25XaWxsU3RhcnQ7XG4gIGNvbnN0IG9uU3RhcnQgPSBmaW5hbENvbmZpZy5vblN0YXJ0O1xuICBjb25zdCBvbkVuZCA9IGZpbmFsQ29uZmlnLm9uRW5kO1xuICBjb25zdCBub3RDYXB0dXJlZCA9IGZpbmFsQ29uZmlnLm5vdENhcHR1cmVkO1xuICBjb25zdCBvbk1vdmUgPSBmaW5hbENvbmZpZy5vbk1vdmU7XG4gIGNvbnN0IHRocmVzaG9sZCA9IGZpbmFsQ29uZmlnLnRocmVzaG9sZDtcbiAgY29uc3QgcGFzc2l2ZSA9IGZpbmFsQ29uZmlnLnBhc3NpdmU7XG4gIGNvbnN0IGJsdXJPblN0YXJ0ID0gZmluYWxDb25maWcuYmx1ck9uU3RhcnQ7XG4gIGNvbnN0IGRldGFpbCA9IHtcbiAgICB0eXBlOiAncGFuJyxcbiAgICBzdGFydFg6IDAsXG4gICAgc3RhcnRZOiAwLFxuICAgIHN0YXJ0VGltZTogMCxcbiAgICBjdXJyZW50WDogMCxcbiAgICBjdXJyZW50WTogMCxcbiAgICB2ZWxvY2l0eVg6IDAsXG4gICAgdmVsb2NpdHlZOiAwLFxuICAgIGRlbHRhWDogMCxcbiAgICBkZWx0YVk6IDAsXG4gICAgY3VycmVudFRpbWU6IDAsXG4gICAgZXZlbnQ6IHVuZGVmaW5lZCxcbiAgICBkYXRhOiB1bmRlZmluZWRcbiAgfTtcbiAgY29uc3QgcGFuID0gY3JlYXRlUGFuUmVjb2duaXplcihmaW5hbENvbmZpZy5kaXJlY3Rpb24sIGZpbmFsQ29uZmlnLnRocmVzaG9sZCwgZmluYWxDb25maWcubWF4QW5nbGUpO1xuICBjb25zdCBnZXN0dXJlID0gR0VTVFVSRV9DT05UUk9MTEVSLmNyZWF0ZUdlc3R1cmUoe1xuICAgIG5hbWU6IGNvbmZpZy5nZXN0dXJlTmFtZSxcbiAgICBwcmlvcml0eTogY29uZmlnLmdlc3R1cmVQcmlvcml0eSxcbiAgICBkaXNhYmxlU2Nyb2xsOiBjb25maWcuZGlzYWJsZVNjcm9sbFxuICB9KTtcbiAgY29uc3QgcG9pbnRlckRvd24gPSBldiA9PiB7XG4gICAgY29uc3QgdGltZVN0YW1wID0gbm93KGV2KTtcbiAgICBpZiAoaGFzU3RhcnRlZFBhbiB8fCAhaGFzRmlyZWRTdGFydCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB1cGRhdGVEZXRhaWwoZXYsIGRldGFpbCk7XG4gICAgZGV0YWlsLnN0YXJ0WCA9IGRldGFpbC5jdXJyZW50WDtcbiAgICBkZXRhaWwuc3RhcnRZID0gZGV0YWlsLmN1cnJlbnRZO1xuICAgIGRldGFpbC5zdGFydFRpbWUgPSBkZXRhaWwuY3VycmVudFRpbWUgPSB0aW1lU3RhbXA7XG4gICAgZGV0YWlsLnZlbG9jaXR5WCA9IGRldGFpbC52ZWxvY2l0eVkgPSBkZXRhaWwuZGVsdGFYID0gZGV0YWlsLmRlbHRhWSA9IDA7XG4gICAgZGV0YWlsLmV2ZW50ID0gZXY7XG4gICAgLy8gQ2hlY2sgaWYgZ2VzdHVyZSBjYW4gc3RhcnRcbiAgICBpZiAoY2FuU3RhcnQgJiYgY2FuU3RhcnQoZGV0YWlsKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gUmVsZWFzZSBmYWxsYmFja1xuICAgIGdlc3R1cmUucmVsZWFzZSgpO1xuICAgIC8vIFN0YXJ0IGdlc3R1cmVcbiAgICBpZiAoIWdlc3R1cmUuc3RhcnQoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBoYXNTdGFydGVkUGFuID0gdHJ1ZTtcbiAgICBpZiAodGhyZXNob2xkID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ5VG9DYXB0dXJlUGFuKCk7XG4gICAgfVxuICAgIHBhbi5zdGFydChkZXRhaWwuc3RhcnRYLCBkZXRhaWwuc3RhcnRZKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgcG9pbnRlck1vdmUgPSBldiA9PiB7XG4gICAgLy8gZmFzdCBwYXRoLCBpZiBnZXN0dXJlIGlzIGN1cnJlbnRseSBjYXB0dXJlZFxuICAgIC8vIGRvIG1pbmltdW0gam9iIHRvIGdldCB1c2VyLWxhbmQgZXZlbiBkaXNwYXRjaGVkXG4gICAgaWYgKGhhc0NhcHR1cmVkUGFuKSB7XG4gICAgICBpZiAoIWlzTW92ZVF1ZXVlZCAmJiBoYXNGaXJlZFN0YXJ0KSB7XG4gICAgICAgIGlzTW92ZVF1ZXVlZCA9IHRydWU7XG4gICAgICAgIGNhbGNHZXN0dXJlRGF0YShkZXRhaWwsIGV2KTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZpcmVPbk1vdmUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBnZXN0dXJlIGlzIGN1cnJlbnRseSBiZWluZyBkZXRlY3RlZFxuICAgIGNhbGNHZXN0dXJlRGF0YShkZXRhaWwsIGV2KTtcbiAgICBpZiAocGFuLmRldGVjdChkZXRhaWwuY3VycmVudFgsIGRldGFpbC5jdXJyZW50WSkpIHtcbiAgICAgIGlmICghcGFuLmlzR2VzdHVyZSgpIHx8ICF0cnlUb0NhcHR1cmVQYW4oKSkge1xuICAgICAgICBhYm9ydEdlc3R1cmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IGZpcmVPbk1vdmUgPSAoKSA9PiB7XG4gICAgLy8gU2luY2UgZmlyZU9uTW92ZSBpcyBjYWxsZWQgaW5zaWRlIGEgUkFGLCBvbkVuZCgpIG1pZ2h0IGJlIGNhbGxlZCxcbiAgICAvLyB3ZSBtdXN0IGRvdWJsZSBjaGVjayBoYXNDYXB0dXJlZFBhblxuICAgIGlmICghaGFzQ2FwdHVyZWRQYW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaXNNb3ZlUXVldWVkID0gZmFsc2U7XG4gICAgaWYgKG9uTW92ZSkge1xuICAgICAgb25Nb3ZlKGRldGFpbCk7XG4gICAgfVxuICB9O1xuICBjb25zdCB0cnlUb0NhcHR1cmVQYW4gPSAoKSA9PiB7XG4gICAgaWYgKCFnZXN0dXJlLmNhcHR1cmUoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBoYXNDYXB0dXJlZFBhbiA9IHRydWU7XG4gICAgaGFzRmlyZWRTdGFydCA9IGZhbHNlO1xuICAgIC8vIHJlc2V0IHN0YXJ0IHBvc2l0aW9uIHNpbmNlIHRoZSByZWFsIHVzZXItbGFuZCBldmVudCBzdGFydHMgaGVyZVxuICAgIC8vIElmIHRoZSBwYW4gZGV0ZWN0b3IgdGhyZXNob2xkIGlzIGJpZywgbm90IHJlc2V0dGluZyB0aGUgc3RhcnQgcG9zaXRpb25cbiAgICAvLyB3aWxsIGNhdXNlIGEganVtcCBpbiB0aGUgYW5pbWF0aW9uIGVxdWFsIHRvIHRoZSBkZXRlY3RvciB0aHJlc2hvbGQuXG4gICAgLy8gdGhlIGFycmF5IG9mIHBvc2l0aW9ucyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZ2VzdHVyZSB2ZWxvY2l0eSBkb2VzIG5vdFxuICAgIC8vIG5lZWQgdG8gYmUgY2xlYW5lZCwgbW9yZSBwb2ludHMgaW4gdGhlIHBvc2l0aW9ucyBhcnJheSBhbHdheXMgcmVzdWx0cyBpbiBhXG4gICAgLy8gbW9yZSBhY2N1cmF0ZSB2YWx1ZSBvZiB0aGUgdmVsb2NpdHkuXG4gICAgZGV0YWlsLnN0YXJ0WCA9IGRldGFpbC5jdXJyZW50WDtcbiAgICBkZXRhaWwuc3RhcnRZID0gZGV0YWlsLmN1cnJlbnRZO1xuICAgIGRldGFpbC5zdGFydFRpbWUgPSBkZXRhaWwuY3VycmVudFRpbWU7XG4gICAgaWYgKG9uV2lsbFN0YXJ0KSB7XG4gICAgICBvbldpbGxTdGFydChkZXRhaWwpLnRoZW4oZmlyZU9uU3RhcnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaXJlT25TdGFydCgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgYmx1ckFjdGl2ZUVsZW1lbnQgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQgPT09IG51bGwgfHwgYWN0aXZlRWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWN0aXZlRWxlbWVudC5ibHVyKSB7XG4gICAgICAgIGFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgZmlyZU9uU3RhcnQgPSAoKSA9PiB7XG4gICAgaWYgKGJsdXJPblN0YXJ0KSB7XG4gICAgICBibHVyQWN0aXZlRWxlbWVudCgpO1xuICAgIH1cbiAgICBpZiAob25TdGFydCkge1xuICAgICAgb25TdGFydChkZXRhaWwpO1xuICAgIH1cbiAgICBoYXNGaXJlZFN0YXJ0ID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgcmVzZXQgPSAoKSA9PiB7XG4gICAgaGFzQ2FwdHVyZWRQYW4gPSBmYWxzZTtcbiAgICBoYXNTdGFydGVkUGFuID0gZmFsc2U7XG4gICAgaXNNb3ZlUXVldWVkID0gZmFsc2U7XG4gICAgaGFzRmlyZWRTdGFydCA9IHRydWU7XG4gICAgZ2VzdHVyZS5yZWxlYXNlKCk7XG4gIH07XG4gIC8vIEVORCAqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIGNvbnN0IHBvaW50ZXJVcCA9IGV2ID0+IHtcbiAgICBjb25zdCB0bXBIYXNDYXB0dXJlZCA9IGhhc0NhcHR1cmVkUGFuO1xuICAgIGNvbnN0IHRtcEhhc0ZpcmVkU3RhcnQgPSBoYXNGaXJlZFN0YXJ0O1xuICAgIHJlc2V0KCk7XG4gICAgaWYgKCF0bXBIYXNGaXJlZFN0YXJ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGNHZXN0dXJlRGF0YShkZXRhaWwsIGV2KTtcbiAgICAvLyBUcnkgdG8gY2FwdHVyZSBwcmVzc1xuICAgIGlmICh0bXBIYXNDYXB0dXJlZCkge1xuICAgICAgaWYgKG9uRW5kKSB7XG4gICAgICAgIG9uRW5kKGRldGFpbCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIE5vdCBjYXB0dXJlZCBhbnkgZXZlbnRcbiAgICBpZiAobm90Q2FwdHVyZWQpIHtcbiAgICAgIG5vdENhcHR1cmVkKGRldGFpbCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwb2ludGVyRXZlbnRzID0gY3JlYXRlUG9pbnRlckV2ZW50cyhmaW5hbENvbmZpZy5lbCwgcG9pbnRlckRvd24sIHBvaW50ZXJNb3ZlLCBwb2ludGVyVXAsIHtcbiAgICBwYXNzaXZlXG4gIH0pO1xuICBjb25zdCBhYm9ydEdlc3R1cmUgPSAoKSA9PiB7XG4gICAgcmVzZXQoKTtcbiAgICBwb2ludGVyRXZlbnRzLnN0b3AoKTtcbiAgICBpZiAobm90Q2FwdHVyZWQpIHtcbiAgICAgIG5vdENhcHR1cmVkKGRldGFpbCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIGVuYWJsZShlbmFibGUgPSB0cnVlKSB7XG4gICAgICBpZiAoIWVuYWJsZSkge1xuICAgICAgICBpZiAoaGFzQ2FwdHVyZWRQYW4pIHtcbiAgICAgICAgICBwb2ludGVyVXAodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXNldCgpO1xuICAgICAgfVxuICAgICAgcG9pbnRlckV2ZW50cy5lbmFibGUoZW5hYmxlKTtcbiAgICB9LFxuICAgIGRlc3Ryb3koKSB7XG4gICAgICBnZXN0dXJlLmRlc3Ryb3koKTtcbiAgICAgIHBvaW50ZXJFdmVudHMuZGVzdHJveSgpO1xuICAgIH1cbiAgfTtcbn07XG5jb25zdCBjYWxjR2VzdHVyZURhdGEgPSAoZGV0YWlsLCBldikgPT4ge1xuICBpZiAoIWV2KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHByZXZYID0gZGV0YWlsLmN1cnJlbnRYO1xuICBjb25zdCBwcmV2WSA9IGRldGFpbC5jdXJyZW50WTtcbiAgY29uc3QgcHJldlQgPSBkZXRhaWwuY3VycmVudFRpbWU7XG4gIHVwZGF0ZURldGFpbChldiwgZGV0YWlsKTtcbiAgY29uc3QgY3VycmVudFggPSBkZXRhaWwuY3VycmVudFg7XG4gIGNvbnN0IGN1cnJlbnRZID0gZGV0YWlsLmN1cnJlbnRZO1xuICBjb25zdCB0aW1lc3RhbXAgPSBkZXRhaWwuY3VycmVudFRpbWUgPSBub3coZXYpO1xuICBjb25zdCB0aW1lRGVsdGEgPSB0aW1lc3RhbXAgLSBwcmV2VDtcbiAgaWYgKHRpbWVEZWx0YSA+IDAgJiYgdGltZURlbHRhIDwgMTAwKSB7XG4gICAgY29uc3QgdmVsb2NpdHlYID0gKGN1cnJlbnRYIC0gcHJldlgpIC8gdGltZURlbHRhO1xuICAgIGNvbnN0IHZlbG9jaXR5WSA9IChjdXJyZW50WSAtIHByZXZZKSAvIHRpbWVEZWx0YTtcbiAgICBkZXRhaWwudmVsb2NpdHlYID0gdmVsb2NpdHlYICogMC43ICsgZGV0YWlsLnZlbG9jaXR5WCAqIDAuMztcbiAgICBkZXRhaWwudmVsb2NpdHlZID0gdmVsb2NpdHlZICogMC43ICsgZGV0YWlsLnZlbG9jaXR5WSAqIDAuMztcbiAgfVxuICBkZXRhaWwuZGVsdGFYID0gY3VycmVudFggLSBkZXRhaWwuc3RhcnRYO1xuICBkZXRhaWwuZGVsdGFZID0gY3VycmVudFkgLSBkZXRhaWwuc3RhcnRZO1xuICBkZXRhaWwuZXZlbnQgPSBldjtcbn07XG5jb25zdCB1cGRhdGVEZXRhaWwgPSAoZXYsIGRldGFpbCkgPT4ge1xuICAvLyBnZXQgWCBjb29yZGluYXRlcyBmb3IgZWl0aGVyIGEgbW91c2UgY2xpY2tcbiAgLy8gb3IgYSB0b3VjaCBkZXBlbmRpbmcgb24gdGhlIGdpdmVuIGV2ZW50XG4gIGxldCB4ID0gMDtcbiAgbGV0IHkgPSAwO1xuICBpZiAoZXYpIHtcbiAgICBjb25zdCBjaGFuZ2VkVG91Y2hlcyA9IGV2LmNoYW5nZWRUb3VjaGVzO1xuICAgIGlmIChjaGFuZ2VkVG91Y2hlcyAmJiBjaGFuZ2VkVG91Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0b3VjaCA9IGNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgeCA9IHRvdWNoLmNsaWVudFg7XG4gICAgICB5ID0gdG91Y2guY2xpZW50WTtcbiAgICB9IGVsc2UgaWYgKGV2LnBhZ2VYICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHggPSBldi5wYWdlWDtcbiAgICAgIHkgPSBldi5wYWdlWTtcbiAgICB9XG4gIH1cbiAgZGV0YWlsLmN1cnJlbnRYID0geDtcbiAgZGV0YWlsLmN1cnJlbnRZID0geTtcbn07XG5jb25zdCBub3cgPSBldiA9PiB7XG4gIHJldHVybiBldi50aW1lU3RhbXAgfHwgRGF0ZS5ub3coKTtcbn07XG5leHBvcnQgeyBHRVNUVVJFX0NPTlRST0xMRVIsIGNyZWF0ZUdlc3R1cmUgfTsi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
