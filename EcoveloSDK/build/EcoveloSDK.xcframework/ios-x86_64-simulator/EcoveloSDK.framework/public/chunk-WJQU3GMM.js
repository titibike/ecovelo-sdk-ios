import {
  KYCWrapperService
} from "./chunk-CHFOG66O.js";
import {
  FcmService,
  PushNotifications
} from "./chunk-RAVV2QIY.js";
import {
  AppstateService
} from "./chunk-T6WE2PS5.js";
import {
  AccountService,
  ForfaitsService,
  SubscriptionProcessService
} from "./chunk-XK4I5MHM.js";
import {
  RecaptchaService
} from "./chunk-GVYZRG6X.js";
import {
  environment
} from "./chunk-FOJAXRYS.js";
import {
  fetchAuthSession,
  fetchUserAttributes,
  signIn,
  signOut,
  signUp
} from "./chunk-Y7HI6USV.js";
import {
  ErrorHandlerService
} from "./chunk-SARQRLZR.js";
import {
  StorageService
} from "./chunk-U6SJAXLK.js";
import {
  Directive,
  ElementRef,
  HttpErrorResponse,
  Inject,
  Injectable,
  Input,
  NavigationCancel,
  NavigationEnd,
  NavigationError,
  NavigationStart,
  NgModule,
  ResolveEnd,
  Router,
  Subscription,
  VERSION,
  effect,
  filter,
  setClassMetadata,
  signal,
  tap,
  ɵɵdefineDirective,
  ɵɵdefineInjectable,
  ɵɵdefineInjector,
  ɵɵdefineNgModule,
  ɵɵdirectiveInject,
  ɵɵinject
} from "./chunk-DGENMXJW.js";
import {
  Capacitor,
  registerPlugin
} from "./chunk-KGBWUDTS.js";
import {
  __async,
  __commonJS,
  __esm,
  __export,
  __objRest,
  __require,
  __spreadProps,
  __spreadValues,
  __toCommonJS,
  __toESM
} from "./chunk-UESUV5PM.js";

// node_modules/base64-js/index.js
var require_base64_js = __commonJS({
  "node_modules/base64-js/index.js"(exports) {
    "use strict";
    exports.byteLength = byteLength;
    exports.toByteArray = toByteArray;
    exports.fromByteArray = fromByteArray;
    var lookup2 = [];
    var revLookup = [];
    var Arr = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
    var code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    for (i2 = 0, len = code.length; i2 < len; ++i2) {
      lookup2[i2] = code[i2];
      revLookup[code.charCodeAt(i2)] = i2;
    }
    var i2;
    var len;
    revLookup["-".charCodeAt(0)] = 62;
    revLookup["_".charCodeAt(0)] = 63;
    function getLens(b64) {
      var len2 = b64.length;
      if (len2 % 4 > 0) {
        throw new Error("Invalid string. Length must be a multiple of 4");
      }
      var validLen = b64.indexOf("=");
      if (validLen === -1) validLen = len2;
      var placeHoldersLen = validLen === len2 ? 0 : 4 - validLen % 4;
      return [validLen, placeHoldersLen];
    }
    function byteLength(b64) {
      var lens = getLens(b64);
      var validLen = lens[0];
      var placeHoldersLen = lens[1];
      return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
    }
    function _byteLength(b64, validLen, placeHoldersLen) {
      return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
    }
    function toByteArray(b64) {
      var tmp;
      var lens = getLens(b64);
      var validLen = lens[0];
      var placeHoldersLen = lens[1];
      var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));
      var curByte = 0;
      var len2 = placeHoldersLen > 0 ? validLen - 4 : validLen;
      var i3;
      for (i3 = 0; i3 < len2; i3 += 4) {
        tmp = revLookup[b64.charCodeAt(i3)] << 18 | revLookup[b64.charCodeAt(i3 + 1)] << 12 | revLookup[b64.charCodeAt(i3 + 2)] << 6 | revLookup[b64.charCodeAt(i3 + 3)];
        arr[curByte++] = tmp >> 16 & 255;
        arr[curByte++] = tmp >> 8 & 255;
        arr[curByte++] = tmp & 255;
      }
      if (placeHoldersLen === 2) {
        tmp = revLookup[b64.charCodeAt(i3)] << 2 | revLookup[b64.charCodeAt(i3 + 1)] >> 4;
        arr[curByte++] = tmp & 255;
      }
      if (placeHoldersLen === 1) {
        tmp = revLookup[b64.charCodeAt(i3)] << 10 | revLookup[b64.charCodeAt(i3 + 1)] << 4 | revLookup[b64.charCodeAt(i3 + 2)] >> 2;
        arr[curByte++] = tmp >> 8 & 255;
        arr[curByte++] = tmp & 255;
      }
      return arr;
    }
    function tripletToBase64(num) {
      return lookup2[num >> 18 & 63] + lookup2[num >> 12 & 63] + lookup2[num >> 6 & 63] + lookup2[num & 63];
    }
    function encodeChunk(uint8, start, end) {
      var tmp;
      var output = [];
      for (var i3 = start; i3 < end; i3 += 3) {
        tmp = (uint8[i3] << 16 & 16711680) + (uint8[i3 + 1] << 8 & 65280) + (uint8[i3 + 2] & 255);
        output.push(tripletToBase64(tmp));
      }
      return output.join("");
    }
    function fromByteArray(uint8) {
      var tmp;
      var len2 = uint8.length;
      var extraBytes = len2 % 3;
      var parts = [];
      var maxChunkLength = 16383;
      for (var i3 = 0, len22 = len2 - extraBytes; i3 < len22; i3 += maxChunkLength) {
        parts.push(encodeChunk(uint8, i3, i3 + maxChunkLength > len22 ? len22 : i3 + maxChunkLength));
      }
      if (extraBytes === 1) {
        tmp = uint8[len2 - 1];
        parts.push(lookup2[tmp >> 2] + lookup2[tmp << 4 & 63] + "==");
      } else if (extraBytes === 2) {
        tmp = (uint8[len2 - 2] << 8) + uint8[len2 - 1];
        parts.push(lookup2[tmp >> 10] + lookup2[tmp >> 4 & 63] + lookup2[tmp << 2 & 63] + "=");
      }
      return parts.join("");
    }
  }
});

// node_modules/ieee754/index.js
var require_ieee754 = __commonJS({
  "node_modules/ieee754/index.js"(exports) {
    "use strict";
    exports.read = function(buffer, offset, isLE, mLen, nBytes) {
      var e3, m2;
      var eLen = nBytes * 8 - mLen - 1;
      var eMax = (1 << eLen) - 1;
      var eBias = eMax >> 1;
      var nBits = -7;
      var i2 = isLE ? nBytes - 1 : 0;
      var d2 = isLE ? -1 : 1;
      var s2 = buffer[offset + i2];
      i2 += d2;
      e3 = s2 & (1 << -nBits) - 1;
      s2 >>= -nBits;
      nBits += eLen;
      for (; nBits > 0; e3 = e3 * 256 + buffer[offset + i2], i2 += d2, nBits -= 8) {
      }
      m2 = e3 & (1 << -nBits) - 1;
      e3 >>= -nBits;
      nBits += mLen;
      for (; nBits > 0; m2 = m2 * 256 + buffer[offset + i2], i2 += d2, nBits -= 8) {
      }
      if (e3 === 0) {
        e3 = 1 - eBias;
      } else if (e3 === eMax) {
        return m2 ? NaN : (s2 ? -1 : 1) * Infinity;
      } else {
        m2 = m2 + Math.pow(2, mLen);
        e3 = e3 - eBias;
      }
      return (s2 ? -1 : 1) * m2 * Math.pow(2, e3 - mLen);
    };
    exports.write = function(buffer, value, offset, isLE, mLen, nBytes) {
      var e3, m2, c2;
      var eLen = nBytes * 8 - mLen - 1;
      var eMax = (1 << eLen) - 1;
      var eBias = eMax >> 1;
      var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;
      var i2 = isLE ? 0 : nBytes - 1;
      var d2 = isLE ? 1 : -1;
      var s2 = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
      value = Math.abs(value);
      if (isNaN(value) || value === Infinity) {
        m2 = isNaN(value) ? 1 : 0;
        e3 = eMax;
      } else {
        e3 = Math.floor(Math.log(value) / Math.LN2);
        if (value * (c2 = Math.pow(2, -e3)) < 1) {
          e3--;
          c2 *= 2;
        }
        if (e3 + eBias >= 1) {
          value += rt / c2;
        } else {
          value += rt * Math.pow(2, 1 - eBias);
        }
        if (value * c2 >= 2) {
          e3++;
          c2 /= 2;
        }
        if (e3 + eBias >= eMax) {
          m2 = 0;
          e3 = eMax;
        } else if (e3 + eBias >= 1) {
          m2 = (value * c2 - 1) * Math.pow(2, mLen);
          e3 = e3 + eBias;
        } else {
          m2 = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
          e3 = 0;
        }
      }
      for (; mLen >= 8; buffer[offset + i2] = m2 & 255, i2 += d2, m2 /= 256, mLen -= 8) {
      }
      e3 = e3 << mLen | m2;
      eLen += mLen;
      for (; eLen > 0; buffer[offset + i2] = e3 & 255, i2 += d2, e3 /= 256, eLen -= 8) {
      }
      buffer[offset + i2 - d2] |= s2 * 128;
    };
  }
});

// node_modules/isarray/index.js
var require_isarray = __commonJS({
  "node_modules/isarray/index.js"(exports, module2) {
    "use strict";
    var toString = {}.toString;
    module2.exports = Array.isArray || function(arr) {
      return toString.call(arr) == "[object Array]";
    };
  }
});

// node_modules/buffer/index.js
var require_buffer = __commonJS({
  "node_modules/buffer/index.js"(exports) {
    "use strict";
    var base64 = require_base64_js();
    var ieee754 = require_ieee754();
    var isArray = require_isarray();
    exports.Buffer = Buffer5;
    exports.SlowBuffer = SlowBuffer;
    exports.INSPECT_MAX_BYTES = 50;
    Buffer5.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== void 0 ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();
    exports.kMaxLength = kMaxLength();
    function typedArraySupport() {
      try {
        var arr = new Uint8Array(1);
        arr.__proto__ = {
          __proto__: Uint8Array.prototype,
          foo: function() {
            return 42;
          }
        };
        return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === "function" && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0;
      } catch (e3) {
        return false;
      }
    }
    function kMaxLength() {
      return Buffer5.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
    }
    function createBuffer(that, length) {
      if (kMaxLength() < length) {
        throw new RangeError("Invalid typed array length");
      }
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        that = new Uint8Array(length);
        that.__proto__ = Buffer5.prototype;
      } else {
        if (that === null) {
          that = new Buffer5(length);
        }
        that.length = length;
      }
      return that;
    }
    function Buffer5(arg, encodingOrOffset, length) {
      if (!Buffer5.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer5)) {
        return new Buffer5(arg, encodingOrOffset, length);
      }
      if (typeof arg === "number") {
        if (typeof encodingOrOffset === "string") {
          throw new Error("If encoding is specified then the first argument must be a string");
        }
        return allocUnsafe(this, arg);
      }
      return from(this, arg, encodingOrOffset, length);
    }
    Buffer5.poolSize = 8192;
    Buffer5._augment = function(arr) {
      arr.__proto__ = Buffer5.prototype;
      return arr;
    };
    function from(that, value, encodingOrOffset, length) {
      if (typeof value === "number") {
        throw new TypeError('"value" argument must not be a number');
      }
      if (typeof ArrayBuffer !== "undefined" && value instanceof ArrayBuffer) {
        return fromArrayBuffer(that, value, encodingOrOffset, length);
      }
      if (typeof value === "string") {
        return fromString(that, value, encodingOrOffset);
      }
      return fromObject(that, value);
    }
    Buffer5.from = function(value, encodingOrOffset, length) {
      return from(null, value, encodingOrOffset, length);
    };
    if (Buffer5.TYPED_ARRAY_SUPPORT) {
      Buffer5.prototype.__proto__ = Uint8Array.prototype;
      Buffer5.__proto__ = Uint8Array;
      if (typeof Symbol !== "undefined" && Symbol.species && Buffer5[Symbol.species] === Buffer5) {
        Object.defineProperty(Buffer5, Symbol.species, {
          value: null,
          configurable: true
        });
      }
    }
    function assertSize(size) {
      if (typeof size !== "number") {
        throw new TypeError('"size" argument must be a number');
      } else if (size < 0) {
        throw new RangeError('"size" argument must not be negative');
      }
    }
    function alloc(that, size, fill2, encoding) {
      assertSize(size);
      if (size <= 0) {
        return createBuffer(that, size);
      }
      if (fill2 !== void 0) {
        return typeof encoding === "string" ? createBuffer(that, size).fill(fill2, encoding) : createBuffer(that, size).fill(fill2);
      }
      return createBuffer(that, size);
    }
    Buffer5.alloc = function(size, fill2, encoding) {
      return alloc(null, size, fill2, encoding);
    };
    function allocUnsafe(that, size) {
      assertSize(size);
      that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);
      if (!Buffer5.TYPED_ARRAY_SUPPORT) {
        for (var i2 = 0; i2 < size; ++i2) {
          that[i2] = 0;
        }
      }
      return that;
    }
    Buffer5.allocUnsafe = function(size) {
      return allocUnsafe(null, size);
    };
    Buffer5.allocUnsafeSlow = function(size) {
      return allocUnsafe(null, size);
    };
    function fromString(that, string, encoding) {
      if (typeof encoding !== "string" || encoding === "") {
        encoding = "utf8";
      }
      if (!Buffer5.isEncoding(encoding)) {
        throw new TypeError('"encoding" must be a valid string encoding');
      }
      var length = byteLength(string, encoding) | 0;
      that = createBuffer(that, length);
      var actual = that.write(string, encoding);
      if (actual !== length) {
        that = that.slice(0, actual);
      }
      return that;
    }
    function fromArrayLike(that, array) {
      var length = array.length < 0 ? 0 : checked(array.length) | 0;
      that = createBuffer(that, length);
      for (var i2 = 0; i2 < length; i2 += 1) {
        that[i2] = array[i2] & 255;
      }
      return that;
    }
    function fromArrayBuffer(that, array, byteOffset, length) {
      array.byteLength;
      if (byteOffset < 0 || array.byteLength < byteOffset) {
        throw new RangeError("'offset' is out of bounds");
      }
      if (array.byteLength < byteOffset + (length || 0)) {
        throw new RangeError("'length' is out of bounds");
      }
      if (byteOffset === void 0 && length === void 0) {
        array = new Uint8Array(array);
      } else if (length === void 0) {
        array = new Uint8Array(array, byteOffset);
      } else {
        array = new Uint8Array(array, byteOffset, length);
      }
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        that = array;
        that.__proto__ = Buffer5.prototype;
      } else {
        that = fromArrayLike(that, array);
      }
      return that;
    }
    function fromObject(that, obj) {
      if (Buffer5.isBuffer(obj)) {
        var len = checked(obj.length) | 0;
        that = createBuffer(that, len);
        if (that.length === 0) {
          return that;
        }
        obj.copy(that, 0, 0, len);
        return that;
      }
      if (obj) {
        if (typeof ArrayBuffer !== "undefined" && obj.buffer instanceof ArrayBuffer || "length" in obj) {
          if (typeof obj.length !== "number" || isnan(obj.length)) {
            return createBuffer(that, 0);
          }
          return fromArrayLike(that, obj);
        }
        if (obj.type === "Buffer" && isArray(obj.data)) {
          return fromArrayLike(that, obj.data);
        }
      }
      throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
    }
    function checked(length) {
      if (length >= kMaxLength()) {
        throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + kMaxLength().toString(16) + " bytes");
      }
      return length | 0;
    }
    function SlowBuffer(length) {
      if (+length != length) {
        length = 0;
      }
      return Buffer5.alloc(+length);
    }
    Buffer5.isBuffer = function isBuffer(b2) {
      return !!(b2 != null && b2._isBuffer);
    };
    Buffer5.compare = function compare(a2, b2) {
      if (!Buffer5.isBuffer(a2) || !Buffer5.isBuffer(b2)) {
        throw new TypeError("Arguments must be Buffers");
      }
      if (a2 === b2) return 0;
      var x2 = a2.length;
      var y2 = b2.length;
      for (var i2 = 0, len = Math.min(x2, y2); i2 < len; ++i2) {
        if (a2[i2] !== b2[i2]) {
          x2 = a2[i2];
          y2 = b2[i2];
          break;
        }
      }
      if (x2 < y2) return -1;
      if (y2 < x2) return 1;
      return 0;
    };
    Buffer5.isEncoding = function isEncoding(encoding) {
      switch (String(encoding).toLowerCase()) {
        case "hex":
        case "utf8":
        case "utf-8":
        case "ascii":
        case "latin1":
        case "binary":
        case "base64":
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return true;
        default:
          return false;
      }
    };
    Buffer5.concat = function concat(list, length) {
      if (!isArray(list)) {
        throw new TypeError('"list" argument must be an Array of Buffers');
      }
      if (list.length === 0) {
        return Buffer5.alloc(0);
      }
      var i2;
      if (length === void 0) {
        length = 0;
        for (i2 = 0; i2 < list.length; ++i2) {
          length += list[i2].length;
        }
      }
      var buffer = Buffer5.allocUnsafe(length);
      var pos = 0;
      for (i2 = 0; i2 < list.length; ++i2) {
        var buf = list[i2];
        if (!Buffer5.isBuffer(buf)) {
          throw new TypeError('"list" argument must be an Array of Buffers');
        }
        buf.copy(buffer, pos);
        pos += buf.length;
      }
      return buffer;
    };
    function byteLength(string, encoding) {
      if (Buffer5.isBuffer(string)) {
        return string.length;
      }
      if (typeof ArrayBuffer !== "undefined" && typeof ArrayBuffer.isView === "function" && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
        return string.byteLength;
      }
      if (typeof string !== "string") {
        string = "" + string;
      }
      var len = string.length;
      if (len === 0) return 0;
      var loweredCase = false;
      for (; ; ) {
        switch (encoding) {
          case "ascii":
          case "latin1":
          case "binary":
            return len;
          case "utf8":
          case "utf-8":
          case void 0:
            return utf8ToBytes(string).length;
          case "ucs2":
          case "ucs-2":
          case "utf16le":
          case "utf-16le":
            return len * 2;
          case "hex":
            return len >>> 1;
          case "base64":
            return base64ToBytes(string).length;
          default:
            if (loweredCase) return utf8ToBytes(string).length;
            encoding = ("" + encoding).toLowerCase();
            loweredCase = true;
        }
      }
    }
    Buffer5.byteLength = byteLength;
    function slowToString(encoding, start, end) {
      var loweredCase = false;
      if (start === void 0 || start < 0) {
        start = 0;
      }
      if (start > this.length) {
        return "";
      }
      if (end === void 0 || end > this.length) {
        end = this.length;
      }
      if (end <= 0) {
        return "";
      }
      end >>>= 0;
      start >>>= 0;
      if (end <= start) {
        return "";
      }
      if (!encoding) encoding = "utf8";
      while (true) {
        switch (encoding) {
          case "hex":
            return hexSlice(this, start, end);
          case "utf8":
          case "utf-8":
            return utf8Slice(this, start, end);
          case "ascii":
            return asciiSlice(this, start, end);
          case "latin1":
          case "binary":
            return latin1Slice(this, start, end);
          case "base64":
            return base64Slice(this, start, end);
          case "ucs2":
          case "ucs-2":
          case "utf16le":
          case "utf-16le":
            return utf16leSlice(this, start, end);
          default:
            if (loweredCase) throw new TypeError("Unknown encoding: " + encoding);
            encoding = (encoding + "").toLowerCase();
            loweredCase = true;
        }
      }
    }
    Buffer5.prototype._isBuffer = true;
    function swap(b2, n3, m2) {
      var i2 = b2[n3];
      b2[n3] = b2[m2];
      b2[m2] = i2;
    }
    Buffer5.prototype.swap16 = function swap16() {
      var len = this.length;
      if (len % 2 !== 0) {
        throw new RangeError("Buffer size must be a multiple of 16-bits");
      }
      for (var i2 = 0; i2 < len; i2 += 2) {
        swap(this, i2, i2 + 1);
      }
      return this;
    };
    Buffer5.prototype.swap32 = function swap32() {
      var len = this.length;
      if (len % 4 !== 0) {
        throw new RangeError("Buffer size must be a multiple of 32-bits");
      }
      for (var i2 = 0; i2 < len; i2 += 4) {
        swap(this, i2, i2 + 3);
        swap(this, i2 + 1, i2 + 2);
      }
      return this;
    };
    Buffer5.prototype.swap64 = function swap64() {
      var len = this.length;
      if (len % 8 !== 0) {
        throw new RangeError("Buffer size must be a multiple of 64-bits");
      }
      for (var i2 = 0; i2 < len; i2 += 8) {
        swap(this, i2, i2 + 7);
        swap(this, i2 + 1, i2 + 6);
        swap(this, i2 + 2, i2 + 5);
        swap(this, i2 + 3, i2 + 4);
      }
      return this;
    };
    Buffer5.prototype.toString = function toString() {
      var length = this.length | 0;
      if (length === 0) return "";
      if (arguments.length === 0) return utf8Slice(this, 0, length);
      return slowToString.apply(this, arguments);
    };
    Buffer5.prototype.equals = function equals(b2) {
      if (!Buffer5.isBuffer(b2)) throw new TypeError("Argument must be a Buffer");
      if (this === b2) return true;
      return Buffer5.compare(this, b2) === 0;
    };
    Buffer5.prototype.inspect = function inspect() {
      var str = "";
      var max = exports.INSPECT_MAX_BYTES;
      if (this.length > 0) {
        str = this.toString("hex", 0, max).match(/.{2}/g).join(" ");
        if (this.length > max) str += " ... ";
      }
      return "<Buffer " + str + ">";
    };
    Buffer5.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {
      if (!Buffer5.isBuffer(target)) {
        throw new TypeError("Argument must be a Buffer");
      }
      if (start === void 0) {
        start = 0;
      }
      if (end === void 0) {
        end = target ? target.length : 0;
      }
      if (thisStart === void 0) {
        thisStart = 0;
      }
      if (thisEnd === void 0) {
        thisEnd = this.length;
      }
      if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
        throw new RangeError("out of range index");
      }
      if (thisStart >= thisEnd && start >= end) {
        return 0;
      }
      if (thisStart >= thisEnd) {
        return -1;
      }
      if (start >= end) {
        return 1;
      }
      start >>>= 0;
      end >>>= 0;
      thisStart >>>= 0;
      thisEnd >>>= 0;
      if (this === target) return 0;
      var x2 = thisEnd - thisStart;
      var y2 = end - start;
      var len = Math.min(x2, y2);
      var thisCopy = this.slice(thisStart, thisEnd);
      var targetCopy = target.slice(start, end);
      for (var i2 = 0; i2 < len; ++i2) {
        if (thisCopy[i2] !== targetCopy[i2]) {
          x2 = thisCopy[i2];
          y2 = targetCopy[i2];
          break;
        }
      }
      if (x2 < y2) return -1;
      if (y2 < x2) return 1;
      return 0;
    };
    function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {
      if (buffer.length === 0) return -1;
      if (typeof byteOffset === "string") {
        encoding = byteOffset;
        byteOffset = 0;
      } else if (byteOffset > 2147483647) {
        byteOffset = 2147483647;
      } else if (byteOffset < -2147483648) {
        byteOffset = -2147483648;
      }
      byteOffset = +byteOffset;
      if (isNaN(byteOffset)) {
        byteOffset = dir ? 0 : buffer.length - 1;
      }
      if (byteOffset < 0) byteOffset = buffer.length + byteOffset;
      if (byteOffset >= buffer.length) {
        if (dir) return -1;
        else byteOffset = buffer.length - 1;
      } else if (byteOffset < 0) {
        if (dir) byteOffset = 0;
        else return -1;
      }
      if (typeof val === "string") {
        val = Buffer5.from(val, encoding);
      }
      if (Buffer5.isBuffer(val)) {
        if (val.length === 0) {
          return -1;
        }
        return arrayIndexOf(buffer, val, byteOffset, encoding, dir);
      } else if (typeof val === "number") {
        val = val & 255;
        if (Buffer5.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === "function") {
          if (dir) {
            return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);
          } else {
            return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);
          }
        }
        return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);
      }
      throw new TypeError("val must be string, number or Buffer");
    }
    function arrayIndexOf(arr, val, byteOffset, encoding, dir) {
      var indexSize = 1;
      var arrLength = arr.length;
      var valLength = val.length;
      if (encoding !== void 0) {
        encoding = String(encoding).toLowerCase();
        if (encoding === "ucs2" || encoding === "ucs-2" || encoding === "utf16le" || encoding === "utf-16le") {
          if (arr.length < 2 || val.length < 2) {
            return -1;
          }
          indexSize = 2;
          arrLength /= 2;
          valLength /= 2;
          byteOffset /= 2;
        }
      }
      function read(buf, i3) {
        if (indexSize === 1) {
          return buf[i3];
        } else {
          return buf.readUInt16BE(i3 * indexSize);
        }
      }
      var i2;
      if (dir) {
        var foundIndex = -1;
        for (i2 = byteOffset; i2 < arrLength; i2++) {
          if (read(arr, i2) === read(val, foundIndex === -1 ? 0 : i2 - foundIndex)) {
            if (foundIndex === -1) foundIndex = i2;
            if (i2 - foundIndex + 1 === valLength) return foundIndex * indexSize;
          } else {
            if (foundIndex !== -1) i2 -= i2 - foundIndex;
            foundIndex = -1;
          }
        }
      } else {
        if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;
        for (i2 = byteOffset; i2 >= 0; i2--) {
          var found = true;
          for (var j2 = 0; j2 < valLength; j2++) {
            if (read(arr, i2 + j2) !== read(val, j2)) {
              found = false;
              break;
            }
          }
          if (found) return i2;
        }
      }
      return -1;
    }
    Buffer5.prototype.includes = function includes(val, byteOffset, encoding) {
      return this.indexOf(val, byteOffset, encoding) !== -1;
    };
    Buffer5.prototype.indexOf = function indexOf(val, byteOffset, encoding) {
      return bidirectionalIndexOf(this, val, byteOffset, encoding, true);
    };
    Buffer5.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {
      return bidirectionalIndexOf(this, val, byteOffset, encoding, false);
    };
    function hexWrite(buf, string, offset, length) {
      offset = Number(offset) || 0;
      var remaining = buf.length - offset;
      if (!length) {
        length = remaining;
      } else {
        length = Number(length);
        if (length > remaining) {
          length = remaining;
        }
      }
      var strLen = string.length;
      if (strLen % 2 !== 0) throw new TypeError("Invalid hex string");
      if (length > strLen / 2) {
        length = strLen / 2;
      }
      for (var i2 = 0; i2 < length; ++i2) {
        var parsed = parseInt(string.substr(i2 * 2, 2), 16);
        if (isNaN(parsed)) return i2;
        buf[offset + i2] = parsed;
      }
      return i2;
    }
    function utf8Write(buf, string, offset, length) {
      return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);
    }
    function asciiWrite(buf, string, offset, length) {
      return blitBuffer(asciiToBytes(string), buf, offset, length);
    }
    function latin1Write(buf, string, offset, length) {
      return asciiWrite(buf, string, offset, length);
    }
    function base64Write(buf, string, offset, length) {
      return blitBuffer(base64ToBytes(string), buf, offset, length);
    }
    function ucs2Write(buf, string, offset, length) {
      return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);
    }
    Buffer5.prototype.write = function write(string, offset, length, encoding) {
      if (offset === void 0) {
        encoding = "utf8";
        length = this.length;
        offset = 0;
      } else if (length === void 0 && typeof offset === "string") {
        encoding = offset;
        length = this.length;
        offset = 0;
      } else if (isFinite(offset)) {
        offset = offset | 0;
        if (isFinite(length)) {
          length = length | 0;
          if (encoding === void 0) encoding = "utf8";
        } else {
          encoding = length;
          length = void 0;
        }
      } else {
        throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
      }
      var remaining = this.length - offset;
      if (length === void 0 || length > remaining) length = remaining;
      if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {
        throw new RangeError("Attempt to write outside buffer bounds");
      }
      if (!encoding) encoding = "utf8";
      var loweredCase = false;
      for (; ; ) {
        switch (encoding) {
          case "hex":
            return hexWrite(this, string, offset, length);
          case "utf8":
          case "utf-8":
            return utf8Write(this, string, offset, length);
          case "ascii":
            return asciiWrite(this, string, offset, length);
          case "latin1":
          case "binary":
            return latin1Write(this, string, offset, length);
          case "base64":
            return base64Write(this, string, offset, length);
          case "ucs2":
          case "ucs-2":
          case "utf16le":
          case "utf-16le":
            return ucs2Write(this, string, offset, length);
          default:
            if (loweredCase) throw new TypeError("Unknown encoding: " + encoding);
            encoding = ("" + encoding).toLowerCase();
            loweredCase = true;
        }
      }
    };
    Buffer5.prototype.toJSON = function toJSON() {
      return {
        type: "Buffer",
        data: Array.prototype.slice.call(this._arr || this, 0)
      };
    };
    function base64Slice(buf, start, end) {
      if (start === 0 && end === buf.length) {
        return base64.fromByteArray(buf);
      } else {
        return base64.fromByteArray(buf.slice(start, end));
      }
    }
    function utf8Slice(buf, start, end) {
      end = Math.min(buf.length, end);
      var res = [];
      var i2 = start;
      while (i2 < end) {
        var firstByte = buf[i2];
        var codePoint = null;
        var bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;
        if (i2 + bytesPerSequence <= end) {
          var secondByte, thirdByte, fourthByte, tempCodePoint;
          switch (bytesPerSequence) {
            case 1:
              if (firstByte < 128) {
                codePoint = firstByte;
              }
              break;
            case 2:
              secondByte = buf[i2 + 1];
              if ((secondByte & 192) === 128) {
                tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;
                if (tempCodePoint > 127) {
                  codePoint = tempCodePoint;
                }
              }
              break;
            case 3:
              secondByte = buf[i2 + 1];
              thirdByte = buf[i2 + 2];
              if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {
                tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;
                if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {
                  codePoint = tempCodePoint;
                }
              }
              break;
            case 4:
              secondByte = buf[i2 + 1];
              thirdByte = buf[i2 + 2];
              fourthByte = buf[i2 + 3];
              if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {
                tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;
                if (tempCodePoint > 65535 && tempCodePoint < 1114112) {
                  codePoint = tempCodePoint;
                }
              }
          }
        }
        if (codePoint === null) {
          codePoint = 65533;
          bytesPerSequence = 1;
        } else if (codePoint > 65535) {
          codePoint -= 65536;
          res.push(codePoint >>> 10 & 1023 | 55296);
          codePoint = 56320 | codePoint & 1023;
        }
        res.push(codePoint);
        i2 += bytesPerSequence;
      }
      return decodeCodePointsArray(res);
    }
    var MAX_ARGUMENTS_LENGTH = 4096;
    function decodeCodePointsArray(codePoints) {
      var len = codePoints.length;
      if (len <= MAX_ARGUMENTS_LENGTH) {
        return String.fromCharCode.apply(String, codePoints);
      }
      var res = "";
      var i2 = 0;
      while (i2 < len) {
        res += String.fromCharCode.apply(String, codePoints.slice(i2, i2 += MAX_ARGUMENTS_LENGTH));
      }
      return res;
    }
    function asciiSlice(buf, start, end) {
      var ret = "";
      end = Math.min(buf.length, end);
      for (var i2 = start; i2 < end; ++i2) {
        ret += String.fromCharCode(buf[i2] & 127);
      }
      return ret;
    }
    function latin1Slice(buf, start, end) {
      var ret = "";
      end = Math.min(buf.length, end);
      for (var i2 = start; i2 < end; ++i2) {
        ret += String.fromCharCode(buf[i2]);
      }
      return ret;
    }
    function hexSlice(buf, start, end) {
      var len = buf.length;
      if (!start || start < 0) start = 0;
      if (!end || end < 0 || end > len) end = len;
      var out = "";
      for (var i2 = start; i2 < end; ++i2) {
        out += toHex(buf[i2]);
      }
      return out;
    }
    function utf16leSlice(buf, start, end) {
      var bytes = buf.slice(start, end);
      var res = "";
      for (var i2 = 0; i2 < bytes.length; i2 += 2) {
        res += String.fromCharCode(bytes[i2] + bytes[i2 + 1] * 256);
      }
      return res;
    }
    Buffer5.prototype.slice = function slice(start, end) {
      var len = this.length;
      start = ~~start;
      end = end === void 0 ? len : ~~end;
      if (start < 0) {
        start += len;
        if (start < 0) start = 0;
      } else if (start > len) {
        start = len;
      }
      if (end < 0) {
        end += len;
        if (end < 0) end = 0;
      } else if (end > len) {
        end = len;
      }
      if (end < start) end = start;
      var newBuf;
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        newBuf = this.subarray(start, end);
        newBuf.__proto__ = Buffer5.prototype;
      } else {
        var sliceLen = end - start;
        newBuf = new Buffer5(sliceLen, void 0);
        for (var i2 = 0; i2 < sliceLen; ++i2) {
          newBuf[i2] = this[i2 + start];
        }
      }
      return newBuf;
    };
    function checkOffset(offset, ext, length) {
      if (offset % 1 !== 0 || offset < 0) throw new RangeError("offset is not uint");
      if (offset + ext > length) throw new RangeError("Trying to access beyond buffer length");
    }
    Buffer5.prototype.readUIntLE = function readUIntLE(offset, byteLength2, noAssert) {
      offset = offset | 0;
      byteLength2 = byteLength2 | 0;
      if (!noAssert) checkOffset(offset, byteLength2, this.length);
      var val = this[offset];
      var mul = 1;
      var i2 = 0;
      while (++i2 < byteLength2 && (mul *= 256)) {
        val += this[offset + i2] * mul;
      }
      return val;
    };
    Buffer5.prototype.readUIntBE = function readUIntBE(offset, byteLength2, noAssert) {
      offset = offset | 0;
      byteLength2 = byteLength2 | 0;
      if (!noAssert) {
        checkOffset(offset, byteLength2, this.length);
      }
      var val = this[offset + --byteLength2];
      var mul = 1;
      while (byteLength2 > 0 && (mul *= 256)) {
        val += this[offset + --byteLength2] * mul;
      }
      return val;
    };
    Buffer5.prototype.readUInt8 = function readUInt8(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 1, this.length);
      return this[offset];
    };
    Buffer5.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 2, this.length);
      return this[offset] | this[offset + 1] << 8;
    };
    Buffer5.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 2, this.length);
      return this[offset] << 8 | this[offset + 1];
    };
    Buffer5.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 4, this.length);
      return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 16777216;
    };
    Buffer5.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 4, this.length);
      return this[offset] * 16777216 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);
    };
    Buffer5.prototype.readIntLE = function readIntLE(offset, byteLength2, noAssert) {
      offset = offset | 0;
      byteLength2 = byteLength2 | 0;
      if (!noAssert) checkOffset(offset, byteLength2, this.length);
      var val = this[offset];
      var mul = 1;
      var i2 = 0;
      while (++i2 < byteLength2 && (mul *= 256)) {
        val += this[offset + i2] * mul;
      }
      mul *= 128;
      if (val >= mul) val -= Math.pow(2, 8 * byteLength2);
      return val;
    };
    Buffer5.prototype.readIntBE = function readIntBE(offset, byteLength2, noAssert) {
      offset = offset | 0;
      byteLength2 = byteLength2 | 0;
      if (!noAssert) checkOffset(offset, byteLength2, this.length);
      var i2 = byteLength2;
      var mul = 1;
      var val = this[offset + --i2];
      while (i2 > 0 && (mul *= 256)) {
        val += this[offset + --i2] * mul;
      }
      mul *= 128;
      if (val >= mul) val -= Math.pow(2, 8 * byteLength2);
      return val;
    };
    Buffer5.prototype.readInt8 = function readInt8(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 1, this.length);
      if (!(this[offset] & 128)) return this[offset];
      return (255 - this[offset] + 1) * -1;
    };
    Buffer5.prototype.readInt16LE = function readInt16LE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 2, this.length);
      var val = this[offset] | this[offset + 1] << 8;
      return val & 32768 ? val | 4294901760 : val;
    };
    Buffer5.prototype.readInt16BE = function readInt16BE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 2, this.length);
      var val = this[offset + 1] | this[offset] << 8;
      return val & 32768 ? val | 4294901760 : val;
    };
    Buffer5.prototype.readInt32LE = function readInt32LE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 4, this.length);
      return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;
    };
    Buffer5.prototype.readInt32BE = function readInt32BE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 4, this.length);
      return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];
    };
    Buffer5.prototype.readFloatLE = function readFloatLE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 4, this.length);
      return ieee754.read(this, offset, true, 23, 4);
    };
    Buffer5.prototype.readFloatBE = function readFloatBE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 4, this.length);
      return ieee754.read(this, offset, false, 23, 4);
    };
    Buffer5.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 8, this.length);
      return ieee754.read(this, offset, true, 52, 8);
    };
    Buffer5.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {
      if (!noAssert) checkOffset(offset, 8, this.length);
      return ieee754.read(this, offset, false, 52, 8);
    };
    function checkInt(buf, value, offset, ext, max, min) {
      if (!Buffer5.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance');
      if (value > max || value < min) throw new RangeError('"value" argument is out of bounds');
      if (offset + ext > buf.length) throw new RangeError("Index out of range");
    }
    Buffer5.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength2, noAssert) {
      value = +value;
      offset = offset | 0;
      byteLength2 = byteLength2 | 0;
      if (!noAssert) {
        var maxBytes = Math.pow(2, 8 * byteLength2) - 1;
        checkInt(this, value, offset, byteLength2, maxBytes, 0);
      }
      var mul = 1;
      var i2 = 0;
      this[offset] = value & 255;
      while (++i2 < byteLength2 && (mul *= 256)) {
        this[offset + i2] = value / mul & 255;
      }
      return offset + byteLength2;
    };
    Buffer5.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength2, noAssert) {
      value = +value;
      offset = offset | 0;
      byteLength2 = byteLength2 | 0;
      if (!noAssert) {
        var maxBytes = Math.pow(2, 8 * byteLength2) - 1;
        checkInt(this, value, offset, byteLength2, maxBytes, 0);
      }
      var i2 = byteLength2 - 1;
      var mul = 1;
      this[offset + i2] = value & 255;
      while (--i2 >= 0 && (mul *= 256)) {
        this[offset + i2] = value / mul & 255;
      }
      return offset + byteLength2;
    };
    Buffer5.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 1, 255, 0);
      if (!Buffer5.TYPED_ARRAY_SUPPORT) value = Math.floor(value);
      this[offset] = value & 255;
      return offset + 1;
    };
    function objectWriteUInt16(buf, value, offset, littleEndian) {
      if (value < 0) value = 65535 + value + 1;
      for (var i2 = 0, j2 = Math.min(buf.length - offset, 2); i2 < j2; ++i2) {
        buf[offset + i2] = (value & 255 << 8 * (littleEndian ? i2 : 1 - i2)) >>> (littleEndian ? i2 : 1 - i2) * 8;
      }
    }
    Buffer5.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 2, 65535, 0);
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        this[offset] = value & 255;
        this[offset + 1] = value >>> 8;
      } else {
        objectWriteUInt16(this, value, offset, true);
      }
      return offset + 2;
    };
    Buffer5.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 2, 65535, 0);
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        this[offset] = value >>> 8;
        this[offset + 1] = value & 255;
      } else {
        objectWriteUInt16(this, value, offset, false);
      }
      return offset + 2;
    };
    function objectWriteUInt32(buf, value, offset, littleEndian) {
      if (value < 0) value = 4294967295 + value + 1;
      for (var i2 = 0, j2 = Math.min(buf.length - offset, 4); i2 < j2; ++i2) {
        buf[offset + i2] = value >>> (littleEndian ? i2 : 3 - i2) * 8 & 255;
      }
    }
    Buffer5.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 4, 4294967295, 0);
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        this[offset + 3] = value >>> 24;
        this[offset + 2] = value >>> 16;
        this[offset + 1] = value >>> 8;
        this[offset] = value & 255;
      } else {
        objectWriteUInt32(this, value, offset, true);
      }
      return offset + 4;
    };
    Buffer5.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 4, 4294967295, 0);
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        this[offset] = value >>> 24;
        this[offset + 1] = value >>> 16;
        this[offset + 2] = value >>> 8;
        this[offset + 3] = value & 255;
      } else {
        objectWriteUInt32(this, value, offset, false);
      }
      return offset + 4;
    };
    Buffer5.prototype.writeIntLE = function writeIntLE(value, offset, byteLength2, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) {
        var limit = Math.pow(2, 8 * byteLength2 - 1);
        checkInt(this, value, offset, byteLength2, limit - 1, -limit);
      }
      var i2 = 0;
      var mul = 1;
      var sub = 0;
      this[offset] = value & 255;
      while (++i2 < byteLength2 && (mul *= 256)) {
        if (value < 0 && sub === 0 && this[offset + i2 - 1] !== 0) {
          sub = 1;
        }
        this[offset + i2] = (value / mul >> 0) - sub & 255;
      }
      return offset + byteLength2;
    };
    Buffer5.prototype.writeIntBE = function writeIntBE(value, offset, byteLength2, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) {
        var limit = Math.pow(2, 8 * byteLength2 - 1);
        checkInt(this, value, offset, byteLength2, limit - 1, -limit);
      }
      var i2 = byteLength2 - 1;
      var mul = 1;
      var sub = 0;
      this[offset + i2] = value & 255;
      while (--i2 >= 0 && (mul *= 256)) {
        if (value < 0 && sub === 0 && this[offset + i2 + 1] !== 0) {
          sub = 1;
        }
        this[offset + i2] = (value / mul >> 0) - sub & 255;
      }
      return offset + byteLength2;
    };
    Buffer5.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 1, 127, -128);
      if (!Buffer5.TYPED_ARRAY_SUPPORT) value = Math.floor(value);
      if (value < 0) value = 255 + value + 1;
      this[offset] = value & 255;
      return offset + 1;
    };
    Buffer5.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 2, 32767, -32768);
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        this[offset] = value & 255;
        this[offset + 1] = value >>> 8;
      } else {
        objectWriteUInt16(this, value, offset, true);
      }
      return offset + 2;
    };
    Buffer5.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 2, 32767, -32768);
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        this[offset] = value >>> 8;
        this[offset + 1] = value & 255;
      } else {
        objectWriteUInt16(this, value, offset, false);
      }
      return offset + 2;
    };
    Buffer5.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 4, 2147483647, -2147483648);
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        this[offset] = value & 255;
        this[offset + 1] = value >>> 8;
        this[offset + 2] = value >>> 16;
        this[offset + 3] = value >>> 24;
      } else {
        objectWriteUInt32(this, value, offset, true);
      }
      return offset + 4;
    };
    Buffer5.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {
      value = +value;
      offset = offset | 0;
      if (!noAssert) checkInt(this, value, offset, 4, 2147483647, -2147483648);
      if (value < 0) value = 4294967295 + value + 1;
      if (Buffer5.TYPED_ARRAY_SUPPORT) {
        this[offset] = value >>> 24;
        this[offset + 1] = value >>> 16;
        this[offset + 2] = value >>> 8;
        this[offset + 3] = value & 255;
      } else {
        objectWriteUInt32(this, value, offset, false);
      }
      return offset + 4;
    };
    function checkIEEE754(buf, value, offset, ext, max, min) {
      if (offset + ext > buf.length) throw new RangeError("Index out of range");
      if (offset < 0) throw new RangeError("Index out of range");
    }
    function writeFloat(buf, value, offset, littleEndian, noAssert) {
      if (!noAssert) {
        checkIEEE754(buf, value, offset, 4, 34028234663852886e22, -34028234663852886e22);
      }
      ieee754.write(buf, value, offset, littleEndian, 23, 4);
      return offset + 4;
    }
    Buffer5.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {
      return writeFloat(this, value, offset, true, noAssert);
    };
    Buffer5.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {
      return writeFloat(this, value, offset, false, noAssert);
    };
    function writeDouble(buf, value, offset, littleEndian, noAssert) {
      if (!noAssert) {
        checkIEEE754(buf, value, offset, 8, 17976931348623157e292, -17976931348623157e292);
      }
      ieee754.write(buf, value, offset, littleEndian, 52, 8);
      return offset + 8;
    }
    Buffer5.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {
      return writeDouble(this, value, offset, true, noAssert);
    };
    Buffer5.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {
      return writeDouble(this, value, offset, false, noAssert);
    };
    Buffer5.prototype.copy = function copy(target, targetStart, start, end) {
      if (!start) start = 0;
      if (!end && end !== 0) end = this.length;
      if (targetStart >= target.length) targetStart = target.length;
      if (!targetStart) targetStart = 0;
      if (end > 0 && end < start) end = start;
      if (end === start) return 0;
      if (target.length === 0 || this.length === 0) return 0;
      if (targetStart < 0) {
        throw new RangeError("targetStart out of bounds");
      }
      if (start < 0 || start >= this.length) throw new RangeError("sourceStart out of bounds");
      if (end < 0) throw new RangeError("sourceEnd out of bounds");
      if (end > this.length) end = this.length;
      if (target.length - targetStart < end - start) {
        end = target.length - targetStart + start;
      }
      var len = end - start;
      var i2;
      if (this === target && start < targetStart && targetStart < end) {
        for (i2 = len - 1; i2 >= 0; --i2) {
          target[i2 + targetStart] = this[i2 + start];
        }
      } else if (len < 1e3 || !Buffer5.TYPED_ARRAY_SUPPORT) {
        for (i2 = 0; i2 < len; ++i2) {
          target[i2 + targetStart] = this[i2 + start];
        }
      } else {
        Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);
      }
      return len;
    };
    Buffer5.prototype.fill = function fill2(val, start, end, encoding) {
      if (typeof val === "string") {
        if (typeof start === "string") {
          encoding = start;
          start = 0;
          end = this.length;
        } else if (typeof end === "string") {
          encoding = end;
          end = this.length;
        }
        if (val.length === 1) {
          var code = val.charCodeAt(0);
          if (code < 256) {
            val = code;
          }
        }
        if (encoding !== void 0 && typeof encoding !== "string") {
          throw new TypeError("encoding must be a string");
        }
        if (typeof encoding === "string" && !Buffer5.isEncoding(encoding)) {
          throw new TypeError("Unknown encoding: " + encoding);
        }
      } else if (typeof val === "number") {
        val = val & 255;
      }
      if (start < 0 || this.length < start || this.length < end) {
        throw new RangeError("Out of range index");
      }
      if (end <= start) {
        return this;
      }
      start = start >>> 0;
      end = end === void 0 ? this.length : end >>> 0;
      if (!val) val = 0;
      var i2;
      if (typeof val === "number") {
        for (i2 = start; i2 < end; ++i2) {
          this[i2] = val;
        }
      } else {
        var bytes = Buffer5.isBuffer(val) ? val : utf8ToBytes(new Buffer5(val, encoding).toString());
        var len = bytes.length;
        for (i2 = 0; i2 < end - start; ++i2) {
          this[i2 + start] = bytes[i2 % len];
        }
      }
      return this;
    };
    var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g;
    function base64clean(str) {
      str = stringtrim(str).replace(INVALID_BASE64_RE, "");
      if (str.length < 2) return "";
      while (str.length % 4 !== 0) {
        str = str + "=";
      }
      return str;
    }
    function stringtrim(str) {
      if (str.trim) return str.trim();
      return str.replace(/^\s+|\s+$/g, "");
    }
    function toHex(n3) {
      if (n3 < 16) return "0" + n3.toString(16);
      return n3.toString(16);
    }
    function utf8ToBytes(string, units) {
      units = units || Infinity;
      var codePoint;
      var length = string.length;
      var leadSurrogate = null;
      var bytes = [];
      for (var i2 = 0; i2 < length; ++i2) {
        codePoint = string.charCodeAt(i2);
        if (codePoint > 55295 && codePoint < 57344) {
          if (!leadSurrogate) {
            if (codePoint > 56319) {
              if ((units -= 3) > -1) bytes.push(239, 191, 189);
              continue;
            } else if (i2 + 1 === length) {
              if ((units -= 3) > -1) bytes.push(239, 191, 189);
              continue;
            }
            leadSurrogate = codePoint;
            continue;
          }
          if (codePoint < 56320) {
            if ((units -= 3) > -1) bytes.push(239, 191, 189);
            leadSurrogate = codePoint;
            continue;
          }
          codePoint = (leadSurrogate - 55296 << 10 | codePoint - 56320) + 65536;
        } else if (leadSurrogate) {
          if ((units -= 3) > -1) bytes.push(239, 191, 189);
        }
        leadSurrogate = null;
        if (codePoint < 128) {
          if ((units -= 1) < 0) break;
          bytes.push(codePoint);
        } else if (codePoint < 2048) {
          if ((units -= 2) < 0) break;
          bytes.push(codePoint >> 6 | 192, codePoint & 63 | 128);
        } else if (codePoint < 65536) {
          if ((units -= 3) < 0) break;
          bytes.push(codePoint >> 12 | 224, codePoint >> 6 & 63 | 128, codePoint & 63 | 128);
        } else if (codePoint < 1114112) {
          if ((units -= 4) < 0) break;
          bytes.push(codePoint >> 18 | 240, codePoint >> 12 & 63 | 128, codePoint >> 6 & 63 | 128, codePoint & 63 | 128);
        } else {
          throw new Error("Invalid code point");
        }
      }
      return bytes;
    }
    function asciiToBytes(str) {
      var byteArray = [];
      for (var i2 = 0; i2 < str.length; ++i2) {
        byteArray.push(str.charCodeAt(i2) & 255);
      }
      return byteArray;
    }
    function utf16leToBytes(str, units) {
      var c2, hi, lo;
      var byteArray = [];
      for (var i2 = 0; i2 < str.length; ++i2) {
        if ((units -= 2) < 0) break;
        c2 = str.charCodeAt(i2);
        hi = c2 >> 8;
        lo = c2 % 256;
        byteArray.push(lo);
        byteArray.push(hi);
      }
      return byteArray;
    }
    function base64ToBytes(str) {
      return base64.toByteArray(base64clean(str));
    }
    function blitBuffer(src, dst, offset, length) {
      for (var i2 = 0; i2 < length; ++i2) {
        if (i2 + offset >= dst.length || i2 >= src.length) break;
        dst[i2 + offset] = src[i2];
      }
      return i2;
    }
    function isnan(val) {
      return val !== val;
    }
  }
});

// (disabled):crypto
var require_crypto = __commonJS({
  "(disabled):crypto"() {
    "use strict";
  }
});

// node_modules/@aws-crypto/sha256-js/node_modules/tslib/tslib.es6.js
var tslib_es6_exports = {};
__export(tslib_es6_exports, {
  __assign: () => __assign,
  __asyncDelegator: () => __asyncDelegator,
  __asyncGenerator: () => __asyncGenerator,
  __asyncValues: () => __asyncValues,
  __await: () => __await,
  __awaiter: () => __awaiter,
  __classPrivateFieldGet: () => __classPrivateFieldGet,
  __classPrivateFieldSet: () => __classPrivateFieldSet,
  __createBinding: () => __createBinding,
  __decorate: () => __decorate,
  __exportStar: () => __exportStar,
  __extends: () => __extends,
  __generator: () => __generator,
  __importDefault: () => __importDefault,
  __importStar: () => __importStar,
  __makeTemplateObject: () => __makeTemplateObject,
  __metadata: () => __metadata,
  __param: () => __param,
  __read: () => __read,
  __rest: () => __rest,
  __spread: () => __spread,
  __spreadArrays: () => __spreadArrays,
  __values: () => __values
});
function __extends(d2, b2) {
  extendStatics(d2, b2);
  function __() {
    this.constructor = d2;
  }
  d2.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
}
function __rest(s2, e3) {
  var t2 = {};
  for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2) && e3.indexOf(p2) < 0) t2[p2] = s2[p2];
  if (s2 != null && typeof Object.getOwnPropertySymbols === "function") for (var i2 = 0, p2 = Object.getOwnPropertySymbols(s2); i2 < p2.length; i2++) {
    if (e3.indexOf(p2[i2]) < 0 && Object.prototype.propertyIsEnumerable.call(s2, p2[i2])) t2[p2[i2]] = s2[p2[i2]];
  }
  return t2;
}
function __decorate(decorators, target, key, desc) {
  var c2 = arguments.length, r3 = c2 < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d2;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r3 = Reflect.decorate(decorators, target, key, desc);
  else for (var i2 = decorators.length - 1; i2 >= 0; i2--) if (d2 = decorators[i2]) r3 = (c2 < 3 ? d2(r3) : c2 > 3 ? d2(target, key, r3) : d2(target, key)) || r3;
  return c2 > 3 && r3 && Object.defineProperty(target, key, r3), r3;
}
function __param(paramIndex, decorator) {
  return function(target, key) {
    decorator(target, key, paramIndex);
  };
}
function __metadata(metadataKey, metadataValue) {
  if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}
function __awaiter(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve) {
      resolve(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e3) {
        reject(e3);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e3) {
        reject(e3);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}
function __generator(thisArg, body) {
  var _2 = {
    label: 0,
    sent: function() {
      if (t2[0] & 1) throw t2[1];
      return t2[1];
    },
    trys: [],
    ops: []
  }, f2, y2, t2, g2;
  return g2 = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g2[Symbol.iterator] = function() {
    return this;
  }), g2;
  function verb(n3) {
    return function(v2) {
      return step([n3, v2]);
    };
  }
  function step(op) {
    if (f2) throw new TypeError("Generator is already executing.");
    while (_2) try {
      if (f2 = 1, y2 && (t2 = op[0] & 2 ? y2["return"] : op[0] ? y2["throw"] || ((t2 = y2["return"]) && t2.call(y2), 0) : y2.next) && !(t2 = t2.call(y2, op[1])).done) return t2;
      if (y2 = 0, t2) op = [op[0] & 2, t2.value];
      switch (op[0]) {
        case 0:
        case 1:
          t2 = op;
          break;
        case 4:
          _2.label++;
          return {
            value: op[1],
            done: false
          };
        case 5:
          _2.label++;
          y2 = op[1];
          op = [0];
          continue;
        case 7:
          op = _2.ops.pop();
          _2.trys.pop();
          continue;
        default:
          if (!(t2 = _2.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _2 = 0;
            continue;
          }
          if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
            _2.label = op[1];
            break;
          }
          if (op[0] === 6 && _2.label < t2[1]) {
            _2.label = t2[1];
            t2 = op;
            break;
          }
          if (t2 && _2.label < t2[2]) {
            _2.label = t2[2];
            _2.ops.push(op);
            break;
          }
          if (t2[2]) _2.ops.pop();
          _2.trys.pop();
          continue;
      }
      op = body.call(thisArg, _2);
    } catch (e3) {
      op = [6, e3];
      y2 = 0;
    } finally {
      f2 = t2 = 0;
    }
    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
}
function __createBinding(o2, m2, k2, k22) {
  if (k22 === void 0) k22 = k2;
  o2[k22] = m2[k2];
}
function __exportStar(m2, exports) {
  for (var p2 in m2) if (p2 !== "default" && !exports.hasOwnProperty(p2)) exports[p2] = m2[p2];
}
function __values(o2) {
  var s2 = typeof Symbol === "function" && Symbol.iterator, m2 = s2 && o2[s2], i2 = 0;
  if (m2) return m2.call(o2);
  if (o2 && typeof o2.length === "number") return {
    next: function() {
      if (o2 && i2 >= o2.length) o2 = void 0;
      return {
        value: o2 && o2[i2++],
        done: !o2
      };
    }
  };
  throw new TypeError(s2 ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function __read(o2, n3) {
  var m2 = typeof Symbol === "function" && o2[Symbol.iterator];
  if (!m2) return o2;
  var i2 = m2.call(o2), r3, ar = [], e3;
  try {
    while ((n3 === void 0 || n3-- > 0) && !(r3 = i2.next()).done) ar.push(r3.value);
  } catch (error2) {
    e3 = {
      error: error2
    };
  } finally {
    try {
      if (r3 && !r3.done && (m2 = i2["return"])) m2.call(i2);
    } finally {
      if (e3) throw e3.error;
    }
  }
  return ar;
}
function __spread() {
  for (var ar = [], i2 = 0; i2 < arguments.length; i2++) ar = ar.concat(__read(arguments[i2]));
  return ar;
}
function __spreadArrays() {
  for (var s2 = 0, i2 = 0, il = arguments.length; i2 < il; i2++) s2 += arguments[i2].length;
  for (var r3 = Array(s2), k2 = 0, i2 = 0; i2 < il; i2++) for (var a2 = arguments[i2], j2 = 0, jl = a2.length; j2 < jl; j2++, k2++) r3[k2] = a2[j2];
  return r3;
}
function __await(v2) {
  return this instanceof __await ? (this.v = v2, this) : new __await(v2);
}
function __asyncGenerator(thisArg, _arguments, generator) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var g2 = generator.apply(thisArg, _arguments || []), i2, q2 = [];
  return i2 = {}, verb("next"), verb("throw"), verb("return"), i2[Symbol.asyncIterator] = function() {
    return this;
  }, i2;
  function verb(n3) {
    if (g2[n3]) i2[n3] = function(v2) {
      return new Promise(function(a2, b2) {
        q2.push([n3, v2, a2, b2]) > 1 || resume(n3, v2);
      });
    };
  }
  function resume(n3, v2) {
    try {
      step(g2[n3](v2));
    } catch (e3) {
      settle(q2[0][3], e3);
    }
  }
  function step(r3) {
    r3.value instanceof __await ? Promise.resolve(r3.value.v).then(fulfill, reject) : settle(q2[0][2], r3);
  }
  function fulfill(value) {
    resume("next", value);
  }
  function reject(value) {
    resume("throw", value);
  }
  function settle(f2, v2) {
    if (f2(v2), q2.shift(), q2.length) resume(q2[0][0], q2[0][1]);
  }
}
function __asyncDelegator(o2) {
  var i2, p2;
  return i2 = {}, verb("next"), verb("throw", function(e3) {
    throw e3;
  }), verb("return"), i2[Symbol.iterator] = function() {
    return this;
  }, i2;
  function verb(n3, f2) {
    i2[n3] = o2[n3] ? function(v2) {
      return (p2 = !p2) ? {
        value: __await(o2[n3](v2)),
        done: n3 === "return"
      } : f2 ? f2(v2) : v2;
    } : f2;
  }
}
function __asyncValues(o2) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var m2 = o2[Symbol.asyncIterator], i2;
  return m2 ? m2.call(o2) : (o2 = typeof __values === "function" ? __values(o2) : o2[Symbol.iterator](), i2 = {}, verb("next"), verb("throw"), verb("return"), i2[Symbol.asyncIterator] = function() {
    return this;
  }, i2);
  function verb(n3) {
    i2[n3] = o2[n3] && function(v2) {
      return new Promise(function(resolve, reject) {
        v2 = o2[n3](v2), settle(resolve, reject, v2.done, v2.value);
      });
    };
  }
  function settle(resolve, reject, d2, v2) {
    Promise.resolve(v2).then(function(v3) {
      resolve({
        value: v3,
        done: d2
      });
    }, reject);
  }
}
function __makeTemplateObject(cooked, raw) {
  if (Object.defineProperty) {
    Object.defineProperty(cooked, "raw", {
      value: raw
    });
  } else {
    cooked.raw = raw;
  }
  return cooked;
}
function __importStar(mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) {
    for (var k2 in mod) if (Object.hasOwnProperty.call(mod, k2)) result[k2] = mod[k2];
  }
  result.default = mod;
  return result;
}
function __importDefault(mod) {
  return mod && mod.__esModule ? mod : {
    default: mod
  };
}
function __classPrivateFieldGet(receiver, privateMap) {
  if (!privateMap.has(receiver)) {
    throw new TypeError("attempted to get private field on non-instance");
  }
  return privateMap.get(receiver);
}
function __classPrivateFieldSet(receiver, privateMap, value) {
  if (!privateMap.has(receiver)) {
    throw new TypeError("attempted to set private field on non-instance");
  }
  privateMap.set(receiver, value);
  return value;
}
var extendStatics, __assign;
var init_tslib_es6 = __esm({
  "node_modules/@aws-crypto/sha256-js/node_modules/tslib/tslib.es6.js"() {
    "use strict";
    extendStatics = function(d2, b2) {
      extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function(d3, b3) {
        d3.__proto__ = b3;
      } || function(d3, b3) {
        for (var p2 in b3) if (b3.hasOwnProperty(p2)) d3[p2] = b3[p2];
      };
      return extendStatics(d2, b2);
    };
    __assign = function() {
      __assign = Object.assign || function __assign2(t2) {
        for (var s2, i2 = 1, n3 = arguments.length; i2 < n3; i2++) {
          s2 = arguments[i2];
          for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
        }
        return t2;
      };
      return __assign.apply(this, arguments);
    };
  }
});

// node_modules/@aws-crypto/sha256-js/build/constants.js
var require_constants = __commonJS({
  "node_modules/@aws-crypto/sha256-js/build/constants.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.MAX_HASHABLE_LENGTH = exports.INIT = exports.KEY = exports.DIGEST_LENGTH = exports.BLOCK_SIZE = void 0;
    exports.BLOCK_SIZE = 64;
    exports.DIGEST_LENGTH = 32;
    exports.KEY = new Uint32Array([1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298]);
    exports.INIT = [1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225];
    exports.MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;
  }
});

// node_modules/@aws-crypto/sha256-js/build/RawSha256.js
var require_RawSha256 = __commonJS({
  "node_modules/@aws-crypto/sha256-js/build/RawSha256.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.RawSha256 = void 0;
    var constants_1 = require_constants();
    var RawSha256 = (
      /** @class */
      function() {
        function RawSha2562() {
          this.state = Int32Array.from(constants_1.INIT);
          this.temp = new Int32Array(64);
          this.buffer = new Uint8Array(64);
          this.bufferLength = 0;
          this.bytesHashed = 0;
          this.finished = false;
        }
        RawSha2562.prototype.update = function(data) {
          if (this.finished) {
            throw new Error("Attempted to update an already finished hash.");
          }
          var position = 0;
          var byteLength = data.byteLength;
          this.bytesHashed += byteLength;
          if (this.bytesHashed * 8 > constants_1.MAX_HASHABLE_LENGTH) {
            throw new Error("Cannot hash more than 2^53 - 1 bits");
          }
          while (byteLength > 0) {
            this.buffer[this.bufferLength++] = data[position++];
            byteLength--;
            if (this.bufferLength === constants_1.BLOCK_SIZE) {
              this.hashBuffer();
              this.bufferLength = 0;
            }
          }
        };
        RawSha2562.prototype.digest = function() {
          if (!this.finished) {
            var bitsHashed = this.bytesHashed * 8;
            var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);
            var undecoratedLength = this.bufferLength;
            bufferView.setUint8(this.bufferLength++, 128);
            if (undecoratedLength % constants_1.BLOCK_SIZE >= constants_1.BLOCK_SIZE - 8) {
              for (var i2 = this.bufferLength; i2 < constants_1.BLOCK_SIZE; i2++) {
                bufferView.setUint8(i2, 0);
              }
              this.hashBuffer();
              this.bufferLength = 0;
            }
            for (var i2 = this.bufferLength; i2 < constants_1.BLOCK_SIZE - 8; i2++) {
              bufferView.setUint8(i2, 0);
            }
            bufferView.setUint32(constants_1.BLOCK_SIZE - 8, Math.floor(bitsHashed / 4294967296), true);
            bufferView.setUint32(constants_1.BLOCK_SIZE - 4, bitsHashed);
            this.hashBuffer();
            this.finished = true;
          }
          var out = new Uint8Array(constants_1.DIGEST_LENGTH);
          for (var i2 = 0; i2 < 8; i2++) {
            out[i2 * 4] = this.state[i2] >>> 24 & 255;
            out[i2 * 4 + 1] = this.state[i2] >>> 16 & 255;
            out[i2 * 4 + 2] = this.state[i2] >>> 8 & 255;
            out[i2 * 4 + 3] = this.state[i2] >>> 0 & 255;
          }
          return out;
        };
        RawSha2562.prototype.hashBuffer = function() {
          var _a3 = this, buffer = _a3.buffer, state = _a3.state;
          var state0 = state[0], state1 = state[1], state2 = state[2], state3 = state[3], state4 = state[4], state5 = state[5], state6 = state[6], state7 = state[7];
          for (var i2 = 0; i2 < constants_1.BLOCK_SIZE; i2++) {
            if (i2 < 16) {
              this.temp[i2] = (buffer[i2 * 4] & 255) << 24 | (buffer[i2 * 4 + 1] & 255) << 16 | (buffer[i2 * 4 + 2] & 255) << 8 | buffer[i2 * 4 + 3] & 255;
            } else {
              var u2 = this.temp[i2 - 2];
              var t1_1 = (u2 >>> 17 | u2 << 15) ^ (u2 >>> 19 | u2 << 13) ^ u2 >>> 10;
              u2 = this.temp[i2 - 15];
              var t2_1 = (u2 >>> 7 | u2 << 25) ^ (u2 >>> 18 | u2 << 14) ^ u2 >>> 3;
              this.temp[i2] = (t1_1 + this.temp[i2 - 7] | 0) + (t2_1 + this.temp[i2 - 16] | 0);
            }
            var t1 = (((state4 >>> 6 | state4 << 26) ^ (state4 >>> 11 | state4 << 21) ^ (state4 >>> 25 | state4 << 7)) + (state4 & state5 ^ ~state4 & state6) | 0) + (state7 + (constants_1.KEY[i2] + this.temp[i2] | 0) | 0) | 0;
            var t2 = ((state0 >>> 2 | state0 << 30) ^ (state0 >>> 13 | state0 << 19) ^ (state0 >>> 22 | state0 << 10)) + (state0 & state1 ^ state0 & state2 ^ state1 & state2) | 0;
            state7 = state6;
            state6 = state5;
            state5 = state4;
            state4 = state3 + t1 | 0;
            state3 = state2;
            state2 = state1;
            state1 = state0;
            state0 = t1 + t2 | 0;
          }
          state[0] += state0;
          state[1] += state1;
          state[2] += state2;
          state[3] += state3;
          state[4] += state4;
          state[5] += state5;
          state[6] += state6;
          state[7] += state7;
        };
        return RawSha2562;
      }()
    );
    exports.RawSha256 = RawSha256;
  }
});

// node_modules/@aws-sdk/util-utf8-browser/dist-es/pureJs.js
var fromUtf8, toUtf8;
var init_pureJs = __esm({
  "node_modules/@aws-sdk/util-utf8-browser/dist-es/pureJs.js"() {
    "use strict";
    fromUtf8 = (input) => {
      const bytes = [];
      for (let i2 = 0, len = input.length; i2 < len; i2++) {
        const value = input.charCodeAt(i2);
        if (value < 128) {
          bytes.push(value);
        } else if (value < 2048) {
          bytes.push(value >> 6 | 192, value & 63 | 128);
        } else if (i2 + 1 < input.length && (value & 64512) === 55296 && (input.charCodeAt(i2 + 1) & 64512) === 56320) {
          const surrogatePair = 65536 + ((value & 1023) << 10) + (input.charCodeAt(++i2) & 1023);
          bytes.push(surrogatePair >> 18 | 240, surrogatePair >> 12 & 63 | 128, surrogatePair >> 6 & 63 | 128, surrogatePair & 63 | 128);
        } else {
          bytes.push(value >> 12 | 224, value >> 6 & 63 | 128, value & 63 | 128);
        }
      }
      return Uint8Array.from(bytes);
    };
    toUtf8 = (input) => {
      let decoded = "";
      for (let i2 = 0, len = input.length; i2 < len; i2++) {
        const byte = input[i2];
        if (byte < 128) {
          decoded += String.fromCharCode(byte);
        } else if (192 <= byte && byte < 224) {
          const nextByte = input[++i2];
          decoded += String.fromCharCode((byte & 31) << 6 | nextByte & 63);
        } else if (240 <= byte && byte < 365) {
          const surrogatePair = [byte, input[++i2], input[++i2], input[++i2]];
          const encoded = "%" + surrogatePair.map((byteValue) => byteValue.toString(16)).join("%");
          decoded += decodeURIComponent(encoded);
        } else {
          decoded += String.fromCharCode((byte & 15) << 12 | (input[++i2] & 63) << 6 | input[++i2] & 63);
        }
      }
      return decoded;
    };
  }
});

// node_modules/@aws-sdk/util-utf8-browser/dist-es/whatwgEncodingApi.js
function fromUtf82(input) {
  return new TextEncoder().encode(input);
}
function toUtf82(input) {
  return new TextDecoder("utf-8").decode(input);
}
var init_whatwgEncodingApi = __esm({
  "node_modules/@aws-sdk/util-utf8-browser/dist-es/whatwgEncodingApi.js"() {
    "use strict";
  }
});

// node_modules/@aws-sdk/util-utf8-browser/dist-es/index.js
var dist_es_exports = {};
__export(dist_es_exports, {
  fromUtf8: () => fromUtf83,
  toUtf8: () => toUtf83
});
var fromUtf83, toUtf83;
var init_dist_es = __esm({
  "node_modules/@aws-sdk/util-utf8-browser/dist-es/index.js"() {
    "use strict";
    init_pureJs();
    init_whatwgEncodingApi();
    fromUtf83 = (input) => typeof TextEncoder === "function" ? fromUtf82(input) : fromUtf8(input);
    toUtf83 = (input) => typeof TextDecoder === "function" ? toUtf82(input) : toUtf8(input);
  }
});

// node_modules/@aws-crypto/util/build/convertToBuffer.js
var require_convertToBuffer = __commonJS({
  "node_modules/@aws-crypto/util/build/convertToBuffer.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.convertToBuffer = void 0;
    var util_utf8_browser_1 = (init_dist_es(), __toCommonJS(dist_es_exports));
    var fromUtf84 = typeof Buffer !== "undefined" && Buffer.from ? function(input) {
      return Buffer.from(input, "utf8");
    } : util_utf8_browser_1.fromUtf8;
    function convertToBuffer(data) {
      if (data instanceof Uint8Array) return data;
      if (typeof data === "string") {
        return fromUtf84(data);
      }
      if (ArrayBuffer.isView(data)) {
        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);
      }
      return new Uint8Array(data);
    }
    exports.convertToBuffer = convertToBuffer;
  }
});

// node_modules/@aws-crypto/util/build/isEmptyData.js
var require_isEmptyData = __commonJS({
  "node_modules/@aws-crypto/util/build/isEmptyData.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.isEmptyData = void 0;
    function isEmptyData(data) {
      if (typeof data === "string") {
        return data.length === 0;
      }
      return data.byteLength === 0;
    }
    exports.isEmptyData = isEmptyData;
  }
});

// node_modules/@aws-crypto/util/build/numToUint8.js
var require_numToUint8 = __commonJS({
  "node_modules/@aws-crypto/util/build/numToUint8.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.numToUint8 = void 0;
    function numToUint8(num) {
      return new Uint8Array([(num & 4278190080) >> 24, (num & 16711680) >> 16, (num & 65280) >> 8, num & 255]);
    }
    exports.numToUint8 = numToUint8;
  }
});

// node_modules/@aws-crypto/util/build/uint32ArrayFrom.js
var require_uint32ArrayFrom = __commonJS({
  "node_modules/@aws-crypto/util/build/uint32ArrayFrom.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.uint32ArrayFrom = void 0;
    function uint32ArrayFrom(a_lookUpTable) {
      if (!Array.from) {
        var return_array = new Uint32Array(a_lookUpTable.length);
        var a_index = 0;
        while (a_index < a_lookUpTable.length) {
          return_array[a_index] = a_lookUpTable[a_index];
        }
        return return_array;
      }
      return Uint32Array.from(a_lookUpTable);
    }
    exports.uint32ArrayFrom = uint32ArrayFrom;
  }
});

// node_modules/@aws-crypto/util/build/index.js
var require_build = __commonJS({
  "node_modules/@aws-crypto/util/build/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.uint32ArrayFrom = exports.numToUint8 = exports.isEmptyData = exports.convertToBuffer = void 0;
    var convertToBuffer_1 = require_convertToBuffer();
    Object.defineProperty(exports, "convertToBuffer", {
      enumerable: true,
      get: function() {
        return convertToBuffer_1.convertToBuffer;
      }
    });
    var isEmptyData_1 = require_isEmptyData();
    Object.defineProperty(exports, "isEmptyData", {
      enumerable: true,
      get: function() {
        return isEmptyData_1.isEmptyData;
      }
    });
    var numToUint8_1 = require_numToUint8();
    Object.defineProperty(exports, "numToUint8", {
      enumerable: true,
      get: function() {
        return numToUint8_1.numToUint8;
      }
    });
    var uint32ArrayFrom_1 = require_uint32ArrayFrom();
    Object.defineProperty(exports, "uint32ArrayFrom", {
      enumerable: true,
      get: function() {
        return uint32ArrayFrom_1.uint32ArrayFrom;
      }
    });
  }
});

// node_modules/@aws-crypto/sha256-js/build/jsSha256.js
var require_jsSha256 = __commonJS({
  "node_modules/@aws-crypto/sha256-js/build/jsSha256.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.Sha256 = void 0;
    var tslib_1 = (init_tslib_es6(), __toCommonJS(tslib_es6_exports));
    var constants_1 = require_constants();
    var RawSha256_1 = require_RawSha256();
    var util_1 = require_build();
    var Sha2563 = (
      /** @class */
      function() {
        function Sha2564(secret) {
          this.hash = new RawSha256_1.RawSha256();
          if (secret) {
            this.outer = new RawSha256_1.RawSha256();
            var inner = bufferFromSecret(secret);
            var outer = new Uint8Array(constants_1.BLOCK_SIZE);
            outer.set(inner);
            for (var i2 = 0; i2 < constants_1.BLOCK_SIZE; i2++) {
              inner[i2] ^= 54;
              outer[i2] ^= 92;
            }
            this.hash.update(inner);
            this.outer.update(outer);
            for (var i2 = 0; i2 < inner.byteLength; i2++) {
              inner[i2] = 0;
            }
          }
        }
        Sha2564.prototype.update = function(toHash) {
          if ((0, util_1.isEmptyData)(toHash) || this.error) {
            return;
          }
          try {
            this.hash.update((0, util_1.convertToBuffer)(toHash));
          } catch (e3) {
            this.error = e3;
          }
        };
        Sha2564.prototype.digestSync = function() {
          if (this.error) {
            throw this.error;
          }
          if (this.outer) {
            if (!this.outer.finished) {
              this.outer.update(this.hash.digest());
            }
            return this.outer.digest();
          }
          return this.hash.digest();
        };
        Sha2564.prototype.digest = function() {
          return (0, tslib_1.__awaiter)(this, void 0, void 0, function() {
            return (0, tslib_1.__generator)(this, function(_a3) {
              return [2, this.digestSync()];
            });
          });
        };
        return Sha2564;
      }()
    );
    exports.Sha256 = Sha2563;
    function bufferFromSecret(secret) {
      var input = (0, util_1.convertToBuffer)(secret);
      if (input.byteLength > constants_1.BLOCK_SIZE) {
        var bufferHash = new RawSha256_1.RawSha256();
        bufferHash.update(input);
        input = bufferHash.digest();
      }
      var buffer = new Uint8Array(constants_1.BLOCK_SIZE);
      buffer.set(input);
      return buffer;
    }
  }
});

// node_modules/@aws-crypto/sha256-js/build/index.js
var require_build2 = __commonJS({
  "node_modules/@aws-crypto/sha256-js/build/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    var tslib_1 = (init_tslib_es6(), __toCommonJS(tslib_es6_exports));
    (0, tslib_1.__exportStar)(require_jsSha256(), exports);
  }
});

// node_modules/unfetch/dist/unfetch.module.js
var unfetch_module_exports = {};
__export(unfetch_module_exports, {
  default: () => unfetch_module_default
});
function unfetch_module_default(e3, n3) {
  return n3 = n3 || {}, new Promise(function(t2, r3) {
    var s2 = new XMLHttpRequest(), o2 = [], u2 = [], i2 = {}, a2 = function() {
      return {
        ok: 2 == (s2.status / 100 | 0),
        statusText: s2.statusText,
        status: s2.status,
        url: s2.responseURL,
        text: function() {
          return Promise.resolve(s2.responseText);
        },
        json: function() {
          return Promise.resolve(s2.responseText).then(JSON.parse);
        },
        blob: function() {
          return Promise.resolve(new Blob([s2.response]));
        },
        clone: a2,
        headers: {
          keys: function() {
            return o2;
          },
          entries: function() {
            return u2;
          },
          get: function(e4) {
            return i2[e4.toLowerCase()];
          },
          has: function(e4) {
            return e4.toLowerCase() in i2;
          }
        }
      };
    };
    for (var l2 in s2.open(n3.method || "get", e3, true), s2.onload = function() {
      s2.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm, function(e4, n4, t3) {
        o2.push(n4 = n4.toLowerCase()), u2.push([n4, t3]), i2[n4] = i2[n4] ? i2[n4] + "," + t3 : t3;
      }), t2(a2());
    }, s2.onerror = r3, s2.withCredentials = "include" == n3.credentials, n3.headers) s2.setRequestHeader(l2, n3.headers[l2]);
    s2.send(n3.body || null);
  });
}
var init_unfetch_module = __esm({
  "node_modules/unfetch/dist/unfetch.module.js"() {
    "use strict";
  }
});

// node_modules/isomorphic-unfetch/browser.js
var require_browser = __commonJS({
  "node_modules/isomorphic-unfetch/browser.js"(exports, module2) {
    "use strict";
    module2.exports = self.fetch || (self.fetch = (init_unfetch_module(), __toCommonJS(unfetch_module_exports)).default || (init_unfetch_module(), __toCommonJS(unfetch_module_exports)));
  }
});

// node_modules/js-cookie/src/js.cookie.js
var require_js_cookie = __commonJS({
  "node_modules/js-cookie/src/js.cookie.js"(exports, module2) {
    "use strict";
    (function(factory) {
      var registeredInModuleLoader;
      if (typeof define === "function" && define.amd) {
        define(factory);
        registeredInModuleLoader = true;
      }
      if (typeof exports === "object") {
        module2.exports = factory();
        registeredInModuleLoader = true;
      }
      if (!registeredInModuleLoader) {
        var OldCookies = window.Cookies;
        var api = window.Cookies = factory();
        api.noConflict = function() {
          window.Cookies = OldCookies;
          return api;
        };
      }
    })(function() {
      function extend() {
        var i2 = 0;
        var result = {};
        for (; i2 < arguments.length; i2++) {
          var attributes = arguments[i2];
          for (var key in attributes) {
            result[key] = attributes[key];
          }
        }
        return result;
      }
      function decode(s2) {
        return s2.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
      }
      function init3(converter) {
        function api() {
        }
        function set2(key, value, attributes) {
          if (typeof document === "undefined") {
            return;
          }
          attributes = extend({
            path: "/"
          }, api.defaults, attributes);
          if (typeof attributes.expires === "number") {
            attributes.expires = new Date(/* @__PURE__ */ new Date() * 1 + attributes.expires * 864e5);
          }
          attributes.expires = attributes.expires ? attributes.expires.toUTCString() : "";
          try {
            var result = JSON.stringify(value);
            if (/^[\{\[]/.test(result)) {
              value = result;
            }
          } catch (e3) {
          }
          value = converter.write ? converter.write(value, key) : encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);
          key = encodeURIComponent(String(key)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape);
          var stringifiedAttributes = "";
          for (var attributeName in attributes) {
            if (!attributes[attributeName]) {
              continue;
            }
            stringifiedAttributes += "; " + attributeName;
            if (attributes[attributeName] === true) {
              continue;
            }
            stringifiedAttributes += "=" + attributes[attributeName].split(";")[0];
          }
          return document.cookie = key + "=" + value + stringifiedAttributes;
        }
        function get2(key, json) {
          if (typeof document === "undefined") {
            return;
          }
          var jar = {};
          var cookies = document.cookie ? document.cookie.split("; ") : [];
          var i2 = 0;
          for (; i2 < cookies.length; i2++) {
            var parts = cookies[i2].split("=");
            var cookie = parts.slice(1).join("=");
            if (!json && cookie.charAt(0) === '"') {
              cookie = cookie.slice(1, -1);
            }
            try {
              var name = decode(parts[0]);
              cookie = (converter.read || converter)(cookie, name) || decode(cookie);
              if (json) {
                try {
                  cookie = JSON.parse(cookie);
                } catch (e3) {
                }
              }
              jar[name] = cookie;
              if (key === name) {
                break;
              }
            } catch (e3) {
            }
          }
          return key ? jar[key] : jar;
        }
        api.set = set2;
        api.get = function(key) {
          return get2(
            key,
            false
            /* read as raw */
          );
        };
        api.getJSON = function(key) {
          return get2(
            key,
            true
            /* read as json */
          );
        };
        api.remove = function(key, attributes) {
          set2(key, "", extend(attributes, {
            expires: -1
          }));
        };
        api.defaults = {};
        api.withConverter = init3;
        return api;
      }
      return init3(function() {
      });
    });
  }
});

// node_modules/@capacitor/browser/dist/esm/index.js
var Browser = registerPlugin("Browser", {
  web: () => import("./web-R53PE3U6.js").then((m2) => new m2.BrowserWeb())
});

// src/app/services/api-wrappers/forfaits.service.ts
var _ForfaitsWrapperService = class _ForfaitsWrapperService {
  constructor(forfaitsService, storage, errorHandler2, accountService) {
    this.forfaitsService = forfaitsService;
    this.storage = storage;
    this.errorHandler = errorHandler2;
    this.accountService = accountService;
  }
  loadForfaits() {
    return __async(this, null, function* () {
      var _a3;
      try {
        const [defaultForfaitResponse, forfaitsResponse] = yield Promise.all([
          this.forfaitsService.listForfait({
            program: environment.program,
            expand: ["fiche"],
            type: "default",
            limit: 1
          }).toPromise(),
          this.forfaitsService.listForfait({
            program: environment.program,
            expand: ["fiche"],
            type: "classic",
            limit: 100
          }).toPromise()
        ]);
        const defaultForfait = (_a3 = defaultForfaitResponse == null ? void 0 : defaultForfaitResponse.data) == null ? void 0 : _a3[0];
        if (!defaultForfait) {
          throw new Error("Aucun forfait par d\xE9faut trouv\xE9");
        }
        yield this.storage.set("defaultForfait", defaultForfait);
        if (forfaitsResponse == null ? void 0 : forfaitsResponse.data) {
          yield this.storage.set("forfaits", forfaitsResponse.data);
        } else {
          yield this.storage.set("forfaits", []);
        }
      } catch (error2) {
        this.errorHandler.handleError(error2);
        throw error2;
      }
    });
  }
  getForfaits() {
    return __async(this, null, function* () {
      return yield this.storage.get("forfaits");
    });
  }
  getDefaultForfait() {
    return __async(this, null, function* () {
      return yield this.storage.get("defaultForfait");
    });
  }
  /**
   * Charge uniquement les forfaits d'organisation et les ajoute aux forfaits existants
   * Utile pour ajouter les forfaits d'organisation après le chargement initial
   */
  loadOrganizationForfaits() {
    return __async(this, null, function* () {
      var _a3, _b, _c;
      try {
        const cyclistState = this.accountService.cyclistState();
        if (cyclistState.state === "unknown" || cyclistState.state === "error" || !("cyclist" in cyclistState)) {
          console.warn("Cyclist not available for loading organization forfaits");
          return;
        }
        const cyclist = cyclistState.cyclist;
        const registration = (_b = (_a3 = cyclist.registrations) == null ? void 0 : _a3.data) == null ? void 0 : _b[0];
        if (!((_c = registration == null ? void 0 : registration.memberships) == null ? void 0 : _c.data) || registration.memberships.data.length === 0) {
          return;
        }
        let allForfaits = (yield this.storage.get("forfaits")) || [];
        const membershipForfaitsPromises = registration.memberships.data.map((membership) => {
          const organizationId = typeof membership === "string" ? membership : membership.organization;
          return this.forfaitsService.listForfait({
            program: environment.program,
            expand: ["fiche"],
            organization: organizationId,
            limit: 100
          }).toPromise();
        });
        const membershipForfaitsResponses = yield Promise.all(membershipForfaitsPromises);
        for (const response of membershipForfaitsResponses) {
          if (response == null ? void 0 : response.data) {
            const newForfaits = response.data.filter((newForfait) => !allForfaits.some((existingForfait) => existingForfait.id === newForfait.id));
            allForfaits = [...allForfaits, ...newForfaits];
          }
        }
        yield this.storage.set("forfaits", allForfaits);
      } catch (error2) {
        this.errorHandler.handleError(error2);
        console.error("Error loading organization forfaits:", error2);
      }
    });
  }
  /**
   * Vérifie s'il y a des forfaits disponibles dans le storage
   */
  hasForfaits() {
    return __async(this, null, function* () {
      try {
        const forfaits = yield this.getForfaits();
        return forfaits && forfaits.length > 0;
      } catch (error2) {
        return false;
      }
    });
  }
};
_ForfaitsWrapperService.\u0275fac = function ForfaitsWrapperService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ForfaitsWrapperService)(\u0275\u0275inject(ForfaitsService), \u0275\u0275inject(StorageService), \u0275\u0275inject(ErrorHandlerService), \u0275\u0275inject(AccountService));
};
_ForfaitsWrapperService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ForfaitsWrapperService, factory: _ForfaitsWrapperService.\u0275fac, providedIn: "root" });
var ForfaitsWrapperService = _ForfaitsWrapperService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ForfaitsWrapperService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: ForfaitsService }, { type: StorageService }, { type: ErrorHandlerService }, { type: AccountService }], null);
})();

// node_modules/amazon-cognito-identity-js/es/AuthenticationHelper.js
var import_buffer = __toESM(require_buffer());

// node_modules/amazon-cognito-identity-js/es/utils/cryptoSecureRandomInt.js
var crypto;
if (typeof window !== "undefined" && window.crypto) {
  crypto = window.crypto;
}
if (!crypto && typeof window !== "undefined" && window.msCrypto) {
  crypto = window.msCrypto;
}
if (!crypto && typeof global !== "undefined" && global.crypto) {
  crypto = global.crypto;
}
if (!crypto && typeof __require === "function") {
  try {
    crypto = require_crypto();
  } catch (err) {
  }
}
function cryptoSecureRandomInt() {
  if (crypto) {
    if (typeof crypto.getRandomValues === "function") {
      try {
        return crypto.getRandomValues(new Uint32Array(1))[0];
      } catch (err) {
      }
    }
    if (typeof crypto.randomBytes === "function") {
      try {
        return crypto.randomBytes(4).readInt32LE();
      } catch (err) {
      }
    }
  }
  throw new Error("Native crypto module could not be used to get secure random number.");
}

// node_modules/amazon-cognito-identity-js/es/utils/WordArray.js
function hexStringify(wordArray) {
  var words = wordArray.words;
  var sigBytes = wordArray.sigBytes;
  var hexChars = [];
  for (var i2 = 0; i2 < sigBytes; i2++) {
    var bite = words[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255;
    hexChars.push((bite >>> 4).toString(16));
    hexChars.push((bite & 15).toString(16));
  }
  return hexChars.join("");
}
var WordArray = /* @__PURE__ */ function() {
  function WordArray2(words, sigBytes) {
    words = this.words = words || [];
    if (sigBytes != void 0) {
      this.sigBytes = sigBytes;
    } else {
      this.sigBytes = words.length * 4;
    }
  }
  var _proto = WordArray2.prototype;
  _proto.random = function random(nBytes) {
    var words = [];
    for (var i2 = 0; i2 < nBytes; i2 += 4) {
      words.push(cryptoSecureRandomInt());
    }
    return new WordArray2(words, nBytes);
  };
  _proto.toString = function toString() {
    return hexStringify(this);
  };
  return WordArray2;
}();

// node_modules/amazon-cognito-identity-js/es/AuthenticationHelper.js
var import_sha256_js = __toESM(require_build2());

// node_modules/amazon-cognito-identity-js/es/BigInteger.js
var BigInteger_default = BigInteger;
function BigInteger(a2, b2) {
  if (a2 != null) this.fromString(a2, b2);
}
function nbi() {
  return new BigInteger(null);
}
var dbits;
var canary = 244837814094590;
var j_lm = (canary & 16777215) == 15715070;
function am1(i2, x2, w2, j2, c2, n3) {
  while (--n3 >= 0) {
    var v2 = x2 * this[i2++] + w2[j2] + c2;
    c2 = Math.floor(v2 / 67108864);
    w2[j2++] = v2 & 67108863;
  }
  return c2;
}
function am2(i2, x2, w2, j2, c2, n3) {
  var xl = x2 & 32767, xh = x2 >> 15;
  while (--n3 >= 0) {
    var l2 = this[i2] & 32767;
    var h2 = this[i2++] >> 15;
    var m2 = xh * l2 + h2 * xl;
    l2 = xl * l2 + ((m2 & 32767) << 15) + w2[j2] + (c2 & 1073741823);
    c2 = (l2 >>> 30) + (m2 >>> 15) + xh * h2 + (c2 >>> 30);
    w2[j2++] = l2 & 1073741823;
  }
  return c2;
}
function am3(i2, x2, w2, j2, c2, n3) {
  var xl = x2 & 16383, xh = x2 >> 14;
  while (--n3 >= 0) {
    var l2 = this[i2] & 16383;
    var h2 = this[i2++] >> 14;
    var m2 = xh * l2 + h2 * xl;
    l2 = xl * l2 + ((m2 & 16383) << 14) + w2[j2] + c2;
    c2 = (l2 >> 28) + (m2 >> 14) + xh * h2;
    w2[j2++] = l2 & 268435455;
  }
  return c2;
}
var inBrowser = typeof navigator !== "undefined";
if (inBrowser && j_lm && navigator.appName == "Microsoft Internet Explorer") {
  BigInteger.prototype.am = am2;
  dbits = 30;
} else if (inBrowser && j_lm && navigator.appName != "Netscape") {
  BigInteger.prototype.am = am1;
  dbits = 26;
} else {
  BigInteger.prototype.am = am3;
  dbits = 28;
}
BigInteger.prototype.DB = dbits;
BigInteger.prototype.DM = (1 << dbits) - 1;
BigInteger.prototype.DV = 1 << dbits;
var BI_FP = 52;
BigInteger.prototype.FV = Math.pow(2, BI_FP);
BigInteger.prototype.F1 = BI_FP - dbits;
BigInteger.prototype.F2 = 2 * dbits - BI_FP;
var BI_RM = "0123456789abcdefghijklmnopqrstuvwxyz";
var BI_RC = new Array();
var rr;
var vv;
rr = "0".charCodeAt(0);
for (vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;
rr = "a".charCodeAt(0);
for (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;
rr = "A".charCodeAt(0);
for (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;
function int2char(n3) {
  return BI_RM.charAt(n3);
}
function intAt(s2, i2) {
  var c2 = BI_RC[s2.charCodeAt(i2)];
  return c2 == null ? -1 : c2;
}
function bnpCopyTo(r3) {
  for (var i2 = this.t - 1; i2 >= 0; --i2) r3[i2] = this[i2];
  r3.t = this.t;
  r3.s = this.s;
}
function bnpFromInt(x2) {
  this.t = 1;
  this.s = x2 < 0 ? -1 : 0;
  if (x2 > 0) this[0] = x2;
  else if (x2 < -1) this[0] = x2 + this.DV;
  else this.t = 0;
}
function nbv(i2) {
  var r3 = nbi();
  r3.fromInt(i2);
  return r3;
}
function bnpFromString(s2, b2) {
  var k2;
  if (b2 == 16) k2 = 4;
  else if (b2 == 8) k2 = 3;
  else if (b2 == 2) k2 = 1;
  else if (b2 == 32) k2 = 5;
  else if (b2 == 4) k2 = 2;
  else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");
  this.t = 0;
  this.s = 0;
  var i2 = s2.length, mi = false, sh = 0;
  while (--i2 >= 0) {
    var x2 = intAt(s2, i2);
    if (x2 < 0) {
      if (s2.charAt(i2) == "-") mi = true;
      continue;
    }
    mi = false;
    if (sh == 0) this[this.t++] = x2;
    else if (sh + k2 > this.DB) {
      this[this.t - 1] |= (x2 & (1 << this.DB - sh) - 1) << sh;
      this[this.t++] = x2 >> this.DB - sh;
    } else this[this.t - 1] |= x2 << sh;
    sh += k2;
    if (sh >= this.DB) sh -= this.DB;
  }
  this.clamp();
  if (mi) BigInteger.ZERO.subTo(this, this);
}
function bnpClamp() {
  var c2 = this.s & this.DM;
  while (this.t > 0 && this[this.t - 1] == c2) --this.t;
}
function bnToString(b2) {
  if (this.s < 0) return "-" + this.negate().toString(b2);
  var k2;
  if (b2 == 16) k2 = 4;
  else if (b2 == 8) k2 = 3;
  else if (b2 == 2) k2 = 1;
  else if (b2 == 32) k2 = 5;
  else if (b2 == 4) k2 = 2;
  else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");
  var km = (1 << k2) - 1, d2, m2 = false, r3 = "", i2 = this.t;
  var p2 = this.DB - i2 * this.DB % k2;
  if (i2-- > 0) {
    if (p2 < this.DB && (d2 = this[i2] >> p2) > 0) {
      m2 = true;
      r3 = int2char(d2);
    }
    while (i2 >= 0) {
      if (p2 < k2) {
        d2 = (this[i2] & (1 << p2) - 1) << k2 - p2;
        d2 |= this[--i2] >> (p2 += this.DB - k2);
      } else {
        d2 = this[i2] >> (p2 -= k2) & km;
        if (p2 <= 0) {
          p2 += this.DB;
          --i2;
        }
      }
      if (d2 > 0) m2 = true;
      if (m2) r3 += int2char(d2);
    }
  }
  return m2 ? r3 : "0";
}
function bnNegate() {
  var r3 = nbi();
  BigInteger.ZERO.subTo(this, r3);
  return r3;
}
function bnAbs() {
  return this.s < 0 ? this.negate() : this;
}
function bnCompareTo(a2) {
  var r3 = this.s - a2.s;
  if (r3 != 0) return r3;
  var i2 = this.t;
  r3 = i2 - a2.t;
  if (r3 != 0) return this.s < 0 ? -r3 : r3;
  while (--i2 >= 0) if ((r3 = this[i2] - a2[i2]) != 0) return r3;
  return 0;
}
function nbits(x2) {
  var r3 = 1, t2;
  if ((t2 = x2 >>> 16) != 0) {
    x2 = t2;
    r3 += 16;
  }
  if ((t2 = x2 >> 8) != 0) {
    x2 = t2;
    r3 += 8;
  }
  if ((t2 = x2 >> 4) != 0) {
    x2 = t2;
    r3 += 4;
  }
  if ((t2 = x2 >> 2) != 0) {
    x2 = t2;
    r3 += 2;
  }
  if ((t2 = x2 >> 1) != 0) {
    x2 = t2;
    r3 += 1;
  }
  return r3;
}
function bnBitLength() {
  if (this.t <= 0) return 0;
  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);
}
function bnpDLShiftTo(n3, r3) {
  var i2;
  for (i2 = this.t - 1; i2 >= 0; --i2) r3[i2 + n3] = this[i2];
  for (i2 = n3 - 1; i2 >= 0; --i2) r3[i2] = 0;
  r3.t = this.t + n3;
  r3.s = this.s;
}
function bnpDRShiftTo(n3, r3) {
  for (var i2 = n3; i2 < this.t; ++i2) r3[i2 - n3] = this[i2];
  r3.t = Math.max(this.t - n3, 0);
  r3.s = this.s;
}
function bnpLShiftTo(n3, r3) {
  var bs = n3 % this.DB;
  var cbs = this.DB - bs;
  var bm = (1 << cbs) - 1;
  var ds = Math.floor(n3 / this.DB), c2 = this.s << bs & this.DM, i2;
  for (i2 = this.t - 1; i2 >= 0; --i2) {
    r3[i2 + ds + 1] = this[i2] >> cbs | c2;
    c2 = (this[i2] & bm) << bs;
  }
  for (i2 = ds - 1; i2 >= 0; --i2) r3[i2] = 0;
  r3[ds] = c2;
  r3.t = this.t + ds + 1;
  r3.s = this.s;
  r3.clamp();
}
function bnpRShiftTo(n3, r3) {
  r3.s = this.s;
  var ds = Math.floor(n3 / this.DB);
  if (ds >= this.t) {
    r3.t = 0;
    return;
  }
  var bs = n3 % this.DB;
  var cbs = this.DB - bs;
  var bm = (1 << bs) - 1;
  r3[0] = this[ds] >> bs;
  for (var i2 = ds + 1; i2 < this.t; ++i2) {
    r3[i2 - ds - 1] |= (this[i2] & bm) << cbs;
    r3[i2 - ds] = this[i2] >> bs;
  }
  if (bs > 0) r3[this.t - ds - 1] |= (this.s & bm) << cbs;
  r3.t = this.t - ds;
  r3.clamp();
}
function bnpSubTo(a2, r3) {
  var i2 = 0, c2 = 0, m2 = Math.min(a2.t, this.t);
  while (i2 < m2) {
    c2 += this[i2] - a2[i2];
    r3[i2++] = c2 & this.DM;
    c2 >>= this.DB;
  }
  if (a2.t < this.t) {
    c2 -= a2.s;
    while (i2 < this.t) {
      c2 += this[i2];
      r3[i2++] = c2 & this.DM;
      c2 >>= this.DB;
    }
    c2 += this.s;
  } else {
    c2 += this.s;
    while (i2 < a2.t) {
      c2 -= a2[i2];
      r3[i2++] = c2 & this.DM;
      c2 >>= this.DB;
    }
    c2 -= a2.s;
  }
  r3.s = c2 < 0 ? -1 : 0;
  if (c2 < -1) r3[i2++] = this.DV + c2;
  else if (c2 > 0) r3[i2++] = c2;
  r3.t = i2;
  r3.clamp();
}
function bnpMultiplyTo(a2, r3) {
  var x2 = this.abs(), y2 = a2.abs();
  var i2 = x2.t;
  r3.t = i2 + y2.t;
  while (--i2 >= 0) r3[i2] = 0;
  for (i2 = 0; i2 < y2.t; ++i2) r3[i2 + x2.t] = x2.am(0, y2[i2], r3, i2, 0, x2.t);
  r3.s = 0;
  r3.clamp();
  if (this.s != a2.s) BigInteger.ZERO.subTo(r3, r3);
}
function bnpSquareTo(r3) {
  var x2 = this.abs();
  var i2 = r3.t = 2 * x2.t;
  while (--i2 >= 0) r3[i2] = 0;
  for (i2 = 0; i2 < x2.t - 1; ++i2) {
    var c2 = x2.am(i2, x2[i2], r3, 2 * i2, 0, 1);
    if ((r3[i2 + x2.t] += x2.am(i2 + 1, 2 * x2[i2], r3, 2 * i2 + 1, c2, x2.t - i2 - 1)) >= x2.DV) {
      r3[i2 + x2.t] -= x2.DV;
      r3[i2 + x2.t + 1] = 1;
    }
  }
  if (r3.t > 0) r3[r3.t - 1] += x2.am(i2, x2[i2], r3, 2 * i2, 0, 1);
  r3.s = 0;
  r3.clamp();
}
function bnpDivRemTo(m2, q2, r3) {
  var pm = m2.abs();
  if (pm.t <= 0) return;
  var pt = this.abs();
  if (pt.t < pm.t) {
    if (q2 != null) q2.fromInt(0);
    if (r3 != null) this.copyTo(r3);
    return;
  }
  if (r3 == null) r3 = nbi();
  var y2 = nbi(), ts = this.s, ms = m2.s;
  var nsh = this.DB - nbits(pm[pm.t - 1]);
  if (nsh > 0) {
    pm.lShiftTo(nsh, y2);
    pt.lShiftTo(nsh, r3);
  } else {
    pm.copyTo(y2);
    pt.copyTo(r3);
  }
  var ys = y2.t;
  var y0 = y2[ys - 1];
  if (y0 == 0) return;
  var yt = y0 * (1 << this.F1) + (ys > 1 ? y2[ys - 2] >> this.F2 : 0);
  var d1 = this.FV / yt, d2 = (1 << this.F1) / yt, e3 = 1 << this.F2;
  var i2 = r3.t, j2 = i2 - ys, t2 = q2 == null ? nbi() : q2;
  y2.dlShiftTo(j2, t2);
  if (r3.compareTo(t2) >= 0) {
    r3[r3.t++] = 1;
    r3.subTo(t2, r3);
  }
  BigInteger.ONE.dlShiftTo(ys, t2);
  t2.subTo(y2, y2);
  while (y2.t < ys) y2[y2.t++] = 0;
  while (--j2 >= 0) {
    var qd = r3[--i2] == y0 ? this.DM : Math.floor(r3[i2] * d1 + (r3[i2 - 1] + e3) * d2);
    if ((r3[i2] += y2.am(0, qd, r3, j2, 0, ys)) < qd) {
      y2.dlShiftTo(j2, t2);
      r3.subTo(t2, r3);
      while (r3[i2] < --qd) r3.subTo(t2, r3);
    }
  }
  if (q2 != null) {
    r3.drShiftTo(ys, q2);
    if (ts != ms) BigInteger.ZERO.subTo(q2, q2);
  }
  r3.t = ys;
  r3.clamp();
  if (nsh > 0) r3.rShiftTo(nsh, r3);
  if (ts < 0) BigInteger.ZERO.subTo(r3, r3);
}
function bnMod(a2) {
  var r3 = nbi();
  this.abs().divRemTo(a2, null, r3);
  if (this.s < 0 && r3.compareTo(BigInteger.ZERO) > 0) a2.subTo(r3, r3);
  return r3;
}
function bnpInvDigit() {
  if (this.t < 1) return 0;
  var x2 = this[0];
  if ((x2 & 1) == 0) return 0;
  var y2 = x2 & 3;
  y2 = y2 * (2 - (x2 & 15) * y2) & 15;
  y2 = y2 * (2 - (x2 & 255) * y2) & 255;
  y2 = y2 * (2 - ((x2 & 65535) * y2 & 65535)) & 65535;
  y2 = y2 * (2 - x2 * y2 % this.DV) % this.DV;
  return y2 > 0 ? this.DV - y2 : -y2;
}
function bnEquals(a2) {
  return this.compareTo(a2) == 0;
}
function bnpAddTo(a2, r3) {
  var i2 = 0, c2 = 0, m2 = Math.min(a2.t, this.t);
  while (i2 < m2) {
    c2 += this[i2] + a2[i2];
    r3[i2++] = c2 & this.DM;
    c2 >>= this.DB;
  }
  if (a2.t < this.t) {
    c2 += a2.s;
    while (i2 < this.t) {
      c2 += this[i2];
      r3[i2++] = c2 & this.DM;
      c2 >>= this.DB;
    }
    c2 += this.s;
  } else {
    c2 += this.s;
    while (i2 < a2.t) {
      c2 += a2[i2];
      r3[i2++] = c2 & this.DM;
      c2 >>= this.DB;
    }
    c2 += a2.s;
  }
  r3.s = c2 < 0 ? -1 : 0;
  if (c2 > 0) r3[i2++] = c2;
  else if (c2 < -1) r3[i2++] = this.DV + c2;
  r3.t = i2;
  r3.clamp();
}
function bnAdd(a2) {
  var r3 = nbi();
  this.addTo(a2, r3);
  return r3;
}
function bnSubtract(a2) {
  var r3 = nbi();
  this.subTo(a2, r3);
  return r3;
}
function bnMultiply(a2) {
  var r3 = nbi();
  this.multiplyTo(a2, r3);
  return r3;
}
function bnDivide(a2) {
  var r3 = nbi();
  this.divRemTo(a2, r3, null);
  return r3;
}
function Montgomery(m2) {
  this.m = m2;
  this.mp = m2.invDigit();
  this.mpl = this.mp & 32767;
  this.mph = this.mp >> 15;
  this.um = (1 << m2.DB - 15) - 1;
  this.mt2 = 2 * m2.t;
}
function montConvert(x2) {
  var r3 = nbi();
  x2.abs().dlShiftTo(this.m.t, r3);
  r3.divRemTo(this.m, null, r3);
  if (x2.s < 0 && r3.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r3, r3);
  return r3;
}
function montRevert(x2) {
  var r3 = nbi();
  x2.copyTo(r3);
  this.reduce(r3);
  return r3;
}
function montReduce(x2) {
  while (x2.t <= this.mt2)
    x2[x2.t++] = 0;
  for (var i2 = 0; i2 < this.m.t; ++i2) {
    var j2 = x2[i2] & 32767;
    var u0 = j2 * this.mpl + ((j2 * this.mph + (x2[i2] >> 15) * this.mpl & this.um) << 15) & x2.DM;
    j2 = i2 + this.m.t;
    x2[j2] += this.m.am(0, u0, x2, i2, 0, this.m.t);
    while (x2[j2] >= x2.DV) {
      x2[j2] -= x2.DV;
      x2[++j2]++;
    }
  }
  x2.clamp();
  x2.drShiftTo(this.m.t, x2);
  if (x2.compareTo(this.m) >= 0) x2.subTo(this.m, x2);
}
function montSqrTo(x2, r3) {
  x2.squareTo(r3);
  this.reduce(r3);
}
function montMulTo(x2, y2, r3) {
  x2.multiplyTo(y2, r3);
  this.reduce(r3);
}
Montgomery.prototype.convert = montConvert;
Montgomery.prototype.revert = montRevert;
Montgomery.prototype.reduce = montReduce;
Montgomery.prototype.mulTo = montMulTo;
Montgomery.prototype.sqrTo = montSqrTo;
function bnModPow(e3, m2, callback) {
  var i2 = e3.bitLength(), k2, r3 = nbv(1), z2 = new Montgomery(m2);
  if (i2 <= 0) return r3;
  else if (i2 < 18) k2 = 1;
  else if (i2 < 48) k2 = 3;
  else if (i2 < 144) k2 = 4;
  else if (i2 < 768) k2 = 5;
  else k2 = 6;
  var g2 = new Array(), n3 = 3, k1 = k2 - 1, km = (1 << k2) - 1;
  g2[1] = z2.convert(this);
  if (k2 > 1) {
    var g22 = nbi();
    z2.sqrTo(g2[1], g22);
    while (n3 <= km) {
      g2[n3] = nbi();
      z2.mulTo(g22, g2[n3 - 2], g2[n3]);
      n3 += 2;
    }
  }
  var j2 = e3.t - 1, w2, is1 = true, r22 = nbi(), t2;
  i2 = nbits(e3[j2]) - 1;
  while (j2 >= 0) {
    if (i2 >= k1) w2 = e3[j2] >> i2 - k1 & km;
    else {
      w2 = (e3[j2] & (1 << i2 + 1) - 1) << k1 - i2;
      if (j2 > 0) w2 |= e3[j2 - 1] >> this.DB + i2 - k1;
    }
    n3 = k2;
    while ((w2 & 1) == 0) {
      w2 >>= 1;
      --n3;
    }
    if ((i2 -= n3) < 0) {
      i2 += this.DB;
      --j2;
    }
    if (is1) {
      g2[w2].copyTo(r3);
      is1 = false;
    } else {
      while (n3 > 1) {
        z2.sqrTo(r3, r22);
        z2.sqrTo(r22, r3);
        n3 -= 2;
      }
      if (n3 > 0) z2.sqrTo(r3, r22);
      else {
        t2 = r3;
        r3 = r22;
        r22 = t2;
      }
      z2.mulTo(r22, g2[w2], r3);
    }
    while (j2 >= 0 && (e3[j2] & 1 << i2) == 0) {
      z2.sqrTo(r3, r22);
      t2 = r3;
      r3 = r22;
      r22 = t2;
      if (--i2 < 0) {
        i2 = this.DB - 1;
        --j2;
      }
    }
  }
  var result = z2.revert(r3);
  callback(null, result);
  return result;
}
BigInteger.prototype.copyTo = bnpCopyTo;
BigInteger.prototype.fromInt = bnpFromInt;
BigInteger.prototype.fromString = bnpFromString;
BigInteger.prototype.clamp = bnpClamp;
BigInteger.prototype.dlShiftTo = bnpDLShiftTo;
BigInteger.prototype.drShiftTo = bnpDRShiftTo;
BigInteger.prototype.lShiftTo = bnpLShiftTo;
BigInteger.prototype.rShiftTo = bnpRShiftTo;
BigInteger.prototype.subTo = bnpSubTo;
BigInteger.prototype.multiplyTo = bnpMultiplyTo;
BigInteger.prototype.squareTo = bnpSquareTo;
BigInteger.prototype.divRemTo = bnpDivRemTo;
BigInteger.prototype.invDigit = bnpInvDigit;
BigInteger.prototype.addTo = bnpAddTo;
BigInteger.prototype.toString = bnToString;
BigInteger.prototype.negate = bnNegate;
BigInteger.prototype.abs = bnAbs;
BigInteger.prototype.compareTo = bnCompareTo;
BigInteger.prototype.bitLength = bnBitLength;
BigInteger.prototype.mod = bnMod;
BigInteger.prototype.equals = bnEquals;
BigInteger.prototype.add = bnAdd;
BigInteger.prototype.subtract = bnSubtract;
BigInteger.prototype.multiply = bnMultiply;
BigInteger.prototype.divide = bnDivide;
BigInteger.prototype.modPow = bnModPow;
BigInteger.ZERO = nbv(0);
BigInteger.ONE = nbv(1);

// node_modules/amazon-cognito-identity-js/es/AuthenticationHelper.js
function randomBytes(nBytes) {
  return import_buffer.Buffer.from(new WordArray().random(nBytes).toString(), "hex");
}
var HEX_MSB_REGEX = /^[89a-f]/i;
var initN = "FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF";
var newPasswordRequiredChallengeUserAttributePrefix = "userAttributes.";
var AuthenticationHelper = /* @__PURE__ */ function() {
  function AuthenticationHelper2(PoolName) {
    this.N = new BigInteger_default(initN, 16);
    this.g = new BigInteger_default("2", 16);
    this.k = new BigInteger_default(this.hexHash("" + this.padHex(this.N) + this.padHex(this.g)), 16);
    this.smallAValue = this.generateRandomSmallA();
    this.getLargeAValue(function() {
    });
    this.infoBits = import_buffer.Buffer.from("Caldera Derived Key", "utf8");
    this.poolName = PoolName;
  }
  var _proto = AuthenticationHelper2.prototype;
  _proto.getSmallAValue = function getSmallAValue() {
    return this.smallAValue;
  };
  _proto.getLargeAValue = function getLargeAValue(callback) {
    var _this = this;
    if (this.largeAValue) {
      callback(null, this.largeAValue);
    } else {
      this.calculateA(this.smallAValue, function(err, largeAValue) {
        if (err) {
          callback(err, null);
        }
        _this.largeAValue = largeAValue;
        callback(null, _this.largeAValue);
      });
    }
  };
  _proto.generateRandomSmallA = function generateRandomSmallA() {
    var hexRandom = randomBytes(128).toString("hex");
    var randomBigInt = new BigInteger_default(hexRandom, 16);
    return randomBigInt;
  };
  _proto.generateRandomString = function generateRandomString() {
    return randomBytes(40).toString("base64");
  };
  _proto.getRandomPassword = function getRandomPassword() {
    return this.randomPassword;
  };
  _proto.getSaltDevices = function getSaltDevices() {
    return this.SaltToHashDevices;
  };
  _proto.getVerifierDevices = function getVerifierDevices() {
    return this.verifierDevices;
  };
  _proto.generateHashDevice = function generateHashDevice(deviceGroupKey, username, callback) {
    var _this2 = this;
    this.randomPassword = this.generateRandomString();
    var combinedString = "" + deviceGroupKey + username + ":" + this.randomPassword;
    var hashedString = this.hash(combinedString);
    var hexRandom = randomBytes(16).toString("hex");
    this.SaltToHashDevices = this.padHex(new BigInteger_default(hexRandom, 16));
    this.g.modPow(new BigInteger_default(this.hexHash(this.SaltToHashDevices + hashedString), 16), this.N, function(err, verifierDevicesNotPadded) {
      if (err) {
        callback(err, null);
      }
      _this2.verifierDevices = _this2.padHex(verifierDevicesNotPadded);
      callback(null, null);
    });
  };
  _proto.calculateA = function calculateA(a2, callback) {
    var _this3 = this;
    this.g.modPow(a2, this.N, function(err, A2) {
      if (err) {
        callback(err, null);
      }
      if (A2.mod(_this3.N).equals(BigInteger_default.ZERO)) {
        callback(new Error("Illegal paramater. A mod N cannot be 0."), null);
      }
      callback(null, A2);
    });
  };
  _proto.calculateU = function calculateU(A2, B2) {
    this.UHexHash = this.hexHash(this.padHex(A2) + this.padHex(B2));
    var finalU = new BigInteger_default(this.UHexHash, 16);
    return finalU;
  };
  _proto.hash = function hash(buf) {
    var awsCryptoHash = new import_sha256_js.Sha256();
    awsCryptoHash.update(buf);
    var resultFromAWSCrypto = awsCryptoHash.digestSync();
    var hashHex = import_buffer.Buffer.from(resultFromAWSCrypto).toString("hex");
    return new Array(64 - hashHex.length).join("0") + hashHex;
  };
  _proto.hexHash = function hexHash(hexStr) {
    return this.hash(import_buffer.Buffer.from(hexStr, "hex"));
  };
  _proto.computehkdf = function computehkdf(ikm, salt) {
    var infoBitsBuffer = import_buffer.Buffer.concat([this.infoBits, import_buffer.Buffer.from(String.fromCharCode(1), "utf8")]);
    var awsCryptoHash = new import_sha256_js.Sha256(salt);
    awsCryptoHash.update(ikm);
    var resultFromAWSCryptoPrk = awsCryptoHash.digestSync();
    var awsCryptoHashHmac = new import_sha256_js.Sha256(resultFromAWSCryptoPrk);
    awsCryptoHashHmac.update(infoBitsBuffer);
    var resultFromAWSCryptoHmac = awsCryptoHashHmac.digestSync();
    var hashHexFromAWSCrypto = resultFromAWSCryptoHmac;
    var currentHex = hashHexFromAWSCrypto.slice(0, 16);
    return currentHex;
  };
  _proto.getPasswordAuthenticationKey = function getPasswordAuthenticationKey(username, password, serverBValue, salt, callback) {
    var _this4 = this;
    if (serverBValue.mod(this.N).equals(BigInteger_default.ZERO)) {
      throw new Error("B cannot be zero.");
    }
    this.UValue = this.calculateU(this.largeAValue, serverBValue);
    if (this.UValue.equals(BigInteger_default.ZERO)) {
      throw new Error("U cannot be zero.");
    }
    var usernamePassword = "" + this.poolName + username + ":" + password;
    var usernamePasswordHash = this.hash(usernamePassword);
    var xValue = new BigInteger_default(this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);
    this.calculateS(xValue, serverBValue, function(err, sValue) {
      if (err) {
        callback(err, null);
      }
      var hkdf = _this4.computehkdf(import_buffer.Buffer.from(_this4.padHex(sValue), "hex"), import_buffer.Buffer.from(_this4.padHex(_this4.UValue), "hex"));
      callback(null, hkdf);
    });
  };
  _proto.calculateS = function calculateS(xValue, serverBValue, callback) {
    var _this5 = this;
    this.g.modPow(xValue, this.N, function(err, gModPowXN) {
      if (err) {
        callback(err, null);
      }
      var intValue2 = serverBValue.subtract(_this5.k.multiply(gModPowXN));
      intValue2.modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)), _this5.N, function(err2, result) {
        if (err2) {
          callback(err2, null);
        }
        callback(null, result.mod(_this5.N));
      });
    });
  };
  _proto.getNewPasswordRequiredChallengeUserAttributePrefix = function getNewPasswordRequiredChallengeUserAttributePrefix() {
    return newPasswordRequiredChallengeUserAttributePrefix;
  };
  _proto.padHex = function padHex(bigInt) {
    if (!(bigInt instanceof BigInteger_default)) {
      throw new Error("Not a BigInteger");
    }
    var isNegative = bigInt.compareTo(BigInteger_default.ZERO) < 0;
    var hexStr = bigInt.abs().toString(16);
    hexStr = hexStr.length % 2 !== 0 ? "0" + hexStr : hexStr;
    hexStr = HEX_MSB_REGEX.test(hexStr) ? "00" + hexStr : hexStr;
    if (isNegative) {
      var invertedNibbles = hexStr.split("").map(function(x2) {
        var invertedNibble = ~parseInt(x2, 16) & 15;
        return "0123456789ABCDEF".charAt(invertedNibble);
      }).join("");
      var flippedBitsBI = new BigInteger_default(invertedNibbles, 16).add(BigInteger_default.ONE);
      hexStr = flippedBitsBI.toString(16);
      if (hexStr.toUpperCase().startsWith("FF8")) {
        hexStr = hexStr.substring(2);
      }
    }
    return hexStr;
  };
  return AuthenticationHelper2;
}();

// node_modules/amazon-cognito-identity-js/es/CognitoJwtToken.js
var import_buffer2 = __toESM(require_buffer());
var CognitoJwtToken = /* @__PURE__ */ function() {
  function CognitoJwtToken2(token) {
    this.jwtToken = token || "";
    this.payload = this.decodePayload();
  }
  var _proto = CognitoJwtToken2.prototype;
  _proto.getJwtToken = function getJwtToken() {
    return this.jwtToken;
  };
  _proto.getExpiration = function getExpiration() {
    return this.payload.exp;
  };
  _proto.getIssuedAt = function getIssuedAt() {
    return this.payload.iat;
  };
  _proto.decodePayload = function decodePayload() {
    var payload = this.jwtToken.split(".")[1];
    try {
      return JSON.parse(import_buffer2.Buffer.from(payload, "base64").toString("utf8"));
    } catch (err) {
      return {};
    }
  };
  return CognitoJwtToken2;
}();

// node_modules/amazon-cognito-identity-js/es/CognitoAccessToken.js
function _inheritsLoose(t2, o2) {
  t2.prototype = Object.create(o2.prototype), t2.prototype.constructor = t2, _setPrototypeOf(t2, o2);
}
function _setPrototypeOf(t2, e3) {
  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t3, e4) {
    return t3.__proto__ = e4, t3;
  }, _setPrototypeOf(t2, e3);
}
var CognitoAccessToken = /* @__PURE__ */ function(_CognitoJwtToken) {
  function CognitoAccessToken2(_temp) {
    var _ref = _temp === void 0 ? {} : _temp, AccessToken = _ref.AccessToken;
    return _CognitoJwtToken.call(this, AccessToken || "") || this;
  }
  _inheritsLoose(CognitoAccessToken2, _CognitoJwtToken);
  return CognitoAccessToken2;
}(CognitoJwtToken);

// node_modules/amazon-cognito-identity-js/es/CognitoIdToken.js
function _inheritsLoose2(t2, o2) {
  t2.prototype = Object.create(o2.prototype), t2.prototype.constructor = t2, _setPrototypeOf2(t2, o2);
}
function _setPrototypeOf2(t2, e3) {
  return _setPrototypeOf2 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t3, e4) {
    return t3.__proto__ = e4, t3;
  }, _setPrototypeOf2(t2, e3);
}
var CognitoIdToken = /* @__PURE__ */ function(_CognitoJwtToken) {
  function CognitoIdToken2(_temp) {
    var _ref = _temp === void 0 ? {} : _temp, IdToken = _ref.IdToken;
    return _CognitoJwtToken.call(this, IdToken || "") || this;
  }
  _inheritsLoose2(CognitoIdToken2, _CognitoJwtToken);
  return CognitoIdToken2;
}(CognitoJwtToken);

// node_modules/amazon-cognito-identity-js/es/CognitoRefreshToken.js
var CognitoRefreshToken = /* @__PURE__ */ function() {
  function CognitoRefreshToken2(_temp) {
    var _ref = _temp === void 0 ? {} : _temp, RefreshToken = _ref.RefreshToken;
    this.token = RefreshToken || "";
  }
  var _proto = CognitoRefreshToken2.prototype;
  _proto.getToken = function getToken() {
    return this.token;
  };
  return CognitoRefreshToken2;
}();

// node_modules/amazon-cognito-identity-js/es/CognitoUser.js
var import_buffer3 = __toESM(require_buffer());
var import_sha256_js2 = __toESM(require_build2());

// node_modules/amazon-cognito-identity-js/es/Platform/version.js
var version = "5.0.4";

// node_modules/amazon-cognito-identity-js/es/Platform/index.js
var BASE_USER_AGENT = "aws-amplify/" + version;
var Platform = {
  userAgent: BASE_USER_AGENT,
  isReactNative: typeof navigator !== "undefined" && navigator.product === "ReactNative"
};
var getUserAgent = function getUserAgent2() {
  return Platform.userAgent;
};

// node_modules/amazon-cognito-identity-js/es/CognitoUserSession.js
var CognitoUserSession = /* @__PURE__ */ function() {
  function CognitoUserSession2(_temp) {
    var _ref = _temp === void 0 ? {} : _temp, IdToken = _ref.IdToken, RefreshToken = _ref.RefreshToken, AccessToken = _ref.AccessToken, ClockDrift = _ref.ClockDrift;
    if (AccessToken == null || IdToken == null) {
      throw new Error("Id token and Access Token must be present.");
    }
    this.idToken = IdToken;
    this.refreshToken = RefreshToken;
    this.accessToken = AccessToken;
    this.clockDrift = ClockDrift === void 0 ? this.calculateClockDrift() : ClockDrift;
  }
  var _proto = CognitoUserSession2.prototype;
  _proto.getIdToken = function getIdToken() {
    return this.idToken;
  };
  _proto.getRefreshToken = function getRefreshToken() {
    return this.refreshToken;
  };
  _proto.getAccessToken = function getAccessToken() {
    return this.accessToken;
  };
  _proto.getClockDrift = function getClockDrift() {
    return this.clockDrift;
  };
  _proto.calculateClockDrift = function calculateClockDrift() {
    var now = Math.floor(/* @__PURE__ */ new Date() / 1e3);
    var iat = Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt());
    return now - iat;
  };
  _proto.isValid = function isValid() {
    var now = Math.floor(/* @__PURE__ */ new Date() / 1e3);
    var adjusted = now - this.clockDrift;
    return adjusted < this.accessToken.getExpiration() && adjusted < this.idToken.getExpiration();
  };
  return CognitoUserSession2;
}();

// node_modules/amazon-cognito-identity-js/es/DateHelper.js
var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
var weekNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
var DateHelper = /* @__PURE__ */ function() {
  function DateHelper2() {
  }
  var _proto = DateHelper2.prototype;
  _proto.getNowString = function getNowString() {
    var now = /* @__PURE__ */ new Date();
    var weekDay = weekNames[now.getUTCDay()];
    var month = monthNames[now.getUTCMonth()];
    var day = now.getUTCDate();
    var hours = now.getUTCHours();
    if (hours < 10) {
      hours = "0" + hours;
    }
    var minutes = now.getUTCMinutes();
    if (minutes < 10) {
      minutes = "0" + minutes;
    }
    var seconds = now.getUTCSeconds();
    if (seconds < 10) {
      seconds = "0" + seconds;
    }
    var year = now.getUTCFullYear();
    var dateNow = weekDay + " " + month + " " + day + " " + hours + ":" + minutes + ":" + seconds + " UTC " + year;
    return dateNow;
  };
  return DateHelper2;
}();

// node_modules/amazon-cognito-identity-js/es/CognitoUserAttribute.js
var CognitoUserAttribute = /* @__PURE__ */ function() {
  function CognitoUserAttribute2(_temp) {
    var _ref = _temp === void 0 ? {} : _temp, Name = _ref.Name, Value = _ref.Value;
    this.Name = Name || "";
    this.Value = Value || "";
  }
  var _proto = CognitoUserAttribute2.prototype;
  _proto.getValue = function getValue() {
    return this.Value;
  };
  _proto.setValue = function setValue(value) {
    this.Value = value;
    return this;
  };
  _proto.getName = function getName() {
    return this.Name;
  };
  _proto.setName = function setName(name) {
    this.Name = name;
    return this;
  };
  _proto.toString = function toString() {
    return JSON.stringify(this);
  };
  _proto.toJSON = function toJSON() {
    return {
      Name: this.Name,
      Value: this.Value
    };
  };
  return CognitoUserAttribute2;
}();

// node_modules/amazon-cognito-identity-js/es/StorageHelper.js
var dataMemory = {};
var MemoryStorage = /* @__PURE__ */ function() {
  function MemoryStorage2() {
  }
  MemoryStorage2.setItem = function setItem(key, value) {
    dataMemory[key] = value;
    return dataMemory[key];
  };
  MemoryStorage2.getItem = function getItem(key) {
    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : void 0;
  };
  MemoryStorage2.removeItem = function removeItem(key) {
    return delete dataMemory[key];
  };
  MemoryStorage2.clear = function clear() {
    dataMemory = {};
    return dataMemory;
  };
  return MemoryStorage2;
}();
var StorageHelper = /* @__PURE__ */ function() {
  function StorageHelper2() {
    try {
      this.storageWindow = window.localStorage;
      this.storageWindow.setItem("aws.cognito.test-ls", 1);
      this.storageWindow.removeItem("aws.cognito.test-ls");
    } catch (exception) {
      this.storageWindow = MemoryStorage;
    }
  }
  var _proto = StorageHelper2.prototype;
  _proto.getStorage = function getStorage() {
    return this.storageWindow;
  };
  return StorageHelper2;
}();

// node_modules/amazon-cognito-identity-js/es/CognitoUser.js
var isNavigatorAvailable = typeof navigator !== "undefined";
var userAgent = isNavigatorAvailable ? Platform.isReactNative ? "react-native" : navigator.userAgent : "nodejs";
var CognitoUser = /* @__PURE__ */ function() {
  function CognitoUser2(data) {
    if (data == null || data.Username == null || data.Pool == null) {
      throw new Error("Username and Pool information are required.");
    }
    this.username = data.Username || "";
    this.pool = data.Pool;
    this.Session = null;
    this.client = data.Pool.client;
    this.signInUserSession = null;
    this.authenticationFlowType = "USER_SRP_AUTH";
    this.storage = data.Storage || new StorageHelper().getStorage();
    this.keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId();
    this.userDataKey = this.keyPrefix + "." + this.username + ".userData";
  }
  var _proto = CognitoUser2.prototype;
  _proto.setSignInUserSession = function setSignInUserSession(signInUserSession) {
    this.clearCachedUserData();
    this.signInUserSession = signInUserSession;
    this.cacheTokens();
  };
  _proto.getSignInUserSession = function getSignInUserSession() {
    return this.signInUserSession;
  };
  _proto.getUsername = function getUsername() {
    return this.username;
  };
  _proto.getAuthenticationFlowType = function getAuthenticationFlowType() {
    return this.authenticationFlowType;
  };
  _proto.setAuthenticationFlowType = function setAuthenticationFlowType(authenticationFlowType) {
    this.authenticationFlowType = authenticationFlowType;
  };
  _proto.initiateAuth = function initiateAuth(authDetails, callback) {
    var _this = this;
    var authParameters = authDetails.getAuthParameters();
    authParameters.USERNAME = this.username;
    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();
    var jsonReq = {
      AuthFlow: "CUSTOM_AUTH",
      ClientId: this.pool.getClientId(),
      AuthParameters: authParameters,
      ClientMetadata: clientMetaData
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.request("InitiateAuth", jsonReq, function(err, data) {
      if (err) {
        return callback.onFailure(err);
      }
      var challengeName = data.ChallengeName;
      var challengeParameters = data.ChallengeParameters;
      if (challengeName === "CUSTOM_CHALLENGE") {
        _this.Session = data.Session;
        return callback.customChallenge(challengeParameters);
      }
      _this.signInUserSession = _this.getCognitoUserSession(data.AuthenticationResult);
      _this.cacheTokens();
      return callback.onSuccess(_this.signInUserSession);
    });
  };
  _proto.authenticateUser = function authenticateUser(authDetails, callback) {
    if (this.authenticationFlowType === "USER_PASSWORD_AUTH") {
      return this.authenticateUserPlainUsernamePassword(authDetails, callback);
    } else if (this.authenticationFlowType === "USER_SRP_AUTH" || this.authenticationFlowType === "CUSTOM_AUTH") {
      return this.authenticateUserDefaultAuth(authDetails, callback);
    }
    return callback.onFailure(new Error("Authentication flow type is invalid."));
  };
  _proto.authenticateUserDefaultAuth = function authenticateUserDefaultAuth(authDetails, callback) {
    var _this2 = this;
    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());
    var dateHelper = new DateHelper();
    var serverBValue;
    var salt;
    var authParameters = {};
    if (this.deviceKey != null) {
      authParameters.DEVICE_KEY = this.deviceKey;
    }
    authParameters.USERNAME = this.username;
    authenticationHelper.getLargeAValue(function(errOnAValue, aValue) {
      if (errOnAValue) {
        callback.onFailure(errOnAValue);
      }
      authParameters.SRP_A = aValue.toString(16);
      if (_this2.authenticationFlowType === "CUSTOM_AUTH") {
        authParameters.CHALLENGE_NAME = "SRP_A";
      }
      var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();
      var jsonReq = {
        AuthFlow: _this2.authenticationFlowType,
        ClientId: _this2.pool.getClientId(),
        AuthParameters: authParameters,
        ClientMetadata: clientMetaData
      };
      if (_this2.getUserContextData(_this2.username)) {
        jsonReq.UserContextData = _this2.getUserContextData(_this2.username);
      }
      _this2.client.request("InitiateAuth", jsonReq, function(err, data) {
        if (err) {
          return callback.onFailure(err);
        }
        var challengeParameters = data.ChallengeParameters;
        _this2.username = challengeParameters.USER_ID_FOR_SRP;
        _this2.userDataKey = _this2.keyPrefix + "." + _this2.username + ".userData";
        serverBValue = new BigInteger_default(challengeParameters.SRP_B, 16);
        salt = new BigInteger_default(challengeParameters.SALT, 16);
        _this2.getCachedDeviceKeyAndPassword();
        authenticationHelper.getPasswordAuthenticationKey(_this2.username, authDetails.getPassword(), serverBValue, salt, function(errOnHkdf, hkdf) {
          if (errOnHkdf) {
            callback.onFailure(errOnHkdf);
          }
          var dateNow = dateHelper.getNowString();
          var concatBuffer = import_buffer3.Buffer.concat([import_buffer3.Buffer.from(_this2.pool.getUserPoolName(), "utf8"), import_buffer3.Buffer.from(_this2.username, "utf8"), import_buffer3.Buffer.from(challengeParameters.SECRET_BLOCK, "base64"), import_buffer3.Buffer.from(dateNow, "utf8")]);
          var awsCryptoHash = new import_sha256_js2.Sha256(hkdf);
          awsCryptoHash.update(concatBuffer);
          var resultFromAWSCrypto = awsCryptoHash.digestSync();
          var signatureString = import_buffer3.Buffer.from(resultFromAWSCrypto).toString("base64");
          var challengeResponses = {};
          challengeResponses.USERNAME = _this2.username;
          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;
          challengeResponses.TIMESTAMP = dateNow;
          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;
          if (_this2.deviceKey != null) {
            challengeResponses.DEVICE_KEY = _this2.deviceKey;
          }
          var _respondToAuthChallenge = function respondToAuthChallenge(challenge, challengeCallback) {
            return _this2.client.request("RespondToAuthChallenge", challenge, function(errChallenge, dataChallenge) {
              if (errChallenge && errChallenge.code === "ResourceNotFoundException" && errChallenge.message.toLowerCase().indexOf("device") !== -1) {
                challengeResponses.DEVICE_KEY = null;
                _this2.deviceKey = null;
                _this2.randomPassword = null;
                _this2.deviceGroupKey = null;
                _this2.clearCachedDeviceKeyAndPassword();
                return _respondToAuthChallenge(challenge, challengeCallback);
              }
              return challengeCallback(errChallenge, dataChallenge);
            });
          };
          var jsonReqResp = {
            ChallengeName: "PASSWORD_VERIFIER",
            ClientId: _this2.pool.getClientId(),
            ChallengeResponses: challengeResponses,
            Session: data.Session,
            ClientMetadata: clientMetaData
          };
          if (_this2.getUserContextData()) {
            jsonReqResp.UserContextData = _this2.getUserContextData();
          }
          _respondToAuthChallenge(jsonReqResp, function(errAuthenticate, dataAuthenticate) {
            if (errAuthenticate) {
              return callback.onFailure(errAuthenticate);
            }
            return _this2.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);
          });
          return void 0;
        });
        return void 0;
      });
    });
  };
  _proto.authenticateUserPlainUsernamePassword = function authenticateUserPlainUsernamePassword(authDetails, callback) {
    var _this3 = this;
    var authParameters = {};
    authParameters.USERNAME = this.username;
    authParameters.PASSWORD = authDetails.getPassword();
    if (!authParameters.PASSWORD) {
      callback.onFailure(new Error("PASSWORD parameter is required"));
      return;
    }
    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());
    this.getCachedDeviceKeyAndPassword();
    if (this.deviceKey != null) {
      authParameters.DEVICE_KEY = this.deviceKey;
    }
    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();
    var jsonReq = {
      AuthFlow: "USER_PASSWORD_AUTH",
      ClientId: this.pool.getClientId(),
      AuthParameters: authParameters,
      ClientMetadata: clientMetaData
    };
    if (this.getUserContextData(this.username)) {
      jsonReq.UserContextData = this.getUserContextData(this.username);
    }
    this.client.request("InitiateAuth", jsonReq, function(err, authResult) {
      if (err) {
        return callback.onFailure(err);
      }
      return _this3.authenticateUserInternal(authResult, authenticationHelper, callback);
    });
  };
  _proto.authenticateUserInternal = function authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {
    var _this4 = this;
    var challengeName = dataAuthenticate.ChallengeName;
    var challengeParameters = dataAuthenticate.ChallengeParameters;
    if (challengeName === "SMS_MFA") {
      this.Session = dataAuthenticate.Session;
      return callback.mfaRequired(challengeName, challengeParameters);
    }
    if (challengeName === "SELECT_MFA_TYPE") {
      this.Session = dataAuthenticate.Session;
      return callback.selectMFAType(challengeName, challengeParameters);
    }
    if (challengeName === "MFA_SETUP") {
      this.Session = dataAuthenticate.Session;
      return callback.mfaSetup(challengeName, challengeParameters);
    }
    if (challengeName === "SOFTWARE_TOKEN_MFA") {
      this.Session = dataAuthenticate.Session;
      return callback.totpRequired(challengeName, challengeParameters);
    }
    if (challengeName === "CUSTOM_CHALLENGE") {
      this.Session = dataAuthenticate.Session;
      return callback.customChallenge(challengeParameters);
    }
    if (challengeName === "NEW_PASSWORD_REQUIRED") {
      this.Session = dataAuthenticate.Session;
      var userAttributes = null;
      var rawRequiredAttributes = null;
      var requiredAttributes = [];
      var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();
      if (challengeParameters) {
        userAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes);
        rawRequiredAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes);
      }
      if (rawRequiredAttributes) {
        for (var i2 = 0; i2 < rawRequiredAttributes.length; i2++) {
          requiredAttributes[i2] = rawRequiredAttributes[i2].substr(userAttributesPrefix.length);
        }
      }
      return callback.newPasswordRequired(userAttributes, requiredAttributes);
    }
    if (challengeName === "DEVICE_SRP_AUTH") {
      this.Session = dataAuthenticate.Session;
      this.getDeviceResponse(callback);
      return void 0;
    }
    this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);
    this.challengeName = challengeName;
    this.cacheTokens();
    var newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;
    if (newDeviceMetadata == null) {
      return callback.onSuccess(this.signInUserSession);
    }
    authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function(errGenHash) {
      if (errGenHash) {
        return callback.onFailure(errGenHash);
      }
      var deviceSecretVerifierConfig = {
        Salt: import_buffer3.Buffer.from(authenticationHelper.getSaltDevices(), "hex").toString("base64"),
        PasswordVerifier: import_buffer3.Buffer.from(authenticationHelper.getVerifierDevices(), "hex").toString("base64")
      };
      _this4.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;
      _this4.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;
      _this4.randomPassword = authenticationHelper.getRandomPassword();
      _this4.client.request("ConfirmDevice", {
        DeviceKey: newDeviceMetadata.DeviceKey,
        AccessToken: _this4.signInUserSession.getAccessToken().getJwtToken(),
        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,
        DeviceName: userAgent
      }, function(errConfirm, dataConfirm) {
        if (errConfirm) {
          return callback.onFailure(errConfirm);
        }
        _this4.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;
        _this4.cacheDeviceKeyAndPassword();
        if (dataConfirm.UserConfirmationNecessary === true) {
          return callback.onSuccess(_this4.signInUserSession, dataConfirm.UserConfirmationNecessary);
        }
        return callback.onSuccess(_this4.signInUserSession);
      });
      return void 0;
    });
    return void 0;
  };
  _proto.completeNewPasswordChallenge = function completeNewPasswordChallenge(newPassword, requiredAttributeData, callback, clientMetadata) {
    var _this5 = this;
    if (!newPassword) {
      return callback.onFailure(new Error("New password is required."));
    }
    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());
    var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();
    var finalUserAttributes = {};
    if (requiredAttributeData) {
      Object.keys(requiredAttributeData).forEach(function(key) {
        finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];
      });
    }
    finalUserAttributes.NEW_PASSWORD = newPassword;
    finalUserAttributes.USERNAME = this.username;
    var jsonReq = {
      ChallengeName: "NEW_PASSWORD_REQUIRED",
      ClientId: this.pool.getClientId(),
      ChallengeResponses: finalUserAttributes,
      Session: this.Session,
      ClientMetadata: clientMetadata
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.request("RespondToAuthChallenge", jsonReq, function(errAuthenticate, dataAuthenticate) {
      if (errAuthenticate) {
        return callback.onFailure(errAuthenticate);
      }
      return _this5.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);
    });
    return void 0;
  };
  _proto.getDeviceResponse = function getDeviceResponse(callback, clientMetadata) {
    var _this6 = this;
    var authenticationHelper = new AuthenticationHelper(this.deviceGroupKey);
    var dateHelper = new DateHelper();
    var authParameters = {};
    authParameters.USERNAME = this.username;
    authParameters.DEVICE_KEY = this.deviceKey;
    authenticationHelper.getLargeAValue(function(errAValue, aValue) {
      if (errAValue) {
        callback.onFailure(errAValue);
      }
      authParameters.SRP_A = aValue.toString(16);
      var jsonReq = {
        ChallengeName: "DEVICE_SRP_AUTH",
        ClientId: _this6.pool.getClientId(),
        ChallengeResponses: authParameters,
        ClientMetadata: clientMetadata,
        Session: _this6.Session
      };
      if (_this6.getUserContextData()) {
        jsonReq.UserContextData = _this6.getUserContextData();
      }
      _this6.client.request("RespondToAuthChallenge", jsonReq, function(err, data) {
        if (err) {
          return callback.onFailure(err);
        }
        var challengeParameters = data.ChallengeParameters;
        var serverBValue = new BigInteger_default(challengeParameters.SRP_B, 16);
        var salt = new BigInteger_default(challengeParameters.SALT, 16);
        authenticationHelper.getPasswordAuthenticationKey(_this6.deviceKey, _this6.randomPassword, serverBValue, salt, function(errHkdf, hkdf) {
          if (errHkdf) {
            return callback.onFailure(errHkdf);
          }
          var dateNow = dateHelper.getNowString();
          var concatBuffer = import_buffer3.Buffer.concat([import_buffer3.Buffer.from(_this6.deviceGroupKey, "utf8"), import_buffer3.Buffer.from(_this6.deviceKey, "utf8"), import_buffer3.Buffer.from(challengeParameters.SECRET_BLOCK, "base64"), import_buffer3.Buffer.from(dateNow, "utf8")]);
          var awsCryptoHash = new import_sha256_js2.Sha256(hkdf);
          awsCryptoHash.update(concatBuffer);
          var resultFromAWSCrypto = awsCryptoHash.digestSync();
          var signatureString = import_buffer3.Buffer.from(resultFromAWSCrypto).toString("base64");
          var challengeResponses = {};
          challengeResponses.USERNAME = _this6.username;
          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;
          challengeResponses.TIMESTAMP = dateNow;
          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;
          challengeResponses.DEVICE_KEY = _this6.deviceKey;
          var jsonReqResp = {
            ChallengeName: "DEVICE_PASSWORD_VERIFIER",
            ClientId: _this6.pool.getClientId(),
            ChallengeResponses: challengeResponses,
            Session: data.Session
          };
          if (_this6.getUserContextData()) {
            jsonReqResp.UserContextData = _this6.getUserContextData();
          }
          _this6.client.request("RespondToAuthChallenge", jsonReqResp, function(errAuthenticate, dataAuthenticate) {
            if (errAuthenticate) {
              return callback.onFailure(errAuthenticate);
            }
            _this6.signInUserSession = _this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult);
            _this6.cacheTokens();
            return callback.onSuccess(_this6.signInUserSession);
          });
          return void 0;
        });
        return void 0;
      });
    });
  };
  _proto.confirmRegistration = function confirmRegistration(confirmationCode, forceAliasCreation, callback, clientMetadata) {
    var jsonReq = {
      ClientId: this.pool.getClientId(),
      ConfirmationCode: confirmationCode,
      Username: this.username,
      ForceAliasCreation: forceAliasCreation,
      ClientMetadata: clientMetadata
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.request("ConfirmSignUp", jsonReq, function(err) {
      if (err) {
        return callback(err, null);
      }
      return callback(null, "SUCCESS");
    });
  };
  _proto.sendCustomChallengeAnswer = function sendCustomChallengeAnswer(answerChallenge, callback, clientMetadata) {
    var _this7 = this;
    var challengeResponses = {};
    challengeResponses.USERNAME = this.username;
    challengeResponses.ANSWER = answerChallenge;
    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolName());
    this.getCachedDeviceKeyAndPassword();
    if (this.deviceKey != null) {
      challengeResponses.DEVICE_KEY = this.deviceKey;
    }
    var jsonReq = {
      ChallengeName: "CUSTOM_CHALLENGE",
      ChallengeResponses: challengeResponses,
      ClientId: this.pool.getClientId(),
      Session: this.Session,
      ClientMetadata: clientMetadata
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.request("RespondToAuthChallenge", jsonReq, function(err, data) {
      if (err) {
        return callback.onFailure(err);
      }
      return _this7.authenticateUserInternal(data, authenticationHelper, callback);
    });
  };
  _proto.sendMFACode = function sendMFACode(confirmationCode, callback, mfaType, clientMetadata) {
    var _this8 = this;
    var challengeResponses = {};
    challengeResponses.USERNAME = this.username;
    challengeResponses.SMS_MFA_CODE = confirmationCode;
    var mfaTypeSelection = mfaType || "SMS_MFA";
    if (mfaTypeSelection === "SOFTWARE_TOKEN_MFA") {
      challengeResponses.SOFTWARE_TOKEN_MFA_CODE = confirmationCode;
    }
    if (this.deviceKey != null) {
      challengeResponses.DEVICE_KEY = this.deviceKey;
    }
    var jsonReq = {
      ChallengeName: mfaTypeSelection,
      ChallengeResponses: challengeResponses,
      ClientId: this.pool.getClientId(),
      Session: this.Session,
      ClientMetadata: clientMetadata
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.request("RespondToAuthChallenge", jsonReq, function(err, dataAuthenticate) {
      if (err) {
        return callback.onFailure(err);
      }
      var challengeName = dataAuthenticate.ChallengeName;
      if (challengeName === "DEVICE_SRP_AUTH") {
        _this8.getDeviceResponse(callback);
        return void 0;
      }
      _this8.signInUserSession = _this8.getCognitoUserSession(dataAuthenticate.AuthenticationResult);
      _this8.cacheTokens();
      if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {
        return callback.onSuccess(_this8.signInUserSession);
      }
      var authenticationHelper = new AuthenticationHelper(_this8.pool.getUserPoolName());
      authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function(errGenHash) {
        if (errGenHash) {
          return callback.onFailure(errGenHash);
        }
        var deviceSecretVerifierConfig = {
          Salt: import_buffer3.Buffer.from(authenticationHelper.getSaltDevices(), "hex").toString("base64"),
          PasswordVerifier: import_buffer3.Buffer.from(authenticationHelper.getVerifierDevices(), "hex").toString("base64")
        };
        _this8.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;
        _this8.deviceGroupKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey;
        _this8.randomPassword = authenticationHelper.getRandomPassword();
        _this8.client.request("ConfirmDevice", {
          DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,
          AccessToken: _this8.signInUserSession.getAccessToken().getJwtToken(),
          DeviceSecretVerifierConfig: deviceSecretVerifierConfig,
          DeviceName: userAgent
        }, function(errConfirm, dataConfirm) {
          if (errConfirm) {
            return callback.onFailure(errConfirm);
          }
          _this8.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;
          _this8.cacheDeviceKeyAndPassword();
          if (dataConfirm.UserConfirmationNecessary === true) {
            return callback.onSuccess(_this8.signInUserSession, dataConfirm.UserConfirmationNecessary);
          }
          return callback.onSuccess(_this8.signInUserSession);
        });
        return void 0;
      });
      return void 0;
    });
  };
  _proto.changePassword = function changePassword(oldUserPassword, newUserPassword, callback, clientMetadata) {
    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {
      return callback(new Error("User is not authenticated"), null);
    }
    this.client.request("ChangePassword", {
      PreviousPassword: oldUserPassword,
      ProposedPassword: newUserPassword,
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      ClientMetadata: clientMetadata
    }, function(err) {
      if (err) {
        return callback(err, null);
      }
      return callback(null, "SUCCESS");
    });
    return void 0;
  };
  _proto.enableMFA = function enableMFA(callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback(new Error("User is not authenticated"), null);
    }
    var mfaOptions = [];
    var mfaEnabled = {
      DeliveryMedium: "SMS",
      AttributeName: "phone_number"
    };
    mfaOptions.push(mfaEnabled);
    this.client.request("SetUserSettings", {
      MFAOptions: mfaOptions,
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    }, function(err) {
      if (err) {
        return callback(err, null);
      }
      return callback(null, "SUCCESS");
    });
    return void 0;
  };
  _proto.setUserMfaPreference = function setUserMfaPreference(smsMfaSettings, softwareTokenMfaSettings, callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback(new Error("User is not authenticated"), null);
    }
    this.client.request("SetUserMFAPreference", {
      SMSMfaSettings: smsMfaSettings,
      SoftwareTokenMfaSettings: softwareTokenMfaSettings,
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    }, function(err) {
      if (err) {
        return callback(err, null);
      }
      return callback(null, "SUCCESS");
    });
    return void 0;
  };
  _proto.disableMFA = function disableMFA(callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback(new Error("User is not authenticated"), null);
    }
    var mfaOptions = [];
    this.client.request("SetUserSettings", {
      MFAOptions: mfaOptions,
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    }, function(err) {
      if (err) {
        return callback(err, null);
      }
      return callback(null, "SUCCESS");
    });
    return void 0;
  };
  _proto.deleteUser = function deleteUser(callback, clientMetadata) {
    var _this9 = this;
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback(new Error("User is not authenticated"), null);
    }
    this.client.request("DeleteUser", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      ClientMetadata: clientMetadata
    }, function(err) {
      if (err) {
        return callback(err, null);
      }
      _this9.clearCachedUser();
      return callback(null, "SUCCESS");
    });
    return void 0;
  };
  _proto.updateAttributes = function updateAttributes(attributes, callback, clientMetadata) {
    var _this10 = this;
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback(new Error("User is not authenticated"), null);
    }
    this.client.request("UpdateUserAttributes", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      UserAttributes: attributes,
      ClientMetadata: clientMetadata
    }, function(err, result) {
      if (err) {
        return callback(err, null);
      }
      return _this10.getUserData(function() {
        return callback(null, "SUCCESS", result);
      }, {
        bypassCache: true
      });
    });
    return void 0;
  };
  _proto.getUserAttributes = function getUserAttributes(callback) {
    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {
      return callback(new Error("User is not authenticated"), null);
    }
    this.client.request("GetUser", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    }, function(err, userData) {
      if (err) {
        return callback(err, null);
      }
      var attributeList = [];
      for (var i2 = 0; i2 < userData.UserAttributes.length; i2++) {
        var attribute = {
          Name: userData.UserAttributes[i2].Name,
          Value: userData.UserAttributes[i2].Value
        };
        var userAttribute = new CognitoUserAttribute(attribute);
        attributeList.push(userAttribute);
      }
      return callback(null, attributeList);
    });
    return void 0;
  };
  _proto.getMFAOptions = function getMFAOptions(callback) {
    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {
      return callback(new Error("User is not authenticated"), null);
    }
    this.client.request("GetUser", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    }, function(err, userData) {
      if (err) {
        return callback(err, null);
      }
      return callback(null, userData.MFAOptions);
    });
    return void 0;
  };
  _proto.createGetUserRequest = function createGetUserRequest() {
    return this.client.promisifyRequest("GetUser", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    });
  };
  _proto.refreshSessionIfPossible = function refreshSessionIfPossible(options) {
    var _this11 = this;
    if (options === void 0) {
      options = {};
    }
    return new Promise(function(resolve) {
      var refresh = _this11.signInUserSession.getRefreshToken();
      if (refresh && refresh.getToken()) {
        _this11.refreshSession(refresh, resolve, options.clientMetadata);
      } else {
        resolve();
      }
    });
  };
  _proto.getUserData = function getUserData(callback, params) {
    var _this12 = this;
    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {
      this.clearCachedUserData();
      return callback(new Error("User is not authenticated"), null);
    }
    var userData = this.getUserDataFromCache();
    if (!userData) {
      this.fetchUserData().then(function(data) {
        callback(null, data);
      })["catch"](callback);
      return;
    }
    if (this.isFetchUserDataAndTokenRequired(params)) {
      this.fetchUserData().then(function(data) {
        return _this12.refreshSessionIfPossible(params).then(function() {
          return data;
        });
      }).then(function(data) {
        return callback(null, data);
      })["catch"](callback);
      return;
    }
    try {
      callback(null, JSON.parse(userData));
      return;
    } catch (err) {
      this.clearCachedUserData();
      callback(err, null);
      return;
    }
  };
  _proto.getUserDataFromCache = function getUserDataFromCache() {
    var userData = this.storage.getItem(this.userDataKey);
    return userData;
  };
  _proto.isFetchUserDataAndTokenRequired = function isFetchUserDataAndTokenRequired(params) {
    var _ref = params || {}, _ref$bypassCache = _ref.bypassCache, bypassCache = _ref$bypassCache === void 0 ? false : _ref$bypassCache;
    return bypassCache;
  };
  _proto.fetchUserData = function fetchUserData() {
    var _this13 = this;
    return this.createGetUserRequest().then(function(data) {
      _this13.cacheUserData(data);
      return data;
    });
  };
  _proto.deleteAttributes = function deleteAttributes(attributeList, callback) {
    var _this14 = this;
    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {
      return callback(new Error("User is not authenticated"), null);
    }
    this.client.request("DeleteUserAttributes", {
      UserAttributeNames: attributeList,
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    }, function(err) {
      if (err) {
        return callback(err, null);
      }
      return _this14.getUserData(function() {
        return callback(null, "SUCCESS");
      }, {
        bypassCache: true
      });
    });
    return void 0;
  };
  _proto.resendConfirmationCode = function resendConfirmationCode(callback, clientMetadata) {
    var jsonReq = {
      ClientId: this.pool.getClientId(),
      Username: this.username,
      ClientMetadata: clientMetadata
    };
    this.client.request("ResendConfirmationCode", jsonReq, function(err, result) {
      if (err) {
        return callback(err, null);
      }
      return callback(null, result);
    });
  };
  _proto.getSession = function getSession(callback, options) {
    if (options === void 0) {
      options = {};
    }
    if (this.username == null) {
      return callback(new Error("Username is null. Cannot retrieve a new session"), null);
    }
    if (this.signInUserSession != null && this.signInUserSession.isValid()) {
      return callback(null, this.signInUserSession);
    }
    var keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId() + "." + this.username;
    var idTokenKey = keyPrefix + ".idToken";
    var accessTokenKey = keyPrefix + ".accessToken";
    var refreshTokenKey = keyPrefix + ".refreshToken";
    var clockDriftKey = keyPrefix + ".clockDrift";
    if (this.storage.getItem(idTokenKey)) {
      var idToken = new CognitoIdToken({
        IdToken: this.storage.getItem(idTokenKey)
      });
      var accessToken = new CognitoAccessToken({
        AccessToken: this.storage.getItem(accessTokenKey)
      });
      var refreshToken = new CognitoRefreshToken({
        RefreshToken: this.storage.getItem(refreshTokenKey)
      });
      var clockDrift = parseInt(this.storage.getItem(clockDriftKey), 0) || 0;
      var sessionData = {
        IdToken: idToken,
        AccessToken: accessToken,
        RefreshToken: refreshToken,
        ClockDrift: clockDrift
      };
      var cachedSession = new CognitoUserSession(sessionData);
      if (cachedSession.isValid()) {
        this.signInUserSession = cachedSession;
        return callback(null, this.signInUserSession);
      }
      if (!refreshToken.getToken()) {
        return callback(new Error("Cannot retrieve a new session. Please authenticate."), null);
      }
      this.refreshSession(refreshToken, callback, options.clientMetadata);
    } else {
      callback(new Error("Local storage is missing an ID Token, Please authenticate"), null);
    }
    return void 0;
  };
  _proto.refreshSession = function refreshSession(refreshToken, callback, clientMetadata) {
    var _this15 = this;
    var wrappedCallback = this.pool.wrapRefreshSessionCallback ? this.pool.wrapRefreshSessionCallback(callback) : callback;
    var authParameters = {};
    authParameters.REFRESH_TOKEN = refreshToken.getToken();
    var keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId();
    var lastUserKey = keyPrefix + ".LastAuthUser";
    if (this.storage.getItem(lastUserKey)) {
      this.username = this.storage.getItem(lastUserKey);
      var deviceKeyKey = keyPrefix + "." + this.username + ".deviceKey";
      this.deviceKey = this.storage.getItem(deviceKeyKey);
      authParameters.DEVICE_KEY = this.deviceKey;
    }
    var jsonReq = {
      ClientId: this.pool.getClientId(),
      AuthFlow: "REFRESH_TOKEN_AUTH",
      AuthParameters: authParameters,
      ClientMetadata: clientMetadata
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.requestWithRetry("InitiateAuth", jsonReq, function(err, authResult) {
      if (err) {
        if (err.code === "NotAuthorizedException") {
          _this15.clearCachedUser();
        }
        return wrappedCallback(err, null);
      }
      if (authResult) {
        var authenticationResult = authResult.AuthenticationResult;
        if (!Object.prototype.hasOwnProperty.call(authenticationResult, "RefreshToken")) {
          authenticationResult.RefreshToken = refreshToken.getToken();
        }
        _this15.signInUserSession = _this15.getCognitoUserSession(authenticationResult);
        _this15.cacheTokens();
        return wrappedCallback(null, _this15.signInUserSession);
      }
      return void 0;
    });
  };
  _proto.cacheTokens = function cacheTokens() {
    var keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId();
    var idTokenKey = keyPrefix + "." + this.username + ".idToken";
    var accessTokenKey = keyPrefix + "." + this.username + ".accessToken";
    var refreshTokenKey = keyPrefix + "." + this.username + ".refreshToken";
    var clockDriftKey = keyPrefix + "." + this.username + ".clockDrift";
    var lastUserKey = keyPrefix + ".LastAuthUser";
    this.storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());
    this.storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());
    this.storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());
    this.storage.setItem(clockDriftKey, "" + this.signInUserSession.getClockDrift());
    this.storage.setItem(lastUserKey, this.username);
  };
  _proto.cacheUserData = function cacheUserData(userData) {
    this.storage.setItem(this.userDataKey, JSON.stringify(userData));
  };
  _proto.clearCachedUserData = function clearCachedUserData() {
    this.storage.removeItem(this.userDataKey);
  };
  _proto.clearCachedUser = function clearCachedUser() {
    this.clearCachedTokens();
    this.clearCachedUserData();
  };
  _proto.cacheDeviceKeyAndPassword = function cacheDeviceKeyAndPassword() {
    var keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId() + "." + this.username;
    var deviceKeyKey = keyPrefix + ".deviceKey";
    var randomPasswordKey = keyPrefix + ".randomPasswordKey";
    var deviceGroupKeyKey = keyPrefix + ".deviceGroupKey";
    this.storage.setItem(deviceKeyKey, this.deviceKey);
    this.storage.setItem(randomPasswordKey, this.randomPassword);
    this.storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);
  };
  _proto.getCachedDeviceKeyAndPassword = function getCachedDeviceKeyAndPassword() {
    var keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId() + "." + this.username;
    var deviceKeyKey = keyPrefix + ".deviceKey";
    var randomPasswordKey = keyPrefix + ".randomPasswordKey";
    var deviceGroupKeyKey = keyPrefix + ".deviceGroupKey";
    if (this.storage.getItem(deviceKeyKey)) {
      this.deviceKey = this.storage.getItem(deviceKeyKey);
      this.randomPassword = this.storage.getItem(randomPasswordKey);
      this.deviceGroupKey = this.storage.getItem(deviceGroupKeyKey);
    }
  };
  _proto.clearCachedDeviceKeyAndPassword = function clearCachedDeviceKeyAndPassword() {
    var keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId() + "." + this.username;
    var deviceKeyKey = keyPrefix + ".deviceKey";
    var randomPasswordKey = keyPrefix + ".randomPasswordKey";
    var deviceGroupKeyKey = keyPrefix + ".deviceGroupKey";
    this.storage.removeItem(deviceKeyKey);
    this.storage.removeItem(randomPasswordKey);
    this.storage.removeItem(deviceGroupKeyKey);
  };
  _proto.clearCachedTokens = function clearCachedTokens() {
    var keyPrefix = "CognitoIdentityServiceProvider." + this.pool.getClientId();
    var idTokenKey = keyPrefix + "." + this.username + ".idToken";
    var accessTokenKey = keyPrefix + "." + this.username + ".accessToken";
    var refreshTokenKey = keyPrefix + "." + this.username + ".refreshToken";
    var lastUserKey = keyPrefix + ".LastAuthUser";
    var clockDriftKey = keyPrefix + "." + this.username + ".clockDrift";
    this.storage.removeItem(idTokenKey);
    this.storage.removeItem(accessTokenKey);
    this.storage.removeItem(refreshTokenKey);
    this.storage.removeItem(lastUserKey);
    this.storage.removeItem(clockDriftKey);
  };
  _proto.getCognitoUserSession = function getCognitoUserSession(authResult) {
    var idToken = new CognitoIdToken(authResult);
    var accessToken = new CognitoAccessToken(authResult);
    var refreshToken = new CognitoRefreshToken(authResult);
    var sessionData = {
      IdToken: idToken,
      AccessToken: accessToken,
      RefreshToken: refreshToken
    };
    return new CognitoUserSession(sessionData);
  };
  _proto.forgotPassword = function forgotPassword(callback, clientMetadata) {
    var jsonReq = {
      ClientId: this.pool.getClientId(),
      Username: this.username,
      ClientMetadata: clientMetadata
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.request("ForgotPassword", jsonReq, function(err, data) {
      if (err) {
        return callback.onFailure(err);
      }
      if (typeof callback.inputVerificationCode === "function") {
        return callback.inputVerificationCode(data);
      }
      return callback.onSuccess(data);
    });
  };
  _proto.confirmPassword = function confirmPassword(confirmationCode, newPassword, callback, clientMetadata) {
    var jsonReq = {
      ClientId: this.pool.getClientId(),
      Username: this.username,
      ConfirmationCode: confirmationCode,
      Password: newPassword,
      ClientMetadata: clientMetadata
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.request("ConfirmForgotPassword", jsonReq, function(err) {
      if (err) {
        return callback.onFailure(err);
      }
      return callback.onSuccess("SUCCESS");
    });
  };
  _proto.getAttributeVerificationCode = function getAttributeVerificationCode(attributeName, callback, clientMetadata) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback.onFailure(new Error("User is not authenticated"));
    }
    this.client.request("GetUserAttributeVerificationCode", {
      AttributeName: attributeName,
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      ClientMetadata: clientMetadata
    }, function(err, data) {
      if (err) {
        return callback.onFailure(err);
      }
      if (typeof callback.inputVerificationCode === "function") {
        return callback.inputVerificationCode(data);
      }
      return callback.onSuccess("SUCCESS");
    });
    return void 0;
  };
  _proto.verifyAttribute = function verifyAttribute(attributeName, confirmationCode, callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback.onFailure(new Error("User is not authenticated"));
    }
    this.client.request("VerifyUserAttribute", {
      AttributeName: attributeName,
      Code: confirmationCode,
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    }, function(err) {
      if (err) {
        return callback.onFailure(err);
      }
      return callback.onSuccess("SUCCESS");
    });
    return void 0;
  };
  _proto.getDevice = function getDevice(callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback.onFailure(new Error("User is not authenticated"));
    }
    this.client.request("GetDevice", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      DeviceKey: this.deviceKey
    }, function(err, data) {
      if (err) {
        return callback.onFailure(err);
      }
      return callback.onSuccess(data);
    });
    return void 0;
  };
  _proto.forgetSpecificDevice = function forgetSpecificDevice(deviceKey, callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback.onFailure(new Error("User is not authenticated"));
    }
    this.client.request("ForgetDevice", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      DeviceKey: deviceKey
    }, function(err) {
      if (err) {
        return callback.onFailure(err);
      }
      return callback.onSuccess("SUCCESS");
    });
    return void 0;
  };
  _proto.forgetDevice = function forgetDevice(callback) {
    var _this16 = this;
    this.forgetSpecificDevice(this.deviceKey, {
      onFailure: callback.onFailure,
      onSuccess: function onSuccess(result) {
        _this16.deviceKey = null;
        _this16.deviceGroupKey = null;
        _this16.randomPassword = null;
        _this16.clearCachedDeviceKeyAndPassword();
        return callback.onSuccess(result);
      }
    });
  };
  _proto.setDeviceStatusRemembered = function setDeviceStatusRemembered(callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback.onFailure(new Error("User is not authenticated"));
    }
    this.client.request("UpdateDeviceStatus", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      DeviceKey: this.deviceKey,
      DeviceRememberedStatus: "remembered"
    }, function(err) {
      if (err) {
        return callback.onFailure(err);
      }
      return callback.onSuccess("SUCCESS");
    });
    return void 0;
  };
  _proto.setDeviceStatusNotRemembered = function setDeviceStatusNotRemembered(callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback.onFailure(new Error("User is not authenticated"));
    }
    this.client.request("UpdateDeviceStatus", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      DeviceKey: this.deviceKey,
      DeviceRememberedStatus: "not_remembered"
    }, function(err) {
      if (err) {
        return callback.onFailure(err);
      }
      return callback.onSuccess("SUCCESS");
    });
    return void 0;
  };
  _proto.listDevices = function listDevices(limit, paginationToken, callback) {
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback.onFailure(new Error("User is not authenticated"));
    }
    var requestParams = {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
      Limit: limit
    };
    if (paginationToken) {
      requestParams.PaginationToken = paginationToken;
    }
    this.client.request("ListDevices", requestParams, function(err, data) {
      if (err) {
        return callback.onFailure(err);
      }
      return callback.onSuccess(data);
    });
    return void 0;
  };
  _proto.globalSignOut = function globalSignOut(callback) {
    var _this17 = this;
    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {
      return callback.onFailure(new Error("User is not authenticated"));
    }
    this.client.request("GlobalSignOut", {
      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
    }, function(err) {
      if (err) {
        return callback.onFailure(err);
      }
      _this17.clearCachedUser();
      return callback.onSuccess("SUCCESS");
    });
    return void 0;
  };
  _proto.signOut = function signOut2(revokeTokenCallback) {
    var _this18 = this;
    if (!revokeTokenCallback || typeof revokeTokenCallback !== "function") {
      this.cleanClientData();
      return;
    }
    this.getSession(function(error2, _session) {
      if (error2) {
        return revokeTokenCallback(error2);
      }
      _this18.revokeTokens(function(err) {
        _this18.cleanClientData();
        revokeTokenCallback(err);
      });
    });
  };
  _proto.revokeTokens = function revokeTokens(revokeTokenCallback) {
    if (revokeTokenCallback === void 0) {
      revokeTokenCallback = function revokeTokenCallback2() {
      };
    }
    if (typeof revokeTokenCallback !== "function") {
      throw new Error("Invalid revokeTokenCallback. It should be a function.");
    }
    var tokensToBeRevoked = [];
    if (!this.signInUserSession) {
      var error2 = new Error("User is not authenticated");
      return revokeTokenCallback(error2);
    }
    if (!this.signInUserSession.getAccessToken()) {
      var _error = new Error("No Access token available");
      return revokeTokenCallback(_error);
    }
    var refreshToken = this.signInUserSession.getRefreshToken().getToken();
    var accessToken = this.signInUserSession.getAccessToken();
    if (this.isSessionRevocable(accessToken)) {
      if (refreshToken) {
        return this.revokeToken({
          token: refreshToken,
          callback: revokeTokenCallback
        });
      }
    }
    revokeTokenCallback();
  };
  _proto.isSessionRevocable = function isSessionRevocable(token) {
    if (token && typeof token.decodePayload === "function") {
      try {
        var _token$decodePayload = token.decodePayload(), origin_jti = _token$decodePayload.origin_jti;
        return !!origin_jti;
      } catch (err) {
      }
    }
    return false;
  };
  _proto.cleanClientData = function cleanClientData() {
    this.signInUserSession = null;
    this.clearCachedUser();
  };
  _proto.revokeToken = function revokeToken(_ref2) {
    var token = _ref2.token, callback = _ref2.callback;
    this.client.requestWithRetry("RevokeToken", {
      Token: token,
      ClientId: this.pool.getClientId()
    }, function(err) {
      if (err) {
        return callback(err);
      }
      callback();
    });
  };
  _proto.sendMFASelectionAnswer = function sendMFASelectionAnswer(answerChallenge, callback) {
    var _this19 = this;
    var challengeResponses = {};
    challengeResponses.USERNAME = this.username;
    challengeResponses.ANSWER = answerChallenge;
    var jsonReq = {
      ChallengeName: "SELECT_MFA_TYPE",
      ChallengeResponses: challengeResponses,
      ClientId: this.pool.getClientId(),
      Session: this.Session
    };
    if (this.getUserContextData()) {
      jsonReq.UserContextData = this.getUserContextData();
    }
    this.client.request("RespondToAuthChallenge", jsonReq, function(err, data) {
      if (err) {
        return callback.onFailure(err);
      }
      _this19.Session = data.Session;
      if (answerChallenge === "SMS_MFA") {
        return callback.mfaRequired(data.ChallengeName, data.ChallengeParameters);
      }
      if (answerChallenge === "SOFTWARE_TOKEN_MFA") {
        return callback.totpRequired(data.ChallengeName, data.ChallengeParameters);
      }
      return void 0;
    });
  };
  _proto.getUserContextData = function getUserContextData() {
    var pool = this.pool;
    return pool.getUserContextData(this.username);
  };
  _proto.associateSoftwareToken = function associateSoftwareToken(callback) {
    var _this20 = this;
    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {
      this.client.request("AssociateSoftwareToken", {
        Session: this.Session
      }, function(err, data) {
        if (err) {
          return callback.onFailure(err);
        }
        _this20.Session = data.Session;
        return callback.associateSecretCode(data.SecretCode);
      });
    } else {
      this.client.request("AssociateSoftwareToken", {
        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()
      }, function(err, data) {
        if (err) {
          return callback.onFailure(err);
        }
        return callback.associateSecretCode(data.SecretCode);
      });
    }
  };
  _proto.verifySoftwareToken = function verifySoftwareToken(totpCode, friendlyDeviceName, callback) {
    var _this21 = this;
    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {
      this.client.request("VerifySoftwareToken", {
        Session: this.Session,
        UserCode: totpCode,
        FriendlyDeviceName: friendlyDeviceName
      }, function(err, data) {
        if (err) {
          return callback.onFailure(err);
        }
        _this21.Session = data.Session;
        var challengeResponses = {};
        challengeResponses.USERNAME = _this21.username;
        var jsonReq = {
          ChallengeName: "MFA_SETUP",
          ClientId: _this21.pool.getClientId(),
          ChallengeResponses: challengeResponses,
          Session: _this21.Session
        };
        if (_this21.getUserContextData()) {
          jsonReq.UserContextData = _this21.getUserContextData();
        }
        _this21.client.request("RespondToAuthChallenge", jsonReq, function(errRespond, dataRespond) {
          if (errRespond) {
            return callback.onFailure(errRespond);
          }
          _this21.signInUserSession = _this21.getCognitoUserSession(dataRespond.AuthenticationResult);
          _this21.cacheTokens();
          return callback.onSuccess(_this21.signInUserSession);
        });
        return void 0;
      });
    } else {
      this.client.request("VerifySoftwareToken", {
        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),
        UserCode: totpCode,
        FriendlyDeviceName: friendlyDeviceName
      }, function(err, data) {
        if (err) {
          return callback.onFailure(err);
        }
        return callback.onSuccess(data);
      });
    }
  };
  return CognitoUser2;
}();

// node_modules/amazon-cognito-identity-js/es/Client.js
var import_isomorphic_unfetch = __toESM(require_browser());

// node_modules/amazon-cognito-identity-js/es/UserAgent.js
function UserAgent() {
}
UserAgent.prototype.userAgent = getUserAgent();
var getAmplifyUserAgent = function getAmplifyUserAgent2(action) {
  var uaCategoryAction = UserAgent.category ? " " + UserAgent.category : "";
  var uaFramework = UserAgent.framework ? " framework/" + UserAgent.framework : "";
  var userAgent2 = "" + UserAgent.prototype.userAgent + uaCategoryAction + uaFramework;
  return userAgent2;
};

// node_modules/amazon-cognito-identity-js/es/Client.js
function _inheritsLoose3(t2, o2) {
  t2.prototype = Object.create(o2.prototype), t2.prototype.constructor = t2, _setPrototypeOf3(t2, o2);
}
function _wrapNativeSuper(t2) {
  var r3 = "function" == typeof Map ? /* @__PURE__ */ new Map() : void 0;
  return _wrapNativeSuper = function _wrapNativeSuper2(t3) {
    if (null === t3 || !_isNativeFunction(t3)) return t3;
    if ("function" != typeof t3) throw new TypeError("Super expression must either be null or a function");
    if (void 0 !== r3) {
      if (r3.has(t3)) return r3.get(t3);
      r3.set(t3, Wrapper);
    }
    function Wrapper() {
      return _construct(t3, arguments, _getPrototypeOf(this).constructor);
    }
    return Wrapper.prototype = Object.create(t3.prototype, {
      constructor: {
        value: Wrapper,
        enumerable: false,
        writable: true,
        configurable: true
      }
    }), _setPrototypeOf3(Wrapper, t3);
  }, _wrapNativeSuper(t2);
}
function _construct(t2, e3, r3) {
  if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);
  var o2 = [null];
  o2.push.apply(o2, e3);
  var p2 = new (t2.bind.apply(t2, o2))();
  return r3 && _setPrototypeOf3(p2, r3.prototype), p2;
}
function _isNativeReflectConstruct() {
  try {
    var t2 = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
  } catch (t3) {
  }
  return (_isNativeReflectConstruct = function _isNativeReflectConstruct2() {
    return !!t2;
  })();
}
function _isNativeFunction(t2) {
  try {
    return -1 !== Function.toString.call(t2).indexOf("[native code]");
  } catch (n3) {
    return "function" == typeof t2;
  }
}
function _setPrototypeOf3(t2, e3) {
  return _setPrototypeOf3 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t3, e4) {
    return t3.__proto__ = e4, t3;
  }, _setPrototypeOf3(t2, e3);
}
function _getPrototypeOf(t2) {
  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t3) {
    return t3.__proto__ || Object.getPrototypeOf(t3);
  }, _getPrototypeOf(t2);
}
var CognitoError = /* @__PURE__ */ function(_Error) {
  function CognitoError2(message, code, name, statusCode) {
    var _this;
    _this = _Error.call(this, message) || this;
    _this.code = code;
    _this.name = name;
    _this.statusCode = statusCode;
    return _this;
  }
  _inheritsLoose3(CognitoError2, _Error);
  return CognitoError2;
}(/* @__PURE__ */ _wrapNativeSuper(Error));
var Client = /* @__PURE__ */ function() {
  function Client3(region, endpoint, fetchOptions) {
    this.endpoint = endpoint || "https://cognito-idp." + region + ".amazonaws.com/";
    var _ref = fetchOptions || {}, credentials = _ref.credentials;
    this.fetchOptions = credentials ? {
      credentials
    } : {};
  }
  var _proto = Client3.prototype;
  _proto.promisifyRequest = function promisifyRequest(operation, params) {
    var _this2 = this;
    return new Promise(function(resolve, reject) {
      _this2.request(operation, params, function(err, data) {
        if (err) {
          reject(new CognitoError(err.message, err.code, err.name, err.statusCode));
        } else {
          resolve(data);
        }
      });
    });
  };
  _proto.requestWithRetry = function requestWithRetry(operation, params, callback) {
    var _this3 = this;
    var MAX_DELAY_IN_MILLIS = 5 * 1e3;
    jitteredExponentialRetry(function(p2) {
      return new Promise(function(res, rej) {
        _this3.request(operation, p2, function(error2, result) {
          if (error2) {
            rej(error2);
          } else {
            res(result);
          }
        });
      });
    }, [params], MAX_DELAY_IN_MILLIS).then(function(result) {
      return callback(null, result);
    })["catch"](function(error2) {
      return callback(error2);
    });
  };
  _proto.request = function request(operation, params, callback) {
    var headers = {
      "Content-Type": "application/x-amz-json-1.1",
      "X-Amz-Target": "AWSCognitoIdentityProviderService." + operation,
      "X-Amz-User-Agent": getAmplifyUserAgent(),
      "Cache-Control": "no-store"
    };
    var options = Object.assign({}, this.fetchOptions, {
      headers,
      method: "POST",
      mode: "cors",
      body: JSON.stringify(params)
    });
    var response;
    var responseJsonData;
    fetch(this.endpoint, options).then(function(resp) {
      response = resp;
      return resp;
    }, function(err) {
      if (err instanceof TypeError) {
        throw new Error("Network error");
      }
      throw err;
    }).then(function(resp) {
      return resp.json()["catch"](function() {
        return {};
      });
    }).then(function(data) {
      if (response.ok) return callback(null, data);
      responseJsonData = data;
      var code = (data.__type || data.code).split("#").pop();
      var error2 = new Error(data.message || data.Message || null);
      error2.name = code;
      error2.code = code;
      return callback(error2);
    })["catch"](function(err) {
      if (response && response.headers && response.headers.get("x-amzn-errortype")) {
        try {
          var code = response.headers.get("x-amzn-errortype").split(":")[0];
          var error2 = new Error(response.status ? response.status.toString() : null);
          error2.code = code;
          error2.name = code;
          error2.statusCode = response.status;
          return callback(error2);
        } catch (ex) {
          return callback(err);
        }
      } else if (err instanceof Error && err.message === "Network error") {
        err.code = "NetworkError";
      }
      return callback(err);
    });
  };
  return Client3;
}();
var logger = {
  debug: function debug() {
  }
};
var isNonRetryableError = function isNonRetryableError2(obj) {
  var key = "nonRetryable";
  return obj && obj[key];
};
function retry(functionToRetry, args, delayFn, attempt) {
  if (attempt === void 0) {
    attempt = 1;
  }
  if (typeof functionToRetry !== "function") {
    throw Error("functionToRetry must be a function");
  }
  logger.debug(functionToRetry.name + " attempt #" + attempt + " with args: " + JSON.stringify(args));
  return functionToRetry.apply(void 0, args)["catch"](function(err) {
    logger.debug("error on " + functionToRetry.name, err);
    if (isNonRetryableError(err)) {
      logger.debug(functionToRetry.name + " non retryable error", err);
      throw err;
    }
    var retryIn = delayFn(attempt, args, err);
    logger.debug(functionToRetry.name + " retrying in " + retryIn + " ms");
    if (retryIn !== false) {
      return new Promise(function(res) {
        return setTimeout(res, retryIn);
      }).then(function() {
        return retry(functionToRetry, args, delayFn, attempt + 1);
      });
    } else {
      throw err;
    }
  });
}
function jitteredBackoff(maxDelayMs) {
  var BASE_TIME_MS = 100;
  var JITTER_FACTOR = 100;
  return function(attempt) {
    var delay = Math.pow(2, attempt) * BASE_TIME_MS + JITTER_FACTOR * Math.random();
    return delay > maxDelayMs ? false : delay;
  };
}
var MAX_DELAY_MS = 5 * 60 * 1e3;
function jitteredExponentialRetry(functionToRetry, args, maxDelayMs) {
  if (maxDelayMs === void 0) {
    maxDelayMs = MAX_DELAY_MS;
  }
  return retry(functionToRetry, args, jitteredBackoff(maxDelayMs));
}

// node_modules/amazon-cognito-identity-js/es/CognitoUserPool.js
var USER_POOL_ID_MAX_LENGTH = 55;
var CognitoUserPool = /* @__PURE__ */ function() {
  function CognitoUserPool2(data, wrapRefreshSessionCallback) {
    var _ref = data || {}, UserPoolId = _ref.UserPoolId, ClientId = _ref.ClientId, endpoint = _ref.endpoint, fetchOptions = _ref.fetchOptions, AdvancedSecurityDataCollectionFlag = _ref.AdvancedSecurityDataCollectionFlag;
    if (!UserPoolId || !ClientId) {
      throw new Error("Both UserPoolId and ClientId are required.");
    }
    if (UserPoolId.length > USER_POOL_ID_MAX_LENGTH || !/^[\w-]+_[0-9a-zA-Z]+$/.test(UserPoolId)) {
      throw new Error("Invalid UserPoolId format.");
    }
    var region = UserPoolId.split("_")[0];
    this.userPoolId = UserPoolId;
    this.clientId = ClientId;
    this.client = new Client(region, endpoint, fetchOptions);
    this.advancedSecurityDataCollectionFlag = AdvancedSecurityDataCollectionFlag !== false;
    this.storage = data.Storage || new StorageHelper().getStorage();
    if (wrapRefreshSessionCallback) {
      this.wrapRefreshSessionCallback = wrapRefreshSessionCallback;
    }
  }
  var _proto = CognitoUserPool2.prototype;
  _proto.getUserPoolId = function getUserPoolId() {
    return this.userPoolId;
  };
  _proto.getUserPoolName = function getUserPoolName() {
    return this.getUserPoolId().split("_")[1];
  };
  _proto.getClientId = function getClientId() {
    return this.clientId;
  };
  _proto.signUp = function signUp2(username, password, userAttributes, validationData, callback, clientMetadata) {
    var _this = this;
    var jsonReq = {
      ClientId: this.clientId,
      Username: username,
      Password: password,
      UserAttributes: userAttributes,
      ValidationData: validationData,
      ClientMetadata: clientMetadata
    };
    if (this.getUserContextData(username)) {
      jsonReq.UserContextData = this.getUserContextData(username);
    }
    this.client.request("SignUp", jsonReq, function(err, data) {
      if (err) {
        return callback(err, null);
      }
      var cognitoUser = {
        Username: username,
        Pool: _this,
        Storage: _this.storage
      };
      var returnData = {
        user: new CognitoUser(cognitoUser),
        userConfirmed: data.UserConfirmed,
        userSub: data.UserSub,
        codeDeliveryDetails: data.CodeDeliveryDetails
      };
      return callback(null, returnData);
    });
  };
  _proto.getCurrentUser = function getCurrentUser() {
    var lastUserKey = "CognitoIdentityServiceProvider." + this.clientId + ".LastAuthUser";
    var lastAuthUser = this.storage.getItem(lastUserKey);
    if (lastAuthUser) {
      var cognitoUser = {
        Username: lastAuthUser,
        Pool: this,
        Storage: this.storage
      };
      return new CognitoUser(cognitoUser);
    }
    return null;
  };
  _proto.getUserContextData = function getUserContextData(username) {
    if (typeof AmazonCognitoAdvancedSecurityData === "undefined") {
      return void 0;
    }
    var amazonCognitoAdvancedSecurityDataConst = AmazonCognitoAdvancedSecurityData;
    if (this.advancedSecurityDataCollectionFlag) {
      var advancedSecurityData = amazonCognitoAdvancedSecurityDataConst.getData(username, this.userPoolId, this.clientId);
      if (advancedSecurityData) {
        var userContextData = {
          EncodedData: advancedSecurityData
        };
        return userContextData;
      }
    }
    return {};
  };
  return CognitoUserPool2;
}();

// node_modules/amazon-cognito-identity-js/es/CookieStorage.js
var Cookies = __toESM(require_js_cookie());

// node_modules/@sentry/core/build/esm/debug-build.js
var DEBUG_BUILD = typeof __SENTRY_DEBUG__ === "undefined" || __SENTRY_DEBUG__;

// node_modules/@sentry/core/build/esm/utils/worldwide.js
var GLOBAL_OBJ = globalThis;

// node_modules/@sentry/core/build/esm/utils/version.js
var SDK_VERSION = "9.38.0";

// node_modules/@sentry/core/build/esm/carrier.js
function getMainCarrier() {
  getSentryCarrier(GLOBAL_OBJ);
  return GLOBAL_OBJ;
}
function getSentryCarrier(carrier) {
  const __SENTRY__ = carrier.__SENTRY__ = carrier.__SENTRY__ || {};
  __SENTRY__.version = __SENTRY__.version || SDK_VERSION;
  return __SENTRY__[SDK_VERSION] = __SENTRY__[SDK_VERSION] || {};
}
function getGlobalSingleton(name, creator, obj = GLOBAL_OBJ) {
  const __SENTRY__ = obj.__SENTRY__ = obj.__SENTRY__ || {};
  const carrier = __SENTRY__[SDK_VERSION] = __SENTRY__[SDK_VERSION] || {};
  return carrier[name] || (carrier[name] = creator());
}

// node_modules/@sentry/core/build/esm/utils/logger.js
var CONSOLE_LEVELS = ["debug", "info", "warn", "error", "log", "assert", "trace"];
var PREFIX = "Sentry Logger ";
var originalConsoleMethods = {};
function consoleSandbox(callback) {
  if (!("console" in GLOBAL_OBJ)) {
    return callback();
  }
  const console2 = GLOBAL_OBJ.console;
  const wrappedFuncs = {};
  const wrappedLevels = Object.keys(originalConsoleMethods);
  wrappedLevels.forEach((level) => {
    const originalConsoleMethod = originalConsoleMethods[level];
    wrappedFuncs[level] = console2[level];
    console2[level] = originalConsoleMethod;
  });
  try {
    return callback();
  } finally {
    wrappedLevels.forEach((level) => {
      console2[level] = wrappedFuncs[level];
    });
  }
}
function enable() {
  _getLoggerSettings().enabled = true;
}
function disable() {
  _getLoggerSettings().enabled = false;
}
function isEnabled() {
  return _getLoggerSettings().enabled;
}
function log(...args) {
  _maybeLog("log", ...args);
}
function info(...args) {
  _maybeLog("info", ...args);
}
function warn(...args) {
  _maybeLog("warn", ...args);
}
function error(...args) {
  _maybeLog("error", ...args);
}
function _debug(...args) {
  _maybeLog("debug", ...args);
}
function assert(...args) {
  _maybeLog("assert", ...args);
}
function trace(...args) {
  _maybeLog("trace", ...args);
}
function _maybeLog(level, ...args) {
  if (!DEBUG_BUILD) {
    return;
  }
  if (isEnabled()) {
    consoleSandbox(() => {
      GLOBAL_OBJ.console[level](`${PREFIX}[${level}]:`, ...args);
    });
  }
}
function _getLoggerSettings() {
  if (!DEBUG_BUILD) {
    return {
      enabled: false
    };
  }
  return getGlobalSingleton("loggerSettings", () => ({
    enabled: false
  }));
}
var logger2 = {
  /** Enable logging. */
  enable,
  /** Disable logging. */
  disable,
  /** Check if logging is enabled. */
  isEnabled,
  /** Log a message. */
  log,
  /** Log level info */
  info,
  /** Log a warning. */
  warn,
  /** Log an error. */
  error,
  /** Log a debug message. */
  debug: _debug,
  /** Log an assertion. */
  assert,
  /** Log a trace. */
  trace
};
var debug2 = {
  /** Enable logging. */
  enable,
  /** Disable logging. */
  disable,
  /** Check if logging is enabled. */
  isEnabled,
  /** Log a message. */
  log,
  /** Log a warning. */
  warn,
  /** Log an error. */
  error
};

// node_modules/@sentry/core/build/esm/utils/stacktrace.js
var STACKTRACE_FRAME_LIMIT = 50;
var UNKNOWN_FUNCTION = "?";
var WEBPACK_ERROR_REGEXP = /\(error: (.*)\)/;
var STRIP_FRAME_REGEXP = /captureMessage|captureException/;
function createStackParser(...parsers) {
  const sortedParsers = parsers.sort((a2, b2) => a2[0] - b2[0]).map((p2) => p2[1]);
  return (stack, skipFirstLines = 0, framesToPop = 0) => {
    const frames = [];
    const lines = stack.split("\n");
    for (let i2 = skipFirstLines; i2 < lines.length; i2++) {
      const line = lines[i2];
      if (line.length > 1024) {
        continue;
      }
      const cleanedLine = WEBPACK_ERROR_REGEXP.test(line) ? line.replace(WEBPACK_ERROR_REGEXP, "$1") : line;
      if (cleanedLine.match(/\S*Error: /)) {
        continue;
      }
      for (const parser of sortedParsers) {
        const frame = parser(cleanedLine);
        if (frame) {
          frames.push(frame);
          break;
        }
      }
      if (frames.length >= STACKTRACE_FRAME_LIMIT + framesToPop) {
        break;
      }
    }
    return stripSentryFramesAndReverse(frames.slice(framesToPop));
  };
}
function stackParserFromStackParserOptions(stackParser) {
  if (Array.isArray(stackParser)) {
    return createStackParser(...stackParser);
  }
  return stackParser;
}
function stripSentryFramesAndReverse(stack) {
  if (!stack.length) {
    return [];
  }
  const localStack = Array.from(stack);
  if (/sentryWrapped/.test(getLastStackFrame(localStack).function || "")) {
    localStack.pop();
  }
  localStack.reverse();
  if (STRIP_FRAME_REGEXP.test(getLastStackFrame(localStack).function || "")) {
    localStack.pop();
    if (STRIP_FRAME_REGEXP.test(getLastStackFrame(localStack).function || "")) {
      localStack.pop();
    }
  }
  return localStack.slice(0, STACKTRACE_FRAME_LIMIT).map((frame) => __spreadProps(__spreadValues({}, frame), {
    filename: frame.filename || getLastStackFrame(localStack).filename,
    function: frame.function || UNKNOWN_FUNCTION
  }));
}
function getLastStackFrame(arr) {
  return arr[arr.length - 1] || {};
}
var defaultFunctionName = "<anonymous>";
function getFunctionName(fn) {
  try {
    if (!fn || typeof fn !== "function") {
      return defaultFunctionName;
    }
    return fn.name || defaultFunctionName;
  } catch (e3) {
    return defaultFunctionName;
  }
}
function getFramesFromEvent(event) {
  const exception = event.exception;
  if (exception) {
    const frames = [];
    try {
      exception.values.forEach((value) => {
        if (value.stacktrace.frames) {
          frames.push(...value.stacktrace.frames);
        }
      });
      return frames;
    } catch (_oO) {
      return void 0;
    }
  }
  return void 0;
}

// node_modules/@sentry/core/build/esm/instrument/handlers.js
var handlers = {};
var instrumented = {};
function addHandler(type, handler) {
  handlers[type] = handlers[type] || [];
  handlers[type].push(handler);
}
function maybeInstrument(type, instrumentFn) {
  if (!instrumented[type]) {
    instrumented[type] = true;
    try {
      instrumentFn();
    } catch (e3) {
      DEBUG_BUILD && debug2.error(`Error while instrumenting ${type}`, e3);
    }
  }
}
function triggerHandlers(type, data) {
  const typeHandlers = type && handlers[type];
  if (!typeHandlers) {
    return;
  }
  for (const handler of typeHandlers) {
    try {
      handler(data);
    } catch (e3) {
      DEBUG_BUILD && debug2.error(`Error while triggering instrumentation handler.
Type: ${type}
Name: ${getFunctionName(handler)}
Error:`, e3);
    }
  }
}

// node_modules/@sentry/core/build/esm/instrument/globalError.js
var _oldOnErrorHandler = null;
function addGlobalErrorInstrumentationHandler(handler) {
  const type = "error";
  addHandler(type, handler);
  maybeInstrument(type, instrumentError);
}
function instrumentError() {
  _oldOnErrorHandler = GLOBAL_OBJ.onerror;
  GLOBAL_OBJ.onerror = function(msg, url, line, column, error2) {
    const handlerData = {
      column,
      error: error2,
      line,
      msg,
      url
    };
    triggerHandlers("error", handlerData);
    if (_oldOnErrorHandler) {
      return _oldOnErrorHandler.apply(this, arguments);
    }
    return false;
  };
  GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__ = true;
}

// node_modules/@sentry/core/build/esm/instrument/globalUnhandledRejection.js
var _oldOnUnhandledRejectionHandler = null;
function addGlobalUnhandledRejectionInstrumentationHandler(handler) {
  const type = "unhandledrejection";
  addHandler(type, handler);
  maybeInstrument(type, instrumentUnhandledRejection);
}
function instrumentUnhandledRejection() {
  _oldOnUnhandledRejectionHandler = GLOBAL_OBJ.onunhandledrejection;
  GLOBAL_OBJ.onunhandledrejection = function(e3) {
    const handlerData = e3;
    triggerHandlers("unhandledrejection", handlerData);
    if (_oldOnUnhandledRejectionHandler) {
      return _oldOnUnhandledRejectionHandler.apply(this, arguments);
    }
    return true;
  };
  GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__ = true;
}

// node_modules/@sentry/core/build/esm/utils/is.js
var objectToString = Object.prototype.toString;
function isError(wat) {
  switch (objectToString.call(wat)) {
    case "[object Error]":
    case "[object Exception]":
    case "[object DOMException]":
    case "[object WebAssembly.Exception]":
      return true;
    default:
      return isInstanceOf(wat, Error);
  }
}
function isBuiltin(wat, className) {
  return objectToString.call(wat) === `[object ${className}]`;
}
function isErrorEvent(wat) {
  return isBuiltin(wat, "ErrorEvent");
}
function isDOMError(wat) {
  return isBuiltin(wat, "DOMError");
}
function isDOMException(wat) {
  return isBuiltin(wat, "DOMException");
}
function isString(wat) {
  return isBuiltin(wat, "String");
}
function isParameterizedString(wat) {
  return typeof wat === "object" && wat !== null && "__sentry_template_string__" in wat && "__sentry_template_values__" in wat;
}
function isPrimitive(wat) {
  return wat === null || isParameterizedString(wat) || typeof wat !== "object" && typeof wat !== "function";
}
function isPlainObject(wat) {
  return isBuiltin(wat, "Object");
}
function isEvent(wat) {
  return typeof Event !== "undefined" && isInstanceOf(wat, Event);
}
function isElement(wat) {
  return typeof Element !== "undefined" && isInstanceOf(wat, Element);
}
function isRegExp(wat) {
  return isBuiltin(wat, "RegExp");
}
function isThenable(wat) {
  return Boolean((wat == null ? void 0 : wat.then) && typeof wat.then === "function");
}
function isSyntheticEvent(wat) {
  return isPlainObject(wat) && "nativeEvent" in wat && "preventDefault" in wat && "stopPropagation" in wat;
}
function isInstanceOf(wat, base) {
  try {
    return wat instanceof base;
  } catch (_e) {
    return false;
  }
}
function isVueViewModel(wat) {
  return !!(typeof wat === "object" && wat !== null && (wat.__isVue || wat._isVue));
}
function isRequest(request) {
  return typeof Request !== "undefined" && isInstanceOf(request, Request);
}

// node_modules/@sentry/core/build/esm/utils/browser.js
var WINDOW = GLOBAL_OBJ;
var DEFAULT_MAX_STRING_LENGTH = 80;
function htmlTreeAsString(elem, options = {}) {
  if (!elem) {
    return "<unknown>";
  }
  try {
    let currentElem = elem;
    const MAX_TRAVERSE_HEIGHT = 5;
    const out = [];
    let height = 0;
    let len = 0;
    const separator = " > ";
    const sepLength = separator.length;
    let nextStr;
    const keyAttrs = Array.isArray(options) ? options : options.keyAttrs;
    const maxStringLength = !Array.isArray(options) && options.maxStringLength || DEFAULT_MAX_STRING_LENGTH;
    while (currentElem && height++ < MAX_TRAVERSE_HEIGHT) {
      nextStr = _htmlElementAsString(currentElem, keyAttrs);
      if (nextStr === "html" || height > 1 && len + out.length * sepLength + nextStr.length >= maxStringLength) {
        break;
      }
      out.push(nextStr);
      len += nextStr.length;
      currentElem = currentElem.parentNode;
    }
    return out.reverse().join(separator);
  } catch (_oO) {
    return "<unknown>";
  }
}
function _htmlElementAsString(el, keyAttrs) {
  const elem = el;
  const out = [];
  if (!(elem == null ? void 0 : elem.tagName)) {
    return "";
  }
  if (WINDOW.HTMLElement) {
    if (elem instanceof HTMLElement && elem.dataset) {
      if (elem.dataset["sentryComponent"]) {
        return elem.dataset["sentryComponent"];
      }
      if (elem.dataset["sentryElement"]) {
        return elem.dataset["sentryElement"];
      }
    }
  }
  out.push(elem.tagName.toLowerCase());
  const keyAttrPairs = (keyAttrs == null ? void 0 : keyAttrs.length) ? keyAttrs.filter((keyAttr) => elem.getAttribute(keyAttr)).map((keyAttr) => [keyAttr, elem.getAttribute(keyAttr)]) : null;
  if (keyAttrPairs == null ? void 0 : keyAttrPairs.length) {
    keyAttrPairs.forEach((keyAttrPair) => {
      out.push(`[${keyAttrPair[0]}="${keyAttrPair[1]}"]`);
    });
  } else {
    if (elem.id) {
      out.push(`#${elem.id}`);
    }
    const className = elem.className;
    if (className && isString(className)) {
      const classes = className.split(/\s+/);
      for (const c2 of classes) {
        out.push(`.${c2}`);
      }
    }
  }
  const allowedAttrs = ["aria-label", "type", "name", "title", "alt"];
  for (const k2 of allowedAttrs) {
    const attr = elem.getAttribute(k2);
    if (attr) {
      out.push(`[${k2}="${attr}"]`);
    }
  }
  return out.join("");
}
function getLocationHref() {
  try {
    return WINDOW.document.location.href;
  } catch (oO) {
    return "";
  }
}
function getComponentName(elem) {
  if (!WINDOW.HTMLElement) {
    return null;
  }
  let currentElem = elem;
  const MAX_TRAVERSE_HEIGHT = 5;
  for (let i2 = 0; i2 < MAX_TRAVERSE_HEIGHT; i2++) {
    if (!currentElem) {
      return null;
    }
    if (currentElem instanceof HTMLElement) {
      if (currentElem.dataset["sentryComponent"]) {
        return currentElem.dataset["sentryComponent"];
      }
      if (currentElem.dataset["sentryElement"]) {
        return currentElem.dataset["sentryElement"];
      }
    }
    currentElem = currentElem.parentNode;
  }
  return null;
}

// node_modules/@sentry/core/build/esm/utils/string.js
function truncate(str, max = 0) {
  if (typeof str !== "string" || max === 0) {
    return str;
  }
  return str.length <= max ? str : `${str.slice(0, max)}...`;
}
function safeJoin(input, delimiter) {
  if (!Array.isArray(input)) {
    return "";
  }
  const output = [];
  for (let i2 = 0; i2 < input.length; i2++) {
    const value = input[i2];
    try {
      if (isVueViewModel(value)) {
        output.push("[VueViewModel]");
      } else {
        output.push(String(value));
      }
    } catch (e3) {
      output.push("[value cannot be serialized]");
    }
  }
  return output.join(delimiter);
}
function isMatchingPattern(value, pattern, requireExactStringMatch = false) {
  if (!isString(value)) {
    return false;
  }
  if (isRegExp(pattern)) {
    return pattern.test(value);
  }
  if (isString(pattern)) {
    return requireExactStringMatch ? value === pattern : value.includes(pattern);
  }
  return false;
}
function stringMatchesSomePattern(testString, patterns = [], requireExactStringMatch = false) {
  return patterns.some((pattern) => isMatchingPattern(testString, pattern, requireExactStringMatch));
}

// node_modules/@sentry/core/build/esm/utils/object.js
function fill(source, name, replacementFactory) {
  if (!(name in source)) {
    return;
  }
  const original = source[name];
  if (typeof original !== "function") {
    return;
  }
  const wrapped = replacementFactory(original);
  if (typeof wrapped === "function") {
    markFunctionWrapped(wrapped, original);
  }
  try {
    source[name] = wrapped;
  } catch {
    DEBUG_BUILD && debug2.log(`Failed to replace method "${name}" in object`, source);
  }
}
function addNonEnumerableProperty(obj, name, value) {
  try {
    Object.defineProperty(obj, name, {
      // enumerable: false, // the default, so we can save on bundle size by not explicitly setting it
      value,
      writable: true,
      configurable: true
    });
  } catch (o_O) {
    DEBUG_BUILD && debug2.log(`Failed to add non-enumerable property "${name}" to object`, obj);
  }
}
function markFunctionWrapped(wrapped, original) {
  try {
    const proto = original.prototype || {};
    wrapped.prototype = original.prototype = proto;
    addNonEnumerableProperty(wrapped, "__sentry_original__", original);
  } catch (o_O) {
  }
}
function getOriginalFunction(func) {
  return func.__sentry_original__;
}
function convertToPlainObject(value) {
  if (isError(value)) {
    return __spreadValues({
      message: value.message,
      name: value.name,
      stack: value.stack
    }, getOwnProperties(value));
  } else if (isEvent(value)) {
    const newObj = __spreadValues({
      type: value.type,
      target: serializeEventTarget(value.target),
      currentTarget: serializeEventTarget(value.currentTarget)
    }, getOwnProperties(value));
    if (typeof CustomEvent !== "undefined" && isInstanceOf(value, CustomEvent)) {
      newObj.detail = value.detail;
    }
    return newObj;
  } else {
    return value;
  }
}
function serializeEventTarget(target) {
  try {
    return isElement(target) ? htmlTreeAsString(target) : Object.prototype.toString.call(target);
  } catch (_oO) {
    return "<unknown>";
  }
}
function getOwnProperties(obj) {
  if (typeof obj === "object" && obj !== null) {
    const extractedProps = {};
    for (const property in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, property)) {
        extractedProps[property] = obj[property];
      }
    }
    return extractedProps;
  } else {
    return {};
  }
}
function extractExceptionKeysForMessage(exception, maxLength = 40) {
  const keys = Object.keys(convertToPlainObject(exception));
  keys.sort();
  const firstKey = keys[0];
  if (!firstKey) {
    return "[object has no keys]";
  }
  if (firstKey.length >= maxLength) {
    return truncate(firstKey, maxLength);
  }
  for (let includedKeys = keys.length; includedKeys > 0; includedKeys--) {
    const serialized = keys.slice(0, includedKeys).join(", ");
    if (serialized.length > maxLength) {
      continue;
    }
    if (includedKeys === keys.length) {
      return serialized;
    }
    return truncate(serialized, maxLength);
  }
  return "";
}

// node_modules/@sentry/core/build/esm/utils/misc.js
function getCrypto() {
  const gbl = GLOBAL_OBJ;
  return gbl.crypto || gbl.msCrypto;
}
function uuid4(crypto2 = getCrypto()) {
  let getRandomByte = () => Math.random() * 16;
  try {
    if (crypto2 == null ? void 0 : crypto2.randomUUID) {
      return crypto2.randomUUID().replace(/-/g, "");
    }
    if (crypto2 == null ? void 0 : crypto2.getRandomValues) {
      getRandomByte = () => {
        const typedArray = new Uint8Array(1);
        crypto2.getRandomValues(typedArray);
        return typedArray[0];
      };
    }
  } catch (_2) {
  }
  return ("10000000100040008000" + 1e11).replace(/[018]/g, (c2) => (
    // eslint-disable-next-line no-bitwise
    (c2 ^ (getRandomByte() & 15) >> c2 / 4).toString(16)
  ));
}
function getFirstException(event) {
  var _a3, _b;
  return (_b = (_a3 = event.exception) == null ? void 0 : _a3.values) == null ? void 0 : _b[0];
}
function getEventDescription(event) {
  const {
    message,
    event_id: eventId
  } = event;
  if (message) {
    return message;
  }
  const firstException = getFirstException(event);
  if (firstException) {
    if (firstException.type && firstException.value) {
      return `${firstException.type}: ${firstException.value}`;
    }
    return firstException.type || firstException.value || eventId || "<unknown>";
  }
  return eventId || "<unknown>";
}
function addExceptionTypeValue(event, value, type) {
  const exception = event.exception = event.exception || {};
  const values = exception.values = exception.values || [];
  const firstException = values[0] = values[0] || {};
  if (!firstException.value) {
    firstException.value = value || "";
  }
  if (!firstException.type) {
    firstException.type = type || "Error";
  }
}
function addExceptionMechanism(event, newMechanism) {
  const firstException = getFirstException(event);
  if (!firstException) {
    return;
  }
  const defaultMechanism = {
    type: "generic",
    handled: true
  };
  const currentMechanism = firstException.mechanism;
  firstException.mechanism = __spreadValues(__spreadValues(__spreadValues({}, defaultMechanism), currentMechanism), newMechanism);
  if (newMechanism && "data" in newMechanism) {
    const mergedData = __spreadValues(__spreadValues({}, currentMechanism == null ? void 0 : currentMechanism.data), newMechanism.data);
    firstException.mechanism.data = mergedData;
  }
}
function checkOrSetAlreadyCaught(exception) {
  if (isAlreadyCaptured(exception)) {
    return true;
  }
  try {
    addNonEnumerableProperty(exception, "__sentry_captured__", true);
  } catch (err) {
  }
  return false;
}
function isAlreadyCaptured(exception) {
  try {
    return exception.__sentry_captured__;
  } catch {
  }
}

// node_modules/@sentry/core/build/esm/utils/time.js
var ONE_SECOND_IN_MS = 1e3;
function dateTimestampInSeconds() {
  return Date.now() / ONE_SECOND_IN_MS;
}
function createUnixTimestampInSecondsFunc() {
  const {
    performance: performance2
  } = GLOBAL_OBJ;
  if (!(performance2 == null ? void 0 : performance2.now) || !performance2.timeOrigin) {
    return dateTimestampInSeconds;
  }
  const timeOrigin = performance2.timeOrigin;
  return () => {
    return (timeOrigin + performance2.now()) / ONE_SECOND_IN_MS;
  };
}
var _cachedTimestampInSeconds;
function timestampInSeconds() {
  const func = _cachedTimestampInSeconds != null ? _cachedTimestampInSeconds : _cachedTimestampInSeconds = createUnixTimestampInSecondsFunc();
  return func();
}
var cachedTimeOrigin;
function getBrowserTimeOrigin() {
  var _a3;
  const {
    performance: performance2
  } = GLOBAL_OBJ;
  if (!(performance2 == null ? void 0 : performance2.now)) {
    return [void 0, "none"];
  }
  const threshold = 3600 * 1e3;
  const performanceNow = performance2.now();
  const dateNow = Date.now();
  const timeOriginDelta = performance2.timeOrigin ? Math.abs(performance2.timeOrigin + performanceNow - dateNow) : threshold;
  const timeOriginIsReliable = timeOriginDelta < threshold;
  const navigationStart = (_a3 = performance2.timing) == null ? void 0 : _a3.navigationStart;
  const hasNavigationStart = typeof navigationStart === "number";
  const navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;
  const navigationStartIsReliable = navigationStartDelta < threshold;
  if (timeOriginIsReliable || navigationStartIsReliable) {
    if (timeOriginDelta <= navigationStartDelta) {
      return [performance2.timeOrigin, "timeOrigin"];
    } else {
      return [navigationStart, "navigationStart"];
    }
  }
  return [dateNow, "dateNow"];
}
function browserPerformanceTimeOrigin() {
  if (!cachedTimeOrigin) {
    cachedTimeOrigin = getBrowserTimeOrigin();
  }
  return cachedTimeOrigin[0];
}

// node_modules/@sentry/core/build/esm/session.js
function makeSession(context) {
  const startingTime = timestampInSeconds();
  const session = {
    sid: uuid4(),
    init: true,
    timestamp: startingTime,
    started: startingTime,
    duration: 0,
    status: "ok",
    errors: 0,
    ignoreDuration: false,
    toJSON: () => sessionToJSON(session)
  };
  if (context) {
    updateSession(session, context);
  }
  return session;
}
function updateSession(session, context = {}) {
  if (context.user) {
    if (!session.ipAddress && context.user.ip_address) {
      session.ipAddress = context.user.ip_address;
    }
    if (!session.did && !context.did) {
      session.did = context.user.id || context.user.email || context.user.username;
    }
  }
  session.timestamp = context.timestamp || timestampInSeconds();
  if (context.abnormal_mechanism) {
    session.abnormal_mechanism = context.abnormal_mechanism;
  }
  if (context.ignoreDuration) {
    session.ignoreDuration = context.ignoreDuration;
  }
  if (context.sid) {
    session.sid = context.sid.length === 32 ? context.sid : uuid4();
  }
  if (context.init !== void 0) {
    session.init = context.init;
  }
  if (!session.did && context.did) {
    session.did = `${context.did}`;
  }
  if (typeof context.started === "number") {
    session.started = context.started;
  }
  if (session.ignoreDuration) {
    session.duration = void 0;
  } else if (typeof context.duration === "number") {
    session.duration = context.duration;
  } else {
    const duration = session.timestamp - session.started;
    session.duration = duration >= 0 ? duration : 0;
  }
  if (context.release) {
    session.release = context.release;
  }
  if (context.environment) {
    session.environment = context.environment;
  }
  if (!session.ipAddress && context.ipAddress) {
    session.ipAddress = context.ipAddress;
  }
  if (!session.userAgent && context.userAgent) {
    session.userAgent = context.userAgent;
  }
  if (typeof context.errors === "number") {
    session.errors = context.errors;
  }
  if (context.status) {
    session.status = context.status;
  }
}
function closeSession(session, status) {
  let context = {};
  if (status) {
    context = {
      status
    };
  } else if (session.status === "ok") {
    context = {
      status: "exited"
    };
  }
  updateSession(session, context);
}
function sessionToJSON(session) {
  return {
    sid: `${session.sid}`,
    init: session.init,
    // Make sure that sec is converted to ms for date constructor
    started: new Date(session.started * 1e3).toISOString(),
    timestamp: new Date(session.timestamp * 1e3).toISOString(),
    status: session.status,
    errors: session.errors,
    did: typeof session.did === "number" || typeof session.did === "string" ? `${session.did}` : void 0,
    duration: session.duration,
    abnormal_mechanism: session.abnormal_mechanism,
    attrs: {
      release: session.release,
      environment: session.environment,
      ip_address: session.ipAddress,
      user_agent: session.userAgent
    }
  };
}

// node_modules/@sentry/core/build/esm/utils/merge.js
function merge(initialObj, mergeObj, levels = 2) {
  if (!mergeObj || typeof mergeObj !== "object" || levels <= 0) {
    return mergeObj;
  }
  if (initialObj && Object.keys(mergeObj).length === 0) {
    return initialObj;
  }
  const output = __spreadValues({}, initialObj);
  for (const key in mergeObj) {
    if (Object.prototype.hasOwnProperty.call(mergeObj, key)) {
      output[key] = merge(output[key], mergeObj[key], levels - 1);
    }
  }
  return output;
}

// node_modules/@sentry/core/build/esm/utils/propagationContext.js
function generateTraceId() {
  return uuid4();
}
function generateSpanId() {
  return uuid4().substring(16);
}

// node_modules/@sentry/core/build/esm/utils/spanOnScope.js
var SCOPE_SPAN_FIELD = "_sentrySpan";
function _setSpanForScope(scope, span) {
  if (span) {
    addNonEnumerableProperty(scope, SCOPE_SPAN_FIELD, span);
  } else {
    delete scope[SCOPE_SPAN_FIELD];
  }
}
function _getSpanForScope(scope) {
  return scope[SCOPE_SPAN_FIELD];
}

// node_modules/@sentry/core/build/esm/scope.js
var DEFAULT_MAX_BREADCRUMBS = 100;
var Scope = class _Scope {
  /** Flag if notifying is happening. */
  /** Callback for client to receive scope changes. */
  /** Callback list that will be called during event processing. */
  /** Array of breadcrumbs. */
  /** User */
  /** Tags */
  /** Extra */
  /** Contexts */
  /** Attachments */
  /** Propagation Context for distributed tracing */
  /**
   * A place to stash data which is needed at some point in the SDK's event processing pipeline but which shouldn't get
   * sent to Sentry
   */
  /** Fingerprint */
  /** Severity */
  /**
   * Transaction Name
   *
   * IMPORTANT: The transaction name on the scope has nothing to do with root spans/transaction objects.
   * It's purpose is to assign a transaction to the scope that's added to non-transaction events.
   */
  /** Session */
  /** The client on this scope */
  /** Contains the last event id of a captured event.  */
  // NOTE: Any field which gets added here should get added not only to the constructor but also to the `clone` method.
  constructor() {
    this._notifyingListeners = false;
    this._scopeListeners = [];
    this._eventProcessors = [];
    this._breadcrumbs = [];
    this._attachments = [];
    this._user = {};
    this._tags = {};
    this._extra = {};
    this._contexts = {};
    this._sdkProcessingMetadata = {};
    this._propagationContext = {
      traceId: generateTraceId(),
      sampleRand: Math.random()
    };
  }
  /**
   * Clone all data from this scope into a new scope.
   */
  clone() {
    const newScope = new _Scope();
    newScope._breadcrumbs = [...this._breadcrumbs];
    newScope._tags = __spreadValues({}, this._tags);
    newScope._extra = __spreadValues({}, this._extra);
    newScope._contexts = __spreadValues({}, this._contexts);
    if (this._contexts.flags) {
      newScope._contexts.flags = {
        values: [...this._contexts.flags.values]
      };
    }
    newScope._user = this._user;
    newScope._level = this._level;
    newScope._session = this._session;
    newScope._transactionName = this._transactionName;
    newScope._fingerprint = this._fingerprint;
    newScope._eventProcessors = [...this._eventProcessors];
    newScope._attachments = [...this._attachments];
    newScope._sdkProcessingMetadata = __spreadValues({}, this._sdkProcessingMetadata);
    newScope._propagationContext = __spreadValues({}, this._propagationContext);
    newScope._client = this._client;
    newScope._lastEventId = this._lastEventId;
    _setSpanForScope(newScope, _getSpanForScope(this));
    return newScope;
  }
  /**
   * Update the client assigned to this scope.
   * Note that not every scope will have a client assigned - isolation scopes & the global scope will generally not have a client,
   * as well as manually created scopes.
   */
  setClient(client) {
    this._client = client;
  }
  /**
   * Set the ID of the last captured error event.
   * This is generally only captured on the isolation scope.
   */
  setLastEventId(lastEventId2) {
    this._lastEventId = lastEventId2;
  }
  /**
   * Get the client assigned to this scope.
   */
  getClient() {
    return this._client;
  }
  /**
   * Get the ID of the last captured error event.
   * This is generally only available on the isolation scope.
   */
  lastEventId() {
    return this._lastEventId;
  }
  /**
   * @inheritDoc
   */
  addScopeListener(callback) {
    this._scopeListeners.push(callback);
  }
  /**
   * Add an event processor that will be called before an event is sent.
   */
  addEventProcessor(callback) {
    this._eventProcessors.push(callback);
    return this;
  }
  /**
   * Set the user for this scope.
   * Set to `null` to unset the user.
   */
  setUser(user) {
    this._user = user || {
      email: void 0,
      id: void 0,
      ip_address: void 0,
      username: void 0
    };
    if (this._session) {
      updateSession(this._session, {
        user
      });
    }
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Get the user from this scope.
   */
  getUser() {
    return this._user;
  }
  /**
   * Set an object that will be merged into existing tags on the scope,
   * and will be sent as tags data with the event.
   */
  setTags(tags) {
    this._tags = __spreadValues(__spreadValues({}, this._tags), tags);
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Set a single tag that will be sent as tags data with the event.
   */
  setTag(key, value) {
    this._tags = __spreadProps(__spreadValues({}, this._tags), {
      [key]: value
    });
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Set an object that will be merged into existing extra on the scope,
   * and will be sent as extra data with the event.
   */
  setExtras(extras) {
    this._extra = __spreadValues(__spreadValues({}, this._extra), extras);
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Set a single key:value extra entry that will be sent as extra data with the event.
   */
  setExtra(key, extra) {
    this._extra = __spreadProps(__spreadValues({}, this._extra), {
      [key]: extra
    });
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Sets the fingerprint on the scope to send with the events.
   * @param {string[]} fingerprint Fingerprint to group events in Sentry.
   */
  setFingerprint(fingerprint) {
    this._fingerprint = fingerprint;
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Sets the level on the scope for future events.
   */
  setLevel(level) {
    this._level = level;
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Sets the transaction name on the scope so that the name of e.g. taken server route or
   * the page location is attached to future events.
   *
   * IMPORTANT: Calling this function does NOT change the name of the currently active
   * root span. If you want to change the name of the active root span, use
   * `Sentry.updateSpanName(rootSpan, 'new name')` instead.
   *
   * By default, the SDK updates the scope's transaction name automatically on sensible
   * occasions, such as a page navigation or when handling a new request on the server.
   */
  setTransactionName(name) {
    this._transactionName = name;
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Sets context data with the given name.
   * Data passed as context will be normalized. You can also pass `null` to unset the context.
   * Note that context data will not be merged - calling `setContext` will overwrite an existing context with the same key.
   */
  setContext(key, context) {
    if (context === null) {
      delete this._contexts[key];
    } else {
      this._contexts[key] = context;
    }
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Set the session for the scope.
   */
  setSession(session) {
    if (!session) {
      delete this._session;
    } else {
      this._session = session;
    }
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Get the session from the scope.
   */
  getSession() {
    return this._session;
  }
  /**
   * Updates the scope with provided data. Can work in three variations:
   * - plain object containing updatable attributes
   * - Scope instance that'll extract the attributes from
   * - callback function that'll receive the current scope as an argument and allow for modifications
   */
  update(captureContext) {
    if (!captureContext) {
      return this;
    }
    const scopeToMerge = typeof captureContext === "function" ? captureContext(this) : captureContext;
    const scopeInstance = scopeToMerge instanceof _Scope ? scopeToMerge.getScopeData() : isPlainObject(scopeToMerge) ? captureContext : void 0;
    const {
      tags,
      extra,
      user,
      contexts,
      level,
      fingerprint = [],
      propagationContext
    } = scopeInstance || {};
    this._tags = __spreadValues(__spreadValues({}, this._tags), tags);
    this._extra = __spreadValues(__spreadValues({}, this._extra), extra);
    this._contexts = __spreadValues(__spreadValues({}, this._contexts), contexts);
    if (user && Object.keys(user).length) {
      this._user = user;
    }
    if (level) {
      this._level = level;
    }
    if (fingerprint.length) {
      this._fingerprint = fingerprint;
    }
    if (propagationContext) {
      this._propagationContext = propagationContext;
    }
    return this;
  }
  /**
   * Clears the current scope and resets its properties.
   * Note: The client will not be cleared.
   */
  clear() {
    this._breadcrumbs = [];
    this._tags = {};
    this._extra = {};
    this._user = {};
    this._contexts = {};
    this._level = void 0;
    this._transactionName = void 0;
    this._fingerprint = void 0;
    this._session = void 0;
    _setSpanForScope(this, void 0);
    this._attachments = [];
    this.setPropagationContext({
      traceId: generateTraceId(),
      sampleRand: Math.random()
    });
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Adds a breadcrumb to the scope.
   * By default, the last 100 breadcrumbs are kept.
   */
  addBreadcrumb(breadcrumb, maxBreadcrumbs) {
    var _a3;
    const maxCrumbs = typeof maxBreadcrumbs === "number" ? maxBreadcrumbs : DEFAULT_MAX_BREADCRUMBS;
    if (maxCrumbs <= 0) {
      return this;
    }
    const mergedBreadcrumb = __spreadProps(__spreadValues({
      timestamp: dateTimestampInSeconds()
    }, breadcrumb), {
      // Breadcrumb messages can theoretically be infinitely large and they're held in memory so we truncate them not to leak (too much) memory
      message: breadcrumb.message ? truncate(breadcrumb.message, 2048) : breadcrumb.message
    });
    this._breadcrumbs.push(mergedBreadcrumb);
    if (this._breadcrumbs.length > maxCrumbs) {
      this._breadcrumbs = this._breadcrumbs.slice(-maxCrumbs);
      (_a3 = this._client) == null ? void 0 : _a3.recordDroppedEvent("buffer_overflow", "log_item");
    }
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Get the last breadcrumb of the scope.
   */
  getLastBreadcrumb() {
    return this._breadcrumbs[this._breadcrumbs.length - 1];
  }
  /**
   * Clear all breadcrumbs from the scope.
   */
  clearBreadcrumbs() {
    this._breadcrumbs = [];
    this._notifyScopeListeners();
    return this;
  }
  /**
   * Add an attachment to the scope.
   */
  addAttachment(attachment) {
    this._attachments.push(attachment);
    return this;
  }
  /**
   * Clear all attachments from the scope.
   */
  clearAttachments() {
    this._attachments = [];
    return this;
  }
  /**
   * Get the data of this scope, which should be applied to an event during processing.
   */
  getScopeData() {
    return {
      breadcrumbs: this._breadcrumbs,
      attachments: this._attachments,
      contexts: this._contexts,
      tags: this._tags,
      extra: this._extra,
      user: this._user,
      level: this._level,
      fingerprint: this._fingerprint || [],
      eventProcessors: this._eventProcessors,
      propagationContext: this._propagationContext,
      sdkProcessingMetadata: this._sdkProcessingMetadata,
      transactionName: this._transactionName,
      span: _getSpanForScope(this)
    };
  }
  /**
   * Add data which will be accessible during event processing but won't get sent to Sentry.
   */
  setSDKProcessingMetadata(newData) {
    this._sdkProcessingMetadata = merge(this._sdkProcessingMetadata, newData, 2);
    return this;
  }
  /**
   * Add propagation context to the scope, used for distributed tracing
   */
  setPropagationContext(context) {
    this._propagationContext = context;
    return this;
  }
  /**
   * Get propagation context from the scope, used for distributed tracing
   */
  getPropagationContext() {
    return this._propagationContext;
  }
  /**
   * Capture an exception for this scope.
   *
   * @returns {string} The id of the captured Sentry event.
   */
  captureException(exception, hint) {
    const eventId = (hint == null ? void 0 : hint.event_id) || uuid4();
    if (!this._client) {
      DEBUG_BUILD && debug2.warn("No client configured on scope - will not capture exception!");
      return eventId;
    }
    const syntheticException = new Error("Sentry syntheticException");
    this._client.captureException(exception, __spreadProps(__spreadValues({
      originalException: exception,
      syntheticException
    }, hint), {
      event_id: eventId
    }), this);
    return eventId;
  }
  /**
   * Capture a message for this scope.
   *
   * @returns {string} The id of the captured message.
   */
  captureMessage(message, level, hint) {
    const eventId = (hint == null ? void 0 : hint.event_id) || uuid4();
    if (!this._client) {
      DEBUG_BUILD && debug2.warn("No client configured on scope - will not capture message!");
      return eventId;
    }
    const syntheticException = new Error(message);
    this._client.captureMessage(message, level, __spreadProps(__spreadValues({
      originalException: message,
      syntheticException
    }, hint), {
      event_id: eventId
    }), this);
    return eventId;
  }
  /**
   * Capture a Sentry event for this scope.
   *
   * @returns {string} The id of the captured event.
   */
  captureEvent(event, hint) {
    const eventId = (hint == null ? void 0 : hint.event_id) || uuid4();
    if (!this._client) {
      DEBUG_BUILD && debug2.warn("No client configured on scope - will not capture event!");
      return eventId;
    }
    this._client.captureEvent(event, __spreadProps(__spreadValues({}, hint), {
      event_id: eventId
    }), this);
    return eventId;
  }
  /**
   * This will be called on every set call.
   */
  _notifyScopeListeners() {
    if (!this._notifyingListeners) {
      this._notifyingListeners = true;
      this._scopeListeners.forEach((callback) => {
        callback(this);
      });
      this._notifyingListeners = false;
    }
  }
};

// node_modules/@sentry/core/build/esm/defaultScopes.js
function getDefaultCurrentScope() {
  return getGlobalSingleton("defaultCurrentScope", () => new Scope());
}
function getDefaultIsolationScope() {
  return getGlobalSingleton("defaultIsolationScope", () => new Scope());
}

// node_modules/@sentry/core/build/esm/asyncContext/stackStrategy.js
var AsyncContextStack = class {
  constructor(scope, isolationScope) {
    let assignedScope;
    if (!scope) {
      assignedScope = new Scope();
    } else {
      assignedScope = scope;
    }
    let assignedIsolationScope;
    if (!isolationScope) {
      assignedIsolationScope = new Scope();
    } else {
      assignedIsolationScope = isolationScope;
    }
    this._stack = [{
      scope: assignedScope
    }];
    this._isolationScope = assignedIsolationScope;
  }
  /**
   * Fork a scope for the stack.
   */
  withScope(callback) {
    const scope = this._pushScope();
    let maybePromiseResult;
    try {
      maybePromiseResult = callback(scope);
    } catch (e3) {
      this._popScope();
      throw e3;
    }
    if (isThenable(maybePromiseResult)) {
      return maybePromiseResult.then((res) => {
        this._popScope();
        return res;
      }, (e3) => {
        this._popScope();
        throw e3;
      });
    }
    this._popScope();
    return maybePromiseResult;
  }
  /**
   * Get the client of the stack.
   */
  getClient() {
    return this.getStackTop().client;
  }
  /**
   * Returns the scope of the top stack.
   */
  getScope() {
    return this.getStackTop().scope;
  }
  /**
   * Get the isolation scope for the stack.
   */
  getIsolationScope() {
    return this._isolationScope;
  }
  /**
   * Returns the topmost scope layer in the order domain > local > process.
   */
  getStackTop() {
    return this._stack[this._stack.length - 1];
  }
  /**
   * Push a scope to the stack.
   */
  _pushScope() {
    const scope = this.getScope().clone();
    this._stack.push({
      client: this.getClient(),
      scope
    });
    return scope;
  }
  /**
   * Pop a scope from the stack.
   */
  _popScope() {
    if (this._stack.length <= 1) return false;
    return !!this._stack.pop();
  }
};
function getAsyncContextStack() {
  const registry = getMainCarrier();
  const sentry = getSentryCarrier(registry);
  return sentry.stack = sentry.stack || new AsyncContextStack(getDefaultCurrentScope(), getDefaultIsolationScope());
}
function withScope(callback) {
  return getAsyncContextStack().withScope(callback);
}
function withSetScope(scope, callback) {
  const stack = getAsyncContextStack();
  return stack.withScope(() => {
    stack.getStackTop().scope = scope;
    return callback(scope);
  });
}
function withIsolationScope(callback) {
  return getAsyncContextStack().withScope(() => {
    return callback(getAsyncContextStack().getIsolationScope());
  });
}
function getStackAsyncContextStrategy() {
  return {
    withIsolationScope,
    withScope,
    withSetScope,
    withSetIsolationScope: (_isolationScope, callback) => {
      return withIsolationScope(callback);
    },
    getCurrentScope: () => getAsyncContextStack().getScope(),
    getIsolationScope: () => getAsyncContextStack().getIsolationScope()
  };
}

// node_modules/@sentry/core/build/esm/asyncContext/index.js
function getAsyncContextStrategy(carrier) {
  const sentry = getSentryCarrier(carrier);
  if (sentry.acs) {
    return sentry.acs;
  }
  return getStackAsyncContextStrategy();
}

// node_modules/@sentry/core/build/esm/currentScopes.js
function getCurrentScope() {
  const carrier = getMainCarrier();
  const acs = getAsyncContextStrategy(carrier);
  return acs.getCurrentScope();
}
function getIsolationScope() {
  const carrier = getMainCarrier();
  const acs = getAsyncContextStrategy(carrier);
  return acs.getIsolationScope();
}
function getGlobalScope() {
  return getGlobalSingleton("globalScope", () => new Scope());
}
function withScope2(...rest) {
  const carrier = getMainCarrier();
  const acs = getAsyncContextStrategy(carrier);
  if (rest.length === 2) {
    const [scope, callback] = rest;
    if (!scope) {
      return acs.withScope(callback);
    }
    return acs.withSetScope(scope, callback);
  }
  return acs.withScope(rest[0]);
}
function getClient() {
  return getCurrentScope().getClient();
}
function getTraceContextFromScope(scope) {
  const propagationContext = scope.getPropagationContext();
  const {
    traceId,
    parentSpanId,
    propagationSpanId
  } = propagationContext;
  const traceContext = {
    trace_id: traceId,
    span_id: propagationSpanId || generateSpanId()
  };
  if (parentSpanId) {
    traceContext.parent_span_id = parentSpanId;
  }
  return traceContext;
}

// node_modules/@sentry/core/build/esm/semanticAttributes.js
var SEMANTIC_ATTRIBUTE_SENTRY_SOURCE = "sentry.source";
var SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE = "sentry.sample_rate";
var SEMANTIC_ATTRIBUTE_SENTRY_PREVIOUS_TRACE_SAMPLE_RATE = "sentry.previous_trace_sample_rate";
var SEMANTIC_ATTRIBUTE_SENTRY_OP = "sentry.op";
var SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN = "sentry.origin";
var SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON = "sentry.idle_span_finish_reason";
var SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT = "sentry.measurement_unit";
var SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE = "sentry.measurement_value";
var SEMANTIC_ATTRIBUTE_SENTRY_CUSTOM_SPAN_NAME = "sentry.custom_span_name";
var SEMANTIC_ATTRIBUTE_PROFILE_ID = "sentry.profile_id";
var SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME = "sentry.exclusive_time";
var SEMANTIC_LINK_ATTRIBUTE_LINK_TYPE = "sentry.link.type";

// node_modules/@sentry/core/build/esm/tracing/spanstatus.js
var SPAN_STATUS_UNSET = 0;
var SPAN_STATUS_OK = 1;
var SPAN_STATUS_ERROR = 2;
function getSpanStatusFromHttpCode(httpStatus) {
  if (httpStatus < 400 && httpStatus >= 100) {
    return {
      code: SPAN_STATUS_OK
    };
  }
  if (httpStatus >= 400 && httpStatus < 500) {
    switch (httpStatus) {
      case 401:
        return {
          code: SPAN_STATUS_ERROR,
          message: "unauthenticated"
        };
      case 403:
        return {
          code: SPAN_STATUS_ERROR,
          message: "permission_denied"
        };
      case 404:
        return {
          code: SPAN_STATUS_ERROR,
          message: "not_found"
        };
      case 409:
        return {
          code: SPAN_STATUS_ERROR,
          message: "already_exists"
        };
      case 413:
        return {
          code: SPAN_STATUS_ERROR,
          message: "failed_precondition"
        };
      case 429:
        return {
          code: SPAN_STATUS_ERROR,
          message: "resource_exhausted"
        };
      case 499:
        return {
          code: SPAN_STATUS_ERROR,
          message: "cancelled"
        };
      default:
        return {
          code: SPAN_STATUS_ERROR,
          message: "invalid_argument"
        };
    }
  }
  if (httpStatus >= 500 && httpStatus < 600) {
    switch (httpStatus) {
      case 501:
        return {
          code: SPAN_STATUS_ERROR,
          message: "unimplemented"
        };
      case 503:
        return {
          code: SPAN_STATUS_ERROR,
          message: "unavailable"
        };
      case 504:
        return {
          code: SPAN_STATUS_ERROR,
          message: "deadline_exceeded"
        };
      default:
        return {
          code: SPAN_STATUS_ERROR,
          message: "internal_error"
        };
    }
  }
  return {
    code: SPAN_STATUS_ERROR,
    message: "unknown_error"
  };
}
function setHttpStatus(span, httpStatus) {
  span.setAttribute("http.response.status_code", httpStatus);
  const spanStatus = getSpanStatusFromHttpCode(httpStatus);
  if (spanStatus.message !== "unknown_error") {
    span.setStatus(spanStatus);
  }
}

// node_modules/@sentry/core/build/esm/tracing/utils.js
var SCOPE_ON_START_SPAN_FIELD = "_sentryScope";
var ISOLATION_SCOPE_ON_START_SPAN_FIELD = "_sentryIsolationScope";
function setCapturedScopesOnSpan(span, scope, isolationScope) {
  if (span) {
    addNonEnumerableProperty(span, ISOLATION_SCOPE_ON_START_SPAN_FIELD, isolationScope);
    addNonEnumerableProperty(span, SCOPE_ON_START_SPAN_FIELD, scope);
  }
}
function getCapturedScopesOnSpan(span) {
  return {
    scope: span[SCOPE_ON_START_SPAN_FIELD],
    isolationScope: span[ISOLATION_SCOPE_ON_START_SPAN_FIELD]
  };
}

// node_modules/@sentry/core/build/esm/utils/baggage.js
var SENTRY_BAGGAGE_KEY_PREFIX = "sentry-";
var SENTRY_BAGGAGE_KEY_PREFIX_REGEX = /^sentry-/;
var MAX_BAGGAGE_STRING_LENGTH = 8192;
function baggageHeaderToDynamicSamplingContext(baggageHeader) {
  const baggageObject = parseBaggageHeader(baggageHeader);
  if (!baggageObject) {
    return void 0;
  }
  const dynamicSamplingContext = Object.entries(baggageObject).reduce((acc, [key, value]) => {
    if (key.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)) {
      const nonPrefixedKey = key.slice(SENTRY_BAGGAGE_KEY_PREFIX.length);
      acc[nonPrefixedKey] = value;
    }
    return acc;
  }, {});
  if (Object.keys(dynamicSamplingContext).length > 0) {
    return dynamicSamplingContext;
  } else {
    return void 0;
  }
}
function dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext) {
  if (!dynamicSamplingContext) {
    return void 0;
  }
  const sentryPrefixedDSC = Object.entries(dynamicSamplingContext).reduce((acc, [dscKey, dscValue]) => {
    if (dscValue) {
      acc[`${SENTRY_BAGGAGE_KEY_PREFIX}${dscKey}`] = dscValue;
    }
    return acc;
  }, {});
  return objectToBaggageHeader(sentryPrefixedDSC);
}
function parseBaggageHeader(baggageHeader) {
  if (!baggageHeader || !isString(baggageHeader) && !Array.isArray(baggageHeader)) {
    return void 0;
  }
  if (Array.isArray(baggageHeader)) {
    return baggageHeader.reduce((acc, curr) => {
      const currBaggageObject = baggageHeaderToObject(curr);
      Object.entries(currBaggageObject).forEach(([key, value]) => {
        acc[key] = value;
      });
      return acc;
    }, {});
  }
  return baggageHeaderToObject(baggageHeader);
}
function baggageHeaderToObject(baggageHeader) {
  return baggageHeader.split(",").map((baggageEntry) => baggageEntry.split("=").map((keyOrValue) => {
    try {
      return decodeURIComponent(keyOrValue.trim());
    } catch {
      return;
    }
  })).reduce((acc, [key, value]) => {
    if (key && value) {
      acc[key] = value;
    }
    return acc;
  }, {});
}
function objectToBaggageHeader(object) {
  if (Object.keys(object).length === 0) {
    return void 0;
  }
  return Object.entries(object).reduce((baggageHeader, [objectKey, objectValue], currentIndex) => {
    const baggageEntry = `${encodeURIComponent(objectKey)}=${encodeURIComponent(objectValue)}`;
    const newBaggageHeader = currentIndex === 0 ? baggageEntry : `${baggageHeader},${baggageEntry}`;
    if (newBaggageHeader.length > MAX_BAGGAGE_STRING_LENGTH) {
      DEBUG_BUILD && debug2.warn(`Not adding key: ${objectKey} with val: ${objectValue} to baggage header due to exceeding baggage size limits.`);
      return baggageHeader;
    } else {
      return newBaggageHeader;
    }
  }, "");
}

// node_modules/@sentry/core/build/esm/utils/parseSampleRate.js
function parseSampleRate(sampleRate) {
  if (typeof sampleRate === "boolean") {
    return Number(sampleRate);
  }
  const rate = typeof sampleRate === "string" ? parseFloat(sampleRate) : sampleRate;
  if (typeof rate !== "number" || isNaN(rate) || rate < 0 || rate > 1) {
    return void 0;
  }
  return rate;
}

// node_modules/@sentry/core/build/esm/utils/tracing.js
var TRACEPARENT_REGEXP = new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");
function extractTraceparentData(traceparent) {
  if (!traceparent) {
    return void 0;
  }
  const matches = traceparent.match(TRACEPARENT_REGEXP);
  if (!matches) {
    return void 0;
  }
  let parentSampled;
  if (matches[3] === "1") {
    parentSampled = true;
  } else if (matches[3] === "0") {
    parentSampled = false;
  }
  return {
    traceId: matches[1],
    parentSampled,
    parentSpanId: matches[2]
  };
}
function propagationContextFromHeaders(sentryTrace, baggage) {
  const traceparentData = extractTraceparentData(sentryTrace);
  const dynamicSamplingContext = baggageHeaderToDynamicSamplingContext(baggage);
  if (!(traceparentData == null ? void 0 : traceparentData.traceId)) {
    return {
      traceId: generateTraceId(),
      sampleRand: Math.random()
    };
  }
  const sampleRand = getSampleRandFromTraceparentAndDsc(traceparentData, dynamicSamplingContext);
  if (dynamicSamplingContext) {
    dynamicSamplingContext.sample_rand = sampleRand.toString();
  }
  const {
    traceId,
    parentSpanId,
    parentSampled
  } = traceparentData;
  return {
    traceId,
    parentSpanId,
    sampled: parentSampled,
    dsc: dynamicSamplingContext || {},
    // If we have traceparent data but no DSC it means we are not head of trace and we must freeze it
    sampleRand
  };
}
function generateSentryTraceHeader(traceId = generateTraceId(), spanId = generateSpanId(), sampled) {
  let sampledString = "";
  if (sampled !== void 0) {
    sampledString = sampled ? "-1" : "-0";
  }
  return `${traceId}-${spanId}${sampledString}`;
}
function getSampleRandFromTraceparentAndDsc(traceparentData, dsc) {
  const parsedSampleRand = parseSampleRate(dsc == null ? void 0 : dsc.sample_rand);
  if (parsedSampleRand !== void 0) {
    return parsedSampleRand;
  }
  const parsedSampleRate = parseSampleRate(dsc == null ? void 0 : dsc.sample_rate);
  if (parsedSampleRate && (traceparentData == null ? void 0 : traceparentData.parentSampled) !== void 0) {
    return traceparentData.parentSampled ? (
      // Returns a sample rand with positive sampling decision [0, sampleRate)
      Math.random() * parsedSampleRate
    ) : (
      // Returns a sample rand with negative sampling decision [sampleRate, 1)
      parsedSampleRate + Math.random() * (1 - parsedSampleRate)
    );
  } else {
    return Math.random();
  }
}

// node_modules/@sentry/core/build/esm/utils/spanUtils.js
var TRACE_FLAG_NONE = 0;
var TRACE_FLAG_SAMPLED = 1;
var hasShownSpanDropWarning = false;
function spanToTransactionTraceContext(span) {
  const {
    spanId: span_id,
    traceId: trace_id
  } = span.spanContext();
  const {
    data,
    op,
    parent_span_id,
    status,
    origin,
    links
  } = spanToJSON(span);
  return {
    parent_span_id,
    span_id,
    trace_id,
    data,
    op,
    status,
    origin,
    links
  };
}
function spanToTraceContext(span) {
  const {
    spanId,
    traceId: trace_id,
    isRemote
  } = span.spanContext();
  const parent_span_id = isRemote ? spanId : spanToJSON(span).parent_span_id;
  const scope = getCapturedScopesOnSpan(span).scope;
  const span_id = isRemote ? (scope == null ? void 0 : scope.getPropagationContext().propagationSpanId) || generateSpanId() : spanId;
  return {
    parent_span_id,
    span_id,
    trace_id
  };
}
function spanToTraceHeader(span) {
  const {
    traceId,
    spanId
  } = span.spanContext();
  const sampled = spanIsSampled(span);
  return generateSentryTraceHeader(traceId, spanId, sampled);
}
function convertSpanLinksForEnvelope(links) {
  if (links && links.length > 0) {
    return links.map((_a3) => {
      var _b = _a3, {
        context: _c
      } = _b, _d = _c, {
        spanId,
        traceId,
        traceFlags
      } = _d, restContext = __objRest(_d, [
        "spanId",
        "traceId",
        "traceFlags"
      ]), {
        attributes
      } = _b;
      return __spreadValues({
        span_id: spanId,
        trace_id: traceId,
        sampled: traceFlags === TRACE_FLAG_SAMPLED,
        attributes
      }, restContext);
    });
  } else {
    return void 0;
  }
}
function spanTimeInputToSeconds(input) {
  if (typeof input === "number") {
    return ensureTimestampInSeconds(input);
  }
  if (Array.isArray(input)) {
    return input[0] + input[1] / 1e9;
  }
  if (input instanceof Date) {
    return ensureTimestampInSeconds(input.getTime());
  }
  return timestampInSeconds();
}
function ensureTimestampInSeconds(timestamp) {
  const isMs = timestamp > 9999999999;
  return isMs ? timestamp / 1e3 : timestamp;
}
function spanToJSON(span) {
  var _a3;
  if (spanIsSentrySpan(span)) {
    return span.getSpanJSON();
  }
  const {
    spanId: span_id,
    traceId: trace_id
  } = span.spanContext();
  if (spanIsOpenTelemetrySdkTraceBaseSpan(span)) {
    const {
      attributes,
      startTime,
      name,
      endTime,
      status,
      links
    } = span;
    const parentSpanId = "parentSpanId" in span ? span.parentSpanId : "parentSpanContext" in span ? (_a3 = span.parentSpanContext) == null ? void 0 : _a3.spanId : void 0;
    return {
      span_id,
      trace_id,
      data: attributes,
      description: name,
      parent_span_id: parentSpanId,
      start_timestamp: spanTimeInputToSeconds(startTime),
      // This is [0,0] by default in OTEL, in which case we want to interpret this as no end time
      timestamp: spanTimeInputToSeconds(endTime) || void 0,
      status: getStatusMessage(status),
      op: attributes[SEMANTIC_ATTRIBUTE_SENTRY_OP],
      origin: attributes[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],
      links: convertSpanLinksForEnvelope(links)
    };
  }
  return {
    span_id,
    trace_id,
    start_timestamp: 0,
    data: {}
  };
}
function spanIsOpenTelemetrySdkTraceBaseSpan(span) {
  const castSpan = span;
  return !!castSpan.attributes && !!castSpan.startTime && !!castSpan.name && !!castSpan.endTime && !!castSpan.status;
}
function spanIsSentrySpan(span) {
  return typeof span.getSpanJSON === "function";
}
function spanIsSampled(span) {
  const {
    traceFlags
  } = span.spanContext();
  return traceFlags === TRACE_FLAG_SAMPLED;
}
function getStatusMessage(status) {
  if (!status || status.code === SPAN_STATUS_UNSET) {
    return void 0;
  }
  if (status.code === SPAN_STATUS_OK) {
    return "ok";
  }
  return status.message || "unknown_error";
}
var CHILD_SPANS_FIELD = "_sentryChildSpans";
var ROOT_SPAN_FIELD = "_sentryRootSpan";
function addChildSpanToSpan(span, childSpan) {
  const rootSpan = span[ROOT_SPAN_FIELD] || span;
  addNonEnumerableProperty(childSpan, ROOT_SPAN_FIELD, rootSpan);
  if (span[CHILD_SPANS_FIELD]) {
    span[CHILD_SPANS_FIELD].add(childSpan);
  } else {
    addNonEnumerableProperty(span, CHILD_SPANS_FIELD, /* @__PURE__ */ new Set([childSpan]));
  }
}
function removeChildSpanFromSpan(span, childSpan) {
  if (span[CHILD_SPANS_FIELD]) {
    span[CHILD_SPANS_FIELD].delete(childSpan);
  }
}
function getSpanDescendants(span) {
  const resultSet = /* @__PURE__ */ new Set();
  function addSpanChildren(span2) {
    if (resultSet.has(span2)) {
      return;
    } else if (spanIsSampled(span2)) {
      resultSet.add(span2);
      const childSpans = span2[CHILD_SPANS_FIELD] ? Array.from(span2[CHILD_SPANS_FIELD]) : [];
      for (const childSpan of childSpans) {
        addSpanChildren(childSpan);
      }
    }
  }
  addSpanChildren(span);
  return Array.from(resultSet);
}
function getRootSpan(span) {
  return span[ROOT_SPAN_FIELD] || span;
}
function getActiveSpan() {
  const carrier = getMainCarrier();
  const acs = getAsyncContextStrategy(carrier);
  if (acs.getActiveSpan) {
    return acs.getActiveSpan();
  }
  return _getSpanForScope(getCurrentScope());
}
function showSpanDropWarning() {
  if (!hasShownSpanDropWarning) {
    consoleSandbox(() => {
      console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.");
    });
    hasShownSpanDropWarning = true;
  }
}

// node_modules/@sentry/core/build/esm/tracing/errors.js
var errorsInstrumented = false;
function registerSpanErrorInstrumentation() {
  if (errorsInstrumented) {
    return;
  }
  errorsInstrumented = true;
  addGlobalErrorInstrumentationHandler(errorCallback);
  addGlobalUnhandledRejectionInstrumentationHandler(errorCallback);
}
function errorCallback() {
  const activeSpan = getActiveSpan();
  const rootSpan = activeSpan && getRootSpan(activeSpan);
  if (rootSpan) {
    const message = "internal_error";
    DEBUG_BUILD && debug2.log(`[Tracing] Root span: ${message} -> Global error occurred`);
    rootSpan.setStatus({
      code: SPAN_STATUS_ERROR,
      message
    });
  }
}
errorCallback.tag = "sentry_tracingErrorCallback";

// node_modules/@sentry/core/build/esm/utils/hasSpansEnabled.js
function hasSpansEnabled(maybeOptions) {
  var _a3;
  if (typeof __SENTRY_TRACING__ === "boolean" && !__SENTRY_TRACING__) {
    return false;
  }
  const options = maybeOptions || ((_a3 = getClient()) == null ? void 0 : _a3.getOptions());
  return !!options && // Note: This check is `!= null`, meaning "nullish". `0` is not "nullish", `undefined` and `null` are. (This comment was brought to you by 15 minutes of questioning life)
  (options.tracesSampleRate != null || !!options.tracesSampler);
}

// node_modules/@sentry/core/build/esm/constants.js
var DEFAULT_ENVIRONMENT = "production";

// node_modules/@sentry/core/build/esm/utils/dsn.js
var ORG_ID_REGEX = /^o(\d+)\./;
var DSN_REGEX = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;
function isValidProtocol(protocol) {
  return protocol === "http" || protocol === "https";
}
function dsnToString(dsn, withPassword = false) {
  const {
    host,
    path,
    pass,
    port,
    projectId,
    protocol,
    publicKey
  } = dsn;
  return `${protocol}://${publicKey}${withPassword && pass ? `:${pass}` : ""}@${host}${port ? `:${port}` : ""}/${path ? `${path}/` : path}${projectId}`;
}
function dsnFromString(str) {
  const match = DSN_REGEX.exec(str);
  if (!match) {
    consoleSandbox(() => {
      console.error(`Invalid Sentry Dsn: ${str}`);
    });
    return void 0;
  }
  const [protocol, publicKey, pass = "", host = "", port = "", lastPath = ""] = match.slice(1);
  let path = "";
  let projectId = lastPath;
  const split = projectId.split("/");
  if (split.length > 1) {
    path = split.slice(0, -1).join("/");
    projectId = split.pop();
  }
  if (projectId) {
    const projectMatch = projectId.match(/^\d+/);
    if (projectMatch) {
      projectId = projectMatch[0];
    }
  }
  return dsnFromComponents({
    host,
    pass,
    path,
    projectId,
    port,
    protocol,
    publicKey
  });
}
function dsnFromComponents(components) {
  return {
    protocol: components.protocol,
    publicKey: components.publicKey || "",
    pass: components.pass || "",
    host: components.host,
    port: components.port || "",
    path: components.path || "",
    projectId: components.projectId
  };
}
function validateDsn(dsn) {
  if (!DEBUG_BUILD) {
    return true;
  }
  const {
    port,
    projectId,
    protocol
  } = dsn;
  const requiredComponents = ["protocol", "publicKey", "host", "projectId"];
  const hasMissingRequiredComponent = requiredComponents.find((component) => {
    if (!dsn[component]) {
      debug2.error(`Invalid Sentry Dsn: ${component} missing`);
      return true;
    }
    return false;
  });
  if (hasMissingRequiredComponent) {
    return false;
  }
  if (!projectId.match(/^\d+$/)) {
    debug2.error(`Invalid Sentry Dsn: Invalid projectId ${projectId}`);
    return false;
  }
  if (!isValidProtocol(protocol)) {
    debug2.error(`Invalid Sentry Dsn: Invalid protocol ${protocol}`);
    return false;
  }
  if (port && isNaN(parseInt(port, 10))) {
    debug2.error(`Invalid Sentry Dsn: Invalid port ${port}`);
    return false;
  }
  return true;
}
function extractOrgIdFromDsnHost(host) {
  const match = host.match(ORG_ID_REGEX);
  return match == null ? void 0 : match[1];
}
function makeDsn(from) {
  const components = typeof from === "string" ? dsnFromString(from) : dsnFromComponents(from);
  if (!components || !validateDsn(components)) {
    return void 0;
  }
  return components;
}

// node_modules/@sentry/core/build/esm/tracing/dynamicSamplingContext.js
var FROZEN_DSC_FIELD = "_frozenDsc";
function freezeDscOnSpan(span, dsc) {
  const spanWithMaybeDsc = span;
  addNonEnumerableProperty(spanWithMaybeDsc, FROZEN_DSC_FIELD, dsc);
}
function getDynamicSamplingContextFromClient(trace_id, client) {
  const options = client.getOptions();
  const {
    publicKey: public_key,
    host
  } = client.getDsn() || {};
  let org_id;
  if (options.orgId) {
    org_id = String(options.orgId);
  } else if (host) {
    org_id = extractOrgIdFromDsnHost(host);
  }
  const dsc = {
    environment: options.environment || DEFAULT_ENVIRONMENT,
    release: options.release,
    public_key,
    trace_id,
    org_id
  };
  client.emit("createDsc", dsc);
  return dsc;
}
function getDynamicSamplingContextFromScope(client, scope) {
  const propagationContext = scope.getPropagationContext();
  return propagationContext.dsc || getDynamicSamplingContextFromClient(propagationContext.traceId, client);
}
function getDynamicSamplingContextFromSpan(span) {
  var _a3, _b, _c, _d;
  const client = getClient();
  if (!client) {
    return {};
  }
  const rootSpan = getRootSpan(span);
  const rootSpanJson = spanToJSON(rootSpan);
  const rootSpanAttributes = rootSpanJson.data;
  const traceState = rootSpan.spanContext().traceState;
  const rootSpanSampleRate = (_b = (_a3 = traceState == null ? void 0 : traceState.get("sentry.sample_rate")) != null ? _a3 : rootSpanAttributes[SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE]) != null ? _b : rootSpanAttributes[SEMANTIC_ATTRIBUTE_SENTRY_PREVIOUS_TRACE_SAMPLE_RATE];
  function applyLocalSampleRateToDsc(dsc2) {
    if (typeof rootSpanSampleRate === "number" || typeof rootSpanSampleRate === "string") {
      dsc2.sample_rate = `${rootSpanSampleRate}`;
    }
    return dsc2;
  }
  const frozenDsc = rootSpan[FROZEN_DSC_FIELD];
  if (frozenDsc) {
    return applyLocalSampleRateToDsc(frozenDsc);
  }
  const traceStateDsc = traceState == null ? void 0 : traceState.get("sentry.dsc");
  const dscOnTraceState = traceStateDsc && baggageHeaderToDynamicSamplingContext(traceStateDsc);
  if (dscOnTraceState) {
    return applyLocalSampleRateToDsc(dscOnTraceState);
  }
  const dsc = getDynamicSamplingContextFromClient(span.spanContext().traceId, client);
  const source = rootSpanAttributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];
  const name = rootSpanJson.description;
  if (source !== "url" && name) {
    dsc.transaction = name;
  }
  if (hasSpansEnabled()) {
    dsc.sampled = String(spanIsSampled(rootSpan));
    dsc.sample_rand = // In OTEL we store the sample rand on the trace state because we cannot access scopes for NonRecordingSpans
    // The Sentry OTEL SpanSampler takes care of writing the sample rand on the root span
    (_d = traceState == null ? void 0 : traceState.get("sentry.sample_rand")) != null ? _d : (
      // On all other platforms we can actually get the scopes from a root span (we use this as a fallback)
      (_c = getCapturedScopesOnSpan(rootSpan).scope) == null ? void 0 : _c.getPropagationContext().sampleRand.toString()
    );
  }
  applyLocalSampleRateToDsc(dsc);
  client.emit("createDsc", dsc, rootSpan);
  return dsc;
}

// node_modules/@sentry/core/build/esm/tracing/sentryNonRecordingSpan.js
var SentryNonRecordingSpan = class {
  constructor(spanContext = {}) {
    this._traceId = spanContext.traceId || generateTraceId();
    this._spanId = spanContext.spanId || generateSpanId();
  }
  /** @inheritdoc */
  spanContext() {
    return {
      spanId: this._spanId,
      traceId: this._traceId,
      traceFlags: TRACE_FLAG_NONE
    };
  }
  /** @inheritdoc */
  // eslint-disable-next-line @typescript-eslint/no-empty-function
  end(_timestamp) {
  }
  /** @inheritdoc */
  setAttribute(_key, _value) {
    return this;
  }
  /** @inheritdoc */
  setAttributes(_values) {
    return this;
  }
  /** @inheritdoc */
  setStatus(_status) {
    return this;
  }
  /** @inheritdoc */
  updateName(_name) {
    return this;
  }
  /** @inheritdoc */
  isRecording() {
    return false;
  }
  /** @inheritdoc */
  addEvent(_name, _attributesOrStartTime, _startTime) {
    return this;
  }
  /** @inheritDoc */
  addLink(_link) {
    return this;
  }
  /** @inheritDoc */
  addLinks(_links) {
    return this;
  }
  /**
   * This should generally not be used,
   * but we need it for being compliant with the OTEL Span interface.
   *
   * @hidden
   * @internal
   */
  recordException(_exception, _time) {
  }
};

// node_modules/@sentry/core/build/esm/utils/handleCallbackErrors.js
function handleCallbackErrors(fn, onError, onFinally = () => {
}) {
  let maybePromiseResult;
  try {
    maybePromiseResult = fn();
  } catch (e3) {
    onError(e3);
    onFinally();
    throw e3;
  }
  return maybeHandlePromiseRejection(maybePromiseResult, onError, onFinally);
}
function maybeHandlePromiseRejection(value, onError, onFinally) {
  if (isThenable(value)) {
    return value.then((res) => {
      onFinally();
      return res;
    }, (e3) => {
      onError(e3);
      onFinally();
      throw e3;
    });
  }
  onFinally();
  return value;
}

// node_modules/@sentry/core/build/esm/tracing/logSpans.js
function logSpanStart(span) {
  if (!DEBUG_BUILD) return;
  const {
    description = "< unknown name >",
    op = "< unknown op >",
    parent_span_id: parentSpanId
  } = spanToJSON(span);
  const {
    spanId
  } = span.spanContext();
  const sampled = spanIsSampled(span);
  const rootSpan = getRootSpan(span);
  const isRootSpan = rootSpan === span;
  const header = `[Tracing] Starting ${sampled ? "sampled" : "unsampled"} ${isRootSpan ? "root " : ""}span`;
  const infoParts = [`op: ${op}`, `name: ${description}`, `ID: ${spanId}`];
  if (parentSpanId) {
    infoParts.push(`parent ID: ${parentSpanId}`);
  }
  if (!isRootSpan) {
    const {
      op: op2,
      description: description2
    } = spanToJSON(rootSpan);
    infoParts.push(`root ID: ${rootSpan.spanContext().spanId}`);
    if (op2) {
      infoParts.push(`root op: ${op2}`);
    }
    if (description2) {
      infoParts.push(`root description: ${description2}`);
    }
  }
  debug2.log(`${header}
  ${infoParts.join("\n  ")}`);
}
function logSpanEnd(span) {
  if (!DEBUG_BUILD) return;
  const {
    description = "< unknown name >",
    op = "< unknown op >"
  } = spanToJSON(span);
  const {
    spanId
  } = span.spanContext();
  const rootSpan = getRootSpan(span);
  const isRootSpan = rootSpan === span;
  const msg = `[Tracing] Finishing "${op}" ${isRootSpan ? "root " : ""}span "${description}" with ID ${spanId}`;
  debug2.log(msg);
}

// node_modules/@sentry/core/build/esm/tracing/sampling.js
function sampleSpan(options, samplingContext, sampleRand) {
  if (!hasSpansEnabled(options)) {
    return [false];
  }
  let localSampleRateWasApplied = void 0;
  let sampleRate;
  if (typeof options.tracesSampler === "function") {
    sampleRate = options.tracesSampler(__spreadProps(__spreadValues({}, samplingContext), {
      inheritOrSampleWith: (fallbackSampleRate) => {
        if (typeof samplingContext.parentSampleRate === "number") {
          return samplingContext.parentSampleRate;
        }
        if (typeof samplingContext.parentSampled === "boolean") {
          return Number(samplingContext.parentSampled);
        }
        return fallbackSampleRate;
      }
    }));
    localSampleRateWasApplied = true;
  } else if (samplingContext.parentSampled !== void 0) {
    sampleRate = samplingContext.parentSampled;
  } else if (typeof options.tracesSampleRate !== "undefined") {
    sampleRate = options.tracesSampleRate;
    localSampleRateWasApplied = true;
  }
  const parsedSampleRate = parseSampleRate(sampleRate);
  if (parsedSampleRate === void 0) {
    DEBUG_BUILD && debug2.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(sampleRate)} of type ${JSON.stringify(typeof sampleRate)}.`);
    return [false];
  }
  if (!parsedSampleRate) {
    DEBUG_BUILD && debug2.log(`[Tracing] Discarding transaction because ${typeof options.tracesSampler === "function" ? "tracesSampler returned 0 or false" : "a negative sampling decision was inherited or tracesSampleRate is set to 0"}`);
    return [false, parsedSampleRate, localSampleRateWasApplied];
  }
  const shouldSample = sampleRand < parsedSampleRate;
  if (!shouldSample) {
    DEBUG_BUILD && debug2.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(sampleRate)})`);
  }
  return [shouldSample, parsedSampleRate, localSampleRateWasApplied];
}

// node_modules/@sentry/core/build/esm/utils/normalize.js
function normalize(input, depth = 100, maxProperties = Infinity) {
  try {
    return visit("", input, depth, maxProperties);
  } catch (err) {
    return {
      ERROR: `**non-serializable** (${err})`
    };
  }
}
function normalizeToSize(object, depth = 3, maxSize = 100 * 1024) {
  const normalized = normalize(object, depth);
  if (jsonSize(normalized) > maxSize) {
    return normalizeToSize(object, depth - 1, maxSize);
  }
  return normalized;
}
function visit(key, value, depth = Infinity, maxProperties = Infinity, memo = memoBuilder()) {
  const [memoize, unmemoize] = memo;
  if (value == null || // this matches null and undefined -> eqeq not eqeqeq
  ["boolean", "string"].includes(typeof value) || typeof value === "number" && Number.isFinite(value)) {
    return value;
  }
  const stringified = stringifyValue(key, value);
  if (!stringified.startsWith("[object ")) {
    return stringified;
  }
  if (value["__sentry_skip_normalization__"]) {
    return value;
  }
  const remainingDepth = typeof value["__sentry_override_normalization_depth__"] === "number" ? value["__sentry_override_normalization_depth__"] : depth;
  if (remainingDepth === 0) {
    return stringified.replace("object ", "");
  }
  if (memoize(value)) {
    return "[Circular ~]";
  }
  const valueWithToJSON = value;
  if (valueWithToJSON && typeof valueWithToJSON.toJSON === "function") {
    try {
      const jsonValue = valueWithToJSON.toJSON();
      return visit("", jsonValue, remainingDepth - 1, maxProperties, memo);
    } catch (err) {
    }
  }
  const normalized = Array.isArray(value) ? [] : {};
  let numAdded = 0;
  const visitable = convertToPlainObject(value);
  for (const visitKey in visitable) {
    if (!Object.prototype.hasOwnProperty.call(visitable, visitKey)) {
      continue;
    }
    if (numAdded >= maxProperties) {
      normalized[visitKey] = "[MaxProperties ~]";
      break;
    }
    const visitValue = visitable[visitKey];
    normalized[visitKey] = visit(visitKey, visitValue, remainingDepth - 1, maxProperties, memo);
    numAdded++;
  }
  unmemoize(value);
  return normalized;
}
function stringifyValue(key, value) {
  try {
    if (key === "domain" && value && typeof value === "object" && value._events) {
      return "[Domain]";
    }
    if (key === "domainEmitter") {
      return "[DomainEmitter]";
    }
    if (typeof global !== "undefined" && value === global) {
      return "[Global]";
    }
    if (typeof window !== "undefined" && value === window) {
      return "[Window]";
    }
    if (typeof document !== "undefined" && value === document) {
      return "[Document]";
    }
    if (isVueViewModel(value)) {
      return "[VueViewModel]";
    }
    if (isSyntheticEvent(value)) {
      return "[SyntheticEvent]";
    }
    if (typeof value === "number" && !Number.isFinite(value)) {
      return `[${value}]`;
    }
    if (typeof value === "function") {
      return `[Function: ${getFunctionName(value)}]`;
    }
    if (typeof value === "symbol") {
      return `[${String(value)}]`;
    }
    if (typeof value === "bigint") {
      return `[BigInt: ${String(value)}]`;
    }
    const objName = getConstructorName(value);
    if (/^HTML(\w*)Element$/.test(objName)) {
      return `[HTMLElement: ${objName}]`;
    }
    return `[object ${objName}]`;
  } catch (err) {
    return `**non-serializable** (${err})`;
  }
}
function getConstructorName(value) {
  const prototype = Object.getPrototypeOf(value);
  return (prototype == null ? void 0 : prototype.constructor) ? prototype.constructor.name : "null prototype";
}
function utf8Length(value) {
  return ~-encodeURI(value).split(/%..|./).length;
}
function jsonSize(value) {
  return utf8Length(JSON.stringify(value));
}
function memoBuilder() {
  const inner = /* @__PURE__ */ new WeakSet();
  function memoize(obj) {
    if (inner.has(obj)) {
      return true;
    }
    inner.add(obj);
    return false;
  }
  function unmemoize(obj) {
    inner.delete(obj);
  }
  return [memoize, unmemoize];
}

// node_modules/@sentry/core/build/esm/utils/envelope.js
function createEnvelope(headers, items = []) {
  return [headers, items];
}
function addItemToEnvelope(envelope, newItem) {
  const [headers, items] = envelope;
  return [headers, [...items, newItem]];
}
function forEachEnvelopeItem(envelope, callback) {
  const envelopeItems = envelope[1];
  for (const envelopeItem of envelopeItems) {
    const envelopeItemType = envelopeItem[0].type;
    const result = callback(envelopeItem, envelopeItemType);
    if (result) {
      return true;
    }
  }
  return false;
}
function encodeUTF8(input) {
  const carrier = getSentryCarrier(GLOBAL_OBJ);
  return carrier.encodePolyfill ? carrier.encodePolyfill(input) : new TextEncoder().encode(input);
}
function serializeEnvelope(envelope) {
  const [envHeaders, items] = envelope;
  let parts = JSON.stringify(envHeaders);
  function append(next) {
    if (typeof parts === "string") {
      parts = typeof next === "string" ? parts + next : [encodeUTF8(parts), next];
    } else {
      parts.push(typeof next === "string" ? encodeUTF8(next) : next);
    }
  }
  for (const item of items) {
    const [itemHeaders, payload] = item;
    append(`
${JSON.stringify(itemHeaders)}
`);
    if (typeof payload === "string" || payload instanceof Uint8Array) {
      append(payload);
    } else {
      let stringifiedPayload;
      try {
        stringifiedPayload = JSON.stringify(payload);
      } catch (e3) {
        stringifiedPayload = JSON.stringify(normalize(payload));
      }
      append(stringifiedPayload);
    }
  }
  return typeof parts === "string" ? parts : concatBuffers(parts);
}
function concatBuffers(buffers) {
  const totalLength = buffers.reduce((acc, buf) => acc + buf.length, 0);
  const merged = new Uint8Array(totalLength);
  let offset = 0;
  for (const buffer of buffers) {
    merged.set(buffer, offset);
    offset += buffer.length;
  }
  return merged;
}
function createSpanEnvelopeItem(spanJson) {
  const spanHeaders = {
    type: "span"
  };
  return [spanHeaders, spanJson];
}
function createAttachmentEnvelopeItem(attachment) {
  const buffer = typeof attachment.data === "string" ? encodeUTF8(attachment.data) : attachment.data;
  return [{
    type: "attachment",
    length: buffer.length,
    filename: attachment.filename,
    content_type: attachment.contentType,
    attachment_type: attachment.attachmentType
  }, buffer];
}
var ITEM_TYPE_TO_DATA_CATEGORY_MAP = {
  session: "session",
  sessions: "session",
  attachment: "attachment",
  transaction: "transaction",
  event: "error",
  client_report: "internal",
  user_report: "default",
  profile: "profile",
  profile_chunk: "profile",
  replay_event: "replay",
  replay_recording: "replay",
  check_in: "monitor",
  feedback: "feedback",
  span: "span",
  raw_security: "security",
  log: "log_item"
};
function envelopeItemTypeToDataCategory(type) {
  return ITEM_TYPE_TO_DATA_CATEGORY_MAP[type];
}
function getSdkMetadataForEnvelopeHeader(metadataOrEvent) {
  if (!(metadataOrEvent == null ? void 0 : metadataOrEvent.sdk)) {
    return;
  }
  const {
    name,
    version: version2
  } = metadataOrEvent.sdk;
  return {
    name,
    version: version2
  };
}
function createEventEnvelopeHeaders(event, sdkInfo, tunnel, dsn) {
  var _a3;
  const dynamicSamplingContext = (_a3 = event.sdkProcessingMetadata) == null ? void 0 : _a3.dynamicSamplingContext;
  return __spreadValues(__spreadValues(__spreadValues({
    event_id: event.event_id,
    sent_at: (/* @__PURE__ */ new Date()).toISOString()
  }, sdkInfo && {
    sdk: sdkInfo
  }), !!tunnel && dsn && {
    dsn: dsnToString(dsn)
  }), dynamicSamplingContext && {
    trace: dynamicSamplingContext
  });
}

// node_modules/@sentry/core/build/esm/envelope.js
function enhanceEventWithSdkInfo(event, sdkInfo) {
  if (!sdkInfo) {
    return event;
  }
  event.sdk = event.sdk || {};
  event.sdk.name = event.sdk.name || sdkInfo.name;
  event.sdk.version = event.sdk.version || sdkInfo.version;
  event.sdk.integrations = [...event.sdk.integrations || [], ...sdkInfo.integrations || []];
  event.sdk.packages = [...event.sdk.packages || [], ...sdkInfo.packages || []];
  return event;
}
function createSessionEnvelope(session, dsn, metadata, tunnel) {
  const sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);
  const envelopeHeaders = __spreadValues(__spreadValues({
    sent_at: (/* @__PURE__ */ new Date()).toISOString()
  }, sdkInfo && {
    sdk: sdkInfo
  }), !!tunnel && dsn && {
    dsn: dsnToString(dsn)
  });
  const envelopeItem = "aggregates" in session ? [{
    type: "sessions"
  }, session] : [{
    type: "session"
  }, session.toJSON()];
  return createEnvelope(envelopeHeaders, [envelopeItem]);
}
function createEventEnvelope(event, dsn, metadata, tunnel) {
  const sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);
  const eventType = event.type && event.type !== "replay_event" ? event.type : "event";
  enhanceEventWithSdkInfo(event, metadata == null ? void 0 : metadata.sdk);
  const envelopeHeaders = createEventEnvelopeHeaders(event, sdkInfo, tunnel, dsn);
  delete event.sdkProcessingMetadata;
  const eventItem = [{
    type: eventType
  }, event];
  return createEnvelope(envelopeHeaders, [eventItem]);
}
function createSpanEnvelope(spans, client) {
  function dscHasRequiredProps(dsc2) {
    return !!dsc2.trace_id && !!dsc2.public_key;
  }
  const dsc = getDynamicSamplingContextFromSpan(spans[0]);
  const dsn = client == null ? void 0 : client.getDsn();
  const tunnel = client == null ? void 0 : client.getOptions().tunnel;
  const headers = __spreadValues(__spreadValues({
    sent_at: (/* @__PURE__ */ new Date()).toISOString()
  }, dscHasRequiredProps(dsc) && {
    trace: dsc
  }), !!tunnel && dsn && {
    dsn: dsnToString(dsn)
  });
  const beforeSendSpan = client == null ? void 0 : client.getOptions().beforeSendSpan;
  const convertToSpanJSON = beforeSendSpan ? (span) => {
    const spanJson = spanToJSON(span);
    const processedSpan = beforeSendSpan(spanJson);
    if (!processedSpan) {
      showSpanDropWarning();
      return spanJson;
    }
    return processedSpan;
  } : spanToJSON;
  const items = [];
  for (const span of spans) {
    const spanJson = convertToSpanJSON(span);
    if (spanJson) {
      items.push(createSpanEnvelopeItem(spanJson));
    }
  }
  return createEnvelope(headers, items);
}

// node_modules/@sentry/core/build/esm/tracing/measurement.js
function setMeasurement(name, value, unit, activeSpan = getActiveSpan()) {
  const rootSpan = activeSpan && getRootSpan(activeSpan);
  if (rootSpan) {
    DEBUG_BUILD && debug2.log(`[Measurement] Setting measurement on root span: ${name} = ${value} ${unit}`);
    rootSpan.addEvent(name, {
      [SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]: value,
      [SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]: unit
    });
  }
}
function timedEventsToMeasurements(events) {
  if (!events || events.length === 0) {
    return void 0;
  }
  const measurements = {};
  events.forEach((event) => {
    const attributes = event.attributes || {};
    const unit = attributes[SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT];
    const value = attributes[SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];
    if (typeof unit === "string" && typeof value === "number") {
      measurements[event.name] = {
        value,
        unit
      };
    }
  });
  return measurements;
}

// node_modules/@sentry/core/build/esm/tracing/sentrySpan.js
var MAX_SPAN_COUNT = 1e3;
var SentrySpan = class {
  /** Epoch timestamp in seconds when the span started. */
  /** Epoch timestamp in seconds when the span ended. */
  /** Internal keeper of the status */
  /** The timed events added to this span. */
  /** if true, treat span as a standalone span (not part of a transaction) */
  /**
   * You should never call the constructor manually, always use `Sentry.startSpan()`
   * or other span methods.
   * @internal
   * @hideconstructor
   * @hidden
   */
  constructor(spanContext = {}) {
    this._traceId = spanContext.traceId || generateTraceId();
    this._spanId = spanContext.spanId || generateSpanId();
    this._startTime = spanContext.startTimestamp || timestampInSeconds();
    this._links = spanContext.links;
    this._attributes = {};
    this.setAttributes(__spreadValues({
      [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "manual",
      [SEMANTIC_ATTRIBUTE_SENTRY_OP]: spanContext.op
    }, spanContext.attributes));
    this._name = spanContext.name;
    if (spanContext.parentSpanId) {
      this._parentSpanId = spanContext.parentSpanId;
    }
    if ("sampled" in spanContext) {
      this._sampled = spanContext.sampled;
    }
    if (spanContext.endTimestamp) {
      this._endTime = spanContext.endTimestamp;
    }
    this._events = [];
    this._isStandaloneSpan = spanContext.isStandalone;
    if (this._endTime) {
      this._onSpanEnded();
    }
  }
  /** @inheritDoc */
  addLink(link) {
    if (this._links) {
      this._links.push(link);
    } else {
      this._links = [link];
    }
    return this;
  }
  /** @inheritDoc */
  addLinks(links) {
    if (this._links) {
      this._links.push(...links);
    } else {
      this._links = links;
    }
    return this;
  }
  /**
   * This should generally not be used,
   * but it is needed for being compliant with the OTEL Span interface.
   *
   * @hidden
   * @internal
   */
  recordException(_exception, _time) {
  }
  /** @inheritdoc */
  spanContext() {
    const {
      _spanId: spanId,
      _traceId: traceId,
      _sampled: sampled
    } = this;
    return {
      spanId,
      traceId,
      traceFlags: sampled ? TRACE_FLAG_SAMPLED : TRACE_FLAG_NONE
    };
  }
  /** @inheritdoc */
  setAttribute(key, value) {
    if (value === void 0) {
      delete this._attributes[key];
    } else {
      this._attributes[key] = value;
    }
    return this;
  }
  /** @inheritdoc */
  setAttributes(attributes) {
    Object.keys(attributes).forEach((key) => this.setAttribute(key, attributes[key]));
    return this;
  }
  /**
   * This should generally not be used,
   * but we need it for browser tracing where we want to adjust the start time afterwards.
   * USE THIS WITH CAUTION!
   *
   * @hidden
   * @internal
   */
  updateStartTime(timeInput) {
    this._startTime = spanTimeInputToSeconds(timeInput);
  }
  /**
   * @inheritDoc
   */
  setStatus(value) {
    this._status = value;
    return this;
  }
  /**
   * @inheritDoc
   */
  updateName(name) {
    this._name = name;
    this.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SOURCE, "custom");
    return this;
  }
  /** @inheritdoc */
  end(endTimestamp) {
    if (this._endTime) {
      return;
    }
    this._endTime = spanTimeInputToSeconds(endTimestamp);
    logSpanEnd(this);
    this._onSpanEnded();
  }
  /**
   * Get JSON representation of this span.
   *
   * @hidden
   * @internal This method is purely for internal purposes and should not be used outside
   * of SDK code. If you need to get a JSON representation of a span,
   * use `spanToJSON(span)` instead.
   */
  getSpanJSON() {
    return {
      data: this._attributes,
      description: this._name,
      op: this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_OP],
      parent_span_id: this._parentSpanId,
      span_id: this._spanId,
      start_timestamp: this._startTime,
      status: getStatusMessage(this._status),
      timestamp: this._endTime,
      trace_id: this._traceId,
      origin: this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],
      profile_id: this._attributes[SEMANTIC_ATTRIBUTE_PROFILE_ID],
      exclusive_time: this._attributes[SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],
      measurements: timedEventsToMeasurements(this._events),
      is_segment: this._isStandaloneSpan && getRootSpan(this) === this || void 0,
      segment_id: this._isStandaloneSpan ? getRootSpan(this).spanContext().spanId : void 0,
      links: convertSpanLinksForEnvelope(this._links)
    };
  }
  /** @inheritdoc */
  isRecording() {
    return !this._endTime && !!this._sampled;
  }
  /**
   * @inheritdoc
   */
  addEvent(name, attributesOrStartTime, startTime) {
    DEBUG_BUILD && debug2.log("[Tracing] Adding an event to span:", name);
    const time = isSpanTimeInput(attributesOrStartTime) ? attributesOrStartTime : startTime || timestampInSeconds();
    const attributes = isSpanTimeInput(attributesOrStartTime) ? {} : attributesOrStartTime || {};
    const event = {
      name,
      time: spanTimeInputToSeconds(time),
      attributes
    };
    this._events.push(event);
    return this;
  }
  /**
   * This method should generally not be used,
   * but for now we need a way to publicly check if the `_isStandaloneSpan` flag is set.
   * USE THIS WITH CAUTION!
   * @internal
   * @hidden
   * @experimental
   */
  isStandaloneSpan() {
    return !!this._isStandaloneSpan;
  }
  /** Emit `spanEnd` when the span is ended. */
  _onSpanEnded() {
    const client = getClient();
    if (client) {
      client.emit("spanEnd", this);
    }
    const isSegmentSpan = this._isStandaloneSpan || this === getRootSpan(this);
    if (!isSegmentSpan) {
      return;
    }
    if (this._isStandaloneSpan) {
      if (this._sampled) {
        sendSpanEnvelope(createSpanEnvelope([this], client));
      } else {
        DEBUG_BUILD && debug2.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled.");
        if (client) {
          client.recordDroppedEvent("sample_rate", "span");
        }
      }
      return;
    }
    const transactionEvent = this._convertSpanToTransaction();
    if (transactionEvent) {
      const scope = getCapturedScopesOnSpan(this).scope || getCurrentScope();
      scope.captureEvent(transactionEvent);
    }
  }
  /**
   * Finish the transaction & prepare the event to send to Sentry.
   */
  _convertSpanToTransaction() {
    var _a3;
    if (!isFullFinishedSpan(spanToJSON(this))) {
      return void 0;
    }
    if (!this._name) {
      DEBUG_BUILD && debug2.warn("Transaction has no name, falling back to `<unlabeled transaction>`.");
      this._name = "<unlabeled transaction>";
    }
    const {
      scope: capturedSpanScope,
      isolationScope: capturedSpanIsolationScope
    } = getCapturedScopesOnSpan(this);
    const normalizedRequest = (_a3 = capturedSpanScope == null ? void 0 : capturedSpanScope.getScopeData().sdkProcessingMetadata) == null ? void 0 : _a3.normalizedRequest;
    if (this._sampled !== true) {
      return void 0;
    }
    const finishedSpans = getSpanDescendants(this).filter((span) => span !== this && !isStandaloneSpan(span));
    const spans = finishedSpans.map((span) => spanToJSON(span)).filter(isFullFinishedSpan);
    const source = this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];
    delete this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_CUSTOM_SPAN_NAME];
    spans.forEach((span) => {
      delete span.data[SEMANTIC_ATTRIBUTE_SENTRY_CUSTOM_SPAN_NAME];
    });
    const transaction = __spreadValues({
      contexts: {
        trace: spanToTransactionTraceContext(this)
      },
      spans: (
        // spans.sort() mutates the array, but `spans` is already a copy so we can safely do this here
        // we do not use spans anymore after this point
        spans.length > MAX_SPAN_COUNT ? spans.sort((a2, b2) => a2.start_timestamp - b2.start_timestamp).slice(0, MAX_SPAN_COUNT) : spans
      ),
      start_timestamp: this._startTime,
      timestamp: this._endTime,
      transaction: this._name,
      type: "transaction",
      sdkProcessingMetadata: {
        capturedSpanScope,
        capturedSpanIsolationScope,
        dynamicSamplingContext: getDynamicSamplingContextFromSpan(this)
      },
      request: normalizedRequest
    }, source && {
      transaction_info: {
        source
      }
    });
    const measurements = timedEventsToMeasurements(this._events);
    const hasMeasurements = measurements && Object.keys(measurements).length;
    if (hasMeasurements) {
      DEBUG_BUILD && debug2.log("[Measurements] Adding measurements to transaction event", JSON.stringify(measurements, void 0, 2));
      transaction.measurements = measurements;
    }
    return transaction;
  }
};
function isSpanTimeInput(value) {
  return value && typeof value === "number" || value instanceof Date || Array.isArray(value);
}
function isFullFinishedSpan(input) {
  return !!input.start_timestamp && !!input.timestamp && !!input.span_id && !!input.trace_id;
}
function isStandaloneSpan(span) {
  return span instanceof SentrySpan && span.isStandaloneSpan();
}
function sendSpanEnvelope(envelope) {
  const client = getClient();
  if (!client) {
    return;
  }
  const spanItems = envelope[1];
  if (!spanItems || spanItems.length === 0) {
    client.recordDroppedEvent("before_send", "span");
    return;
  }
  client.sendEnvelope(envelope);
}

// node_modules/@sentry/core/build/esm/tracing/trace.js
var SUPPRESS_TRACING_KEY = "__SENTRY_SUPPRESS_TRACING__";
function startSpan(options, callback) {
  const acs = getAcs();
  if (acs.startSpan) {
    return acs.startSpan(options, callback);
  }
  const spanArguments = parseSentrySpanArguments(options);
  const {
    forceTransaction,
    parentSpan: customParentSpan,
    scope: customScope
  } = options;
  const customForkedScope = customScope == null ? void 0 : customScope.clone();
  return withScope2(customForkedScope, () => {
    const wrapper = getActiveSpanWrapper(customParentSpan);
    return wrapper(() => {
      const scope = getCurrentScope();
      const parentSpan = getParentSpan(scope, customParentSpan);
      const shouldSkipSpan = options.onlyIfParent && !parentSpan;
      const activeSpan = shouldSkipSpan ? new SentryNonRecordingSpan() : createChildOrRootSpan({
        parentSpan,
        spanArguments,
        forceTransaction,
        scope
      });
      _setSpanForScope(scope, activeSpan);
      return handleCallbackErrors(() => callback(activeSpan), () => {
        const {
          status
        } = spanToJSON(activeSpan);
        if (activeSpan.isRecording() && (!status || status === "ok")) {
          activeSpan.setStatus({
            code: SPAN_STATUS_ERROR,
            message: "internal_error"
          });
        }
      }, () => {
        activeSpan.end();
      });
    });
  });
}
function startInactiveSpan(options) {
  const acs = getAcs();
  if (acs.startInactiveSpan) {
    return acs.startInactiveSpan(options);
  }
  const spanArguments = parseSentrySpanArguments(options);
  const {
    forceTransaction,
    parentSpan: customParentSpan
  } = options;
  const wrapper = options.scope ? (callback) => withScope2(options.scope, callback) : customParentSpan !== void 0 ? (callback) => withActiveSpan(customParentSpan, callback) : (callback) => callback();
  return wrapper(() => {
    const scope = getCurrentScope();
    const parentSpan = getParentSpan(scope, customParentSpan);
    const shouldSkipSpan = options.onlyIfParent && !parentSpan;
    if (shouldSkipSpan) {
      return new SentryNonRecordingSpan();
    }
    return createChildOrRootSpan({
      parentSpan,
      spanArguments,
      forceTransaction,
      scope
    });
  });
}
function withActiveSpan(span, callback) {
  const acs = getAcs();
  if (acs.withActiveSpan) {
    return acs.withActiveSpan(span, callback);
  }
  return withScope2((scope) => {
    _setSpanForScope(scope, span || void 0);
    return callback(scope);
  });
}
function createChildOrRootSpan({
  parentSpan,
  spanArguments,
  forceTransaction,
  scope
}) {
  if (!hasSpansEnabled()) {
    const span2 = new SentryNonRecordingSpan();
    if (forceTransaction || !parentSpan) {
      const dsc = __spreadValues({
        sampled: "false",
        sample_rate: "0",
        transaction: spanArguments.name
      }, getDynamicSamplingContextFromSpan(span2));
      freezeDscOnSpan(span2, dsc);
    }
    return span2;
  }
  const isolationScope = getIsolationScope();
  let span;
  if (parentSpan && !forceTransaction) {
    span = _startChildSpan(parentSpan, scope, spanArguments);
    addChildSpanToSpan(parentSpan, span);
  } else if (parentSpan) {
    const dsc = getDynamicSamplingContextFromSpan(parentSpan);
    const {
      traceId,
      spanId: parentSpanId
    } = parentSpan.spanContext();
    const parentSampled = spanIsSampled(parentSpan);
    span = _startRootSpan(__spreadValues({
      traceId,
      parentSpanId
    }, spanArguments), scope, parentSampled);
    freezeDscOnSpan(span, dsc);
  } else {
    const {
      traceId,
      dsc,
      parentSpanId,
      sampled: parentSampled
    } = __spreadValues(__spreadValues({}, isolationScope.getPropagationContext()), scope.getPropagationContext());
    span = _startRootSpan(__spreadValues({
      traceId,
      parentSpanId
    }, spanArguments), scope, parentSampled);
    if (dsc) {
      freezeDscOnSpan(span, dsc);
    }
  }
  logSpanStart(span);
  setCapturedScopesOnSpan(span, scope, isolationScope);
  return span;
}
function parseSentrySpanArguments(options) {
  const exp = options.experimental || {};
  const initialCtx = __spreadValues({
    isStandalone: exp.standalone
  }, options);
  if (options.startTime) {
    const ctx = __spreadValues({}, initialCtx);
    ctx.startTimestamp = spanTimeInputToSeconds(options.startTime);
    delete ctx.startTime;
    return ctx;
  }
  return initialCtx;
}
function getAcs() {
  const carrier = getMainCarrier();
  return getAsyncContextStrategy(carrier);
}
function _startRootSpan(spanArguments, scope, parentSampled) {
  var _a3, _b;
  const client = getClient();
  const options = (client == null ? void 0 : client.getOptions()) || {};
  const {
    name = ""
  } = spanArguments;
  const mutableSpanSamplingData = {
    spanAttributes: __spreadValues({}, spanArguments.attributes),
    spanName: name,
    parentSampled
  };
  client == null ? void 0 : client.emit("beforeSampling", mutableSpanSamplingData, {
    decision: false
  });
  const finalParentSampled = (_a3 = mutableSpanSamplingData.parentSampled) != null ? _a3 : parentSampled;
  const finalAttributes = mutableSpanSamplingData.spanAttributes;
  const currentPropagationContext = scope.getPropagationContext();
  const [sampled, sampleRate, localSampleRateWasApplied] = scope.getScopeData().sdkProcessingMetadata[SUPPRESS_TRACING_KEY] ? [false] : sampleSpan(options, {
    name,
    parentSampled: finalParentSampled,
    attributes: finalAttributes,
    parentSampleRate: parseSampleRate((_b = currentPropagationContext.dsc) == null ? void 0 : _b.sample_rate)
  }, currentPropagationContext.sampleRand);
  const rootSpan = new SentrySpan(__spreadProps(__spreadValues({}, spanArguments), {
    attributes: __spreadValues({
      [SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: "custom",
      [SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE]: sampleRate !== void 0 && localSampleRateWasApplied ? sampleRate : void 0
    }, finalAttributes),
    sampled
  }));
  if (!sampled && client) {
    DEBUG_BUILD && debug2.log("[Tracing] Discarding root span because its trace was not chosen to be sampled.");
    client.recordDroppedEvent("sample_rate", "transaction");
  }
  if (client) {
    client.emit("spanStart", rootSpan);
  }
  return rootSpan;
}
function _startChildSpan(parentSpan, scope, spanArguments) {
  const {
    spanId,
    traceId
  } = parentSpan.spanContext();
  const sampled = scope.getScopeData().sdkProcessingMetadata[SUPPRESS_TRACING_KEY] ? false : spanIsSampled(parentSpan);
  const childSpan = sampled ? new SentrySpan(__spreadProps(__spreadValues({}, spanArguments), {
    parentSpanId: spanId,
    traceId,
    sampled
  })) : new SentryNonRecordingSpan({
    traceId
  });
  addChildSpanToSpan(parentSpan, childSpan);
  const client = getClient();
  if (client) {
    client.emit("spanStart", childSpan);
    if (spanArguments.endTimestamp) {
      client.emit("spanEnd", childSpan);
    }
  }
  return childSpan;
}
function getParentSpan(scope, customParentSpan) {
  if (customParentSpan) {
    return customParentSpan;
  }
  if (customParentSpan === null) {
    return void 0;
  }
  const span = _getSpanForScope(scope);
  if (!span) {
    return void 0;
  }
  const client = getClient();
  const options = client ? client.getOptions() : {};
  if (options.parentSpanIsAlwaysRootSpan) {
    return getRootSpan(span);
  }
  return span;
}
function getActiveSpanWrapper(parentSpan) {
  return parentSpan !== void 0 ? (callback) => {
    return withActiveSpan(parentSpan, callback);
  } : (callback) => callback();
}

// node_modules/@sentry/core/build/esm/tracing/idleSpan.js
var TRACING_DEFAULTS = {
  idleTimeout: 1e3,
  finalTimeout: 3e4,
  childSpanTimeout: 15e3
};
var FINISH_REASON_HEARTBEAT_FAILED = "heartbeatFailed";
var FINISH_REASON_IDLE_TIMEOUT = "idleTimeout";
var FINISH_REASON_FINAL_TIMEOUT = "finalTimeout";
var FINISH_REASON_EXTERNAL_FINISH = "externalFinish";
function startIdleSpan(startSpanOptions, options = {}) {
  const activities = /* @__PURE__ */ new Map();
  let _finished = false;
  let _idleTimeoutID;
  let _finishReason = FINISH_REASON_EXTERNAL_FINISH;
  let _autoFinishAllowed = !options.disableAutoFinish;
  const _cleanupHooks = [];
  const {
    idleTimeout = TRACING_DEFAULTS.idleTimeout,
    finalTimeout = TRACING_DEFAULTS.finalTimeout,
    childSpanTimeout = TRACING_DEFAULTS.childSpanTimeout,
    beforeSpanEnd
  } = options;
  const client = getClient();
  if (!client || !hasSpansEnabled()) {
    const span2 = new SentryNonRecordingSpan();
    const dsc = __spreadValues({
      sample_rate: "0",
      sampled: "false"
    }, getDynamicSamplingContextFromSpan(span2));
    freezeDscOnSpan(span2, dsc);
    return span2;
  }
  const scope = getCurrentScope();
  const previousActiveSpan = getActiveSpan();
  const span = _startIdleSpan(startSpanOptions);
  span.end = new Proxy(span.end, {
    apply(target, thisArg, args) {
      if (beforeSpanEnd) {
        beforeSpanEnd(span);
      }
      if (thisArg instanceof SentryNonRecordingSpan) {
        return;
      }
      const [definedEndTimestamp, ...rest] = args;
      const timestamp = definedEndTimestamp || timestampInSeconds();
      const spanEndTimestamp = spanTimeInputToSeconds(timestamp);
      const spans = getSpanDescendants(span).filter((child) => child !== span);
      if (!spans.length) {
        onIdleSpanEnded(spanEndTimestamp);
        return Reflect.apply(target, thisArg, [spanEndTimestamp, ...rest]);
      }
      const childEndTimestamps = spans.map((span2) => spanToJSON(span2).timestamp).filter((timestamp2) => !!timestamp2);
      const latestSpanEndTimestamp = childEndTimestamps.length ? Math.max(...childEndTimestamps) : void 0;
      const spanStartTimestamp = spanToJSON(span).start_timestamp;
      const endTimestamp = Math.min(spanStartTimestamp ? spanStartTimestamp + finalTimeout / 1e3 : Infinity, Math.max(spanStartTimestamp || -Infinity, Math.min(spanEndTimestamp, latestSpanEndTimestamp || Infinity)));
      onIdleSpanEnded(endTimestamp);
      return Reflect.apply(target, thisArg, [endTimestamp, ...rest]);
    }
  });
  function _cancelIdleTimeout() {
    if (_idleTimeoutID) {
      clearTimeout(_idleTimeoutID);
      _idleTimeoutID = void 0;
    }
  }
  function _restartIdleTimeout(endTimestamp) {
    _cancelIdleTimeout();
    _idleTimeoutID = setTimeout(() => {
      if (!_finished && activities.size === 0 && _autoFinishAllowed) {
        _finishReason = FINISH_REASON_IDLE_TIMEOUT;
        span.end(endTimestamp);
      }
    }, idleTimeout);
  }
  function _restartChildSpanTimeout(endTimestamp) {
    _idleTimeoutID = setTimeout(() => {
      if (!_finished && _autoFinishAllowed) {
        _finishReason = FINISH_REASON_HEARTBEAT_FAILED;
        span.end(endTimestamp);
      }
    }, childSpanTimeout);
  }
  function _pushActivity(spanId) {
    _cancelIdleTimeout();
    activities.set(spanId, true);
    const endTimestamp = timestampInSeconds();
    _restartChildSpanTimeout(endTimestamp + childSpanTimeout / 1e3);
  }
  function _popActivity(spanId) {
    if (activities.has(spanId)) {
      activities.delete(spanId);
    }
    if (activities.size === 0) {
      const endTimestamp = timestampInSeconds();
      _restartIdleTimeout(endTimestamp + idleTimeout / 1e3);
    }
  }
  function onIdleSpanEnded(endTimestamp) {
    _finished = true;
    activities.clear();
    _cleanupHooks.forEach((cleanup) => cleanup());
    _setSpanForScope(scope, previousActiveSpan);
    const spanJSON = spanToJSON(span);
    const {
      start_timestamp: startTimestamp
    } = spanJSON;
    if (!startTimestamp) {
      return;
    }
    const attributes = spanJSON.data;
    if (!attributes[SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]) {
      span.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON, _finishReason);
    }
    debug2.log(`[Tracing] Idle span "${spanJSON.op}" finished`);
    const childSpans = getSpanDescendants(span).filter((child) => child !== span);
    let discardedSpans = 0;
    childSpans.forEach((childSpan) => {
      if (childSpan.isRecording()) {
        childSpan.setStatus({
          code: SPAN_STATUS_ERROR,
          message: "cancelled"
        });
        childSpan.end(endTimestamp);
        DEBUG_BUILD && debug2.log("[Tracing] Cancelling span since span ended early", JSON.stringify(childSpan, void 0, 2));
      }
      const childSpanJSON = spanToJSON(childSpan);
      const {
        timestamp: childEndTimestamp = 0,
        start_timestamp: childStartTimestamp = 0
      } = childSpanJSON;
      const spanStartedBeforeIdleSpanEnd = childStartTimestamp <= endTimestamp;
      const timeoutWithMarginOfError = (finalTimeout + idleTimeout) / 1e3;
      const spanEndedBeforeFinalTimeout = childEndTimestamp - childStartTimestamp <= timeoutWithMarginOfError;
      if (DEBUG_BUILD) {
        const stringifiedSpan = JSON.stringify(childSpan, void 0, 2);
        if (!spanStartedBeforeIdleSpanEnd) {
          debug2.log("[Tracing] Discarding span since it happened after idle span was finished", stringifiedSpan);
        } else if (!spanEndedBeforeFinalTimeout) {
          debug2.log("[Tracing] Discarding span since it finished after idle span final timeout", stringifiedSpan);
        }
      }
      if (!spanEndedBeforeFinalTimeout || !spanStartedBeforeIdleSpanEnd) {
        removeChildSpanFromSpan(span, childSpan);
        discardedSpans++;
      }
    });
    if (discardedSpans > 0) {
      span.setAttribute("sentry.idle_span_discarded_spans", discardedSpans);
    }
  }
  _cleanupHooks.push(client.on("spanStart", (startedSpan) => {
    if (_finished || startedSpan === span || !!spanToJSON(startedSpan).timestamp) {
      return;
    }
    const allSpans = getSpanDescendants(span);
    if (allSpans.includes(startedSpan)) {
      _pushActivity(startedSpan.spanContext().spanId);
    }
  }));
  _cleanupHooks.push(client.on("spanEnd", (endedSpan) => {
    if (_finished) {
      return;
    }
    _popActivity(endedSpan.spanContext().spanId);
  }));
  _cleanupHooks.push(client.on("idleSpanEnableAutoFinish", (spanToAllowAutoFinish) => {
    if (spanToAllowAutoFinish === span) {
      _autoFinishAllowed = true;
      _restartIdleTimeout();
      if (activities.size) {
        _restartChildSpanTimeout();
      }
    }
  }));
  if (!options.disableAutoFinish) {
    _restartIdleTimeout();
  }
  setTimeout(() => {
    if (!_finished) {
      span.setStatus({
        code: SPAN_STATUS_ERROR,
        message: "deadline_exceeded"
      });
      _finishReason = FINISH_REASON_FINAL_TIMEOUT;
      span.end();
    }
  }, finalTimeout);
  return span;
}
function _startIdleSpan(options) {
  const span = startInactiveSpan(options);
  _setSpanForScope(getCurrentScope(), span);
  DEBUG_BUILD && debug2.log("[Tracing] Started span is an idle span");
  return span;
}

// node_modules/@sentry/core/build/esm/utils/syncpromise.js
var STATE_PENDING = 0;
var STATE_RESOLVED = 1;
var STATE_REJECTED = 2;
function resolvedSyncPromise(value) {
  return new SyncPromise((resolve) => {
    resolve(value);
  });
}
function rejectedSyncPromise(reason) {
  return new SyncPromise((_2, reject) => {
    reject(reason);
  });
}
var SyncPromise = class _SyncPromise {
  constructor(executor) {
    this._state = STATE_PENDING;
    this._handlers = [];
    this._runExecutor(executor);
  }
  /** @inheritdoc */
  then(onfulfilled, onrejected) {
    return new _SyncPromise((resolve, reject) => {
      this._handlers.push([false, (result) => {
        if (!onfulfilled) {
          resolve(result);
        } else {
          try {
            resolve(onfulfilled(result));
          } catch (e3) {
            reject(e3);
          }
        }
      }, (reason) => {
        if (!onrejected) {
          reject(reason);
        } else {
          try {
            resolve(onrejected(reason));
          } catch (e3) {
            reject(e3);
          }
        }
      }]);
      this._executeHandlers();
    });
  }
  /** @inheritdoc */
  catch(onrejected) {
    return this.then((val) => val, onrejected);
  }
  /** @inheritdoc */
  finally(onfinally) {
    return new _SyncPromise((resolve, reject) => {
      let val;
      let isRejected;
      return this.then((value) => {
        isRejected = false;
        val = value;
        if (onfinally) {
          onfinally();
        }
      }, (reason) => {
        isRejected = true;
        val = reason;
        if (onfinally) {
          onfinally();
        }
      }).then(() => {
        if (isRejected) {
          reject(val);
          return;
        }
        resolve(val);
      });
    });
  }
  /** Excute the resolve/reject handlers. */
  _executeHandlers() {
    if (this._state === STATE_PENDING) {
      return;
    }
    const cachedHandlers = this._handlers.slice();
    this._handlers = [];
    cachedHandlers.forEach((handler) => {
      if (handler[0]) {
        return;
      }
      if (this._state === STATE_RESOLVED) {
        handler[1](this._value);
      }
      if (this._state === STATE_REJECTED) {
        handler[2](this._value);
      }
      handler[0] = true;
    });
  }
  /** Run the executor for the SyncPromise. */
  _runExecutor(executor) {
    const setResult = (state, value) => {
      if (this._state !== STATE_PENDING) {
        return;
      }
      if (isThenable(value)) {
        void value.then(resolve, reject);
        return;
      }
      this._state = state;
      this._value = value;
      this._executeHandlers();
    };
    const resolve = (value) => {
      setResult(STATE_RESOLVED, value);
    };
    const reject = (reason) => {
      setResult(STATE_REJECTED, reason);
    };
    try {
      executor(resolve, reject);
    } catch (e3) {
      reject(e3);
    }
  }
};

// node_modules/@sentry/core/build/esm/eventProcessors.js
function notifyEventProcessors(processors, event, hint, index = 0) {
  return new SyncPromise((resolve, reject) => {
    const processor = processors[index];
    if (event === null || typeof processor !== "function") {
      resolve(event);
    } else {
      const result = processor(__spreadValues({}, event), hint);
      DEBUG_BUILD && processor.id && result === null && debug2.log(`Event processor "${processor.id}" dropped event`);
      if (isThenable(result)) {
        void result.then((final) => notifyEventProcessors(processors, final, hint, index + 1).then(resolve)).then(null, reject);
      } else {
        void notifyEventProcessors(processors, result, hint, index + 1).then(resolve).then(null, reject);
      }
    }
  });
}

// node_modules/@sentry/core/build/esm/utils/applyScopeDataToEvent.js
function applyScopeDataToEvent(event, data) {
  const {
    fingerprint,
    span,
    breadcrumbs,
    sdkProcessingMetadata
  } = data;
  applyDataToEvent(event, data);
  if (span) {
    applySpanToEvent(event, span);
  }
  applyFingerprintToEvent(event, fingerprint);
  applyBreadcrumbsToEvent(event, breadcrumbs);
  applySdkMetadataToEvent(event, sdkProcessingMetadata);
}
function mergeScopeData(data, mergeData) {
  const {
    extra,
    tags,
    user,
    contexts,
    level,
    sdkProcessingMetadata,
    breadcrumbs,
    fingerprint,
    eventProcessors,
    attachments,
    propagationContext,
    transactionName,
    span
  } = mergeData;
  mergeAndOverwriteScopeData(data, "extra", extra);
  mergeAndOverwriteScopeData(data, "tags", tags);
  mergeAndOverwriteScopeData(data, "user", user);
  mergeAndOverwriteScopeData(data, "contexts", contexts);
  data.sdkProcessingMetadata = merge(data.sdkProcessingMetadata, sdkProcessingMetadata, 2);
  if (level) {
    data.level = level;
  }
  if (transactionName) {
    data.transactionName = transactionName;
  }
  if (span) {
    data.span = span;
  }
  if (breadcrumbs.length) {
    data.breadcrumbs = [...data.breadcrumbs, ...breadcrumbs];
  }
  if (fingerprint.length) {
    data.fingerprint = [...data.fingerprint, ...fingerprint];
  }
  if (eventProcessors.length) {
    data.eventProcessors = [...data.eventProcessors, ...eventProcessors];
  }
  if (attachments.length) {
    data.attachments = [...data.attachments, ...attachments];
  }
  data.propagationContext = __spreadValues(__spreadValues({}, data.propagationContext), propagationContext);
}
function mergeAndOverwriteScopeData(data, prop, mergeVal) {
  data[prop] = merge(data[prop], mergeVal, 1);
}
function applyDataToEvent(event, data) {
  const {
    extra,
    tags,
    user,
    contexts,
    level,
    transactionName
  } = data;
  if (Object.keys(extra).length) {
    event.extra = __spreadValues(__spreadValues({}, extra), event.extra);
  }
  if (Object.keys(tags).length) {
    event.tags = __spreadValues(__spreadValues({}, tags), event.tags);
  }
  if (Object.keys(user).length) {
    event.user = __spreadValues(__spreadValues({}, user), event.user);
  }
  if (Object.keys(contexts).length) {
    event.contexts = __spreadValues(__spreadValues({}, contexts), event.contexts);
  }
  if (level) {
    event.level = level;
  }
  if (transactionName && event.type !== "transaction") {
    event.transaction = transactionName;
  }
}
function applyBreadcrumbsToEvent(event, breadcrumbs) {
  const mergedBreadcrumbs = [...event.breadcrumbs || [], ...breadcrumbs];
  event.breadcrumbs = mergedBreadcrumbs.length ? mergedBreadcrumbs : void 0;
}
function applySdkMetadataToEvent(event, sdkProcessingMetadata) {
  event.sdkProcessingMetadata = __spreadValues(__spreadValues({}, event.sdkProcessingMetadata), sdkProcessingMetadata);
}
function applySpanToEvent(event, span) {
  event.contexts = __spreadValues({
    trace: spanToTraceContext(span)
  }, event.contexts);
  event.sdkProcessingMetadata = __spreadValues({
    dynamicSamplingContext: getDynamicSamplingContextFromSpan(span)
  }, event.sdkProcessingMetadata);
  const rootSpan = getRootSpan(span);
  const transactionName = spanToJSON(rootSpan).description;
  if (transactionName && !event.transaction && event.type === "transaction") {
    event.transaction = transactionName;
  }
}
function applyFingerprintToEvent(event, fingerprint) {
  event.fingerprint = event.fingerprint ? Array.isArray(event.fingerprint) ? event.fingerprint : [event.fingerprint] : [];
  if (fingerprint) {
    event.fingerprint = event.fingerprint.concat(fingerprint);
  }
  if (!event.fingerprint.length) {
    delete event.fingerprint;
  }
}

// node_modules/@sentry/core/build/esm/utils/debug-ids.js
var parsedStackResults;
var lastKeysCount;
var cachedFilenameDebugIds;
function getFilenameToDebugIdMap(stackParser) {
  const debugIdMap = GLOBAL_OBJ._sentryDebugIds;
  if (!debugIdMap) {
    return {};
  }
  const debugIdKeys = Object.keys(debugIdMap);
  if (cachedFilenameDebugIds && debugIdKeys.length === lastKeysCount) {
    return cachedFilenameDebugIds;
  }
  lastKeysCount = debugIdKeys.length;
  cachedFilenameDebugIds = debugIdKeys.reduce((acc, stackKey) => {
    if (!parsedStackResults) {
      parsedStackResults = {};
    }
    const result = parsedStackResults[stackKey];
    if (result) {
      acc[result[0]] = result[1];
    } else {
      const parsedStack = stackParser(stackKey);
      for (let i2 = parsedStack.length - 1; i2 >= 0; i2--) {
        const stackFrame = parsedStack[i2];
        const filename = stackFrame == null ? void 0 : stackFrame.filename;
        const debugId = debugIdMap[stackKey];
        if (filename && debugId) {
          acc[filename] = debugId;
          parsedStackResults[stackKey] = [filename, debugId];
          break;
        }
      }
    }
    return acc;
  }, {});
  return cachedFilenameDebugIds;
}

// node_modules/@sentry/core/build/esm/utils/prepareEvent.js
function prepareEvent(options, event, hint, scope, client, isolationScope) {
  const {
    normalizeDepth = 3,
    normalizeMaxBreadth = 1e3
  } = options;
  const prepared = __spreadProps(__spreadValues({}, event), {
    event_id: event.event_id || hint.event_id || uuid4(),
    timestamp: event.timestamp || dateTimestampInSeconds()
  });
  const integrations = hint.integrations || options.integrations.map((i2) => i2.name);
  applyClientOptions(prepared, options);
  applyIntegrationsMetadata(prepared, integrations);
  if (client) {
    client.emit("applyFrameMetadata", event);
  }
  if (event.type === void 0) {
    applyDebugIds(prepared, options.stackParser);
  }
  const finalScope = getFinalScope(scope, hint.captureContext);
  if (hint.mechanism) {
    addExceptionMechanism(prepared, hint.mechanism);
  }
  const clientEventProcessors = client ? client.getEventProcessors() : [];
  const data = getGlobalScope().getScopeData();
  if (isolationScope) {
    const isolationData = isolationScope.getScopeData();
    mergeScopeData(data, isolationData);
  }
  if (finalScope) {
    const finalScopeData = finalScope.getScopeData();
    mergeScopeData(data, finalScopeData);
  }
  const attachments = [...hint.attachments || [], ...data.attachments];
  if (attachments.length) {
    hint.attachments = attachments;
  }
  applyScopeDataToEvent(prepared, data);
  const eventProcessors = [
    ...clientEventProcessors,
    // Run scope event processors _after_ all other processors
    ...data.eventProcessors
  ];
  const result = notifyEventProcessors(eventProcessors, prepared, hint);
  return result.then((evt) => {
    if (evt) {
      applyDebugMeta(evt);
    }
    if (typeof normalizeDepth === "number" && normalizeDepth > 0) {
      return normalizeEvent(evt, normalizeDepth, normalizeMaxBreadth);
    }
    return evt;
  });
}
function applyClientOptions(event, options) {
  const {
    environment: environment2,
    release,
    dist,
    maxValueLength = 250
  } = options;
  event.environment = event.environment || environment2 || DEFAULT_ENVIRONMENT;
  if (!event.release && release) {
    event.release = release;
  }
  if (!event.dist && dist) {
    event.dist = dist;
  }
  const request = event.request;
  if (request == null ? void 0 : request.url) {
    request.url = truncate(request.url, maxValueLength);
  }
}
function applyDebugIds(event, stackParser) {
  var _a3, _b;
  const filenameDebugIdMap = getFilenameToDebugIdMap(stackParser);
  (_b = (_a3 = event.exception) == null ? void 0 : _a3.values) == null ? void 0 : _b.forEach((exception) => {
    var _a4, _b2;
    (_b2 = (_a4 = exception.stacktrace) == null ? void 0 : _a4.frames) == null ? void 0 : _b2.forEach((frame) => {
      if (frame.filename) {
        frame.debug_id = filenameDebugIdMap[frame.filename];
      }
    });
  });
}
function applyDebugMeta(event) {
  var _a3, _b;
  const filenameDebugIdMap = {};
  (_b = (_a3 = event.exception) == null ? void 0 : _a3.values) == null ? void 0 : _b.forEach((exception) => {
    var _a4, _b2;
    (_b2 = (_a4 = exception.stacktrace) == null ? void 0 : _a4.frames) == null ? void 0 : _b2.forEach((frame) => {
      if (frame.debug_id) {
        if (frame.abs_path) {
          filenameDebugIdMap[frame.abs_path] = frame.debug_id;
        } else if (frame.filename) {
          filenameDebugIdMap[frame.filename] = frame.debug_id;
        }
        delete frame.debug_id;
      }
    });
  });
  if (Object.keys(filenameDebugIdMap).length === 0) {
    return;
  }
  event.debug_meta = event.debug_meta || {};
  event.debug_meta.images = event.debug_meta.images || [];
  const images = event.debug_meta.images;
  Object.entries(filenameDebugIdMap).forEach(([filename, debug_id]) => {
    images.push({
      type: "sourcemap",
      code_file: filename,
      debug_id
    });
  });
}
function applyIntegrationsMetadata(event, integrationNames) {
  if (integrationNames.length > 0) {
    event.sdk = event.sdk || {};
    event.sdk.integrations = [...event.sdk.integrations || [], ...integrationNames];
  }
}
function normalizeEvent(event, depth, maxBreadth) {
  var _a3, _b;
  if (!event) {
    return null;
  }
  const normalized = __spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues({}, event), event.breadcrumbs && {
    breadcrumbs: event.breadcrumbs.map((b2) => __spreadValues(__spreadValues({}, b2), b2.data && {
      data: normalize(b2.data, depth, maxBreadth)
    }))
  }), event.user && {
    user: normalize(event.user, depth, maxBreadth)
  }), event.contexts && {
    contexts: normalize(event.contexts, depth, maxBreadth)
  }), event.extra && {
    extra: normalize(event.extra, depth, maxBreadth)
  });
  if (((_a3 = event.contexts) == null ? void 0 : _a3.trace) && normalized.contexts) {
    normalized.contexts.trace = event.contexts.trace;
    if (event.contexts.trace.data) {
      normalized.contexts.trace.data = normalize(event.contexts.trace.data, depth, maxBreadth);
    }
  }
  if (event.spans) {
    normalized.spans = event.spans.map((span) => {
      return __spreadValues(__spreadValues({}, span), span.data && {
        data: normalize(span.data, depth, maxBreadth)
      });
    });
  }
  if (((_b = event.contexts) == null ? void 0 : _b.flags) && normalized.contexts) {
    normalized.contexts.flags = normalize(event.contexts.flags, 3, maxBreadth);
  }
  return normalized;
}
function getFinalScope(scope, captureContext) {
  if (!captureContext) {
    return scope;
  }
  const finalScope = scope ? scope.clone() : new Scope();
  finalScope.update(captureContext);
  return finalScope;
}
function parseEventHintOrCaptureContext(hint) {
  if (!hint) {
    return void 0;
  }
  if (hintIsScopeOrFunction(hint)) {
    return {
      captureContext: hint
    };
  }
  if (hintIsScopeContext(hint)) {
    return {
      captureContext: hint
    };
  }
  return hint;
}
function hintIsScopeOrFunction(hint) {
  return hint instanceof Scope || typeof hint === "function";
}
var captureContextKeys = ["user", "level", "extra", "contexts", "tags", "fingerprint", "propagationContext"];
function hintIsScopeContext(hint) {
  return Object.keys(hint).some((key) => captureContextKeys.includes(key));
}

// node_modules/@sentry/core/build/esm/exports.js
function captureException(exception, hint) {
  return getCurrentScope().captureException(exception, parseEventHintOrCaptureContext(hint));
}
function captureMessage(message, captureContext) {
  const level = typeof captureContext === "string" ? captureContext : void 0;
  const context = typeof captureContext !== "string" ? {
    captureContext
  } : void 0;
  return getCurrentScope().captureMessage(message, level, context);
}
function captureEvent(event, hint) {
  return getCurrentScope().captureEvent(event, hint);
}
function setContext(name, context) {
  getIsolationScope().setContext(name, context);
}
function lastEventId() {
  return getIsolationScope().lastEventId();
}
function isEnabled2() {
  const client = getClient();
  return (client == null ? void 0 : client.getOptions().enabled) !== false && !!(client == null ? void 0 : client.getTransport());
}
function addEventProcessor(callback) {
  getIsolationScope().addEventProcessor(callback);
}
function startSession(context) {
  const isolationScope = getIsolationScope();
  const currentScope = getCurrentScope();
  const {
    userAgent: userAgent2
  } = GLOBAL_OBJ.navigator || {};
  const session = makeSession(__spreadValues(__spreadValues({
    user: currentScope.getUser() || isolationScope.getUser()
  }, userAgent2 && {
    userAgent: userAgent2
  }), context));
  const currentSession = isolationScope.getSession();
  if ((currentSession == null ? void 0 : currentSession.status) === "ok") {
    updateSession(currentSession, {
      status: "exited"
    });
  }
  endSession();
  isolationScope.setSession(session);
  return session;
}
function endSession() {
  const isolationScope = getIsolationScope();
  const currentScope = getCurrentScope();
  const session = currentScope.getSession() || isolationScope.getSession();
  if (session) {
    closeSession(session);
  }
  _sendSessionUpdate();
  isolationScope.setSession();
}
function _sendSessionUpdate() {
  const isolationScope = getIsolationScope();
  const client = getClient();
  const session = isolationScope.getSession();
  if (session && client) {
    client.captureSession(session);
  }
}
function captureSession(end = false) {
  if (end) {
    endSession();
    return;
  }
  _sendSessionUpdate();
}

// node_modules/@sentry/core/build/esm/api.js
var SENTRY_API_VERSION = "7";
function getBaseApiEndpoint(dsn) {
  const protocol = dsn.protocol ? `${dsn.protocol}:` : "";
  const port = dsn.port ? `:${dsn.port}` : "";
  return `${protocol}//${dsn.host}${port}${dsn.path ? `/${dsn.path}` : ""}/api/`;
}
function _getIngestEndpoint(dsn) {
  return `${getBaseApiEndpoint(dsn)}${dsn.projectId}/envelope/`;
}
function _encodedAuth(dsn, sdkInfo) {
  const params = {
    sentry_version: SENTRY_API_VERSION
  };
  if (dsn.publicKey) {
    params.sentry_key = dsn.publicKey;
  }
  if (sdkInfo) {
    params.sentry_client = `${sdkInfo.name}/${sdkInfo.version}`;
  }
  return new URLSearchParams(params).toString();
}
function getEnvelopeEndpointWithUrlEncodedAuth(dsn, tunnel, sdkInfo) {
  return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, sdkInfo)}`;
}
function getReportDialogEndpoint(dsnLike, dialogOptions) {
  const dsn = makeDsn(dsnLike);
  if (!dsn) {
    return "";
  }
  const endpoint = `${getBaseApiEndpoint(dsn)}embed/error-page/`;
  let encodedOptions = `dsn=${dsnToString(dsn)}`;
  for (const key in dialogOptions) {
    if (key === "dsn") {
      continue;
    }
    if (key === "onClose") {
      continue;
    }
    if (key === "user") {
      const user = dialogOptions.user;
      if (!user) {
        continue;
      }
      if (user.name) {
        encodedOptions += `&name=${encodeURIComponent(user.name)}`;
      }
      if (user.email) {
        encodedOptions += `&email=${encodeURIComponent(user.email)}`;
      }
    } else {
      encodedOptions += `&${encodeURIComponent(key)}=${encodeURIComponent(dialogOptions[key])}`;
    }
  }
  return `${endpoint}?${encodedOptions}`;
}

// node_modules/@sentry/core/build/esm/integration.js
var installedIntegrations = [];
function filterDuplicates(integrations) {
  const integrationsByName = {};
  integrations.forEach((currentInstance) => {
    const {
      name
    } = currentInstance;
    const existingInstance = integrationsByName[name];
    if (existingInstance && !existingInstance.isDefaultInstance && currentInstance.isDefaultInstance) {
      return;
    }
    integrationsByName[name] = currentInstance;
  });
  return Object.values(integrationsByName);
}
function getIntegrationsToSetup(options) {
  const defaultIntegrations = options.defaultIntegrations || [];
  const userIntegrations = options.integrations;
  defaultIntegrations.forEach((integration) => {
    integration.isDefaultInstance = true;
  });
  let integrations;
  if (Array.isArray(userIntegrations)) {
    integrations = [...defaultIntegrations, ...userIntegrations];
  } else if (typeof userIntegrations === "function") {
    const resolvedUserIntegrations = userIntegrations(defaultIntegrations);
    integrations = Array.isArray(resolvedUserIntegrations) ? resolvedUserIntegrations : [resolvedUserIntegrations];
  } else {
    integrations = defaultIntegrations;
  }
  return filterDuplicates(integrations);
}
function setupIntegrations(client, integrations) {
  const integrationIndex = {};
  integrations.forEach((integration) => {
    if (integration) {
      setupIntegration(client, integration, integrationIndex);
    }
  });
  return integrationIndex;
}
function afterSetupIntegrations(client, integrations) {
  for (const integration of integrations) {
    if (integration == null ? void 0 : integration.afterAllSetup) {
      integration.afterAllSetup(client);
    }
  }
}
function setupIntegration(client, integration, integrationIndex) {
  if (integrationIndex[integration.name]) {
    DEBUG_BUILD && debug2.log(`Integration skipped because it was already installed: ${integration.name}`);
    return;
  }
  integrationIndex[integration.name] = integration;
  if (installedIntegrations.indexOf(integration.name) === -1 && typeof integration.setupOnce === "function") {
    integration.setupOnce();
    installedIntegrations.push(integration.name);
  }
  if (integration.setup && typeof integration.setup === "function") {
    integration.setup(client);
  }
  if (typeof integration.preprocessEvent === "function") {
    const callback = integration.preprocessEvent.bind(integration);
    client.on("preprocessEvent", (event, hint) => callback(event, hint, client));
  }
  if (typeof integration.processEvent === "function") {
    const callback = integration.processEvent.bind(integration);
    const processor = Object.assign((event, hint) => callback(event, hint, client), {
      id: integration.name
    });
    client.addEventProcessor(processor);
  }
  DEBUG_BUILD && debug2.log(`Integration installed: ${integration.name}`);
}
function addIntegration(integration) {
  const client = getClient();
  if (!client) {
    DEBUG_BUILD && debug2.warn(`Cannot add integration "${integration.name}" because no SDK Client is available.`);
    return;
  }
  client.addIntegration(integration);
}
function defineIntegration(fn) {
  return fn;
}

// node_modules/@sentry/core/build/esm/utils/clientreport.js
function createClientReportEnvelope(discarded_events, dsn, timestamp) {
  const clientReportItem = [{
    type: "client_report"
  }, {
    timestamp: timestamp || dateTimestampInSeconds(),
    discarded_events
  }];
  return createEnvelope(dsn ? {
    dsn
  } : {}, [clientReportItem]);
}

// node_modules/@sentry/core/build/esm/utils/eventUtils.js
function getPossibleEventMessages(event) {
  const possibleMessages = [];
  if (event.message) {
    possibleMessages.push(event.message);
  }
  try {
    const lastException = event.exception.values[event.exception.values.length - 1];
    if (lastException == null ? void 0 : lastException.value) {
      possibleMessages.push(lastException.value);
      if (lastException.type) {
        possibleMessages.push(`${lastException.type}: ${lastException.value}`);
      }
    }
  } catch (e3) {
  }
  return possibleMessages;
}

// node_modules/@sentry/core/build/esm/utils/transactionEvent.js
function convertTransactionEventToSpanJson(event) {
  var _a3, _b, _c;
  const {
    trace_id,
    parent_span_id,
    span_id,
    status,
    origin,
    data,
    op
  } = (_b = (_a3 = event.contexts) == null ? void 0 : _a3.trace) != null ? _b : {};
  return {
    data: data != null ? data : {},
    description: event.transaction,
    op,
    parent_span_id,
    span_id: span_id != null ? span_id : "",
    start_timestamp: (_c = event.start_timestamp) != null ? _c : 0,
    status,
    timestamp: event.timestamp,
    trace_id: trace_id != null ? trace_id : "",
    origin,
    profile_id: data == null ? void 0 : data[SEMANTIC_ATTRIBUTE_PROFILE_ID],
    exclusive_time: data == null ? void 0 : data[SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],
    measurements: event.measurements,
    is_segment: true
  };
}
function convertSpanJsonToTransactionEvent(span) {
  return {
    type: "transaction",
    timestamp: span.timestamp,
    start_timestamp: span.start_timestamp,
    transaction: span.description,
    contexts: {
      trace: {
        trace_id: span.trace_id,
        span_id: span.span_id,
        parent_span_id: span.parent_span_id,
        op: span.op,
        status: span.status,
        origin: span.origin,
        data: __spreadValues(__spreadValues(__spreadValues({}, span.data), span.profile_id && {
          [SEMANTIC_ATTRIBUTE_PROFILE_ID]: span.profile_id
        }), span.exclusive_time && {
          [SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]: span.exclusive_time
        })
      }
    },
    measurements: span.measurements
  };
}

// node_modules/@sentry/core/build/esm/client.js
var ALREADY_SEEN_ERROR = "Not capturing exception because it's already been captured.";
var MISSING_RELEASE_FOR_SESSION_ERROR = "Discarded session because of missing or non-string release";
var INTERNAL_ERROR_SYMBOL = Symbol.for("SentryInternalError");
var DO_NOT_SEND_EVENT_SYMBOL = Symbol.for("SentryDoNotSendEventError");
function _makeInternalError(message) {
  return {
    message,
    [INTERNAL_ERROR_SYMBOL]: true
  };
}
function _makeDoNotSendEventError(message) {
  return {
    message,
    [DO_NOT_SEND_EVENT_SYMBOL]: true
  };
}
function _isInternalError(error2) {
  return !!error2 && typeof error2 === "object" && INTERNAL_ERROR_SYMBOL in error2;
}
function _isDoNotSendEventError(error2) {
  return !!error2 && typeof error2 === "object" && DO_NOT_SEND_EVENT_SYMBOL in error2;
}
var Client2 = class {
  /** Options passed to the SDK. */
  /** The client Dsn, if specified in options. Without this Dsn, the SDK will be disabled. */
  /** Array of set up integrations. */
  /** Number of calls being processed */
  /** Holds flushable  */
  // eslint-disable-next-line @typescript-eslint/ban-types
  /**
   * Initializes this client instance.
   *
   * @param options Options for the client.
   */
  constructor(options) {
    this._options = options;
    this._integrations = {};
    this._numProcessing = 0;
    this._outcomes = {};
    this._hooks = {};
    this._eventProcessors = [];
    if (options.dsn) {
      this._dsn = makeDsn(options.dsn);
    } else {
      DEBUG_BUILD && debug2.warn("No DSN provided, client will not send events.");
    }
    if (this._dsn) {
      const url = getEnvelopeEndpointWithUrlEncodedAuth(this._dsn, options.tunnel, options._metadata ? options._metadata.sdk : void 0);
      this._transport = options.transport(__spreadProps(__spreadValues({
        tunnel: this._options.tunnel,
        recordDroppedEvent: this.recordDroppedEvent.bind(this)
      }, options.transportOptions), {
        url
      }));
    }
  }
  /**
   * Captures an exception event and sends it to Sentry.
   *
   * Unlike `captureException` exported from every SDK, this method requires that you pass it the current scope.
   */
  captureException(exception, hint, scope) {
    const eventId = uuid4();
    if (checkOrSetAlreadyCaught(exception)) {
      DEBUG_BUILD && debug2.log(ALREADY_SEEN_ERROR);
      return eventId;
    }
    const hintWithEventId = __spreadValues({
      event_id: eventId
    }, hint);
    this._process(this.eventFromException(exception, hintWithEventId).then((event) => this._captureEvent(event, hintWithEventId, scope)));
    return hintWithEventId.event_id;
  }
  /**
   * Captures a message event and sends it to Sentry.
   *
   * Unlike `captureMessage` exported from every SDK, this method requires that you pass it the current scope.
   */
  captureMessage(message, level, hint, currentScope) {
    const hintWithEventId = __spreadValues({
      event_id: uuid4()
    }, hint);
    const eventMessage = isParameterizedString(message) ? message : String(message);
    const promisedEvent = isPrimitive(message) ? this.eventFromMessage(eventMessage, level, hintWithEventId) : this.eventFromException(message, hintWithEventId);
    this._process(promisedEvent.then((event) => this._captureEvent(event, hintWithEventId, currentScope)));
    return hintWithEventId.event_id;
  }
  /**
   * Captures a manually created event and sends it to Sentry.
   *
   * Unlike `captureEvent` exported from every SDK, this method requires that you pass it the current scope.
   */
  captureEvent(event, hint, currentScope) {
    const eventId = uuid4();
    if ((hint == null ? void 0 : hint.originalException) && checkOrSetAlreadyCaught(hint.originalException)) {
      DEBUG_BUILD && debug2.log(ALREADY_SEEN_ERROR);
      return eventId;
    }
    const hintWithEventId = __spreadValues({
      event_id: eventId
    }, hint);
    const sdkProcessingMetadata = event.sdkProcessingMetadata || {};
    const capturedSpanScope = sdkProcessingMetadata.capturedSpanScope;
    const capturedSpanIsolationScope = sdkProcessingMetadata.capturedSpanIsolationScope;
    this._process(this._captureEvent(event, hintWithEventId, capturedSpanScope || currentScope, capturedSpanIsolationScope));
    return hintWithEventId.event_id;
  }
  /**
   * Captures a session.
   */
  captureSession(session) {
    this.sendSession(session);
    updateSession(session, {
      init: false
    });
  }
  /**
   * Create a cron monitor check in and send it to Sentry. This method is not available on all clients.
   *
   * @param checkIn An object that describes a check in.
   * @param upsertMonitorConfig An optional object that describes a monitor config. Use this if you want
   * to create a monitor automatically when sending a check in.
   * @param scope An optional scope containing event metadata.
   * @returns A string representing the id of the check in.
   */
  /**
   * Get the current Dsn.
   */
  getDsn() {
    return this._dsn;
  }
  /**
   * Get the current options.
   */
  getOptions() {
    return this._options;
  }
  /**
   * Get the SDK metadata.
   * @see SdkMetadata
   */
  getSdkMetadata() {
    return this._options._metadata;
  }
  /**
   * Returns the transport that is used by the client.
   * Please note that the transport gets lazy initialized so it will only be there once the first event has been sent.
   */
  getTransport() {
    return this._transport;
  }
  /**
   * Wait for all events to be sent or the timeout to expire, whichever comes first.
   *
   * @param timeout Maximum time in ms the client should wait for events to be flushed. Omitting this parameter will
   *   cause the client to wait until all events are sent before resolving the promise.
   * @returns A promise that will resolve with `true` if all events are sent before the timeout, or `false` if there are
   * still events in the queue when the timeout is reached.
   */
  flush(timeout) {
    const transport = this._transport;
    if (transport) {
      this.emit("flush");
      return this._isClientDoneProcessing(timeout).then((clientFinished) => {
        return transport.flush(timeout).then((transportFlushed) => clientFinished && transportFlushed);
      });
    } else {
      return resolvedSyncPromise(true);
    }
  }
  /**
   * Flush the event queue and set the client to `enabled = false`. See {@link Client.flush}.
   *
   * @param {number} timeout Maximum time in ms the client should wait before shutting down. Omitting this parameter will cause
   *   the client to wait until all events are sent before disabling itself.
   * @returns {Promise<boolean>} A promise which resolves to `true` if the flush completes successfully before the timeout, or `false` if
   * it doesn't.
   */
  close(timeout) {
    return this.flush(timeout).then((result) => {
      this.getOptions().enabled = false;
      this.emit("close");
      return result;
    });
  }
  /**
   * Get all installed event processors.
   */
  getEventProcessors() {
    return this._eventProcessors;
  }
  /**
   * Adds an event processor that applies to any event processed by this client.
   */
  addEventProcessor(eventProcessor) {
    this._eventProcessors.push(eventProcessor);
  }
  /**
   * Initialize this client.
   * Call this after the client was set on a scope.
   */
  init() {
    if (this._isEnabled() || // Force integrations to be setup even if no DSN was set when we have
    // Spotlight enabled. This is particularly important for browser as we
    // don't support the `spotlight` option there and rely on the users
    // adding the `spotlightBrowserIntegration()` to their integrations which
    // wouldn't get initialized with the check below when there's no DSN set.
    this._options.integrations.some(({
      name
    }) => name.startsWith("Spotlight"))) {
      this._setupIntegrations();
    }
  }
  /**
   * Gets an installed integration by its name.
   *
   * @returns {Integration|undefined} The installed integration or `undefined` if no integration with that `name` was installed.
   */
  getIntegrationByName(integrationName) {
    return this._integrations[integrationName];
  }
  /**
   * Add an integration to the client.
   * This can be used to e.g. lazy load integrations.
   * In most cases, this should not be necessary,
   * and you're better off just passing the integrations via `integrations: []` at initialization time.
   * However, if you find the need to conditionally load & add an integration, you can use `addIntegration` to do so.
   */
  addIntegration(integration) {
    const isAlreadyInstalled = this._integrations[integration.name];
    setupIntegration(this, integration, this._integrations);
    if (!isAlreadyInstalled) {
      afterSetupIntegrations(this, [integration]);
    }
  }
  /**
   * Send a fully prepared event to Sentry.
   */
  sendEvent(event, hint = {}) {
    this.emit("beforeSendEvent", event, hint);
    let env = createEventEnvelope(event, this._dsn, this._options._metadata, this._options.tunnel);
    for (const attachment of hint.attachments || []) {
      env = addItemToEnvelope(env, createAttachmentEnvelopeItem(attachment));
    }
    const promise = this.sendEnvelope(env);
    if (promise) {
      promise.then((sendResponse) => this.emit("afterSendEvent", event, sendResponse), null);
    }
  }
  /**
   * Send a session or session aggregrates to Sentry.
   */
  sendSession(session) {
    const {
      release: clientReleaseOption,
      environment: clientEnvironmentOption = DEFAULT_ENVIRONMENT
    } = this._options;
    if ("aggregates" in session) {
      const sessionAttrs = session.attrs || {};
      if (!sessionAttrs.release && !clientReleaseOption) {
        DEBUG_BUILD && debug2.warn(MISSING_RELEASE_FOR_SESSION_ERROR);
        return;
      }
      sessionAttrs.release = sessionAttrs.release || clientReleaseOption;
      sessionAttrs.environment = sessionAttrs.environment || clientEnvironmentOption;
      session.attrs = sessionAttrs;
    } else {
      if (!session.release && !clientReleaseOption) {
        DEBUG_BUILD && debug2.warn(MISSING_RELEASE_FOR_SESSION_ERROR);
        return;
      }
      session.release = session.release || clientReleaseOption;
      session.environment = session.environment || clientEnvironmentOption;
    }
    this.emit("beforeSendSession", session);
    const env = createSessionEnvelope(session, this._dsn, this._options._metadata, this._options.tunnel);
    this.sendEnvelope(env);
  }
  /**
   * Record on the client that an event got dropped (ie, an event that will not be sent to Sentry).
   */
  recordDroppedEvent(reason, category, count = 1) {
    if (this._options.sendClientReports) {
      const key = `${reason}:${category}`;
      DEBUG_BUILD && debug2.log(`Recording outcome: "${key}"${count > 1 ? ` (${count} times)` : ""}`);
      this._outcomes[key] = (this._outcomes[key] || 0) + count;
    }
  }
  /* eslint-disable @typescript-eslint/unified-signatures */
  /**
   * Register a callback for whenever a span is started.
   * Receives the span as argument.
   * @returns {() => void} A function that, when executed, removes the registered callback.
   */
  /**
   * Register a hook on this client.
   */
  on(hook, callback) {
    const hooks2 = this._hooks[hook] = this._hooks[hook] || [];
    hooks2.push(callback);
    return () => {
      const cbIndex = hooks2.indexOf(callback);
      if (cbIndex > -1) {
        hooks2.splice(cbIndex, 1);
      }
    };
  }
  /** Fire a hook whenever a span starts. */
  /**
   * Emit a hook that was previously registered via `on()`.
   */
  emit(hook, ...rest) {
    const callbacks = this._hooks[hook];
    if (callbacks) {
      callbacks.forEach((callback) => callback(...rest));
    }
  }
  /**
   * Send an envelope to Sentry.
   */
  sendEnvelope(envelope) {
    this.emit("beforeEnvelope", envelope);
    if (this._isEnabled() && this._transport) {
      return this._transport.send(envelope).then(null, (reason) => {
        DEBUG_BUILD && debug2.error("Error while sending envelope:", reason);
        return reason;
      });
    }
    DEBUG_BUILD && debug2.error("Transport disabled");
    return resolvedSyncPromise({});
  }
  /* eslint-enable @typescript-eslint/unified-signatures */
  /** Setup integrations for this client. */
  _setupIntegrations() {
    const {
      integrations
    } = this._options;
    this._integrations = setupIntegrations(this, integrations);
    afterSetupIntegrations(this, integrations);
  }
  /** Updates existing session based on the provided event */
  _updateSessionFromEvent(session, event) {
    var _a3;
    let crashed = event.level === "fatal";
    let errored = false;
    const exceptions = (_a3 = event.exception) == null ? void 0 : _a3.values;
    if (exceptions) {
      errored = true;
      for (const ex of exceptions) {
        const mechanism = ex.mechanism;
        if ((mechanism == null ? void 0 : mechanism.handled) === false) {
          crashed = true;
          break;
        }
      }
    }
    const sessionNonTerminal = session.status === "ok";
    const shouldUpdateAndSend = sessionNonTerminal && session.errors === 0 || sessionNonTerminal && crashed;
    if (shouldUpdateAndSend) {
      updateSession(session, __spreadProps(__spreadValues({}, crashed && {
        status: "crashed"
      }), {
        errors: session.errors || Number(errored || crashed)
      }));
      this.captureSession(session);
    }
  }
  /**
   * Determine if the client is finished processing. Returns a promise because it will wait `timeout` ms before saying
   * "no" (resolving to `false`) in order to give the client a chance to potentially finish first.
   *
   * @param timeout The time, in ms, after which to resolve to `false` if the client is still busy. Passing `0` (or not
   * passing anything) will make the promise wait as long as it takes for processing to finish before resolving to
   * `true`.
   * @returns A promise which will resolve to `true` if processing is already done or finishes before the timeout, and
   * `false` otherwise
   */
  _isClientDoneProcessing(timeout) {
    return new SyncPromise((resolve) => {
      let ticked = 0;
      const tick = 1;
      const interval = setInterval(() => {
        if (this._numProcessing == 0) {
          clearInterval(interval);
          resolve(true);
        } else {
          ticked += tick;
          if (timeout && ticked >= timeout) {
            clearInterval(interval);
            resolve(false);
          }
        }
      }, tick);
    });
  }
  /** Determines whether this SDK is enabled and a transport is present. */
  _isEnabled() {
    return this.getOptions().enabled !== false && this._transport !== void 0;
  }
  /**
   * Adds common information to events.
   *
   * The information includes release and environment from `options`,
   * breadcrumbs and context (extra, tags and user) from the scope.
   *
   * Information that is already present in the event is never overwritten. For
   * nested objects, such as the context, keys are merged.
   *
   * @param event The original event.
   * @param hint May contain additional information about the original exception.
   * @param currentScope A scope containing event metadata.
   * @returns A new event with more information.
   */
  _prepareEvent(event, hint, currentScope, isolationScope) {
    const options = this.getOptions();
    const integrations = Object.keys(this._integrations);
    if (!hint.integrations && (integrations == null ? void 0 : integrations.length)) {
      hint.integrations = integrations;
    }
    this.emit("preprocessEvent", event, hint);
    if (!event.type) {
      isolationScope.setLastEventId(event.event_id || hint.event_id);
    }
    return prepareEvent(options, event, hint, currentScope, this, isolationScope).then((evt) => {
      if (evt === null) {
        return evt;
      }
      this.emit("postprocessEvent", evt, hint);
      evt.contexts = __spreadValues({
        trace: getTraceContextFromScope(currentScope)
      }, evt.contexts);
      const dynamicSamplingContext = getDynamicSamplingContextFromScope(this, currentScope);
      evt.sdkProcessingMetadata = __spreadValues({
        dynamicSamplingContext
      }, evt.sdkProcessingMetadata);
      return evt;
    });
  }
  /**
   * Processes the event and logs an error in case of rejection
   * @param event
   * @param hint
   * @param scope
   */
  _captureEvent(event, hint = {}, currentScope = getCurrentScope(), isolationScope = getIsolationScope()) {
    if (DEBUG_BUILD && isErrorEvent2(event)) {
      debug2.log(`Captured error event \`${getPossibleEventMessages(event)[0] || "<unknown>"}\``);
    }
    return this._processEvent(event, hint, currentScope, isolationScope).then((finalEvent) => {
      return finalEvent.event_id;
    }, (reason) => {
      if (DEBUG_BUILD) {
        if (_isDoNotSendEventError(reason)) {
          debug2.log(reason.message);
        } else if (_isInternalError(reason)) {
          debug2.warn(reason.message);
        } else {
          debug2.warn(reason);
        }
      }
      return void 0;
    });
  }
  /**
   * Processes an event (either error or message) and sends it to Sentry.
   *
   * This also adds breadcrumbs and context information to the event. However,
   * platform specific meta data (such as the User's IP address) must be added
   * by the SDK implementor.
   *
   *
   * @param event The event to send to Sentry.
   * @param hint May contain additional information about the original exception.
   * @param currentScope A scope containing event metadata.
   * @returns A SyncPromise that resolves with the event or rejects in case event was/will not be send.
   */
  _processEvent(event, hint, currentScope, isolationScope) {
    const options = this.getOptions();
    const {
      sampleRate
    } = options;
    const isTransaction = isTransactionEvent(event);
    const isError2 = isErrorEvent2(event);
    const eventType = event.type || "error";
    const beforeSendLabel = `before send for type \`${eventType}\``;
    const parsedSampleRate = typeof sampleRate === "undefined" ? void 0 : parseSampleRate(sampleRate);
    if (isError2 && typeof parsedSampleRate === "number" && Math.random() > parsedSampleRate) {
      this.recordDroppedEvent("sample_rate", "error");
      return rejectedSyncPromise(_makeDoNotSendEventError(`Discarding event because it's not included in the random sample (sampling rate = ${sampleRate})`));
    }
    const dataCategory = eventType === "replay_event" ? "replay" : eventType;
    return this._prepareEvent(event, hint, currentScope, isolationScope).then((prepared) => {
      if (prepared === null) {
        this.recordDroppedEvent("event_processor", dataCategory);
        throw _makeDoNotSendEventError("An event processor returned `null`, will not send event.");
      }
      const isInternalException = hint.data && hint.data.__sentry__ === true;
      if (isInternalException) {
        return prepared;
      }
      const result = processBeforeSend(this, options, prepared, hint);
      return _validateBeforeSendResult(result, beforeSendLabel);
    }).then((processedEvent) => {
      var _a3;
      if (processedEvent === null) {
        this.recordDroppedEvent("before_send", dataCategory);
        if (isTransaction) {
          const spans = event.spans || [];
          const spanCount = 1 + spans.length;
          this.recordDroppedEvent("before_send", "span", spanCount);
        }
        throw _makeDoNotSendEventError(`${beforeSendLabel} returned \`null\`, will not send event.`);
      }
      const session = currentScope.getSession() || isolationScope.getSession();
      if (isError2 && session) {
        this._updateSessionFromEvent(session, processedEvent);
      }
      if (isTransaction) {
        const spanCountBefore = ((_a3 = processedEvent.sdkProcessingMetadata) == null ? void 0 : _a3.spanCountBeforeProcessing) || 0;
        const spanCountAfter = processedEvent.spans ? processedEvent.spans.length : 0;
        const droppedSpanCount = spanCountBefore - spanCountAfter;
        if (droppedSpanCount > 0) {
          this.recordDroppedEvent("before_send", "span", droppedSpanCount);
        }
      }
      const transactionInfo = processedEvent.transaction_info;
      if (isTransaction && transactionInfo && processedEvent.transaction !== event.transaction) {
        const source = "custom";
        processedEvent.transaction_info = __spreadProps(__spreadValues({}, transactionInfo), {
          source
        });
      }
      this.sendEvent(processedEvent, hint);
      return processedEvent;
    }).then(null, (reason) => {
      if (_isDoNotSendEventError(reason) || _isInternalError(reason)) {
        throw reason;
      }
      this.captureException(reason, {
        data: {
          __sentry__: true
        },
        originalException: reason
      });
      throw _makeInternalError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${reason}`);
    });
  }
  /**
   * Occupies the client with processing and event
   */
  _process(promise) {
    this._numProcessing++;
    void promise.then((value) => {
      this._numProcessing--;
      return value;
    }, (reason) => {
      this._numProcessing--;
      return reason;
    });
  }
  /**
   * Clears outcomes on this client and returns them.
   */
  _clearOutcomes() {
    const outcomes = this._outcomes;
    this._outcomes = {};
    return Object.entries(outcomes).map(([key, quantity]) => {
      const [reason, category] = key.split(":");
      return {
        reason,
        category,
        quantity
      };
    });
  }
  /**
   * Sends client reports as an envelope.
   */
  _flushOutcomes() {
    DEBUG_BUILD && debug2.log("Flushing outcomes...");
    const outcomes = this._clearOutcomes();
    if (outcomes.length === 0) {
      DEBUG_BUILD && debug2.log("No outcomes to send");
      return;
    }
    if (!this._dsn) {
      DEBUG_BUILD && debug2.log("No dsn provided, will not send outcomes");
      return;
    }
    DEBUG_BUILD && debug2.log("Sending outcomes:", outcomes);
    const envelope = createClientReportEnvelope(outcomes, this._options.tunnel && dsnToString(this._dsn));
    this.sendEnvelope(envelope);
  }
  /**
   * Creates an {@link Event} from all inputs to `captureException` and non-primitive inputs to `captureMessage`.
   */
};
function _validateBeforeSendResult(beforeSendResult, beforeSendLabel) {
  const invalidValueError = `${beforeSendLabel} must return \`null\` or a valid event.`;
  if (isThenable(beforeSendResult)) {
    return beforeSendResult.then((event) => {
      if (!isPlainObject(event) && event !== null) {
        throw _makeInternalError(invalidValueError);
      }
      return event;
    }, (e3) => {
      throw _makeInternalError(`${beforeSendLabel} rejected with ${e3}`);
    });
  } else if (!isPlainObject(beforeSendResult) && beforeSendResult !== null) {
    throw _makeInternalError(invalidValueError);
  }
  return beforeSendResult;
}
function processBeforeSend(client, options, event, hint) {
  const {
    beforeSend,
    beforeSendTransaction,
    beforeSendSpan
  } = options;
  let processedEvent = event;
  if (isErrorEvent2(processedEvent) && beforeSend) {
    return beforeSend(processedEvent, hint);
  }
  if (isTransactionEvent(processedEvent)) {
    if (beforeSendSpan) {
      const processedRootSpanJson = beforeSendSpan(convertTransactionEventToSpanJson(processedEvent));
      if (!processedRootSpanJson) {
        showSpanDropWarning();
      } else {
        processedEvent = merge(event, convertSpanJsonToTransactionEvent(processedRootSpanJson));
      }
      if (processedEvent.spans) {
        const processedSpans = [];
        for (const span of processedEvent.spans) {
          const processedSpan = beforeSendSpan(span);
          if (!processedSpan) {
            showSpanDropWarning();
            processedSpans.push(span);
          } else {
            processedSpans.push(processedSpan);
          }
        }
        processedEvent.spans = processedSpans;
      }
    }
    if (beforeSendTransaction) {
      if (processedEvent.spans) {
        const spanCountBefore = processedEvent.spans.length;
        processedEvent.sdkProcessingMetadata = __spreadProps(__spreadValues({}, event.sdkProcessingMetadata), {
          spanCountBeforeProcessing: spanCountBefore
        });
      }
      return beforeSendTransaction(processedEvent, hint);
    }
  }
  return processedEvent;
}
function isErrorEvent2(event) {
  return event.type === void 0;
}
function isTransactionEvent(event) {
  return event.type === "transaction";
}

// node_modules/@sentry/core/build/esm/logs/envelope.js
function createLogContainerEnvelopeItem(items) {
  return [{
    type: "log",
    item_count: items.length,
    content_type: "application/vnd.sentry.items.log+json"
  }, {
    items
  }];
}
function createLogEnvelope(logs, metadata, tunnel, dsn) {
  const headers = {};
  if (metadata == null ? void 0 : metadata.sdk) {
    headers.sdk = {
      name: metadata.sdk.name,
      version: metadata.sdk.version
    };
  }
  if (!!tunnel && !!dsn) {
    headers.dsn = dsnToString(dsn);
  }
  return createEnvelope(headers, [createLogContainerEnvelopeItem(logs)]);
}

// node_modules/@sentry/core/build/esm/logs/exports.js
GLOBAL_OBJ._sentryClientToLogBufferMap = /* @__PURE__ */ new WeakMap();
function _INTERNAL_flushLogsBuffer(client, maybeLogBuffer) {
  var _a3, _b;
  const logBuffer = (_a3 = maybeLogBuffer != null ? maybeLogBuffer : _INTERNAL_getLogBuffer(client)) != null ? _a3 : [];
  if (logBuffer.length === 0) {
    return;
  }
  const clientOptions = client.getOptions();
  const envelope = createLogEnvelope(logBuffer, clientOptions._metadata, clientOptions.tunnel, client.getDsn());
  (_b = GLOBAL_OBJ._sentryClientToLogBufferMap) == null ? void 0 : _b.set(client, []);
  client.emit("flushLogs");
  client.sendEnvelope(envelope);
}
function _INTERNAL_getLogBuffer(client) {
  var _a3;
  return (_a3 = GLOBAL_OBJ._sentryClientToLogBufferMap) == null ? void 0 : _a3.get(client);
}

// node_modules/@sentry/core/build/esm/sdk.js
function initAndBind(clientClass, options) {
  if (options.debug === true) {
    if (DEBUG_BUILD) {
      debug2.enable();
    } else {
      consoleSandbox(() => {
        console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.");
      });
    }
  }
  const scope = getCurrentScope();
  scope.update(options.initialScope);
  const client = new clientClass(options);
  setCurrentClient(client);
  client.init();
  return client;
}
function setCurrentClient(client) {
  getCurrentScope().setClient(client);
}

// node_modules/@sentry/core/build/esm/utils/promisebuffer.js
var SENTRY_BUFFER_FULL_ERROR = Symbol.for("SentryBufferFullError");
function makePromiseBuffer(limit) {
  const buffer = [];
  function isReady() {
    return limit === void 0 || buffer.length < limit;
  }
  function remove2(task) {
    return buffer.splice(buffer.indexOf(task), 1)[0] || Promise.resolve(void 0);
  }
  function add(taskProducer) {
    if (!isReady()) {
      return rejectedSyncPromise(SENTRY_BUFFER_FULL_ERROR);
    }
    const task = taskProducer();
    if (buffer.indexOf(task) === -1) {
      buffer.push(task);
    }
    void task.then(() => remove2(task)).then(null, () => remove2(task).then(null, () => {
    }));
    return task;
  }
  function drain(timeout) {
    return new SyncPromise((resolve, reject) => {
      let counter = buffer.length;
      if (!counter) {
        return resolve(true);
      }
      const capturedSetTimeout = setTimeout(() => {
        if (timeout && timeout > 0) {
          resolve(false);
        }
      }, timeout);
      buffer.forEach((item) => {
        void resolvedSyncPromise(item).then(() => {
          if (!--counter) {
            clearTimeout(capturedSetTimeout);
            resolve(true);
          }
        }, reject);
      });
    });
  }
  return {
    $: buffer,
    add,
    drain
  };
}

// node_modules/@sentry/core/build/esm/utils/ratelimit.js
var DEFAULT_RETRY_AFTER = 60 * 1e3;
function parseRetryAfterHeader(header, now = Date.now()) {
  const headerDelay = parseInt(`${header}`, 10);
  if (!isNaN(headerDelay)) {
    return headerDelay * 1e3;
  }
  const headerDate = Date.parse(`${header}`);
  if (!isNaN(headerDate)) {
    return headerDate - now;
  }
  return DEFAULT_RETRY_AFTER;
}
function disabledUntil(limits, dataCategory) {
  return limits[dataCategory] || limits.all || 0;
}
function isRateLimited(limits, dataCategory, now = Date.now()) {
  return disabledUntil(limits, dataCategory) > now;
}
function updateRateLimits(limits, {
  statusCode,
  headers
}, now = Date.now()) {
  const updatedRateLimits = __spreadValues({}, limits);
  const rateLimitHeader = headers == null ? void 0 : headers["x-sentry-rate-limits"];
  const retryAfterHeader = headers == null ? void 0 : headers["retry-after"];
  if (rateLimitHeader) {
    for (const limit of rateLimitHeader.trim().split(",")) {
      const [retryAfter, categories, , , namespaces] = limit.split(":", 5);
      const headerDelay = parseInt(retryAfter, 10);
      const delay = (!isNaN(headerDelay) ? headerDelay : 60) * 1e3;
      if (!categories) {
        updatedRateLimits.all = now + delay;
      } else {
        for (const category of categories.split(";")) {
          if (category === "metric_bucket") {
            if (!namespaces || namespaces.split(";").includes("custom")) {
              updatedRateLimits[category] = now + delay;
            }
          } else {
            updatedRateLimits[category] = now + delay;
          }
        }
      }
    }
  } else if (retryAfterHeader) {
    updatedRateLimits.all = now + parseRetryAfterHeader(retryAfterHeader, now);
  } else if (statusCode === 429) {
    updatedRateLimits.all = now + 60 * 1e3;
  }
  return updatedRateLimits;
}

// node_modules/@sentry/core/build/esm/transports/base.js
var DEFAULT_TRANSPORT_BUFFER_SIZE = 64;
function createTransport(options, makeRequest, buffer = makePromiseBuffer(options.bufferSize || DEFAULT_TRANSPORT_BUFFER_SIZE)) {
  let rateLimits = {};
  const flush2 = (timeout) => buffer.drain(timeout);
  function send(envelope) {
    const filteredEnvelopeItems = [];
    forEachEnvelopeItem(envelope, (item, type) => {
      const dataCategory = envelopeItemTypeToDataCategory(type);
      if (isRateLimited(rateLimits, dataCategory)) {
        options.recordDroppedEvent("ratelimit_backoff", dataCategory);
      } else {
        filteredEnvelopeItems.push(item);
      }
    });
    if (filteredEnvelopeItems.length === 0) {
      return resolvedSyncPromise({});
    }
    const filteredEnvelope = createEnvelope(envelope[0], filteredEnvelopeItems);
    const recordEnvelopeLoss = (reason) => {
      forEachEnvelopeItem(filteredEnvelope, (item, type) => {
        options.recordDroppedEvent(reason, envelopeItemTypeToDataCategory(type));
      });
    };
    const requestTask = () => makeRequest({
      body: serializeEnvelope(filteredEnvelope)
    }).then((response) => {
      if (response.statusCode !== void 0 && (response.statusCode < 200 || response.statusCode >= 300)) {
        DEBUG_BUILD && debug2.warn(`Sentry responded with status code ${response.statusCode} to sent event.`);
      }
      rateLimits = updateRateLimits(rateLimits, response);
      return response;
    }, (error2) => {
      recordEnvelopeLoss("network_error");
      DEBUG_BUILD && debug2.error("Encountered error running transport request:", error2);
      throw error2;
    });
    return buffer.add(requestTask).then((result) => result, (error2) => {
      if (error2 === SENTRY_BUFFER_FULL_ERROR) {
        DEBUG_BUILD && debug2.error("Skipped sending event because buffer is full.");
        recordEnvelopeLoss("queue_overflow");
        return resolvedSyncPromise({});
      } else {
        throw error2;
      }
    });
  }
  return {
    send,
    flush: flush2
  };
}

// node_modules/@sentry/core/build/esm/utils/isSentryRequestUrl.js
function isSentryRequestUrl(url, client) {
  const dsn = client == null ? void 0 : client.getDsn();
  const tunnel = client == null ? void 0 : client.getOptions().tunnel;
  return checkDsn(url, dsn) || checkTunnel(url, tunnel);
}
function checkTunnel(url, tunnel) {
  if (!tunnel) {
    return false;
  }
  return removeTrailingSlash(url) === removeTrailingSlash(tunnel);
}
function checkDsn(url, dsn) {
  return dsn ? url.includes(dsn.host) : false;
}
function removeTrailingSlash(str) {
  return str[str.length - 1] === "/" ? str.slice(0, -1) : str;
}

// node_modules/@sentry/core/build/esm/utils/ipAddress.js
function addAutoIpAddressToUser(objWithMaybeUser) {
  var _a3;
  if (((_a3 = objWithMaybeUser.user) == null ? void 0 : _a3.ip_address) === void 0) {
    objWithMaybeUser.user = __spreadProps(__spreadValues({}, objWithMaybeUser.user), {
      ip_address: "{{auto}}"
    });
  }
}
function addAutoIpAddressToSession(session) {
  var _a3;
  if ("aggregates" in session) {
    if (((_a3 = session.attrs) == null ? void 0 : _a3["ip_address"]) === void 0) {
      session.attrs = __spreadProps(__spreadValues({}, session.attrs), {
        ip_address: "{{auto}}"
      });
    }
  } else {
    if (session.ipAddress === void 0) {
      session.ipAddress = "{{auto}}";
    }
  }
}

// node_modules/@sentry/core/build/esm/utils/sdkMetadata.js
function applySdkMetadata(options, name, names = [name], source = "npm") {
  const metadata = options._metadata || {};
  if (!metadata.sdk) {
    metadata.sdk = {
      name: `sentry.javascript.${name}`,
      packages: names.map((name2) => ({
        name: `${source}:@sentry/${name2}`,
        version: SDK_VERSION
      })),
      version: SDK_VERSION
    };
  }
  options._metadata = metadata;
}

// node_modules/@sentry/core/build/esm/utils/traceData.js
function getTraceData(options = {}) {
  const client = options.client || getClient();
  if (!isEnabled2() || !client) {
    return {};
  }
  const carrier = getMainCarrier();
  const acs = getAsyncContextStrategy(carrier);
  if (acs.getTraceData) {
    return acs.getTraceData(options);
  }
  const scope = options.scope || getCurrentScope();
  const span = options.span || getActiveSpan();
  const sentryTrace = span ? spanToTraceHeader(span) : scopeToTraceHeader(scope);
  const dsc = span ? getDynamicSamplingContextFromSpan(span) : getDynamicSamplingContextFromScope(client, scope);
  const baggage = dynamicSamplingContextToSentryBaggageHeader(dsc);
  const isValidSentryTraceHeader = TRACEPARENT_REGEXP.test(sentryTrace);
  if (!isValidSentryTraceHeader) {
    debug2.warn("Invalid sentry-trace data. Cannot generate trace data");
    return {};
  }
  return {
    "sentry-trace": sentryTrace,
    baggage
  };
}
function scopeToTraceHeader(scope) {
  const {
    traceId,
    sampled,
    propagationSpanId
  } = scope.getPropagationContext();
  return generateSentryTraceHeader(traceId, propagationSpanId, sampled);
}

// node_modules/@sentry/core/build/esm/utils/debounce.js
function debounce(func, wait, options) {
  let callbackReturnValue;
  let timerId;
  let maxTimerId;
  const maxWait = (options == null ? void 0 : options.maxWait) ? Math.max(options.maxWait, wait) : 0;
  const setTimeoutImpl = (options == null ? void 0 : options.setTimeoutImpl) || setTimeout;
  function invokeFunc() {
    cancelTimers();
    callbackReturnValue = func();
    return callbackReturnValue;
  }
  function cancelTimers() {
    timerId !== void 0 && clearTimeout(timerId);
    maxTimerId !== void 0 && clearTimeout(maxTimerId);
    timerId = maxTimerId = void 0;
  }
  function flush2() {
    if (timerId !== void 0 || maxTimerId !== void 0) {
      return invokeFunc();
    }
    return callbackReturnValue;
  }
  function debounced() {
    if (timerId) {
      clearTimeout(timerId);
    }
    timerId = setTimeoutImpl(invokeFunc, wait);
    if (maxWait && maxTimerId === void 0) {
      maxTimerId = setTimeoutImpl(invokeFunc, maxWait);
    }
    return callbackReturnValue;
  }
  debounced.cancel = cancelTimers;
  debounced.flush = flush2;
  return debounced;
}

// node_modules/@sentry/core/build/esm/breadcrumbs.js
var DEFAULT_BREADCRUMBS = 100;
function addBreadcrumb(breadcrumb, hint) {
  const client = getClient();
  const isolationScope = getIsolationScope();
  if (!client) return;
  const {
    beforeBreadcrumb = null,
    maxBreadcrumbs = DEFAULT_BREADCRUMBS
  } = client.getOptions();
  if (maxBreadcrumbs <= 0) return;
  const timestamp = dateTimestampInSeconds();
  const mergedBreadcrumb = __spreadValues({
    timestamp
  }, breadcrumb);
  const finalBreadcrumb = beforeBreadcrumb ? consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint)) : mergedBreadcrumb;
  if (finalBreadcrumb === null) return;
  if (client.emit) {
    client.emit("beforeAddBreadcrumb", finalBreadcrumb, hint);
  }
  isolationScope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);
}

// node_modules/@sentry/core/build/esm/integrations/functiontostring.js
var originalFunctionToString;
var INTEGRATION_NAME = "FunctionToString";
var SETUP_CLIENTS = /* @__PURE__ */ new WeakMap();
var _functionToStringIntegration = () => {
  return {
    name: INTEGRATION_NAME,
    setupOnce() {
      originalFunctionToString = Function.prototype.toString;
      try {
        Function.prototype.toString = function(...args) {
          const originalFunction = getOriginalFunction(this);
          const context = SETUP_CLIENTS.has(getClient()) && originalFunction !== void 0 ? originalFunction : this;
          return originalFunctionToString.apply(context, args);
        };
      } catch {
      }
    },
    setup(client) {
      SETUP_CLIENTS.set(client, true);
    }
  };
};
var functionToStringIntegration = defineIntegration(_functionToStringIntegration);

// node_modules/@sentry/core/build/esm/integrations/eventFilters.js
var DEFAULT_IGNORE_ERRORS = [
  /^Script error\.?$/,
  /^Javascript error: Script error\.? on line 0$/,
  /^ResizeObserver loop completed with undelivered notifications.$/,
  // The browser logs this when a ResizeObserver handler takes a bit longer. Usually this is not an actual issue though. It indicates slowness.
  /^Cannot redefine property: googletag$/,
  // This is thrown when google tag manager is used in combination with an ad blocker
  /^Can't find variable: gmo$/,
  // Error from Google Search App https://issuetracker.google.com/issues/396043331
  /^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,
  // Random error that happens but not actionable or noticeable to end-users.
  `can't redefine non-configurable property "solana"`,
  // Probably a browser extension or custom browser (Brave) throwing this error
  "vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)",
  // Error thrown by GTM, seemingly not affecting end-users
  "Can't find variable: _AutofillCallbackHandler",
  // Unactionable error in instagram webview https://developers.facebook.com/community/threads/320013549791141/
  /^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,
  // unactionable error from CEFSharp, a .NET library that embeds chromium in .NET apps
  /^Java exception was raised during method invocation$/
  // error from Facebook Mobile browser (https://github.com/getsentry/sentry-javascript/issues/15065)
];
var INTEGRATION_NAME2 = "EventFilters";
var eventFiltersIntegration = defineIntegration((options = {}) => {
  let mergedOptions;
  return {
    name: INTEGRATION_NAME2,
    setup(client) {
      const clientOptions = client.getOptions();
      mergedOptions = _mergeOptions(options, clientOptions);
    },
    processEvent(event, _hint, client) {
      if (!mergedOptions) {
        const clientOptions = client.getOptions();
        mergedOptions = _mergeOptions(options, clientOptions);
      }
      return _shouldDropEvent(event, mergedOptions) ? null : event;
    }
  };
});
var inboundFiltersIntegration = defineIntegration((options = {}) => {
  return __spreadProps(__spreadValues({}, eventFiltersIntegration(options)), {
    name: "InboundFilters"
  });
});
function _mergeOptions(internalOptions = {}, clientOptions = {}) {
  return {
    allowUrls: [...internalOptions.allowUrls || [], ...clientOptions.allowUrls || []],
    denyUrls: [...internalOptions.denyUrls || [], ...clientOptions.denyUrls || []],
    ignoreErrors: [...internalOptions.ignoreErrors || [], ...clientOptions.ignoreErrors || [], ...internalOptions.disableErrorDefaults ? [] : DEFAULT_IGNORE_ERRORS],
    ignoreTransactions: [...internalOptions.ignoreTransactions || [], ...clientOptions.ignoreTransactions || []]
  };
}
function _shouldDropEvent(event, options) {
  if (!event.type) {
    if (_isIgnoredError(event, options.ignoreErrors)) {
      DEBUG_BUILD && debug2.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${getEventDescription(event)}`);
      return true;
    }
    if (_isUselessError(event)) {
      DEBUG_BUILD && debug2.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${getEventDescription(event)}`);
      return true;
    }
    if (_isDeniedUrl(event, options.denyUrls)) {
      DEBUG_BUILD && debug2.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${getEventDescription(event)}.
Url: ${_getEventFilterUrl(event)}`);
      return true;
    }
    if (!_isAllowedUrl(event, options.allowUrls)) {
      DEBUG_BUILD && debug2.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${getEventDescription(event)}.
Url: ${_getEventFilterUrl(event)}`);
      return true;
    }
  } else if (event.type === "transaction") {
    if (_isIgnoredTransaction(event, options.ignoreTransactions)) {
      DEBUG_BUILD && debug2.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${getEventDescription(event)}`);
      return true;
    }
  }
  return false;
}
function _isIgnoredError(event, ignoreErrors) {
  if (!(ignoreErrors == null ? void 0 : ignoreErrors.length)) {
    return false;
  }
  return getPossibleEventMessages(event).some((message) => stringMatchesSomePattern(message, ignoreErrors));
}
function _isIgnoredTransaction(event, ignoreTransactions) {
  if (!(ignoreTransactions == null ? void 0 : ignoreTransactions.length)) {
    return false;
  }
  const name = event.transaction;
  return name ? stringMatchesSomePattern(name, ignoreTransactions) : false;
}
function _isDeniedUrl(event, denyUrls) {
  if (!(denyUrls == null ? void 0 : denyUrls.length)) {
    return false;
  }
  const url = _getEventFilterUrl(event);
  return !url ? false : stringMatchesSomePattern(url, denyUrls);
}
function _isAllowedUrl(event, allowUrls) {
  if (!(allowUrls == null ? void 0 : allowUrls.length)) {
    return true;
  }
  const url = _getEventFilterUrl(event);
  return !url ? true : stringMatchesSomePattern(url, allowUrls);
}
function _getLastValidUrl(frames = []) {
  for (let i2 = frames.length - 1; i2 >= 0; i2--) {
    const frame = frames[i2];
    if (frame && frame.filename !== "<anonymous>" && frame.filename !== "[native code]") {
      return frame.filename || null;
    }
  }
  return null;
}
function _getEventFilterUrl(event) {
  var _a3, _b, _c;
  try {
    const rootException = [...(_b = (_a3 = event.exception) == null ? void 0 : _a3.values) != null ? _b : []].reverse().find((value) => {
      var _a4, _b2, _c2;
      return ((_a4 = value.mechanism) == null ? void 0 : _a4.parent_id) === void 0 && ((_c2 = (_b2 = value.stacktrace) == null ? void 0 : _b2.frames) == null ? void 0 : _c2.length);
    });
    const frames = (_c = rootException == null ? void 0 : rootException.stacktrace) == null ? void 0 : _c.frames;
    return frames ? _getLastValidUrl(frames) : null;
  } catch (oO) {
    DEBUG_BUILD && debug2.error(`Cannot extract url for event ${getEventDescription(event)}`);
    return null;
  }
}
function _isUselessError(event) {
  var _a3, _b;
  if (!((_b = (_a3 = event.exception) == null ? void 0 : _a3.values) == null ? void 0 : _b.length)) {
    return false;
  }
  return (
    // No top-level message
    !event.message && // There are no exception values that have a stacktrace, a non-generic-Error type or value
    !event.exception.values.some((value) => value.stacktrace || value.type && value.type !== "Error" || value.value)
  );
}

// node_modules/@sentry/core/build/esm/utils/aggregate-errors.js
function applyAggregateErrorsToEvent(exceptionFromErrorImplementation, parser, key, limit, event, hint) {
  var _a3;
  if (!((_a3 = event.exception) == null ? void 0 : _a3.values) || !hint || !isInstanceOf(hint.originalException, Error)) {
    return;
  }
  const originalException = event.exception.values.length > 0 ? event.exception.values[event.exception.values.length - 1] : void 0;
  if (originalException) {
    event.exception.values = aggregateExceptionsFromError(exceptionFromErrorImplementation, parser, limit, hint.originalException, key, event.exception.values, originalException, 0);
  }
}
function aggregateExceptionsFromError(exceptionFromErrorImplementation, parser, limit, error2, key, prevExceptions, exception, exceptionId) {
  if (prevExceptions.length >= limit + 1) {
    return prevExceptions;
  }
  let newExceptions = [...prevExceptions];
  if (isInstanceOf(error2[key], Error)) {
    applyExceptionGroupFieldsForParentException(exception, exceptionId);
    const newException = exceptionFromErrorImplementation(parser, error2[key]);
    const newExceptionId = newExceptions.length;
    applyExceptionGroupFieldsForChildException(newException, key, newExceptionId, exceptionId);
    newExceptions = aggregateExceptionsFromError(exceptionFromErrorImplementation, parser, limit, error2[key], key, [newException, ...newExceptions], newException, newExceptionId);
  }
  if (Array.isArray(error2.errors)) {
    error2.errors.forEach((childError, i2) => {
      if (isInstanceOf(childError, Error)) {
        applyExceptionGroupFieldsForParentException(exception, exceptionId);
        const newException = exceptionFromErrorImplementation(parser, childError);
        const newExceptionId = newExceptions.length;
        applyExceptionGroupFieldsForChildException(newException, `errors[${i2}]`, newExceptionId, exceptionId);
        newExceptions = aggregateExceptionsFromError(exceptionFromErrorImplementation, parser, limit, childError, key, [newException, ...newExceptions], newException, newExceptionId);
      }
    });
  }
  return newExceptions;
}
function applyExceptionGroupFieldsForParentException(exception, exceptionId) {
  exception.mechanism = exception.mechanism || {
    type: "generic",
    handled: true
  };
  exception.mechanism = __spreadProps(__spreadValues(__spreadValues({}, exception.mechanism), exception.type === "AggregateError" && {
    is_exception_group: true
  }), {
    exception_id: exceptionId
  });
}
function applyExceptionGroupFieldsForChildException(exception, source, exceptionId, parentId) {
  exception.mechanism = exception.mechanism || {
    type: "generic",
    handled: true
  };
  exception.mechanism = __spreadProps(__spreadValues({}, exception.mechanism), {
    type: "chained",
    source,
    exception_id: exceptionId,
    parent_id: parentId
  });
}

// node_modules/@sentry/core/build/esm/instrument/console.js
function addConsoleInstrumentationHandler(handler) {
  const type = "console";
  addHandler(type, handler);
  maybeInstrument(type, instrumentConsole);
}
function instrumentConsole() {
  if (!("console" in GLOBAL_OBJ)) {
    return;
  }
  CONSOLE_LEVELS.forEach(function(level) {
    if (!(level in GLOBAL_OBJ.console)) {
      return;
    }
    fill(GLOBAL_OBJ.console, level, function(originalConsoleMethod) {
      originalConsoleMethods[level] = originalConsoleMethod;
      return function(...args) {
        const handlerData = {
          args,
          level
        };
        triggerHandlers("console", handlerData);
        const log2 = originalConsoleMethods[level];
        log2 == null ? void 0 : log2.apply(GLOBAL_OBJ.console, args);
      };
    });
  });
}

// node_modules/@sentry/core/build/esm/utils/severity.js
function severityLevelFromString(level) {
  return level === "warn" ? "warning" : ["fatal", "error", "warning", "log", "info", "debug"].includes(level) ? level : "log";
}

// node_modules/@sentry/core/build/esm/integrations/dedupe.js
var INTEGRATION_NAME3 = "Dedupe";
var _dedupeIntegration = () => {
  let previousEvent;
  return {
    name: INTEGRATION_NAME3,
    processEvent(currentEvent) {
      if (currentEvent.type) {
        return currentEvent;
      }
      try {
        if (_shouldDropEvent2(currentEvent, previousEvent)) {
          DEBUG_BUILD && debug2.warn("Event dropped due to being a duplicate of previously captured event.");
          return null;
        }
      } catch (_oO) {
      }
      return previousEvent = currentEvent;
    }
  };
};
var dedupeIntegration = defineIntegration(_dedupeIntegration);
function _shouldDropEvent2(currentEvent, previousEvent) {
  if (!previousEvent) {
    return false;
  }
  if (_isSameMessageEvent(currentEvent, previousEvent)) {
    return true;
  }
  if (_isSameExceptionEvent(currentEvent, previousEvent)) {
    return true;
  }
  return false;
}
function _isSameMessageEvent(currentEvent, previousEvent) {
  const currentMessage = currentEvent.message;
  const previousMessage = previousEvent.message;
  if (!currentMessage && !previousMessage) {
    return false;
  }
  if (currentMessage && !previousMessage || !currentMessage && previousMessage) {
    return false;
  }
  if (currentMessage !== previousMessage) {
    return false;
  }
  if (!_isSameFingerprint(currentEvent, previousEvent)) {
    return false;
  }
  if (!_isSameStacktrace(currentEvent, previousEvent)) {
    return false;
  }
  return true;
}
function _isSameExceptionEvent(currentEvent, previousEvent) {
  const previousException = _getExceptionFromEvent(previousEvent);
  const currentException = _getExceptionFromEvent(currentEvent);
  if (!previousException || !currentException) {
    return false;
  }
  if (previousException.type !== currentException.type || previousException.value !== currentException.value) {
    return false;
  }
  if (!_isSameFingerprint(currentEvent, previousEvent)) {
    return false;
  }
  if (!_isSameStacktrace(currentEvent, previousEvent)) {
    return false;
  }
  return true;
}
function _isSameStacktrace(currentEvent, previousEvent) {
  let currentFrames = getFramesFromEvent(currentEvent);
  let previousFrames = getFramesFromEvent(previousEvent);
  if (!currentFrames && !previousFrames) {
    return true;
  }
  if (currentFrames && !previousFrames || !currentFrames && previousFrames) {
    return false;
  }
  currentFrames = currentFrames;
  previousFrames = previousFrames;
  if (previousFrames.length !== currentFrames.length) {
    return false;
  }
  for (let i2 = 0; i2 < previousFrames.length; i2++) {
    const frameA = previousFrames[i2];
    const frameB = currentFrames[i2];
    if (frameA.filename !== frameB.filename || frameA.lineno !== frameB.lineno || frameA.colno !== frameB.colno || frameA.function !== frameB.function) {
      return false;
    }
  }
  return true;
}
function _isSameFingerprint(currentEvent, previousEvent) {
  let currentFingerprint = currentEvent.fingerprint;
  let previousFingerprint = previousEvent.fingerprint;
  if (!currentFingerprint && !previousFingerprint) {
    return true;
  }
  if (currentFingerprint && !previousFingerprint || !currentFingerprint && previousFingerprint) {
    return false;
  }
  currentFingerprint = currentFingerprint;
  previousFingerprint = previousFingerprint;
  try {
    return !!(currentFingerprint.join("") === previousFingerprint.join(""));
  } catch (_oO) {
    return false;
  }
}
function _getExceptionFromEvent(event) {
  var _a3;
  return ((_a3 = event.exception) == null ? void 0 : _a3.values) && event.exception.values[0];
}

// node_modules/@sentry/core/build/esm/utils/url.js
var DEFAULT_BASE_URL = "thismessage:/";
function isURLObjectRelative(url) {
  return "isRelative" in url;
}
function parseStringToURLObject(url, urlBase) {
  const isRelative = url.indexOf("://") <= 0 && url.indexOf("//") !== 0;
  const base = urlBase != null ? urlBase : isRelative ? DEFAULT_BASE_URL : void 0;
  try {
    if ("canParse" in URL && !URL.canParse(url, base)) {
      return void 0;
    }
    const fullUrlObject = new URL(url, base);
    if (isRelative) {
      return {
        isRelative,
        pathname: fullUrlObject.pathname,
        search: fullUrlObject.search,
        hash: fullUrlObject.hash
      };
    }
    return fullUrlObject;
  } catch {
  }
  return void 0;
}
function getSanitizedUrlStringFromUrlObject(url) {
  if (isURLObjectRelative(url)) {
    return url.pathname;
  }
  const newUrl = new URL(url);
  newUrl.search = "";
  newUrl.hash = "";
  if (["80", "443"].includes(newUrl.port)) {
    newUrl.port = "";
  }
  if (newUrl.password) {
    newUrl.password = "%filtered%";
  }
  if (newUrl.username) {
    newUrl.username = "%filtered%";
  }
  return newUrl.toString();
}
function parseUrl(url) {
  if (!url) {
    return {};
  }
  const match = url.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);
  if (!match) {
    return {};
  }
  const query = match[6] || "";
  const fragment = match[8] || "";
  return {
    host: match[4],
    path: match[5],
    protocol: match[2],
    search: query,
    hash: fragment,
    relative: match[5] + query + fragment
    // everything minus origin
  };
}
function stripUrlQueryAndFragment(urlPath) {
  return urlPath.split(/[?#]/, 1)[0];
}

// node_modules/@sentry/core/build/esm/fetch.js
function instrumentFetchRequest(handlerData, shouldCreateSpan, shouldAttachHeaders2, spans, spanOrigin = "auto.http.browser") {
  if (!handlerData.fetchData) {
    return void 0;
  }
  const {
    method,
    url
  } = handlerData.fetchData;
  const shouldCreateSpanResult = hasSpansEnabled() && shouldCreateSpan(url);
  if (handlerData.endTimestamp && shouldCreateSpanResult) {
    const spanId = handlerData.fetchData.__span;
    if (!spanId) return;
    const span2 = spans[spanId];
    if (span2) {
      endSpan(span2, handlerData);
      delete spans[spanId];
    }
    return void 0;
  }
  const hasParent = !!getActiveSpan();
  const span = shouldCreateSpanResult && hasParent ? startInactiveSpan(getSpanStartOptions(url, method, spanOrigin)) : new SentryNonRecordingSpan();
  handlerData.fetchData.__span = span.spanContext().spanId;
  spans[span.spanContext().spanId] = span;
  if (shouldAttachHeaders2(handlerData.fetchData.url)) {
    const request = handlerData.args[0];
    const options = handlerData.args[1] || {};
    const headers = _addTracingHeadersToFetchRequest(
      request,
      options,
      // If performance is disabled (TWP) or there's no active root span (pageload/navigation/interaction),
      // we do not want to use the span as base for the trace headers,
      // which means that the headers will be generated from the scope and the sampling decision is deferred
      hasSpansEnabled() && hasParent ? span : void 0
    );
    if (headers) {
      handlerData.args[1] = options;
      options.headers = headers;
    }
  }
  const client = getClient();
  if (client) {
    const fetchHint = {
      input: handlerData.args,
      response: handlerData.response,
      startTimestamp: handlerData.startTimestamp,
      endTimestamp: handlerData.endTimestamp
    };
    client.emit("beforeOutgoingRequestSpan", span, fetchHint);
  }
  return span;
}
function _addTracingHeadersToFetchRequest(request, fetchOptionsObj, span) {
  const traceHeaders = getTraceData({
    span
  });
  const sentryTrace = traceHeaders["sentry-trace"];
  const baggage = traceHeaders.baggage;
  if (!sentryTrace) {
    return void 0;
  }
  const originalHeaders = fetchOptionsObj.headers || (isRequest(request) ? request.headers : void 0);
  if (!originalHeaders) {
    return __spreadValues({}, traceHeaders);
  } else if (isHeaders(originalHeaders)) {
    const newHeaders = new Headers(originalHeaders);
    if (!newHeaders.get("sentry-trace")) {
      newHeaders.set("sentry-trace", sentryTrace);
    }
    if (baggage) {
      const prevBaggageHeader = newHeaders.get("baggage");
      if (!prevBaggageHeader) {
        newHeaders.set("baggage", baggage);
      } else if (!baggageHeaderHasSentryBaggageValues(prevBaggageHeader)) {
        newHeaders.set("baggage", `${prevBaggageHeader},${baggage}`);
      }
    }
    return newHeaders;
  } else if (Array.isArray(originalHeaders)) {
    const newHeaders = [...originalHeaders];
    if (!originalHeaders.find((header) => header[0] === "sentry-trace")) {
      newHeaders.push(["sentry-trace", sentryTrace]);
    }
    const prevBaggageHeaderWithSentryValues = originalHeaders.find((header) => header[0] === "baggage" && baggageHeaderHasSentryBaggageValues(header[1]));
    if (baggage && !prevBaggageHeaderWithSentryValues) {
      newHeaders.push(["baggage", baggage]);
    }
    return newHeaders;
  } else {
    const existingSentryTraceHeader = "sentry-trace" in originalHeaders ? originalHeaders["sentry-trace"] : void 0;
    const existingBaggageHeader = "baggage" in originalHeaders ? originalHeaders.baggage : void 0;
    const newBaggageHeaders = existingBaggageHeader ? Array.isArray(existingBaggageHeader) ? [...existingBaggageHeader] : [existingBaggageHeader] : [];
    const prevBaggageHeaderWithSentryValues = existingBaggageHeader && (Array.isArray(existingBaggageHeader) ? existingBaggageHeader.find((headerItem) => baggageHeaderHasSentryBaggageValues(headerItem)) : baggageHeaderHasSentryBaggageValues(existingBaggageHeader));
    if (baggage && !prevBaggageHeaderWithSentryValues) {
      newBaggageHeaders.push(baggage);
    }
    return __spreadProps(__spreadValues({}, originalHeaders), {
      "sentry-trace": existingSentryTraceHeader != null ? existingSentryTraceHeader : sentryTrace,
      baggage: newBaggageHeaders.length > 0 ? newBaggageHeaders.join(",") : void 0
    });
  }
}
function endSpan(span, handlerData) {
  var _a3;
  if (handlerData.response) {
    setHttpStatus(span, handlerData.response.status);
    const contentLength = ((_a3 = handlerData.response) == null ? void 0 : _a3.headers) && handlerData.response.headers.get("content-length");
    if (contentLength) {
      const contentLengthNum = parseInt(contentLength);
      if (contentLengthNum > 0) {
        span.setAttribute("http.response_content_length", contentLengthNum);
      }
    }
  } else if (handlerData.error) {
    span.setStatus({
      code: SPAN_STATUS_ERROR,
      message: "internal_error"
    });
  }
  span.end();
}
function baggageHeaderHasSentryBaggageValues(baggageHeader) {
  return baggageHeader.split(",").some((baggageEntry) => baggageEntry.trim().startsWith(SENTRY_BAGGAGE_KEY_PREFIX));
}
function isHeaders(headers) {
  return typeof Headers !== "undefined" && isInstanceOf(headers, Headers);
}
function getSpanStartOptions(url, method, spanOrigin) {
  const parsedUrl = parseStringToURLObject(url);
  return {
    name: parsedUrl ? `${method} ${getSanitizedUrlStringFromUrlObject(parsedUrl)}` : method,
    attributes: getFetchSpanAttributes(url, parsedUrl, method, spanOrigin)
  };
}
function getFetchSpanAttributes(url, parsedUrl, method, spanOrigin) {
  const attributes = {
    url,
    type: "fetch",
    "http.method": method,
    [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: spanOrigin,
    [SEMANTIC_ATTRIBUTE_SENTRY_OP]: "http.client"
  };
  if (parsedUrl) {
    if (!isURLObjectRelative(parsedUrl)) {
      attributes["http.url"] = parsedUrl.href;
      attributes["server.address"] = parsedUrl.host;
    }
    if (parsedUrl.search) {
      attributes["http.query"] = parsedUrl.search;
    }
    if (parsedUrl.hash) {
      attributes["http.fragment"] = parsedUrl.hash;
    }
  }
  return attributes;
}

// node_modules/@sentry/core/build/esm/feedback.js
function captureFeedback(params, hint = {}, scope = getCurrentScope()) {
  const {
    message,
    name,
    email,
    url,
    source,
    associatedEventId,
    tags
  } = params;
  const feedbackEvent = {
    contexts: {
      feedback: {
        contact_email: email,
        name,
        message,
        url,
        source,
        associated_event_id: associatedEventId
      }
    },
    type: "feedback",
    level: "info",
    tags
  };
  const client = (scope == null ? void 0 : scope.getClient()) || getClient();
  if (client) {
    client.emit("beforeSendFeedback", feedbackEvent, hint);
  }
  const eventId = scope.captureEvent(feedbackEvent, hint);
  return eventId;
}

// node_modules/@sentry/core/build/esm/utils/breadcrumb-log-level.js
function getBreadcrumbLogLevelFromHttpStatusCode(statusCode) {
  if (statusCode === void 0) {
    return void 0;
  } else if (statusCode >= 400 && statusCode < 500) {
    return "warning";
  } else if (statusCode >= 500) {
    return "error";
  } else {
    return void 0;
  }
}

// node_modules/@sentry/core/build/esm/utils/supports.js
var WINDOW2 = GLOBAL_OBJ;
function supportsHistory() {
  return "history" in WINDOW2 && !!WINDOW2.history;
}
function _isFetchSupported() {
  if (!("fetch" in WINDOW2)) {
    return false;
  }
  try {
    new Headers();
    new Request("http://www.example.com");
    new Response();
    return true;
  } catch (e3) {
    return false;
  }
}
function isNativeFunction(func) {
  return func && /^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(func.toString());
}
function supportsNativeFetch() {
  var _a3;
  if (typeof EdgeRuntime === "string") {
    return true;
  }
  if (!_isFetchSupported()) {
    return false;
  }
  if (isNativeFunction(WINDOW2.fetch)) {
    return true;
  }
  let result = false;
  const doc = WINDOW2.document;
  if (doc && typeof doc.createElement === "function") {
    try {
      const sandbox = doc.createElement("iframe");
      sandbox.hidden = true;
      doc.head.appendChild(sandbox);
      if ((_a3 = sandbox.contentWindow) == null ? void 0 : _a3.fetch) {
        result = isNativeFunction(sandbox.contentWindow.fetch);
      }
      doc.head.removeChild(sandbox);
    } catch (err) {
      DEBUG_BUILD && debug2.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", err);
    }
  }
  return result;
}

// node_modules/@sentry/core/build/esm/instrument/fetch.js
function addFetchInstrumentationHandler(handler, skipNativeFetchCheck) {
  const type = "fetch";
  addHandler(type, handler);
  maybeInstrument(type, () => instrumentFetch(void 0, skipNativeFetchCheck));
}
function addFetchEndInstrumentationHandler(handler) {
  const type = "fetch-body-resolved";
  addHandler(type, handler);
  maybeInstrument(type, () => instrumentFetch(streamHandler));
}
function instrumentFetch(onFetchResolved, skipNativeFetchCheck = false) {
  if (skipNativeFetchCheck && !supportsNativeFetch()) {
    return;
  }
  fill(GLOBAL_OBJ, "fetch", function(originalFetch) {
    return function(...args) {
      const virtualError = new Error();
      const {
        method,
        url
      } = parseFetchArgs(args);
      const handlerData = {
        args,
        fetchData: {
          method,
          url
        },
        startTimestamp: timestampInSeconds() * 1e3,
        // // Adding the error to be able to fingerprint the failed fetch event in HttpClient instrumentation
        virtualError,
        headers: getHeadersFromFetchArgs(args)
      };
      if (!onFetchResolved) {
        triggerHandlers("fetch", __spreadValues({}, handlerData));
      }
      return originalFetch.apply(GLOBAL_OBJ, args).then((response) => __async(null, null, function* () {
        if (onFetchResolved) {
          onFetchResolved(response);
        } else {
          triggerHandlers("fetch", __spreadProps(__spreadValues({}, handlerData), {
            endTimestamp: timestampInSeconds() * 1e3,
            response
          }));
        }
        return response;
      }), (error2) => {
        triggerHandlers("fetch", __spreadProps(__spreadValues({}, handlerData), {
          endTimestamp: timestampInSeconds() * 1e3,
          error: error2
        }));
        if (isError(error2) && error2.stack === void 0) {
          error2.stack = virtualError.stack;
          addNonEnumerableProperty(error2, "framesToPop", 1);
        }
        if (error2 instanceof TypeError && (error2.message === "Failed to fetch" || error2.message === "Load failed" || error2.message === "NetworkError when attempting to fetch resource.")) {
          try {
            const url2 = new URL(handlerData.fetchData.url);
            error2.message = `${error2.message} (${url2.host})`;
          } catch {
          }
        }
        throw error2;
      });
    };
  });
}
function resolveResponse(res, onFinishedResolving) {
  return __async(this, null, function* () {
    if (res == null ? void 0 : res.body) {
      const body = res.body;
      const responseReader = body.getReader();
      const maxFetchDurationTimeout = setTimeout(
        () => {
          body.cancel().then(null, () => {
          });
        },
        90 * 1e3
        // 90s
      );
      let readingActive = true;
      while (readingActive) {
        let chunkTimeout;
        try {
          chunkTimeout = setTimeout(() => {
            body.cancel().then(null, () => {
            });
          }, 5e3);
          const {
            done
          } = yield responseReader.read();
          clearTimeout(chunkTimeout);
          if (done) {
            onFinishedResolving();
            readingActive = false;
          }
        } catch (error2) {
          readingActive = false;
        } finally {
          clearTimeout(chunkTimeout);
        }
      }
      clearTimeout(maxFetchDurationTimeout);
      responseReader.releaseLock();
      body.cancel().then(null, () => {
      });
    }
  });
}
function streamHandler(response) {
  let clonedResponseForResolving;
  try {
    clonedResponseForResolving = response.clone();
  } catch {
    return;
  }
  resolveResponse(clonedResponseForResolving, () => {
    triggerHandlers("fetch-body-resolved", {
      endTimestamp: timestampInSeconds() * 1e3,
      response
    });
  });
}
function hasProp(obj, prop) {
  return !!obj && typeof obj === "object" && !!obj[prop];
}
function getUrlFromResource(resource) {
  if (typeof resource === "string") {
    return resource;
  }
  if (!resource) {
    return "";
  }
  if (hasProp(resource, "url")) {
    return resource.url;
  }
  if (resource.toString) {
    return resource.toString();
  }
  return "";
}
function parseFetchArgs(fetchArgs) {
  if (fetchArgs.length === 0) {
    return {
      method: "GET",
      url: ""
    };
  }
  if (fetchArgs.length === 2) {
    const [url, options] = fetchArgs;
    return {
      url: getUrlFromResource(url),
      method: hasProp(options, "method") ? String(options.method).toUpperCase() : "GET"
    };
  }
  const arg = fetchArgs[0];
  return {
    url: getUrlFromResource(arg),
    method: hasProp(arg, "method") ? String(arg.method).toUpperCase() : "GET"
  };
}
function getHeadersFromFetchArgs(fetchArgs) {
  const [requestArgument, optionsArgument] = fetchArgs;
  try {
    if (typeof optionsArgument === "object" && optionsArgument !== null && "headers" in optionsArgument && optionsArgument.headers) {
      return new Headers(optionsArgument.headers);
    }
    if (isRequest(requestArgument)) {
      return new Headers(requestArgument.headers);
    }
  } catch {
  }
  return;
}

// node_modules/@sentry/core/build/esm/utils/env.js
function isBrowserBundle() {
  return typeof __SENTRY_BROWSER_BUNDLE__ !== "undefined" && !!__SENTRY_BROWSER_BUNDLE__;
}
function getSDKSource() {
  return "npm";
}

// node_modules/@sentry/core/build/esm/utils/node.js
function isNodeEnv() {
  return !isBrowserBundle() && Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]";
}

// node_modules/@sentry/core/build/esm/utils/isBrowser.js
function isBrowser() {
  return typeof window !== "undefined" && (!isNodeEnv() || isElectronNodeRenderer());
}
function isElectronNodeRenderer() {
  const process2 = GLOBAL_OBJ.process;
  return (process2 == null ? void 0 : process2.type) === "renderer";
}

// node_modules/@sentry-internal/feedback/build/npm/esm/index.js
var WINDOW3 = GLOBAL_OBJ;
var DOCUMENT = WINDOW3.document;
var NAVIGATOR = WINDOW3.navigator;
var TRIGGER_LABEL = "Report a Bug";
var CANCEL_BUTTON_LABEL = "Cancel";
var SUBMIT_BUTTON_LABEL = "Send Bug Report";
var CONFIRM_BUTTON_LABEL = "Confirm";
var FORM_TITLE = "Report a Bug";
var EMAIL_PLACEHOLDER = "your.email@example.org";
var EMAIL_LABEL = "Email";
var MESSAGE_PLACEHOLDER = "What's the bug? What did you expect?";
var MESSAGE_LABEL = "Description";
var NAME_PLACEHOLDER = "Your Name";
var NAME_LABEL = "Name";
var SUCCESS_MESSAGE_TEXT = "Thank you for your report!";
var IS_REQUIRED_LABEL = "(required)";
var ADD_SCREENSHOT_LABEL = "Add a screenshot";
var REMOVE_SCREENSHOT_LABEL = "Remove screenshot";
var FEEDBACK_WIDGET_SOURCE = "widget";
var FEEDBACK_API_SOURCE = "api";
var SUCCESS_MESSAGE_TIMEOUT = 5e3;
var sendFeedback = (params, hint = {
  includeReplay: true
}) => {
  if (!params.message) {
    throw new Error("Unable to submit feedback with empty message");
  }
  const client = getClient();
  if (!client) {
    throw new Error("No client setup, cannot send feedback.");
  }
  if (params.tags && Object.keys(params.tags).length) {
    getCurrentScope().setTags(params.tags);
  }
  const eventId = captureFeedback(__spreadValues({
    source: FEEDBACK_API_SOURCE,
    url: getLocationHref()
  }, params), hint);
  return new Promise((resolve, reject) => {
    const timeout = setTimeout(() => reject("Unable to determine if Feedback was correctly sent."), 3e4);
    const cleanup = client.on("afterSendEvent", (event, response) => {
      if (event.event_id !== eventId) {
        return;
      }
      clearTimeout(timeout);
      cleanup();
      if (response && typeof response.statusCode === "number" && response.statusCode >= 200 && response.statusCode < 300) {
        return resolve(eventId);
      }
      if (response && typeof response.statusCode === "number" && response.statusCode === 0) {
        return reject("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker.");
      }
      if (response && typeof response.statusCode === "number" && response.statusCode === 403) {
        return reject("Unable to send Feedback. This could be because this domain is not in your list of allowed domains.");
      }
      return reject("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker");
    });
  });
};
var DEBUG_BUILD2 = typeof __SENTRY_DEBUG__ === "undefined" || __SENTRY_DEBUG__;
function isScreenshotSupported() {
  if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(NAVIGATOR.userAgent)) {
    return false;
  }
  if (/Macintosh/i.test(NAVIGATOR.userAgent) && NAVIGATOR.maxTouchPoints && NAVIGATOR.maxTouchPoints > 1) {
    return false;
  }
  if (!isSecureContext) {
    return false;
  }
  return true;
}
function mergeOptions(defaultOptions, optionOverrides) {
  return __spreadProps(__spreadValues(__spreadValues({}, defaultOptions), optionOverrides), {
    tags: __spreadValues(__spreadValues({}, defaultOptions.tags), optionOverrides.tags),
    onFormOpen: () => {
      var _a3, _b;
      (_a3 = optionOverrides.onFormOpen) == null ? void 0 : _a3.call(optionOverrides);
      (_b = defaultOptions.onFormOpen) == null ? void 0 : _b.call(defaultOptions);
    },
    onFormClose: () => {
      var _a3, _b;
      (_a3 = optionOverrides.onFormClose) == null ? void 0 : _a3.call(optionOverrides);
      (_b = defaultOptions.onFormClose) == null ? void 0 : _b.call(defaultOptions);
    },
    onSubmitSuccess: (data, eventId) => {
      var _a3, _b;
      (_a3 = optionOverrides.onSubmitSuccess) == null ? void 0 : _a3.call(optionOverrides, data, eventId);
      (_b = defaultOptions.onSubmitSuccess) == null ? void 0 : _b.call(defaultOptions, data, eventId);
    },
    onSubmitError: (error2) => {
      var _a3, _b;
      (_a3 = optionOverrides.onSubmitError) == null ? void 0 : _a3.call(optionOverrides, error2);
      (_b = defaultOptions.onSubmitError) == null ? void 0 : _b.call(defaultOptions, error2);
    },
    onFormSubmitted: () => {
      var _a3, _b;
      (_a3 = optionOverrides.onFormSubmitted) == null ? void 0 : _a3.call(optionOverrides);
      (_b = defaultOptions.onFormSubmitted) == null ? void 0 : _b.call(defaultOptions);
    },
    themeDark: __spreadValues(__spreadValues({}, defaultOptions.themeDark), optionOverrides.themeDark),
    themeLight: __spreadValues(__spreadValues({}, defaultOptions.themeLight), optionOverrides.themeLight)
  });
}
function createActorStyles(styleNonce) {
  const style = DOCUMENT.createElement("style");
  style.textContent = `
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`;
  if (styleNonce) {
    style.setAttribute("nonce", styleNonce);
  }
  return style;
}
function setAttributesNS(el, attributes) {
  Object.entries(attributes).forEach(([key, val]) => {
    el.setAttributeNS(null, key, val);
  });
  return el;
}
var SIZE = 20;
var XMLNS$2 = "http://www.w3.org/2000/svg";
function FeedbackIcon() {
  const createElementNS = (tagName) => WINDOW3.document.createElementNS(XMLNS$2, tagName);
  const svg = setAttributesNS(createElementNS("svg"), {
    width: `${SIZE}`,
    height: `${SIZE}`,
    viewBox: `0 0 ${SIZE} ${SIZE}`,
    fill: "var(--actor-color, var(--foreground))"
  });
  const g2 = setAttributesNS(createElementNS("g"), {
    clipPath: "url(#clip0_57_80)"
  });
  const path = setAttributesNS(createElementNS("path"), {
    ["fill-rule"]: "evenodd",
    ["clip-rule"]: "evenodd",
    d: "M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"
  });
  svg.appendChild(g2).appendChild(path);
  const speakerDefs = createElementNS("defs");
  const speakerClipPathDef = setAttributesNS(createElementNS("clipPath"), {
    id: "clip0_57_80"
  });
  const speakerRect = setAttributesNS(createElementNS("rect"), {
    width: `${SIZE}`,
    height: `${SIZE}`,
    fill: "white"
  });
  speakerClipPathDef.appendChild(speakerRect);
  speakerDefs.appendChild(speakerClipPathDef);
  svg.appendChild(speakerDefs).appendChild(speakerClipPathDef).appendChild(speakerRect);
  return svg;
}
function Actor({
  triggerLabel,
  triggerAriaLabel,
  shadow,
  styleNonce
}) {
  const el = DOCUMENT.createElement("button");
  el.type = "button";
  el.className = "widget__actor";
  el.ariaHidden = "false";
  el.ariaLabel = triggerAriaLabel || triggerLabel || TRIGGER_LABEL;
  el.appendChild(FeedbackIcon());
  if (triggerLabel) {
    const label = DOCUMENT.createElement("span");
    label.appendChild(DOCUMENT.createTextNode(triggerLabel));
    el.appendChild(label);
  }
  const style = createActorStyles(styleNonce);
  return {
    el,
    appendToDom() {
      shadow.appendChild(style);
      shadow.appendChild(el);
    },
    removeFromDom() {
      el.remove();
      style.remove();
    },
    show() {
      el.ariaHidden = "false";
    },
    hide() {
      el.ariaHidden = "true";
    }
  };
}
var PURPLE = "rgba(88, 74, 192, 1)";
var DEFAULT_LIGHT = {
  foreground: "#2b2233",
  background: "#ffffff",
  accentForeground: "white",
  accentBackground: PURPLE,
  successColor: "#268d75",
  errorColor: "#df3338",
  border: "1.5px solid rgba(41, 35, 47, 0.13)",
  boxShadow: "0px 4px 24px 0px rgba(43, 34, 51, 0.12)",
  outline: "1px auto var(--accent-background)",
  interactiveFilter: "brightness(95%)"
};
var DEFAULT_DARK = {
  foreground: "#ebe6ef",
  background: "#29232f",
  accentForeground: "white",
  accentBackground: PURPLE,
  successColor: "#2da98c",
  errorColor: "#f55459",
  border: "1.5px solid rgba(235, 230, 239, 0.15)",
  boxShadow: "0px 4px 24px 0px rgba(43, 34, 51, 0.12)",
  outline: "1px auto var(--accent-background)",
  interactiveFilter: "brightness(150%)"
};
function getThemedCssVariables(theme) {
  return `
  --foreground: ${theme.foreground};
  --background: ${theme.background};
  --accent-foreground: ${theme.accentForeground};
  --accent-background: ${theme.accentBackground};
  --success-color: ${theme.successColor};
  --error-color: ${theme.errorColor};
  --border: ${theme.border};
  --box-shadow: ${theme.boxShadow};
  --outline: ${theme.outline};
  --interactive-filter: ${theme.interactiveFilter};
  `;
}
function createMainStyles({
  colorScheme,
  themeDark,
  themeLight,
  styleNonce
}) {
  const style = DOCUMENT.createElement("style");
  style.textContent = `
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${colorScheme !== "system" ? "color-scheme: only light;" : ""}

  ${getThemedCssVariables(colorScheme === "dark" ? __spreadValues(__spreadValues({}, DEFAULT_DARK), themeDark) : __spreadValues(__spreadValues({}, DEFAULT_LIGHT), themeLight))}
}

${colorScheme === "system" ? `
@media (prefers-color-scheme: dark) {
  :host {
    ${getThemedCssVariables(__spreadValues(__spreadValues({}, DEFAULT_DARK), themeDark))}
  }
}` : ""}
}
`;
  if (styleNonce) {
    style.setAttribute("nonce", styleNonce);
  }
  return style;
}
var buildFeedbackIntegration = ({
  lazyLoadIntegration,
  getModalIntegration,
  getScreenshotIntegration
}) => {
  const feedbackIntegration = ({
    // FeedbackGeneralConfiguration
    id = "sentry-feedback",
    autoInject = true,
    showBranding = true,
    isEmailRequired = false,
    isNameRequired = false,
    showEmail = true,
    showName = true,
    enableScreenshot = true,
    useSentryUser = {
      email: "email",
      name: "username"
    },
    tags,
    styleNonce,
    scriptNonce,
    // FeedbackThemeConfiguration
    colorScheme = "system",
    themeLight = {},
    themeDark = {},
    // FeedbackTextConfiguration
    addScreenshotButtonLabel = ADD_SCREENSHOT_LABEL,
    cancelButtonLabel = CANCEL_BUTTON_LABEL,
    confirmButtonLabel = CONFIRM_BUTTON_LABEL,
    emailLabel = EMAIL_LABEL,
    emailPlaceholder = EMAIL_PLACEHOLDER,
    formTitle = FORM_TITLE,
    isRequiredLabel = IS_REQUIRED_LABEL,
    messageLabel = MESSAGE_LABEL,
    messagePlaceholder = MESSAGE_PLACEHOLDER,
    nameLabel = NAME_LABEL,
    namePlaceholder = NAME_PLACEHOLDER,
    removeScreenshotButtonLabel = REMOVE_SCREENSHOT_LABEL,
    submitButtonLabel = SUBMIT_BUTTON_LABEL,
    successMessageText = SUCCESS_MESSAGE_TEXT,
    triggerLabel = TRIGGER_LABEL,
    triggerAriaLabel = "",
    // FeedbackCallbacks
    onFormOpen,
    onFormClose,
    onSubmitSuccess,
    onSubmitError,
    onFormSubmitted
  } = {}) => {
    const _options = {
      id,
      autoInject,
      showBranding,
      isEmailRequired,
      isNameRequired,
      showEmail,
      showName,
      enableScreenshot,
      useSentryUser,
      tags,
      styleNonce,
      scriptNonce,
      colorScheme,
      themeDark,
      themeLight,
      triggerLabel,
      triggerAriaLabel,
      cancelButtonLabel,
      submitButtonLabel,
      confirmButtonLabel,
      formTitle,
      emailLabel,
      emailPlaceholder,
      messageLabel,
      messagePlaceholder,
      nameLabel,
      namePlaceholder,
      successMessageText,
      isRequiredLabel,
      addScreenshotButtonLabel,
      removeScreenshotButtonLabel,
      onFormClose,
      onFormOpen,
      onSubmitError,
      onSubmitSuccess,
      onFormSubmitted
    };
    let _shadow = null;
    let _subscriptions = [];
    const _createShadow = (options) => {
      if (!_shadow) {
        const host = DOCUMENT.createElement("div");
        host.id = String(options.id);
        DOCUMENT.body.appendChild(host);
        _shadow = host.attachShadow({
          mode: "open"
        });
        _shadow.appendChild(createMainStyles(options));
      }
      return _shadow;
    };
    const _loadAndRenderDialog = (options) => __async(null, null, function* () {
      const screenshotRequired = options.enableScreenshot && isScreenshotSupported();
      let modalIntegration;
      let screenshotIntegration;
      try {
        const modalIntegrationFn = getModalIntegration ? getModalIntegration() : yield lazyLoadIntegration("feedbackModalIntegration", scriptNonce);
        modalIntegration = modalIntegrationFn();
        addIntegration(modalIntegration);
      } catch {
        DEBUG_BUILD2 && logger2.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`.");
        throw new Error("[Feedback] Missing feedback modal integration!");
      }
      try {
        const screenshotIntegrationFn = screenshotRequired ? getScreenshotIntegration ? getScreenshotIntegration() : yield lazyLoadIntegration("feedbackScreenshotIntegration", scriptNonce) : void 0;
        if (screenshotIntegrationFn) {
          screenshotIntegration = screenshotIntegrationFn();
          addIntegration(screenshotIntegration);
        }
      } catch {
        DEBUG_BUILD2 && logger2.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.");
      }
      const dialog = modalIntegration.createDialog({
        options: __spreadProps(__spreadValues({}, options), {
          onFormClose: () => {
            var _a4;
            dialog == null ? void 0 : dialog.close();
            (_a4 = options.onFormClose) == null ? void 0 : _a4.call(options);
          },
          onFormSubmitted: () => {
            var _a4;
            dialog == null ? void 0 : dialog.close();
            (_a4 = options.onFormSubmitted) == null ? void 0 : _a4.call(options);
          }
        }),
        screenshotIntegration,
        sendFeedback,
        shadow: _createShadow(options)
      });
      return dialog;
    });
    const _attachTo = (el, optionOverrides = {}) => {
      const mergedOptions = mergeOptions(_options, optionOverrides);
      const targetEl = typeof el === "string" ? DOCUMENT.querySelector(el) : typeof el.addEventListener === "function" ? el : null;
      if (!targetEl) {
        DEBUG_BUILD2 && logger2.error("[Feedback] Unable to attach to target element");
        throw new Error("Unable to attach to target element");
      }
      let dialog = null;
      const handleClick2 = () => __async(null, null, function* () {
        if (!dialog) {
          dialog = yield _loadAndRenderDialog(__spreadProps(__spreadValues({}, mergedOptions), {
            onFormSubmitted: () => {
              var _a4;
              dialog == null ? void 0 : dialog.removeFromDom();
              (_a4 = mergedOptions.onFormSubmitted) == null ? void 0 : _a4.call(mergedOptions);
            }
          }));
        }
        dialog.appendToDom();
        dialog.open();
      });
      targetEl.addEventListener("click", handleClick2);
      const unsubscribe = () => {
        _subscriptions = _subscriptions.filter((sub) => sub !== unsubscribe);
        dialog == null ? void 0 : dialog.removeFromDom();
        dialog = null;
        targetEl.removeEventListener("click", handleClick2);
      };
      _subscriptions.push(unsubscribe);
      return unsubscribe;
    };
    const _createActor = (optionOverrides = {}) => {
      const mergedOptions = mergeOptions(_options, optionOverrides);
      const shadow = _createShadow(mergedOptions);
      const actor = Actor({
        triggerLabel: mergedOptions.triggerLabel,
        triggerAriaLabel: mergedOptions.triggerAriaLabel,
        shadow,
        styleNonce
      });
      _attachTo(actor.el, __spreadProps(__spreadValues({}, mergedOptions), {
        onFormOpen() {
          actor.hide();
        },
        onFormClose() {
          actor.show();
        },
        onFormSubmitted() {
          actor.show();
        }
      }));
      return actor;
    };
    return {
      name: "Feedback",
      setupOnce() {
        if (!isBrowser() || !_options.autoInject) {
          return;
        }
        if (DOCUMENT.readyState === "loading") {
          DOCUMENT.addEventListener("DOMContentLoaded", () => _createActor().appendToDom());
        } else {
          _createActor().appendToDom();
        }
      },
      /**
       * Adds click listener to the element to open a feedback dialog
       *
       * The returned function can be used to remove the click listener
       */
      attachTo: _attachTo,
      /**
       * Creates a new widget which is composed of a Button which triggers a Dialog.
       * Accepts partial options to override any options passed to constructor.
       */
      createWidget(optionOverrides = {}) {
        const actor = _createActor(mergeOptions(_options, optionOverrides));
        actor.appendToDom();
        return actor;
      },
      /**
       * Creates a new Form which you can
       * Accepts partial options to override any options passed to constructor.
       */
      createForm() {
        return __async(this, arguments, function* (optionOverrides = {}) {
          return _loadAndRenderDialog(mergeOptions(_options, optionOverrides));
        });
      },
      /**
       * Removes the Feedback integration (including host, shadow DOM, and all widgets)
       */
      remove() {
        var _a4;
        if (_shadow) {
          (_a4 = _shadow.parentElement) == null ? void 0 : _a4.remove();
          _shadow = null;
        }
        _subscriptions.forEach((sub) => sub());
        _subscriptions = [];
      }
    };
  };
  return feedbackIntegration;
};
var n;
var l$1;
var u$1;
var i$1;
var o$1;
var r$1;
var f$1;
var c$1 = {};
var s$1 = [];
var a$1 = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;
var h$1 = Array.isArray;
function v$1(n3, l2) {
  for (var u2 in l2) n3[u2] = l2[u2];
  return n3;
}
function p$1(n3) {
  var l2 = n3.parentNode;
  l2 && l2.removeChild(n3);
}
function y$1(l2, u2, t2) {
  var i2, o2, r3, f2 = {};
  for (r3 in u2) "key" == r3 ? i2 = u2[r3] : "ref" == r3 ? o2 = u2[r3] : f2[r3] = u2[r3];
  if (arguments.length > 2 && (f2.children = arguments.length > 3 ? n.call(arguments, 2) : t2), "function" == typeof l2 && null != l2.defaultProps) for (r3 in l2.defaultProps) void 0 === f2[r3] && (f2[r3] = l2.defaultProps[r3]);
  return d$1(l2, f2, i2, o2, null);
}
function d$1(n3, t2, i2, o2, r3) {
  var f2 = {
    type: n3,
    props: t2,
    key: i2,
    ref: o2,
    __k: null,
    __: null,
    __b: 0,
    __e: null,
    __d: void 0,
    __c: null,
    constructor: void 0,
    __v: null == r3 ? ++u$1 : r3,
    __i: -1,
    __u: 0
  };
  return null == r3 && null != l$1.vnode && l$1.vnode(f2), f2;
}
function g$1(n3) {
  return n3.children;
}
function b$1(n3, l2) {
  this.props = n3, this.context = l2;
}
function m$1(n3, l2) {
  if (null == l2) return n3.__ ? m$1(n3.__, n3.__i + 1) : null;
  for (var u2; l2 < n3.__k.length; l2++) if (null != (u2 = n3.__k[l2]) && null != u2.__e) return u2.__e;
  return "function" == typeof n3.type ? m$1(n3) : null;
}
function w$1(n3, u2, t2) {
  var i2, o2 = n3.__v, r3 = o2.__e, f2 = n3.__P;
  if (f2) return (i2 = v$1({}, o2)).__v = o2.__v + 1, l$1.vnode && l$1.vnode(i2), M(f2, i2, o2, n3.__n, void 0 !== f2.ownerSVGElement, 32 & o2.__u ? [r3] : null, u2, null == r3 ? m$1(o2) : r3, !!(32 & o2.__u), t2), i2.__.__k[i2.__i] = i2, i2.__d = void 0, i2.__e != r3 && k$1(i2), i2;
}
function k$1(n3) {
  var l2, u2;
  if (null != (n3 = n3.__) && null != n3.__c) {
    for (n3.__e = n3.__c.base = null, l2 = 0; l2 < n3.__k.length; l2++) if (null != (u2 = n3.__k[l2]) && null != u2.__e) {
      n3.__e = n3.__c.base = u2.__e;
      break;
    }
    return k$1(n3);
  }
}
function x$1(n3) {
  (!n3.__d && (n3.__d = true) && i$1.push(n3) && !C$1.__r++ || o$1 !== l$1.debounceRendering) && ((o$1 = l$1.debounceRendering) || r$1)(C$1);
}
function C$1() {
  var n3, u2, t2, o2 = [], r3 = [];
  for (i$1.sort(f$1); n3 = i$1.shift(); ) n3.__d && (t2 = i$1.length, u2 = w$1(n3, o2, r3) || u2, 0 === t2 || i$1.length > t2 ? (j$1(o2, u2, r3), r3.length = o2.length = 0, u2 = void 0, i$1.sort(f$1)) : u2 && l$1.__c && l$1.__c(u2, s$1));
  u2 && j$1(o2, u2, r3), C$1.__r = 0;
}
function P$1(n3, l2, u2, t2, i2, o2, r3, f2, e3, a2, h2) {
  var v2, p2, y2, d2, _2, g2 = t2 && t2.__k || s$1, b2 = l2.length;
  for (u2.__d = e3, S(u2, l2, g2), e3 = u2.__d, v2 = 0; v2 < b2; v2++) null != (y2 = u2.__k[v2]) && "boolean" != typeof y2 && "function" != typeof y2 && (p2 = -1 === y2.__i ? c$1 : g2[y2.__i] || c$1, y2.__i = v2, M(n3, y2, p2, i2, o2, r3, f2, e3, a2, h2), d2 = y2.__e, y2.ref && p2.ref != y2.ref && (p2.ref && N(p2.ref, null, y2), h2.push(y2.ref, y2.__c || d2, y2)), null == _2 && null != d2 && (_2 = d2), 65536 & y2.__u || p2.__k === y2.__k ? e3 = $(y2, e3, n3) : "function" == typeof y2.type && void 0 !== y2.__d ? e3 = y2.__d : d2 && (e3 = d2.nextSibling), y2.__d = void 0, y2.__u &= -196609);
  u2.__d = e3, u2.__e = _2;
}
function S(n3, l2, u2) {
  var t2, i2, o2, r3, f2, e3 = l2.length, c2 = u2.length, s2 = c2, a2 = 0;
  for (n3.__k = [], t2 = 0; t2 < e3; t2++) null != (i2 = n3.__k[t2] = null == (i2 = l2[t2]) || "boolean" == typeof i2 || "function" == typeof i2 ? null : "string" == typeof i2 || "number" == typeof i2 || "bigint" == typeof i2 || i2.constructor == String ? d$1(null, i2, null, null, i2) : h$1(i2) ? d$1(g$1, {
    children: i2
  }, null, null, null) : void 0 === i2.constructor && i2.__b > 0 ? d$1(i2.type, i2.props, i2.key, i2.ref ? i2.ref : null, i2.__v) : i2) ? (i2.__ = n3, i2.__b = n3.__b + 1, f2 = I(i2, u2, r3 = t2 + a2, s2), i2.__i = f2, o2 = null, -1 !== f2 && (s2--, (o2 = u2[f2]) && (o2.__u |= 131072)), null == o2 || null === o2.__v ? (-1 == f2 && a2--, "function" != typeof i2.type && (i2.__u |= 65536)) : f2 !== r3 && (f2 === r3 + 1 ? a2++ : f2 > r3 ? s2 > e3 - r3 ? a2 += f2 - r3 : a2-- : a2 = f2 < r3 && f2 == r3 - 1 ? f2 - r3 : 0, f2 !== t2 + a2 && (i2.__u |= 65536))) : (o2 = u2[t2]) && null == o2.key && o2.__e && (o2.__e == n3.__d && (n3.__d = m$1(o2)), O(o2, o2, false), u2[t2] = null, s2--);
  if (s2) for (t2 = 0; t2 < c2; t2++) null != (o2 = u2[t2]) && 0 == (131072 & o2.__u) && (o2.__e == n3.__d && (n3.__d = m$1(o2)), O(o2, o2));
}
function $(n3, l2, u2) {
  var t2, i2;
  if ("function" == typeof n3.type) {
    for (t2 = n3.__k, i2 = 0; t2 && i2 < t2.length; i2++) t2[i2] && (t2[i2].__ = n3, l2 = $(t2[i2], l2, u2));
    return l2;
  }
  n3.__e != l2 && (u2.insertBefore(n3.__e, l2 || null), l2 = n3.__e);
  do {
    l2 = l2 && l2.nextSibling;
  } while (null != l2 && 8 === l2.nodeType);
  return l2;
}
function I(n3, l2, u2, t2) {
  var i2 = n3.key, o2 = n3.type, r3 = u2 - 1, f2 = u2 + 1, e3 = l2[u2];
  if (null === e3 || e3 && i2 == e3.key && o2 === e3.type) return u2;
  if (t2 > (null != e3 && 0 == (131072 & e3.__u) ? 1 : 0)) for (; r3 >= 0 || f2 < l2.length; ) {
    if (r3 >= 0) {
      if ((e3 = l2[r3]) && 0 == (131072 & e3.__u) && i2 == e3.key && o2 === e3.type) return r3;
      r3--;
    }
    if (f2 < l2.length) {
      if ((e3 = l2[f2]) && 0 == (131072 & e3.__u) && i2 == e3.key && o2 === e3.type) return f2;
      f2++;
    }
  }
  return -1;
}
function T$1(n3, l2, u2) {
  "-" === l2[0] ? n3.setProperty(l2, null == u2 ? "" : u2) : n3[l2] = null == u2 ? "" : "number" != typeof u2 || a$1.test(l2) ? u2 : u2 + "px";
}
function A$1(n3, l2, u2, t2, i2) {
  var o2;
  n: if ("style" === l2) {
    if ("string" == typeof u2) n3.style.cssText = u2;
    else {
      if ("string" == typeof t2 && (n3.style.cssText = t2 = ""), t2) for (l2 in t2) u2 && l2 in u2 || T$1(n3.style, l2, "");
      if (u2) for (l2 in u2) t2 && u2[l2] === t2[l2] || T$1(n3.style, l2, u2[l2]);
    }
  } else if ("o" === l2[0] && "n" === l2[1]) o2 = l2 !== (l2 = l2.replace(/(PointerCapture)$|Capture$/i, "$1")), l2 = l2.toLowerCase() in n3 ? l2.toLowerCase().slice(2) : l2.slice(2), n3.l || (n3.l = {}), n3.l[l2 + o2] = u2, u2 ? t2 ? u2.u = t2.u : (u2.u = Date.now(), n3.addEventListener(l2, o2 ? L : D$1, o2)) : n3.removeEventListener(l2, o2 ? L : D$1, o2);
  else {
    if (i2) l2 = l2.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
    else if ("width" !== l2 && "height" !== l2 && "href" !== l2 && "list" !== l2 && "form" !== l2 && "tabIndex" !== l2 && "download" !== l2 && "rowSpan" !== l2 && "colSpan" !== l2 && "role" !== l2 && l2 in n3) try {
      n3[l2] = null == u2 ? "" : u2;
      break n;
    } catch (n4) {
    }
    "function" == typeof u2 || (null == u2 || false === u2 && "-" !== l2[4] ? n3.removeAttribute(l2) : n3.setAttribute(l2, u2));
  }
}
function D$1(n3) {
  if (this.l) {
    var u2 = this.l[n3.type + false];
    if (n3.t) {
      if (n3.t <= u2.u) return;
    } else n3.t = Date.now();
    return u2(l$1.event ? l$1.event(n3) : n3);
  }
}
function L(n3) {
  if (this.l) return this.l[n3.type + true](l$1.event ? l$1.event(n3) : n3);
}
function M(n3, u2, t2, i2, o2, r3, f2, e3, c2, s2) {
  var a2, p2, y2, d2, _2, m2, w2, k2, x2, C2, S2, $2, H, I2, T2, A2 = u2.type;
  if (void 0 !== u2.constructor) return null;
  128 & t2.__u && (c2 = !!(32 & t2.__u), r3 = [e3 = u2.__e = t2.__e]), (a2 = l$1.__b) && a2(u2);
  n: if ("function" == typeof A2) try {
    if (k2 = u2.props, x2 = (a2 = A2.contextType) && i2[a2.__c], C2 = a2 ? x2 ? x2.props.value : a2.__ : i2, t2.__c ? w2 = (p2 = u2.__c = t2.__c).__ = p2.__E : ("prototype" in A2 && A2.prototype.render ? u2.__c = p2 = new A2(k2, C2) : (u2.__c = p2 = new b$1(k2, C2), p2.constructor = A2, p2.render = q$1), x2 && x2.sub(p2), p2.props = k2, p2.state || (p2.state = {}), p2.context = C2, p2.__n = i2, y2 = p2.__d = true, p2.__h = [], p2._sb = []), null == p2.__s && (p2.__s = p2.state), null != A2.getDerivedStateFromProps && (p2.__s == p2.state && (p2.__s = v$1({}, p2.__s)), v$1(p2.__s, A2.getDerivedStateFromProps(k2, p2.__s))), d2 = p2.props, _2 = p2.state, p2.__v = u2, y2) null == A2.getDerivedStateFromProps && null != p2.componentWillMount && p2.componentWillMount(), null != p2.componentDidMount && p2.__h.push(p2.componentDidMount);
    else {
      if (null == A2.getDerivedStateFromProps && k2 !== d2 && null != p2.componentWillReceiveProps && p2.componentWillReceiveProps(k2, C2), !p2.__e && (null != p2.shouldComponentUpdate && false === p2.shouldComponentUpdate(k2, p2.__s, C2) || u2.__v === t2.__v)) {
        for (u2.__v !== t2.__v && (p2.props = k2, p2.state = p2.__s, p2.__d = false), u2.__e = t2.__e, u2.__k = t2.__k, u2.__k.forEach(function(n4) {
          n4 && (n4.__ = u2);
        }), S2 = 0; S2 < p2._sb.length; S2++) p2.__h.push(p2._sb[S2]);
        p2._sb = [], p2.__h.length && f2.push(p2);
        break n;
      }
      null != p2.componentWillUpdate && p2.componentWillUpdate(k2, p2.__s, C2), null != p2.componentDidUpdate && p2.__h.push(function() {
        p2.componentDidUpdate(d2, _2, m2);
      });
    }
    if (p2.context = C2, p2.props = k2, p2.__P = n3, p2.__e = false, $2 = l$1.__r, H = 0, "prototype" in A2 && A2.prototype.render) {
      for (p2.state = p2.__s, p2.__d = false, $2 && $2(u2), a2 = p2.render(p2.props, p2.state, p2.context), I2 = 0; I2 < p2._sb.length; I2++) p2.__h.push(p2._sb[I2]);
      p2._sb = [];
    } else do {
      p2.__d = false, $2 && $2(u2), a2 = p2.render(p2.props, p2.state, p2.context), p2.state = p2.__s;
    } while (p2.__d && ++H < 25);
    p2.state = p2.__s, null != p2.getChildContext && (i2 = v$1(v$1({}, i2), p2.getChildContext())), y2 || null == p2.getSnapshotBeforeUpdate || (m2 = p2.getSnapshotBeforeUpdate(d2, _2)), P$1(n3, h$1(T2 = null != a2 && a2.type === g$1 && null == a2.key ? a2.props.children : a2) ? T2 : [T2], u2, t2, i2, o2, r3, f2, e3, c2, s2), p2.base = u2.__e, u2.__u &= -161, p2.__h.length && f2.push(p2), w2 && (p2.__E = p2.__ = null);
  } catch (n4) {
    u2.__v = null, c2 || null != r3 ? (u2.__e = e3, u2.__u |= c2 ? 160 : 32, r3[r3.indexOf(e3)] = null) : (u2.__e = t2.__e, u2.__k = t2.__k), l$1.__e(n4, u2, t2);
  }
  else null == r3 && u2.__v === t2.__v ? (u2.__k = t2.__k, u2.__e = t2.__e) : u2.__e = z$1(t2.__e, u2, t2, i2, o2, r3, f2, c2, s2);
  (a2 = l$1.diffed) && a2(u2);
}
function j$1(n3, u2, t2) {
  for (var i2 = 0; i2 < t2.length; i2++) N(t2[i2], t2[++i2], t2[++i2]);
  l$1.__c && l$1.__c(u2, n3), n3.some(function(u3) {
    try {
      n3 = u3.__h, u3.__h = [], n3.some(function(n4) {
        n4.call(u3);
      });
    } catch (n4) {
      l$1.__e(n4, u3.__v);
    }
  });
}
function z$1(l2, u2, t2, i2, o2, r3, f2, e3, s2) {
  var a2, v2, y2, d2, _2, g2, b2, w2 = t2.props, k2 = u2.props, x2 = u2.type;
  if ("svg" === x2 && (o2 = true), null != r3) {
    for (a2 = 0; a2 < r3.length; a2++) if ((_2 = r3[a2]) && "setAttribute" in _2 == !!x2 && (x2 ? _2.localName === x2 : 3 === _2.nodeType)) {
      l2 = _2, r3[a2] = null;
      break;
    }
  }
  if (null == l2) {
    if (null === x2) return document.createTextNode(k2);
    l2 = o2 ? document.createElementNS("http://www.w3.org/2000/svg", x2) : document.createElement(x2, k2.is && k2), r3 = null, e3 = false;
  }
  if (null === x2) w2 === k2 || e3 && l2.data === k2 || (l2.data = k2);
  else {
    if (r3 = r3 && n.call(l2.childNodes), w2 = t2.props || c$1, !e3 && null != r3) for (w2 = {}, a2 = 0; a2 < l2.attributes.length; a2++) w2[(_2 = l2.attributes[a2]).name] = _2.value;
    for (a2 in w2) _2 = w2[a2], "children" == a2 || ("dangerouslySetInnerHTML" == a2 ? y2 = _2 : "key" === a2 || a2 in k2 || A$1(l2, a2, null, _2, o2));
    for (a2 in k2) _2 = k2[a2], "children" == a2 ? d2 = _2 : "dangerouslySetInnerHTML" == a2 ? v2 = _2 : "value" == a2 ? g2 = _2 : "checked" == a2 ? b2 = _2 : "key" === a2 || e3 && "function" != typeof _2 || w2[a2] === _2 || A$1(l2, a2, _2, w2[a2], o2);
    if (v2) e3 || y2 && (v2.__html === y2.__html || v2.__html === l2.innerHTML) || (l2.innerHTML = v2.__html), u2.__k = [];
    else if (y2 && (l2.innerHTML = ""), P$1(l2, h$1(d2) ? d2 : [d2], u2, t2, i2, o2 && "foreignObject" !== x2, r3, f2, r3 ? r3[0] : t2.__k && m$1(t2, 0), e3, s2), null != r3) for (a2 = r3.length; a2--; ) null != r3[a2] && p$1(r3[a2]);
    e3 || (a2 = "value", void 0 !== g2 && (g2 !== l2[a2] || "progress" === x2 && !g2 || "option" === x2 && g2 !== w2[a2]) && A$1(l2, a2, g2, w2[a2], false), a2 = "checked", void 0 !== b2 && b2 !== l2[a2] && A$1(l2, a2, b2, w2[a2], false));
  }
  return l2;
}
function N(n3, u2, t2) {
  try {
    "function" == typeof n3 ? n3(u2) : n3.current = u2;
  } catch (n4) {
    l$1.__e(n4, t2);
  }
}
function O(n3, u2, t2) {
  var i2, o2;
  if (l$1.unmount && l$1.unmount(n3), (i2 = n3.ref) && (i2.current && i2.current !== n3.__e || N(i2, null, u2)), null != (i2 = n3.__c)) {
    if (i2.componentWillUnmount) try {
      i2.componentWillUnmount();
    } catch (n4) {
      l$1.__e(n4, u2);
    }
    i2.base = i2.__P = null, n3.__c = void 0;
  }
  if (i2 = n3.__k) for (o2 = 0; o2 < i2.length; o2++) i2[o2] && O(i2[o2], u2, t2 || "function" != typeof n3.type);
  t2 || null == n3.__e || p$1(n3.__e), n3.__ = n3.__e = n3.__d = void 0;
}
function q$1(n3, l2, u2) {
  return this.constructor(n3, u2);
}
function B$1(u2, t2, i2) {
  var o2, r3, f2, e3;
  l$1.__ && l$1.__(u2, t2), r3 = (o2 = false) ? null : t2.__k, f2 = [], e3 = [], M(t2, u2 = t2.__k = y$1(g$1, null, [u2]), r3 || c$1, c$1, void 0 !== t2.ownerSVGElement, r3 ? null : t2.firstChild ? n.call(t2.childNodes) : null, f2, r3 ? r3.__e : t2.firstChild, o2, e3), u2.__d = void 0, j$1(f2, u2, e3);
}
n = s$1.slice, l$1 = {
  __e: function(n3, l2, u2, t2) {
    for (var i2, o2, r3; l2 = l2.__; ) if ((i2 = l2.__c) && !i2.__) try {
      if ((o2 = i2.constructor) && null != o2.getDerivedStateFromError && (i2.setState(o2.getDerivedStateFromError(n3)), r3 = i2.__d), null != i2.componentDidCatch && (i2.componentDidCatch(n3, t2 || {}), r3 = i2.__d), r3) return i2.__E = i2;
    } catch (l3) {
      n3 = l3;
    }
    throw n3;
  }
}, u$1 = 0, b$1.prototype.setState = function(n3, l2) {
  var u2;
  u2 = null != this.__s && this.__s !== this.state ? this.__s : this.__s = v$1({}, this.state), "function" == typeof n3 && (n3 = n3(v$1({}, u2), this.props)), n3 && v$1(u2, n3), null != n3 && this.__v && (l2 && this._sb.push(l2), x$1(this));
}, b$1.prototype.forceUpdate = function(n3) {
  this.__v && (this.__e = true, n3 && this.__h.push(n3), x$1(this));
}, b$1.prototype.render = g$1, i$1 = [], r$1 = "function" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, f$1 = function(n3, l2) {
  return n3.__v.__b - l2.__v.__b;
}, C$1.__r = 0;
var t;
var r;
var u;
var i;
var o = 0;
var f = [];
var c = [];
var e = l$1;
var a = e.__b;
var v = e.__r;
var l = e.diffed;
var m = e.__c;
var s = e.unmount;
var d = e.__;
function h(n3, t2) {
  e.__h && e.__h(r, n3, o || t2), o = 0;
  var u2 = r.__H || (r.__H = {
    __: [],
    __h: []
  });
  return n3 >= u2.__.length && u2.__.push({
    __V: c
  }), u2.__[n3];
}
function p(n3) {
  return o = 1, y(D, n3);
}
function y(n3, u2, i2) {
  var o2 = h(t++, 2);
  if (o2.t = n3, !o2.__c && (o2.__ = [i2 ? i2(u2) : D(void 0, u2), function(n4) {
    var t2 = o2.__N ? o2.__N[0] : o2.__[0], r3 = o2.t(t2, n4);
    t2 !== r3 && (o2.__N = [r3, o2.__[1]], o2.__c.setState({}));
  }], o2.__c = r, !r.u)) {
    var f2 = function(n4, t2, r3) {
      if (!o2.__c.__H) return true;
      var u3 = o2.__c.__H.__.filter(function(n5) {
        return !!n5.__c;
      });
      if (u3.every(function(n5) {
        return !n5.__N;
      })) return !c2 || c2.call(this, n4, t2, r3);
      var i3 = false;
      return u3.forEach(function(n5) {
        if (n5.__N) {
          var t3 = n5.__[0];
          n5.__ = n5.__N, n5.__N = void 0, t3 !== n5.__[0] && (i3 = true);
        }
      }), !(!i3 && o2.__c.props === n4) && (!c2 || c2.call(this, n4, t2, r3));
    };
    r.u = true;
    var c2 = r.shouldComponentUpdate, e3 = r.componentWillUpdate;
    r.componentWillUpdate = function(n4, t2, r3) {
      if (this.__e) {
        var u3 = c2;
        c2 = void 0, f2(n4, t2, r3), c2 = u3;
      }
      e3 && e3.call(this, n4, t2, r3);
    }, r.shouldComponentUpdate = f2;
  }
  return o2.__N || o2.__;
}
function _(n3, u2) {
  var i2 = h(t++, 3);
  !e.__s && C(i2.__H, u2) && (i2.__ = n3, i2.i = u2, r.__H.__h.push(i2));
}
function A(n3, u2) {
  var i2 = h(t++, 4);
  !e.__s && C(i2.__H, u2) && (i2.__ = n3, i2.i = u2, r.__h.push(i2));
}
function F(n3) {
  return o = 5, q(function() {
    return {
      current: n3
    };
  }, []);
}
function T(n3, t2, r3) {
  o = 6, A(function() {
    return "function" == typeof n3 ? (n3(t2()), function() {
      return n3(null);
    }) : n3 ? (n3.current = t2(), function() {
      return n3.current = null;
    }) : void 0;
  }, null == r3 ? r3 : r3.concat(n3));
}
function q(n3, r3) {
  var u2 = h(t++, 7);
  return C(u2.__H, r3) ? (u2.__V = n3(), u2.i = r3, u2.__h = n3, u2.__V) : u2.__;
}
function x(n3, t2) {
  return o = 8, q(function() {
    return n3;
  }, t2);
}
function P(n3) {
  var u2 = r.context[n3.__c], i2 = h(t++, 9);
  return i2.c = n3, u2 ? (null == i2.__ && (i2.__ = true, u2.sub(r)), u2.props.value) : n3.__;
}
function V(n3, t2) {
  e.useDebugValue && e.useDebugValue(t2 ? t2(n3) : n3);
}
function b(n3) {
  var u2 = h(t++, 10), i2 = p();
  return u2.__ = n3, r.componentDidCatch || (r.componentDidCatch = function(n4, t2) {
    u2.__ && u2.__(n4, t2), i2[1](n4);
  }), [i2[0], function() {
    i2[1](void 0);
  }];
}
function g() {
  var n3 = h(t++, 11);
  if (!n3.__) {
    for (var u2 = r.__v; null !== u2 && !u2.__m && null !== u2.__; ) u2 = u2.__;
    var i2 = u2.__m || (u2.__m = [0, 0]);
    n3.__ = "P" + i2[0] + "-" + i2[1]++;
  }
  return n3.__;
}
function j() {
  for (var n3; n3 = f.shift(); ) if (n3.__P && n3.__H) try {
    n3.__H.__h.forEach(z), n3.__H.__h.forEach(B), n3.__H.__h = [];
  } catch (t2) {
    n3.__H.__h = [], e.__e(t2, n3.__v);
  }
}
e.__b = function(n3) {
  r = null, a && a(n3);
}, e.__ = function(n3, t2) {
  t2.__k && t2.__k.__m && (n3.__m = t2.__k.__m), d && d(n3, t2);
}, e.__r = function(n3) {
  v && v(n3), t = 0;
  var i2 = (r = n3.__c).__H;
  i2 && (u === r ? (i2.__h = [], r.__h = [], i2.__.forEach(function(n4) {
    n4.__N && (n4.__ = n4.__N), n4.__V = c, n4.__N = n4.i = void 0;
  })) : (i2.__h.forEach(z), i2.__h.forEach(B), i2.__h = [], t = 0)), u = r;
}, e.diffed = function(n3) {
  l && l(n3);
  var t2 = n3.__c;
  t2 && t2.__H && (t2.__H.__h.length && (1 !== f.push(t2) && i === e.requestAnimationFrame || ((i = e.requestAnimationFrame) || w)(j)), t2.__H.__.forEach(function(n4) {
    n4.i && (n4.__H = n4.i), n4.__V !== c && (n4.__ = n4.__V), n4.i = void 0, n4.__V = c;
  })), u = r = null;
}, e.__c = function(n3, t2) {
  t2.some(function(n4) {
    try {
      n4.__h.forEach(z), n4.__h = n4.__h.filter(function(n5) {
        return !n5.__ || B(n5);
      });
    } catch (r3) {
      t2.some(function(n5) {
        n5.__h && (n5.__h = []);
      }), t2 = [], e.__e(r3, n4.__v);
    }
  }), m && m(n3, t2);
}, e.unmount = function(n3) {
  s && s(n3);
  var t2, r3 = n3.__c;
  r3 && r3.__H && (r3.__H.__.forEach(function(n4) {
    try {
      z(n4);
    } catch (n5) {
      t2 = n5;
    }
  }), r3.__H = void 0, t2 && e.__e(t2, r3.__v));
};
var k = "function" == typeof requestAnimationFrame;
function w(n3) {
  var t2, r3 = function() {
    clearTimeout(u2), k && cancelAnimationFrame(t2), setTimeout(n3);
  }, u2 = setTimeout(r3, 100);
  k && (t2 = requestAnimationFrame(r3));
}
function z(n3) {
  var t2 = r, u2 = n3.__c;
  "function" == typeof u2 && (n3.__c = void 0, u2()), r = t2;
}
function B(n3) {
  var t2 = r;
  n3.__c = n3.__(), r = t2;
}
function C(n3, t2) {
  return !n3 || n3.length !== t2.length || t2.some(function(t3, r3) {
    return t3 !== n3[r3];
  });
}
function D(n3, t2) {
  return "function" == typeof t2 ? t2(n3) : t2;
}
var hooks = /* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  useCallback: x,
  useContext: P,
  useDebugValue: V,
  useEffect: _,
  useErrorBoundary: b,
  useId: g,
  useImperativeHandle: T,
  useLayoutEffect: A,
  useMemo: q,
  useReducer: y,
  useRef: F,
  useState: p
}, Symbol.toStringTag, {
  value: "Module"
});
var XMLNS$1 = "http://www.w3.org/2000/svg";
function SentryLogo() {
  const createElementNS = (tagName) => DOCUMENT.createElementNS(XMLNS$1, tagName);
  const svg = setAttributesNS(createElementNS("svg"), {
    width: "32",
    height: "30",
    viewBox: "0 0 72 66",
    fill: "inherit"
  });
  const path = setAttributesNS(createElementNS("path"), {
    transform: "translate(11, 11)",
    d: "M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"
  });
  svg.appendChild(path);
  return svg;
}
function DialogHeader({
  options
}) {
  const logoHtml = q(() => ({
    __html: SentryLogo().outerHTML
  }), []);
  return y$1("h2", {
    class: "dialog__header"
  }, y$1("span", {
    class: "dialog__title"
  }, options.formTitle), options.showBranding ? y$1("a", {
    class: "brand-link",
    target: "_blank",
    href: "https://sentry.io/welcome/",
    title: "Powered by Sentry",
    rel: "noopener noreferrer",
    dangerouslySetInnerHTML: logoHtml
  }) : null);
}
function getMissingFields(feedback, props) {
  const emptyFields = [];
  if (props.isNameRequired && !feedback.name) {
    emptyFields.push(props.nameLabel);
  }
  if (props.isEmailRequired && !feedback.email) {
    emptyFields.push(props.emailLabel);
  }
  if (!feedback.message) {
    emptyFields.push(props.messageLabel);
  }
  return emptyFields;
}
function retrieveStringValue(formData, key) {
  const value = formData.get(key);
  if (typeof value === "string") {
    return value.trim();
  }
  return "";
}
function Form({
  options,
  defaultEmail,
  defaultName,
  onFormClose,
  onSubmit,
  onSubmitSuccess,
  onSubmitError,
  showEmail,
  showName,
  screenshotInput
}) {
  const {
    tags,
    addScreenshotButtonLabel,
    removeScreenshotButtonLabel,
    cancelButtonLabel,
    emailLabel,
    emailPlaceholder,
    isEmailRequired,
    isNameRequired,
    messageLabel,
    messagePlaceholder,
    nameLabel,
    namePlaceholder,
    submitButtonLabel,
    isRequiredLabel
  } = options;
  const [isSubmitting, setIsSubmitting] = p(false);
  const [error2, setError] = p(null);
  const [showScreenshotInput, setShowScreenshotInput] = p(false);
  const ScreenshotInputComponent = screenshotInput == null ? void 0 : screenshotInput.input;
  const [screenshotError, setScreenshotError] = p(null);
  const onScreenshotError = x((error3) => {
    setScreenshotError(error3);
    setShowScreenshotInput(false);
  }, []);
  const hasAllRequiredFields = x((data) => {
    const missingFields = getMissingFields(data, {
      emailLabel,
      isEmailRequired,
      isNameRequired,
      messageLabel,
      nameLabel
    });
    if (missingFields.length > 0) {
      setError(`Please enter in the following required fields: ${missingFields.join(", ")}`);
    } else {
      setError(null);
    }
    return missingFields.length === 0;
  }, [emailLabel, isEmailRequired, isNameRequired, messageLabel, nameLabel]);
  const handleSubmit = x((e3) => __async(null, null, function* () {
    setIsSubmitting(true);
    try {
      e3.preventDefault();
      if (!(e3.target instanceof HTMLFormElement)) {
        return;
      }
      const formData = new FormData(e3.target);
      const attachment = yield screenshotInput && showScreenshotInput ? screenshotInput.value() : void 0;
      const data = {
        name: retrieveStringValue(formData, "name"),
        email: retrieveStringValue(formData, "email"),
        message: retrieveStringValue(formData, "message"),
        attachments: attachment ? [attachment] : void 0
      };
      if (!hasAllRequiredFields(data)) {
        return;
      }
      try {
        const eventId = yield onSubmit({
          name: data.name,
          email: data.email,
          message: data.message,
          source: FEEDBACK_WIDGET_SOURCE,
          tags
        }, {
          attachments: data.attachments
        });
        onSubmitSuccess(data, eventId);
      } catch (error3) {
        DEBUG_BUILD2 && logger2.error(error3);
        setError(error3);
        onSubmitError(error3);
      }
    } finally {
      setIsSubmitting(false);
    }
  }), [screenshotInput && showScreenshotInput, onSubmitSuccess, onSubmitError]);
  return y$1("form", {
    class: "form",
    onSubmit: handleSubmit
  }, ScreenshotInputComponent && showScreenshotInput ? y$1(ScreenshotInputComponent, {
    onError: onScreenshotError
  }) : null, y$1("fieldset", {
    class: "form__right",
    "data-sentry-feedback": true,
    disabled: isSubmitting
  }, y$1("div", {
    class: "form__top"
  }, error2 ? y$1("div", {
    class: "form__error-container"
  }, error2) : null, showName ? y$1("label", {
    for: "name",
    class: "form__label"
  }, y$1(LabelText, {
    label: nameLabel,
    isRequiredLabel,
    isRequired: isNameRequired
  }), y$1("input", {
    class: "form__input",
    defaultValue: defaultName,
    id: "name",
    name: "name",
    placeholder: namePlaceholder,
    required: isNameRequired,
    type: "text"
  })) : y$1("input", {
    "aria-hidden": true,
    value: defaultName,
    name: "name",
    type: "hidden"
  }), showEmail ? y$1("label", {
    for: "email",
    class: "form__label"
  }, y$1(LabelText, {
    label: emailLabel,
    isRequiredLabel,
    isRequired: isEmailRequired
  }), y$1("input", {
    class: "form__input",
    defaultValue: defaultEmail,
    id: "email",
    name: "email",
    placeholder: emailPlaceholder,
    required: isEmailRequired,
    type: "email"
  })) : y$1("input", {
    "aria-hidden": true,
    value: defaultEmail,
    name: "email",
    type: "hidden"
  }), y$1("label", {
    for: "message",
    class: "form__label"
  }, y$1(LabelText, {
    label: messageLabel,
    isRequiredLabel,
    isRequired: true
  }), y$1("textarea", {
    autoFocus: true,
    class: "form__input form__input--textarea",
    id: "message",
    name: "message",
    placeholder: messagePlaceholder,
    required: true,
    rows: 5
  })), ScreenshotInputComponent ? y$1("label", {
    for: "screenshot",
    class: "form__label"
  }, y$1("button", {
    class: "btn btn--default",
    disabled: isSubmitting,
    type: "button",
    onClick: () => {
      setScreenshotError(null);
      setShowScreenshotInput((prev) => !prev);
    }
  }, showScreenshotInput ? removeScreenshotButtonLabel : addScreenshotButtonLabel), screenshotError ? y$1("div", {
    class: "form__error-container"
  }, screenshotError.message) : null) : null), y$1("div", {
    class: "btn-group"
  }, y$1("button", {
    class: "btn btn--primary",
    disabled: isSubmitting,
    type: "submit"
  }, submitButtonLabel), y$1("button", {
    class: "btn btn--default",
    disabled: isSubmitting,
    type: "button",
    onClick: onFormClose
  }, cancelButtonLabel))));
}
function LabelText({
  label,
  isRequired,
  isRequiredLabel
}) {
  return y$1("span", {
    class: "form__label__text"
  }, label, isRequired && y$1("span", {
    class: "form__label__text--required"
  }, isRequiredLabel));
}
var WIDTH = 16;
var HEIGHT = 17;
var XMLNS = "http://www.w3.org/2000/svg";
function SuccessIcon() {
  const createElementNS = (tagName) => WINDOW3.document.createElementNS(XMLNS, tagName);
  const svg = setAttributesNS(createElementNS("svg"), {
    width: `${WIDTH}`,
    height: `${HEIGHT}`,
    viewBox: `0 0 ${WIDTH} ${HEIGHT}`,
    fill: "inherit"
  });
  const g2 = setAttributesNS(createElementNS("g"), {
    clipPath: "url(#clip0_57_156)"
  });
  const path2 = setAttributesNS(createElementNS("path"), {
    ["fill-rule"]: "evenodd",
    ["clip-rule"]: "evenodd",
    d: "M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"
  });
  const path = setAttributesNS(createElementNS("path"), {
    d: "M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"
  });
  svg.appendChild(g2).append(path, path2);
  const speakerDefs = createElementNS("defs");
  const speakerClipPathDef = setAttributesNS(createElementNS("clipPath"), {
    id: "clip0_57_156"
  });
  const speakerRect = setAttributesNS(createElementNS("rect"), {
    width: `${WIDTH}`,
    height: `${WIDTH}`,
    fill: "white",
    transform: "translate(0 0.5)"
  });
  speakerClipPathDef.appendChild(speakerRect);
  speakerDefs.appendChild(speakerClipPathDef);
  svg.appendChild(speakerDefs).appendChild(speakerClipPathDef).appendChild(speakerRect);
  return svg;
}
function Dialog(_a3) {
  var _b = _a3, {
    open,
    onFormSubmitted
  } = _b, props = __objRest(_b, [
    "open",
    "onFormSubmitted"
  ]);
  const options = props.options;
  const successIconHtml = q(() => ({
    __html: SuccessIcon().outerHTML
  }), []);
  const [timeoutId, setTimeoutId] = p(null);
  const handleOnSuccessClick = x(() => {
    if (timeoutId) {
      clearTimeout(timeoutId);
      setTimeoutId(null);
    }
    onFormSubmitted();
  }, [timeoutId]);
  const onSubmitSuccess = x((data, eventId) => {
    props.onSubmitSuccess(data, eventId);
    setTimeoutId(setTimeout(() => {
      onFormSubmitted();
      setTimeoutId(null);
    }, SUCCESS_MESSAGE_TIMEOUT));
  }, [onFormSubmitted]);
  return y$1(g$1, null, timeoutId ? y$1("div", {
    class: "success__position",
    onClick: handleOnSuccessClick
  }, y$1("div", {
    class: "success__content"
  }, options.successMessageText, y$1("span", {
    class: "success__icon",
    dangerouslySetInnerHTML: successIconHtml
  }))) : y$1("dialog", {
    class: "dialog",
    onClick: options.onFormClose,
    open
  }, y$1("div", {
    class: "dialog__position"
  }, y$1("div", {
    class: "dialog__content",
    onClick: (e3) => {
      e3.stopPropagation();
    }
  }, y$1(DialogHeader, {
    options
  }), y$1(Form, __spreadProps(__spreadValues({}, props), {
    onSubmitSuccess
  }))))));
}
var DIALOG = `
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`;
var DIALOG_HEADER = `
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`;
var FORM = `
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`;
var BUTTON = `
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`;
var SUCCESS = `
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;
function createDialogStyles(styleNonce) {
  const style = DOCUMENT.createElement("style");
  style.textContent = `
:host {
  --dialog-inset: var(--inset);
}

${DIALOG}
${DIALOG_HEADER}
${FORM}
${BUTTON}
${SUCCESS}
`;
  if (styleNonce) {
    style.setAttribute("nonce", styleNonce);
  }
  return style;
}
function getUser() {
  const currentUser = getCurrentScope().getUser();
  const isolationUser = getIsolationScope().getUser();
  const globalUser = getGlobalScope().getUser();
  if (currentUser && Object.keys(currentUser).length) {
    return currentUser;
  }
  if (isolationUser && Object.keys(isolationUser).length) {
    return isolationUser;
  }
  return globalUser;
}
var feedbackModalIntegration = () => {
  return {
    name: "FeedbackModal",
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    setupOnce() {
    },
    createDialog: ({
      options,
      screenshotIntegration,
      sendFeedback: sendFeedback2,
      shadow
    }) => {
      const shadowRoot = shadow;
      const userKey = options.useSentryUser;
      const user = getUser();
      const el = DOCUMENT.createElement("div");
      const style = createDialogStyles(options.styleNonce);
      let originalOverflow = "";
      const dialog = {
        get el() {
          return el;
        },
        appendToDom() {
          if (!shadowRoot.contains(style) && !shadowRoot.contains(el)) {
            shadowRoot.appendChild(style);
            shadowRoot.appendChild(el);
          }
        },
        removeFromDom() {
          el.remove();
          style.remove();
          DOCUMENT.body.style.overflow = originalOverflow;
        },
        open() {
          var _a3, _b;
          renderContent(true);
          (_a3 = options.onFormOpen) == null ? void 0 : _a3.call(options);
          (_b = getClient()) == null ? void 0 : _b.emit("openFeedbackWidget");
          originalOverflow = DOCUMENT.body.style.overflow;
          DOCUMENT.body.style.overflow = "hidden";
        },
        close() {
          renderContent(false);
          DOCUMENT.body.style.overflow = originalOverflow;
        }
      };
      const screenshotInput = screenshotIntegration == null ? void 0 : screenshotIntegration.createInput({
        h: y$1,
        hooks,
        dialog,
        options
      });
      const renderContent = (open) => {
        B$1(y$1(Dialog, {
          options,
          screenshotInput,
          showName: options.showName || options.isNameRequired,
          showEmail: options.showEmail || options.isEmailRequired,
          defaultName: userKey && user && user[userKey.name] || "",
          defaultEmail: userKey && user && user[userKey.email] || "",
          onFormClose: () => {
            var _a3;
            renderContent(false);
            (_a3 = options.onFormClose) == null ? void 0 : _a3.call(options);
          },
          onSubmit: sendFeedback2,
          onSubmitSuccess: (data, eventId) => {
            var _a3;
            renderContent(false);
            (_a3 = options.onSubmitSuccess) == null ? void 0 : _a3.call(options, data, eventId);
          },
          onSubmitError: (error2) => {
            var _a3;
            (_a3 = options.onSubmitError) == null ? void 0 : _a3.call(options, error2);
          },
          onFormSubmitted: () => {
            var _a3;
            (_a3 = options.onFormSubmitted) == null ? void 0 : _a3.call(options);
          },
          open
        }), el);
      };
      return dialog;
    }
  };
};
function IconCloseFactory({
  h: h2
  // eslint-disable-line @typescript-eslint/no-unused-vars
}) {
  return function IconClose() {
    return h2("svg", {
      "data-test-id": "icon-close",
      viewBox: "0 0 16 16",
      fill: "#2B2233",
      height: "25px",
      width: "25px"
    }, h2("circle", {
      r: "7",
      cx: "8",
      cy: "8",
      fill: "white"
    }), h2("path", {
      strokeWidth: "1.5",
      d: "M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"
    }), h2("path", {
      strokeWidth: "1.5",
      d: "M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"
    }), h2("path", {
      strokeWidth: "1.5",
      d: "M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"
    }));
  };
}
function createScreenshotInputStyles(styleNonce) {
  const style = DOCUMENT.createElement("style");
  const surface200 = "#1A141F";
  const gray100 = "#302735";
  style.textContent = `
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${surface200};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${surface200} 8px,
      ${surface200} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${gray100} 15px,
      ${gray100} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`;
  if (styleNonce) {
    style.setAttribute("nonce", styleNonce);
  }
  return style;
}
function ToolbarFactory({
  h: h2
  // eslint-disable-line @typescript-eslint/no-unused-vars
}) {
  return function Toolbar({
    action,
    setAction
  }) {
    return h2("div", {
      class: "editor__tool-container"
    }, h2("div", {
      class: "editor__tool-bar"
    }, h2("button", {
      type: "button",
      class: `editor__tool ${action === "highlight" ? "editor__tool--active" : ""}`,
      onClick: () => {
        setAction(action === "highlight" ? "" : "highlight");
      }
    }, "Highlight"), h2("button", {
      type: "button",
      class: `editor__tool ${action === "hide" ? "editor__tool--active" : ""}`,
      onClick: () => {
        setAction(action === "hide" ? "" : "hide");
      }
    }, "Hide")));
  };
}
function useTakeScreenshotFactory({
  hooks: hooks2
}) {
  function useDpi() {
    var _a3;
    const [dpi, setDpi] = hooks2.useState((_a3 = WINDOW3.devicePixelRatio) != null ? _a3 : 1);
    hooks2.useEffect(() => {
      const onChange = () => {
        setDpi(WINDOW3.devicePixelRatio);
      };
      const media = matchMedia(`(resolution: ${WINDOW3.devicePixelRatio}dppx)`);
      media.addEventListener("change", onChange);
      return () => {
        media.removeEventListener("change", onChange);
      };
    }, []);
    return dpi;
  }
  return function useTakeScreenshot({
    onBeforeScreenshot,
    onScreenshot,
    onAfterScreenshot,
    onError
  }) {
    const dpi = useDpi();
    hooks2.useEffect(() => {
      const takeScreenshot = () => __async(null, null, function* () {
        onBeforeScreenshot();
        const stream = yield NAVIGATOR.mediaDevices.getDisplayMedia({
          video: {
            width: WINDOW3.innerWidth * dpi,
            height: WINDOW3.innerHeight * dpi
          },
          audio: false,
          // @ts-expect-error experimental flags: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia#prefercurrenttab
          monitorTypeSurfaces: "exclude",
          preferCurrentTab: true,
          selfBrowserSurface: "include",
          surfaceSwitching: "exclude"
        });
        const video = DOCUMENT.createElement("video");
        yield new Promise((resolve, reject) => {
          video.srcObject = stream;
          video.onloadedmetadata = () => {
            onScreenshot(video, dpi);
            stream.getTracks().forEach((track) => track.stop());
            resolve();
          };
          video.play().catch(reject);
        });
        onAfterScreenshot();
      });
      takeScreenshot().catch(onError);
    }, []);
  };
}
function drawRect(command, ctx, color) {
  switch (command.type) {
    case "highlight": {
      ctx.shadowColor = "rgba(0, 0, 0, 0.7)";
      ctx.shadowBlur = 50;
      ctx.fillStyle = color;
      ctx.fillRect(command.x - 1, command.y - 1, command.w + 2, command.h + 2);
      ctx.clearRect(command.x, command.y, command.w, command.h);
      break;
    }
    case "hide":
      ctx.fillStyle = "rgb(0, 0, 0)";
      ctx.fillRect(command.x, command.y, command.w, command.h);
      break;
  }
}
function with2dContext(canvas, options, callback) {
  if (!canvas) {
    return;
  }
  const ctx = canvas.getContext("2d", options);
  if (!ctx) {
    return;
  }
  callback(canvas, ctx);
}
function paintImage(maybeDest, source) {
  with2dContext(maybeDest, {
    alpha: true
  }, (destCanvas, destCtx) => {
    destCtx.drawImage(source, 0, 0, source.width, source.height, 0, 0, destCanvas.width, destCanvas.height);
  });
}
function paintForeground(maybeCanvas, strokeColor, drawCommands) {
  with2dContext(maybeCanvas, {
    alpha: true
  }, (canvas, ctx) => {
    if (drawCommands.length) {
      ctx.fillStyle = "rgba(0, 0, 0, 0.25)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
    drawCommands.forEach((command) => {
      drawRect(command, ctx, strokeColor);
    });
  });
}
function ScreenshotEditorFactory({
  h: h2,
  hooks: hooks2,
  outputBuffer,
  dialog,
  options
}) {
  const useTakeScreenshot = useTakeScreenshotFactory({
    hooks: hooks2
  });
  const Toolbar = ToolbarFactory({
    h: h2
  });
  const IconClose = IconCloseFactory({
    h: h2
  });
  const editorStyleInnerText = {
    __html: createScreenshotInputStyles(options.styleNonce).innerText
  };
  const dialogStyle = dialog.el.style;
  const ScreenshotEditor = ({
    screenshot
  }) => {
    const [action, setAction] = hooks2.useState("highlight");
    const [drawCommands, setDrawCommands] = hooks2.useState([]);
    const measurementRef = hooks2.useRef(null);
    const backgroundRef = hooks2.useRef(null);
    const foregroundRef = hooks2.useRef(null);
    const mouseRef = hooks2.useRef(null);
    const [scaleFactor, setScaleFactor] = hooks2.useState(1);
    const strokeColor = hooks2.useMemo(() => {
      const sentryFeedback = DOCUMENT.getElementById(options.id);
      if (!sentryFeedback) {
        return "white";
      }
      const computedStyle = getComputedStyle(sentryFeedback);
      return computedStyle.getPropertyValue("--button-primary-background") || computedStyle.getPropertyValue("--accent-background");
    }, [options.id]);
    hooks2.useLayoutEffect(() => {
      const handleResize = () => {
        const measurementDiv = measurementRef.current;
        if (!measurementDiv) {
          return;
        }
        with2dContext(screenshot.canvas, {
          alpha: false
        }, (canvas) => {
          const scale = Math.min(measurementDiv.clientWidth / canvas.width, measurementDiv.clientHeight / canvas.height);
          setScaleFactor(scale);
        });
        if (measurementDiv.clientHeight === 0 || measurementDiv.clientWidth === 0) {
          setTimeout(handleResize, 0);
        }
      };
      handleResize();
      WINDOW3.addEventListener("resize", handleResize);
      return () => {
        WINDOW3.removeEventListener("resize", handleResize);
      };
    }, [screenshot]);
    const setCanvasSize = hooks2.useCallback((maybeCanvas, scale) => {
      with2dContext(maybeCanvas, {
        alpha: true
      }, (canvas, ctx) => {
        ctx.scale(scale, scale);
        canvas.width = screenshot.canvas.width;
        canvas.height = screenshot.canvas.height;
      });
    }, [screenshot]);
    hooks2.useEffect(() => {
      setCanvasSize(backgroundRef.current, screenshot.dpi);
      paintImage(backgroundRef.current, screenshot.canvas);
    }, [screenshot]);
    hooks2.useEffect(() => {
      setCanvasSize(foregroundRef.current, screenshot.dpi);
      with2dContext(foregroundRef.current, {
        alpha: true
      }, (canvas, ctx) => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      });
      paintForeground(foregroundRef.current, strokeColor, drawCommands);
    }, [drawCommands, strokeColor]);
    hooks2.useEffect(() => {
      setCanvasSize(outputBuffer, screenshot.dpi);
      paintImage(outputBuffer, screenshot.canvas);
      with2dContext(DOCUMENT.createElement("canvas"), {
        alpha: true
      }, (foreground, ctx) => {
        ctx.scale(screenshot.dpi, screenshot.dpi);
        foreground.width = screenshot.canvas.width;
        foreground.height = screenshot.canvas.height;
        paintForeground(foreground, strokeColor, drawCommands);
        paintImage(outputBuffer, foreground);
      });
    }, [drawCommands, screenshot, strokeColor]);
    const handleMouseDown = (e3) => {
      if (!action || !mouseRef.current) {
        return;
      }
      const boundingRect = mouseRef.current.getBoundingClientRect();
      const startingPoint = {
        type: action,
        x: e3.offsetX / scaleFactor,
        y: e3.offsetY / scaleFactor
      };
      const getDrawCommand = (startingPoint2, e4) => {
        const x2 = (e4.clientX - boundingRect.x) / scaleFactor;
        const y2 = (e4.clientY - boundingRect.y) / scaleFactor;
        return {
          type: startingPoint2.type,
          x: Math.min(startingPoint2.x, x2),
          y: Math.min(startingPoint2.y, y2),
          w: Math.abs(x2 - startingPoint2.x),
          h: Math.abs(y2 - startingPoint2.y)
        };
      };
      const handleMouseMove = (e4) => {
        with2dContext(foregroundRef.current, {
          alpha: true
        }, (canvas, ctx) => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        });
        paintForeground(foregroundRef.current, strokeColor, [...drawCommands, getDrawCommand(startingPoint, e4)]);
      };
      const handleMouseUp = (e4) => {
        const drawCommand = getDrawCommand(startingPoint, e4);
        if (drawCommand.w * scaleFactor >= 1 && drawCommand.h * scaleFactor >= 1) {
          setDrawCommands((prev) => [...prev, drawCommand]);
        }
        DOCUMENT.removeEventListener("mousemove", handleMouseMove);
        DOCUMENT.removeEventListener("mouseup", handleMouseUp);
      };
      DOCUMENT.addEventListener("mousemove", handleMouseMove);
      DOCUMENT.addEventListener("mouseup", handleMouseUp);
    };
    const deleteRect = hooks2.useCallback((index) => {
      return (e3) => {
        e3.preventDefault();
        e3.stopPropagation();
        setDrawCommands((prev) => {
          const updatedRects = [...prev];
          updatedRects.splice(index, 1);
          return updatedRects;
        });
      };
    }, []);
    const dimensions = {
      width: `${screenshot.canvas.width * scaleFactor}px`,
      height: `${screenshot.canvas.height * scaleFactor}px`
    };
    const handleStopPropagation = (e3) => {
      e3.stopPropagation();
    };
    return h2("div", {
      class: "editor"
    }, h2("style", {
      nonce: options.styleNonce,
      dangerouslySetInnerHTML: editorStyleInnerText
    }), h2("div", {
      class: "editor__image-container"
    }, h2("div", {
      class: "editor__canvas-container",
      ref: measurementRef
    }, h2("canvas", {
      ref: backgroundRef,
      id: "background",
      style: dimensions
    }), h2("canvas", {
      ref: foregroundRef,
      id: "foreground",
      style: dimensions
    }), h2("div", {
      ref: mouseRef,
      onMouseDown: handleMouseDown,
      style: dimensions
    }, drawCommands.map((rect, index) => h2("div", {
      key: index,
      class: "editor__rect",
      style: {
        top: `${rect.y * scaleFactor}px`,
        left: `${rect.x * scaleFactor}px`,
        width: `${rect.w * scaleFactor}px`,
        height: `${rect.h * scaleFactor}px`
      }
    }, h2("button", {
      "aria-label": "Remove",
      onClick: deleteRect(index),
      onMouseDown: handleStopPropagation,
      onMouseUp: handleStopPropagation,
      type: "button"
    }, h2(IconClose, null))))))), h2(Toolbar, {
      action,
      setAction
    }));
  };
  return function Wrapper({
    onError
  }) {
    const [screenshot, setScreenshot] = hooks2.useState();
    useTakeScreenshot({
      onBeforeScreenshot: hooks2.useCallback(() => {
        dialogStyle.display = "none";
      }, []),
      onScreenshot: hooks2.useCallback((screenshotVideo, dpi) => {
        with2dContext(DOCUMENT.createElement("canvas"), {
          alpha: false
        }, (canvas, ctx) => {
          ctx.scale(dpi, dpi);
          canvas.width = screenshotVideo.videoWidth;
          canvas.height = screenshotVideo.videoHeight;
          ctx.drawImage(screenshotVideo, 0, 0, canvas.width, canvas.height);
          setScreenshot({
            canvas,
            dpi
          });
        });
        outputBuffer.width = screenshotVideo.videoWidth;
        outputBuffer.height = screenshotVideo.videoHeight;
      }, []),
      onAfterScreenshot: hooks2.useCallback(() => {
        dialogStyle.display = "block";
      }, []),
      onError: hooks2.useCallback((error2) => {
        dialogStyle.display = "block";
        onError(error2);
      }, [])
    });
    if (screenshot) {
      return h2(ScreenshotEditor, {
        screenshot
      });
    }
    return h2("div", null);
  };
}
var feedbackScreenshotIntegration = () => {
  return {
    name: "FeedbackScreenshot",
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    setupOnce() {
    },
    createInput: ({
      h: h2,
      hooks: hooks2,
      dialog,
      options
    }) => {
      const outputBuffer = DOCUMENT.createElement("canvas");
      return {
        input: ScreenshotEditorFactory({
          h: h2,
          hooks: hooks2,
          outputBuffer,
          dialog,
          options
        }),
        // eslint-disable-line @typescript-eslint/no-explicit-any
        value: () => __async(null, null, function* () {
          const blob = yield new Promise((resolve) => {
            outputBuffer.toBlob(resolve, "image/png");
          });
          if (blob) {
            const data = new Uint8Array(yield blob.arrayBuffer());
            const attachment = {
              data,
              filename: "screenshot.png",
              contentType: "application/png"
              // attachmentType?: string;
            };
            return attachment;
          }
          return void 0;
        })
      };
    }
  };
};

// node_modules/@sentry/browser/build/npm/esm/helpers.js
var WINDOW4 = GLOBAL_OBJ;
var ignoreOnError = 0;
function shouldIgnoreOnError() {
  return ignoreOnError > 0;
}
function ignoreNextOnError() {
  ignoreOnError++;
  setTimeout(() => {
    ignoreOnError--;
  });
}
function wrap(fn, options = {}) {
  function isFunction(fn2) {
    return typeof fn2 === "function";
  }
  if (!isFunction(fn)) {
    return fn;
  }
  try {
    const wrapper = fn.__sentry_wrapped__;
    if (wrapper) {
      if (typeof wrapper === "function") {
        return wrapper;
      } else {
        return fn;
      }
    }
    if (getOriginalFunction(fn)) {
      return fn;
    }
  } catch (e3) {
    return fn;
  }
  const sentryWrapped = function(...args) {
    try {
      const wrappedArguments = args.map((arg) => wrap(arg, options));
      return fn.apply(this, wrappedArguments);
    } catch (ex) {
      ignoreNextOnError();
      withScope2((scope) => {
        scope.addEventProcessor((event) => {
          if (options.mechanism) {
            addExceptionTypeValue(event, void 0, void 0);
            addExceptionMechanism(event, options.mechanism);
          }
          event.extra = __spreadProps(__spreadValues({}, event.extra), {
            arguments: args
          });
          return event;
        });
        captureException(ex);
      });
      throw ex;
    }
  };
  try {
    for (const property in fn) {
      if (Object.prototype.hasOwnProperty.call(fn, property)) {
        sentryWrapped[property] = fn[property];
      }
    }
  } catch {
  }
  markFunctionWrapped(sentryWrapped, fn);
  addNonEnumerableProperty(fn, "__sentry_wrapped__", sentryWrapped);
  try {
    const descriptor = Object.getOwnPropertyDescriptor(sentryWrapped, "name");
    if (descriptor.configurable) {
      Object.defineProperty(sentryWrapped, "name", {
        get() {
          return fn.name;
        }
      });
    }
  } catch {
  }
  return sentryWrapped;
}
function getHttpRequestData() {
  const url = getLocationHref();
  const {
    referrer
  } = WINDOW4.document || {};
  const {
    userAgent: userAgent2
  } = WINDOW4.navigator || {};
  const headers = __spreadValues(__spreadValues({}, referrer && {
    Referer: referrer
  }), userAgent2 && {
    "User-Agent": userAgent2
  });
  const request = {
    url,
    headers
  };
  return request;
}

// node_modules/@sentry/browser/build/npm/esm/feedbackSync.js
var feedbackSyncIntegration = buildFeedbackIntegration({
  getModalIntegration: () => feedbackModalIntegration,
  getScreenshotIntegration: () => feedbackScreenshotIntegration
});

// node_modules/@sentry/browser/build/npm/esm/eventbuilder.js
function exceptionFromError(stackParser, ex) {
  const frames = parseStackFrames(stackParser, ex);
  const exception = {
    type: extractType(ex),
    value: extractMessage(ex)
  };
  if (frames.length) {
    exception.stacktrace = {
      frames
    };
  }
  if (exception.type === void 0 && exception.value === "") {
    exception.value = "Unrecoverable error caught";
  }
  return exception;
}
function eventFromPlainObject(stackParser, exception, syntheticException, isUnhandledRejection) {
  const client = getClient();
  const normalizeDepth = client == null ? void 0 : client.getOptions().normalizeDepth;
  const errorFromProp = getErrorPropertyFromObject(exception);
  const extra = {
    __serialized__: normalizeToSize(exception, normalizeDepth)
  };
  if (errorFromProp) {
    return {
      exception: {
        values: [exceptionFromError(stackParser, errorFromProp)]
      },
      extra
    };
  }
  const event = {
    exception: {
      values: [{
        type: isEvent(exception) ? exception.constructor.name : isUnhandledRejection ? "UnhandledRejection" : "Error",
        value: getNonErrorObjectExceptionValue(exception, {
          isUnhandledRejection
        })
      }]
    },
    extra
  };
  if (syntheticException) {
    const frames = parseStackFrames(stackParser, syntheticException);
    if (frames.length) {
      event.exception.values[0].stacktrace = {
        frames
      };
    }
  }
  return event;
}
function eventFromError(stackParser, ex) {
  return {
    exception: {
      values: [exceptionFromError(stackParser, ex)]
    }
  };
}
function parseStackFrames(stackParser, ex) {
  const stacktrace = ex.stacktrace || ex.stack || "";
  const skipLines = getSkipFirstStackStringLines(ex);
  const framesToPop = getPopFirstTopFrames(ex);
  try {
    return stackParser(stacktrace, skipLines, framesToPop);
  } catch (e3) {
  }
  return [];
}
var reactMinifiedRegexp = /Minified React error #\d+;/i;
function getSkipFirstStackStringLines(ex) {
  if (ex && reactMinifiedRegexp.test(ex.message)) {
    return 1;
  }
  return 0;
}
function getPopFirstTopFrames(ex) {
  if (typeof ex.framesToPop === "number") {
    return ex.framesToPop;
  }
  return 0;
}
function isWebAssemblyException(exception) {
  if (typeof WebAssembly !== "undefined" && typeof WebAssembly.Exception !== "undefined") {
    return exception instanceof WebAssembly.Exception;
  } else {
    return false;
  }
}
function extractType(ex) {
  const name = ex == null ? void 0 : ex.name;
  if (!name && isWebAssemblyException(ex)) {
    const hasTypeInMessage = ex.message && Array.isArray(ex.message) && ex.message.length == 2;
    return hasTypeInMessage ? ex.message[0] : "WebAssembly.Exception";
  }
  return name;
}
function extractMessage(ex) {
  const message = ex == null ? void 0 : ex.message;
  if (isWebAssemblyException(ex)) {
    if (Array.isArray(ex.message) && ex.message.length == 2) {
      return ex.message[1];
    }
    return "wasm exception";
  }
  if (!message) {
    return "No error message";
  }
  if (message.error && typeof message.error.message === "string") {
    return message.error.message;
  }
  return message;
}
function eventFromException(stackParser, exception, hint, attachStacktrace) {
  const syntheticException = (hint == null ? void 0 : hint.syntheticException) || void 0;
  const event = eventFromUnknownInput(stackParser, exception, syntheticException, attachStacktrace);
  addExceptionMechanism(event);
  event.level = "error";
  if (hint == null ? void 0 : hint.event_id) {
    event.event_id = hint.event_id;
  }
  return resolvedSyncPromise(event);
}
function eventFromMessage(stackParser, message, level = "info", hint, attachStacktrace) {
  const syntheticException = (hint == null ? void 0 : hint.syntheticException) || void 0;
  const event = eventFromString(stackParser, message, syntheticException, attachStacktrace);
  event.level = level;
  if (hint == null ? void 0 : hint.event_id) {
    event.event_id = hint.event_id;
  }
  return resolvedSyncPromise(event);
}
function eventFromUnknownInput(stackParser, exception, syntheticException, attachStacktrace, isUnhandledRejection) {
  let event;
  if (isErrorEvent(exception) && exception.error) {
    const errorEvent = exception;
    return eventFromError(stackParser, errorEvent.error);
  }
  if (isDOMError(exception) || isDOMException(exception)) {
    const domException = exception;
    if ("stack" in exception) {
      event = eventFromError(stackParser, exception);
    } else {
      const name = domException.name || (isDOMError(domException) ? "DOMError" : "DOMException");
      const message = domException.message ? `${name}: ${domException.message}` : name;
      event = eventFromString(stackParser, message, syntheticException, attachStacktrace);
      addExceptionTypeValue(event, message);
    }
    if ("code" in domException) {
      event.tags = __spreadProps(__spreadValues({}, event.tags), {
        "DOMException.code": `${domException.code}`
      });
    }
    return event;
  }
  if (isError(exception)) {
    return eventFromError(stackParser, exception);
  }
  if (isPlainObject(exception) || isEvent(exception)) {
    const objectException = exception;
    event = eventFromPlainObject(stackParser, objectException, syntheticException, isUnhandledRejection);
    addExceptionMechanism(event, {
      synthetic: true
    });
    return event;
  }
  event = eventFromString(stackParser, exception, syntheticException, attachStacktrace);
  addExceptionTypeValue(event, `${exception}`, void 0);
  addExceptionMechanism(event, {
    synthetic: true
  });
  return event;
}
function eventFromString(stackParser, message, syntheticException, attachStacktrace) {
  const event = {};
  if (attachStacktrace && syntheticException) {
    const frames = parseStackFrames(stackParser, syntheticException);
    if (frames.length) {
      event.exception = {
        values: [{
          value: message,
          stacktrace: {
            frames
          }
        }]
      };
    }
    addExceptionMechanism(event, {
      synthetic: true
    });
  }
  if (isParameterizedString(message)) {
    const {
      __sentry_template_string__,
      __sentry_template_values__
    } = message;
    event.logentry = {
      message: __sentry_template_string__,
      params: __sentry_template_values__
    };
    return event;
  }
  event.message = message;
  return event;
}
function getNonErrorObjectExceptionValue(exception, {
  isUnhandledRejection
}) {
  const keys = extractExceptionKeysForMessage(exception);
  const captureType = isUnhandledRejection ? "promise rejection" : "exception";
  if (isErrorEvent(exception)) {
    return `Event \`ErrorEvent\` captured as ${captureType} with message \`${exception.message}\``;
  }
  if (isEvent(exception)) {
    const className = getObjectClassName(exception);
    return `Event \`${className}\` (type=${exception.type}) captured as ${captureType}`;
  }
  return `Object captured as ${captureType} with keys: ${keys}`;
}
function getObjectClassName(obj) {
  try {
    const prototype = Object.getPrototypeOf(obj);
    return prototype ? prototype.constructor.name : void 0;
  } catch (e3) {
  }
}
function getErrorPropertyFromObject(obj) {
  for (const prop in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, prop)) {
      const value = obj[prop];
      if (value instanceof Error) {
        return value;
      }
    }
  }
  return void 0;
}

// node_modules/@sentry/browser/build/npm/esm/client.js
var DEFAULT_FLUSH_INTERVAL = 5e3;
var BrowserClient = class extends Client2 {
  /**
   * Creates a new Browser SDK instance.
   *
   * @param options Configuration options for this SDK.
   */
  constructor(options) {
    const opts = applyDefaultOptions(options);
    const sdkSource = WINDOW4.SENTRY_SDK_SOURCE || getSDKSource();
    applySdkMetadata(opts, "browser", ["browser"], sdkSource);
    super(opts);
    const {
      sendDefaultPii,
      sendClientReports,
      _experiments
    } = this._options;
    const enableLogs = _experiments == null ? void 0 : _experiments.enableLogs;
    if (WINDOW4.document && (sendClientReports || enableLogs)) {
      WINDOW4.document.addEventListener("visibilitychange", () => {
        if (WINDOW4.document.visibilityState === "hidden") {
          if (sendClientReports) {
            this._flushOutcomes();
          }
          if (enableLogs) {
            _INTERNAL_flushLogsBuffer(this);
          }
        }
      });
    }
    if (enableLogs) {
      this.on("flush", () => {
        _INTERNAL_flushLogsBuffer(this);
      });
      this.on("afterCaptureLog", () => {
        if (this._logFlushIdleTimeout) {
          clearTimeout(this._logFlushIdleTimeout);
        }
        this._logFlushIdleTimeout = setTimeout(() => {
          _INTERNAL_flushLogsBuffer(this);
        }, DEFAULT_FLUSH_INTERVAL);
      });
    }
    if (sendDefaultPii) {
      this.on("postprocessEvent", addAutoIpAddressToUser);
      this.on("beforeSendSession", addAutoIpAddressToSession);
    }
  }
  /**
   * @inheritDoc
   */
  eventFromException(exception, hint) {
    return eventFromException(this._options.stackParser, exception, hint, this._options.attachStacktrace);
  }
  /**
   * @inheritDoc
   */
  eventFromMessage(message, level = "info", hint) {
    return eventFromMessage(this._options.stackParser, message, level, hint, this._options.attachStacktrace);
  }
  /**
   * @inheritDoc
   */
  _prepareEvent(event, hint, currentScope, isolationScope) {
    event.platform = event.platform || "javascript";
    return super._prepareEvent(event, hint, currentScope, isolationScope);
  }
};
function applyDefaultOptions(optionsArg) {
  var _a3;
  return __spreadValues({
    release: typeof __SENTRY_RELEASE__ === "string" ? __SENTRY_RELEASE__ : (_a3 = WINDOW4.SENTRY_RELEASE) == null ? void 0 : _a3.id,
    // This supports the variable that sentry-webpack-plugin injects
    sendClientReports: true,
    // We default this to true, as it is the safer scenario
    parentSpanIsAlwaysRootSpan: true
  }, optionsArg);
}

// node_modules/@sentry-internal/browser-utils/build/esm/debug-build.js
var DEBUG_BUILD3 = typeof __SENTRY_DEBUG__ === "undefined" || __SENTRY_DEBUG__;

// node_modules/@sentry-internal/browser-utils/build/esm/types.js
var WINDOW5 = GLOBAL_OBJ;

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/bindReporter.js
var getRating = (value, thresholds) => {
  if (value > thresholds[1]) {
    return "poor";
  }
  if (value > thresholds[0]) {
    return "needs-improvement";
  }
  return "good";
};
var bindReporter = (callback, metric, thresholds, reportAllChanges) => {
  let prevValue;
  let delta;
  return (forceReport) => {
    if (metric.value >= 0) {
      if (forceReport || reportAllChanges) {
        delta = metric.value - (prevValue != null ? prevValue : 0);
        if (delta || prevValue === void 0) {
          prevValue = metric.value;
          metric.delta = delta;
          metric.rating = getRating(metric.value, thresholds);
          callback(metric);
        }
      }
    }
  };
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/generateUniqueID.js
var generateUniqueID = () => {
  return `v5-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`;
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/getNavigationEntry.js
var getNavigationEntry = (checkResponseStart = true) => {
  var _a3, _b;
  const navigationEntry = (_b = (_a3 = WINDOW5.performance) == null ? void 0 : _a3.getEntriesByType) == null ? void 0 : _b.call(_a3, "navigation")[0];
  if (
    // sentry-specific change:
    // We don't want to check for responseStart for our own use of `getNavigationEntry`
    !checkResponseStart || navigationEntry && navigationEntry.responseStart > 0 && navigationEntry.responseStart < performance.now()
  ) {
    return navigationEntry;
  }
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/getActivationStart.js
var getActivationStart = () => {
  var _a3;
  const navEntry = getNavigationEntry();
  return (_a3 = navEntry == null ? void 0 : navEntry.activationStart) != null ? _a3 : 0;
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/initMetric.js
var initMetric = (name, value = -1) => {
  var _a3, _b;
  const navEntry = getNavigationEntry();
  let navigationType = "navigate";
  if (navEntry) {
    if (((_a3 = WINDOW5.document) == null ? void 0 : _a3.prerendering) || getActivationStart() > 0) {
      navigationType = "prerender";
    } else if ((_b = WINDOW5.document) == null ? void 0 : _b.wasDiscarded) {
      navigationType = "restore";
    } else if (navEntry.type) {
      navigationType = navEntry.type.replace(/_/g, "-");
    }
  }
  const entries = [];
  return {
    name,
    value,
    rating: "good",
    // If needed, will be updated when reported. `const` to keep the type from widening to `string`.
    delta: 0,
    entries,
    id: generateUniqueID(),
    navigationType
  };
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/initUnique.js
var instanceMap = /* @__PURE__ */ new WeakMap();
function initUnique(identityObj, ClassObj) {
  if (!instanceMap.get(identityObj)) {
    instanceMap.set(identityObj, new ClassObj());
  }
  return instanceMap.get(identityObj);
}

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/LayoutShiftManager.js
var LayoutShiftManager = class _LayoutShiftManager {
  constructor() {
    _LayoutShiftManager.prototype.__init.call(this);
    _LayoutShiftManager.prototype.__init2.call(this);
  }
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility
  // eslint-disable-next-line @sentry-internal/sdk/no-class-field-initializers, @typescript-eslint/explicit-member-accessibility
  __init() {
    this._sessionValue = 0;
  }
  // eslint-disable-next-line @sentry-internal/sdk/no-class-field-initializers, @typescript-eslint/explicit-member-accessibility
  __init2() {
    this._sessionEntries = [];
  }
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility
  _processEntry(entry) {
    var _a3;
    if (entry.hadRecentInput) return;
    const firstSessionEntry = this._sessionEntries[0];
    const lastSessionEntry = this._sessionEntries[this._sessionEntries.length - 1];
    if (this._sessionValue && firstSessionEntry && lastSessionEntry && entry.startTime - lastSessionEntry.startTime < 1e3 && entry.startTime - firstSessionEntry.startTime < 5e3) {
      this._sessionValue += entry.value;
      this._sessionEntries.push(entry);
    } else {
      this._sessionValue = entry.value;
      this._sessionEntries = [entry];
    }
    (_a3 = this._onAfterProcessingUnexpectedShift) == null ? void 0 : _a3.call(this, entry);
  }
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/observe.js
var observe = (type, callback, opts = {}) => {
  try {
    if (PerformanceObserver.supportedEntryTypes.includes(type)) {
      const po2 = new PerformanceObserver((list) => {
        Promise.resolve().then(() => {
          callback(list.getEntries());
        });
      });
      po2.observe(__spreadValues({
        type,
        buffered: true
      }, opts));
      return po2;
    }
  } catch {
  }
  return;
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/runOnce.js
var runOnce = (cb) => {
  let called = false;
  return () => {
    if (!called) {
      cb();
      called = true;
    }
  };
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/getVisibilityWatcher.js
var firstHiddenTime = -1;
var initHiddenTime = () => {
  var _a3, _b;
  return ((_a3 = WINDOW5.document) == null ? void 0 : _a3.visibilityState) === "hidden" && !((_b = WINDOW5.document) == null ? void 0 : _b.prerendering) ? 0 : Infinity;
};
var onVisibilityUpdate = (event) => {
  if (WINDOW5.document.visibilityState === "hidden" && firstHiddenTime > -1) {
    firstHiddenTime = event.type === "visibilitychange" ? event.timeStamp : 0;
    removeChangeListeners();
  }
};
var addChangeListeners = () => {
  addEventListener("visibilitychange", onVisibilityUpdate, true);
  addEventListener("prerenderingchange", onVisibilityUpdate, true);
};
var removeChangeListeners = () => {
  removeEventListener("visibilitychange", onVisibilityUpdate, true);
  removeEventListener("prerenderingchange", onVisibilityUpdate, true);
};
var getVisibilityWatcher = () => {
  var _a3;
  if (WINDOW5.document && firstHiddenTime < 0) {
    const activationStart = getActivationStart();
    const firstVisibilityStateHiddenTime = !WINDOW5.document.prerendering ? (_a3 = globalThis.performance.getEntriesByType("visibility-state").filter((e3) => e3.name === "hidden" && e3.startTime > activationStart)[0]) == null ? void 0 : _a3.startTime : void 0;
    firstHiddenTime = firstVisibilityStateHiddenTime != null ? firstVisibilityStateHiddenTime : initHiddenTime();
    addChangeListeners();
  }
  return {
    get firstHiddenTime() {
      return firstHiddenTime;
    }
  };
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/whenActivated.js
var whenActivated = (callback) => {
  var _a3;
  if ((_a3 = WINDOW5.document) == null ? void 0 : _a3.prerendering) {
    addEventListener("prerenderingchange", () => callback(), true);
  } else {
    callback();
  }
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/onFCP.js
var FCPThresholds = [1800, 3e3];
var onFCP = (onReport, opts = {}) => {
  whenActivated(() => {
    const visibilityWatcher = getVisibilityWatcher();
    const metric = initMetric("FCP");
    let report;
    const handleEntries = (entries) => {
      for (const entry of entries) {
        if (entry.name === "first-contentful-paint") {
          po2.disconnect();
          if (entry.startTime < visibilityWatcher.firstHiddenTime) {
            metric.value = Math.max(entry.startTime - getActivationStart(), 0);
            metric.entries.push(entry);
            report(true);
          }
        }
      }
    };
    const po2 = observe("paint", handleEntries);
    if (po2) {
      report = bindReporter(onReport, metric, FCPThresholds, opts.reportAllChanges);
    }
  });
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/getCLS.js
var CLSThresholds = [0.1, 0.25];
var onCLS = (onReport, opts = {}) => {
  onFCP(runOnce(() => {
    var _a3, _b, _c;
    const metric = initMetric("CLS", 0);
    let report;
    const layoutShiftManager = initUnique(opts, LayoutShiftManager);
    const handleEntries = (entries) => {
      for (const entry of entries) {
        layoutShiftManager._processEntry(entry);
      }
      if (layoutShiftManager._sessionValue > metric.value) {
        metric.value = layoutShiftManager._sessionValue;
        metric.entries = layoutShiftManager._sessionEntries;
        report();
      }
    };
    const po2 = observe("layout-shift", handleEntries);
    if (po2) {
      report = bindReporter(onReport, metric, CLSThresholds, opts.reportAllChanges);
      (_a3 = WINDOW5.document) == null ? void 0 : _a3.addEventListener("visibilitychange", () => {
        var _a4;
        if (((_a4 = WINDOW5.document) == null ? void 0 : _a4.visibilityState) === "hidden") {
          handleEntries(po2.takeRecords());
          report(true);
        }
      });
      (_c = (_b = WINDOW5) == null ? void 0 : _b.setTimeout) == null ? void 0 : _c.call(_b, report);
    }
  }));
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/onHidden.js
var onHidden = (cb) => {
  const onHiddenOrPageHide = (event) => {
    var _a3;
    if (event.type === "pagehide" || ((_a3 = WINDOW5.document) == null ? void 0 : _a3.visibilityState) === "hidden") {
      cb(event);
    }
  };
  if (WINDOW5.document) {
    addEventListener("visibilitychange", onHiddenOrPageHide, true);
    addEventListener("pagehide", onHiddenOrPageHide, true);
  }
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/getFID.js
var FIDThresholds = [100, 300];
var onFID = (onReport, opts = {}) => {
  whenActivated(() => {
    const visibilityWatcher = getVisibilityWatcher();
    const metric = initMetric("FID");
    let report;
    const handleEntry = (entry) => {
      if (entry.startTime < visibilityWatcher.firstHiddenTime) {
        metric.value = entry.processingStart - entry.startTime;
        metric.entries.push(entry);
        report(true);
      }
    };
    const handleEntries = (entries) => {
      entries.forEach(handleEntry);
    };
    const po2 = observe("first-input", handleEntries);
    report = bindReporter(onReport, metric, FIDThresholds, opts.reportAllChanges);
    if (po2) {
      onHidden(runOnce(() => {
        handleEntries(po2.takeRecords());
        po2.disconnect();
      }));
    }
  });
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/polyfills/interactionCountPolyfill.js
var interactionCountEstimate = 0;
var minKnownInteractionId = Infinity;
var maxKnownInteractionId = 0;
var updateEstimate = (entries) => {
  entries.forEach((e3) => {
    if (e3.interactionId) {
      minKnownInteractionId = Math.min(minKnownInteractionId, e3.interactionId);
      maxKnownInteractionId = Math.max(maxKnownInteractionId, e3.interactionId);
      interactionCountEstimate = maxKnownInteractionId ? (maxKnownInteractionId - minKnownInteractionId) / 7 + 1 : 0;
    }
  });
};
var po;
var getInteractionCount = () => {
  return po ? interactionCountEstimate : performance.interactionCount || 0;
};
var initInteractionCountPolyfill = () => {
  if ("interactionCount" in performance || po) return;
  po = observe("event", updateEstimate, {
    type: "event",
    buffered: true,
    durationThreshold: 0
  });
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/InteractionManager.js
var MAX_INTERACTIONS_TO_CONSIDER = 10;
var prevInteractionCount = 0;
var getInteractionCountForNavigation = () => {
  return getInteractionCount() - prevInteractionCount;
};
var InteractionManager = class _InteractionManager {
  constructor() {
    _InteractionManager.prototype.__init.call(this);
    _InteractionManager.prototype.__init2.call(this);
  }
  /**
   * A list of longest interactions on the page (by latency) sorted so the
   * longest one is first. The list is at most MAX_INTERACTIONS_TO_CONSIDER
   * long.
   */
  // eslint-disable-next-line @sentry-internal/sdk/no-class-field-initializers, @typescript-eslint/explicit-member-accessibility
  __init() {
    this._longestInteractionList = [];
  }
  /**
   * A mapping of longest interactions by their interaction ID.
   * This is used for faster lookup.
   */
  // eslint-disable-next-line @sentry-internal/sdk/no-class-field-initializers, @typescript-eslint/explicit-member-accessibility
  __init2() {
    this._longestInteractionMap = /* @__PURE__ */ new Map();
  }
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility, jsdoc/require-jsdoc
  _resetInteractions() {
    prevInteractionCount = getInteractionCount();
    this._longestInteractionList.length = 0;
    this._longestInteractionMap.clear();
  }
  /**
   * Returns the estimated p98 longest interaction based on the stored
   * interaction candidates and the interaction count for the current page.
   */
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility
  _estimateP98LongestInteraction() {
    const candidateInteractionIndex = Math.min(this._longestInteractionList.length - 1, Math.floor(getInteractionCountForNavigation() / 50));
    return this._longestInteractionList[candidateInteractionIndex];
  }
  /**
   * Takes a performance entry and adds it to the list of worst interactions
   * if its duration is long enough to make it among the worst. If the
   * entry is part of an existing interaction, it is merged and the latency
   * and entries list is updated as needed.
   */
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility
  _processEntry(entry) {
    var _a3, _b;
    (_a3 = this._onBeforeProcessingEntry) == null ? void 0 : _a3.call(this, entry);
    if (!(entry.interactionId || entry.entryType === "first-input")) return;
    const minLongestInteraction = this._longestInteractionList.at(-1);
    let interaction = this._longestInteractionMap.get(entry.interactionId);
    if (interaction || this._longestInteractionList.length < MAX_INTERACTIONS_TO_CONSIDER || // If the above conditions are false, `minLongestInteraction` will be set.
    entry.duration > minLongestInteraction._latency) {
      if (interaction) {
        if (entry.duration > interaction._latency) {
          interaction.entries = [entry];
          interaction._latency = entry.duration;
        } else if (entry.duration === interaction._latency && entry.startTime === interaction.entries[0].startTime) {
          interaction.entries.push(entry);
        }
      } else {
        interaction = {
          id: entry.interactionId,
          entries: [entry],
          _latency: entry.duration
        };
        this._longestInteractionMap.set(interaction.id, interaction);
        this._longestInteractionList.push(interaction);
      }
      this._longestInteractionList.sort((a2, b2) => b2._latency - a2._latency);
      if (this._longestInteractionList.length > MAX_INTERACTIONS_TO_CONSIDER) {
        const removedInteractions = this._longestInteractionList.splice(MAX_INTERACTIONS_TO_CONSIDER);
        for (const interaction2 of removedInteractions) {
          this._longestInteractionMap.delete(interaction2.id);
        }
      }
      (_b = this._onAfterProcessingINPCandidate) == null ? void 0 : _b.call(this, interaction);
    }
  }
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/whenIdleOrHidden.js
var whenIdleOrHidden = (cb) => {
  var _a3;
  const rIC = WINDOW5.requestIdleCallback || WINDOW5.setTimeout;
  if (((_a3 = WINDOW5.document) == null ? void 0 : _a3.visibilityState) === "hidden") {
    cb();
  } else {
    cb = runOnce(cb);
    rIC(cb);
    onHidden(cb);
  }
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/getINP.js
var INPThresholds = [200, 500];
var DEFAULT_DURATION_THRESHOLD = 40;
var onINP = (onReport, opts = {}) => {
  if (!(globalThis.PerformanceEventTiming && "interactionId" in PerformanceEventTiming.prototype)) {
    return;
  }
  whenActivated(() => {
    var _a3;
    initInteractionCountPolyfill();
    const metric = initMetric("INP");
    let report;
    const interactionManager = initUnique(opts, InteractionManager);
    const handleEntries = (entries) => {
      whenIdleOrHidden(() => {
        for (const entry of entries) {
          interactionManager._processEntry(entry);
        }
        const inp = interactionManager._estimateP98LongestInteraction();
        if (inp && inp._latency !== metric.value) {
          metric.value = inp._latency;
          metric.entries = inp.entries;
          report();
        }
      });
    };
    const po2 = observe("event", handleEntries, {
      // Event Timing entries have their durations rounded to the nearest 8ms,
      // so a duration of 40ms would be any event that spans 2.5 or more frames
      // at 60Hz. This threshold is chosen to strike a balance between usefulness
      // and performance. Running this callback for any interaction that spans
      // just one or two frames is likely not worth the insight that could be
      // gained.
      durationThreshold: (_a3 = opts.durationThreshold) != null ? _a3 : DEFAULT_DURATION_THRESHOLD
    });
    report = bindReporter(onReport, metric, INPThresholds, opts.reportAllChanges);
    if (po2) {
      po2.observe({
        type: "first-input",
        buffered: true
      });
      onHidden(() => {
        handleEntries(po2.takeRecords());
        report(true);
      });
    }
  });
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/LCPEntryManager.js
var LCPEntryManager = class {
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility, jsdoc/require-jsdoc
  _processEntry(entry) {
    var _a3;
    (_a3 = this._onBeforeProcessingEntry) == null ? void 0 : _a3.call(this, entry);
  }
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/getLCP.js
var LCPThresholds = [2500, 4e3];
var onLCP = (onReport, opts = {}) => {
  whenActivated(() => {
    const visibilityWatcher = getVisibilityWatcher();
    const metric = initMetric("LCP");
    let report;
    const lcpEntryManager = initUnique(opts, LCPEntryManager);
    const handleEntries = (entries) => {
      if (!opts.reportAllChanges) {
        entries = entries.slice(-1);
      }
      for (const entry of entries) {
        lcpEntryManager._processEntry(entry);
        if (entry.startTime < visibilityWatcher.firstHiddenTime) {
          metric.value = Math.max(entry.startTime - getActivationStart(), 0);
          metric.entries = [entry];
          report();
        }
      }
    };
    const po2 = observe("largest-contentful-paint", handleEntries);
    if (po2) {
      report = bindReporter(onReport, metric, LCPThresholds, opts.reportAllChanges);
      const stopListening = runOnce(() => {
        handleEntries(po2.takeRecords());
        po2.disconnect();
        report(true);
      });
      for (const type of ["keydown", "click", "visibilitychange"]) {
        if (WINDOW5.document) {
          addEventListener(type, () => whenIdleOrHidden(stopListening), {
            capture: true,
            once: true
          });
        }
      }
    }
  });
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/onTTFB.js
var TTFBThresholds = [800, 1800];
var whenReady = (callback) => {
  var _a3, _b;
  if ((_a3 = WINDOW5.document) == null ? void 0 : _a3.prerendering) {
    whenActivated(() => whenReady(callback));
  } else if (((_b = WINDOW5.document) == null ? void 0 : _b.readyState) !== "complete") {
    addEventListener("load", () => whenReady(callback), true);
  } else {
    setTimeout(callback);
  }
};
var onTTFB = (onReport, opts = {}) => {
  const metric = initMetric("TTFB");
  const report = bindReporter(onReport, metric, TTFBThresholds, opts.reportAllChanges);
  whenReady(() => {
    const navigationEntry = getNavigationEntry();
    if (navigationEntry) {
      metric.value = Math.max(navigationEntry.responseStart - getActivationStart(), 0);
      metric.entries = [navigationEntry];
      report(true);
    }
  });
};

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/instrument.js
var handlers2 = {};
var instrumented2 = {};
var _previousCls;
var _previousFid;
var _previousLcp;
var _previousTtfb;
var _previousInp;
function addClsInstrumentationHandler(callback, stopOnCallback = false) {
  return addMetricObserver("cls", callback, instrumentCls, _previousCls, stopOnCallback);
}
function addLcpInstrumentationHandler(callback, stopOnCallback = false) {
  return addMetricObserver("lcp", callback, instrumentLcp, _previousLcp, stopOnCallback);
}
function addFidInstrumentationHandler(callback) {
  return addMetricObserver("fid", callback, instrumentFid, _previousFid);
}
function addTtfbInstrumentationHandler(callback) {
  return addMetricObserver("ttfb", callback, instrumentTtfb, _previousTtfb);
}
function addInpInstrumentationHandler(callback) {
  return addMetricObserver("inp", callback, instrumentInp, _previousInp);
}
function addPerformanceInstrumentationHandler(type, callback) {
  addHandler2(type, callback);
  if (!instrumented2[type]) {
    instrumentPerformanceObserver(type);
    instrumented2[type] = true;
  }
  return getCleanupCallback(type, callback);
}
function triggerHandlers2(type, data) {
  const typeHandlers = handlers2[type];
  if (!(typeHandlers == null ? void 0 : typeHandlers.length)) {
    return;
  }
  for (const handler of typeHandlers) {
    try {
      handler(data);
    } catch (e3) {
      DEBUG_BUILD3 && logger2.error(`Error while triggering instrumentation handler.
Type: ${type}
Name: ${getFunctionName(handler)}
Error:`, e3);
    }
  }
}
function instrumentCls() {
  return onCLS(
    (metric) => {
      triggerHandlers2("cls", {
        metric
      });
      _previousCls = metric;
    },
    // We want the callback to be called whenever the CLS value updates.
    // By default, the callback is only called when the tab goes to the background.
    {
      reportAllChanges: true
    }
  );
}
function instrumentFid() {
  return onFID((metric) => {
    triggerHandlers2("fid", {
      metric
    });
    _previousFid = metric;
  });
}
function instrumentLcp() {
  return onLCP(
    (metric) => {
      triggerHandlers2("lcp", {
        metric
      });
      _previousLcp = metric;
    },
    // We want the callback to be called whenever the LCP value updates.
    // By default, the callback is only called when the tab goes to the background.
    {
      reportAllChanges: true
    }
  );
}
function instrumentTtfb() {
  return onTTFB((metric) => {
    triggerHandlers2("ttfb", {
      metric
    });
    _previousTtfb = metric;
  });
}
function instrumentInp() {
  return onINP((metric) => {
    triggerHandlers2("inp", {
      metric
    });
    _previousInp = metric;
  });
}
function addMetricObserver(type, callback, instrumentFn, previousValue, stopOnCallback = false) {
  addHandler2(type, callback);
  let stopListening;
  if (!instrumented2[type]) {
    stopListening = instrumentFn();
    instrumented2[type] = true;
  }
  if (previousValue) {
    callback({
      metric: previousValue
    });
  }
  return getCleanupCallback(type, callback, stopOnCallback ? stopListening : void 0);
}
function instrumentPerformanceObserver(type) {
  const options = {};
  if (type === "event") {
    options.durationThreshold = 0;
  }
  observe(type, (entries) => {
    triggerHandlers2(type, {
      entries
    });
  }, options);
}
function addHandler2(type, handler) {
  handlers2[type] = handlers2[type] || [];
  handlers2[type].push(handler);
}
function getCleanupCallback(type, callback, stopListening) {
  return () => {
    if (stopListening) {
      stopListening();
    }
    const typeHandlers = handlers2[type];
    if (!typeHandlers) {
      return;
    }
    const index = typeHandlers.indexOf(callback);
    if (index !== -1) {
      typeHandlers.splice(index, 1);
    }
  };
}
function isPerformanceEventTiming(entry) {
  return "duration" in entry;
}

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/utils.js
function isMeasurementValue(value) {
  return typeof value === "number" && isFinite(value);
}
function startAndEndSpan(parentSpan, startTimeInSeconds, endTime, _a3) {
  var ctx = __objRest(_a3, []);
  const parentStartTime = spanToJSON(parentSpan).start_timestamp;
  if (parentStartTime && parentStartTime > startTimeInSeconds) {
    if (typeof parentSpan.updateStartTime === "function") {
      parentSpan.updateStartTime(startTimeInSeconds);
    }
  }
  return withActiveSpan(parentSpan, () => {
    const span = startInactiveSpan(__spreadValues({
      startTime: startTimeInSeconds
    }, ctx));
    if (span) {
      span.end(endTime);
    }
    return span;
  });
}
function startStandaloneWebVitalSpan(options) {
  var _a3;
  const client = getClient();
  if (!client) {
    return;
  }
  const {
    name,
    transaction,
    attributes: passedAttributes,
    startTime
  } = options;
  const {
    release,
    environment: environment2,
    sendDefaultPii
  } = client.getOptions();
  const replay = client.getIntegrationByName("Replay");
  const replayId = replay == null ? void 0 : replay.getReplayId();
  const scope = getCurrentScope();
  const user = scope.getUser();
  const userDisplay = user !== void 0 ? user.email || user.id || user.ip_address : void 0;
  let profileId;
  try {
    profileId = scope.getScopeData().contexts.profile.profile_id;
  } catch {
  }
  const attributes = __spreadValues({
    release,
    environment: environment2,
    user: userDisplay || void 0,
    profile_id: profileId || void 0,
    replay_id: replayId || void 0,
    transaction,
    // Web vital score calculation relies on the user agent to account for different
    // browsers setting different thresholds for what is considered a good/meh/bad value.
    // For example: Chrome vs. Chrome Mobile
    "user_agent.original": (_a3 = WINDOW5.navigator) == null ? void 0 : _a3.userAgent,
    // This tells Sentry to infer the IP address from the request
    "client.address": sendDefaultPii ? "{{auto}}" : void 0
  }, passedAttributes);
  return startInactiveSpan({
    name,
    attributes,
    startTime,
    experimental: {
      standalone: true
    }
  });
}
function getBrowserPerformanceAPI() {
  return WINDOW5.addEventListener && WINDOW5.performance;
}
function msToSec(time) {
  return time / 1e3;
}
function extractNetworkProtocol(nextHopProtocol) {
  let name = "unknown";
  let version2 = "unknown";
  let _name = "";
  for (const char of nextHopProtocol) {
    if (char === "/") {
      [name, version2] = nextHopProtocol.split("/");
      break;
    }
    if (!isNaN(Number(char))) {
      name = _name === "h" ? "http" : _name;
      version2 = nextHopProtocol.split(_name)[1];
      break;
    }
    _name += char;
  }
  if (_name === nextHopProtocol) {
    name = _name;
  }
  return {
    name,
    version: version2
  };
}
function supportsWebVital(entryType) {
  try {
    return PerformanceObserver.supportedEntryTypes.includes(entryType);
  } catch {
    return false;
  }
}
function listenForWebVitalReportEvents(collectorCallback) {
  let pageloadSpanId;
  let collected = false;
  function _runCollectorCallbackOnce(event) {
    if (!collected && pageloadSpanId) {
      collectorCallback(event, pageloadSpanId);
    }
    collected = true;
  }
  onHidden(() => {
    if (!collected) {
      _runCollectorCallbackOnce("pagehide");
    }
  });
  setTimeout(() => {
    const client = getClient();
    if (!client) {
      return;
    }
    const unsubscribeStartNavigation = client.on("beforeStartNavigationSpan", (_2, options) => {
      if (!(options == null ? void 0 : options.isRedirect)) {
        _runCollectorCallbackOnce("navigation");
        unsubscribeStartNavigation == null ? void 0 : unsubscribeStartNavigation();
      }
    });
    const activeSpan = getActiveSpan();
    if (activeSpan) {
      const rootSpan = getRootSpan(activeSpan);
      const spanJSON = spanToJSON(rootSpan);
      if (spanJSON.op === "pageload") {
        pageloadSpanId = rootSpan.spanContext().spanId;
      }
    }
  }, 0);
}

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/cls.js
function trackClsAsStandaloneSpan() {
  let standaloneCLsValue = 0;
  let standaloneClsEntry;
  if (!supportsWebVital("layout-shift")) {
    return;
  }
  const cleanupClsHandler = addClsInstrumentationHandler(({
    metric
  }) => {
    const entry = metric.entries[metric.entries.length - 1];
    if (!entry) {
      return;
    }
    standaloneCLsValue = metric.value;
    standaloneClsEntry = entry;
  }, true);
  listenForWebVitalReportEvents((reportEvent, pageloadSpanId) => {
    sendStandaloneClsSpan(standaloneCLsValue, standaloneClsEntry, pageloadSpanId, reportEvent);
    cleanupClsHandler();
  });
}
function sendStandaloneClsSpan(clsValue, entry, pageloadSpanId, reportEvent) {
  var _a3;
  DEBUG_BUILD3 && logger2.log(`Sending CLS span (${clsValue})`);
  const startTime = msToSec((browserPerformanceTimeOrigin() || 0) + ((entry == null ? void 0 : entry.startTime) || 0));
  const routeName = getCurrentScope().getScopeData().transactionName;
  const name = entry ? htmlTreeAsString((_a3 = entry.sources[0]) == null ? void 0 : _a3.node) : "Layout shift";
  const attributes = {
    [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.http.browser.cls",
    [SEMANTIC_ATTRIBUTE_SENTRY_OP]: "ui.webvital.cls",
    [SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]: (entry == null ? void 0 : entry.duration) || 0,
    // attach the pageload span id to the CLS span so that we can link them in the UI
    "sentry.pageload.span_id": pageloadSpanId,
    // describes what triggered the web vital to be reported
    "sentry.report_event": reportEvent
  };
  if (entry == null ? void 0 : entry.sources) {
    entry.sources.forEach((source, index) => {
      attributes[`cls.source.${index + 1}`] = htmlTreeAsString(source.node);
    });
  }
  const span = startStandaloneWebVitalSpan({
    name,
    transaction: routeName,
    attributes,
    startTime
  });
  if (span) {
    span.addEvent("cls", {
      [SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]: "",
      [SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]: clsValue
    });
    span.end(startTime);
  }
}

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/lcp.js
function trackLcpAsStandaloneSpan() {
  let standaloneLcpValue = 0;
  let standaloneLcpEntry;
  if (!supportsWebVital("largest-contentful-paint")) {
    return;
  }
  const cleanupLcpHandler = addLcpInstrumentationHandler(({
    metric
  }) => {
    const entry = metric.entries[metric.entries.length - 1];
    if (!entry) {
      return;
    }
    standaloneLcpValue = metric.value;
    standaloneLcpEntry = entry;
  }, true);
  listenForWebVitalReportEvents((reportEvent, pageloadSpanId) => {
    _sendStandaloneLcpSpan(standaloneLcpValue, standaloneLcpEntry, pageloadSpanId, reportEvent);
    cleanupLcpHandler();
  });
}
function _sendStandaloneLcpSpan(lcpValue, entry, pageloadSpanId, reportEvent) {
  DEBUG_BUILD3 && logger2.log(`Sending LCP span (${lcpValue})`);
  const startTime = msToSec((browserPerformanceTimeOrigin() || 0) + ((entry == null ? void 0 : entry.startTime) || 0));
  const routeName = getCurrentScope().getScopeData().transactionName;
  const name = entry ? htmlTreeAsString(entry.element) : "Largest contentful paint";
  const attributes = {
    [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.http.browser.lcp",
    [SEMANTIC_ATTRIBUTE_SENTRY_OP]: "ui.webvital.lcp",
    [SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]: 0,
    // LCP is a point-in-time metric
    // attach the pageload span id to the LCP span so that we can link them in the UI
    "sentry.pageload.span_id": pageloadSpanId,
    // describes what triggered the web vital to be reported
    "sentry.report_event": reportEvent
  };
  if (entry) {
    entry.element && (attributes["lcp.element"] = htmlTreeAsString(entry.element));
    entry.id && (attributes["lcp.id"] = entry.id);
    entry.url && (attributes["lcp.url"] = entry.url.trim().slice(0, 200));
    entry.loadTime != null && (attributes["lcp.loadTime"] = entry.loadTime);
    entry.renderTime != null && (attributes["lcp.renderTime"] = entry.renderTime);
    entry.size != null && (attributes["lcp.size"] = entry.size);
  }
  const span = startStandaloneWebVitalSpan({
    name,
    transaction: routeName,
    attributes,
    startTime
  });
  if (span) {
    span.addEvent("lcp", {
      [SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]: "millisecond",
      [SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]: lcpValue
    });
    span.end(startTime);
  }
}

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/browserMetrics.js
var MAX_INT_AS_BYTES = 2147483647;
var _performanceCursor = 0;
var _measurements = {};
var _lcpEntry;
var _clsEntry;
function startTrackingWebVitals({
  recordClsStandaloneSpans,
  recordLcpStandaloneSpans
}) {
  const performance2 = getBrowserPerformanceAPI();
  if (performance2 && browserPerformanceTimeOrigin()) {
    if (performance2.mark) {
      WINDOW5.performance.mark("sentry-tracing-init");
    }
    const fidCleanupCallback = _trackFID();
    const lcpCleanupCallback = recordLcpStandaloneSpans ? trackLcpAsStandaloneSpan() : _trackLCP();
    const ttfbCleanupCallback = _trackTtfb();
    const clsCleanupCallback = recordClsStandaloneSpans ? trackClsAsStandaloneSpan() : _trackCLS();
    return () => {
      fidCleanupCallback();
      lcpCleanupCallback == null ? void 0 : lcpCleanupCallback();
      ttfbCleanupCallback();
      clsCleanupCallback == null ? void 0 : clsCleanupCallback();
    };
  }
  return () => void 0;
}
function startTrackingLongTasks() {
  addPerformanceInstrumentationHandler("longtask", ({
    entries
  }) => {
    const parent = getActiveSpan();
    if (!parent) {
      return;
    }
    const {
      op: parentOp,
      start_timestamp: parentStartTimestamp
    } = spanToJSON(parent);
    for (const entry of entries) {
      const startTime = msToSec(browserPerformanceTimeOrigin() + entry.startTime);
      const duration = msToSec(entry.duration);
      if (parentOp === "navigation" && parentStartTimestamp && startTime < parentStartTimestamp) {
        continue;
      }
      startAndEndSpan(parent, startTime, startTime + duration, {
        name: "Main UI thread blocked",
        op: "ui.long-task",
        attributes: {
          [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.browser.metrics"
        }
      });
    }
  });
}
function startTrackingLongAnimationFrames() {
  const observer = new PerformanceObserver((list) => {
    const parent = getActiveSpan();
    if (!parent) {
      return;
    }
    for (const entry of list.getEntries()) {
      if (!entry.scripts[0]) {
        continue;
      }
      const startTime = msToSec(browserPerformanceTimeOrigin() + entry.startTime);
      const {
        start_timestamp: parentStartTimestamp,
        op: parentOp
      } = spanToJSON(parent);
      if (parentOp === "navigation" && parentStartTimestamp && startTime < parentStartTimestamp) {
        continue;
      }
      const duration = msToSec(entry.duration);
      const attributes = {
        [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.browser.metrics"
      };
      const initialScript = entry.scripts[0];
      const {
        invoker,
        invokerType,
        sourceURL,
        sourceFunctionName,
        sourceCharPosition
      } = initialScript;
      attributes["browser.script.invoker"] = invoker;
      attributes["browser.script.invoker_type"] = invokerType;
      if (sourceURL) {
        attributes["code.filepath"] = sourceURL;
      }
      if (sourceFunctionName) {
        attributes["code.function"] = sourceFunctionName;
      }
      if (sourceCharPosition !== -1) {
        attributes["browser.script.source_char_position"] = sourceCharPosition;
      }
      startAndEndSpan(parent, startTime, startTime + duration, {
        name: "Main UI thread blocked",
        op: "ui.long-animation-frame",
        attributes
      });
    }
  });
  observer.observe({
    type: "long-animation-frame",
    buffered: true
  });
}
function startTrackingInteractions() {
  addPerformanceInstrumentationHandler("event", ({
    entries
  }) => {
    const parent = getActiveSpan();
    if (!parent) {
      return;
    }
    for (const entry of entries) {
      if (entry.name === "click") {
        const startTime = msToSec(browserPerformanceTimeOrigin() + entry.startTime);
        const duration = msToSec(entry.duration);
        const spanOptions = {
          name: htmlTreeAsString(entry.target),
          op: `ui.interaction.${entry.name}`,
          startTime,
          attributes: {
            [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.browser.metrics"
          }
        };
        const componentName = getComponentName(entry.target);
        if (componentName) {
          spanOptions.attributes["ui.component_name"] = componentName;
        }
        startAndEndSpan(parent, startTime, startTime + duration, spanOptions);
      }
    }
  });
}
function _trackCLS() {
  return addClsInstrumentationHandler(({
    metric
  }) => {
    const entry = metric.entries[metric.entries.length - 1];
    if (!entry) {
      return;
    }
    _measurements["cls"] = {
      value: metric.value,
      unit: ""
    };
    _clsEntry = entry;
  }, true);
}
function _trackLCP() {
  return addLcpInstrumentationHandler(({
    metric
  }) => {
    const entry = metric.entries[metric.entries.length - 1];
    if (!entry) {
      return;
    }
    _measurements["lcp"] = {
      value: metric.value,
      unit: "millisecond"
    };
    _lcpEntry = entry;
  }, true);
}
function _trackFID() {
  return addFidInstrumentationHandler(({
    metric
  }) => {
    const entry = metric.entries[metric.entries.length - 1];
    if (!entry) {
      return;
    }
    const timeOrigin = msToSec(browserPerformanceTimeOrigin());
    const startTime = msToSec(entry.startTime);
    _measurements["fid"] = {
      value: metric.value,
      unit: "millisecond"
    };
    _measurements["mark.fid"] = {
      value: timeOrigin + startTime,
      unit: "second"
    };
  });
}
function _trackTtfb() {
  return addTtfbInstrumentationHandler(({
    metric
  }) => {
    const entry = metric.entries[metric.entries.length - 1];
    if (!entry) {
      return;
    }
    _measurements["ttfb"] = {
      value: metric.value,
      unit: "millisecond"
    };
  });
}
function addPerformanceEntries(span, options) {
  const performance2 = getBrowserPerformanceAPI();
  const origin = browserPerformanceTimeOrigin();
  if (!(performance2 == null ? void 0 : performance2.getEntries) || !origin) {
    return;
  }
  const timeOrigin = msToSec(origin);
  const performanceEntries = performance2.getEntries();
  const {
    op,
    start_timestamp: transactionStartTime
  } = spanToJSON(span);
  performanceEntries.slice(_performanceCursor).forEach((entry) => {
    const startTime = msToSec(entry.startTime);
    const duration = msToSec(
      // Inexplicably, Chrome sometimes emits a negative duration. We need to work around this.
      // There is a SO post attempting to explain this, but it leaves one with open questions: https://stackoverflow.com/questions/23191918/peformance-getentries-and-negative-duration-display
      // The way we clamp the value is probably not accurate, since we have observed this happen for things that may take a while to load, like for example the replay worker.
      // TODO: Investigate why this happens and how to properly mitigate. For now, this is a workaround to prevent transactions being dropped due to negative duration spans.
      Math.max(0, entry.duration)
    );
    if (op === "navigation" && transactionStartTime && timeOrigin + startTime < transactionStartTime) {
      return;
    }
    switch (entry.entryType) {
      case "navigation": {
        _addNavigationSpans(span, entry, timeOrigin);
        break;
      }
      case "mark":
      case "paint":
      case "measure": {
        _addMeasureSpans(span, entry, startTime, duration, timeOrigin, options.ignorePerformanceApiSpans);
        const firstHidden = getVisibilityWatcher();
        const shouldRecord = entry.startTime < firstHidden.firstHiddenTime;
        if (entry.name === "first-paint" && shouldRecord) {
          _measurements["fp"] = {
            value: entry.startTime,
            unit: "millisecond"
          };
        }
        if (entry.name === "first-contentful-paint" && shouldRecord) {
          _measurements["fcp"] = {
            value: entry.startTime,
            unit: "millisecond"
          };
        }
        break;
      }
      case "resource": {
        _addResourceSpans(span, entry, entry.name, startTime, duration, timeOrigin, options.ignoreResourceSpans);
        break;
      }
    }
  });
  _performanceCursor = Math.max(performanceEntries.length - 1, 0);
  _trackNavigator(span);
  if (op === "pageload") {
    _addTtfbRequestTimeToMeasurements(_measurements);
    const fidMark = _measurements["mark.fid"];
    if (fidMark && _measurements["fid"]) {
      startAndEndSpan(span, fidMark.value, fidMark.value + msToSec(_measurements["fid"].value), {
        name: "first input delay",
        op: "ui.action",
        attributes: {
          [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.browser.metrics"
        }
      });
      delete _measurements["mark.fid"];
    }
    if (!("fcp" in _measurements) || !options.recordClsOnPageloadSpan) {
      delete _measurements.cls;
    }
    if (!options.recordLcpOnPageloadSpan) {
      delete _measurements.lcp;
    }
    Object.entries(_measurements).forEach(([measurementName, measurement]) => {
      setMeasurement(measurementName, measurement.value, measurement.unit);
    });
    span.setAttribute("performance.timeOrigin", timeOrigin);
    span.setAttribute("performance.activationStart", getActivationStart());
    _setWebVitalAttributes(span, options);
  }
  _lcpEntry = void 0;
  _clsEntry = void 0;
  _measurements = {};
}
function _addMeasureSpans(span, entry, startTime, duration, timeOrigin, ignorePerformanceApiSpans) {
  if (["mark", "measure"].includes(entry.entryType) && stringMatchesSomePattern(entry.name, ignorePerformanceApiSpans)) {
    return;
  }
  const navEntry = getNavigationEntry(false);
  const requestTime = msToSec(navEntry ? navEntry.requestStart : 0);
  const measureStartTimestamp = timeOrigin + Math.max(startTime, requestTime);
  const startTimeStamp = timeOrigin + startTime;
  const measureEndTimestamp = startTimeStamp + duration;
  const attributes = {
    [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.resource.browser.metrics"
  };
  if (measureStartTimestamp !== startTimeStamp) {
    attributes["sentry.browser.measure_happened_before_request"] = true;
    attributes["sentry.browser.measure_start_time"] = measureStartTimestamp;
  }
  _addDetailToSpanAttributes(attributes, entry);
  if (measureStartTimestamp <= measureEndTimestamp) {
    startAndEndSpan(span, measureStartTimestamp, measureEndTimestamp, {
      name: entry.name,
      op: entry.entryType,
      attributes
    });
  }
}
function _addDetailToSpanAttributes(attributes, performanceMeasure) {
  try {
    const detail = performanceMeasure.detail;
    if (!detail) {
      return;
    }
    if (typeof detail === "object") {
      for (const [key, value] of Object.entries(detail)) {
        if (value && isPrimitive(value)) {
          attributes[`sentry.browser.measure.detail.${key}`] = value;
        } else if (value !== void 0) {
          try {
            attributes[`sentry.browser.measure.detail.${key}`] = JSON.stringify(value);
          } catch {
          }
        }
      }
      return;
    }
    if (isPrimitive(detail)) {
      attributes["sentry.browser.measure.detail"] = detail;
      return;
    }
    try {
      attributes["sentry.browser.measure.detail"] = JSON.stringify(detail);
    } catch {
    }
  } catch {
  }
}
function _addNavigationSpans(span, entry, timeOrigin) {
  ["unloadEvent", "redirect", "domContentLoadedEvent", "loadEvent", "connect"].forEach((event) => {
    _addPerformanceNavigationTiming(span, entry, event, timeOrigin);
  });
  _addPerformanceNavigationTiming(span, entry, "secureConnection", timeOrigin, "TLS/SSL");
  _addPerformanceNavigationTiming(span, entry, "fetch", timeOrigin, "cache");
  _addPerformanceNavigationTiming(span, entry, "domainLookup", timeOrigin, "DNS");
  _addRequest(span, entry, timeOrigin);
}
function _addPerformanceNavigationTiming(span, entry, event, timeOrigin, name = event) {
  const eventEnd = _getEndPropertyNameForNavigationTiming(event);
  const end = entry[eventEnd];
  const start = entry[`${event}Start`];
  if (!start || !end) {
    return;
  }
  startAndEndSpan(span, timeOrigin + msToSec(start), timeOrigin + msToSec(end), {
    op: `browser.${name}`,
    name: entry.name,
    attributes: __spreadValues({
      [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.browser.metrics"
    }, event === "redirect" && entry.redirectCount != null ? {
      "http.redirect_count": entry.redirectCount
    } : {})
  });
}
function _getEndPropertyNameForNavigationTiming(event) {
  if (event === "secureConnection") {
    return "connectEnd";
  }
  if (event === "fetch") {
    return "domainLookupStart";
  }
  return `${event}End`;
}
function _addRequest(span, entry, timeOrigin) {
  const requestStartTimestamp = timeOrigin + msToSec(entry.requestStart);
  const responseEndTimestamp = timeOrigin + msToSec(entry.responseEnd);
  const responseStartTimestamp = timeOrigin + msToSec(entry.responseStart);
  if (entry.responseEnd) {
    startAndEndSpan(span, requestStartTimestamp, responseEndTimestamp, {
      op: "browser.request",
      name: entry.name,
      attributes: {
        [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.browser.metrics"
      }
    });
    startAndEndSpan(span, responseStartTimestamp, responseEndTimestamp, {
      op: "browser.response",
      name: entry.name,
      attributes: {
        [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.browser.metrics"
      }
    });
  }
}
function _addResourceSpans(span, entry, resourceUrl, startTime, duration, timeOrigin, ignoreResourceSpans) {
  if (entry.initiatorType === "xmlhttprequest" || entry.initiatorType === "fetch") {
    return;
  }
  const op = entry.initiatorType ? `resource.${entry.initiatorType}` : "resource.other";
  if (ignoreResourceSpans == null ? void 0 : ignoreResourceSpans.includes(op)) {
    return;
  }
  const parsedUrl = parseUrl(resourceUrl);
  const attributes = {
    [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.resource.browser.metrics"
  };
  setResourceEntrySizeData(attributes, entry, "transferSize", "http.response_transfer_size");
  setResourceEntrySizeData(attributes, entry, "encodedBodySize", "http.response_content_length");
  setResourceEntrySizeData(attributes, entry, "decodedBodySize", "http.decoded_response_content_length");
  const deliveryType = entry.deliveryType;
  if (deliveryType != null) {
    attributes["http.response_delivery_type"] = deliveryType;
  }
  const renderBlockingStatus = entry.renderBlockingStatus;
  if (renderBlockingStatus) {
    attributes["resource.render_blocking_status"] = renderBlockingStatus;
  }
  if (parsedUrl.protocol) {
    attributes["url.scheme"] = parsedUrl.protocol.split(":").pop();
  }
  if (parsedUrl.host) {
    attributes["server.address"] = parsedUrl.host;
  }
  attributes["url.same_origin"] = resourceUrl.includes(WINDOW5.location.origin);
  if (entry.nextHopProtocol != null) {
    const {
      name,
      version: version2
    } = extractNetworkProtocol(entry.nextHopProtocol);
    attributes["network.protocol.name"] = name;
    attributes["network.protocol.version"] = version2;
  }
  const startTimestamp = timeOrigin + startTime;
  const endTimestamp = startTimestamp + duration;
  startAndEndSpan(span, startTimestamp, endTimestamp, {
    name: resourceUrl.replace(WINDOW5.location.origin, ""),
    op,
    attributes
  });
}
function _trackNavigator(span) {
  const navigator2 = WINDOW5.navigator;
  if (!navigator2) {
    return;
  }
  const connection = navigator2.connection;
  if (connection) {
    if (connection.effectiveType) {
      span.setAttribute("effectiveConnectionType", connection.effectiveType);
    }
    if (connection.type) {
      span.setAttribute("connectionType", connection.type);
    }
    if (isMeasurementValue(connection.rtt)) {
      _measurements["connection.rtt"] = {
        value: connection.rtt,
        unit: "millisecond"
      };
    }
  }
  if (isMeasurementValue(navigator2.deviceMemory)) {
    span.setAttribute("deviceMemory", `${navigator2.deviceMemory} GB`);
  }
  if (isMeasurementValue(navigator2.hardwareConcurrency)) {
    span.setAttribute("hardwareConcurrency", String(navigator2.hardwareConcurrency));
  }
}
function _setWebVitalAttributes(span, options) {
  if (_lcpEntry && options.recordLcpOnPageloadSpan) {
    if (_lcpEntry.element) {
      span.setAttribute("lcp.element", htmlTreeAsString(_lcpEntry.element));
    }
    if (_lcpEntry.id) {
      span.setAttribute("lcp.id", _lcpEntry.id);
    }
    if (_lcpEntry.url) {
      span.setAttribute("lcp.url", _lcpEntry.url.trim().slice(0, 200));
    }
    if (_lcpEntry.loadTime != null) {
      span.setAttribute("lcp.loadTime", _lcpEntry.loadTime);
    }
    if (_lcpEntry.renderTime != null) {
      span.setAttribute("lcp.renderTime", _lcpEntry.renderTime);
    }
    span.setAttribute("lcp.size", _lcpEntry.size);
  }
  if ((_clsEntry == null ? void 0 : _clsEntry.sources) && options.recordClsOnPageloadSpan) {
    _clsEntry.sources.forEach((source, index) => span.setAttribute(`cls.source.${index + 1}`, htmlTreeAsString(source.node)));
  }
}
function setResourceEntrySizeData(attributes, entry, key, dataKey) {
  const entryVal = entry[key];
  if (entryVal != null && entryVal < MAX_INT_AS_BYTES) {
    attributes[dataKey] = entryVal;
  }
}
function _addTtfbRequestTimeToMeasurements(_measurements2) {
  const navEntry = getNavigationEntry(false);
  if (!navEntry) {
    return;
  }
  const {
    responseStart,
    requestStart
  } = navEntry;
  if (requestStart <= responseStart) {
    _measurements2["ttfb.requestTime"] = {
      value: responseStart - requestStart,
      unit: "millisecond"
    };
  }
}

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/elementTiming.js
function startTrackingElementTiming() {
  const performance2 = getBrowserPerformanceAPI();
  if (performance2 && browserPerformanceTimeOrigin()) {
    return addPerformanceInstrumentationHandler("element", _onElementTiming);
  }
  return () => void 0;
}
var _onElementTiming = ({
  entries
}) => {
  const activeSpan = getActiveSpan();
  const rootSpan = activeSpan ? getRootSpan(activeSpan) : void 0;
  const transactionName = rootSpan ? spanToJSON(rootSpan).description : getCurrentScope().getScopeData().transactionName;
  entries.forEach((entry) => {
    var _a3, _b;
    const elementEntry = entry;
    if (!elementEntry.identifier) {
      return;
    }
    const paintType = elementEntry.name;
    const renderTime = elementEntry.renderTime;
    const loadTime = elementEntry.loadTime;
    const [spanStartTime, spanStartTimeSource] = loadTime ? [msToSec(loadTime), "load-time"] : renderTime ? [msToSec(renderTime), "render-time"] : [timestampInSeconds(), "entry-emission"];
    const duration = paintType === "image-paint" ? (
      // for image paints, we can acually get a duration because image-paint entries also have a `loadTime`
      // and `renderTime`. `loadTime` is the time when the image finished loading and `renderTime` is the
      // time when the image finished rendering.
      msToSec(Math.max(0, (renderTime != null ? renderTime : 0) - (loadTime != null ? loadTime : 0)))
    ) : (
      // for `'text-paint'` entries, we can't get a duration because the `loadTime` is always zero.
      0
    );
    const attributes = {
      [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.browser.elementtiming",
      [SEMANTIC_ATTRIBUTE_SENTRY_OP]: "ui.elementtiming",
      // name must be user-entered, so we can assume low cardinality
      [SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: "component",
      // recording the source of the span start time, as it varies depending on available data
      "sentry.span_start_time_source": spanStartTimeSource,
      "sentry.transaction_name": transactionName,
      "element.id": elementEntry.id,
      "element.type": ((_b = (_a3 = elementEntry.element) == null ? void 0 : _a3.tagName) == null ? void 0 : _b.toLowerCase()) || "unknown",
      "element.size": elementEntry.naturalWidth && elementEntry.naturalHeight ? `${elementEntry.naturalWidth}x${elementEntry.naturalHeight}` : void 0,
      "element.render_time": renderTime,
      "element.load_time": loadTime,
      // `url` is `0`(number) for text paints (hence we fall back to undefined)
      "element.url": elementEntry.url || void 0,
      "element.identifier": elementEntry.identifier,
      "element.paint_type": paintType
    };
    startSpan({
      name: `element[${elementEntry.identifier}]`,
      attributes,
      startTime: spanStartTime,
      onlyIfParent: true
    }, (span) => {
      span.end(spanStartTime + duration);
    });
  });
};

// node_modules/@sentry-internal/browser-utils/build/esm/instrument/dom.js
var DEBOUNCE_DURATION = 1e3;
var debounceTimerID;
var lastCapturedEventType;
var lastCapturedEventTargetId;
function addClickKeypressInstrumentationHandler(handler) {
  const type = "dom";
  addHandler(type, handler);
  maybeInstrument(type, instrumentDOM);
}
function instrumentDOM() {
  if (!WINDOW5.document) {
    return;
  }
  const triggerDOMHandler = triggerHandlers.bind(null, "dom");
  const globalDOMEventHandler = makeDOMEventHandler(triggerDOMHandler, true);
  WINDOW5.document.addEventListener("click", globalDOMEventHandler, false);
  WINDOW5.document.addEventListener("keypress", globalDOMEventHandler, false);
  ["EventTarget", "Node"].forEach((target) => {
    var _a3, _b;
    const globalObject = WINDOW5;
    const proto = (_a3 = globalObject[target]) == null ? void 0 : _a3.prototype;
    if (!((_b = proto == null ? void 0 : proto.hasOwnProperty) == null ? void 0 : _b.call(proto, "addEventListener"))) {
      return;
    }
    fill(proto, "addEventListener", function(originalAddEventListener) {
      return function(type, listener, options) {
        if (type === "click" || type == "keypress") {
          try {
            const handlers4 = this.__sentry_instrumentation_handlers__ = this.__sentry_instrumentation_handlers__ || {};
            const handlerForType = handlers4[type] = handlers4[type] || {
              refCount: 0
            };
            if (!handlerForType.handler) {
              const handler = makeDOMEventHandler(triggerDOMHandler);
              handlerForType.handler = handler;
              originalAddEventListener.call(this, type, handler, options);
            }
            handlerForType.refCount++;
          } catch (e3) {
          }
        }
        return originalAddEventListener.call(this, type, listener, options);
      };
    });
    fill(proto, "removeEventListener", function(originalRemoveEventListener) {
      return function(type, listener, options) {
        if (type === "click" || type == "keypress") {
          try {
            const handlers4 = this.__sentry_instrumentation_handlers__ || {};
            const handlerForType = handlers4[type];
            if (handlerForType) {
              handlerForType.refCount--;
              if (handlerForType.refCount <= 0) {
                originalRemoveEventListener.call(this, type, handlerForType.handler, options);
                handlerForType.handler = void 0;
                delete handlers4[type];
              }
              if (Object.keys(handlers4).length === 0) {
                delete this.__sentry_instrumentation_handlers__;
              }
            }
          } catch (e3) {
          }
        }
        return originalRemoveEventListener.call(this, type, listener, options);
      };
    });
  });
}
function isSimilarToLastCapturedEvent(event) {
  if (event.type !== lastCapturedEventType) {
    return false;
  }
  try {
    if (!event.target || event.target._sentryId !== lastCapturedEventTargetId) {
      return false;
    }
  } catch (e3) {
  }
  return true;
}
function shouldSkipDOMEvent(eventType, target) {
  if (eventType !== "keypress") {
    return false;
  }
  if (!(target == null ? void 0 : target.tagName)) {
    return true;
  }
  if (target.tagName === "INPUT" || target.tagName === "TEXTAREA" || target.isContentEditable) {
    return false;
  }
  return true;
}
function makeDOMEventHandler(handler, globalListener = false) {
  return (event) => {
    if (!event || event["_sentryCaptured"]) {
      return;
    }
    const target = getEventTarget(event);
    if (shouldSkipDOMEvent(event.type, target)) {
      return;
    }
    addNonEnumerableProperty(event, "_sentryCaptured", true);
    if (target && !target._sentryId) {
      addNonEnumerableProperty(target, "_sentryId", uuid4());
    }
    const name = event.type === "keypress" ? "input" : event.type;
    if (!isSimilarToLastCapturedEvent(event)) {
      const handlerData = {
        event,
        name,
        global: globalListener
      };
      handler(handlerData);
      lastCapturedEventType = event.type;
      lastCapturedEventTargetId = target ? target._sentryId : void 0;
    }
    clearTimeout(debounceTimerID);
    debounceTimerID = WINDOW5.setTimeout(() => {
      lastCapturedEventTargetId = void 0;
      lastCapturedEventType = void 0;
    }, DEBOUNCE_DURATION);
  };
}
function getEventTarget(event) {
  try {
    return event.target;
  } catch (e3) {
    return null;
  }
}

// node_modules/@sentry-internal/browser-utils/build/esm/instrument/history.js
var lastHref;
function addHistoryInstrumentationHandler(handler) {
  const type = "history";
  addHandler(type, handler);
  maybeInstrument(type, instrumentHistory);
}
function instrumentHistory() {
  WINDOW5.addEventListener("popstate", () => {
    const to = WINDOW5.location.href;
    const from = lastHref;
    lastHref = to;
    if (from === to) {
      return;
    }
    const handlerData = {
      from,
      to
    };
    triggerHandlers("history", handlerData);
  });
  if (!supportsHistory()) {
    return;
  }
  function historyReplacementFunction(originalHistoryFunction) {
    return function(...args) {
      const url = args.length > 2 ? args[2] : void 0;
      if (url) {
        const from = lastHref;
        const to = getAbsoluteUrl(String(url));
        lastHref = to;
        if (from === to) {
          return originalHistoryFunction.apply(this, args);
        }
        const handlerData = {
          from,
          to
        };
        triggerHandlers("history", handlerData);
      }
      return originalHistoryFunction.apply(this, args);
    };
  }
  fill(WINDOW5.history, "pushState", historyReplacementFunction);
  fill(WINDOW5.history, "replaceState", historyReplacementFunction);
}
function getAbsoluteUrl(urlOrPath) {
  try {
    const url = new URL(urlOrPath, WINDOW5.location.origin);
    return url.toString();
  } catch {
    return urlOrPath;
  }
}

// node_modules/@sentry-internal/browser-utils/build/esm/getNativeImplementation.js
var cachedImplementations = {};
function getNativeImplementation(name) {
  const cached = cachedImplementations[name];
  if (cached) {
    return cached;
  }
  let impl = WINDOW5[name];
  if (isNativeFunction(impl)) {
    return cachedImplementations[name] = impl.bind(WINDOW5);
  }
  const document2 = WINDOW5.document;
  if (document2 && typeof document2.createElement === "function") {
    try {
      const sandbox = document2.createElement("iframe");
      sandbox.hidden = true;
      document2.head.appendChild(sandbox);
      const contentWindow = sandbox.contentWindow;
      if (contentWindow == null ? void 0 : contentWindow[name]) {
        impl = contentWindow[name];
      }
      document2.head.removeChild(sandbox);
    } catch (e3) {
      DEBUG_BUILD3 && logger2.warn(`Could not create sandbox iframe for ${name} check, bailing to window.${name}: `, e3);
    }
  }
  if (!impl) {
    return impl;
  }
  return cachedImplementations[name] = impl.bind(WINDOW5);
}
function clearCachedImplementation(name) {
  cachedImplementations[name] = void 0;
}
function setTimeout2(...rest) {
  return getNativeImplementation("setTimeout")(...rest);
}

// node_modules/@sentry-internal/browser-utils/build/esm/instrument/xhr.js
var SENTRY_XHR_DATA_KEY = "__sentry_xhr_v3__";
function addXhrInstrumentationHandler(handler) {
  const type = "xhr";
  addHandler(type, handler);
  maybeInstrument(type, instrumentXHR);
}
function instrumentXHR() {
  if (!WINDOW5.XMLHttpRequest) {
    return;
  }
  const xhrproto = XMLHttpRequest.prototype;
  xhrproto.open = new Proxy(xhrproto.open, {
    apply(originalOpen, xhrOpenThisArg, xhrOpenArgArray) {
      const virtualError = new Error();
      const startTimestamp = timestampInSeconds() * 1e3;
      const method = isString(xhrOpenArgArray[0]) ? xhrOpenArgArray[0].toUpperCase() : void 0;
      const url = parseXhrUrlArg(xhrOpenArgArray[1]);
      if (!method || !url) {
        return originalOpen.apply(xhrOpenThisArg, xhrOpenArgArray);
      }
      xhrOpenThisArg[SENTRY_XHR_DATA_KEY] = {
        method,
        url,
        request_headers: {}
      };
      if (method === "POST" && url.match(/sentry_key/)) {
        xhrOpenThisArg.__sentry_own_request__ = true;
      }
      const onreadystatechangeHandler = () => {
        const xhrInfo = xhrOpenThisArg[SENTRY_XHR_DATA_KEY];
        if (!xhrInfo) {
          return;
        }
        if (xhrOpenThisArg.readyState === 4) {
          try {
            xhrInfo.status_code = xhrOpenThisArg.status;
          } catch (e3) {
          }
          const handlerData = {
            endTimestamp: timestampInSeconds() * 1e3,
            startTimestamp,
            xhr: xhrOpenThisArg,
            virtualError
          };
          triggerHandlers("xhr", handlerData);
        }
      };
      if ("onreadystatechange" in xhrOpenThisArg && typeof xhrOpenThisArg.onreadystatechange === "function") {
        xhrOpenThisArg.onreadystatechange = new Proxy(xhrOpenThisArg.onreadystatechange, {
          apply(originalOnreadystatechange, onreadystatechangeThisArg, onreadystatechangeArgArray) {
            onreadystatechangeHandler();
            return originalOnreadystatechange.apply(onreadystatechangeThisArg, onreadystatechangeArgArray);
          }
        });
      } else {
        xhrOpenThisArg.addEventListener("readystatechange", onreadystatechangeHandler);
      }
      xhrOpenThisArg.setRequestHeader = new Proxy(xhrOpenThisArg.setRequestHeader, {
        apply(originalSetRequestHeader, setRequestHeaderThisArg, setRequestHeaderArgArray) {
          const [header, value] = setRequestHeaderArgArray;
          const xhrInfo = setRequestHeaderThisArg[SENTRY_XHR_DATA_KEY];
          if (xhrInfo && isString(header) && isString(value)) {
            xhrInfo.request_headers[header.toLowerCase()] = value;
          }
          return originalSetRequestHeader.apply(setRequestHeaderThisArg, setRequestHeaderArgArray);
        }
      });
      return originalOpen.apply(xhrOpenThisArg, xhrOpenArgArray);
    }
  });
  xhrproto.send = new Proxy(xhrproto.send, {
    apply(originalSend, sendThisArg, sendArgArray) {
      const sentryXhrData = sendThisArg[SENTRY_XHR_DATA_KEY];
      if (!sentryXhrData) {
        return originalSend.apply(sendThisArg, sendArgArray);
      }
      if (sendArgArray[0] !== void 0) {
        sentryXhrData.body = sendArgArray[0];
      }
      const handlerData = {
        startTimestamp: timestampInSeconds() * 1e3,
        xhr: sendThisArg
      };
      triggerHandlers("xhr", handlerData);
      return originalSend.apply(sendThisArg, sendArgArray);
    }
  });
}
function parseXhrUrlArg(url) {
  if (isString(url)) {
    return url;
  }
  try {
    return url.toString();
  } catch {
  }
  return void 0;
}

// node_modules/@sentry-internal/browser-utils/build/esm/networkUtils.js
function serializeFormData(formData) {
  return new URLSearchParams(formData).toString();
}
function getBodyString(body, _logger = logger2) {
  try {
    if (typeof body === "string") {
      return [body];
    }
    if (body instanceof URLSearchParams) {
      return [body.toString()];
    }
    if (body instanceof FormData) {
      return [serializeFormData(body)];
    }
    if (!body) {
      return [void 0];
    }
  } catch (error2) {
    DEBUG_BUILD3 && _logger.error(error2, "Failed to serialize body", body);
    return [void 0, "BODY_PARSE_ERROR"];
  }
  DEBUG_BUILD3 && _logger.info("Skipping network body because of body type", body);
  return [void 0, "UNPARSEABLE_BODY_TYPE"];
}
function getFetchRequestArgBody(fetchArgs = []) {
  if (fetchArgs.length !== 2 || typeof fetchArgs[1] !== "object") {
    return void 0;
  }
  return fetchArgs[1].body;
}

// node_modules/@sentry-internal/browser-utils/build/esm/metrics/inp.js
var LAST_INTERACTIONS = [];
var INTERACTIONS_SPAN_MAP = /* @__PURE__ */ new Map();
var MAX_PLAUSIBLE_INP_DURATION = 60;
function startTrackingINP() {
  const performance2 = getBrowserPerformanceAPI();
  if (performance2 && browserPerformanceTimeOrigin()) {
    const inpCallback = _trackINP();
    return () => {
      inpCallback();
    };
  }
  return () => void 0;
}
var INP_ENTRY_MAP = {
  click: "click",
  pointerdown: "click",
  pointerup: "click",
  mousedown: "click",
  mouseup: "click",
  touchstart: "click",
  touchend: "click",
  mouseover: "hover",
  mouseout: "hover",
  mouseenter: "hover",
  mouseleave: "hover",
  pointerover: "hover",
  pointerout: "hover",
  pointerenter: "hover",
  pointerleave: "hover",
  dragstart: "drag",
  dragend: "drag",
  drag: "drag",
  dragenter: "drag",
  dragleave: "drag",
  dragover: "drag",
  drop: "drag",
  keydown: "press",
  keyup: "press",
  keypress: "press",
  input: "press"
};
function _trackINP() {
  return addInpInstrumentationHandler(_onInp);
}
var _onInp = ({
  metric
}) => {
  if (metric.value == void 0) {
    return;
  }
  const duration = msToSec(metric.value);
  if (duration > MAX_PLAUSIBLE_INP_DURATION) {
    return;
  }
  const entry = metric.entries.find((entry2) => entry2.duration === metric.value && INP_ENTRY_MAP[entry2.name]);
  if (!entry) {
    return;
  }
  const {
    interactionId
  } = entry;
  const interactionType = INP_ENTRY_MAP[entry.name];
  const startTime = msToSec(browserPerformanceTimeOrigin() + entry.startTime);
  const activeSpan = getActiveSpan();
  const rootSpan = activeSpan ? getRootSpan(activeSpan) : void 0;
  const cachedSpan = interactionId != null ? INTERACTIONS_SPAN_MAP.get(interactionId) : void 0;
  const spanToUse = cachedSpan || rootSpan;
  const routeName = spanToUse ? spanToJSON(spanToUse).description : getCurrentScope().getScopeData().transactionName;
  const name = htmlTreeAsString(entry.target);
  const attributes = {
    [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.http.browser.inp",
    [SEMANTIC_ATTRIBUTE_SENTRY_OP]: `ui.interaction.${interactionType}`,
    [SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]: entry.duration
  };
  const span = startStandaloneWebVitalSpan({
    name,
    transaction: routeName,
    attributes,
    startTime
  });
  if (span) {
    span.addEvent("inp", {
      [SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]: "millisecond",
      [SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]: metric.value
    });
    span.end(startTime + duration);
  }
};
function registerInpInteractionListener() {
  const handleEntries = ({
    entries
  }) => {
    const activeSpan = getActiveSpan();
    const activeRootSpan = activeSpan && getRootSpan(activeSpan);
    entries.forEach((entry) => {
      if (!isPerformanceEventTiming(entry) || !activeRootSpan) {
        return;
      }
      const interactionId = entry.interactionId;
      if (interactionId == null) {
        return;
      }
      if (INTERACTIONS_SPAN_MAP.has(interactionId)) {
        return;
      }
      if (LAST_INTERACTIONS.length > 10) {
        const last = LAST_INTERACTIONS.shift();
        INTERACTIONS_SPAN_MAP.delete(last);
      }
      LAST_INTERACTIONS.push(interactionId);
      INTERACTIONS_SPAN_MAP.set(interactionId, activeRootSpan);
    });
  };
  addPerformanceInstrumentationHandler("event", handleEntries);
  addPerformanceInstrumentationHandler("first-input", handleEntries);
}

// node_modules/@sentry/browser/build/npm/esm/transports/fetch.js
function makeFetchTransport(options, nativeFetch = getNativeImplementation("fetch")) {
  let pendingBodySize = 0;
  let pendingCount = 0;
  function makeRequest(request) {
    const requestSize = request.body.length;
    pendingBodySize += requestSize;
    pendingCount++;
    const requestOptions = __spreadValues({
      body: request.body,
      method: "POST",
      referrerPolicy: "strict-origin",
      headers: options.headers,
      // Outgoing requests are usually cancelled when navigating to a different page, causing a "TypeError: Failed to
      // fetch" error and sending a "network_error" client-outcome - in Chrome, the request status shows "(cancelled)".
      // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're
      // frequently sending events right before the user is switching pages (eg. when finishing navigation transactions).
      // Gotchas:
      // - `keepalive` isn't supported by Firefox
      // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch):
      //   If the sum of contentLength and inflightKeepaliveBytes is greater than 64 kibibytes, then return a network error.
      //   We will therefore only activate the flag when we're below that limit.
      // There is also a limit of requests that can be open at the same time, so we also limit this to 15
      // See https://github.com/getsentry/sentry-javascript/pull/7553 for details
      keepalive: pendingBodySize <= 6e4 && pendingCount < 15
    }, options.fetchOptions);
    if (!nativeFetch) {
      clearCachedImplementation("fetch");
      return rejectedSyncPromise("No fetch implementation available");
    }
    try {
      return nativeFetch(options.url, requestOptions).then((response) => {
        pendingBodySize -= requestSize;
        pendingCount--;
        return {
          statusCode: response.status,
          headers: {
            "x-sentry-rate-limits": response.headers.get("X-Sentry-Rate-Limits"),
            "retry-after": response.headers.get("Retry-After")
          }
        };
      });
    } catch (e3) {
      clearCachedImplementation("fetch");
      pendingBodySize -= requestSize;
      pendingCount--;
      return rejectedSyncPromise(e3);
    }
  }
  return createTransport(options, makeRequest);
}

// node_modules/@sentry/browser/build/npm/esm/stack-parsers.js
var CHROME_PRIORITY = 30;
var GECKO_PRIORITY = 50;
function createFrame(filename, func, lineno, colno) {
  const frame = {
    filename,
    function: func === "<anonymous>" ? UNKNOWN_FUNCTION : func,
    in_app: true
    // All browser frames are considered in_app
  };
  if (lineno !== void 0) {
    frame.lineno = lineno;
  }
  if (colno !== void 0) {
    frame.colno = colno;
  }
  return frame;
}
var chromeRegexNoFnName = /^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i;
var chromeRegex = /^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;
var chromeEvalRegex = /\((\S*)(?::(\d+))(?::(\d+))\)/;
var chromeStackParserFn = (line) => {
  const noFnParts = chromeRegexNoFnName.exec(line);
  if (noFnParts) {
    const [, filename, line2, col] = noFnParts;
    return createFrame(filename, UNKNOWN_FUNCTION, +line2, +col);
  }
  const parts = chromeRegex.exec(line);
  if (parts) {
    const isEval = parts[2] && parts[2].indexOf("eval") === 0;
    if (isEval) {
      const subMatch = chromeEvalRegex.exec(parts[2]);
      if (subMatch) {
        parts[2] = subMatch[1];
        parts[3] = subMatch[2];
        parts[4] = subMatch[3];
      }
    }
    const [func, filename] = extractSafariExtensionDetails(parts[1] || UNKNOWN_FUNCTION, parts[2]);
    return createFrame(filename, func, parts[3] ? +parts[3] : void 0, parts[4] ? +parts[4] : void 0);
  }
  return;
};
var chromeStackLineParser = [CHROME_PRIORITY, chromeStackParserFn];
var geckoREgex = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i;
var geckoEvalRegex = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i;
var gecko = (line) => {
  const parts = geckoREgex.exec(line);
  if (parts) {
    const isEval = parts[3] && parts[3].indexOf(" > eval") > -1;
    if (isEval) {
      const subMatch = geckoEvalRegex.exec(parts[3]);
      if (subMatch) {
        parts[1] = parts[1] || "eval";
        parts[3] = subMatch[1];
        parts[4] = subMatch[2];
        parts[5] = "";
      }
    }
    let filename = parts[3];
    let func = parts[1] || UNKNOWN_FUNCTION;
    [func, filename] = extractSafariExtensionDetails(func, filename);
    return createFrame(filename, func, parts[4] ? +parts[4] : void 0, parts[5] ? +parts[5] : void 0);
  }
  return;
};
var geckoStackLineParser = [GECKO_PRIORITY, gecko];
var defaultStackLineParsers = [chromeStackLineParser, geckoStackLineParser];
var defaultStackParser = createStackParser(...defaultStackLineParsers);
var extractSafariExtensionDetails = (func, filename) => {
  const isSafariExtension = func.indexOf("safari-extension") !== -1;
  const isSafariWebExtension = func.indexOf("safari-web-extension") !== -1;
  return isSafariExtension || isSafariWebExtension ? [func.indexOf("@") !== -1 ? func.split("@")[0] : UNKNOWN_FUNCTION, isSafariExtension ? `safari-extension:${filename}` : `safari-web-extension:${filename}`] : [func, filename];
};

// node_modules/@sentry/browser/build/npm/esm/debug-build.js
var DEBUG_BUILD4 = typeof __SENTRY_DEBUG__ === "undefined" || __SENTRY_DEBUG__;

// node_modules/@sentry/browser/build/npm/esm/integrations/breadcrumbs.js
var MAX_ALLOWED_STRING_LENGTH = 1024;
var INTEGRATION_NAME4 = "Breadcrumbs";
var _breadcrumbsIntegration = (options = {}) => {
  const _options = __spreadValues({
    console: true,
    dom: true,
    fetch: true,
    history: true,
    sentry: true,
    xhr: true
  }, options);
  return {
    name: INTEGRATION_NAME4,
    setup(client) {
      if (_options.console) {
        addConsoleInstrumentationHandler(_getConsoleBreadcrumbHandler(client));
      }
      if (_options.dom) {
        addClickKeypressInstrumentationHandler(_getDomBreadcrumbHandler(client, _options.dom));
      }
      if (_options.xhr) {
        addXhrInstrumentationHandler(_getXhrBreadcrumbHandler(client));
      }
      if (_options.fetch) {
        addFetchInstrumentationHandler(_getFetchBreadcrumbHandler(client));
      }
      if (_options.history) {
        addHistoryInstrumentationHandler(_getHistoryBreadcrumbHandler(client));
      }
      if (_options.sentry) {
        client.on("beforeSendEvent", _getSentryBreadcrumbHandler(client));
      }
    }
  };
};
var breadcrumbsIntegration = defineIntegration(_breadcrumbsIntegration);
function _getSentryBreadcrumbHandler(client) {
  return function addSentryBreadcrumb(event) {
    if (getClient() !== client) {
      return;
    }
    addBreadcrumb({
      category: `sentry.${event.type === "transaction" ? "transaction" : "event"}`,
      event_id: event.event_id,
      level: event.level,
      message: getEventDescription(event)
    }, {
      event
    });
  };
}
function _getDomBreadcrumbHandler(client, dom) {
  return function _innerDomBreadcrumb(handlerData) {
    if (getClient() !== client) {
      return;
    }
    let target;
    let componentName;
    let keyAttrs = typeof dom === "object" ? dom.serializeAttribute : void 0;
    let maxStringLength = typeof dom === "object" && typeof dom.maxStringLength === "number" ? dom.maxStringLength : void 0;
    if (maxStringLength && maxStringLength > MAX_ALLOWED_STRING_LENGTH) {
      DEBUG_BUILD4 && logger2.warn(`\`dom.maxStringLength\` cannot exceed ${MAX_ALLOWED_STRING_LENGTH}, but a value of ${maxStringLength} was configured. Sentry will use ${MAX_ALLOWED_STRING_LENGTH} instead.`);
      maxStringLength = MAX_ALLOWED_STRING_LENGTH;
    }
    if (typeof keyAttrs === "string") {
      keyAttrs = [keyAttrs];
    }
    try {
      const event = handlerData.event;
      const element = _isEvent(event) ? event.target : event;
      target = htmlTreeAsString(element, {
        keyAttrs,
        maxStringLength
      });
      componentName = getComponentName(element);
    } catch (e3) {
      target = "<unknown>";
    }
    if (target.length === 0) {
      return;
    }
    const breadcrumb = {
      category: `ui.${handlerData.name}`,
      message: target
    };
    if (componentName) {
      breadcrumb.data = {
        "ui.component_name": componentName
      };
    }
    addBreadcrumb(breadcrumb, {
      event: handlerData.event,
      name: handlerData.name,
      global: handlerData.global
    });
  };
}
function _getConsoleBreadcrumbHandler(client) {
  return function _consoleBreadcrumb(handlerData) {
    if (getClient() !== client) {
      return;
    }
    const breadcrumb = {
      category: "console",
      data: {
        arguments: handlerData.args,
        logger: "console"
      },
      level: severityLevelFromString(handlerData.level),
      message: safeJoin(handlerData.args, " ")
    };
    if (handlerData.level === "assert") {
      if (handlerData.args[0] === false) {
        breadcrumb.message = `Assertion failed: ${safeJoin(handlerData.args.slice(1), " ") || "console.assert"}`;
        breadcrumb.data.arguments = handlerData.args.slice(1);
      } else {
        return;
      }
    }
    addBreadcrumb(breadcrumb, {
      input: handlerData.args,
      level: handlerData.level
    });
  };
}
function _getXhrBreadcrumbHandler(client) {
  return function _xhrBreadcrumb(handlerData) {
    if (getClient() !== client) {
      return;
    }
    const {
      startTimestamp,
      endTimestamp
    } = handlerData;
    const sentryXhrData = handlerData.xhr[SENTRY_XHR_DATA_KEY];
    if (!startTimestamp || !endTimestamp || !sentryXhrData) {
      return;
    }
    const {
      method,
      url,
      status_code,
      body
    } = sentryXhrData;
    const data = {
      method,
      url,
      status_code
    };
    const hint = {
      xhr: handlerData.xhr,
      input: body,
      startTimestamp,
      endTimestamp
    };
    const breadcrumb = {
      category: "xhr",
      data,
      type: "http",
      level: getBreadcrumbLogLevelFromHttpStatusCode(status_code)
    };
    client.emit("beforeOutgoingRequestBreadcrumb", breadcrumb, hint);
    addBreadcrumb(breadcrumb, hint);
  };
}
function _getFetchBreadcrumbHandler(client) {
  return function _fetchBreadcrumb(handlerData) {
    if (getClient() !== client) {
      return;
    }
    const {
      startTimestamp,
      endTimestamp
    } = handlerData;
    if (!endTimestamp) {
      return;
    }
    if (handlerData.fetchData.url.match(/sentry_key/) && handlerData.fetchData.method === "POST") {
      return;
    }
    ({
      method: handlerData.fetchData.method,
      url: handlerData.fetchData.url
    });
    if (handlerData.error) {
      const data = handlerData.fetchData;
      const hint = {
        data: handlerData.error,
        input: handlerData.args,
        startTimestamp,
        endTimestamp
      };
      const breadcrumb = {
        category: "fetch",
        data,
        level: "error",
        type: "http"
      };
      client.emit("beforeOutgoingRequestBreadcrumb", breadcrumb, hint);
      addBreadcrumb(breadcrumb, hint);
    } else {
      const response = handlerData.response;
      const data = __spreadProps(__spreadValues({}, handlerData.fetchData), {
        status_code: response == null ? void 0 : response.status
      });
      handlerData.fetchData.request_body_size;
      handlerData.fetchData.response_body_size;
      response == null ? void 0 : response.status;
      const hint = {
        input: handlerData.args,
        response,
        startTimestamp,
        endTimestamp
      };
      const breadcrumb = {
        category: "fetch",
        data,
        type: "http",
        level: getBreadcrumbLogLevelFromHttpStatusCode(data.status_code)
      };
      client.emit("beforeOutgoingRequestBreadcrumb", breadcrumb, hint);
      addBreadcrumb(breadcrumb, hint);
    }
  };
}
function _getHistoryBreadcrumbHandler(client) {
  return function _historyBreadcrumb(handlerData) {
    if (getClient() !== client) {
      return;
    }
    let from = handlerData.from;
    let to = handlerData.to;
    const parsedLoc = parseUrl(WINDOW4.location.href);
    let parsedFrom = from ? parseUrl(from) : void 0;
    const parsedTo = parseUrl(to);
    if (!(parsedFrom == null ? void 0 : parsedFrom.path)) {
      parsedFrom = parsedLoc;
    }
    if (parsedLoc.protocol === parsedTo.protocol && parsedLoc.host === parsedTo.host) {
      to = parsedTo.relative;
    }
    if (parsedLoc.protocol === parsedFrom.protocol && parsedLoc.host === parsedFrom.host) {
      from = parsedFrom.relative;
    }
    addBreadcrumb({
      category: "navigation",
      data: {
        from,
        to
      }
    });
  };
}
function _isEvent(event) {
  return !!event && !!event.target;
}

// node_modules/@sentry/browser/build/npm/esm/integrations/browserapierrors.js
var DEFAULT_EVENT_TARGET = ["EventTarget", "Window", "Node", "ApplicationCache", "AudioTrackList", "BroadcastChannel", "ChannelMergerNode", "CryptoOperation", "EventSource", "FileReader", "HTMLUnknownElement", "IDBDatabase", "IDBRequest", "IDBTransaction", "KeyOperation", "MediaController", "MessagePort", "ModalWindow", "Notification", "SVGElementInstance", "Screen", "SharedWorker", "TextTrack", "TextTrackCue", "TextTrackList", "WebSocket", "WebSocketWorker", "Worker", "XMLHttpRequest", "XMLHttpRequestEventTarget", "XMLHttpRequestUpload"];
var INTEGRATION_NAME5 = "BrowserApiErrors";
var _browserApiErrorsIntegration = (options = {}) => {
  const _options = __spreadValues({
    XMLHttpRequest: true,
    eventTarget: true,
    requestAnimationFrame: true,
    setInterval: true,
    setTimeout: true,
    unregisterOriginalCallbacks: false
  }, options);
  return {
    name: INTEGRATION_NAME5,
    // TODO: This currently only works for the first client this is setup
    // We may want to adjust this to check for client etc.
    setupOnce() {
      if (_options.setTimeout) {
        fill(WINDOW4, "setTimeout", _wrapTimeFunction);
      }
      if (_options.setInterval) {
        fill(WINDOW4, "setInterval", _wrapTimeFunction);
      }
      if (_options.requestAnimationFrame) {
        fill(WINDOW4, "requestAnimationFrame", _wrapRAF);
      }
      if (_options.XMLHttpRequest && "XMLHttpRequest" in WINDOW4) {
        fill(XMLHttpRequest.prototype, "send", _wrapXHR);
      }
      const eventTargetOption = _options.eventTarget;
      if (eventTargetOption) {
        const eventTarget = Array.isArray(eventTargetOption) ? eventTargetOption : DEFAULT_EVENT_TARGET;
        eventTarget.forEach((target) => _wrapEventTarget(target, _options));
      }
    }
  };
};
var browserApiErrorsIntegration = defineIntegration(_browserApiErrorsIntegration);
function _wrapTimeFunction(original) {
  return function(...args) {
    const originalCallback = args[0];
    args[0] = wrap(originalCallback, {
      mechanism: {
        data: {
          function: getFunctionName(original)
        },
        handled: false,
        type: "instrument"
      }
    });
    return original.apply(this, args);
  };
}
function _wrapRAF(original) {
  return function(callback) {
    return original.apply(this, [wrap(callback, {
      mechanism: {
        data: {
          function: "requestAnimationFrame",
          handler: getFunctionName(original)
        },
        handled: false,
        type: "instrument"
      }
    })]);
  };
}
function _wrapXHR(originalSend) {
  return function(...args) {
    const xhr = this;
    const xmlHttpRequestProps = ["onload", "onerror", "onprogress", "onreadystatechange"];
    xmlHttpRequestProps.forEach((prop) => {
      if (prop in xhr && typeof xhr[prop] === "function") {
        fill(xhr, prop, function(original) {
          const wrapOptions = {
            mechanism: {
              data: {
                function: prop,
                handler: getFunctionName(original)
              },
              handled: false,
              type: "instrument"
            }
          };
          const originalFunction = getOriginalFunction(original);
          if (originalFunction) {
            wrapOptions.mechanism.data.handler = getFunctionName(originalFunction);
          }
          return wrap(original, wrapOptions);
        });
      }
    });
    return originalSend.apply(this, args);
  };
}
function _wrapEventTarget(target, integrationOptions) {
  var _a3, _b;
  const globalObject = WINDOW4;
  const proto = (_a3 = globalObject[target]) == null ? void 0 : _a3.prototype;
  if (!((_b = proto == null ? void 0 : proto.hasOwnProperty) == null ? void 0 : _b.call(proto, "addEventListener"))) {
    return;
  }
  fill(proto, "addEventListener", function(original) {
    return function(eventName, fn, options) {
      try {
        if (isEventListenerObject(fn)) {
          fn.handleEvent = wrap(fn.handleEvent, {
            mechanism: {
              data: {
                function: "handleEvent",
                handler: getFunctionName(fn),
                target
              },
              handled: false,
              type: "instrument"
            }
          });
        }
      } catch {
      }
      if (integrationOptions.unregisterOriginalCallbacks) {
        unregisterOriginalCallback(this, eventName, fn);
      }
      return original.apply(this, [eventName, wrap(fn, {
        mechanism: {
          data: {
            function: "addEventListener",
            handler: getFunctionName(fn),
            target
          },
          handled: false,
          type: "instrument"
        }
      }), options]);
    };
  });
  fill(proto, "removeEventListener", function(originalRemoveEventListener) {
    return function(eventName, fn, options) {
      try {
        const originalEventHandler = fn.__sentry_wrapped__;
        if (originalEventHandler) {
          originalRemoveEventListener.call(this, eventName, originalEventHandler, options);
        }
      } catch (e3) {
      }
      return originalRemoveEventListener.call(this, eventName, fn, options);
    };
  });
}
function isEventListenerObject(obj) {
  return typeof obj.handleEvent === "function";
}
function unregisterOriginalCallback(target, eventName, fn) {
  if (target && typeof target === "object" && "removeEventListener" in target && typeof target.removeEventListener === "function") {
    target.removeEventListener(eventName, fn);
  }
}

// node_modules/@sentry/browser/build/npm/esm/integrations/browsersession.js
var browserSessionIntegration = defineIntegration(() => {
  return {
    name: "BrowserSession",
    setupOnce() {
      if (typeof WINDOW4.document === "undefined") {
        DEBUG_BUILD4 && logger2.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");
        return;
      }
      startSession({
        ignoreDuration: true
      });
      captureSession();
      addHistoryInstrumentationHandler(({
        from,
        to
      }) => {
        if (from !== void 0 && from !== to) {
          startSession({
            ignoreDuration: true
          });
          captureSession();
        }
      });
    }
  };
});

// node_modules/@sentry/browser/build/npm/esm/integrations/globalhandlers.js
var INTEGRATION_NAME6 = "GlobalHandlers";
var _globalHandlersIntegration = (options = {}) => {
  const _options = __spreadValues({
    onerror: true,
    onunhandledrejection: true
  }, options);
  return {
    name: INTEGRATION_NAME6,
    setupOnce() {
      Error.stackTraceLimit = 50;
    },
    setup(client) {
      if (_options.onerror) {
        _installGlobalOnErrorHandler(client);
        globalHandlerLog("onerror");
      }
      if (_options.onunhandledrejection) {
        _installGlobalOnUnhandledRejectionHandler(client);
        globalHandlerLog("onunhandledrejection");
      }
    }
  };
};
var globalHandlersIntegration = defineIntegration(_globalHandlersIntegration);
function _installGlobalOnErrorHandler(client) {
  addGlobalErrorInstrumentationHandler((data) => {
    const {
      stackParser,
      attachStacktrace
    } = getOptions();
    if (getClient() !== client || shouldIgnoreOnError()) {
      return;
    }
    const {
      msg,
      url,
      line,
      column,
      error: error2
    } = data;
    const event = _enhanceEventWithInitialFrame(eventFromUnknownInput(stackParser, error2 || msg, void 0, attachStacktrace, false), url, line, column);
    event.level = "error";
    captureEvent(event, {
      originalException: error2,
      mechanism: {
        handled: false,
        type: "onerror"
      }
    });
  });
}
function _installGlobalOnUnhandledRejectionHandler(client) {
  addGlobalUnhandledRejectionInstrumentationHandler((e3) => {
    const {
      stackParser,
      attachStacktrace
    } = getOptions();
    if (getClient() !== client || shouldIgnoreOnError()) {
      return;
    }
    const error2 = _getUnhandledRejectionError(e3);
    const event = isPrimitive(error2) ? _eventFromRejectionWithPrimitive(error2) : eventFromUnknownInput(stackParser, error2, void 0, attachStacktrace, true);
    event.level = "error";
    captureEvent(event, {
      originalException: error2,
      mechanism: {
        handled: false,
        type: "onunhandledrejection"
      }
    });
  });
}
function _getUnhandledRejectionError(error2) {
  if (isPrimitive(error2)) {
    return error2;
  }
  try {
    if ("reason" in error2) {
      return error2.reason;
    }
    if ("detail" in error2 && "reason" in error2.detail) {
      return error2.detail.reason;
    }
  } catch {
  }
  return error2;
}
function _eventFromRejectionWithPrimitive(reason) {
  return {
    exception: {
      values: [{
        type: "UnhandledRejection",
        // String() is needed because the Primitive type includes symbols (which can't be automatically stringified)
        value: `Non-Error promise rejection captured with value: ${String(reason)}`
      }]
    }
  };
}
function _enhanceEventWithInitialFrame(event, url, line, column) {
  const e3 = event.exception = event.exception || {};
  const ev = e3.values = e3.values || [];
  const ev0 = ev[0] = ev[0] || {};
  const ev0s = ev0.stacktrace = ev0.stacktrace || {};
  const ev0sf = ev0s.frames = ev0s.frames || [];
  const colno = column;
  const lineno = line;
  const filename = isString(url) && url.length > 0 ? url : getLocationHref();
  if (ev0sf.length === 0) {
    ev0sf.push({
      colno,
      filename,
      function: UNKNOWN_FUNCTION,
      in_app: true,
      lineno
    });
  }
  return event;
}
function globalHandlerLog(type) {
  DEBUG_BUILD4 && logger2.log(`Global Handler attached: ${type}`);
}
function getOptions() {
  const client = getClient();
  const options = (client == null ? void 0 : client.getOptions()) || {
    stackParser: () => [],
    attachStacktrace: false
  };
  return options;
}

// node_modules/@sentry/browser/build/npm/esm/integrations/httpcontext.js
var httpContextIntegration = defineIntegration(() => {
  return {
    name: "HttpContext",
    preprocessEvent(event) {
      var _a3;
      if (!WINDOW4.navigator && !WINDOW4.location && !WINDOW4.document) {
        return;
      }
      const reqData = getHttpRequestData();
      const headers = __spreadValues(__spreadValues({}, reqData.headers), (_a3 = event.request) == null ? void 0 : _a3.headers);
      event.request = __spreadProps(__spreadValues(__spreadValues({}, reqData), event.request), {
        headers
      });
    }
  };
});

// node_modules/@sentry/browser/build/npm/esm/integrations/linkederrors.js
var DEFAULT_KEY = "cause";
var DEFAULT_LIMIT = 5;
var INTEGRATION_NAME7 = "LinkedErrors";
var _linkedErrorsIntegration = (options = {}) => {
  const limit = options.limit || DEFAULT_LIMIT;
  const key = options.key || DEFAULT_KEY;
  return {
    name: INTEGRATION_NAME7,
    preprocessEvent(event, hint, client) {
      const options2 = client.getOptions();
      applyAggregateErrorsToEvent(
        // This differs from the LinkedErrors integration in core by using a different exceptionFromError function
        exceptionFromError,
        options2.stackParser,
        key,
        limit,
        event,
        hint
      );
    }
  };
};
var linkedErrorsIntegration = defineIntegration(_linkedErrorsIntegration);

// node_modules/@sentry/browser/build/npm/esm/utils/detectBrowserExtension.js
function checkAndWarnIfIsEmbeddedBrowserExtension() {
  if (_isEmbeddedBrowserExtension()) {
    if (DEBUG_BUILD4) {
      consoleSandbox(() => {
        console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/");
      });
    }
    return true;
  }
  return false;
}
function _isEmbeddedBrowserExtension() {
  var _a3;
  if (typeof WINDOW4.window === "undefined") {
    return false;
  }
  const _window = WINDOW4;
  if (_window.nw) {
    return false;
  }
  const extensionObject = _window["chrome"] || _window["browser"];
  if (!((_a3 = extensionObject == null ? void 0 : extensionObject.runtime) == null ? void 0 : _a3.id)) {
    return false;
  }
  const href = getLocationHref();
  const extensionProtocols = ["chrome-extension", "moz-extension", "ms-browser-extension", "safari-web-extension"];
  const isDedicatedExtensionPage = WINDOW4 === WINDOW4.top && extensionProtocols.some((protocol) => href.startsWith(`${protocol}://`));
  return !isDedicatedExtensionPage;
}

// node_modules/@sentry/browser/build/npm/esm/sdk.js
function getDefaultIntegrations(_options) {
  return [
    // TODO(v10): Replace with `eventFiltersIntegration` once we remove the deprecated `inboundFiltersIntegration`
    // eslint-disable-next-line deprecation/deprecation
    inboundFiltersIntegration(),
    functionToStringIntegration(),
    browserApiErrorsIntegration(),
    breadcrumbsIntegration(),
    globalHandlersIntegration(),
    linkedErrorsIntegration(),
    dedupeIntegration(),
    httpContextIntegration(),
    browserSessionIntegration()
  ];
}
function init(options = {}) {
  const shouldDisableBecauseIsBrowserExtenstion = !options.skipBrowserExtensionCheck && checkAndWarnIfIsEmbeddedBrowserExtension();
  const clientOptions = __spreadProps(__spreadValues({}, options), {
    enabled: shouldDisableBecauseIsBrowserExtenstion ? false : options.enabled,
    stackParser: stackParserFromStackParserOptions(options.stackParser || defaultStackParser),
    integrations: getIntegrationsToSetup({
      integrations: options.integrations,
      defaultIntegrations: options.defaultIntegrations == null ? getDefaultIntegrations() : options.defaultIntegrations
    }),
    transport: options.transport || makeFetchTransport
  });
  return initAndBind(BrowserClient, clientOptions);
}

// node_modules/@sentry/browser/build/npm/esm/report-dialog.js
function showReportDialog(options = {}) {
  const optionalDocument = WINDOW4.document;
  const injectionPoint = (optionalDocument == null ? void 0 : optionalDocument.head) || (optionalDocument == null ? void 0 : optionalDocument.body);
  if (!injectionPoint) {
    DEBUG_BUILD4 && logger2.error("[showReportDialog] Global document not defined");
    return;
  }
  const scope = getCurrentScope();
  const client = getClient();
  const dsn = client == null ? void 0 : client.getDsn();
  if (!dsn) {
    DEBUG_BUILD4 && logger2.error("[showReportDialog] DSN not configured");
    return;
  }
  const mergedOptions = __spreadProps(__spreadValues({}, options), {
    user: __spreadValues(__spreadValues({}, scope.getUser()), options.user),
    eventId: options.eventId || lastEventId()
  });
  const script = WINDOW4.document.createElement("script");
  script.async = true;
  script.crossOrigin = "anonymous";
  script.src = getReportDialogEndpoint(dsn, mergedOptions);
  const {
    onLoad: onLoad2,
    onClose
  } = mergedOptions;
  if (onLoad2) {
    script.onload = onLoad2;
  }
  if (onClose) {
    const reportDialogClosedMessageHandler = (event) => {
      if (event.data === "__sentry_reportdialog_closed__") {
        try {
          onClose();
        } finally {
          WINDOW4.removeEventListener("message", reportDialogClosedMessageHandler);
        }
      }
    };
    WINDOW4.addEventListener("message", reportDialogClosedMessageHandler);
  }
  injectionPoint.appendChild(script);
}

// node_modules/@sentry-internal/replay/build/npm/esm/index.js
var WINDOW6 = GLOBAL_OBJ;
var REPLAY_SESSION_KEY = "sentryReplaySession";
var REPLAY_EVENT_NAME = "replay_event";
var UNABLE_TO_SEND_REPLAY = "Unable to send Replay";
var SESSION_IDLE_PAUSE_DURATION = 3e5;
var SESSION_IDLE_EXPIRE_DURATION = 9e5;
var DEFAULT_FLUSH_MIN_DELAY = 5e3;
var DEFAULT_FLUSH_MAX_DELAY = 5500;
var BUFFER_CHECKOUT_TIME = 6e4;
var RETRY_BASE_INTERVAL = 5e3;
var RETRY_MAX_COUNT = 3;
var NETWORK_BODY_MAX_SIZE = 15e4;
var CONSOLE_ARG_MAX_SIZE = 5e3;
var SLOW_CLICK_THRESHOLD = 3e3;
var SLOW_CLICK_SCROLL_TIMEOUT = 300;
var REPLAY_MAX_EVENT_BUFFER_SIZE = 2e7;
var MIN_REPLAY_DURATION = 4999;
var MIN_REPLAY_DURATION_LIMIT = 15e3;
var MAX_REPLAY_DURATION = 36e5;
var __defProp$1 = Object.defineProperty;
var __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, {
  enumerable: true,
  configurable: true,
  writable: true,
  value
}) : obj[key] = value;
var __publicField$1 = (obj, key, value) => __defNormalProp$1(obj, typeof key !== "symbol" ? key + "" : key, value);
var NodeType$2 = /* @__PURE__ */ ((NodeType2) => {
  NodeType2[NodeType2["Document"] = 0] = "Document";
  NodeType2[NodeType2["DocumentType"] = 1] = "DocumentType";
  NodeType2[NodeType2["Element"] = 2] = "Element";
  NodeType2[NodeType2["Text"] = 3] = "Text";
  NodeType2[NodeType2["CDATA"] = 4] = "CDATA";
  NodeType2[NodeType2["Comment"] = 5] = "Comment";
  return NodeType2;
})(NodeType$2 || {});
function isElement$1(n22) {
  return n22.nodeType === n22.ELEMENT_NODE;
}
function isShadowRoot(n22) {
  const host = n22 == null ? void 0 : n22.host;
  return Boolean((host == null ? void 0 : host.shadowRoot) === n22);
}
function isNativeShadowDom(shadowRoot) {
  return Object.prototype.toString.call(shadowRoot) === "[object ShadowRoot]";
}
function fixBrowserCompatibilityIssuesInCSS(cssText) {
  if (cssText.includes(" background-clip: text;") && !cssText.includes(" -webkit-background-clip: text;")) {
    cssText = cssText.replace(/\sbackground-clip:\s*text;/g, " -webkit-background-clip: text; background-clip: text;");
  }
  return cssText;
}
function escapeImportStatement(rule) {
  const {
    cssText
  } = rule;
  if (cssText.split('"').length < 3) return cssText;
  const statement = ["@import", `url(${JSON.stringify(rule.href)})`];
  if (rule.layerName === "") {
    statement.push(`layer`);
  } else if (rule.layerName) {
    statement.push(`layer(${rule.layerName})`);
  }
  if (rule.supportsText) {
    statement.push(`supports(${rule.supportsText})`);
  }
  if (rule.media.length) {
    statement.push(rule.media.mediaText);
  }
  return statement.join(" ") + ";";
}
function stringifyStylesheet(s2) {
  try {
    const rules2 = s2.rules || s2.cssRules;
    return rules2 ? fixBrowserCompatibilityIssuesInCSS(Array.from(rules2, stringifyRule).join("")) : null;
  } catch (error2) {
    return null;
  }
}
function fixAllCssProperty(rule) {
  let styles = "";
  for (let i2 = 0; i2 < rule.style.length; i2++) {
    const styleDeclaration = rule.style;
    const attribute = styleDeclaration[i2];
    const isImportant = styleDeclaration.getPropertyPriority(attribute);
    styles += `${attribute}:${styleDeclaration.getPropertyValue(attribute)}${isImportant ? ` !important` : ""};`;
  }
  return `${rule.selectorText} { ${styles} }`;
}
function stringifyRule(rule) {
  let importStringified;
  if (isCSSImportRule(rule)) {
    try {
      importStringified = // for same-origin stylesheets,
      // we can access the imported stylesheet rules directly
      stringifyStylesheet(rule.styleSheet) || // work around browser issues with the raw string `@import url(...)` statement
      escapeImportStatement(rule);
    } catch (error2) {
    }
  } else if (isCSSStyleRule(rule)) {
    let cssText = rule.cssText;
    const needsSafariColonFix = rule.selectorText.includes(":");
    const needsAllFix = typeof rule.style["all"] === "string" && rule.style["all"];
    if (needsAllFix) {
      cssText = fixAllCssProperty(rule);
    }
    if (needsSafariColonFix) {
      cssText = fixSafariColons(cssText);
    }
    if (needsSafariColonFix || needsAllFix) {
      return cssText;
    }
  }
  return importStringified || rule.cssText;
}
function fixSafariColons(cssStringified) {
  const regex = /(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;
  return cssStringified.replace(regex, "$1\\$2");
}
function isCSSImportRule(rule) {
  return "styleSheet" in rule;
}
function isCSSStyleRule(rule) {
  return "selectorText" in rule;
}
var Mirror = class {
  constructor() {
    __publicField$1(this, "idNodeMap", /* @__PURE__ */ new Map());
    __publicField$1(this, "nodeMetaMap", /* @__PURE__ */ new WeakMap());
  }
  getId(n22) {
    var _a3;
    if (!n22) return -1;
    const id = (_a3 = this.getMeta(n22)) == null ? void 0 : _a3.id;
    return id != null ? id : -1;
  }
  getNode(id) {
    return this.idNodeMap.get(id) || null;
  }
  getIds() {
    return Array.from(this.idNodeMap.keys());
  }
  getMeta(n22) {
    return this.nodeMetaMap.get(n22) || null;
  }
  // removes the node from idNodeMap
  // doesn't remove the node from nodeMetaMap
  removeNodeFromMap(n22) {
    const id = this.getId(n22);
    this.idNodeMap.delete(id);
    if (n22.childNodes) {
      n22.childNodes.forEach((childNode) => this.removeNodeFromMap(childNode));
    }
  }
  has(id) {
    return this.idNodeMap.has(id);
  }
  hasNode(node) {
    return this.nodeMetaMap.has(node);
  }
  add(n22, meta) {
    const id = meta.id;
    this.idNodeMap.set(id, n22);
    this.nodeMetaMap.set(n22, meta);
  }
  replace(id, n22) {
    const oldNode = this.getNode(id);
    if (oldNode) {
      const meta = this.nodeMetaMap.get(oldNode);
      if (meta) this.nodeMetaMap.set(n22, meta);
    }
    this.idNodeMap.set(id, n22);
  }
  reset() {
    this.idNodeMap = /* @__PURE__ */ new Map();
    this.nodeMetaMap = /* @__PURE__ */ new WeakMap();
  }
};
function createMirror$2() {
  return new Mirror();
}
function shouldMaskInput({
  maskInputOptions,
  tagName,
  type
}) {
  if (tagName === "OPTION") {
    tagName = "SELECT";
  }
  return Boolean(maskInputOptions[tagName.toLowerCase()] || type && maskInputOptions[type] || type === "password" || // Default to "text" option for inputs without a "type" attribute defined
  tagName === "INPUT" && !type && maskInputOptions["text"]);
}
function maskInputValue({
  isMasked,
  element,
  value,
  maskInputFn
}) {
  let text = value || "";
  if (!isMasked) {
    return text;
  }
  if (maskInputFn) {
    text = maskInputFn(text, element);
  }
  return "*".repeat(text.length);
}
function toLowerCase(str) {
  return str.toLowerCase();
}
function toUpperCase(str) {
  return str.toUpperCase();
}
var ORIGINAL_ATTRIBUTE_NAME = "__rrweb_original__";
function is2DCanvasBlank(canvas) {
  const ctx = canvas.getContext("2d");
  if (!ctx) return true;
  const chunkSize = 50;
  for (let x2 = 0; x2 < canvas.width; x2 += chunkSize) {
    for (let y2 = 0; y2 < canvas.height; y2 += chunkSize) {
      const getImageData = ctx.getImageData;
      const originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData ? getImageData[ORIGINAL_ATTRIBUTE_NAME] : getImageData;
      const pixelBuffer = new Uint32Array(
        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access
        originalGetImageData.call(ctx, x2, y2, Math.min(chunkSize, canvas.width - x2), Math.min(chunkSize, canvas.height - y2)).data.buffer
      );
      if (pixelBuffer.some((pixel) => pixel !== 0)) return false;
    }
  }
  return true;
}
function getInputType(element) {
  const type = element.type;
  return element.hasAttribute("data-rr-is-password") ? "password" : type ? (
    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
    toLowerCase(type)
  ) : null;
}
function getInputValue(el, tagName, type) {
  if (tagName === "INPUT" && (type === "radio" || type === "checkbox")) {
    return el.getAttribute("value") || "";
  }
  return el.value;
}
function extractFileExtension(path, baseURL) {
  var _a3;
  let url;
  try {
    url = new URL(path, baseURL != null ? baseURL : window.location.href);
  } catch (err) {
    return null;
  }
  const regex = /\.([0-9a-z]+)(?:$)/i;
  const match = url.pathname.match(regex);
  return (_a3 = match == null ? void 0 : match[1]) != null ? _a3 : null;
}
var cachedImplementations$1 = {};
function getImplementation$1(name) {
  const cached = cachedImplementations$1[name];
  if (cached) {
    return cached;
  }
  const document2 = window.document;
  let impl = window[name];
  if (document2 && typeof document2.createElement === "function") {
    try {
      const sandbox = document2.createElement("iframe");
      sandbox.hidden = true;
      document2.head.appendChild(sandbox);
      const contentWindow = sandbox.contentWindow;
      if (contentWindow && contentWindow[name]) {
        impl = // eslint-disable-next-line @typescript-eslint/unbound-method
        contentWindow[name];
      }
      document2.head.removeChild(sandbox);
    } catch (e22) {
    }
  }
  return cachedImplementations$1[name] = impl.bind(window);
}
function setTimeout$2(...rest) {
  return getImplementation$1("setTimeout")(...rest);
}
function clearTimeout$1(...rest) {
  return getImplementation$1("clearTimeout")(...rest);
}
function getIframeContentDocument(iframe) {
  try {
    return iframe.contentDocument;
  } catch (e22) {
  }
}
var _id = 1;
var tagNameRegex = new RegExp("[^a-z0-9-_:]");
var IGNORED_NODE = -2;
function genId() {
  return _id++;
}
function getValidTagName$1(element) {
  if (element instanceof HTMLFormElement) {
    return "form";
  }
  const processedTagName = toLowerCase(element.tagName);
  if (tagNameRegex.test(processedTagName)) {
    return "div";
  }
  return processedTagName;
}
function extractOrigin(url) {
  let origin = "";
  if (url.indexOf("//") > -1) {
    origin = url.split("/").slice(0, 3).join("/");
  } else {
    origin = url.split("/")[0];
  }
  origin = origin.split("?")[0];
  return origin;
}
var canvasService;
var canvasCtx;
var URL_IN_CSS_REF = /url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm;
var URL_PROTOCOL_MATCH = /^(?:[a-z+]+:)?\/\//i;
var URL_WWW_MATCH = /^www\..*/i;
var DATA_URI = /^(data:)([^,]*),(.*)/i;
function absoluteToStylesheet(cssText, href) {
  return (cssText || "").replace(URL_IN_CSS_REF, (origin, quote1, path1, quote2, path2, path3) => {
    const filePath = path1 || path2 || path3;
    const maybeQuote = quote1 || quote2 || "";
    if (!filePath) {
      return origin;
    }
    if (URL_PROTOCOL_MATCH.test(filePath) || URL_WWW_MATCH.test(filePath)) {
      return `url(${maybeQuote}${filePath}${maybeQuote})`;
    }
    if (DATA_URI.test(filePath)) {
      return `url(${maybeQuote}${filePath}${maybeQuote})`;
    }
    if (filePath[0] === "/") {
      return `url(${maybeQuote}${extractOrigin(href) + filePath}${maybeQuote})`;
    }
    const stack = href.split("/");
    const parts = filePath.split("/");
    stack.pop();
    for (const part of parts) {
      if (part === ".") {
        continue;
      } else if (part === "..") {
        stack.pop();
      } else {
        stack.push(part);
      }
    }
    return `url(${maybeQuote}${stack.join("/")}${maybeQuote})`;
  });
}
var SRCSET_NOT_SPACES = /^[^ \t\n\r\u000c]+/;
var SRCSET_COMMAS_OR_SPACES = /^[, \t\n\r\u000c]+/;
function getAbsoluteSrcsetString(doc, attributeValue) {
  if (attributeValue.trim() === "") {
    return attributeValue;
  }
  let pos = 0;
  function collectCharacters(regEx) {
    let chars2;
    const match = regEx.exec(attributeValue.substring(pos));
    if (match) {
      chars2 = match[0];
      pos += chars2.length;
      return chars2;
    }
    return "";
  }
  const output = [];
  while (true) {
    collectCharacters(SRCSET_COMMAS_OR_SPACES);
    if (pos >= attributeValue.length) {
      break;
    }
    let url = collectCharacters(SRCSET_NOT_SPACES);
    if (url.slice(-1) === ",") {
      url = absoluteToDoc(doc, url.substring(0, url.length - 1));
      output.push(url);
    } else {
      let descriptorsStr = "";
      url = absoluteToDoc(doc, url);
      let inParens = false;
      while (true) {
        const c2 = attributeValue.charAt(pos);
        if (c2 === "") {
          output.push((url + descriptorsStr).trim());
          break;
        } else if (!inParens) {
          if (c2 === ",") {
            pos += 1;
            output.push((url + descriptorsStr).trim());
            break;
          } else if (c2 === "(") {
            inParens = true;
          }
        } else {
          if (c2 === ")") {
            inParens = false;
          }
        }
        descriptorsStr += c2;
        pos += 1;
      }
    }
  }
  return output.join(", ");
}
var cachedDocument = /* @__PURE__ */ new WeakMap();
function absoluteToDoc(doc, attributeValue) {
  if (!attributeValue || attributeValue.trim() === "") {
    return attributeValue;
  }
  return getHref(doc, attributeValue);
}
function isSVGElement(el) {
  return Boolean(el.tagName === "svg" || el.ownerSVGElement);
}
function getHref(doc, customHref) {
  let a2 = cachedDocument.get(doc);
  if (!a2) {
    a2 = doc.createElement("a");
    cachedDocument.set(doc, a2);
  }
  if (!customHref) {
    customHref = "";
  } else if (customHref.startsWith("blob:") || customHref.startsWith("data:")) {
    return customHref;
  }
  a2.setAttribute("href", customHref);
  return a2.href;
}
function transformAttribute(doc, tagName, name, value, element, maskAttributeFn) {
  if (!value) {
    return value;
  }
  if (name === "src" || name === "href" && !(tagName === "use" && value[0] === "#")) {
    return absoluteToDoc(doc, value);
  } else if (name === "xlink:href" && value[0] !== "#") {
    return absoluteToDoc(doc, value);
  } else if (name === "background" && (tagName === "table" || tagName === "td" || tagName === "th")) {
    return absoluteToDoc(doc, value);
  } else if (name === "srcset") {
    return getAbsoluteSrcsetString(doc, value);
  } else if (name === "style") {
    return absoluteToStylesheet(value, getHref(doc));
  } else if (tagName === "object" && name === "data") {
    return absoluteToDoc(doc, value);
  }
  if (typeof maskAttributeFn === "function") {
    return maskAttributeFn(name, value, element);
  }
  return value;
}
function ignoreAttribute(tagName, name, _value) {
  return (tagName === "video" || tagName === "audio") && name === "autoplay";
}
function _isBlockedElement(element, blockClass, blockSelector, unblockSelector) {
  try {
    if (unblockSelector && element.matches(unblockSelector)) {
      return false;
    }
    if (typeof blockClass === "string") {
      if (element.classList.contains(blockClass)) {
        return true;
      }
    } else {
      for (let eIndex = element.classList.length; eIndex--; ) {
        const className = element.classList[eIndex];
        if (blockClass.test(className)) {
          return true;
        }
      }
    }
    if (blockSelector) {
      return element.matches(blockSelector);
    }
  } catch (e22) {
  }
  return false;
}
function elementClassMatchesRegex(el, regex) {
  for (let eIndex = el.classList.length; eIndex--; ) {
    const className = el.classList[eIndex];
    if (regex.test(className)) {
      return true;
    }
  }
  return false;
}
function distanceToMatch(node, matchPredicate, limit = Infinity, distance = 0) {
  if (!node) return -1;
  if (node.nodeType !== node.ELEMENT_NODE) return -1;
  if (distance > limit) return -1;
  if (matchPredicate(node)) return distance;
  return distanceToMatch(node.parentNode, matchPredicate, limit, distance + 1);
}
function createMatchPredicate(className, selector) {
  return (node) => {
    const el = node;
    if (el === null) return false;
    try {
      if (className) {
        if (typeof className === "string") {
          if (el.matches(`.${className}`)) return true;
        } else if (elementClassMatchesRegex(el, className)) {
          return true;
        }
      }
      if (selector && el.matches(selector)) return true;
      return false;
    } catch {
      return false;
    }
  };
}
function needMaskingText(node, maskTextClass, maskTextSelector, unmaskTextClass, unmaskTextSelector, maskAllText) {
  try {
    const el = node.nodeType === node.ELEMENT_NODE ? node : node.parentElement;
    if (el === null) return false;
    if (el.tagName === "INPUT") {
      const autocomplete = el.getAttribute("autocomplete");
      const disallowedAutocompleteValues = ["current-password", "new-password", "cc-number", "cc-exp", "cc-exp-month", "cc-exp-year", "cc-csc"];
      if (disallowedAutocompleteValues.includes(autocomplete)) {
        return true;
      }
    }
    let maskDistance = -1;
    let unmaskDistance = -1;
    if (maskAllText) {
      unmaskDistance = distanceToMatch(el, createMatchPredicate(unmaskTextClass, unmaskTextSelector));
      if (unmaskDistance < 0) {
        return true;
      }
      maskDistance = distanceToMatch(el, createMatchPredicate(maskTextClass, maskTextSelector), unmaskDistance >= 0 ? unmaskDistance : Infinity);
    } else {
      maskDistance = distanceToMatch(el, createMatchPredicate(maskTextClass, maskTextSelector));
      if (maskDistance < 0) {
        return false;
      }
      unmaskDistance = distanceToMatch(el, createMatchPredicate(unmaskTextClass, unmaskTextSelector), maskDistance >= 0 ? maskDistance : Infinity);
    }
    return maskDistance >= 0 ? unmaskDistance >= 0 ? maskDistance <= unmaskDistance : true : unmaskDistance >= 0 ? false : !!maskAllText;
  } catch (e22) {
  }
  return !!maskAllText;
}
function onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {
  const win = iframeEl.contentWindow;
  if (!win) {
    return;
  }
  let fired = false;
  let readyState;
  try {
    readyState = win.document.readyState;
  } catch (error2) {
    return;
  }
  if (readyState !== "complete") {
    const timer = setTimeout$2(() => {
      if (!fired) {
        listener();
        fired = true;
      }
    }, iframeLoadTimeout);
    iframeEl.addEventListener("load", () => {
      clearTimeout$1(timer);
      fired = true;
      listener();
    });
    return;
  }
  const blankUrl = "about:blank";
  if (win.location.href !== blankUrl || iframeEl.src === blankUrl || iframeEl.src === "") {
    setTimeout$2(listener, 0);
    return iframeEl.addEventListener("load", listener);
  }
  iframeEl.addEventListener("load", listener);
}
function onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {
  let fired = false;
  let styleSheetLoaded;
  try {
    styleSheetLoaded = link.sheet;
  } catch (error2) {
    return;
  }
  if (styleSheetLoaded) return;
  const timer = setTimeout$2(() => {
    if (!fired) {
      listener();
      fired = true;
    }
  }, styleSheetLoadTimeout);
  link.addEventListener("load", () => {
    clearTimeout$1(timer);
    fired = true;
    listener();
  });
}
function serializeNode(n22, options) {
  const {
    doc,
    mirror: mirror2,
    blockClass,
    blockSelector,
    unblockSelector,
    maskAllText,
    maskAttributeFn,
    maskTextClass,
    unmaskTextClass,
    maskTextSelector,
    unmaskTextSelector,
    inlineStylesheet,
    maskInputOptions = {},
    maskTextFn,
    maskInputFn,
    dataURLOptions = {},
    inlineImages,
    recordCanvas,
    keepIframeSrcFn,
    newlyAddedElement = false
  } = options;
  const rootId = getRootId(doc, mirror2);
  switch (n22.nodeType) {
    case n22.DOCUMENT_NODE:
      if (n22.compatMode !== "CSS1Compat") {
        return {
          type: NodeType$2.Document,
          childNodes: [],
          compatMode: n22.compatMode
          // probably "BackCompat"
        };
      } else {
        return {
          type: NodeType$2.Document,
          childNodes: []
        };
      }
    case n22.DOCUMENT_TYPE_NODE:
      return {
        type: NodeType$2.DocumentType,
        name: n22.name,
        publicId: n22.publicId,
        systemId: n22.systemId,
        rootId
      };
    case n22.ELEMENT_NODE:
      return serializeElementNode(n22, {
        doc,
        blockClass,
        blockSelector,
        unblockSelector,
        inlineStylesheet,
        maskAttributeFn,
        maskInputOptions,
        maskInputFn,
        dataURLOptions,
        inlineImages,
        recordCanvas,
        keepIframeSrcFn,
        newlyAddedElement,
        rootId,
        maskTextClass,
        unmaskTextClass,
        maskTextSelector,
        unmaskTextSelector
      });
    case n22.TEXT_NODE:
      return serializeTextNode(n22, {
        doc,
        maskAllText,
        maskTextClass,
        unmaskTextClass,
        maskTextSelector,
        unmaskTextSelector,
        maskTextFn,
        maskInputOptions,
        maskInputFn,
        rootId
      });
    case n22.CDATA_SECTION_NODE:
      return {
        type: NodeType$2.CDATA,
        textContent: "",
        rootId
      };
    case n22.COMMENT_NODE:
      return {
        type: NodeType$2.Comment,
        textContent: n22.textContent || "",
        rootId
      };
    default:
      return false;
  }
}
function getRootId(doc, mirror2) {
  if (!mirror2.hasNode(doc)) return void 0;
  const docId = mirror2.getId(doc);
  return docId === 1 ? void 0 : docId;
}
function serializeTextNode(n22, options) {
  var _a3;
  const {
    maskAllText,
    maskTextClass,
    unmaskTextClass,
    maskTextSelector,
    unmaskTextSelector,
    maskTextFn,
    maskInputOptions,
    maskInputFn,
    rootId
  } = options;
  const parentTagName = n22.parentNode && n22.parentNode.tagName;
  let textContent = n22.textContent;
  const isStyle = parentTagName === "STYLE" ? true : void 0;
  const isScript = parentTagName === "SCRIPT" ? true : void 0;
  const isTextarea = parentTagName === "TEXTAREA" ? true : void 0;
  if (isStyle && textContent) {
    try {
      if (n22.nextSibling || n22.previousSibling) {
      } else if ((_a3 = n22.parentNode.sheet) == null ? void 0 : _a3.cssRules) {
        textContent = stringifyStylesheet(n22.parentNode.sheet);
      }
    } catch (err) {
      console.warn(`Cannot get CSS styles from text's parentNode. Error: ${err}`, n22);
    }
    textContent = absoluteToStylesheet(textContent, getHref(options.doc));
  }
  if (isScript) {
    textContent = "SCRIPT_PLACEHOLDER";
  }
  const forceMask = needMaskingText(n22, maskTextClass, maskTextSelector, unmaskTextClass, unmaskTextSelector, maskAllText);
  if (!isStyle && !isScript && !isTextarea && textContent && forceMask) {
    textContent = maskTextFn ? maskTextFn(textContent, n22.parentElement) : textContent.replace(/[\S]/g, "*");
  }
  if (isTextarea && textContent && (maskInputOptions.textarea || forceMask)) {
    textContent = maskInputFn ? maskInputFn(textContent, n22.parentNode) : textContent.replace(/[\S]/g, "*");
  }
  if (parentTagName === "OPTION" && textContent) {
    const isInputMasked = shouldMaskInput({
      type: null,
      tagName: parentTagName,
      maskInputOptions
    });
    textContent = maskInputValue({
      isMasked: needMaskingText(n22, maskTextClass, maskTextSelector, unmaskTextClass, unmaskTextSelector, isInputMasked),
      element: n22,
      value: textContent,
      maskInputFn
    });
  }
  return {
    type: NodeType$2.Text,
    textContent: textContent || "",
    isStyle,
    rootId
  };
}
function serializeElementNode(n22, options) {
  const {
    doc,
    blockClass,
    blockSelector,
    unblockSelector,
    inlineStylesheet,
    maskInputOptions = {},
    maskAttributeFn,
    maskInputFn,
    dataURLOptions = {},
    inlineImages,
    recordCanvas,
    keepIframeSrcFn,
    newlyAddedElement = false,
    rootId,
    maskTextClass,
    unmaskTextClass,
    maskTextSelector,
    unmaskTextSelector
  } = options;
  const needBlock = _isBlockedElement(n22, blockClass, blockSelector, unblockSelector);
  const tagName = getValidTagName$1(n22);
  let attributes2 = {};
  const len = n22.attributes.length;
  for (let i2 = 0; i2 < len; i2++) {
    const attr = n22.attributes[i2];
    if (attr.name && !ignoreAttribute(tagName, attr.name, attr.value)) {
      attributes2[attr.name] = transformAttribute(doc, tagName, toLowerCase(attr.name), attr.value, n22, maskAttributeFn);
    }
  }
  if (tagName === "link" && inlineStylesheet) {
    const stylesheet = Array.from(doc.styleSheets).find((s2) => {
      return s2.href === n22.href;
    });
    let cssText = null;
    if (stylesheet) {
      cssText = stringifyStylesheet(stylesheet);
    }
    if (cssText) {
      attributes2.rel = null;
      attributes2.href = null;
      attributes2.crossorigin = null;
      attributes2._cssText = absoluteToStylesheet(cssText, stylesheet.href);
    }
  }
  if (tagName === "style" && n22.sheet && // TODO: Currently we only try to get dynamic stylesheet when it is an empty style element
  !(n22.innerText || n22.textContent || "").trim().length) {
    const cssText = stringifyStylesheet(n22.sheet);
    if (cssText) {
      attributes2._cssText = absoluteToStylesheet(cssText, getHref(doc));
    }
  }
  if (tagName === "input" || tagName === "textarea" || tagName === "select" || tagName === "option") {
    const el = n22;
    const type = getInputType(el);
    const value = getInputValue(el, toUpperCase(tagName), type);
    const checked = el.checked;
    if (type !== "submit" && type !== "button" && value) {
      const forceMask = needMaskingText(el, maskTextClass, maskTextSelector, unmaskTextClass, unmaskTextSelector, shouldMaskInput({
        type,
        tagName: toUpperCase(tagName),
        maskInputOptions
      }));
      attributes2.value = maskInputValue({
        isMasked: forceMask,
        element: el,
        value,
        maskInputFn
      });
    }
    if (checked) {
      attributes2.checked = checked;
    }
  }
  if (tagName === "option") {
    if (n22.selected && !maskInputOptions["select"]) {
      attributes2.selected = true;
    } else {
      delete attributes2.selected;
    }
  }
  if (tagName === "canvas" && recordCanvas) {
    if (n22.__context === "2d") {
      if (!is2DCanvasBlank(n22)) {
        attributes2.rr_dataURL = n22.toDataURL(dataURLOptions.type, dataURLOptions.quality);
      }
    } else if (!("__context" in n22)) {
      const canvasDataURL = n22.toDataURL(dataURLOptions.type, dataURLOptions.quality);
      const blankCanvas = doc.createElement("canvas");
      blankCanvas.width = n22.width;
      blankCanvas.height = n22.height;
      const blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);
      if (canvasDataURL !== blankCanvasDataURL) {
        attributes2.rr_dataURL = canvasDataURL;
      }
    }
  }
  if (tagName === "img" && inlineImages) {
    if (!canvasService) {
      canvasService = doc.createElement("canvas");
      canvasCtx = canvasService.getContext("2d");
    }
    const image = n22;
    const imageSrc = image.currentSrc || image.getAttribute("src") || "<unknown-src>";
    const priorCrossOrigin = image.crossOrigin;
    const recordInlineImage = () => {
      image.removeEventListener("load", recordInlineImage);
      try {
        canvasService.width = image.naturalWidth;
        canvasService.height = image.naturalHeight;
        canvasCtx.drawImage(image, 0, 0);
        attributes2.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);
      } catch (err) {
        if (image.crossOrigin !== "anonymous") {
          image.crossOrigin = "anonymous";
          if (image.complete && image.naturalWidth !== 0) recordInlineImage();
          else image.addEventListener("load", recordInlineImage);
          return;
        } else {
          console.warn(`Cannot inline img src=${imageSrc}! Error: ${err}`);
        }
      }
      if (image.crossOrigin === "anonymous") {
        priorCrossOrigin ? attributes2.crossOrigin = priorCrossOrigin : image.removeAttribute("crossorigin");
      }
    };
    if (image.complete && image.naturalWidth !== 0) recordInlineImage();
    else image.addEventListener("load", recordInlineImage);
  }
  if (tagName === "audio" || tagName === "video") {
    attributes2.rr_mediaState = n22.paused ? "paused" : "played";
    attributes2.rr_mediaCurrentTime = n22.currentTime;
  }
  if (!newlyAddedElement) {
    if (n22.scrollLeft) {
      attributes2.rr_scrollLeft = n22.scrollLeft;
    }
    if (n22.scrollTop) {
      attributes2.rr_scrollTop = n22.scrollTop;
    }
  }
  if (needBlock) {
    const {
      width,
      height
    } = n22.getBoundingClientRect();
    attributes2 = {
      class: attributes2.class,
      rr_width: `${width}px`,
      rr_height: `${height}px`
    };
  }
  if (tagName === "iframe" && !keepIframeSrcFn(attributes2.src)) {
    if (!needBlock && !getIframeContentDocument(n22)) {
      attributes2.rr_src = attributes2.src;
    }
    delete attributes2.src;
  }
  let isCustomElement;
  try {
    if (customElements.get(tagName)) isCustomElement = true;
  } catch (e22) {
  }
  return {
    type: NodeType$2.Element,
    tagName,
    attributes: attributes2,
    childNodes: [],
    isSVG: isSVGElement(n22) || void 0,
    needBlock,
    rootId,
    isCustom: isCustomElement
  };
}
function lowerIfExists(maybeAttr) {
  if (maybeAttr === void 0 || maybeAttr === null) {
    return "";
  } else {
    return maybeAttr.toLowerCase();
  }
}
function slimDOMExcluded(sn, slimDOMOptions) {
  if (slimDOMOptions.comment && sn.type === NodeType$2.Comment) {
    return true;
  } else if (sn.type === NodeType$2.Element) {
    if (slimDOMOptions.script && // script tag
    (sn.tagName === "script" || // (module)preload link
    sn.tagName === "link" && (sn.attributes.rel === "preload" || sn.attributes.rel === "modulepreload") || // prefetch link
    sn.tagName === "link" && sn.attributes.rel === "prefetch" && typeof sn.attributes.href === "string" && extractFileExtension(sn.attributes.href) === "js")) {
      return true;
    } else if (slimDOMOptions.headFavicon && (sn.tagName === "link" && sn.attributes.rel === "shortcut icon" || sn.tagName === "meta" && (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) || lowerIfExists(sn.attributes.name) === "application-name" || lowerIfExists(sn.attributes.rel) === "icon" || lowerIfExists(sn.attributes.rel) === "apple-touch-icon" || lowerIfExists(sn.attributes.rel) === "shortcut icon"))) {
      return true;
    } else if (sn.tagName === "meta") {
      if (slimDOMOptions.headMetaDescKeywords && lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {
        return true;
      } else if (slimDOMOptions.headMetaSocial && (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) || // og = opengraph (facebook)
      lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) || lowerIfExists(sn.attributes.name) === "pinterest")) {
        return true;
      } else if (slimDOMOptions.headMetaRobots && (lowerIfExists(sn.attributes.name) === "robots" || lowerIfExists(sn.attributes.name) === "googlebot" || lowerIfExists(sn.attributes.name) === "bingbot")) {
        return true;
      } else if (slimDOMOptions.headMetaHttpEquiv && sn.attributes["http-equiv"] !== void 0) {
        return true;
      } else if (slimDOMOptions.headMetaAuthorship && (lowerIfExists(sn.attributes.name) === "author" || lowerIfExists(sn.attributes.name) === "generator" || lowerIfExists(sn.attributes.name) === "framework" || lowerIfExists(sn.attributes.name) === "publisher" || lowerIfExists(sn.attributes.name) === "progid" || lowerIfExists(sn.attributes.property).match(/^article:/) || lowerIfExists(sn.attributes.property).match(/^product:/))) {
        return true;
      } else if (slimDOMOptions.headMetaVerification && (lowerIfExists(sn.attributes.name) === "google-site-verification" || lowerIfExists(sn.attributes.name) === "yandex-verification" || lowerIfExists(sn.attributes.name) === "csrf-token" || lowerIfExists(sn.attributes.name) === "p:domain_verify" || lowerIfExists(sn.attributes.name) === "verify-v1" || lowerIfExists(sn.attributes.name) === "verification" || lowerIfExists(sn.attributes.name) === "shopify-checkout-api-token")) {
        return true;
      }
    }
  }
  return false;
}
function serializeNodeWithId(n22, options) {
  const {
    doc,
    mirror: mirror2,
    blockClass,
    blockSelector,
    unblockSelector,
    maskAllText,
    maskTextClass,
    unmaskTextClass,
    maskTextSelector,
    unmaskTextSelector,
    skipChild = false,
    inlineStylesheet = true,
    maskInputOptions = {},
    maskAttributeFn,
    maskTextFn,
    maskInputFn,
    slimDOMOptions,
    dataURLOptions = {},
    inlineImages = false,
    recordCanvas = false,
    onSerialize,
    onIframeLoad,
    iframeLoadTimeout = 5e3,
    onStylesheetLoad,
    stylesheetLoadTimeout = 5e3,
    keepIframeSrcFn = () => false,
    newlyAddedElement = false
  } = options;
  let {
    preserveWhiteSpace = true
  } = options;
  const _serializedNode = serializeNode(n22, {
    doc,
    mirror: mirror2,
    blockClass,
    blockSelector,
    maskAllText,
    unblockSelector,
    maskTextClass,
    unmaskTextClass,
    maskTextSelector,
    unmaskTextSelector,
    inlineStylesheet,
    maskInputOptions,
    maskAttributeFn,
    maskTextFn,
    maskInputFn,
    dataURLOptions,
    inlineImages,
    recordCanvas,
    keepIframeSrcFn,
    newlyAddedElement
  });
  if (!_serializedNode) {
    console.warn(n22, "not serialized");
    return null;
  }
  let id;
  if (mirror2.hasNode(n22)) {
    id = mirror2.getId(n22);
  } else if (slimDOMExcluded(_serializedNode, slimDOMOptions) || !preserveWhiteSpace && _serializedNode.type === NodeType$2.Text && !_serializedNode.isStyle && !_serializedNode.textContent.replace(/^\s+|\s+$/gm, "").length) {
    id = IGNORED_NODE;
  } else {
    id = genId();
  }
  const serializedNode2 = Object.assign(_serializedNode, {
    id
  });
  mirror2.add(n22, serializedNode2);
  if (id === IGNORED_NODE) {
    return null;
  }
  if (onSerialize) {
    onSerialize(n22);
  }
  let recordChild = !skipChild;
  if (serializedNode2.type === NodeType$2.Element) {
    recordChild = recordChild && !serializedNode2.needBlock;
    delete serializedNode2.needBlock;
    const shadowRoot = n22.shadowRoot;
    if (shadowRoot && isNativeShadowDom(shadowRoot)) serializedNode2.isShadowHost = true;
  }
  if ((serializedNode2.type === NodeType$2.Document || serializedNode2.type === NodeType$2.Element) && recordChild) {
    if (slimDOMOptions.headWhitespace && serializedNode2.type === NodeType$2.Element && serializedNode2.tagName === "head") {
      preserveWhiteSpace = false;
    }
    const bypassOptions = {
      doc,
      mirror: mirror2,
      blockClass,
      blockSelector,
      maskAllText,
      unblockSelector,
      maskTextClass,
      unmaskTextClass,
      maskTextSelector,
      unmaskTextSelector,
      skipChild,
      inlineStylesheet,
      maskInputOptions,
      maskAttributeFn,
      maskTextFn,
      maskInputFn,
      slimDOMOptions,
      dataURLOptions,
      inlineImages,
      recordCanvas,
      preserveWhiteSpace,
      onSerialize,
      onIframeLoad,
      iframeLoadTimeout,
      onStylesheetLoad,
      stylesheetLoadTimeout,
      keepIframeSrcFn
    };
    for (const childN of Array.from(n22.childNodes)) {
      const serializedChildNode = serializeNodeWithId(childN, bypassOptions);
      if (serializedChildNode) {
        serializedNode2.childNodes.push(serializedChildNode);
      }
    }
    if (isElement$1(n22) && n22.shadowRoot) {
      for (const childN of Array.from(n22.shadowRoot.childNodes)) {
        const serializedChildNode = serializeNodeWithId(childN, bypassOptions);
        if (serializedChildNode) {
          isNativeShadowDom(n22.shadowRoot) && (serializedChildNode.isShadow = true);
          serializedNode2.childNodes.push(serializedChildNode);
        }
      }
    }
  }
  if (n22.parentNode && isShadowRoot(n22.parentNode) && isNativeShadowDom(n22.parentNode)) {
    serializedNode2.isShadow = true;
  }
  if (serializedNode2.type === NodeType$2.Element && serializedNode2.tagName === "iframe" && !_isBlockedElement(n22, blockClass, blockSelector, unblockSelector)) {
    onceIframeLoaded(n22, () => {
      const iframeDoc = getIframeContentDocument(n22);
      if (iframeDoc && onIframeLoad) {
        const serializedIframeNode = serializeNodeWithId(iframeDoc, {
          doc: iframeDoc,
          mirror: mirror2,
          blockClass,
          blockSelector,
          unblockSelector,
          maskAllText,
          maskTextClass,
          unmaskTextClass,
          maskTextSelector,
          unmaskTextSelector,
          skipChild: false,
          inlineStylesheet,
          maskInputOptions,
          maskAttributeFn,
          maskTextFn,
          maskInputFn,
          slimDOMOptions,
          dataURLOptions,
          inlineImages,
          recordCanvas,
          preserveWhiteSpace,
          onSerialize,
          onIframeLoad,
          iframeLoadTimeout,
          onStylesheetLoad,
          stylesheetLoadTimeout,
          keepIframeSrcFn
        });
        if (serializedIframeNode) {
          onIframeLoad(n22, serializedIframeNode);
        }
      }
    }, iframeLoadTimeout);
  }
  if (serializedNode2.type === NodeType$2.Element && serializedNode2.tagName === "link" && typeof serializedNode2.attributes.rel === "string" && (serializedNode2.attributes.rel === "stylesheet" || serializedNode2.attributes.rel === "preload" && typeof serializedNode2.attributes.href === "string" && extractFileExtension(serializedNode2.attributes.href) === "css")) {
    onceStylesheetLoaded(n22, () => {
      if (onStylesheetLoad) {
        const serializedLinkNode = serializeNodeWithId(n22, {
          doc,
          mirror: mirror2,
          blockClass,
          blockSelector,
          unblockSelector,
          maskAllText,
          maskTextClass,
          unmaskTextClass,
          maskTextSelector,
          unmaskTextSelector,
          skipChild: false,
          inlineStylesheet,
          maskInputOptions,
          maskAttributeFn,
          maskTextFn,
          maskInputFn,
          slimDOMOptions,
          dataURLOptions,
          inlineImages,
          recordCanvas,
          preserveWhiteSpace,
          onSerialize,
          onIframeLoad,
          iframeLoadTimeout,
          onStylesheetLoad,
          stylesheetLoadTimeout,
          keepIframeSrcFn
        });
        if (serializedLinkNode) {
          onStylesheetLoad(n22, serializedLinkNode);
        }
      }
    }, stylesheetLoadTimeout);
  }
  return serializedNode2;
}
function snapshot(n22, options) {
  const {
    mirror: mirror2 = new Mirror(),
    blockClass = "rr-block",
    blockSelector = null,
    unblockSelector = null,
    maskAllText = false,
    maskTextClass = "rr-mask",
    unmaskTextClass = null,
    maskTextSelector = null,
    unmaskTextSelector = null,
    inlineStylesheet = true,
    inlineImages = false,
    recordCanvas = false,
    maskAllInputs = false,
    maskAttributeFn,
    maskTextFn,
    maskInputFn,
    slimDOM = false,
    dataURLOptions,
    preserveWhiteSpace,
    onSerialize,
    onIframeLoad,
    iframeLoadTimeout,
    onStylesheetLoad,
    stylesheetLoadTimeout,
    keepIframeSrcFn = () => false
  } = options || {};
  const maskInputOptions = maskAllInputs === true ? {
    color: true,
    date: true,
    "datetime-local": true,
    email: true,
    month: true,
    number: true,
    range: true,
    search: true,
    tel: true,
    text: true,
    time: true,
    url: true,
    week: true,
    textarea: true,
    select: true
  } : maskAllInputs === false ? {} : maskAllInputs;
  const slimDOMOptions = slimDOM === true || slimDOM === "all" ? (
    // if true: set of sensible options that should not throw away any information
    {
      script: true,
      comment: true,
      headFavicon: true,
      headWhitespace: true,
      headMetaDescKeywords: slimDOM === "all",
      // destructive
      headMetaSocial: true,
      headMetaRobots: true,
      headMetaHttpEquiv: true,
      headMetaAuthorship: true,
      headMetaVerification: true
    }
  ) : slimDOM === false ? {} : slimDOM;
  return serializeNodeWithId(n22, {
    doc: n22,
    mirror: mirror2,
    blockClass,
    blockSelector,
    unblockSelector,
    maskAllText,
    maskTextClass,
    unmaskTextClass,
    maskTextSelector,
    unmaskTextSelector,
    skipChild: false,
    inlineStylesheet,
    maskInputOptions,
    maskAttributeFn,
    maskTextFn,
    maskInputFn,
    slimDOMOptions,
    dataURLOptions,
    inlineImages,
    recordCanvas,
    preserveWhiteSpace,
    onSerialize,
    onIframeLoad,
    iframeLoadTimeout,
    onStylesheetLoad,
    stylesheetLoadTimeout,
    keepIframeSrcFn,
    newlyAddedElement: false
  });
}
function on(type, fn, target = document) {
  const options = {
    capture: true,
    passive: true
  };
  target.addEventListener(type, fn, options);
  return () => target.removeEventListener(type, fn, options);
}
var DEPARTED_MIRROR_ACCESS_WARNING = "Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";
var _mirror = {
  map: {},
  getId() {
    console.error(DEPARTED_MIRROR_ACCESS_WARNING);
    return -1;
  },
  getNode() {
    console.error(DEPARTED_MIRROR_ACCESS_WARNING);
    return null;
  },
  removeNodeFromMap() {
    console.error(DEPARTED_MIRROR_ACCESS_WARNING);
  },
  has() {
    console.error(DEPARTED_MIRROR_ACCESS_WARNING);
    return false;
  },
  reset() {
    console.error(DEPARTED_MIRROR_ACCESS_WARNING);
  }
};
if (typeof window !== "undefined" && window.Proxy && window.Reflect) {
  _mirror = new Proxy(_mirror, {
    get(target, prop, receiver) {
      if (prop === "map") {
        console.error(DEPARTED_MIRROR_ACCESS_WARNING);
      }
      return Reflect.get(target, prop, receiver);
    }
  });
}
function throttle$1(func, wait, options = {}) {
  let timeout = null;
  let previous = 0;
  return function(...args) {
    const now = Date.now();
    if (!previous && options.leading === false) {
      previous = now;
    }
    const remaining = wait - (now - previous);
    const context = this;
    if (remaining <= 0 || remaining > wait) {
      if (timeout) {
        clearTimeout$2(timeout);
        timeout = null;
      }
      previous = now;
      func.apply(context, args);
    } else if (!timeout && options.trailing !== false) {
      timeout = setTimeout$1(() => {
        previous = options.leading === false ? 0 : Date.now();
        timeout = null;
        func.apply(context, args);
      }, remaining);
    }
  };
}
function hookSetter(target, key, d2, isRevoked, win = window) {
  const original = win.Object.getOwnPropertyDescriptor(target, key);
  win.Object.defineProperty(target, key, isRevoked ? d2 : {
    set(value) {
      setTimeout$1(() => {
        d2.set.call(this, value);
      }, 0);
      if (original && original.set) {
        original.set.call(this, value);
      }
    }
  });
  return () => hookSetter(target, key, original || {}, true);
}
function patch(source, name, replacement) {
  try {
    if (!(name in source)) {
      return () => {
      };
    }
    const original = source[name];
    const wrapped = replacement(original);
    if (typeof wrapped === "function") {
      wrapped.prototype = wrapped.prototype || {};
      Object.defineProperties(wrapped, {
        __rrweb_original__: {
          enumerable: false,
          value: original
        }
      });
    }
    source[name] = wrapped;
    return () => {
      source[name] = original;
    };
  } catch {
    return () => {
    };
  }
}
var nowTimestamp = Date.now;
if (!/* @__PURE__ */ /[1-9][0-9]{12}/.test(Date.now().toString())) {
  nowTimestamp = () => (/* @__PURE__ */ new Date()).getTime();
}
function getWindowScroll(win) {
  var _a3, _b, _c, _d, _e, _f;
  const doc = win.document;
  return {
    left: doc.scrollingElement ? doc.scrollingElement.scrollLeft : win.pageXOffset !== void 0 ? win.pageXOffset : (doc == null ? void 0 : doc.documentElement.scrollLeft) || ((_b = (_a3 = doc == null ? void 0 : doc.body) == null ? void 0 : _a3.parentElement) == null ? void 0 : _b.scrollLeft) || ((_c = doc == null ? void 0 : doc.body) == null ? void 0 : _c.scrollLeft) || 0,
    top: doc.scrollingElement ? doc.scrollingElement.scrollTop : win.pageYOffset !== void 0 ? win.pageYOffset : (doc == null ? void 0 : doc.documentElement.scrollTop) || ((_e = (_d = doc == null ? void 0 : doc.body) == null ? void 0 : _d.parentElement) == null ? void 0 : _e.scrollTop) || ((_f = doc == null ? void 0 : doc.body) == null ? void 0 : _f.scrollTop) || 0
  };
}
function getWindowHeight() {
  return window.innerHeight || document.documentElement && document.documentElement.clientHeight || document.body && document.body.clientHeight;
}
function getWindowWidth() {
  return window.innerWidth || document.documentElement && document.documentElement.clientWidth || document.body && document.body.clientWidth;
}
function closestElementOfNode$1(node) {
  if (!node) {
    return null;
  }
  try {
    const el = node.nodeType === node.ELEMENT_NODE ? node : node.parentElement;
    return el;
  } catch (error2) {
    return null;
  }
}
function isBlocked(node, blockClass, blockSelector, unblockSelector, checkAncestors) {
  if (!node) {
    return false;
  }
  const el = closestElementOfNode$1(node);
  if (!el) {
    return false;
  }
  const blockedPredicate = createMatchPredicate(blockClass, blockSelector);
  if (!checkAncestors) {
    const isUnblocked = unblockSelector && el.matches(unblockSelector);
    return blockedPredicate(el) && !isUnblocked;
  }
  const blockDistance = distanceToMatch(el, blockedPredicate);
  let unblockDistance = -1;
  if (blockDistance < 0) {
    return false;
  }
  if (unblockSelector) {
    unblockDistance = distanceToMatch(el, createMatchPredicate(null, unblockSelector));
  }
  if (blockDistance > -1 && unblockDistance < 0) {
    return true;
  }
  return blockDistance < unblockDistance;
}
function isSerialized(n22, mirror2) {
  return mirror2.getId(n22) !== -1;
}
function isIgnored(n22, mirror2) {
  return mirror2.getId(n22) === IGNORED_NODE;
}
function isAncestorRemoved(target, mirror2) {
  if (isShadowRoot(target)) {
    return false;
  }
  const id = mirror2.getId(target);
  if (!mirror2.has(id)) {
    return true;
  }
  if (target.parentNode && target.parentNode.nodeType === target.DOCUMENT_NODE) {
    return false;
  }
  if (!target.parentNode) {
    return true;
  }
  return isAncestorRemoved(target.parentNode, mirror2);
}
function legacy_isTouchEvent(event) {
  return Boolean(event.changedTouches);
}
function polyfill$1(win = window) {
  if ("NodeList" in win && !win.NodeList.prototype.forEach) {
    win.NodeList.prototype.forEach = Array.prototype.forEach;
  }
  if ("DOMTokenList" in win && !win.DOMTokenList.prototype.forEach) {
    win.DOMTokenList.prototype.forEach = Array.prototype.forEach;
  }
  if (!Node.prototype.contains) {
    Node.prototype.contains = (...args) => {
      let node = args[0];
      if (!(0 in args)) {
        throw new TypeError("1 argument is required");
      }
      do {
        if (this === node) {
          return true;
        }
      } while (node = node && node.parentNode);
      return false;
    };
  }
}
function isSerializedIframe(n22, mirror2) {
  return Boolean(n22.nodeName === "IFRAME" && mirror2.getMeta(n22));
}
function isSerializedStylesheet(n22, mirror2) {
  return Boolean(n22.nodeName === "LINK" && n22.nodeType === n22.ELEMENT_NODE && n22.getAttribute && n22.getAttribute("rel") === "stylesheet" && mirror2.getMeta(n22));
}
function hasShadowRoot(n22) {
  return Boolean(n22 == null ? void 0 : n22.shadowRoot);
}
var StyleSheetMirror = class {
  constructor() {
    this.id = 1;
    this.styleIDMap = /* @__PURE__ */ new WeakMap();
    this.idStyleMap = /* @__PURE__ */ new Map();
  }
  getId(stylesheet) {
    var _a3;
    return (_a3 = this.styleIDMap.get(stylesheet)) != null ? _a3 : -1;
  }
  has(stylesheet) {
    return this.styleIDMap.has(stylesheet);
  }
  /**
   * @returns If the stylesheet is in the mirror, returns the id of the stylesheet. If not, return the new assigned id.
   */
  add(stylesheet, id) {
    if (this.has(stylesheet)) return this.getId(stylesheet);
    let newId;
    if (id === void 0) {
      newId = this.id++;
    } else newId = id;
    this.styleIDMap.set(stylesheet, newId);
    this.idStyleMap.set(newId, stylesheet);
    return newId;
  }
  getStyle(id) {
    return this.idStyleMap.get(id) || null;
  }
  reset() {
    this.styleIDMap = /* @__PURE__ */ new WeakMap();
    this.idStyleMap = /* @__PURE__ */ new Map();
    this.id = 1;
  }
  generateId() {
    return this.id++;
  }
};
function getShadowHost(n22) {
  var _a3, _b;
  let shadowHost = null;
  if (((_b = (_a3 = n22.getRootNode) == null ? void 0 : _a3.call(n22)) == null ? void 0 : _b.nodeType) === Node.DOCUMENT_FRAGMENT_NODE && n22.getRootNode().host) shadowHost = n22.getRootNode().host;
  return shadowHost;
}
function getRootShadowHost(n22) {
  let rootShadowHost = n22;
  let shadowHost;
  while (shadowHost = getShadowHost(rootShadowHost)) rootShadowHost = shadowHost;
  return rootShadowHost;
}
function shadowHostInDom(n22) {
  const doc = n22.ownerDocument;
  if (!doc) return false;
  const shadowHost = getRootShadowHost(n22);
  return doc.contains(shadowHost);
}
function inDom(n22) {
  const doc = n22.ownerDocument;
  if (!doc) return false;
  return doc.contains(n22) || shadowHostInDom(n22);
}
var cachedImplementations2 = {};
function getImplementation(name) {
  const cached = cachedImplementations2[name];
  if (cached) {
    return cached;
  }
  const document2 = window.document;
  let impl = window[name];
  if (document2 && typeof document2.createElement === "function") {
    try {
      const sandbox = document2.createElement("iframe");
      sandbox.hidden = true;
      document2.head.appendChild(sandbox);
      const contentWindow = sandbox.contentWindow;
      if (contentWindow && contentWindow[name]) {
        impl = // eslint-disable-next-line @typescript-eslint/unbound-method
        contentWindow[name];
      }
      document2.head.removeChild(sandbox);
    } catch (e22) {
    }
  }
  return cachedImplementations2[name] = impl.bind(window);
}
function onRequestAnimationFrame(...rest) {
  return getImplementation("requestAnimationFrame")(...rest);
}
function setTimeout$1(...rest) {
  return getImplementation("setTimeout")(...rest);
}
function clearTimeout$2(...rest) {
  return getImplementation("clearTimeout")(...rest);
}
var EventType = /* @__PURE__ */ ((EventType2) => {
  EventType2[EventType2["DomContentLoaded"] = 0] = "DomContentLoaded";
  EventType2[EventType2["Load"] = 1] = "Load";
  EventType2[EventType2["FullSnapshot"] = 2] = "FullSnapshot";
  EventType2[EventType2["IncrementalSnapshot"] = 3] = "IncrementalSnapshot";
  EventType2[EventType2["Meta"] = 4] = "Meta";
  EventType2[EventType2["Custom"] = 5] = "Custom";
  EventType2[EventType2["Plugin"] = 6] = "Plugin";
  return EventType2;
})(EventType || {});
var IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {
  IncrementalSource2[IncrementalSource2["Mutation"] = 0] = "Mutation";
  IncrementalSource2[IncrementalSource2["MouseMove"] = 1] = "MouseMove";
  IncrementalSource2[IncrementalSource2["MouseInteraction"] = 2] = "MouseInteraction";
  IncrementalSource2[IncrementalSource2["Scroll"] = 3] = "Scroll";
  IncrementalSource2[IncrementalSource2["ViewportResize"] = 4] = "ViewportResize";
  IncrementalSource2[IncrementalSource2["Input"] = 5] = "Input";
  IncrementalSource2[IncrementalSource2["TouchMove"] = 6] = "TouchMove";
  IncrementalSource2[IncrementalSource2["MediaInteraction"] = 7] = "MediaInteraction";
  IncrementalSource2[IncrementalSource2["StyleSheetRule"] = 8] = "StyleSheetRule";
  IncrementalSource2[IncrementalSource2["CanvasMutation"] = 9] = "CanvasMutation";
  IncrementalSource2[IncrementalSource2["Font"] = 10] = "Font";
  IncrementalSource2[IncrementalSource2["Log"] = 11] = "Log";
  IncrementalSource2[IncrementalSource2["Drag"] = 12] = "Drag";
  IncrementalSource2[IncrementalSource2["StyleDeclaration"] = 13] = "StyleDeclaration";
  IncrementalSource2[IncrementalSource2["Selection"] = 14] = "Selection";
  IncrementalSource2[IncrementalSource2["AdoptedStyleSheet"] = 15] = "AdoptedStyleSheet";
  IncrementalSource2[IncrementalSource2["CustomElement"] = 16] = "CustomElement";
  return IncrementalSource2;
})(IncrementalSource || {});
var MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {
  MouseInteractions2[MouseInteractions2["MouseUp"] = 0] = "MouseUp";
  MouseInteractions2[MouseInteractions2["MouseDown"] = 1] = "MouseDown";
  MouseInteractions2[MouseInteractions2["Click"] = 2] = "Click";
  MouseInteractions2[MouseInteractions2["ContextMenu"] = 3] = "ContextMenu";
  MouseInteractions2[MouseInteractions2["DblClick"] = 4] = "DblClick";
  MouseInteractions2[MouseInteractions2["Focus"] = 5] = "Focus";
  MouseInteractions2[MouseInteractions2["Blur"] = 6] = "Blur";
  MouseInteractions2[MouseInteractions2["TouchStart"] = 7] = "TouchStart";
  MouseInteractions2[MouseInteractions2["TouchMove_Departed"] = 8] = "TouchMove_Departed";
  MouseInteractions2[MouseInteractions2["TouchEnd"] = 9] = "TouchEnd";
  MouseInteractions2[MouseInteractions2["TouchCancel"] = 10] = "TouchCancel";
  return MouseInteractions2;
})(MouseInteractions || {});
var PointerTypes = /* @__PURE__ */ ((PointerTypes2) => {
  PointerTypes2[PointerTypes2["Mouse"] = 0] = "Mouse";
  PointerTypes2[PointerTypes2["Pen"] = 1] = "Pen";
  PointerTypes2[PointerTypes2["Touch"] = 2] = "Touch";
  return PointerTypes2;
})(PointerTypes || {});
var MediaInteractions = /* @__PURE__ */ ((MediaInteractions2) => {
  MediaInteractions2[MediaInteractions2["Play"] = 0] = "Play";
  MediaInteractions2[MediaInteractions2["Pause"] = 1] = "Pause";
  MediaInteractions2[MediaInteractions2["Seeked"] = 2] = "Seeked";
  MediaInteractions2[MediaInteractions2["VolumeChange"] = 3] = "VolumeChange";
  MediaInteractions2[MediaInteractions2["RateChange"] = 4] = "RateChange";
  return MediaInteractions2;
})(MediaInteractions || {});
function getIFrameContentDocument(iframe) {
  try {
    return iframe.contentDocument;
  } catch (e22) {
  }
}
function getIFrameContentWindow(iframe) {
  try {
    return iframe.contentWindow;
  } catch (e22) {
  }
}
function isNodeInLinkedList(n22) {
  return "__ln" in n22;
}
var DoubleLinkedList = class {
  constructor() {
    this.length = 0;
    this.head = null;
    this.tail = null;
  }
  get(position) {
    if (position >= this.length) {
      throw new Error("Position outside of list range");
    }
    let current = this.head;
    for (let index = 0; index < position; index++) {
      current = (current == null ? void 0 : current.next) || null;
    }
    return current;
  }
  addNode(n22) {
    const node = {
      value: n22,
      previous: null,
      next: null
    };
    n22.__ln = node;
    if (n22.previousSibling && isNodeInLinkedList(n22.previousSibling)) {
      const current = n22.previousSibling.__ln.next;
      node.next = current;
      node.previous = n22.previousSibling.__ln;
      n22.previousSibling.__ln.next = node;
      if (current) {
        current.previous = node;
      }
    } else if (n22.nextSibling && isNodeInLinkedList(n22.nextSibling) && n22.nextSibling.__ln.previous) {
      const current = n22.nextSibling.__ln.previous;
      node.previous = current;
      node.next = n22.nextSibling.__ln;
      n22.nextSibling.__ln.previous = node;
      if (current) {
        current.next = node;
      }
    } else {
      if (this.head) {
        this.head.previous = node;
      }
      node.next = this.head;
      this.head = node;
    }
    if (node.next === null) {
      this.tail = node;
    }
    this.length++;
  }
  removeNode(n22) {
    const current = n22.__ln;
    if (!this.head) {
      return;
    }
    if (!current.previous) {
      this.head = current.next;
      if (this.head) {
        this.head.previous = null;
      } else {
        this.tail = null;
      }
    } else {
      current.previous.next = current.next;
      if (current.next) {
        current.next.previous = current.previous;
      } else {
        this.tail = current.previous;
      }
    }
    if (n22.__ln) {
      delete n22.__ln;
    }
    this.length--;
  }
};
var moveKey = (id, parentId) => `${id}@${parentId}`;
var MutationBuffer = class {
  constructor() {
    this.frozen = false;
    this.locked = false;
    this.texts = [];
    this.attributes = [];
    this.attributeMap = /* @__PURE__ */ new WeakMap();
    this.removes = [];
    this.mapRemoves = [];
    this.movedMap = {};
    this.addedSet = /* @__PURE__ */ new Set();
    this.movedSet = /* @__PURE__ */ new Set();
    this.droppedSet = /* @__PURE__ */ new Set();
    this.processMutations = (mutations) => {
      mutations.forEach(this.processMutation);
      this.emit();
    };
    this.emit = () => {
      if (this.frozen || this.locked) {
        return;
      }
      const adds = [];
      const addedIds = /* @__PURE__ */ new Set();
      const addList = new DoubleLinkedList();
      const getNextId = (n22) => {
        let ns = n22;
        let nextId = IGNORED_NODE;
        while (nextId === IGNORED_NODE) {
          ns = ns && ns.nextSibling;
          nextId = ns && this.mirror.getId(ns);
        }
        return nextId;
      };
      const pushAdd = (n22) => {
        if (!n22.parentNode || !inDom(n22)) {
          return;
        }
        const parentId = isShadowRoot(n22.parentNode) ? this.mirror.getId(getShadowHost(n22)) : this.mirror.getId(n22.parentNode);
        const nextId = getNextId(n22);
        if (parentId === -1 || nextId === -1) {
          return addList.addNode(n22);
        }
        const sn = serializeNodeWithId(n22, {
          doc: this.doc,
          mirror: this.mirror,
          blockClass: this.blockClass,
          blockSelector: this.blockSelector,
          maskAllText: this.maskAllText,
          unblockSelector: this.unblockSelector,
          maskTextClass: this.maskTextClass,
          unmaskTextClass: this.unmaskTextClass,
          maskTextSelector: this.maskTextSelector,
          unmaskTextSelector: this.unmaskTextSelector,
          skipChild: true,
          newlyAddedElement: true,
          inlineStylesheet: this.inlineStylesheet,
          maskInputOptions: this.maskInputOptions,
          maskAttributeFn: this.maskAttributeFn,
          maskTextFn: this.maskTextFn,
          maskInputFn: this.maskInputFn,
          slimDOMOptions: this.slimDOMOptions,
          dataURLOptions: this.dataURLOptions,
          recordCanvas: this.recordCanvas,
          inlineImages: this.inlineImages,
          onSerialize: (currentN) => {
            if (isSerializedIframe(currentN, this.mirror) && !isBlocked(currentN, this.blockClass, this.blockSelector, this.unblockSelector, false)) {
              this.iframeManager.addIframe(currentN);
            }
            if (isSerializedStylesheet(currentN, this.mirror)) {
              this.stylesheetManager.trackLinkElement(currentN);
            }
            if (hasShadowRoot(n22)) {
              this.shadowDomManager.addShadowRoot(n22.shadowRoot, this.doc);
            }
          },
          onIframeLoad: (iframe, childSn) => {
            if (isBlocked(iframe, this.blockClass, this.blockSelector, this.unblockSelector, false)) {
              return;
            }
            this.iframeManager.attachIframe(iframe, childSn);
            if (iframe.contentWindow) {
              this.canvasManager.addWindow(iframe.contentWindow);
            }
            this.shadowDomManager.observeAttachShadow(iframe);
          },
          onStylesheetLoad: (link, childSn) => {
            this.stylesheetManager.attachLinkElement(link, childSn);
          }
        });
        if (sn) {
          adds.push({
            parentId,
            nextId,
            node: sn
          });
          addedIds.add(sn.id);
        }
      };
      while (this.mapRemoves.length) {
        this.mirror.removeNodeFromMap(this.mapRemoves.shift());
      }
      for (const n22 of this.movedSet) {
        if (isParentRemoved(this.removes, n22, this.mirror) && !this.movedSet.has(n22.parentNode)) {
          continue;
        }
        pushAdd(n22);
      }
      for (const n22 of this.addedSet) {
        if (!isAncestorInSet(this.droppedSet, n22) && !isParentRemoved(this.removes, n22, this.mirror)) {
          pushAdd(n22);
        } else if (isAncestorInSet(this.movedSet, n22)) {
          pushAdd(n22);
        } else {
          this.droppedSet.add(n22);
        }
      }
      let candidate = null;
      while (addList.length) {
        let node = null;
        if (candidate) {
          const parentId = this.mirror.getId(candidate.value.parentNode);
          const nextId = getNextId(candidate.value);
          if (parentId !== -1 && nextId !== -1) {
            node = candidate;
          }
        }
        if (!node) {
          let tailNode = addList.tail;
          while (tailNode) {
            const _node = tailNode;
            tailNode = tailNode.previous;
            if (_node) {
              const parentId = this.mirror.getId(_node.value.parentNode);
              const nextId = getNextId(_node.value);
              if (nextId === -1) continue;
              else if (parentId !== -1) {
                node = _node;
                break;
              } else {
                const unhandledNode = _node.value;
                if (unhandledNode.parentNode && unhandledNode.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
                  const shadowHost = unhandledNode.parentNode.host;
                  const parentId2 = this.mirror.getId(shadowHost);
                  if (parentId2 !== -1) {
                    node = _node;
                    break;
                  }
                }
              }
            }
          }
        }
        if (!node) {
          while (addList.head) {
            addList.removeNode(addList.head.value);
          }
          break;
        }
        candidate = node.previous;
        addList.removeNode(node.value);
        pushAdd(node.value);
      }
      const payload = {
        texts: this.texts.map((text) => ({
          id: this.mirror.getId(text.node),
          value: text.value
        })).filter((text) => !addedIds.has(text.id)).filter((text) => this.mirror.has(text.id)),
        attributes: this.attributes.map((attribute) => {
          const {
            attributes
          } = attribute;
          if (typeof attributes.style === "string") {
            const diffAsStr = JSON.stringify(attribute.styleDiff);
            const unchangedAsStr = JSON.stringify(attribute._unchangedStyles);
            if (diffAsStr.length < attributes.style.length) {
              if ((diffAsStr + unchangedAsStr).split("var(").length === attributes.style.split("var(").length) {
                attributes.style = attribute.styleDiff;
              }
            }
          }
          return {
            id: this.mirror.getId(attribute.node),
            attributes
          };
        }).filter((attribute) => !addedIds.has(attribute.id)).filter((attribute) => this.mirror.has(attribute.id)),
        removes: this.removes,
        adds
      };
      if (!payload.texts.length && !payload.attributes.length && !payload.removes.length && !payload.adds.length) {
        return;
      }
      this.texts = [];
      this.attributes = [];
      this.attributeMap = /* @__PURE__ */ new WeakMap();
      this.removes = [];
      this.addedSet = /* @__PURE__ */ new Set();
      this.movedSet = /* @__PURE__ */ new Set();
      this.droppedSet = /* @__PURE__ */ new Set();
      this.movedMap = {};
      this.mutationCb(payload);
    };
    this.processMutation = (m2) => {
      if (isIgnored(m2.target, this.mirror)) {
        return;
      }
      switch (m2.type) {
        case "characterData": {
          const value = m2.target.textContent;
          if (!isBlocked(m2.target, this.blockClass, this.blockSelector, this.unblockSelector, false) && value !== m2.oldValue) {
            this.texts.push({
              value: needMaskingText(m2.target, this.maskTextClass, this.maskTextSelector, this.unmaskTextClass, this.unmaskTextSelector, this.maskAllText) && value ? this.maskTextFn ? this.maskTextFn(value, closestElementOfNode$1(m2.target)) : value.replace(/[\S]/g, "*") : value,
              node: m2.target
            });
          }
          break;
        }
        case "attributes": {
          const target = m2.target;
          let attributeName = m2.attributeName;
          let value = m2.target.getAttribute(attributeName);
          if (attributeName === "value") {
            const type = getInputType(target);
            const tagName = target.tagName;
            value = getInputValue(target, tagName, type);
            const isInputMasked = shouldMaskInput({
              maskInputOptions: this.maskInputOptions,
              tagName,
              type
            });
            const forceMask = needMaskingText(m2.target, this.maskTextClass, this.maskTextSelector, this.unmaskTextClass, this.unmaskTextSelector, isInputMasked);
            value = maskInputValue({
              isMasked: forceMask,
              element: target,
              value,
              maskInputFn: this.maskInputFn
            });
          }
          if (isBlocked(m2.target, this.blockClass, this.blockSelector, this.unblockSelector, false) || value === m2.oldValue) {
            return;
          }
          let item = this.attributeMap.get(m2.target);
          if (target.tagName === "IFRAME" && attributeName === "src" && !this.keepIframeSrcFn(value)) {
            const iframeDoc = getIFrameContentDocument(target);
            if (!iframeDoc) {
              attributeName = "rr_src";
            } else {
              return;
            }
          }
          if (!item) {
            item = {
              node: m2.target,
              attributes: {},
              styleDiff: {},
              _unchangedStyles: {}
            };
            this.attributes.push(item);
            this.attributeMap.set(m2.target, item);
          }
          if (attributeName === "type" && target.tagName === "INPUT" && (m2.oldValue || "").toLowerCase() === "password") {
            target.setAttribute("data-rr-is-password", "true");
          }
          if (!ignoreAttribute(target.tagName, attributeName)) {
            item.attributes[attributeName] = transformAttribute(this.doc, toLowerCase(target.tagName), toLowerCase(attributeName), value, target, this.maskAttributeFn);
            if (attributeName === "style") {
              if (!this.unattachedDoc) {
                try {
                  this.unattachedDoc = document.implementation.createHTMLDocument();
                } catch (e22) {
                  this.unattachedDoc = this.doc;
                }
              }
              const old = this.unattachedDoc.createElement("span");
              if (m2.oldValue) {
                old.setAttribute("style", m2.oldValue);
              }
              for (const pname of Array.from(target.style)) {
                const newValue = target.style.getPropertyValue(pname);
                const newPriority = target.style.getPropertyPriority(pname);
                if (newValue !== old.style.getPropertyValue(pname) || newPriority !== old.style.getPropertyPriority(pname)) {
                  if (newPriority === "") {
                    item.styleDiff[pname] = newValue;
                  } else {
                    item.styleDiff[pname] = [newValue, newPriority];
                  }
                } else {
                  item._unchangedStyles[pname] = [newValue, newPriority];
                }
              }
              for (const pname of Array.from(old.style)) {
                if (target.style.getPropertyValue(pname) === "") {
                  item.styleDiff[pname] = false;
                }
              }
            }
          }
          break;
        }
        case "childList": {
          if (isBlocked(m2.target, this.blockClass, this.blockSelector, this.unblockSelector, true)) {
            return;
          }
          m2.addedNodes.forEach((n22) => this.genAdds(n22, m2.target));
          m2.removedNodes.forEach((n22) => {
            const nodeId = this.mirror.getId(n22);
            const parentId = isShadowRoot(m2.target) ? this.mirror.getId(m2.target.host) : this.mirror.getId(m2.target);
            if (isBlocked(m2.target, this.blockClass, this.blockSelector, this.unblockSelector, false) || isIgnored(n22, this.mirror) || !isSerialized(n22, this.mirror)) {
              return;
            }
            if (this.addedSet.has(n22)) {
              deepDelete(this.addedSet, n22);
              this.droppedSet.add(n22);
            } else if (this.addedSet.has(m2.target) && nodeId === -1) ;
            else if (isAncestorRemoved(m2.target, this.mirror)) ;
            else if (this.movedSet.has(n22) && this.movedMap[moveKey(nodeId, parentId)]) {
              deepDelete(this.movedSet, n22);
            } else {
              this.removes.push({
                parentId,
                id: nodeId,
                isShadow: isShadowRoot(m2.target) && isNativeShadowDom(m2.target) ? true : void 0
              });
            }
            this.mapRemoves.push(n22);
          });
          break;
        }
      }
    };
    this.genAdds = (n22, target) => {
      if (this.processedNodeManager.inOtherBuffer(n22, this)) return;
      if (this.addedSet.has(n22) || this.movedSet.has(n22)) return;
      if (this.mirror.hasNode(n22)) {
        if (isIgnored(n22, this.mirror)) {
          return;
        }
        this.movedSet.add(n22);
        let targetId = null;
        if (target && this.mirror.hasNode(target)) {
          targetId = this.mirror.getId(target);
        }
        if (targetId && targetId !== -1) {
          this.movedMap[moveKey(this.mirror.getId(n22), targetId)] = true;
        }
      } else {
        this.addedSet.add(n22);
        this.droppedSet.delete(n22);
      }
      if (!isBlocked(n22, this.blockClass, this.blockSelector, this.unblockSelector, false)) {
        n22.childNodes.forEach((childN) => this.genAdds(childN));
        if (hasShadowRoot(n22)) {
          n22.shadowRoot.childNodes.forEach((childN) => {
            this.processedNodeManager.add(childN, this);
            this.genAdds(childN, n22);
          });
        }
      }
    };
  }
  init(options) {
    ["mutationCb", "blockClass", "blockSelector", "unblockSelector", "maskAllText", "maskTextClass", "unmaskTextClass", "maskTextSelector", "unmaskTextSelector", "inlineStylesheet", "maskInputOptions", "maskAttributeFn", "maskTextFn", "maskInputFn", "keepIframeSrcFn", "recordCanvas", "inlineImages", "slimDOMOptions", "dataURLOptions", "doc", "mirror", "iframeManager", "stylesheetManager", "shadowDomManager", "canvasManager", "processedNodeManager"].forEach((key) => {
      this[key] = options[key];
    });
  }
  freeze() {
    this.frozen = true;
    this.canvasManager.freeze();
  }
  unfreeze() {
    this.frozen = false;
    this.canvasManager.unfreeze();
    this.emit();
  }
  isFrozen() {
    return this.frozen;
  }
  lock() {
    this.locked = true;
    this.canvasManager.lock();
  }
  unlock() {
    this.locked = false;
    this.canvasManager.unlock();
    this.emit();
  }
  reset() {
    this.shadowDomManager.reset();
    this.canvasManager.reset();
  }
};
function deepDelete(addsSet, n22) {
  addsSet.delete(n22);
  n22.childNodes.forEach((childN) => deepDelete(addsSet, childN));
}
function isParentRemoved(removes, n22, mirror2) {
  if (removes.length === 0) return false;
  return _isParentRemoved(removes, n22, mirror2);
}
function _isParentRemoved(removes, n22, mirror2) {
  let node = n22.parentNode;
  while (node) {
    const parentId = mirror2.getId(node);
    if (removes.some((r22) => r22.id === parentId)) {
      return true;
    }
    node = node.parentNode;
  }
  return false;
}
function isAncestorInSet(set2, n22) {
  if (set2.size === 0) return false;
  return _isAncestorInSet(set2, n22);
}
function _isAncestorInSet(set2, n22) {
  const {
    parentNode
  } = n22;
  if (!parentNode) {
    return false;
  }
  if (set2.has(parentNode)) {
    return true;
  }
  return _isAncestorInSet(set2, parentNode);
}
var errorHandler;
function registerErrorHandler(handler) {
  errorHandler = handler;
}
function unregisterErrorHandler() {
  errorHandler = void 0;
}
var callbackWrapper = (cb) => {
  if (!errorHandler) {
    return cb;
  }
  const rrwebWrapped = (...rest) => {
    try {
      return cb(...rest);
    } catch (error2) {
      if (errorHandler && errorHandler(error2) === true) {
        return () => {
        };
      }
      throw error2;
    }
  };
  return rrwebWrapped;
};
var mutationBuffers = [];
function getEventTarget2(event) {
  try {
    if ("composedPath" in event) {
      const path = event.composedPath();
      if (path.length) {
        return path[0];
      }
    } else if ("path" in event && event.path.length) {
      return event.path[0];
    }
  } catch {
  }
  return event && event.target;
}
function initMutationObserver(options, rootEl) {
  var _a3, _b;
  const mutationBuffer = new MutationBuffer();
  mutationBuffers.push(mutationBuffer);
  mutationBuffer.init(options);
  let mutationObserverCtor = window.MutationObserver || /**
  * Some websites may disable MutationObserver by removing it from the window object.
  * If someone is using rrweb to build a browser extention or things like it, they
  * could not change the website's code but can have an opportunity to inject some
  * code before the website executing its JS logic.
  * Then they can do this to store the native MutationObserver:
  * window.__rrMutationObserver = MutationObserver
  */
  window.__rrMutationObserver;
  const angularZoneSymbol = (_b = (_a3 = window == null ? void 0 : window.Zone) == null ? void 0 : _a3.__symbol__) == null ? void 0 : _b.call(_a3, "MutationObserver");
  if (angularZoneSymbol && window[angularZoneSymbol]) {
    mutationObserverCtor = window[angularZoneSymbol];
  }
  const observer = new mutationObserverCtor(callbackWrapper((mutations) => {
    if (options.onMutation && options.onMutation(mutations) === false) {
      return;
    }
    mutationBuffer.processMutations.bind(mutationBuffer)(mutations);
  }));
  observer.observe(rootEl, {
    attributes: true,
    attributeOldValue: true,
    characterData: true,
    characterDataOldValue: true,
    childList: true,
    subtree: true
  });
  return observer;
}
function initMoveObserver({
  mousemoveCb,
  sampling,
  doc,
  mirror: mirror2
}) {
  if (sampling.mousemove === false) {
    return () => {
    };
  }
  const threshold = typeof sampling.mousemove === "number" ? sampling.mousemove : 50;
  const callbackThreshold = typeof sampling.mousemoveCallback === "number" ? sampling.mousemoveCallback : 500;
  let positions = [];
  let timeBaseline;
  const wrappedCb = throttle$1(callbackWrapper((source) => {
    const totalOffset = Date.now() - timeBaseline;
    mousemoveCb(positions.map((p2) => {
      p2.timeOffset -= totalOffset;
      return p2;
    }), source);
    positions = [];
    timeBaseline = null;
  }), callbackThreshold);
  const updatePosition = callbackWrapper(throttle$1(callbackWrapper((evt) => {
    const target = getEventTarget2(evt);
    const {
      clientX,
      clientY
    } = legacy_isTouchEvent(evt) ? evt.changedTouches[0] : evt;
    if (!timeBaseline) {
      timeBaseline = nowTimestamp();
    }
    positions.push({
      x: clientX,
      y: clientY,
      id: mirror2.getId(target),
      timeOffset: nowTimestamp() - timeBaseline
    });
    wrappedCb(typeof DragEvent !== "undefined" && evt instanceof DragEvent ? IncrementalSource.Drag : evt instanceof MouseEvent ? IncrementalSource.MouseMove : IncrementalSource.TouchMove);
  }), threshold, {
    trailing: false
  }));
  const handlers4 = [on("mousemove", updatePosition, doc), on("touchmove", updatePosition, doc), on("drag", updatePosition, doc)];
  return callbackWrapper(() => {
    handlers4.forEach((h2) => h2());
  });
}
function initMouseInteractionObserver({
  mouseInteractionCb,
  doc,
  mirror: mirror2,
  blockClass,
  blockSelector,
  unblockSelector,
  sampling
}) {
  if (sampling.mouseInteraction === false) {
    return () => {
    };
  }
  const disableMap = sampling.mouseInteraction === true || sampling.mouseInteraction === void 0 ? {} : sampling.mouseInteraction;
  const handlers4 = [];
  let currentPointerType = null;
  const getHandler = (eventKey) => {
    return (event) => {
      const target = getEventTarget2(event);
      if (isBlocked(target, blockClass, blockSelector, unblockSelector, true)) {
        return;
      }
      let pointerType = null;
      let thisEventKey = eventKey;
      if ("pointerType" in event) {
        switch (event.pointerType) {
          case "mouse":
            pointerType = PointerTypes.Mouse;
            break;
          case "touch":
            pointerType = PointerTypes.Touch;
            break;
          case "pen":
            pointerType = PointerTypes.Pen;
            break;
        }
        if (pointerType === PointerTypes.Touch) {
          if (MouseInteractions[eventKey] === MouseInteractions.MouseDown) {
            thisEventKey = "TouchStart";
          } else if (MouseInteractions[eventKey] === MouseInteractions.MouseUp) {
            thisEventKey = "TouchEnd";
          }
        } else if (pointerType === PointerTypes.Pen) ;
      } else if (legacy_isTouchEvent(event)) {
        pointerType = PointerTypes.Touch;
      }
      if (pointerType !== null) {
        currentPointerType = pointerType;
        if (thisEventKey.startsWith("Touch") && pointerType === PointerTypes.Touch || thisEventKey.startsWith("Mouse") && pointerType === PointerTypes.Mouse) {
          pointerType = null;
        }
      } else if (MouseInteractions[eventKey] === MouseInteractions.Click) {
        pointerType = currentPointerType;
        currentPointerType = null;
      }
      const e22 = legacy_isTouchEvent(event) ? event.changedTouches[0] : event;
      if (!e22) {
        return;
      }
      const id = mirror2.getId(target);
      const {
        clientX,
        clientY
      } = e22;
      callbackWrapper(mouseInteractionCb)(__spreadValues({
        type: MouseInteractions[thisEventKey],
        id,
        x: clientX,
        y: clientY
      }, pointerType !== null && {
        pointerType
      }));
    };
  };
  Object.keys(MouseInteractions).filter((key) => Number.isNaN(Number(key)) && !key.endsWith("_Departed") && disableMap[key] !== false).forEach((eventKey) => {
    let eventName = toLowerCase(eventKey);
    const handler = getHandler(eventKey);
    if (window.PointerEvent) {
      switch (MouseInteractions[eventKey]) {
        case MouseInteractions.MouseDown:
        case MouseInteractions.MouseUp:
          eventName = eventName.replace("mouse", "pointer");
          break;
        case MouseInteractions.TouchStart:
        case MouseInteractions.TouchEnd:
          return;
      }
    }
    handlers4.push(on(eventName, handler, doc));
  });
  return callbackWrapper(() => {
    handlers4.forEach((h2) => h2());
  });
}
function initScrollObserver({
  scrollCb,
  doc,
  mirror: mirror2,
  blockClass,
  blockSelector,
  unblockSelector,
  sampling
}) {
  const updatePosition = callbackWrapper(throttle$1(callbackWrapper((evt) => {
    const target = getEventTarget2(evt);
    if (!target || isBlocked(target, blockClass, blockSelector, unblockSelector, true)) {
      return;
    }
    const id = mirror2.getId(target);
    if (target === doc && doc.defaultView) {
      const scrollLeftTop = getWindowScroll(doc.defaultView);
      scrollCb({
        id,
        x: scrollLeftTop.left,
        y: scrollLeftTop.top
      });
    } else {
      scrollCb({
        id,
        x: target.scrollLeft,
        y: target.scrollTop
      });
    }
  }), sampling.scroll || 100));
  return on("scroll", updatePosition, doc);
}
function initViewportResizeObserver({
  viewportResizeCb
}, {
  win
}) {
  let lastH = -1;
  let lastW = -1;
  const updateDimension = callbackWrapper(throttle$1(callbackWrapper(() => {
    const height = getWindowHeight();
    const width = getWindowWidth();
    if (lastH !== height || lastW !== width) {
      viewportResizeCb({
        width: Number(width),
        height: Number(height)
      });
      lastH = height;
      lastW = width;
    }
  }), 200));
  return on("resize", updateDimension, win);
}
var INPUT_TAGS = ["INPUT", "TEXTAREA", "SELECT"];
var lastInputValueMap = /* @__PURE__ */ new WeakMap();
function initInputObserver({
  inputCb,
  doc,
  mirror: mirror2,
  blockClass,
  blockSelector,
  unblockSelector,
  ignoreClass,
  ignoreSelector,
  maskInputOptions,
  maskInputFn,
  sampling,
  userTriggeredOnInput,
  maskTextClass,
  unmaskTextClass,
  maskTextSelector,
  unmaskTextSelector
}) {
  function eventHandler(event) {
    let target = getEventTarget2(event);
    const userTriggered = event.isTrusted;
    const tagName = target && toUpperCase(target.tagName);
    if (tagName === "OPTION") target = target.parentElement;
    if (!target || !tagName || INPUT_TAGS.indexOf(tagName) < 0 || isBlocked(target, blockClass, blockSelector, unblockSelector, true)) {
      return;
    }
    const el = target;
    if (el.classList.contains(ignoreClass) || ignoreSelector && el.matches(ignoreSelector)) {
      return;
    }
    const type = getInputType(target);
    let text = getInputValue(el, tagName, type);
    let isChecked = false;
    const isInputMasked = shouldMaskInput({
      maskInputOptions,
      tagName,
      type
    });
    const forceMask = needMaskingText(target, maskTextClass, maskTextSelector, unmaskTextClass, unmaskTextSelector, isInputMasked);
    if (type === "radio" || type === "checkbox") {
      isChecked = target.checked;
    }
    text = maskInputValue({
      isMasked: forceMask,
      element: target,
      value: text,
      maskInputFn
    });
    cbWithDedup(target, userTriggeredOnInput ? {
      text,
      isChecked,
      userTriggered
    } : {
      text,
      isChecked
    });
    const name = target.name;
    if (type === "radio" && name && isChecked) {
      doc.querySelectorAll(`input[type="radio"][name="${name}"]`).forEach((el2) => {
        if (el2 !== target) {
          const text2 = maskInputValue({
            // share mask behavior of `target`
            isMasked: forceMask,
            element: el2,
            value: getInputValue(el2, tagName, type),
            maskInputFn
          });
          cbWithDedup(el2, userTriggeredOnInput ? {
            text: text2,
            isChecked: !isChecked,
            userTriggered: false
          } : {
            text: text2,
            isChecked: !isChecked
          });
        }
      });
    }
  }
  function cbWithDedup(target, v2) {
    const lastInputValue = lastInputValueMap.get(target);
    if (!lastInputValue || lastInputValue.text !== v2.text || lastInputValue.isChecked !== v2.isChecked) {
      lastInputValueMap.set(target, v2);
      const id = mirror2.getId(target);
      callbackWrapper(inputCb)(__spreadProps(__spreadValues({}, v2), {
        id
      }));
    }
  }
  const events = sampling.input === "last" ? ["change"] : ["input", "change"];
  const handlers4 = events.map((eventName) => on(eventName, callbackWrapper(eventHandler), doc));
  const currentWindow = doc.defaultView;
  if (!currentWindow) {
    return () => {
      handlers4.forEach((h2) => h2());
    };
  }
  const propertyDescriptor = currentWindow.Object.getOwnPropertyDescriptor(currentWindow.HTMLInputElement.prototype, "value");
  const hookProperties = [
    [currentWindow.HTMLInputElement.prototype, "value"],
    [currentWindow.HTMLInputElement.prototype, "checked"],
    [currentWindow.HTMLSelectElement.prototype, "value"],
    [currentWindow.HTMLTextAreaElement.prototype, "value"],
    // Some UI library use selectedIndex to set select value
    [currentWindow.HTMLSelectElement.prototype, "selectedIndex"],
    [currentWindow.HTMLOptionElement.prototype, "selected"]
  ];
  if (propertyDescriptor && propertyDescriptor.set) {
    handlers4.push(...hookProperties.map((p2) => hookSetter(p2[0], p2[1], {
      set() {
        callbackWrapper(eventHandler)({
          target: this,
          isTrusted: false
          // userTriggered to false as this could well be programmatic
        });
      }
    }, false, currentWindow)));
  }
  return callbackWrapper(() => {
    handlers4.forEach((h2) => h2());
  });
}
function getNestedCSSRulePositions(rule) {
  const positions = [];
  function recurse(childRule, pos) {
    if (hasNestedCSSRule("CSSGroupingRule") && childRule.parentRule instanceof CSSGroupingRule || hasNestedCSSRule("CSSMediaRule") && childRule.parentRule instanceof CSSMediaRule || hasNestedCSSRule("CSSSupportsRule") && childRule.parentRule instanceof CSSSupportsRule || hasNestedCSSRule("CSSConditionRule") && childRule.parentRule instanceof CSSConditionRule) {
      const rules2 = Array.from(childRule.parentRule.cssRules);
      const index = rules2.indexOf(childRule);
      pos.unshift(index);
    } else if (childRule.parentStyleSheet) {
      const rules2 = Array.from(childRule.parentStyleSheet.cssRules);
      const index = rules2.indexOf(childRule);
      pos.unshift(index);
    }
    return pos;
  }
  return recurse(rule, positions);
}
function getIdAndStyleId(sheet, mirror2, styleMirror) {
  let id, styleId;
  if (!sheet) return {};
  if (sheet.ownerNode) id = mirror2.getId(sheet.ownerNode);
  else styleId = styleMirror.getId(sheet);
  return {
    styleId,
    id
  };
}
function initStyleSheetObserver({
  styleSheetRuleCb,
  mirror: mirror2,
  stylesheetManager
}, {
  win
}) {
  if (!win.CSSStyleSheet || !win.CSSStyleSheet.prototype) {
    return () => {
    };
  }
  const insertRule = win.CSSStyleSheet.prototype.insertRule;
  win.CSSStyleSheet.prototype.insertRule = new Proxy(insertRule, {
    apply: callbackWrapper((target, thisArg, argumentsList) => {
      const [rule, index] = argumentsList;
      const {
        id,
        styleId
      } = getIdAndStyleId(thisArg, mirror2, stylesheetManager.styleMirror);
      if (id && id !== -1 || styleId && styleId !== -1) {
        styleSheetRuleCb({
          id,
          styleId,
          adds: [{
            rule,
            index
          }]
        });
      }
      return target.apply(thisArg, argumentsList);
    })
  });
  const deleteRule = win.CSSStyleSheet.prototype.deleteRule;
  win.CSSStyleSheet.prototype.deleteRule = new Proxy(deleteRule, {
    apply: callbackWrapper((target, thisArg, argumentsList) => {
      const [index] = argumentsList;
      const {
        id,
        styleId
      } = getIdAndStyleId(thisArg, mirror2, stylesheetManager.styleMirror);
      if (id && id !== -1 || styleId && styleId !== -1) {
        styleSheetRuleCb({
          id,
          styleId,
          removes: [{
            index
          }]
        });
      }
      return target.apply(thisArg, argumentsList);
    })
  });
  let replace;
  if (win.CSSStyleSheet.prototype.replace) {
    replace = win.CSSStyleSheet.prototype.replace;
    win.CSSStyleSheet.prototype.replace = new Proxy(replace, {
      apply: callbackWrapper((target, thisArg, argumentsList) => {
        const [text] = argumentsList;
        const {
          id,
          styleId
        } = getIdAndStyleId(thisArg, mirror2, stylesheetManager.styleMirror);
        if (id && id !== -1 || styleId && styleId !== -1) {
          styleSheetRuleCb({
            id,
            styleId,
            replace: text
          });
        }
        return target.apply(thisArg, argumentsList);
      })
    });
  }
  let replaceSync;
  if (win.CSSStyleSheet.prototype.replaceSync) {
    replaceSync = win.CSSStyleSheet.prototype.replaceSync;
    win.CSSStyleSheet.prototype.replaceSync = new Proxy(replaceSync, {
      apply: callbackWrapper((target, thisArg, argumentsList) => {
        const [text] = argumentsList;
        const {
          id,
          styleId
        } = getIdAndStyleId(thisArg, mirror2, stylesheetManager.styleMirror);
        if (id && id !== -1 || styleId && styleId !== -1) {
          styleSheetRuleCb({
            id,
            styleId,
            replaceSync: text
          });
        }
        return target.apply(thisArg, argumentsList);
      })
    });
  }
  const supportedNestedCSSRuleTypes = {};
  if (canMonkeyPatchNestedCSSRule("CSSGroupingRule")) {
    supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;
  } else {
    if (canMonkeyPatchNestedCSSRule("CSSMediaRule")) {
      supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;
    }
    if (canMonkeyPatchNestedCSSRule("CSSConditionRule")) {
      supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;
    }
    if (canMonkeyPatchNestedCSSRule("CSSSupportsRule")) {
      supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;
    }
  }
  const unmodifiedFunctions = {};
  Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {
    unmodifiedFunctions[typeKey] = {
      // eslint-disable-next-line @typescript-eslint/unbound-method
      insertRule: type.prototype.insertRule,
      // eslint-disable-next-line @typescript-eslint/unbound-method
      deleteRule: type.prototype.deleteRule
    };
    type.prototype.insertRule = new Proxy(unmodifiedFunctions[typeKey].insertRule, {
      apply: callbackWrapper((target, thisArg, argumentsList) => {
        const [rule, index] = argumentsList;
        const {
          id,
          styleId
        } = getIdAndStyleId(thisArg.parentStyleSheet, mirror2, stylesheetManager.styleMirror);
        if (id && id !== -1 || styleId && styleId !== -1) {
          styleSheetRuleCb({
            id,
            styleId,
            adds: [{
              rule,
              index: [
                ...getNestedCSSRulePositions(thisArg),
                index || 0
                // defaults to 0
              ]
            }]
          });
        }
        return target.apply(thisArg, argumentsList);
      })
    });
    type.prototype.deleteRule = new Proxy(unmodifiedFunctions[typeKey].deleteRule, {
      apply: callbackWrapper((target, thisArg, argumentsList) => {
        const [index] = argumentsList;
        const {
          id,
          styleId
        } = getIdAndStyleId(thisArg.parentStyleSheet, mirror2, stylesheetManager.styleMirror);
        if (id && id !== -1 || styleId && styleId !== -1) {
          styleSheetRuleCb({
            id,
            styleId,
            removes: [{
              index: [...getNestedCSSRulePositions(thisArg), index]
            }]
          });
        }
        return target.apply(thisArg, argumentsList);
      })
    });
  });
  return callbackWrapper(() => {
    win.CSSStyleSheet.prototype.insertRule = insertRule;
    win.CSSStyleSheet.prototype.deleteRule = deleteRule;
    replace && (win.CSSStyleSheet.prototype.replace = replace);
    replaceSync && (win.CSSStyleSheet.prototype.replaceSync = replaceSync);
    Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {
      type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;
      type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;
    });
  });
}
function initAdoptedStyleSheetObserver({
  mirror: mirror2,
  stylesheetManager
}, host) {
  var _a3, _b, _c;
  let hostId = null;
  if (host.nodeName === "#document") hostId = mirror2.getId(host);
  else hostId = mirror2.getId(host.host);
  const patchTarget = host.nodeName === "#document" ? (_a3 = host.defaultView) == null ? void 0 : _a3.Document : (_c = (_b = host.ownerDocument) == null ? void 0 : _b.defaultView) == null ? void 0 : _c.ShadowRoot;
  const originalPropertyDescriptor = (patchTarget == null ? void 0 : patchTarget.prototype) ? Object.getOwnPropertyDescriptor(patchTarget == null ? void 0 : patchTarget.prototype, "adoptedStyleSheets") : void 0;
  if (hostId === null || hostId === -1 || !patchTarget || !originalPropertyDescriptor) return () => {
  };
  Object.defineProperty(host, "adoptedStyleSheets", {
    configurable: originalPropertyDescriptor.configurable,
    enumerable: originalPropertyDescriptor.enumerable,
    get() {
      var _a4;
      return (_a4 = originalPropertyDescriptor.get) == null ? void 0 : _a4.call(this);
    },
    set(sheets) {
      var _a4;
      const result = (_a4 = originalPropertyDescriptor.set) == null ? void 0 : _a4.call(this, sheets);
      if (hostId !== null && hostId !== -1) {
        try {
          stylesheetManager.adoptStyleSheets(sheets, hostId);
        } catch (e22) {
        }
      }
      return result;
    }
  });
  return callbackWrapper(() => {
    Object.defineProperty(host, "adoptedStyleSheets", {
      configurable: originalPropertyDescriptor.configurable,
      enumerable: originalPropertyDescriptor.enumerable,
      // eslint-disable-next-line @typescript-eslint/unbound-method
      get: originalPropertyDescriptor.get,
      // eslint-disable-next-line @typescript-eslint/unbound-method
      set: originalPropertyDescriptor.set
    });
  });
}
function initStyleDeclarationObserver({
  styleDeclarationCb,
  mirror: mirror2,
  ignoreCSSAttributes,
  stylesheetManager
}, {
  win
}) {
  const setProperty = win.CSSStyleDeclaration.prototype.setProperty;
  win.CSSStyleDeclaration.prototype.setProperty = new Proxy(setProperty, {
    apply: callbackWrapper((target, thisArg, argumentsList) => {
      var _a3;
      const [property, value, priority] = argumentsList;
      if (ignoreCSSAttributes.has(property)) {
        return setProperty.apply(thisArg, [property, value, priority]);
      }
      const {
        id,
        styleId
      } = getIdAndStyleId((_a3 = thisArg.parentRule) == null ? void 0 : _a3.parentStyleSheet, mirror2, stylesheetManager.styleMirror);
      if (id && id !== -1 || styleId && styleId !== -1) {
        styleDeclarationCb({
          id,
          styleId,
          set: {
            property,
            value,
            priority
          },
          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
          index: getNestedCSSRulePositions(thisArg.parentRule)
        });
      }
      return target.apply(thisArg, argumentsList);
    })
  });
  const removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;
  win.CSSStyleDeclaration.prototype.removeProperty = new Proxy(removeProperty, {
    apply: callbackWrapper((target, thisArg, argumentsList) => {
      var _a3;
      const [property] = argumentsList;
      if (ignoreCSSAttributes.has(property)) {
        return removeProperty.apply(thisArg, [property]);
      }
      const {
        id,
        styleId
      } = getIdAndStyleId((_a3 = thisArg.parentRule) == null ? void 0 : _a3.parentStyleSheet, mirror2, stylesheetManager.styleMirror);
      if (id && id !== -1 || styleId && styleId !== -1) {
        styleDeclarationCb({
          id,
          styleId,
          remove: {
            property
          },
          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
          index: getNestedCSSRulePositions(thisArg.parentRule)
        });
      }
      return target.apply(thisArg, argumentsList);
    })
  });
  return callbackWrapper(() => {
    win.CSSStyleDeclaration.prototype.setProperty = setProperty;
    win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;
  });
}
function initMediaInteractionObserver({
  mediaInteractionCb,
  blockClass,
  blockSelector,
  unblockSelector,
  mirror: mirror2,
  sampling,
  doc
}) {
  const handler = callbackWrapper((type) => throttle$1(callbackWrapper((event) => {
    const target = getEventTarget2(event);
    if (!target || isBlocked(target, blockClass, blockSelector, unblockSelector, true)) {
      return;
    }
    const {
      currentTime,
      volume,
      muted,
      playbackRate
    } = target;
    mediaInteractionCb({
      type,
      id: mirror2.getId(target),
      currentTime,
      volume,
      muted,
      playbackRate
    });
  }), sampling.media || 500));
  const handlers4 = [on("play", handler(MediaInteractions.Play), doc), on("pause", handler(MediaInteractions.Pause), doc), on("seeked", handler(MediaInteractions.Seeked), doc), on("volumechange", handler(MediaInteractions.VolumeChange), doc), on("ratechange", handler(MediaInteractions.RateChange), doc)];
  return callbackWrapper(() => {
    handlers4.forEach((h2) => h2());
  });
}
function initFontObserver({
  fontCb,
  doc
}) {
  const win = doc.defaultView;
  if (!win) {
    return () => {
    };
  }
  const handlers4 = [];
  const fontMap = /* @__PURE__ */ new WeakMap();
  const originalFontFace = win.FontFace;
  win.FontFace = function FontFace2(family, source, descriptors) {
    const fontFace = new originalFontFace(family, source, descriptors);
    fontMap.set(fontFace, {
      family,
      buffer: typeof source !== "string",
      descriptors,
      fontSource: typeof source === "string" ? source : JSON.stringify(Array.from(new Uint8Array(source)))
    });
    return fontFace;
  };
  const restoreHandler = patch(doc.fonts, "add", function(original) {
    return function(fontFace) {
      setTimeout$1(callbackWrapper(() => {
        const p2 = fontMap.get(fontFace);
        if (p2) {
          fontCb(p2);
          fontMap.delete(fontFace);
        }
      }), 0);
      return original.apply(this, [fontFace]);
    };
  });
  handlers4.push(() => {
    win.FontFace = originalFontFace;
  });
  handlers4.push(restoreHandler);
  return callbackWrapper(() => {
    handlers4.forEach((h2) => h2());
  });
}
function initSelectionObserver(param) {
  const {
    doc,
    mirror: mirror2,
    blockClass,
    blockSelector,
    unblockSelector,
    selectionCb
  } = param;
  let collapsed = true;
  const updateSelection = callbackWrapper(() => {
    const selection = doc.getSelection();
    if (!selection || collapsed && (selection == null ? void 0 : selection.isCollapsed)) return;
    collapsed = selection.isCollapsed || false;
    const ranges = [];
    const count = selection.rangeCount || 0;
    for (let i2 = 0; i2 < count; i2++) {
      const range = selection.getRangeAt(i2);
      const {
        startContainer,
        startOffset,
        endContainer,
        endOffset
      } = range;
      const blocked = isBlocked(startContainer, blockClass, blockSelector, unblockSelector, true) || isBlocked(endContainer, blockClass, blockSelector, unblockSelector, true);
      if (blocked) continue;
      ranges.push({
        start: mirror2.getId(startContainer),
        startOffset,
        end: mirror2.getId(endContainer),
        endOffset
      });
    }
    selectionCb({
      ranges
    });
  });
  updateSelection();
  return on("selectionchange", updateSelection);
}
function initCustomElementObserver({
  doc,
  customElementCb
}) {
  const win = doc.defaultView;
  if (!win || !win.customElements) return () => {
  };
  const restoreHandler = patch(win.customElements, "define", function(original) {
    return function(name, constructor, options) {
      try {
        customElementCb({
          define: {
            name
          }
        });
      } catch (e22) {
      }
      return original.apply(this, [name, constructor, options]);
    };
  });
  return restoreHandler;
}
function initObservers(o2, _hooks = {}) {
  const currentWindow = o2.doc.defaultView;
  if (!currentWindow) {
    return () => {
    };
  }
  let mutationObserver;
  if (o2.recordDOM) {
    mutationObserver = initMutationObserver(o2, o2.doc);
  }
  const mousemoveHandler = initMoveObserver(o2);
  const mouseInteractionHandler = initMouseInteractionObserver(o2);
  const scrollHandler = initScrollObserver(o2);
  const viewportResizeHandler = initViewportResizeObserver(o2, {
    win: currentWindow
  });
  const inputHandler = initInputObserver(o2);
  const mediaInteractionHandler = initMediaInteractionObserver(o2);
  let styleSheetObserver = () => {
  };
  let adoptedStyleSheetObserver = () => {
  };
  let styleDeclarationObserver = () => {
  };
  let fontObserver = () => {
  };
  if (o2.recordDOM) {
    styleSheetObserver = initStyleSheetObserver(o2, {
      win: currentWindow
    });
    adoptedStyleSheetObserver = initAdoptedStyleSheetObserver(o2, o2.doc);
    styleDeclarationObserver = initStyleDeclarationObserver(o2, {
      win: currentWindow
    });
    if (o2.collectFonts) {
      fontObserver = initFontObserver(o2);
    }
  }
  const selectionObserver = initSelectionObserver(o2);
  const customElementObserver = initCustomElementObserver(o2);
  const pluginHandlers = [];
  for (const plugin of o2.plugins) {
    pluginHandlers.push(plugin.observer(plugin.callback, currentWindow, plugin.options));
  }
  return callbackWrapper(() => {
    mutationBuffers.forEach((b2) => b2.reset());
    mutationObserver == null ? void 0 : mutationObserver.disconnect();
    mousemoveHandler();
    mouseInteractionHandler();
    scrollHandler();
    viewportResizeHandler();
    inputHandler();
    mediaInteractionHandler();
    styleSheetObserver();
    adoptedStyleSheetObserver();
    styleDeclarationObserver();
    fontObserver();
    selectionObserver();
    customElementObserver();
    pluginHandlers.forEach((h2) => h2());
  });
}
function hasNestedCSSRule(prop) {
  return typeof window[prop] !== "undefined";
}
function canMonkeyPatchNestedCSSRule(prop) {
  return Boolean(typeof window[prop] !== "undefined" && // Note: Generally, this check _shouldn't_ be necessary
  // However, in some scenarios (e.g. jsdom) this can sometimes fail, so we check for it here
  window[prop].prototype && "insertRule" in window[prop].prototype && "deleteRule" in window[prop].prototype);
}
var CrossOriginIframeMirror = class {
  constructor(generateIdFn) {
    this.generateIdFn = generateIdFn;
    this.iframeIdToRemoteIdMap = /* @__PURE__ */ new WeakMap();
    this.iframeRemoteIdToIdMap = /* @__PURE__ */ new WeakMap();
  }
  getId(iframe, remoteId, idToRemoteMap, remoteToIdMap) {
    const idToRemoteIdMap = idToRemoteMap || this.getIdToRemoteIdMap(iframe);
    const remoteIdToIdMap = remoteToIdMap || this.getRemoteIdToIdMap(iframe);
    let id = idToRemoteIdMap.get(remoteId);
    if (!id) {
      id = this.generateIdFn();
      idToRemoteIdMap.set(remoteId, id);
      remoteIdToIdMap.set(id, remoteId);
    }
    return id;
  }
  getIds(iframe, remoteId) {
    const idToRemoteIdMap = this.getIdToRemoteIdMap(iframe);
    const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);
    return remoteId.map((id) => this.getId(iframe, id, idToRemoteIdMap, remoteIdToIdMap));
  }
  getRemoteId(iframe, id, map) {
    const remoteIdToIdMap = map || this.getRemoteIdToIdMap(iframe);
    if (typeof id !== "number") return id;
    const remoteId = remoteIdToIdMap.get(id);
    if (!remoteId) return -1;
    return remoteId;
  }
  getRemoteIds(iframe, ids) {
    const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);
    return ids.map((id) => this.getRemoteId(iframe, id, remoteIdToIdMap));
  }
  reset(iframe) {
    if (!iframe) {
      this.iframeIdToRemoteIdMap = /* @__PURE__ */ new WeakMap();
      this.iframeRemoteIdToIdMap = /* @__PURE__ */ new WeakMap();
      return;
    }
    this.iframeIdToRemoteIdMap.delete(iframe);
    this.iframeRemoteIdToIdMap.delete(iframe);
  }
  getIdToRemoteIdMap(iframe) {
    let idToRemoteIdMap = this.iframeIdToRemoteIdMap.get(iframe);
    if (!idToRemoteIdMap) {
      idToRemoteIdMap = /* @__PURE__ */ new Map();
      this.iframeIdToRemoteIdMap.set(iframe, idToRemoteIdMap);
    }
    return idToRemoteIdMap;
  }
  getRemoteIdToIdMap(iframe) {
    let remoteIdToIdMap = this.iframeRemoteIdToIdMap.get(iframe);
    if (!remoteIdToIdMap) {
      remoteIdToIdMap = /* @__PURE__ */ new Map();
      this.iframeRemoteIdToIdMap.set(iframe, remoteIdToIdMap);
    }
    return remoteIdToIdMap;
  }
};
var IframeManagerNoop = class {
  constructor() {
    this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);
    this.crossOriginIframeRootIdMap = /* @__PURE__ */ new WeakMap();
  }
  addIframe() {
  }
  addLoadListener() {
  }
  attachIframe() {
  }
};
var IframeManager = class {
  constructor(options) {
    this.iframes = /* @__PURE__ */ new WeakMap();
    this.crossOriginIframeMap = /* @__PURE__ */ new WeakMap();
    this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);
    this.crossOriginIframeRootIdMap = /* @__PURE__ */ new WeakMap();
    this.mutationCb = options.mutationCb;
    this.wrappedEmit = options.wrappedEmit;
    this.stylesheetManager = options.stylesheetManager;
    this.recordCrossOriginIframes = options.recordCrossOriginIframes;
    this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));
    this.mirror = options.mirror;
    if (this.recordCrossOriginIframes) {
      window.addEventListener("message", this.handleMessage.bind(this));
    }
  }
  addIframe(iframeEl) {
    this.iframes.set(iframeEl, true);
    if (iframeEl.contentWindow) this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);
  }
  addLoadListener(cb) {
    this.loadListener = cb;
  }
  attachIframe(iframeEl, childSn) {
    var _a3, _b;
    this.mutationCb({
      adds: [{
        parentId: this.mirror.getId(iframeEl),
        nextId: null,
        node: childSn
      }],
      removes: [],
      texts: [],
      attributes: [],
      isAttachIframe: true
    });
    if (this.recordCrossOriginIframes) (_a3 = iframeEl.contentWindow) == null ? void 0 : _a3.addEventListener("message", this.handleMessage.bind(this));
    (_b = this.loadListener) == null ? void 0 : _b.call(this, iframeEl);
    const iframeDoc = getIFrameContentDocument(iframeEl);
    if (iframeDoc && iframeDoc.adoptedStyleSheets && iframeDoc.adoptedStyleSheets.length > 0) this.stylesheetManager.adoptStyleSheets(iframeDoc.adoptedStyleSheets, this.mirror.getId(iframeDoc));
  }
  handleMessage(message) {
    const crossOriginMessageEvent = message;
    if (crossOriginMessageEvent.data.type !== "rrweb" || // To filter out the rrweb messages which are forwarded by some sites.
    crossOriginMessageEvent.origin !== crossOriginMessageEvent.data.origin) return;
    const iframeSourceWindow = message.source;
    if (!iframeSourceWindow) return;
    const iframeEl = this.crossOriginIframeMap.get(message.source);
    if (!iframeEl) return;
    const transformedEvent = this.transformCrossOriginEvent(iframeEl, crossOriginMessageEvent.data.event);
    if (transformedEvent) this.wrappedEmit(transformedEvent, crossOriginMessageEvent.data.isCheckout);
  }
  transformCrossOriginEvent(iframeEl, e22) {
    var _a3;
    switch (e22.type) {
      case EventType.FullSnapshot: {
        this.crossOriginIframeMirror.reset(iframeEl);
        this.crossOriginIframeStyleMirror.reset(iframeEl);
        this.replaceIdOnNode(e22.data.node, iframeEl);
        const rootId = e22.data.node.id;
        this.crossOriginIframeRootIdMap.set(iframeEl, rootId);
        this.patchRootIdOnNode(e22.data.node, rootId);
        return {
          timestamp: e22.timestamp,
          type: EventType.IncrementalSnapshot,
          data: {
            source: IncrementalSource.Mutation,
            adds: [{
              parentId: this.mirror.getId(iframeEl),
              nextId: null,
              node: e22.data.node
            }],
            removes: [],
            texts: [],
            attributes: [],
            isAttachIframe: true
          }
        };
      }
      case EventType.Meta:
      case EventType.Load:
      case EventType.DomContentLoaded: {
        return false;
      }
      case EventType.Plugin: {
        return e22;
      }
      case EventType.Custom: {
        this.replaceIds(e22.data.payload, iframeEl, ["id", "parentId", "previousId", "nextId"]);
        return e22;
      }
      case EventType.IncrementalSnapshot: {
        switch (e22.data.source) {
          case IncrementalSource.Mutation: {
            e22.data.adds.forEach((n22) => {
              this.replaceIds(n22, iframeEl, ["parentId", "nextId", "previousId"]);
              this.replaceIdOnNode(n22.node, iframeEl);
              const rootId = this.crossOriginIframeRootIdMap.get(iframeEl);
              rootId && this.patchRootIdOnNode(n22.node, rootId);
            });
            e22.data.removes.forEach((n22) => {
              this.replaceIds(n22, iframeEl, ["parentId", "id"]);
            });
            e22.data.attributes.forEach((n22) => {
              this.replaceIds(n22, iframeEl, ["id"]);
            });
            e22.data.texts.forEach((n22) => {
              this.replaceIds(n22, iframeEl, ["id"]);
            });
            return e22;
          }
          case IncrementalSource.Drag:
          case IncrementalSource.TouchMove:
          case IncrementalSource.MouseMove: {
            e22.data.positions.forEach((p2) => {
              this.replaceIds(p2, iframeEl, ["id"]);
            });
            return e22;
          }
          case IncrementalSource.ViewportResize: {
            return false;
          }
          case IncrementalSource.MediaInteraction:
          case IncrementalSource.MouseInteraction:
          case IncrementalSource.Scroll:
          case IncrementalSource.CanvasMutation:
          case IncrementalSource.Input: {
            this.replaceIds(e22.data, iframeEl, ["id"]);
            return e22;
          }
          case IncrementalSource.StyleSheetRule:
          case IncrementalSource.StyleDeclaration: {
            this.replaceIds(e22.data, iframeEl, ["id"]);
            this.replaceStyleIds(e22.data, iframeEl, ["styleId"]);
            return e22;
          }
          case IncrementalSource.Font: {
            return e22;
          }
          case IncrementalSource.Selection: {
            e22.data.ranges.forEach((range) => {
              this.replaceIds(range, iframeEl, ["start", "end"]);
            });
            return e22;
          }
          case IncrementalSource.AdoptedStyleSheet: {
            this.replaceIds(e22.data, iframeEl, ["id"]);
            this.replaceStyleIds(e22.data, iframeEl, ["styleIds"]);
            (_a3 = e22.data.styles) == null ? void 0 : _a3.forEach((style) => {
              this.replaceStyleIds(style, iframeEl, ["styleId"]);
            });
            return e22;
          }
        }
      }
    }
    return false;
  }
  replace(iframeMirror, obj, iframeEl, keys) {
    for (const key of keys) {
      if (!Array.isArray(obj[key]) && typeof obj[key] !== "number") continue;
      if (Array.isArray(obj[key])) {
        obj[key] = iframeMirror.getIds(iframeEl, obj[key]);
      } else {
        obj[key] = iframeMirror.getId(iframeEl, obj[key]);
      }
    }
    return obj;
  }
  replaceIds(obj, iframeEl, keys) {
    return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);
  }
  replaceStyleIds(obj, iframeEl, keys) {
    return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);
  }
  replaceIdOnNode(node, iframeEl) {
    this.replaceIds(node, iframeEl, ["id", "rootId"]);
    if ("childNodes" in node) {
      node.childNodes.forEach((child) => {
        this.replaceIdOnNode(child, iframeEl);
      });
    }
  }
  patchRootIdOnNode(node, rootId) {
    if (node.type !== NodeType$2.Document && !node.rootId) node.rootId = rootId;
    if ("childNodes" in node) {
      node.childNodes.forEach((child) => {
        this.patchRootIdOnNode(child, rootId);
      });
    }
  }
};
var ShadowDomManagerNoop = class {
  init() {
  }
  addShadowRoot() {
  }
  observeAttachShadow() {
  }
  reset() {
  }
};
var ShadowDomManager = class {
  constructor(options) {
    this.shadowDoms = /* @__PURE__ */ new WeakSet();
    this.restoreHandlers = [];
    this.mutationCb = options.mutationCb;
    this.scrollCb = options.scrollCb;
    this.bypassOptions = options.bypassOptions;
    this.mirror = options.mirror;
    this.init();
  }
  init() {
    this.reset();
    this.patchAttachShadow(Element, document);
  }
  addShadowRoot(shadowRoot, doc) {
    if (!isNativeShadowDom(shadowRoot)) return;
    if (this.shadowDoms.has(shadowRoot)) return;
    this.shadowDoms.add(shadowRoot);
    this.bypassOptions.canvasManager.addShadowRoot(shadowRoot);
    const observer = initMutationObserver(__spreadProps(__spreadValues({}, this.bypassOptions), {
      doc,
      mutationCb: this.mutationCb,
      mirror: this.mirror,
      shadowDomManager: this
    }), shadowRoot);
    this.restoreHandlers.push(() => observer.disconnect());
    this.restoreHandlers.push(initScrollObserver(__spreadProps(__spreadValues({}, this.bypassOptions), {
      scrollCb: this.scrollCb,
      // https://gist.github.com/praveenpuglia/0832da687ed5a5d7a0907046c9ef1813
      // scroll is not allowed to pass the boundary, so we need to listen the shadow document
      doc: shadowRoot,
      mirror: this.mirror
    })));
    setTimeout$1(() => {
      if (shadowRoot.adoptedStyleSheets && shadowRoot.adoptedStyleSheets.length > 0) this.bypassOptions.stylesheetManager.adoptStyleSheets(shadowRoot.adoptedStyleSheets, this.mirror.getId(shadowRoot.host));
      this.restoreHandlers.push(initAdoptedStyleSheetObserver({
        mirror: this.mirror,
        stylesheetManager: this.bypassOptions.stylesheetManager
      }, shadowRoot));
    }, 0);
  }
  /**
   * Monkey patch 'attachShadow' of an IFrameElement to observe newly added shadow doms.
   */
  observeAttachShadow(iframeElement) {
    const iframeDoc = getIFrameContentDocument(iframeElement);
    const iframeWindow = getIFrameContentWindow(iframeElement);
    if (!iframeDoc || !iframeWindow) return;
    this.patchAttachShadow(iframeWindow.Element, iframeDoc);
  }
  /**
   * Patch 'attachShadow' to observe newly added shadow doms.
   */
  patchAttachShadow(element, doc) {
    const manager = this;
    this.restoreHandlers.push(patch(element.prototype, "attachShadow", function(original) {
      return function(option) {
        const shadowRoot = original.call(this, option);
        if (this.shadowRoot && inDom(this)) manager.addShadowRoot(this.shadowRoot, doc);
        return shadowRoot;
      };
    }));
  }
  reset() {
    this.restoreHandlers.forEach((handler) => {
      try {
        handler();
      } catch (e22) {
      }
    });
    this.restoreHandlers = [];
    this.shadowDoms = /* @__PURE__ */ new WeakSet();
    this.bypassOptions.canvasManager.resetShadowRoots();
  }
};
var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
var lookup = typeof Uint8Array === "undefined" ? [] : new Uint8Array(256);
for (i$12 = 0; i$12 < chars.length; i$12++) {
  lookup[chars.charCodeAt(i$12)] = i$12;
}
var i$12;
var CanvasManagerNoop = class {
  reset() {
  }
  freeze() {
  }
  unfreeze() {
  }
  lock() {
  }
  unlock() {
  }
  snapshot() {
  }
  addWindow() {
  }
  addShadowRoot() {
  }
  resetShadowRoots() {
  }
};
var StylesheetManager = class {
  constructor(options) {
    this.trackedLinkElements = /* @__PURE__ */ new WeakSet();
    this.styleMirror = new StyleSheetMirror();
    this.mutationCb = options.mutationCb;
    this.adoptedStyleSheetCb = options.adoptedStyleSheetCb;
  }
  attachLinkElement(linkEl, childSn) {
    if ("_cssText" in childSn.attributes) this.mutationCb({
      adds: [],
      removes: [],
      texts: [],
      attributes: [{
        id: childSn.id,
        attributes: childSn.attributes
      }]
    });
    this.trackLinkElement(linkEl);
  }
  trackLinkElement(linkEl) {
    if (this.trackedLinkElements.has(linkEl)) return;
    this.trackedLinkElements.add(linkEl);
    this.trackStylesheetInLinkElement(linkEl);
  }
  adoptStyleSheets(sheets, hostId) {
    if (sheets.length === 0) return;
    const adoptedStyleSheetData = {
      id: hostId,
      styleIds: []
    };
    const styles = [];
    for (const sheet of sheets) {
      let styleId;
      if (!this.styleMirror.has(sheet)) {
        styleId = this.styleMirror.add(sheet);
        styles.push({
          styleId,
          rules: Array.from(sheet.rules || CSSRule, (r22, index) => ({
            rule: stringifyRule(r22),
            index
          }))
        });
      } else styleId = this.styleMirror.getId(sheet);
      adoptedStyleSheetData.styleIds.push(styleId);
    }
    if (styles.length > 0) adoptedStyleSheetData.styles = styles;
    this.adoptedStyleSheetCb(adoptedStyleSheetData);
  }
  reset() {
    this.styleMirror.reset();
    this.trackedLinkElements = /* @__PURE__ */ new WeakSet();
  }
  // TODO: take snapshot on stylesheet reload by applying event listener
  trackStylesheetInLinkElement(_linkEl) {
  }
};
var ProcessedNodeManager = class {
  constructor() {
    this.nodeMap = /* @__PURE__ */ new WeakMap();
    this.active = false;
  }
  inOtherBuffer(node, thisBuffer) {
    const buffers = this.nodeMap.get(node);
    return buffers && Array.from(buffers).some((buffer) => buffer !== thisBuffer);
  }
  add(node, buffer) {
    if (!this.active) {
      this.active = true;
      onRequestAnimationFrame(() => {
        this.nodeMap = /* @__PURE__ */ new WeakMap();
        this.active = false;
      });
    }
    this.nodeMap.set(node, (this.nodeMap.get(node) || /* @__PURE__ */ new Set()).add(buffer));
  }
  destroy() {
  }
};
var wrappedEmit;
var _takeFullSnapshot;
var _a;
try {
  if (Array.from([1], (x2) => x2 * 2)[0] !== 2) {
    const cleanFrame = document.createElement("iframe");
    document.body.appendChild(cleanFrame);
    Array.from = ((_a = cleanFrame.contentWindow) == null ? void 0 : _a.Array.from) || Array.from;
    document.body.removeChild(cleanFrame);
  }
} catch (err) {
  console.debug("Unable to override Array.from", err);
}
var mirror = createMirror$2();
function record(options = {}) {
  const {
    emit,
    checkoutEveryNms,
    checkoutEveryNth,
    blockClass = "rr-block",
    blockSelector = null,
    unblockSelector = null,
    ignoreClass = "rr-ignore",
    ignoreSelector = null,
    maskAllText = false,
    maskTextClass = "rr-mask",
    unmaskTextClass = null,
    maskTextSelector = null,
    unmaskTextSelector = null,
    inlineStylesheet = true,
    maskAllInputs,
    maskInputOptions: _maskInputOptions,
    slimDOMOptions: _slimDOMOptions,
    maskAttributeFn,
    maskInputFn,
    maskTextFn,
    maxCanvasSize = null,
    packFn,
    sampling = {},
    dataURLOptions = {},
    mousemoveWait,
    recordDOM = true,
    recordCanvas = false,
    recordCrossOriginIframes = false,
    recordAfter = options.recordAfter === "DOMContentLoaded" ? options.recordAfter : "load",
    userTriggeredOnInput = false,
    collectFonts = false,
    inlineImages = false,
    plugins,
    keepIframeSrcFn = () => false,
    ignoreCSSAttributes = /* @__PURE__ */ new Set([]),
    errorHandler: errorHandler2,
    onMutation,
    getCanvasManager
  } = options;
  registerErrorHandler(errorHandler2);
  const inEmittingFrame = recordCrossOriginIframes ? window.parent === window : true;
  let passEmitsToParent = false;
  if (!inEmittingFrame) {
    try {
      if (window.parent.document) {
        passEmitsToParent = false;
      }
    } catch (e22) {
      passEmitsToParent = true;
    }
  }
  if (inEmittingFrame && !emit) {
    throw new Error("emit function is required");
  }
  if (!inEmittingFrame && !passEmitsToParent) {
    return () => {
    };
  }
  if (mousemoveWait !== void 0 && sampling.mousemove === void 0) {
    sampling.mousemove = mousemoveWait;
  }
  mirror.reset();
  const maskInputOptions = maskAllInputs === true ? {
    color: true,
    date: true,
    "datetime-local": true,
    email: true,
    month: true,
    number: true,
    range: true,
    search: true,
    tel: true,
    text: true,
    time: true,
    url: true,
    week: true,
    textarea: true,
    select: true,
    radio: true,
    checkbox: true
  } : _maskInputOptions !== void 0 ? _maskInputOptions : {};
  const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === "all" ? {
    script: true,
    comment: true,
    headFavicon: true,
    headWhitespace: true,
    headMetaSocial: true,
    headMetaRobots: true,
    headMetaHttpEquiv: true,
    headMetaVerification: true,
    // the following are off for slimDOMOptions === true,
    // as they destroy some (hidden) info:
    headMetaAuthorship: _slimDOMOptions === "all",
    headMetaDescKeywords: _slimDOMOptions === "all"
  } : _slimDOMOptions ? _slimDOMOptions : {};
  polyfill$1();
  let lastFullSnapshotEvent;
  let incrementalSnapshotCount = 0;
  const eventProcessor = (e22) => {
    for (const plugin of plugins || []) {
      if (plugin.eventProcessor) {
        e22 = plugin.eventProcessor(e22);
      }
    }
    if (packFn && // Disable packing events which will be emitted to parent frames.
    !passEmitsToParent) {
      e22 = packFn(e22);
    }
    return e22;
  };
  wrappedEmit = (r22, isCheckout) => {
    var _a3;
    const e22 = r22;
    e22.timestamp = nowTimestamp();
    if (((_a3 = mutationBuffers[0]) == null ? void 0 : _a3.isFrozen()) && e22.type !== EventType.FullSnapshot && !(e22.type === EventType.IncrementalSnapshot && e22.data.source === IncrementalSource.Mutation)) {
      mutationBuffers.forEach((buf) => buf.unfreeze());
    }
    if (inEmittingFrame) {
      emit == null ? void 0 : emit(eventProcessor(e22), isCheckout);
    } else if (passEmitsToParent) {
      const message = {
        type: "rrweb",
        event: eventProcessor(e22),
        origin: window.location.origin,
        isCheckout
      };
      window.parent.postMessage(message, "*");
    }
    if (e22.type === EventType.FullSnapshot) {
      lastFullSnapshotEvent = e22;
      incrementalSnapshotCount = 0;
    } else if (e22.type === EventType.IncrementalSnapshot) {
      if (e22.data.source === IncrementalSource.Mutation && e22.data.isAttachIframe) {
        return;
      }
      incrementalSnapshotCount++;
      const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;
      const exceedTime = checkoutEveryNms && lastFullSnapshotEvent && e22.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;
      if (exceedCount || exceedTime) {
        takeFullSnapshot2(true);
      }
    }
  };
  const wrappedMutationEmit = (m2) => {
    wrappedEmit({
      type: EventType.IncrementalSnapshot,
      data: __spreadValues({
        source: IncrementalSource.Mutation
      }, m2)
    });
  };
  const wrappedScrollEmit = (p2) => wrappedEmit({
    type: EventType.IncrementalSnapshot,
    data: __spreadValues({
      source: IncrementalSource.Scroll
    }, p2)
  });
  const wrappedCanvasMutationEmit = (p2) => wrappedEmit({
    type: EventType.IncrementalSnapshot,
    data: __spreadValues({
      source: IncrementalSource.CanvasMutation
    }, p2)
  });
  const wrappedAdoptedStyleSheetEmit = (a2) => wrappedEmit({
    type: EventType.IncrementalSnapshot,
    data: __spreadValues({
      source: IncrementalSource.AdoptedStyleSheet
    }, a2)
  });
  const stylesheetManager = new StylesheetManager({
    mutationCb: wrappedMutationEmit,
    adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit
  });
  const iframeManager = typeof __RRWEB_EXCLUDE_IFRAME__ === "boolean" && __RRWEB_EXCLUDE_IFRAME__ ? new IframeManagerNoop() : new IframeManager({
    mirror,
    mutationCb: wrappedMutationEmit,
    stylesheetManager,
    recordCrossOriginIframes,
    wrappedEmit
  });
  for (const plugin of plugins || []) {
    if (plugin.getMirror) plugin.getMirror({
      nodeMirror: mirror,
      crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,
      crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror
    });
  }
  const processedNodeManager = new ProcessedNodeManager();
  const canvasManager = _getCanvasManager(getCanvasManager, {
    mirror,
    win: window,
    mutationCb: (p2) => wrappedEmit({
      type: EventType.IncrementalSnapshot,
      data: __spreadValues({
        source: IncrementalSource.CanvasMutation
      }, p2)
    }),
    recordCanvas,
    blockClass,
    blockSelector,
    unblockSelector,
    maxCanvasSize,
    sampling: sampling["canvas"],
    dataURLOptions,
    errorHandler: errorHandler2
  });
  const shadowDomManager = typeof __RRWEB_EXCLUDE_SHADOW_DOM__ === "boolean" && __RRWEB_EXCLUDE_SHADOW_DOM__ ? new ShadowDomManagerNoop() : new ShadowDomManager({
    mutationCb: wrappedMutationEmit,
    scrollCb: wrappedScrollEmit,
    bypassOptions: {
      onMutation,
      blockClass,
      blockSelector,
      unblockSelector,
      maskAllText,
      maskTextClass,
      unmaskTextClass,
      maskTextSelector,
      unmaskTextSelector,
      inlineStylesheet,
      maskInputOptions,
      dataURLOptions,
      maskAttributeFn,
      maskTextFn,
      maskInputFn,
      recordCanvas,
      inlineImages,
      sampling,
      slimDOMOptions,
      iframeManager,
      stylesheetManager,
      canvasManager,
      keepIframeSrcFn,
      processedNodeManager
    },
    mirror
  });
  const takeFullSnapshot2 = (isCheckout = false) => {
    if (!recordDOM) {
      return;
    }
    wrappedEmit({
      type: EventType.Meta,
      data: {
        href: window.location.href,
        width: getWindowWidth(),
        height: getWindowHeight()
      }
    }, isCheckout);
    stylesheetManager.reset();
    shadowDomManager.init();
    mutationBuffers.forEach((buf) => buf.lock());
    const node = snapshot(document, {
      mirror,
      blockClass,
      blockSelector,
      unblockSelector,
      maskAllText,
      maskTextClass,
      unmaskTextClass,
      maskTextSelector,
      unmaskTextSelector,
      inlineStylesheet,
      maskAllInputs: maskInputOptions,
      maskAttributeFn,
      maskInputFn,
      maskTextFn,
      slimDOM: slimDOMOptions,
      dataURLOptions,
      recordCanvas,
      inlineImages,
      onSerialize: (n22) => {
        if (isSerializedIframe(n22, mirror)) {
          iframeManager.addIframe(n22);
        }
        if (isSerializedStylesheet(n22, mirror)) {
          stylesheetManager.trackLinkElement(n22);
        }
        if (hasShadowRoot(n22)) {
          shadowDomManager.addShadowRoot(n22.shadowRoot, document);
        }
      },
      onIframeLoad: (iframe, childSn) => {
        iframeManager.attachIframe(iframe, childSn);
        if (iframe.contentWindow) {
          canvasManager.addWindow(iframe.contentWindow);
        }
        shadowDomManager.observeAttachShadow(iframe);
      },
      onStylesheetLoad: (linkEl, childSn) => {
        stylesheetManager.attachLinkElement(linkEl, childSn);
      },
      keepIframeSrcFn
    });
    if (!node) {
      return console.warn("Failed to snapshot the document");
    }
    wrappedEmit({
      type: EventType.FullSnapshot,
      data: {
        node,
        initialOffset: getWindowScroll(window)
      }
    });
    mutationBuffers.forEach((buf) => buf.unlock());
    if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0) stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets, mirror.getId(document));
  };
  _takeFullSnapshot = takeFullSnapshot2;
  try {
    const handlers4 = [];
    const observe2 = (doc) => {
      var _a3;
      return callbackWrapper(initObservers)({
        onMutation,
        mutationCb: wrappedMutationEmit,
        mousemoveCb: (positions, source) => wrappedEmit({
          type: EventType.IncrementalSnapshot,
          data: {
            source,
            positions
          }
        }),
        mouseInteractionCb: (d2) => wrappedEmit({
          type: EventType.IncrementalSnapshot,
          data: __spreadValues({
            source: IncrementalSource.MouseInteraction
          }, d2)
        }),
        scrollCb: wrappedScrollEmit,
        viewportResizeCb: (d2) => wrappedEmit({
          type: EventType.IncrementalSnapshot,
          data: __spreadValues({
            source: IncrementalSource.ViewportResize
          }, d2)
        }),
        inputCb: (v2) => wrappedEmit({
          type: EventType.IncrementalSnapshot,
          data: __spreadValues({
            source: IncrementalSource.Input
          }, v2)
        }),
        mediaInteractionCb: (p2) => wrappedEmit({
          type: EventType.IncrementalSnapshot,
          data: __spreadValues({
            source: IncrementalSource.MediaInteraction
          }, p2)
        }),
        styleSheetRuleCb: (r22) => wrappedEmit({
          type: EventType.IncrementalSnapshot,
          data: __spreadValues({
            source: IncrementalSource.StyleSheetRule
          }, r22)
        }),
        styleDeclarationCb: (r22) => wrappedEmit({
          type: EventType.IncrementalSnapshot,
          data: __spreadValues({
            source: IncrementalSource.StyleDeclaration
          }, r22)
        }),
        canvasMutationCb: wrappedCanvasMutationEmit,
        fontCb: (p2) => wrappedEmit({
          type: EventType.IncrementalSnapshot,
          data: __spreadValues({
            source: IncrementalSource.Font
          }, p2)
        }),
        selectionCb: (p2) => {
          wrappedEmit({
            type: EventType.IncrementalSnapshot,
            data: __spreadValues({
              source: IncrementalSource.Selection
            }, p2)
          });
        },
        customElementCb: (c2) => {
          wrappedEmit({
            type: EventType.IncrementalSnapshot,
            data: __spreadValues({
              source: IncrementalSource.CustomElement
            }, c2)
          });
        },
        blockClass,
        ignoreClass,
        ignoreSelector,
        maskAllText,
        maskTextClass,
        unmaskTextClass,
        maskTextSelector,
        unmaskTextSelector,
        maskInputOptions,
        inlineStylesheet,
        sampling,
        recordDOM,
        recordCanvas,
        inlineImages,
        userTriggeredOnInput,
        collectFonts,
        doc,
        maskAttributeFn,
        maskInputFn,
        maskTextFn,
        keepIframeSrcFn,
        blockSelector,
        unblockSelector,
        slimDOMOptions,
        dataURLOptions,
        mirror,
        iframeManager,
        stylesheetManager,
        shadowDomManager,
        processedNodeManager,
        canvasManager,
        ignoreCSSAttributes,
        plugins: ((_a3 = plugins == null ? void 0 : plugins.filter((p2) => p2.observer)) == null ? void 0 : _a3.map((p2) => ({
          observer: p2.observer,
          options: p2.options,
          callback: (payload) => wrappedEmit({
            type: EventType.Plugin,
            data: {
              plugin: p2.name,
              payload
            }
          })
        }))) || []
      }, {});
    };
    iframeManager.addLoadListener((iframeEl) => {
      try {
        handlers4.push(observe2(iframeEl.contentDocument));
      } catch (error2) {
        console.warn(error2);
      }
    });
    const init3 = () => {
      takeFullSnapshot2();
      handlers4.push(observe2(document));
    };
    if (document.readyState === "interactive" || document.readyState === "complete") {
      init3();
    } else {
      handlers4.push(on("DOMContentLoaded", () => {
        wrappedEmit({
          type: EventType.DomContentLoaded,
          data: {}
        });
        if (recordAfter === "DOMContentLoaded") init3();
      }));
      handlers4.push(on("load", () => {
        wrappedEmit({
          type: EventType.Load,
          data: {}
        });
        if (recordAfter === "load") init3();
      }, window));
    }
    return () => {
      handlers4.forEach((h2) => h2());
      processedNodeManager.destroy();
      _takeFullSnapshot = void 0;
      unregisterErrorHandler();
    };
  } catch (error2) {
    console.warn(error2);
  }
}
function takeFullSnapshot(isCheckout) {
  if (!_takeFullSnapshot) {
    throw new Error("please take full snapshot after start recording");
  }
  _takeFullSnapshot(isCheckout);
}
record.mirror = mirror;
record.takeFullSnapshot = takeFullSnapshot;
function _getCanvasManager(getCanvasManagerFn, options) {
  try {
    return getCanvasManagerFn ? getCanvasManagerFn(options) : new CanvasManagerNoop();
  } catch {
    console.warn("Unable to initialize CanvasManager");
    return new CanvasManagerNoop();
  }
}
var n2;
!function(t2) {
  t2[t2.NotStarted = 0] = "NotStarted", t2[t2.Running = 1] = "Running", t2[t2.Stopped = 2] = "Stopped";
}(n2 || (n2 = {}));
var ReplayEventTypeIncrementalSnapshot = 3;
var ReplayEventTypeCustom = 5;
function timestampToMs(timestamp) {
  const isMs = timestamp > 9999999999;
  return isMs ? timestamp : timestamp * 1e3;
}
function timestampToS(timestamp) {
  const isMs = timestamp > 9999999999;
  return isMs ? timestamp / 1e3 : timestamp;
}
function addBreadcrumbEvent(replay, breadcrumb) {
  if (breadcrumb.category === "sentry.transaction") {
    return;
  }
  if (["ui.click", "ui.input"].includes(breadcrumb.category)) {
    replay.triggerUserActivity();
  } else {
    replay.checkAndHandleExpiredSession();
  }
  replay.addUpdate(() => {
    replay.throttledAddEvent({
      type: EventType.Custom,
      // TODO: We were converting from ms to seconds for breadcrumbs, spans,
      // but maybe we should just keep them as milliseconds
      timestamp: (breadcrumb.timestamp || 0) * 1e3,
      data: {
        tag: "breadcrumb",
        // normalize to max. 10 depth and 1_000 properties per object
        payload: normalize(breadcrumb, 10, 1e3)
      }
    });
    return breadcrumb.category === "console";
  });
}
var INTERACTIVE_SELECTOR = "button,a";
function getClosestInteractive(element) {
  const closestInteractive = element.closest(INTERACTIVE_SELECTOR);
  return closestInteractive || element;
}
function getClickTargetNode(event) {
  const target = getTargetNode(event);
  if (!target || !(target instanceof Element)) {
    return target;
  }
  return getClosestInteractive(target);
}
function getTargetNode(event) {
  if (isEventWithTarget(event)) {
    return event.target;
  }
  return event;
}
function isEventWithTarget(event) {
  return typeof event === "object" && !!event && "target" in event;
}
var handlers3;
function onWindowOpen(cb) {
  if (!handlers3) {
    handlers3 = [];
    monkeyPatchWindowOpen();
  }
  handlers3.push(cb);
  return () => {
    const pos = handlers3 ? handlers3.indexOf(cb) : -1;
    if (pos > -1) {
      handlers3.splice(pos, 1);
    }
  };
}
function monkeyPatchWindowOpen() {
  fill(WINDOW6, "open", function(originalWindowOpen) {
    return function(...args) {
      if (handlers3) {
        try {
          handlers3.forEach((handler) => handler());
        } catch (e3) {
        }
      }
      return originalWindowOpen.apply(WINDOW6, args);
    };
  });
}
var IncrementalMutationSources = /* @__PURE__ */ new Set([IncrementalSource.Mutation, IncrementalSource.StyleSheetRule, IncrementalSource.StyleDeclaration, IncrementalSource.AdoptedStyleSheet, IncrementalSource.CanvasMutation, IncrementalSource.Selection, IncrementalSource.MediaInteraction]);
function handleClick(clickDetector, clickBreadcrumb, node) {
  clickDetector.handleClick(clickBreadcrumb, node);
}
var ClickDetector = class {
  // protected for testing
  constructor(replay, slowClickConfig, _addBreadcrumbEvent = addBreadcrumbEvent) {
    this._lastMutation = 0;
    this._lastScroll = 0;
    this._clicks = [];
    this._timeout = slowClickConfig.timeout / 1e3;
    this._threshold = slowClickConfig.threshold / 1e3;
    this._scrollTimeout = slowClickConfig.scrollTimeout / 1e3;
    this._replay = replay;
    this._ignoreSelector = slowClickConfig.ignoreSelector;
    this._addBreadcrumbEvent = _addBreadcrumbEvent;
  }
  /** Register click detection handlers on mutation or scroll. */
  addListeners() {
    const cleanupWindowOpen = onWindowOpen(() => {
      this._lastMutation = nowInSeconds();
    });
    this._teardown = () => {
      cleanupWindowOpen();
      this._clicks = [];
      this._lastMutation = 0;
      this._lastScroll = 0;
    };
  }
  /** Clean up listeners. */
  removeListeners() {
    if (this._teardown) {
      this._teardown();
    }
    if (this._checkClickTimeout) {
      clearTimeout(this._checkClickTimeout);
    }
  }
  /** @inheritDoc */
  handleClick(breadcrumb, node) {
    if (ignoreElement(node, this._ignoreSelector) || !isClickBreadcrumb(breadcrumb)) {
      return;
    }
    const newClick = {
      timestamp: timestampToS(breadcrumb.timestamp),
      clickBreadcrumb: breadcrumb,
      // Set this to 0 so we know it originates from the click breadcrumb
      clickCount: 0,
      node
    };
    if (this._clicks.some((click) => click.node === newClick.node && Math.abs(click.timestamp - newClick.timestamp) < 1)) {
      return;
    }
    this._clicks.push(newClick);
    if (this._clicks.length === 1) {
      this._scheduleCheckClicks();
    }
  }
  /** @inheritDoc */
  registerMutation(timestamp = Date.now()) {
    this._lastMutation = timestampToS(timestamp);
  }
  /** @inheritDoc */
  registerScroll(timestamp = Date.now()) {
    this._lastScroll = timestampToS(timestamp);
  }
  /** @inheritDoc */
  registerClick(element) {
    const node = getClosestInteractive(element);
    this._handleMultiClick(node);
  }
  /** Count multiple clicks on elements. */
  _handleMultiClick(node) {
    this._getClicks(node).forEach((click) => {
      click.clickCount++;
    });
  }
  /** Get all pending clicks for a given node. */
  _getClicks(node) {
    return this._clicks.filter((click) => click.node === node);
  }
  /** Check the clicks that happened. */
  _checkClicks() {
    const timedOutClicks = [];
    const now = nowInSeconds();
    this._clicks.forEach((click) => {
      if (!click.mutationAfter && this._lastMutation) {
        click.mutationAfter = click.timestamp <= this._lastMutation ? this._lastMutation - click.timestamp : void 0;
      }
      if (!click.scrollAfter && this._lastScroll) {
        click.scrollAfter = click.timestamp <= this._lastScroll ? this._lastScroll - click.timestamp : void 0;
      }
      if (click.timestamp + this._timeout <= now) {
        timedOutClicks.push(click);
      }
    });
    for (const click of timedOutClicks) {
      const pos = this._clicks.indexOf(click);
      if (pos > -1) {
        this._generateBreadcrumbs(click);
        this._clicks.splice(pos, 1);
      }
    }
    if (this._clicks.length) {
      this._scheduleCheckClicks();
    }
  }
  /** Generate matching breadcrumb(s) for the click. */
  _generateBreadcrumbs(click) {
    const replay = this._replay;
    const hadScroll = click.scrollAfter && click.scrollAfter <= this._scrollTimeout;
    const hadMutation = click.mutationAfter && click.mutationAfter <= this._threshold;
    const isSlowClick = !hadScroll && !hadMutation;
    const {
      clickCount,
      clickBreadcrumb
    } = click;
    if (isSlowClick) {
      const timeAfterClickMs = Math.min(click.mutationAfter || this._timeout, this._timeout) * 1e3;
      const endReason = timeAfterClickMs < this._timeout * 1e3 ? "mutation" : "timeout";
      const breadcrumb = {
        type: "default",
        message: clickBreadcrumb.message,
        timestamp: clickBreadcrumb.timestamp,
        category: "ui.slowClickDetected",
        data: __spreadProps(__spreadValues({}, clickBreadcrumb.data), {
          url: WINDOW6.location.href,
          route: replay.getCurrentRoute(),
          timeAfterClickMs,
          endReason,
          // If clickCount === 0, it means multiClick was not correctly captured here
          // - we still want to send 1 in this case
          clickCount: clickCount || 1
        })
      };
      this._addBreadcrumbEvent(replay, breadcrumb);
      return;
    }
    if (clickCount > 1) {
      const breadcrumb = {
        type: "default",
        message: clickBreadcrumb.message,
        timestamp: clickBreadcrumb.timestamp,
        category: "ui.multiClick",
        data: __spreadProps(__spreadValues({}, clickBreadcrumb.data), {
          url: WINDOW6.location.href,
          route: replay.getCurrentRoute(),
          clickCount,
          metric: true
        })
      };
      this._addBreadcrumbEvent(replay, breadcrumb);
    }
  }
  /** Schedule to check current clicks. */
  _scheduleCheckClicks() {
    if (this._checkClickTimeout) {
      clearTimeout(this._checkClickTimeout);
    }
    this._checkClickTimeout = setTimeout2(() => this._checkClicks(), 1e3);
  }
};
var SLOW_CLICK_TAGS = ["A", "BUTTON", "INPUT"];
function ignoreElement(node, ignoreSelector) {
  if (!SLOW_CLICK_TAGS.includes(node.tagName)) {
    return true;
  }
  if (node.tagName === "INPUT" && !["submit", "button"].includes(node.getAttribute("type") || "")) {
    return true;
  }
  if (node.tagName === "A" && (node.hasAttribute("download") || node.hasAttribute("target") && node.getAttribute("target") !== "_self")) {
    return true;
  }
  if (ignoreSelector && node.matches(ignoreSelector)) {
    return true;
  }
  return false;
}
function isClickBreadcrumb(breadcrumb) {
  return !!(breadcrumb.data && typeof breadcrumb.data.nodeId === "number" && breadcrumb.timestamp);
}
function nowInSeconds() {
  return Date.now() / 1e3;
}
function updateClickDetectorForRecordingEvent(clickDetector, event) {
  try {
    if (!isIncrementalEvent(event)) {
      return;
    }
    const {
      source
    } = event.data;
    if (IncrementalMutationSources.has(source)) {
      clickDetector.registerMutation(event.timestamp);
    }
    if (source === IncrementalSource.Scroll) {
      clickDetector.registerScroll(event.timestamp);
    }
    if (isIncrementalMouseInteraction(event)) {
      const {
        type,
        id
      } = event.data;
      const node = record.mirror.getNode(id);
      if (node instanceof HTMLElement && type === MouseInteractions.Click) {
        clickDetector.registerClick(node);
      }
    }
  } catch {
  }
}
function isIncrementalEvent(event) {
  return event.type === ReplayEventTypeIncrementalSnapshot;
}
function isIncrementalMouseInteraction(event) {
  return event.data.source === IncrementalSource.MouseInteraction;
}
function createBreadcrumb(breadcrumb) {
  return __spreadValues({
    timestamp: Date.now() / 1e3,
    type: "default"
  }, breadcrumb);
}
var NodeType = /* @__PURE__ */ ((NodeType2) => {
  NodeType2[NodeType2["Document"] = 0] = "Document";
  NodeType2[NodeType2["DocumentType"] = 1] = "DocumentType";
  NodeType2[NodeType2["Element"] = 2] = "Element";
  NodeType2[NodeType2["Text"] = 3] = "Text";
  NodeType2[NodeType2["CDATA"] = 4] = "CDATA";
  NodeType2[NodeType2["Comment"] = 5] = "Comment";
  return NodeType2;
})(NodeType || {});
var ATTRIBUTES_TO_RECORD = /* @__PURE__ */ new Set(["id", "class", "aria-label", "role", "name", "alt", "title", "data-test-id", "data-testid", "disabled", "aria-disabled", "data-sentry-component"]);
function getAttributesToRecord(attributes) {
  const obj = {};
  if (!attributes["data-sentry-component"] && attributes["data-sentry-element"]) {
    attributes["data-sentry-component"] = attributes["data-sentry-element"];
  }
  for (const key in attributes) {
    if (ATTRIBUTES_TO_RECORD.has(key)) {
      let normalizedKey = key;
      if (key === "data-testid" || key === "data-test-id") {
        normalizedKey = "testId";
      }
      obj[normalizedKey] = attributes[key];
    }
  }
  return obj;
}
var handleDomListener = (replay) => {
  return (handlerData) => {
    if (!replay.isEnabled()) {
      return;
    }
    const result = handleDom(handlerData);
    if (!result) {
      return;
    }
    const isClick = handlerData.name === "click";
    const event = isClick ? handlerData.event : void 0;
    if (isClick && replay.clickDetector && event && event.target && !event.altKey && !event.metaKey && !event.ctrlKey && !event.shiftKey) {
      handleClick(replay.clickDetector, result, getClickTargetNode(handlerData.event));
    }
    addBreadcrumbEvent(replay, result);
  };
};
function getBaseDomBreadcrumb(target, message) {
  const nodeId = record.mirror.getId(target);
  const node = nodeId && record.mirror.getNode(nodeId);
  const meta = node && record.mirror.getMeta(node);
  const element = meta && isElement2(meta) ? meta : null;
  return {
    message,
    data: element ? {
      nodeId,
      node: {
        id: nodeId,
        tagName: element.tagName,
        textContent: Array.from(element.childNodes).map((node2) => node2.type === NodeType.Text && node2.textContent).filter(Boolean).map((text) => text.trim()).join(""),
        attributes: getAttributesToRecord(element.attributes)
      }
    } : {}
  };
}
function handleDom(handlerData) {
  const {
    target,
    message
  } = getDomTarget(handlerData);
  return createBreadcrumb(__spreadValues({
    category: `ui.${handlerData.name}`
  }, getBaseDomBreadcrumb(target, message)));
}
function getDomTarget(handlerData) {
  const isClick = handlerData.name === "click";
  let message;
  let target = null;
  try {
    target = isClick ? getClickTargetNode(handlerData.event) : getTargetNode(handlerData.event);
    message = htmlTreeAsString(target, {
      maxStringLength: 200
    }) || "<unknown>";
  } catch (e3) {
    message = "<unknown>";
  }
  return {
    target,
    message
  };
}
function isElement2(node) {
  return node.type === NodeType.Element;
}
function handleKeyboardEvent(replay, event) {
  if (!replay.isEnabled()) {
    return;
  }
  replay.updateUserActivity();
  const breadcrumb = getKeyboardBreadcrumb(event);
  if (!breadcrumb) {
    return;
  }
  addBreadcrumbEvent(replay, breadcrumb);
}
function getKeyboardBreadcrumb(event) {
  const {
    metaKey,
    shiftKey,
    ctrlKey,
    altKey,
    key,
    target
  } = event;
  if (!target || isInputElement(target) || !key) {
    return null;
  }
  const hasModifierKey = metaKey || ctrlKey || altKey;
  const isCharacterKey = key.length === 1;
  if (!hasModifierKey && isCharacterKey) {
    return null;
  }
  const message = htmlTreeAsString(target, {
    maxStringLength: 200
  }) || "<unknown>";
  const baseBreadcrumb = getBaseDomBreadcrumb(target, message);
  return createBreadcrumb({
    category: "ui.keyDown",
    message,
    data: __spreadProps(__spreadValues({}, baseBreadcrumb.data), {
      metaKey,
      shiftKey,
      ctrlKey,
      altKey,
      key
    })
  });
}
function isInputElement(target) {
  return target.tagName === "INPUT" || target.tagName === "TEXTAREA" || target.isContentEditable;
}
var ENTRY_TYPES = {
  // @ts-expect-error TODO: entry type does not fit the create* functions entry type
  resource: createResourceEntry,
  paint: createPaintEntry,
  // @ts-expect-error TODO: entry type does not fit the create* functions entry type
  navigation: createNavigationEntry
};
function webVitalHandler(getter, replay) {
  return ({
    metric
  }) => void replay.replayPerformanceEntries.push(getter(metric));
}
function createPerformanceEntries(entries) {
  return entries.map(createPerformanceEntry).filter(Boolean);
}
function createPerformanceEntry(entry) {
  const entryType = ENTRY_TYPES[entry.entryType];
  if (!entryType) {
    return null;
  }
  return entryType(entry);
}
function getAbsoluteTime(time) {
  return ((browserPerformanceTimeOrigin() || WINDOW6.performance.timeOrigin) + time) / 1e3;
}
function createPaintEntry(entry) {
  const {
    duration,
    entryType,
    name,
    startTime
  } = entry;
  const start = getAbsoluteTime(startTime);
  return {
    type: entryType,
    name,
    start,
    end: start + duration,
    data: void 0
  };
}
function createNavigationEntry(entry) {
  const {
    entryType,
    name,
    decodedBodySize,
    duration,
    domComplete,
    encodedBodySize,
    domContentLoadedEventStart,
    domContentLoadedEventEnd,
    domInteractive,
    loadEventStart,
    loadEventEnd,
    redirectCount,
    startTime,
    transferSize,
    type
  } = entry;
  if (duration === 0) {
    return null;
  }
  return {
    type: `${entryType}.${type}`,
    start: getAbsoluteTime(startTime),
    end: getAbsoluteTime(domComplete),
    name,
    data: {
      size: transferSize,
      decodedBodySize,
      encodedBodySize,
      duration,
      domInteractive,
      domContentLoadedEventStart,
      domContentLoadedEventEnd,
      loadEventStart,
      loadEventEnd,
      domComplete,
      redirectCount
    }
  };
}
function createResourceEntry(entry) {
  const {
    entryType,
    initiatorType,
    name,
    responseEnd,
    startTime,
    decodedBodySize,
    encodedBodySize,
    responseStatus,
    transferSize
  } = entry;
  if (["fetch", "xmlhttprequest"].includes(initiatorType)) {
    return null;
  }
  return {
    type: `${entryType}.${initiatorType}`,
    start: getAbsoluteTime(startTime),
    end: getAbsoluteTime(responseEnd),
    name,
    data: {
      size: transferSize,
      statusCode: responseStatus,
      decodedBodySize,
      encodedBodySize
    }
  };
}
function getLargestContentfulPaint(metric) {
  const lastEntry = metric.entries[metric.entries.length - 1];
  const node = (lastEntry == null ? void 0 : lastEntry.element) ? [lastEntry.element] : void 0;
  return getWebVital(metric, "largest-contentful-paint", node);
}
function isLayoutShift(entry) {
  return entry.sources !== void 0;
}
function getCumulativeLayoutShift(metric) {
  const layoutShifts = [];
  const nodes = [];
  for (const entry of metric.entries) {
    if (isLayoutShift(entry)) {
      const nodeIds = [];
      for (const source of entry.sources) {
        if (source.node) {
          nodes.push(source.node);
          const nodeId = record.mirror.getId(source.node);
          if (nodeId) {
            nodeIds.push(nodeId);
          }
        }
      }
      layoutShifts.push({
        value: entry.value,
        nodeIds: nodeIds.length ? nodeIds : void 0
      });
    }
  }
  return getWebVital(metric, "cumulative-layout-shift", nodes, layoutShifts);
}
function getFirstInputDelay(metric) {
  const lastEntry = metric.entries[metric.entries.length - 1];
  const node = (lastEntry == null ? void 0 : lastEntry.target) ? [lastEntry.target] : void 0;
  return getWebVital(metric, "first-input-delay", node);
}
function getInteractionToNextPaint(metric) {
  const lastEntry = metric.entries[metric.entries.length - 1];
  const node = (lastEntry == null ? void 0 : lastEntry.target) ? [lastEntry.target] : void 0;
  return getWebVital(metric, "interaction-to-next-paint", node);
}
function getWebVital(metric, name, nodes, attributions) {
  const value = metric.value;
  const rating = metric.rating;
  const end = getAbsoluteTime(value);
  return {
    type: "web-vital",
    name,
    start: end,
    end,
    data: {
      value,
      size: value,
      rating,
      nodeIds: nodes ? nodes.map((node) => record.mirror.getId(node)) : void 0,
      attributions
    }
  };
}
function setupPerformanceObserver(replay) {
  function addPerformanceEntry(entry) {
    if (!replay.performanceEntries.includes(entry)) {
      replay.performanceEntries.push(entry);
    }
  }
  function onEntries({
    entries
  }) {
    entries.forEach(addPerformanceEntry);
  }
  const clearCallbacks = [];
  ["navigation", "paint", "resource"].forEach((type) => {
    clearCallbacks.push(addPerformanceInstrumentationHandler(type, onEntries));
  });
  clearCallbacks.push(addLcpInstrumentationHandler(webVitalHandler(getLargestContentfulPaint, replay)), addClsInstrumentationHandler(webVitalHandler(getCumulativeLayoutShift, replay)), addFidInstrumentationHandler(webVitalHandler(getFirstInputDelay, replay)), addInpInstrumentationHandler(webVitalHandler(getInteractionToNextPaint, replay)));
  return () => {
    clearCallbacks.forEach((clearCallback) => clearCallback());
  };
}
var DEBUG_BUILD5 = typeof __SENTRY_DEBUG__ === "undefined" || __SENTRY_DEBUG__;
var r2 = `var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});`;
function e2() {
  const e3 = new Blob([r2]);
  return URL.createObjectURL(e3);
}
var CONSOLE_LEVELS2 = ["info", "warn", "error", "log"];
var PREFIX2 = "[Replay] ";
function _addBreadcrumb(message, level = "info") {
  addBreadcrumb({
    category: "console",
    data: {
      logger: "replay"
    },
    level,
    message: `${PREFIX2}${message}`
  }, {
    level
  });
}
function makeReplayLogger() {
  let _capture = false;
  let _trace = false;
  const _logger = {
    exception: () => void 0,
    infoTick: () => void 0,
    setConfig: (opts) => {
      _capture = !!opts.captureExceptions;
      _trace = !!opts.traceInternals;
    }
  };
  if (DEBUG_BUILD5) {
    CONSOLE_LEVELS2.forEach((name) => {
      _logger[name] = (...args) => {
        logger2[name](PREFIX2, ...args);
        if (_trace) {
          _addBreadcrumb(args.join(""), severityLevelFromString(name));
        }
      };
    });
    _logger.exception = (error2, ...message) => {
      if (message.length && _logger.error) {
        _logger.error(...message);
      }
      logger2.error(PREFIX2, error2);
      if (_capture) {
        captureException(error2);
      } else if (_trace) {
        _addBreadcrumb(error2, "error");
      }
    };
    _logger.infoTick = (...args) => {
      logger2.info(PREFIX2, ...args);
      if (_trace) {
        setTimeout(() => _addBreadcrumb(args[0]), 0);
      }
    };
  } else {
    CONSOLE_LEVELS2.forEach((name) => {
      _logger[name] = () => void 0;
    });
  }
  return _logger;
}
var logger3 = makeReplayLogger();
var EventBufferSizeExceededError = class extends Error {
  constructor() {
    super(`Event buffer exceeded maximum size of ${REPLAY_MAX_EVENT_BUFFER_SIZE}.`);
  }
};
var EventBufferArray = class {
  /** All the events that are buffered to be sent. */
  /** @inheritdoc */
  /** @inheritdoc */
  constructor() {
    this.events = [];
    this._totalSize = 0;
    this.hasCheckout = false;
    this.waitForCheckout = false;
  }
  /** @inheritdoc */
  get hasEvents() {
    return this.events.length > 0;
  }
  /** @inheritdoc */
  get type() {
    return "sync";
  }
  /** @inheritdoc */
  destroy() {
    this.events = [];
  }
  /** @inheritdoc */
  addEvent(event) {
    return __async(this, null, function* () {
      const eventSize = JSON.stringify(event).length;
      this._totalSize += eventSize;
      if (this._totalSize > REPLAY_MAX_EVENT_BUFFER_SIZE) {
        throw new EventBufferSizeExceededError();
      }
      this.events.push(event);
    });
  }
  /** @inheritdoc */
  finish() {
    return new Promise((resolve) => {
      const eventsRet = this.events;
      this.clear();
      resolve(JSON.stringify(eventsRet));
    });
  }
  /** @inheritdoc */
  clear() {
    this.events = [];
    this._totalSize = 0;
    this.hasCheckout = false;
  }
  /** @inheritdoc */
  getEarliestTimestamp() {
    const timestamp = this.events.map((event) => event.timestamp).sort()[0];
    if (!timestamp) {
      return null;
    }
    return timestampToMs(timestamp);
  }
};
var WorkerHandler = class {
  constructor(worker) {
    this._worker = worker;
    this._id = 0;
  }
  /**
   * Ensure the worker is ready (or not).
   * This will either resolve when the worker is ready, or reject if an error occurred.
   */
  ensureReady() {
    if (this._ensureReadyPromise) {
      return this._ensureReadyPromise;
    }
    this._ensureReadyPromise = new Promise((resolve, reject) => {
      this._worker.addEventListener("message", ({
        data
      }) => {
        if (data.success) {
          resolve();
        } else {
          reject();
        }
      }, {
        once: true
      });
      this._worker.addEventListener("error", (error2) => {
        reject(error2);
      }, {
        once: true
      });
    });
    return this._ensureReadyPromise;
  }
  /**
   * Destroy the worker.
   */
  destroy() {
    DEBUG_BUILD5 && logger3.info("Destroying compression worker");
    this._worker.terminate();
  }
  /**
   * Post message to worker and wait for response before resolving promise.
   */
  postMessage(method, arg) {
    const id = this._getAndIncrementId();
    return new Promise((resolve, reject) => {
      const listener = ({
        data
      }) => {
        const response = data;
        if (response.method !== method) {
          return;
        }
        if (response.id !== id) {
          return;
        }
        this._worker.removeEventListener("message", listener);
        if (!response.success) {
          DEBUG_BUILD5 && logger3.error("Error in compression worker: ", response.response);
          reject(new Error("Error in compression worker"));
          return;
        }
        resolve(response.response);
      };
      this._worker.addEventListener("message", listener);
      this._worker.postMessage({
        id,
        method,
        arg
      });
    });
  }
  /** Get the current ID and increment it for the next call. */
  _getAndIncrementId() {
    return this._id++;
  }
};
var EventBufferCompressionWorker = class {
  /** @inheritdoc */
  /** @inheritdoc */
  constructor(worker) {
    this._worker = new WorkerHandler(worker);
    this._earliestTimestamp = null;
    this._totalSize = 0;
    this.hasCheckout = false;
    this.waitForCheckout = false;
  }
  /** @inheritdoc */
  get hasEvents() {
    return !!this._earliestTimestamp;
  }
  /** @inheritdoc */
  get type() {
    return "worker";
  }
  /**
   * Ensure the worker is ready (or not).
   * This will either resolve when the worker is ready, or reject if an error occurred.
   */
  ensureReady() {
    return this._worker.ensureReady();
  }
  /**
   * Destroy the event buffer.
   */
  destroy() {
    this._worker.destroy();
  }
  /**
   * Add an event to the event buffer.
   *
   * Returns true if event was successfully received and processed by worker.
   */
  addEvent(event) {
    const timestamp = timestampToMs(event.timestamp);
    if (!this._earliestTimestamp || timestamp < this._earliestTimestamp) {
      this._earliestTimestamp = timestamp;
    }
    const data = JSON.stringify(event);
    this._totalSize += data.length;
    if (this._totalSize > REPLAY_MAX_EVENT_BUFFER_SIZE) {
      return Promise.reject(new EventBufferSizeExceededError());
    }
    return this._sendEventToWorker(data);
  }
  /**
   * Finish the event buffer and return the compressed data.
   */
  finish() {
    return this._finishRequest();
  }
  /** @inheritdoc */
  clear() {
    this._earliestTimestamp = null;
    this._totalSize = 0;
    this.hasCheckout = false;
    this._worker.postMessage("clear").then(null, (e3) => {
      DEBUG_BUILD5 && logger3.exception(e3, 'Sending "clear" message to worker failed', e3);
    });
  }
  /** @inheritdoc */
  getEarliestTimestamp() {
    return this._earliestTimestamp;
  }
  /**
   * Send the event to the worker.
   */
  _sendEventToWorker(data) {
    return this._worker.postMessage("addEvent", data);
  }
  /**
   * Finish the request and return the compressed data from the worker.
   */
  _finishRequest() {
    return __async(this, null, function* () {
      const response = yield this._worker.postMessage("finish");
      this._earliestTimestamp = null;
      this._totalSize = 0;
      return response;
    });
  }
};
var EventBufferProxy = class {
  constructor(worker) {
    this._fallback = new EventBufferArray();
    this._compression = new EventBufferCompressionWorker(worker);
    this._used = this._fallback;
    this._ensureWorkerIsLoadedPromise = this._ensureWorkerIsLoaded();
  }
  /** @inheritdoc */
  get waitForCheckout() {
    return this._used.waitForCheckout;
  }
  /** @inheritdoc */
  get type() {
    return this._used.type;
  }
  /** @inheritDoc */
  get hasEvents() {
    return this._used.hasEvents;
  }
  /** @inheritdoc */
  get hasCheckout() {
    return this._used.hasCheckout;
  }
  /** @inheritdoc */
  set hasCheckout(value) {
    this._used.hasCheckout = value;
  }
  /** @inheritdoc */
  // eslint-disable-next-line @typescript-eslint/adjacent-overload-signatures
  set waitForCheckout(value) {
    this._used.waitForCheckout = value;
  }
  /** @inheritDoc */
  destroy() {
    this._fallback.destroy();
    this._compression.destroy();
  }
  /** @inheritdoc */
  clear() {
    return this._used.clear();
  }
  /** @inheritdoc */
  getEarliestTimestamp() {
    return this._used.getEarliestTimestamp();
  }
  /**
   * Add an event to the event buffer.
   *
   * Returns true if event was successfully added.
   */
  addEvent(event) {
    return this._used.addEvent(event);
  }
  /** @inheritDoc */
  finish() {
    return __async(this, null, function* () {
      yield this.ensureWorkerIsLoaded();
      return this._used.finish();
    });
  }
  /** Ensure the worker has loaded. */
  ensureWorkerIsLoaded() {
    return this._ensureWorkerIsLoadedPromise;
  }
  /** Actually check if the worker has been loaded. */
  _ensureWorkerIsLoaded() {
    return __async(this, null, function* () {
      try {
        yield this._compression.ensureReady();
      } catch (error2) {
        DEBUG_BUILD5 && logger3.exception(error2, "Failed to load the compression worker, falling back to simple buffer");
        return;
      }
      yield this._switchToCompressionWorker();
    });
  }
  /** Switch the used buffer to the compression worker. */
  _switchToCompressionWorker() {
    return __async(this, null, function* () {
      const {
        events,
        hasCheckout,
        waitForCheckout
      } = this._fallback;
      const addEventPromises = [];
      for (const event of events) {
        addEventPromises.push(this._compression.addEvent(event));
      }
      this._compression.hasCheckout = hasCheckout;
      this._compression.waitForCheckout = waitForCheckout;
      this._used = this._compression;
      try {
        yield Promise.all(addEventPromises);
        this._fallback.clear();
      } catch (error2) {
        DEBUG_BUILD5 && logger3.exception(error2, "Failed to add events when switching buffers.");
      }
    });
  }
};
function createEventBuffer({
  useCompression,
  workerUrl: customWorkerUrl
}) {
  if (useCompression && // eslint-disable-next-line no-restricted-globals
  window.Worker) {
    const worker = _loadWorker(customWorkerUrl);
    if (worker) {
      return worker;
    }
  }
  DEBUG_BUILD5 && logger3.info("Using simple buffer");
  return new EventBufferArray();
}
function _loadWorker(customWorkerUrl) {
  try {
    const workerUrl = customWorkerUrl || _getWorkerUrl();
    if (!workerUrl) {
      return;
    }
    DEBUG_BUILD5 && logger3.info(`Using compression worker${customWorkerUrl ? ` from ${customWorkerUrl}` : ""}`);
    const worker = new Worker(workerUrl);
    return new EventBufferProxy(worker);
  } catch (error2) {
    DEBUG_BUILD5 && logger3.exception(error2, "Failed to create compression worker");
  }
}
function _getWorkerUrl() {
  if (typeof __SENTRY_EXCLUDE_REPLAY_WORKER__ === "undefined" || !__SENTRY_EXCLUDE_REPLAY_WORKER__) {
    return e2();
  }
  return "";
}
function hasSessionStorage() {
  try {
    return "sessionStorage" in WINDOW6 && !!WINDOW6.sessionStorage;
  } catch {
    return false;
  }
}
function clearSession(replay) {
  deleteSession();
  replay.session = void 0;
}
function deleteSession() {
  if (!hasSessionStorage()) {
    return;
  }
  try {
    WINDOW6.sessionStorage.removeItem(REPLAY_SESSION_KEY);
  } catch {
  }
}
function isSampled(sampleRate) {
  if (sampleRate === void 0) {
    return false;
  }
  return Math.random() < sampleRate;
}
function saveSession(session) {
  if (!hasSessionStorage()) {
    return;
  }
  try {
    WINDOW6.sessionStorage.setItem(REPLAY_SESSION_KEY, JSON.stringify(session));
  } catch {
  }
}
function makeSession2(session) {
  const now = Date.now();
  const id = session.id || uuid4();
  const started = session.started || now;
  const lastActivity = session.lastActivity || now;
  const segmentId = session.segmentId || 0;
  const sampled = session.sampled;
  const previousSessionId = session.previousSessionId;
  return {
    id,
    started,
    lastActivity,
    segmentId,
    sampled,
    previousSessionId
  };
}
function getSessionSampleType(sessionSampleRate, allowBuffering) {
  return isSampled(sessionSampleRate) ? "session" : allowBuffering ? "buffer" : false;
}
function createSession({
  sessionSampleRate,
  allowBuffering,
  stickySession = false
}, {
  previousSessionId
} = {}) {
  const sampled = getSessionSampleType(sessionSampleRate, allowBuffering);
  const session = makeSession2({
    sampled,
    previousSessionId
  });
  if (stickySession) {
    saveSession(session);
  }
  return session;
}
function fetchSession() {
  if (!hasSessionStorage()) {
    return null;
  }
  try {
    const sessionStringFromStorage = WINDOW6.sessionStorage.getItem(REPLAY_SESSION_KEY);
    if (!sessionStringFromStorage) {
      return null;
    }
    const sessionObj = JSON.parse(sessionStringFromStorage);
    DEBUG_BUILD5 && logger3.infoTick("Loading existing session");
    return makeSession2(sessionObj);
  } catch {
    return null;
  }
}
function isExpired(initialTime, expiry, targetTime = +/* @__PURE__ */ new Date()) {
  if (initialTime === null || expiry === void 0 || expiry < 0) {
    return true;
  }
  if (expiry === 0) {
    return false;
  }
  return initialTime + expiry <= targetTime;
}
function isSessionExpired(session, {
  maxReplayDuration,
  sessionIdleExpire,
  targetTime = Date.now()
}) {
  return (
    // First, check that maximum session length has not been exceeded
    isExpired(session.started, maxReplayDuration, targetTime) || // check that the idle timeout has not been exceeded (i.e. user has
    // performed an action within the last `sessionIdleExpire` ms)
    isExpired(session.lastActivity, sessionIdleExpire, targetTime)
  );
}
function shouldRefreshSession(session, {
  sessionIdleExpire,
  maxReplayDuration
}) {
  if (!isSessionExpired(session, {
    sessionIdleExpire,
    maxReplayDuration
  })) {
    return false;
  }
  if (session.sampled === "buffer" && session.segmentId === 0) {
    return false;
  }
  return true;
}
function loadOrCreateSession({
  sessionIdleExpire,
  maxReplayDuration,
  previousSessionId
}, sessionOptions) {
  const existingSession = sessionOptions.stickySession && fetchSession();
  if (!existingSession) {
    DEBUG_BUILD5 && logger3.infoTick("Creating new session");
    return createSession(sessionOptions, {
      previousSessionId
    });
  }
  if (!shouldRefreshSession(existingSession, {
    sessionIdleExpire,
    maxReplayDuration
  })) {
    return existingSession;
  }
  DEBUG_BUILD5 && logger3.infoTick("Session in sessionStorage is expired, creating new one...");
  return createSession(sessionOptions, {
    previousSessionId: existingSession.id
  });
}
function isCustomEvent(event) {
  return event.type === EventType.Custom;
}
function addEventSync(replay, event, isCheckout) {
  if (!shouldAddEvent(replay, event)) {
    return false;
  }
  _addEvent(replay, event, isCheckout);
  return true;
}
function addEvent(replay, event, isCheckout) {
  if (!shouldAddEvent(replay, event)) {
    return Promise.resolve(null);
  }
  return _addEvent(replay, event, isCheckout);
}
function _addEvent(replay, event, isCheckout) {
  return __async(this, null, function* () {
    const {
      eventBuffer
    } = replay;
    if (!eventBuffer || eventBuffer.waitForCheckout && !isCheckout) {
      return null;
    }
    const isBufferMode = replay.recordingMode === "buffer";
    try {
      if (isCheckout && isBufferMode) {
        eventBuffer.clear();
      }
      if (isCheckout) {
        eventBuffer.hasCheckout = true;
        eventBuffer.waitForCheckout = false;
      }
      const replayOptions = replay.getOptions();
      const eventAfterPossibleCallback = maybeApplyCallback(event, replayOptions.beforeAddRecordingEvent);
      if (!eventAfterPossibleCallback) {
        return;
      }
      return yield eventBuffer.addEvent(eventAfterPossibleCallback);
    } catch (error2) {
      const isExceeded = error2 && error2 instanceof EventBufferSizeExceededError;
      const reason = isExceeded ? "addEventSizeExceeded" : "addEvent";
      if (isExceeded && isBufferMode) {
        eventBuffer.clear();
        eventBuffer.waitForCheckout = true;
        return null;
      }
      replay.handleException(error2);
      yield replay.stop({
        reason
      });
      const client = getClient();
      if (client) {
        client.recordDroppedEvent("internal_sdk_error", "replay");
      }
    }
  });
}
function shouldAddEvent(replay, event) {
  if (!replay.eventBuffer || replay.isPaused() || !replay.isEnabled()) {
    return false;
  }
  const timestampInMs = timestampToMs(event.timestamp);
  if (timestampInMs + replay.timeouts.sessionIdlePause < Date.now()) {
    return false;
  }
  if (timestampInMs > replay.getContext().initialTimestamp + replay.getOptions().maxReplayDuration) {
    DEBUG_BUILD5 && logger3.infoTick(`Skipping event with timestamp ${timestampInMs} because it is after maxReplayDuration`);
    return false;
  }
  return true;
}
function maybeApplyCallback(event, callback) {
  try {
    if (typeof callback === "function" && isCustomEvent(event)) {
      return callback(event);
    }
  } catch (error2) {
    DEBUG_BUILD5 && logger3.exception(error2, "An error occurred in the `beforeAddRecordingEvent` callback, skipping the event...");
    return null;
  }
  return event;
}
function isErrorEvent3(event) {
  return !event.type;
}
function isTransactionEvent2(event) {
  return event.type === "transaction";
}
function isReplayEvent(event) {
  return event.type === "replay_event";
}
function isFeedbackEvent(event) {
  return event.type === "feedback";
}
function handleAfterSendEvent(replay) {
  return (event, sendResponse) => {
    if (!replay.isEnabled() || !isErrorEvent3(event) && !isTransactionEvent2(event)) {
      return;
    }
    const statusCode = sendResponse == null ? void 0 : sendResponse.statusCode;
    if (!statusCode || statusCode < 200 || statusCode >= 300) {
      return;
    }
    if (isTransactionEvent2(event)) {
      handleTransactionEvent(replay, event);
      return;
    }
    handleErrorEvent(replay, event);
  };
}
function handleTransactionEvent(replay, event) {
  var _a3, _b;
  const replayContext = replay.getContext();
  if (((_b = (_a3 = event.contexts) == null ? void 0 : _a3.trace) == null ? void 0 : _b.trace_id) && replayContext.traceIds.size < 100) {
    replayContext.traceIds.add(event.contexts.trace.trace_id);
  }
}
function handleErrorEvent(replay, event) {
  const replayContext = replay.getContext();
  if (event.event_id && replayContext.errorIds.size < 100) {
    replayContext.errorIds.add(event.event_id);
  }
  if (replay.recordingMode !== "buffer" || !event.tags || !event.tags.replayId) {
    return;
  }
  const {
    beforeErrorSampling
  } = replay.getOptions();
  if (typeof beforeErrorSampling === "function" && !beforeErrorSampling(event)) {
    return;
  }
  setTimeout2(() => __async(null, null, function* () {
    try {
      yield replay.sendBufferedReplayOrFlush();
    } catch (err) {
      replay.handleException(err);
    }
  }));
}
function handleBeforeSendEvent(replay) {
  return (event) => {
    if (!replay.isEnabled() || !isErrorEvent3(event)) {
      return;
    }
    handleHydrationError(replay, event);
  };
}
function handleHydrationError(replay, event) {
  var _a3, _b, _c;
  const exceptionValue = (_c = (_b = (_a3 = event.exception) == null ? void 0 : _a3.values) == null ? void 0 : _b[0]) == null ? void 0 : _c.value;
  if (typeof exceptionValue !== "string") {
    return;
  }
  if (
    // Only matches errors in production builds of react-dom
    // Example https://reactjs.org/docs/error-decoder.html?invariant=423
    // With newer React versions, the messages changed to a different website https://react.dev/errors/418
    exceptionValue.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/) || // Development builds of react-dom
    // Error 1: Hydration failed because the initial UI does not match what was rendered on the server.
    // Error 2: Text content does not match server-rendered HTML. Warning: Text content did not match.
    exceptionValue.match(/(does not match server-rendered HTML|Hydration failed because)/i)
  ) {
    const breadcrumb = createBreadcrumb({
      category: "replay.hydrate-error",
      data: {
        url: getLocationHref()
      }
    });
    addBreadcrumbEvent(replay, breadcrumb);
  }
}
function handleBreadcrumbs(replay) {
  const client = getClient();
  if (!client) {
    return;
  }
  client.on("beforeAddBreadcrumb", (breadcrumb) => beforeAddBreadcrumb(replay, breadcrumb));
}
function beforeAddBreadcrumb(replay, breadcrumb) {
  if (!replay.isEnabled() || !isBreadcrumbWithCategory(breadcrumb)) {
    return;
  }
  const result = normalizeBreadcrumb(breadcrumb);
  if (result) {
    addBreadcrumbEvent(replay, result);
  }
}
function normalizeBreadcrumb(breadcrumb) {
  if (!isBreadcrumbWithCategory(breadcrumb) || [
    // fetch & xhr are handled separately,in handleNetworkBreadcrumbs
    "fetch",
    "xhr",
    // These two are breadcrumbs for emitted sentry events, we don't care about them
    "sentry.event",
    "sentry.transaction"
  ].includes(breadcrumb.category) || // We capture UI breadcrumbs separately
  breadcrumb.category.startsWith("ui.")) {
    return null;
  }
  if (breadcrumb.category === "console") {
    return normalizeConsoleBreadcrumb(breadcrumb);
  }
  return createBreadcrumb(breadcrumb);
}
function normalizeConsoleBreadcrumb(breadcrumb) {
  var _a3;
  const args = (_a3 = breadcrumb.data) == null ? void 0 : _a3.arguments;
  if (!Array.isArray(args) || args.length === 0) {
    return createBreadcrumb(breadcrumb);
  }
  let isTruncated = false;
  const normalizedArgs = args.map((arg) => {
    if (!arg) {
      return arg;
    }
    if (typeof arg === "string") {
      if (arg.length > CONSOLE_ARG_MAX_SIZE) {
        isTruncated = true;
        return `${arg.slice(0, CONSOLE_ARG_MAX_SIZE)}\u2026`;
      }
      return arg;
    }
    if (typeof arg === "object") {
      try {
        const normalizedArg = normalize(arg, 7);
        const stringified = JSON.stringify(normalizedArg);
        if (stringified.length > CONSOLE_ARG_MAX_SIZE) {
          isTruncated = true;
          return `${JSON.stringify(normalizedArg, null, 2).slice(0, CONSOLE_ARG_MAX_SIZE)}\u2026`;
        }
        return normalizedArg;
      } catch {
      }
    }
    return arg;
  });
  return createBreadcrumb(__spreadProps(__spreadValues({}, breadcrumb), {
    data: __spreadValues(__spreadProps(__spreadValues({}, breadcrumb.data), {
      arguments: normalizedArgs
    }), isTruncated ? {
      _meta: {
        warnings: ["CONSOLE_ARG_TRUNCATED"]
      }
    } : {})
  }));
}
function isBreadcrumbWithCategory(breadcrumb) {
  return !!breadcrumb.category;
}
function isRrwebError(event, hint) {
  var _a3;
  if (event.type || !event.exception || !event.exception.values || !event.exception.values.length) {
    return false;
  }
  if ((_a3 = hint.originalException) == null ? void 0 : _a3.__rrweb__) {
    return true;
  }
  return false;
}
function resetReplayIdOnDynamicSamplingContext() {
  const dsc = getCurrentScope().getPropagationContext().dsc;
  if (dsc) {
    delete dsc.replay_id;
  }
  const activeSpan = getActiveSpan();
  if (activeSpan) {
    const dsc2 = getDynamicSamplingContextFromSpan(activeSpan);
    delete dsc2.replay_id;
  }
}
function addFeedbackBreadcrumb(replay, event) {
  replay.triggerUserActivity();
  replay.addUpdate(() => {
    if (!event.timestamp) {
      return true;
    }
    replay.throttledAddEvent({
      type: EventType.Custom,
      timestamp: event.timestamp * 1e3,
      data: {
        tag: "breadcrumb",
        payload: {
          timestamp: event.timestamp,
          type: "default",
          category: "sentry.feedback",
          data: {
            feedbackId: event.event_id
          }
        }
      }
    });
    return false;
  });
}
function shouldSampleForBufferEvent(replay, event) {
  if (replay.recordingMode !== "buffer") {
    return false;
  }
  if (event.message === UNABLE_TO_SEND_REPLAY) {
    return false;
  }
  if (!event.exception || event.type) {
    return false;
  }
  return isSampled(replay.getOptions().errorSampleRate);
}
function handleGlobalEventListener(replay) {
  return Object.assign((event, hint) => {
    if (!replay.isEnabled() || replay.isPaused()) {
      return event;
    }
    if (isReplayEvent(event)) {
      delete event.breadcrumbs;
      return event;
    }
    if (!isErrorEvent3(event) && !isTransactionEvent2(event) && !isFeedbackEvent(event)) {
      return event;
    }
    const isSessionActive = replay.checkAndHandleExpiredSession();
    if (!isSessionActive) {
      resetReplayIdOnDynamicSamplingContext();
      return event;
    }
    if (isFeedbackEvent(event)) {
      replay.flush();
      event.contexts.feedback.replay_id = replay.getSessionId();
      addFeedbackBreadcrumb(replay, event);
      return event;
    }
    if (isRrwebError(event, hint) && !replay.getOptions()._experiments.captureExceptions) {
      DEBUG_BUILD5 && logger3.log("Ignoring error from rrweb internals", event);
      return null;
    }
    const isErrorEventSampled = shouldSampleForBufferEvent(replay, event);
    const shouldTagReplayId = isErrorEventSampled || replay.recordingMode === "session";
    if (shouldTagReplayId) {
      event.tags = __spreadProps(__spreadValues({}, event.tags), {
        replayId: replay.getSessionId()
      });
    }
    return event;
  }, {
    id: "Replay"
  });
}
function createPerformanceSpans(replay, entries) {
  return entries.map(({
    type,
    start,
    end,
    name,
    data
  }) => {
    const response = replay.throttledAddEvent({
      type: EventType.Custom,
      timestamp: start,
      data: {
        tag: "performanceSpan",
        payload: {
          op: type,
          description: name,
          startTimestamp: start,
          endTimestamp: end,
          data
        }
      }
    });
    return typeof response === "string" ? Promise.resolve(null) : response;
  });
}
function handleHistory(handlerData) {
  const {
    from,
    to
  } = handlerData;
  const now = Date.now() / 1e3;
  return {
    type: "navigation.push",
    start: now,
    end: now,
    name: to,
    data: {
      previous: from
    }
  };
}
function handleHistorySpanListener(replay) {
  return (handlerData) => {
    if (!replay.isEnabled()) {
      return;
    }
    const result = handleHistory(handlerData);
    if (result === null) {
      return;
    }
    replay.getContext().urls.push(result.name);
    replay.triggerUserActivity();
    replay.addUpdate(() => {
      createPerformanceSpans(replay, [result]);
      return false;
    });
  };
}
function shouldFilterRequest(replay, url) {
  if (DEBUG_BUILD5 && replay.getOptions()._experiments.traceInternals) {
    return false;
  }
  return isSentryRequestUrl(url, getClient());
}
function addNetworkBreadcrumb(replay, result) {
  if (!replay.isEnabled()) {
    return;
  }
  if (result === null) {
    return;
  }
  if (shouldFilterRequest(replay, result.name)) {
    return;
  }
  replay.addUpdate(() => {
    createPerformanceSpans(replay, [result]);
    return true;
  });
}
function getBodySize(body) {
  if (!body) {
    return void 0;
  }
  const textEncoder = new TextEncoder();
  try {
    if (typeof body === "string") {
      return textEncoder.encode(body).length;
    }
    if (body instanceof URLSearchParams) {
      return textEncoder.encode(body.toString()).length;
    }
    if (body instanceof FormData) {
      const formDataStr = serializeFormData(body);
      return textEncoder.encode(formDataStr).length;
    }
    if (body instanceof Blob) {
      return body.size;
    }
    if (body instanceof ArrayBuffer) {
      return body.byteLength;
    }
  } catch {
  }
  return void 0;
}
function parseContentLengthHeader(header) {
  if (!header) {
    return void 0;
  }
  const size = parseInt(header, 10);
  return isNaN(size) ? void 0 : size;
}
function mergeWarning(info2, warning) {
  if (!info2) {
    return {
      headers: {},
      size: void 0,
      _meta: {
        warnings: [warning]
      }
    };
  }
  const newMeta = __spreadValues({}, info2._meta);
  const existingWarnings = newMeta.warnings || [];
  newMeta.warnings = [...existingWarnings, warning];
  info2._meta = newMeta;
  return info2;
}
function makeNetworkReplayBreadcrumb(type, data) {
  if (!data) {
    return null;
  }
  const {
    startTimestamp,
    endTimestamp,
    url,
    method,
    statusCode,
    request,
    response
  } = data;
  const result = {
    type,
    start: startTimestamp / 1e3,
    end: endTimestamp / 1e3,
    name: url,
    data: {
      method,
      statusCode,
      request,
      response
    }
  };
  return result;
}
function buildSkippedNetworkRequestOrResponse(bodySize) {
  return {
    headers: {},
    size: bodySize,
    _meta: {
      warnings: ["URL_SKIPPED"]
    }
  };
}
function buildNetworkRequestOrResponse(headers, bodySize, body) {
  if (!bodySize && Object.keys(headers).length === 0) {
    return void 0;
  }
  if (!bodySize) {
    return {
      headers
    };
  }
  if (!body) {
    return {
      headers,
      size: bodySize
    };
  }
  const info2 = {
    headers,
    size: bodySize
  };
  const {
    body: normalizedBody,
    warnings
  } = normalizeNetworkBody(body);
  info2.body = normalizedBody;
  if (warnings == null ? void 0 : warnings.length) {
    info2._meta = {
      warnings
    };
  }
  return info2;
}
function getAllowedHeaders(headers, allowedHeaders) {
  return Object.entries(headers).reduce((filteredHeaders, [key, value]) => {
    const normalizedKey = key.toLowerCase();
    if (allowedHeaders.includes(normalizedKey) && headers[key]) {
      filteredHeaders[normalizedKey] = value;
    }
    return filteredHeaders;
  }, {});
}
function normalizeNetworkBody(body) {
  if (!body || typeof body !== "string") {
    return {
      body
    };
  }
  const exceedsSizeLimit = body.length > NETWORK_BODY_MAX_SIZE;
  const isProbablyJson = _strIsProbablyJson(body);
  if (exceedsSizeLimit) {
    const truncatedBody = body.slice(0, NETWORK_BODY_MAX_SIZE);
    if (isProbablyJson) {
      return {
        body: truncatedBody,
        warnings: ["MAYBE_JSON_TRUNCATED"]
      };
    }
    return {
      body: `${truncatedBody}\u2026`,
      warnings: ["TEXT_TRUNCATED"]
    };
  }
  if (isProbablyJson) {
    try {
      const jsonBody = JSON.parse(body);
      return {
        body: jsonBody
      };
    } catch {
    }
  }
  return {
    body
  };
}
function _strIsProbablyJson(str) {
  const first = str[0];
  const last = str[str.length - 1];
  return first === "[" && last === "]" || first === "{" && last === "}";
}
function urlMatches(url, urls) {
  const fullUrl = getFullUrl(url);
  return stringMatchesSomePattern(fullUrl, urls);
}
function getFullUrl(url, baseURI = WINDOW6.document.baseURI) {
  if (url.startsWith("http://") || url.startsWith("https://") || url.startsWith(WINDOW6.location.origin)) {
    return url;
  }
  const fixedUrl = new URL(url, baseURI);
  if (fixedUrl.origin !== new URL(baseURI).origin) {
    return url;
  }
  const fullUrl = fixedUrl.href;
  if (!url.endsWith("/") && fullUrl.endsWith("/")) {
    return fullUrl.slice(0, -1);
  }
  return fullUrl;
}
function captureFetchBreadcrumbToReplay(breadcrumb, hint, options) {
  return __async(this, null, function* () {
    try {
      const data = yield _prepareFetchData(breadcrumb, hint, options);
      const result = makeNetworkReplayBreadcrumb("resource.fetch", data);
      addNetworkBreadcrumb(options.replay, result);
    } catch (error2) {
      DEBUG_BUILD5 && logger3.exception(error2, "Failed to capture fetch breadcrumb");
    }
  });
}
function enrichFetchBreadcrumb(breadcrumb, hint) {
  const {
    input,
    response
  } = hint;
  const body = input ? getFetchRequestArgBody(input) : void 0;
  const reqSize = getBodySize(body);
  const resSize = response ? parseContentLengthHeader(response.headers.get("content-length")) : void 0;
  if (reqSize !== void 0) {
    breadcrumb.data.request_body_size = reqSize;
  }
  if (resSize !== void 0) {
    breadcrumb.data.response_body_size = resSize;
  }
}
function _prepareFetchData(breadcrumb, hint, options) {
  return __async(this, null, function* () {
    const now = Date.now();
    const {
      startTimestamp = now,
      endTimestamp = now
    } = hint;
    const {
      url,
      method,
      status_code: statusCode = 0,
      request_body_size: requestBodySize,
      response_body_size: responseBodySize
    } = breadcrumb.data;
    const captureDetails = urlMatches(url, options.networkDetailAllowUrls) && !urlMatches(url, options.networkDetailDenyUrls);
    const request = captureDetails ? _getRequestInfo(options, hint.input, requestBodySize) : buildSkippedNetworkRequestOrResponse(requestBodySize);
    const response = yield _getResponseInfo(captureDetails, options, hint.response, responseBodySize);
    return {
      startTimestamp,
      endTimestamp,
      url,
      method,
      statusCode,
      request,
      response
    };
  });
}
function _getRequestInfo({
  networkCaptureBodies,
  networkRequestHeaders
}, input, requestBodySize) {
  const headers = input ? getRequestHeaders(input, networkRequestHeaders) : {};
  if (!networkCaptureBodies) {
    return buildNetworkRequestOrResponse(headers, requestBodySize, void 0);
  }
  const requestBody = getFetchRequestArgBody(input);
  const [bodyStr, warning] = getBodyString(requestBody, logger3);
  const data = buildNetworkRequestOrResponse(headers, requestBodySize, bodyStr);
  if (warning) {
    return mergeWarning(data, warning);
  }
  return data;
}
function _getResponseInfo(_0, _1, _2, _3) {
  return __async(this, arguments, function* (captureDetails, {
    networkCaptureBodies,
    networkResponseHeaders
  }, response, responseBodySize) {
    if (!captureDetails && responseBodySize !== void 0) {
      return buildSkippedNetworkRequestOrResponse(responseBodySize);
    }
    const headers = response ? getAllHeaders(response.headers, networkResponseHeaders) : {};
    if (!response || !networkCaptureBodies && responseBodySize !== void 0) {
      return buildNetworkRequestOrResponse(headers, responseBodySize, void 0);
    }
    const [bodyText, warning] = yield _parseFetchResponseBody(response);
    const result = getResponseData(bodyText, {
      networkCaptureBodies,
      responseBodySize,
      captureDetails,
      headers
    });
    if (warning) {
      return mergeWarning(result, warning);
    }
    return result;
  });
}
function getResponseData(bodyText, {
  networkCaptureBodies,
  responseBodySize,
  captureDetails,
  headers
}) {
  try {
    const size = (bodyText == null ? void 0 : bodyText.length) && responseBodySize === void 0 ? getBodySize(bodyText) : responseBodySize;
    if (!captureDetails) {
      return buildSkippedNetworkRequestOrResponse(size);
    }
    if (networkCaptureBodies) {
      return buildNetworkRequestOrResponse(headers, size, bodyText);
    }
    return buildNetworkRequestOrResponse(headers, size, void 0);
  } catch (error2) {
    DEBUG_BUILD5 && logger3.exception(error2, "Failed to serialize response body");
    return buildNetworkRequestOrResponse(headers, responseBodySize, void 0);
  }
}
function _parseFetchResponseBody(response) {
  return __async(this, null, function* () {
    const res = _tryCloneResponse(response);
    if (!res) {
      return [void 0, "BODY_PARSE_ERROR"];
    }
    try {
      const text = yield _tryGetResponseText(res);
      return [text];
    } catch (error2) {
      if (error2 instanceof Error && error2.message.indexOf("Timeout") > -1) {
        DEBUG_BUILD5 && logger3.warn("Parsing text body from response timed out");
        return [void 0, "BODY_PARSE_TIMEOUT"];
      }
      DEBUG_BUILD5 && logger3.exception(error2, "Failed to get text body from response");
      return [void 0, "BODY_PARSE_ERROR"];
    }
  });
}
function getAllHeaders(headers, allowedHeaders) {
  const allHeaders = {};
  allowedHeaders.forEach((header) => {
    if (headers.get(header)) {
      allHeaders[header] = headers.get(header);
    }
  });
  return allHeaders;
}
function getRequestHeaders(fetchArgs, allowedHeaders) {
  if (fetchArgs.length === 1 && typeof fetchArgs[0] !== "string") {
    return getHeadersFromOptions(fetchArgs[0], allowedHeaders);
  }
  if (fetchArgs.length === 2) {
    return getHeadersFromOptions(fetchArgs[1], allowedHeaders);
  }
  return {};
}
function getHeadersFromOptions(input, allowedHeaders) {
  if (!input) {
    return {};
  }
  const headers = input.headers;
  if (!headers) {
    return {};
  }
  if (headers instanceof Headers) {
    return getAllHeaders(headers, allowedHeaders);
  }
  if (Array.isArray(headers)) {
    return {};
  }
  return getAllowedHeaders(headers, allowedHeaders);
}
function _tryCloneResponse(response) {
  try {
    return response.clone();
  } catch (error2) {
    DEBUG_BUILD5 && logger3.exception(error2, "Failed to clone response body");
  }
}
function _tryGetResponseText(response) {
  return new Promise((resolve, reject) => {
    const timeout = setTimeout2(() => reject(new Error("Timeout while trying to read response body")), 500);
    _getResponseText(response).then((txt) => resolve(txt), (reason) => reject(reason)).finally(() => clearTimeout(timeout));
  });
}
function _getResponseText(response) {
  return __async(this, null, function* () {
    return yield response.text();
  });
}
function captureXhrBreadcrumbToReplay(breadcrumb, hint, options) {
  return __async(this, null, function* () {
    try {
      const data = _prepareXhrData(breadcrumb, hint, options);
      const result = makeNetworkReplayBreadcrumb("resource.xhr", data);
      addNetworkBreadcrumb(options.replay, result);
    } catch (error2) {
      DEBUG_BUILD5 && logger3.exception(error2, "Failed to capture xhr breadcrumb");
    }
  });
}
function enrichXhrBreadcrumb(breadcrumb, hint) {
  const {
    xhr,
    input
  } = hint;
  if (!xhr) {
    return;
  }
  const reqSize = getBodySize(input);
  const resSize = xhr.getResponseHeader("content-length") ? parseContentLengthHeader(xhr.getResponseHeader("content-length")) : _getBodySize(xhr.response, xhr.responseType);
  if (reqSize !== void 0) {
    breadcrumb.data.request_body_size = reqSize;
  }
  if (resSize !== void 0) {
    breadcrumb.data.response_body_size = resSize;
  }
}
function _prepareXhrData(breadcrumb, hint, options) {
  const now = Date.now();
  const {
    startTimestamp = now,
    endTimestamp = now,
    input,
    xhr
  } = hint;
  const {
    url,
    method,
    status_code: statusCode = 0,
    request_body_size: requestBodySize,
    response_body_size: responseBodySize
  } = breadcrumb.data;
  if (!url) {
    return null;
  }
  if (!xhr || !urlMatches(url, options.networkDetailAllowUrls) || urlMatches(url, options.networkDetailDenyUrls)) {
    const request2 = buildSkippedNetworkRequestOrResponse(requestBodySize);
    const response2 = buildSkippedNetworkRequestOrResponse(responseBodySize);
    return {
      startTimestamp,
      endTimestamp,
      url,
      method,
      statusCode,
      request: request2,
      response: response2
    };
  }
  const xhrInfo = xhr[SENTRY_XHR_DATA_KEY];
  const networkRequestHeaders = xhrInfo ? getAllowedHeaders(xhrInfo.request_headers, options.networkRequestHeaders) : {};
  const networkResponseHeaders = getAllowedHeaders(getResponseHeaders(xhr), options.networkResponseHeaders);
  const [requestBody, requestWarning] = options.networkCaptureBodies ? getBodyString(input, logger3) : [void 0];
  const [responseBody, responseWarning] = options.networkCaptureBodies ? _getXhrResponseBody(xhr) : [void 0];
  const request = buildNetworkRequestOrResponse(networkRequestHeaders, requestBodySize, requestBody);
  const response = buildNetworkRequestOrResponse(networkResponseHeaders, responseBodySize, responseBody);
  return {
    startTimestamp,
    endTimestamp,
    url,
    method,
    statusCode,
    request: requestWarning ? mergeWarning(request, requestWarning) : request,
    response: responseWarning ? mergeWarning(response, responseWarning) : response
  };
}
function getResponseHeaders(xhr) {
  const headers = xhr.getAllResponseHeaders();
  if (!headers) {
    return {};
  }
  return headers.split("\r\n").reduce((acc, line) => {
    const [key, value] = line.split(": ");
    if (value) {
      acc[key.toLowerCase()] = value;
    }
    return acc;
  }, {});
}
function _getXhrResponseBody(xhr) {
  const errors = [];
  try {
    return [xhr.responseText];
  } catch (e3) {
    errors.push(e3);
  }
  try {
    return _parseXhrResponse(xhr.response, xhr.responseType);
  } catch (e3) {
    errors.push(e3);
  }
  DEBUG_BUILD5 && logger3.warn("Failed to get xhr response body", ...errors);
  return [void 0];
}
function _parseXhrResponse(body, responseType) {
  try {
    if (typeof body === "string") {
      return [body];
    }
    if (body instanceof Document) {
      return [body.body.outerHTML];
    }
    if (responseType === "json" && body && typeof body === "object") {
      return [JSON.stringify(body)];
    }
    if (!body) {
      return [void 0];
    }
  } catch (error2) {
    DEBUG_BUILD5 && logger3.exception(error2, "Failed to serialize body", body);
    return [void 0, "BODY_PARSE_ERROR"];
  }
  DEBUG_BUILD5 && logger3.info("Skipping network body because of body type", body);
  return [void 0, "UNPARSEABLE_BODY_TYPE"];
}
function _getBodySize(body, responseType) {
  try {
    const bodyStr = responseType === "json" && body && typeof body === "object" ? JSON.stringify(body) : body;
    return getBodySize(bodyStr);
  } catch {
    return void 0;
  }
}
function handleNetworkBreadcrumbs(replay) {
  const client = getClient();
  try {
    const {
      networkDetailAllowUrls,
      networkDetailDenyUrls,
      networkCaptureBodies,
      networkRequestHeaders,
      networkResponseHeaders
    } = replay.getOptions();
    const options = {
      replay,
      networkDetailAllowUrls,
      networkDetailDenyUrls,
      networkCaptureBodies,
      networkRequestHeaders,
      networkResponseHeaders
    };
    if (client) {
      client.on("beforeAddBreadcrumb", (breadcrumb, hint) => beforeAddNetworkBreadcrumb(options, breadcrumb, hint));
    }
  } catch {
  }
}
function beforeAddNetworkBreadcrumb(options, breadcrumb, hint) {
  if (!breadcrumb.data) {
    return;
  }
  try {
    if (_isXhrBreadcrumb(breadcrumb) && _isXhrHint(hint)) {
      enrichXhrBreadcrumb(breadcrumb, hint);
      captureXhrBreadcrumbToReplay(breadcrumb, hint, options);
    }
    if (_isFetchBreadcrumb(breadcrumb) && _isFetchHint(hint)) {
      enrichFetchBreadcrumb(breadcrumb, hint);
      captureFetchBreadcrumbToReplay(breadcrumb, hint, options);
    }
  } catch (e3) {
    DEBUG_BUILD5 && logger3.exception(e3, "Error when enriching network breadcrumb");
  }
}
function _isXhrBreadcrumb(breadcrumb) {
  return breadcrumb.category === "xhr";
}
function _isFetchBreadcrumb(breadcrumb) {
  return breadcrumb.category === "fetch";
}
function _isXhrHint(hint) {
  return hint == null ? void 0 : hint.xhr;
}
function _isFetchHint(hint) {
  return hint == null ? void 0 : hint.response;
}
function addGlobalListeners(replay, {
  autoFlushOnFeedback
}) {
  const client = getClient();
  addClickKeypressInstrumentationHandler(handleDomListener(replay));
  addHistoryInstrumentationHandler(handleHistorySpanListener(replay));
  handleBreadcrumbs(replay);
  handleNetworkBreadcrumbs(replay);
  const eventProcessor = handleGlobalEventListener(replay);
  addEventProcessor(eventProcessor);
  if (client) {
    client.on("beforeSendEvent", handleBeforeSendEvent(replay));
    client.on("afterSendEvent", handleAfterSendEvent(replay));
    client.on("createDsc", (dsc) => {
      const replayId = replay.getSessionId();
      if (replayId && replay.isEnabled() && replay.recordingMode === "session") {
        const isSessionActive = replay.checkAndHandleExpiredSession();
        if (isSessionActive) {
          dsc.replay_id = replayId;
        }
      }
    });
    client.on("spanStart", (span) => {
      replay.lastActiveSpan = span;
    });
    client.on("spanEnd", (span) => {
      replay.lastActiveSpan = span;
    });
    client.on("beforeSendFeedback", (feedbackEvent, options) => __async(null, null, function* () {
      var _a3;
      const replayId = replay.getSessionId();
      if ((options == null ? void 0 : options.includeReplay) && replay.isEnabled() && replayId && ((_a3 = feedbackEvent.contexts) == null ? void 0 : _a3.feedback)) {
        if (feedbackEvent.contexts.feedback.source === "api" && autoFlushOnFeedback) {
          yield replay.flush();
        }
        feedbackEvent.contexts.feedback.replay_id = replayId;
      }
    }));
    if (autoFlushOnFeedback) {
      client.on("openFeedbackWidget", () => __async(null, null, function* () {
        yield replay.flush();
      }));
    }
  }
}
function addMemoryEntry(replay) {
  return __async(this, null, function* () {
    try {
      return Promise.all(createPerformanceSpans(replay, [
        // @ts-expect-error memory doesn't exist on type Performance as the API is non-standard (we check that it exists above)
        createMemoryEntry(WINDOW6.performance.memory)
      ]));
    } catch (error2) {
      return [];
    }
  });
}
function createMemoryEntry(memoryEntry) {
  const {
    jsHeapSizeLimit,
    totalJSHeapSize,
    usedJSHeapSize
  } = memoryEntry;
  const time = Date.now() / 1e3;
  return {
    type: "memory",
    name: "memory",
    start: time,
    end: time,
    data: {
      memory: {
        jsHeapSizeLimit,
        totalJSHeapSize,
        usedJSHeapSize
      }
    }
  };
}
function debounce2(func, wait, options) {
  return debounce(func, wait, __spreadProps(__spreadValues({}, options), {
    // @ts-expect-error - Not quite sure why these types do not match, but this is fine
    setTimeoutImpl: setTimeout2
  }));
}
var NAVIGATOR2 = GLOBAL_OBJ.navigator;
function getRecordingSamplingOptions() {
  var _a3, _b;
  if (/iPhone|iPad|iPod/i.test((_a3 = NAVIGATOR2 == null ? void 0 : NAVIGATOR2.userAgent) != null ? _a3 : "") || /Macintosh/i.test((_b = NAVIGATOR2 == null ? void 0 : NAVIGATOR2.userAgent) != null ? _b : "") && (NAVIGATOR2 == null ? void 0 : NAVIGATOR2.maxTouchPoints) && (NAVIGATOR2 == null ? void 0 : NAVIGATOR2.maxTouchPoints) > 1) {
    return {
      sampling: {
        mousemove: false
      }
    };
  }
  return {};
}
function getHandleRecordingEmit(replay) {
  let hadFirstEvent = false;
  return (event, _isCheckout) => {
    if (!replay.checkAndHandleExpiredSession()) {
      DEBUG_BUILD5 && logger3.warn("Received replay event after session expired.");
      return;
    }
    const isCheckout = _isCheckout || !hadFirstEvent;
    hadFirstEvent = true;
    if (replay.clickDetector) {
      updateClickDetectorForRecordingEvent(replay.clickDetector, event);
    }
    replay.addUpdate(() => {
      if (replay.recordingMode === "buffer" && isCheckout) {
        replay.setInitialState();
      }
      if (!addEventSync(replay, event, isCheckout)) {
        return true;
      }
      if (!isCheckout) {
        return false;
      }
      const session = replay.session;
      addSettingsEvent(replay, isCheckout);
      if (replay.recordingMode === "buffer" && session && replay.eventBuffer) {
        const earliestEvent = replay.eventBuffer.getEarliestTimestamp();
        if (earliestEvent) {
          DEBUG_BUILD5 && logger3.info(`Updating session start time to earliest event in buffer to ${new Date(earliestEvent)}`);
          session.started = earliestEvent;
          if (replay.getOptions().stickySession) {
            saveSession(session);
          }
        }
      }
      if (session == null ? void 0 : session.previousSessionId) {
        return true;
      }
      if (replay.recordingMode === "session") {
        void replay.flush();
      }
      return true;
    });
  };
}
function createOptionsEvent(replay) {
  const options = replay.getOptions();
  return {
    type: EventType.Custom,
    timestamp: Date.now(),
    data: {
      tag: "options",
      payload: {
        shouldRecordCanvas: replay.isRecordingCanvas(),
        sessionSampleRate: options.sessionSampleRate,
        errorSampleRate: options.errorSampleRate,
        useCompressionOption: options.useCompression,
        blockAllMedia: options.blockAllMedia,
        maskAllText: options.maskAllText,
        maskAllInputs: options.maskAllInputs,
        useCompression: replay.eventBuffer ? replay.eventBuffer.type === "worker" : false,
        networkDetailHasUrls: options.networkDetailAllowUrls.length > 0,
        networkCaptureBodies: options.networkCaptureBodies,
        networkRequestHasHeaders: options.networkRequestHeaders.length > 0,
        networkResponseHasHeaders: options.networkResponseHeaders.length > 0
      }
    }
  };
}
function addSettingsEvent(replay, isCheckout) {
  if (!isCheckout || !replay.session || replay.session.segmentId !== 0) {
    return;
  }
  addEventSync(replay, createOptionsEvent(replay), false);
}
function closestElementOfNode(node) {
  if (!node) {
    return null;
  }
  try {
    const el = node.nodeType === node.ELEMENT_NODE ? node : node.parentElement;
    return el;
  } catch (error2) {
    return null;
  }
}
function createReplayEnvelope(replayEvent, recordingData, dsn, tunnel) {
  return createEnvelope(createEventEnvelopeHeaders(replayEvent, getSdkMetadataForEnvelopeHeader(replayEvent), tunnel, dsn), [[{
    type: "replay_event"
  }, replayEvent], [{
    type: "replay_recording",
    // If string then we need to encode to UTF8, otherwise will have
    // wrong size. TextEncoder has similar browser support to
    // MutationObserver, although it does not accept IE11.
    length: typeof recordingData === "string" ? new TextEncoder().encode(recordingData).length : recordingData.length
  }, recordingData]]);
}
function prepareRecordingData({
  recordingData,
  headers
}) {
  let payloadWithSequence;
  const replayHeaders = `${JSON.stringify(headers)}
`;
  if (typeof recordingData === "string") {
    payloadWithSequence = `${replayHeaders}${recordingData}`;
  } else {
    const enc = new TextEncoder();
    const sequence = enc.encode(replayHeaders);
    payloadWithSequence = new Uint8Array(sequence.length + recordingData.length);
    payloadWithSequence.set(sequence);
    payloadWithSequence.set(recordingData, sequence.length);
  }
  return payloadWithSequence;
}
function prepareReplayEvent(_0) {
  return __async(this, arguments, function* ({
    client,
    scope,
    replayId: event_id,
    event
  }) {
    const integrations = typeof client["_integrations"] === "object" && client["_integrations"] !== null && !Array.isArray(client["_integrations"]) ? Object.keys(client["_integrations"]) : void 0;
    const eventHint = {
      event_id,
      integrations
    };
    client.emit("preprocessEvent", event, eventHint);
    const preparedEvent = yield prepareEvent(client.getOptions(), event, eventHint, scope, client, getIsolationScope());
    if (!preparedEvent) {
      return null;
    }
    client.emit("postprocessEvent", preparedEvent, eventHint);
    preparedEvent.platform = preparedEvent.platform || "javascript";
    const metadata = client.getSdkMetadata();
    const {
      name,
      version: version2
    } = (metadata == null ? void 0 : metadata.sdk) || {};
    preparedEvent.sdk = __spreadProps(__spreadValues({}, preparedEvent.sdk), {
      name: name || "sentry.javascript.unknown",
      version: version2 || "0.0.0"
    });
    return preparedEvent;
  });
}
function sendReplayRequest(_0) {
  return __async(this, arguments, function* ({
    recordingData,
    replayId,
    segmentId: segment_id,
    eventContext,
    timestamp,
    session
  }) {
    const preparedRecordingData = prepareRecordingData({
      recordingData,
      headers: {
        segment_id
      }
    });
    const {
      urls,
      errorIds,
      traceIds,
      initialTimestamp
    } = eventContext;
    const client = getClient();
    const scope = getCurrentScope();
    const transport = client == null ? void 0 : client.getTransport();
    const dsn = client == null ? void 0 : client.getDsn();
    if (!client || !transport || !dsn || !session.sampled) {
      return resolvedSyncPromise({});
    }
    const baseEvent = {
      type: REPLAY_EVENT_NAME,
      replay_start_timestamp: initialTimestamp / 1e3,
      timestamp: timestamp / 1e3,
      error_ids: errorIds,
      trace_ids: traceIds,
      urls,
      replay_id: replayId,
      segment_id,
      replay_type: session.sampled
    };
    const replayEvent = yield prepareReplayEvent({
      scope,
      client,
      replayId,
      event: baseEvent
    });
    if (!replayEvent) {
      client.recordDroppedEvent("event_processor", "replay");
      DEBUG_BUILD5 && logger3.info("An event processor returned `null`, will not send event.");
      return resolvedSyncPromise({});
    }
    delete replayEvent.sdkProcessingMetadata;
    const envelope = createReplayEnvelope(replayEvent, preparedRecordingData, dsn, client.getOptions().tunnel);
    let response;
    try {
      response = yield transport.send(envelope);
    } catch (err) {
      const error2 = new Error(UNABLE_TO_SEND_REPLAY);
      try {
        error2.cause = err;
      } catch {
      }
      throw error2;
    }
    if (typeof response.statusCode === "number" && (response.statusCode < 200 || response.statusCode >= 300)) {
      throw new TransportStatusCodeError(response.statusCode);
    }
    const rateLimits = updateRateLimits({}, response);
    if (isRateLimited(rateLimits, "replay")) {
      throw new RateLimitError(rateLimits);
    }
    return response;
  });
}
var TransportStatusCodeError = class extends Error {
  constructor(statusCode) {
    super(`Transport returned status code ${statusCode}`);
  }
};
var RateLimitError = class extends Error {
  constructor(rateLimits) {
    super("Rate limit hit");
    this.rateLimits = rateLimits;
  }
};
function sendReplay(_0) {
  return __async(this, arguments, function* (replayData, retryConfig = {
    count: 0,
    interval: RETRY_BASE_INTERVAL
  }) {
    const {
      recordingData,
      onError
    } = replayData;
    if (!recordingData.length) {
      return;
    }
    try {
      yield sendReplayRequest(replayData);
      return true;
    } catch (err) {
      if (err instanceof TransportStatusCodeError || err instanceof RateLimitError) {
        throw err;
      }
      setContext("Replays", {
        _retryCount: retryConfig.count
      });
      if (onError) {
        onError(err);
      }
      if (retryConfig.count >= RETRY_MAX_COUNT) {
        const error2 = new Error(`${UNABLE_TO_SEND_REPLAY} - max retries exceeded`);
        try {
          error2.cause = err;
        } catch {
        }
        throw error2;
      }
      retryConfig.interval *= ++retryConfig.count;
      return new Promise((resolve, reject) => {
        setTimeout2(() => __async(null, null, function* () {
          try {
            yield sendReplay(replayData, retryConfig);
            resolve(true);
          } catch (err2) {
            reject(err2);
          }
        }), retryConfig.interval);
      });
    }
  });
}
var THROTTLED = "__THROTTLED";
var SKIPPED = "__SKIPPED";
function throttle(fn, maxCount, durationSeconds) {
  const counter = /* @__PURE__ */ new Map();
  const _cleanup = (now) => {
    const threshold = now - durationSeconds;
    counter.forEach((_value, key) => {
      if (key < threshold) {
        counter.delete(key);
      }
    });
  };
  const _getTotalCount = () => {
    return [...counter.values()].reduce((a2, b2) => a2 + b2, 0);
  };
  let isThrottled = false;
  return (...rest) => {
    const now = Math.floor(Date.now() / 1e3);
    _cleanup(now);
    if (_getTotalCount() >= maxCount) {
      const wasThrottled = isThrottled;
      isThrottled = true;
      return wasThrottled ? SKIPPED : THROTTLED;
    }
    isThrottled = false;
    const count = counter.get(now) || 0;
    counter.set(now, count + 1);
    return fn(...rest);
  };
}
var ReplayContainer = class {
  /**
   * Recording can happen in one of two modes:
   *   - session: Record the whole session, sending it continuously
   *   - buffer: Always keep the last 60s of recording, requires:
   *     - having replaysOnErrorSampleRate > 0 to capture replay when an error occurs
   *     - or calling `flush()` to send the replay
   */
  /**
   * The current or last active span.
   * This is only available when performance is enabled.
   */
  /**
   * These are here so we can overwrite them in tests etc.
   * @hidden
   */
  /** The replay has to be manually started, because no sample rate (neither session or error) was provided. */
  /**
   * Options to pass to `rrweb.record()`
   */
  /**
   * Timestamp of the last user activity. This lives across sessions.
   */
  /**
   * Is the integration currently active?
   */
  /**
   * Paused is a state where:
   * - DOM Recording is not listening at all
   * - Nothing will be added to event buffer (e.g. core SDK events)
   */
  /**
   * Have we attached listeners to the core SDK?
   * Note we have to track this as there is no way to remove instrumentation handlers.
   */
  /**
   * Function to stop recording
   */
  /**
   * Internal use for canvas recording options
   */
  /**
   * Handle when visibility of the page content changes. Opening a new tab will
   * cause the state to change to hidden because of content of current page will
   * be hidden. Likewise, moving a different window to cover the contents of the
   * page will also trigger a change to a hidden state.
   */
  /**
   * Handle when page is blurred
   */
  /**
   * Handle when page is focused
   */
  /** Ensure page remains active when a key is pressed. */
  constructor({
    options,
    recordingOptions
  }) {
    this.eventBuffer = null;
    this.performanceEntries = [];
    this.replayPerformanceEntries = [];
    this.recordingMode = "session";
    this.timeouts = {
      sessionIdlePause: SESSION_IDLE_PAUSE_DURATION,
      sessionIdleExpire: SESSION_IDLE_EXPIRE_DURATION
    };
    this._lastActivity = Date.now();
    this._isEnabled = false;
    this._isPaused = false;
    this._requiresManualStart = false;
    this._hasInitializedCoreListeners = false;
    this._context = {
      errorIds: /* @__PURE__ */ new Set(),
      traceIds: /* @__PURE__ */ new Set(),
      urls: [],
      initialTimestamp: Date.now(),
      initialUrl: ""
    };
    this._recordingOptions = recordingOptions;
    this._options = options;
    this._debouncedFlush = debounce2(() => this._flush(), this._options.flushMinDelay, {
      maxWait: this._options.flushMaxDelay
    });
    this._throttledAddEvent = throttle(
      (event, isCheckout) => addEvent(this, event, isCheckout),
      // Max 300 events...
      300,
      // ... per 5s
      5
    );
    const {
      slowClickTimeout,
      slowClickIgnoreSelectors
    } = this.getOptions();
    const slowClickConfig = slowClickTimeout ? {
      threshold: Math.min(SLOW_CLICK_THRESHOLD, slowClickTimeout),
      timeout: slowClickTimeout,
      scrollTimeout: SLOW_CLICK_SCROLL_TIMEOUT,
      ignoreSelector: slowClickIgnoreSelectors ? slowClickIgnoreSelectors.join(",") : ""
    } : void 0;
    if (slowClickConfig) {
      this.clickDetector = new ClickDetector(this, slowClickConfig);
    }
    if (DEBUG_BUILD5) {
      const experiments = options._experiments;
      logger3.setConfig({
        captureExceptions: !!experiments.captureExceptions,
        traceInternals: !!experiments.traceInternals
      });
    }
    this._handleVisibilityChange = () => {
      if (WINDOW6.document.visibilityState === "visible") {
        this._doChangeToForegroundTasks();
      } else {
        this._doChangeToBackgroundTasks();
      }
    };
    this._handleWindowBlur = () => {
      const breadcrumb = createBreadcrumb({
        category: "ui.blur"
      });
      this._doChangeToBackgroundTasks(breadcrumb);
    };
    this._handleWindowFocus = () => {
      const breadcrumb = createBreadcrumb({
        category: "ui.focus"
      });
      this._doChangeToForegroundTasks(breadcrumb);
    };
    this._handleKeyboardEvent = (event) => {
      handleKeyboardEvent(this, event);
    };
  }
  /** Get the event context. */
  getContext() {
    return this._context;
  }
  /** If recording is currently enabled. */
  isEnabled() {
    return this._isEnabled;
  }
  /** If recording is currently paused. */
  isPaused() {
    return this._isPaused;
  }
  /**
   * Determine if canvas recording is enabled
   */
  isRecordingCanvas() {
    return Boolean(this._canvas);
  }
  /** Get the replay integration options. */
  getOptions() {
    return this._options;
  }
  /** A wrapper to conditionally capture exceptions. */
  handleException(error2) {
    DEBUG_BUILD5 && logger3.exception(error2);
    if (this._options.onError) {
      this._options.onError(error2);
    }
  }
  /**
   * Initializes the plugin based on sampling configuration. Should not be
   * called outside of constructor.
   */
  initializeSampling(previousSessionId) {
    const {
      errorSampleRate,
      sessionSampleRate
    } = this._options;
    const requiresManualStart = errorSampleRate <= 0 && sessionSampleRate <= 0;
    this._requiresManualStart = requiresManualStart;
    if (requiresManualStart) {
      return;
    }
    this._initializeSessionForSampling(previousSessionId);
    if (!this.session) {
      DEBUG_BUILD5 && logger3.exception(new Error("Unable to initialize and create session"));
      return;
    }
    if (this.session.sampled === false) {
      return;
    }
    this.recordingMode = this.session.sampled === "buffer" && this.session.segmentId === 0 ? "buffer" : "session";
    DEBUG_BUILD5 && logger3.infoTick(`Starting replay in ${this.recordingMode} mode`);
    this._initializeRecording();
  }
  /**
   * Start a replay regardless of sampling rate. Calling this will always
   * create a new session. Will log a message if replay is already in progress.
   *
   * Creates or loads a session, attaches listeners to varying events (DOM,
   * _performanceObserver, Recording, Sentry SDK, etc)
   */
  start() {
    if (this._isEnabled && this.recordingMode === "session") {
      DEBUG_BUILD5 && logger3.info("Recording is already in progress");
      return;
    }
    if (this._isEnabled && this.recordingMode === "buffer") {
      DEBUG_BUILD5 && logger3.info("Buffering is in progress, call `flush()` to save the replay");
      return;
    }
    DEBUG_BUILD5 && logger3.infoTick("Starting replay in session mode");
    this._updateUserActivity();
    const session = loadOrCreateSession({
      maxReplayDuration: this._options.maxReplayDuration,
      sessionIdleExpire: this.timeouts.sessionIdleExpire
    }, {
      stickySession: this._options.stickySession,
      // This is intentional: create a new session-based replay when calling `start()`
      sessionSampleRate: 1,
      allowBuffering: false
    });
    this.session = session;
    this._initializeRecording();
  }
  /**
   * Start replay buffering. Buffers until `flush()` is called or, if
   * `replaysOnErrorSampleRate` > 0, an error occurs.
   */
  startBuffering() {
    if (this._isEnabled) {
      DEBUG_BUILD5 && logger3.info("Buffering is in progress, call `flush()` to save the replay");
      return;
    }
    DEBUG_BUILD5 && logger3.infoTick("Starting replay in buffer mode");
    const session = loadOrCreateSession({
      sessionIdleExpire: this.timeouts.sessionIdleExpire,
      maxReplayDuration: this._options.maxReplayDuration
    }, {
      stickySession: this._options.stickySession,
      sessionSampleRate: 0,
      allowBuffering: true
    });
    this.session = session;
    this.recordingMode = "buffer";
    this._initializeRecording();
  }
  /**
   * Start recording.
   *
   * Note that this will cause a new DOM checkout
   */
  startRecording() {
    try {
      const canvasOptions = this._canvas;
      this._stopRecording = record(__spreadValues(__spreadProps(__spreadValues(__spreadProps(__spreadValues(__spreadValues({}, this._recordingOptions), this.recordingMode === "buffer" ? {
        checkoutEveryNms: BUFFER_CHECKOUT_TIME
      } : (
        // Otherwise, use experimental option w/ min checkout time of 6 minutes
        // This is to improve playback seeking as there could potentially be
        // less mutations to process in the worse cases.
        //
        // checkout by "N" events is probably ideal, but means we have less
        // control about the number of checkouts we make (which generally
        // increases replay size)
        this._options._experiments.continuousCheckout && {
          // Minimum checkout time is 6 minutes
          checkoutEveryNms: Math.max(36e4, this._options._experiments.continuousCheckout)
        }
      )), {
        emit: getHandleRecordingEmit(this)
      }), getRecordingSamplingOptions()), {
        onMutation: this._onMutationHandler.bind(this)
      }), canvasOptions ? {
        recordCanvas: canvasOptions.recordCanvas,
        getCanvasManager: canvasOptions.getCanvasManager,
        sampling: canvasOptions.sampling,
        dataURLOptions: canvasOptions.dataURLOptions
      } : {}));
    } catch (err) {
      this.handleException(err);
    }
  }
  /**
   * Stops the recording, if it was running.
   *
   * Returns true if it was previously stopped, or is now stopped,
   * otherwise false.
   */
  stopRecording() {
    try {
      if (this._stopRecording) {
        this._stopRecording();
        this._stopRecording = void 0;
      }
      return true;
    } catch (err) {
      this.handleException(err);
      return false;
    }
  }
  /**
   * Currently, this needs to be manually called (e.g. for tests). Sentry SDK
   * does not support a teardown
   */
  stop() {
    return __async(this, arguments, function* ({
      forceFlush = false,
      reason
    } = {}) {
      var _a3;
      if (!this._isEnabled) {
        return;
      }
      this._isEnabled = false;
      try {
        DEBUG_BUILD5 && logger3.info(`Stopping Replay${reason ? ` triggered by ${reason}` : ""}`);
        resetReplayIdOnDynamicSamplingContext();
        this._removeListeners();
        this.stopRecording();
        this._debouncedFlush.cancel();
        if (forceFlush) {
          yield this._flush({
            force: true
          });
        }
        (_a3 = this.eventBuffer) == null ? void 0 : _a3.destroy();
        this.eventBuffer = null;
        clearSession(this);
      } catch (err) {
        this.handleException(err);
      }
    });
  }
  /**
   * Pause some replay functionality. See comments for `_isPaused`.
   * This differs from stop as this only stops DOM recording, it is
   * not as thorough of a shutdown as `stop()`.
   */
  pause() {
    if (this._isPaused) {
      return;
    }
    this._isPaused = true;
    this.stopRecording();
    DEBUG_BUILD5 && logger3.info("Pausing replay");
  }
  /**
   * Resumes recording, see notes for `pause().
   *
   * Note that calling `startRecording()` here will cause a
   * new DOM checkout.`
   */
  resume() {
    if (!this._isPaused || !this._checkSession()) {
      return;
    }
    this._isPaused = false;
    this.startRecording();
    DEBUG_BUILD5 && logger3.info("Resuming replay");
  }
  /**
   * If not in "session" recording mode, flush event buffer which will create a new replay.
   * Unless `continueRecording` is false, the replay will continue to record and
   * behave as a "session"-based replay.
   *
   * Otherwise, queue up a flush.
   */
  sendBufferedReplayOrFlush() {
    return __async(this, arguments, function* ({
      continueRecording = true
    } = {}) {
      if (this.recordingMode === "session") {
        return this.flushImmediate();
      }
      const activityTime = Date.now();
      DEBUG_BUILD5 && logger3.info("Converting buffer to session");
      yield this.flushImmediate();
      const hasStoppedRecording = this.stopRecording();
      if (!continueRecording || !hasStoppedRecording) {
        return;
      }
      if (this.recordingMode === "session") {
        return;
      }
      this.recordingMode = "session";
      if (this.session) {
        this._updateUserActivity(activityTime);
        this._updateSessionActivity(activityTime);
        this._maybeSaveSession();
      }
      this.startRecording();
    });
  }
  /**
   * We want to batch uploads of replay events. Save events only if
   * `<flushMinDelay>` milliseconds have elapsed since the last event
   * *OR* if `<flushMaxDelay>` milliseconds have elapsed.
   *
   * Accepts a callback to perform side-effects and returns true to stop batch
   * processing and hand back control to caller.
   */
  addUpdate(cb) {
    const cbResult = cb();
    if (this.recordingMode === "buffer") {
      return;
    }
    if (cbResult === true) {
      return;
    }
    this._debouncedFlush();
  }
  /**
   * Updates the user activity timestamp and resumes recording. This should be
   * called in an event handler for a user action that we consider as the user
   * being "active" (e.g. a mouse click).
   */
  triggerUserActivity() {
    this._updateUserActivity();
    if (!this._stopRecording) {
      if (!this._checkSession()) {
        return;
      }
      this.resume();
      return;
    }
    this.checkAndHandleExpiredSession();
    this._updateSessionActivity();
  }
  /**
   * Updates the user activity timestamp *without* resuming
   * recording. Some user events (e.g. keydown) can be create
   * low-value replays that only contain the keypress as a
   * breadcrumb. Instead this would require other events to
   * create a new replay after a session has expired.
   */
  updateUserActivity() {
    this._updateUserActivity();
    this._updateSessionActivity();
  }
  /**
   * Only flush if `this.recordingMode === 'session'`
   */
  conditionalFlush() {
    if (this.recordingMode === "buffer") {
      return Promise.resolve();
    }
    return this.flushImmediate();
  }
  /**
   * Flush using debounce flush
   */
  flush() {
    return this._debouncedFlush();
  }
  /**
   * Always flush via `_debouncedFlush` so that we do not have flushes triggered
   * from calling both `flush` and `_debouncedFlush`. Otherwise, there could be
   * cases of multiple flushes happening closely together.
   */
  flushImmediate() {
    this._debouncedFlush();
    return this._debouncedFlush.flush();
  }
  /**
   * Cancels queued up flushes.
   */
  cancelFlush() {
    this._debouncedFlush.cancel();
  }
  /** Get the current session (=replay) ID */
  getSessionId() {
    var _a3;
    return (_a3 = this.session) == null ? void 0 : _a3.id;
  }
  /**
   * Checks if recording should be stopped due to user inactivity. Otherwise
   * check if session is expired and create a new session if so. Triggers a new
   * full snapshot on new session.
   *
   * Returns true if session is not expired, false otherwise.
   * @hidden
   */
  checkAndHandleExpiredSession() {
    if (this._lastActivity && isExpired(this._lastActivity, this.timeouts.sessionIdlePause) && this.session && this.session.sampled === "session") {
      this.pause();
      return;
    }
    if (!this._checkSession()) {
      return false;
    }
    return true;
  }
  /**
   * Capture some initial state that can change throughout the lifespan of the
   * replay. This is required because otherwise they would be captured at the
   * first flush.
   */
  setInitialState() {
    const urlPath = `${WINDOW6.location.pathname}${WINDOW6.location.hash}${WINDOW6.location.search}`;
    const url = `${WINDOW6.location.origin}${urlPath}`;
    this.performanceEntries = [];
    this.replayPerformanceEntries = [];
    this._clearContext();
    this._context.initialUrl = url;
    this._context.initialTimestamp = Date.now();
    this._context.urls.push(url);
  }
  /**
   * Add a breadcrumb event, that may be throttled.
   * If it was throttled, we add a custom breadcrumb to indicate that.
   */
  throttledAddEvent(event, isCheckout) {
    const res = this._throttledAddEvent(event, isCheckout);
    if (res === THROTTLED) {
      const breadcrumb = createBreadcrumb({
        category: "replay.throttled"
      });
      this.addUpdate(() => {
        return !addEventSync(this, {
          type: ReplayEventTypeCustom,
          timestamp: breadcrumb.timestamp || 0,
          data: {
            tag: "breadcrumb",
            payload: breadcrumb,
            metric: true
          }
        });
      });
    }
    return res;
  }
  /**
   * This will get the parametrized route name of the current page.
   * This is only available if performance is enabled, and if an instrumented router is used.
   */
  getCurrentRoute() {
    const lastActiveSpan = this.lastActiveSpan || getActiveSpan();
    const lastRootSpan = lastActiveSpan && getRootSpan(lastActiveSpan);
    const attributes = lastRootSpan && spanToJSON(lastRootSpan).data || {};
    const source = attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];
    if (!lastRootSpan || !source || !["route", "custom"].includes(source)) {
      return void 0;
    }
    return spanToJSON(lastRootSpan).description;
  }
  /**
   * Initialize and start all listeners to varying events (DOM,
   * Performance Observer, Recording, Sentry SDK, etc)
   */
  _initializeRecording() {
    this.setInitialState();
    this._updateSessionActivity();
    this.eventBuffer = createEventBuffer({
      useCompression: this._options.useCompression,
      workerUrl: this._options.workerUrl
    });
    this._removeListeners();
    this._addListeners();
    this._isEnabled = true;
    this._isPaused = false;
    this.startRecording();
  }
  /**
   * Loads (or refreshes) the current session.
   */
  _initializeSessionForSampling(previousSessionId) {
    const allowBuffering = this._options.errorSampleRate > 0;
    const session = loadOrCreateSession({
      sessionIdleExpire: this.timeouts.sessionIdleExpire,
      maxReplayDuration: this._options.maxReplayDuration,
      previousSessionId
    }, {
      stickySession: this._options.stickySession,
      sessionSampleRate: this._options.sessionSampleRate,
      allowBuffering
    });
    this.session = session;
  }
  /**
   * Checks and potentially refreshes the current session.
   * Returns false if session is not recorded.
   */
  _checkSession() {
    if (!this.session) {
      return false;
    }
    const currentSession = this.session;
    if (shouldRefreshSession(currentSession, {
      sessionIdleExpire: this.timeouts.sessionIdleExpire,
      maxReplayDuration: this._options.maxReplayDuration
    })) {
      this._refreshSession(currentSession);
      return false;
    }
    return true;
  }
  /**
   * Refresh a session with a new one.
   * This stops the current session (without forcing a flush, as that would never work since we are expired),
   * and then does a new sampling based on the refreshed session.
   */
  _refreshSession(session) {
    return __async(this, null, function* () {
      if (!this._isEnabled) {
        return;
      }
      yield this.stop({
        reason: "refresh session"
      });
      this.initializeSampling(session.id);
    });
  }
  /**
   * Adds listeners to record events for the replay
   */
  _addListeners() {
    try {
      WINDOW6.document.addEventListener("visibilitychange", this._handleVisibilityChange);
      WINDOW6.addEventListener("blur", this._handleWindowBlur);
      WINDOW6.addEventListener("focus", this._handleWindowFocus);
      WINDOW6.addEventListener("keydown", this._handleKeyboardEvent);
      if (this.clickDetector) {
        this.clickDetector.addListeners();
      }
      if (!this._hasInitializedCoreListeners) {
        addGlobalListeners(this, {
          autoFlushOnFeedback: this._options._experiments.autoFlushOnFeedback
        });
        this._hasInitializedCoreListeners = true;
      }
    } catch (err) {
      this.handleException(err);
    }
    this._performanceCleanupCallback = setupPerformanceObserver(this);
  }
  /**
   * Cleans up listeners that were created in `_addListeners`
   */
  _removeListeners() {
    try {
      WINDOW6.document.removeEventListener("visibilitychange", this._handleVisibilityChange);
      WINDOW6.removeEventListener("blur", this._handleWindowBlur);
      WINDOW6.removeEventListener("focus", this._handleWindowFocus);
      WINDOW6.removeEventListener("keydown", this._handleKeyboardEvent);
      if (this.clickDetector) {
        this.clickDetector.removeListeners();
      }
      if (this._performanceCleanupCallback) {
        this._performanceCleanupCallback();
      }
    } catch (err) {
      this.handleException(err);
    }
  }
  /**
   * Tasks to run when we consider a page to be hidden (via blurring and/or visibility)
   */
  _doChangeToBackgroundTasks(breadcrumb) {
    if (!this.session) {
      return;
    }
    const expired = isSessionExpired(this.session, {
      maxReplayDuration: this._options.maxReplayDuration,
      sessionIdleExpire: this.timeouts.sessionIdleExpire
    });
    if (expired) {
      return;
    }
    if (breadcrumb) {
      this._createCustomBreadcrumb(breadcrumb);
    }
    void this.conditionalFlush();
  }
  /**
   * Tasks to run when we consider a page to be visible (via focus and/or visibility)
   */
  _doChangeToForegroundTasks(breadcrumb) {
    if (!this.session) {
      return;
    }
    const isSessionActive = this.checkAndHandleExpiredSession();
    if (!isSessionActive) {
      DEBUG_BUILD5 && logger3.info("Document has become active, but session has expired");
      return;
    }
    if (breadcrumb) {
      this._createCustomBreadcrumb(breadcrumb);
    }
  }
  /**
   * Update user activity (across session lifespans)
   */
  _updateUserActivity(_lastActivity = Date.now()) {
    this._lastActivity = _lastActivity;
  }
  /**
   * Updates the session's last activity timestamp
   */
  _updateSessionActivity(_lastActivity = Date.now()) {
    if (this.session) {
      this.session.lastActivity = _lastActivity;
      this._maybeSaveSession();
    }
  }
  /**
   * Helper to create (and buffer) a replay breadcrumb from a core SDK breadcrumb
   */
  _createCustomBreadcrumb(breadcrumb) {
    this.addUpdate(() => {
      this.throttledAddEvent({
        type: EventType.Custom,
        timestamp: breadcrumb.timestamp || 0,
        data: {
          tag: "breadcrumb",
          payload: breadcrumb
        }
      });
    });
  }
  /**
   * Observed performance events are added to `this.performanceEntries`. These
   * are included in the replay event before it is finished and sent to Sentry.
   */
  _addPerformanceEntries() {
    let performanceEntries = createPerformanceEntries(this.performanceEntries).concat(this.replayPerformanceEntries);
    this.performanceEntries = [];
    this.replayPerformanceEntries = [];
    if (this._requiresManualStart) {
      const initialTimestampInSeconds = this._context.initialTimestamp / 1e3;
      performanceEntries = performanceEntries.filter((entry) => entry.start >= initialTimestampInSeconds);
    }
    return Promise.all(createPerformanceSpans(this, performanceEntries));
  }
  /**
   * Clear _context
   */
  _clearContext() {
    this._context.errorIds.clear();
    this._context.traceIds.clear();
    this._context.urls = [];
  }
  /** Update the initial timestamp based on the buffer content. */
  _updateInitialTimestampFromEventBuffer() {
    const {
      session,
      eventBuffer
    } = this;
    if (!session || !eventBuffer || this._requiresManualStart) {
      return;
    }
    if (session.segmentId) {
      return;
    }
    const earliestEvent = eventBuffer.getEarliestTimestamp();
    if (earliestEvent && earliestEvent < this._context.initialTimestamp) {
      this._context.initialTimestamp = earliestEvent;
    }
  }
  /**
   * Return and clear _context
   */
  _popEventContext() {
    const _context = {
      initialTimestamp: this._context.initialTimestamp,
      initialUrl: this._context.initialUrl,
      errorIds: Array.from(this._context.errorIds),
      traceIds: Array.from(this._context.traceIds),
      urls: this._context.urls
    };
    this._clearContext();
    return _context;
  }
  /**
   * Flushes replay event buffer to Sentry.
   *
   * Performance events are only added right before flushing - this is
   * due to the buffered performance observer events.
   *
   * Should never be called directly, only by `flush`
   */
  _runFlush() {
    return __async(this, null, function* () {
      var _a3;
      const replayId = this.getSessionId();
      if (!this.session || !this.eventBuffer || !replayId) {
        DEBUG_BUILD5 && logger3.error("No session or eventBuffer found to flush.");
        return;
      }
      yield this._addPerformanceEntries();
      if (!((_a3 = this.eventBuffer) == null ? void 0 : _a3.hasEvents)) {
        return;
      }
      yield addMemoryEntry(this);
      if (!this.eventBuffer) {
        return;
      }
      if (replayId !== this.getSessionId()) {
        return;
      }
      try {
        this._updateInitialTimestampFromEventBuffer();
        const timestamp = Date.now();
        if (timestamp - this._context.initialTimestamp > this._options.maxReplayDuration + 3e4) {
          throw new Error("Session is too long, not sending replay");
        }
        const eventContext = this._popEventContext();
        const segmentId = this.session.segmentId++;
        this._maybeSaveSession();
        const recordingData = yield this.eventBuffer.finish();
        yield sendReplay({
          replayId,
          recordingData,
          segmentId,
          eventContext,
          session: this.session,
          timestamp,
          onError: (err) => this.handleException(err)
        });
      } catch (err) {
        this.handleException(err);
        this.stop({
          reason: "sendReplay"
        });
        const client = getClient();
        if (client) {
          const dropReason = err instanceof RateLimitError ? "ratelimit_backoff" : "send_error";
          client.recordDroppedEvent(dropReason, "replay");
        }
      }
    });
  }
  /**
   * Flush recording data to Sentry. Creates a lock so that only a single flush
   * can be active at a time. Do not call this directly.
   */
  _flush() {
    return __async(this, arguments, function* ({
      force = false
    } = {}) {
      if (!this._isEnabled && !force) {
        return;
      }
      if (!this.checkAndHandleExpiredSession()) {
        DEBUG_BUILD5 && logger3.error("Attempting to finish replay event after session expired.");
        return;
      }
      if (!this.session) {
        return;
      }
      const start = this.session.started;
      const now = Date.now();
      const duration = now - start;
      this._debouncedFlush.cancel();
      const tooShort = duration < this._options.minReplayDuration;
      const tooLong = duration > this._options.maxReplayDuration + 5e3;
      if (tooShort || tooLong) {
        DEBUG_BUILD5 && logger3.info(`Session duration (${Math.floor(duration / 1e3)}s) is too ${tooShort ? "short" : "long"}, not sending replay.`);
        if (tooShort) {
          this._debouncedFlush();
        }
        return;
      }
      const eventBuffer = this.eventBuffer;
      if (eventBuffer && this.session.segmentId === 0 && !eventBuffer.hasCheckout) {
        DEBUG_BUILD5 && logger3.info("Flushing initial segment without checkout.");
      }
      const _flushInProgress = !!this._flushLock;
      if (!this._flushLock) {
        this._flushLock = this._runFlush();
      }
      try {
        yield this._flushLock;
      } catch (err) {
        this.handleException(err);
      } finally {
        this._flushLock = void 0;
        if (_flushInProgress) {
          this._debouncedFlush();
        }
      }
    });
  }
  /** Save the session, if it is sticky */
  _maybeSaveSession() {
    if (this.session && this._options.stickySession) {
      saveSession(this.session);
    }
  }
  /** Handler for rrweb.record.onMutation */
  _onMutationHandler(mutations) {
    const {
      ignoreMutations
    } = this._options._experiments;
    if (ignoreMutations == null ? void 0 : ignoreMutations.length) {
      if (mutations.some((mutation) => {
        const el = closestElementOfNode(mutation.target);
        const selector = ignoreMutations.join(",");
        return el == null ? void 0 : el.matches(selector);
      })) {
        return false;
      }
    }
    const count = mutations.length;
    const mutationLimit = this._options.mutationLimit;
    const mutationBreadcrumbLimit = this._options.mutationBreadcrumbLimit;
    const overMutationLimit = mutationLimit && count > mutationLimit;
    if (count > mutationBreadcrumbLimit || overMutationLimit) {
      const breadcrumb = createBreadcrumb({
        category: "replay.mutations",
        data: {
          count,
          limit: overMutationLimit
        }
      });
      this._createCustomBreadcrumb(breadcrumb);
    }
    if (overMutationLimit) {
      this.stop({
        reason: "mutationLimit",
        forceFlush: this.recordingMode === "session"
      });
      return false;
    }
    return true;
  }
};
function getOption(selectors, defaultSelectors) {
  return [
    ...selectors,
    // sentry defaults
    ...defaultSelectors
  ].join(",");
}
function getPrivacyOptions({
  mask,
  unmask,
  block,
  unblock,
  ignore
}) {
  const defaultBlockedElements = ["base", "iframe[srcdoc]:not([src])"];
  const maskSelector = getOption(mask, [".sentry-mask", "[data-sentry-mask]"]);
  const unmaskSelector = getOption(unmask, []);
  const options = {
    // We are making the decision to make text and input selectors the same
    maskTextSelector: maskSelector,
    unmaskTextSelector: unmaskSelector,
    blockSelector: getOption(block, [".sentry-block", "[data-sentry-block]", ...defaultBlockedElements]),
    unblockSelector: getOption(unblock, []),
    ignoreSelector: getOption(ignore, [".sentry-ignore", "[data-sentry-ignore]", 'input[type="file"]'])
  };
  return options;
}
function maskAttribute({
  el,
  key,
  maskAttributes,
  maskAllText,
  privacyOptions,
  value
}) {
  if (!maskAllText) {
    return value;
  }
  if (privacyOptions.unmaskTextSelector && el.matches(privacyOptions.unmaskTextSelector)) {
    return value;
  }
  if (maskAttributes.includes(key) || // Need to mask `value` attribute for `<input>` if it's a button-like
  // type
  key === "value" && el.tagName === "INPUT" && ["submit", "button"].includes(el.getAttribute("type") || "")) {
    return value.replace(/[\S]/g, "*");
  }
  return value;
}
var MEDIA_SELECTORS = 'img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]';
var DEFAULT_NETWORK_HEADERS = ["content-length", "content-type", "accept"];
var _initialized = false;
var replayIntegration = (options) => {
  return new Replay(options);
};
var Replay = class {
  /**
   * @inheritDoc
   */
  /**
   * Options to pass to `rrweb.record()`
   */
  /**
   * Initial options passed to the replay integration, merged with default values.
   * Note: `sessionSampleRate` and `errorSampleRate` are not required here, as they
   * can only be finally set when setupOnce() is called.
   *
   * @private
   */
  constructor({
    flushMinDelay = DEFAULT_FLUSH_MIN_DELAY,
    flushMaxDelay = DEFAULT_FLUSH_MAX_DELAY,
    minReplayDuration = MIN_REPLAY_DURATION,
    maxReplayDuration = MAX_REPLAY_DURATION,
    stickySession = true,
    useCompression = true,
    workerUrl,
    _experiments = {},
    maskAllText = true,
    maskAllInputs = true,
    blockAllMedia = true,
    mutationBreadcrumbLimit = 750,
    mutationLimit = 1e4,
    slowClickTimeout = 7e3,
    slowClickIgnoreSelectors = [],
    networkDetailAllowUrls = [],
    networkDetailDenyUrls = [],
    networkCaptureBodies = true,
    networkRequestHeaders = [],
    networkResponseHeaders = [],
    mask = [],
    maskAttributes = ["title", "placeholder", "aria-label"],
    unmask = [],
    block = [],
    unblock = [],
    ignore = [],
    maskFn,
    beforeAddRecordingEvent,
    beforeErrorSampling,
    onError
  } = {}) {
    this.name = "Replay";
    const privacyOptions = getPrivacyOptions({
      mask,
      unmask,
      block,
      unblock,
      ignore
    });
    this._recordingOptions = __spreadProps(__spreadValues({
      maskAllInputs,
      maskAllText,
      maskInputOptions: {
        password: true
      },
      maskTextFn: maskFn,
      maskInputFn: maskFn,
      maskAttributeFn: (key, value, el) => maskAttribute({
        maskAttributes,
        maskAllText,
        privacyOptions,
        key,
        value,
        el
      })
    }, privacyOptions), {
      // Our defaults
      slimDOMOptions: "all",
      inlineStylesheet: true,
      // Disable inline images as it will increase segment/replay size
      inlineImages: false,
      // collect fonts, but be aware that `sentry.io` needs to be an allowed
      // origin for playback
      collectFonts: true,
      errorHandler: (err) => {
        try {
          err.__rrweb__ = true;
        } catch (error2) {
        }
      },
      // experimental support for recording iframes from different origins
      recordCrossOriginIframes: Boolean(_experiments.recordCrossOriginIframes)
    });
    this._initialOptions = {
      flushMinDelay,
      flushMaxDelay,
      minReplayDuration: Math.min(minReplayDuration, MIN_REPLAY_DURATION_LIMIT),
      maxReplayDuration: Math.min(maxReplayDuration, MAX_REPLAY_DURATION),
      stickySession,
      useCompression,
      workerUrl,
      blockAllMedia,
      maskAllInputs,
      maskAllText,
      mutationBreadcrumbLimit,
      mutationLimit,
      slowClickTimeout,
      slowClickIgnoreSelectors,
      networkDetailAllowUrls,
      networkDetailDenyUrls,
      networkCaptureBodies,
      networkRequestHeaders: _getMergedNetworkHeaders(networkRequestHeaders),
      networkResponseHeaders: _getMergedNetworkHeaders(networkResponseHeaders),
      beforeAddRecordingEvent,
      beforeErrorSampling,
      onError,
      _experiments
    };
    if (this._initialOptions.blockAllMedia) {
      this._recordingOptions.blockSelector = !this._recordingOptions.blockSelector ? MEDIA_SELECTORS : `${this._recordingOptions.blockSelector},${MEDIA_SELECTORS}`;
    }
    if (this._isInitialized && isBrowser()) {
      throw new Error("Multiple Sentry Session Replay instances are not supported");
    }
    this._isInitialized = true;
  }
  /** If replay has already been initialized */
  get _isInitialized() {
    return _initialized;
  }
  /** Update _isInitialized */
  set _isInitialized(value) {
    _initialized = value;
  }
  /**
   * Setup and initialize replay container
   */
  afterAllSetup(client) {
    if (!isBrowser() || this._replay) {
      return;
    }
    this._setup(client);
    this._initialize(client);
  }
  /**
   * Start a replay regardless of sampling rate. Calling this will always
   * create a new session. Will log a message if replay is already in progress.
   *
   * Creates or loads a session, attaches listeners to varying events (DOM,
   * PerformanceObserver, Recording, Sentry SDK, etc)
   */
  start() {
    if (!this._replay) {
      return;
    }
    this._replay.start();
  }
  /**
   * Start replay buffering. Buffers until `flush()` is called or, if
   * `replaysOnErrorSampleRate` > 0, until an error occurs.
   */
  startBuffering() {
    if (!this._replay) {
      return;
    }
    this._replay.startBuffering();
  }
  /**
   * Currently, this needs to be manually called (e.g. for tests). Sentry SDK
   * does not support a teardown
   */
  stop() {
    if (!this._replay) {
      return Promise.resolve();
    }
    return this._replay.stop({
      forceFlush: this._replay.recordingMode === "session"
    });
  }
  /**
   * If not in "session" recording mode, flush event buffer which will create a new replay.
   * If replay is not enabled, a new session replay is started.
   * Unless `continueRecording` is false, the replay will continue to record and
   * behave as a "session"-based replay.
   *
   * Otherwise, queue up a flush.
   */
  flush(options) {
    if (!this._replay) {
      return Promise.resolve();
    }
    if (!this._replay.isEnabled()) {
      this._replay.start();
      return Promise.resolve();
    }
    return this._replay.sendBufferedReplayOrFlush(options);
  }
  /**
   * Get the current session ID.
   */
  getReplayId() {
    var _a3;
    if (!((_a3 = this._replay) == null ? void 0 : _a3.isEnabled())) {
      return;
    }
    return this._replay.getSessionId();
  }
  /**
   * Get the current recording mode. This can be either `session` or `buffer`.
   *
   * `session`: Recording the whole session, sending it continuously
   * `buffer`: Always keeping the last 60s of recording, requires:
   *   - having replaysOnErrorSampleRate > 0 to capture replay when an error occurs
   *   - or calling `flush()` to send the replay
   */
  getRecordingMode() {
    var _a3;
    if (!((_a3 = this._replay) == null ? void 0 : _a3.isEnabled())) {
      return;
    }
    return this._replay.recordingMode;
  }
  /**
   * Initializes replay.
   */
  _initialize(client) {
    if (!this._replay) {
      return;
    }
    this._maybeLoadFromReplayCanvasIntegration(client);
    this._replay.initializeSampling();
  }
  /** Setup the integration. */
  _setup(client) {
    const finalOptions = loadReplayOptionsFromClient(this._initialOptions, client);
    this._replay = new ReplayContainer({
      options: finalOptions,
      recordingOptions: this._recordingOptions
    });
  }
  /** Get canvas options from ReplayCanvas integration, if it is also added. */
  _maybeLoadFromReplayCanvasIntegration(client) {
    try {
      const canvasIntegration = client.getIntegrationByName("ReplayCanvas");
      if (!canvasIntegration) {
        return;
      }
      this._replay["_canvas"] = canvasIntegration.getOptions();
    } catch {
    }
  }
};
function loadReplayOptionsFromClient(initialOptions, client) {
  const opt = client.getOptions();
  const finalOptions = __spreadValues({
    sessionSampleRate: 0,
    errorSampleRate: 0
  }, initialOptions);
  const replaysSessionSampleRate = parseSampleRate(opt.replaysSessionSampleRate);
  const replaysOnErrorSampleRate = parseSampleRate(opt.replaysOnErrorSampleRate);
  if (replaysSessionSampleRate == null && replaysOnErrorSampleRate == null) {
    consoleSandbox(() => {
      console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.");
    });
  }
  if (replaysSessionSampleRate != null) {
    finalOptions.sessionSampleRate = replaysSessionSampleRate;
  }
  if (replaysOnErrorSampleRate != null) {
    finalOptions.errorSampleRate = replaysOnErrorSampleRate;
  }
  return finalOptions;
}
function _getMergedNetworkHeaders(headers) {
  return [...DEFAULT_NETWORK_HEADERS, ...headers.map((header) => header.toLowerCase())];
}

// node_modules/@sentry/browser/build/npm/esm/tracing/resource-timing.js
function getAbsoluteTime2(time = 0) {
  return ((browserPerformanceTimeOrigin() || performance.timeOrigin) + time) / 1e3;
}
function resourceTimingToSpanAttributes(resourceTiming) {
  const timingSpanData = [];
  if (resourceTiming.nextHopProtocol != void 0) {
    const {
      name,
      version: version2
    } = extractNetworkProtocol(resourceTiming.nextHopProtocol);
    timingSpanData.push(["network.protocol.version", version2], ["network.protocol.name", name]);
  }
  if (!browserPerformanceTimeOrigin()) {
    return timingSpanData;
  }
  return [...timingSpanData, ["http.request.redirect_start", getAbsoluteTime2(resourceTiming.redirectStart)], ["http.request.fetch_start", getAbsoluteTime2(resourceTiming.fetchStart)], ["http.request.domain_lookup_start", getAbsoluteTime2(resourceTiming.domainLookupStart)], ["http.request.domain_lookup_end", getAbsoluteTime2(resourceTiming.domainLookupEnd)], ["http.request.connect_start", getAbsoluteTime2(resourceTiming.connectStart)], ["http.request.secure_connection_start", getAbsoluteTime2(resourceTiming.secureConnectionStart)], ["http.request.connection_end", getAbsoluteTime2(resourceTiming.connectEnd)], ["http.request.request_start", getAbsoluteTime2(resourceTiming.requestStart)], ["http.request.response_start", getAbsoluteTime2(resourceTiming.responseStart)], ["http.request.response_end", getAbsoluteTime2(resourceTiming.responseEnd)]];
}

// node_modules/@sentry/browser/build/npm/esm/tracing/request.js
var responseToSpanId = /* @__PURE__ */ new WeakMap();
var spanIdToEndTimestamp = /* @__PURE__ */ new Map();
var defaultRequestInstrumentationOptions = {
  traceFetch: true,
  traceXHR: true,
  enableHTTPTimings: true,
  trackFetchStreamPerformance: false
};
function instrumentOutgoingRequests(client, _options) {
  const {
    traceFetch,
    traceXHR,
    trackFetchStreamPerformance,
    shouldCreateSpanForRequest,
    enableHTTPTimings,
    tracePropagationTargets,
    onRequestSpanStart
  } = __spreadValues(__spreadValues({}, defaultRequestInstrumentationOptions), _options);
  const shouldCreateSpan = typeof shouldCreateSpanForRequest === "function" ? shouldCreateSpanForRequest : (_2) => true;
  const shouldAttachHeadersWithTargets = (url) => shouldAttachHeaders(url, tracePropagationTargets);
  const spans = {};
  if (traceFetch) {
    client.addEventProcessor((event) => {
      if (event.type === "transaction" && event.spans) {
        event.spans.forEach((span) => {
          if (span.op === "http.client") {
            const updatedTimestamp = spanIdToEndTimestamp.get(span.span_id);
            if (updatedTimestamp) {
              span.timestamp = updatedTimestamp / 1e3;
              spanIdToEndTimestamp.delete(span.span_id);
            }
          }
        });
      }
      return event;
    });
    if (trackFetchStreamPerformance) {
      addFetchEndInstrumentationHandler((handlerData) => {
        if (handlerData.response) {
          const span = responseToSpanId.get(handlerData.response);
          if (span && handlerData.endTimestamp) {
            spanIdToEndTimestamp.set(span, handlerData.endTimestamp);
          }
        }
      });
    }
    addFetchInstrumentationHandler((handlerData) => {
      const createdSpan = instrumentFetchRequest(handlerData, shouldCreateSpan, shouldAttachHeadersWithTargets, spans);
      if (handlerData.response && handlerData.fetchData.__span) {
        responseToSpanId.set(handlerData.response, handlerData.fetchData.__span);
      }
      if (createdSpan) {
        const fullUrl = getFullURL(handlerData.fetchData.url);
        const host = fullUrl ? parseUrl(fullUrl).host : void 0;
        createdSpan.setAttributes({
          "http.url": fullUrl,
          "server.address": host
        });
        if (enableHTTPTimings) {
          addHTTPTimings(createdSpan);
        }
        onRequestSpanStart == null ? void 0 : onRequestSpanStart(createdSpan, {
          headers: handlerData.headers
        });
      }
    });
  }
  if (traceXHR) {
    addXhrInstrumentationHandler((handlerData) => {
      var _a3;
      const createdSpan = xhrCallback(handlerData, shouldCreateSpan, shouldAttachHeadersWithTargets, spans);
      if (createdSpan) {
        if (enableHTTPTimings) {
          addHTTPTimings(createdSpan);
        }
        let headers;
        try {
          headers = new Headers((_a3 = handlerData.xhr.__sentry_xhr_v3__) == null ? void 0 : _a3.request_headers);
        } catch {
        }
        onRequestSpanStart == null ? void 0 : onRequestSpanStart(createdSpan, {
          headers
        });
      }
    });
  }
}
function isPerformanceResourceTiming(entry) {
  return entry.entryType === "resource" && "initiatorType" in entry && typeof entry.nextHopProtocol === "string" && (entry.initiatorType === "fetch" || entry.initiatorType === "xmlhttprequest");
}
function addHTTPTimings(span) {
  const {
    url
  } = spanToJSON(span).data;
  if (!url || typeof url !== "string") {
    return;
  }
  const cleanup = addPerformanceInstrumentationHandler("resource", ({
    entries
  }) => {
    entries.forEach((entry) => {
      if (isPerformanceResourceTiming(entry) && entry.name.endsWith(url)) {
        const spanAttributes = resourceTimingToSpanAttributes(entry);
        spanAttributes.forEach((attributeArray) => span.setAttribute(...attributeArray));
        setTimeout(cleanup);
      }
    });
  });
}
function shouldAttachHeaders(targetUrl, tracePropagationTargets) {
  const href = getLocationHref();
  if (!href) {
    const isRelativeSameOriginRequest = !!targetUrl.match(/^\/(?!\/)/);
    if (!tracePropagationTargets) {
      return isRelativeSameOriginRequest;
    } else {
      return stringMatchesSomePattern(targetUrl, tracePropagationTargets);
    }
  } else {
    let resolvedUrl;
    let currentOrigin;
    try {
      resolvedUrl = new URL(targetUrl, href);
      currentOrigin = new URL(href).origin;
    } catch (e3) {
      return false;
    }
    const isSameOriginRequest = resolvedUrl.origin === currentOrigin;
    if (!tracePropagationTargets) {
      return isSameOriginRequest;
    } else {
      return stringMatchesSomePattern(resolvedUrl.toString(), tracePropagationTargets) || isSameOriginRequest && stringMatchesSomePattern(resolvedUrl.pathname, tracePropagationTargets);
    }
  }
}
function xhrCallback(handlerData, shouldCreateSpan, shouldAttachHeaders2, spans) {
  const xhr = handlerData.xhr;
  const sentryXhrData = xhr == null ? void 0 : xhr[SENTRY_XHR_DATA_KEY];
  if (!xhr || xhr.__sentry_own_request__ || !sentryXhrData) {
    return void 0;
  }
  const {
    url,
    method
  } = sentryXhrData;
  const shouldCreateSpanResult = hasSpansEnabled() && shouldCreateSpan(url);
  if (handlerData.endTimestamp && shouldCreateSpanResult) {
    const spanId = xhr.__sentry_xhr_span_id__;
    if (!spanId) return;
    const span2 = spans[spanId];
    if (span2 && sentryXhrData.status_code !== void 0) {
      setHttpStatus(span2, sentryXhrData.status_code);
      span2.end();
      delete spans[spanId];
    }
    return void 0;
  }
  const fullUrl = getFullURL(url);
  const parsedUrl = fullUrl ? parseUrl(fullUrl) : parseUrl(url);
  const urlForSpanName = stripUrlQueryAndFragment(url);
  const hasParent = !!getActiveSpan();
  const span = shouldCreateSpanResult && hasParent ? startInactiveSpan({
    name: `${method} ${urlForSpanName}`,
    attributes: __spreadValues(__spreadValues({
      url,
      type: "xhr",
      "http.method": method,
      "http.url": fullUrl,
      "server.address": parsedUrl == null ? void 0 : parsedUrl.host,
      [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.http.browser",
      [SEMANTIC_ATTRIBUTE_SENTRY_OP]: "http.client"
    }, (parsedUrl == null ? void 0 : parsedUrl.search) && {
      "http.query": parsedUrl == null ? void 0 : parsedUrl.search
    }), (parsedUrl == null ? void 0 : parsedUrl.hash) && {
      "http.fragment": parsedUrl == null ? void 0 : parsedUrl.hash
    })
  }) : new SentryNonRecordingSpan();
  xhr.__sentry_xhr_span_id__ = span.spanContext().spanId;
  spans[xhr.__sentry_xhr_span_id__] = span;
  if (shouldAttachHeaders2(url)) {
    addTracingHeadersToXhrRequest(
      xhr,
      // If performance is disabled (TWP) or there's no active root span (pageload/navigation/interaction),
      // we do not want to use the span as base for the trace headers,
      // which means that the headers will be generated from the scope and the sampling decision is deferred
      hasSpansEnabled() && hasParent ? span : void 0
    );
  }
  const client = getClient();
  if (client) {
    client.emit("beforeOutgoingRequestSpan", span, handlerData);
  }
  return span;
}
function addTracingHeadersToXhrRequest(xhr, span) {
  const {
    "sentry-trace": sentryTrace,
    baggage
  } = getTraceData({
    span
  });
  if (sentryTrace) {
    setHeaderOnXhr(xhr, sentryTrace, baggage);
  }
}
function setHeaderOnXhr(xhr, sentryTraceHeader, sentryBaggageHeader) {
  var _a3;
  const originalHeaders = (_a3 = xhr.__sentry_xhr_v3__) == null ? void 0 : _a3.request_headers;
  if (originalHeaders == null ? void 0 : originalHeaders["sentry-trace"]) {
    return;
  }
  try {
    xhr.setRequestHeader("sentry-trace", sentryTraceHeader);
    if (sentryBaggageHeader) {
      const originalBaggageHeader = originalHeaders == null ? void 0 : originalHeaders["baggage"];
      if (!originalBaggageHeader || !baggageHeaderHasSentryValues(originalBaggageHeader)) {
        xhr.setRequestHeader("baggage", sentryBaggageHeader);
      }
    }
  } catch (_2) {
  }
}
function baggageHeaderHasSentryValues(baggageHeader) {
  return baggageHeader.split(",").some((value) => value.trim().startsWith("sentry-"));
}
function getFullURL(url) {
  try {
    const parsed = new URL(url, WINDOW4.location.origin);
    return parsed.href;
  } catch {
    return void 0;
  }
}

// node_modules/@sentry/browser/build/npm/esm/tracing/backgroundtab.js
function registerBackgroundTabDetection() {
  if (WINDOW4.document) {
    WINDOW4.document.addEventListener("visibilitychange", () => {
      const activeSpan = getActiveSpan();
      if (!activeSpan) {
        return;
      }
      const rootSpan = getRootSpan(activeSpan);
      if (WINDOW4.document.hidden && rootSpan) {
        const cancelledStatus = "cancelled";
        const {
          op,
          status
        } = spanToJSON(rootSpan);
        if (DEBUG_BUILD4) {
          logger2.log(`[Tracing] Transaction: ${cancelledStatus} -> since tab moved to the background, op: ${op}`);
        }
        if (!status) {
          rootSpan.setStatus({
            code: SPAN_STATUS_ERROR,
            message: cancelledStatus
          });
        }
        rootSpan.setAttribute("sentry.cancellation_reason", "document.hidden");
        rootSpan.end();
      }
    });
  } else {
    DEBUG_BUILD4 && logger2.warn("[Tracing] Could not set up background tab detection due to lack of global document");
  }
}

// node_modules/@sentry/browser/build/npm/esm/tracing/linkedTraces.js
var PREVIOUS_TRACE_MAX_DURATION = 3600;
var PREVIOUS_TRACE_KEY = "sentry_previous_trace";
var PREVIOUS_TRACE_TMP_SPAN_ATTRIBUTE = "sentry.previous_trace";
function linkTraces(client, {
  linkPreviousTrace,
  consistentTraceSampling
}) {
  const useSessionStorage = linkPreviousTrace === "session-storage";
  let inMemoryPreviousTraceInfo = useSessionStorage ? getPreviousTraceFromSessionStorage() : void 0;
  client.on("spanStart", (span) => {
    if (getRootSpan(span) !== span) {
      return;
    }
    const oldPropagationContext = getCurrentScope().getPropagationContext();
    inMemoryPreviousTraceInfo = addPreviousTraceSpanLink(inMemoryPreviousTraceInfo, span, oldPropagationContext);
    if (useSessionStorage) {
      storePreviousTraceInSessionStorage(inMemoryPreviousTraceInfo);
    }
  });
  let isFirstTraceOnPageload = true;
  if (consistentTraceSampling) {
    client.on("beforeSampling", (mutableSamplingContextData) => {
      if (!inMemoryPreviousTraceInfo) {
        return;
      }
      const scope = getCurrentScope();
      const currentPropagationContext = scope.getPropagationContext();
      if (isFirstTraceOnPageload && currentPropagationContext.parentSpanId) {
        isFirstTraceOnPageload = false;
        return;
      }
      scope.setPropagationContext(__spreadProps(__spreadValues({}, currentPropagationContext), {
        dsc: __spreadProps(__spreadValues({}, currentPropagationContext.dsc), {
          sample_rate: String(inMemoryPreviousTraceInfo.sampleRate),
          sampled: String(spanContextSampled(inMemoryPreviousTraceInfo.spanContext))
        }),
        sampleRand: inMemoryPreviousTraceInfo.sampleRand
      }));
      mutableSamplingContextData.parentSampled = spanContextSampled(inMemoryPreviousTraceInfo.spanContext);
      mutableSamplingContextData.parentSampleRate = inMemoryPreviousTraceInfo.sampleRate;
      mutableSamplingContextData.spanAttributes = __spreadProps(__spreadValues({}, mutableSamplingContextData.spanAttributes), {
        [SEMANTIC_ATTRIBUTE_SENTRY_PREVIOUS_TRACE_SAMPLE_RATE]: inMemoryPreviousTraceInfo.sampleRate
      });
    });
  }
}
function addPreviousTraceSpanLink(previousTraceInfo, span, oldPropagationContext) {
  const spanJson = spanToJSON(span);
  function getSampleRate() {
    var _a3, _b, _c;
    try {
      return (_c = Number((_a3 = oldPropagationContext.dsc) == null ? void 0 : _a3.sample_rate)) != null ? _c : Number((_b = spanJson.data) == null ? void 0 : _b[SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE]);
    } catch {
      return 0;
    }
  }
  const updatedPreviousTraceInfo = {
    spanContext: span.spanContext(),
    startTimestamp: spanJson.start_timestamp,
    sampleRate: getSampleRate(),
    sampleRand: oldPropagationContext.sampleRand
  };
  if (!previousTraceInfo) {
    return updatedPreviousTraceInfo;
  }
  const previousTraceSpanCtx = previousTraceInfo.spanContext;
  if (previousTraceSpanCtx.traceId === spanJson.trace_id) {
    return previousTraceInfo;
  }
  if (Date.now() / 1e3 - previousTraceInfo.startTimestamp <= PREVIOUS_TRACE_MAX_DURATION) {
    if (DEBUG_BUILD4) {
      logger2.info(`Adding previous_trace ${previousTraceSpanCtx} link to span ${__spreadValues({
        op: spanJson.op
      }, span.spanContext())}`);
    }
    span.addLink({
      context: previousTraceSpanCtx,
      attributes: {
        [SEMANTIC_LINK_ATTRIBUTE_LINK_TYPE]: "previous_trace"
      }
    });
    span.setAttribute(PREVIOUS_TRACE_TMP_SPAN_ATTRIBUTE, `${previousTraceSpanCtx.traceId}-${previousTraceSpanCtx.spanId}-${spanContextSampled(previousTraceSpanCtx) ? 1 : 0}`);
  }
  return updatedPreviousTraceInfo;
}
function storePreviousTraceInSessionStorage(previousTraceInfo) {
  try {
    WINDOW4.sessionStorage.setItem(PREVIOUS_TRACE_KEY, JSON.stringify(previousTraceInfo));
  } catch (e3) {
    DEBUG_BUILD4 && logger2.warn("Could not store previous trace in sessionStorage", e3);
  }
}
function getPreviousTraceFromSessionStorage() {
  var _a3;
  try {
    const previousTraceInfo = (_a3 = WINDOW4.sessionStorage) == null ? void 0 : _a3.getItem(PREVIOUS_TRACE_KEY);
    return JSON.parse(previousTraceInfo);
  } catch (e3) {
    return void 0;
  }
}
function spanContextSampled(ctx) {
  return ctx.traceFlags === 1;
}

// node_modules/@sentry/browser/build/npm/esm/tracing/browserTracingIntegration.js
var BROWSER_TRACING_INTEGRATION_ID = "BrowserTracing";
var DEFAULT_BROWSER_TRACING_OPTIONS = __spreadValues(__spreadProps(__spreadValues({}, TRACING_DEFAULTS), {
  instrumentNavigation: true,
  instrumentPageLoad: true,
  markBackgroundSpan: true,
  enableLongTask: true,
  enableLongAnimationFrame: true,
  enableInp: true,
  enableElementTiming: true,
  ignoreResourceSpans: [],
  ignorePerformanceApiSpans: [],
  detectRedirects: true,
  linkPreviousTrace: "in-memory",
  consistentTraceSampling: false,
  _experiments: {}
}), defaultRequestInstrumentationOptions);
var browserTracingIntegration = (_options = {}) => {
  const latestRoute = {
    name: void 0,
    source: void 0
  };
  const optionalWindowDocument = WINDOW4.document;
  const {
    enableInp,
    enableElementTiming,
    enableLongTask,
    enableLongAnimationFrame,
    _experiments: {
      enableInteractions,
      enableStandaloneClsSpans,
      enableStandaloneLcpSpans
    },
    beforeStartSpan,
    idleTimeout,
    finalTimeout,
    childSpanTimeout,
    markBackgroundSpan,
    traceFetch,
    traceXHR,
    trackFetchStreamPerformance,
    shouldCreateSpanForRequest,
    enableHTTPTimings,
    ignoreResourceSpans,
    ignorePerformanceApiSpans,
    instrumentPageLoad,
    instrumentNavigation,
    detectRedirects,
    linkPreviousTrace,
    consistentTraceSampling,
    onRequestSpanStart
  } = __spreadValues(__spreadValues({}, DEFAULT_BROWSER_TRACING_OPTIONS), _options);
  let _collectWebVitals;
  let lastInteractionTimestamp;
  function _createRouteSpan(client, startSpanOptions, makeActive = true) {
    const isPageloadTransaction = startSpanOptions.op === "pageload";
    const finalStartSpanOptions = beforeStartSpan ? beforeStartSpan(startSpanOptions) : startSpanOptions;
    const attributes = finalStartSpanOptions.attributes || {};
    if (startSpanOptions.name !== finalStartSpanOptions.name) {
      attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE] = "custom";
      finalStartSpanOptions.attributes = attributes;
    }
    if (!makeActive) {
      const now = dateTimestampInSeconds();
      startInactiveSpan(__spreadProps(__spreadValues({}, finalStartSpanOptions), {
        startTime: now
      })).end(now);
      return;
    }
    latestRoute.name = finalStartSpanOptions.name;
    latestRoute.source = attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];
    const idleSpan = startIdleSpan(finalStartSpanOptions, {
      idleTimeout,
      finalTimeout,
      childSpanTimeout,
      // should wait for finish signal if it's a pageload transaction
      disableAutoFinish: isPageloadTransaction,
      beforeSpanEnd: (span) => {
        _collectWebVitals == null ? void 0 : _collectWebVitals();
        addPerformanceEntries(span, {
          recordClsOnPageloadSpan: !enableStandaloneClsSpans,
          recordLcpOnPageloadSpan: !enableStandaloneLcpSpans,
          ignoreResourceSpans,
          ignorePerformanceApiSpans
        });
        setActiveIdleSpan(client, void 0);
        const scope = getCurrentScope();
        const oldPropagationContext = scope.getPropagationContext();
        scope.setPropagationContext(__spreadProps(__spreadValues({}, oldPropagationContext), {
          traceId: idleSpan.spanContext().traceId,
          sampled: spanIsSampled(idleSpan),
          dsc: getDynamicSamplingContextFromSpan(span)
        }));
      }
    });
    setActiveIdleSpan(client, idleSpan);
    function emitFinish() {
      if (optionalWindowDocument && ["interactive", "complete"].includes(optionalWindowDocument.readyState)) {
        client.emit("idleSpanEnableAutoFinish", idleSpan);
      }
    }
    if (isPageloadTransaction && optionalWindowDocument) {
      optionalWindowDocument.addEventListener("readystatechange", () => {
        emitFinish();
      });
      emitFinish();
    }
  }
  return {
    name: BROWSER_TRACING_INTEGRATION_ID,
    setup(client) {
      registerSpanErrorInstrumentation();
      _collectWebVitals = startTrackingWebVitals({
        recordClsStandaloneSpans: enableStandaloneClsSpans || false,
        recordLcpStandaloneSpans: enableStandaloneLcpSpans || false
      });
      if (enableInp) {
        startTrackingINP();
      }
      if (enableElementTiming) {
        startTrackingElementTiming();
      }
      if (enableLongAnimationFrame && GLOBAL_OBJ.PerformanceObserver && PerformanceObserver.supportedEntryTypes && PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")) {
        startTrackingLongAnimationFrames();
      } else if (enableLongTask) {
        startTrackingLongTasks();
      }
      if (enableInteractions) {
        startTrackingInteractions();
      }
      if (detectRedirects && optionalWindowDocument) {
        const interactionHandler = () => {
          lastInteractionTimestamp = timestampInSeconds();
        };
        addEventListener("click", interactionHandler, {
          capture: true
        });
        addEventListener("keydown", interactionHandler, {
          capture: true,
          passive: true
        });
      }
      function maybeEndActiveSpan() {
        const activeSpan = getActiveIdleSpan(client);
        if (activeSpan && !spanToJSON(activeSpan).timestamp) {
          DEBUG_BUILD4 && logger2.log(`[Tracing] Finishing current active span with op: ${spanToJSON(activeSpan).op}`);
          activeSpan.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON, "cancelled");
          activeSpan.end();
        }
      }
      client.on("startNavigationSpan", (startSpanOptions, navigationOptions) => {
        if (getClient() !== client) {
          return;
        }
        if (navigationOptions == null ? void 0 : navigationOptions.isRedirect) {
          DEBUG_BUILD4 && logger2.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span.");
          _createRouteSpan(client, __spreadValues({
            op: "navigation.redirect"
          }, startSpanOptions), false);
          return;
        }
        maybeEndActiveSpan();
        getIsolationScope().setPropagationContext({
          traceId: generateTraceId(),
          sampleRand: Math.random()
        });
        const scope = getCurrentScope();
        scope.setPropagationContext({
          traceId: generateTraceId(),
          sampleRand: Math.random()
        });
        scope.setSDKProcessingMetadata({
          normalizedRequest: void 0
        });
        _createRouteSpan(client, __spreadValues({
          op: "navigation"
        }, startSpanOptions));
      });
      client.on("startPageLoadSpan", (startSpanOptions, traceOptions = {}) => {
        if (getClient() !== client) {
          return;
        }
        maybeEndActiveSpan();
        const sentryTrace = traceOptions.sentryTrace || getMetaContent("sentry-trace");
        const baggage = traceOptions.baggage || getMetaContent("baggage");
        const propagationContext = propagationContextFromHeaders(sentryTrace, baggage);
        const scope = getCurrentScope();
        scope.setPropagationContext(propagationContext);
        scope.setSDKProcessingMetadata({
          normalizedRequest: getHttpRequestData()
        });
        _createRouteSpan(client, __spreadValues({
          op: "pageload"
        }, startSpanOptions));
      });
    },
    afterAllSetup(client) {
      let startingUrl = getLocationHref();
      if (linkPreviousTrace !== "off") {
        linkTraces(client, {
          linkPreviousTrace,
          consistentTraceSampling
        });
      }
      if (WINDOW4.location) {
        if (instrumentPageLoad) {
          const origin = browserPerformanceTimeOrigin();
          startBrowserTracingPageLoadSpan(client, {
            name: WINDOW4.location.pathname,
            // pageload should always start at timeOrigin (and needs to be in s, not ms)
            startTime: origin ? origin / 1e3 : void 0,
            attributes: {
              [SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: "url",
              [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.pageload.browser"
            }
          });
        }
        if (instrumentNavigation) {
          addHistoryInstrumentationHandler(({
            to,
            from
          }) => {
            if (from === void 0 && (startingUrl == null ? void 0 : startingUrl.indexOf(to)) !== -1) {
              startingUrl = void 0;
              return;
            }
            startingUrl = void 0;
            const parsed = parseStringToURLObject(to);
            const activeSpan = getActiveIdleSpan(client);
            const navigationIsRedirect = activeSpan && detectRedirects && isRedirect(activeSpan, lastInteractionTimestamp);
            startBrowserTracingNavigationSpan(client, {
              name: (parsed == null ? void 0 : parsed.pathname) || WINDOW4.location.pathname,
              attributes: {
                [SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: "url",
                [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.navigation.browser"
              }
            }, {
              url: to,
              isRedirect: navigationIsRedirect
            });
          });
        }
      }
      if (markBackgroundSpan) {
        registerBackgroundTabDetection();
      }
      if (enableInteractions) {
        registerInteractionListener(client, idleTimeout, finalTimeout, childSpanTimeout, latestRoute);
      }
      if (enableInp) {
        registerInpInteractionListener();
      }
      instrumentOutgoingRequests(client, {
        traceFetch,
        traceXHR,
        trackFetchStreamPerformance,
        tracePropagationTargets: client.getOptions().tracePropagationTargets,
        shouldCreateSpanForRequest,
        enableHTTPTimings,
        onRequestSpanStart
      });
    }
  };
};
function startBrowserTracingPageLoadSpan(client, spanOptions, traceOptions) {
  client.emit("startPageLoadSpan", spanOptions, traceOptions);
  getCurrentScope().setTransactionName(spanOptions.name);
  return getActiveIdleSpan(client);
}
function startBrowserTracingNavigationSpan(client, spanOptions, options) {
  const {
    url,
    isRedirect: isRedirect2
  } = options || {};
  client.emit("beforeStartNavigationSpan", spanOptions, {
    isRedirect: isRedirect2
  });
  client.emit("startNavigationSpan", spanOptions, {
    isRedirect: isRedirect2
  });
  const scope = getCurrentScope();
  scope.setTransactionName(spanOptions.name);
  if (url && !isRedirect2) {
    scope.setSDKProcessingMetadata({
      normalizedRequest: __spreadProps(__spreadValues({}, getHttpRequestData()), {
        url
      })
    });
  }
  return getActiveIdleSpan(client);
}
function getMetaContent(metaName) {
  const optionalWindowDocument = WINDOW4.document;
  const metaTag = optionalWindowDocument == null ? void 0 : optionalWindowDocument.querySelector(`meta[name=${metaName}]`);
  return (metaTag == null ? void 0 : metaTag.getAttribute("content")) || void 0;
}
function registerInteractionListener(client, idleTimeout, finalTimeout, childSpanTimeout, latestRoute) {
  const optionalWindowDocument = WINDOW4.document;
  let inflightInteractionSpan;
  const registerInteractionTransaction = () => {
    const op = "ui.action.click";
    const activeIdleSpan = getActiveIdleSpan(client);
    if (activeIdleSpan) {
      const currentRootSpanOp = spanToJSON(activeIdleSpan).op;
      if (["navigation", "pageload"].includes(currentRootSpanOp)) {
        DEBUG_BUILD4 && logger2.warn(`[Tracing] Did not create ${op} span because a pageload or navigation span is in progress.`);
        return void 0;
      }
    }
    if (inflightInteractionSpan) {
      inflightInteractionSpan.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON, "interactionInterrupted");
      inflightInteractionSpan.end();
      inflightInteractionSpan = void 0;
    }
    if (!latestRoute.name) {
      DEBUG_BUILD4 && logger2.warn(`[Tracing] Did not create ${op} transaction because _latestRouteName is missing.`);
      return void 0;
    }
    inflightInteractionSpan = startIdleSpan({
      name: latestRoute.name,
      op,
      attributes: {
        [SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: latestRoute.source || "url"
      }
    }, {
      idleTimeout,
      finalTimeout,
      childSpanTimeout
    });
  };
  if (optionalWindowDocument) {
    addEventListener("click", registerInteractionTransaction, {
      capture: true
    });
  }
}
var ACTIVE_IDLE_SPAN_PROPERTY = "_sentry_idleSpan";
function getActiveIdleSpan(client) {
  return client[ACTIVE_IDLE_SPAN_PROPERTY];
}
function setActiveIdleSpan(client, span) {
  addNonEnumerableProperty(client, ACTIVE_IDLE_SPAN_PROPERTY, span);
}
var REDIRECT_THRESHOLD = 0.3;
function isRedirect(activeSpan, lastInteractionTimestamp) {
  const spanData = spanToJSON(activeSpan);
  const now = dateTimestampInSeconds();
  const startTimestamp = spanData.start_timestamp;
  if (now - startTimestamp > REDIRECT_THRESHOLD) {
    return false;
  }
  if (lastInteractionTimestamp && now - lastInteractionTimestamp <= REDIRECT_THRESHOLD) {
    return false;
  }
  return true;
}

// node_modules/@sentry/angular/fesm2020/sentry-angular.mjs
var IS_DEBUG_BUILD = typeof __SENTRY_DEBUG__ === "undefined" ? true : __SENTRY_DEBUG__;
function getDefaultIntegrations2(_options = {}) {
  return [
    // TODO(v10): Replace with `eventFiltersIntegration` once we remove the deprecated `inboundFiltersIntegration`
    // eslint-disable-next-line deprecation/deprecation
    inboundFiltersIntegration(),
    functionToStringIntegration(),
    breadcrumbsIntegration(),
    globalHandlersIntegration(),
    linkedErrorsIntegration(),
    dedupeIntegration(),
    httpContextIntegration(),
    browserSessionIntegration()
  ];
}
function init2(options) {
  const opts = __spreadValues({
    defaultIntegrations: getDefaultIntegrations2()
  }, options);
  applySdkMetadata(opts, "angular");
  checkAndSetAngularVersion();
  return init(opts);
}
function checkAndSetAngularVersion() {
  var _a3;
  const ANGULAR_MINIMUM_VERSION = 14;
  const angularVersion = ((_a3 = VERSION) == null ? void 0 : _a3.major) && parseInt(VERSION.major, 10);
  if (angularVersion) {
    if (angularVersion < ANGULAR_MINIMUM_VERSION) {
      IS_DEBUG_BUILD && logger2.warn(`This Sentry SDK does not officially support Angular ${angularVersion}.`, `This SDK only supports Angular ${ANGULAR_MINIMUM_VERSION} and above.`, "If you're using lower Angular versions, check the Angular Version Compatibility table in our docs: https://docs.sentry.io/platforms/javascript/guides/angular/#angular-version-compatibility.", "Otherwise, please consider upgrading your Angular version.");
    }
    setContext("angular", {
      version: angularVersion
    });
  }
}
var _a2;
var isNgZoneEnabled = typeof Zone !== "undefined" && ((_a2 = Zone.root) == null ? void 0 : _a2.run);
function runOutsideAngular(callback) {
  return isNgZoneEnabled ? Zone.root.run(callback) : callback();
}
function tryToUnwrapZonejsError(error2) {
  return error2 && error2.ngOriginalError ? error2.ngOriginalError : error2;
}
function extractHttpModuleError(error2) {
  if (isErrorOrErrorLikeObject(error2.error)) {
    return error2.error;
  }
  if (typeof ErrorEvent !== "undefined" && error2.error instanceof ErrorEvent && error2.error.message) {
    return error2.error.message;
  }
  if (typeof error2.error === "string") {
    return `Server returned code ${error2.status} with body "${error2.error}"`;
  }
  return error2.message;
}
function isErrorOrErrorLikeObject(value) {
  if (value instanceof Error) {
    return true;
  }
  if (value === null || typeof value !== "object") {
    return false;
  }
  const candidate = value;
  return isString(candidate.name) && isString(candidate.message) && (void 0 === candidate.stack || isString(candidate.stack));
}
var SentryErrorHandler = class {
  constructor(options) {
    this._options = __spreadValues({
      logErrors: true
    }, options);
  }
  /**
   * Method executed when the injector is destroyed.
   */
  ngOnDestroy() {
    if (this._removeAfterSendEventListener) {
      this._removeAfterSendEventListener();
    }
  }
  /**
   * Method called for every value captured through the ErrorHandler
   */
  handleError(error2) {
    const extractedError = this._extractError(error2) || "Handled unknown error";
    const eventId = runOutsideAngular(() => captureException(extractedError, {
      mechanism: {
        type: "angular",
        handled: false
      }
    }));
    if (this._options.logErrors) {
      consoleSandbox(() => console.error(extractedError));
    }
    if (this._options.showDialog) {
      const client = getClient();
      if (client && !this._removeAfterSendEventListener) {
        this._removeAfterSendEventListener = client.on("afterSendEvent", (event) => {
          if (!event.type && event.event_id) {
            runOutsideAngular(() => {
              showReportDialog(__spreadProps(__spreadValues({}, this._options.dialogOptions), {
                eventId: event.event_id
              }));
            });
          }
        });
      } else if (!client) {
        runOutsideAngular(() => {
          showReportDialog(__spreadProps(__spreadValues({}, this._options.dialogOptions), {
            eventId
          }));
        });
      }
    }
  }
  /**
   * Used to pull a desired value that will be used to capture an event out of the raw value captured by ErrorHandler.
   */
  _extractError(error2) {
    if (this._options.extractor) {
      const defaultExtractor = this._defaultExtractor.bind(this);
      return this._options.extractor(error2, defaultExtractor);
    }
    return this._defaultExtractor(error2);
  }
  /**
   * Default implementation of error extraction that handles default error wrapping, HTTP responses, ErrorEvent and few other known cases.
   */
  _defaultExtractor(errorCandidate) {
    const error2 = tryToUnwrapZonejsError(errorCandidate);
    if (error2 instanceof HttpErrorResponse) {
      return extractHttpModuleError(error2);
    }
    if (typeof error2 === "string" || isErrorOrErrorLikeObject(error2)) {
      return error2;
    }
    return null;
  }
};
SentryErrorHandler.\u0275fac = function SentryErrorHandler_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || SentryErrorHandler)(\u0275\u0275inject("errorHandlerOptions"));
};
SentryErrorHandler.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({
  token: SentryErrorHandler,
  factory: SentryErrorHandler.\u0275fac,
  providedIn: "root"
});
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(SentryErrorHandler, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], function() {
    return [{
      type: void 0,
      decorators: [{
        type: Inject,
        args: ["errorHandlerOptions"]
      }]
    }];
  }, null);
})();
function createErrorHandler(config) {
  return new SentryErrorHandler(config);
}
var ANGULAR_ROUTING_OP = "ui.angular.routing";
var ANGULAR_INIT_OP = "ui.angular.init";
var instrumentationInitialized;
function browserTracingIntegration2(options = {}) {
  if (options.instrumentNavigation !== false) {
    instrumentationInitialized = true;
  }
  return browserTracingIntegration(__spreadProps(__spreadValues({}, options), {
    instrumentNavigation: false
  }));
}
function _updateSpanAttributesForParametrizedUrl(route, span) {
  const attributes = span && spanToJSON(span).data || {};
  if (span && attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE] === "url") {
    span.updateName(route);
    span.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SOURCE, "route");
    span.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN, `auto.${spanToJSON(span).op}.angular`);
  }
}
var TraceService = class {
  constructor(_router) {
    this._router = _router;
    this.navStart$ = this._router.events.pipe(filter((event) => event instanceof NavigationStart), tap((navigationEvent) => {
      if (!instrumentationInitialized) {
        IS_DEBUG_BUILD && logger2.error("Angular integration has tracing enabled, but Tracing integration is not configured");
        return;
      }
      if (this._routingSpan) {
        this._routingSpan.end();
        this._routingSpan = null;
      }
      const client = getClient();
      const strippedUrl = stripUrlQueryAndFragment(navigationEvent.url);
      if (client) {
        if (!this._isPageloadOngoing()) {
          runOutsideAngular(() => {
            startBrowserTracingNavigationSpan(client, {
              name: strippedUrl,
              attributes: {
                [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.navigation.angular",
                [SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: "url"
              }
            });
          });
        } else {
          this._pageloadOngoing = false;
        }
        this._routingSpan = runOutsideAngular(() => startInactiveSpan({
          name: `${navigationEvent.url}`,
          op: ANGULAR_ROUTING_OP,
          attributes: __spreadValues({
            [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.angular",
            [SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: "url",
            url: strippedUrl
          }, navigationEvent.navigationTrigger && {
            navigationTrigger: navigationEvent.navigationTrigger
          })
        })) || null;
        return;
      }
    }));
    this.resEnd$ = this._router.events.pipe(filter((event) => event instanceof ResolveEnd), tap((event) => {
      const route = getParameterizedRouteFromSnapshot(event.state.root);
      if (route) {
        getCurrentScope().setTransactionName(route);
      }
      const activeSpan = getActiveSpan();
      const rootSpan = activeSpan && getRootSpan(activeSpan);
      _updateSpanAttributesForParametrizedUrl(route, rootSpan);
    }));
    this.navEnd$ = this._router.events.pipe(filter((event) => event instanceof NavigationEnd || event instanceof NavigationCancel || event instanceof NavigationError), tap(() => {
      if (this._routingSpan) {
        runOutsideAngular(() => {
          this._routingSpan.end();
        });
        this._routingSpan = null;
      }
    }));
    this._routingSpan = null;
    this._pageloadOngoing = true;
    this._subscription = new Subscription();
    this._subscription.add(this.navStart$.subscribe());
    this._subscription.add(this.resEnd$.subscribe());
    this._subscription.add(this.navEnd$.subscribe());
  }
  /**
   * This is used to prevent memory leaks when the root view is created and destroyed multiple times,
   * since `subscribe` callbacks capture `this` and prevent many resources from being GC'd.
   */
  ngOnDestroy() {
    this._subscription.unsubscribe();
  }
  /**
   * We only _avoid_ creating a navigation root span in one case:
   *
   * There is an ongoing pageload span AND the router didn't yet emit the first navigation start event
   *
   * The first navigation start event will create the child routing span
   * and update the pageload root span name on ResolveEnd.
   *
   * There's an edge case we need to avoid here: If the router fires the first navigation start event
   * _after_ the pageload root span finished. This is why we check for the pageload root span.
   * Possible real-world scenario: Angular application and/or router is bootstrapped after the pageload
   * idle root span finished
   *
   * The overall rationale is:
   * - if we already avoided creating a navigation root span once, we don't avoid it again
   *   (i.e. set `_pageloadOngoing` to `false`)
   * - if `_pageloadOngoing` is already `false`, create a navigation root span
   * - if there's no active/pageload root span, create a navigation root span
   * - only if there's an ongoing pageload root span AND `_pageloadOngoing` is still `true,
   *   don't create a navigation root span
   */
  _isPageloadOngoing() {
    if (!this._pageloadOngoing) {
      return false;
    }
    const activeSpan = getActiveSpan();
    if (!activeSpan) {
      this._pageloadOngoing = false;
      return false;
    }
    const rootSpan = getRootSpan(activeSpan);
    this._pageloadOngoing = spanToJSON(rootSpan).op === "pageload";
    return this._pageloadOngoing;
  }
};
TraceService.\u0275fac = function TraceService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || TraceService)(\u0275\u0275inject(Router));
};
TraceService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({
  token: TraceService,
  factory: TraceService.\u0275fac,
  providedIn: "root"
});
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(TraceService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], function() {
    return [{
      type: Router
    }];
  }, null);
})();
var TraceDirective = class {
  constructor(_host) {
    this._host = _host;
  }
  /**
   * Implementation of OnInit lifecycle method
   * @inheritdoc
   */
  ngOnInit() {
    if (!this.componentName) {
      this.componentName = this._host.nativeElement.tagName.toLowerCase();
    }
    if (getActiveSpan()) {
      this._tracingSpan = runOutsideAngular(() => startInactiveSpan({
        name: `<${this.componentName}>`,
        op: ANGULAR_INIT_OP,
        attributes: {
          [SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: "auto.ui.angular.trace_directive"
        }
      }));
    }
  }
  /**
   * Implementation of AfterViewInit lifecycle method
   * @inheritdoc
   */
  ngAfterViewInit() {
    const span = this._tracingSpan;
    if (span) {
      runOutsideAngular(() => span.end());
    }
  }
};
TraceDirective.\u0275fac = function TraceDirective_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || TraceDirective)(\u0275\u0275directiveInject(ElementRef));
};
TraceDirective.\u0275dir = /* @__PURE__ */ \u0275\u0275defineDirective({
  type: TraceDirective,
  selectors: [["", "trace", ""]],
  inputs: {
    componentName: [0, "trace", "componentName"]
  },
  standalone: false
});
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(TraceDirective, [{
    type: Directive,
    args: [{
      selector: "[trace]"
    }]
  }], function() {
    return [{
      type: ElementRef
    }];
  }, {
    componentName: [{
      type: Input,
      args: ["trace"]
    }]
  });
})();
var TraceModule = class {
};
TraceModule.\u0275fac = function TraceModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || TraceModule)();
};
TraceModule.\u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({
  type: TraceModule,
  declarations: [TraceDirective],
  exports: [TraceDirective]
});
TraceModule.\u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({});
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(TraceModule, [{
    type: NgModule,
    args: [{
      declarations: [TraceDirective],
      exports: [TraceDirective]
    }]
  }], null, null);
})();
function getParameterizedRouteFromSnapshot(route) {
  const parts = [];
  let currentRoute = route == null ? void 0 : route.firstChild;
  while (currentRoute) {
    const path = (currentRoute == null ? void 0 : currentRoute.routeConfig) && currentRoute.routeConfig.path;
    if (path === null || path === void 0) {
      break;
    }
    parts.push(path);
    currentRoute = currentRoute.firstChild;
  }
  const fullPath = parts.filter((part) => part).join("/");
  return fullPath ? `/${fullPath}/` : "/";
}

// src/app/services/external/auth.service.ts
var _AuthService = class _AuthService {
  constructor(router, storage, accountService, recaptchaService, appStateService, subscriptionProcess, fcmService, kycWrapperService, forfaitsService, errorHandler2) {
    this.router = router;
    this.storage = storage;
    this.accountService = accountService;
    this.recaptchaService = recaptchaService;
    this.appStateService = appStateService;
    this.subscriptionProcess = subscriptionProcess;
    this.fcmService = fcmService;
    this.kycWrapperService = kycWrapperService;
    this.forfaitsService = forfaitsService;
    this.errorHandler = errorHandler2;
    this.authState = signal({
      state: "SignedOut"
    });
    this.checkAuthStatus();
    this.userPool = new CognitoUserPool({
      UserPoolId: environment.cognito.userPoolId,
      ClientId: environment.cognito.userPoolClientId
    });
    effect(() => {
      const cyclistState = this.accountService.cyclistState();
      if (cyclistState.state === "deleted") {
        this.signOut();
      }
      if (cyclistState.state === "error" && this.authState().state === "SignedIn") {
        this.signOut();
      }
    });
  }
  checkAuthStatus(forceRefresh) {
    return __async(this, null, function* () {
      var _a3, _b, _c, _d;
      try {
        const session = yield fetchAuthSession({
          forceRefresh: forceRefresh !== void 0 ? forceRefresh : environment.production
        });
        if (session.tokens) {
          this.authState.set({ state: "SignedIn" });
          if (this.accountService.cyclistState().state === "unknown" || this.accountService.cyclistState().state === "error") {
            yield this.accountService.loadCyclist();
            const cyclistState = this.accountService.cyclistState();
            if ("cyclist" in cyclistState && ((_d = (_c = (_b = (_a3 = cyclistState.cyclist.registrations) == null ? void 0 : _a3.data) == null ? void 0 : _b[0]) == null ? void 0 : _c.memberships) == null ? void 0 : _d.data) && cyclistState.cyclist.registrations.data[0].memberships.data.length > 0) {
              try {
                yield this.forfaitsService.loadOrganizationForfaits();
              } catch (error2) {
                console.warn("Could not load organization forfaits after cyclist load:", error2);
              }
            }
          }
        } else {
          this.authState.set({ state: "SignedOut" });
        }
      } catch (error2) {
        this.authState.set({ state: "SignedOut" });
      }
    });
  }
  signIn(username, password) {
    return __async(this, null, function* () {
      try {
        yield signIn({
          username,
          password,
          options: {
            authFlowType: "USER_PASSWORD_AUTH"
          }
        });
        yield this.handleSuccessfulAuthentication();
      } catch (error2) {
        if (error2.name === "UserAlreadyAuthenticatedException") {
          try {
            yield signOut();
            this.authState.set({ state: "SignedOut" });
            this.resetState();
            yield signIn({
              username,
              password,
              options: {
                authFlowType: "USER_PASSWORD_AUTH"
              }
            });
            yield this.handleSuccessfulAuthentication();
            return;
          } catch (retryError) {
            this.errorHandler.handleError(retryError);
            throw retryError;
          }
        } else if (error2.name === "NotAuthorizedException") {
          try {
            const alternativeSignInResponse = yield signIn({
              username,
              password
            });
            if (alternativeSignInResponse.nextStep.signInStep === "DONE") {
              yield this.handleSuccessfulAuthentication();
              return;
            }
          } catch (alternativeError) {
            this.errorHandler.handleError(alternativeError);
            throw alternativeError;
          }
        } else if (error2.name === "DeviceMetadataNotFoundException") {
          try {
            yield fetchAuthSession({ forceRefresh: true });
            const alternativeSignInResponse = yield signIn({
              username,
              password
            });
            if (alternativeSignInResponse.nextStep.signInStep === "DONE") {
              yield this.handleSuccessfulAuthentication();
              return;
            }
          } catch (alternativeError) {
            this.errorHandler.handleError(alternativeError);
            throw alternativeError;
          }
        }
        this.errorHandler.handleError(error2);
        throw error2;
      }
    });
  }
  handleSuccessfulAuthentication() {
    return __async(this, null, function* () {
      var _a3, _b, _c, _d, _e, _f, _g;
      this.authState.set({ state: "SignedIn" });
      yield this.accountService.loadCyclist();
      const cyclistState = this.accountService.cyclistState();
      if ("cyclist" in cyclistState && ((_d = (_c = (_b = (_a3 = cyclistState.cyclist.registrations) == null ? void 0 : _a3.data) == null ? void 0 : _b[0]) == null ? void 0 : _c.memberships) == null ? void 0 : _d.data) && cyclistState.cyclist.registrations.data[0].memberships.data.length > 0) {
        try {
          yield this.forfaitsService.loadOrganizationForfaits();
        } catch (error2) {
          console.warn("Could not load organization forfaits after cyclist load:", error2);
        }
      }
      if (Capacitor.isNativePlatform()) {
        const pushPermission = yield PushNotifications.checkPermissions();
        if (pushPermission.receive === "granted") {
          yield this.fcmService.registerPush();
        }
      }
      if ("cyclist" in cyclistState && (cyclistState.cyclist.role == "guest" || ((_g = (_f = (_e = cyclistState.cyclist.registrations) == null ? void 0 : _e.data) == null ? void 0 : _f[0]) == null ? void 0 : _g.role) == "guest")) {
        this.router.navigate(["/verify-phone"], { replaceUrl: true });
        return;
      }
      if (cyclistState.state === "unconfirmed") {
        this.accountService.hasMissingPaymentMethodOrCgu() ? this.router.navigate(["/payment-method"], { replaceUrl: true }) : this.router.navigate(["/verify-phone"], { replaceUrl: true });
      } else {
        if (yield this.shouldRedirectToKyc()) {
          this.router.navigate(["/kyc"], { replaceUrl: true });
        } else {
          if (this.appStateService.getAppState().state === "onboarding") {
            this.appStateService.setAppState({
              state: "new_cyclist",
              dring_state: {
                geolocation_dring: "not_shown"
              },
              push_notifications: "not_shown"
            });
          }
          this.router.navigate(["/map"], { replaceUrl: true });
        }
      }
    });
  }
  signUp(user) {
    return __async(this, null, function* () {
      try {
        const token = yield this.recaptchaService.executeRecaptcha("signup");
        yield signUp({
          username: user.phone,
          password: user.password,
          options: {
            userAttributes: {
              name: user.name,
              email: user.email,
              phone_number: user.phone,
              "custom:program": environment.program
            },
            validationData: { recaptchaToken: token },
            autoSignIn: false
          }
        });
        yield this.signIn(user.phone, user.password);
      } catch (error2) {
        this.errorHandler.handleError(error2);
      }
    });
  }
  signOut(bypassRedirection = false) {
    return __async(this, null, function* () {
      if (Capacitor.isNativePlatform()) {
        yield PushNotifications.checkPermissions().then((permission) => __async(this, null, function* () {
          if (permission.receive === "granted") {
            yield this.fcmService.unRegisterPush();
          }
        })).then(() => __async(this, null, function* () {
          yield signOut().then(() => {
            this.resetState();
            if (!bypassRedirection) {
              this.router.navigate(["/map"]);
            }
          });
        }));
      } else {
        yield signOut().then(() => {
          this.resetState();
          if (!bypassRedirection) {
            this.router.navigate(["/map"]);
          }
        });
      }
    });
  }
  resetState() {
    this.authState.set({ state: "SignedOut" });
    this.accountService.cyclistState.set({
      state: "unknown",
      blocked_reasons: ["Unknown account state"]
    });
    this.storage.remove("me");
    this.subscriptionProcess.clearProcess();
  }
  signInWithSocialProvider(provider) {
    return __async(this, null, function* () {
      var _a3;
      const liveMode = environment.production;
      const program = yield this.storage.get("program");
      if (!program) {
        this.errorHandler.handleError({ error: { title: "program_not_found" } });
      }
      if (Capacitor.isNativePlatform()) {
        yield Browser.open({
          url: `https://auth.ecovelo.mobi/auth-initiate?provider=${provider}&liveMode=${liveMode}&appBundle=${program.config.app_bundle ? program.config.app_bundle : program.id}`,
          presentationStyle: "popover"
        });
      } else {
        if (!((_a3 = program == null ? void 0 : program.config) == null ? void 0 : _a3.webapp)) {
          this.errorHandler.handleError({ error: { title: "program_not_found" } });
          return;
        }
        window.location.href = `http://auth.ecovelo.mobi/auth-initiate?provider=${provider}&liveMode=${liveMode}&webAppUrl=${program.config.webapp}`;
      }
    });
  }
  /**
   * Redirects the user to the Fleetiz auth portal with a valid access token.
   * On native, opens in an in-app browser; on web, performs a full page redirect.
   */
  redirectToLld() {
    return __async(this, null, function* () {
      var _a3, _b;
      try {
        const session = yield fetchAuthSession({ forceRefresh: false });
        const accessToken = (_b = (_a3 = session == null ? void 0 : session.tokens) == null ? void 0 : _a3.accessToken) == null ? void 0 : _b.toString();
        if (!accessToken) {
          this.errorHandler.handleError({
            error: { title: "access_token_not_found" }
          });
          return;
        }
        const program = yield this.storage.get("program");
        if (!program) {
          this.errorHandler.handleError({ error: { title: "program_not_found" } });
          return;
        }
        let extOrigin = "";
        if (Capacitor.isNativePlatform()) {
          if (!program.config.app_bundle) {
            this.errorHandler.handleError({
              error: { title: "app_bundle_not_found" }
            });
            return;
          }
          extOrigin = program.config.app_bundle;
        } else {
          if (!program.config.webapp) {
            this.errorHandler.handleError({
              error: { title: "webapp_not_found" }
            });
            return;
          }
          extOrigin = program.config.webapp;
        }
        const targetUrl = `${program.config.lld_url}${accessToken}&extOrigin=${encodeURIComponent(extOrigin)}`;
        const url = `https://auth.ecovelo.mobi/auth-redirect?url=${encodeURIComponent(targetUrl)}`;
        if (Capacitor.isNativePlatform()) {
          yield Browser.open({ url, presentationStyle: "fullscreen" });
        } else {
          window.location.href = url;
        }
      } catch (error2) {
        this.errorHandler.handleError(error2);
        throw error2;
      }
    });
  }
  createSessionFromTokens(sessionData) {
    return __async(this, null, function* () {
      const idToken = new CognitoIdToken({ IdToken: sessionData.idToken });
      const accessToken = new CognitoAccessToken({
        AccessToken: sessionData.accessToken
      });
      const refreshToken = new CognitoRefreshToken({
        RefreshToken: sessionData.refreshToken
      });
      const session = new CognitoUserSession({
        IdToken: idToken,
        AccessToken: accessToken,
        RefreshToken: refreshToken
      });
      const user = new CognitoUser({
        Username: session.getAccessToken().payload["username"],
        Pool: this.userPool
      });
      user.setSignInUserSession(session);
      return session;
    });
  }
  getUserPhoneNumber() {
    return __async(this, null, function* () {
      const user = yield fetchUserAttributes();
      if (user.phone_number) {
        return user.phone_number;
      } else {
        captureException(new Error("No phone number found for user"));
        return "";
      }
    });
  }
  /**
   * Actualise explicitement la session d'authentification.
   * Cette méthode est utile avant d'effectuer des opérations sensibles comme
   * les téléchargements vers S3, surtout après que l'application a été en arrière-plan.
   * @returns Résultat de la session actualisée
   */
  refreshSession() {
    return __async(this, null, function* () {
      try {
        return yield fetchAuthSession({ forceRefresh: true });
      } catch (error2) {
        console.warn("Failed to refresh authentication session:", error2);
        this.errorHandler.handleError(error2);
        throw error2;
      }
    });
  }
  shouldRedirectToKyc() {
    return __async(this, null, function* () {
      if (this.authState().state !== "SignedIn" || this.kycWrapperService.enabledDocumentTypes().length === 0) {
        return false;
      }
      let cyclistState = this.accountService.cyclistState();
      if (cyclistState.state === "unknown" || cyclistState.state === "error") {
        yield this.accountService.loadCyclist();
        cyclistState = this.accountService.cyclistState();
      }
      if (cyclistState.state === "unknown" || cyclistState.state === "error") {
        return false;
      }
      const kycState = this.kycWrapperService.kycCompletionState();
      return kycState === "missing" || kycState === "rejected";
    });
  }
};
_AuthService.\u0275fac = function AuthService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AuthService)(\u0275\u0275inject(Router), \u0275\u0275inject(StorageService), \u0275\u0275inject(AccountService), \u0275\u0275inject(RecaptchaService), \u0275\u0275inject(AppstateService), \u0275\u0275inject(SubscriptionProcessService), \u0275\u0275inject(FcmService), \u0275\u0275inject(KYCWrapperService), \u0275\u0275inject(ForfaitsWrapperService), \u0275\u0275inject(ErrorHandlerService));
};
_AuthService.\u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _AuthService, factory: _AuthService.\u0275fac, providedIn: "root" });
var AuthService = _AuthService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(AuthService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: Router }, { type: StorageService }, { type: AccountService }, { type: RecaptchaService }, { type: AppstateService }, { type: SubscriptionProcessService }, { type: FcmService }, { type: KYCWrapperService }, { type: ForfaitsWrapperService }, { type: ErrorHandlerService }], null);
})();

export {
  Browser,
  captureMessage,
  captureFeedback,
  feedbackSyncIntegration,
  replayIntegration,
  init2 as init,
  createErrorHandler,
  browserTracingIntegration2 as browserTracingIntegration,
  TraceService,
  ForfaitsWrapperService,
  AuthService
};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <http://feross.org>
   * @license  MIT
   *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

js-cookie/src/js.cookie.js:
  (*!
   * JavaScript Cookie v2.2.1
   * https://github.com/js-cookie/js-cookie
   *
   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
   * Released under the MIT license
   *)

amazon-cognito-identity-js/es/AuthenticationDetails.js:
amazon-cognito-identity-js/es/AuthenticationHelper.js:
amazon-cognito-identity-js/es/CognitoJwtToken.js:
amazon-cognito-identity-js/es/CognitoAccessToken.js:
amazon-cognito-identity-js/es/CognitoIdToken.js:
amazon-cognito-identity-js/es/CognitoRefreshToken.js:
amazon-cognito-identity-js/es/Platform/index.js:
amazon-cognito-identity-js/es/CognitoUserSession.js:
amazon-cognito-identity-js/es/DateHelper.js:
amazon-cognito-identity-js/es/CognitoUserAttribute.js:
amazon-cognito-identity-js/es/StorageHelper.js:
amazon-cognito-identity-js/es/CognitoUser.js:
amazon-cognito-identity-js/es/CognitoUserPool.js:
amazon-cognito-identity-js/es/index.js:
  (*!
   * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9iYXNlNjQtanMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvaWVlZTc1NC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9pc2FycmF5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2J1ZmZlci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9AYXdzLWNyeXB0by9zaGEyNTYtanMvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm5vZGVfbW9kdWxlcy9AYXdzLWNyeXB0by9zaGEyNTYtanMvYnVpbGQvY29uc3RhbnRzLmpzIiwibm9kZV9tb2R1bGVzL0Bhd3MtY3J5cHRvL3NoYTI1Ni1qcy9idWlsZC9SYXdTaGEyNTYuanMiLCJub2RlX21vZHVsZXMvQGF3cy1zZGsvdXRpbC11dGY4LWJyb3dzZXIvZGlzdC1lcy9wdXJlSnMuanMiLCJub2RlX21vZHVsZXMvQGF3cy1zZGsvdXRpbC11dGY4LWJyb3dzZXIvZGlzdC1lcy93aGF0d2dFbmNvZGluZ0FwaS5qcyIsIm5vZGVfbW9kdWxlcy9AYXdzLXNkay91dGlsLXV0ZjgtYnJvd3Nlci9kaXN0LWVzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL0Bhd3MtY3J5cHRvL3V0aWwvYnVpbGQvY29udmVydFRvQnVmZmVyLmpzIiwibm9kZV9tb2R1bGVzL0Bhd3MtY3J5cHRvL3V0aWwvYnVpbGQvaXNFbXB0eURhdGEuanMiLCJub2RlX21vZHVsZXMvQGF3cy1jcnlwdG8vdXRpbC9idWlsZC9udW1Ub1VpbnQ4LmpzIiwibm9kZV9tb2R1bGVzL0Bhd3MtY3J5cHRvL3V0aWwvYnVpbGQvdWludDMyQXJyYXlGcm9tLmpzIiwibm9kZV9tb2R1bGVzL0Bhd3MtY3J5cHRvL3V0aWwvYnVpbGQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvQGF3cy1jcnlwdG8vc2hhMjU2LWpzL2J1aWxkL2pzU2hhMjU2LmpzIiwibm9kZV9tb2R1bGVzL0Bhd3MtY3J5cHRvL3NoYTI1Ni1qcy9idWlsZC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy91bmZldGNoL2Rpc3QvdW5mZXRjaC5tb2R1bGUuanMiLCJub2RlX21vZHVsZXMvaXNvbW9ycGhpYy11bmZldGNoL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvanMtY29va2llL3NyYy9qcy5jb29raWUuanMiLCJub2RlX21vZHVsZXMvQGNhcGFjaXRvci9icm93c2VyL2Rpc3QvZXNtL2luZGV4LmpzIiwic3JjL2FwcC9zZXJ2aWNlcy9hcGktd3JhcHBlcnMvZm9yZmFpdHMuc2VydmljZS50cyIsIm5vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9lcy9BdXRoZW50aWNhdGlvbkhlbHBlci5qcyIsIm5vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9lcy91dGlscy9jcnlwdG9TZWN1cmVSYW5kb21JbnQuanMiLCJub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvZXMvdXRpbHMvV29yZEFycmF5LmpzIiwibm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2VzL0JpZ0ludGVnZXIuanMiLCJub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvZXMvQ29nbml0b0p3dFRva2VuLmpzIiwibm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2VzL0NvZ25pdG9BY2Nlc3NUb2tlbi5qcyIsIm5vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9lcy9Db2duaXRvSWRUb2tlbi5qcyIsIm5vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9lcy9Db2duaXRvUmVmcmVzaFRva2VuLmpzIiwibm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2VzL0NvZ25pdG9Vc2VyLmpzIiwibm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2VzL1BsYXRmb3JtL3ZlcnNpb24uanMiLCJub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvZXMvUGxhdGZvcm0vaW5kZXguanMiLCJub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvZXMvQ29nbml0b1VzZXJTZXNzaW9uLmpzIiwibm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2VzL0RhdGVIZWxwZXIuanMiLCJub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvZXMvQ29nbml0b1VzZXJBdHRyaWJ1dGUuanMiLCJub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvZXMvU3RvcmFnZUhlbHBlci5qcyIsIm5vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9lcy9DbGllbnQuanMiLCJub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvZXMvVXNlckFnZW50LmpzIiwibm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2VzL0NvZ25pdG9Vc2VyUG9vbC5qcyIsIm5vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9lcy9Db29raWVTdG9yYWdlLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vZGVidWctYnVpbGQuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy93b3JsZHdpZGUuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy92ZXJzaW9uLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vY2Fycmllci5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2xvZ2dlci5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL3N0YWNrdHJhY2UuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS9pbnN0cnVtZW50L2hhbmRsZXJzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vaW5zdHJ1bWVudC9nbG9iYWxFcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL2luc3RydW1lbnQvZ2xvYmFsVW5oYW5kbGVkUmVqZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvaXMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvc3RyaW5nLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvbWlzYy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL3RpbWUuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS9zZXNzaW9uLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvbWVyZ2UuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9wcm9wYWdhdGlvbkNvbnRleHQuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9zcGFuT25TY29wZS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3Njb3BlLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vZGVmYXVsdFNjb3Blcy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL2FzeW5jQ29udGV4dC9zdGFja1N0cmF0ZWd5LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vYXN5bmNDb250ZXh0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vY3VycmVudFNjb3Blcy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3NlbWFudGljQXR0cmlidXRlcy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3RyYWNpbmcvc3BhbnN0YXR1cy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3RyYWNpbmcvdXRpbHMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9iYWdnYWdlLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvcGFyc2VTYW1wbGVSYXRlLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvdHJhY2luZy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL3NwYW5VdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3RyYWNpbmcvZXJyb3JzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvaGFzU3BhbnNFbmFibGVkLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vY29uc3RhbnRzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvZHNuLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdHJhY2luZy9keW5hbWljU2FtcGxpbmdDb250ZXh0LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdHJhY2luZy9zZW50cnlOb25SZWNvcmRpbmdTcGFuLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvaGFuZGxlQ2FsbGJhY2tFcnJvcnMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS90cmFjaW5nL2xvZ1NwYW5zLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdHJhY2luZy9zYW1wbGluZy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL25vcm1hbGl6ZS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2VudmVsb3BlLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vZW52ZWxvcGUuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS90cmFjaW5nL21lYXN1cmVtZW50LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdHJhY2luZy9zZW50cnlTcGFuLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdHJhY2luZy90cmFjZS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3RyYWNpbmcvaWRsZVNwYW4uanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9zeW5jcHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL2V2ZW50UHJvY2Vzc29ycy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2FwcGx5U2NvcGVEYXRhVG9FdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2RlYnVnLWlkcy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL3ByZXBhcmVFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL2V4cG9ydHMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS9hcGkuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS9pbnRlZ3JhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2NsaWVudHJlcG9ydC5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2V2ZW50VXRpbHMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy90cmFuc2FjdGlvbkV2ZW50LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vY2xpZW50LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vbG9ncy9lbnZlbG9wZS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL2xvZ3MvZXhwb3J0cy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3Nkay5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL3Byb21pc2VidWZmZXIuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9yYXRlbGltaXQuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS90cmFuc3BvcnRzL2Jhc2UuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9pc1NlbnRyeVJlcXVlc3RVcmwuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9pcEFkZHJlc3MuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9zZGtNZXRhZGF0YS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL3RyYWNlRGF0YS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2RlYm91bmNlLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vYnJlYWRjcnVtYnMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS9pbnRlZ3JhdGlvbnMvZnVuY3Rpb250b3N0cmluZy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL2ludGVncmF0aW9ucy9ldmVudEZpbHRlcnMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS91dGlscy9hZ2dyZWdhdGUtZXJyb3JzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vaW5zdHJ1bWVudC9jb25zb2xlLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvc2V2ZXJpdHkuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS9pbnRlZ3JhdGlvbnMvZGVkdXBlLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvdXJsLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vZmV0Y2guanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS9mZWVkYmFjay5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2JyZWFkY3J1bWItbG9nLWxldmVsLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvc3VwcG9ydHMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9jb3JlL2J1aWxkL2VzbS9pbnN0cnVtZW50L2ZldGNoLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvZW52LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvY29yZS9idWlsZC9lc20vdXRpbHMvbm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2NvcmUvYnVpbGQvZXNtL3V0aWxzL2lzQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2ZlZWRiYWNrL2J1aWxkL25wbS9lc20vaW5kZXguanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9icm93c2VyL2J1aWxkL25wbS9lc20vaGVscGVycy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2Jyb3dzZXIvYnVpbGQvbnBtL2VzbS9mZWVkYmFja1N5bmMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9icm93c2VyL2J1aWxkL25wbS9lc20vZXZlbnRidWlsZGVyLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvYnJvd3Nlci9idWlsZC9ucG0vZXNtL2NsaWVudC5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL2RlYnVnLWJ1aWxkLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vdHlwZXMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvbGliL2JpbmRSZXBvcnRlci5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9saWIvZ2VuZXJhdGVVbmlxdWVJRC5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9saWIvZ2V0TmF2aWdhdGlvbkVudHJ5LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vbWV0cmljcy93ZWItdml0YWxzL2xpYi9nZXRBY3RpdmF0aW9uU3RhcnQuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvbGliL2luaXRNZXRyaWMuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvbGliL2luaXRVbmlxdWUuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvbGliL0xheW91dFNoaWZ0TWFuYWdlci5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9saWIvb2JzZXJ2ZS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9saWIvcnVuT25jZS5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9saWIvZ2V0VmlzaWJpbGl0eVdhdGNoZXIuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvbGliL3doZW5BY3RpdmF0ZWQuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvb25GQ1AuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvZ2V0Q0xTLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vbWV0cmljcy93ZWItdml0YWxzL2xpYi9vbkhpZGRlbi5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9nZXRGSUQuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvbGliL3BvbHlmaWxscy9pbnRlcmFjdGlvbkNvdW50UG9seWZpbGwuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvbGliL0ludGVyYWN0aW9uTWFuYWdlci5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9saWIvd2hlbklkbGVPckhpZGRlbi5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9nZXRJTlAuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvbGliL0xDUEVudHJ5TWFuYWdlci5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3Mvd2ViLXZpdGFscy9nZXRMQ1AuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL3dlYi12aXRhbHMvb25UVEZCLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vbWV0cmljcy9pbnN0cnVtZW50LmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vbWV0cmljcy91dGlscy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL21ldHJpY3MvY2xzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vbWV0cmljcy9sY3AuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9tZXRyaWNzL2Jyb3dzZXJNZXRyaWNzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vbWV0cmljcy9lbGVtZW50VGltaW5nLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vaW5zdHJ1bWVudC9kb20uanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9pbnN0cnVtZW50L2hpc3RvcnkuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzL2J1aWxkL2VzbS9nZXROYXRpdmVJbXBsZW1lbnRhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMvYnVpbGQvZXNtL2luc3RydW1lbnQveGhyLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vbmV0d29ya1V0aWxzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscy9idWlsZC9lc20vbWV0cmljcy9pbnAuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9icm93c2VyL2J1aWxkL25wbS9lc20vdHJhbnNwb3J0cy9mZXRjaC5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2Jyb3dzZXIvYnVpbGQvbnBtL2VzbS9zdGFjay1wYXJzZXJzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvYnJvd3Nlci9idWlsZC9ucG0vZXNtL2RlYnVnLWJ1aWxkLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvYnJvd3Nlci9idWlsZC9ucG0vZXNtL2ludGVncmF0aW9ucy9icmVhZGNydW1icy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2Jyb3dzZXIvYnVpbGQvbnBtL2VzbS9pbnRlZ3JhdGlvbnMvYnJvd3NlcmFwaWVycm9ycy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2Jyb3dzZXIvYnVpbGQvbnBtL2VzbS9pbnRlZ3JhdGlvbnMvYnJvd3NlcnNlc3Npb24uanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9icm93c2VyL2J1aWxkL25wbS9lc20vaW50ZWdyYXRpb25zL2dsb2JhbGhhbmRsZXJzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvYnJvd3Nlci9idWlsZC9ucG0vZXNtL2ludGVncmF0aW9ucy9odHRwY29udGV4dC5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2Jyb3dzZXIvYnVpbGQvbnBtL2VzbS9pbnRlZ3JhdGlvbnMvbGlua2VkZXJyb3JzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvYnJvd3Nlci9idWlsZC9ucG0vZXNtL3V0aWxzL2RldGVjdEJyb3dzZXJFeHRlbnNpb24uanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9icm93c2VyL2J1aWxkL25wbS9lc20vc2RrLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvYnJvd3Nlci9idWlsZC9ucG0vZXNtL3JlcG9ydC1kaWFsb2cuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS1pbnRlcm5hbC9yZXBsYXkvYnVpbGQvbnBtL2VzbS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2Jyb3dzZXIvYnVpbGQvbnBtL2VzbS90cmFjaW5nL3Jlc291cmNlLXRpbWluZy5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2Jyb3dzZXIvYnVpbGQvbnBtL2VzbS90cmFjaW5nL3JlcXVlc3QuanMiLCJub2RlX21vZHVsZXMvQHNlbnRyeS9icm93c2VyL2J1aWxkL25wbS9lc20vdHJhY2luZy9iYWNrZ3JvdW5kdGFiLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvYnJvd3Nlci9idWlsZC9ucG0vZXNtL3RyYWNpbmcvbGlua2VkVHJhY2VzLmpzIiwibm9kZV9tb2R1bGVzL0BzZW50cnkvYnJvd3Nlci9idWlsZC9ucG0vZXNtL3RyYWNpbmcvYnJvd3NlclRyYWNpbmdJbnRlZ3JhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9Ac2VudHJ5L2FuZ3VsYXIvZmVzbTIwMjAvc2VudHJ5LWFuZ3VsYXIubWpzIiwic3JjL2FwcC9zZXJ2aWNlcy9leHRlcm5hbC9hdXRoLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoO1xuZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5O1xuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheTtcbnZhciBsb29rdXAgPSBbXTtcbnZhciByZXZMb29rdXAgPSBbXTtcbnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXk7XG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcbmZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gIGxvb2t1cFtpXSA9IGNvZGVbaV07XG4gIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaTtcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyO1xucmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzO1xuZnVuY3Rpb24gZ2V0TGVucyhiNjQpIHtcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGg7XG4gIGlmIChsZW4gJSA0ID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpO1xuICB9XG5cbiAgLy8gVHJpbSBvZmYgZXh0cmEgYnl0ZXMgYWZ0ZXIgcGxhY2Vob2xkZXIgYnl0ZXMgYXJlIGZvdW5kXG4gIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2JlYXRnYW1taXQvYmFzZTY0LWpzL2lzc3Vlcy80MlxuICB2YXIgdmFsaWRMZW4gPSBiNjQuaW5kZXhPZignPScpO1xuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlbjtcbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IHZhbGlkTGVuID09PSBsZW4gPyAwIDogNCAtIHZhbGlkTGVuICUgNDtcbiAgcmV0dXJuIFt2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuXTtcbn1cblxuLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5mdW5jdGlvbiBieXRlTGVuZ3RoKGI2NCkge1xuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTtcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTtcbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07XG4gIHJldHVybiAodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQgLSBwbGFjZUhvbGRlcnNMZW47XG59XG5mdW5jdGlvbiBfYnl0ZUxlbmd0aChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCAtIHBsYWNlSG9sZGVyc0xlbjtcbn1cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5KGI2NCkge1xuICB2YXIgdG1wO1xuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTtcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTtcbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07XG4gIHZhciBhcnIgPSBuZXcgQXJyKF9ieXRlTGVuZ3RoKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikpO1xuICB2YXIgY3VyQnl0ZSA9IDA7XG5cbiAgLy8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuICB2YXIgbGVuID0gcGxhY2VIb2xkZXJzTGVuID4gMCA/IHZhbGlkTGVuIC0gNCA6IHZhbGlkTGVuO1xuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgdG1wID0gcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNiB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldO1xuICAgIGFycltjdXJCeXRlKytdID0gdG1wID4+IDE2ICYgMHhGRjtcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCA+PiA4ICYgMHhGRjtcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkY7XG4gIH1cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMikge1xuICAgIHRtcCA9IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMiB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQ7XG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGO1xuICB9XG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDEpIHtcbiAgICB0bXAgPSByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDI7XG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgPj4gOCAmIDB4RkY7XG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGO1xuICB9XG4gIHJldHVybiBhcnI7XG59XG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArIGxvb2t1cFtudW0gJiAweDNGXTtcbn1cbmZ1bmN0aW9uIGVuY29kZUNodW5rKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXA7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYgJiAweEZGMDAwMCkgKyAodWludDhbaSArIDFdIDw8IDggJiAweEZGMDApICsgKHVpbnQ4W2kgKyAyXSAmIDB4RkYpO1xuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xufVxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSh1aW50OCkge1xuICB2YXIgdG1wO1xuICB2YXIgbGVuID0gdWludDgubGVuZ3RoO1xuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDM7IC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG4gIHZhciBwYXJ0cyA9IFtdO1xuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MzsgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgaSArIG1heENodW5rTGVuZ3RoID4gbGVuMiA/IGxlbjIgOiBpICsgbWF4Q2h1bmtMZW5ndGgpKTtcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXTtcbiAgICBwYXJ0cy5wdXNoKGxvb2t1cFt0bXAgPj4gMl0gKyBsb29rdXBbdG1wIDw8IDQgJiAweDNGXSArICc9PScpO1xuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXTtcbiAgICBwYXJ0cy5wdXNoKGxvb2t1cFt0bXAgPj4gMTBdICsgbG9va3VwW3RtcCA+PiA0ICYgMHgzRl0gKyBsb29rdXBbdG1wIDw8IDIgJiAweDNGXSArICc9Jyk7XG4gIH1cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpO1xufSIsIi8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovXG5leHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbTtcbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDE7XG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxO1xuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDE7XG4gIHZhciBuQml0cyA9IC03O1xuICB2YXIgaSA9IGlzTEUgPyBuQnl0ZXMgLSAxIDogMDtcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxO1xuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXTtcbiAgaSArPSBkO1xuICBlID0gcyAmICgxIDw8IC1uQml0cykgLSAxO1xuICBzID4+PSAtbkJpdHM7XG4gIG5CaXRzICs9IGVMZW47XG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG4gIG0gPSBlICYgKDEgPDwgLW5CaXRzKSAtIDE7XG4gIGUgPj49IC1uQml0cztcbiAgbkJpdHMgKz0gbUxlbjtcbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzO1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6IChzID8gLTEgOiAxKSAqIEluZmluaXR5O1xuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbik7XG4gICAgZSA9IGUgLSBlQmlhcztcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKTtcbn07XG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjO1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMTtcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDE7XG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMTtcbiAgdmFyIHJ0ID0gbUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDA7XG4gIHZhciBpID0gaXNMRSA/IDAgOiBuQnl0ZXMgLSAxO1xuICB2YXIgZCA9IGlzTEUgPyAxIDogLTE7XG4gIHZhciBzID0gdmFsdWUgPCAwIHx8IHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDAgPyAxIDogMDtcbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSk7XG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwO1xuICAgIGUgPSBlTWF4O1xuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKTtcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS07XG4gICAgICBjICo9IDI7XG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcyk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrO1xuICAgICAgYyAvPSAyO1xuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwO1xuICAgICAgZSA9IGVNYXg7XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pO1xuICAgICAgZSA9IGUgKyBlQmlhcztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pO1xuICAgICAgZSA9IDA7XG4gICAgfVxuICB9XG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG4gIGUgPSBlIDw8IG1MZW4gfCBtO1xuICBlTGVuICs9IG1MZW47XG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4O1xufTsiLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07IiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpO1xudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0Jyk7XG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKTtcbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyO1xuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlcjtcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MDtcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgOiB0eXBlZEFycmF5U3VwcG9ydCgpO1xuXG4vKlxuICogRXhwb3J0IGtNYXhMZW5ndGggYWZ0ZXIgdHlwZWQgYXJyYXkgc3VwcG9ydCBpcyBkZXRlcm1pbmVkLlxuICovXG5leHBvcnRzLmtNYXhMZW5ndGggPSBrTWF4TGVuZ3RoKCk7XG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSk7XG4gICAgYXJyLl9fcHJvdG9fXyA9IHtcbiAgICAgIF9fcHJvdG9fXzogVWludDhBcnJheS5wcm90b3R5cGUsXG4gICAgICBmb286IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIDQyO1xuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiZcbiAgICAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiZcbiAgICAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMDsgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuZnVuY3Rpb24ga01heExlbmd0aCgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID8gMHg3ZmZmZmZmZiA6IDB4M2ZmZmZmZmY7XG59XG5mdW5jdGlvbiBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKSB7XG4gIGlmIChrTWF4TGVuZ3RoKCkgPCBsZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKTtcbiAgfVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIGlmICh0aGF0ID09PSBudWxsKSB7XG4gICAgICB0aGF0ID0gbmV3IEJ1ZmZlcihsZW5ndGgpO1xuICAgIH1cbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aDtcbiAgfVxuICByZXR1cm4gdGhhdDtcbn1cblxuLyoqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcbiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcbiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cbiAqL1xuXG5mdW5jdGlvbiBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpO1xuICB9XG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZyk7XG4gIH1cbiAgcmV0dXJuIGZyb20odGhpcywgYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpO1xufVxuQnVmZmVyLnBvb2xTaXplID0gODE5MjsgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG4vLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGU7XG4gIHJldHVybiBhcnI7XG59O1xuZnVuY3Rpb24gZnJvbSh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCk7XG4gIH1cbiAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpO1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG4gKiBpZiB2YWx1ZSBpcyBhIG51bWJlci5cbiAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSlcbiAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuICogQnVmZmVyLmZyb20oYnVmZmVyKVxuICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pXG4gKiovXG5CdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBmcm9tKG51bGwsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpO1xufTtcbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlO1xuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheTtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGFzc2VydFNpemUoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpO1xuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJyk7XG4gIH1cbn1cbmZ1bmN0aW9uIGFsbG9jKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSk7XG4gIGlmIChzaXplIDw9IDApIHtcbiAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpO1xuICB9XG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xuICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcbiAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZykgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2MobnVsbCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpO1xufTtcbmZ1bmN0aW9uIGFsbG9jVW5zYWZlKHRoYXQsIHNpemUpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKTtcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMCk7XG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuICAgICAgdGhhdFtpXSA9IDA7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0O1xufVxuXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpO1xufTtcbi8qKlxuICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSk7XG59O1xuZnVuY3Rpb24gZnJvbVN0cmluZyh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnO1xuICB9XG4gIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKTtcbiAgfVxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDA7XG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKTtcbiAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZyk7XG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKTtcbiAgfVxuICByZXR1cm4gdGhhdDtcbn1cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMDtcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1O1xuICB9XG4gIHJldHVybiB0aGF0O1xufVxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgYXJyYXkuYnl0ZUxlbmd0aDsgLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXG4gIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpO1xuICB9XG4gIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKTtcbiAgfVxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSk7XG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KTtcbiAgfSBlbHNlIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBhcnJheTtcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KTtcbiAgfVxuICByZXR1cm4gdGhhdDtcbn1cbmZ1bmN0aW9uIGZyb21PYmplY3QodGhhdCwgb2JqKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMDtcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbik7XG4gICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhhdDtcbiAgICB9XG4gICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKTtcbiAgICByZXR1cm4gdGhhdDtcbiAgfVxuICBpZiAob2JqKSB7XG4gICAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8ICdsZW5ndGgnIGluIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKTtcbiAgICB9XG4gICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpO1xuICAgIH1cbiAgfVxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuJyk7XG59XG5mdW5jdGlvbiBjaGVja2VkKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpO1xuICB9XG4gIHJldHVybiBsZW5ndGggfCAwO1xufVxuZnVuY3Rpb24gU2xvd0J1ZmZlcihsZW5ndGgpIHtcbiAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcbiAgICBsZW5ndGggPSAwO1xuICB9XG4gIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aCk7XG59XG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlcihiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpO1xufTtcbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJyk7XG4gIH1cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwO1xuICB2YXIgeCA9IGEubGVuZ3RoO1xuICB2YXIgeSA9IGIubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXTtcbiAgICAgIHkgPSBiW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xO1xuICBpZiAoeSA8IHgpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn07XG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnbGF0aW4xJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0KGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTtcbiAgfVxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApO1xuICB9XG4gIHZhciBpO1xuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGg7XG4gICAgfVxuICB9XG4gIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKTtcbiAgdmFyIHBvcyA9IDA7XG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV07XG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7XG4gICAgfVxuICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKTtcbiAgICBwb3MgKz0gYnVmLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gYnVmZmVyO1xufTtcbmZ1bmN0aW9uIGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aDtcbiAgfVxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nICYmIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGg7XG4gIH1cbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgc3RyaW5nID0gJycgKyBzdHJpbmc7XG4gIH1cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGg7XG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwO1xuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZTtcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuO1xuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoO1xuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDI7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxO1xuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGg7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aDsgLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoO1xuZnVuY3Rpb24gc2xvd1RvU3RyaW5nKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlO1xuXG4gIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXG4gIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG4gIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG4gIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IDA7XG4gIH1cbiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcbiAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cbiAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgZW5kID0gdGhpcy5sZW5ndGg7XG4gIH1cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLy8gRm9yY2UgY29lcnNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC5cbiAgZW5kID4+Pj0gMDtcbiAgc3RhcnQgPj4+PSAwO1xuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKTtcbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpO1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKTtcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZCk7XG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZCk7XG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWU7XG4gICAgfVxuICB9XG59XG5cbi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlO1xuZnVuY3Rpb24gc3dhcChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXTtcbiAgYltuXSA9IGJbbV07XG4gIGJbbV0gPSBpO1xufVxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgaWYgKGxlbiAlIDIgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKTtcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKTtcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMyk7XG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0KCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7XG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJyk7XG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gOCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDcpO1xuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KTtcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSk7XG4gICAgc3dhcCh0aGlzLCBpICsgMywgaSArIDQpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMDtcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpO1xuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpO1xuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWU7XG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMDtcbn07XG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkge1xuICB2YXIgc3RyID0gJyc7XG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTO1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJyk7XG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJztcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+Jztcbn07XG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJyk7XG4gIH1cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDA7XG4gIH1cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDA7XG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMDtcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoO1xuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKTtcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICBzdGFydCA+Pj49IDA7XG4gIGVuZCA+Pj49IDA7XG4gIHRoaXNTdGFydCA+Pj49IDA7XG4gIHRoaXNFbmQgPj4+PSAwO1xuICBpZiAodGhpcyA9PT0gdGFyZ2V0KSByZXR1cm4gMDtcbiAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0O1xuICB2YXIgeSA9IGVuZCAtIHN0YXJ0O1xuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSk7XG4gIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKTtcbiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAodGhpc0NvcHlbaV0gIT09IHRhcmdldENvcHlbaV0pIHtcbiAgICAgIHggPSB0aGlzQ29weVtpXTtcbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xO1xuICBpZiAoeSA8IHgpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn07XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG4gIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTE7XG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldDtcbiAgICBieXRlT2Zmc2V0ID0gMDtcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmO1xuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMDtcbiAgfVxuICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQ7IC8vIENvZXJjZSB0byBOdW1iZXIuXG4gIGlmIChpc05hTihieXRlT2Zmc2V0KSkge1xuICAgIC8vIGJ5dGVPZmZzZXQ6IGl0IGl0J3MgdW5kZWZpbmVkLCBudWxsLCBOYU4sIFwiZm9vXCIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlclxuICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogYnVmZmVyLmxlbmd0aCAtIDE7XG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldDtcbiAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkge1xuICAgIGlmIChkaXIpIHJldHVybiAtMTtlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMTtcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwO2Vsc2UgcmV0dXJuIC0xO1xuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKTtcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkY7IC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbdmFsXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcik7XG4gIH1cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJyk7XG59XG5mdW5jdGlvbiBhcnJheUluZGV4T2YoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDE7XG4gIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoO1xuICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aDtcbiAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fCBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG4gICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMjtcbiAgICAgIGFyckxlbmd0aCAvPSAyO1xuICAgICAgdmFsTGVuZ3RoIC89IDI7XG4gICAgICBieXRlT2Zmc2V0IC89IDI7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHJlYWQoYnVmLCBpKSB7XG4gICAgaWYgKGluZGV4U2l6ZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIGJ1ZltpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSk7XG4gICAgfVxuICB9XG4gIHZhciBpO1xuICBpZiAoZGlyKSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMTtcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaTtcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleDtcbiAgICAgICAgZm91bmRJbmRleCA9IC0xO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aDtcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGZvdW5kID0gdHJ1ZTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSk7XG59O1xuQnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKTtcbn07XG5mdW5jdGlvbiBoZXhXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMDtcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXQ7XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nO1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpO1xuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZztcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aDtcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpO1xuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDI7XG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpO1xuICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaTtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWQ7XG4gIH1cbiAgcmV0dXJuIGk7XG59XG5mdW5jdGlvbiB1dGY4V3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpO1xufVxuZnVuY3Rpb24gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpO1xufVxuZnVuY3Rpb24gbGF0aW4xV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCk7XG59XG5mdW5jdGlvbiBiYXNlNjRXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKTtcbn1cbmZ1bmN0aW9uIHVjczJXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCk7XG59XG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCc7XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgb2Zmc2V0ID0gMDtcbiAgICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0O1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICAgIG9mZnNldCA9IDA7XG4gICAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMDtcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4JztcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGg7XG4gICAgICBsZW5ndGggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJyk7XG4gIH1cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0O1xuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmc7XG4gIGlmIChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpO1xuICB9XG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnO1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZTtcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKTtcbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpO1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKTtcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCk7XG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCk7XG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWU7XG4gICAgfVxuICB9XG59O1xuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH07XG59O1xuZnVuY3Rpb24gYmFzZTY0U2xpY2UoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKTtcbiAgfVxufVxuZnVuY3Rpb24gdXRmOFNsaWNlKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpO1xuICB2YXIgcmVzID0gW107XG4gIHZhciBpID0gc3RhcnQ7XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXTtcbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbDtcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IGZpcnN0Qnl0ZSA+IDB4RUYgPyA0IDogZmlyc3RCeXRlID4gMHhERiA/IDMgOiBmaXJzdEJ5dGUgPiAweEJGID8gMiA6IDE7XG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludDtcbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXTtcbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCBzZWNvbmRCeXRlICYgMHgzRjtcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdO1xuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl07XG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCB0aGlyZEJ5dGUgJiAweDNGO1xuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdO1xuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl07XG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM107XG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgZm91cnRoQnl0ZSAmIDB4M0Y7XG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRDtcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxO1xuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDA7XG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApO1xuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkY7XG4gICAgfVxuICAgIHJlcy5wdXNoKGNvZGVQb2ludCk7XG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlO1xuICB9XG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKTtcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDA7XG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGg7XG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpOyAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJztcbiAgdmFyIGkgPSAwO1xuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGFzY2lpU2xpY2UoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJztcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKTtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gbGF0aW4xU2xpY2UoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJztcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKTtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiBoZXhTbGljZShidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7XG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDA7XG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW47XG4gIHZhciBvdXQgPSAnJztcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKTtcbiAgfVxuICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gIHZhciByZXMgPSAnJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xuICBzdGFydCA9IH5+c3RhcnQ7XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmQ7XG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW47XG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwO1xuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW47XG4gIH1cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuO1xuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwO1xuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlbjtcbiAgfVxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0O1xuICB2YXIgbmV3QnVmO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpO1xuICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlO1xuICB9IGVsc2Uge1xuICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0O1xuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgKytpKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF07XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdCdWY7XG59O1xuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0KG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKG9mZnNldCAlIDEgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpO1xuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpO1xufVxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRShvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCk7XG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF07XG4gIHZhciBtdWwgPSAxO1xuICB2YXIgaSA9IDA7XG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWw7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn07XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCk7XG4gIH1cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXTtcbiAgdmFyIG11bCA9IDE7XG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWw7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn07XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpO1xuICByZXR1cm4gdGhpc1tvZmZzZXRdO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCk7XG4gIHJldHVybiB0aGlzW29mZnNldF0gfCB0aGlzW29mZnNldCArIDFdIDw8IDg7XG59O1xuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTtcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSA8PCA4IHwgdGhpc1tvZmZzZXQgKyAxXTtcbn07XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRShvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpO1xuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSB8IHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCB8IHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpICsgdGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMDtcbn07XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRShvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpO1xuICByZXR1cm4gdGhpc1tvZmZzZXRdICogMHgxMDAwMDAwICsgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYgfCB0aGlzW29mZnNldCArIDJdIDw8IDggfCB0aGlzW29mZnNldCArIDNdKTtcbn07XG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRShvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCk7XG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF07XG4gIHZhciBtdWwgPSAxO1xuICB2YXIgaSA9IDA7XG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWw7XG4gIH1cbiAgbXVsICo9IDB4ODA7XG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpO1xuICByZXR1cm4gdmFsO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTtcbiAgdmFyIGkgPSBieXRlTGVuZ3RoO1xuICB2YXIgbXVsID0gMTtcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXTtcbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bDtcbiAgfVxuICBtdWwgKj0gMHg4MDtcbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCk7XG4gIHJldHVybiB2YWw7XG59O1xuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4KG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCk7XG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gdGhpc1tvZmZzZXRdO1xuICByZXR1cm4gKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRShvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpO1xuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgdGhpc1tvZmZzZXQgKyAxXSA8PCA4O1xuICByZXR1cm4gdmFsICYgMHg4MDAwID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbDtcbn07XG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTtcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCB0aGlzW29mZnNldF0gPDwgODtcbiAgcmV0dXJuIHZhbCAmIDB4ODAwMCA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWw7XG59O1xuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7XG4gIHJldHVybiB0aGlzW29mZnNldF0gfCB0aGlzW29mZnNldCArIDFdIDw8IDggfCB0aGlzW29mZnNldCArIDJdIDw8IDE2IHwgdGhpc1tvZmZzZXQgKyAzXSA8PCAyNDtcbn07XG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTtcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSA8PCAyNCB8IHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYgfCB0aGlzW29mZnNldCArIDJdIDw8IDggfCB0aGlzW29mZnNldCArIDNdO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRShvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpO1xuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRShvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpO1xuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KTtcbn07XG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRShvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpO1xuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCk7XG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpO1xufTtcbmZ1bmN0aW9uIGNoZWNrSW50KGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKTtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKTtcbn1cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMTtcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMCk7XG4gIH1cbiAgdmFyIG11bCA9IDE7XG4gIHZhciBpID0gMDtcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGO1xuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAvIG11bCAmIDB4RkY7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGg7XG59O1xuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDA7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxO1xuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKTtcbiAgfVxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxO1xuICB2YXIgbXVsID0gMTtcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRjtcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlIC8gbXVsICYgMHhGRjtcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aDtcbn07XG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4KHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKTtcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKTtcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweGZmO1xuICByZXR1cm4gb2Zmc2V0ICsgMTtcbn07XG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNihidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMTtcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmIDB4ZmYgPDwgOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4O1xuICB9XG59XG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4ZmY7XG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9IHZhbHVlID4+PiA4O1xuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpO1xuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWU7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMCk7XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlID4+PiA4O1xuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSAmIDB4ZmY7XG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpO1xuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyO1xufTtcbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMTtcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDggJiAweGZmO1xuICB9XG59XG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKTtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9IHZhbHVlID4+PiAyNDtcbiAgICB0aGlzW29mZnNldCArIDJdID0gdmFsdWUgPj4+IDE2O1xuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSA+Pj4gODtcbiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4ZmY7XG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSk7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDQ7XG59O1xuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCk7XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlID4+PiAyNDtcbiAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgPj4+IDE2O1xuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSB2YWx1ZSA+Pj4gODtcbiAgICB0aGlzW29mZnNldCArIDNdID0gdmFsdWUgJiAweGZmO1xuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNDtcbn07XG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKTtcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdCk7XG4gIH1cbiAgdmFyIGkgPSAwO1xuICB2YXIgbXVsID0gMTtcbiAgdmFyIHN1YiA9IDA7XG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRjtcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMTtcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCA+PiAwKSAtIHN1YiAmIDB4RkY7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGg7XG59O1xuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSk7XG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpO1xuICB9XG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDE7XG4gIHZhciBtdWwgPSAxO1xuICB2YXIgc3ViID0gMDtcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRjtcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDE7XG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwgPj4gMCkgLSBzdWIgJiAweEZGO1xuICB9XG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4KHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MCk7XG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSk7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMTtcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweGZmO1xuICByZXR1cm4gb2Zmc2V0ICsgMTtcbn07XG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKTtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweGZmO1xuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSA+Pj4gODtcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMjtcbn07XG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKTtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgPj4+IDg7XG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9IHZhbHVlICYgMHhmZjtcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSk7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDI7XG59O1xuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWU7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKTtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweGZmO1xuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSA+Pj4gODtcbiAgICB0aGlzW29mZnNldCArIDJdID0gdmFsdWUgPj4+IDE2O1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZSA+Pj4gMjQ7XG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSk7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDQ7XG59O1xuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWU7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKTtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSA+Pj4gMjQ7XG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9IHZhbHVlID4+PiAxNjtcbiAgICB0aGlzW29mZnNldCArIDJdID0gdmFsdWUgPj4+IDg7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9IHZhbHVlICYgMHhmZjtcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSk7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDQ7XG59O1xuZnVuY3Rpb24gY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpO1xuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpO1xufVxuZnVuY3Rpb24gd3JpdGVGbG9hdChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KTtcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNCk7XG4gIHJldHVybiBvZmZzZXQgKyA0O1xufVxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCk7XG59O1xuZnVuY3Rpb24gd3JpdGVEb3VibGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KTtcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOCk7XG4gIHJldHVybiBvZmZzZXQgKyA4O1xufVxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpO1xufTtcbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCk7XG59O1xuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5KHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwO1xuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoO1xuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoO1xuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDA7XG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydDtcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwO1xuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKTtcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpO1xuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJyk7XG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aDtcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnQ7XG4gIH1cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0O1xuICB2YXIgaTtcbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdO1xuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCh0YXJnZXQsIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSwgdGFyZ2V0U3RhcnQpO1xuICB9XG4gIHJldHVybiBsZW47XG59O1xuXG4vLyBVc2FnZTpcbi8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSlcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kO1xuICAgICAgZW5kID0gdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcbiAgICAgICAgdmFsID0gY29kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDI1NTtcbiAgfVxuXG4gIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4Jyk7XG4gIH1cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDA7XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDA7XG4gIGlmICghdmFsKSB2YWwgPSAwO1xuICB2YXIgaTtcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbCkgPyB2YWwgOiB1dGY4VG9CeXRlcyhuZXcgQnVmZmVyKHZhbCwgZW5jb2RpbmcpLnRvU3RyaW5nKCkpO1xuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcbiAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nO1xuZnVuY3Rpb24gYmFzZTY0Y2xlYW4oc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpO1xuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnO1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nO1xuICB9XG4gIHJldHVybiBzdHI7XG59XG5mdW5jdGlvbiBzdHJpbmd0cmltKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpO1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbn1cbmZ1bmN0aW9uIHRvSGV4KG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpO1xuICByZXR1cm4gbi50b1N0cmluZygxNik7XG59XG5mdW5jdGlvbiB1dGY4VG9CeXRlcyhzdHJpbmcsIHVuaXRzKSB7XG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHk7XG4gIHZhciBjb2RlUG9pbnQ7XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGw7XG4gIHZhciBieXRlcyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKTtcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwO1xuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpO1xuICAgIH1cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbDtcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVhaztcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KTtcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWs7XG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludCA+PiAweDYgfCAweEMwLCBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MCk7XG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWs7XG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludCA+PiAweEMgfCAweEUwLCBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwKTtcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWs7XG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCwgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLCBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGJ5dGVzO1xufVxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKTtcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5O1xufVxuZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvO1xuICB2YXIgYnl0ZUFycmF5ID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrO1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBoaSA9IGMgPj4gODtcbiAgICBsbyA9IGMgJSAyNTY7XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pO1xuICAgIGJ5dGVBcnJheS5wdXNoKGhpKTtcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5O1xufVxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyhzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKTtcbn1cbmZ1bmN0aW9uIGJsaXRCdWZmZXIoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoIHx8IGkgPj0gc3JjLmxlbmd0aCkgYnJlYWs7XG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldO1xuICB9XG4gIHJldHVybiBpO1xufVxuZnVuY3Rpb24gaXNuYW4odmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmVcbn0iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cblxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHtcbiAgICBfX3Byb3RvX186IFtdXG4gIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikge1xuICAgIGQuX19wcm90b19fID0gYjtcbiAgfSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICB9O1xuICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbn07XG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcbiAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgZnVuY3Rpb24gX18oKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7XG4gIH1cbiAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufVxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uICgpIHtcbiAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfTtcbiAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XG4gIHZhciB0ID0ge307XG4gIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKSB0W3BdID0gc1twXTtcbiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKSBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKSB0W3BbaV1dID0gc1twW2ldXTtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYyxcbiAgICBkO1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO2Vsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59XG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkge1xuICAgIGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7XG4gIH07XG59XG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkge1xuICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgfVxuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xuICB2YXIgXyA9IHtcbiAgICAgIGxhYmVsOiAwLFxuICAgICAgc2VudDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodFswXSAmIDEpIHRocm93IHRbMV07XG4gICAgICAgIHJldHVybiB0WzFdO1xuICAgICAgfSxcbiAgICAgIHRyeXM6IFtdLFxuICAgICAgb3BzOiBbXVxuICAgIH0sXG4gICAgZixcbiAgICB5LFxuICAgIHQsXG4gICAgZztcbiAgcmV0dXJuIGcgPSB7XG4gICAgbmV4dDogdmVyYigwKSxcbiAgICBcInRocm93XCI6IHZlcmIoMSksXG4gICAgXCJyZXR1cm5cIjogdmVyYigyKVxuICB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSksIGc7XG4gIGZ1bmN0aW9uIHZlcmIobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIHN0ZXAoW24sIHZdKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHQgPSBvcDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIF8ubGFiZWwrKztcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IG9wWzFdLFxuICAgICAgICAgICAgZG9uZTogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgXy5sYWJlbCsrO1xuICAgICAgICAgIHkgPSBvcFsxXTtcbiAgICAgICAgICBvcCA9IFswXTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIG9wID0gXy5vcHMucG9wKCk7XG4gICAgICAgICAgXy50cnlzLnBvcCgpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7XG4gICAgICAgICAgICBfID0gMDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSB7XG4gICAgICAgICAgICBfLmxhYmVsID0gb3BbMV07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7XG4gICAgICAgICAgICBfLmxhYmVsID0gdFsxXTtcbiAgICAgICAgICAgIHQgPSBvcDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkge1xuICAgICAgICAgICAgXy5sYWJlbCA9IHRbMl07XG4gICAgICAgICAgICBfLm9wcy5wdXNoKG9wKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgXy50cnlzLnBvcCgpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgb3AgPSBbNiwgZV07XG4gICAgICB5ID0gMDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZiA9IHQgPSAwO1xuICAgIH1cbiAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsXG4gICAgICBkb25lOiB0cnVlXG4gICAgfTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIF9fY3JlYXRlQmluZGluZyhvLCBtLCBrLCBrMikge1xuICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICBvW2syXSA9IG1ba107XG59XG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcbiAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcbiAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLFxuICAgIG0gPSBzICYmIG9bc10sXG4gICAgaSA9IDA7XG4gIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xuICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBvICYmIG9baSsrXSxcbiAgICAgICAgZG9uZTogIW9cbiAgICAgIH07XG4gICAgfVxuICB9O1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59XG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcbiAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xuICBpZiAoIW0pIHJldHVybiBvO1xuICB2YXIgaSA9IG0uY2FsbChvKSxcbiAgICByLFxuICAgIGFyID0gW10sXG4gICAgZTtcbiAgdHJ5IHtcbiAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBlID0ge1xuICAgICAgZXJyb3I6IGVycm9yXG4gICAgfTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChlKSB0aHJvdyBlLmVycm9yO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXI7XG59XG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XG4gIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XG4gIHJldHVybiBhcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcbiAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XG4gIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKykgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHJba10gPSBhW2pdO1xuICByZXR1cm4gcjtcbn1cbjtcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcbiAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XG59XG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksXG4gICAgaSxcbiAgICBxID0gW107XG4gIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9LCBpO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHtcbiAgICBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHtcbiAgICB0cnkge1xuICAgICAgc3RlcChnW25dKHYpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBzZXR0bGUocVswXVszXSwgZSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHN0ZXAocikge1xuICAgIHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpO1xuICB9XG4gIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHtcbiAgICByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTtcbiAgfVxuICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHtcbiAgICByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHtcbiAgICBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XG4gIHZhciBpLCBwO1xuICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgdGhyb3cgZTtcbiAgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgaTtcbiAgZnVuY3Rpb24gdmVyYihuLCBmKSB7XG4gICAgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIChwID0gIXApID8ge1xuICAgICAgICB2YWx1ZTogX19hd2FpdChvW25dKHYpKSxcbiAgICAgICAgZG9uZTogbiA9PT0gXCJyZXR1cm5cIlxuICAgICAgfSA6IGYgPyBmKHYpIDogdjtcbiAgICB9IDogZjtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLFxuICAgIGk7XG4gIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sIGkpO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHtcbiAgICBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHtcbiAgICBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbiAodikge1xuICAgICAgcmVzb2x2ZSh7XG4gICAgICAgIHZhbHVlOiB2LFxuICAgICAgICBkb25lOiBkXG4gICAgICB9KTtcbiAgICB9LCByZWplY3QpO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcbiAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHtcbiAgICAgIHZhbHVlOiByYXdcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb29rZWQucmF3ID0gcmF3O1xuICB9XG4gIHJldHVybiBjb29rZWQ7XG59XG47XG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xuICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XG4gIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcbiAgcmV0dXJuIG1vZCAmJiBtb2QuX19lc01vZHVsZSA/IG1vZCA6IHtcbiAgICBkZWZhdWx0OiBtb2RcbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XG4gIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgcmV0dXJuIHByaXZhdGVNYXAuZ2V0KHJlY2VpdmVyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xuICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xuICB9XG4gIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuTUFYX0hBU0hBQkxFX0xFTkdUSCA9IGV4cG9ydHMuSU5JVCA9IGV4cG9ydHMuS0VZID0gZXhwb3J0cy5ESUdFU1RfTEVOR1RIID0gZXhwb3J0cy5CTE9DS19TSVpFID0gdm9pZCAwO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0cy5CTE9DS19TSVpFID0gNjQ7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnRzLkRJR0VTVF9MRU5HVEggPSAzMjtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydHMuS0VZID0gbmV3IFVpbnQzMkFycmF5KFsweDQyOGEyZjk4LCAweDcxMzc0NDkxLCAweGI1YzBmYmNmLCAweGU5YjVkYmE1LCAweDM5NTZjMjViLCAweDU5ZjExMWYxLCAweDkyM2Y4MmE0LCAweGFiMWM1ZWQ1LCAweGQ4MDdhYTk4LCAweDEyODM1YjAxLCAweDI0MzE4NWJlLCAweDU1MGM3ZGMzLCAweDcyYmU1ZDc0LCAweDgwZGViMWZlLCAweDliZGMwNmE3LCAweGMxOWJmMTc0LCAweGU0OWI2OWMxLCAweGVmYmU0Nzg2LCAweDBmYzE5ZGM2LCAweDI0MGNhMWNjLCAweDJkZTkyYzZmLCAweDRhNzQ4NGFhLCAweDVjYjBhOWRjLCAweDc2Zjk4OGRhLCAweDk4M2U1MTUyLCAweGE4MzFjNjZkLCAweGIwMDMyN2M4LCAweGJmNTk3ZmM3LCAweGM2ZTAwYmYzLCAweGQ1YTc5MTQ3LCAweDA2Y2E2MzUxLCAweDE0MjkyOTY3LCAweDI3YjcwYTg1LCAweDJlMWIyMTM4LCAweDRkMmM2ZGZjLCAweDUzMzgwZDEzLCAweDY1MGE3MzU0LCAweDc2NmEwYWJiLCAweDgxYzJjOTJlLCAweDkyNzIyYzg1LCAweGEyYmZlOGExLCAweGE4MWE2NjRiLCAweGMyNGI4YjcwLCAweGM3NmM1MWEzLCAweGQxOTJlODE5LCAweGQ2OTkwNjI0LCAweGY0MGUzNTg1LCAweDEwNmFhMDcwLCAweDE5YTRjMTE2LCAweDFlMzc2YzA4LCAweDI3NDg3NzRjLCAweDM0YjBiY2I1LCAweDM5MWMwY2IzLCAweDRlZDhhYTRhLCAweDViOWNjYTRmLCAweDY4MmU2ZmYzLCAweDc0OGY4MmVlLCAweDc4YTU2MzZmLCAweDg0Yzg3ODE0LCAweDhjYzcwMjA4LCAweDkwYmVmZmZhLCAweGE0NTA2Y2ViLCAweGJlZjlhM2Y3LCAweGM2NzE3OGYyXSk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnRzLklOSVQgPSBbMHg2YTA5ZTY2NywgMHhiYjY3YWU4NSwgMHgzYzZlZjM3MiwgMHhhNTRmZjUzYSwgMHg1MTBlNTI3ZiwgMHg5YjA1Njg4YywgMHgxZjgzZDlhYiwgMHg1YmUwY2QxOV07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnRzLk1BWF9IQVNIQUJMRV9MRU5HVEggPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlJhd1NoYTI1NiA9IHZvaWQgMDtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbnZhciBSYXdTaGEyNTYgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSYXdTaGEyNTYoKSB7XG4gICAgdGhpcy5zdGF0ZSA9IEludDMyQXJyYXkuZnJvbShjb25zdGFudHNfMS5JTklUKTtcbiAgICB0aGlzLnRlbXAgPSBuZXcgSW50MzJBcnJheSg2NCk7XG4gICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSg2NCk7XG4gICAgdGhpcy5idWZmZXJMZW5ndGggPSAwO1xuICAgIHRoaXMuYnl0ZXNIYXNoZWQgPSAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgfVxuICBSYXdTaGEyNTYucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgaWYgKHRoaXMuZmluaXNoZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byB1cGRhdGUgYW4gYWxyZWFkeSBmaW5pc2hlZCBoYXNoLlwiKTtcbiAgICB9XG4gICAgdmFyIHBvc2l0aW9uID0gMDtcbiAgICB2YXIgYnl0ZUxlbmd0aCA9IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICB0aGlzLmJ5dGVzSGFzaGVkICs9IGJ5dGVMZW5ndGg7XG4gICAgaWYgKHRoaXMuYnl0ZXNIYXNoZWQgKiA4ID4gY29uc3RhbnRzXzEuTUFYX0hBU0hBQkxFX0xFTkdUSCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhc2ggbW9yZSB0aGFuIDJeNTMgLSAxIGJpdHNcIik7XG4gICAgfVxuICAgIHdoaWxlIChieXRlTGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5idWZmZXJbdGhpcy5idWZmZXJMZW5ndGgrK10gPSBkYXRhW3Bvc2l0aW9uKytdO1xuICAgICAgYnl0ZUxlbmd0aC0tO1xuICAgICAgaWYgKHRoaXMuYnVmZmVyTGVuZ3RoID09PSBjb25zdGFudHNfMS5CTE9DS19TSVpFKSB7XG4gICAgICAgIHRoaXMuaGFzaEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLmJ1ZmZlckxlbmd0aCA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBSYXdTaGEyNTYucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuZmluaXNoZWQpIHtcbiAgICAgIHZhciBiaXRzSGFzaGVkID0gdGhpcy5ieXRlc0hhc2hlZCAqIDg7XG4gICAgICB2YXIgYnVmZmVyVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlci5idWZmZXIsIHRoaXMuYnVmZmVyLmJ5dGVPZmZzZXQsIHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgdmFyIHVuZGVjb3JhdGVkTGVuZ3RoID0gdGhpcy5idWZmZXJMZW5ndGg7XG4gICAgICBidWZmZXJWaWV3LnNldFVpbnQ4KHRoaXMuYnVmZmVyTGVuZ3RoKyssIDB4ODApO1xuICAgICAgLy8gRW5zdXJlIHRoZSBmaW5hbCBibG9jayBoYXMgZW5vdWdoIHJvb20gZm9yIHRoZSBoYXNoZWQgbGVuZ3RoXG4gICAgICBpZiAodW5kZWNvcmF0ZWRMZW5ndGggJSBjb25zdGFudHNfMS5CTE9DS19TSVpFID49IGNvbnN0YW50c18xLkJMT0NLX1NJWkUgLSA4KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmJ1ZmZlckxlbmd0aDsgaSA8IGNvbnN0YW50c18xLkJMT0NLX1NJWkU7IGkrKykge1xuICAgICAgICAgIGJ1ZmZlclZpZXcuc2V0VWludDgoaSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNoQnVmZmVyKCk7XG4gICAgICAgIHRoaXMuYnVmZmVyTGVuZ3RoID0gMDtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmJ1ZmZlckxlbmd0aDsgaSA8IGNvbnN0YW50c18xLkJMT0NLX1NJWkUgLSA4OyBpKyspIHtcbiAgICAgICAgYnVmZmVyVmlldy5zZXRVaW50OChpLCAwKTtcbiAgICAgIH1cbiAgICAgIGJ1ZmZlclZpZXcuc2V0VWludDMyKGNvbnN0YW50c18xLkJMT0NLX1NJWkUgLSA4LCBNYXRoLmZsb29yKGJpdHNIYXNoZWQgLyAweDEwMDAwMDAwMCksIHRydWUpO1xuICAgICAgYnVmZmVyVmlldy5zZXRVaW50MzIoY29uc3RhbnRzXzEuQkxPQ0tfU0laRSAtIDQsIGJpdHNIYXNoZWQpO1xuICAgICAgdGhpcy5oYXNoQnVmZmVyKCk7XG4gICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gVGhlIHZhbHVlIGluIHN0YXRlIGlzIGxpdHRsZS1lbmRpYW4gcmF0aGVyIHRoYW4gYmlnLWVuZGlhbiwgc28gZmxpcFxuICAgIC8vIGVhY2ggd29yZCBpbnRvIGEgbmV3IFVpbnQ4QXJyYXlcbiAgICB2YXIgb3V0ID0gbmV3IFVpbnQ4QXJyYXkoY29uc3RhbnRzXzEuRElHRVNUX0xFTkdUSCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgIG91dFtpICogNF0gPSB0aGlzLnN0YXRlW2ldID4+PiAyNCAmIDB4ZmY7XG4gICAgICBvdXRbaSAqIDQgKyAxXSA9IHRoaXMuc3RhdGVbaV0gPj4+IDE2ICYgMHhmZjtcbiAgICAgIG91dFtpICogNCArIDJdID0gdGhpcy5zdGF0ZVtpXSA+Pj4gOCAmIDB4ZmY7XG4gICAgICBvdXRbaSAqIDQgKyAzXSA9IHRoaXMuc3RhdGVbaV0gPj4+IDAgJiAweGZmO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9O1xuICBSYXdTaGEyNTYucHJvdG90eXBlLmhhc2hCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9hID0gdGhpcyxcbiAgICAgIGJ1ZmZlciA9IF9hLmJ1ZmZlcixcbiAgICAgIHN0YXRlID0gX2Euc3RhdGU7XG4gICAgdmFyIHN0YXRlMCA9IHN0YXRlWzBdLFxuICAgICAgc3RhdGUxID0gc3RhdGVbMV0sXG4gICAgICBzdGF0ZTIgPSBzdGF0ZVsyXSxcbiAgICAgIHN0YXRlMyA9IHN0YXRlWzNdLFxuICAgICAgc3RhdGU0ID0gc3RhdGVbNF0sXG4gICAgICBzdGF0ZTUgPSBzdGF0ZVs1XSxcbiAgICAgIHN0YXRlNiA9IHN0YXRlWzZdLFxuICAgICAgc3RhdGU3ID0gc3RhdGVbN107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25zdGFudHNfMS5CTE9DS19TSVpFOyBpKyspIHtcbiAgICAgIGlmIChpIDwgMTYpIHtcbiAgICAgICAgdGhpcy50ZW1wW2ldID0gKGJ1ZmZlcltpICogNF0gJiAweGZmKSA8PCAyNCB8IChidWZmZXJbaSAqIDQgKyAxXSAmIDB4ZmYpIDw8IDE2IHwgKGJ1ZmZlcltpICogNCArIDJdICYgMHhmZikgPDwgOCB8IGJ1ZmZlcltpICogNCArIDNdICYgMHhmZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB1ID0gdGhpcy50ZW1wW2kgLSAyXTtcbiAgICAgICAgdmFyIHQxXzEgPSAodSA+Pj4gMTcgfCB1IDw8IDE1KSBeICh1ID4+PiAxOSB8IHUgPDwgMTMpIF4gdSA+Pj4gMTA7XG4gICAgICAgIHUgPSB0aGlzLnRlbXBbaSAtIDE1XTtcbiAgICAgICAgdmFyIHQyXzEgPSAodSA+Pj4gNyB8IHUgPDwgMjUpIF4gKHUgPj4+IDE4IHwgdSA8PCAxNCkgXiB1ID4+PiAzO1xuICAgICAgICB0aGlzLnRlbXBbaV0gPSAodDFfMSArIHRoaXMudGVtcFtpIC0gN10gfCAwKSArICh0Ml8xICsgdGhpcy50ZW1wW2kgLSAxNl0gfCAwKTtcbiAgICAgIH1cbiAgICAgIHZhciB0MSA9ICgoKHN0YXRlNCA+Pj4gNiB8IHN0YXRlNCA8PCAyNikgXiAoc3RhdGU0ID4+PiAxMSB8IHN0YXRlNCA8PCAyMSkgXiAoc3RhdGU0ID4+PiAyNSB8IHN0YXRlNCA8PCA3KSkgKyAoc3RhdGU0ICYgc3RhdGU1IF4gfnN0YXRlNCAmIHN0YXRlNikgfCAwKSArIChzdGF0ZTcgKyAoY29uc3RhbnRzXzEuS0VZW2ldICsgdGhpcy50ZW1wW2ldIHwgMCkgfCAwKSB8IDA7XG4gICAgICB2YXIgdDIgPSAoKHN0YXRlMCA+Pj4gMiB8IHN0YXRlMCA8PCAzMCkgXiAoc3RhdGUwID4+PiAxMyB8IHN0YXRlMCA8PCAxOSkgXiAoc3RhdGUwID4+PiAyMiB8IHN0YXRlMCA8PCAxMCkpICsgKHN0YXRlMCAmIHN0YXRlMSBeIHN0YXRlMCAmIHN0YXRlMiBeIHN0YXRlMSAmIHN0YXRlMikgfCAwO1xuICAgICAgc3RhdGU3ID0gc3RhdGU2O1xuICAgICAgc3RhdGU2ID0gc3RhdGU1O1xuICAgICAgc3RhdGU1ID0gc3RhdGU0O1xuICAgICAgc3RhdGU0ID0gc3RhdGUzICsgdDEgfCAwO1xuICAgICAgc3RhdGUzID0gc3RhdGUyO1xuICAgICAgc3RhdGUyID0gc3RhdGUxO1xuICAgICAgc3RhdGUxID0gc3RhdGUwO1xuICAgICAgc3RhdGUwID0gdDEgKyB0MiB8IDA7XG4gICAgfVxuICAgIHN0YXRlWzBdICs9IHN0YXRlMDtcbiAgICBzdGF0ZVsxXSArPSBzdGF0ZTE7XG4gICAgc3RhdGVbMl0gKz0gc3RhdGUyO1xuICAgIHN0YXRlWzNdICs9IHN0YXRlMztcbiAgICBzdGF0ZVs0XSArPSBzdGF0ZTQ7XG4gICAgc3RhdGVbNV0gKz0gc3RhdGU1O1xuICAgIHN0YXRlWzZdICs9IHN0YXRlNjtcbiAgICBzdGF0ZVs3XSArPSBzdGF0ZTc7XG4gIH07XG4gIHJldHVybiBSYXdTaGEyNTY7XG59KCk7XG5leHBvcnRzLlJhd1NoYTI1NiA9IFJhd1NoYTI1NjtcbiIsImV4cG9ydCBjb25zdCBmcm9tVXRmOCA9IGlucHV0ID0+IHtcbiAgY29uc3QgYnl0ZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGlucHV0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgdmFsdWUgPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xuICAgIGlmICh2YWx1ZSA8IDB4ODApIHtcbiAgICAgIGJ5dGVzLnB1c2godmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPCAweDgwMCkge1xuICAgICAgYnl0ZXMucHVzaCh2YWx1ZSA+PiA2IHwgMGIxMTAwMDAwMCwgdmFsdWUgJiAwYjExMTExMSB8IDBiMTAwMDAwMDApO1xuICAgIH0gZWxzZSBpZiAoaSArIDEgPCBpbnB1dC5sZW5ndGggJiYgKHZhbHVlICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChpbnB1dC5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xuICAgICAgY29uc3Qgc3Vycm9nYXRlUGFpciA9IDB4MTAwMDAgKyAoKHZhbHVlICYgMGIxMTExMTExMTExKSA8PCAxMCkgKyAoaW5wdXQuY2hhckNvZGVBdCgrK2kpICYgMGIxMTExMTExMTExKTtcbiAgICAgIGJ5dGVzLnB1c2goc3Vycm9nYXRlUGFpciA+PiAxOCB8IDBiMTExMTAwMDAsIHN1cnJvZ2F0ZVBhaXIgPj4gMTIgJiAwYjExMTExMSB8IDBiMTAwMDAwMDAsIHN1cnJvZ2F0ZVBhaXIgPj4gNiAmIDBiMTExMTExIHwgMGIxMDAwMDAwMCwgc3Vycm9nYXRlUGFpciAmIDBiMTExMTExIHwgMGIxMDAwMDAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ5dGVzLnB1c2godmFsdWUgPj4gMTIgfCAwYjExMTAwMDAwLCB2YWx1ZSA+PiA2ICYgMGIxMTExMTEgfCAwYjEwMDAwMDAwLCB2YWx1ZSAmIDBiMTExMTExIHwgMGIxMDAwMDAwMCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBVaW50OEFycmF5LmZyb20oYnl0ZXMpO1xufTtcbmV4cG9ydCBjb25zdCB0b1V0ZjggPSBpbnB1dCA9PiB7XG4gIGxldCBkZWNvZGVkID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGlucHV0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgYnl0ZSA9IGlucHV0W2ldO1xuICAgIGlmIChieXRlIDwgMHg4MCkge1xuICAgICAgZGVjb2RlZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGUpO1xuICAgIH0gZWxzZSBpZiAoMGIxMTAwMDAwMCA8PSBieXRlICYmIGJ5dGUgPCAwYjExMTAwMDAwKSB7XG4gICAgICBjb25zdCBuZXh0Qnl0ZSA9IGlucHV0WysraV07XG4gICAgICBkZWNvZGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGJ5dGUgJiAwYjExMTExKSA8PCA2IHwgbmV4dEJ5dGUgJiAwYjExMTExMSk7XG4gICAgfSBlbHNlIGlmICgwYjExMTEwMDAwIDw9IGJ5dGUgJiYgYnl0ZSA8IDBiMTAxMTAxMTAxKSB7XG4gICAgICBjb25zdCBzdXJyb2dhdGVQYWlyID0gW2J5dGUsIGlucHV0WysraV0sIGlucHV0WysraV0sIGlucHV0WysraV1dO1xuICAgICAgY29uc3QgZW5jb2RlZCA9IFwiJVwiICsgc3Vycm9nYXRlUGFpci5tYXAoYnl0ZVZhbHVlID0+IGJ5dGVWYWx1ZS50b1N0cmluZygxNikpLmpvaW4oXCIlXCIpO1xuICAgICAgZGVjb2RlZCArPSBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlY29kZWQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYnl0ZSAmIDBiMTExMSkgPDwgMTIgfCAoaW5wdXRbKytpXSAmIDBiMTExMTExKSA8PCA2IHwgaW5wdXRbKytpXSAmIDBiMTExMTExKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlY29kZWQ7XG59OyIsImV4cG9ydCBmdW5jdGlvbiBmcm9tVXRmOChpbnB1dCkge1xuICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlucHV0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0b1V0ZjgoaW5wdXQpIHtcbiAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLmRlY29kZShpbnB1dCk7XG59IiwiaW1wb3J0IHsgZnJvbVV0ZjggYXMganNGcm9tVXRmOCwgdG9VdGY4IGFzIGpzVG9VdGY4IH0gZnJvbSBcIi4vcHVyZUpzXCI7XG5pbXBvcnQgeyBmcm9tVXRmOCBhcyB0ZXh0RW5jb2RlckZyb21VdGY4LCB0b1V0ZjggYXMgdGV4dEVuY29kZXJUb1V0ZjggfSBmcm9tIFwiLi93aGF0d2dFbmNvZGluZ0FwaVwiO1xuZXhwb3J0IGNvbnN0IGZyb21VdGY4ID0gaW5wdXQgPT4gdHlwZW9mIFRleHRFbmNvZGVyID09PSBcImZ1bmN0aW9uXCIgPyB0ZXh0RW5jb2RlckZyb21VdGY4KGlucHV0KSA6IGpzRnJvbVV0ZjgoaW5wdXQpO1xuZXhwb3J0IGNvbnN0IHRvVXRmOCA9IGlucHV0ID0+IHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gXCJmdW5jdGlvblwiID8gdGV4dEVuY29kZXJUb1V0ZjgoaW5wdXQpIDoganNUb1V0ZjgoaW5wdXQpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBDb3B5cmlnaHQgQW1hem9uLmNvbSBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmNvbnZlcnRUb0J1ZmZlciA9IHZvaWQgMDtcbnZhciB1dGlsX3V0ZjhfYnJvd3Nlcl8xID0gcmVxdWlyZShcIkBhd3Mtc2RrL3V0aWwtdXRmOC1icm93c2VyXCIpO1xuLy8gUXVpY2sgcG9seWZpbGxcbnZhciBmcm9tVXRmOCA9IHR5cGVvZiBCdWZmZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgQnVmZmVyLmZyb20gPyBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGlucHV0LCBcInV0ZjhcIik7XG59IDogdXRpbF91dGY4X2Jyb3dzZXJfMS5mcm9tVXRmODtcbmZ1bmN0aW9uIGNvbnZlcnRUb0J1ZmZlcihkYXRhKSB7XG4gIC8vIEFscmVhZHkgYSBVaW50OCwgZG8gbm90aGluZ1xuICBpZiAoZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBkYXRhO1xuICBpZiAodHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZnJvbVV0ZjgoZGF0YSk7XG4gIH1cbiAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkge1xuICAgIHJldHVybiBuZXcgVWludDhBcnJheShkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVMZW5ndGggLyBVaW50OEFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgfVxuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG59XG5leHBvcnRzLmNvbnZlcnRUb0J1ZmZlciA9IGNvbnZlcnRUb0J1ZmZlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBDb3B5cmlnaHQgQW1hem9uLmNvbSBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmlzRW1wdHlEYXRhID0gdm9pZCAwO1xuZnVuY3Rpb24gaXNFbXB0eURhdGEoZGF0YSkge1xuICBpZiAodHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZGF0YS5sZW5ndGggPT09IDA7XG4gIH1cbiAgcmV0dXJuIGRhdGEuYnl0ZUxlbmd0aCA9PT0gMDtcbn1cbmV4cG9ydHMuaXNFbXB0eURhdGEgPSBpc0VtcHR5RGF0YTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBDb3B5cmlnaHQgQW1hem9uLmNvbSBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLm51bVRvVWludDggPSB2b2lkIDA7XG5mdW5jdGlvbiBudW1Ub1VpbnQ4KG51bSkge1xuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWyhudW0gJiAweGZmMDAwMDAwKSA+PiAyNCwgKG51bSAmIDB4MDBmZjAwMDApID4+IDE2LCAobnVtICYgMHgwMDAwZmYwMCkgPj4gOCwgbnVtICYgMHgwMDAwMDBmZl0pO1xufVxuZXhwb3J0cy5udW1Ub1VpbnQ4ID0gbnVtVG9VaW50ODtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBDb3B5cmlnaHQgQW1hem9uLmNvbSBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnVpbnQzMkFycmF5RnJvbSA9IHZvaWQgMDtcbi8vIElFIDExIGRvZXMgbm90IHN1cHBvcnQgQXJyYXkuZnJvbSwgc28gd2UgZG8gaXQgbWFudWFsbHlcbmZ1bmN0aW9uIHVpbnQzMkFycmF5RnJvbShhX2xvb2tVcFRhYmxlKSB7XG4gIGlmICghQXJyYXkuZnJvbSkge1xuICAgIHZhciByZXR1cm5fYXJyYXkgPSBuZXcgVWludDMyQXJyYXkoYV9sb29rVXBUYWJsZS5sZW5ndGgpO1xuICAgIHZhciBhX2luZGV4ID0gMDtcbiAgICB3aGlsZSAoYV9pbmRleCA8IGFfbG9va1VwVGFibGUubGVuZ3RoKSB7XG4gICAgICByZXR1cm5fYXJyYXlbYV9pbmRleF0gPSBhX2xvb2tVcFRhYmxlW2FfaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuX2FycmF5O1xuICB9XG4gIHJldHVybiBVaW50MzJBcnJheS5mcm9tKGFfbG9va1VwVGFibGUpO1xufVxuZXhwb3J0cy51aW50MzJBcnJheUZyb20gPSB1aW50MzJBcnJheUZyb207XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gQ29weXJpZ2h0IEFtYXpvbi5jb20gSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy51aW50MzJBcnJheUZyb20gPSBleHBvcnRzLm51bVRvVWludDggPSBleHBvcnRzLmlzRW1wdHlEYXRhID0gZXhwb3J0cy5jb252ZXJ0VG9CdWZmZXIgPSB2b2lkIDA7XG52YXIgY29udmVydFRvQnVmZmVyXzEgPSByZXF1aXJlKFwiLi9jb252ZXJ0VG9CdWZmZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjb252ZXJ0VG9CdWZmZXJcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY29udmVydFRvQnVmZmVyXzEuY29udmVydFRvQnVmZmVyO1xuICB9XG59KTtcbnZhciBpc0VtcHR5RGF0YV8xID0gcmVxdWlyZShcIi4vaXNFbXB0eURhdGFcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJpc0VtcHR5RGF0YVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBpc0VtcHR5RGF0YV8xLmlzRW1wdHlEYXRhO1xuICB9XG59KTtcbnZhciBudW1Ub1VpbnQ4XzEgPSByZXF1aXJlKFwiLi9udW1Ub1VpbnQ4XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwibnVtVG9VaW50OFwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBudW1Ub1VpbnQ4XzEubnVtVG9VaW50ODtcbiAgfVxufSk7XG52YXIgdWludDMyQXJyYXlGcm9tXzEgPSByZXF1aXJlKFwiLi91aW50MzJBcnJheUZyb21cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ1aW50MzJBcnJheUZyb21cIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdWludDMyQXJyYXlGcm9tXzEudWludDMyQXJyYXlGcm9tO1xuICB9XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5TaGEyNTYgPSB2b2lkIDA7XG52YXIgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbnZhciBSYXdTaGEyNTZfMSA9IHJlcXVpcmUoXCIuL1Jhd1NoYTI1NlwiKTtcbnZhciB1dGlsXzEgPSByZXF1aXJlKFwiQGF3cy1jcnlwdG8vdXRpbFwiKTtcbnZhciBTaGEyNTYgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTaGEyNTYoc2VjcmV0KSB7XG4gICAgdGhpcy5oYXNoID0gbmV3IFJhd1NoYTI1Nl8xLlJhd1NoYTI1NigpO1xuICAgIGlmIChzZWNyZXQpIHtcbiAgICAgIHRoaXMub3V0ZXIgPSBuZXcgUmF3U2hhMjU2XzEuUmF3U2hhMjU2KCk7XG4gICAgICB2YXIgaW5uZXIgPSBidWZmZXJGcm9tU2VjcmV0KHNlY3JldCk7XG4gICAgICB2YXIgb3V0ZXIgPSBuZXcgVWludDhBcnJheShjb25zdGFudHNfMS5CTE9DS19TSVpFKTtcbiAgICAgIG91dGVyLnNldChpbm5lcik7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnN0YW50c18xLkJMT0NLX1NJWkU7IGkrKykge1xuICAgICAgICBpbm5lcltpXSBePSAweDM2O1xuICAgICAgICBvdXRlcltpXSBePSAweDVjO1xuICAgICAgfVxuICAgICAgdGhpcy5oYXNoLnVwZGF0ZShpbm5lcik7XG4gICAgICB0aGlzLm91dGVyLnVwZGF0ZShvdXRlcik7XG4gICAgICAvLyBvdmVyd3JpdGUgdGhlIGNvcGllZCBrZXkgaW4gbWVtb3J5XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlubmVyLmJ5dGVMZW5ndGg7IGkrKykge1xuICAgICAgICBpbm5lcltpXSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFNoYTI1Ni5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRvSGFzaCkge1xuICAgIGlmICgoMCwgdXRpbF8xLmlzRW1wdHlEYXRhKSh0b0hhc2gpIHx8IHRoaXMuZXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuaGFzaC51cGRhdGUoKDAsIHV0aWxfMS5jb252ZXJ0VG9CdWZmZXIpKHRvSGFzaCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBlO1xuICAgIH1cbiAgfTtcbiAgLyogVGhpcyBzeW5jaHJvbm91cyBtZXRob2Qga2VlcHMgY29tcGF0aWJpbGl0eVxuICAgKiB3aXRoIHRoZSB2MiBhd3Mtc2RrLlxuICAgKi9cbiAgU2hhMjU2LnByb3RvdHlwZS5kaWdlc3RTeW5jID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICB0aHJvdyB0aGlzLmVycm9yO1xuICAgIH1cbiAgICBpZiAodGhpcy5vdXRlcikge1xuICAgICAgaWYgKCF0aGlzLm91dGVyLmZpbmlzaGVkKSB7XG4gICAgICAgIHRoaXMub3V0ZXIudXBkYXRlKHRoaXMuaGFzaC5kaWdlc3QoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5vdXRlci5kaWdlc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaGFzaC5kaWdlc3QoKTtcbiAgfTtcbiAgLyogVGhlIHVuZGVybHlpbmcgZGlnZXN0IG1ldGhvZCBoZXJlIGlzIHN5bmNocm9ub3VzLlxuICAgKiBUbyBrZWVwIHRoZSBzYW1lIGludGVyZmFjZSB3aXRoIHRoZSBvdGhlciBoYXNoIGZ1bmN0aW9uc1xuICAgKiB0aGUgZGVmYXVsdCBpcyB0byBleHBvc2UgdGhpcyBhcyBhbiBhc3luYyBtZXRob2QuXG4gICAqIEhvd2V2ZXIsIGl0IGNhbiBzb21ldGltZXMgYmUgdXNlZnVsIHRvIGhhdmUgYSBzeW5jIG1ldGhvZC5cbiAgICovXG4gIFNoYTI1Ni5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoMCwgdHNsaWJfMS5fX2F3YWl0ZXIpKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKDAsIHRzbGliXzEuX19nZW5lcmF0b3IpKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5kaWdlc3RTeW5jKCldO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiBTaGEyNTY7XG59KCk7XG5leHBvcnRzLlNoYTI1NiA9IFNoYTI1NjtcbmZ1bmN0aW9uIGJ1ZmZlckZyb21TZWNyZXQoc2VjcmV0KSB7XG4gIHZhciBpbnB1dCA9ICgwLCB1dGlsXzEuY29udmVydFRvQnVmZmVyKShzZWNyZXQpO1xuICBpZiAoaW5wdXQuYnl0ZUxlbmd0aCA+IGNvbnN0YW50c18xLkJMT0NLX1NJWkUpIHtcbiAgICB2YXIgYnVmZmVySGFzaCA9IG5ldyBSYXdTaGEyNTZfMS5SYXdTaGEyNTYoKTtcbiAgICBidWZmZXJIYXNoLnVwZGF0ZShpbnB1dCk7XG4gICAgaW5wdXQgPSBidWZmZXJIYXNoLmRpZ2VzdCgpO1xuICB9XG4gIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheShjb25zdGFudHNfMS5CTE9DS19TSVpFKTtcbiAgYnVmZmVyLnNldChpbnB1dCk7XG4gIHJldHVybiBidWZmZXI7XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbnZhciB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuKDAsIHRzbGliXzEuX19leHBvcnRTdGFyKShyZXF1aXJlKFwiLi9qc1NoYTI1NlwiKSwgZXhwb3J0cyk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZSwgbikge1xuICByZXR1cm4gbiA9IG4gfHwge30sIG5ldyBQcm9taXNlKGZ1bmN0aW9uICh0LCByKSB7XG4gICAgdmFyIHMgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgIG8gPSBbXSxcbiAgICAgIHUgPSBbXSxcbiAgICAgIGkgPSB7fSxcbiAgICAgIGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgb2s6IDIgPT0gKHMuc3RhdHVzIC8gMTAwIHwgMCksXG4gICAgICAgICAgc3RhdHVzVGV4dDogcy5zdGF0dXNUZXh0LFxuICAgICAgICAgIHN0YXR1czogcy5zdGF0dXMsXG4gICAgICAgICAgdXJsOiBzLnJlc3BvbnNlVVJMLFxuICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocy5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAganNvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzLnJlc3BvbnNlVGV4dCkudGhlbihKU09OLnBhcnNlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJsb2I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3MucmVzcG9uc2VdKSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbG9uZTogYSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBrZXlzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudHJpZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICByZXR1cm4gaVtlLnRvTG93ZXJDYXNlKCldO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhczogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGUudG9Mb3dlckNhc2UoKSBpbiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgZm9yICh2YXIgbCBpbiBzLm9wZW4obi5tZXRob2QgfHwgXCJnZXRcIiwgZSwgITApLCBzLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkucmVwbGFjZSgvXiguKj8pOlteXFxTXFxuXSooW1xcc1xcU10qPykkL2dtLCBmdW5jdGlvbiAoZSwgbiwgdCkge1xuICAgICAgICBvLnB1c2gobiA9IG4udG9Mb3dlckNhc2UoKSksIHUucHVzaChbbiwgdF0pLCBpW25dID0gaVtuXSA/IGlbbl0gKyBcIixcIiArIHQgOiB0O1xuICAgICAgfSksIHQoYSgpKTtcbiAgICB9LCBzLm9uZXJyb3IgPSByLCBzLndpdGhDcmVkZW50aWFscyA9IFwiaW5jbHVkZVwiID09IG4uY3JlZGVudGlhbHMsIG4uaGVhZGVycykgcy5zZXRSZXF1ZXN0SGVhZGVyKGwsIG4uaGVhZGVyc1tsXSk7XG4gICAgcy5zZW5kKG4uYm9keSB8fCBudWxsKTtcbiAgfSk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHNlbGYuZmV0Y2ggfHwgKHNlbGYuZmV0Y2ggPSByZXF1aXJlKCd1bmZldGNoJykuZGVmYXVsdCB8fCByZXF1aXJlKCd1bmZldGNoJykpOyIsIi8qIVxuICogSmF2YVNjcmlwdCBDb29raWUgdjIuMi4xXG4gKiBodHRwczovL2dpdGh1Yi5jb20vanMtY29va2llL2pzLWNvb2tpZVxuICpcbiAqIENvcHlyaWdodCAyMDA2LCAyMDE1IEtsYXVzIEhhcnRsICYgRmFnbmVyIEJyYWNrXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqL1xuO1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIHZhciByZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXI7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZmFjdG9yeSk7XG4gICAgcmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyID0gdHJ1ZTtcbiAgfVxuICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgcmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyID0gdHJ1ZTtcbiAgfVxuICBpZiAoIXJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlcikge1xuICAgIHZhciBPbGRDb29raWVzID0gd2luZG93LkNvb2tpZXM7XG4gICAgdmFyIGFwaSA9IHdpbmRvdy5Db29raWVzID0gZmFjdG9yeSgpO1xuICAgIGFwaS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgd2luZG93LkNvb2tpZXMgPSBPbGRDb29raWVzO1xuICAgICAgcmV0dXJuIGFwaTtcbiAgICB9O1xuICB9XG59KShmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGV4dGVuZCgpIHtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYXR0cmlidXRlcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGZ1bmN0aW9uIGRlY29kZShzKSB7XG4gICAgcmV0dXJuIHMucmVwbGFjZSgvKCVbMC05QS1aXXsyfSkrL2csIGRlY29kZVVSSUNvbXBvbmVudCk7XG4gIH1cbiAgZnVuY3Rpb24gaW5pdChjb252ZXJ0ZXIpIHtcbiAgICBmdW5jdGlvbiBhcGkoKSB7fVxuICAgIGZ1bmN0aW9uIHNldChrZXksIHZhbHVlLCBhdHRyaWJ1dGVzKSB7XG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBhdHRyaWJ1dGVzID0gZXh0ZW5kKHtcbiAgICAgICAgcGF0aDogJy8nXG4gICAgICB9LCBhcGkuZGVmYXVsdHMsIGF0dHJpYnV0ZXMpO1xuICAgICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLmV4cGlyZXMgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMuZXhwaXJlcyA9IG5ldyBEYXRlKG5ldyBEYXRlKCkgKiAxICsgYXR0cmlidXRlcy5leHBpcmVzICogODY0ZSs1KTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UncmUgdXNpbmcgXCJleHBpcmVzXCIgYmVjYXVzZSBcIm1heC1hZ2VcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXG4gICAgICBhdHRyaWJ1dGVzLmV4cGlyZXMgPSBhdHRyaWJ1dGVzLmV4cGlyZXMgPyBhdHRyaWJ1dGVzLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgaWYgKC9eW1xce1xcW10vLnRlc3QocmVzdWx0KSkge1xuICAgICAgICAgIHZhbHVlID0gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgdmFsdWUgPSBjb252ZXJ0ZXIud3JpdGUgPyBjb252ZXJ0ZXIud3JpdGUodmFsdWUsIGtleSkgOiBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHZhbHVlKSkucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnwzQXwzQ3wzRXwzRHwyRnwzRnw0MHw1Qnw1RHw1RXw2MHw3Qnw3RHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KTtcbiAgICAgIGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoa2V5KSkucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnw1RXw2MHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KS5yZXBsYWNlKC9bXFwoXFwpXS9nLCBlc2NhcGUpO1xuICAgICAgdmFyIHN0cmluZ2lmaWVkQXR0cmlidXRlcyA9ICcnO1xuICAgICAgZm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmICghYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHN0cmluZ2lmaWVkQXR0cmlidXRlcyArPSAnOyAnICsgYXR0cmlidXRlTmFtZTtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPT09IHRydWUpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbnNpZGVycyBSRkMgNjI2NSBzZWN0aW9uIDUuMjpcbiAgICAgICAgLy8gLi4uXG4gICAgICAgIC8vIDMuICBJZiB0aGUgcmVtYWluaW5nIHVucGFyc2VkLWF0dHJpYnV0ZXMgY29udGFpbnMgYSAleDNCIChcIjtcIilcbiAgICAgICAgLy8gICAgIGNoYXJhY3RlcjpcbiAgICAgICAgLy8gQ29uc3VtZSB0aGUgY2hhcmFjdGVycyBvZiB0aGUgdW5wYXJzZWQtYXR0cmlidXRlcyB1cCB0byxcbiAgICAgICAgLy8gbm90IGluY2x1ZGluZywgdGhlIGZpcnN0ICV4M0IgKFwiO1wiKSBjaGFyYWN0ZXIuXG4gICAgICAgIC8vIC4uLlxuICAgICAgICBzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJz0nICsgYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXS5zcGxpdCgnOycpWzBdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZSA9IGtleSArICc9JyArIHZhbHVlICsgc3RyaW5naWZpZWRBdHRyaWJ1dGVzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXQoa2V5LCBqc29uKSB7XG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgamFyID0ge307XG4gICAgICAvLyBUbyBwcmV2ZW50IHRoZSBmb3IgbG9vcCBpbiB0aGUgZmlyc3QgcGxhY2UgYXNzaWduIGFuIGVtcHR5IGFycmF5XG4gICAgICAvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC5cbiAgICAgIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llID8gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpIDogW107XG4gICAgICB2YXIgaSA9IDA7XG4gICAgICBmb3IgKDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBhcnRzID0gY29va2llc1tpXS5zcGxpdCgnPScpO1xuICAgICAgICB2YXIgY29va2llID0gcGFydHMuc2xpY2UoMSkuam9pbignPScpO1xuICAgICAgICBpZiAoIWpzb24gJiYgY29va2llLmNoYXJBdCgwKSA9PT0gJ1wiJykge1xuICAgICAgICAgIGNvb2tpZSA9IGNvb2tpZS5zbGljZSgxLCAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgbmFtZSA9IGRlY29kZShwYXJ0c1swXSk7XG4gICAgICAgICAgY29va2llID0gKGNvbnZlcnRlci5yZWFkIHx8IGNvbnZlcnRlcikoY29va2llLCBuYW1lKSB8fCBkZWNvZGUoY29va2llKTtcbiAgICAgICAgICBpZiAoanNvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29va2llID0gSlNPTi5wYXJzZShjb29raWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICB9XG4gICAgICAgICAgamFyW25hbWVdID0gY29va2llO1xuICAgICAgICAgIGlmIChrZXkgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cbiAgICAgIHJldHVybiBrZXkgPyBqYXJba2V5XSA6IGphcjtcbiAgICB9XG4gICAgYXBpLnNldCA9IHNldDtcbiAgICBhcGkuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGdldChrZXksIGZhbHNlIC8qIHJlYWQgYXMgcmF3ICovKTtcbiAgICB9O1xuICAgIGFwaS5nZXRKU09OID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGdldChrZXksIHRydWUgLyogcmVhZCBhcyBqc29uICovKTtcbiAgICB9O1xuICAgIGFwaS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5LCBhdHRyaWJ1dGVzKSB7XG4gICAgICBzZXQoa2V5LCAnJywgZXh0ZW5kKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgZXhwaXJlczogLTFcbiAgICAgIH0pKTtcbiAgICB9O1xuICAgIGFwaS5kZWZhdWx0cyA9IHt9O1xuICAgIGFwaS53aXRoQ29udmVydGVyID0gaW5pdDtcbiAgICByZXR1cm4gYXBpO1xuICB9XG4gIHJldHVybiBpbml0KGZ1bmN0aW9uICgpIHt9KTtcbn0pOyIsImltcG9ydCB7IHJlZ2lzdGVyUGx1Z2luIH0gZnJvbSAnQGNhcGFjaXRvci9jb3JlJztcbmNvbnN0IEJyb3dzZXIgPSByZWdpc3RlclBsdWdpbignQnJvd3NlcicsIHtcbiAgd2ViOiAoKSA9PiBpbXBvcnQoJy4vd2ViJykudGhlbihtID0+IG5ldyBtLkJyb3dzZXJXZWIoKSlcbn0pO1xuZXhwb3J0ICogZnJvbSAnLi9kZWZpbml0aW9ucyc7XG5leHBvcnQgeyBCcm93c2VyIH07XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB7XG4gIEZvcmZhaXRzU2VydmljZSxcbiAgTGlzdEZvcmZhaXQyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyLFxufSBmcm9tICdzcmMvYXBpLWN5Y2xpc3QnXG5pbXBvcnQgeyBlbnZpcm9ubWVudCB9IGZyb20gJ3NyYy9lbnZpcm9ubWVudHMvZW52aXJvbm1lbnQnXG5pbXBvcnQgeyBTdG9yYWdlU2VydmljZSB9IGZyb20gJy4uL3V0aWxzL3N0b3JhZ2Uuc2VydmljZSdcbmltcG9ydCB7IEVycm9ySGFuZGxlclNlcnZpY2UgfSBmcm9tICcuLi91dGlscy9lcnJvci1oYW5kbGVyLnNlcnZpY2UnXG5pbXBvcnQgeyBBY2NvdW50U2VydmljZSB9IGZyb20gJy4vYWNjb3VudC5zZXJ2aWNlJ1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290Jyxcbn0pXG5leHBvcnQgY2xhc3MgRm9yZmFpdHNXcmFwcGVyU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZm9yZmFpdHNTZXJ2aWNlOiBGb3JmYWl0c1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBzdG9yYWdlOiBTdG9yYWdlU2VydmljZSxcbiAgICBwcml2YXRlIGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyU2VydmljZSxcbiAgICBwcml2YXRlIGFjY291bnRTZXJ2aWNlOiBBY2NvdW50U2VydmljZVxuICApIHt9XG5cbiAgYXN5bmMgbG9hZEZvcmZhaXRzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbZGVmYXVsdEZvcmZhaXRSZXNwb25zZSwgZm9yZmFpdHNSZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMuZm9yZmFpdHNTZXJ2aWNlXG4gICAgICAgICAgLmxpc3RGb3JmYWl0KHtcbiAgICAgICAgICAgIHByb2dyYW06IGVudmlyb25tZW50LnByb2dyYW0sXG4gICAgICAgICAgICBleHBhbmQ6IFsnZmljaGUnXSxcbiAgICAgICAgICAgIHR5cGU6ICdkZWZhdWx0JyxcbiAgICAgICAgICAgIGxpbWl0OiAxLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvUHJvbWlzZSgpLFxuICAgICAgICB0aGlzLmZvcmZhaXRzU2VydmljZVxuICAgICAgICAgIC5saXN0Rm9yZmFpdCh7XG4gICAgICAgICAgICBwcm9ncmFtOiBlbnZpcm9ubWVudC5wcm9ncmFtLFxuICAgICAgICAgICAgZXhwYW5kOiBbJ2ZpY2hlJ10sXG4gICAgICAgICAgICB0eXBlOiAnY2xhc3NpYycsXG4gICAgICAgICAgICBsaW1pdDogMTAwLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvUHJvbWlzZSgpLFxuICAgICAgXSlcblxuICAgICAgLy8gVsOpcmlmaWVyIHF1J2lsIHkgYSB1biBmb3JmYWl0IHBhciBkw6lmYXV0XG4gICAgICBjb25zdCBkZWZhdWx0Rm9yZmFpdCA9IGRlZmF1bHRGb3JmYWl0UmVzcG9uc2U/LmRhdGE/LlswXVxuICAgICAgaWYgKCFkZWZhdWx0Rm9yZmFpdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1Y3VuIGZvcmZhaXQgcGFyIGTDqWZhdXQgdHJvdXbDqScpXG4gICAgICB9XG5cbiAgICAgIC8vIFNhdXZlZ2FyZGVyIGxlIGZvcmZhaXQgcGFyIGTDqWZhdXQgbcOqbWUgc2kgbGEgbGlzdGUgZGVzIGZvcmZhaXRzIGVzdCB2aWRlXG4gICAgICBhd2FpdCB0aGlzLnN0b3JhZ2Uuc2V0KCdkZWZhdWx0Rm9yZmFpdCcsIGRlZmF1bHRGb3JmYWl0KVxuXG4gICAgICAvLyBTYXV2ZWdhcmRlciBsYSBsaXN0ZSBkZXMgZm9yZmFpdHMgc2kgZWxsZSBleGlzdGVcbiAgICAgIGlmIChmb3JmYWl0c1Jlc3BvbnNlPy5kYXRhKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZS5zZXQoJ2ZvcmZhaXRzJywgZm9yZmFpdHNSZXNwb25zZS5kYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2kgcGFzIGRlIGZvcmZhaXRzIGNsYXNzaXF1ZXMsIHNhdXZlZ2FyZGVyIHVuZSBsaXN0ZSB2aWRlXG4gICAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZS5zZXQoJ2ZvcmZhaXRzJywgW10pXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRGb3JmYWl0cygpOiBQcm9taXNlPExpc3RGb3JmYWl0MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcltdPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc3RvcmFnZS5nZXQoJ2ZvcmZhaXRzJylcbiAgfVxuXG4gIGFzeW5jIGdldERlZmF1bHRGb3JmYWl0KCk6IFByb21pc2U8XG4gICAgTGlzdEZvcmZhaXQyMDBSZXNwb25zZUFsbE9mRGF0YUlubmVyIHwgdW5kZWZpbmVkXG4gID4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0KCdkZWZhdWx0Rm9yZmFpdCcpXG4gIH1cblxuICAvKipcbiAgICogQ2hhcmdlIHVuaXF1ZW1lbnQgbGVzIGZvcmZhaXRzIGQnb3JnYW5pc2F0aW9uIGV0IGxlcyBham91dGUgYXV4IGZvcmZhaXRzIGV4aXN0YW50c1xuICAgKiBVdGlsZSBwb3VyIGFqb3V0ZXIgbGVzIGZvcmZhaXRzIGQnb3JnYW5pc2F0aW9uIGFwcsOocyBsZSBjaGFyZ2VtZW50IGluaXRpYWxcbiAgICovXG4gIGFzeW5jIGxvYWRPcmdhbml6YXRpb25Gb3JmYWl0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3ljbGlzdFN0YXRlID0gdGhpcy5hY2NvdW50U2VydmljZS5jeWNsaXN0U3RhdGUoKVxuXG4gICAgICAvLyBWw6lyaWZpZXIgcXVlIGxlIGN5Y2xpc3QgZXN0IGNoYXJnw6kgZXQgZGlzcG9uaWJsZVxuICAgICAgaWYgKFxuICAgICAgICBjeWNsaXN0U3RhdGUuc3RhdGUgPT09ICd1bmtub3duJyB8fFxuICAgICAgICBjeWNsaXN0U3RhdGUuc3RhdGUgPT09ICdlcnJvcicgfHxcbiAgICAgICAgISgnY3ljbGlzdCcgaW4gY3ljbGlzdFN0YXRlKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQ3ljbGlzdCBub3QgYXZhaWxhYmxlIGZvciBsb2FkaW5nIG9yZ2FuaXphdGlvbiBmb3JmYWl0cycpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBjeWNsaXN0ID0gY3ljbGlzdFN0YXRlLmN5Y2xpc3RcbiAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IGN5Y2xpc3QucmVnaXN0cmF0aW9ucz8uZGF0YT8uWzBdXG5cbiAgICAgIGlmIChcbiAgICAgICAgIXJlZ2lzdHJhdGlvbj8ubWVtYmVyc2hpcHM/LmRhdGEgfHxcbiAgICAgICAgcmVnaXN0cmF0aW9uLm1lbWJlcnNoaXBzLmRhdGEubGVuZ3RoID09PSAwXG4gICAgICApIHtcbiAgICAgICAgLy8gUGFzIGRlIG1lbWJlcnNoaXBzLCByaWVuIMOgIGZhaXJlXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBSw6ljdXDDqXJlciBsZXMgZm9yZmFpdHMgZXhpc3RhbnRzXG4gICAgICBsZXQgYWxsRm9yZmFpdHM6IExpc3RGb3JmYWl0MjAwUmVzcG9uc2VBbGxPZkRhdGFJbm5lcltdID1cbiAgICAgICAgKGF3YWl0IHRoaXMuc3RvcmFnZS5nZXQoJ2ZvcmZhaXRzJykpIHx8IFtdXG5cbiAgICAgIC8vIFBvdXIgY2hhcXVlIG1lbWJlcnNoaXAsIHLDqWN1cMOpcmVyIGxlcyBmb3JmYWl0cyBkZSBsJ29yZ2FuaXNhdGlvblxuICAgICAgY29uc3QgbWVtYmVyc2hpcEZvcmZhaXRzUHJvbWlzZXMgPSByZWdpc3RyYXRpb24ubWVtYmVyc2hpcHMuZGF0YS5tYXAoXG4gICAgICAgIChtZW1iZXJzaGlwKSA9PiB7XG4gICAgICAgICAgLy8gbWVtYmVyc2hpcCBwZXV0IMOqdHJlIHVuIHN0cmluZyBvdSB1biBvYmpldCBhdmVjIG9yZ2FuaXphdGlvblxuICAgICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID1cbiAgICAgICAgICAgIHR5cGVvZiBtZW1iZXJzaGlwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICA/IG1lbWJlcnNoaXBcbiAgICAgICAgICAgICAgOiBtZW1iZXJzaGlwLm9yZ2FuaXphdGlvblxuICAgICAgICAgIHJldHVybiB0aGlzLmZvcmZhaXRzU2VydmljZVxuICAgICAgICAgICAgLmxpc3RGb3JmYWl0KHtcbiAgICAgICAgICAgICAgcHJvZ3JhbTogZW52aXJvbm1lbnQucHJvZ3JhbSxcbiAgICAgICAgICAgICAgZXhwYW5kOiBbJ2ZpY2hlJ10sXG4gICAgICAgICAgICAgIG9yZ2FuaXphdGlvbjogb3JnYW5pemF0aW9uSWQsXG4gICAgICAgICAgICAgIGxpbWl0OiAxMDAsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvUHJvbWlzZSgpXG4gICAgICAgIH1cbiAgICAgIClcblxuICAgICAgY29uc3QgbWVtYmVyc2hpcEZvcmZhaXRzUmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIG1lbWJlcnNoaXBGb3JmYWl0c1Byb21pc2VzXG4gICAgICApXG5cbiAgICAgIC8vIEFqb3V0ZXIgbGVzIGZvcmZhaXRzIGQnb3JnYW5pc2F0aW9uIMOgIGxhIGxpc3RlIGV4aXN0YW50ZVxuICAgICAgZm9yIChjb25zdCByZXNwb25zZSBvZiBtZW1iZXJzaGlwRm9yZmFpdHNSZXNwb25zZXMpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlPy5kYXRhKSB7XG4gICAgICAgICAgLy8gRmlsdHJlciBsZXMgZG91YmxvbnMgZW4gdsOpcmlmaWFudCBsZXMgSURzXG4gICAgICAgICAgY29uc3QgbmV3Rm9yZmFpdHMgPSByZXNwb25zZS5kYXRhLmZpbHRlcihcbiAgICAgICAgICAgIChuZXdGb3JmYWl0KSA9PlxuICAgICAgICAgICAgICAhYWxsRm9yZmFpdHMuc29tZShcbiAgICAgICAgICAgICAgICAoZXhpc3RpbmdGb3JmYWl0KSA9PiBleGlzdGluZ0ZvcmZhaXQuaWQgPT09IG5ld0ZvcmZhaXQuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxGb3JmYWl0cyA9IFsuLi5hbGxGb3JmYWl0cywgLi4ubmV3Rm9yZmFpdHNdXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2F1dmVnYXJkZXIgbGEgbGlzdGUgbWlzZSDDoCBqb3VyXG4gICAgICBhd2FpdCB0aGlzLnN0b3JhZ2Uuc2V0KCdmb3JmYWl0cycsIGFsbEZvcmZhaXRzKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlcnJvcilcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgb3JnYW5pemF0aW9uIGZvcmZhaXRzOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWw6lyaWZpZSBzJ2lsIHkgYSBkZXMgZm9yZmFpdHMgZGlzcG9uaWJsZXMgZGFucyBsZSBzdG9yYWdlXG4gICAqL1xuICBhc3luYyBoYXNGb3JmYWl0cygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZm9yZmFpdHMgPSBhd2FpdCB0aGlzLmdldEZvcmZhaXRzKClcbiAgICAgIHJldHVybiBmb3JmYWl0cyAmJiBmb3JmYWl0cy5sZW5ndGggPiAwXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxufVxuIiwiLyohXG4gKiBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcbmltcG9ydCBXb3JkQXJyYXkgZnJvbSAnLi91dGlscy9Xb3JkQXJyYXknO1xuaW1wb3J0IHsgU2hhMjU2IH0gZnJvbSAnQGF3cy1jcnlwdG8vc2hhMjU2LWpzJztcblxuLyoqXG4gKiBSZXR1cm5zIGEgQnVmZmVyIHdpdGggYSBzZXF1ZW5jZSBvZiByYW5kb20gbkJ5dGVzXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG5CeXRlc1xuICogQHJldHVybnMge0J1ZmZlcn0gZml4ZWQtbGVuZ3RoIHNlcXVlbmNlIG9mIHJhbmRvbSBieXRlc1xuICovXG5cbmZ1bmN0aW9uIHJhbmRvbUJ5dGVzKG5CeXRlcykge1xuICByZXR1cm4gQnVmZmVyLmZyb20obmV3IFdvcmRBcnJheSgpLnJhbmRvbShuQnl0ZXMpLnRvU3RyaW5nKCksICdoZXgnKTtcbn1cbmltcG9ydCBCaWdJbnRlZ2VyIGZyb20gJy4vQmlnSW50ZWdlcic7XG5cbi8qKlxuICogVGVzdHMgaWYgYSBoZXggc3RyaW5nIGhhcyBpdCBtb3N0IHNpZ25pZmljYW50IGJpdCBzZXQgKGNhc2UtaW5zZW5zaXRpdmUgcmVnZXgpXG4gKi9cbnZhciBIRVhfTVNCX1JFR0VYID0gL15bODlhLWZdL2k7XG52YXIgaW5pdE4gPSAnRkZGRkZGRkZGRkZGRkZGRkM5MEZEQUEyMjE2OEMyMzRDNEM2NjI4QjgwREMxQ0QxJyArICcyOTAyNEUwODhBNjdDQzc0MDIwQkJFQTYzQjEzOUIyMjUxNEEwODc5OEUzNDA0REQnICsgJ0VGOTUxOUIzQ0QzQTQzMUIzMDJCMEE2REYyNUYxNDM3NEZFMTM1NkQ2RDUxQzI0NScgKyAnRTQ4NUI1NzY2MjVFN0VDNkY0NEM0MkU5QTYzN0VENkIwQkZGNUNCNkY0MDZCN0VEJyArICdFRTM4NkJGQjVBODk5RkE1QUU5RjI0MTE3QzRCMUZFNjQ5Mjg2NjUxRUNFNDVCM0QnICsgJ0MyMDA3Q0I4QTE2M0JGMDU5OERBNDgzNjFDNTVEMzlBNjkxNjNGQThGRDI0Q0Y1RicgKyAnODM2NTVEMjNEQ0EzQUQ5NjFDNjJGMzU2MjA4NTUyQkI5RUQ1MjkwNzcwOTY5NjZEJyArICc2NzBDMzU0RTRBQkM5ODA0RjE3NDZDMDhDQTE4MjE3QzMyOTA1RTQ2MkUzNkNFM0InICsgJ0UzOUU3NzJDMTgwRTg2MDM5QjI3ODNBMkVDMDdBMjhGQjVDNTVERjA2RjRDNTJDOScgKyAnREUyQkNCRjY5NTU4MTcxODM5OTU0OTdDRUE5NTZBRTUxNUQyMjYxODk4RkEwNTEwJyArICcxNTcyOEU1QThBQUFDNDJEQUQzMzE3MEQwNDUwN0EzM0E4NTUyMUFCREYxQ0JBNjQnICsgJ0VDRkI4NTA0NThEQkVGMEE4QUVBNzE1NzVEMDYwQzdEQjM5NzBGODVBNkUxRTRDNycgKyAnQUJGNUFFOENEQjA5MzNENzFFOEM5NEUwNEEyNTYxOURDRUUzRDIyNjFBRDJFRTZCJyArICdGMTJGRkEwNkQ5OEEwODY0RDg3NjAyNzMzRUM4NkE2NDUyMUYyQjE4MTc3QjIwMEMnICsgJ0JCRTExNzU3N0E2MTVENkM3NzA5ODhDMEJBRDk0NkUyMDhFMjRGQTA3NEU1QUIzMScgKyAnNDNEQjVCRkNFMEZEMTA4RTRCODJEMTIwQTkzQUQyQ0FGRkZGRkZGRkZGRkZGRkZGJztcbnZhciBuZXdQYXNzd29yZFJlcXVpcmVkQ2hhbGxlbmdlVXNlckF0dHJpYnV0ZVByZWZpeCA9ICd1c2VyQXR0cmlidXRlcy4nO1xuXG4vKiogQGNsYXNzICovXG52YXIgQXV0aGVudGljYXRpb25IZWxwZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBBdXRoZW50aWNhdGlvbkhlbHBlciBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IFBvb2xOYW1lIENvZ25pdG8gdXNlciBwb29sIG5hbWUuXG4gICAqL1xuICBmdW5jdGlvbiBBdXRoZW50aWNhdGlvbkhlbHBlcihQb29sTmFtZSkge1xuICAgIHRoaXMuTiA9IG5ldyBCaWdJbnRlZ2VyKGluaXROLCAxNik7XG4gICAgdGhpcy5nID0gbmV3IEJpZ0ludGVnZXIoJzInLCAxNik7XG4gICAgdGhpcy5rID0gbmV3IEJpZ0ludGVnZXIodGhpcy5oZXhIYXNoKFwiXCIgKyB0aGlzLnBhZEhleCh0aGlzLk4pICsgdGhpcy5wYWRIZXgodGhpcy5nKSksIDE2KTtcbiAgICB0aGlzLnNtYWxsQVZhbHVlID0gdGhpcy5nZW5lcmF0ZVJhbmRvbVNtYWxsQSgpO1xuICAgIHRoaXMuZ2V0TGFyZ2VBVmFsdWUoZnVuY3Rpb24gKCkge30pO1xuICAgIHRoaXMuaW5mb0JpdHMgPSBCdWZmZXIuZnJvbSgnQ2FsZGVyYSBEZXJpdmVkIEtleScsICd1dGY4Jyk7XG4gICAgdGhpcy5wb29sTmFtZSA9IFBvb2xOYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtCaWdJbnRlZ2VyfSBzbWFsbCBBLCBhIHJhbmRvbSBudW1iZXJcbiAgICovXG4gIHZhciBfcHJvdG8gPSBBdXRoZW50aWNhdGlvbkhlbHBlci5wcm90b3R5cGU7XG4gIF9wcm90by5nZXRTbWFsbEFWYWx1ZSA9IGZ1bmN0aW9uIGdldFNtYWxsQVZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnNtYWxsQVZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPEJpZ0ludGVnZXI+fSBjYWxsYmFjayBDYWxsZWQgd2l0aCAoZXJyLCBsYXJnZUFWYWx1ZSlcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmdldExhcmdlQVZhbHVlID0gZnVuY3Rpb24gZ2V0TGFyZ2VBVmFsdWUoY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGlmICh0aGlzLmxhcmdlQVZhbHVlKSB7XG4gICAgICBjYWxsYmFjayhudWxsLCB0aGlzLmxhcmdlQVZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jYWxjdWxhdGVBKHRoaXMuc21hbGxBVmFsdWUsIGZ1bmN0aW9uIChlcnIsIGxhcmdlQVZhbHVlKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmxhcmdlQVZhbHVlID0gbGFyZ2VBVmFsdWU7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIF90aGlzLmxhcmdlQVZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBoZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSByYW5kb20gYmlnIGludGVnZXJcbiAgICogQHJldHVybnMge0JpZ0ludGVnZXJ9IGEgcmFuZG9tIHZhbHVlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi87XG4gIF9wcm90by5nZW5lcmF0ZVJhbmRvbVNtYWxsQSA9IGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tU21hbGxBKCkge1xuICAgIC8vIFRoaXMgd2lsbCBiZSBpbnRlcnByZXRlZCBhcyBhIHBvc3RpdmUgMTI4LWJpdCBpbnRlZ2VyXG4gICAgdmFyIGhleFJhbmRvbSA9IHJhbmRvbUJ5dGVzKDEyOCkudG9TdHJpbmcoJ2hleCcpO1xuICAgIHZhciByYW5kb21CaWdJbnQgPSBuZXcgQmlnSW50ZWdlcihoZXhSYW5kb20sIDE2KTtcblxuICAgIC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gZG8gcmFuZG9tQmlnSW50Lm1vZCh0aGlzLk4gLSAxKSBhcyBOICgzMDcyLWJpdCkgaXMgPiAxMjggYnl0ZXMgKDEwMjQtYml0KVxuXG4gICAgcmV0dXJuIHJhbmRvbUJpZ0ludDtcbiAgfVxuXG4gIC8qKlxuICAgKiBoZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSByYW5kb20gc3RyaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGEgcmFuZG9tIHZhbHVlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi87XG4gIF9wcm90by5nZW5lcmF0ZVJhbmRvbVN0cmluZyA9IGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tU3RyaW5nKCkge1xuICAgIHJldHVybiByYW5kb21CeXRlcyg0MCkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEdlbmVyYXRlZCByYW5kb20gdmFsdWUgaW5jbHVkZWQgaW4gcGFzc3dvcmQgaGFzaC5cbiAgICovO1xuICBfcHJvdG8uZ2V0UmFuZG9tUGFzc3dvcmQgPSBmdW5jdGlvbiBnZXRSYW5kb21QYXNzd29yZCgpIHtcbiAgICByZXR1cm4gdGhpcy5yYW5kb21QYXNzd29yZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBHZW5lcmF0ZWQgcmFuZG9tIHZhbHVlIGluY2x1ZGVkIGluIGRldmljZXMgaGFzaC5cbiAgICovO1xuICBfcHJvdG8uZ2V0U2FsdERldmljZXMgPSBmdW5jdGlvbiBnZXRTYWx0RGV2aWNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5TYWx0VG9IYXNoRGV2aWNlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBWYWx1ZSB1c2VkIHRvIHZlcmlmeSBkZXZpY2VzLlxuICAgKi87XG4gIF9wcm90by5nZXRWZXJpZmllckRldmljZXMgPSBmdW5jdGlvbiBnZXRWZXJpZmllckRldmljZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMudmVyaWZpZXJEZXZpY2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHNhbHRzIGFuZCBjb21wdXRlIHZlcmlmaWVyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlR3JvdXBLZXkgRGV2aWNlcyB0byBnZW5lcmF0ZSB2ZXJpZmllciBmb3IuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VybmFtZSBVc2VyIHRvIGdlbmVyYXRlIHZlcmlmaWVyIGZvci5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8bnVsbD59IGNhbGxiYWNrIENhbGxlZCB3aXRoIChlcnIsIG51bGwpXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5nZW5lcmF0ZUhhc2hEZXZpY2UgPSBmdW5jdGlvbiBnZW5lcmF0ZUhhc2hEZXZpY2UoZGV2aWNlR3JvdXBLZXksIHVzZXJuYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgIHRoaXMucmFuZG9tUGFzc3dvcmQgPSB0aGlzLmdlbmVyYXRlUmFuZG9tU3RyaW5nKCk7XG4gICAgdmFyIGNvbWJpbmVkU3RyaW5nID0gXCJcIiArIGRldmljZUdyb3VwS2V5ICsgdXNlcm5hbWUgKyBcIjpcIiArIHRoaXMucmFuZG9tUGFzc3dvcmQ7XG4gICAgdmFyIGhhc2hlZFN0cmluZyA9IHRoaXMuaGFzaChjb21iaW5lZFN0cmluZyk7XG4gICAgdmFyIGhleFJhbmRvbSA9IHJhbmRvbUJ5dGVzKDE2KS50b1N0cmluZygnaGV4Jyk7XG5cbiAgICAvLyBUaGUgcmFuZG9tIGhleCB3aWxsIGJlIHVuYW1iaWd1b3VzbHkgcmVwcmVzZW50ZWQgYXMgYSBwb3N0aXZlIGludGVnZXJcbiAgICB0aGlzLlNhbHRUb0hhc2hEZXZpY2VzID0gdGhpcy5wYWRIZXgobmV3IEJpZ0ludGVnZXIoaGV4UmFuZG9tLCAxNikpO1xuICAgIHRoaXMuZy5tb2RQb3cobmV3IEJpZ0ludGVnZXIodGhpcy5oZXhIYXNoKHRoaXMuU2FsdFRvSGFzaERldmljZXMgKyBoYXNoZWRTdHJpbmcpLCAxNiksIHRoaXMuTiwgZnVuY3Rpb24gKGVyciwgdmVyaWZpZXJEZXZpY2VzTm90UGFkZGVkKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICBfdGhpczIudmVyaWZpZXJEZXZpY2VzID0gX3RoaXMyLnBhZEhleCh2ZXJpZmllckRldmljZXNOb3RQYWRkZWQpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgbnVsbCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBjbGllbnQncyBwdWJsaWMgdmFsdWUgQSA9IGdeYSVOXG4gICAqIHdpdGggdGhlIGdlbmVyYXRlZCByYW5kb20gbnVtYmVyIGFcbiAgICogQHBhcmFtIHtCaWdJbnRlZ2VyfSBhIFJhbmRvbWx5IGdlbmVyYXRlZCBzbWFsbCBBLlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxCaWdJbnRlZ2VyPn0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggKGVyciwgbGFyZ2VBVmFsdWUpXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi87XG4gIF9wcm90by5jYWxjdWxhdGVBID0gZnVuY3Rpb24gY2FsY3VsYXRlQShhLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuICAgIHRoaXMuZy5tb2RQb3coYSwgdGhpcy5OLCBmdW5jdGlvbiAoZXJyLCBBKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICBpZiAoQS5tb2QoX3RoaXMzLk4pLmVxdWFscyhCaWdJbnRlZ2VyLlpFUk8pKSB7XG4gICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcignSWxsZWdhbCBwYXJhbWF0ZXIuIEEgbW9kIE4gY2Fubm90IGJlIDAuJyksIG51bGwpO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2sobnVsbCwgQSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBjbGllbnQncyB2YWx1ZSBVIHdoaWNoIGlzIHRoZSBoYXNoIG9mIEEgYW5kIEJcbiAgICogQHBhcmFtIHtCaWdJbnRlZ2VyfSBBIExhcmdlIEEgdmFsdWUuXG4gICAqIEBwYXJhbSB7QmlnSW50ZWdlcn0gQiBTZXJ2ZXIgQiB2YWx1ZS5cbiAgICogQHJldHVybnMge0JpZ0ludGVnZXJ9IENvbXB1dGVkIFUgdmFsdWUuXG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmNhbGN1bGF0ZVUgPSBmdW5jdGlvbiBjYWxjdWxhdGVVKEEsIEIpIHtcbiAgICB0aGlzLlVIZXhIYXNoID0gdGhpcy5oZXhIYXNoKHRoaXMucGFkSGV4KEEpICsgdGhpcy5wYWRIZXgoQikpO1xuICAgIHZhciBmaW5hbFUgPSBuZXcgQmlnSW50ZWdlcih0aGlzLlVIZXhIYXNoLCAxNik7XG4gICAgcmV0dXJuIGZpbmFsVTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgYSBoYXNoIGZyb20gYSBiaXRBcnJheVxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gYnVmIFZhbHVlIHRvIGhhc2guXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IEhleC1lbmNvZGVkIGhhc2guXG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmhhc2ggPSBmdW5jdGlvbiBoYXNoKGJ1Zikge1xuICAgIHZhciBhd3NDcnlwdG9IYXNoID0gbmV3IFNoYTI1NigpO1xuICAgIGF3c0NyeXB0b0hhc2gudXBkYXRlKGJ1Zik7XG4gICAgdmFyIHJlc3VsdEZyb21BV1NDcnlwdG8gPSBhd3NDcnlwdG9IYXNoLmRpZ2VzdFN5bmMoKTtcbiAgICB2YXIgaGFzaEhleCA9IEJ1ZmZlci5mcm9tKHJlc3VsdEZyb21BV1NDcnlwdG8pLnRvU3RyaW5nKCdoZXgnKTtcbiAgICByZXR1cm4gbmV3IEFycmF5KDY0IC0gaGFzaEhleC5sZW5ndGgpLmpvaW4oJzAnKSArIGhhc2hIZXg7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGEgaGFzaCBmcm9tIGEgaGV4IHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gaGV4U3RyIFZhbHVlIHRvIGhhc2guXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IEhleC1lbmNvZGVkIGhhc2guXG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmhleEhhc2ggPSBmdW5jdGlvbiBoZXhIYXNoKGhleFN0cikge1xuICAgIHJldHVybiB0aGlzLmhhc2goQnVmZmVyLmZyb20oaGV4U3RyLCAnaGV4JykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YW5kYXJkIGhrZGYgYWxnb3JpdGhtXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBpa20gSW5wdXQga2V5IG1hdGVyaWFsLlxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gc2FsdCBTYWx0IHZhbHVlLlxuICAgKiBAcmV0dXJucyB7QnVmZmVyfSBTdHJvbmcga2V5IG1hdGVyaWFsLlxuICAgKiBAcHJpdmF0ZVxuICAgKi87XG4gIF9wcm90by5jb21wdXRlaGtkZiA9IGZ1bmN0aW9uIGNvbXB1dGVoa2RmKGlrbSwgc2FsdCkge1xuICAgIHZhciBpbmZvQml0c0J1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW3RoaXMuaW5mb0JpdHMsIEJ1ZmZlci5mcm9tKFN0cmluZy5mcm9tQ2hhckNvZGUoMSksICd1dGY4JyldKTtcbiAgICB2YXIgYXdzQ3J5cHRvSGFzaCA9IG5ldyBTaGEyNTYoc2FsdCk7XG4gICAgYXdzQ3J5cHRvSGFzaC51cGRhdGUoaWttKTtcbiAgICB2YXIgcmVzdWx0RnJvbUFXU0NyeXB0b1ByayA9IGF3c0NyeXB0b0hhc2guZGlnZXN0U3luYygpO1xuICAgIHZhciBhd3NDcnlwdG9IYXNoSG1hYyA9IG5ldyBTaGEyNTYocmVzdWx0RnJvbUFXU0NyeXB0b1Byayk7XG4gICAgYXdzQ3J5cHRvSGFzaEhtYWMudXBkYXRlKGluZm9CaXRzQnVmZmVyKTtcbiAgICB2YXIgcmVzdWx0RnJvbUFXU0NyeXB0b0htYWMgPSBhd3NDcnlwdG9IYXNoSG1hYy5kaWdlc3RTeW5jKCk7XG4gICAgdmFyIGhhc2hIZXhGcm9tQVdTQ3J5cHRvID0gcmVzdWx0RnJvbUFXU0NyeXB0b0htYWM7XG4gICAgdmFyIGN1cnJlbnRIZXggPSBoYXNoSGV4RnJvbUFXU0NyeXB0by5zbGljZSgwLCAxNik7XG4gICAgcmV0dXJuIGN1cnJlbnRIZXg7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgZmluYWwgaGtkZiBiYXNlZCBvbiBjb21wdXRlZCBTIHZhbHVlLCBhbmQgY29tcHV0ZWQgVSB2YWx1ZSBhbmQgdGhlIGtleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcm5hbWUgVXNlcm5hbWUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXNzd29yZCBQYXNzd29yZC5cbiAgICogQHBhcmFtIHtCaWdJbnRlZ2VyfSBzZXJ2ZXJCVmFsdWUgU2VydmVyIEIgdmFsdWUuXG4gICAqIEBwYXJhbSB7QmlnSW50ZWdlcn0gc2FsdCBHZW5lcmF0ZWQgc2FsdC5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8QnVmZmVyPn0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggKGVyciwgaGtkZlZhbHVlKVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbktleSA9IGZ1bmN0aW9uIGdldFBhc3N3b3JkQXV0aGVudGljYXRpb25LZXkodXNlcm5hbWUsIHBhc3N3b3JkLCBzZXJ2ZXJCVmFsdWUsIHNhbHQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG4gICAgaWYgKHNlcnZlckJWYWx1ZS5tb2QodGhpcy5OKS5lcXVhbHMoQmlnSW50ZWdlci5aRVJPKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCIGNhbm5vdCBiZSB6ZXJvLicpO1xuICAgIH1cbiAgICB0aGlzLlVWYWx1ZSA9IHRoaXMuY2FsY3VsYXRlVSh0aGlzLmxhcmdlQVZhbHVlLCBzZXJ2ZXJCVmFsdWUpO1xuICAgIGlmICh0aGlzLlVWYWx1ZS5lcXVhbHMoQmlnSW50ZWdlci5aRVJPKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVIGNhbm5vdCBiZSB6ZXJvLicpO1xuICAgIH1cbiAgICB2YXIgdXNlcm5hbWVQYXNzd29yZCA9IFwiXCIgKyB0aGlzLnBvb2xOYW1lICsgdXNlcm5hbWUgKyBcIjpcIiArIHBhc3N3b3JkO1xuICAgIHZhciB1c2VybmFtZVBhc3N3b3JkSGFzaCA9IHRoaXMuaGFzaCh1c2VybmFtZVBhc3N3b3JkKTtcbiAgICB2YXIgeFZhbHVlID0gbmV3IEJpZ0ludGVnZXIodGhpcy5oZXhIYXNoKHRoaXMucGFkSGV4KHNhbHQpICsgdXNlcm5hbWVQYXNzd29yZEhhc2gpLCAxNik7XG4gICAgdGhpcy5jYWxjdWxhdGVTKHhWYWx1ZSwgc2VydmVyQlZhbHVlLCBmdW5jdGlvbiAoZXJyLCBzVmFsdWUpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHZhciBoa2RmID0gX3RoaXM0LmNvbXB1dGVoa2RmKEJ1ZmZlci5mcm9tKF90aGlzNC5wYWRIZXgoc1ZhbHVlKSwgJ2hleCcpLCBCdWZmZXIuZnJvbShfdGhpczQucGFkSGV4KF90aGlzNC5VVmFsdWUpLCAnaGV4JykpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgaGtkZik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgUyB2YWx1ZSB1c2VkIGluIGdldFBhc3N3b3JkQXV0aGVudGljYXRpb25LZXlcbiAgICogQHBhcmFtIHtCaWdJbnRlZ2VyfSB4VmFsdWUgU2FsdGVkIHBhc3N3b3JkIGhhc2ggdmFsdWUuXG4gICAqIEBwYXJhbSB7QmlnSW50ZWdlcn0gc2VydmVyQlZhbHVlIFNlcnZlciBCIHZhbHVlLlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmNhbGN1bGF0ZVMgPSBmdW5jdGlvbiBjYWxjdWxhdGVTKHhWYWx1ZSwgc2VydmVyQlZhbHVlLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuICAgIHRoaXMuZy5tb2RQb3coeFZhbHVlLCB0aGlzLk4sIGZ1bmN0aW9uIChlcnIsIGdNb2RQb3dYTikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgdmFyIGludFZhbHVlMiA9IHNlcnZlckJWYWx1ZS5zdWJ0cmFjdChfdGhpczUuay5tdWx0aXBseShnTW9kUG93WE4pKTtcbiAgICAgIGludFZhbHVlMi5tb2RQb3coX3RoaXM1LnNtYWxsQVZhbHVlLmFkZChfdGhpczUuVVZhbHVlLm11bHRpcGx5KHhWYWx1ZSkpLCBfdGhpczUuTiwgZnVuY3Rpb24gKGVycjIsIHJlc3VsdCkge1xuICAgICAgICBpZiAoZXJyMikge1xuICAgICAgICAgIGNhbGxiYWNrKGVycjIsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdC5tb2QoX3RoaXM1Lk4pKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBjb25zdGFudCBuZXdQYXNzd29yZFJlcXVpcmVkQ2hhbGxlbmdlVXNlckF0dHJpYnV0ZVByZWZpeFxuICAgKiBAcmV0dXJuIHtuZXdQYXNzd29yZFJlcXVpcmVkQ2hhbGxlbmdlVXNlckF0dHJpYnV0ZVByZWZpeH0gY29uc3RhbnQgcHJlZml4IHZhbHVlXG4gICAqLztcbiAgX3Byb3RvLmdldE5ld1Bhc3N3b3JkUmVxdWlyZWRDaGFsbGVuZ2VVc2VyQXR0cmlidXRlUHJlZml4ID0gZnVuY3Rpb24gZ2V0TmV3UGFzc3dvcmRSZXF1aXJlZENoYWxsZW5nZVVzZXJBdHRyaWJ1dGVQcmVmaXgoKSB7XG4gICAgcmV0dXJuIG5ld1Bhc3N3b3JkUmVxdWlyZWRDaGFsbGVuZ2VVc2VyQXR0cmlidXRlUHJlZml4O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gdW5hbWJpZ3VvdXMsIGV2ZW4tbGVuZ3RoIGhleCBzdHJpbmcgb2YgdGhlIHR3bydzIGNvbXBsZW1lbnQgZW5jb2Rpbmcgb2YgYW4gaW50ZWdlci5cbiAgICpcbiAgICogSXQgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBoZXggZW5jb2Rpbmcgb2YgSmF2YSdzIEJpZ0ludGVnZXIncyB0b0J5dGVBcnJheSgpLCB3aWNoIHJldHVybnMgYVxuICAgKiBieXRlIGFycmF5IGNvbnRhaW5pbmcgdGhlIHR3bydzLWNvbXBsZW1lbnQgcmVwcmVzZW50YXRpb24gb2YgYSBCaWdJbnRlZ2VyLiBUaGUgYXJyYXkgY29udGFpbnNcbiAgICogdGhlIG1pbmltdW0gbnVtYmVyIG9mIGJ5dGVzIHJlcXVpcmVkIHRvIHJlcHJlc2VudCB0aGUgQmlnSW50ZWdlciwgaW5jbHVkaW5nIGF0IGxlYXN0IG9uZSBzaWduIGJpdC5cbiAgICpcbiAgICogRXhhbXBsZXMgc2hvd2luZyBob3cgYW1iaWd1aXR5IGlzIGF2b2lkZWQgYnkgbGVmdCBwYWRkaW5nIHdpdGg6XG4gICAqIFx0XCIwMFwiIChmb3IgcG9zaXRpdmUgdmFsdWVzIHdoZXJlIHRoZSBtb3N0LXNpZ25pZmljYW50LWJpdCBpcyBzZXQpXG4gICAqICBcIkZGXCIgKGZvciBuZWdhdGl2ZSB2YWx1ZXMgd2hlcmUgdGhlIG1vc3Qtc2lnbmlmaWNhbnQtYml0IGlzIHNldClcbiAgICpcbiAgICogcGFkSGV4KGJpZ0ludGVnZXIuZnJvbUludCgtMjM2KSkgID09PSBcIkZGMTRcIlxuICAgKiBwYWRIZXgoYmlnSW50ZWdlci5mcm9tSW50KDIwKSkgICAgPT09IFwiMTRcIlxuICAgKlxuICAgKiBwYWRIZXgoYmlnSW50ZWdlci5mcm9tSW50KC0yMDApKSAgPT09IFwiRkYzOFwiXG4gICAqIHBhZEhleChiaWdJbnRlZ2VyLmZyb21JbnQoNTYpKSAgICA9PT0gXCIzOFwiXG4gICAqXG4gICAqIHBhZEhleChiaWdJbnRlZ2VyLmZyb21JbnQoLTIwKSkgICA9PT0gXCJFQ1wiXG4gICAqIHBhZEhleChiaWdJbnRlZ2VyLmZyb21JbnQoMjM2KSkgICA9PT0gXCIwMEVDXCJcbiAgICpcbiAgICogcGFkSGV4KGJpZ0ludGVnZXIuZnJvbUludCgtNTYpKSAgID09PSBcIkM4XCJcbiAgICogcGFkSGV4KGJpZ0ludGVnZXIuZnJvbUludCgyMDApKSAgID09PSBcIjAwQzhcIlxuICAgKlxuICAgKiBAcGFyYW0ge0JpZ0ludGVnZXJ9IGJpZ0ludCBOdW1iZXIgdG8gZW5jb2RlLlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBldmVuLWxlbmd0aCBoZXggc3RyaW5nIG9mIHRoZSB0d28ncyBjb21wbGVtZW50IGVuY29kaW5nLlxuICAgKi87XG4gIF9wcm90by5wYWRIZXggPSBmdW5jdGlvbiBwYWRIZXgoYmlnSW50KSB7XG4gICAgaWYgKCEoYmlnSW50IGluc3RhbmNlb2YgQmlnSW50ZWdlcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgQmlnSW50ZWdlcicpO1xuICAgIH1cbiAgICB2YXIgaXNOZWdhdGl2ZSA9IGJpZ0ludC5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSA8IDA7XG5cbiAgICAvKiBHZXQgYSBoZXggc3RyaW5nIGZvciBhYnMoYmlnSW50KSAqL1xuICAgIHZhciBoZXhTdHIgPSBiaWdJbnQuYWJzKCkudG9TdHJpbmcoMTYpO1xuXG4gICAgLyogUGFkIGhleCB0byBldmVuIGxlbmd0aCBpZiBuZWVkZWQgKi9cbiAgICBoZXhTdHIgPSBoZXhTdHIubGVuZ3RoICUgMiAhPT0gMCA/IFwiMFwiICsgaGV4U3RyIDogaGV4U3RyO1xuXG4gICAgLyogUHJlcGVuZCBcIjAwXCIgaWYgdGhlIG1vc3Qgc2lnbmlmaWNhbnQgYml0IGlzIHNldCAqL1xuICAgIGhleFN0ciA9IEhFWF9NU0JfUkVHRVgudGVzdChoZXhTdHIpID8gXCIwMFwiICsgaGV4U3RyIDogaGV4U3RyO1xuICAgIGlmIChpc05lZ2F0aXZlKSB7XG4gICAgICAvKiBGbGlwIHRoZSBiaXRzIG9mIHRoZSByZXByZXNlbnRhdGlvbiAqL1xuICAgICAgdmFyIGludmVydGVkTmliYmxlcyA9IGhleFN0ci5zcGxpdCgnJykubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHZhciBpbnZlcnRlZE5pYmJsZSA9IH5wYXJzZUludCh4LCAxNikgJiAweGY7XG4gICAgICAgIHJldHVybiAnMDEyMzQ1Njc4OUFCQ0RFRicuY2hhckF0KGludmVydGVkTmliYmxlKTtcbiAgICAgIH0pLmpvaW4oJycpO1xuXG4gICAgICAvKiBBZnRlciBmbGlwcGluZyB0aGUgYml0cywgYWRkIG9uZSB0byBnZXQgdGhlIDIncyBjb21wbGVtZW50IHJlcHJlc2VudGF0aW9uICovXG4gICAgICB2YXIgZmxpcHBlZEJpdHNCSSA9IG5ldyBCaWdJbnRlZ2VyKGludmVydGVkTmliYmxlcywgMTYpLmFkZChCaWdJbnRlZ2VyLk9ORSk7XG4gICAgICBoZXhTdHIgPSBmbGlwcGVkQml0c0JJLnRvU3RyaW5nKDE2KTtcblxuICAgICAgLypcbiAgICAgIEZvciBoZXggc3RyaW5ncyBzdGFydGluZyB3aXRoICdGRjgnLCAnRkYnIGNhbiBiZSBkcm9wcGVkLCBlLmcuIDB4RkZGRjgwPTB4RkY4MD0weDgwPS0xMjhcbiAgICAgIFx0XHRBbnkgc2VxdWVuY2Ugb2YgJzEnIGJpdHMgb24gdGhlIGxlZnQgY2FuIGFsd2F5cyBiZSBzdWJzdGl0dXRlZCB3aXRoIGEgc2luZ2xlICcxJyBiaXRcbiAgICAgIHdpdGhvdXQgY2hhbmdpbmcgdGhlIHJlcHJlc2VudGVkIHZhbHVlLlxuICAgICAgXHRcdFRoaXMgb25seSBoYXBwZW5zIGluIHRoZSBjYXNlIHdoZW4gdGhlIGlucHV0IGlzIDgwLi4uMDBcbiAgICAgICovXG4gICAgICBpZiAoaGV4U3RyLnRvVXBwZXJDYXNlKCkuc3RhcnRzV2l0aCgnRkY4JykpIHtcbiAgICAgICAgaGV4U3RyID0gaGV4U3RyLnN1YnN0cmluZygyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhleFN0cjtcbiAgfTtcbiAgcmV0dXJuIEF1dGhlbnRpY2F0aW9uSGVscGVyO1xufSgpO1xuZXhwb3J0IHsgQXV0aGVudGljYXRpb25IZWxwZXIgYXMgZGVmYXVsdCB9OyIsInZhciBjcnlwdG87XG5cbi8vIE5hdGl2ZSBjcnlwdG8gZnJvbSB3aW5kb3cgKEJyb3dzZXIpXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNyeXB0bykge1xuICBjcnlwdG8gPSB3aW5kb3cuY3J5cHRvO1xufVxuXG4vLyBOYXRpdmUgKGV4cGVyaW1lbnRhbCBJRSAxMSkgY3J5cHRvIGZyb20gd2luZG93IChCcm93c2VyKVxuaWYgKCFjcnlwdG8gJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm1zQ3J5cHRvKSB7XG4gIGNyeXB0byA9IHdpbmRvdy5tc0NyeXB0bztcbn1cblxuLy8gTmF0aXZlIGNyeXB0byBmcm9tIGdsb2JhbCAoTm9kZUpTKVxuaWYgKCFjcnlwdG8gJiYgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsLmNyeXB0bykge1xuICBjcnlwdG8gPSBnbG9iYWwuY3J5cHRvO1xufVxuXG4vLyBOYXRpdmUgY3J5cHRvIGltcG9ydCB2aWEgcmVxdWlyZSAoTm9kZUpTKVxuaWYgKCFjcnlwdG8gJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgdHJ5IHtcbiAgICBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbiAgfSBjYXRjaCAoZXJyKSB7fVxufVxuXG4vKlxuICogQ3J5cHRvZ3JhcGhpY2FsbHkgc2VjdXJlIHBzZXVkb3JhbmRvbSBudW1iZXIgZ2VuZXJhdG9yXG4gKiBBcyBNYXRoLnJhbmRvbSgpIGlzIGNyeXB0b2dyYXBoaWNhbGx5IG5vdCBzYWZlIHRvIHVzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcnlwdG9TZWN1cmVSYW5kb21JbnQoKSB7XG4gIGlmIChjcnlwdG8pIHtcbiAgICAvLyBVc2UgZ2V0UmFuZG9tVmFsdWVzIG1ldGhvZCAoQnJvd3NlcilcbiAgICBpZiAodHlwZW9mIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50MzJBcnJheSgxKSlbMF07XG4gICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgfVxuXG4gICAgLy8gVXNlIHJhbmRvbUJ5dGVzIG1ldGhvZCAoTm9kZUpTKVxuICAgIGlmICh0eXBlb2YgY3J5cHRvLnJhbmRvbUJ5dGVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDQpLnJlYWRJbnQzMkxFKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBFcnJvcignTmF0aXZlIGNyeXB0byBtb2R1bGUgY291bGQgbm90IGJlIHVzZWQgdG8gZ2V0IHNlY3VyZSByYW5kb20gbnVtYmVyLicpO1xufSIsImltcG9ydCBjcnlwdG9TZWN1cmVSYW5kb21JbnQgZnJvbSAnLi9jcnlwdG9TZWN1cmVSYW5kb21JbnQnO1xuXG4vKipcbiAqIEhleCBlbmNvZGluZyBzdHJhdGVneS5cbiAqIENvbnZlcnRzIGEgd29yZCBhcnJheSB0byBhIGhleCBzdHJpbmcuXG4gKiBAcGFyYW0ge1dvcmRBcnJheX0gd29yZEFycmF5IFRoZSB3b3JkIGFycmF5LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgaGV4IHN0cmluZy5cbiAqIEBzdGF0aWNcbiAqL1xuZnVuY3Rpb24gaGV4U3RyaW5naWZ5KHdvcmRBcnJheSkge1xuICAvLyBTaG9ydGN1dHNcbiAgdmFyIHdvcmRzID0gd29yZEFycmF5LndvcmRzO1xuICB2YXIgc2lnQnl0ZXMgPSB3b3JkQXJyYXkuc2lnQnl0ZXM7XG5cbiAgLy8gQ29udmVydFxuICB2YXIgaGV4Q2hhcnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaWdCeXRlczsgaSsrKSB7XG4gICAgdmFyIGJpdGUgPSB3b3Jkc1tpID4+PiAyXSA+Pj4gMjQgLSBpICUgNCAqIDggJiAweGZmO1xuICAgIGhleENoYXJzLnB1c2goKGJpdGUgPj4+IDQpLnRvU3RyaW5nKDE2KSk7XG4gICAgaGV4Q2hhcnMucHVzaCgoYml0ZSAmIDB4MGYpLnRvU3RyaW5nKDE2KSk7XG4gIH1cbiAgcmV0dXJuIGhleENoYXJzLmpvaW4oJycpO1xufVxudmFyIFdvcmRBcnJheSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFdvcmRBcnJheSh3b3Jkcywgc2lnQnl0ZXMpIHtcbiAgICB3b3JkcyA9IHRoaXMud29yZHMgPSB3b3JkcyB8fCBbXTtcbiAgICBpZiAoc2lnQnl0ZXMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnNpZ0J5dGVzID0gc2lnQnl0ZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2lnQnl0ZXMgPSB3b3Jkcy5sZW5ndGggKiA0O1xuICAgIH1cbiAgfVxuICB2YXIgX3Byb3RvID0gV29yZEFycmF5LnByb3RvdHlwZTtcbiAgX3Byb3RvLnJhbmRvbSA9IGZ1bmN0aW9uIHJhbmRvbShuQnl0ZXMpIHtcbiAgICB2YXIgd29yZHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5CeXRlczsgaSArPSA0KSB7XG4gICAgICB3b3Jkcy5wdXNoKGNyeXB0b1NlY3VyZVJhbmRvbUludCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBXb3JkQXJyYXkod29yZHMsIG5CeXRlcyk7XG4gIH07XG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBoZXhTdHJpbmdpZnkodGhpcyk7XG4gIH07XG4gIHJldHVybiBXb3JkQXJyYXk7XG59KCk7XG5leHBvcnQgeyBXb3JkQXJyYXkgYXMgZGVmYXVsdCB9OyIsIi8vIEEgc21hbGwgaW1wbGVtZW50YXRpb24gb2YgQmlnSW50ZWdlciBiYXNlZCBvbiBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4vL1xuLy8gQWxsIHB1YmxpYyBtZXRob2RzIGhhdmUgYmVlbiByZW1vdmVkIGV4Y2VwdCB0aGUgZm9sbG93aW5nOlxuLy8gICBuZXcgQmlnSW50ZWdlcihhLCBiKSAob25seSByYWRpeCAyLCA0LCA4LCAxNiBhbmQgMzIgc3VwcG9ydGVkKVxuLy8gICB0b1N0cmluZyAob25seSByYWRpeCAyLCA0LCA4LCAxNiBhbmQgMzIgc3VwcG9ydGVkKVxuLy8gICBuZWdhdGVcbi8vICAgYWJzXG4vLyAgIGNvbXBhcmVUb1xuLy8gICBiaXRMZW5ndGhcbi8vICAgbW9kXG4vLyAgIGVxdWFsc1xuLy8gICBhZGRcbi8vICAgc3VidHJhY3Rcbi8vICAgbXVsdGlwbHlcbi8vICAgZGl2aWRlXG4vLyAgIG1vZFBvd1xuXG5leHBvcnQgZGVmYXVsdCBCaWdJbnRlZ2VyO1xuXG4vKlxuICogQ29weXJpZ2h0IChjKSAyMDAzLTIwMDUgIFRvbSBXdVxuICogQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcbiAqIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuICogXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4gKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4gKiBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0b1xuICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUy1JU1wiIEFORCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUywgSU1QTElFRCBPUiBPVEhFUldJU0UsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04sIEFOWVxuICogV0FSUkFOVFkgT0YgTUVSQ0hBTlRBQklMSVRZIE9SIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLlxuICpcbiAqIElOIE5PIEVWRU5UIFNIQUxMIFRPTSBXVSBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBJTkNJREVOVEFMLFxuICogSU5ESVJFQ1QgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9GIEFOWSBLSU5ELCBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSXG4gKiBSRVNVTFRJTkcgRlJPTSBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIE9SIE5PVCBBRFZJU0VEIE9GXG4gKiBUSEUgUE9TU0lCSUxJVFkgT0YgREFNQUdFLCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIEFSSVNJTkcgT1VUXG4gKiBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUiBQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuICpcbiAqIEluIGFkZGl0aW9uLCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbiBhcHBsaWVzOlxuICpcbiAqIEFsbCByZWRpc3RyaWJ1dGlvbnMgbXVzdCByZXRhaW4gYW4gaW50YWN0IGNvcHkgb2YgdGhpcyBjb3B5cmlnaHQgbm90aWNlXG4gKiBhbmQgZGlzY2xhaW1lci5cbiAqL1xuXG4vLyAocHVibGljKSBDb25zdHJ1Y3RvclxuZnVuY3Rpb24gQmlnSW50ZWdlcihhLCBiKSB7XG4gIGlmIChhICE9IG51bGwpIHRoaXMuZnJvbVN0cmluZyhhLCBiKTtcbn1cblxuLy8gcmV0dXJuIG5ldywgdW5zZXQgQmlnSW50ZWdlclxuZnVuY3Rpb24gbmJpKCkge1xuICByZXR1cm4gbmV3IEJpZ0ludGVnZXIobnVsbCk7XG59XG5cbi8vIEJpdHMgcGVyIGRpZ2l0XG52YXIgZGJpdHM7XG5cbi8vIEphdmFTY3JpcHQgZW5naW5lIGFuYWx5c2lzXG52YXIgY2FuYXJ5ID0gMHhkZWFkYmVlZmNhZmU7XG52YXIgal9sbSA9IChjYW5hcnkgJiAweGZmZmZmZikgPT0gMHhlZmNhZmU7XG5cbi8vIGFtOiBDb21wdXRlIHdfaiArPSAoeCp0aGlzX2kpLCBwcm9wYWdhdGUgY2Fycmllcyxcbi8vIGMgaXMgaW5pdGlhbCBjYXJyeSwgcmV0dXJucyBmaW5hbCBjYXJyeS5cbi8vIGMgPCAzKmR2YWx1ZSwgeCA8IDIqZHZhbHVlLCB0aGlzX2kgPCBkdmFsdWVcbi8vIFdlIG5lZWQgdG8gc2VsZWN0IHRoZSBmYXN0ZXN0IG9uZSB0aGF0IHdvcmtzIGluIHRoaXMgZW52aXJvbm1lbnQuXG5cbi8vIGFtMTogdXNlIGEgc2luZ2xlIG11bHQgYW5kIGRpdmlkZSB0byBnZXQgdGhlIGhpZ2ggYml0cyxcbi8vIG1heCBkaWdpdCBiaXRzIHNob3VsZCBiZSAyNiBiZWNhdXNlXG4vLyBtYXggaW50ZXJuYWwgdmFsdWUgPSAyKmR2YWx1ZV4yLTIqZHZhbHVlICg8IDJeNTMpXG5mdW5jdGlvbiBhbTEoaSwgeCwgdywgaiwgYywgbikge1xuICB3aGlsZSAoLS1uID49IDApIHtcbiAgICB2YXIgdiA9IHggKiB0aGlzW2krK10gKyB3W2pdICsgYztcbiAgICBjID0gTWF0aC5mbG9vcih2IC8gMHg0MDAwMDAwKTtcbiAgICB3W2orK10gPSB2ICYgMHgzZmZmZmZmO1xuICB9XG4gIHJldHVybiBjO1xufVxuLy8gYW0yIGF2b2lkcyBhIGJpZyBtdWx0LWFuZC1leHRyYWN0IGNvbXBsZXRlbHkuXG4vLyBNYXggZGlnaXQgYml0cyBzaG91bGQgYmUgPD0gMzAgYmVjYXVzZSB3ZSBkbyBiaXR3aXNlIG9wc1xuLy8gb24gdmFsdWVzIHVwIHRvIDIqaGR2YWx1ZV4yLWhkdmFsdWUtMSAoPCAyXjMxKVxuZnVuY3Rpb24gYW0yKGksIHgsIHcsIGosIGMsIG4pIHtcbiAgdmFyIHhsID0geCAmIDB4N2ZmZixcbiAgICB4aCA9IHggPj4gMTU7XG4gIHdoaWxlICgtLW4gPj0gMCkge1xuICAgIHZhciBsID0gdGhpc1tpXSAmIDB4N2ZmZjtcbiAgICB2YXIgaCA9IHRoaXNbaSsrXSA+PiAxNTtcbiAgICB2YXIgbSA9IHhoICogbCArIGggKiB4bDtcbiAgICBsID0geGwgKiBsICsgKChtICYgMHg3ZmZmKSA8PCAxNSkgKyB3W2pdICsgKGMgJiAweDNmZmZmZmZmKTtcbiAgICBjID0gKGwgPj4+IDMwKSArIChtID4+PiAxNSkgKyB4aCAqIGggKyAoYyA+Pj4gMzApO1xuICAgIHdbaisrXSA9IGwgJiAweDNmZmZmZmZmO1xuICB9XG4gIHJldHVybiBjO1xufVxuLy8gQWx0ZXJuYXRlbHksIHNldCBtYXggZGlnaXQgYml0cyB0byAyOCBzaW5jZSBzb21lXG4vLyBicm93c2VycyBzbG93IGRvd24gd2hlbiBkZWFsaW5nIHdpdGggMzItYml0IG51bWJlcnMuXG5mdW5jdGlvbiBhbTMoaSwgeCwgdywgaiwgYywgbikge1xuICB2YXIgeGwgPSB4ICYgMHgzZmZmLFxuICAgIHhoID0geCA+PiAxNDtcbiAgd2hpbGUgKC0tbiA+PSAwKSB7XG4gICAgdmFyIGwgPSB0aGlzW2ldICYgMHgzZmZmO1xuICAgIHZhciBoID0gdGhpc1tpKytdID4+IDE0O1xuICAgIHZhciBtID0geGggKiBsICsgaCAqIHhsO1xuICAgIGwgPSB4bCAqIGwgKyAoKG0gJiAweDNmZmYpIDw8IDE0KSArIHdbal0gKyBjO1xuICAgIGMgPSAobCA+PiAyOCkgKyAobSA+PiAxNCkgKyB4aCAqIGg7XG4gICAgd1tqKytdID0gbCAmIDB4ZmZmZmZmZjtcbiAgfVxuICByZXR1cm4gYztcbn1cbnZhciBpbkJyb3dzZXIgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJztcbmlmIChpbkJyb3dzZXIgJiYgal9sbSAmJiBuYXZpZ2F0b3IuYXBwTmFtZSA9PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJykge1xuICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbSA9IGFtMjtcbiAgZGJpdHMgPSAzMDtcbn0gZWxzZSBpZiAoaW5Ccm93c2VyICYmIGpfbG0gJiYgbmF2aWdhdG9yLmFwcE5hbWUgIT0gJ05ldHNjYXBlJykge1xuICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbSA9IGFtMTtcbiAgZGJpdHMgPSAyNjtcbn0gZWxzZSB7XG4gIC8vIE1vemlsbGEvTmV0c2NhcGUgc2VlbXMgdG8gcHJlZmVyIGFtM1xuICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbSA9IGFtMztcbiAgZGJpdHMgPSAyODtcbn1cbkJpZ0ludGVnZXIucHJvdG90eXBlLkRCID0gZGJpdHM7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5ETSA9ICgxIDw8IGRiaXRzKSAtIDE7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5EViA9IDEgPDwgZGJpdHM7XG52YXIgQklfRlAgPSA1MjtcbkJpZ0ludGVnZXIucHJvdG90eXBlLkZWID0gTWF0aC5wb3coMiwgQklfRlApO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuRjEgPSBCSV9GUCAtIGRiaXRzO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuRjIgPSAyICogZGJpdHMgLSBCSV9GUDtcblxuLy8gRGlnaXQgY29udmVyc2lvbnNcbnZhciBCSV9STSA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonO1xudmFyIEJJX1JDID0gbmV3IEFycmF5KCk7XG52YXIgcnIsIHZ2O1xucnIgPSAnMCcuY2hhckNvZGVBdCgwKTtcbmZvciAodnYgPSAwOyB2diA8PSA5OyArK3Z2KSBCSV9SQ1tycisrXSA9IHZ2O1xucnIgPSAnYScuY2hhckNvZGVBdCgwKTtcbmZvciAodnYgPSAxMDsgdnYgPCAzNjsgKyt2dikgQklfUkNbcnIrK10gPSB2djtcbnJyID0gJ0EnLmNoYXJDb2RlQXQoMCk7XG5mb3IgKHZ2ID0gMTA7IHZ2IDwgMzY7ICsrdnYpIEJJX1JDW3JyKytdID0gdnY7XG5mdW5jdGlvbiBpbnQyY2hhcihuKSB7XG4gIHJldHVybiBCSV9STS5jaGFyQXQobik7XG59XG5mdW5jdGlvbiBpbnRBdChzLCBpKSB7XG4gIHZhciBjID0gQklfUkNbcy5jaGFyQ29kZUF0KGkpXTtcbiAgcmV0dXJuIGMgPT0gbnVsbCA/IC0xIDogYztcbn1cblxuLy8gKHByb3RlY3RlZCkgY29weSB0aGlzIHRvIHJcbmZ1bmN0aW9uIGJucENvcHlUbyhyKSB7XG4gIGZvciAodmFyIGkgPSB0aGlzLnQgLSAxOyBpID49IDA7IC0taSkgcltpXSA9IHRoaXNbaV07XG4gIHIudCA9IHRoaXMudDtcbiAgci5zID0gdGhpcy5zO1xufVxuXG4vLyAocHJvdGVjdGVkKSBzZXQgZnJvbSBpbnRlZ2VyIHZhbHVlIHgsIC1EViA8PSB4IDwgRFZcbmZ1bmN0aW9uIGJucEZyb21JbnQoeCkge1xuICB0aGlzLnQgPSAxO1xuICB0aGlzLnMgPSB4IDwgMCA/IC0xIDogMDtcbiAgaWYgKHggPiAwKSB0aGlzWzBdID0geDtlbHNlIGlmICh4IDwgLTEpIHRoaXNbMF0gPSB4ICsgdGhpcy5EVjtlbHNlIHRoaXMudCA9IDA7XG59XG5cbi8vIHJldHVybiBiaWdpbnQgaW5pdGlhbGl6ZWQgdG8gdmFsdWVcbmZ1bmN0aW9uIG5idihpKSB7XG4gIHZhciByID0gbmJpKCk7XG4gIHIuZnJvbUludChpKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIChwcm90ZWN0ZWQpIHNldCBmcm9tIHN0cmluZyBhbmQgcmFkaXhcbmZ1bmN0aW9uIGJucEZyb21TdHJpbmcocywgYikge1xuICB2YXIgaztcbiAgaWYgKGIgPT0gMTYpIGsgPSA0O2Vsc2UgaWYgKGIgPT0gOCkgayA9IDM7ZWxzZSBpZiAoYiA9PSAyKSBrID0gMTtlbHNlIGlmIChiID09IDMyKSBrID0gNTtlbHNlIGlmIChiID09IDQpIGsgPSAyO2Vsc2UgdGhyb3cgbmV3IEVycm9yKCdPbmx5IHJhZGl4IDIsIDQsIDgsIDE2LCAzMiBhcmUgc3VwcG9ydGVkJyk7XG4gIHRoaXMudCA9IDA7XG4gIHRoaXMucyA9IDA7XG4gIHZhciBpID0gcy5sZW5ndGgsXG4gICAgbWkgPSBmYWxzZSxcbiAgICBzaCA9IDA7XG4gIHdoaWxlICgtLWkgPj0gMCkge1xuICAgIHZhciB4ID0gaW50QXQocywgaSk7XG4gICAgaWYgKHggPCAwKSB7XG4gICAgICBpZiAocy5jaGFyQXQoaSkgPT0gJy0nKSBtaSA9IHRydWU7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbWkgPSBmYWxzZTtcbiAgICBpZiAoc2ggPT0gMCkgdGhpc1t0aGlzLnQrK10gPSB4O2Vsc2UgaWYgKHNoICsgayA+IHRoaXMuREIpIHtcbiAgICAgIHRoaXNbdGhpcy50IC0gMV0gfD0gKHggJiAoMSA8PCB0aGlzLkRCIC0gc2gpIC0gMSkgPDwgc2g7XG4gICAgICB0aGlzW3RoaXMudCsrXSA9IHggPj4gdGhpcy5EQiAtIHNoO1xuICAgIH0gZWxzZSB0aGlzW3RoaXMudCAtIDFdIHw9IHggPDwgc2g7XG4gICAgc2ggKz0gaztcbiAgICBpZiAoc2ggPj0gdGhpcy5EQikgc2ggLT0gdGhpcy5EQjtcbiAgfVxuICB0aGlzLmNsYW1wKCk7XG4gIGlmIChtaSkgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsIHRoaXMpO1xufVxuXG4vLyAocHJvdGVjdGVkKSBjbGFtcCBvZmYgZXhjZXNzIGhpZ2ggd29yZHNcbmZ1bmN0aW9uIGJucENsYW1wKCkge1xuICB2YXIgYyA9IHRoaXMucyAmIHRoaXMuRE07XG4gIHdoaWxlICh0aGlzLnQgPiAwICYmIHRoaXNbdGhpcy50IC0gMV0gPT0gYykgLS10aGlzLnQ7XG59XG5cbi8vIChwdWJsaWMpIHJldHVybiBzdHJpbmcgcmVwcmVzZW50YXRpb24gaW4gZ2l2ZW4gcmFkaXhcbmZ1bmN0aW9uIGJuVG9TdHJpbmcoYikge1xuICBpZiAodGhpcy5zIDwgMCkgcmV0dXJuICctJyArIHRoaXMubmVnYXRlKCkudG9TdHJpbmcoYik7XG4gIHZhciBrO1xuICBpZiAoYiA9PSAxNikgayA9IDQ7ZWxzZSBpZiAoYiA9PSA4KSBrID0gMztlbHNlIGlmIChiID09IDIpIGsgPSAxO2Vsc2UgaWYgKGIgPT0gMzIpIGsgPSA1O2Vsc2UgaWYgKGIgPT0gNCkgayA9IDI7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgcmFkaXggMiwgNCwgOCwgMTYsIDMyIGFyZSBzdXBwb3J0ZWQnKTtcbiAgdmFyIGttID0gKDEgPDwgaykgLSAxLFxuICAgIGQsXG4gICAgbSA9IGZhbHNlLFxuICAgIHIgPSAnJyxcbiAgICBpID0gdGhpcy50O1xuICB2YXIgcCA9IHRoaXMuREIgLSBpICogdGhpcy5EQiAlIGs7XG4gIGlmIChpLS0gPiAwKSB7XG4gICAgaWYgKHAgPCB0aGlzLkRCICYmIChkID0gdGhpc1tpXSA+PiBwKSA+IDApIHtcbiAgICAgIG0gPSB0cnVlO1xuICAgICAgciA9IGludDJjaGFyKGQpO1xuICAgIH1cbiAgICB3aGlsZSAoaSA+PSAwKSB7XG4gICAgICBpZiAocCA8IGspIHtcbiAgICAgICAgZCA9ICh0aGlzW2ldICYgKDEgPDwgcCkgLSAxKSA8PCBrIC0gcDtcbiAgICAgICAgZCB8PSB0aGlzWy0taV0gPj4gKHAgKz0gdGhpcy5EQiAtIGspO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZCA9IHRoaXNbaV0gPj4gKHAgLT0gaykgJiBrbTtcbiAgICAgICAgaWYgKHAgPD0gMCkge1xuICAgICAgICAgIHAgKz0gdGhpcy5EQjtcbiAgICAgICAgICAtLWk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkID4gMCkgbSA9IHRydWU7XG4gICAgICBpZiAobSkgciArPSBpbnQyY2hhcihkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG0gPyByIDogJzAnO1xufVxuXG4vLyAocHVibGljKSAtdGhpc1xuZnVuY3Rpb24gYm5OZWdhdGUoKSB7XG4gIHZhciByID0gbmJpKCk7XG4gIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyh0aGlzLCByKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIChwdWJsaWMpIHx0aGlzfFxuZnVuY3Rpb24gYm5BYnMoKSB7XG4gIHJldHVybiB0aGlzLnMgPCAwID8gdGhpcy5uZWdhdGUoKSA6IHRoaXM7XG59XG5cbi8vIChwdWJsaWMpIHJldHVybiArIGlmIHRoaXMgPiBhLCAtIGlmIHRoaXMgPCBhLCAwIGlmIGVxdWFsXG5mdW5jdGlvbiBibkNvbXBhcmVUbyhhKSB7XG4gIHZhciByID0gdGhpcy5zIC0gYS5zO1xuICBpZiAociAhPSAwKSByZXR1cm4gcjtcbiAgdmFyIGkgPSB0aGlzLnQ7XG4gIHIgPSBpIC0gYS50O1xuICBpZiAociAhPSAwKSByZXR1cm4gdGhpcy5zIDwgMCA/IC1yIDogcjtcbiAgd2hpbGUgKC0taSA+PSAwKSBpZiAoKHIgPSB0aGlzW2ldIC0gYVtpXSkgIT0gMCkgcmV0dXJuIHI7XG4gIHJldHVybiAwO1xufVxuXG4vLyByZXR1cm5zIGJpdCBsZW5ndGggb2YgdGhlIGludGVnZXIgeFxuZnVuY3Rpb24gbmJpdHMoeCkge1xuICB2YXIgciA9IDEsXG4gICAgdDtcbiAgaWYgKCh0ID0geCA+Pj4gMTYpICE9IDApIHtcbiAgICB4ID0gdDtcbiAgICByICs9IDE2O1xuICB9XG4gIGlmICgodCA9IHggPj4gOCkgIT0gMCkge1xuICAgIHggPSB0O1xuICAgIHIgKz0gODtcbiAgfVxuICBpZiAoKHQgPSB4ID4+IDQpICE9IDApIHtcbiAgICB4ID0gdDtcbiAgICByICs9IDQ7XG4gIH1cbiAgaWYgKCh0ID0geCA+PiAyKSAhPSAwKSB7XG4gICAgeCA9IHQ7XG4gICAgciArPSAyO1xuICB9XG4gIGlmICgodCA9IHggPj4gMSkgIT0gMCkge1xuICAgIHggPSB0O1xuICAgIHIgKz0gMTtcbiAgfVxuICByZXR1cm4gcjtcbn1cblxuLy8gKHB1YmxpYykgcmV0dXJuIHRoZSBudW1iZXIgb2YgYml0cyBpbiBcInRoaXNcIlxuZnVuY3Rpb24gYm5CaXRMZW5ndGgoKSB7XG4gIGlmICh0aGlzLnQgPD0gMCkgcmV0dXJuIDA7XG4gIHJldHVybiB0aGlzLkRCICogKHRoaXMudCAtIDEpICsgbmJpdHModGhpc1t0aGlzLnQgLSAxXSBeIHRoaXMucyAmIHRoaXMuRE0pO1xufVxuXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyA8PCBuKkRCXG5mdW5jdGlvbiBibnBETFNoaWZ0VG8obiwgcikge1xuICB2YXIgaTtcbiAgZm9yIChpID0gdGhpcy50IC0gMTsgaSA+PSAwOyAtLWkpIHJbaSArIG5dID0gdGhpc1tpXTtcbiAgZm9yIChpID0gbiAtIDE7IGkgPj0gMDsgLS1pKSByW2ldID0gMDtcbiAgci50ID0gdGhpcy50ICsgbjtcbiAgci5zID0gdGhpcy5zO1xufVxuXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyA+PiBuKkRCXG5mdW5jdGlvbiBibnBEUlNoaWZ0VG8obiwgcikge1xuICBmb3IgKHZhciBpID0gbjsgaSA8IHRoaXMudDsgKytpKSByW2kgLSBuXSA9IHRoaXNbaV07XG4gIHIudCA9IE1hdGgubWF4KHRoaXMudCAtIG4sIDApO1xuICByLnMgPSB0aGlzLnM7XG59XG5cbi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIDw8IG5cbmZ1bmN0aW9uIGJucExTaGlmdFRvKG4sIHIpIHtcbiAgdmFyIGJzID0gbiAlIHRoaXMuREI7XG4gIHZhciBjYnMgPSB0aGlzLkRCIC0gYnM7XG4gIHZhciBibSA9ICgxIDw8IGNicykgLSAxO1xuICB2YXIgZHMgPSBNYXRoLmZsb29yKG4gLyB0aGlzLkRCKSxcbiAgICBjID0gdGhpcy5zIDw8IGJzICYgdGhpcy5ETSxcbiAgICBpO1xuICBmb3IgKGkgPSB0aGlzLnQgLSAxOyBpID49IDA7IC0taSkge1xuICAgIHJbaSArIGRzICsgMV0gPSB0aGlzW2ldID4+IGNicyB8IGM7XG4gICAgYyA9ICh0aGlzW2ldICYgYm0pIDw8IGJzO1xuICB9XG4gIGZvciAoaSA9IGRzIC0gMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSAwO1xuICByW2RzXSA9IGM7XG4gIHIudCA9IHRoaXMudCArIGRzICsgMTtcbiAgci5zID0gdGhpcy5zO1xuICByLmNsYW1wKCk7XG59XG5cbi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzID4+IG5cbmZ1bmN0aW9uIGJucFJTaGlmdFRvKG4sIHIpIHtcbiAgci5zID0gdGhpcy5zO1xuICB2YXIgZHMgPSBNYXRoLmZsb29yKG4gLyB0aGlzLkRCKTtcbiAgaWYgKGRzID49IHRoaXMudCkge1xuICAgIHIudCA9IDA7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBicyA9IG4gJSB0aGlzLkRCO1xuICB2YXIgY2JzID0gdGhpcy5EQiAtIGJzO1xuICB2YXIgYm0gPSAoMSA8PCBicykgLSAxO1xuICByWzBdID0gdGhpc1tkc10gPj4gYnM7XG4gIGZvciAodmFyIGkgPSBkcyArIDE7IGkgPCB0aGlzLnQ7ICsraSkge1xuICAgIHJbaSAtIGRzIC0gMV0gfD0gKHRoaXNbaV0gJiBibSkgPDwgY2JzO1xuICAgIHJbaSAtIGRzXSA9IHRoaXNbaV0gPj4gYnM7XG4gIH1cbiAgaWYgKGJzID4gMCkgclt0aGlzLnQgLSBkcyAtIDFdIHw9ICh0aGlzLnMgJiBibSkgPDwgY2JzO1xuICByLnQgPSB0aGlzLnQgLSBkcztcbiAgci5jbGFtcCgpO1xufVxuXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyAtIGFcbmZ1bmN0aW9uIGJucFN1YlRvKGEsIHIpIHtcbiAgdmFyIGkgPSAwLFxuICAgIGMgPSAwLFxuICAgIG0gPSBNYXRoLm1pbihhLnQsIHRoaXMudCk7XG4gIHdoaWxlIChpIDwgbSkge1xuICAgIGMgKz0gdGhpc1tpXSAtIGFbaV07XG4gICAgcltpKytdID0gYyAmIHRoaXMuRE07XG4gICAgYyA+Pj0gdGhpcy5EQjtcbiAgfVxuICBpZiAoYS50IDwgdGhpcy50KSB7XG4gICAgYyAtPSBhLnM7XG4gICAgd2hpbGUgKGkgPCB0aGlzLnQpIHtcbiAgICAgIGMgKz0gdGhpc1tpXTtcbiAgICAgIHJbaSsrXSA9IGMgJiB0aGlzLkRNO1xuICAgICAgYyA+Pj0gdGhpcy5EQjtcbiAgICB9XG4gICAgYyArPSB0aGlzLnM7XG4gIH0gZWxzZSB7XG4gICAgYyArPSB0aGlzLnM7XG4gICAgd2hpbGUgKGkgPCBhLnQpIHtcbiAgICAgIGMgLT0gYVtpXTtcbiAgICAgIHJbaSsrXSA9IGMgJiB0aGlzLkRNO1xuICAgICAgYyA+Pj0gdGhpcy5EQjtcbiAgICB9XG4gICAgYyAtPSBhLnM7XG4gIH1cbiAgci5zID0gYyA8IDAgPyAtMSA6IDA7XG4gIGlmIChjIDwgLTEpIHJbaSsrXSA9IHRoaXMuRFYgKyBjO2Vsc2UgaWYgKGMgPiAwKSByW2krK10gPSBjO1xuICByLnQgPSBpO1xuICByLmNsYW1wKCk7XG59XG5cbi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzICogYSwgciAhPSB0aGlzLGEgKEhBQyAxNC4xMilcbi8vIFwidGhpc1wiIHNob3VsZCBiZSB0aGUgbGFyZ2VyIG9uZSBpZiBhcHByb3ByaWF0ZS5cbmZ1bmN0aW9uIGJucE11bHRpcGx5VG8oYSwgcikge1xuICB2YXIgeCA9IHRoaXMuYWJzKCksXG4gICAgeSA9IGEuYWJzKCk7XG4gIHZhciBpID0geC50O1xuICByLnQgPSBpICsgeS50O1xuICB3aGlsZSAoLS1pID49IDApIHJbaV0gPSAwO1xuICBmb3IgKGkgPSAwOyBpIDwgeS50OyArK2kpIHJbaSArIHgudF0gPSB4LmFtKDAsIHlbaV0sIHIsIGksIDAsIHgudCk7XG4gIHIucyA9IDA7XG4gIHIuY2xhbXAoKTtcbiAgaWYgKHRoaXMucyAhPSBhLnMpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhyLCByKTtcbn1cblxuLy8gKHByb3RlY3RlZCkgciA9IHRoaXNeMiwgciAhPSB0aGlzIChIQUMgMTQuMTYpXG5mdW5jdGlvbiBibnBTcXVhcmVUbyhyKSB7XG4gIHZhciB4ID0gdGhpcy5hYnMoKTtcbiAgdmFyIGkgPSByLnQgPSAyICogeC50O1xuICB3aGlsZSAoLS1pID49IDApIHJbaV0gPSAwO1xuICBmb3IgKGkgPSAwOyBpIDwgeC50IC0gMTsgKytpKSB7XG4gICAgdmFyIGMgPSB4LmFtKGksIHhbaV0sIHIsIDIgKiBpLCAwLCAxKTtcbiAgICBpZiAoKHJbaSArIHgudF0gKz0geC5hbShpICsgMSwgMiAqIHhbaV0sIHIsIDIgKiBpICsgMSwgYywgeC50IC0gaSAtIDEpKSA+PSB4LkRWKSB7XG4gICAgICByW2kgKyB4LnRdIC09IHguRFY7XG4gICAgICByW2kgKyB4LnQgKyAxXSA9IDE7XG4gICAgfVxuICB9XG4gIGlmIChyLnQgPiAwKSByW3IudCAtIDFdICs9IHguYW0oaSwgeFtpXSwgciwgMiAqIGksIDAsIDEpO1xuICByLnMgPSAwO1xuICByLmNsYW1wKCk7XG59XG5cbi8vIChwcm90ZWN0ZWQpIGRpdmlkZSB0aGlzIGJ5IG0sIHF1b3RpZW50IGFuZCByZW1haW5kZXIgdG8gcSwgciAoSEFDIDE0LjIwKVxuLy8gciAhPSBxLCB0aGlzICE9IG0uICBxIG9yIHIgbWF5IGJlIG51bGwuXG5mdW5jdGlvbiBibnBEaXZSZW1UbyhtLCBxLCByKSB7XG4gIHZhciBwbSA9IG0uYWJzKCk7XG4gIGlmIChwbS50IDw9IDApIHJldHVybjtcbiAgdmFyIHB0ID0gdGhpcy5hYnMoKTtcbiAgaWYgKHB0LnQgPCBwbS50KSB7XG4gICAgaWYgKHEgIT0gbnVsbCkgcS5mcm9tSW50KDApO1xuICAgIGlmIChyICE9IG51bGwpIHRoaXMuY29weVRvKHIpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAociA9PSBudWxsKSByID0gbmJpKCk7XG4gIHZhciB5ID0gbmJpKCksXG4gICAgdHMgPSB0aGlzLnMsXG4gICAgbXMgPSBtLnM7XG4gIHZhciBuc2ggPSB0aGlzLkRCIC0gbmJpdHMocG1bcG0udCAtIDFdKTtcbiAgLy8gbm9ybWFsaXplIG1vZHVsdXNcbiAgaWYgKG5zaCA+IDApIHtcbiAgICBwbS5sU2hpZnRUbyhuc2gsIHkpO1xuICAgIHB0LmxTaGlmdFRvKG5zaCwgcik7XG4gIH0gZWxzZSB7XG4gICAgcG0uY29weVRvKHkpO1xuICAgIHB0LmNvcHlUbyhyKTtcbiAgfVxuICB2YXIgeXMgPSB5LnQ7XG4gIHZhciB5MCA9IHlbeXMgLSAxXTtcbiAgaWYgKHkwID09IDApIHJldHVybjtcbiAgdmFyIHl0ID0geTAgKiAoMSA8PCB0aGlzLkYxKSArICh5cyA+IDEgPyB5W3lzIC0gMl0gPj4gdGhpcy5GMiA6IDApO1xuICB2YXIgZDEgPSB0aGlzLkZWIC8geXQsXG4gICAgZDIgPSAoMSA8PCB0aGlzLkYxKSAvIHl0LFxuICAgIGUgPSAxIDw8IHRoaXMuRjI7XG4gIHZhciBpID0gci50LFxuICAgIGogPSBpIC0geXMsXG4gICAgdCA9IHEgPT0gbnVsbCA/IG5iaSgpIDogcTtcbiAgeS5kbFNoaWZ0VG8oaiwgdCk7XG4gIGlmIChyLmNvbXBhcmVUbyh0KSA+PSAwKSB7XG4gICAgcltyLnQrK10gPSAxO1xuICAgIHIuc3ViVG8odCwgcik7XG4gIH1cbiAgQmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKHlzLCB0KTtcbiAgdC5zdWJUbyh5LCB5KTtcbiAgLy8gXCJuZWdhdGl2ZVwiIHkgc28gd2UgY2FuIHJlcGxhY2Ugc3ViIHdpdGggYW0gbGF0ZXJcbiAgd2hpbGUgKHkudCA8IHlzKSB5W3kudCsrXSA9IDA7XG4gIHdoaWxlICgtLWogPj0gMCkge1xuICAgIC8vIEVzdGltYXRlIHF1b3RpZW50IGRpZ2l0XG4gICAgdmFyIHFkID0gclstLWldID09IHkwID8gdGhpcy5ETSA6IE1hdGguZmxvb3IocltpXSAqIGQxICsgKHJbaSAtIDFdICsgZSkgKiBkMik7XG4gICAgaWYgKChyW2ldICs9IHkuYW0oMCwgcWQsIHIsIGosIDAsIHlzKSkgPCBxZCkge1xuICAgICAgLy8gVHJ5IGl0IG91dFxuICAgICAgeS5kbFNoaWZ0VG8oaiwgdCk7XG4gICAgICByLnN1YlRvKHQsIHIpO1xuICAgICAgd2hpbGUgKHJbaV0gPCAtLXFkKSByLnN1YlRvKHQsIHIpO1xuICAgIH1cbiAgfVxuICBpZiAocSAhPSBudWxsKSB7XG4gICAgci5kclNoaWZ0VG8oeXMsIHEpO1xuICAgIGlmICh0cyAhPSBtcykgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHEsIHEpO1xuICB9XG4gIHIudCA9IHlzO1xuICByLmNsYW1wKCk7XG4gIGlmIChuc2ggPiAwKSByLnJTaGlmdFRvKG5zaCwgcik7XG4gIC8vIERlbm9ybWFsaXplIHJlbWFpbmRlclxuICBpZiAodHMgPCAwKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8ociwgcik7XG59XG5cbi8vIChwdWJsaWMpIHRoaXMgbW9kIGFcbmZ1bmN0aW9uIGJuTW9kKGEpIHtcbiAgdmFyIHIgPSBuYmkoKTtcbiAgdGhpcy5hYnMoKS5kaXZSZW1UbyhhLCBudWxsLCByKTtcbiAgaWYgKHRoaXMucyA8IDAgJiYgci5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSA+IDApIGEuc3ViVG8ociwgcik7XG4gIHJldHVybiByO1xufVxuXG4vLyAocHJvdGVjdGVkKSByZXR1cm4gXCItMS90aGlzICUgMl5EQlwiOyB1c2VmdWwgZm9yIE1vbnQuIHJlZHVjdGlvblxuLy8ganVzdGlmaWNhdGlvbjpcbi8vICAgICAgICAgeHkgPT0gMSAobW9kIG0pXG4vLyAgICAgICAgIHh5ID0gIDEra21cbi8vICAgeHkoMi14eSkgPSAoMStrbSkoMS1rbSlcbi8vIHhbeSgyLXh5KV0gPSAxLWteMm1eMlxuLy8geFt5KDIteHkpXSA9PSAxIChtb2QgbV4yKVxuLy8gaWYgeSBpcyAxL3ggbW9kIG0sIHRoZW4geSgyLXh5KSBpcyAxL3ggbW9kIG1eMlxuLy8gc2hvdWxkIHJlZHVjZSB4IGFuZCB5KDIteHkpIGJ5IG1eMiBhdCBlYWNoIHN0ZXAgdG8ga2VlcCBzaXplIGJvdW5kZWQuXG4vLyBKUyBtdWx0aXBseSBcIm92ZXJmbG93c1wiIGRpZmZlcmVudGx5IGZyb20gQy9DKyssIHNvIGNhcmUgaXMgbmVlZGVkIGhlcmUuXG5mdW5jdGlvbiBibnBJbnZEaWdpdCgpIHtcbiAgaWYgKHRoaXMudCA8IDEpIHJldHVybiAwO1xuICB2YXIgeCA9IHRoaXNbMF07XG4gIGlmICgoeCAmIDEpID09IDApIHJldHVybiAwO1xuICB2YXIgeSA9IHggJiAzO1xuICAvLyB5ID09IDEveCBtb2QgMl4yXG4gIHkgPSB5ICogKDIgLSAoeCAmIDB4ZikgKiB5KSAmIDB4ZjtcbiAgLy8geSA9PSAxL3ggbW9kIDJeNFxuICB5ID0geSAqICgyIC0gKHggJiAweGZmKSAqIHkpICYgMHhmZjtcbiAgLy8geSA9PSAxL3ggbW9kIDJeOFxuICB5ID0geSAqICgyIC0gKCh4ICYgMHhmZmZmKSAqIHkgJiAweGZmZmYpKSAmIDB4ZmZmZjtcbiAgLy8geSA9PSAxL3ggbW9kIDJeMTZcbiAgLy8gbGFzdCBzdGVwIC0gY2FsY3VsYXRlIGludmVyc2UgbW9kIERWIGRpcmVjdGx5O1xuICAvLyBhc3N1bWVzIDE2IDwgREIgPD0gMzIgYW5kIGFzc3VtZXMgYWJpbGl0eSB0byBoYW5kbGUgNDgtYml0IGludHNcbiAgeSA9IHkgKiAoMiAtIHggKiB5ICUgdGhpcy5EVikgJSB0aGlzLkRWO1xuICAvLyB5ID09IDEveCBtb2QgMl5kYml0c1xuICAvLyB3ZSByZWFsbHkgd2FudCB0aGUgbmVnYXRpdmUgaW52ZXJzZSwgYW5kIC1EViA8IHkgPCBEVlxuICByZXR1cm4geSA+IDAgPyB0aGlzLkRWIC0geSA6IC15O1xufVxuZnVuY3Rpb24gYm5FcXVhbHMoYSkge1xuICByZXR1cm4gdGhpcy5jb21wYXJlVG8oYSkgPT0gMDtcbn1cblxuLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgKyBhXG5mdW5jdGlvbiBibnBBZGRUbyhhLCByKSB7XG4gIHZhciBpID0gMCxcbiAgICBjID0gMCxcbiAgICBtID0gTWF0aC5taW4oYS50LCB0aGlzLnQpO1xuICB3aGlsZSAoaSA8IG0pIHtcbiAgICBjICs9IHRoaXNbaV0gKyBhW2ldO1xuICAgIHJbaSsrXSA9IGMgJiB0aGlzLkRNO1xuICAgIGMgPj49IHRoaXMuREI7XG4gIH1cbiAgaWYgKGEudCA8IHRoaXMudCkge1xuICAgIGMgKz0gYS5zO1xuICAgIHdoaWxlIChpIDwgdGhpcy50KSB7XG4gICAgICBjICs9IHRoaXNbaV07XG4gICAgICByW2krK10gPSBjICYgdGhpcy5ETTtcbiAgICAgIGMgPj49IHRoaXMuREI7XG4gICAgfVxuICAgIGMgKz0gdGhpcy5zO1xuICB9IGVsc2Uge1xuICAgIGMgKz0gdGhpcy5zO1xuICAgIHdoaWxlIChpIDwgYS50KSB7XG4gICAgICBjICs9IGFbaV07XG4gICAgICByW2krK10gPSBjICYgdGhpcy5ETTtcbiAgICAgIGMgPj49IHRoaXMuREI7XG4gICAgfVxuICAgIGMgKz0gYS5zO1xuICB9XG4gIHIucyA9IGMgPCAwID8gLTEgOiAwO1xuICBpZiAoYyA+IDApIHJbaSsrXSA9IGM7ZWxzZSBpZiAoYyA8IC0xKSByW2krK10gPSB0aGlzLkRWICsgYztcbiAgci50ID0gaTtcbiAgci5jbGFtcCgpO1xufVxuXG4vLyAocHVibGljKSB0aGlzICsgYVxuZnVuY3Rpb24gYm5BZGQoYSkge1xuICB2YXIgciA9IG5iaSgpO1xuICB0aGlzLmFkZFRvKGEsIHIpO1xuICByZXR1cm4gcjtcbn1cblxuLy8gKHB1YmxpYykgdGhpcyAtIGFcbmZ1bmN0aW9uIGJuU3VidHJhY3QoYSkge1xuICB2YXIgciA9IG5iaSgpO1xuICB0aGlzLnN1YlRvKGEsIHIpO1xuICByZXR1cm4gcjtcbn1cblxuLy8gKHB1YmxpYykgdGhpcyAqIGFcbmZ1bmN0aW9uIGJuTXVsdGlwbHkoYSkge1xuICB2YXIgciA9IG5iaSgpO1xuICB0aGlzLm11bHRpcGx5VG8oYSwgcik7XG4gIHJldHVybiByO1xufVxuXG4vLyAocHVibGljKSB0aGlzIC8gYVxuZnVuY3Rpb24gYm5EaXZpZGUoYSkge1xuICB2YXIgciA9IG5iaSgpO1xuICB0aGlzLmRpdlJlbVRvKGEsIHIsIG51bGwpO1xuICByZXR1cm4gcjtcbn1cblxuLy8gTW9udGdvbWVyeSByZWR1Y3Rpb25cbmZ1bmN0aW9uIE1vbnRnb21lcnkobSkge1xuICB0aGlzLm0gPSBtO1xuICB0aGlzLm1wID0gbS5pbnZEaWdpdCgpO1xuICB0aGlzLm1wbCA9IHRoaXMubXAgJiAweDdmZmY7XG4gIHRoaXMubXBoID0gdGhpcy5tcCA+PiAxNTtcbiAgdGhpcy51bSA9ICgxIDw8IG0uREIgLSAxNSkgLSAxO1xuICB0aGlzLm10MiA9IDIgKiBtLnQ7XG59XG5cbi8vIHhSIG1vZCBtXG5mdW5jdGlvbiBtb250Q29udmVydCh4KSB7XG4gIHZhciByID0gbmJpKCk7XG4gIHguYWJzKCkuZGxTaGlmdFRvKHRoaXMubS50LCByKTtcbiAgci5kaXZSZW1Ubyh0aGlzLm0sIG51bGwsIHIpO1xuICBpZiAoeC5zIDwgMCAmJiByLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLlpFUk8pID4gMCkgdGhpcy5tLnN1YlRvKHIsIHIpO1xuICByZXR1cm4gcjtcbn1cblxuLy8geC9SIG1vZCBtXG5mdW5jdGlvbiBtb250UmV2ZXJ0KHgpIHtcbiAgdmFyIHIgPSBuYmkoKTtcbiAgeC5jb3B5VG8ocik7XG4gIHRoaXMucmVkdWNlKHIpO1xuICByZXR1cm4gcjtcbn1cblxuLy8geCA9IHgvUiBtb2QgbSAoSEFDIDE0LjMyKVxuZnVuY3Rpb24gbW9udFJlZHVjZSh4KSB7XG4gIHdoaWxlICh4LnQgPD0gdGhpcy5tdDIpXG4gIC8vIHBhZCB4IHNvIGFtIGhhcyBlbm91Z2ggcm9vbSBsYXRlclxuICB4W3gudCsrXSA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tLnQ7ICsraSkge1xuICAgIC8vIGZhc3RlciB3YXkgb2YgY2FsY3VsYXRpbmcgdTAgPSB4W2ldKm1wIG1vZCBEVlxuICAgIHZhciBqID0geFtpXSAmIDB4N2ZmZjtcbiAgICB2YXIgdTAgPSBqICogdGhpcy5tcGwgKyAoKGogKiB0aGlzLm1waCArICh4W2ldID4+IDE1KSAqIHRoaXMubXBsICYgdGhpcy51bSkgPDwgMTUpICYgeC5ETTtcbiAgICAvLyB1c2UgYW0gdG8gY29tYmluZSB0aGUgbXVsdGlwbHktc2hpZnQtYWRkIGludG8gb25lIGNhbGxcbiAgICBqID0gaSArIHRoaXMubS50O1xuICAgIHhbal0gKz0gdGhpcy5tLmFtKDAsIHUwLCB4LCBpLCAwLCB0aGlzLm0udCk7XG4gICAgLy8gcHJvcGFnYXRlIGNhcnJ5XG4gICAgd2hpbGUgKHhbal0gPj0geC5EVikge1xuICAgICAgeFtqXSAtPSB4LkRWO1xuICAgICAgeFsrK2pdKys7XG4gICAgfVxuICB9XG4gIHguY2xhbXAoKTtcbiAgeC5kclNoaWZ0VG8odGhpcy5tLnQsIHgpO1xuICBpZiAoeC5jb21wYXJlVG8odGhpcy5tKSA+PSAwKSB4LnN1YlRvKHRoaXMubSwgeCk7XG59XG5cbi8vIHIgPSBcInheMi9SIG1vZCBtXCI7IHggIT0gclxuZnVuY3Rpb24gbW9udFNxclRvKHgsIHIpIHtcbiAgeC5zcXVhcmVUbyhyKTtcbiAgdGhpcy5yZWR1Y2Uocik7XG59XG5cbi8vIHIgPSBcInh5L1IgbW9kIG1cIjsgeCx5ICE9IHJcbmZ1bmN0aW9uIG1vbnRNdWxUbyh4LCB5LCByKSB7XG4gIHgubXVsdGlwbHlUbyh5LCByKTtcbiAgdGhpcy5yZWR1Y2Uocik7XG59XG5Nb250Z29tZXJ5LnByb3RvdHlwZS5jb252ZXJ0ID0gbW9udENvbnZlcnQ7XG5Nb250Z29tZXJ5LnByb3RvdHlwZS5yZXZlcnQgPSBtb250UmV2ZXJ0O1xuTW9udGdvbWVyeS5wcm90b3R5cGUucmVkdWNlID0gbW9udFJlZHVjZTtcbk1vbnRnb21lcnkucHJvdG90eXBlLm11bFRvID0gbW9udE11bFRvO1xuTW9udGdvbWVyeS5wcm90b3R5cGUuc3FyVG8gPSBtb250U3FyVG87XG5cbi8vIChwdWJsaWMpIHRoaXNeZSAlIG0gKEhBQyAxNC44NSlcbmZ1bmN0aW9uIGJuTW9kUG93KGUsIG0sIGNhbGxiYWNrKSB7XG4gIHZhciBpID0gZS5iaXRMZW5ndGgoKSxcbiAgICBrLFxuICAgIHIgPSBuYnYoMSksXG4gICAgeiA9IG5ldyBNb250Z29tZXJ5KG0pO1xuICBpZiAoaSA8PSAwKSByZXR1cm4gcjtlbHNlIGlmIChpIDwgMTgpIGsgPSAxO2Vsc2UgaWYgKGkgPCA0OCkgayA9IDM7ZWxzZSBpZiAoaSA8IDE0NCkgayA9IDQ7ZWxzZSBpZiAoaSA8IDc2OCkgayA9IDU7ZWxzZSBrID0gNjtcblxuICAvLyBwcmVjb21wdXRhdGlvblxuICB2YXIgZyA9IG5ldyBBcnJheSgpLFxuICAgIG4gPSAzLFxuICAgIGsxID0gayAtIDEsXG4gICAga20gPSAoMSA8PCBrKSAtIDE7XG4gIGdbMV0gPSB6LmNvbnZlcnQodGhpcyk7XG4gIGlmIChrID4gMSkge1xuICAgIHZhciBnMiA9IG5iaSgpO1xuICAgIHouc3FyVG8oZ1sxXSwgZzIpO1xuICAgIHdoaWxlIChuIDw9IGttKSB7XG4gICAgICBnW25dID0gbmJpKCk7XG4gICAgICB6Lm11bFRvKGcyLCBnW24gLSAyXSwgZ1tuXSk7XG4gICAgICBuICs9IDI7XG4gICAgfVxuICB9XG4gIHZhciBqID0gZS50IC0gMSxcbiAgICB3LFxuICAgIGlzMSA9IHRydWUsXG4gICAgcjIgPSBuYmkoKSxcbiAgICB0O1xuICBpID0gbmJpdHMoZVtqXSkgLSAxO1xuICB3aGlsZSAoaiA+PSAwKSB7XG4gICAgaWYgKGkgPj0gazEpIHcgPSBlW2pdID4+IGkgLSBrMSAmIGttO2Vsc2Uge1xuICAgICAgdyA9IChlW2pdICYgKDEgPDwgaSArIDEpIC0gMSkgPDwgazEgLSBpO1xuICAgICAgaWYgKGogPiAwKSB3IHw9IGVbaiAtIDFdID4+IHRoaXMuREIgKyBpIC0gazE7XG4gICAgfVxuICAgIG4gPSBrO1xuICAgIHdoaWxlICgodyAmIDEpID09IDApIHtcbiAgICAgIHcgPj49IDE7XG4gICAgICAtLW47XG4gICAgfVxuICAgIGlmICgoaSAtPSBuKSA8IDApIHtcbiAgICAgIGkgKz0gdGhpcy5EQjtcbiAgICAgIC0tajtcbiAgICB9XG4gICAgaWYgKGlzMSkge1xuICAgICAgLy8gcmV0ID09IDEsIGRvbid0IGJvdGhlciBzcXVhcmluZyBvciBtdWx0aXBseWluZyBpdFxuICAgICAgZ1t3XS5jb3B5VG8ocik7XG4gICAgICBpczEgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2hpbGUgKG4gPiAxKSB7XG4gICAgICAgIHouc3FyVG8ociwgcjIpO1xuICAgICAgICB6LnNxclRvKHIyLCByKTtcbiAgICAgICAgbiAtPSAyO1xuICAgICAgfVxuICAgICAgaWYgKG4gPiAwKSB6LnNxclRvKHIsIHIyKTtlbHNlIHtcbiAgICAgICAgdCA9IHI7XG4gICAgICAgIHIgPSByMjtcbiAgICAgICAgcjIgPSB0O1xuICAgICAgfVxuICAgICAgei5tdWxUbyhyMiwgZ1t3XSwgcik7XG4gICAgfVxuICAgIHdoaWxlIChqID49IDAgJiYgKGVbal0gJiAxIDw8IGkpID09IDApIHtcbiAgICAgIHouc3FyVG8ociwgcjIpO1xuICAgICAgdCA9IHI7XG4gICAgICByID0gcjI7XG4gICAgICByMiA9IHQ7XG4gICAgICBpZiAoLS1pIDwgMCkge1xuICAgICAgICBpID0gdGhpcy5EQiAtIDE7XG4gICAgICAgIC0tajtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHoucmV2ZXJ0KHIpO1xuICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBwcm90ZWN0ZWRcbkJpZ0ludGVnZXIucHJvdG90eXBlLmNvcHlUbyA9IGJucENvcHlUbztcbkJpZ0ludGVnZXIucHJvdG90eXBlLmZyb21JbnQgPSBibnBGcm9tSW50O1xuQmlnSW50ZWdlci5wcm90b3R5cGUuZnJvbVN0cmluZyA9IGJucEZyb21TdHJpbmc7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5jbGFtcCA9IGJucENsYW1wO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuZGxTaGlmdFRvID0gYm5wRExTaGlmdFRvO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuZHJTaGlmdFRvID0gYm5wRFJTaGlmdFRvO1xuQmlnSW50ZWdlci5wcm90b3R5cGUubFNoaWZ0VG8gPSBibnBMU2hpZnRUbztcbkJpZ0ludGVnZXIucHJvdG90eXBlLnJTaGlmdFRvID0gYm5wUlNoaWZ0VG87XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5zdWJUbyA9IGJucFN1YlRvO1xuQmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHlUbyA9IGJucE11bHRpcGx5VG87XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5zcXVhcmVUbyA9IGJucFNxdWFyZVRvO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuZGl2UmVtVG8gPSBibnBEaXZSZW1UbztcbkJpZ0ludGVnZXIucHJvdG90eXBlLmludkRpZ2l0ID0gYm5wSW52RGlnaXQ7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGRUbyA9IGJucEFkZFRvO1xuXG4vLyBwdWJsaWNcbkJpZ0ludGVnZXIucHJvdG90eXBlLnRvU3RyaW5nID0gYm5Ub1N0cmluZztcbkJpZ0ludGVnZXIucHJvdG90eXBlLm5lZ2F0ZSA9IGJuTmVnYXRlO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuYWJzID0gYm5BYnM7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5jb21wYXJlVG8gPSBibkNvbXBhcmVUbztcbkJpZ0ludGVnZXIucHJvdG90eXBlLmJpdExlbmd0aCA9IGJuQml0TGVuZ3RoO1xuQmlnSW50ZWdlci5wcm90b3R5cGUubW9kID0gYm5Nb2Q7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5lcXVhbHMgPSBibkVxdWFscztcbkJpZ0ludGVnZXIucHJvdG90eXBlLmFkZCA9IGJuQWRkO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuc3VidHJhY3QgPSBiblN1YnRyYWN0O1xuQmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHkgPSBibk11bHRpcGx5O1xuQmlnSW50ZWdlci5wcm90b3R5cGUuZGl2aWRlID0gYm5EaXZpZGU7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2RQb3cgPSBibk1vZFBvdztcblxuLy8gXCJjb25zdGFudHNcIlxuQmlnSW50ZWdlci5aRVJPID0gbmJ2KDApO1xuQmlnSW50ZWdlci5PTkUgPSBuYnYoMSk7IiwiLyohXG4gKiBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcblxuLyoqIEBjbGFzcyAqL1xudmFyIENvZ25pdG9Kd3RUb2tlbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvZ25pdG9Kd3RUb2tlbiBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB0b2tlbiBUaGUgSldUIHRva2VuLlxuICAgKi9cbiAgZnVuY3Rpb24gQ29nbml0b0p3dFRva2VuKHRva2VuKSB7XG4gICAgLy8gQXNzaWduIG9iamVjdFxuICAgIHRoaXMuand0VG9rZW4gPSB0b2tlbiB8fCAnJztcbiAgICB0aGlzLnBheWxvYWQgPSB0aGlzLmRlY29kZVBheWxvYWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgcmVjb3JkJ3MgdG9rZW4uXG4gICAqL1xuICB2YXIgX3Byb3RvID0gQ29nbml0b0p3dFRva2VuLnByb3RvdHlwZTtcbiAgX3Byb3RvLmdldEp3dFRva2VuID0gZnVuY3Rpb24gZ2V0Snd0VG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuand0VG9rZW47XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2ludH0gdGhlIHRva2VuJ3MgZXhwaXJhdGlvbiAoZXhwIG1lbWJlcikuXG4gICAqLztcbiAgX3Byb3RvLmdldEV4cGlyYXRpb24gPSBmdW5jdGlvbiBnZXRFeHBpcmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnBheWxvYWQuZXhwO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtpbnR9IHRoZSB0b2tlbidzIFwiaXNzdWVkIGF0XCIgKGlhdCBtZW1iZXIpLlxuICAgKi87XG4gIF9wcm90by5nZXRJc3N1ZWRBdCA9IGZ1bmN0aW9uIGdldElzc3VlZEF0KCkge1xuICAgIHJldHVybiB0aGlzLnBheWxvYWQuaWF0O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IHRoZSB0b2tlbidzIHBheWxvYWQuXG4gICAqLztcbiAgX3Byb3RvLmRlY29kZVBheWxvYWQgPSBmdW5jdGlvbiBkZWNvZGVQYXlsb2FkKCkge1xuICAgIHZhciBwYXlsb2FkID0gdGhpcy5qd3RUb2tlbi5zcGxpdCgnLicpWzFdO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShCdWZmZXIuZnJvbShwYXlsb2FkLCAnYmFzZTY0JykudG9TdHJpbmcoJ3V0ZjgnKSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICB9O1xuICByZXR1cm4gQ29nbml0b0p3dFRva2VuO1xufSgpO1xuZXhwb3J0IHsgQ29nbml0b0p3dFRva2VuIGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZSh0LCBvKSB7XG4gIHQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksIHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdCwgX3NldFByb3RvdHlwZU9mKHQsIG8pO1xufVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQsIGUpIHtcbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiAodCwgZSkge1xuICAgIHJldHVybiB0Ll9fcHJvdG9fXyA9IGUsIHQ7XG4gIH0sIF9zZXRQcm90b3R5cGVPZih0LCBlKTtcbn1cbi8qIVxuICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCBDb2duaXRvSnd0VG9rZW4gZnJvbSAnLi9Db2duaXRvSnd0VG9rZW4nO1xuXG4vKiogQGNsYXNzICovXG52YXIgQ29nbml0b0FjY2Vzc1Rva2VuID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29nbml0b0p3dFRva2VuKSB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvZ25pdG9BY2Nlc3NUb2tlbiBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBBY2Nlc3NUb2tlbiBUaGUgSldUIGFjY2VzcyB0b2tlbi5cbiAgICovXG4gIGZ1bmN0aW9uIENvZ25pdG9BY2Nlc3NUb2tlbihfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBBY2Nlc3NUb2tlbiA9IF9yZWYuQWNjZXNzVG9rZW47XG4gICAgcmV0dXJuIF9Db2duaXRvSnd0VG9rZW4uY2FsbCh0aGlzLCBBY2Nlc3NUb2tlbiB8fCAnJykgfHwgdGhpcztcbiAgfVxuICBfaW5oZXJpdHNMb29zZShDb2duaXRvQWNjZXNzVG9rZW4sIF9Db2duaXRvSnd0VG9rZW4pO1xuICByZXR1cm4gQ29nbml0b0FjY2Vzc1Rva2VuO1xufShDb2duaXRvSnd0VG9rZW4pO1xuZXhwb3J0IHsgQ29nbml0b0FjY2Vzc1Rva2VuIGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZSh0LCBvKSB7XG4gIHQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksIHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdCwgX3NldFByb3RvdHlwZU9mKHQsIG8pO1xufVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQsIGUpIHtcbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiAodCwgZSkge1xuICAgIHJldHVybiB0Ll9fcHJvdG9fXyA9IGUsIHQ7XG4gIH0sIF9zZXRQcm90b3R5cGVPZih0LCBlKTtcbn1cbi8qIVxuICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCBDb2duaXRvSnd0VG9rZW4gZnJvbSAnLi9Db2duaXRvSnd0VG9rZW4nO1xuXG4vKiogQGNsYXNzICovXG52YXIgQ29nbml0b0lkVG9rZW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db2duaXRvSnd0VG9rZW4pIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQ29nbml0b0lkVG9rZW4gb2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gSWRUb2tlbiBUaGUgSldUIElkIHRva2VuXG4gICAqL1xuICBmdW5jdGlvbiBDb2duaXRvSWRUb2tlbihfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBJZFRva2VuID0gX3JlZi5JZFRva2VuO1xuICAgIHJldHVybiBfQ29nbml0b0p3dFRva2VuLmNhbGwodGhpcywgSWRUb2tlbiB8fCAnJykgfHwgdGhpcztcbiAgfVxuICBfaW5oZXJpdHNMb29zZShDb2duaXRvSWRUb2tlbiwgX0NvZ25pdG9Kd3RUb2tlbik7XG4gIHJldHVybiBDb2duaXRvSWRUb2tlbjtcbn0oQ29nbml0b0p3dFRva2VuKTtcbmV4cG9ydCB7IENvZ25pdG9JZFRva2VuIGFzIGRlZmF1bHQgfTsiLCIvKiFcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuLyoqIEBjbGFzcyAqL1xudmFyIENvZ25pdG9SZWZyZXNoVG9rZW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBDb2duaXRvUmVmcmVzaFRva2VuIG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZz19IFJlZnJlc2hUb2tlbiBUaGUgSldUIHJlZnJlc2ggdG9rZW4uXG4gICAqL1xuICBmdW5jdGlvbiBDb2duaXRvUmVmcmVzaFRva2VuKF90ZW1wKSB7XG4gICAgdmFyIF9yZWYgPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcCxcbiAgICAgIFJlZnJlc2hUb2tlbiA9IF9yZWYuUmVmcmVzaFRva2VuO1xuICAgIC8vIEFzc2lnbiBvYmplY3RcbiAgICB0aGlzLnRva2VuID0gUmVmcmVzaFRva2VuIHx8ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSByZWNvcmQncyB0b2tlbi5cbiAgICovXG4gIHZhciBfcHJvdG8gPSBDb2duaXRvUmVmcmVzaFRva2VuLnByb3RvdHlwZTtcbiAgX3Byb3RvLmdldFRva2VuID0gZnVuY3Rpb24gZ2V0VG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9rZW47XG4gIH07XG4gIHJldHVybiBDb2duaXRvUmVmcmVzaFRva2VuO1xufSgpO1xuZXhwb3J0IHsgQ29nbml0b1JlZnJlc2hUb2tlbiBhcyBkZWZhdWx0IH07IiwiLyohXG4gKiBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcbmltcG9ydCB7IFNoYTI1NiB9IGZyb20gJ0Bhd3MtY3J5cHRvL3NoYTI1Ni1qcyc7XG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJy4vUGxhdGZvcm0nO1xuaW1wb3J0IEJpZ0ludGVnZXIgZnJvbSAnLi9CaWdJbnRlZ2VyJztcbmltcG9ydCBBdXRoZW50aWNhdGlvbkhlbHBlciBmcm9tICcuL0F1dGhlbnRpY2F0aW9uSGVscGVyJztcbmltcG9ydCBDb2duaXRvQWNjZXNzVG9rZW4gZnJvbSAnLi9Db2duaXRvQWNjZXNzVG9rZW4nO1xuaW1wb3J0IENvZ25pdG9JZFRva2VuIGZyb20gJy4vQ29nbml0b0lkVG9rZW4nO1xuaW1wb3J0IENvZ25pdG9SZWZyZXNoVG9rZW4gZnJvbSAnLi9Db2duaXRvUmVmcmVzaFRva2VuJztcbmltcG9ydCBDb2duaXRvVXNlclNlc3Npb24gZnJvbSAnLi9Db2duaXRvVXNlclNlc3Npb24nO1xuaW1wb3J0IERhdGVIZWxwZXIgZnJvbSAnLi9EYXRlSGVscGVyJztcbmltcG9ydCBDb2duaXRvVXNlckF0dHJpYnV0ZSBmcm9tICcuL0NvZ25pdG9Vc2VyQXR0cmlidXRlJztcbmltcG9ydCBTdG9yYWdlSGVscGVyIGZyb20gJy4vU3RvcmFnZUhlbHBlcic7XG5cbi8qKlxuICogQGNhbGxiYWNrIG5vZGVDYWxsYmFja1xuICogQHRlbXBsYXRlIFQgcmVzdWx0XG4gKiBAcGFyYW0geyp9IGVyciBUaGUgb3BlcmF0aW9uIGZhaWx1cmUgcmVhc29uLCBvciBudWxsLlxuICogQHBhcmFtIHtUfSByZXN1bHQgVGhlIG9wZXJhdGlvbiByZXN1bHQuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgb25GYWlsdXJlXG4gKiBAcGFyYW0geyp9IGVyciBGYWlsdXJlIHJlYXNvbi5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBvblN1Y2Nlc3NcbiAqIEB0ZW1wbGF0ZSBUIHJlc3VsdFxuICogQHBhcmFtIHtUfSByZXN1bHQgVGhlIG9wZXJhdGlvbiByZXN1bHQuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgbWZhUmVxdWlyZWRcbiAqIEBwYXJhbSB7Kn0gZGV0YWlscyBNRkEgY2hhbGxlbmdlIGRldGFpbHMuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgY3VzdG9tQ2hhbGxlbmdlXG4gKiBAcGFyYW0geyp9IGRldGFpbHMgQ3VzdG9tIGNoYWxsZW5nZSBkZXRhaWxzLlxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIGlucHV0VmVyaWZpY2F0aW9uQ29kZVxuICogQHBhcmFtIHsqfSBkYXRhIFNlcnZlciByZXNwb25zZS5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBhdXRoU3VjY2Vzc1xuICogQHBhcmFtIHtDb2duaXRvVXNlclNlc3Npb259IHNlc3Npb24gVGhlIG5ldyBzZXNzaW9uLlxuICogQHBhcmFtIHtib29sPX0gdXNlckNvbmZpcm1hdGlvbk5lY2Vzc2FyeSBVc2VyIG11c3QgYmUgY29uZmlybWVkLlxuICovXG5cbnZhciBpc05hdmlnYXRvckF2YWlsYWJsZSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnO1xudmFyIHVzZXJBZ2VudCA9IGlzTmF2aWdhdG9yQXZhaWxhYmxlID8gUGxhdGZvcm0uaXNSZWFjdE5hdGl2ZSA/ICdyZWFjdC1uYXRpdmUnIDogbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICdub2RlanMnO1xuXG4vKiogQGNsYXNzICovXG52YXIgQ29nbml0b1VzZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBDb2duaXRvVXNlciBvYmplY3RcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgQ3JlYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YS5Vc2VybmFtZSBUaGUgdXNlcidzIHVzZXJuYW1lLlxuICAgKiBAcGFyYW0ge0NvZ25pdG9Vc2VyUG9vbH0gZGF0YS5Qb29sIFBvb2wgY29udGFpbmluZyB0aGUgdXNlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEuU3RvcmFnZSBPcHRpb25hbCBzdG9yYWdlIG9iamVjdC5cbiAgICovXG4gIGZ1bmN0aW9uIENvZ25pdG9Vc2VyKGRhdGEpIHtcbiAgICBpZiAoZGF0YSA9PSBudWxsIHx8IGRhdGEuVXNlcm5hbWUgPT0gbnVsbCB8fCBkYXRhLlBvb2wgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VybmFtZSBhbmQgUG9vbCBpbmZvcm1hdGlvbiBhcmUgcmVxdWlyZWQuJyk7XG4gICAgfVxuICAgIHRoaXMudXNlcm5hbWUgPSBkYXRhLlVzZXJuYW1lIHx8ICcnO1xuICAgIHRoaXMucG9vbCA9IGRhdGEuUG9vbDtcbiAgICB0aGlzLlNlc3Npb24gPSBudWxsO1xuICAgIHRoaXMuY2xpZW50ID0gZGF0YS5Qb29sLmNsaWVudDtcbiAgICB0aGlzLnNpZ25JblVzZXJTZXNzaW9uID0gbnVsbDtcbiAgICB0aGlzLmF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPSAnVVNFUl9TUlBfQVVUSCc7XG4gICAgdGhpcy5zdG9yYWdlID0gZGF0YS5TdG9yYWdlIHx8IG5ldyBTdG9yYWdlSGVscGVyKCkuZ2V0U3RvcmFnZSgpO1xuICAgIHRoaXMua2V5UHJlZml4ID0gXCJDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuXCIgKyB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKTtcbiAgICB0aGlzLnVzZXJEYXRhS2V5ID0gdGhpcy5rZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi51c2VyRGF0YVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHNlc3Npb24gZm9yIHRoaXMgdXNlclxuICAgKiBAcGFyYW0ge0NvZ25pdG9Vc2VyU2Vzc2lvbn0gc2lnbkluVXNlclNlc3Npb24gdGhlIHNlc3Npb25cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICB2YXIgX3Byb3RvID0gQ29nbml0b1VzZXIucHJvdG90eXBlO1xuICBfcHJvdG8uc2V0U2lnbkluVXNlclNlc3Npb24gPSBmdW5jdGlvbiBzZXRTaWduSW5Vc2VyU2Vzc2lvbihzaWduSW5Vc2VyU2Vzc2lvbikge1xuICAgIHRoaXMuY2xlYXJDYWNoZWRVc2VyRGF0YSgpO1xuICAgIHRoaXMuc2lnbkluVXNlclNlc3Npb24gPSBzaWduSW5Vc2VyU2Vzc2lvbjtcbiAgICB0aGlzLmNhY2hlVG9rZW5zKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge0NvZ25pdG9Vc2VyU2Vzc2lvbn0gdGhlIGN1cnJlbnQgc2Vzc2lvbiBmb3IgdGhpcyB1c2VyXG4gICAqLztcbiAgX3Byb3RvLmdldFNpZ25JblVzZXJTZXNzaW9uID0gZnVuY3Rpb24gZ2V0U2lnbkluVXNlclNlc3Npb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2lnbkluVXNlclNlc3Npb247XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHVzZXIncyB1c2VybmFtZVxuICAgKi87XG4gIF9wcm90by5nZXRVc2VybmFtZSA9IGZ1bmN0aW9uIGdldFVzZXJuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXJuYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBhdXRoZW50aWNhdGlvbiBmbG93IHR5cGVcbiAgICovO1xuICBfcHJvdG8uZ2V0QXV0aGVudGljYXRpb25GbG93VHlwZSA9IGZ1bmN0aW9uIGdldEF1dGhlbnRpY2F0aW9uRmxvd1R5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0aGVudGljYXRpb25GbG93VHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBzZXRzIGF1dGhlbnRpY2F0aW9uIGZsb3cgdHlwZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aGVudGljYXRpb25GbG93VHlwZSBOZXcgdmFsdWUuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5zZXRBdXRoZW50aWNhdGlvbkZsb3dUeXBlID0gZnVuY3Rpb24gc2V0QXV0aGVudGljYXRpb25GbG93VHlwZShhdXRoZW50aWNhdGlvbkZsb3dUeXBlKSB7XG4gICAgdGhpcy5hdXRoZW50aWNhdGlvbkZsb3dUeXBlID0gYXV0aGVudGljYXRpb25GbG93VHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgZm9yIGF1dGhlbnRpY2F0aW5nIHRoZSB1c2VyIHRocm91Z2ggdGhlIGN1c3RvbSBhdXRoZW50aWNhdGlvbiBmbG93LlxuICAgKiBAcGFyYW0ge0F1dGhlbnRpY2F0aW9uRGV0YWlsc30gYXV0aERldGFpbHMgQ29udGFpbnMgdGhlIGF1dGhlbnRpY2F0aW9uIGRhdGFcbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtjdXN0b21DaGFsbGVuZ2V9IGNhbGxiYWNrLmN1c3RvbUNoYWxsZW5nZSBDdXN0b20gY2hhbGxlbmdlXG4gICAqICAgICAgICByZXNwb25zZSByZXF1aXJlZCB0byBjb250aW51ZS5cbiAgICogQHBhcmFtIHthdXRoU3VjY2Vzc30gY2FsbGJhY2sub25TdWNjZXNzIENhbGxlZCBvbiBzdWNjZXNzIHdpdGggdGhlIG5ldyBzZXNzaW9uLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uaW5pdGlhdGVBdXRoID0gZnVuY3Rpb24gaW5pdGlhdGVBdXRoKGF1dGhEZXRhaWxzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIGF1dGhQYXJhbWV0ZXJzID0gYXV0aERldGFpbHMuZ2V0QXV0aFBhcmFtZXRlcnMoKTtcbiAgICBhdXRoUGFyYW1ldGVycy5VU0VSTkFNRSA9IHRoaXMudXNlcm5hbWU7XG4gICAgdmFyIGNsaWVudE1ldGFEYXRhID0gT2JqZWN0LmtleXMoYXV0aERldGFpbHMuZ2V0VmFsaWRhdGlvbkRhdGEoKSkubGVuZ3RoICE9PSAwID8gYXV0aERldGFpbHMuZ2V0VmFsaWRhdGlvbkRhdGEoKSA6IGF1dGhEZXRhaWxzLmdldENsaWVudE1ldGFkYXRhKCk7XG4gICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICBBdXRoRmxvdzogJ0NVU1RPTV9BVVRIJyxcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIEF1dGhQYXJhbWV0ZXJzOiBhdXRoUGFyYW1ldGVycyxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhRGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gdGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnSW5pdGlhdGVBdXRoJywganNvblJlcSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICB2YXIgY2hhbGxlbmdlTmFtZSA9IGRhdGEuQ2hhbGxlbmdlTmFtZTtcbiAgICAgIHZhciBjaGFsbGVuZ2VQYXJhbWV0ZXJzID0gZGF0YS5DaGFsbGVuZ2VQYXJhbWV0ZXJzO1xuICAgICAgaWYgKGNoYWxsZW5nZU5hbWUgPT09ICdDVVNUT01fQ0hBTExFTkdFJykge1xuICAgICAgICBfdGhpcy5TZXNzaW9uID0gZGF0YS5TZXNzaW9uO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2suY3VzdG9tQ2hhbGxlbmdlKGNoYWxsZW5nZVBhcmFtZXRlcnMpO1xuICAgICAgfVxuICAgICAgX3RoaXMuc2lnbkluVXNlclNlc3Npb24gPSBfdGhpcy5nZXRDb2duaXRvVXNlclNlc3Npb24oZGF0YS5BdXRoZW50aWNhdGlvblJlc3VsdCk7XG4gICAgICBfdGhpcy5jYWNoZVRva2VucygpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcyhfdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGZvciBhdXRoZW50aWNhdGluZyB0aGUgdXNlci5cbiAgICogc3R1ZmZcbiAgICogQHBhcmFtIHtBdXRoZW50aWNhdGlvbkRldGFpbHN9IGF1dGhEZXRhaWxzIENvbnRhaW5zIHRoZSBhdXRoZW50aWNhdGlvbiBkYXRhXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7bmV3UGFzc3dvcmRSZXF1aXJlZH0gY2FsbGJhY2submV3UGFzc3dvcmRSZXF1aXJlZCBuZXdcbiAgICogICAgICAgIHBhc3N3b3JkIGFuZCBhbnkgcmVxdWlyZWQgYXR0cmlidXRlcyBhcmUgcmVxdWlyZWQgdG8gY29udGludWVcbiAgICogQHBhcmFtIHttZmFSZXF1aXJlZH0gY2FsbGJhY2subWZhUmVxdWlyZWQgTUZBIGNvZGVcbiAgICogICAgICAgIHJlcXVpcmVkIHRvIGNvbnRpbnVlLlxuICAgKiBAcGFyYW0ge2N1c3RvbUNoYWxsZW5nZX0gY2FsbGJhY2suY3VzdG9tQ2hhbGxlbmdlIEN1c3RvbSBjaGFsbGVuZ2VcbiAgICogICAgICAgIHJlc3BvbnNlIHJlcXVpcmVkIHRvIGNvbnRpbnVlLlxuICAgKiBAcGFyYW0ge2F1dGhTdWNjZXNzfSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3Mgd2l0aCB0aGUgbmV3IHNlc3Npb24uXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5hdXRoZW50aWNhdGVVc2VyID0gZnVuY3Rpb24gYXV0aGVudGljYXRlVXNlcihhdXRoRGV0YWlscywgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5hdXRoZW50aWNhdGlvbkZsb3dUeXBlID09PSAnVVNFUl9QQVNTV09SRF9BVVRIJykge1xuICAgICAgcmV0dXJuIHRoaXMuYXV0aGVudGljYXRlVXNlclBsYWluVXNlcm5hbWVQYXNzd29yZChhdXRoRGV0YWlscywgY2FsbGJhY2spO1xuICAgIH0gZWxzZSBpZiAodGhpcy5hdXRoZW50aWNhdGlvbkZsb3dUeXBlID09PSAnVVNFUl9TUlBfQVVUSCcgfHwgdGhpcy5hdXRoZW50aWNhdGlvbkZsb3dUeXBlID09PSAnQ1VTVE9NX0FVVEgnKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdXRoZW50aWNhdGVVc2VyRGVmYXVsdEF1dGgoYXV0aERldGFpbHMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGZsb3cgdHlwZSBpcyBpbnZhbGlkLicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQUklWQVRFIE9OTFk6IFRoaXMgaXMgYW4gaW50ZXJuYWwgb25seSBtZXRob2QgYW5kIHNob3VsZCBub3RcbiAgICogYmUgZGlyZWN0bHkgY2FsbGVkIGJ5IHRoZSBjb25zdW1lcnMuXG4gICAqIEl0IGNhbGxzIHRoZSBBdXRoZW50aWNhdGlvbkhlbHBlciBmb3IgU1JQIHJlbGF0ZWRcbiAgICogc3R1ZmZcbiAgICogQHBhcmFtIHtBdXRoZW50aWNhdGlvbkRldGFpbHN9IGF1dGhEZXRhaWxzIENvbnRhaW5zIHRoZSBhdXRoZW50aWNhdGlvbiBkYXRhXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7bmV3UGFzc3dvcmRSZXF1aXJlZH0gY2FsbGJhY2submV3UGFzc3dvcmRSZXF1aXJlZCBuZXdcbiAgICogICAgICAgIHBhc3N3b3JkIGFuZCBhbnkgcmVxdWlyZWQgYXR0cmlidXRlcyBhcmUgcmVxdWlyZWQgdG8gY29udGludWVcbiAgICogQHBhcmFtIHttZmFSZXF1aXJlZH0gY2FsbGJhY2subWZhUmVxdWlyZWQgTUZBIGNvZGVcbiAgICogICAgICAgIHJlcXVpcmVkIHRvIGNvbnRpbnVlLlxuICAgKiBAcGFyYW0ge2N1c3RvbUNoYWxsZW5nZX0gY2FsbGJhY2suY3VzdG9tQ2hhbGxlbmdlIEN1c3RvbSBjaGFsbGVuZ2VcbiAgICogICAgICAgIHJlc3BvbnNlIHJlcXVpcmVkIHRvIGNvbnRpbnVlLlxuICAgKiBAcGFyYW0ge2F1dGhTdWNjZXNzfSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3Mgd2l0aCB0aGUgbmV3IHNlc3Npb24uXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5hdXRoZW50aWNhdGVVc2VyRGVmYXVsdEF1dGggPSBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyRGVmYXVsdEF1dGgoYXV0aERldGFpbHMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgdmFyIGF1dGhlbnRpY2F0aW9uSGVscGVyID0gbmV3IEF1dGhlbnRpY2F0aW9uSGVscGVyKHRoaXMucG9vbC5nZXRVc2VyUG9vbE5hbWUoKSk7XG4gICAgdmFyIGRhdGVIZWxwZXIgPSBuZXcgRGF0ZUhlbHBlcigpO1xuICAgIHZhciBzZXJ2ZXJCVmFsdWU7XG4gICAgdmFyIHNhbHQ7XG4gICAgdmFyIGF1dGhQYXJhbWV0ZXJzID0ge307XG4gICAgaWYgKHRoaXMuZGV2aWNlS2V5ICE9IG51bGwpIHtcbiAgICAgIGF1dGhQYXJhbWV0ZXJzLkRFVklDRV9LRVkgPSB0aGlzLmRldmljZUtleTtcbiAgICB9XG4gICAgYXV0aFBhcmFtZXRlcnMuVVNFUk5BTUUgPSB0aGlzLnVzZXJuYW1lO1xuICAgIGF1dGhlbnRpY2F0aW9uSGVscGVyLmdldExhcmdlQVZhbHVlKGZ1bmN0aW9uIChlcnJPbkFWYWx1ZSwgYVZhbHVlKSB7XG4gICAgICAvLyBnZXRMYXJnZUFWYWx1ZSBjYWxsYmFjayBzdGFydFxuICAgICAgaWYgKGVyck9uQVZhbHVlKSB7XG4gICAgICAgIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJPbkFWYWx1ZSk7XG4gICAgICB9XG4gICAgICBhdXRoUGFyYW1ldGVycy5TUlBfQSA9IGFWYWx1ZS50b1N0cmluZygxNik7XG4gICAgICBpZiAoX3RoaXMyLmF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPT09ICdDVVNUT01fQVVUSCcpIHtcbiAgICAgICAgYXV0aFBhcmFtZXRlcnMuQ0hBTExFTkdFX05BTUUgPSAnU1JQX0EnO1xuICAgICAgfVxuICAgICAgdmFyIGNsaWVudE1ldGFEYXRhID0gT2JqZWN0LmtleXMoYXV0aERldGFpbHMuZ2V0VmFsaWRhdGlvbkRhdGEoKSkubGVuZ3RoICE9PSAwID8gYXV0aERldGFpbHMuZ2V0VmFsaWRhdGlvbkRhdGEoKSA6IGF1dGhEZXRhaWxzLmdldENsaWVudE1ldGFkYXRhKCk7XG4gICAgICB2YXIganNvblJlcSA9IHtcbiAgICAgICAgQXV0aEZsb3c6IF90aGlzMi5hdXRoZW50aWNhdGlvbkZsb3dUeXBlLFxuICAgICAgICBDbGllbnRJZDogX3RoaXMyLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgICAgQXV0aFBhcmFtZXRlcnM6IGF1dGhQYXJhbWV0ZXJzLFxuICAgICAgICBDbGllbnRNZXRhZGF0YTogY2xpZW50TWV0YURhdGFcbiAgICAgIH07XG4gICAgICBpZiAoX3RoaXMyLmdldFVzZXJDb250ZXh0RGF0YShfdGhpczIudXNlcm5hbWUpKSB7XG4gICAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gX3RoaXMyLmdldFVzZXJDb250ZXh0RGF0YShfdGhpczIudXNlcm5hbWUpO1xuICAgICAgfVxuICAgICAgX3RoaXMyLmNsaWVudC5yZXF1ZXN0KCdJbml0aWF0ZUF1dGgnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNoYWxsZW5nZVBhcmFtZXRlcnMgPSBkYXRhLkNoYWxsZW5nZVBhcmFtZXRlcnM7XG4gICAgICAgIF90aGlzMi51c2VybmFtZSA9IGNoYWxsZW5nZVBhcmFtZXRlcnMuVVNFUl9JRF9GT1JfU1JQO1xuICAgICAgICBfdGhpczIudXNlckRhdGFLZXkgPSBfdGhpczIua2V5UHJlZml4ICsgXCIuXCIgKyBfdGhpczIudXNlcm5hbWUgKyBcIi51c2VyRGF0YVwiO1xuICAgICAgICBzZXJ2ZXJCVmFsdWUgPSBuZXcgQmlnSW50ZWdlcihjaGFsbGVuZ2VQYXJhbWV0ZXJzLlNSUF9CLCAxNik7XG4gICAgICAgIHNhbHQgPSBuZXcgQmlnSW50ZWdlcihjaGFsbGVuZ2VQYXJhbWV0ZXJzLlNBTFQsIDE2KTtcbiAgICAgICAgX3RoaXMyLmdldENhY2hlZERldmljZUtleUFuZFBhc3N3b3JkKCk7XG4gICAgICAgIGF1dGhlbnRpY2F0aW9uSGVscGVyLmdldFBhc3N3b3JkQXV0aGVudGljYXRpb25LZXkoX3RoaXMyLnVzZXJuYW1lLCBhdXRoRGV0YWlscy5nZXRQYXNzd29yZCgpLCBzZXJ2ZXJCVmFsdWUsIHNhbHQsIGZ1bmN0aW9uIChlcnJPbkhrZGYsIGhrZGYpIHtcbiAgICAgICAgICAvLyBnZXRQYXNzd29yZEF1dGhlbnRpY2F0aW9uS2V5IGNhbGxiYWNrIHN0YXJ0XG4gICAgICAgICAgaWYgKGVyck9uSGtkZikge1xuICAgICAgICAgICAgY2FsbGJhY2sub25GYWlsdXJlKGVyck9uSGtkZik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBkYXRlTm93ID0gZGF0ZUhlbHBlci5nZXROb3dTdHJpbmcoKTtcbiAgICAgICAgICB2YXIgY29uY2F0QnVmZmVyID0gQnVmZmVyLmNvbmNhdChbQnVmZmVyLmZyb20oX3RoaXMyLnBvb2wuZ2V0VXNlclBvb2xOYW1lKCksICd1dGY4JyksIEJ1ZmZlci5mcm9tKF90aGlzMi51c2VybmFtZSwgJ3V0ZjgnKSwgQnVmZmVyLmZyb20oY2hhbGxlbmdlUGFyYW1ldGVycy5TRUNSRVRfQkxPQ0ssICdiYXNlNjQnKSwgQnVmZmVyLmZyb20oZGF0ZU5vdywgJ3V0ZjgnKV0pO1xuICAgICAgICAgIHZhciBhd3NDcnlwdG9IYXNoID0gbmV3IFNoYTI1Nihoa2RmKTtcbiAgICAgICAgICBhd3NDcnlwdG9IYXNoLnVwZGF0ZShjb25jYXRCdWZmZXIpO1xuICAgICAgICAgIHZhciByZXN1bHRGcm9tQVdTQ3J5cHRvID0gYXdzQ3J5cHRvSGFzaC5kaWdlc3RTeW5jKCk7XG4gICAgICAgICAgdmFyIHNpZ25hdHVyZVN0cmluZyA9IEJ1ZmZlci5mcm9tKHJlc3VsdEZyb21BV1NDcnlwdG8pLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgICB2YXIgY2hhbGxlbmdlUmVzcG9uc2VzID0ge307XG4gICAgICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLlVTRVJOQU1FID0gX3RoaXMyLnVzZXJuYW1lO1xuICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5QQVNTV09SRF9DTEFJTV9TRUNSRVRfQkxPQ0sgPSBjaGFsbGVuZ2VQYXJhbWV0ZXJzLlNFQ1JFVF9CTE9DSztcbiAgICAgICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuVElNRVNUQU1QID0gZGF0ZU5vdztcbiAgICAgICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuUEFTU1dPUkRfQ0xBSU1fU0lHTkFUVVJFID0gc2lnbmF0dXJlU3RyaW5nO1xuICAgICAgICAgIGlmIChfdGhpczIuZGV2aWNlS2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5ERVZJQ0VfS0VZID0gX3RoaXMyLmRldmljZUtleTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIF9yZXNwb25kVG9BdXRoQ2hhbGxlbmdlID0gZnVuY3Rpb24gcmVzcG9uZFRvQXV0aENoYWxsZW5nZShjaGFsbGVuZ2UsIGNoYWxsZW5nZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMyLmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywgY2hhbGxlbmdlLCBmdW5jdGlvbiAoZXJyQ2hhbGxlbmdlLCBkYXRhQ2hhbGxlbmdlKSB7XG4gICAgICAgICAgICAgIGlmIChlcnJDaGFsbGVuZ2UgJiYgZXJyQ2hhbGxlbmdlLmNvZGUgPT09ICdSZXNvdXJjZU5vdEZvdW5kRXhjZXB0aW9uJyAmJiBlcnJDaGFsbGVuZ2UubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2RldmljZScpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5ERVZJQ0VfS0VZID0gbnVsbDtcbiAgICAgICAgICAgICAgICBfdGhpczIuZGV2aWNlS2V5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBfdGhpczIucmFuZG9tUGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAgICAgICAgIF90aGlzMi5kZXZpY2VHcm91cEtleSA9IG51bGw7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmNsZWFyQ2FjaGVkRGV2aWNlS2V5QW5kUGFzc3dvcmQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlc3BvbmRUb0F1dGhDaGFsbGVuZ2UoY2hhbGxlbmdlLCBjaGFsbGVuZ2VDYWxsYmFjayk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGNoYWxsZW5nZUNhbGxiYWNrKGVyckNoYWxsZW5nZSwgZGF0YUNoYWxsZW5nZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHZhciBqc29uUmVxUmVzcCA9IHtcbiAgICAgICAgICAgIENoYWxsZW5nZU5hbWU6ICdQQVNTV09SRF9WRVJJRklFUicsXG4gICAgICAgICAgICBDbGllbnRJZDogX3RoaXMyLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgICAgICAgIENoYWxsZW5nZVJlc3BvbnNlczogY2hhbGxlbmdlUmVzcG9uc2VzLFxuICAgICAgICAgICAgU2Vzc2lvbjogZGF0YS5TZXNzaW9uLFxuICAgICAgICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFEYXRhXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoX3RoaXMyLmdldFVzZXJDb250ZXh0RGF0YSgpKSB7XG4gICAgICAgICAgICBqc29uUmVxUmVzcC5Vc2VyQ29udGV4dERhdGEgPSBfdGhpczIuZ2V0VXNlckNvbnRleHREYXRhKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF9yZXNwb25kVG9BdXRoQ2hhbGxlbmdlKGpzb25SZXFSZXNwLCBmdW5jdGlvbiAoZXJyQXV0aGVudGljYXRlLCBkYXRhQXV0aGVudGljYXRlKSB7XG4gICAgICAgICAgICBpZiAoZXJyQXV0aGVudGljYXRlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyQXV0aGVudGljYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpczIuYXV0aGVudGljYXRlVXNlckludGVybmFsKGRhdGFBdXRoZW50aWNhdGUsIGF1dGhlbnRpY2F0aW9uSGVscGVyLCBjYWxsYmFjayk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAvLyBnZXRQYXNzd29yZEF1dGhlbnRpY2F0aW9uS2V5IGNhbGxiYWNrIGVuZFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgICAgLy8gZ2V0TGFyZ2VBVmFsdWUgY2FsbGJhY2sgZW5kXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUFJJVkFURSBPTkxZOiBUaGlzIGlzIGFuIGludGVybmFsIG9ubHkgbWV0aG9kIGFuZCBzaG91bGQgbm90XG4gICAqIGJlIGRpcmVjdGx5IGNhbGxlZCBieSB0aGUgY29uc3VtZXJzLlxuICAgKiBAcGFyYW0ge0F1dGhlbnRpY2F0aW9uRGV0YWlsc30gYXV0aERldGFpbHMgQ29udGFpbnMgdGhlIGF1dGhlbnRpY2F0aW9uIGRhdGEuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7bWZhUmVxdWlyZWR9IGNhbGxiYWNrLm1mYVJlcXVpcmVkIE1GQSBjb2RlXG4gICAqICAgICAgICByZXF1aXJlZCB0byBjb250aW51ZS5cbiAgICogQHBhcmFtIHthdXRoU3VjY2Vzc30gY2FsbGJhY2sub25TdWNjZXNzIENhbGxlZCBvbiBzdWNjZXNzIHdpdGggdGhlIG5ldyBzZXNzaW9uLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uYXV0aGVudGljYXRlVXNlclBsYWluVXNlcm5hbWVQYXNzd29yZCA9IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXJQbGFpblVzZXJuYW1lUGFzc3dvcmQoYXV0aERldGFpbHMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG4gICAgdmFyIGF1dGhQYXJhbWV0ZXJzID0ge307XG4gICAgYXV0aFBhcmFtZXRlcnMuVVNFUk5BTUUgPSB0aGlzLnVzZXJuYW1lO1xuICAgIGF1dGhQYXJhbWV0ZXJzLlBBU1NXT1JEID0gYXV0aERldGFpbHMuZ2V0UGFzc3dvcmQoKTtcbiAgICBpZiAoIWF1dGhQYXJhbWV0ZXJzLlBBU1NXT1JEKSB7XG4gICAgICBjYWxsYmFjay5vbkZhaWx1cmUobmV3IEVycm9yKCdQQVNTV09SRCBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQnKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBhdXRoZW50aWNhdGlvbkhlbHBlciA9IG5ldyBBdXRoZW50aWNhdGlvbkhlbHBlcih0aGlzLnBvb2wuZ2V0VXNlclBvb2xOYW1lKCkpO1xuICAgIHRoaXMuZ2V0Q2FjaGVkRGV2aWNlS2V5QW5kUGFzc3dvcmQoKTtcbiAgICBpZiAodGhpcy5kZXZpY2VLZXkgIT0gbnVsbCkge1xuICAgICAgYXV0aFBhcmFtZXRlcnMuREVWSUNFX0tFWSA9IHRoaXMuZGV2aWNlS2V5O1xuICAgIH1cbiAgICB2YXIgY2xpZW50TWV0YURhdGEgPSBPYmplY3Qua2V5cyhhdXRoRGV0YWlscy5nZXRWYWxpZGF0aW9uRGF0YSgpKS5sZW5ndGggIT09IDAgPyBhdXRoRGV0YWlscy5nZXRWYWxpZGF0aW9uRGF0YSgpIDogYXV0aERldGFpbHMuZ2V0Q2xpZW50TWV0YWRhdGEoKTtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIEF1dGhGbG93OiAnVVNFUl9QQVNTV09SRF9BVVRIJyxcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIEF1dGhQYXJhbWV0ZXJzOiBhdXRoUGFyYW1ldGVycyxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhRGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKHRoaXMudXNlcm5hbWUpKSB7XG4gICAgICBqc29uUmVxLlVzZXJDb250ZXh0RGF0YSA9IHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKHRoaXMudXNlcm5hbWUpO1xuICAgIH1cbiAgICAvLyBVU0VSX1BBU1NXT1JEX0FVVEggaGFwcGVucyBpbiBhIHNpbmdsZSByb3VuZC10cmlwOiBjbGllbnQgc2VuZHMgdXNlck5hbWUgYW5kIHBhc3N3b3JkLFxuICAgIC8vIENvZ25pdG8gVXNlclBvb2xzIHZlcmlmaWVzIHBhc3N3b3JkIGFuZCByZXR1cm5zIHRva2Vucy5cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdJbml0aWF0ZUF1dGgnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBhdXRoUmVzdWx0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfdGhpczMuYXV0aGVudGljYXRlVXNlckludGVybmFsKGF1dGhSZXN1bHQsIGF1dGhlbnRpY2F0aW9uSGVscGVyLCBjYWxsYmFjayk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUFJJVkFURSBPTkxZOiBUaGlzIGlzIGFuIGludGVybmFsIG9ubHkgbWV0aG9kIGFuZCBzaG91bGQgbm90XG4gICAqIGJlIGRpcmVjdGx5IGNhbGxlZCBieSB0aGUgY29uc3VtZXJzLlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YUF1dGhlbnRpY2F0ZSBhdXRoZW50aWNhdGlvbiBkYXRhXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhdXRoZW50aWNhdGlvbkhlbHBlciBoZWxwZXIgY3JlYXRlZFxuICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjYWxsYmFjayBwYXNzZWQgb24gZnJvbSBjYWxsZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmF1dGhlbnRpY2F0ZVVzZXJJbnRlcm5hbCA9IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXJJbnRlcm5hbChkYXRhQXV0aGVudGljYXRlLCBhdXRoZW50aWNhdGlvbkhlbHBlciwgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcbiAgICB2YXIgY2hhbGxlbmdlTmFtZSA9IGRhdGFBdXRoZW50aWNhdGUuQ2hhbGxlbmdlTmFtZTtcbiAgICB2YXIgY2hhbGxlbmdlUGFyYW1ldGVycyA9IGRhdGFBdXRoZW50aWNhdGUuQ2hhbGxlbmdlUGFyYW1ldGVycztcbiAgICBpZiAoY2hhbGxlbmdlTmFtZSA9PT0gJ1NNU19NRkEnKSB7XG4gICAgICB0aGlzLlNlc3Npb24gPSBkYXRhQXV0aGVudGljYXRlLlNlc3Npb247XG4gICAgICByZXR1cm4gY2FsbGJhY2subWZhUmVxdWlyZWQoY2hhbGxlbmdlTmFtZSwgY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnU0VMRUNUX01GQV9UWVBFJykge1xuICAgICAgdGhpcy5TZXNzaW9uID0gZGF0YUF1dGhlbnRpY2F0ZS5TZXNzaW9uO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLnNlbGVjdE1GQVR5cGUoY2hhbGxlbmdlTmFtZSwgY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnTUZBX1NFVFVQJykge1xuICAgICAgdGhpcy5TZXNzaW9uID0gZGF0YUF1dGhlbnRpY2F0ZS5TZXNzaW9uO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm1mYVNldHVwKGNoYWxsZW5nZU5hbWUsIGNoYWxsZW5nZVBhcmFtZXRlcnMpO1xuICAgIH1cbiAgICBpZiAoY2hhbGxlbmdlTmFtZSA9PT0gJ1NPRlRXQVJFX1RPS0VOX01GQScpIHtcbiAgICAgIHRoaXMuU2Vzc2lvbiA9IGRhdGFBdXRoZW50aWNhdGUuU2Vzc2lvbjtcbiAgICAgIHJldHVybiBjYWxsYmFjay50b3RwUmVxdWlyZWQoY2hhbGxlbmdlTmFtZSwgY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnQ1VTVE9NX0NIQUxMRU5HRScpIHtcbiAgICAgIHRoaXMuU2Vzc2lvbiA9IGRhdGFBdXRoZW50aWNhdGUuU2Vzc2lvbjtcbiAgICAgIHJldHVybiBjYWxsYmFjay5jdXN0b21DaGFsbGVuZ2UoY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnTkVXX1BBU1NXT1JEX1JFUVVJUkVEJykge1xuICAgICAgdGhpcy5TZXNzaW9uID0gZGF0YUF1dGhlbnRpY2F0ZS5TZXNzaW9uO1xuICAgICAgdmFyIHVzZXJBdHRyaWJ1dGVzID0gbnVsbDtcbiAgICAgIHZhciByYXdSZXF1aXJlZEF0dHJpYnV0ZXMgPSBudWxsO1xuICAgICAgdmFyIHJlcXVpcmVkQXR0cmlidXRlcyA9IFtdO1xuICAgICAgdmFyIHVzZXJBdHRyaWJ1dGVzUHJlZml4ID0gYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0TmV3UGFzc3dvcmRSZXF1aXJlZENoYWxsZW5nZVVzZXJBdHRyaWJ1dGVQcmVmaXgoKTtcbiAgICAgIGlmIChjaGFsbGVuZ2VQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHVzZXJBdHRyaWJ1dGVzID0gSlNPTi5wYXJzZShkYXRhQXV0aGVudGljYXRlLkNoYWxsZW5nZVBhcmFtZXRlcnMudXNlckF0dHJpYnV0ZXMpO1xuICAgICAgICByYXdSZXF1aXJlZEF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKGRhdGFBdXRoZW50aWNhdGUuQ2hhbGxlbmdlUGFyYW1ldGVycy5yZXF1aXJlZEF0dHJpYnV0ZXMpO1xuICAgICAgfVxuICAgICAgaWYgKHJhd1JlcXVpcmVkQXR0cmlidXRlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd1JlcXVpcmVkQXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHJlcXVpcmVkQXR0cmlidXRlc1tpXSA9IHJhd1JlcXVpcmVkQXR0cmlidXRlc1tpXS5zdWJzdHIodXNlckF0dHJpYnV0ZXNQcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrLm5ld1Bhc3N3b3JkUmVxdWlyZWQodXNlckF0dHJpYnV0ZXMsIHJlcXVpcmVkQXR0cmlidXRlcyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnREVWSUNFX1NSUF9BVVRIJykge1xuICAgICAgdGhpcy5TZXNzaW9uID0gZGF0YUF1dGhlbnRpY2F0ZS5TZXNzaW9uO1xuICAgICAgdGhpcy5nZXREZXZpY2VSZXNwb25zZShjYWxsYmFjayk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLnNpZ25JblVzZXJTZXNzaW9uID0gdGhpcy5nZXRDb2duaXRvVXNlclNlc3Npb24oZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdCk7XG4gICAgdGhpcy5jaGFsbGVuZ2VOYW1lID0gY2hhbGxlbmdlTmFtZTtcbiAgICB0aGlzLmNhY2hlVG9rZW5zKCk7XG4gICAgdmFyIG5ld0RldmljZU1ldGFkYXRhID0gZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YTtcbiAgICBpZiAobmV3RGV2aWNlTWV0YWRhdGEgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2Vzcyh0aGlzLnNpZ25JblVzZXJTZXNzaW9uKTtcbiAgICB9XG4gICAgYXV0aGVudGljYXRpb25IZWxwZXIuZ2VuZXJhdGVIYXNoRGV2aWNlKGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlR3JvdXBLZXksIGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlS2V5LCBmdW5jdGlvbiAoZXJyR2VuSGFzaCkge1xuICAgICAgaWYgKGVyckdlbkhhc2gpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJHZW5IYXNoKTtcbiAgICAgIH1cbiAgICAgIHZhciBkZXZpY2VTZWNyZXRWZXJpZmllckNvbmZpZyA9IHtcbiAgICAgICAgU2FsdDogQnVmZmVyLmZyb20oYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0U2FsdERldmljZXMoKSwgJ2hleCcpLnRvU3RyaW5nKCdiYXNlNjQnKSxcbiAgICAgICAgUGFzc3dvcmRWZXJpZmllcjogQnVmZmVyLmZyb20oYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0VmVyaWZpZXJEZXZpY2VzKCksICdoZXgnKS50b1N0cmluZygnYmFzZTY0JylcbiAgICAgIH07XG4gICAgICBfdGhpczQudmVyaWZpZXJEZXZpY2VzID0gZGV2aWNlU2VjcmV0VmVyaWZpZXJDb25maWcuUGFzc3dvcmRWZXJpZmllcjtcbiAgICAgIF90aGlzNC5kZXZpY2VHcm91cEtleSA9IG5ld0RldmljZU1ldGFkYXRhLkRldmljZUdyb3VwS2V5O1xuICAgICAgX3RoaXM0LnJhbmRvbVBhc3N3b3JkID0gYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0UmFuZG9tUGFzc3dvcmQoKTtcbiAgICAgIF90aGlzNC5jbGllbnQucmVxdWVzdCgnQ29uZmlybURldmljZScsIHtcbiAgICAgICAgRGV2aWNlS2V5OiBuZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VLZXksXG4gICAgICAgIEFjY2Vzc1Rva2VuOiBfdGhpczQuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpLFxuICAgICAgICBEZXZpY2VTZWNyZXRWZXJpZmllckNvbmZpZzogZGV2aWNlU2VjcmV0VmVyaWZpZXJDb25maWcsXG4gICAgICAgIERldmljZU5hbWU6IHVzZXJBZ2VudFxuICAgICAgfSwgZnVuY3Rpb24gKGVyckNvbmZpcm0sIGRhdGFDb25maXJtKSB7XG4gICAgICAgIGlmIChlcnJDb25maXJtKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJDb25maXJtKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpczQuZGV2aWNlS2V5ID0gZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VLZXk7XG4gICAgICAgIF90aGlzNC5jYWNoZURldmljZUtleUFuZFBhc3N3b3JkKCk7XG4gICAgICAgIGlmIChkYXRhQ29uZmlybS5Vc2VyQ29uZmlybWF0aW9uTmVjZXNzYXJ5ID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcyhfdGhpczQuc2lnbkluVXNlclNlc3Npb24sIGRhdGFDb25maXJtLlVzZXJDb25maXJtYXRpb25OZWNlc3NhcnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoX3RoaXM0LnNpZ25JblVzZXJTZXNzaW9uKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIHVzZXIgdG8gY29tcGxldGUgdGhlIE5FV19QQVNTV09SRF9SRVFVSVJFRCBjaGFsbGVuZ2UuXG4gICAqIFBhc3MgdGhlIG5ldyBwYXNzd29yZCB3aXRoIGFueSBuZXcgdXNlciBhdHRyaWJ1dGVzIHRvIGJlIHVwZGF0ZWQuXG4gICAqIFVzZXIgYXR0cmlidXRlIGtleXMgbXVzdCBiZSBvZiBmb3JtYXQgdXNlckF0dHJpYnV0ZXMuPGF0dHJpYnV0ZV9uYW1lPi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld1Bhc3N3b3JkIG5ldyBwYXNzd29yZCBmb3IgdGhpcyB1c2VyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByZXF1aXJlZEF0dHJpYnV0ZURhdGEgbWFwIHdpdGggdmFsdWVzIGZvciBhbGwgcmVxdWlyZWQgYXR0cmlidXRlc1xuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge21mYVJlcXVpcmVkfSBjYWxsYmFjay5tZmFSZXF1aXJlZCBNRkEgY29kZSByZXF1aXJlZCB0byBjb250aW51ZS5cbiAgICogQHBhcmFtIHtjdXN0b21DaGFsbGVuZ2V9IGNhbGxiYWNrLmN1c3RvbUNoYWxsZW5nZSBDdXN0b20gY2hhbGxlbmdlXG4gICAqICAgICAgICAgcmVzcG9uc2UgcmVxdWlyZWQgdG8gY29udGludWUuXG4gICAqIEBwYXJhbSB7YXV0aFN1Y2Nlc3N9IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIHRoZSBuZXcgc2Vzc2lvbi5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5jb21wbGV0ZU5ld1Bhc3N3b3JkQ2hhbGxlbmdlID0gZnVuY3Rpb24gY29tcGxldGVOZXdQYXNzd29yZENoYWxsZW5nZShuZXdQYXNzd29yZCwgcmVxdWlyZWRBdHRyaWJ1dGVEYXRhLCBjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcbiAgICBpZiAoIW5ld1Bhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKG5ldyBFcnJvcignTmV3IHBhc3N3b3JkIGlzIHJlcXVpcmVkLicpKTtcbiAgICB9XG4gICAgdmFyIGF1dGhlbnRpY2F0aW9uSGVscGVyID0gbmV3IEF1dGhlbnRpY2F0aW9uSGVscGVyKHRoaXMucG9vbC5nZXRVc2VyUG9vbE5hbWUoKSk7XG4gICAgdmFyIHVzZXJBdHRyaWJ1dGVzUHJlZml4ID0gYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0TmV3UGFzc3dvcmRSZXF1aXJlZENoYWxsZW5nZVVzZXJBdHRyaWJ1dGVQcmVmaXgoKTtcbiAgICB2YXIgZmluYWxVc2VyQXR0cmlidXRlcyA9IHt9O1xuICAgIGlmIChyZXF1aXJlZEF0dHJpYnV0ZURhdGEpIHtcbiAgICAgIE9iamVjdC5rZXlzKHJlcXVpcmVkQXR0cmlidXRlRGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGZpbmFsVXNlckF0dHJpYnV0ZXNbdXNlckF0dHJpYnV0ZXNQcmVmaXggKyBrZXldID0gcmVxdWlyZWRBdHRyaWJ1dGVEYXRhW2tleV07XG4gICAgICB9KTtcbiAgICB9XG4gICAgZmluYWxVc2VyQXR0cmlidXRlcy5ORVdfUEFTU1dPUkQgPSBuZXdQYXNzd29yZDtcbiAgICBmaW5hbFVzZXJBdHRyaWJ1dGVzLlVTRVJOQU1FID0gdGhpcy51c2VybmFtZTtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENoYWxsZW5nZU5hbWU6ICdORVdfUEFTU1dPUkRfUkVRVUlSRUQnLFxuICAgICAgQ2xpZW50SWQ6IHRoaXMucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgQ2hhbGxlbmdlUmVzcG9uc2VzOiBmaW5hbFVzZXJBdHRyaWJ1dGVzLFxuICAgICAgU2Vzc2lvbjogdGhpcy5TZXNzaW9uLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICBpZiAodGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKSkge1xuICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSB0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywganNvblJlcSwgZnVuY3Rpb24gKGVyckF1dGhlbnRpY2F0ZSwgZGF0YUF1dGhlbnRpY2F0ZSkge1xuICAgICAgaWYgKGVyckF1dGhlbnRpY2F0ZSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVyckF1dGhlbnRpY2F0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3RoaXM1LmF1dGhlbnRpY2F0ZVVzZXJJbnRlcm5hbChkYXRhQXV0aGVudGljYXRlLCBhdXRoZW50aWNhdGlvbkhlbHBlciwgY2FsbGJhY2spO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHNlc3Npb24gdXNpbmcgZGV2aWNlIGF1dGhlbnRpY2F0aW9uLiBJdCBpcyBjYWxsZWQgYXQgdGhlIGVuZCBvZiB1c2VyXG4gICAqIGF1dGhlbnRpY2F0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7YXV0aFN1Y2Nlc3N9IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIHRoZSBuZXcgc2Vzc2lvbi5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi87XG4gIF9wcm90by5nZXREZXZpY2VSZXNwb25zZSA9IGZ1bmN0aW9uIGdldERldmljZVJlc3BvbnNlKGNhbGxiYWNrLCBjbGllbnRNZXRhZGF0YSkge1xuICAgIHZhciBfdGhpczYgPSB0aGlzO1xuICAgIHZhciBhdXRoZW50aWNhdGlvbkhlbHBlciA9IG5ldyBBdXRoZW50aWNhdGlvbkhlbHBlcih0aGlzLmRldmljZUdyb3VwS2V5KTtcbiAgICB2YXIgZGF0ZUhlbHBlciA9IG5ldyBEYXRlSGVscGVyKCk7XG4gICAgdmFyIGF1dGhQYXJhbWV0ZXJzID0ge307XG4gICAgYXV0aFBhcmFtZXRlcnMuVVNFUk5BTUUgPSB0aGlzLnVzZXJuYW1lO1xuICAgIGF1dGhQYXJhbWV0ZXJzLkRFVklDRV9LRVkgPSB0aGlzLmRldmljZUtleTtcbiAgICBhdXRoZW50aWNhdGlvbkhlbHBlci5nZXRMYXJnZUFWYWx1ZShmdW5jdGlvbiAoZXJyQVZhbHVlLCBhVmFsdWUpIHtcbiAgICAgIC8vIGdldExhcmdlQVZhbHVlIGNhbGxiYWNrIHN0YXJ0XG4gICAgICBpZiAoZXJyQVZhbHVlKSB7XG4gICAgICAgIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJBVmFsdWUpO1xuICAgICAgfVxuICAgICAgYXV0aFBhcmFtZXRlcnMuU1JQX0EgPSBhVmFsdWUudG9TdHJpbmcoMTYpO1xuICAgICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICAgIENoYWxsZW5nZU5hbWU6ICdERVZJQ0VfU1JQX0FVVEgnLFxuICAgICAgICBDbGllbnRJZDogX3RoaXM2LnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgICAgQ2hhbGxlbmdlUmVzcG9uc2VzOiBhdXRoUGFyYW1ldGVycyxcbiAgICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhLFxuICAgICAgICBTZXNzaW9uOiBfdGhpczYuU2Vzc2lvblxuICAgICAgfTtcbiAgICAgIGlmIChfdGhpczYuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSBfdGhpczYuZ2V0VXNlckNvbnRleHREYXRhKCk7XG4gICAgICB9XG4gICAgICBfdGhpczYuY2xpZW50LnJlcXVlc3QoJ1Jlc3BvbmRUb0F1dGhDaGFsbGVuZ2UnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNoYWxsZW5nZVBhcmFtZXRlcnMgPSBkYXRhLkNoYWxsZW5nZVBhcmFtZXRlcnM7XG4gICAgICAgIHZhciBzZXJ2ZXJCVmFsdWUgPSBuZXcgQmlnSW50ZWdlcihjaGFsbGVuZ2VQYXJhbWV0ZXJzLlNSUF9CLCAxNik7XG4gICAgICAgIHZhciBzYWx0ID0gbmV3IEJpZ0ludGVnZXIoY2hhbGxlbmdlUGFyYW1ldGVycy5TQUxULCAxNik7XG4gICAgICAgIGF1dGhlbnRpY2F0aW9uSGVscGVyLmdldFBhc3N3b3JkQXV0aGVudGljYXRpb25LZXkoX3RoaXM2LmRldmljZUtleSwgX3RoaXM2LnJhbmRvbVBhc3N3b3JkLCBzZXJ2ZXJCVmFsdWUsIHNhbHQsIGZ1bmN0aW9uIChlcnJIa2RmLCBoa2RmKSB7XG4gICAgICAgICAgLy8gZ2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbktleSBjYWxsYmFjayBzdGFydFxuICAgICAgICAgIGlmIChlcnJIa2RmKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVyckhrZGYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgZGF0ZU5vdyA9IGRhdGVIZWxwZXIuZ2V0Tm93U3RyaW5nKCk7XG4gICAgICAgICAgdmFyIGNvbmNhdEJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW0J1ZmZlci5mcm9tKF90aGlzNi5kZXZpY2VHcm91cEtleSwgJ3V0ZjgnKSwgQnVmZmVyLmZyb20oX3RoaXM2LmRldmljZUtleSwgJ3V0ZjgnKSwgQnVmZmVyLmZyb20oY2hhbGxlbmdlUGFyYW1ldGVycy5TRUNSRVRfQkxPQ0ssICdiYXNlNjQnKSwgQnVmZmVyLmZyb20oZGF0ZU5vdywgJ3V0ZjgnKV0pO1xuICAgICAgICAgIHZhciBhd3NDcnlwdG9IYXNoID0gbmV3IFNoYTI1Nihoa2RmKTtcbiAgICAgICAgICBhd3NDcnlwdG9IYXNoLnVwZGF0ZShjb25jYXRCdWZmZXIpO1xuICAgICAgICAgIHZhciByZXN1bHRGcm9tQVdTQ3J5cHRvID0gYXdzQ3J5cHRvSGFzaC5kaWdlc3RTeW5jKCk7XG4gICAgICAgICAgdmFyIHNpZ25hdHVyZVN0cmluZyA9IEJ1ZmZlci5mcm9tKHJlc3VsdEZyb21BV1NDcnlwdG8pLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgICB2YXIgY2hhbGxlbmdlUmVzcG9uc2VzID0ge307XG4gICAgICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLlVTRVJOQU1FID0gX3RoaXM2LnVzZXJuYW1lO1xuICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5QQVNTV09SRF9DTEFJTV9TRUNSRVRfQkxPQ0sgPSBjaGFsbGVuZ2VQYXJhbWV0ZXJzLlNFQ1JFVF9CTE9DSztcbiAgICAgICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuVElNRVNUQU1QID0gZGF0ZU5vdztcbiAgICAgICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuUEFTU1dPUkRfQ0xBSU1fU0lHTkFUVVJFID0gc2lnbmF0dXJlU3RyaW5nO1xuICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5ERVZJQ0VfS0VZID0gX3RoaXM2LmRldmljZUtleTtcbiAgICAgICAgICB2YXIganNvblJlcVJlc3AgPSB7XG4gICAgICAgICAgICBDaGFsbGVuZ2VOYW1lOiAnREVWSUNFX1BBU1NXT1JEX1ZFUklGSUVSJyxcbiAgICAgICAgICAgIENsaWVudElkOiBfdGhpczYucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgICAgICAgQ2hhbGxlbmdlUmVzcG9uc2VzOiBjaGFsbGVuZ2VSZXNwb25zZXMsXG4gICAgICAgICAgICBTZXNzaW9uOiBkYXRhLlNlc3Npb25cbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmIChfdGhpczYuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgICAgICAgIGpzb25SZXFSZXNwLlVzZXJDb250ZXh0RGF0YSA9IF90aGlzNi5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3RoaXM2LmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywganNvblJlcVJlc3AsIGZ1bmN0aW9uIChlcnJBdXRoZW50aWNhdGUsIGRhdGFBdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgIGlmIChlcnJBdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJBdXRoZW50aWNhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXM2LnNpZ25JblVzZXJTZXNzaW9uID0gX3RoaXM2LmdldENvZ25pdG9Vc2VyU2Vzc2lvbihkYXRhQXV0aGVudGljYXRlLkF1dGhlbnRpY2F0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgIF90aGlzNi5jYWNoZVRva2VucygpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcyhfdGhpczYuc2lnbkluVXNlclNlc3Npb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgLy8gZ2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbktleSBjYWxsYmFjayBlbmRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgICAgIC8vIGdldExhcmdlQVZhbHVlIGNhbGxiYWNrIGVuZFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBmb3IgYSBjZXJ0YWluIHVzZXIgdG8gY29uZmlybSB0aGUgcmVnaXN0cmF0aW9uIGJ5IHVzaW5nIGEgY29uZmlybWF0aW9uIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpcm1hdGlvbkNvZGUgQ29kZSBlbnRlcmVkIGJ5IHVzZXIuXG4gICAqIEBwYXJhbSB7Ym9vbH0gZm9yY2VBbGlhc0NyZWF0aW9uIEFsbG93IG1pZ3JhdGluZyBmcm9tIGFuIGV4aXN0aW5nIGVtYWlsIC8gcGhvbmUgbnVtYmVyLlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5jb25maXJtUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24gY29uZmlybVJlZ2lzdHJhdGlvbihjb25maXJtYXRpb25Db2RlLCBmb3JjZUFsaWFzQ3JlYXRpb24sIGNhbGxiYWNrLCBjbGllbnRNZXRhZGF0YSkge1xuICAgIHZhciBqc29uUmVxID0ge1xuICAgICAgQ2xpZW50SWQ6IHRoaXMucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgQ29uZmlybWF0aW9uQ29kZTogY29uZmlybWF0aW9uQ29kZSxcbiAgICAgIFVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgRm9yY2VBbGlhc0NyZWF0aW9uOiBmb3JjZUFsaWFzQ3JlYXRpb24sXG4gICAgICBDbGllbnRNZXRhZGF0YTogY2xpZW50TWV0YWRhdGFcbiAgICB9O1xuICAgIGlmICh0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpKSB7XG4gICAgICBqc29uUmVxLlVzZXJDb250ZXh0RGF0YSA9IHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ0NvbmZpcm1TaWduVXAnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdTVUNDRVNTJyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IHRoZSB1c2VyIG9uY2UgaGUgaGFzIHRoZSByZXNwb25zZXMgdG8gYSBjdXN0b20gY2hhbGxlbmdlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhbnN3ZXJDaGFsbGVuZ2UgVGhlIGN1c3RvbSBjaGFsbGVuZ2UgYW5zd2VyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge2N1c3RvbUNoYWxsZW5nZX0gY2FsbGJhY2suY3VzdG9tQ2hhbGxlbmdlXG4gICAqICAgIEN1c3RvbSBjaGFsbGVuZ2UgcmVzcG9uc2UgcmVxdWlyZWQgdG8gY29udGludWUuXG4gICAqIEBwYXJhbSB7YXV0aFN1Y2Nlc3N9IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIHRoZSBuZXcgc2Vzc2lvbi5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5zZW5kQ3VzdG9tQ2hhbGxlbmdlQW5zd2VyID0gZnVuY3Rpb24gc2VuZEN1c3RvbUNoYWxsZW5nZUFuc3dlcihhbnN3ZXJDaGFsbGVuZ2UsIGNhbGxiYWNrLCBjbGllbnRNZXRhZGF0YSkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuICAgIHZhciBjaGFsbGVuZ2VSZXNwb25zZXMgPSB7fTtcbiAgICBjaGFsbGVuZ2VSZXNwb25zZXMuVVNFUk5BTUUgPSB0aGlzLnVzZXJuYW1lO1xuICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5BTlNXRVIgPSBhbnN3ZXJDaGFsbGVuZ2U7XG4gICAgdmFyIGF1dGhlbnRpY2F0aW9uSGVscGVyID0gbmV3IEF1dGhlbnRpY2F0aW9uSGVscGVyKHRoaXMucG9vbC5nZXRVc2VyUG9vbE5hbWUoKSk7XG4gICAgdGhpcy5nZXRDYWNoZWREZXZpY2VLZXlBbmRQYXNzd29yZCgpO1xuICAgIGlmICh0aGlzLmRldmljZUtleSAhPSBudWxsKSB7XG4gICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuREVWSUNFX0tFWSA9IHRoaXMuZGV2aWNlS2V5O1xuICAgIH1cbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENoYWxsZW5nZU5hbWU6ICdDVVNUT01fQ0hBTExFTkdFJyxcbiAgICAgIENoYWxsZW5nZVJlc3BvbnNlczogY2hhbGxlbmdlUmVzcG9uc2VzLFxuICAgICAgQ2xpZW50SWQ6IHRoaXMucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgU2Vzc2lvbjogdGhpcy5TZXNzaW9uLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICBpZiAodGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKSkge1xuICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSB0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywganNvblJlcSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3RoaXM3LmF1dGhlbnRpY2F0ZVVzZXJJbnRlcm5hbChkYXRhLCBhdXRoZW50aWNhdGlvbkhlbHBlciwgY2FsbGJhY2spO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgdXNlciBvbmNlIGhlIGhhcyBhbiBNRkEgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlybWF0aW9uQ29kZSBUaGUgTUZBIGNvZGUgZW50ZXJlZCBieSB0aGUgdXNlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZmFUeXBlIFRoZSBtZmEgd2UgYXJlIHJlcGx5aW5nIHRvLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7YXV0aFN1Y2Nlc3N9IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIHRoZSBuZXcgc2Vzc2lvbi5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5zZW5kTUZBQ29kZSA9IGZ1bmN0aW9uIHNlbmRNRkFDb2RlKGNvbmZpcm1hdGlvbkNvZGUsIGNhbGxiYWNrLCBtZmFUeXBlLCBjbGllbnRNZXRhZGF0YSkge1xuICAgIHZhciBfdGhpczggPSB0aGlzO1xuICAgIHZhciBjaGFsbGVuZ2VSZXNwb25zZXMgPSB7fTtcbiAgICBjaGFsbGVuZ2VSZXNwb25zZXMuVVNFUk5BTUUgPSB0aGlzLnVzZXJuYW1lO1xuICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5TTVNfTUZBX0NPREUgPSBjb25maXJtYXRpb25Db2RlO1xuICAgIHZhciBtZmFUeXBlU2VsZWN0aW9uID0gbWZhVHlwZSB8fCAnU01TX01GQSc7XG4gICAgaWYgKG1mYVR5cGVTZWxlY3Rpb24gPT09ICdTT0ZUV0FSRV9UT0tFTl9NRkEnKSB7XG4gICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuU09GVFdBUkVfVE9LRU5fTUZBX0NPREUgPSBjb25maXJtYXRpb25Db2RlO1xuICAgIH1cbiAgICBpZiAodGhpcy5kZXZpY2VLZXkgIT0gbnVsbCkge1xuICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLkRFVklDRV9LRVkgPSB0aGlzLmRldmljZUtleTtcbiAgICB9XG4gICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICBDaGFsbGVuZ2VOYW1lOiBtZmFUeXBlU2VsZWN0aW9uLFxuICAgICAgQ2hhbGxlbmdlUmVzcG9uc2VzOiBjaGFsbGVuZ2VSZXNwb25zZXMsXG4gICAgICBDbGllbnRJZDogdGhpcy5wb29sLmdldENsaWVudElkKCksXG4gICAgICBTZXNzaW9uOiB0aGlzLlNlc3Npb24sXG4gICAgICBDbGllbnRNZXRhZGF0YTogY2xpZW50TWV0YWRhdGFcbiAgICB9O1xuICAgIGlmICh0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpKSB7XG4gICAgICBqc29uUmVxLlVzZXJDb250ZXh0RGF0YSA9IHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1Jlc3BvbmRUb0F1dGhDaGFsbGVuZ2UnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBkYXRhQXV0aGVudGljYXRlKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGFsbGVuZ2VOYW1lID0gZGF0YUF1dGhlbnRpY2F0ZS5DaGFsbGVuZ2VOYW1lO1xuICAgICAgaWYgKGNoYWxsZW5nZU5hbWUgPT09ICdERVZJQ0VfU1JQX0FVVEgnKSB7XG4gICAgICAgIF90aGlzOC5nZXREZXZpY2VSZXNwb25zZShjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBfdGhpczguc2lnbkluVXNlclNlc3Npb24gPSBfdGhpczguZ2V0Q29nbml0b1VzZXJTZXNzaW9uKGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQpO1xuICAgICAgX3RoaXM4LmNhY2hlVG9rZW5zKCk7XG4gICAgICBpZiAoZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoX3RoaXM4LnNpZ25JblVzZXJTZXNzaW9uKTtcbiAgICAgIH1cbiAgICAgIHZhciBhdXRoZW50aWNhdGlvbkhlbHBlciA9IG5ldyBBdXRoZW50aWNhdGlvbkhlbHBlcihfdGhpczgucG9vbC5nZXRVc2VyUG9vbE5hbWUoKSk7XG4gICAgICBhdXRoZW50aWNhdGlvbkhlbHBlci5nZW5lcmF0ZUhhc2hEZXZpY2UoZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VHcm91cEtleSwgZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VLZXksIGZ1bmN0aW9uIChlcnJHZW5IYXNoKSB7XG4gICAgICAgIGlmIChlcnJHZW5IYXNoKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJHZW5IYXNoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGV2aWNlU2VjcmV0VmVyaWZpZXJDb25maWcgPSB7XG4gICAgICAgICAgU2FsdDogQnVmZmVyLmZyb20oYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0U2FsdERldmljZXMoKSwgJ2hleCcpLnRvU3RyaW5nKCdiYXNlNjQnKSxcbiAgICAgICAgICBQYXNzd29yZFZlcmlmaWVyOiBCdWZmZXIuZnJvbShhdXRoZW50aWNhdGlvbkhlbHBlci5nZXRWZXJpZmllckRldmljZXMoKSwgJ2hleCcpLnRvU3RyaW5nKCdiYXNlNjQnKVxuICAgICAgICB9O1xuICAgICAgICBfdGhpczgudmVyaWZpZXJEZXZpY2VzID0gZGV2aWNlU2VjcmV0VmVyaWZpZXJDb25maWcuUGFzc3dvcmRWZXJpZmllcjtcbiAgICAgICAgX3RoaXM4LmRldmljZUdyb3VwS2V5ID0gZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VHcm91cEtleTtcbiAgICAgICAgX3RoaXM4LnJhbmRvbVBhc3N3b3JkID0gYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0UmFuZG9tUGFzc3dvcmQoKTtcbiAgICAgICAgX3RoaXM4LmNsaWVudC5yZXF1ZXN0KCdDb25maXJtRGV2aWNlJywge1xuICAgICAgICAgIERldmljZUtleTogZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VLZXksXG4gICAgICAgICAgQWNjZXNzVG9rZW46IF90aGlzOC5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCksXG4gICAgICAgICAgRGV2aWNlU2VjcmV0VmVyaWZpZXJDb25maWc6IGRldmljZVNlY3JldFZlcmlmaWVyQ29uZmlnLFxuICAgICAgICAgIERldmljZU5hbWU6IHVzZXJBZ2VudFxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyQ29uZmlybSwgZGF0YUNvbmZpcm0pIHtcbiAgICAgICAgICBpZiAoZXJyQ29uZmlybSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJDb25maXJtKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3RoaXM4LmRldmljZUtleSA9IGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlS2V5O1xuICAgICAgICAgIF90aGlzOC5jYWNoZURldmljZUtleUFuZFBhc3N3b3JkKCk7XG4gICAgICAgICAgaWYgKGRhdGFDb25maXJtLlVzZXJDb25maXJtYXRpb25OZWNlc3NhcnkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoX3RoaXM4LnNpZ25JblVzZXJTZXNzaW9uLCBkYXRhQ29uZmlybS5Vc2VyQ29uZmlybWF0aW9uTmVjZXNzYXJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcyhfdGhpczguc2lnbkluVXNlclNlc3Npb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGNoYW5nZSB0aGUgY3VycmVudCBwYXNzd29yZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2xkVXNlclBhc3N3b3JkIFRoZSBjdXJyZW50IHBhc3N3b3JkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXNlclBhc3N3b3JkIFRoZSByZXF1ZXN0ZWQgbmV3IHBhc3N3b3JkLlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKG9sZFVzZXJQYXNzd29yZCwgbmV3VXNlclBhc3N3b3JkLCBjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdDaGFuZ2VQYXNzd29yZCcsIHtcbiAgICAgIFByZXZpb3VzUGFzc3dvcmQ6IG9sZFVzZXJQYXNzd29yZCxcbiAgICAgIFByb3Bvc2VkUGFzc3dvcmQ6IG5ld1VzZXJQYXNzd29yZCxcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBieSBhbiBhdXRoZW50aWNhdGVkIHVzZXIgdG8gZW5hYmxlIE1GQSBmb3IgaXRzZWxmXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPHN0cmluZz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZW5hYmxlTUZBID0gZnVuY3Rpb24gZW5hYmxlTUZBKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gPT0gbnVsbCB8fCAhdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSwgbnVsbCk7XG4gICAgfVxuICAgIHZhciBtZmFPcHRpb25zID0gW107XG4gICAgdmFyIG1mYUVuYWJsZWQgPSB7XG4gICAgICBEZWxpdmVyeU1lZGl1bTogJ1NNUycsXG4gICAgICBBdHRyaWJ1dGVOYW1lOiAncGhvbmVfbnVtYmVyJ1xuICAgIH07XG4gICAgbWZhT3B0aW9ucy5wdXNoKG1mYUVuYWJsZWQpO1xuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1NldFVzZXJTZXR0aW5ncycsIHtcbiAgICAgIE1GQU9wdGlvbnM6IG1mYU9wdGlvbnMsXG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKClcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdTVUNDRVNTJyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGVuYWJsZSBNRkEgZm9yIGl0c2VsZlxuICAgKiBAcGFyYW0ge0lNZmFTZXR0aW5nc30gc21zTWZhU2V0dGluZ3MgdGhlIHNtcyBtZmEgc2V0dGluZ3NcbiAgICogQHBhcmFtIHtJTUZBU2V0dGluZ3N9IHNvZnR3YXJlVG9rZW5NZmFTZXR0aW5ncyB0aGUgc29mdHdhcmUgdG9rZW4gbWZhIHNldHRpbmdzXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPHN0cmluZz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uc2V0VXNlck1mYVByZWZlcmVuY2UgPSBmdW5jdGlvbiBzZXRVc2VyTWZhUHJlZmVyZW5jZShzbXNNZmFTZXR0aW5ncywgc29mdHdhcmVUb2tlbk1mYVNldHRpbmdzLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnNpZ25JblVzZXJTZXNzaW9uID09IG51bGwgfHwgIXRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdTZXRVc2VyTUZBUHJlZmVyZW5jZScsIHtcbiAgICAgIFNNU01mYVNldHRpbmdzOiBzbXNNZmFTZXR0aW5ncyxcbiAgICAgIFNvZnR3YXJlVG9rZW5NZmFTZXR0aW5nczogc29mdHdhcmVUb2tlbk1mYVNldHRpbmdzLFxuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnU1VDQ0VTUycpO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGFuIGF1dGhlbnRpY2F0ZWQgdXNlciB0byBkaXNhYmxlIE1GQSBmb3IgaXRzZWxmXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPHN0cmluZz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZGlzYWJsZU1GQSA9IGZ1bmN0aW9uIGRpc2FibGVNRkEoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpLCBudWxsKTtcbiAgICB9XG4gICAgdmFyIG1mYU9wdGlvbnMgPSBbXTtcbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdTZXRVc2VyU2V0dGluZ3MnLCB7XG4gICAgICBNRkFPcHRpb25zOiBtZmFPcHRpb25zLFxuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnU1VDQ0VTUycpO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGFuIGF1dGhlbnRpY2F0ZWQgdXNlciB0byBkZWxldGUgaXRzZWxmXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPHN0cmluZz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcGFyYW0ge0NsaWVudE1ldGFkYXRhfSBjbGllbnRNZXRhZGF0YSBvYmplY3Qgd2hpY2ggaXMgcGFzc2VkIGZyb20gY2xpZW50IHRvIENvZ25pdG8gTGFtYmRhIHRyaWdnZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmRlbGV0ZVVzZXIgPSBmdW5jdGlvbiBkZWxldGVVc2VyKGNhbGxiYWNrLCBjbGllbnRNZXRhZGF0YSkge1xuICAgIHZhciBfdGhpczkgPSB0aGlzO1xuICAgIGlmICh0aGlzLnNpZ25JblVzZXJTZXNzaW9uID09IG51bGwgfHwgIXRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdEZWxldGVVc2VyJywge1xuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIF90aGlzOS5jbGVhckNhY2hlZFVzZXIoKTtcbiAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnU1VDQ0VTUycpO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge0NvZ25pdG9Vc2VyQXR0cmlidXRlIHwgeyBOYW1lOnN0cmluZywgVmFsdWU6c3RyaW5nIH19IEF0dHJpYnV0ZUFyZ1xuICAgKi9cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBieSBhbiBhdXRoZW50aWNhdGVkIHVzZXIgdG8gY2hhbmdlIGEgbGlzdCBvZiBhdHRyaWJ1dGVzXG4gICAqIEBwYXJhbSB7QXR0cmlidXRlQXJnW119IGF0dHJpYnV0ZXMgQSBsaXN0IG9mIHRoZSBuZXcgdXNlciBhdHRyaWJ1dGVzLlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by51cGRhdGVBdHRyaWJ1dGVzID0gZnVuY3Rpb24gdXBkYXRlQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gPT0gbnVsbCB8fCAhdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSwgbnVsbCk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1VwZGF0ZVVzZXJBdHRyaWJ1dGVzJywge1xuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpLFxuICAgICAgVXNlckF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICBDbGllbnRNZXRhZGF0YTogY2xpZW50TWV0YWRhdGFcbiAgICB9LCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHVwZGF0ZSBjYWNoZWQgdXNlclxuICAgICAgcmV0dXJuIF90aGlzMTAuZ2V0VXNlckRhdGEoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1NVQ0NFU1MnLCByZXN1bHQpO1xuICAgICAgfSwge1xuICAgICAgICBieXBhc3NDYWNoZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGdldCBhIGxpc3Qgb2YgYXR0cmlidXRlc1xuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxDb2duaXRvVXNlckF0dHJpYnV0ZVtdPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5nZXRVc2VyQXR0cmlidXRlcyA9IGZ1bmN0aW9uIGdldFVzZXJBdHRyaWJ1dGVzKGNhbGxiYWNrKSB7XG4gICAgaWYgKCEodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiAhPSBudWxsICYmIHRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpLCBudWxsKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnR2V0VXNlcicsIHtcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIsIHVzZXJEYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgdmFyIGF0dHJpYnV0ZUxpc3QgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXNlckRhdGEuVXNlckF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IHtcbiAgICAgICAgICBOYW1lOiB1c2VyRGF0YS5Vc2VyQXR0cmlidXRlc1tpXS5OYW1lLFxuICAgICAgICAgIFZhbHVlOiB1c2VyRGF0YS5Vc2VyQXR0cmlidXRlc1tpXS5WYWx1ZVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdXNlckF0dHJpYnV0ZSA9IG5ldyBDb2duaXRvVXNlckF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgICBhdHRyaWJ1dGVMaXN0LnB1c2godXNlckF0dHJpYnV0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgYXR0cmlidXRlTGlzdCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHdhcyBwcmV2aW91c2x5IHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGdldCBNRkFPcHRpb25zLFxuICAgKiBidXQgbm8gbG9uZ2VyIHJldHVybnMgYSBtZWFuaW5nZnVsIHJlc3BvbnNlLiBSZWZlciB0byB0aGUgZG9jdW1lbnRhdGlvbiBmb3JcbiAgICogaG93IHRvIHNldHVwIGFuZCB1c2UgTUZBOiBodHRwczovL2RvY3MuYW1wbGlmeS5hd3MvbGliL2F1dGgvbWZhL3EvcGxhdGZvcm0vanNcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8TUZBT3B0aW9ucz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2V0TUZBT3B0aW9ucyA9IGZ1bmN0aW9uIGdldE1GQU9wdGlvbnMoY2FsbGJhY2spIHtcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdHZXRVc2VyJywge1xuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpXG4gICAgfSwgZnVuY3Rpb24gKGVyciwgdXNlckRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdXNlckRhdGEuTUZBT3B0aW9ucyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQUklWQVRFIE9OTFk6IFRoaXMgaXMgYW4gaW50ZXJuYWwgb25seSBtZXRob2QgYW5kIHNob3VsZCBub3RcbiAgICogYmUgZGlyZWN0bHkgY2FsbGVkIGJ5IHRoZSBjb25zdW1lcnMuXG4gICAqLztcbiAgX3Byb3RvLmNyZWF0ZUdldFVzZXJSZXF1ZXN0ID0gZnVuY3Rpb24gY3JlYXRlR2V0VXNlclJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LnByb21pc2lmeVJlcXVlc3QoJ0dldFVzZXInLCB7XG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQUklWQVRFIE9OTFk6IFRoaXMgaXMgYW4gaW50ZXJuYWwgb25seSBtZXRob2QgYW5kIHNob3VsZCBub3RcbiAgICogYmUgZGlyZWN0bHkgY2FsbGVkIGJ5IHRoZSBjb25zdW1lcnMuXG4gICAqLztcbiAgX3Byb3RvLnJlZnJlc2hTZXNzaW9uSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIHJlZnJlc2hTZXNzaW9uSWZQb3NzaWJsZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgLy8gYmVzdCBlZmZvcnQsIGlmIG5vdCBwb3NzaWJsZVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgdmFyIHJlZnJlc2ggPSBfdGhpczExLnNpZ25JblVzZXJTZXNzaW9uLmdldFJlZnJlc2hUb2tlbigpO1xuICAgICAgaWYgKHJlZnJlc2ggJiYgcmVmcmVzaC5nZXRUb2tlbigpKSB7XG4gICAgICAgIF90aGlzMTEucmVmcmVzaFNlc3Npb24ocmVmcmVzaCwgcmVzb2x2ZSwgb3B0aW9ucy5jbGllbnRNZXRhZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gR2V0VXNlckRhdGFPcHRpb25zXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYnlwYXNzQ2FjaGUgLSBmb3JjZSBnZXR0aW5nIGRhdGEgZnJvbSBDb2duaXRvIHNlcnZpY2VcbiAgICogQHByb3BlcnR5IHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fSBjbGllbnRNZXRhZGF0YSAtIGNsaWVudE1ldGFkYXRhIGZvciBnZXRTZXNzaW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VycyB0byBnZXQgdGhlIHVzZXJEYXRhXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPFVzZXJEYXRhPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEBwYXJhbSB7R2V0VXNlckRhdGFPcHRpb25zfSBwYXJhbXNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmdldFVzZXJEYXRhID0gZnVuY3Rpb24gZ2V0VXNlckRhdGEoY2FsbGJhY2ssIHBhcmFtcykge1xuICAgIHZhciBfdGhpczEyID0gdGhpcztcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkVXNlckRhdGEoKTtcbiAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSwgbnVsbCk7XG4gICAgfVxuICAgIHZhciB1c2VyRGF0YSA9IHRoaXMuZ2V0VXNlckRhdGFGcm9tQ2FjaGUoKTtcbiAgICBpZiAoIXVzZXJEYXRhKSB7XG4gICAgICB0aGlzLmZldGNoVXNlckRhdGEoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgfSlbXCJjYXRjaFwiXShjYWxsYmFjayk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmlzRmV0Y2hVc2VyRGF0YUFuZFRva2VuUmVxdWlyZWQocGFyYW1zKSkge1xuICAgICAgdGhpcy5mZXRjaFVzZXJEYXRhKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gX3RoaXMxMi5yZWZyZXNoU2Vzc2lvbklmUG9zc2libGUocGFyYW1zKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgIH0pW1wiY2F0Y2hcIl0oY2FsbGJhY2spO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY2FsbGJhY2sobnVsbCwgSlNPTi5wYXJzZSh1c2VyRGF0YSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5jbGVhckNhY2hlZFVzZXJEYXRhKCk7XG4gICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBQUklWQVRFIE9OTFk6IFRoaXMgaXMgYW4gaW50ZXJuYWwgb25seSBtZXRob2QgYW5kIHNob3VsZCBub3RcbiAgICogYmUgZGlyZWN0bHkgY2FsbGVkIGJ5IHRoZSBjb25zdW1lcnMuXG4gICAqLztcbiAgX3Byb3RvLmdldFVzZXJEYXRhRnJvbUNhY2hlID0gZnVuY3Rpb24gZ2V0VXNlckRhdGFGcm9tQ2FjaGUoKSB7XG4gICAgdmFyIHVzZXJEYXRhID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy51c2VyRGF0YUtleSk7XG4gICAgcmV0dXJuIHVzZXJEYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIFBSSVZBVEUgT05MWTogVGhpcyBpcyBhbiBpbnRlcm5hbCBvbmx5IG1ldGhvZCBhbmQgc2hvdWxkIG5vdFxuICAgKiBiZSBkaXJlY3RseSBjYWxsZWQgYnkgdGhlIGNvbnN1bWVycy5cbiAgICovO1xuICBfcHJvdG8uaXNGZXRjaFVzZXJEYXRhQW5kVG9rZW5SZXF1aXJlZCA9IGZ1bmN0aW9uIGlzRmV0Y2hVc2VyRGF0YUFuZFRva2VuUmVxdWlyZWQocGFyYW1zKSB7XG4gICAgdmFyIF9yZWYgPSBwYXJhbXMgfHwge30sXG4gICAgICBfcmVmJGJ5cGFzc0NhY2hlID0gX3JlZi5ieXBhc3NDYWNoZSxcbiAgICAgIGJ5cGFzc0NhY2hlID0gX3JlZiRieXBhc3NDYWNoZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGJ5cGFzc0NhY2hlO1xuICAgIHJldHVybiBieXBhc3NDYWNoZTtcbiAgfVxuICAvKipcbiAgICpcbiAgICogUFJJVkFURSBPTkxZOiBUaGlzIGlzIGFuIGludGVybmFsIG9ubHkgbWV0aG9kIGFuZCBzaG91bGQgbm90XG4gICAqIGJlIGRpcmVjdGx5IGNhbGxlZCBieSB0aGUgY29uc3VtZXJzLlxuICAgKi87XG4gIF9wcm90by5mZXRjaFVzZXJEYXRhID0gZnVuY3Rpb24gZmV0Y2hVc2VyRGF0YSgpIHtcbiAgICB2YXIgX3RoaXMxMyA9IHRoaXM7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlR2V0VXNlclJlcXVlc3QoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBfdGhpczEzLmNhY2hlVXNlckRhdGEoZGF0YSk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGRlbGV0ZSBhIGxpc3Qgb2YgYXR0cmlidXRlc1xuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBhdHRyaWJ1dGVMaXN0IE5hbWVzIG9mIHRoZSBhdHRyaWJ1dGVzIHRvIGRlbGV0ZS5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8c3RyaW5nPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5kZWxldGVBdHRyaWJ1dGVzID0gZnVuY3Rpb24gZGVsZXRlQXR0cmlidXRlcyhhdHRyaWJ1dGVMaXN0LCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczE0ID0gdGhpcztcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdEZWxldGVVc2VyQXR0cmlidXRlcycsIHtcbiAgICAgIFVzZXJBdHRyaWJ1dGVOYW1lczogYXR0cmlidXRlTGlzdCxcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHVwZGF0ZSBjYWNoZWQgdXNlclxuICAgICAgcmV0dXJuIF90aGlzMTQuZ2V0VXNlckRhdGEoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1NVQ0NFU1MnKTtcbiAgICAgIH0sIHtcbiAgICAgICAgYnlwYXNzQ2FjaGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGEgdXNlciB0byByZXNlbmQgYSBjb25maXJtYXRpb24gY29kZVxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5yZXNlbmRDb25maXJtYXRpb25Db2RlID0gZnVuY3Rpb24gcmVzZW5kQ29uZmlybWF0aW9uQ29kZShjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIFVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdSZXNlbmRDb25maXJtYXRpb25Db2RlJywganNvblJlcSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gR2V0U2Vzc2lvbk9wdGlvbnNcbiAgICogQHByb3BlcnR5IHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fSBjbGllbnRNZXRhZGF0YSAtIGNsaWVudE1ldGFkYXRhIGZvciBnZXRTZXNzaW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgc2Vzc2lvbiwgZWl0aGVyIGZyb20gdGhlIHNlc3Npb24gb2JqZWN0XG4gICAqIG9yIGZyb20gIHRoZSBsb2NhbCBzdG9yYWdlLCBvciBieSB1c2luZyBhIHJlZnJlc2ggdG9rZW5cbiAgICpcbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8Q29nbml0b1VzZXJTZXNzaW9uPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEBwYXJhbSB7R2V0U2Vzc2lvbk9wdGlvbnN9IG9wdGlvbnNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmdldFNlc3Npb24gPSBmdW5jdGlvbiBnZXRTZXNzaW9uKGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICBpZiAodGhpcy51c2VybmFtZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VybmFtZSBpcyBudWxsLiBDYW5ub3QgcmV0cmlldmUgYSBuZXcgc2Vzc2lvbicpLCBudWxsKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gIT0gbnVsbCAmJiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRoaXMuc2lnbkluVXNlclNlc3Npb24pO1xuICAgIH1cbiAgICB2YXIga2V5UHJlZml4ID0gXCJDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuXCIgKyB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSArIFwiLlwiICsgdGhpcy51c2VybmFtZTtcbiAgICB2YXIgaWRUb2tlbktleSA9IGtleVByZWZpeCArIFwiLmlkVG9rZW5cIjtcbiAgICB2YXIgYWNjZXNzVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5hY2Nlc3NUb2tlblwiO1xuICAgIHZhciByZWZyZXNoVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5yZWZyZXNoVG9rZW5cIjtcbiAgICB2YXIgY2xvY2tEcmlmdEtleSA9IGtleVByZWZpeCArIFwiLmNsb2NrRHJpZnRcIjtcbiAgICBpZiAodGhpcy5zdG9yYWdlLmdldEl0ZW0oaWRUb2tlbktleSkpIHtcbiAgICAgIHZhciBpZFRva2VuID0gbmV3IENvZ25pdG9JZFRva2VuKHtcbiAgICAgICAgSWRUb2tlbjogdGhpcy5zdG9yYWdlLmdldEl0ZW0oaWRUb2tlbktleSlcbiAgICAgIH0pO1xuICAgICAgdmFyIGFjY2Vzc1Rva2VuID0gbmV3IENvZ25pdG9BY2Nlc3NUb2tlbih7XG4gICAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShhY2Nlc3NUb2tlbktleSlcbiAgICAgIH0pO1xuICAgICAgdmFyIHJlZnJlc2hUb2tlbiA9IG5ldyBDb2duaXRvUmVmcmVzaFRva2VuKHtcbiAgICAgICAgUmVmcmVzaFRva2VuOiB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShyZWZyZXNoVG9rZW5LZXkpXG4gICAgICB9KTtcbiAgICAgIHZhciBjbG9ja0RyaWZ0ID0gcGFyc2VJbnQodGhpcy5zdG9yYWdlLmdldEl0ZW0oY2xvY2tEcmlmdEtleSksIDApIHx8IDA7XG4gICAgICB2YXIgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgIElkVG9rZW46IGlkVG9rZW4sXG4gICAgICAgIEFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbixcbiAgICAgICAgUmVmcmVzaFRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICAgIENsb2NrRHJpZnQ6IGNsb2NrRHJpZnRcbiAgICAgIH07XG4gICAgICB2YXIgY2FjaGVkU2Vzc2lvbiA9IG5ldyBDb2duaXRvVXNlclNlc3Npb24oc2Vzc2lvbkRhdGEpO1xuICAgICAgaWYgKGNhY2hlZFNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICAgIHRoaXMuc2lnbkluVXNlclNlc3Npb24gPSBjYWNoZWRTZXNzaW9uO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbik7XG4gICAgICB9XG4gICAgICBpZiAoIXJlZnJlc2hUb2tlbi5nZXRUb2tlbigpKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ0Nhbm5vdCByZXRyaWV2ZSBhIG5ldyBzZXNzaW9uLiBQbGVhc2UgYXV0aGVudGljYXRlLicpLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVmcmVzaFNlc3Npb24ocmVmcmVzaFRva2VuLCBjYWxsYmFjaywgb3B0aW9ucy5jbGllbnRNZXRhZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcignTG9jYWwgc3RvcmFnZSBpcyBtaXNzaW5nIGFuIElEIFRva2VuLCBQbGVhc2UgYXV0aGVudGljYXRlJyksIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgdXNlcyB0aGUgcmVmcmVzaFRva2VuIHRvIHJldHJpZXZlIGEgbmV3IHNlc3Npb25cbiAgICogQHBhcmFtIHtDb2duaXRvUmVmcmVzaFRva2VufSByZWZyZXNoVG9rZW4gQSBwcmV2aW91cyBzZXNzaW9uJ3MgcmVmcmVzaCB0b2tlbi5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8Q29nbml0b1VzZXJTZXNzaW9uPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEBwYXJhbSB7Q2xpZW50TWV0YWRhdGF9IGNsaWVudE1ldGFkYXRhIG9iamVjdCB3aGljaCBpcyBwYXNzZWQgZnJvbSBjbGllbnQgdG8gQ29nbml0byBMYW1iZGEgdHJpZ2dlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8ucmVmcmVzaFNlc3Npb24gPSBmdW5jdGlvbiByZWZyZXNoU2Vzc2lvbihyZWZyZXNoVG9rZW4sIGNhbGxiYWNrLCBjbGllbnRNZXRhZGF0YSkge1xuICAgIHZhciBfdGhpczE1ID0gdGhpcztcbiAgICB2YXIgd3JhcHBlZENhbGxiYWNrID0gdGhpcy5wb29sLndyYXBSZWZyZXNoU2Vzc2lvbkNhbGxiYWNrID8gdGhpcy5wb29sLndyYXBSZWZyZXNoU2Vzc2lvbkNhbGxiYWNrKGNhbGxiYWNrKSA6IGNhbGxiYWNrO1xuICAgIHZhciBhdXRoUGFyYW1ldGVycyA9IHt9O1xuICAgIGF1dGhQYXJhbWV0ZXJzLlJFRlJFU0hfVE9LRU4gPSByZWZyZXNoVG9rZW4uZ2V0VG9rZW4oKTtcbiAgICB2YXIga2V5UHJlZml4ID0gXCJDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuXCIgKyB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKTtcbiAgICB2YXIgbGFzdFVzZXJLZXkgPSBrZXlQcmVmaXggKyBcIi5MYXN0QXV0aFVzZXJcIjtcbiAgICBpZiAodGhpcy5zdG9yYWdlLmdldEl0ZW0obGFzdFVzZXJLZXkpKSB7XG4gICAgICB0aGlzLnVzZXJuYW1lID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0obGFzdFVzZXJLZXkpO1xuICAgICAgdmFyIGRldmljZUtleUtleSA9IGtleVByZWZpeCArIFwiLlwiICsgdGhpcy51c2VybmFtZSArIFwiLmRldmljZUtleVwiO1xuICAgICAgdGhpcy5kZXZpY2VLZXkgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShkZXZpY2VLZXlLZXkpO1xuICAgICAgYXV0aFBhcmFtZXRlcnMuREVWSUNFX0tFWSA9IHRoaXMuZGV2aWNlS2V5O1xuICAgIH1cbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIEF1dGhGbG93OiAnUkVGUkVTSF9UT0tFTl9BVVRIJyxcbiAgICAgIEF1dGhQYXJhbWV0ZXJzOiBhdXRoUGFyYW1ldGVycyxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gdGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdFdpdGhSZXRyeSgnSW5pdGlhdGVBdXRoJywganNvblJlcSwgZnVuY3Rpb24gKGVyciwgYXV0aFJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBpZiAoZXJyLmNvZGUgPT09ICdOb3RBdXRob3JpemVkRXhjZXB0aW9uJykge1xuICAgICAgICAgIF90aGlzMTUuY2xlYXJDYWNoZWRVc2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyYXBwZWRDYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgaWYgKGF1dGhSZXN1bHQpIHtcbiAgICAgICAgdmFyIGF1dGhlbnRpY2F0aW9uUmVzdWx0ID0gYXV0aFJlc3VsdC5BdXRoZW50aWNhdGlvblJlc3VsdDtcbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXV0aGVudGljYXRpb25SZXN1bHQsICdSZWZyZXNoVG9rZW4nKSkge1xuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LlJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbi5nZXRUb2tlbigpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzMTUuc2lnbkluVXNlclNlc3Npb24gPSBfdGhpczE1LmdldENvZ25pdG9Vc2VyU2Vzc2lvbihhdXRoZW50aWNhdGlvblJlc3VsdCk7XG4gICAgICAgIF90aGlzMTUuY2FjaGVUb2tlbnMoKTtcbiAgICAgICAgcmV0dXJuIHdyYXBwZWRDYWxsYmFjayhudWxsLCBfdGhpczE1LnNpZ25JblVzZXJTZXNzaW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIHNhdmUgdGhlIHNlc3Npb24gdG9rZW5zIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmNhY2hlVG9rZW5zID0gZnVuY3Rpb24gY2FjaGVUb2tlbnMoKSB7XG4gICAgdmFyIGtleVByZWZpeCA9IFwiQ29nbml0b0lkZW50aXR5U2VydmljZVByb3ZpZGVyLlwiICsgdGhpcy5wb29sLmdldENsaWVudElkKCk7XG4gICAgdmFyIGlkVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi5pZFRva2VuXCI7XG4gICAgdmFyIGFjY2Vzc1Rva2VuS2V5ID0ga2V5UHJlZml4ICsgXCIuXCIgKyB0aGlzLnVzZXJuYW1lICsgXCIuYWNjZXNzVG9rZW5cIjtcbiAgICB2YXIgcmVmcmVzaFRva2VuS2V5ID0ga2V5UHJlZml4ICsgXCIuXCIgKyB0aGlzLnVzZXJuYW1lICsgXCIucmVmcmVzaFRva2VuXCI7XG4gICAgdmFyIGNsb2NrRHJpZnRLZXkgPSBrZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi5jbG9ja0RyaWZ0XCI7XG4gICAgdmFyIGxhc3RVc2VyS2V5ID0ga2V5UHJlZml4ICsgXCIuTGFzdEF1dGhVc2VyXCI7XG4gICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oaWRUb2tlbktleSwgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRJZFRva2VuKCkuZ2V0Snd0VG9rZW4oKSk7XG4gICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oYWNjZXNzVG9rZW5LZXksIHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpKTtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShyZWZyZXNoVG9rZW5LZXksIHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0UmVmcmVzaFRva2VuKCkuZ2V0VG9rZW4oKSk7XG4gICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oY2xvY2tEcmlmdEtleSwgXCJcIiArIHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0Q2xvY2tEcmlmdCgpKTtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShsYXN0VXNlcktleSwgdGhpcy51c2VybmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0byBjYWNoZSB1c2VyIGRhdGFcbiAgICovO1xuICBfcHJvdG8uY2FjaGVVc2VyRGF0YSA9IGZ1bmN0aW9uIGNhY2hlVXNlckRhdGEodXNlckRhdGEpIHtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnVzZXJEYXRhS2V5LCBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdG8gcmVtb3ZlIGNhY2hlZCB1c2VyIGRhdGFcbiAgICovO1xuICBfcHJvdG8uY2xlYXJDYWNoZWRVc2VyRGF0YSA9IGZ1bmN0aW9uIGNsZWFyQ2FjaGVkVXNlckRhdGEoKSB7XG4gICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy51c2VyRGF0YUtleSk7XG4gIH07XG4gIF9wcm90by5jbGVhckNhY2hlZFVzZXIgPSBmdW5jdGlvbiBjbGVhckNhY2hlZFVzZXIoKSB7XG4gICAgdGhpcy5jbGVhckNhY2hlZFRva2VucygpO1xuICAgIHRoaXMuY2xlYXJDYWNoZWRVc2VyRGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBjYWNoZSB0aGUgZGV2aWNlIGtleSBhbmQgZGV2aWNlIGdyb3VwIGFuZCBkZXZpY2UgcGFzc3dvcmRcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmNhY2hlRGV2aWNlS2V5QW5kUGFzc3dvcmQgPSBmdW5jdGlvbiBjYWNoZURldmljZUtleUFuZFBhc3N3b3JkKCkge1xuICAgIHZhciBrZXlQcmVmaXggPSBcIkNvZ25pdG9JZGVudGl0eVNlcnZpY2VQcm92aWRlci5cIiArIHRoaXMucG9vbC5nZXRDbGllbnRJZCgpICsgXCIuXCIgKyB0aGlzLnVzZXJuYW1lO1xuICAgIHZhciBkZXZpY2VLZXlLZXkgPSBrZXlQcmVmaXggKyBcIi5kZXZpY2VLZXlcIjtcbiAgICB2YXIgcmFuZG9tUGFzc3dvcmRLZXkgPSBrZXlQcmVmaXggKyBcIi5yYW5kb21QYXNzd29yZEtleVwiO1xuICAgIHZhciBkZXZpY2VHcm91cEtleUtleSA9IGtleVByZWZpeCArIFwiLmRldmljZUdyb3VwS2V5XCI7XG4gICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oZGV2aWNlS2V5S2V5LCB0aGlzLmRldmljZUtleSk7XG4gICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0ocmFuZG9tUGFzc3dvcmRLZXksIHRoaXMucmFuZG9tUGFzc3dvcmQpO1xuICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGRldmljZUdyb3VwS2V5S2V5LCB0aGlzLmRldmljZUdyb3VwS2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGN1cnJlbnQgZGV2aWNlIGtleSBhbmQgZGV2aWNlIGdyb3VwIGFuZCBkZXZpY2UgcGFzc3dvcmRcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmdldENhY2hlZERldmljZUtleUFuZFBhc3N3b3JkID0gZnVuY3Rpb24gZ2V0Q2FjaGVkRGV2aWNlS2V5QW5kUGFzc3dvcmQoKSB7XG4gICAgdmFyIGtleVByZWZpeCA9IFwiQ29nbml0b0lkZW50aXR5U2VydmljZVByb3ZpZGVyLlwiICsgdGhpcy5wb29sLmdldENsaWVudElkKCkgKyBcIi5cIiArIHRoaXMudXNlcm5hbWU7XG4gICAgdmFyIGRldmljZUtleUtleSA9IGtleVByZWZpeCArIFwiLmRldmljZUtleVwiO1xuICAgIHZhciByYW5kb21QYXNzd29yZEtleSA9IGtleVByZWZpeCArIFwiLnJhbmRvbVBhc3N3b3JkS2V5XCI7XG4gICAgdmFyIGRldmljZUdyb3VwS2V5S2V5ID0ga2V5UHJlZml4ICsgXCIuZGV2aWNlR3JvdXBLZXlcIjtcbiAgICBpZiAodGhpcy5zdG9yYWdlLmdldEl0ZW0oZGV2aWNlS2V5S2V5KSkge1xuICAgICAgdGhpcy5kZXZpY2VLZXkgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShkZXZpY2VLZXlLZXkpO1xuICAgICAgdGhpcy5yYW5kb21QYXNzd29yZCA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHJhbmRvbVBhc3N3b3JkS2V5KTtcbiAgICAgIHRoaXMuZGV2aWNlR3JvdXBLZXkgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShkZXZpY2VHcm91cEtleUtleSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBjbGVhciB0aGUgZGV2aWNlIGtleSBpbmZvIGZyb20gbG9jYWwgc3RvcmFnZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uY2xlYXJDYWNoZWREZXZpY2VLZXlBbmRQYXNzd29yZCA9IGZ1bmN0aW9uIGNsZWFyQ2FjaGVkRGV2aWNlS2V5QW5kUGFzc3dvcmQoKSB7XG4gICAgdmFyIGtleVByZWZpeCA9IFwiQ29nbml0b0lkZW50aXR5U2VydmljZVByb3ZpZGVyLlwiICsgdGhpcy5wb29sLmdldENsaWVudElkKCkgKyBcIi5cIiArIHRoaXMudXNlcm5hbWU7XG4gICAgdmFyIGRldmljZUtleUtleSA9IGtleVByZWZpeCArIFwiLmRldmljZUtleVwiO1xuICAgIHZhciByYW5kb21QYXNzd29yZEtleSA9IGtleVByZWZpeCArIFwiLnJhbmRvbVBhc3N3b3JkS2V5XCI7XG4gICAgdmFyIGRldmljZUdyb3VwS2V5S2V5ID0ga2V5UHJlZml4ICsgXCIuZGV2aWNlR3JvdXBLZXlcIjtcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShkZXZpY2VLZXlLZXkpO1xuICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKHJhbmRvbVBhc3N3b3JkS2V5KTtcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShkZXZpY2VHcm91cEtleUtleSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBzZXNzaW9uIHRva2VucyBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmNsZWFyQ2FjaGVkVG9rZW5zID0gZnVuY3Rpb24gY2xlYXJDYWNoZWRUb2tlbnMoKSB7XG4gICAgdmFyIGtleVByZWZpeCA9IFwiQ29nbml0b0lkZW50aXR5U2VydmljZVByb3ZpZGVyLlwiICsgdGhpcy5wb29sLmdldENsaWVudElkKCk7XG4gICAgdmFyIGlkVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi5pZFRva2VuXCI7XG4gICAgdmFyIGFjY2Vzc1Rva2VuS2V5ID0ga2V5UHJlZml4ICsgXCIuXCIgKyB0aGlzLnVzZXJuYW1lICsgXCIuYWNjZXNzVG9rZW5cIjtcbiAgICB2YXIgcmVmcmVzaFRva2VuS2V5ID0ga2V5UHJlZml4ICsgXCIuXCIgKyB0aGlzLnVzZXJuYW1lICsgXCIucmVmcmVzaFRva2VuXCI7XG4gICAgdmFyIGxhc3RVc2VyS2V5ID0ga2V5UHJlZml4ICsgXCIuTGFzdEF1dGhVc2VyXCI7XG4gICAgdmFyIGNsb2NrRHJpZnRLZXkgPSBrZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi5jbG9ja0RyaWZ0XCI7XG4gICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oaWRUb2tlbktleSk7XG4gICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oYWNjZXNzVG9rZW5LZXkpO1xuICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKHJlZnJlc2hUb2tlbktleSk7XG4gICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0obGFzdFVzZXJLZXkpO1xuICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGNsb2NrRHJpZnRLZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBidWlsZCBhIHVzZXIgc2Vzc2lvbiBmcm9tIHRva2VucyByZXRyaWV2ZWQgaW4gdGhlIGF1dGhlbnRpY2F0aW9uIHJlc3VsdFxuICAgKiBAcGFyYW0ge29iamVjdH0gYXV0aFJlc3VsdCBTdWNjZXNzZnVsIGF1dGggcmVzcG9uc2UgZnJvbSBzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIHtDb2duaXRvVXNlclNlc3Npb259IFRoZSBuZXcgdXNlciBzZXNzaW9uLlxuICAgKiBAcHJpdmF0ZVxuICAgKi87XG4gIF9wcm90by5nZXRDb2duaXRvVXNlclNlc3Npb24gPSBmdW5jdGlvbiBnZXRDb2duaXRvVXNlclNlc3Npb24oYXV0aFJlc3VsdCkge1xuICAgIHZhciBpZFRva2VuID0gbmV3IENvZ25pdG9JZFRva2VuKGF1dGhSZXN1bHQpO1xuICAgIHZhciBhY2Nlc3NUb2tlbiA9IG5ldyBDb2duaXRvQWNjZXNzVG9rZW4oYXV0aFJlc3VsdCk7XG4gICAgdmFyIHJlZnJlc2hUb2tlbiA9IG5ldyBDb2duaXRvUmVmcmVzaFRva2VuKGF1dGhSZXN1bHQpO1xuICAgIHZhciBzZXNzaW9uRGF0YSA9IHtcbiAgICAgIElkVG9rZW46IGlkVG9rZW4sXG4gICAgICBBY2Nlc3NUb2tlbjogYWNjZXNzVG9rZW4sXG4gICAgICBSZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlblxuICAgIH07XG4gICAgcmV0dXJuIG5ldyBDb2duaXRvVXNlclNlc3Npb24oc2Vzc2lvbkRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBpbml0aWF0ZSBhIGZvcmdvdCBwYXNzd29yZCByZXF1ZXN0XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7aW5wdXRWZXJpZmljYXRpb25Db2RlP30gY2FsbGJhY2suaW5wdXRWZXJpZmljYXRpb25Db2RlXG4gICAqICAgIE9wdGlvbmFsIGNhbGxiYWNrIHJhaXNlZCBpbnN0ZWFkIG9mIG9uU3VjY2VzcyB3aXRoIHJlc3BvbnNlIGRhdGEuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzfSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3MuXG4gICAqIEBwYXJhbSB7Q2xpZW50TWV0YWRhdGF9IGNsaWVudE1ldGFkYXRhIG9iamVjdCB3aGljaCBpcyBwYXNzZWQgZnJvbSBjbGllbnQgdG8gQ29nbml0byBMYW1iZGEgdHJpZ2dlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZm9yZ290UGFzc3dvcmQgPSBmdW5jdGlvbiBmb3Jnb3RQYXNzd29yZChjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIFVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICBpZiAodGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKSkge1xuICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSB0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdGb3Jnb3RQYXNzd29yZCcsIGpzb25SZXEsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjay5pbnB1dFZlcmlmaWNhdGlvbkNvZGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmlucHV0VmVyaWZpY2F0aW9uQ29kZShkYXRhKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGNvbmZpcm0gYSBuZXcgcGFzc3dvcmQgdXNpbmcgYSBjb25maXJtYXRpb25Db2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb25maXJtYXRpb25Db2RlIENvZGUgZW50ZXJlZCBieSB1c2VyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3UGFzc3dvcmQgQ29uZmlybSBuZXcgcGFzc3dvcmQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzPHZvaWQ+fSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3MuXG4gICAqIEBwYXJhbSB7Q2xpZW50TWV0YWRhdGF9IGNsaWVudE1ldGFkYXRhIG9iamVjdCB3aGljaCBpcyBwYXNzZWQgZnJvbSBjbGllbnQgdG8gQ29nbml0byBMYW1iZGEgdHJpZ2dlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uY29uZmlybVBhc3N3b3JkID0gZnVuY3Rpb24gY29uZmlybVBhc3N3b3JkKGNvbmZpcm1hdGlvbkNvZGUsIG5ld1Bhc3N3b3JkLCBjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIFVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgQ29uZmlybWF0aW9uQ29kZTogY29uZmlybWF0aW9uQ29kZSxcbiAgICAgIFBhc3N3b3JkOiBuZXdQYXNzd29yZCxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gdGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnQ29uZmlybUZvcmdvdFBhc3N3b3JkJywganNvblJlcSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKCdTVUNDRVNTJyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGluaXRpYXRlIGFuIGF0dHJpYnV0ZSBjb25maXJtYXRpb24gcmVxdWVzdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZSBVc2VyIGF0dHJpYnV0ZSB0aGF0IG5lZWRzIGNvbmZpcm1hdGlvbi5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtpbnB1dFZlcmlmaWNhdGlvbkNvZGV9IGNhbGxiYWNrLmlucHV0VmVyaWZpY2F0aW9uQ29kZSBDYWxsZWQgb24gc3VjY2Vzcy5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5nZXRBdHRyaWJ1dGVWZXJpZmljYXRpb25Db2RlID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRlVmVyaWZpY2F0aW9uQ29kZShhdHRyaWJ1dGVOYW1lLCBjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ0dldFVzZXJBdHRyaWJ1dGVWZXJpZmljYXRpb25Db2RlJywge1xuICAgICAgQXR0cmlidXRlTmFtZTogYXR0cmlidXRlTmFtZSxcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH0sIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjay5pbnB1dFZlcmlmaWNhdGlvbkNvZGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmlucHV0VmVyaWZpY2F0aW9uQ29kZShkYXRhKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBjb25maXJtIGFuIGF0dHJpYnV0ZSB1c2luZyBhIGNvbmZpcm1hdGlvbiBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIEF0dHJpYnV0ZSBiZWluZyBjb25maXJtZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb25maXJtYXRpb25Db2RlIENvZGUgZW50ZXJlZCBieSB1c2VyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge29uU3VjY2VzczxzdHJpbmc+fSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3MuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by52ZXJpZnlBdHRyaWJ1dGUgPSBmdW5jdGlvbiB2ZXJpZnlBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgY29uZmlybWF0aW9uQ29kZSwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1ZlcmlmeVVzZXJBdHRyaWJ1dGUnLCB7XG4gICAgICBBdHRyaWJ1dGVOYW1lOiBhdHRyaWJ1dGVOYW1lLFxuICAgICAgQ29kZTogY29uZmlybWF0aW9uQ29kZSxcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcygnU1VDQ0VTUycpO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGdldCB0aGUgZGV2aWNlIGluZm9ybWF0aW9uIHVzaW5nIHRoZSBjdXJyZW50IGRldmljZSBrZXlcbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtvblN1Y2Nlc3M8Kj59IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIGRldmljZSBkYXRhLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2V0RGV2aWNlID0gZnVuY3Rpb24gZ2V0RGV2aWNlKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gPT0gbnVsbCB8fCAhdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJykpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdHZXREZXZpY2UnLCB7XG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCksXG4gICAgICBEZXZpY2VLZXk6IHRoaXMuZGV2aWNlS2V5XG4gICAgfSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKGRhdGEpO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGZvcmdldCBhIHNwZWNpZmljIGRldmljZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlS2V5IERldmljZSBrZXkuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzPHN0cmluZz59IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2Vzcy5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmZvcmdldFNwZWNpZmljRGV2aWNlID0gZnVuY3Rpb24gZm9yZ2V0U3BlY2lmaWNEZXZpY2UoZGV2aWNlS2V5LCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnNpZ25JblVzZXJTZXNzaW9uID09IG51bGwgfHwgIXRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnRm9yZ2V0RGV2aWNlJywge1xuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpLFxuICAgICAgRGV2aWNlS2V5OiBkZXZpY2VLZXlcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBmb3JnZXQgdGhlIGN1cnJlbnQgZGV2aWNlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzPHN0cmluZz59IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2Vzcy5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmZvcmdldERldmljZSA9IGZ1bmN0aW9uIGZvcmdldERldmljZShjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczE2ID0gdGhpcztcbiAgICB0aGlzLmZvcmdldFNwZWNpZmljRGV2aWNlKHRoaXMuZGV2aWNlS2V5LCB7XG4gICAgICBvbkZhaWx1cmU6IGNhbGxiYWNrLm9uRmFpbHVyZSxcbiAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge1xuICAgICAgICBfdGhpczE2LmRldmljZUtleSA9IG51bGw7XG4gICAgICAgIF90aGlzMTYuZGV2aWNlR3JvdXBLZXkgPSBudWxsO1xuICAgICAgICBfdGhpczE2LnJhbmRvbVBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgX3RoaXMxNi5jbGVhckNhY2hlZERldmljZUtleUFuZFBhc3N3b3JkKCk7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gc2V0IHRoZSBkZXZpY2Ugc3RhdHVzIGFzIHJlbWVtYmVyZWRcbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtvblN1Y2Nlc3M8c3RyaW5nPn0gY2FsbGJhY2sub25TdWNjZXNzIENhbGxlZCBvbiBzdWNjZXNzLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uc2V0RGV2aWNlU3RhdHVzUmVtZW1iZXJlZCA9IGZ1bmN0aW9uIHNldERldmljZVN0YXR1c1JlbWVtYmVyZWQoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1VwZGF0ZURldmljZVN0YXR1cycsIHtcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgIERldmljZUtleTogdGhpcy5kZXZpY2VLZXksXG4gICAgICBEZXZpY2VSZW1lbWJlcmVkU3RhdHVzOiAncmVtZW1iZXJlZCdcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBzZXQgdGhlIGRldmljZSBzdGF0dXMgYXMgbm90IHJlbWVtYmVyZWRcbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtvblN1Y2Nlc3M8c3RyaW5nPn0gY2FsbGJhY2sub25TdWNjZXNzIENhbGxlZCBvbiBzdWNjZXNzLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uc2V0RGV2aWNlU3RhdHVzTm90UmVtZW1iZXJlZCA9IGZ1bmN0aW9uIHNldERldmljZVN0YXR1c05vdFJlbWVtYmVyZWQoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1VwZGF0ZURldmljZVN0YXR1cycsIHtcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgIERldmljZUtleTogdGhpcy5kZXZpY2VLZXksXG4gICAgICBEZXZpY2VSZW1lbWJlcmVkU3RhdHVzOiAnbm90X3JlbWVtYmVyZWQnXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKCdTVUNDRVNTJyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gbGlzdCBhbGwgZGV2aWNlcyBmb3IgYSB1c2VyXG4gICAqXG4gICAqIEBwYXJhbSB7aW50fSBsaW1pdCB0aGUgbnVtYmVyIG9mIGRldmljZXMgcmV0dXJuZWQgaW4gYSBjYWxsXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbH0gcGFnaW5hdGlvblRva2VuIHRoZSBwYWdpbmF0aW9uIHRva2VuIGluIGNhc2UgYW55IHdhcyByZXR1cm5lZCBiZWZvcmVcbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtvblN1Y2Nlc3M8Kj59IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIGRldmljZSBsaXN0LlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8ubGlzdERldmljZXMgPSBmdW5jdGlvbiBsaXN0RGV2aWNlcyhsaW1pdCwgcGFnaW5hdGlvblRva2VuLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnNpZ25JblVzZXJTZXNzaW9uID09IG51bGwgfHwgIXRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpKTtcbiAgICB9XG4gICAgdmFyIHJlcXVlc3RQYXJhbXMgPSB7XG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCksXG4gICAgICBMaW1pdDogbGltaXRcbiAgICB9O1xuICAgIGlmIChwYWdpbmF0aW9uVG9rZW4pIHtcbiAgICAgIHJlcXVlc3RQYXJhbXMuUGFnaW5hdGlvblRva2VuID0gcGFnaW5hdGlvblRva2VuO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdMaXN0RGV2aWNlcycsIHJlcXVlc3RQYXJhbXMsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcyhkYXRhKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBnbG9iYWxseSByZXZva2UgYWxsIHRva2VucyBpc3N1ZWQgdG8gYSB1c2VyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzPHN0cmluZz59IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2Vzcy5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmdsb2JhbFNpZ25PdXQgPSBmdW5jdGlvbiBnbG9iYWxTaWduT3V0KGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMTcgPSB0aGlzO1xuICAgIGlmICh0aGlzLnNpZ25JblVzZXJTZXNzaW9uID09IG51bGwgfHwgIXRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnR2xvYmFsU2lnbk91dCcsIHtcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgX3RoaXMxNy5jbGVhckNhY2hlZFVzZXIoKTtcbiAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBmb3IgdGhlIHVzZXIgdG8gc2lnbk91dCBvZiB0aGUgYXBwbGljYXRpb24gYW5kIGNsZWFyIHRoZSBjYWNoZWQgdG9rZW5zLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uc2lnbk91dCA9IGZ1bmN0aW9uIHNpZ25PdXQocmV2b2tlVG9rZW5DYWxsYmFjaykge1xuICAgIHZhciBfdGhpczE4ID0gdGhpcztcbiAgICAvLyBJZiB0b2tlbnMgd29uJ3QgYmUgcmV2b2tlZCwgd2UganVzdCBjbGVhbiB0aGUgY2xpZW50IGRhdGEuXG4gICAgaWYgKCFyZXZva2VUb2tlbkNhbGxiYWNrIHx8IHR5cGVvZiByZXZva2VUb2tlbkNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLmNsZWFuQ2xpZW50RGF0YSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmdldFNlc3Npb24oZnVuY3Rpb24gKGVycm9yLCBfc2Vzc2lvbikge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXZva2VUb2tlbkNhbGxiYWNrKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIF90aGlzMTgucmV2b2tlVG9rZW5zKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgX3RoaXMxOC5jbGVhbkNsaWVudERhdGEoKTtcbiAgICAgICAgcmV2b2tlVG9rZW5DYWxsYmFjayhlcnIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIF9wcm90by5yZXZva2VUb2tlbnMgPSBmdW5jdGlvbiByZXZva2VUb2tlbnMocmV2b2tlVG9rZW5DYWxsYmFjaykge1xuICAgIGlmIChyZXZva2VUb2tlbkNhbGxiYWNrID09PSB2b2lkIDApIHtcbiAgICAgIHJldm9rZVRva2VuQ2FsbGJhY2sgPSBmdW5jdGlvbiByZXZva2VUb2tlbkNhbGxiYWNrKCkge307XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmV2b2tlVG9rZW5DYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJldm9rZVRva2VuQ2FsbGJhY2suIEl0IHNob3VsZCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cbiAgICB2YXIgdG9rZW5zVG9CZVJldm9rZWQgPSBbXTtcbiAgICBpZiAoIXRoaXMuc2lnbkluVXNlclNlc3Npb24pIHtcbiAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpO1xuICAgICAgcmV0dXJuIHJldm9rZVRva2VuQ2FsbGJhY2soZXJyb3IpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKSkge1xuICAgICAgdmFyIF9lcnJvciA9IG5ldyBFcnJvcignTm8gQWNjZXNzIHRva2VuIGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuIHJldm9rZVRva2VuQ2FsbGJhY2soX2Vycm9yKTtcbiAgICB9XG4gICAgdmFyIHJlZnJlc2hUb2tlbiA9IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0UmVmcmVzaFRva2VuKCkuZ2V0VG9rZW4oKTtcbiAgICB2YXIgYWNjZXNzVG9rZW4gPSB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCk7XG4gICAgaWYgKHRoaXMuaXNTZXNzaW9uUmV2b2NhYmxlKGFjY2Vzc1Rva2VuKSkge1xuICAgICAgaWYgKHJlZnJlc2hUb2tlbikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXZva2VUb2tlbih7XG4gICAgICAgICAgdG9rZW46IHJlZnJlc2hUb2tlbixcbiAgICAgICAgICBjYWxsYmFjazogcmV2b2tlVG9rZW5DYWxsYmFja1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV2b2tlVG9rZW5DYWxsYmFjaygpO1xuICB9O1xuICBfcHJvdG8uaXNTZXNzaW9uUmV2b2NhYmxlID0gZnVuY3Rpb24gaXNTZXNzaW9uUmV2b2NhYmxlKHRva2VuKSB7XG4gICAgaWYgKHRva2VuICYmIHR5cGVvZiB0b2tlbi5kZWNvZGVQYXlsb2FkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgX3Rva2VuJGRlY29kZVBheWxvYWQgPSB0b2tlbi5kZWNvZGVQYXlsb2FkKCksXG4gICAgICAgICAgb3JpZ2luX2p0aSA9IF90b2tlbiRkZWNvZGVQYXlsb2FkLm9yaWdpbl9qdGk7XG4gICAgICAgIHJldHVybiAhIW9yaWdpbl9qdGk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gTm90aGluZyB0byBkbywgdG9rZW4gZG9lc250IGhhdmUgb3JpZ2luX2p0aSBjbGFpbVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIF9wcm90by5jbGVhbkNsaWVudERhdGEgPSBmdW5jdGlvbiBjbGVhbkNsaWVudERhdGEoKSB7XG4gICAgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9IG51bGw7XG4gICAgdGhpcy5jbGVhckNhY2hlZFVzZXIoKTtcbiAgfTtcbiAgX3Byb3RvLnJldm9rZVRva2VuID0gZnVuY3Rpb24gcmV2b2tlVG9rZW4oX3JlZjIpIHtcbiAgICB2YXIgdG9rZW4gPSBfcmVmMi50b2tlbixcbiAgICAgIGNhbGxiYWNrID0gX3JlZjIuY2FsbGJhY2s7XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdFdpdGhSZXRyeSgnUmV2b2tlVG9rZW4nLCB7XG4gICAgICBUb2tlbjogdG9rZW4sXG4gICAgICBDbGllbnRJZDogdGhpcy5wb29sLmdldENsaWVudElkKClcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYSB1c2VyIHRyeWluZyB0byBzZWxlY3QgYSBnaXZlbiBNRkFcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFuc3dlckNoYWxsZW5nZSB0aGUgbWZhIHRoZSB1c2VyIHdhbnRzXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPHN0cmluZz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uc2VuZE1GQVNlbGVjdGlvbkFuc3dlciA9IGZ1bmN0aW9uIHNlbmRNRkFTZWxlY3Rpb25BbnN3ZXIoYW5zd2VyQ2hhbGxlbmdlLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczE5ID0gdGhpcztcbiAgICB2YXIgY2hhbGxlbmdlUmVzcG9uc2VzID0ge307XG4gICAgY2hhbGxlbmdlUmVzcG9uc2VzLlVTRVJOQU1FID0gdGhpcy51c2VybmFtZTtcbiAgICBjaGFsbGVuZ2VSZXNwb25zZXMuQU5TV0VSID0gYW5zd2VyQ2hhbGxlbmdlO1xuICAgIHZhciBqc29uUmVxID0ge1xuICAgICAgQ2hhbGxlbmdlTmFtZTogJ1NFTEVDVF9NRkFfVFlQRScsXG4gICAgICBDaGFsbGVuZ2VSZXNwb25zZXM6IGNoYWxsZW5nZVJlc3BvbnNlcyxcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIFNlc3Npb246IHRoaXMuU2Vzc2lvblxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gdGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnUmVzcG9uZFRvQXV0aENoYWxsZW5nZScsIGpzb25SZXEsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgX3RoaXMxOS5TZXNzaW9uID0gZGF0YS5TZXNzaW9uO1xuICAgICAgaWYgKGFuc3dlckNoYWxsZW5nZSA9PT0gJ1NNU19NRkEnKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5tZmFSZXF1aXJlZChkYXRhLkNoYWxsZW5nZU5hbWUsIGRhdGEuQ2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgICB9XG4gICAgICBpZiAoYW5zd2VyQ2hhbGxlbmdlID09PSAnU09GVFdBUkVfVE9LRU5fTUZBJykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sudG90cFJlcXVpcmVkKGRhdGEuQ2hhbGxlbmdlTmFtZSwgZGF0YS5DaGFsbGVuZ2VQYXJhbWV0ZXJzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyByZXR1cm5zIHRoZSB1c2VyIGNvbnRleHQgZGF0YSBmb3IgYWR2YW5jZWQgc2VjdXJpdHkgZmVhdHVyZS5cbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHVzZXIgY29udGV4dCBkYXRhIGZyb20gQ29nbml0b1VzZXJQb29sXG4gICAqLztcbiAgX3Byb3RvLmdldFVzZXJDb250ZXh0RGF0YSA9IGZ1bmN0aW9uIGdldFVzZXJDb250ZXh0RGF0YSgpIHtcbiAgICB2YXIgcG9vbCA9IHRoaXMucG9vbDtcbiAgICByZXR1cm4gcG9vbC5nZXRVc2VyQ29udGV4dERhdGEodGhpcy51c2VybmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGFuIGF1dGhlbnRpY2F0ZWQgb3IgYSB1c2VyIHRyeWluZyB0byBhdXRoZW50aWNhdGUgdG8gYXNzb2NpYXRlIGEgVE9UUCBNRkFcbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8c3RyaW5nPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5hc3NvY2lhdGVTb2Z0d2FyZVRva2VuID0gZnVuY3Rpb24gYXNzb2NpYXRlU29mdHdhcmVUb2tlbihjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIwID0gdGhpcztcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdBc3NvY2lhdGVTb2Z0d2FyZVRva2VuJywge1xuICAgICAgICBTZXNzaW9uOiB0aGlzLlNlc3Npb25cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpczIwLlNlc3Npb24gPSBkYXRhLlNlc3Npb247XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hc3NvY2lhdGVTZWNyZXRDb2RlKGRhdGEuU2VjcmV0Q29kZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbGllbnQucmVxdWVzdCgnQXNzb2NpYXRlU29mdHdhcmVUb2tlbicsIHtcbiAgICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFzc29jaWF0ZVNlY3JldENvZGUoZGF0YS5TZWNyZXRDb2RlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCBvciBhIHVzZXIgdHJ5aW5nIHRvIGF1dGhlbnRpY2F0ZSB0byB2ZXJpZnkgYSBUT1RQIE1GQVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG90cENvZGUgVGhlIE1GQSBjb2RlIGVudGVyZWQgYnkgdGhlIHVzZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmcmllbmRseURldmljZU5hbWUgVGhlIGRldmljZSBuYW1lIHdlIGFyZSBhc3NpZ25pbmcgdG8gdGhlIGRldmljZS5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8c3RyaW5nPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by52ZXJpZnlTb2Z0d2FyZVRva2VuID0gZnVuY3Rpb24gdmVyaWZ5U29mdHdhcmVUb2tlbih0b3RwQ29kZSwgZnJpZW5kbHlEZXZpY2VOYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIxID0gdGhpcztcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdWZXJpZnlTb2Z0d2FyZVRva2VuJywge1xuICAgICAgICBTZXNzaW9uOiB0aGlzLlNlc3Npb24sXG4gICAgICAgIFVzZXJDb2RlOiB0b3RwQ29kZSxcbiAgICAgICAgRnJpZW5kbHlEZXZpY2VOYW1lOiBmcmllbmRseURldmljZU5hbWVcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpczIxLlNlc3Npb24gPSBkYXRhLlNlc3Npb247XG4gICAgICAgIHZhciBjaGFsbGVuZ2VSZXNwb25zZXMgPSB7fTtcbiAgICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLlVTRVJOQU1FID0gX3RoaXMyMS51c2VybmFtZTtcbiAgICAgICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICAgICAgQ2hhbGxlbmdlTmFtZTogJ01GQV9TRVRVUCcsXG4gICAgICAgICAgQ2xpZW50SWQ6IF90aGlzMjEucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgICAgIENoYWxsZW5nZVJlc3BvbnNlczogY2hhbGxlbmdlUmVzcG9uc2VzLFxuICAgICAgICAgIFNlc3Npb246IF90aGlzMjEuU2Vzc2lvblxuICAgICAgICB9O1xuICAgICAgICBpZiAoX3RoaXMyMS5nZXRVc2VyQ29udGV4dERhdGEoKSkge1xuICAgICAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gX3RoaXMyMS5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpczIxLmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywganNvblJlcSwgZnVuY3Rpb24gKGVyclJlc3BvbmQsIGRhdGFSZXNwb25kKSB7XG4gICAgICAgICAgaWYgKGVyclJlc3BvbmQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyUmVzcG9uZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF90aGlzMjEuc2lnbkluVXNlclNlc3Npb24gPSBfdGhpczIxLmdldENvZ25pdG9Vc2VyU2Vzc2lvbihkYXRhUmVzcG9uZC5BdXRoZW50aWNhdGlvblJlc3VsdCk7XG4gICAgICAgICAgX3RoaXMyMS5jYWNoZVRva2VucygpO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoX3RoaXMyMS5zaWduSW5Vc2VyU2Vzc2lvbik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1ZlcmlmeVNvZnR3YXJlVG9rZW4nLCB7XG4gICAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgICAgVXNlckNvZGU6IHRvdHBDb2RlLFxuICAgICAgICBGcmllbmRseURldmljZU5hbWU6IGZyaWVuZGx5RGV2aWNlTmFtZVxuICAgICAgfSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBDb2duaXRvVXNlcjtcbn0oKTtcbmV4cG9ydCB7IENvZ25pdG9Vc2VyIGFzIGRlZmF1bHQgfTsiLCIvLyBnZW5lcmF0ZWQgYnkgZ2VudmVyc2lvblxuZXhwb3J0IHZhciB2ZXJzaW9uID0gJzUuMC40JzsiLCIvKiFcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4vdmVyc2lvbic7XG52YXIgQkFTRV9VU0VSX0FHRU5UID0gXCJhd3MtYW1wbGlmeS9cIiArIHZlcnNpb247XG5leHBvcnQgdmFyIFBsYXRmb3JtID0ge1xuICB1c2VyQWdlbnQ6IEJBU0VfVVNFUl9BR0VOVCxcbiAgaXNSZWFjdE5hdGl2ZTogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZSdcbn07XG5leHBvcnQgdmFyIGdldFVzZXJBZ2VudCA9IGZ1bmN0aW9uIGdldFVzZXJBZ2VudCgpIHtcbiAgcmV0dXJuIFBsYXRmb3JtLnVzZXJBZ2VudDtcbn07XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgdXNlIG5hbWVkIGltcG9ydFxuICovXG5leHBvcnQgZGVmYXVsdCBQbGF0Zm9ybTsiLCIvKiFcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuLyoqIEBjbGFzcyAqL1xudmFyIENvZ25pdG9Vc2VyU2Vzc2lvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvZ25pdG9Vc2VyU2Vzc2lvbiBvYmplY3RcbiAgICogQHBhcmFtIHtDb2duaXRvSWRUb2tlbn0gSWRUb2tlbiBUaGUgc2Vzc2lvbidzIElkIHRva2VuLlxuICAgKiBAcGFyYW0ge0NvZ25pdG9SZWZyZXNoVG9rZW49fSBSZWZyZXNoVG9rZW4gVGhlIHNlc3Npb24ncyByZWZyZXNoIHRva2VuLlxuICAgKiBAcGFyYW0ge0NvZ25pdG9BY2Nlc3NUb2tlbn0gQWNjZXNzVG9rZW4gVGhlIHNlc3Npb24ncyBhY2Nlc3MgdG9rZW4uXG4gICAqIEBwYXJhbSB7aW50fSBDbG9ja0RyaWZ0IFRoZSBzYXZlZCBjb21wdXRlcidzIGNsb2NrIGRyaWZ0IG9yIHVuZGVmaW5lZCB0byBmb3JjZSBjYWxjdWxhdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIENvZ25pdG9Vc2VyU2Vzc2lvbihfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBJZFRva2VuID0gX3JlZi5JZFRva2VuLFxuICAgICAgUmVmcmVzaFRva2VuID0gX3JlZi5SZWZyZXNoVG9rZW4sXG4gICAgICBBY2Nlc3NUb2tlbiA9IF9yZWYuQWNjZXNzVG9rZW4sXG4gICAgICBDbG9ja0RyaWZ0ID0gX3JlZi5DbG9ja0RyaWZ0O1xuICAgIGlmIChBY2Nlc3NUb2tlbiA9PSBudWxsIHx8IElkVG9rZW4gPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJZCB0b2tlbiBhbmQgQWNjZXNzIFRva2VuIG11c3QgYmUgcHJlc2VudC4nKTtcbiAgICB9XG4gICAgdGhpcy5pZFRva2VuID0gSWRUb2tlbjtcbiAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IFJlZnJlc2hUb2tlbjtcbiAgICB0aGlzLmFjY2Vzc1Rva2VuID0gQWNjZXNzVG9rZW47XG4gICAgdGhpcy5jbG9ja0RyaWZ0ID0gQ2xvY2tEcmlmdCA9PT0gdW5kZWZpbmVkID8gdGhpcy5jYWxjdWxhdGVDbG9ja0RyaWZ0KCkgOiBDbG9ja0RyaWZ0O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtDb2duaXRvSWRUb2tlbn0gdGhlIHNlc3Npb24ncyBJZCB0b2tlblxuICAgKi9cbiAgdmFyIF9wcm90byA9IENvZ25pdG9Vc2VyU2Vzc2lvbi5wcm90b3R5cGU7XG4gIF9wcm90by5nZXRJZFRva2VuID0gZnVuY3Rpb24gZ2V0SWRUb2tlbigpIHtcbiAgICByZXR1cm4gdGhpcy5pZFRva2VuO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtDb2duaXRvUmVmcmVzaFRva2VufSB0aGUgc2Vzc2lvbidzIHJlZnJlc2ggdG9rZW5cbiAgICovO1xuICBfcHJvdG8uZ2V0UmVmcmVzaFRva2VuID0gZnVuY3Rpb24gZ2V0UmVmcmVzaFRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLnJlZnJlc2hUb2tlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Q29nbml0b0FjY2Vzc1Rva2VufSB0aGUgc2Vzc2lvbidzIGFjY2VzcyB0b2tlblxuICAgKi87XG4gIF9wcm90by5nZXRBY2Nlc3NUb2tlbiA9IGZ1bmN0aW9uIGdldEFjY2Vzc1Rva2VuKCkge1xuICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtpbnR9IHRoZSBzZXNzaW9uJ3MgY2xvY2sgZHJpZnRcbiAgICovO1xuICBfcHJvdG8uZ2V0Q2xvY2tEcmlmdCA9IGZ1bmN0aW9uIGdldENsb2NrRHJpZnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvY2tEcmlmdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7aW50fSB0aGUgY29tcHV0ZXIncyBjbG9jayBkcmlmdFxuICAgKi87XG4gIF9wcm90by5jYWxjdWxhdGVDbG9ja0RyaWZ0ID0gZnVuY3Rpb24gY2FsY3VsYXRlQ2xvY2tEcmlmdCgpIHtcbiAgICB2YXIgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpIC8gMTAwMCk7XG4gICAgdmFyIGlhdCA9IE1hdGgubWluKHRoaXMuYWNjZXNzVG9rZW4uZ2V0SXNzdWVkQXQoKSwgdGhpcy5pZFRva2VuLmdldElzc3VlZEF0KCkpO1xuICAgIHJldHVybiBub3cgLSBpYXQ7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgc2Vzc2lvbiBpcyBzdGlsbCB2YWxpZCBiYXNlZCBvbiBzZXNzaW9uIGV4cGlyeSBpbmZvcm1hdGlvbiBmb3VuZFxuICAgKiBpbiB0b2tlbnMgYW5kIHRoZSBjdXJyZW50IHRpbWUgKGFkanVzdGVkIHdpdGggY2xvY2sgZHJpZnQpXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBpZiB0aGUgc2Vzc2lvbiBpcyBzdGlsbCB2YWxpZFxuICAgKi87XG4gIF9wcm90by5pc1ZhbGlkID0gZnVuY3Rpb24gaXNWYWxpZCgpIHtcbiAgICB2YXIgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpIC8gMTAwMCk7XG4gICAgdmFyIGFkanVzdGVkID0gbm93IC0gdGhpcy5jbG9ja0RyaWZ0O1xuICAgIHJldHVybiBhZGp1c3RlZCA8IHRoaXMuYWNjZXNzVG9rZW4uZ2V0RXhwaXJhdGlvbigpICYmIGFkanVzdGVkIDwgdGhpcy5pZFRva2VuLmdldEV4cGlyYXRpb24oKTtcbiAgfTtcbiAgcmV0dXJuIENvZ25pdG9Vc2VyU2Vzc2lvbjtcbn0oKTtcbmV4cG9ydCB7IENvZ25pdG9Vc2VyU2Vzc2lvbiBhcyBkZWZhdWx0IH07IiwiLyohXG4gKiBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxudmFyIG1vbnRoTmFtZXMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ107XG52YXIgd2Vla05hbWVzID0gWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXTtcblxuLyoqIEBjbGFzcyAqL1xudmFyIERhdGVIZWxwZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEYXRlSGVscGVyKCkge31cbiAgdmFyIF9wcm90byA9IERhdGVIZWxwZXIucHJvdG90eXBlO1xuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGN1cnJlbnQgdGltZSBpbiBcImRkZCBNTU0gRCBISDptbTpzcyBVVEMgWVlZWVwiIGZvcm1hdC5cbiAgICovXG4gIF9wcm90by5nZXROb3dTdHJpbmcgPSBmdW5jdGlvbiBnZXROb3dTdHJpbmcoKSB7XG4gICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIHdlZWtEYXkgPSB3ZWVrTmFtZXNbbm93LmdldFVUQ0RheSgpXTtcbiAgICB2YXIgbW9udGggPSBtb250aE5hbWVzW25vdy5nZXRVVENNb250aCgpXTtcbiAgICB2YXIgZGF5ID0gbm93LmdldFVUQ0RhdGUoKTtcbiAgICB2YXIgaG91cnMgPSBub3cuZ2V0VVRDSG91cnMoKTtcbiAgICBpZiAoaG91cnMgPCAxMCkge1xuICAgICAgaG91cnMgPSBcIjBcIiArIGhvdXJzO1xuICAgIH1cbiAgICB2YXIgbWludXRlcyA9IG5vdy5nZXRVVENNaW51dGVzKCk7XG4gICAgaWYgKG1pbnV0ZXMgPCAxMCkge1xuICAgICAgbWludXRlcyA9IFwiMFwiICsgbWludXRlcztcbiAgICB9XG4gICAgdmFyIHNlY29uZHMgPSBub3cuZ2V0VVRDU2Vjb25kcygpO1xuICAgIGlmIChzZWNvbmRzIDwgMTApIHtcbiAgICAgIHNlY29uZHMgPSBcIjBcIiArIHNlY29uZHM7XG4gICAgfVxuICAgIHZhciB5ZWFyID0gbm93LmdldFVUQ0Z1bGxZZWFyKCk7XG5cbiAgICAvLyBkZGQgTU1NIEQgSEg6bW06c3MgVVRDIFlZWVlcbiAgICB2YXIgZGF0ZU5vdyA9IHdlZWtEYXkgKyBcIiBcIiArIG1vbnRoICsgXCIgXCIgKyBkYXkgKyBcIiBcIiArIGhvdXJzICsgXCI6XCIgKyBtaW51dGVzICsgXCI6XCIgKyBzZWNvbmRzICsgXCIgVVRDIFwiICsgeWVhcjtcbiAgICByZXR1cm4gZGF0ZU5vdztcbiAgfTtcbiAgcmV0dXJuIERhdGVIZWxwZXI7XG59KCk7XG5leHBvcnQgeyBEYXRlSGVscGVyIGFzIGRlZmF1bHQgfTsiLCIvKiFcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuLyoqIEBjbGFzcyAqL1xudmFyIENvZ25pdG9Vc2VyQXR0cmlidXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQ29nbml0b1VzZXJBdHRyaWJ1dGUgb2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gTmFtZSBUaGUgcmVjb3JkJ3MgbmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZz19IFZhbHVlIFRoZSByZWNvcmQncyB2YWx1ZVxuICAgKi9cbiAgZnVuY3Rpb24gQ29nbml0b1VzZXJBdHRyaWJ1dGUoX3RlbXApIHtcbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgTmFtZSA9IF9yZWYuTmFtZSxcbiAgICAgIFZhbHVlID0gX3JlZi5WYWx1ZTtcbiAgICB0aGlzLk5hbWUgPSBOYW1lIHx8ICcnO1xuICAgIHRoaXMuVmFsdWUgPSBWYWx1ZSB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgcmVjb3JkJ3MgdmFsdWUuXG4gICAqL1xuICB2YXIgX3Byb3RvID0gQ29nbml0b1VzZXJBdHRyaWJ1dGUucHJvdG90eXBlO1xuICBfcHJvdG8uZ2V0VmFsdWUgPSBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5WYWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSByZWNvcmQncyB2YWx1ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSBuZXcgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtDb2duaXRvVXNlckF0dHJpYnV0ZX0gVGhlIHJlY29yZCBmb3IgbWV0aG9kIGNoYWluaW5nLlxuICAgKi87XG4gIF9wcm90by5zZXRWYWx1ZSA9IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5WYWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSByZWNvcmQncyBuYW1lLlxuICAgKi87XG4gIF9wcm90by5nZXROYW1lID0gZnVuY3Rpb24gZ2V0TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5OYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHJlY29yZCdzIG5hbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5ldyBuYW1lLlxuICAgKiBAcmV0dXJucyB7Q29nbml0b1VzZXJBdHRyaWJ1dGV9IFRoZSByZWNvcmQgZm9yIG1ldGhvZCBjaGFpbmluZy5cbiAgICovO1xuICBfcHJvdG8uc2V0TmFtZSA9IGZ1bmN0aW9uIHNldE5hbWUobmFtZSkge1xuICAgIHRoaXMuTmFtZSA9IG5hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlY29yZC5cbiAgICovO1xuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge29iamVjdH0gYSBmbGF0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJlY29yZC5cbiAgICovO1xuICBfcHJvdG8udG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBOYW1lOiB0aGlzLk5hbWUsXG4gICAgICBWYWx1ZTogdGhpcy5WYWx1ZVxuICAgIH07XG4gIH07XG4gIHJldHVybiBDb2duaXRvVXNlckF0dHJpYnV0ZTtcbn0oKTtcbmV4cG9ydCB7IENvZ25pdG9Vc2VyQXR0cmlidXRlIGFzIGRlZmF1bHQgfTsiLCIvKiFcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG52YXIgZGF0YU1lbW9yeSA9IHt9O1xuXG4vKiogQGNsYXNzICovXG5leHBvcnQgdmFyIE1lbW9yeVN0b3JhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBNZW1vcnlTdG9yYWdlKCkge31cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBzZXQgYSBzcGVjaWZpYyBpdGVtIGluIHN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIHRoZSBrZXkgZm9yIHRoZSBpdGVtXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZSAtIHRoZSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB2YWx1ZSB0aGF0IHdhcyBzZXRcbiAgICovXG4gIE1lbW9yeVN0b3JhZ2Uuc2V0SXRlbSA9IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgIGRhdGFNZW1vcnlba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiBkYXRhTWVtb3J5W2tleV07XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHNwZWNpZmljIGtleSBmcm9tIHN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIHRoZSBrZXkgZm9yIHRoZSBpdGVtXG4gICAqIFRoaXMgaXMgdXNlZCB0byBjbGVhciB0aGUgc3RvcmFnZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgZGF0YSBpdGVtXG4gICAqLztcbiAgTWVtb3J5U3RvcmFnZS5nZXRJdGVtID0gZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGFNZW1vcnksIGtleSkgPyBkYXRhTWVtb3J5W2tleV0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIHJlbW92ZSBhbiBpdGVtIGZyb20gc3RvcmFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gdGhlIGtleSBiZWluZyBzZXRcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHJldHVybiB0cnVlXG4gICAqLztcbiAgTWVtb3J5U3RvcmFnZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXkpIHtcbiAgICByZXR1cm4gZGVsZXRlIGRhdGFNZW1vcnlba2V5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gY2xlYXIgdGhlIHN0b3JhZ2VcbiAgICogQHJldHVybnMge3N0cmluZ30gbm90aGluZ1xuICAgKi87XG4gIE1lbW9yeVN0b3JhZ2UuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBkYXRhTWVtb3J5ID0ge307XG4gICAgcmV0dXJuIGRhdGFNZW1vcnk7XG4gIH07XG4gIHJldHVybiBNZW1vcnlTdG9yYWdlO1xufSgpO1xuXG4vKiogQGNsYXNzICovXG52YXIgU3RvcmFnZUhlbHBlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgc3RvcmFnZSBvYmplY3RcbiAgICogQHJldHVybnMge29iamVjdH0gdGhlIHN0b3JhZ2VcbiAgICovXG4gIGZ1bmN0aW9uIFN0b3JhZ2VIZWxwZXIoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuc3RvcmFnZVdpbmRvdyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgICB0aGlzLnN0b3JhZ2VXaW5kb3cuc2V0SXRlbSgnYXdzLmNvZ25pdG8udGVzdC1scycsIDEpO1xuICAgICAgdGhpcy5zdG9yYWdlV2luZG93LnJlbW92ZUl0ZW0oJ2F3cy5jb2duaXRvLnRlc3QtbHMnKTtcbiAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgIHRoaXMuc3RvcmFnZVdpbmRvdyA9IE1lbW9yeVN0b3JhZ2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byByZXR1cm4gdGhlIHN0b3JhZ2VcbiAgICogQHJldHVybnMge29iamVjdH0gdGhlIHN0b3JhZ2VcbiAgICovXG4gIHZhciBfcHJvdG8gPSBTdG9yYWdlSGVscGVyLnByb3RvdHlwZTtcbiAgX3Byb3RvLmdldFN0b3JhZ2UgPSBmdW5jdGlvbiBnZXRTdG9yYWdlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JhZ2VXaW5kb3c7XG4gIH07XG4gIHJldHVybiBTdG9yYWdlSGVscGVyO1xufSgpO1xuZXhwb3J0IHsgU3RvcmFnZUhlbHBlciBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2UodCwgbykge1xuICB0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLCB0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHQsIF9zZXRQcm90b3R5cGVPZih0LCBvKTtcbn1cbmZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIodCkge1xuICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgTWFwID8gbmV3IE1hcCgpIDogdm9pZCAwO1xuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIodCkge1xuICAgIGlmIChudWxsID09PSB0IHx8ICFfaXNOYXRpdmVGdW5jdGlvbih0KSkgcmV0dXJuIHQ7XG4gICAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO1xuICAgIGlmICh2b2lkIDAgIT09IHIpIHtcbiAgICAgIGlmIChyLmhhcyh0KSkgcmV0dXJuIHIuZ2V0KHQpO1xuICAgICAgci5zZXQodCwgV3JhcHBlcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFdyYXBwZXIoKSB7XG4gICAgICByZXR1cm4gX2NvbnN0cnVjdCh0LCBhcmd1bWVudHMsIF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuICAgIHJldHVybiBXcmFwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBXcmFwcGVyLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgICB9XG4gICAgfSksIF9zZXRQcm90b3R5cGVPZihXcmFwcGVyLCB0KTtcbiAgfSwgX3dyYXBOYXRpdmVTdXBlcih0KTtcbn1cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QodCwgZSwgcikge1xuICBpZiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpKSByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgdmFyIG8gPSBbbnVsbF07XG4gIG8ucHVzaC5hcHBseShvLCBlKTtcbiAgdmFyIHAgPSBuZXcgKHQuYmluZC5hcHBseSh0LCBvKSkoKTtcbiAgcmV0dXJuIHIgJiYgX3NldFByb3RvdHlwZU9mKHAsIHIucHJvdG90eXBlKSwgcDtcbn1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpO1xuICB9IGNhdGNoICh0KSB7fVxuICByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICAgIHJldHVybiAhIXQ7XG4gIH0pKCk7XG59XG5mdW5jdGlvbiBfaXNOYXRpdmVGdW5jdGlvbih0KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIC0xICE9PSBGdW5jdGlvbi50b1N0cmluZy5jYWxsKHQpLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpO1xuICB9IGNhdGNoIChuKSB7XG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdDtcbiAgfVxufVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKHQsIGUpIHtcbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiAodCwgZSkge1xuICAgIHJldHVybiB0Ll9fcHJvdG9fXyA9IGUsIHQ7XG4gIH0sIF9zZXRQcm90b3R5cGVPZih0LCBlKTtcbn1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZih0KSB7XG4gIHJldHVybiBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpO1xuICB9LCBfZ2V0UHJvdG90eXBlT2YodCk7XG59XG5pbXBvcnQgJ2lzb21vcnBoaWMtdW5mZXRjaCc7XG5pbXBvcnQgeyBnZXRBbXBsaWZ5VXNlckFnZW50IH0gZnJvbSAnLi9Vc2VyQWdlbnQnO1xudmFyIENvZ25pdG9FcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Vycm9yKSB7XG4gIGZ1bmN0aW9uIENvZ25pdG9FcnJvcihtZXNzYWdlLCBjb2RlLCBuYW1lLCBzdGF0dXNDb2RlKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF90aGlzID0gX0Vycm9yLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICBfdGhpcy5jb2RlID0gY29kZTtcbiAgICBfdGhpcy5uYW1lID0gbmFtZTtcbiAgICBfdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgX2luaGVyaXRzTG9vc2UoQ29nbml0b0Vycm9yLCBfRXJyb3IpO1xuICByZXR1cm4gQ29nbml0b0Vycm9yO1xufSgvKiNfX1BVUkVfXyovX3dyYXBOYXRpdmVTdXBlcihFcnJvcikpO1xuLyoqIEBjbGFzcyAqL1xudmFyIENsaWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEFXUyBDb2duaXRvIElkZW50aXR5IFByb3ZpZGVyIGNsaWVudCBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lvbiBBV1MgcmVnaW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmRwb2ludCBlbmRwb2ludFxuICAgKiBAcGFyYW0ge29iamVjdH0gZmV0Y2hPcHRpb25zIG9wdGlvbnMgZm9yIGZldGNoIEFQSSAob25seSBjcmVkZW50aWFscyBpcyBzdXBwb3J0ZWQpXG4gICAqL1xuICBmdW5jdGlvbiBDbGllbnQocmVnaW9uLCBlbmRwb2ludCwgZmV0Y2hPcHRpb25zKSB7XG4gICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50IHx8IFwiaHR0cHM6Ly9jb2duaXRvLWlkcC5cIiArIHJlZ2lvbiArIFwiLmFtYXpvbmF3cy5jb20vXCI7XG4gICAgdmFyIF9yZWYgPSBmZXRjaE9wdGlvbnMgfHwge30sXG4gICAgICBjcmVkZW50aWFscyA9IF9yZWYuY3JlZGVudGlhbHM7XG4gICAgdGhpcy5mZXRjaE9wdGlvbnMgPSBjcmVkZW50aWFscyA/IHtcbiAgICAgIGNyZWRlbnRpYWxzOiBjcmVkZW50aWFsc1xuICAgIH0gOiB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyBhbiB1bmF1dGhlbnRpY2F0ZWQgcmVxdWVzdCBvbiBBV1MgQ29nbml0byBJZGVudGl0eSBQcm92aWRlciBBUElcbiAgICogdXNpbmcgZmV0Y2hcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdGlvbiBBUEkgb3BlcmF0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgSW5wdXQgcGFyYW1ldGVyc1xuICAgKiBAcmV0dXJucyBQcm9taXNlPG9iamVjdD5cbiAgICovXG4gIHZhciBfcHJvdG8gPSBDbGllbnQucHJvdG90eXBlO1xuICBfcHJvdG8ucHJvbWlzaWZ5UmVxdWVzdCA9IGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3Qob3BlcmF0aW9uLCBwYXJhbXMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgX3RoaXMyLnJlcXVlc3Qob3BlcmF0aW9uLCBwYXJhbXMsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJlamVjdChuZXcgQ29nbml0b0Vycm9yKGVyci5tZXNzYWdlLCBlcnIuY29kZSwgZXJyLm5hbWUsIGVyci5zdGF0dXNDb2RlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIF9wcm90by5yZXF1ZXN0V2l0aFJldHJ5ID0gZnVuY3Rpb24gcmVxdWVzdFdpdGhSZXRyeShvcGVyYXRpb24sIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcbiAgICB2YXIgTUFYX0RFTEFZX0lOX01JTExJUyA9IDUgKiAxMDAwO1xuICAgIGppdHRlcmVkRXhwb25lbnRpYWxSZXRyeShmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICBfdGhpczMucmVxdWVzdChvcGVyYXRpb24sIHAsIGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZWooZXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSwgW3BhcmFtc10sIE1BWF9ERUxBWV9JTl9NSUxMSVMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgYW4gdW5hdXRoZW50aWNhdGVkIHJlcXVlc3Qgb24gQVdTIENvZ25pdG8gSWRlbnRpdHkgUHJvdmlkZXIgQVBJXG4gICAqIHVzaW5nIGZldGNoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gQVBJIG9wZXJhdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zIElucHV0IHBhcmFtZXRlcnNcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgY2FsbGVkIHdoZW4gYSByZXNwb25zZSBpcyByZXR1cm5lZFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8ucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3Qob3BlcmF0aW9uLCBwYXJhbXMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGhlYWRlcnMgPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtYW16LWpzb24tMS4xJyxcbiAgICAgICdYLUFtei1UYXJnZXQnOiBcIkFXU0NvZ25pdG9JZGVudGl0eVByb3ZpZGVyU2VydmljZS5cIiArIG9wZXJhdGlvbixcbiAgICAgICdYLUFtei1Vc2VyLUFnZW50JzogZ2V0QW1wbGlmeVVzZXJBZ2VudCgpLFxuICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tc3RvcmUnXG4gICAgfTtcbiAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZmV0Y2hPcHRpb25zLCB7XG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBtb2RlOiAnY29ycycsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG4gICAgfSk7XG4gICAgdmFyIHJlc3BvbnNlO1xuICAgIHZhciByZXNwb25zZUpzb25EYXRhO1xuICAgIGZldGNoKHRoaXMuZW5kcG9pbnQsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgIHJlc3BvbnNlID0gcmVzcDtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIC8vIElmIGVycm9yIGhhcHBlbnMgaGVyZSwgdGhlIHJlcXVlc3QgZmFpbGVkXG4gICAgICAvLyBpZiBpdCBpcyBUeXBlRXJyb3IgdGhyb3cgbmV0d29yayBlcnJvclxuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycjtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICByZXR1cm4gcmVzcC5qc29uKClbXCJjYXRjaFwiXShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH0pO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIC8vIHJldHVybiBwYXJzZWQgYm9keSBzdHJlYW1cbiAgICAgIGlmIChyZXNwb25zZS5vaykgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgcmVzcG9uc2VKc29uRGF0YSA9IGRhdGE7XG5cbiAgICAgIC8vIFRha2VuIGZyb20gYXdzLXNkay1qcy9saWIvcHJvdG9jb2wvanNvbi5qc1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlXG4gICAgICB2YXIgY29kZSA9IChkYXRhLl9fdHlwZSB8fCBkYXRhLmNvZGUpLnNwbGl0KCcjJykucG9wKCk7XG4gICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8IGRhdGEuTWVzc2FnZSB8fCBudWxsKTtcbiAgICAgIGVycm9yLm5hbWUgPSBjb2RlO1xuICAgICAgZXJyb3IuY29kZSA9IGNvZGU7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycikge1xuICAgICAgLy8gZmlyc3QgY2hlY2sgaWYgd2UgaGF2ZSBhIHNlcnZpY2UgZXJyb3JcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5oZWFkZXJzICYmIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFtem4tZXJyb3J0eXBlJykpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgY29kZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFtem4tZXJyb3J0eXBlJykuc3BsaXQoJzonKVswXTtcbiAgICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzID8gcmVzcG9uc2Uuc3RhdHVzLnRvU3RyaW5nKCkgOiBudWxsKTtcbiAgICAgICAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgICAgICAgICBlcnJvci5uYW1lID0gY29kZTtcbiAgICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gb3RoZXJ3aXNlIGNoZWNrIGlmIGVycm9yIGlzIE5ldHdvcmsgZXJyb3JcbiAgICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyLm1lc3NhZ2UgPT09ICdOZXR3b3JrIGVycm9yJykge1xuICAgICAgICBlcnIuY29kZSA9ICdOZXR3b3JrRXJyb3InO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiBDbGllbnQ7XG59KCk7XG5leHBvcnQgeyBDbGllbnQgYXMgZGVmYXVsdCB9O1xudmFyIGxvZ2dlciA9IHtcbiAgZGVidWc6IGZ1bmN0aW9uIGRlYnVnKCkge1xuICAgIC8vIEludGVudGlvbmFsbHkgYmxhbmsuIFRoaXMgcGFja2FnZSBkb2Vzbid0IGhhdmUgbG9nZ2luZ1xuICB9XG59O1xuXG4vKipcbiAqIEZvciBub3csIGFsbCBlcnJvcnMgYXJlIHJldHJ5YWJsZS5cbiAqL1xudmFyIE5vblJldHJ5YWJsZUVycm9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRXJyb3IyKSB7XG4gIGZ1bmN0aW9uIE5vblJldHJ5YWJsZUVycm9yKG1lc3NhZ2UpIHtcbiAgICB2YXIgX3RoaXM0O1xuICAgIF90aGlzNCA9IF9FcnJvcjIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIF90aGlzNC5ub25SZXRyeWFibGUgPSB0cnVlO1xuICAgIHJldHVybiBfdGhpczQ7XG4gIH1cbiAgX2luaGVyaXRzTG9vc2UoTm9uUmV0cnlhYmxlRXJyb3IsIF9FcnJvcjIpO1xuICByZXR1cm4gTm9uUmV0cnlhYmxlRXJyb3I7XG59KC8qI19fUFVSRV9fKi9fd3JhcE5hdGl2ZVN1cGVyKEVycm9yKSk7XG52YXIgaXNOb25SZXRyeWFibGVFcnJvciA9IGZ1bmN0aW9uIGlzTm9uUmV0cnlhYmxlRXJyb3Iob2JqKSB7XG4gIHZhciBrZXkgPSAnbm9uUmV0cnlhYmxlJztcbiAgcmV0dXJuIG9iaiAmJiBvYmpba2V5XTtcbn07XG5mdW5jdGlvbiByZXRyeShmdW5jdGlvblRvUmV0cnksIGFyZ3MsIGRlbGF5Rm4sIGF0dGVtcHQpIHtcbiAgaWYgKGF0dGVtcHQgPT09IHZvaWQgMCkge1xuICAgIGF0dGVtcHQgPSAxO1xuICB9XG4gIGlmICh0eXBlb2YgZnVuY3Rpb25Ub1JldHJ5ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgRXJyb3IoJ2Z1bmN0aW9uVG9SZXRyeSBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuICBsb2dnZXIuZGVidWcoZnVuY3Rpb25Ub1JldHJ5Lm5hbWUgKyBcIiBhdHRlbXB0ICNcIiArIGF0dGVtcHQgKyBcIiB3aXRoIGFyZ3M6IFwiICsgSlNPTi5zdHJpbmdpZnkoYXJncykpO1xuICByZXR1cm4gZnVuY3Rpb25Ub1JldHJ5LmFwcGx5KHZvaWQgMCwgYXJncylbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyKSB7XG4gICAgbG9nZ2VyLmRlYnVnKFwiZXJyb3Igb24gXCIgKyBmdW5jdGlvblRvUmV0cnkubmFtZSwgZXJyKTtcbiAgICBpZiAoaXNOb25SZXRyeWFibGVFcnJvcihlcnIpKSB7XG4gICAgICBsb2dnZXIuZGVidWcoZnVuY3Rpb25Ub1JldHJ5Lm5hbWUgKyBcIiBub24gcmV0cnlhYmxlIGVycm9yXCIsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIHZhciByZXRyeUluID0gZGVsYXlGbihhdHRlbXB0LCBhcmdzLCBlcnIpO1xuICAgIGxvZ2dlci5kZWJ1ZyhmdW5jdGlvblRvUmV0cnkubmFtZSArIFwiIHJldHJ5aW5nIGluIFwiICsgcmV0cnlJbiArIFwiIG1zXCIpO1xuICAgIGlmIChyZXRyeUluICE9PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQocmVzLCByZXRyeUluKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmV0cnkoZnVuY3Rpb25Ub1JldHJ5LCBhcmdzLCBkZWxheUZuLCBhdHRlbXB0ICsgMSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBqaXR0ZXJlZEJhY2tvZmYobWF4RGVsYXlNcykge1xuICB2YXIgQkFTRV9USU1FX01TID0gMTAwO1xuICB2YXIgSklUVEVSX0ZBQ1RPUiA9IDEwMDtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhdHRlbXB0KSB7XG4gICAgdmFyIGRlbGF5ID0gTWF0aC5wb3coMiwgYXR0ZW1wdCkgKiBCQVNFX1RJTUVfTVMgKyBKSVRURVJfRkFDVE9SICogTWF0aC5yYW5kb20oKTtcbiAgICByZXR1cm4gZGVsYXkgPiBtYXhEZWxheU1zID8gZmFsc2UgOiBkZWxheTtcbiAgfTtcbn1cbnZhciBNQVhfREVMQVlfTVMgPSA1ICogNjAgKiAxMDAwO1xuZnVuY3Rpb24gaml0dGVyZWRFeHBvbmVudGlhbFJldHJ5KGZ1bmN0aW9uVG9SZXRyeSwgYXJncywgbWF4RGVsYXlNcykge1xuICBpZiAobWF4RGVsYXlNcyA9PT0gdm9pZCAwKSB7XG4gICAgbWF4RGVsYXlNcyA9IE1BWF9ERUxBWV9NUztcbiAgfVxuICByZXR1cm4gcmV0cnkoZnVuY3Rpb25Ub1JldHJ5LCBhcmdzLCBqaXR0ZXJlZEJhY2tvZmYobWF4RGVsYXlNcykpO1xufSIsImltcG9ydCB7IGdldFVzZXJBZ2VudCB9IGZyb20gJy4vUGxhdGZvcm0nO1xuaW1wb3J0IHsgQVVUSF9DQVRFR09SWSB9IGZyb20gJy4vUGxhdGZvcm0vY29uc3RhbnRzJztcblxuLy8gY29uc3RydWN0b3JcbmZ1bmN0aW9uIFVzZXJBZ2VudCgpIHt9XG4vLyBwdWJsaWNcblVzZXJBZ2VudC5wcm90b3R5cGUudXNlckFnZW50ID0gZ2V0VXNlckFnZW50KCk7XG5leHBvcnQgdmFyIGFwcGVuZFRvQ29nbml0b1VzZXJBZ2VudCA9IGZ1bmN0aW9uIGFwcGVuZFRvQ29nbml0b1VzZXJBZ2VudChjb250ZW50KSB7XG4gIGlmICghY29udGVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoVXNlckFnZW50LnByb3RvdHlwZS51c2VyQWdlbnQgJiYgIVVzZXJBZ2VudC5wcm90b3R5cGUudXNlckFnZW50LmluY2x1ZGVzKGNvbnRlbnQpKSB7XG4gICAgVXNlckFnZW50LnByb3RvdHlwZS51c2VyQWdlbnQgPSBVc2VyQWdlbnQucHJvdG90eXBlLnVzZXJBZ2VudC5jb25jYXQoJyAnLCBjb250ZW50KTtcbiAgfVxuICBpZiAoIVVzZXJBZ2VudC5wcm90b3R5cGUudXNlckFnZW50IHx8IFVzZXJBZ2VudC5wcm90b3R5cGUudXNlckFnZW50ID09PSAnJykge1xuICAgIFVzZXJBZ2VudC5wcm90b3R5cGUudXNlckFnZW50ID0gY29udGVudDtcbiAgfVxufTtcbmV4cG9ydCB2YXIgYWRkQXV0aENhdGVnb3J5VG9Db2duaXRvVXNlckFnZW50ID0gZnVuY3Rpb24gYWRkQXV0aENhdGVnb3J5VG9Db2duaXRvVXNlckFnZW50KCkge1xuICBVc2VyQWdlbnQuY2F0ZWdvcnkgPSBBVVRIX0NBVEVHT1JZO1xufTtcbmV4cG9ydCB2YXIgYWRkRnJhbWV3b3JrVG9Db2duaXRvVXNlckFnZW50ID0gZnVuY3Rpb24gYWRkRnJhbWV3b3JrVG9Db2duaXRvVXNlckFnZW50KGZyYW1ld29yaykge1xuICBVc2VyQWdlbnQuZnJhbWV3b3JrID0gZnJhbWV3b3JrO1xufTtcbmV4cG9ydCB2YXIgZ2V0QW1wbGlmeVVzZXJBZ2VudCA9IGZ1bmN0aW9uIGdldEFtcGxpZnlVc2VyQWdlbnQoYWN0aW9uKSB7XG4gIHZhciB1YUNhdGVnb3J5QWN0aW9uID0gVXNlckFnZW50LmNhdGVnb3J5ID8gXCIgXCIgKyBVc2VyQWdlbnQuY2F0ZWdvcnkgOiAnJztcbiAgdmFyIHVhRnJhbWV3b3JrID0gVXNlckFnZW50LmZyYW1ld29yayA/IFwiIGZyYW1ld29yay9cIiArIFVzZXJBZ2VudC5mcmFtZXdvcmsgOiAnJztcbiAgdmFyIHVzZXJBZ2VudCA9IFwiXCIgKyBVc2VyQWdlbnQucHJvdG90eXBlLnVzZXJBZ2VudCArIHVhQ2F0ZWdvcnlBY3Rpb24gKyB1YUZyYW1ld29yaztcbiAgcmV0dXJuIHVzZXJBZ2VudDtcbn07XG5cbi8vIGNsYXNzIGZvciBkZWZpbmluZyB0aGUgYW16biB1c2VyLWFnZW50XG5leHBvcnQgZGVmYXVsdCBVc2VyQWdlbnQ7IiwiLyohXG4gKiBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IENsaWVudCBmcm9tICcuL0NsaWVudCc7XG5pbXBvcnQgQ29nbml0b1VzZXIgZnJvbSAnLi9Db2duaXRvVXNlcic7XG5pbXBvcnQgU3RvcmFnZUhlbHBlciBmcm9tICcuL1N0b3JhZ2VIZWxwZXInO1xudmFyIFVTRVJfUE9PTF9JRF9NQVhfTEVOR1RIID0gNTU7XG5cbi8qKiBAY2xhc3MgKi9cbnZhciBDb2duaXRvVXNlclBvb2wgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBDb2duaXRvVXNlclBvb2wgb2JqZWN0XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIENyZWF0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLlVzZXJQb29sSWQgQ29nbml0byB1c2VyIHBvb2wgaWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLkNsaWVudElkIFVzZXIgcG9vbCBhcHBsaWNhdGlvbiBjbGllbnQgaWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLmVuZHBvaW50IE9wdGlvbmFsIGN1c3RvbSBzZXJ2aWNlIGVuZHBvaW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YS5mZXRjaE9wdGlvbnMgT3B0aW9uYWwgb3B0aW9ucyBmb3IgZmV0Y2ggQVBJLlxuICAgKiAgICAgICAgKG9ubHkgY3JlZGVudGlhbHMgb3B0aW9uIGlzIHN1cHBvcnRlZClcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEuU3RvcmFnZSBPcHRpb25hbCBzdG9yYWdlIG9iamVjdC5cbiAgICogQHBhcmFtIHtib29sZWFufSBkYXRhLkFkdmFuY2VkU2VjdXJpdHlEYXRhQ29sbGVjdGlvbkZsYWcgT3B0aW9uYWw6XG4gICAqICAgICAgICBib29sZWFuIGZsYWcgaW5kaWNhdGluZyBpZiB0aGUgZGF0YSBjb2xsZWN0aW9uIGlzIGVuYWJsZWRcbiAgICogICAgICAgIHRvIHN1cHBvcnQgY29nbml0byBhZHZhbmNlZCBzZWN1cml0eSBmZWF0dXJlcy4gQnkgZGVmYXVsdCwgdGhpc1xuICAgKiAgICAgICAgZmxhZyBpcyBzZXQgdG8gdHJ1ZS5cbiAgICovXG4gIGZ1bmN0aW9uIENvZ25pdG9Vc2VyUG9vbChkYXRhLCB3cmFwUmVmcmVzaFNlc3Npb25DYWxsYmFjaykge1xuICAgIHZhciBfcmVmID0gZGF0YSB8fCB7fSxcbiAgICAgIFVzZXJQb29sSWQgPSBfcmVmLlVzZXJQb29sSWQsXG4gICAgICBDbGllbnRJZCA9IF9yZWYuQ2xpZW50SWQsXG4gICAgICBlbmRwb2ludCA9IF9yZWYuZW5kcG9pbnQsXG4gICAgICBmZXRjaE9wdGlvbnMgPSBfcmVmLmZldGNoT3B0aW9ucyxcbiAgICAgIEFkdmFuY2VkU2VjdXJpdHlEYXRhQ29sbGVjdGlvbkZsYWcgPSBfcmVmLkFkdmFuY2VkU2VjdXJpdHlEYXRhQ29sbGVjdGlvbkZsYWc7XG4gICAgaWYgKCFVc2VyUG9vbElkIHx8ICFDbGllbnRJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIFVzZXJQb29sSWQgYW5kIENsaWVudElkIGFyZSByZXF1aXJlZC4nKTtcbiAgICB9XG4gICAgaWYgKFVzZXJQb29sSWQubGVuZ3RoID4gVVNFUl9QT09MX0lEX01BWF9MRU5HVEggfHwgIS9eW1xcdy1dK19bMC05YS16QS1aXSskLy50ZXN0KFVzZXJQb29sSWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVXNlclBvb2xJZCBmb3JtYXQuJyk7XG4gICAgfVxuICAgIHZhciByZWdpb24gPSBVc2VyUG9vbElkLnNwbGl0KCdfJylbMF07XG4gICAgdGhpcy51c2VyUG9vbElkID0gVXNlclBvb2xJZDtcbiAgICB0aGlzLmNsaWVudElkID0gQ2xpZW50SWQ7XG4gICAgdGhpcy5jbGllbnQgPSBuZXcgQ2xpZW50KHJlZ2lvbiwgZW5kcG9pbnQsIGZldGNoT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBCeSBkZWZhdWx0LCBBZHZhbmNlZFNlY3VyaXR5RGF0YUNvbGxlY3Rpb25GbGFnIGlzIHNldCB0byB0cnVlLFxuICAgICAqIGlmIG5vIGlucHV0IHZhbHVlIGlzIHByb3ZpZGVkLlxuICAgICAqL1xuICAgIHRoaXMuYWR2YW5jZWRTZWN1cml0eURhdGFDb2xsZWN0aW9uRmxhZyA9IEFkdmFuY2VkU2VjdXJpdHlEYXRhQ29sbGVjdGlvbkZsYWcgIT09IGZhbHNlO1xuICAgIHRoaXMuc3RvcmFnZSA9IGRhdGEuU3RvcmFnZSB8fCBuZXcgU3RvcmFnZUhlbHBlcigpLmdldFN0b3JhZ2UoKTtcbiAgICBpZiAod3JhcFJlZnJlc2hTZXNzaW9uQ2FsbGJhY2spIHtcbiAgICAgIHRoaXMud3JhcFJlZnJlc2hTZXNzaW9uQ2FsbGJhY2sgPSB3cmFwUmVmcmVzaFNlc3Npb25DYWxsYmFjaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHVzZXIgcG9vbCBpZFxuICAgKi9cbiAgdmFyIF9wcm90byA9IENvZ25pdG9Vc2VyUG9vbC5wcm90b3R5cGU7XG4gIF9wcm90by5nZXRVc2VyUG9vbElkID0gZnVuY3Rpb24gZ2V0VXNlclBvb2xJZCgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyUG9vbElkO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSB1c2VyIHBvb2wgbmFtZVxuICAgKi87XG4gIF9wcm90by5nZXRVc2VyUG9vbE5hbWUgPSBmdW5jdGlvbiBnZXRVc2VyUG9vbE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VXNlclBvb2xJZCgpLnNwbGl0KCdfJylbMV07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGNsaWVudCBpZFxuICAgKi87XG4gIF9wcm90by5nZXRDbGllbnRJZCA9IGZ1bmN0aW9uIGdldENsaWVudElkKCkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudElkO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtvYmplY3R9IFNpZ25VcFJlc3VsdFxuICAgKiBAcHJvcGVydHkge0NvZ25pdG9Vc2VyfSB1c2VyIE5ldyB1c2VyLlxuICAgKiBAcHJvcGVydHkge2Jvb2x9IHVzZXJDb25maXJtZWQgSWYgdGhlIHVzZXIgaXMgYWxyZWFkeSBjb25maXJtZWQuXG4gICAqL1xuICAvKipcbiAgICogbWV0aG9kIGZvciBzaWduaW5nIHVwIGEgdXNlclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcm5hbWUgVXNlcidzIHVzZXJuYW1lLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmQgUGxhaW4tdGV4dCBpbml0aWFsIHBhc3N3b3JkIGVudGVyZWQgYnkgdXNlci5cbiAgICogQHBhcmFtIHsoQXR0cmlidXRlQXJnW10pPX0gdXNlckF0dHJpYnV0ZXMgTmV3IHVzZXIgYXR0cmlidXRlcy5cbiAgICogQHBhcmFtIHsoQXR0cmlidXRlQXJnW10pPX0gdmFsaWRhdGlvbkRhdGEgQXBwbGljYXRpb24gbWV0YWRhdGEuXG4gICAqIEBwYXJhbSB7KEF0dHJpYnV0ZUFyZ1tdKT19IGNsaWVudE1ldGFkYXRhIENsaWVudCBtZXRhZGF0YS5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8U2lnblVwUmVzdWx0Pn0gY2FsbGJhY2sgQ2FsbGVkIG9uIGVycm9yIG9yIHdpdGggdGhlIG5ldyB1c2VyLlxuICAgKiBAcGFyYW0ge0NsaWVudE1ldGFkYXRhfSBjbGllbnRNZXRhZGF0YSBvYmplY3Qgd2hpY2ggaXMgcGFzc2VkIGZyb20gY2xpZW50IHRvIENvZ25pdG8gTGFtYmRhIHRyaWdnZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLnNpZ25VcCA9IGZ1bmN0aW9uIHNpZ25VcCh1c2VybmFtZSwgcGFzc3dvcmQsIHVzZXJBdHRyaWJ1dGVzLCB2YWxpZGF0aW9uRGF0YSwgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgVXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgUGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgVXNlckF0dHJpYnV0ZXM6IHVzZXJBdHRyaWJ1dGVzLFxuICAgICAgVmFsaWRhdGlvbkRhdGE6IHZhbGlkYXRpb25EYXRhLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICBpZiAodGhpcy5nZXRVc2VyQ29udGV4dERhdGEodXNlcm5hbWUpKSB7XG4gICAgICBqc29uUmVxLlVzZXJDb250ZXh0RGF0YSA9IHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKHVzZXJuYW1lKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnU2lnblVwJywganNvblJlcSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb2duaXRvVXNlciA9IHtcbiAgICAgICAgVXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICBQb29sOiBfdGhpcyxcbiAgICAgICAgU3RvcmFnZTogX3RoaXMuc3RvcmFnZVxuICAgICAgfTtcbiAgICAgIHZhciByZXR1cm5EYXRhID0ge1xuICAgICAgICB1c2VyOiBuZXcgQ29nbml0b1VzZXIoY29nbml0b1VzZXIpLFxuICAgICAgICB1c2VyQ29uZmlybWVkOiBkYXRhLlVzZXJDb25maXJtZWQsXG4gICAgICAgIHVzZXJTdWI6IGRhdGEuVXNlclN1YixcbiAgICAgICAgY29kZURlbGl2ZXJ5RGV0YWlsczogZGF0YS5Db2RlRGVsaXZlcnlEZXRhaWxzXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJldHVybkRhdGEpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIG1ldGhvZCBmb3IgZ2V0dGluZyB0aGUgY3VycmVudCB1c2VyIG9mIHRoZSBhcHBsaWNhdGlvbiBmcm9tIHRoZSBsb2NhbCBzdG9yYWdlXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb2duaXRvVXNlcn0gdGhlIHVzZXIgcmV0cmlldmVkIGZyb20gc3RvcmFnZVxuICAgKi87XG4gIF9wcm90by5nZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCkge1xuICAgIHZhciBsYXN0VXNlcktleSA9IFwiQ29nbml0b0lkZW50aXR5U2VydmljZVByb3ZpZGVyLlwiICsgdGhpcy5jbGllbnRJZCArIFwiLkxhc3RBdXRoVXNlclwiO1xuICAgIHZhciBsYXN0QXV0aFVzZXIgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShsYXN0VXNlcktleSk7XG4gICAgaWYgKGxhc3RBdXRoVXNlcikge1xuICAgICAgdmFyIGNvZ25pdG9Vc2VyID0ge1xuICAgICAgICBVc2VybmFtZTogbGFzdEF1dGhVc2VyLFxuICAgICAgICBQb29sOiB0aGlzLFxuICAgICAgICBTdG9yYWdlOiB0aGlzLnN0b3JhZ2VcbiAgICAgIH07XG4gICAgICByZXR1cm4gbmV3IENvZ25pdG9Vc2VyKGNvZ25pdG9Vc2VyKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZW5jb2RlZCBkYXRhIHN0cmluZyB1c2VkIGZvciBjb2duaXRvIGFkdmFuY2VkIHNlY3VyaXR5IGZlYXR1cmUuXG4gICAqIFRoaXMgd291bGQgYmUgZ2VuZXJhdGVkIG9ubHkgd2hlbiBkZXZlbG9wZXIgaGFzIGluY2x1ZGVkIHRoZSBKUyB1c2VkIGZvciBjb2xsZWN0aW5nIHRoZVxuICAgKiBkYXRhIG9uIHRoZWlyIGNsaWVudC4gUGxlYXNlIHJlZmVyIHRvIGRvY3VtZW50YXRpb24gdG8ga25vdyBtb3JlIGFib3V0IHVzaW5nIEFkdmFuY2VkU2VjdXJpdHlcbiAgICogZmVhdHVyZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJuYW1lIHRoZSB1c2VybmFtZSBmb3IgdGhlIGNvbnRleHQgZGF0YVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgdXNlciBjb250ZXh0IGRhdGFcbiAgICoqLztcbiAgX3Byb3RvLmdldFVzZXJDb250ZXh0RGF0YSA9IGZ1bmN0aW9uIGdldFVzZXJDb250ZXh0RGF0YSh1c2VybmFtZSkge1xuICAgIGlmICh0eXBlb2YgQW1hem9uQ29nbml0b0FkdmFuY2VkU2VjdXJpdHlEYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICB2YXIgYW1hem9uQ29nbml0b0FkdmFuY2VkU2VjdXJpdHlEYXRhQ29uc3QgPSBBbWF6b25Db2duaXRvQWR2YW5jZWRTZWN1cml0eURhdGE7XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xuXG4gICAgaWYgKHRoaXMuYWR2YW5jZWRTZWN1cml0eURhdGFDb2xsZWN0aW9uRmxhZykge1xuICAgICAgdmFyIGFkdmFuY2VkU2VjdXJpdHlEYXRhID0gYW1hem9uQ29nbml0b0FkdmFuY2VkU2VjdXJpdHlEYXRhQ29uc3QuZ2V0RGF0YSh1c2VybmFtZSwgdGhpcy51c2VyUG9vbElkLCB0aGlzLmNsaWVudElkKTtcbiAgICAgIGlmIChhZHZhbmNlZFNlY3VyaXR5RGF0YSkge1xuICAgICAgICB2YXIgdXNlckNvbnRleHREYXRhID0ge1xuICAgICAgICAgIEVuY29kZWREYXRhOiBhZHZhbmNlZFNlY3VyaXR5RGF0YVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdXNlckNvbnRleHREYXRhO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH07XG4gIHJldHVybiBDb2duaXRvVXNlclBvb2w7XG59KCk7XG5leHBvcnQgeyBDb2duaXRvVXNlclBvb2wgYXMgZGVmYXVsdCB9OyIsImltcG9ydCAqIGFzIENvb2tpZXMgZnJvbSAnanMtY29va2llJztcblxuLyoqIEBjbGFzcyAqL1xudmFyIENvb2tpZVN0b3JhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBDb29raWVTdG9yYWdlIG9iamVjdFxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSBDcmVhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YS5kb21haW4gQ29va2llcyBkb21haW4gKGRlZmF1bHQ6IGRvbWFpbiBvZiB0aGUgcGFnZVxuICAgKiBcdFx0XHRcdHdoZXJlIHRoZSBjb29raWUgd2FzIGNyZWF0ZWQsIGV4Y2x1ZGluZyBzdWJkb21haW5zKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YS5wYXRoIENvb2tpZXMgcGF0aCAoZGVmYXVsdDogJy8nKVxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGRhdGEuZXhwaXJlcyBDb29raWUgZXhwaXJhdGlvbiAoaW4gZGF5cywgZGVmYXVsdDogMzY1KVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRhdGEuc2VjdXJlIENvb2tpZSBzZWN1cmUgZmxhZyAoZGVmYXVsdDogdHJ1ZSlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEuc2FtZVNpdGUgQ29va2llIHJlcXVlc3QgYmVoYXZpb3IgKGRlZmF1bHQ6IG51bGwpXG4gICAqL1xuICBmdW5jdGlvbiBDb29raWVTdG9yYWdlKGRhdGEpIHtcbiAgICBpZiAoZGF0YSA9PT0gdm9pZCAwKSB7XG4gICAgICBkYXRhID0ge307XG4gICAgfVxuICAgIGlmIChkYXRhLmRvbWFpbikge1xuICAgICAgdGhpcy5kb21haW4gPSBkYXRhLmRvbWFpbjtcbiAgICB9XG4gICAgaWYgKGRhdGEucGF0aCkge1xuICAgICAgdGhpcy5wYXRoID0gZGF0YS5wYXRoO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBhdGggPSAnLyc7XG4gICAgfVxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwgJ2V4cGlyZXMnKSkge1xuICAgICAgdGhpcy5leHBpcmVzID0gZGF0YS5leHBpcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV4cGlyZXMgPSAzNjU7XG4gICAgfVxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwgJ3NlY3VyZScpKSB7XG4gICAgICB0aGlzLnNlY3VyZSA9IGRhdGEuc2VjdXJlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlY3VyZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwgJ3NhbWVTaXRlJykpIHtcbiAgICAgIGlmICghWydzdHJpY3QnLCAnbGF4JywgJ25vbmUnXS5pbmNsdWRlcyhkYXRhLnNhbWVTaXRlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzYW1lU2l0ZSB2YWx1ZSBvZiBjb29raWVTdG9yYWdlIG11c3QgYmUgXCJsYXhcIiwgXCJzdHJpY3RcIiBvciBcIm5vbmVcIi4nKTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLnNhbWVTaXRlID09PSAnbm9uZScgJiYgIXRoaXMuc2VjdXJlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc2FtZVNpdGUgPSBOb25lIHJlcXVpcmVzIHRoZSBTZWN1cmUgYXR0cmlidXRlIGluIGxhdGVzdCBicm93c2VyIHZlcnNpb25zLicpO1xuICAgICAgfVxuICAgICAgdGhpcy5zYW1lU2l0ZSA9IGRhdGEuc2FtZVNpdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2FtZVNpdGUgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gc2V0IGEgc3BlY2lmaWMgaXRlbSBpbiBzdG9yYWdlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSB0aGUga2V5IGZvciB0aGUgaXRlbVxuICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWUgLSB0aGUgdmFsdWVcbiAgICogQHJldHVybnMge3N0cmluZ30gdmFsdWUgdGhhdCB3YXMgc2V0XG4gICAqL1xuICB2YXIgX3Byb3RvID0gQ29va2llU3RvcmFnZS5wcm90b3R5cGU7XG4gIF9wcm90by5zZXRJdGVtID0gZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBwYXRoOiB0aGlzLnBhdGgsXG4gICAgICBleHBpcmVzOiB0aGlzLmV4cGlyZXMsXG4gICAgICBkb21haW46IHRoaXMuZG9tYWluLFxuICAgICAgc2VjdXJlOiB0aGlzLnNlY3VyZVxuICAgIH07XG4gICAgaWYgKHRoaXMuc2FtZVNpdGUpIHtcbiAgICAgIG9wdGlvbnMuc2FtZVNpdGUgPSB0aGlzLnNhbWVTaXRlO1xuICAgIH1cbiAgICBDb29raWVzLnNldChrZXksIHZhbHVlLCBvcHRpb25zKTtcbiAgICByZXR1cm4gQ29va2llcy5nZXQoa2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgc3BlY2lmaWMga2V5IGZyb20gc3RvcmFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gdGhlIGtleSBmb3IgdGhlIGl0ZW1cbiAgICogVGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBzdG9yYWdlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBkYXRhIGl0ZW1cbiAgICovO1xuICBfcHJvdG8uZ2V0SXRlbSA9IGZ1bmN0aW9uIGdldEl0ZW0oa2V5KSB7XG4gICAgcmV0dXJuIENvb2tpZXMuZ2V0KGtleSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIHJlbW92ZSBhbiBpdGVtIGZyb20gc3RvcmFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gdGhlIGtleSBiZWluZyBzZXRcbiAgICogQHJldHVybnMge3N0cmluZ30gdmFsdWUgLSB2YWx1ZSB0aGF0IHdhcyBkZWxldGVkXG4gICAqLztcbiAgX3Byb3RvLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiByZW1vdmVJdGVtKGtleSkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgZXhwaXJlczogdGhpcy5leHBpcmVzLFxuICAgICAgZG9tYWluOiB0aGlzLmRvbWFpbixcbiAgICAgIHNlY3VyZTogdGhpcy5zZWN1cmVcbiAgICB9O1xuICAgIGlmICh0aGlzLnNhbWVTaXRlKSB7XG4gICAgICBvcHRpb25zLnNhbWVTaXRlID0gdGhpcy5zYW1lU2l0ZTtcbiAgICB9XG4gICAgcmV0dXJuIENvb2tpZXMucmVtb3ZlKGtleSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBzdG9yYWdlIG9mIG9wdGlvbmFsXG4gICAqIGl0ZW1zIHRoYXQgd2VyZSBwcmV2aW91c2x5IHNldFxuICAgKiBAcmV0dXJucyB7fSBhbiBlbXB0eSBvYmplY3RcbiAgICovO1xuICBfcHJvdG8uY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICB2YXIgY29va2llcyA9IENvb2tpZXMuZ2V0KCk7XG4gICAgdmFyIG51bUtleXMgPSBPYmplY3Qua2V5cyhjb29raWVzKS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG51bUtleXM7ICsraW5kZXgpIHtcbiAgICAgIHRoaXMucmVtb3ZlSXRlbShPYmplY3Qua2V5cyhjb29raWVzKVtpbmRleF0pO1xuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH07XG4gIHJldHVybiBDb29raWVTdG9yYWdlO1xufSgpO1xuZXhwb3J0IHsgQ29va2llU3RvcmFnZSBhcyBkZWZhdWx0IH07IiwiLyoqXG4gKiBUaGlzIHNlcnZlcyBhcyBhIGJ1aWxkIHRpbWUgZmxhZyB0aGF0IHdpbGwgYmUgdHJ1ZSBieSBkZWZhdWx0LCBidXQgZmFsc2UgaW4gbm9uLWRlYnVnIGJ1aWxkcyBvciBpZiB1c2VycyByZXBsYWNlIGBfX1NFTlRSWV9ERUJVR19fYCBpbiB0aGVpciBnZW5lcmF0ZWQgY29kZS5cbiAqXG4gKiBBVFRFTlRJT046IFRoaXMgY29uc3RhbnQgbXVzdCBuZXZlciBjcm9zcyBwYWNrYWdlIGJvdW5kYXJpZXMgKGkuZS4gYmUgZXhwb3J0ZWQpIHRvIGd1YXJhbnRlZSB0aGF0IGl0IGNhbiBiZSB1c2VkIGZvciB0cmVlIHNoYWtpbmcuXG4gKi9cbmNvbnN0IERFQlVHX0JVSUxEID0gdHlwZW9mIF9fU0VOVFJZX0RFQlVHX18gPT09ICd1bmRlZmluZWQnIHx8IF9fU0VOVFJZX0RFQlVHX187XG5leHBvcnQgeyBERUJVR19CVUlMRCB9O1xuIiwiLyoqIEludGVybmFsIGdsb2JhbCB3aXRoIGNvbW1vbiBwcm9wZXJ0aWVzIGFuZCBTZW50cnkgZXh0ZW5zaW9ucyAgKi9cblxuLyoqIEdldCdzIHRoZSBnbG9iYWwgb2JqZWN0IGZvciB0aGUgY3VycmVudCBKYXZhU2NyaXB0IHJ1bnRpbWUgKi9cbmNvbnN0IEdMT0JBTF9PQkogPSBnbG9iYWxUaGlzO1xuZXhwb3J0IHsgR0xPQkFMX09CSiB9O1xuIiwiLy8gVGhpcyBpcyBhIG1hZ2ljIHN0cmluZyByZXBsYWNlZCBieSByb2xsdXBcblxuY29uc3QgU0RLX1ZFUlNJT04gPSBcIjkuMzguMFwiO1xuZXhwb3J0IHsgU0RLX1ZFUlNJT04gfTtcbiIsImltcG9ydCB7IFNES19WRVJTSU9OIH0gZnJvbSAnLi91dGlscy92ZXJzaW9uLmpzJztcbmltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICcuL3V0aWxzL3dvcmxkd2lkZS5qcyc7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgZ2xvYmFsbHkgYWNjZXNzaWJsZSBwcm9wZXJ0aWVzIGFuZCBtYWludGFpbnMgYSBzY29wZSBzdGFjay5cbiAqIEBoaWRkZW5cbiAqL1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGdsb2JhbCBzaGltIHJlZ2lzdHJ5LlxuICpcbiAqIEZJWE1FOiBUaGlzIGZ1bmN0aW9uIGlzIHByb2JsZW1hdGljLCBiZWNhdXNlIGRlc3BpdGUgYWx3YXlzIHJldHVybmluZyBhIHZhbGlkIENhcnJpZXIsXG4gKiBpdCBoYXMgYW4gb3B0aW9uYWwgYF9fU0VOVFJZX19gIHByb3BlcnR5LCB3aGljaCB0aGVuIGluIHR1cm4gcmVxdWlyZXMgdXMgdG8gYWx3YXlzIHBlcmZvcm0gYW4gdW5uZWNlc3NhcnkgY2hlY2tcbiAqIGF0IHRoZSBjYWxsLXNpdGUuIFdlIGFsd2F5cyBhY2Nlc3MgdGhlIGNhcnJpZXIgdGhyb3VnaCB0aGlzIGZ1bmN0aW9uLCBzbyB3ZSBjYW4gZ3VhcmFudGVlIHRoYXQgYF9fU0VOVFJZX19gIGlzIHRoZXJlLlxuICoqL1xuZnVuY3Rpb24gZ2V0TWFpbkNhcnJpZXIoKSB7XG4gIC8vIFRoaXMgZW5zdXJlcyBhIFNlbnRyeSBjYXJyaWVyIGV4aXN0c1xuICBnZXRTZW50cnlDYXJyaWVyKEdMT0JBTF9PQkopO1xuICByZXR1cm4gR0xPQkFMX09CSjtcbn1cblxuLyoqIFdpbGwgZWl0aGVyIGdldCB0aGUgZXhpc3Rpbmcgc2VudHJ5IGNhcnJpZXIsIG9yIGNyZWF0ZSBhIG5ldyBvbmUuICovXG5mdW5jdGlvbiBnZXRTZW50cnlDYXJyaWVyKGNhcnJpZXIpIHtcbiAgY29uc3QgX19TRU5UUllfXyA9IGNhcnJpZXIuX19TRU5UUllfXyA9IGNhcnJpZXIuX19TRU5UUllfXyB8fCB7fTtcblxuICAvLyBGb3Igbm93OiBGaXJzdCBTREsgdGhhdCBzZXRzIHRoZSAudmVyc2lvbiBwcm9wZXJ0eSB3aW5zXG4gIF9fU0VOVFJZX18udmVyc2lvbiA9IF9fU0VOVFJZX18udmVyc2lvbiB8fCBTREtfVkVSU0lPTjtcblxuICAvLyBJbnRlbnRpb25hbGx5IHBvcHVsYXRpbmcgYW5kIHJldHVybmluZyB0aGUgdmVyc2lvbiBvZiBcInRoaXNcIiBTREsgaW5zdGFuY2VcbiAgLy8gcmF0aGVyIHRoYW4gd2hhdCdzIHNldCBpbiAudmVyc2lvbiBzbyB0aGF0IFwidGhpc1wiIFNESyBhbHdheXMgZ2V0cyBpdHMgY2FycmllclxuICByZXR1cm4gX19TRU5UUllfX1tTREtfVkVSU0lPTl0gPSBfX1NFTlRSWV9fW1NES19WRVJTSU9OXSB8fCB7fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZ2xvYmFsIHNpbmdsZXRvbiBjb250YWluZWQgaW4gdGhlIGdsb2JhbCBgX19TRU5UUllfX1tdYCBvYmplY3QuXG4gKlxuICogSWYgdGhlIHNpbmdsZXRvbiBkb2Vzbid0IGFscmVhZHkgZXhpc3QgaW4gYF9fU0VOVFJZX19gLCBpdCB3aWxsIGJlIGNyZWF0ZWQgdXNpbmcgdGhlIGdpdmVuIGZhY3RvcnlcbiAqIGZ1bmN0aW9uIGFuZCBhZGRlZCB0byB0aGUgYF9fU0VOVFJZX19gIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gbmFtZSBuYW1lIG9mIHRoZSBnbG9iYWwgc2luZ2xldG9uIG9uIF9fU0VOVFJZX19cbiAqIEBwYXJhbSBjcmVhdG9yIGNyZWF0b3IgRmFjdG9yeSBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIHNpbmdsZXRvbiBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3Qgb24gYF9fU0VOVFJZX19gXG4gKiBAcGFyYW0gb2JqIChPcHRpb25hbCkgVGhlIGdsb2JhbCBvYmplY3Qgb24gd2hpY2ggdG8gbG9vayBmb3IgYF9fU0VOVFJZX19gLCBpZiBub3QgYEdMT0JBTF9PQkpgJ3MgcmV0dXJuIHZhbHVlXG4gKiBAcmV0dXJucyB0aGUgc2luZ2xldG9uXG4gKi9cbmZ1bmN0aW9uIGdldEdsb2JhbFNpbmdsZXRvbihuYW1lLCBjcmVhdG9yLCBvYmogPSBHTE9CQUxfT0JKKSB7XG4gIGNvbnN0IF9fU0VOVFJZX18gPSBvYmouX19TRU5UUllfXyA9IG9iai5fX1NFTlRSWV9fIHx8IHt9O1xuICBjb25zdCBjYXJyaWVyID0gX19TRU5UUllfX1tTREtfVkVSU0lPTl0gPSBfX1NFTlRSWV9fW1NES19WRVJTSU9OXSB8fCB7fTtcbiAgLy8gTm90ZTogV2UgZG8gbm90IHdhbnQgdG8gc2V0IGBjYXJyaWVyLnZlcnNpb25gIGhlcmUsIGFzIHRoaXMgbWF5IGJlIGNhbGxlZCBiZWZvcmUgYW55IGBpbml0YCBpcyBjYWxsZWQsIGUuZy4gZm9yIHRoZSBkZWZhdWx0IHNjb3Blc1xuICByZXR1cm4gY2FycmllcltuYW1lXSB8fCAoY2FycmllcltuYW1lXSA9IGNyZWF0b3IoKSk7XG59XG5leHBvcnQgeyBnZXRHbG9iYWxTaW5nbGV0b24sIGdldE1haW5DYXJyaWVyLCBnZXRTZW50cnlDYXJyaWVyIH07XG4iLCJpbXBvcnQgeyBnZXRHbG9iYWxTaW5nbGV0b24gfSBmcm9tICcuLi9jYXJyaWVyLmpzJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgR0xPQkFMX09CSiB9IGZyb20gJy4vd29ybGR3aWRlLmpzJztcblxuLyoqIEEgU2VudHJ5IExvZ2dlciBpbnN0YW5jZS4gKi9cblxuY29uc3QgQ09OU09MRV9MRVZFTFMgPSBbJ2RlYnVnJywgJ2luZm8nLCAnd2FybicsICdlcnJvcicsICdsb2cnLCAnYXNzZXJ0JywgJ3RyYWNlJ107XG5cbi8qKiBQcmVmaXggZm9yIGxvZ2dpbmcgc3RyaW5ncyAqL1xuY29uc3QgUFJFRklYID0gJ1NlbnRyeSBMb2dnZXIgJztcblxuLyoqIFRoaXMgbWF5IGJlIG11dGF0ZWQgYnkgdGhlIGNvbnNvbGUgaW5zdHJ1bWVudGF0aW9uLiAqL1xuY29uc3Qgb3JpZ2luYWxDb25zb2xlTWV0aG9kcyA9IHt9O1xuXG4vKipcbiAqIFRlbXBvcmFyaWx5IGRpc2FibGUgc2VudHJ5IGNvbnNvbGUgaW5zdHJ1bWVudGF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIHJ1biBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBgY29uc29sZWAgbWVzc2FnZXNcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRzIG9mIHRoZSBjYWxsYmFja1xuICovXG5mdW5jdGlvbiBjb25zb2xlU2FuZGJveChjYWxsYmFjaykge1xuICBpZiAoISgnY29uc29sZScgaW4gR0xPQkFMX09CSikpIHtcbiAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgfVxuICBjb25zdCBjb25zb2xlID0gR0xPQkFMX09CSi5jb25zb2xlO1xuICBjb25zdCB3cmFwcGVkRnVuY3MgPSB7fTtcbiAgY29uc3Qgd3JhcHBlZExldmVscyA9IE9iamVjdC5rZXlzKG9yaWdpbmFsQ29uc29sZU1ldGhvZHMpO1xuXG4gIC8vIFJlc3RvcmUgYWxsIHdyYXBwZWQgY29uc29sZSBtZXRob2RzXG4gIHdyYXBwZWRMZXZlbHMuZm9yRWFjaChsZXZlbCA9PiB7XG4gICAgY29uc3Qgb3JpZ2luYWxDb25zb2xlTWV0aG9kID0gb3JpZ2luYWxDb25zb2xlTWV0aG9kc1tsZXZlbF07XG4gICAgd3JhcHBlZEZ1bmNzW2xldmVsXSA9IGNvbnNvbGVbbGV2ZWxdO1xuICAgIGNvbnNvbGVbbGV2ZWxdID0gb3JpZ2luYWxDb25zb2xlTWV0aG9kO1xuICB9KTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBSZXZlcnQgcmVzdG9yYXRpb24gdG8gd3JhcHBlZCBzdGF0ZVxuICAgIHdyYXBwZWRMZXZlbHMuZm9yRWFjaChsZXZlbCA9PiB7XG4gICAgICBjb25zb2xlW2xldmVsXSA9IHdyYXBwZWRGdW5jc1tsZXZlbF07XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgX2dldExvZ2dlclNldHRpbmdzKCkuZW5hYmxlZCA9IHRydWU7XG59XG5mdW5jdGlvbiBkaXNhYmxlKCkge1xuICBfZ2V0TG9nZ2VyU2V0dGluZ3MoKS5lbmFibGVkID0gZmFsc2U7XG59XG5mdW5jdGlvbiBpc0VuYWJsZWQoKSB7XG4gIHJldHVybiBfZ2V0TG9nZ2VyU2V0dGluZ3MoKS5lbmFibGVkO1xufVxuZnVuY3Rpb24gbG9nKC4uLmFyZ3MpIHtcbiAgX21heWJlTG9nKCdsb2cnLCAuLi5hcmdzKTtcbn1cbmZ1bmN0aW9uIGluZm8oLi4uYXJncykge1xuICBfbWF5YmVMb2coJ2luZm8nLCAuLi5hcmdzKTtcbn1cbmZ1bmN0aW9uIHdhcm4oLi4uYXJncykge1xuICBfbWF5YmVMb2coJ3dhcm4nLCAuLi5hcmdzKTtcbn1cbmZ1bmN0aW9uIGVycm9yKC4uLmFyZ3MpIHtcbiAgX21heWJlTG9nKCdlcnJvcicsIC4uLmFyZ3MpO1xufVxuZnVuY3Rpb24gX2RlYnVnKC4uLmFyZ3MpIHtcbiAgX21heWJlTG9nKCdkZWJ1ZycsIC4uLmFyZ3MpO1xufVxuZnVuY3Rpb24gYXNzZXJ0KC4uLmFyZ3MpIHtcbiAgX21heWJlTG9nKCdhc3NlcnQnLCAuLi5hcmdzKTtcbn1cbmZ1bmN0aW9uIHRyYWNlKC4uLmFyZ3MpIHtcbiAgX21heWJlTG9nKCd0cmFjZScsIC4uLmFyZ3MpO1xufVxuZnVuY3Rpb24gX21heWJlTG9nKGxldmVsLCAuLi5hcmdzKSB7XG4gIGlmICghREVCVUdfQlVJTEQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGlzRW5hYmxlZCgpKSB7XG4gICAgY29uc29sZVNhbmRib3goKCkgPT4ge1xuICAgICAgR0xPQkFMX09CSi5jb25zb2xlW2xldmVsXShgJHtQUkVGSVh9WyR7bGV2ZWx9XTpgLCAuLi5hcmdzKTtcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gX2dldExvZ2dlclNldHRpbmdzKCkge1xuICBpZiAoIURFQlVHX0JVSUxEKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZ2V0R2xvYmFsU2luZ2xldG9uKCdsb2dnZXJTZXR0aW5ncycsICgpID0+ICh7XG4gICAgZW5hYmxlZDogZmFsc2VcbiAgfSkpO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBsb2dnZXIgc2luZ2xldG9uIHdoaWNoIGVpdGhlciBsb2dzIHRoaW5ncyBvciBuby1vcHMgaWYgbG9nZ2luZyBpcyBub3QgZW5hYmxlZC5cbiAqIFRoZSBsb2dnZXIgaXMgYSBzaW5nbGV0b24gb24gdGhlIGNhcnJpZXIsIHRvIGVuc3VyZSB0aGF0IGEgY29uc2lzdGVudCBsb2dnZXIgaXMgdXNlZCB0aHJvdWdob3V0IHRoZSBTREsuXG4gKi9cbmNvbnN0IGxvZ2dlciA9IHtcbiAgLyoqIEVuYWJsZSBsb2dnaW5nLiAqL1xuICBlbmFibGUsXG4gIC8qKiBEaXNhYmxlIGxvZ2dpbmcuICovXG4gIGRpc2FibGUsXG4gIC8qKiBDaGVjayBpZiBsb2dnaW5nIGlzIGVuYWJsZWQuICovXG4gIGlzRW5hYmxlZCxcbiAgLyoqIExvZyBhIG1lc3NhZ2UuICovXG4gIGxvZyxcbiAgLyoqIExvZyBsZXZlbCBpbmZvICovXG4gIGluZm8sXG4gIC8qKiBMb2cgYSB3YXJuaW5nLiAqL1xuICB3YXJuLFxuICAvKiogTG9nIGFuIGVycm9yLiAqL1xuICBlcnJvcixcbiAgLyoqIExvZyBhIGRlYnVnIG1lc3NhZ2UuICovXG4gIGRlYnVnOiBfZGVidWcsXG4gIC8qKiBMb2cgYW4gYXNzZXJ0aW9uLiAqL1xuICBhc3NlcnQsXG4gIC8qKiBMb2cgYSB0cmFjZS4gKi9cbiAgdHJhY2Vcbn07XG5cbi8qKlxuICogVGhpcyBpcyBhIGxvZ2dlciBzaW5nbGV0b24gd2hpY2ggZWl0aGVyIGxvZ3MgdGhpbmdzIG9yIG5vLW9wcyBpZiBsb2dnaW5nIGlzIG5vdCBlbmFibGVkLlxuICovXG5jb25zdCBkZWJ1ZyA9IHtcbiAgLyoqIEVuYWJsZSBsb2dnaW5nLiAqL1xuICBlbmFibGUsXG4gIC8qKiBEaXNhYmxlIGxvZ2dpbmcuICovXG4gIGRpc2FibGUsXG4gIC8qKiBDaGVjayBpZiBsb2dnaW5nIGlzIGVuYWJsZWQuICovXG4gIGlzRW5hYmxlZCxcbiAgLyoqIExvZyBhIG1lc3NhZ2UuICovXG4gIGxvZyxcbiAgLyoqIExvZyBhIHdhcm5pbmcuICovXG4gIHdhcm4sXG4gIC8qKiBMb2cgYW4gZXJyb3IuICovXG4gIGVycm9yXG59O1xuZXhwb3J0IHsgQ09OU09MRV9MRVZFTFMsIGNvbnNvbGVTYW5kYm94LCBkZWJ1ZywgbG9nZ2VyLCBvcmlnaW5hbENvbnNvbGVNZXRob2RzIH07XG4iLCJjb25zdCBTVEFDS1RSQUNFX0ZSQU1FX0xJTUlUID0gNTA7XG5jb25zdCBVTktOT1dOX0ZVTkNUSU9OID0gJz8nO1xuLy8gVXNlZCB0byBzYW5pdGl6ZSB3ZWJwYWNrIChlcnJvcjogKikgd3JhcHBlZCBzdGFjayBlcnJvcnNcbmNvbnN0IFdFQlBBQ0tfRVJST1JfUkVHRVhQID0gL1xcKGVycm9yOiAoLiopXFwpLztcbmNvbnN0IFNUUklQX0ZSQU1FX1JFR0VYUCA9IC9jYXB0dXJlTWVzc2FnZXxjYXB0dXJlRXhjZXB0aW9uLztcblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhY2sgcGFyc2VyIHdpdGggdGhlIHN1cHBsaWVkIGxpbmUgcGFyc2Vyc1xuICpcbiAqIFN0YWNrRnJhbWVzIGFyZSByZXR1cm5lZCBpbiB0aGUgY29ycmVjdCBvcmRlciBmb3IgU2VudHJ5IEV4Y2VwdGlvblxuICogZnJhbWVzIGFuZCB3aXRoIFNlbnRyeSBTREsgaW50ZXJuYWwgZnJhbWVzIHJlbW92ZWQgZnJvbSB0aGUgdG9wIGFuZCBib3R0b21cbiAqXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVN0YWNrUGFyc2VyKC4uLnBhcnNlcnMpIHtcbiAgY29uc3Qgc29ydGVkUGFyc2VycyA9IHBhcnNlcnMuc29ydCgoYSwgYikgPT4gYVswXSAtIGJbMF0pLm1hcChwID0+IHBbMV0pO1xuICByZXR1cm4gKHN0YWNrLCBza2lwRmlyc3RMaW5lcyA9IDAsIGZyYW1lc1RvUG9wID0gMCkgPT4ge1xuICAgIGNvbnN0IGZyYW1lcyA9IFtdO1xuICAgIGNvbnN0IGxpbmVzID0gc3RhY2suc3BsaXQoJ1xcbicpO1xuICAgIGZvciAobGV0IGkgPSBza2lwRmlyc3RMaW5lczsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XG4gICAgICAvLyBJZ25vcmUgbGluZXMgb3ZlciAxa2IgYXMgdGhleSBhcmUgdW5saWtlbHkgdG8gYmUgc3RhY2sgZnJhbWVzLlxuICAgICAgLy8gTWFueSBvZiB0aGUgcmVndWxhciBleHByZXNzaW9ucyB1c2UgYmFja3RyYWNraW5nIHdoaWNoIHJlc3VsdHMgaW4gcnVuIHRpbWUgdGhhdCBpbmNyZWFzZXMgZXhwb25lbnRpYWxseSB3aXRoXG4gICAgICAvLyBpbnB1dCBzaXplLiBIdWdlIHN0cmluZ3MgY2FuIHJlc3VsdCBpbiBoYW5ncy9EZW5pYWwgb2YgU2VydmljZTpcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzIyODZcbiAgICAgIGlmIChsaW5lLmxlbmd0aCA+IDEwMjQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzU0NTlcbiAgICAgIC8vIFJlbW92ZSB3ZWJwYWNrIChlcnJvcjogKikgd3JhcHBlcnNcbiAgICAgIGNvbnN0IGNsZWFuZWRMaW5lID0gV0VCUEFDS19FUlJPUl9SRUdFWFAudGVzdChsaW5lKSA/IGxpbmUucmVwbGFjZShXRUJQQUNLX0VSUk9SX1JFR0VYUCwgJyQxJykgOiBsaW5lO1xuXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy83ODEzXG4gICAgICAvLyBTa2lwIEVycm9yOiBsaW5lc1xuICAgICAgaWYgKGNsZWFuZWRMaW5lLm1hdGNoKC9cXFMqRXJyb3I6IC8pKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBwYXJzZXIgb2Ygc29ydGVkUGFyc2Vycykge1xuICAgICAgICBjb25zdCBmcmFtZSA9IHBhcnNlcihjbGVhbmVkTGluZSk7XG4gICAgICAgIGlmIChmcmFtZSkge1xuICAgICAgICAgIGZyYW1lcy5wdXNoKGZyYW1lKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZyYW1lcy5sZW5ndGggPj0gU1RBQ0tUUkFDRV9GUkFNRV9MSU1JVCArIGZyYW1lc1RvUG9wKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RyaXBTZW50cnlGcmFtZXNBbmRSZXZlcnNlKGZyYW1lcy5zbGljZShmcmFtZXNUb1BvcCkpO1xuICB9O1xufVxuXG4vKipcbiAqIEdldHMgYSBzdGFjayBwYXJzZXIgaW1wbGVtZW50YXRpb24gZnJvbSBPcHRpb25zLnN0YWNrUGFyc2VyXG4gKiBAc2VlIE9wdGlvbnNcbiAqXG4gKiBJZiBvcHRpb25zIGNvbnRhaW5zIGFuIGFycmF5IG9mIGxpbmUgcGFyc2VycywgaXQgaXMgY29udmVydGVkIGludG8gYSBwYXJzZXJcbiAqL1xuZnVuY3Rpb24gc3RhY2tQYXJzZXJGcm9tU3RhY2tQYXJzZXJPcHRpb25zKHN0YWNrUGFyc2VyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHN0YWNrUGFyc2VyKSkge1xuICAgIHJldHVybiBjcmVhdGVTdGFja1BhcnNlciguLi5zdGFja1BhcnNlcik7XG4gIH1cbiAgcmV0dXJuIHN0YWNrUGFyc2VyO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgU2VudHJ5IGZyYW1lcyBmcm9tIHRoZSB0b3AgYW5kIGJvdHRvbSBvZiB0aGUgc3RhY2sgaWYgcHJlc2VudCBhbmQgZW5mb3JjZXMgYSBsaW1pdCBvZiBtYXggbnVtYmVyIG9mIGZyYW1lcy5cbiAqIEFzc3VtZXMgc3RhY2sgaW5wdXQgaXMgb3JkZXJlZCBmcm9tIHRvcCB0byBib3R0b20gYW5kIHJldHVybnMgdGhlIHJldmVyc2UgcmVwcmVzZW50YXRpb24gc28gY2FsbCBzaXRlIG9mIHRoZVxuICogZnVuY3Rpb24gdGhhdCBjYXVzZWQgdGhlIGNyYXNoIGlzIHRoZSBsYXN0IGZyYW1lIGluIHRoZSBhcnJheS5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gc3RyaXBTZW50cnlGcmFtZXNBbmRSZXZlcnNlKHN0YWNrKSB7XG4gIGlmICghc3RhY2subGVuZ3RoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGxvY2FsU3RhY2sgPSBBcnJheS5mcm9tKHN0YWNrKTtcblxuICAvLyBJZiBzdGFjayBzdGFydHMgd2l0aCBvbmUgb2Ygb3VyIEFQSSBjYWxscywgcmVtb3ZlIGl0IChzdGFydHMsIG1lYW5pbmcgaXQncyB0aGUgdG9wIG9mIHRoZSBzdGFjayAtIGFrYSBsYXN0IGNhbGwpXG4gIGlmICgvc2VudHJ5V3JhcHBlZC8udGVzdChnZXRMYXN0U3RhY2tGcmFtZShsb2NhbFN0YWNrKS5mdW5jdGlvbiB8fCAnJykpIHtcbiAgICBsb2NhbFN0YWNrLnBvcCgpO1xuICB9XG5cbiAgLy8gUmV2ZXJzaW5nIGluIHRoZSBtaWRkbGUgb2YgdGhlIHByb2NlZHVyZSBhbGxvd3MgdXMgdG8ganVzdCBwb3AgdGhlIHZhbHVlcyBvZmYgdGhlIHN0YWNrXG4gIGxvY2FsU3RhY2sucmV2ZXJzZSgpO1xuXG4gIC8vIElmIHN0YWNrIGVuZHMgd2l0aCBvbmUgb2Ygb3VyIGludGVybmFsIEFQSSBjYWxscywgcmVtb3ZlIGl0IChlbmRzLCBtZWFuaW5nIGl0J3MgdGhlIGJvdHRvbSBvZiB0aGUgc3RhY2sgLSBha2EgdG9wLW1vc3QgY2FsbClcbiAgaWYgKFNUUklQX0ZSQU1FX1JFR0VYUC50ZXN0KGdldExhc3RTdGFja0ZyYW1lKGxvY2FsU3RhY2spLmZ1bmN0aW9uIHx8ICcnKSkge1xuICAgIGxvY2FsU3RhY2sucG9wKCk7XG5cbiAgICAvLyBXaGVuIHVzaW5nIHN5bnRoZXRpYyBldmVudHMsIHdlIHdpbGwgaGF2ZSBhIDIgbGV2ZWxzIGRlZXAgc3RhY2ssIGFzIGBuZXcgRXJyb3IoJ1NlbnRyeSBzeW50aGV0aWNFeGNlcHRpb24nKWBcbiAgICAvLyBpcyBwcm9kdWNlZCB3aXRoaW4gdGhlIHNjb3BlIGl0c2VsZiwgbWFraW5nIGl0OlxuICAgIC8vXG4gICAgLy8gICBTZW50cnkuY2FwdHVyZUV4Y2VwdGlvbigpXG4gICAgLy8gICBzY29wZS5jYXB0dXJlRXhjZXB0aW9uKClcbiAgICAvL1xuICAgIC8vIGluc3RlYWQgb2YganVzdCB0aGUgdG9wIGBTZW50cnlgIGNhbGwgaXRzZWxmLlxuICAgIC8vIFRoaXMgZm9yY2VzIHVzIHRvIHBvc3NpYmx5IHN0cmlwIGFuIGFkZGl0aW9uYWwgZnJhbWUgaW4gdGhlIGV4YWN0IHNhbWUgd2FzIGFzIGFib3ZlLlxuICAgIGlmIChTVFJJUF9GUkFNRV9SRUdFWFAudGVzdChnZXRMYXN0U3RhY2tGcmFtZShsb2NhbFN0YWNrKS5mdW5jdGlvbiB8fCAnJykpIHtcbiAgICAgIGxvY2FsU3RhY2sucG9wKCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBsb2NhbFN0YWNrLnNsaWNlKDAsIFNUQUNLVFJBQ0VfRlJBTUVfTElNSVQpLm1hcChmcmFtZSA9PiAoe1xuICAgIC4uLmZyYW1lLFxuICAgIGZpbGVuYW1lOiBmcmFtZS5maWxlbmFtZSB8fCBnZXRMYXN0U3RhY2tGcmFtZShsb2NhbFN0YWNrKS5maWxlbmFtZSxcbiAgICBmdW5jdGlvbjogZnJhbWUuZnVuY3Rpb24gfHwgVU5LTk9XTl9GVU5DVElPTlxuICB9KSk7XG59XG5mdW5jdGlvbiBnZXRMYXN0U3RhY2tGcmFtZShhcnIpIHtcbiAgcmV0dXJuIGFyclthcnIubGVuZ3RoIC0gMV0gfHwge307XG59XG5jb25zdCBkZWZhdWx0RnVuY3Rpb25OYW1lID0gJzxhbm9ueW1vdXM+JztcblxuLyoqXG4gKiBTYWZlbHkgZXh0cmFjdCBmdW5jdGlvbiBuYW1lIGZyb20gaXRzZWxmXG4gKi9cbmZ1bmN0aW9uIGdldEZ1bmN0aW9uTmFtZShmbikge1xuICB0cnkge1xuICAgIGlmICghZm4gfHwgdHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdEZ1bmN0aW9uTmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLm5hbWUgfHwgZGVmYXVsdEZ1bmN0aW9uTmFtZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIEp1c3QgYWNjZXNzaW5nIGN1c3RvbSBwcm9wcyBpbiBzb21lIFNlbGVuaXVtIGVudmlyb25tZW50c1xuICAgIC8vIGNhbiBjYXVzZSBhIFwiUGVybWlzc2lvbiBkZW5pZWRcIiBleGNlcHRpb24gKHNlZSByYXZlbi1qcyM0OTUpLlxuICAgIHJldHVybiBkZWZhdWx0RnVuY3Rpb25OYW1lO1xuICB9XG59XG5cbi8qKlxuICogR2V0J3Mgc3RhY2sgZnJhbWVzIGZyb20gYW4gZXZlbnQgd2l0aG91dCBuZWVkaW5nIHRvIGNoZWNrIGZvciB1bmRlZmluZWQgcHJvcGVydGllcy5cbiAqL1xuZnVuY3Rpb24gZ2V0RnJhbWVzRnJvbUV2ZW50KGV2ZW50KSB7XG4gIGNvbnN0IGV4Y2VwdGlvbiA9IGV2ZW50LmV4Y2VwdGlvbjtcbiAgaWYgKGV4Y2VwdGlvbikge1xuICAgIGNvbnN0IGZyYW1lcyA9IFtdO1xuICAgIHRyeSB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIE9iamVjdCBjb3VsZCBiZSB1bmRlZmluZWRcbiAgICAgIGV4Y2VwdGlvbi52YWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVmFsdWUgY291bGQgYmUgdW5kZWZpbmVkXG4gICAgICAgIGlmICh2YWx1ZS5zdGFja3RyYWNlLmZyYW1lcykge1xuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVmFsdWUgY291bGQgYmUgdW5kZWZpbmVkXG4gICAgICAgICAgZnJhbWVzLnB1c2goLi4udmFsdWUuc3RhY2t0cmFjZS5mcmFtZXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmcmFtZXM7XG4gICAgfSBjYXRjaCAoX29PKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZXhwb3J0IHsgVU5LTk9XTl9GVU5DVElPTiwgY3JlYXRlU3RhY2tQYXJzZXIsIGdldEZyYW1lc0Zyb21FdmVudCwgZ2V0RnVuY3Rpb25OYW1lLCBzdGFja1BhcnNlckZyb21TdGFja1BhcnNlck9wdGlvbnMsIHN0cmlwU2VudHJ5RnJhbWVzQW5kUmV2ZXJzZSB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBkZWJ1ZyB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBnZXRGdW5jdGlvbk5hbWUgfSBmcm9tICcuLi91dGlscy9zdGFja3RyYWNlLmpzJztcblxuLy8gV2Uga2VlcCB0aGUgaGFuZGxlcnMgZ2xvYmFsbHlcbmNvbnN0IGhhbmRsZXJzID0ge307XG5jb25zdCBpbnN0cnVtZW50ZWQgPSB7fTtcblxuLyoqIEFkZCBhIGhhbmRsZXIgZnVuY3Rpb24uICovXG5mdW5jdGlvbiBhZGRIYW5kbGVyKHR5cGUsIGhhbmRsZXIpIHtcbiAgaGFuZGxlcnNbdHlwZV0gPSBoYW5kbGVyc1t0eXBlXSB8fCBbXTtcbiAgaGFuZGxlcnNbdHlwZV0ucHVzaChoYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBSZXNldCBhbGwgaW5zdHJ1bWVudGF0aW9uIGhhbmRsZXJzLlxuICogVGhpcyBjYW4gYmUgdXNlZCBieSB0ZXN0cyB0byBlbnN1cmUgd2UgaGF2ZSBhIGNsZWFuIHNsYXRlIG9mIGluc3RydW1lbnRhdGlvbiBoYW5kbGVycy5cbiAqL1xuZnVuY3Rpb24gcmVzZXRJbnN0cnVtZW50YXRpb25IYW5kbGVycygpIHtcbiAgT2JqZWN0LmtleXMoaGFuZGxlcnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICBoYW5kbGVyc1trZXldID0gdW5kZWZpbmVkO1xuICB9KTtcbn1cblxuLyoqIE1heWJlIHJ1biBhbiBpbnN0cnVtZW50YXRpb24gZnVuY3Rpb24sIHVubGVzcyBpdCB3YXMgYWxyZWFkeSBjYWxsZWQuICovXG5mdW5jdGlvbiBtYXliZUluc3RydW1lbnQodHlwZSwgaW5zdHJ1bWVudEZuKSB7XG4gIGlmICghaW5zdHJ1bWVudGVkW3R5cGVdKSB7XG4gICAgaW5zdHJ1bWVudGVkW3R5cGVdID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgaW5zdHJ1bWVudEZuKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgREVCVUdfQlVJTEQgJiYgZGVidWcuZXJyb3IoYEVycm9yIHdoaWxlIGluc3RydW1lbnRpbmcgJHt0eXBlfWAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG4vKiogVHJpZ2dlciBoYW5kbGVycyBmb3IgYSBnaXZlbiBpbnN0cnVtZW50YXRpb24gdHlwZS4gKi9cbmZ1bmN0aW9uIHRyaWdnZXJIYW5kbGVycyh0eXBlLCBkYXRhKSB7XG4gIGNvbnN0IHR5cGVIYW5kbGVycyA9IHR5cGUgJiYgaGFuZGxlcnNbdHlwZV07XG4gIGlmICghdHlwZUhhbmRsZXJzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAoY29uc3QgaGFuZGxlciBvZiB0eXBlSGFuZGxlcnMpIHtcbiAgICB0cnkge1xuICAgICAgaGFuZGxlcihkYXRhKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy5lcnJvcihgRXJyb3Igd2hpbGUgdHJpZ2dlcmluZyBpbnN0cnVtZW50YXRpb24gaGFuZGxlci5cXG5UeXBlOiAke3R5cGV9XFxuTmFtZTogJHtnZXRGdW5jdGlvbk5hbWUoaGFuZGxlcil9XFxuRXJyb3I6YCwgZSk7XG4gICAgfVxuICB9XG59XG5leHBvcnQgeyBhZGRIYW5kbGVyLCBtYXliZUluc3RydW1lbnQsIHJlc2V0SW5zdHJ1bWVudGF0aW9uSGFuZGxlcnMsIHRyaWdnZXJIYW5kbGVycyB9O1xuIiwiaW1wb3J0IHsgR0xPQkFMX09CSiB9IGZyb20gJy4uL3V0aWxzL3dvcmxkd2lkZS5qcyc7XG5pbXBvcnQgeyBhZGRIYW5kbGVyLCBtYXliZUluc3RydW1lbnQsIHRyaWdnZXJIYW5kbGVycyB9IGZyb20gJy4vaGFuZGxlcnMuanMnO1xubGV0IF9vbGRPbkVycm9ySGFuZGxlciA9IG51bGw7XG5cbi8qKlxuICogQWRkIGFuIGluc3RydW1lbnRhdGlvbiBoYW5kbGVyIGZvciB3aGVuIGFuIGVycm9yIGlzIGNhcHR1cmVkIGJ5IHRoZSBnbG9iYWwgZXJyb3IgaGFuZGxlci5cbiAqXG4gKiBVc2UgYXQgeW91ciBvd24gcmlzaywgdGhpcyBtaWdodCBicmVhayB3aXRob3V0IGNoYW5nZWxvZyBub3RpY2UsIG9ubHkgdXNlZCBpbnRlcm5hbGx5LlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBhZGRHbG9iYWxFcnJvckluc3RydW1lbnRhdGlvbkhhbmRsZXIoaGFuZGxlcikge1xuICBjb25zdCB0eXBlID0gJ2Vycm9yJztcbiAgYWRkSGFuZGxlcih0eXBlLCBoYW5kbGVyKTtcbiAgbWF5YmVJbnN0cnVtZW50KHR5cGUsIGluc3RydW1lbnRFcnJvcik7XG59XG5mdW5jdGlvbiBpbnN0cnVtZW50RXJyb3IoKSB7XG4gIF9vbGRPbkVycm9ySGFuZGxlciA9IEdMT0JBTF9PQkoub25lcnJvcjtcblxuICAvLyBOb3RlOiBUaGUgcmVhc29uIHdlIGFyZSBkb2luZyB3aW5kb3cub25lcnJvciBpbnN0ZWFkIG9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicpXG4gIC8vIGlzIHRoYXQgd2UgYXJlIHVzaW5nIHRoaXMgaGFuZGxlciBpbiB0aGUgTG9hZGVyIFNjcmlwdCwgdG8gaGFuZGxlIGJ1ZmZlcmVkIGVycm9ycyBjb25zaXN0ZW50bHlcbiAgR0xPQkFMX09CSi5vbmVycm9yID0gZnVuY3Rpb24gKG1zZywgdXJsLCBsaW5lLCBjb2x1bW4sIGVycm9yKSB7XG4gICAgY29uc3QgaGFuZGxlckRhdGEgPSB7XG4gICAgICBjb2x1bW4sXG4gICAgICBlcnJvcixcbiAgICAgIGxpbmUsXG4gICAgICBtc2csXG4gICAgICB1cmxcbiAgICB9O1xuICAgIHRyaWdnZXJIYW5kbGVycygnZXJyb3InLCBoYW5kbGVyRGF0YSk7XG4gICAgaWYgKF9vbGRPbkVycm9ySGFuZGxlcikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgICAgcmV0dXJuIF9vbGRPbkVycm9ySGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIEdMT0JBTF9PQkoub25lcnJvci5fX1NFTlRSWV9JTlNUUlVNRU5URURfXyA9IHRydWU7XG59XG5leHBvcnQgeyBhZGRHbG9iYWxFcnJvckluc3RydW1lbnRhdGlvbkhhbmRsZXIgfTtcbiIsImltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICcuLi91dGlscy93b3JsZHdpZGUuanMnO1xuaW1wb3J0IHsgYWRkSGFuZGxlciwgbWF5YmVJbnN0cnVtZW50LCB0cmlnZ2VySGFuZGxlcnMgfSBmcm9tICcuL2hhbmRsZXJzLmpzJztcbmxldCBfb2xkT25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVyID0gbnVsbDtcblxuLyoqXG4gKiBBZGQgYW4gaW5zdHJ1bWVudGF0aW9uIGhhbmRsZXIgZm9yIHdoZW4gYW4gdW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIGlzIGNhcHR1cmVkLlxuICpcbiAqIFVzZSBhdCB5b3VyIG93biByaXNrLCB0aGlzIG1pZ2h0IGJyZWFrIHdpdGhvdXQgY2hhbmdlbG9nIG5vdGljZSwgb25seSB1c2VkIGludGVybmFsbHkuXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGFkZEdsb2JhbFVuaGFuZGxlZFJlamVjdGlvbkluc3RydW1lbnRhdGlvbkhhbmRsZXIoaGFuZGxlcikge1xuICBjb25zdCB0eXBlID0gJ3VuaGFuZGxlZHJlamVjdGlvbic7XG4gIGFkZEhhbmRsZXIodHlwZSwgaGFuZGxlcik7XG4gIG1heWJlSW5zdHJ1bWVudCh0eXBlLCBpbnN0cnVtZW50VW5oYW5kbGVkUmVqZWN0aW9uKTtcbn1cbmZ1bmN0aW9uIGluc3RydW1lbnRVbmhhbmRsZWRSZWplY3Rpb24oKSB7XG4gIF9vbGRPblVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZXIgPSBHTE9CQUxfT0JKLm9udW5oYW5kbGVkcmVqZWN0aW9uO1xuXG4gIC8vIE5vdGU6IFRoZSByZWFzb24gd2UgYXJlIGRvaW5nIHdpbmRvdy5vbnVuaGFuZGxlZHJlamVjdGlvbiBpbnN0ZWFkIG9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nKVxuICAvLyBpcyB0aGF0IHdlIGFyZSB1c2luZyB0aGlzIGhhbmRsZXIgaW4gdGhlIExvYWRlciBTY3JpcHQsIHRvIGhhbmRsZSBidWZmZXJlZCByZWplY3Rpb25zIGNvbnNpc3RlbnRseVxuICBHTE9CQUxfT0JKLm9udW5oYW5kbGVkcmVqZWN0aW9uID0gZnVuY3Rpb24gKGUpIHtcbiAgICBjb25zdCBoYW5kbGVyRGF0YSA9IGU7XG4gICAgdHJpZ2dlckhhbmRsZXJzKCd1bmhhbmRsZWRyZWplY3Rpb24nLCBoYW5kbGVyRGF0YSk7XG4gICAgaWYgKF9vbGRPblVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZXIpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgIHJldHVybiBfb2xkT25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBHTE9CQUxfT0JKLm9udW5oYW5kbGVkcmVqZWN0aW9uLl9fU0VOVFJZX0lOU1RSVU1FTlRFRF9fID0gdHJ1ZTtcbn1cbmV4cG9ydCB7IGFkZEdsb2JhbFVuaGFuZGxlZFJlamVjdGlvbkluc3RydW1lbnRhdGlvbkhhbmRsZXIgfTtcbiIsIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgb25lIG9mIGEgZmV3IEVycm9yIG9yIEVycm9yLWxpa2VcbiAqIHtAbGluayBpc0Vycm9yfS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gaXNFcnJvcih3YXQpIHtcbiAgc3dpdGNoIChvYmplY3RUb1N0cmluZy5jYWxsKHdhdCkpIHtcbiAgICBjYXNlICdbb2JqZWN0IEVycm9yXSc6XG4gICAgY2FzZSAnW29iamVjdCBFeGNlcHRpb25dJzpcbiAgICBjYXNlICdbb2JqZWN0IERPTUV4Y2VwdGlvbl0nOlxuICAgIGNhc2UgJ1tvYmplY3QgV2ViQXNzZW1ibHkuRXhjZXB0aW9uXSc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGlzSW5zdGFuY2VPZih3YXQsIEVycm9yKTtcbiAgfVxufVxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gYnVpbHQtaW4gY2xhc3MuXG4gKlxuICogQHBhcmFtIHdhdCBUaGUgdmFsdWUgdG8gYmUgY2hlY2tlZFxuICogQHBhcmFtIGNsYXNzTmFtZVxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBpc0J1aWx0aW4od2F0LCBjbGFzc05hbWUpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nLmNhbGwod2F0KSA9PT0gYFtvYmplY3QgJHtjbGFzc05hbWV9XWA7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIEVycm9yRXZlbnRcbiAqIHtAbGluayBpc0Vycm9yRXZlbnR9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBpc0Vycm9yRXZlbnQod2F0KSB7XG4gIHJldHVybiBpc0J1aWx0aW4od2F0LCAnRXJyb3JFdmVudCcpO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBET01FcnJvclxuICoge0BsaW5rIGlzRE9NRXJyb3J9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBpc0RPTUVycm9yKHdhdCkge1xuICByZXR1cm4gaXNCdWlsdGluKHdhdCwgJ0RPTUVycm9yJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIERPTUV4Y2VwdGlvblxuICoge0BsaW5rIGlzRE9NRXhjZXB0aW9ufS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gaXNET01FeGNlcHRpb24od2F0KSB7XG4gIHJldHVybiBpc0J1aWx0aW4od2F0LCAnRE9NRXhjZXB0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGEgc3RyaW5nXG4gKiB7QGxpbmsgaXNTdHJpbmd9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh3YXQpIHtcbiAgcmV0dXJuIGlzQnVpbHRpbih3YXQsICdTdHJpbmcnKTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiBzdHJpbmcgaXMgcGFyYW1ldGVyaXplZFxuICoge0BsaW5rIGlzUGFyYW1ldGVyaXplZFN0cmluZ30uXG4gKlxuICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuXG4gKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIGlzUGFyYW1ldGVyaXplZFN0cmluZyh3YXQpIHtcbiAgcmV0dXJuIHR5cGVvZiB3YXQgPT09ICdvYmplY3QnICYmIHdhdCAhPT0gbnVsbCAmJiAnX19zZW50cnlfdGVtcGxhdGVfc3RyaW5nX18nIGluIHdhdCAmJiAnX19zZW50cnlfdGVtcGxhdGVfdmFsdWVzX18nIGluIHdhdDtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSBpcyBhIHByaW1pdGl2ZSAodW5kZWZpbmVkLCBudWxsLCBudW1iZXIsIGJvb2xlYW4sIHN0cmluZywgYmlnaW50LCBzeW1ib2wpXG4gKiB7QGxpbmsgaXNQcmltaXRpdmV9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZSh3YXQpIHtcbiAgcmV0dXJuIHdhdCA9PT0gbnVsbCB8fCBpc1BhcmFtZXRlcml6ZWRTdHJpbmcod2F0KSB8fCB0eXBlb2Ygd2F0ICE9PSAnb2JqZWN0JyAmJiB0eXBlb2Ygd2F0ICE9PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBvYmplY3QgbGl0ZXJhbCwgb3IgYSBjbGFzcyBpbnN0YW5jZS5cbiAqIHtAbGluayBpc1BsYWluT2JqZWN0fS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh3YXQpIHtcbiAgcmV0dXJuIGlzQnVpbHRpbih3YXQsICdPYmplY3QnKTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYW4gRXZlbnQgaW5zdGFuY2VcbiAqIHtAbGluayBpc0V2ZW50fS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gaXNFdmVudCh3YXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBFdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNJbnN0YW5jZU9mKHdhdCwgRXZlbnQpO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBFbGVtZW50IGluc3RhbmNlXG4gKiB7QGxpbmsgaXNFbGVtZW50fS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gaXNFbGVtZW50KHdhdCkge1xuICByZXR1cm4gdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGlzSW5zdGFuY2VPZih3YXQsIEVsZW1lbnQpO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiByZWdleHBcbiAqIHtAbGluayBpc1JlZ0V4cH0uXG4gKlxuICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuXG4gKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIGlzUmVnRXhwKHdhdCkge1xuICByZXR1cm4gaXNCdWlsdGluKHdhdCwgJ1JlZ0V4cCcpO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlIGhhcyBhIHRoZW4gZnVuY3Rpb24uXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqL1xuZnVuY3Rpb24gaXNUaGVuYWJsZSh3YXQpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICByZXR1cm4gQm9vbGVhbih3YXQ/LnRoZW4gJiYgdHlwZW9mIHdhdC50aGVuID09PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYSBTeW50aGV0aWNFdmVudFxuICoge0BsaW5rIGlzU3ludGhldGljRXZlbnR9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBpc1N5bnRoZXRpY0V2ZW50KHdhdCkge1xuICByZXR1cm4gaXNQbGFpbk9iamVjdCh3YXQpICYmICduYXRpdmVFdmVudCcgaW4gd2F0ICYmICdwcmV2ZW50RGVmYXVsdCcgaW4gd2F0ICYmICdzdG9wUHJvcGFnYXRpb24nIGluIHdhdDtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYW4gaW5zdGFuY2Ugb2YgcHJvdmlkZWQgY29uc3RydWN0b3IuXG4gKiB7QGxpbmsgaXNJbnN0YW5jZU9mfS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEBwYXJhbSBiYXNlIEEgY29uc3RydWN0b3IgdG8gYmUgdXNlZCBpbiBhIGNoZWNrLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBpc0luc3RhbmNlT2Yod2F0LCBiYXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdhdCBpbnN0YW5jZW9mIGJhc2U7XG4gIH0gY2F0Y2ggKF9lKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGEgVnVlIFZpZXdNb2RlbC5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gaXNWdWVWaWV3TW9kZWwod2F0KSB7XG4gIC8vIE5vdCB1c2luZyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nIGJlY2F1c2UgaW4gVnVlIDMgaXQgd291bGQgcmVhZCB0aGUgaW5zdGFuY2UncyBTeW1ib2woU3ltYm9sLnRvU3RyaW5nVGFnKSBwcm9wZXJ0eS5cbiAgcmV0dXJuICEhKHR5cGVvZiB3YXQgPT09ICdvYmplY3QnICYmIHdhdCAhPT0gbnVsbCAmJiAod2F0Ll9faXNWdWUgfHwgd2F0Ll9pc1Z1ZSkpO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBwYXJhbWV0ZXIgaXMgYSBTdGFuZGFyZCBXZWIgQVBJIFJlcXVlc3QgaW5zdGFuY2UuXG4gKlxuICogUmV0dXJucyBmYWxzZSBpZiBSZXF1ZXN0IGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgcnVudGltZS5cbiAqL1xuZnVuY3Rpb24gaXNSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJyAmJiBpc0luc3RhbmNlT2YocmVxdWVzdCwgUmVxdWVzdCk7XG59XG5leHBvcnQgeyBpc0RPTUVycm9yLCBpc0RPTUV4Y2VwdGlvbiwgaXNFbGVtZW50LCBpc0Vycm9yLCBpc0Vycm9yRXZlbnQsIGlzRXZlbnQsIGlzSW5zdGFuY2VPZiwgaXNQYXJhbWV0ZXJpemVkU3RyaW5nLCBpc1BsYWluT2JqZWN0LCBpc1ByaW1pdGl2ZSwgaXNSZWdFeHAsIGlzUmVxdWVzdCwgaXNTdHJpbmcsIGlzU3ludGhldGljRXZlbnQsIGlzVGhlbmFibGUsIGlzVnVlVmlld01vZGVsIH07XG4iLCJpbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJy4vaXMuanMnO1xuaW1wb3J0IHsgR0xPQkFMX09CSiB9IGZyb20gJy4vd29ybGR3aWRlLmpzJztcbmNvbnN0IFdJTkRPVyA9IEdMT0JBTF9PQko7XG5jb25zdCBERUZBVUxUX01BWF9TVFJJTkdfTEVOR1RIID0gODA7XG5cbi8qKlxuICogR2l2ZW4gYSBjaGlsZCBET00gZWxlbWVudCwgcmV0dXJucyBhIHF1ZXJ5LXNlbGVjdG9yIHN0YXRlbWVudCBkZXNjcmliaW5nIHRoYXRcbiAqIGFuZCBpdHMgYW5jZXN0b3JzXG4gKiBlLmcuIFtIVE1MRWxlbWVudF0gPT4gYm9keSA+IGRpdiA+IGlucHV0I2Zvby5idG5bbmFtZT1iYXpdXG4gKiBAcmV0dXJucyBnZW5lcmF0ZWQgRE9NIHBhdGhcbiAqL1xuZnVuY3Rpb24gaHRtbFRyZWVBc1N0cmluZyhlbGVtLCBvcHRpb25zID0ge30pIHtcbiAgaWYgKCFlbGVtKSB7XG4gICAgcmV0dXJuICc8dW5rbm93bj4nO1xuICB9XG5cbiAgLy8gdHJ5L2NhdGNoIGJvdGg6XG4gIC8vIC0gYWNjZXNzaW5nIGV2ZW50LnRhcmdldCAoc2VlIGdldHNlbnRyeS9yYXZlbi1qcyM4MzgsICM3NjgpXG4gIC8vIC0gYGh0bWxUcmVlQXNTdHJpbmdgIGJlY2F1c2UgaXQncyBjb21wbGV4LCBhbmQganVzdCBhY2Nlc3NpbmcgdGhlIERPTSBpbmNvcnJlY3RseVxuICAvLyAtIGNhbiB0aHJvdyBhbiBleGNlcHRpb24gaW4gc29tZSBjaXJjdW1zdGFuY2VzLlxuICB0cnkge1xuICAgIGxldCBjdXJyZW50RWxlbSA9IGVsZW07XG4gICAgY29uc3QgTUFYX1RSQVZFUlNFX0hFSUdIVCA9IDU7XG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgbGV0IGhlaWdodCA9IDA7XG4gICAgbGV0IGxlbiA9IDA7XG4gICAgY29uc3Qgc2VwYXJhdG9yID0gJyA+ICc7XG4gICAgY29uc3Qgc2VwTGVuZ3RoID0gc2VwYXJhdG9yLmxlbmd0aDtcbiAgICBsZXQgbmV4dFN0cjtcbiAgICBjb25zdCBrZXlBdHRycyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucykgPyBvcHRpb25zIDogb3B0aW9ucy5rZXlBdHRycztcbiAgICBjb25zdCBtYXhTdHJpbmdMZW5ndGggPSAhQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLm1heFN0cmluZ0xlbmd0aCB8fCBERUZBVUxUX01BWF9TVFJJTkdfTEVOR1RIO1xuICAgIHdoaWxlIChjdXJyZW50RWxlbSAmJiBoZWlnaHQrKyA8IE1BWF9UUkFWRVJTRV9IRUlHSFQpIHtcbiAgICAgIG5leHRTdHIgPSBfaHRtbEVsZW1lbnRBc1N0cmluZyhjdXJyZW50RWxlbSwga2V5QXR0cnMpO1xuICAgICAgLy8gYmFpbCBvdXQgaWZcbiAgICAgIC8vIC0gbmV4dFN0ciBpcyB0aGUgJ2h0bWwnIGVsZW1lbnRcbiAgICAgIC8vIC0gdGhlIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHRoYXQgd291bGQgYmUgY3JlYXRlZCBleGNlZWRzIG1heFN0cmluZ0xlbmd0aFxuICAgICAgLy8gICAoaWdub3JlIHRoaXMgbGltaXQgaWYgd2UgYXJlIG9uIHRoZSBmaXJzdCBpdGVyYXRpb24pXG4gICAgICBpZiAobmV4dFN0ciA9PT0gJ2h0bWwnIHx8IGhlaWdodCA+IDEgJiYgbGVuICsgb3V0Lmxlbmd0aCAqIHNlcExlbmd0aCArIG5leHRTdHIubGVuZ3RoID49IG1heFN0cmluZ0xlbmd0aCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIG91dC5wdXNoKG5leHRTdHIpO1xuICAgICAgbGVuICs9IG5leHRTdHIubGVuZ3RoO1xuICAgICAgY3VycmVudEVsZW0gPSBjdXJyZW50RWxlbS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gb3V0LnJldmVyc2UoKS5qb2luKHNlcGFyYXRvcik7XG4gIH0gY2F0Y2ggKF9vTykge1xuICAgIHJldHVybiAnPHVua25vd24+JztcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBzaW1wbGUsIHF1ZXJ5LXNlbGVjdG9yIHJlcHJlc2VudGF0aW9uIG9mIGEgRE9NIGVsZW1lbnRcbiAqIGUuZy4gW0hUTUxFbGVtZW50XSA9PiBpbnB1dCNmb28uYnRuW25hbWU9YmF6XVxuICogQHJldHVybnMgZ2VuZXJhdGVkIERPTSBwYXRoXG4gKi9cbmZ1bmN0aW9uIF9odG1sRWxlbWVudEFzU3RyaW5nKGVsLCBrZXlBdHRycykge1xuICBjb25zdCBlbGVtID0gZWw7XG4gIGNvbnN0IG91dCA9IFtdO1xuICBpZiAoIWVsZW0/LnRhZ05hbWUpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvLyBAdHMtZXhwZWN0LWVycm9yIFdJTkRPVyBoYXMgSFRNTEVsZW1lbnRcbiAgaWYgKFdJTkRPVy5IVE1MRWxlbWVudCkge1xuICAgIC8vIElmIHVzaW5nIHRoZSBjb21wb25lbnQgbmFtZSBhbm5vdGF0aW9uIHBsdWdpbiwgdGhpcyB2YWx1ZSBtYXkgYmUgYXZhaWxhYmxlIG9uIHRoZSBET00gbm9kZVxuICAgIGlmIChlbGVtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgZWxlbS5kYXRhc2V0KSB7XG4gICAgICBpZiAoZWxlbS5kYXRhc2V0WydzZW50cnlDb21wb25lbnQnXSkge1xuICAgICAgICByZXR1cm4gZWxlbS5kYXRhc2V0WydzZW50cnlDb21wb25lbnQnXTtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtLmRhdGFzZXRbJ3NlbnRyeUVsZW1lbnQnXSkge1xuICAgICAgICByZXR1cm4gZWxlbS5kYXRhc2V0WydzZW50cnlFbGVtZW50J107XG4gICAgICB9XG4gICAgfVxuICB9XG4gIG91dC5wdXNoKGVsZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKTtcblxuICAvLyBQYWlycyBvZiBhdHRyaWJ1dGUga2V5cyBkZWZpbmVkIGluIGBzZXJpYWxpemVBdHRyaWJ1dGVgIGFuZCB0aGVpciB2YWx1ZXMgb24gZWxlbWVudC5cbiAgY29uc3Qga2V5QXR0clBhaXJzID0ga2V5QXR0cnM/Lmxlbmd0aCA/IGtleUF0dHJzLmZpbHRlcihrZXlBdHRyID0+IGVsZW0uZ2V0QXR0cmlidXRlKGtleUF0dHIpKS5tYXAoa2V5QXR0ciA9PiBba2V5QXR0ciwgZWxlbS5nZXRBdHRyaWJ1dGUoa2V5QXR0cildKSA6IG51bGw7XG4gIGlmIChrZXlBdHRyUGFpcnM/Lmxlbmd0aCkge1xuICAgIGtleUF0dHJQYWlycy5mb3JFYWNoKGtleUF0dHJQYWlyID0+IHtcbiAgICAgIG91dC5wdXNoKGBbJHtrZXlBdHRyUGFpclswXX09XCIke2tleUF0dHJQYWlyWzFdfVwiXWApO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGlmIChlbGVtLmlkKSB7XG4gICAgICBvdXQucHVzaChgIyR7ZWxlbS5pZH1gKTtcbiAgICB9XG4gICAgY29uc3QgY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWU7XG4gICAgaWYgKGNsYXNzTmFtZSAmJiBpc1N0cmluZyhjbGFzc05hbWUpKSB7XG4gICAgICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lLnNwbGl0KC9cXHMrLyk7XG4gICAgICBmb3IgKGNvbnN0IGMgb2YgY2xhc3Nlcykge1xuICAgICAgICBvdXQucHVzaChgLiR7Y31gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgYWxsb3dlZEF0dHJzID0gWydhcmlhLWxhYmVsJywgJ3R5cGUnLCAnbmFtZScsICd0aXRsZScsICdhbHQnXTtcbiAgZm9yIChjb25zdCBrIG9mIGFsbG93ZWRBdHRycykge1xuICAgIGNvbnN0IGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShrKTtcbiAgICBpZiAoYXR0cikge1xuICAgICAgb3V0LnB1c2goYFske2t9PVwiJHthdHRyfVwiXWApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0LmpvaW4oJycpO1xufVxuXG4vKipcbiAqIEEgc2FmZSBmb3JtIG9mIGxvY2F0aW9uLmhyZWZcbiAqL1xuZnVuY3Rpb24gZ2V0TG9jYXRpb25IcmVmKCkge1xuICB0cnkge1xuICAgIHJldHVybiBXSU5ET1cuZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcbiAgfSBjYXRjaCAob08pIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuLyoqXG4gKiBHaXZlbiBhIERPTSBlbGVtZW50LCB0cmF2ZXJzZXMgdXAgdGhlIHRyZWUgdW50aWwgaXQgZmluZHMgdGhlIGZpcnN0IGFuY2VzdG9yIG5vZGVcbiAqIHRoYXQgaGFzIHRoZSBgZGF0YS1zZW50cnktY29tcG9uZW50YCBvciBgZGF0YS1zZW50cnktZWxlbWVudGAgYXR0cmlidXRlIHdpdGggYGRhdGEtc2VudHJ5LWNvbXBvbmVudGAgdGFraW5nXG4gKiBwcmVjZWRlbmNlLiBUaGlzIGF0dHJpYnV0ZSBpcyBhZGRlZCBhdCBidWlsZC10aW1lIGJ5IHByb2plY3RzIHRoYXQgaGF2ZSB0aGUgY29tcG9uZW50IG5hbWUgYW5ub3RhdGlvbiBwbHVnaW4gaW5zdGFsbGVkLlxuICpcbiAqIEByZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb21wb25lbnQgZm9yIHRoZSBwcm92aWRlZCBET00gZWxlbWVudCwgb3IgYG51bGxgIGlmIG5vdCBmb3VuZFxuICovXG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKGVsZW0pIHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBXSU5ET1cgaGFzIEhUTUxFbGVtZW50XG4gIGlmICghV0lORE9XLkhUTUxFbGVtZW50KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbGV0IGN1cnJlbnRFbGVtID0gZWxlbTtcbiAgY29uc3QgTUFYX1RSQVZFUlNFX0hFSUdIVCA9IDU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTUFYX1RSQVZFUlNFX0hFSUdIVDsgaSsrKSB7XG4gICAgaWYgKCFjdXJyZW50RWxlbSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChjdXJyZW50RWxlbSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICBpZiAoY3VycmVudEVsZW0uZGF0YXNldFsnc2VudHJ5Q29tcG9uZW50J10pIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRFbGVtLmRhdGFzZXRbJ3NlbnRyeUNvbXBvbmVudCddO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRFbGVtLmRhdGFzZXRbJ3NlbnRyeUVsZW1lbnQnXSkge1xuICAgICAgICByZXR1cm4gY3VycmVudEVsZW0uZGF0YXNldFsnc2VudHJ5RWxlbWVudCddO1xuICAgICAgfVxuICAgIH1cbiAgICBjdXJyZW50RWxlbSA9IGN1cnJlbnRFbGVtLnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5leHBvcnQgeyBnZXRDb21wb25lbnROYW1lLCBnZXRMb2NhdGlvbkhyZWYsIGh0bWxUcmVlQXNTdHJpbmcgfTtcbiIsImltcG9ydCB7IGlzU3RyaW5nLCBpc1JlZ0V4cCwgaXNWdWVWaWV3TW9kZWwgfSBmcm9tICcuL2lzLmpzJztcblxuLyoqXG4gKiBUcnVuY2F0ZXMgZ2l2ZW4gc3RyaW5nIHRvIHRoZSBtYXhpbXVtIGNoYXJhY3RlcnMgY291bnRcbiAqXG4gKiBAcGFyYW0gc3RyIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNlcmlhbGl6YWJsZSB2YWx1ZXNcbiAqIEBwYXJhbSBtYXggTWF4aW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBpbiB0cnVuY2F0ZWQgc3RyaW5nICgwID0gdW5saW1pdGVkKVxuICogQHJldHVybnMgc3RyaW5nIEVuY29kZWRcbiAqL1xuZnVuY3Rpb24gdHJ1bmNhdGUoc3RyLCBtYXggPSAwKSB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyB8fCBtYXggPT09IDApIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG4gIHJldHVybiBzdHIubGVuZ3RoIDw9IG1heCA/IHN0ciA6IGAke3N0ci5zbGljZSgwLCBtYXgpfS4uLmA7XG59XG5cbi8qKlxuICogVGhpcyBpcyBiYXNpY2FsbHkganVzdCBgdHJpbV9saW5lYCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS9ibG9iL21hc3Rlci9zcmMvc2VudHJ5L2xhbmcvamF2YXNjcmlwdC9wcm9jZXNzb3IucHkjTDY3XG4gKlxuICogQHBhcmFtIHN0ciBBbiBvYmplY3QgdGhhdCBjb250YWlucyBzZXJpYWxpemFibGUgdmFsdWVzXG4gKiBAcGFyYW0gbWF4IE1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gdHJ1bmNhdGVkIHN0cmluZ1xuICogQHJldHVybnMgc3RyaW5nIEVuY29kZWRcbiAqL1xuZnVuY3Rpb24gc25pcExpbmUobGluZSwgY29sbm8pIHtcbiAgbGV0IG5ld0xpbmUgPSBsaW5lO1xuICBjb25zdCBsaW5lTGVuZ3RoID0gbmV3TGluZS5sZW5ndGg7XG4gIGlmIChsaW5lTGVuZ3RoIDw9IDE1MCkge1xuICAgIHJldHVybiBuZXdMaW5lO1xuICB9XG4gIGlmIChjb2xubyA+IGxpbmVMZW5ndGgpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBjb2xubyA9IGxpbmVMZW5ndGg7XG4gIH1cbiAgbGV0IHN0YXJ0ID0gTWF0aC5tYXgoY29sbm8gLSA2MCwgMCk7XG4gIGlmIChzdGFydCA8IDUpIHtcbiAgICBzdGFydCA9IDA7XG4gIH1cbiAgbGV0IGVuZCA9IE1hdGgubWluKHN0YXJ0ICsgMTQwLCBsaW5lTGVuZ3RoKTtcbiAgaWYgKGVuZCA+IGxpbmVMZW5ndGggLSA1KSB7XG4gICAgZW5kID0gbGluZUxlbmd0aDtcbiAgfVxuICBpZiAoZW5kID09PSBsaW5lTGVuZ3RoKSB7XG4gICAgc3RhcnQgPSBNYXRoLm1heChlbmQgLSAxNDAsIDApO1xuICB9XG4gIG5ld0xpbmUgPSBuZXdMaW5lLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICBpZiAoc3RhcnQgPiAwKSB7XG4gICAgbmV3TGluZSA9IGAne3NuaXB9ICR7bmV3TGluZX1gO1xuICB9XG4gIGlmIChlbmQgPCBsaW5lTGVuZ3RoKSB7XG4gICAgbmV3TGluZSArPSAnIHtzbmlwfSc7XG4gIH1cbiAgcmV0dXJuIG5ld0xpbmU7XG59XG5cbi8qKlxuICogSm9pbiB2YWx1ZXMgaW4gYXJyYXlcbiAqIEBwYXJhbSBpbnB1dCBhcnJheSBvZiB2YWx1ZXMgdG8gYmUgam9pbmVkIHRvZ2V0aGVyXG4gKiBAcGFyYW0gZGVsaW1pdGVyIHN0cmluZyB0byBiZSBwbGFjZWQgaW4tYmV0d2VlbiB2YWx1ZXNcbiAqIEByZXR1cm5zIEpvaW5lZCB2YWx1ZXNcbiAqL1xuZnVuY3Rpb24gc2FmZUpvaW4oaW5wdXQsIGRlbGltaXRlcikge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGNvbnN0IG91dHB1dCA9IFtdO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1mb3Itb2ZcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHZhbHVlID0gaW5wdXRbaV07XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRoaXMgaXMgYSBoYWNrIHRvIGZpeCBhIFZ1ZTMtc3BlY2lmaWMgYnVnIHRoYXQgY2F1c2VzIGFuIGluZmluaXRlIGxvb3Agb2ZcbiAgICAgIC8vIGNvbnNvbGUgd2FybmluZ3MuIFRoaXMgaGFwcGVucyB3aGVuIGEgVnVlIHRlbXBsYXRlIGlzIHJlbmRlcmVkIHdpdGhcbiAgICAgIC8vIGFuIHVuZGVjbGFyZWQgdmFyaWFibGUsIHdoaWNoIHdlIHRyeSB0byBzdHJpbmdpZnksIHVsdGltYXRlbHkgY2F1c2luZ1xuICAgICAgLy8gVnVlIHRvIGlzc3VlIGFub3RoZXIgd2FybmluZyB3aGljaCByZXBlYXRzIGluZGVmaW5pdGVseS5cbiAgICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9wdWxsLzg5ODFcbiAgICAgIGlmIChpc1Z1ZVZpZXdNb2RlbCh2YWx1ZSkpIHtcbiAgICAgICAgb3V0cHV0LnB1c2goJ1tWdWVWaWV3TW9kZWxdJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRwdXQucHVzaChTdHJpbmcodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBvdXRwdXQucHVzaCgnW3ZhbHVlIGNhbm5vdCBiZSBzZXJpYWxpemVkXScpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oZGVsaW1pdGVyKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIHZhbHVlIG1hdGNoZXMgYSByZWdleCBvciBzdHJpbmdcbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHN0cmluZyB0byB0ZXN0XG4gKiBAcGFyYW0gcGF0dGVybiBFaXRoZXIgYSByZWdleCBvciBhIHN0cmluZyBhZ2FpbnN0IHdoaWNoIGB2YWx1ZWAgd2lsbCBiZSBtYXRjaGVkXG4gKiBAcGFyYW0gcmVxdWlyZUV4YWN0U3RyaW5nTWF0Y2ggSWYgdHJ1ZSwgYHZhbHVlYCBtdXN0IG1hdGNoIGBwYXR0ZXJuYCBleGFjdGx5LiBJZiBmYWxzZSwgYHZhbHVlYCB3aWxsIG1hdGNoXG4gKiBgcGF0dGVybmAgaWYgaXQgY29udGFpbnMgYHBhdHRlcm5gLiBPbmx5IGFwcGxpZXMgdG8gc3RyaW5nLXR5cGUgcGF0dGVybnMuXG4gKi9cbmZ1bmN0aW9uIGlzTWF0Y2hpbmdQYXR0ZXJuKHZhbHVlLCBwYXR0ZXJuLCByZXF1aXJlRXhhY3RTdHJpbmdNYXRjaCA9IGZhbHNlKSB7XG4gIGlmICghaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkge1xuICAgIHJldHVybiBwYXR0ZXJuLnRlc3QodmFsdWUpO1xuICB9XG4gIGlmIChpc1N0cmluZyhwYXR0ZXJuKSkge1xuICAgIHJldHVybiByZXF1aXJlRXhhY3RTdHJpbmdNYXRjaCA/IHZhbHVlID09PSBwYXR0ZXJuIDogdmFsdWUuaW5jbHVkZXMocGF0dGVybik7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFRlc3QgdGhlIGdpdmVuIHN0cmluZyBhZ2FpbnN0IGFuIGFycmF5IG9mIHN0cmluZ3MgYW5kIHJlZ2V4ZXMuIEJ5IGRlZmF1bHQsIHN0cmluZyBtYXRjaGluZyBpcyBkb25lIG9uIGFcbiAqIHN1YnN0cmluZy1pbmNsdXNpb24gYmFzaXMgcmF0aGVyIHRoYW4gYSBzdHJpY3QgZXF1YWxpdHkgYmFzaXNcbiAqXG4gKiBAcGFyYW0gdGVzdFN0cmluZyBUaGUgc3RyaW5nIHRvIHRlc3RcbiAqIEBwYXJhbSBwYXR0ZXJucyBUaGUgcGF0dGVybnMgYWdhaW5zdCB3aGljaCB0byB0ZXN0IHRoZSBzdHJpbmdcbiAqIEBwYXJhbSByZXF1aXJlRXhhY3RTdHJpbmdNYXRjaCBJZiB0cnVlLCBgdGVzdFN0cmluZ2AgbXVzdCBtYXRjaCBvbmUgb2YgdGhlIGdpdmVuIHN0cmluZyBwYXR0ZXJucyBleGFjdGx5IGluIG9yZGVyIHRvXG4gKiBjb3VudC4gSWYgZmFsc2UsIGB0ZXN0U3RyaW5nYCB3aWxsIG1hdGNoIGEgc3RyaW5nIHBhdHRlcm4gaWYgaXQgY29udGFpbnMgdGhhdCBwYXR0ZXJuLlxuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gc3RyaW5nTWF0Y2hlc1NvbWVQYXR0ZXJuKHRlc3RTdHJpbmcsIHBhdHRlcm5zID0gW10sIHJlcXVpcmVFeGFjdFN0cmluZ01hdGNoID0gZmFsc2UpIHtcbiAgcmV0dXJuIHBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBpc01hdGNoaW5nUGF0dGVybih0ZXN0U3RyaW5nLCBwYXR0ZXJuLCByZXF1aXJlRXhhY3RTdHJpbmdNYXRjaCkpO1xufVxuZXhwb3J0IHsgaXNNYXRjaGluZ1BhdHRlcm4sIHNhZmVKb2luLCBzbmlwTGluZSwgc3RyaW5nTWF0Y2hlc1NvbWVQYXR0ZXJuLCB0cnVuY2F0ZSB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBodG1sVHJlZUFzU3RyaW5nIH0gZnJvbSAnLi9icm93c2VyLmpzJztcbmltcG9ydCB7IGlzRXJyb3IsIGlzRXZlbnQsIGlzSW5zdGFuY2VPZiwgaXNQcmltaXRpdmUsIGlzRWxlbWVudCB9IGZyb20gJy4vaXMuanMnO1xuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyB0cnVuY2F0ZSB9IGZyb20gJy4vc3RyaW5nLmpzJztcblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuXG4vKipcbiAqIFJlcGxhY2UgYSBtZXRob2QgaW4gYW4gb2JqZWN0IHdpdGggYSB3cmFwcGVkIHZlcnNpb24gb2YgaXRzZWxmLlxuICpcbiAqIElmIHRoZSBtZXRob2Qgb24gdGhlIHBhc3NlZCBvYmplY3QgaXMgbm90IGEgZnVuY3Rpb24sIHRoZSB3cmFwcGVyIHdpbGwgbm90IGJlIGFwcGxpZWQuXG4gKlxuICogQHBhcmFtIHNvdXJjZSBBbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG1ldGhvZCB0byBiZSB3cmFwcGVkLlxuICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIG1ldGhvZCB0byBiZSB3cmFwcGVkLlxuICogQHBhcmFtIHJlcGxhY2VtZW50RmFjdG9yeSBBIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBvcmlnaW5hbCB2ZXJzaW9uIG9mIHRoZSBnaXZlbiBtZXRob2QgYW5kIHJldHVybnMgYVxuICogd3JhcHBlZCB2ZXJzaW9uLiBOb3RlOiBUaGUgZnVuY3Rpb24gcmV0dXJuZWQgYnkgYHJlcGxhY2VtZW50RmFjdG9yeWAgbmVlZHMgdG8gYmUgYSBub24tYXJyb3cgZnVuY3Rpb24sIGluIG9yZGVyIHRvXG4gKiBwcmVzZXJ2ZSB0aGUgY29ycmVjdCB2YWx1ZSBvZiBgdGhpc2AsIGFuZCB0aGUgb3JpZ2luYWwgbWV0aG9kIG11c3QgYmUgY2FsbGVkIHVzaW5nIGBvcmlnTWV0aG9kLmNhbGwodGhpcywgPG90aGVyXG4gKiBhcmdzPilgIG9yIGBvcmlnTWV0aG9kLmFwcGx5KHRoaXMsIFs8b3RoZXIgYXJncz5dKWAgKHJhdGhlciB0aGFuIGJlaW5nIGNhbGxlZCBkaXJlY3RseSksIGFnYWluIHRvIHByZXNlcnZlIGB0aGlzYC5cbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xuZnVuY3Rpb24gZmlsbChzb3VyY2UsIG5hbWUsIHJlcGxhY2VtZW50RmFjdG9yeSkge1xuICBpZiAoIShuYW1lIGluIHNvdXJjZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBleHBsaWNpdGx5IGNhc3RpbmcgdG8gdW5rbm93biBiZWNhdXNlIHdlIGRvbid0IGtub3cgdGhlIHR5cGUgb2YgdGhlIG1ldGhvZCBpbml0aWFsbHkgYXQgYWxsXG4gIGNvbnN0IG9yaWdpbmFsID0gc291cmNlW25hbWVdO1xuICBpZiAodHlwZW9mIG9yaWdpbmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHdyYXBwZWQgPSByZXBsYWNlbWVudEZhY3Rvcnkob3JpZ2luYWwpO1xuXG4gIC8vIE1ha2Ugc3VyZSBpdCdzIGEgZnVuY3Rpb24gZmlyc3QsIGFzIHdlIG5lZWQgdG8gYXR0YWNoIGFuIGVtcHR5IHByb3RvdHlwZSBmb3IgYGRlZmluZVByb3BlcnRpZXNgIHRvIHdvcmtcbiAgLy8gb3RoZXJ3aXNlIGl0J2xsIHRocm93IFwiVHlwZUVycm9yOiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyBjYWxsZWQgb24gbm9uLW9iamVjdFwiXG4gIGlmICh0eXBlb2Ygd3JhcHBlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG1hcmtGdW5jdGlvbldyYXBwZWQod3JhcHBlZCwgb3JpZ2luYWwpO1xuICB9XG4gIHRyeSB7XG4gICAgc291cmNlW25hbWVdID0gd3JhcHBlZDtcbiAgfSBjYXRjaCB7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcubG9nKGBGYWlsZWQgdG8gcmVwbGFjZSBtZXRob2QgXCIke25hbWV9XCIgaW4gb2JqZWN0YCwgc291cmNlKTtcbiAgfVxufVxuXG4vKipcbiAqIERlZmluZXMgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvbiB0aGUgZ2l2ZW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBvYmogVGhlIG9iamVjdCBvbiB3aGljaCB0byBzZXQgdGhlIHByb3BlcnR5XG4gKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gYmUgc2V0XG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRvIHNldCB0aGUgcHJvcGVydHlcbiAqL1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7XG4gICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSwgLy8gdGhlIGRlZmF1bHQsIHNvIHdlIGNhbiBzYXZlIG9uIGJ1bmRsZSBzaXplIGJ5IG5vdCBleHBsaWNpdGx5IHNldHRpbmcgaXRcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gY2F0Y2ggKG9fTykge1xuICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZyhgRmFpbGVkIHRvIGFkZCBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBcIiR7bmFtZX1cIiB0byBvYmplY3RgLCBvYmopO1xuICB9XG59XG5cbi8qKlxuICogUmVtZW1iZXJzIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBvbiB0aGUgd3JhcHBlZCBmdW5jdGlvbiBhbmRcbiAqIHBhdGNoZXMgdXAgdGhlIHByb3RvdHlwZS5cbiAqXG4gKiBAcGFyYW0gd3JhcHBlZCB0aGUgd3JhcHBlciBmdW5jdGlvblxuICogQHBhcmFtIG9yaWdpbmFsIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB0aGF0IGdldHMgd3JhcHBlZFxuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb25XcmFwcGVkKHdyYXBwZWQsIG9yaWdpbmFsKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcHJvdG8gPSBvcmlnaW5hbC5wcm90b3R5cGUgfHwge307XG4gICAgd3JhcHBlZC5wcm90b3R5cGUgPSBvcmlnaW5hbC5wcm90b3R5cGUgPSBwcm90bztcbiAgICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkod3JhcHBlZCwgJ19fc2VudHJ5X29yaWdpbmFsX18nLCBvcmlnaW5hbCk7XG4gIH0gY2F0Y2ggKG9fTykge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eVxufVxuXG4vKipcbiAqIFRoaXMgZXh0cmFjdHMgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIGlmIGF2YWlsYWJsZS4gIFNlZVxuICogYG1hcmtGdW5jdGlvbldyYXBwZWRgIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIEBwYXJhbSBmdW5jIHRoZSBmdW5jdGlvbiB0byB1bndyYXBcbiAqIEByZXR1cm5zIHRoZSB1bndyYXBwZWQgdmVyc2lvbiBvZiB0aGUgZnVuY3Rpb24gaWYgYXZhaWxhYmxlLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZnVuY3Rpb24gZ2V0T3JpZ2luYWxGdW5jdGlvbihmdW5jKSB7XG4gIHJldHVybiBmdW5jLl9fc2VudHJ5X29yaWdpbmFsX187XG59XG5cbi8qKlxuICogVHJhbnNmb3JtcyBhbnkgYEVycm9yYCBvciBgRXZlbnRgIGludG8gYSBwbGFpbiBvYmplY3Qgd2l0aCBhbGwgb2YgdGhlaXIgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLCBhbmQgc29tZSBvZiB0aGVpclxuICogbm9uLWVudW1lcmFibGUgcHJvcGVydGllcyBhdHRhY2hlZC5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgSW5pdGlhbCBzb3VyY2UgdGhhdCB3ZSBoYXZlIHRvIHRyYW5zZm9ybSBpbiBvcmRlciBmb3IgaXQgdG8gYmUgdXNhYmxlIGJ5IHRoZSBzZXJpYWxpemVyXG4gKiBAcmV0dXJucyBBbiBFdmVudCBvciBFcnJvciB0dXJuZWQgaW50byBhbiBvYmplY3QgLSBvciB0aGUgdmFsdWUgYXJndW1lbnQgaXRzZWxmLCB3aGVuIHZhbHVlIGlzIG5laXRoZXIgYW4gRXZlbnQgbm9yXG4gKiAgYW4gRXJyb3IuXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRUb1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgIHJldHVybiB7XG4gICAgICBtZXNzYWdlOiB2YWx1ZS5tZXNzYWdlLFxuICAgICAgbmFtZTogdmFsdWUubmFtZSxcbiAgICAgIHN0YWNrOiB2YWx1ZS5zdGFjayxcbiAgICAgIC4uLmdldE93blByb3BlcnRpZXModmFsdWUpXG4gICAgfTtcbiAgfSBlbHNlIGlmIChpc0V2ZW50KHZhbHVlKSkge1xuICAgIGNvbnN0IG5ld09iaiA9IHtcbiAgICAgIHR5cGU6IHZhbHVlLnR5cGUsXG4gICAgICB0YXJnZXQ6IHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHZhbHVlLnRhcmdldCksXG4gICAgICBjdXJyZW50VGFyZ2V0OiBzZXJpYWxpemVFdmVudFRhcmdldCh2YWx1ZS5jdXJyZW50VGFyZ2V0KSxcbiAgICAgIC4uLmdldE93blByb3BlcnRpZXModmFsdWUpXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIEN1c3RvbUV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiBpc0luc3RhbmNlT2YodmFsdWUsIEN1c3RvbUV2ZW50KSkge1xuICAgICAgbmV3T2JqLmRldGFpbCA9IHZhbHVlLmRldGFpbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHRhcmdldCBvZiBhbiBgRXZlbnRgIG9iamVjdCAqL1xuZnVuY3Rpb24gc2VyaWFsaXplRXZlbnRUYXJnZXQodGFyZ2V0KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGlzRWxlbWVudCh0YXJnZXQpID8gaHRtbFRyZWVBc1N0cmluZyh0YXJnZXQpIDogT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRhcmdldCk7XG4gIH0gY2F0Y2ggKF9vTykge1xuICAgIHJldHVybiAnPHVua25vd24+JztcbiAgfVxufVxuXG4vKiogRmlsdGVycyBvdXQgYWxsIGJ1dCBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcyAqL1xuZnVuY3Rpb24gZ2V0T3duUHJvcGVydGllcyhvYmopIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGV4dHJhY3RlZFByb3BzID0ge307XG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wZXJ0eSkpIHtcbiAgICAgICAgZXh0cmFjdGVkUHJvcHNbcHJvcGVydHldID0gb2JqW3Byb3BlcnR5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV4dHJhY3RlZFByb3BzO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7fTtcbiAgfVxufVxuXG4vKipcbiAqIEdpdmVuIGFueSBjYXB0dXJlZCBleGNlcHRpb24sIGV4dHJhY3QgaXRzIGtleXMgYW5kIGNyZWF0ZSBhIHNvcnRlZFxuICogYW5kIHRydW5jYXRlZCBsaXN0IHRoYXQgd2lsbCBiZSB1c2VkIGluc2lkZSB0aGUgZXZlbnQgbWVzc2FnZS5cbiAqIGVnLiBgTm9uLWVycm9yIGV4Y2VwdGlvbiBjYXB0dXJlZCB3aXRoIGtleXM6IGZvbywgYmFyLCBiYXpgXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RFeGNlcHRpb25LZXlzRm9yTWVzc2FnZShleGNlcHRpb24sIG1heExlbmd0aCA9IDQwKSB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjb252ZXJ0VG9QbGFpbk9iamVjdChleGNlcHRpb24pKTtcbiAga2V5cy5zb3J0KCk7XG4gIGNvbnN0IGZpcnN0S2V5ID0ga2V5c1swXTtcbiAgaWYgKCFmaXJzdEtleSkge1xuICAgIHJldHVybiAnW29iamVjdCBoYXMgbm8ga2V5c10nO1xuICB9XG4gIGlmIChmaXJzdEtleS5sZW5ndGggPj0gbWF4TGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRydW5jYXRlKGZpcnN0S2V5LCBtYXhMZW5ndGgpO1xuICB9XG4gIGZvciAobGV0IGluY2x1ZGVkS2V5cyA9IGtleXMubGVuZ3RoOyBpbmNsdWRlZEtleXMgPiAwOyBpbmNsdWRlZEtleXMtLSkge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBrZXlzLnNsaWNlKDAsIGluY2x1ZGVkS2V5cykuam9pbignLCAnKTtcbiAgICBpZiAoc2VyaWFsaXplZC5sZW5ndGggPiBtYXhMZW5ndGgpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoaW5jbHVkZWRLZXlzID09PSBrZXlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQ7XG4gICAgfVxuICAgIHJldHVybiB0cnVuY2F0ZShzZXJpYWxpemVkLCBtYXhMZW5ndGgpO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBHaXZlbiBhbnkgb2JqZWN0LCByZXR1cm4gYSBuZXcgb2JqZWN0IGhhdmluZyByZW1vdmVkIGFsbCBmaWVsZHMgd2hvc2UgdmFsdWUgd2FzIGB1bmRlZmluZWRgLlxuICogV29ya3MgcmVjdXJzaXZlbHkgb24gb2JqZWN0cyBhbmQgYXJyYXlzLlxuICpcbiAqIEF0dGVudGlvbjogVGhpcyBmdW5jdGlvbiBrZWVwcyBjaXJjdWxhciByZWZlcmVuY2VzIGluIHRoZSByZXR1cm5lZCBvYmplY3QuXG4gKlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiBpcyBubyBsb25nZXIgdXNlZCBieSB0aGUgU0RLIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgdmVyc2lvbi5cbiAqL1xuZnVuY3Rpb24gZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZSkge1xuICAvLyBUaGlzIG1hcCBrZWVwcyB0cmFjayBvZiB3aGF0IGFscmVhZHkgdmlzaXRlZCBub2RlcyBtYXAgdG8uXG4gIC8vIE91ciBTZXQgLSBiYXNlZCBtZW1vQnVpbGRlciBkb2Vzbid0IHdvcmsgaGVyZSBiZWNhdXNlIHdlIHdhbnQgdG8gdGhlIG91dHB1dCBvYmplY3QgdG8gaGF2ZSB0aGUgc2FtZSBjaXJjdWxhclxuICAvLyByZWZlcmVuY2VzIGFzIHRoZSBpbnB1dCBvYmplY3QuXG4gIGNvbnN0IG1lbW9pemF0aW9uTWFwID0gbmV3IE1hcCgpO1xuXG4gIC8vIFRoaXMgZnVuY3Rpb24ganVzdCBwcm94aWVzIGBfZHJvcFVuZGVmaW5lZEtleXNgIHRvIGtlZXAgdGhlIGBtZW1vQnVpbGRlcmAgb3V0IG9mIHRoaXMgZnVuY3Rpb24ncyBBUElcbiAgcmV0dXJuIF9kcm9wVW5kZWZpbmVkS2V5cyhpbnB1dFZhbHVlLCBtZW1vaXphdGlvbk1hcCk7XG59XG5mdW5jdGlvbiBfZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZSwgbWVtb2l6YXRpb25NYXApIHtcbiAgLy8gRWFybHkgcmV0dXJuIGZvciBwcmltaXRpdmUgdmFsdWVzXG4gIGlmIChpbnB1dFZhbHVlID09PSBudWxsIHx8IHR5cGVvZiBpbnB1dFZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBpbnB1dFZhbHVlO1xuICB9XG5cbiAgLy8gQ2hlY2sgbWVtbyBtYXAgZmlyc3QgZm9yIGFsbCBvYmplY3QgdHlwZXNcbiAgY29uc3QgbWVtb1ZhbCA9IG1lbW9pemF0aW9uTWFwLmdldChpbnB1dFZhbHVlKTtcbiAgaWYgKG1lbW9WYWwgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBtZW1vVmFsO1xuICB9XG5cbiAgLy8gaGFuZGxlIGFycmF5c1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dFZhbHVlKSkge1xuICAgIGNvbnN0IHJldHVyblZhbHVlID0gW107XG4gICAgLy8gU3RvcmUgbWFwcGluZyB0byBoYW5kbGUgY2lyY3VsYXIgcmVmZXJlbmNlc1xuICAgIG1lbW9pemF0aW9uTWFwLnNldChpbnB1dFZhbHVlLCByZXR1cm5WYWx1ZSk7XG4gICAgaW5wdXRWYWx1ZS5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgIHJldHVyblZhbHVlLnB1c2goX2Ryb3BVbmRlZmluZWRLZXlzKHZhbHVlLCBtZW1vaXphdGlvbk1hcCkpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgfVxuICBpZiAoaXNQb2pvKGlucHV0VmFsdWUpKSB7XG4gICAgY29uc3QgcmV0dXJuVmFsdWUgPSB7fTtcbiAgICAvLyBTdG9yZSBtYXBwaW5nIHRvIGhhbmRsZSBjaXJjdWxhciByZWZlcmVuY2VzXG4gICAgbWVtb2l6YXRpb25NYXAuc2V0KGlucHV0VmFsdWUsIHJldHVyblZhbHVlKTtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXRWYWx1ZSk7XG4gICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb25zdCB2YWwgPSBpbnB1dFZhbHVlW2tleV07XG4gICAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuVmFsdWVba2V5XSA9IF9kcm9wVW5kZWZpbmVkS2V5cyh2YWwsIG1lbW9pemF0aW9uTWFwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gIH1cblxuICAvLyBGb3Igb3RoZXIgb2JqZWN0IHR5cGVzLCByZXR1cm4gYXMgaXNcbiAgcmV0dXJuIGlucHV0VmFsdWU7XG59XG5mdW5jdGlvbiBpc1Bvam8oaW5wdXQpIHtcbiAgLy8gUGxhaW4gb2JqZWN0cyBoYXZlIE9iamVjdCBhcyBjb25zdHJ1Y3RvciBvciBubyBjb25zdHJ1Y3RvclxuICBjb25zdCBjb25zdHJ1Y3RvciA9IGlucHV0LmNvbnN0cnVjdG9yO1xuICByZXR1cm4gY29uc3RydWN0b3IgPT09IE9iamVjdCB8fCBjb25zdHJ1Y3RvciA9PT0gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEVuc3VyZSB0aGF0IHNvbWV0aGluZyBpcyBhbiBvYmplY3QuXG4gKlxuICogVHVybnMgYHVuZGVmaW5lZGAgYW5kIGBudWxsYCBpbnRvIGBTdHJpbmdgcyBhbmQgYWxsIG90aGVyIHByaW1pdGl2ZXMgaW50byBpbnN0YW5jZXMgb2YgdGhlaXIgcmVzcGVjdGl2ZSB3cmFwcGVyXG4gKiBjbGFzc2VzIChTdHJpbmcsIEJvb2xlYW4sIE51bWJlciwgZXRjLikuIEFjdHMgYXMgdGhlIGlkZW50aXR5IGZ1bmN0aW9uIG9uIG5vbi1wcmltaXRpdmVzLlxuICpcbiAqIEBwYXJhbSB3YXQgVGhlIHN1YmplY3Qgb2YgdGhlIG9iamVjdGlmaWNhdGlvblxuICogQHJldHVybnMgQSB2ZXJzaW9uIG9mIGB3YXRgIHdoaWNoIGNhbiBzYWZlbHkgYmUgdXNlZCB3aXRoIGBPYmplY3RgIGNsYXNzIG1ldGhvZHNcbiAqL1xuZnVuY3Rpb24gb2JqZWN0aWZ5KHdhdCkge1xuICBsZXQgb2JqZWN0aWZpZWQ7XG4gIHN3aXRjaCAodHJ1ZSkge1xuICAgIC8vIHRoaXMgd2lsbCBjYXRjaCBib3RoIHVuZGVmaW5lZCBhbmQgbnVsbFxuICAgIGNhc2Ugd2F0ID09IHVuZGVmaW5lZDpcbiAgICAgIG9iamVjdGlmaWVkID0gbmV3IFN0cmluZyh3YXQpO1xuICAgICAgYnJlYWs7XG5cbiAgICAvLyBUaG91Z2ggc3ltYm9scyBhbmQgYmlnaW50cyBkbyBoYXZlIHdyYXBwZXIgY2xhc3NlcyAoYFN5bWJvbGAgYW5kIGBCaWdJbnRgLCByZXNwZWN0aXZlbHkpLCBmb3Igd2hhdGV2ZXIgcmVhc29uXG4gICAgLy8gdGhvc2UgY2xhc3NlcyBkb24ndCBoYXZlIGNvbnN0cnVjdG9ycyB3aGljaCBjYW4gYmUgdXNlZCB3aXRoIHRoZSBgbmV3YCBrZXl3b3JkLiBXZSB0aGVyZWZvcmUgbmVlZCB0byBjYXN0IGVhY2ggYXNcbiAgICAvLyBhbiBvYmplY3QgaW4gb3JkZXIgdG8gd3JhcCBpdC5cbiAgICBjYXNlIHR5cGVvZiB3YXQgPT09ICdzeW1ib2wnIHx8IHR5cGVvZiB3YXQgPT09ICdiaWdpbnQnOlxuICAgICAgb2JqZWN0aWZpZWQgPSBPYmplY3Qod2F0KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gdGhpcyB3aWxsIGNhdGNoIHRoZSByZW1haW5pbmcgcHJpbWl0aXZlczogYFN0cmluZ2AsIGBOdW1iZXJgLCBhbmQgYEJvb2xlYW5gXG4gICAgY2FzZSBpc1ByaW1pdGl2ZSh3YXQpOlxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgb2JqZWN0aWZpZWQgPSBuZXcgd2F0LmNvbnN0cnVjdG9yKHdhdCk7XG4gICAgICBicmVhaztcblxuICAgIC8vIGJ5IHByb2Nlc3Mgb2YgZWxpbWluYXRpb24sIGF0IHRoaXMgcG9pbnQgd2Uga25vdyB0aGF0IGB3YXRgIG11c3QgYWxyZWFkeSBiZSBhbiBvYmplY3RcbiAgICBkZWZhdWx0OlxuICAgICAgb2JqZWN0aWZpZWQgPSB3YXQ7XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gb2JqZWN0aWZpZWQ7XG59XG5leHBvcnQgeyBhZGROb25FbnVtZXJhYmxlUHJvcGVydHksIGNvbnZlcnRUb1BsYWluT2JqZWN0LCBkcm9wVW5kZWZpbmVkS2V5cywgZXh0cmFjdEV4Y2VwdGlvbktleXNGb3JNZXNzYWdlLCBmaWxsLCBnZXRPcmlnaW5hbEZ1bmN0aW9uLCBtYXJrRnVuY3Rpb25XcmFwcGVkLCBvYmplY3RpZnkgfTtcbiIsImltcG9ydCB7IGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSB9IGZyb20gJy4vb2JqZWN0LmpzJztcbmltcG9ydCB7IHNuaXBMaW5lIH0gZnJvbSAnLi9zdHJpbmcuanMnO1xuaW1wb3J0IHsgR0xPQkFMX09CSiB9IGZyb20gJy4vd29ybGR3aWRlLmpzJztcbmZ1bmN0aW9uIGdldENyeXB0bygpIHtcbiAgY29uc3QgZ2JsID0gR0xPQkFMX09CSjtcbiAgcmV0dXJuIGdibC5jcnlwdG8gfHwgZ2JsLm1zQ3J5cHRvO1xufVxuXG4vKipcbiAqIFVVSUQ0IGdlbmVyYXRvclxuICogQHBhcmFtIGNyeXB0byBPYmplY3QgdGhhdCBwcm92aWRlcyB0aGUgY3J5cHRvIEFQSS5cbiAqIEByZXR1cm5zIHN0cmluZyBHZW5lcmF0ZWQgVVVJRDQuXG4gKi9cbmZ1bmN0aW9uIHV1aWQ0KGNyeXB0byA9IGdldENyeXB0bygpKSB7XG4gIGxldCBnZXRSYW5kb21CeXRlID0gKCkgPT4gTWF0aC5yYW5kb20oKSAqIDE2O1xuICB0cnkge1xuICAgIGlmIChjcnlwdG8/LnJhbmRvbVVVSUQpIHtcbiAgICAgIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpO1xuICAgIH1cbiAgICBpZiAoY3J5cHRvPy5nZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIGdldFJhbmRvbUJ5dGUgPSAoKSA9PiB7XG4gICAgICAgIC8vIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgbWlnaHQgcmV0dXJuIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHRoZSB0eXBlZCBhcnJheVxuICAgICAgICAvLyBpbiBvbGQgQ2hyb21pdW0gdmVyc2lvbnMgKGUuZy4gMjMuMC4xMjM1LjAgKDE1MTQyMikpXG4gICAgICAgIC8vIEhvd2V2ZXIsIGB0eXBlZEFycmF5YCBpcyBzdGlsbCBmaWxsZWQgaW4tcGxhY2UuXG4gICAgICAgIC8vIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NyeXB0by9nZXRSYW5kb21WYWx1ZXMjdHlwZWRhcnJheVxuICAgICAgICBjb25zdCB0eXBlZEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMSk7XG4gICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXModHlwZWRBcnJheSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIHJldHVybiB0eXBlZEFycmF5WzBdO1xuICAgICAgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKF8pIHtcbiAgICAvLyBzb21lIHJ1bnRpbWVzIGNhbiBjcmFzaCBpbnZva2luZyBjcnlwdG9cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy84OTM1XG4gIH1cblxuICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHQvMjExNzUyMyMyMTE3NTIzXG4gIC8vIENvbmNhdGVuYXRpbmcgdGhlIGZvbGxvd2luZyBudW1iZXJzIGFzIHN0cmluZ3MgcmVzdWx0cyBpbiAnMTAwMDAwMDAxMDAwNDAwMDgwMDAxMDAwMDAwMDAwMDAnXG4gIHJldHVybiAoWzFlN10gKyAxZTMgKyA0ZTMgKyA4ZTMgKyAxZTExKS5yZXBsYWNlKC9bMDE4XS9nLCBjID0+XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gIChjIF4gKGdldFJhbmRvbUJ5dGUoKSAmIDE1KSA+PiBjIC8gNCkudG9TdHJpbmcoMTYpKTtcbn1cbmZ1bmN0aW9uIGdldEZpcnN0RXhjZXB0aW9uKGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5leGNlcHRpb24/LnZhbHVlcz8uWzBdO1xufVxuXG4vKipcbiAqIEV4dHJhY3RzIGVpdGhlciBtZXNzYWdlIG9yIHR5cGUrdmFsdWUgZnJvbSBhbiBldmVudCB0aGF0IGNhbiBiZSB1c2VkIGZvciB1c2VyLWZhY2luZyBsb2dzXG4gKiBAcmV0dXJucyBldmVudCdzIGRlc2NyaXB0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldEV2ZW50RGVzY3JpcHRpb24oZXZlbnQpIHtcbiAgY29uc3Qge1xuICAgIG1lc3NhZ2UsXG4gICAgZXZlbnRfaWQ6IGV2ZW50SWRcbiAgfSA9IGV2ZW50O1xuICBpZiAobWVzc2FnZSkge1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGNvbnN0IGZpcnN0RXhjZXB0aW9uID0gZ2V0Rmlyc3RFeGNlcHRpb24oZXZlbnQpO1xuICBpZiAoZmlyc3RFeGNlcHRpb24pIHtcbiAgICBpZiAoZmlyc3RFeGNlcHRpb24udHlwZSAmJiBmaXJzdEV4Y2VwdGlvbi52YWx1ZSkge1xuICAgICAgcmV0dXJuIGAke2ZpcnN0RXhjZXB0aW9uLnR5cGV9OiAke2ZpcnN0RXhjZXB0aW9uLnZhbHVlfWA7XG4gICAgfVxuICAgIHJldHVybiBmaXJzdEV4Y2VwdGlvbi50eXBlIHx8IGZpcnN0RXhjZXB0aW9uLnZhbHVlIHx8IGV2ZW50SWQgfHwgJzx1bmtub3duPic7XG4gIH1cbiAgcmV0dXJuIGV2ZW50SWQgfHwgJzx1bmtub3duPic7XG59XG5cbi8qKlxuICogQWRkcyBleGNlcHRpb24gdmFsdWVzLCB0eXBlIGFuZCB2YWx1ZSB0byBhbiBzeW50aGV0aWMgRXhjZXB0aW9uLlxuICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCB0byBtb2RpZnkuXG4gKiBAcGFyYW0gdmFsdWUgVmFsdWUgb2YgdGhlIGV4Y2VwdGlvbi5cbiAqIEBwYXJhbSB0eXBlIFR5cGUgb2YgdGhlIGV4Y2VwdGlvbi5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gYWRkRXhjZXB0aW9uVHlwZVZhbHVlKGV2ZW50LCB2YWx1ZSwgdHlwZSkge1xuICBjb25zdCBleGNlcHRpb24gPSBldmVudC5leGNlcHRpb24gPSBldmVudC5leGNlcHRpb24gfHwge307XG4gIGNvbnN0IHZhbHVlcyA9IGV4Y2VwdGlvbi52YWx1ZXMgPSBleGNlcHRpb24udmFsdWVzIHx8IFtdO1xuICBjb25zdCBmaXJzdEV4Y2VwdGlvbiA9IHZhbHVlc1swXSA9IHZhbHVlc1swXSB8fCB7fTtcbiAgaWYgKCFmaXJzdEV4Y2VwdGlvbi52YWx1ZSkge1xuICAgIGZpcnN0RXhjZXB0aW9uLnZhbHVlID0gdmFsdWUgfHwgJyc7XG4gIH1cbiAgaWYgKCFmaXJzdEV4Y2VwdGlvbi50eXBlKSB7XG4gICAgZmlyc3RFeGNlcHRpb24udHlwZSA9IHR5cGUgfHwgJ0Vycm9yJztcbiAgfVxufVxuXG4vKipcbiAqIEFkZHMgZXhjZXB0aW9uIG1lY2hhbmlzbSBkYXRhIHRvIGEgZ2l2ZW4gZXZlbnQuIFVzZXMgZGVmYXVsdHMgaWYgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgbm90IHBhc3NlZC5cbiAqXG4gKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSBuZXdNZWNoYW5pc20gTWVjaGFuaXNtIGRhdGEgdG8gYWRkIHRvIHRoZSBldmVudC5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gYWRkRXhjZXB0aW9uTWVjaGFuaXNtKGV2ZW50LCBuZXdNZWNoYW5pc20pIHtcbiAgY29uc3QgZmlyc3RFeGNlcHRpb24gPSBnZXRGaXJzdEV4Y2VwdGlvbihldmVudCk7XG4gIGlmICghZmlyc3RFeGNlcHRpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZGVmYXVsdE1lY2hhbmlzbSA9IHtcbiAgICB0eXBlOiAnZ2VuZXJpYycsXG4gICAgaGFuZGxlZDogdHJ1ZVxuICB9O1xuICBjb25zdCBjdXJyZW50TWVjaGFuaXNtID0gZmlyc3RFeGNlcHRpb24ubWVjaGFuaXNtO1xuICBmaXJzdEV4Y2VwdGlvbi5tZWNoYW5pc20gPSB7XG4gICAgLi4uZGVmYXVsdE1lY2hhbmlzbSxcbiAgICAuLi5jdXJyZW50TWVjaGFuaXNtLFxuICAgIC4uLm5ld01lY2hhbmlzbVxuICB9O1xuICBpZiAobmV3TWVjaGFuaXNtICYmICdkYXRhJyBpbiBuZXdNZWNoYW5pc20pIHtcbiAgICBjb25zdCBtZXJnZWREYXRhID0ge1xuICAgICAgLi4uY3VycmVudE1lY2hhbmlzbT8uZGF0YSxcbiAgICAgIC4uLm5ld01lY2hhbmlzbS5kYXRhXG4gICAgfTtcbiAgICBmaXJzdEV4Y2VwdGlvbi5tZWNoYW5pc20uZGF0YSA9IG1lcmdlZERhdGE7XG4gIH1cbn1cblxuLy8gaHR0cHM6Ly9zZW12ZXIub3JnLyNpcy10aGVyZS1hLXN1Z2dlc3RlZC1yZWd1bGFyLWV4cHJlc3Npb24tcmVnZXgtdG8tY2hlY2stYS1zZW12ZXItc3RyaW5nXG5jb25zdCBTRU1WRVJfUkVHRVhQID0gL14oMHxbMS05XVxcZCopXFwuKDB8WzEtOV1cXGQqKVxcLigwfFsxLTldXFxkKikoPzotKCg/OjB8WzEtOV1cXGQqfFxcZCpbYS16QS1aLV1bMC05YS16QS1aLV0qKSg/OlxcLig/OjB8WzEtOV1cXGQqfFxcZCpbYS16QS1aLV1bMC05YS16QS1aLV0qKSkqKSk/KD86XFwrKFswLTlhLXpBLVotXSsoPzpcXC5bMC05YS16QS1aLV0rKSopKT8kLztcblxuLyoqXG4gKiBSZXByZXNlbnRzIFNlbWFudGljIFZlcnNpb25pbmcgb2JqZWN0XG4gKi9cblxuZnVuY3Rpb24gX3BhcnNlSW50KGlucHV0KSB7XG4gIHJldHVybiBwYXJzZUludChpbnB1dCB8fCAnJywgMTApO1xufVxuXG4vKipcbiAqIFBhcnNlcyBpbnB1dCBpbnRvIGEgU2VtVmVyIGludGVyZmFjZVxuICogQHBhcmFtIGlucHV0IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHNlbXZlciB2ZXJzaW9uXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2VtdmVyKGlucHV0KSB7XG4gIGNvbnN0IG1hdGNoID0gaW5wdXQubWF0Y2goU0VNVkVSX1JFR0VYUCkgfHwgW107XG4gIGNvbnN0IG1ham9yID0gX3BhcnNlSW50KG1hdGNoWzFdKTtcbiAgY29uc3QgbWlub3IgPSBfcGFyc2VJbnQobWF0Y2hbMl0pO1xuICBjb25zdCBwYXRjaCA9IF9wYXJzZUludChtYXRjaFszXSk7XG4gIHJldHVybiB7XG4gICAgYnVpbGRtZXRhZGF0YTogbWF0Y2hbNV0sXG4gICAgbWFqb3I6IGlzTmFOKG1ham9yKSA/IHVuZGVmaW5lZCA6IG1ham9yLFxuICAgIG1pbm9yOiBpc05hTihtaW5vcikgPyB1bmRlZmluZWQgOiBtaW5vcixcbiAgICBwYXRjaDogaXNOYU4ocGF0Y2gpID8gdW5kZWZpbmVkIDogcGF0Y2gsXG4gICAgcHJlcmVsZWFzZTogbWF0Y2hbNF1cbiAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGFkZHMgY29udGV4dCAocHJlL3Bvc3QvbGluZSkgbGluZXMgdG8gdGhlIHByb3ZpZGVkIGZyYW1lXG4gKlxuICogQHBhcmFtIGxpbmVzIHN0cmluZ1tdIGNvbnRhaW5pbmcgYWxsIGxpbmVzXG4gKiBAcGFyYW0gZnJhbWUgU3RhY2tGcmFtZSB0aGF0IHdpbGwgYmUgbXV0YXRlZFxuICogQHBhcmFtIGxpbmVzT2ZDb250ZXh0IG51bWJlciBvZiBjb250ZXh0IGxpbmVzIHdlIHdhbnQgdG8gYWRkIHByZS9wb3N0XG4gKi9cbmZ1bmN0aW9uIGFkZENvbnRleHRUb0ZyYW1lKGxpbmVzLCBmcmFtZSwgbGluZXNPZkNvbnRleHQgPSA1KSB7XG4gIC8vIFdoZW4gdGhlcmUgaXMgbm8gbGluZSBudW1iZXIgaW4gdGhlIGZyYW1lLCBhdHRhY2hpbmcgY29udGV4dCBpcyBub25zZW5zaWNhbCBhbmQgd2lsbCBldmVuIGJyZWFrIGdyb3VwaW5nXG4gIGlmIChmcmFtZS5saW5lbm8gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBtYXhMaW5lcyA9IGxpbmVzLmxlbmd0aDtcbiAgY29uc3Qgc291cmNlTGluZSA9IE1hdGgubWF4KE1hdGgubWluKG1heExpbmVzIC0gMSwgZnJhbWUubGluZW5vIC0gMSksIDApO1xuICBmcmFtZS5wcmVfY29udGV4dCA9IGxpbmVzLnNsaWNlKE1hdGgubWF4KDAsIHNvdXJjZUxpbmUgLSBsaW5lc09mQ29udGV4dCksIHNvdXJjZUxpbmUpLm1hcChsaW5lID0+IHNuaXBMaW5lKGxpbmUsIDApKTtcblxuICAvLyBXZSBndWFyZCBoZXJlIHRvIGVuc3VyZSB0aGlzIGlzIG5vdCBsYXJnZXIgdGhhbiB0aGUgZXhpc3RpbmcgbnVtYmVyIG9mIGxpbmVzXG4gIGNvbnN0IGxpbmVJbmRleCA9IE1hdGgubWluKG1heExpbmVzIC0gMSwgc291cmNlTGluZSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgZnJhbWUuY29udGV4dF9saW5lID0gc25pcExpbmUobGluZXNbbGluZUluZGV4XSwgZnJhbWUuY29sbm8gfHwgMCk7XG4gIGZyYW1lLnBvc3RfY29udGV4dCA9IGxpbmVzLnNsaWNlKE1hdGgubWluKHNvdXJjZUxpbmUgKyAxLCBtYXhMaW5lcyksIHNvdXJjZUxpbmUgKyAxICsgbGluZXNPZkNvbnRleHQpLm1hcChsaW5lID0+IHNuaXBMaW5lKGxpbmUsIDApKTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBvciBub3Qgd2UndmUgYWxyZWFkeSBjYXB0dXJlZCB0aGUgZ2l2ZW4gZXhjZXB0aW9uIChub3RlOiBub3QgYW4gaWRlbnRpY2FsIGV4Y2VwdGlvbiAtIHRoZSB2ZXJ5IG9iamVjdFxuICogaW4gcXVlc3Rpb24pLCBhbmQgbWFya3MgaXQgY2FwdHVyZWQgaWYgbm90LlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGJlY2F1c2UgaXQncyBwb3NzaWJsZSBmb3IgYW4gZXJyb3IgdG8gZ2V0IGNhcHR1cmVkIGJ5IG1vcmUgdGhhbiBvbmUgbWVjaGFuaXNtLiBBZnRlciB3ZSBpbnRlcmNlcHQgYW5kXG4gKiByZWNvcmQgYW4gZXJyb3IsIHdlIHJldGhyb3cgaXQgKGFzc3VtaW5nIHdlJ3ZlIGludGVyY2VwdGVkIGl0IGJlZm9yZSBpdCdzIHJlYWNoZWQgdGhlIHRvcC1sZXZlbCBnbG9iYWwgaGFuZGxlcnMpLCBzb1xuICogdGhhdCB3ZSBkb24ndCBpbnRlcmZlcmUgd2l0aCB3aGF0ZXZlciBlZmZlY3RzIHRoZSBlcnJvciBtaWdodCBoYXZlIGhhZCB3ZXJlIHRoZSBTREsgbm90IHRoZXJlLiBBdCB0aGF0IHBvaW50LCBiZWNhdXNlXG4gKiB0aGUgZXJyb3IgaGFzIGJlZW4gcmV0aHJvd24sIGl0J3MgcG9zc2libGUgZm9yIGl0IHRvIGJ1YmJsZSB1cCB0byBzb21lIG90aGVyIGNvZGUgd2UndmUgaW5zdHJ1bWVudGVkLiBJZiBpdCdzIG5vdFxuICogY2F1Z2h0IGFmdGVyIHRoYXQsIGl0IHdpbGwgYnViYmxlIGFsbCB0aGUgd2F5IHVwIHRvIHRoZSBnbG9iYWwgaGFuZGxlcnMgKHdoaWNoIG9mIGNvdXJzZSB3ZSBhbHNvIGluc3RydW1lbnQpLiBUaGlzXG4gKiBmdW5jdGlvbiBoZWxwcyB1cyBlbnN1cmUgdGhhdCBldmVuIGlmIHdlIGVuY291bnRlciB0aGUgc2FtZSBlcnJvciBtb3JlIHRoYW4gb25jZSwgd2Ugb25seSByZWNvcmQgaXQgdGhlIGZpcnN0IHRpbWUgd2VcbiAqIHNlZSBpdC5cbiAqXG4gKiBOb3RlOiBJdCB3aWxsIGlnbm9yZSBwcmltaXRpdmVzIChhbHdheXMgcmV0dXJuIGBmYWxzZWAgYW5kIG5vdCBtYXJrIHRoZW0gYXMgc2VlbiksIGFzIHByb3BlcnRpZXMgY2FuJ3QgYmUgc2V0IG9uXG4gKiB0aGVtLiB7QGxpbms6IE9iamVjdC5vYmplY3RpZnl9IGNhbiBiZSB1c2VkIG9uIGV4Y2VwdGlvbnMgdG8gY29udmVydCBhbnkgdGhhdCBhcmUgcHJpbWl0aXZlcyBpbnRvIHRoZWlyIGVxdWl2YWxlbnRcbiAqIG9iamVjdCB3cmFwcGVyIGZvcm1zIHNvIHRoYXQgdGhpcyBjaGVjayB3aWxsIGFsd2F5cyB3b3JrLiBIb3dldmVyLCBiZWNhdXNlIHdlIG5lZWQgdG8gZmxhZyB0aGUgZXhhY3Qgb2JqZWN0IHdoaWNoXG4gKiB3aWxsIGdldCByZXRocm93biwgYW5kIGJlY2F1c2UgdGhhdCByZXRocm93aW5nIGhhcHBlbnMgb3V0c2lkZSBvZiB0aGUgZXZlbnQgcHJvY2Vzc2luZyBwaXBlbGluZSwgdGhlIG9iamVjdGlmaWNhdGlvblxuICogbXVzdCBiZSBkb25lIGJlZm9yZSB0aGUgZXhjZXB0aW9uIGNhcHR1cmVkLlxuICpcbiAqIEBwYXJhbSBBIHRocm93biBleGNlcHRpb24gdG8gY2hlY2sgb3IgZmxhZyBhcyBoYXZpbmcgYmVlbiBzZWVuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGV4Y2VwdGlvbiBoYXMgYWxyZWFkeSBiZWVuIGNhcHR1cmVkLCBgZmFsc2VgIGlmIG5vdCAod2l0aCB0aGUgc2lkZSBlZmZlY3Qgb2YgbWFya2luZyBpdCBzZWVuKVxuICovXG5mdW5jdGlvbiBjaGVja09yU2V0QWxyZWFkeUNhdWdodChleGNlcHRpb24pIHtcbiAgaWYgKGlzQWxyZWFkeUNhcHR1cmVkKGV4Y2VwdGlvbikpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB0cnkge1xuICAgIC8vIHNldCBpdCB0aGlzIHdheSByYXRoZXIgdGhhbiBieSBhc3NpZ25tZW50IHNvIHRoYXQgaXQncyBub3QgZW5udW1lcmFibGUgYW5kIHRoZXJlZm9yZSBpc24ndCByZWNvcmRlZCBieSB0aGVcbiAgICAvLyBgRXh0cmFFcnJvckRhdGFgIGludGVncmF0aW9uXG4gICAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KGV4Y2VwdGlvbiwgJ19fc2VudHJ5X2NhcHR1cmVkX18nLCB0cnVlKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gYGV4Y2VwdGlvbmAgaXMgYSBwcmltaXRpdmUsIHNvIHdlIGNhbid0IG1hcmsgaXQgc2VlblxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzQWxyZWFkeUNhcHR1cmVkKGV4Y2VwdGlvbikge1xuICB0cnkge1xuICAgIHJldHVybiBleGNlcHRpb24uX19zZW50cnlfY2FwdHVyZWRfXztcbiAgfSBjYXRjaCB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XG59XG5leHBvcnQgeyBhZGRDb250ZXh0VG9GcmFtZSwgYWRkRXhjZXB0aW9uTWVjaGFuaXNtLCBhZGRFeGNlcHRpb25UeXBlVmFsdWUsIGNoZWNrT3JTZXRBbHJlYWR5Q2F1Z2h0LCBnZXRFdmVudERlc2NyaXB0aW9uLCBwYXJzZVNlbXZlciwgdXVpZDQgfTtcbiIsImltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICcuL3dvcmxkd2lkZS5qcyc7XG5jb25zdCBPTkVfU0VDT05EX0lOX01TID0gMTAwMDtcblxuLyoqXG4gKiBBIHBhcnRpYWwgZGVmaW5pdGlvbiBvZiB0aGUgW1BlcmZvcm1hbmNlIFdlYiBBUElde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9QZXJmb3JtYW5jZX1cbiAqIGZvciBhY2Nlc3NpbmcgYSBoaWdoLXJlc29sdXRpb24gbW9ub3RvbmljIGNsb2NrLlxuICovXG5cbi8qKlxuICogUmV0dXJucyBhIHRpbWVzdGFtcCBpbiBzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoIHVzaW5nIHRoZSBEYXRlIEFQSS5cbiAqL1xuZnVuY3Rpb24gZGF0ZVRpbWVzdGFtcEluU2Vjb25kcygpIHtcbiAgcmV0dXJuIERhdGUubm93KCkgLyBPTkVfU0VDT05EX0lOX01TO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB3cmFwcGVyIGFyb3VuZCB0aGUgbmF0aXZlIFBlcmZvcm1hbmNlIEFQSSBicm93c2VyIGltcGxlbWVudGF0aW9uLCBvciB1bmRlZmluZWQgZm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90XG4gKiBzdXBwb3J0IHRoZSBBUEkuXG4gKlxuICogV3JhcHBpbmcgdGhlIG5hdGl2ZSBBUEkgd29ya3MgYXJvdW5kIGRpZmZlcmVuY2VzIGluIGJlaGF2aW9yIGZyb20gZGlmZmVyZW50IGJyb3dzZXJzLlxuICovXG5mdW5jdGlvbiBjcmVhdGVVbml4VGltZXN0YW1wSW5TZWNvbmRzRnVuYygpIHtcbiAgY29uc3Qge1xuICAgIHBlcmZvcm1hbmNlXG4gIH0gPSBHTE9CQUxfT0JKO1xuICAvLyBTb21lIGJyb3dzZXIgYW5kIGVudmlyb25tZW50cyBkb24ndCBoYXZlIGEgcGVyZm9ybWFuY2Ugb3IgdGltZU9yaWdpbiwgc28gd2UgZmFsbGJhY2sgdG9cbiAgLy8gdXNpbmcgRGF0ZS5ub3coKSB0byBjb21wdXRlIHRoZSBzdGFydGluZyB0aW1lLlxuICBpZiAoIXBlcmZvcm1hbmNlPy5ub3cgfHwgIXBlcmZvcm1hbmNlLnRpbWVPcmlnaW4pIHtcbiAgICByZXR1cm4gZGF0ZVRpbWVzdGFtcEluU2Vjb25kcztcbiAgfVxuICBjb25zdCB0aW1lT3JpZ2luID0gcGVyZm9ybWFuY2UudGltZU9yaWdpbjtcblxuICAvLyBwZXJmb3JtYW5jZS5ub3coKSBpcyBhIG1vbm90b25pYyBjbG9jaywgd2hpY2ggbWVhbnMgaXQgc3RhcnRzIGF0IDAgd2hlbiB0aGUgcHJvY2VzcyBiZWdpbnMuIFRvIGdldCB0aGUgY3VycmVudFxuICAvLyB3YWxsIGNsb2NrIHRpbWUgKGFjdHVhbCBVTklYIHRpbWVzdGFtcCksIHdlIG5lZWQgdG8gYWRkIHRoZSBzdGFydGluZyB0aW1lIG9yaWdpbiBhbmQgdGhlIGN1cnJlbnQgdGltZSBlbGFwc2VkLlxuICAvL1xuICAvLyBUT0RPOiBUaGlzIGRvZXMgbm90IGFjY291bnQgZm9yIHRoZSBjYXNlIHdoZXJlIHRoZSBtb25vdG9uaWMgY2xvY2sgdGhhdCBwb3dlcnMgcGVyZm9ybWFuY2Uubm93KCkgZHJpZnRzIGZyb20gdGhlXG4gIC8vIHdhbGwgY2xvY2sgdGltZSwgd2hpY2ggY2F1c2VzIHRoZSByZXR1cm5lZCB0aW1lc3RhbXAgdG8gYmUgaW5hY2N1cmF0ZS4gV2Ugc2hvdWxkIGludmVzdGlnYXRlIGhvdyB0byBkZXRlY3QgYW5kXG4gIC8vIGNvcnJlY3QgZm9yIHRoaXMuXG4gIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvMjU5MFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tZG4vY29udGVudC9pc3N1ZXMvNDcxM1xuICAvLyBTZWU6IGh0dHBzOi8vZGV2LnRvL25vYW1yL3doZW4tYS1taWxsaXNlY29uZC1pcy1ub3QtYS1taWxsaXNlY29uZC0zaDZcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZXR1cm4gKHRpbWVPcmlnaW4gKyBwZXJmb3JtYW5jZS5ub3coKSkgLyBPTkVfU0VDT05EX0lOX01TO1xuICB9O1xufVxubGV0IF9jYWNoZWRUaW1lc3RhbXBJblNlY29uZHM7XG5cbi8qKlxuICogUmV0dXJucyBhIHRpbWVzdGFtcCBpbiBzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoIHVzaW5nIGVpdGhlciB0aGUgUGVyZm9ybWFuY2Ugb3IgRGF0ZSBBUElzLCBkZXBlbmRpbmcgb24gdGhlXG4gKiBhdmFpbGFiaWxpdHkgb2YgdGhlIFBlcmZvcm1hbmNlIEFQSS5cbiAqXG4gKiBCVUc6IE5vdGUgdGhhdCBiZWNhdXNlIG9mIGhvdyBicm93c2VycyBpbXBsZW1lbnQgdGhlIFBlcmZvcm1hbmNlIEFQSSwgdGhlIGNsb2NrIG1pZ2h0IHN0b3Agd2hlbiB0aGUgY29tcHV0ZXIgaXNcbiAqIGFzbGVlcC4gVGhpcyBjcmVhdGVzIGEgc2tldyBiZXR3ZWVuIGBkYXRlVGltZXN0YW1wSW5TZWNvbmRzYCBhbmQgYHRpbWVzdGFtcEluU2Vjb25kc2AuIFRoZVxuICogc2tldyBjYW4gZ3JvdyB0byBhcmJpdHJhcnkgYW1vdW50cyBsaWtlIGRheXMsIHdlZWtzIG9yIG1vbnRocy5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yNTkwLlxuICovXG5mdW5jdGlvbiB0aW1lc3RhbXBJblNlY29uZHMoKSB7XG4gIC8vIFdlIHN0b3JlIHRoaXMgaW4gYSBjbG9zdXJlIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gZXZlcnkgdGltZSB0aGlzIGlzIGNhbGxlZC5cbiAgY29uc3QgZnVuYyA9IF9jYWNoZWRUaW1lc3RhbXBJblNlY29uZHMgPz8gKF9jYWNoZWRUaW1lc3RhbXBJblNlY29uZHMgPSBjcmVhdGVVbml4VGltZXN0YW1wSW5TZWNvbmRzRnVuYygpKTtcbiAgcmV0dXJuIGZ1bmMoKTtcbn1cblxuLyoqXG4gKiBDYWNoZWQgcmVzdWx0IG9mIGdldEJyb3dzZXJUaW1lT3JpZ2luLlxuICovXG5sZXQgY2FjaGVkVGltZU9yaWdpbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lIG9yaWdpbiBhbmQgdGhlIG1vZGUgdXNlZCB0byBkZXRlcm1pbmUgaXQuXG4gKi9cbmZ1bmN0aW9uIGdldEJyb3dzZXJUaW1lT3JpZ2luKCkge1xuICAvLyBVbmZvcnR1bmF0ZWx5IGJyb3dzZXJzIG1heSByZXBvcnQgYW4gaW5hY2N1cmF0ZSB0aW1lIG9yaWdpbiBkYXRhLCB0aHJvdWdoIGVpdGhlciBwZXJmb3JtYW5jZS50aW1lT3JpZ2luIG9yXG4gIC8vIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQsIHdoaWNoIHJlc3VsdHMgaW4gcG9vciByZXN1bHRzIGluIHBlcmZvcm1hbmNlIGRhdGEuIFdlIG9ubHkgdHJlYXQgdGltZSBvcmlnaW5cbiAgLy8gZGF0YSBhcyByZWxpYWJsZSBpZiB0aGV5IGFyZSB3aXRoaW4gYSByZWFzb25hYmxlIHRocmVzaG9sZCBvZiB0aGUgY3VycmVudCB0aW1lLlxuXG4gIGNvbnN0IHtcbiAgICBwZXJmb3JtYW5jZVxuICB9ID0gR0xPQkFMX09CSjtcbiAgaWYgKCFwZXJmb3JtYW5jZT8ubm93KSB7XG4gICAgcmV0dXJuIFt1bmRlZmluZWQsICdub25lJ107XG4gIH1cbiAgY29uc3QgdGhyZXNob2xkID0gMzYwMCAqIDEwMDA7XG4gIGNvbnN0IHBlcmZvcm1hbmNlTm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIGNvbnN0IGRhdGVOb3cgPSBEYXRlLm5vdygpO1xuXG4gIC8vIGlmIHRpbWVPcmlnaW4gaXNuJ3QgYXZhaWxhYmxlIHNldCBkZWx0YSB0byB0aHJlc2hvbGQgc28gaXQgaXNuJ3QgdXNlZFxuICBjb25zdCB0aW1lT3JpZ2luRGVsdGEgPSBwZXJmb3JtYW5jZS50aW1lT3JpZ2luID8gTWF0aC5hYnMocGVyZm9ybWFuY2UudGltZU9yaWdpbiArIHBlcmZvcm1hbmNlTm93IC0gZGF0ZU5vdykgOiB0aHJlc2hvbGQ7XG4gIGNvbnN0IHRpbWVPcmlnaW5Jc1JlbGlhYmxlID0gdGltZU9yaWdpbkRlbHRhIDwgdGhyZXNob2xkO1xuXG4gIC8vIFdoaWxlIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQgaXMgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBwZXJmb3JtYW5jZS50aW1lT3JpZ2luLCBwZXJmb3JtYW5jZS50aW1lT3JpZ2luXG4gIC8vIGlzIG5vdCBhcyB3aWRlbHkgc3VwcG9ydGVkLiBOYW1lbHksIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gaXMgdW5kZWZpbmVkIGluIFNhZmFyaSBhcyBvZiB3cml0aW5nLlxuICAvLyBBbHNvIGFzIG9mIHdyaXRpbmcsIHBlcmZvcm1hbmNlLnRpbWluZyBpcyBub3QgYXZhaWxhYmxlIGluIFdlYiBXb3JrZXJzIGluIG1haW5zdHJlYW0gYnJvd3NlcnMsIHNvIGl0IGlzIG5vdCBhbHdheXNcbiAgLy8gYSB2YWxpZCBmYWxsYmFjay4gSW4gdGhlIGFic2VuY2Ugb2YgYW4gaW5pdGlhbCB0aW1lIHByb3ZpZGVkIGJ5IHRoZSBicm93c2VyLCBmYWxsYmFjayB0byB0aGUgY3VycmVudCB0aW1lIGZyb20gdGhlXG4gIC8vIERhdGUgQVBJLlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb25cbiAgY29uc3QgbmF2aWdhdGlvblN0YXJ0ID0gcGVyZm9ybWFuY2UudGltaW5nPy5uYXZpZ2F0aW9uU3RhcnQ7XG4gIGNvbnN0IGhhc05hdmlnYXRpb25TdGFydCA9IHR5cGVvZiBuYXZpZ2F0aW9uU3RhcnQgPT09ICdudW1iZXInO1xuICAvLyBpZiBuYXZpZ2F0aW9uU3RhcnQgaXNuJ3QgYXZhaWxhYmxlIHNldCBkZWx0YSB0byB0aHJlc2hvbGQgc28gaXQgaXNuJ3QgdXNlZFxuICBjb25zdCBuYXZpZ2F0aW9uU3RhcnREZWx0YSA9IGhhc05hdmlnYXRpb25TdGFydCA/IE1hdGguYWJzKG5hdmlnYXRpb25TdGFydCArIHBlcmZvcm1hbmNlTm93IC0gZGF0ZU5vdykgOiB0aHJlc2hvbGQ7XG4gIGNvbnN0IG5hdmlnYXRpb25TdGFydElzUmVsaWFibGUgPSBuYXZpZ2F0aW9uU3RhcnREZWx0YSA8IHRocmVzaG9sZDtcbiAgaWYgKHRpbWVPcmlnaW5Jc1JlbGlhYmxlIHx8IG5hdmlnYXRpb25TdGFydElzUmVsaWFibGUpIHtcbiAgICAvLyBVc2UgdGhlIG1vcmUgcmVsaWFibGUgdGltZSBvcmlnaW5cbiAgICBpZiAodGltZU9yaWdpbkRlbHRhIDw9IG5hdmlnYXRpb25TdGFydERlbHRhKSB7XG4gICAgICByZXR1cm4gW3BlcmZvcm1hbmNlLnRpbWVPcmlnaW4sICd0aW1lT3JpZ2luJ107XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbbmF2aWdhdGlvblN0YXJ0LCAnbmF2aWdhdGlvblN0YXJ0J107XG4gICAgfVxuICB9XG5cbiAgLy8gRWl0aGVyIGJvdGggdGltZU9yaWdpbiBhbmQgbmF2aWdhdGlvblN0YXJ0IGFyZSBza2V3ZWQgb3IgbmVpdGhlciBpcyBhdmFpbGFibGUsIGZhbGxiYWNrIHRvIERhdGUuXG4gIHJldHVybiBbZGF0ZU5vdywgJ2RhdGVOb3cnXTtcbn1cblxuLyoqXG4gKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgVU5JWCBlcG9jaC4gVGhpcyB2YWx1ZSBpcyBvbmx5IHVzYWJsZSBpbiBhIGJyb3dzZXIsIGFuZCBvbmx5IHdoZW4gdGhlXG4gKiBwZXJmb3JtYW5jZSBBUEkgaXMgYXZhaWxhYmxlLlxuICovXG5mdW5jdGlvbiBicm93c2VyUGVyZm9ybWFuY2VUaW1lT3JpZ2luKCkge1xuICBpZiAoIWNhY2hlZFRpbWVPcmlnaW4pIHtcbiAgICBjYWNoZWRUaW1lT3JpZ2luID0gZ2V0QnJvd3NlclRpbWVPcmlnaW4oKTtcbiAgfVxuICByZXR1cm4gY2FjaGVkVGltZU9yaWdpblswXTtcbn1cbmV4cG9ydCB7IGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4sIGRhdGVUaW1lc3RhbXBJblNlY29uZHMsIHRpbWVzdGFtcEluU2Vjb25kcyB9O1xuIiwiaW1wb3J0IHsgdXVpZDQgfSBmcm9tICcuL3V0aWxzL21pc2MuanMnO1xuaW1wb3J0IHsgdGltZXN0YW1wSW5TZWNvbmRzIH0gZnJvbSAnLi91dGlscy90aW1lLmpzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBTZXNzaW9uYCBvYmplY3QgYnkgc2V0dGluZyBjZXJ0YWluIGRlZmF1bHQgcGFyYW1ldGVycy4gSWYgb3B0aW9uYWwgQHBhcmFtIGNvbnRleHRcbiAqIGlzIHBhc3NlZCwgdGhlIHBhc3NlZCBwcm9wZXJ0aWVzIGFyZSBhcHBsaWVkIHRvIHRoZSBzZXNzaW9uIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gY29udGV4dCAob3B0aW9uYWwpIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBiZSBhcHBsaWVkIHRvIHRoZSByZXR1cm5lZCBzZXNzaW9uIG9iamVjdFxuICpcbiAqIEByZXR1cm5zIGEgbmV3IGBTZXNzaW9uYCBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWFrZVNlc3Npb24oY29udGV4dCkge1xuICAvLyBCb3RoIHRpbWVzdGFtcCBhbmQgc3RhcnRlZCBhcmUgaW4gc2Vjb25kcyBzaW5jZSB0aGUgVU5JWCBlcG9jaC5cbiAgY29uc3Qgc3RhcnRpbmdUaW1lID0gdGltZXN0YW1wSW5TZWNvbmRzKCk7XG4gIGNvbnN0IHNlc3Npb24gPSB7XG4gICAgc2lkOiB1dWlkNCgpLFxuICAgIGluaXQ6IHRydWUsXG4gICAgdGltZXN0YW1wOiBzdGFydGluZ1RpbWUsXG4gICAgc3RhcnRlZDogc3RhcnRpbmdUaW1lLFxuICAgIGR1cmF0aW9uOiAwLFxuICAgIHN0YXR1czogJ29rJyxcbiAgICBlcnJvcnM6IDAsXG4gICAgaWdub3JlRHVyYXRpb246IGZhbHNlLFxuICAgIHRvSlNPTjogKCkgPT4gc2Vzc2lvblRvSlNPTihzZXNzaW9uKVxuICB9O1xuICBpZiAoY29udGV4dCkge1xuICAgIHVwZGF0ZVNlc3Npb24oc2Vzc2lvbiwgY29udGV4dCk7XG4gIH1cbiAgcmV0dXJuIHNlc3Npb247XG59XG5cbi8qKlxuICogVXBkYXRlcyBhIHNlc3Npb24gb2JqZWN0IHdpdGggdGhlIHByb3BlcnRpZXMgcGFzc2VkIGluIHRoZSBjb250ZXh0LlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIG11dGF0ZXMgdGhlIHBhc3NlZCBvYmplY3QgYW5kIHJldHVybnMgdm9pZC5cbiAqIChIYWQgdG8gZG8gdGhpcyBpbnN0ZWFkIG9mIHJldHVybmluZyBhIG5ldyBhbmQgdXBkYXRlZCBzZXNzaW9uIGJlY2F1c2UgY2xvc2luZyBhbmQgc2VuZGluZyBhIHNlc3Npb25cbiAqIG1ha2VzIGFuIHVwZGF0ZSB0byB0aGUgc2Vzc2lvbiBhZnRlciBpdCB3YXMgcGFzc2VkIHRvIHRoZSBzZW5kaW5nIGxvZ2ljLlxuICogQHNlZSBDbGllbnQuY2FwdHVyZVNlc3Npb24gKVxuICpcbiAqIEBwYXJhbSBzZXNzaW9uIHRoZSBgU2Vzc2lvbmAgdG8gdXBkYXRlXG4gKiBAcGFyYW0gY29udGV4dCB0aGUgYFNlc3Npb25Db250ZXh0YCBob2xkaW5nIHRoZSBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIGJlIHVwZGF0ZWQgaW4gQHBhcmFtIHNlc3Npb25cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmZ1bmN0aW9uIHVwZGF0ZVNlc3Npb24oc2Vzc2lvbiwgY29udGV4dCA9IHt9KSB7XG4gIGlmIChjb250ZXh0LnVzZXIpIHtcbiAgICBpZiAoIXNlc3Npb24uaXBBZGRyZXNzICYmIGNvbnRleHQudXNlci5pcF9hZGRyZXNzKSB7XG4gICAgICBzZXNzaW9uLmlwQWRkcmVzcyA9IGNvbnRleHQudXNlci5pcF9hZGRyZXNzO1xuICAgIH1cbiAgICBpZiAoIXNlc3Npb24uZGlkICYmICFjb250ZXh0LmRpZCkge1xuICAgICAgc2Vzc2lvbi5kaWQgPSBjb250ZXh0LnVzZXIuaWQgfHwgY29udGV4dC51c2VyLmVtYWlsIHx8IGNvbnRleHQudXNlci51c2VybmFtZTtcbiAgICB9XG4gIH1cbiAgc2Vzc2lvbi50aW1lc3RhbXAgPSBjb250ZXh0LnRpbWVzdGFtcCB8fCB0aW1lc3RhbXBJblNlY29uZHMoKTtcbiAgaWYgKGNvbnRleHQuYWJub3JtYWxfbWVjaGFuaXNtKSB7XG4gICAgc2Vzc2lvbi5hYm5vcm1hbF9tZWNoYW5pc20gPSBjb250ZXh0LmFibm9ybWFsX21lY2hhbmlzbTtcbiAgfVxuICBpZiAoY29udGV4dC5pZ25vcmVEdXJhdGlvbikge1xuICAgIHNlc3Npb24uaWdub3JlRHVyYXRpb24gPSBjb250ZXh0Lmlnbm9yZUR1cmF0aW9uO1xuICB9XG4gIGlmIChjb250ZXh0LnNpZCkge1xuICAgIC8vIEdvb2QgZW5vdWdoIHV1aWQgdmFsaWRhdGlvbi4g4oCUIEthbWlsXG4gICAgc2Vzc2lvbi5zaWQgPSBjb250ZXh0LnNpZC5sZW5ndGggPT09IDMyID8gY29udGV4dC5zaWQgOiB1dWlkNCgpO1xuICB9XG4gIGlmIChjb250ZXh0LmluaXQgIT09IHVuZGVmaW5lZCkge1xuICAgIHNlc3Npb24uaW5pdCA9IGNvbnRleHQuaW5pdDtcbiAgfVxuICBpZiAoIXNlc3Npb24uZGlkICYmIGNvbnRleHQuZGlkKSB7XG4gICAgc2Vzc2lvbi5kaWQgPSBgJHtjb250ZXh0LmRpZH1gO1xuICB9XG4gIGlmICh0eXBlb2YgY29udGV4dC5zdGFydGVkID09PSAnbnVtYmVyJykge1xuICAgIHNlc3Npb24uc3RhcnRlZCA9IGNvbnRleHQuc3RhcnRlZDtcbiAgfVxuICBpZiAoc2Vzc2lvbi5pZ25vcmVEdXJhdGlvbikge1xuICAgIHNlc3Npb24uZHVyYXRpb24gPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGNvbnRleHQuZHVyYXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgc2Vzc2lvbi5kdXJhdGlvbiA9IGNvbnRleHQuZHVyYXRpb247XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZHVyYXRpb24gPSBzZXNzaW9uLnRpbWVzdGFtcCAtIHNlc3Npb24uc3RhcnRlZDtcbiAgICBzZXNzaW9uLmR1cmF0aW9uID0gZHVyYXRpb24gPj0gMCA/IGR1cmF0aW9uIDogMDtcbiAgfVxuICBpZiAoY29udGV4dC5yZWxlYXNlKSB7XG4gICAgc2Vzc2lvbi5yZWxlYXNlID0gY29udGV4dC5yZWxlYXNlO1xuICB9XG4gIGlmIChjb250ZXh0LmVudmlyb25tZW50KSB7XG4gICAgc2Vzc2lvbi5lbnZpcm9ubWVudCA9IGNvbnRleHQuZW52aXJvbm1lbnQ7XG4gIH1cbiAgaWYgKCFzZXNzaW9uLmlwQWRkcmVzcyAmJiBjb250ZXh0LmlwQWRkcmVzcykge1xuICAgIHNlc3Npb24uaXBBZGRyZXNzID0gY29udGV4dC5pcEFkZHJlc3M7XG4gIH1cbiAgaWYgKCFzZXNzaW9uLnVzZXJBZ2VudCAmJiBjb250ZXh0LnVzZXJBZ2VudCkge1xuICAgIHNlc3Npb24udXNlckFnZW50ID0gY29udGV4dC51c2VyQWdlbnQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb250ZXh0LmVycm9ycyA9PT0gJ251bWJlcicpIHtcbiAgICBzZXNzaW9uLmVycm9ycyA9IGNvbnRleHQuZXJyb3JzO1xuICB9XG4gIGlmIChjb250ZXh0LnN0YXR1cykge1xuICAgIHNlc3Npb24uc3RhdHVzID0gY29udGV4dC5zdGF0dXM7XG4gIH1cbn1cblxuLyoqXG4gKiBDbG9zZXMgYSBzZXNzaW9uIGJ5IHNldHRpbmcgaXRzIHN0YXR1cyBhbmQgdXBkYXRpbmcgdGhlIHNlc3Npb24gb2JqZWN0IHdpdGggaXQuXG4gKiBJbnRlcm5hbGx5IGNhbGxzIGB1cGRhdGVTZXNzaW9uYCB0byB1cGRhdGUgdGhlIHBhc3NlZCBzZXNzaW9uIG9iamVjdC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBtdXRhdGVzIHRoZSBwYXNzZWQgc2Vzc2lvbiAoQHNlZSB1cGRhdGVTZXNzaW9uIGZvciBleHBsYW5hdGlvbikuXG4gKlxuICogQHBhcmFtIHNlc3Npb24gdGhlIGBTZXNzaW9uYCBvYmplY3QgdG8gYmUgY2xvc2VkXG4gKiBAcGFyYW0gc3RhdHVzIHRoZSBgU2Vzc2lvblN0YXR1c2Agd2l0aCB3aGljaCB0aGUgc2Vzc2lvbiB3YXMgY2xvc2VkLiBJZiB5b3UgZG9uJ3QgcGFzcyBhIHN0YXR1cyxcbiAqICAgICAgICAgICAgICAgdGhpcyBmdW5jdGlvbiB3aWxsIGtlZXAgdGhlIHByZXZpb3VzbHkgc2V0IHN0YXR1cywgdW5sZXNzIGl0IHdhcyBgJ29rJ2AgaW4gd2hpY2ggY2FzZVxuICogICAgICAgICAgICAgICBpdCBpcyBjaGFuZ2VkIHRvIGAnZXhpdGVkJ2AuXG4gKi9cbmZ1bmN0aW9uIGNsb3NlU2Vzc2lvbihzZXNzaW9uLCBzdGF0dXMpIHtcbiAgbGV0IGNvbnRleHQgPSB7fTtcbiAgaWYgKHN0YXR1cykge1xuICAgIGNvbnRleHQgPSB7XG4gICAgICBzdGF0dXNcbiAgICB9O1xuICB9IGVsc2UgaWYgKHNlc3Npb24uc3RhdHVzID09PSAnb2snKSB7XG4gICAgY29udGV4dCA9IHtcbiAgICAgIHN0YXR1czogJ2V4aXRlZCdcbiAgICB9O1xuICB9XG4gIHVwZGF0ZVNlc3Npb24oc2Vzc2lvbiwgY29udGV4dCk7XG59XG5cbi8qKlxuICogU2VyaWFsaXplcyBhIHBhc3NlZCBzZXNzaW9uIG9iamVjdCB0byBhIEpTT04gb2JqZWN0IHdpdGggYSBzbGlnaHRseSBkaWZmZXJlbnQgc3RydWN0dXJlLlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSB0aGUgU2VudHJ5IGJhY2tlbmQgcmVxdWlyZXMgYSBzbGlnaHRseSBkaWZmZXJlbnQgc2NoZW1hIG9mIGEgc2Vzc2lvblxuICogdGhhbiB0aGUgb25lIHRoZSBKUyBTREtzIHVzZSBpbnRlcm5hbGx5LlxuICpcbiAqIEBwYXJhbSBzZXNzaW9uIHRoZSBzZXNzaW9uIHRvIGJlIGNvbnZlcnRlZFxuICpcbiAqIEByZXR1cm5zIGEgSlNPTiBvYmplY3Qgb2YgdGhlIHBhc3NlZCBzZXNzaW9uXG4gKi9cbmZ1bmN0aW9uIHNlc3Npb25Ub0pTT04oc2Vzc2lvbikge1xuICByZXR1cm4ge1xuICAgIHNpZDogYCR7c2Vzc2lvbi5zaWR9YCxcbiAgICBpbml0OiBzZXNzaW9uLmluaXQsXG4gICAgLy8gTWFrZSBzdXJlIHRoYXQgc2VjIGlzIGNvbnZlcnRlZCB0byBtcyBmb3IgZGF0ZSBjb25zdHJ1Y3RvclxuICAgIHN0YXJ0ZWQ6IG5ldyBEYXRlKHNlc3Npb24uc3RhcnRlZCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZShzZXNzaW9uLnRpbWVzdGFtcCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgc3RhdHVzOiBzZXNzaW9uLnN0YXR1cyxcbiAgICBlcnJvcnM6IHNlc3Npb24uZXJyb3JzLFxuICAgIGRpZDogdHlwZW9mIHNlc3Npb24uZGlkID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc2Vzc2lvbi5kaWQgPT09ICdzdHJpbmcnID8gYCR7c2Vzc2lvbi5kaWR9YCA6IHVuZGVmaW5lZCxcbiAgICBkdXJhdGlvbjogc2Vzc2lvbi5kdXJhdGlvbixcbiAgICBhYm5vcm1hbF9tZWNoYW5pc206IHNlc3Npb24uYWJub3JtYWxfbWVjaGFuaXNtLFxuICAgIGF0dHJzOiB7XG4gICAgICByZWxlYXNlOiBzZXNzaW9uLnJlbGVhc2UsXG4gICAgICBlbnZpcm9ubWVudDogc2Vzc2lvbi5lbnZpcm9ubWVudCxcbiAgICAgIGlwX2FkZHJlc3M6IHNlc3Npb24uaXBBZGRyZXNzLFxuICAgICAgdXNlcl9hZ2VudDogc2Vzc2lvbi51c2VyQWdlbnRcbiAgICB9XG4gIH07XG59XG5leHBvcnQgeyBjbG9zZVNlc3Npb24sIG1ha2VTZXNzaW9uLCB1cGRhdGVTZXNzaW9uIH07XG4iLCIvKipcbiAqIFNoYWxsb3cgbWVyZ2UgdHdvIG9iamVjdHMuXG4gKiBEb2VzIG5vdCBtdXRhdGUgdGhlIHBhc3NlZCBpbiBvYmplY3RzLlxuICogVW5kZWZpbmVkL2VtcHR5IHZhbHVlcyBpbiB0aGUgbWVyZ2Ugb2JqZWN0IHdpbGwgb3ZlcndyaXRlIGV4aXN0aW5nIHZhbHVlcy5cbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGlzIG1lcmdlcyAyIGxldmVscyBkZWVwLlxuICovXG5mdW5jdGlvbiBtZXJnZShpbml0aWFsT2JqLCBtZXJnZU9iaiwgbGV2ZWxzID0gMikge1xuICAvLyBJZiB0aGUgbWVyZ2UgdmFsdWUgaXMgbm90IGFuIG9iamVjdCwgb3Igd2UgaGF2ZSBubyBtZXJnZSBsZXZlbHMgbGVmdCxcbiAgLy8gd2UganVzdCBzZXQgdGhlIHZhbHVlIHRvIHRoZSBtZXJnZSB2YWx1ZVxuICBpZiAoIW1lcmdlT2JqIHx8IHR5cGVvZiBtZXJnZU9iaiAhPT0gJ29iamVjdCcgfHwgbGV2ZWxzIDw9IDApIHtcbiAgICByZXR1cm4gbWVyZ2VPYmo7XG4gIH1cblxuICAvLyBJZiB0aGUgbWVyZ2Ugb2JqZWN0IGlzIGFuIGVtcHR5IG9iamVjdCwgYW5kIHRoZSBpbml0aWFsIG9iamVjdCBpcyBub3QgdW5kZWZpbmVkLCB3ZSByZXR1cm4gdGhlIGluaXRpYWwgb2JqZWN0XG4gIGlmIChpbml0aWFsT2JqICYmIE9iamVjdC5rZXlzKG1lcmdlT2JqKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gaW5pdGlhbE9iajtcbiAgfVxuXG4gIC8vIENsb25lIG9iamVjdFxuICBjb25zdCBvdXRwdXQgPSB7XG4gICAgLi4uaW5pdGlhbE9ialxuICB9O1xuXG4gIC8vIE1lcmdlIHZhbHVlcyBpbnRvIG91dHB1dCwgcmVzdXJzaXZlbHlcbiAgZm9yIChjb25zdCBrZXkgaW4gbWVyZ2VPYmopIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lcmdlT2JqLCBrZXkpKSB7XG4gICAgICBvdXRwdXRba2V5XSA9IG1lcmdlKG91dHB1dFtrZXldLCBtZXJnZU9ialtrZXldLCBsZXZlbHMgLSAxKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cbmV4cG9ydCB7IG1lcmdlIH07XG4iLCJpbXBvcnQgeyB1dWlkNCB9IGZyb20gJy4vbWlzYy5qcyc7XG5cbi8qKlxuICogR2VuZXJhdGUgYSByYW5kb20sIHZhbGlkIHRyYWNlIElELlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVRyYWNlSWQoKSB7XG4gIHJldHVybiB1dWlkNCgpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgcmFuZG9tLCB2YWxpZCBzcGFuIElELlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVNwYW5JZCgpIHtcbiAgcmV0dXJuIHV1aWQ0KCkuc3Vic3RyaW5nKDE2KTtcbn1cbmV4cG9ydCB7IGdlbmVyYXRlU3BhbklkLCBnZW5lcmF0ZVRyYWNlSWQgfTtcbiIsImltcG9ydCB7IGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSB9IGZyb20gJy4vb2JqZWN0LmpzJztcbmNvbnN0IFNDT1BFX1NQQU5fRklFTEQgPSAnX3NlbnRyeVNwYW4nO1xuXG4vKipcbiAqIFNldCB0aGUgYWN0aXZlIHNwYW4gZm9yIGEgZ2l2ZW4gc2NvcGUuXG4gKiBOT1RFOiBUaGlzIHNob3VsZCBOT1QgYmUgdXNlZCBkaXJlY3RseSwgYnV0IGlzIG9ubHkgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSB0cmFjZSBtZXRob2RzLlxuICovXG5mdW5jdGlvbiBfc2V0U3BhbkZvclNjb3BlKHNjb3BlLCBzcGFuKSB7XG4gIGlmIChzcGFuKSB7XG4gICAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KHNjb3BlLCBTQ09QRV9TUEFOX0ZJRUxELCBzcGFuKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWR5bmFtaWMtZGVsZXRlXG4gICAgZGVsZXRlIHNjb3BlW1NDT1BFX1NQQU5fRklFTERdO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRoZSBhY3RpdmUgc3BhbiBmb3IgYSBnaXZlbiBzY29wZS5cbiAqIE5PVEU6IFRoaXMgc2hvdWxkIE5PVCBiZSB1c2VkIGRpcmVjdGx5LCBidXQgaXMgb25seSB1c2VkIGludGVybmFsbHkgYnkgdGhlIHRyYWNlIG1ldGhvZHMuXG4gKi9cbmZ1bmN0aW9uIF9nZXRTcGFuRm9yU2NvcGUoc2NvcGUpIHtcbiAgcmV0dXJuIHNjb3BlW1NDT1BFX1NQQU5fRklFTERdO1xufVxuZXhwb3J0IHsgX2dldFNwYW5Gb3JTY29wZSwgX3NldFNwYW5Gb3JTY29wZSB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IHVwZGF0ZVNlc3Npb24gfSBmcm9tICcuL3Nlc3Npb24uanMnO1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJy4vdXRpbHMvaXMuanMnO1xuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuL3V0aWxzL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBtZXJnZSB9IGZyb20gJy4vdXRpbHMvbWVyZ2UuanMnO1xuaW1wb3J0IHsgdXVpZDQgfSBmcm9tICcuL3V0aWxzL21pc2MuanMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSAnLi91dGlscy9wcm9wYWdhdGlvbkNvbnRleHQuanMnO1xuaW1wb3J0IHsgX3NldFNwYW5Gb3JTY29wZSwgX2dldFNwYW5Gb3JTY29wZSB9IGZyb20gJy4vdXRpbHMvc3Bhbk9uU2NvcGUuanMnO1xuaW1wb3J0IHsgdHJ1bmNhdGUgfSBmcm9tICcuL3V0aWxzL3N0cmluZy5qcyc7XG5pbXBvcnQgeyBkYXRlVGltZXN0YW1wSW5TZWNvbmRzIH0gZnJvbSAnLi91dGlscy90aW1lLmpzJztcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlIGZvciBtYXhpbXVtIG51bWJlciBvZiBicmVhZGNydW1icyBhZGRlZCB0byBhbiBldmVudC5cbiAqL1xuY29uc3QgREVGQVVMVF9NQVhfQlJFQURDUlVNQlMgPSAxMDA7XG5cbi8qKlxuICogQSBjb250ZXh0IHRvIGJlIHVzZWQgZm9yIGNhcHR1cmluZyBhbiBldmVudC5cbiAqIFRoaXMgY2FuIGVpdGhlciBiZSBhIFNjb3BlLCBvciBhIHBhcnRpYWwgU2NvcGVDb250ZXh0LFxuICogb3IgYSBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIHRoZSBjdXJyZW50IHNjb3BlIGFuZCByZXR1cm5zIGEgbmV3IHNjb3BlIHRvIHVzZS5cbiAqL1xuXG4vKipcbiAqIEhvbGRzIGFkZGl0aW9uYWwgZXZlbnQgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIFNjb3BlIHtcbiAgLyoqIEZsYWcgaWYgbm90aWZ5aW5nIGlzIGhhcHBlbmluZy4gKi9cblxuICAvKiogQ2FsbGJhY2sgZm9yIGNsaWVudCB0byByZWNlaXZlIHNjb3BlIGNoYW5nZXMuICovXG5cbiAgLyoqIENhbGxiYWNrIGxpc3QgdGhhdCB3aWxsIGJlIGNhbGxlZCBkdXJpbmcgZXZlbnQgcHJvY2Vzc2luZy4gKi9cblxuICAvKiogQXJyYXkgb2YgYnJlYWRjcnVtYnMuICovXG5cbiAgLyoqIFVzZXIgKi9cblxuICAvKiogVGFncyAqL1xuXG4gIC8qKiBFeHRyYSAqL1xuXG4gIC8qKiBDb250ZXh0cyAqL1xuXG4gIC8qKiBBdHRhY2htZW50cyAqL1xuXG4gIC8qKiBQcm9wYWdhdGlvbiBDb250ZXh0IGZvciBkaXN0cmlidXRlZCB0cmFjaW5nICovXG5cbiAgLyoqXG4gICAqIEEgcGxhY2UgdG8gc3Rhc2ggZGF0YSB3aGljaCBpcyBuZWVkZWQgYXQgc29tZSBwb2ludCBpbiB0aGUgU0RLJ3MgZXZlbnQgcHJvY2Vzc2luZyBwaXBlbGluZSBidXQgd2hpY2ggc2hvdWxkbid0IGdldFxuICAgKiBzZW50IHRvIFNlbnRyeVxuICAgKi9cblxuICAvKiogRmluZ2VycHJpbnQgKi9cblxuICAvKiogU2V2ZXJpdHkgKi9cblxuICAvKipcbiAgICogVHJhbnNhY3Rpb24gTmFtZVxuICAgKlxuICAgKiBJTVBPUlRBTlQ6IFRoZSB0cmFuc2FjdGlvbiBuYW1lIG9uIHRoZSBzY29wZSBoYXMgbm90aGluZyB0byBkbyB3aXRoIHJvb3Qgc3BhbnMvdHJhbnNhY3Rpb24gb2JqZWN0cy5cbiAgICogSXQncyBwdXJwb3NlIGlzIHRvIGFzc2lnbiBhIHRyYW5zYWN0aW9uIHRvIHRoZSBzY29wZSB0aGF0J3MgYWRkZWQgdG8gbm9uLXRyYW5zYWN0aW9uIGV2ZW50cy5cbiAgICovXG5cbiAgLyoqIFNlc3Npb24gKi9cblxuICAvKiogVGhlIGNsaWVudCBvbiB0aGlzIHNjb3BlICovXG5cbiAgLyoqIENvbnRhaW5zIHRoZSBsYXN0IGV2ZW50IGlkIG9mIGEgY2FwdHVyZWQgZXZlbnQuICAqL1xuXG4gIC8vIE5PVEU6IEFueSBmaWVsZCB3aGljaCBnZXRzIGFkZGVkIGhlcmUgc2hvdWxkIGdldCBhZGRlZCBub3Qgb25seSB0byB0aGUgY29uc3RydWN0b3IgYnV0IGFsc28gdG8gdGhlIGBjbG9uZWAgbWV0aG9kLlxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX25vdGlmeWluZ0xpc3RlbmVycyA9IGZhbHNlO1xuICAgIHRoaXMuX3Njb3BlTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5fZXZlbnRQcm9jZXNzb3JzID0gW107XG4gICAgdGhpcy5fYnJlYWRjcnVtYnMgPSBbXTtcbiAgICB0aGlzLl9hdHRhY2htZW50cyA9IFtdO1xuICAgIHRoaXMuX3VzZXIgPSB7fTtcbiAgICB0aGlzLl90YWdzID0ge307XG4gICAgdGhpcy5fZXh0cmEgPSB7fTtcbiAgICB0aGlzLl9jb250ZXh0cyA9IHt9O1xuICAgIHRoaXMuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YSA9IHt9O1xuICAgIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCA9IHtcbiAgICAgIHRyYWNlSWQ6IGdlbmVyYXRlVHJhY2VJZCgpLFxuICAgICAgc2FtcGxlUmFuZDogTWF0aC5yYW5kb20oKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2xvbmUgYWxsIGRhdGEgZnJvbSB0aGlzIHNjb3BlIGludG8gYSBuZXcgc2NvcGUuXG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICBjb25zdCBuZXdTY29wZSA9IG5ldyBTY29wZSgpO1xuICAgIG5ld1Njb3BlLl9icmVhZGNydW1icyA9IFsuLi50aGlzLl9icmVhZGNydW1ic107XG4gICAgbmV3U2NvcGUuX3RhZ3MgPSB7XG4gICAgICAuLi50aGlzLl90YWdzXG4gICAgfTtcbiAgICBuZXdTY29wZS5fZXh0cmEgPSB7XG4gICAgICAuLi50aGlzLl9leHRyYVxuICAgIH07XG4gICAgbmV3U2NvcGUuX2NvbnRleHRzID0ge1xuICAgICAgLi4udGhpcy5fY29udGV4dHNcbiAgICB9O1xuICAgIGlmICh0aGlzLl9jb250ZXh0cy5mbGFncykge1xuICAgICAgLy8gV2UgbmVlZCB0byBjb3B5IHRoZSBgdmFsdWVzYCBhcnJheSBzbyBpbnNlcnRpb25zIG9uIGEgY2xvbmVkIHNjb3BlXG4gICAgICAvLyB3b24ndCBhZmZlY3QgdGhlIG9yaWdpbmFsIGFycmF5LlxuICAgICAgbmV3U2NvcGUuX2NvbnRleHRzLmZsYWdzID0ge1xuICAgICAgICB2YWx1ZXM6IFsuLi50aGlzLl9jb250ZXh0cy5mbGFncy52YWx1ZXNdXG4gICAgICB9O1xuICAgIH1cbiAgICBuZXdTY29wZS5fdXNlciA9IHRoaXMuX3VzZXI7XG4gICAgbmV3U2NvcGUuX2xldmVsID0gdGhpcy5fbGV2ZWw7XG4gICAgbmV3U2NvcGUuX3Nlc3Npb24gPSB0aGlzLl9zZXNzaW9uO1xuICAgIG5ld1Njb3BlLl90cmFuc2FjdGlvbk5hbWUgPSB0aGlzLl90cmFuc2FjdGlvbk5hbWU7XG4gICAgbmV3U2NvcGUuX2ZpbmdlcnByaW50ID0gdGhpcy5fZmluZ2VycHJpbnQ7XG4gICAgbmV3U2NvcGUuX2V2ZW50UHJvY2Vzc29ycyA9IFsuLi50aGlzLl9ldmVudFByb2Nlc3NvcnNdO1xuICAgIG5ld1Njb3BlLl9hdHRhY2htZW50cyA9IFsuLi50aGlzLl9hdHRhY2htZW50c107XG4gICAgbmV3U2NvcGUuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YSA9IHtcbiAgICAgIC4uLnRoaXMuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YVxuICAgIH07XG4gICAgbmV3U2NvcGUuX3Byb3BhZ2F0aW9uQ29udGV4dCA9IHtcbiAgICAgIC4uLnRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dFxuICAgIH07XG4gICAgbmV3U2NvcGUuX2NsaWVudCA9IHRoaXMuX2NsaWVudDtcbiAgICBuZXdTY29wZS5fbGFzdEV2ZW50SWQgPSB0aGlzLl9sYXN0RXZlbnRJZDtcbiAgICBfc2V0U3BhbkZvclNjb3BlKG5ld1Njb3BlLCBfZ2V0U3BhbkZvclNjb3BlKHRoaXMpKTtcbiAgICByZXR1cm4gbmV3U2NvcGU7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBjbGllbnQgYXNzaWduZWQgdG8gdGhpcyBzY29wZS5cbiAgICogTm90ZSB0aGF0IG5vdCBldmVyeSBzY29wZSB3aWxsIGhhdmUgYSBjbGllbnQgYXNzaWduZWQgLSBpc29sYXRpb24gc2NvcGVzICYgdGhlIGdsb2JhbCBzY29wZSB3aWxsIGdlbmVyYWxseSBub3QgaGF2ZSBhIGNsaWVudCxcbiAgICogYXMgd2VsbCBhcyBtYW51YWxseSBjcmVhdGVkIHNjb3Blcy5cbiAgICovXG4gIHNldENsaWVudChjbGllbnQpIHtcbiAgICB0aGlzLl9jbGllbnQgPSBjbGllbnQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBJRCBvZiB0aGUgbGFzdCBjYXB0dXJlZCBlcnJvciBldmVudC5cbiAgICogVGhpcyBpcyBnZW5lcmFsbHkgb25seSBjYXB0dXJlZCBvbiB0aGUgaXNvbGF0aW9uIHNjb3BlLlxuICAgKi9cbiAgc2V0TGFzdEV2ZW50SWQobGFzdEV2ZW50SWQpIHtcbiAgICB0aGlzLl9sYXN0RXZlbnRJZCA9IGxhc3RFdmVudElkO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY2xpZW50IGFzc2lnbmVkIHRvIHRoaXMgc2NvcGUuXG4gICAqL1xuICBnZXRDbGllbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIElEIG9mIHRoZSBsYXN0IGNhcHR1cmVkIGVycm9yIGV2ZW50LlxuICAgKiBUaGlzIGlzIGdlbmVyYWxseSBvbmx5IGF2YWlsYWJsZSBvbiB0aGUgaXNvbGF0aW9uIHNjb3BlLlxuICAgKi9cbiAgbGFzdEV2ZW50SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xhc3RFdmVudElkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBhZGRTY29wZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fc2NvcGVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIGV2ZW50IHByb2Nlc3NvciB0aGF0IHdpbGwgYmUgY2FsbGVkIGJlZm9yZSBhbiBldmVudCBpcyBzZW50LlxuICAgKi9cbiAgYWRkRXZlbnRQcm9jZXNzb3IoY2FsbGJhY2spIHtcbiAgICB0aGlzLl9ldmVudFByb2Nlc3NvcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB1c2VyIGZvciB0aGlzIHNjb3BlLlxuICAgKiBTZXQgdG8gYG51bGxgIHRvIHVuc2V0IHRoZSB1c2VyLlxuICAgKi9cbiAgc2V0VXNlcih1c2VyKSB7XG4gICAgLy8gSWYgbnVsbCBpcyBwYXNzZWQgd2Ugd2FudCB0byB1bnNldCBldmVyeXRoaW5nLCBidXQgc3RpbGwgZGVmaW5lIGtleXMsXG4gICAgLy8gc28gdGhhdCBsYXRlciBkb3duIGluIHRoZSBwaXBlbGluZSBhbnkgZXhpc3RpbmcgdmFsdWVzIGFyZSBjbGVhcmVkLlxuICAgIHRoaXMuX3VzZXIgPSB1c2VyIHx8IHtcbiAgICAgIGVtYWlsOiB1bmRlZmluZWQsXG4gICAgICBpZDogdW5kZWZpbmVkLFxuICAgICAgaXBfYWRkcmVzczogdW5kZWZpbmVkLFxuICAgICAgdXNlcm5hbWU6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgaWYgKHRoaXMuX3Nlc3Npb24pIHtcbiAgICAgIHVwZGF0ZVNlc3Npb24odGhpcy5fc2Vzc2lvbiwge1xuICAgICAgICB1c2VyXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHVzZXIgZnJvbSB0aGlzIHNjb3BlLlxuICAgKi9cbiAgZ2V0VXNlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBtZXJnZWQgaW50byBleGlzdGluZyB0YWdzIG9uIHRoZSBzY29wZSxcbiAgICogYW5kIHdpbGwgYmUgc2VudCBhcyB0YWdzIGRhdGEgd2l0aCB0aGUgZXZlbnQuXG4gICAqL1xuICBzZXRUYWdzKHRhZ3MpIHtcbiAgICB0aGlzLl90YWdzID0ge1xuICAgICAgLi4udGhpcy5fdGFncyxcbiAgICAgIC4uLnRhZ3NcbiAgICB9O1xuICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgc2luZ2xlIHRhZyB0aGF0IHdpbGwgYmUgc2VudCBhcyB0YWdzIGRhdGEgd2l0aCB0aGUgZXZlbnQuXG4gICAqL1xuICBzZXRUYWcoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMuX3RhZ3MgPSB7XG4gICAgICAuLi50aGlzLl90YWdzLFxuICAgICAgW2tleV06IHZhbHVlXG4gICAgfTtcbiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIG1lcmdlZCBpbnRvIGV4aXN0aW5nIGV4dHJhIG9uIHRoZSBzY29wZSxcbiAgICogYW5kIHdpbGwgYmUgc2VudCBhcyBleHRyYSBkYXRhIHdpdGggdGhlIGV2ZW50LlxuICAgKi9cbiAgc2V0RXh0cmFzKGV4dHJhcykge1xuICAgIHRoaXMuX2V4dHJhID0ge1xuICAgICAgLi4udGhpcy5fZXh0cmEsXG4gICAgICAuLi5leHRyYXNcbiAgICB9O1xuICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgc2luZ2xlIGtleTp2YWx1ZSBleHRyYSBlbnRyeSB0aGF0IHdpbGwgYmUgc2VudCBhcyBleHRyYSBkYXRhIHdpdGggdGhlIGV2ZW50LlxuICAgKi9cbiAgc2V0RXh0cmEoa2V5LCBleHRyYSkge1xuICAgIHRoaXMuX2V4dHJhID0ge1xuICAgICAgLi4udGhpcy5fZXh0cmEsXG4gICAgICBba2V5XTogZXh0cmFcbiAgICB9O1xuICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZmluZ2VycHJpbnQgb24gdGhlIHNjb3BlIHRvIHNlbmQgd2l0aCB0aGUgZXZlbnRzLlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBmaW5nZXJwcmludCBGaW5nZXJwcmludCB0byBncm91cCBldmVudHMgaW4gU2VudHJ5LlxuICAgKi9cbiAgc2V0RmluZ2VycHJpbnQoZmluZ2VycHJpbnQpIHtcbiAgICB0aGlzLl9maW5nZXJwcmludCA9IGZpbmdlcnByaW50O1xuICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbGV2ZWwgb24gdGhlIHNjb3BlIGZvciBmdXR1cmUgZXZlbnRzLlxuICAgKi9cbiAgc2V0TGV2ZWwobGV2ZWwpIHtcbiAgICB0aGlzLl9sZXZlbCA9IGxldmVsO1xuICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdHJhbnNhY3Rpb24gbmFtZSBvbiB0aGUgc2NvcGUgc28gdGhhdCB0aGUgbmFtZSBvZiBlLmcuIHRha2VuIHNlcnZlciByb3V0ZSBvclxuICAgKiB0aGUgcGFnZSBsb2NhdGlvbiBpcyBhdHRhY2hlZCB0byBmdXR1cmUgZXZlbnRzLlxuICAgKlxuICAgKiBJTVBPUlRBTlQ6IENhbGxpbmcgdGhpcyBmdW5jdGlvbiBkb2VzIE5PVCBjaGFuZ2UgdGhlIG5hbWUgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmVcbiAgICogcm9vdCBzcGFuLiBJZiB5b3Ugd2FudCB0byBjaGFuZ2UgdGhlIG5hbWUgb2YgdGhlIGFjdGl2ZSByb290IHNwYW4sIHVzZVxuICAgKiBgU2VudHJ5LnVwZGF0ZVNwYW5OYW1lKHJvb3RTcGFuLCAnbmV3IG5hbWUnKWAgaW5zdGVhZC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIFNESyB1cGRhdGVzIHRoZSBzY29wZSdzIHRyYW5zYWN0aW9uIG5hbWUgYXV0b21hdGljYWxseSBvbiBzZW5zaWJsZVxuICAgKiBvY2Nhc2lvbnMsIHN1Y2ggYXMgYSBwYWdlIG5hdmlnYXRpb24gb3Igd2hlbiBoYW5kbGluZyBhIG5ldyByZXF1ZXN0IG9uIHRoZSBzZXJ2ZXIuXG4gICAqL1xuICBzZXRUcmFuc2FjdGlvbk5hbWUobmFtZSkge1xuICAgIHRoaXMuX3RyYW5zYWN0aW9uTmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGNvbnRleHQgZGF0YSB3aXRoIHRoZSBnaXZlbiBuYW1lLlxuICAgKiBEYXRhIHBhc3NlZCBhcyBjb250ZXh0IHdpbGwgYmUgbm9ybWFsaXplZC4gWW91IGNhbiBhbHNvIHBhc3MgYG51bGxgIHRvIHVuc2V0IHRoZSBjb250ZXh0LlxuICAgKiBOb3RlIHRoYXQgY29udGV4dCBkYXRhIHdpbGwgbm90IGJlIG1lcmdlZCAtIGNhbGxpbmcgYHNldENvbnRleHRgIHdpbGwgb3ZlcndyaXRlIGFuIGV4aXN0aW5nIGNvbnRleHQgd2l0aCB0aGUgc2FtZSBrZXkuXG4gICAqL1xuICBzZXRDb250ZXh0KGtleSwgY29udGV4dCkge1xuICAgIGlmIChjb250ZXh0ID09PSBudWxsKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWR5bmFtaWMtZGVsZXRlXG4gICAgICBkZWxldGUgdGhpcy5fY29udGV4dHNba2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY29udGV4dHNba2V5XSA9IGNvbnRleHQ7XG4gICAgfVxuICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzZXNzaW9uIGZvciB0aGUgc2NvcGUuXG4gICAqL1xuICBzZXRTZXNzaW9uKHNlc3Npb24pIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9zZXNzaW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICB9XG4gICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNlc3Npb24gZnJvbSB0aGUgc2NvcGUuXG4gICAqL1xuICBnZXRTZXNzaW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXNzaW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHNjb3BlIHdpdGggcHJvdmlkZWQgZGF0YS4gQ2FuIHdvcmsgaW4gdGhyZWUgdmFyaWF0aW9uczpcbiAgICogLSBwbGFpbiBvYmplY3QgY29udGFpbmluZyB1cGRhdGFibGUgYXR0cmlidXRlc1xuICAgKiAtIFNjb3BlIGluc3RhbmNlIHRoYXQnbGwgZXh0cmFjdCB0aGUgYXR0cmlidXRlcyBmcm9tXG4gICAqIC0gY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCdsbCByZWNlaXZlIHRoZSBjdXJyZW50IHNjb3BlIGFzIGFuIGFyZ3VtZW50IGFuZCBhbGxvdyBmb3IgbW9kaWZpY2F0aW9uc1xuICAgKi9cbiAgdXBkYXRlKGNhcHR1cmVDb250ZXh0KSB7XG4gICAgaWYgKCFjYXB0dXJlQ29udGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNvbnN0IHNjb3BlVG9NZXJnZSA9IHR5cGVvZiBjYXB0dXJlQ29udGV4dCA9PT0gJ2Z1bmN0aW9uJyA/IGNhcHR1cmVDb250ZXh0KHRoaXMpIDogY2FwdHVyZUNvbnRleHQ7XG4gICAgY29uc3Qgc2NvcGVJbnN0YW5jZSA9IHNjb3BlVG9NZXJnZSBpbnN0YW5jZW9mIFNjb3BlID8gc2NvcGVUb01lcmdlLmdldFNjb3BlRGF0YSgpIDogaXNQbGFpbk9iamVjdChzY29wZVRvTWVyZ2UpID8gY2FwdHVyZUNvbnRleHQgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qge1xuICAgICAgdGFncyxcbiAgICAgIGV4dHJhLFxuICAgICAgdXNlcixcbiAgICAgIGNvbnRleHRzLFxuICAgICAgbGV2ZWwsXG4gICAgICBmaW5nZXJwcmludCA9IFtdLFxuICAgICAgcHJvcGFnYXRpb25Db250ZXh0XG4gICAgfSA9IHNjb3BlSW5zdGFuY2UgfHwge307XG4gICAgdGhpcy5fdGFncyA9IHtcbiAgICAgIC4uLnRoaXMuX3RhZ3MsXG4gICAgICAuLi50YWdzXG4gICAgfTtcbiAgICB0aGlzLl9leHRyYSA9IHtcbiAgICAgIC4uLnRoaXMuX2V4dHJhLFxuICAgICAgLi4uZXh0cmFcbiAgICB9O1xuICAgIHRoaXMuX2NvbnRleHRzID0ge1xuICAgICAgLi4udGhpcy5fY29udGV4dHMsXG4gICAgICAuLi5jb250ZXh0c1xuICAgIH07XG4gICAgaWYgKHVzZXIgJiYgT2JqZWN0LmtleXModXNlcikubGVuZ3RoKSB7XG4gICAgICB0aGlzLl91c2VyID0gdXNlcjtcbiAgICB9XG4gICAgaWYgKGxldmVsKSB7XG4gICAgICB0aGlzLl9sZXZlbCA9IGxldmVsO1xuICAgIH1cbiAgICBpZiAoZmluZ2VycHJpbnQubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9maW5nZXJwcmludCA9IGZpbmdlcnByaW50O1xuICAgIH1cbiAgICBpZiAocHJvcGFnYXRpb25Db250ZXh0KSB7XG4gICAgICB0aGlzLl9wcm9wYWdhdGlvbkNvbnRleHQgPSBwcm9wYWdhdGlvbkNvbnRleHQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY3VycmVudCBzY29wZSBhbmQgcmVzZXRzIGl0cyBwcm9wZXJ0aWVzLlxuICAgKiBOb3RlOiBUaGUgY2xpZW50IHdpbGwgbm90IGJlIGNsZWFyZWQuXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICAvLyBjbGllbnQgaXMgbm90IGNsZWFyZWQgaGVyZSBvbiBwdXJwb3NlIVxuICAgIHRoaXMuX2JyZWFkY3J1bWJzID0gW107XG4gICAgdGhpcy5fdGFncyA9IHt9O1xuICAgIHRoaXMuX2V4dHJhID0ge307XG4gICAgdGhpcy5fdXNlciA9IHt9O1xuICAgIHRoaXMuX2NvbnRleHRzID0ge307XG4gICAgdGhpcy5fbGV2ZWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fdHJhbnNhY3Rpb25OYW1lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2ZpbmdlcnByaW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Nlc3Npb24gPSB1bmRlZmluZWQ7XG4gICAgX3NldFNwYW5Gb3JTY29wZSh0aGlzLCB1bmRlZmluZWQpO1xuICAgIHRoaXMuX2F0dGFjaG1lbnRzID0gW107XG4gICAgdGhpcy5zZXRQcm9wYWdhdGlvbkNvbnRleHQoe1xuICAgICAgdHJhY2VJZDogZ2VuZXJhdGVUcmFjZUlkKCksXG4gICAgICBzYW1wbGVSYW5kOiBNYXRoLnJhbmRvbSgpXG4gICAgfSk7XG4gICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgYnJlYWRjcnVtYiB0byB0aGUgc2NvcGUuXG4gICAqIEJ5IGRlZmF1bHQsIHRoZSBsYXN0IDEwMCBicmVhZGNydW1icyBhcmUga2VwdC5cbiAgICovXG4gIGFkZEJyZWFkY3J1bWIoYnJlYWRjcnVtYiwgbWF4QnJlYWRjcnVtYnMpIHtcbiAgICBjb25zdCBtYXhDcnVtYnMgPSB0eXBlb2YgbWF4QnJlYWRjcnVtYnMgPT09ICdudW1iZXInID8gbWF4QnJlYWRjcnVtYnMgOiBERUZBVUxUX01BWF9CUkVBRENSVU1CUztcblxuICAgIC8vIE5vIGRhdGEgaGFzIGJlZW4gY2hhbmdlZCwgc28gZG9uJ3Qgbm90aWZ5IHNjb3BlIGxpc3RlbmVyc1xuICAgIGlmIChtYXhDcnVtYnMgPD0gMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZEJyZWFkY3J1bWIgPSB7XG4gICAgICB0aW1lc3RhbXA6IGRhdGVUaW1lc3RhbXBJblNlY29uZHMoKSxcbiAgICAgIC4uLmJyZWFkY3J1bWIsXG4gICAgICAvLyBCcmVhZGNydW1iIG1lc3NhZ2VzIGNhbiB0aGVvcmV0aWNhbGx5IGJlIGluZmluaXRlbHkgbGFyZ2UgYW5kIHRoZXkncmUgaGVsZCBpbiBtZW1vcnkgc28gd2UgdHJ1bmNhdGUgdGhlbSBub3QgdG8gbGVhayAodG9vIG11Y2gpIG1lbW9yeVxuICAgICAgbWVzc2FnZTogYnJlYWRjcnVtYi5tZXNzYWdlID8gdHJ1bmNhdGUoYnJlYWRjcnVtYi5tZXNzYWdlLCAyMDQ4KSA6IGJyZWFkY3J1bWIubWVzc2FnZVxuICAgIH07XG4gICAgdGhpcy5fYnJlYWRjcnVtYnMucHVzaChtZXJnZWRCcmVhZGNydW1iKTtcbiAgICBpZiAodGhpcy5fYnJlYWRjcnVtYnMubGVuZ3RoID4gbWF4Q3J1bWJzKSB7XG4gICAgICB0aGlzLl9icmVhZGNydW1icyA9IHRoaXMuX2JyZWFkY3J1bWJzLnNsaWNlKC1tYXhDcnVtYnMpO1xuICAgICAgdGhpcy5fY2xpZW50Py5yZWNvcmREcm9wcGVkRXZlbnQoJ2J1ZmZlcl9vdmVyZmxvdycsICdsb2dfaXRlbScpO1xuICAgIH1cbiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGFzdCBicmVhZGNydW1iIG9mIHRoZSBzY29wZS5cbiAgICovXG4gIGdldExhc3RCcmVhZGNydW1iKCkge1xuICAgIHJldHVybiB0aGlzLl9icmVhZGNydW1ic1t0aGlzLl9icmVhZGNydW1icy5sZW5ndGggLSAxXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgYnJlYWRjcnVtYnMgZnJvbSB0aGUgc2NvcGUuXG4gICAqL1xuICBjbGVhckJyZWFkY3J1bWJzKCkge1xuICAgIHRoaXMuX2JyZWFkY3J1bWJzID0gW107XG4gICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gYXR0YWNobWVudCB0byB0aGUgc2NvcGUuXG4gICAqL1xuICBhZGRBdHRhY2htZW50KGF0dGFjaG1lbnQpIHtcbiAgICB0aGlzLl9hdHRhY2htZW50cy5wdXNoKGF0dGFjaG1lbnQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBhdHRhY2htZW50cyBmcm9tIHRoZSBzY29wZS5cbiAgICovXG4gIGNsZWFyQXR0YWNobWVudHMoKSB7XG4gICAgdGhpcy5fYXR0YWNobWVudHMgPSBbXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRhdGEgb2YgdGhpcyBzY29wZSwgd2hpY2ggc2hvdWxkIGJlIGFwcGxpZWQgdG8gYW4gZXZlbnQgZHVyaW5nIHByb2Nlc3NpbmcuXG4gICAqL1xuICBnZXRTY29wZURhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJyZWFkY3J1bWJzOiB0aGlzLl9icmVhZGNydW1icyxcbiAgICAgIGF0dGFjaG1lbnRzOiB0aGlzLl9hdHRhY2htZW50cyxcbiAgICAgIGNvbnRleHRzOiB0aGlzLl9jb250ZXh0cyxcbiAgICAgIHRhZ3M6IHRoaXMuX3RhZ3MsXG4gICAgICBleHRyYTogdGhpcy5fZXh0cmEsXG4gICAgICB1c2VyOiB0aGlzLl91c2VyLFxuICAgICAgbGV2ZWw6IHRoaXMuX2xldmVsLFxuICAgICAgZmluZ2VycHJpbnQ6IHRoaXMuX2ZpbmdlcnByaW50IHx8IFtdLFxuICAgICAgZXZlbnRQcm9jZXNzb3JzOiB0aGlzLl9ldmVudFByb2Nlc3NvcnMsXG4gICAgICBwcm9wYWdhdGlvbkNvbnRleHQ6IHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCxcbiAgICAgIHNka1Byb2Nlc3NpbmdNZXRhZGF0YTogdGhpcy5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhLFxuICAgICAgdHJhbnNhY3Rpb25OYW1lOiB0aGlzLl90cmFuc2FjdGlvbk5hbWUsXG4gICAgICBzcGFuOiBfZ2V0U3BhbkZvclNjb3BlKHRoaXMpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgZGF0YSB3aGljaCB3aWxsIGJlIGFjY2Vzc2libGUgZHVyaW5nIGV2ZW50IHByb2Nlc3NpbmcgYnV0IHdvbid0IGdldCBzZW50IHRvIFNlbnRyeS5cbiAgICovXG4gIHNldFNES1Byb2Nlc3NpbmdNZXRhZGF0YShuZXdEYXRhKSB7XG4gICAgdGhpcy5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0gbWVyZ2UodGhpcy5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhLCBuZXdEYXRhLCAyKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgcHJvcGFnYXRpb24gY29udGV4dCB0byB0aGUgc2NvcGUsIHVzZWQgZm9yIGRpc3RyaWJ1dGVkIHRyYWNpbmdcbiAgICovXG4gIHNldFByb3BhZ2F0aW9uQ29udGV4dChjb250ZXh0KSB7XG4gICAgdGhpcy5fcHJvcGFnYXRpb25Db250ZXh0ID0gY29udGV4dDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcHJvcGFnYXRpb24gY29udGV4dCBmcm9tIHRoZSBzY29wZSwgdXNlZCBmb3IgZGlzdHJpYnV0ZWQgdHJhY2luZ1xuICAgKi9cbiAgZ2V0UHJvcGFnYXRpb25Db250ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9wYWdhdGlvbkNvbnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogQ2FwdHVyZSBhbiBleGNlcHRpb24gZm9yIHRoaXMgc2NvcGUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBpZCBvZiB0aGUgY2FwdHVyZWQgU2VudHJ5IGV2ZW50LlxuICAgKi9cbiAgY2FwdHVyZUV4Y2VwdGlvbihleGNlcHRpb24sIGhpbnQpIHtcbiAgICBjb25zdCBldmVudElkID0gaGludD8uZXZlbnRfaWQgfHwgdXVpZDQoKTtcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xuICAgICAgREVCVUdfQlVJTEQgJiYgZGVidWcud2FybignTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIGV4Y2VwdGlvbiEnKTtcbiAgICAgIHJldHVybiBldmVudElkO1xuICAgIH1cbiAgICBjb25zdCBzeW50aGV0aWNFeGNlcHRpb24gPSBuZXcgRXJyb3IoJ1NlbnRyeSBzeW50aGV0aWNFeGNlcHRpb24nKTtcbiAgICB0aGlzLl9jbGllbnQuY2FwdHVyZUV4Y2VwdGlvbihleGNlcHRpb24sIHtcbiAgICAgIG9yaWdpbmFsRXhjZXB0aW9uOiBleGNlcHRpb24sXG4gICAgICBzeW50aGV0aWNFeGNlcHRpb24sXG4gICAgICAuLi5oaW50LFxuICAgICAgZXZlbnRfaWQ6IGV2ZW50SWRcbiAgICB9LCB0aGlzKTtcbiAgICByZXR1cm4gZXZlbnRJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYXB0dXJlIGEgbWVzc2FnZSBmb3IgdGhpcyBzY29wZS5cbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGlkIG9mIHRoZSBjYXB0dXJlZCBtZXNzYWdlLlxuICAgKi9cbiAgY2FwdHVyZU1lc3NhZ2UobWVzc2FnZSwgbGV2ZWwsIGhpbnQpIHtcbiAgICBjb25zdCBldmVudElkID0gaGludD8uZXZlbnRfaWQgfHwgdXVpZDQoKTtcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xuICAgICAgREVCVUdfQlVJTEQgJiYgZGVidWcud2FybignTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIG1lc3NhZ2UhJyk7XG4gICAgICByZXR1cm4gZXZlbnRJZDtcbiAgICB9XG4gICAgY29uc3Qgc3ludGhldGljRXhjZXB0aW9uID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIHRoaXMuX2NsaWVudC5jYXB0dXJlTWVzc2FnZShtZXNzYWdlLCBsZXZlbCwge1xuICAgICAgb3JpZ2luYWxFeGNlcHRpb246IG1lc3NhZ2UsXG4gICAgICBzeW50aGV0aWNFeGNlcHRpb24sXG4gICAgICAuLi5oaW50LFxuICAgICAgZXZlbnRfaWQ6IGV2ZW50SWRcbiAgICB9LCB0aGlzKTtcbiAgICByZXR1cm4gZXZlbnRJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYXB0dXJlIGEgU2VudHJ5IGV2ZW50IGZvciB0aGlzIHNjb3BlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgaWQgb2YgdGhlIGNhcHR1cmVkIGV2ZW50LlxuICAgKi9cbiAgY2FwdHVyZUV2ZW50KGV2ZW50LCBoaW50KSB7XG4gICAgY29uc3QgZXZlbnRJZCA9IGhpbnQ/LmV2ZW50X2lkIHx8IHV1aWQ0KCk7XG4gICAgaWYgKCF0aGlzLl9jbGllbnQpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oJ05vIGNsaWVudCBjb25maWd1cmVkIG9uIHNjb3BlIC0gd2lsbCBub3QgY2FwdHVyZSBldmVudCEnKTtcbiAgICAgIHJldHVybiBldmVudElkO1xuICAgIH1cbiAgICB0aGlzLl9jbGllbnQuY2FwdHVyZUV2ZW50KGV2ZW50LCB7XG4gICAgICAuLi5oaW50LFxuICAgICAgZXZlbnRfaWQ6IGV2ZW50SWRcbiAgICB9LCB0aGlzKTtcbiAgICByZXR1cm4gZXZlbnRJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHdpbGwgYmUgY2FsbGVkIG9uIGV2ZXJ5IHNldCBjYWxsLlxuICAgKi9cbiAgX25vdGlmeVNjb3BlTGlzdGVuZXJzKCkge1xuICAgIC8vIFdlIG5lZWQgdGhpcyBjaGVjayBmb3IgdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzIHRvIGJlIGFibGUgdG8gd29yayBvbiBzY29wZSBkdXJpbmcgdXBkYXRlc1xuICAgIC8vIElmIHRoaXMgY2hlY2sgaXMgbm90IGhlcmUgd2UnbGwgcHJvZHVjZSBlbmRsZXNzIHJlY3Vyc2lvbiB3aGVuIHNvbWV0aGluZyBpcyBkb25lIHdpdGggdGhlIHNjb3BlXG4gICAgLy8gZHVyaW5nIHRoZSBjYWxsYmFjay5cbiAgICBpZiAoIXRoaXMuX25vdGlmeWluZ0xpc3RlbmVycykge1xuICAgICAgdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3Njb3BlTGlzdGVuZXJzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgICBjYWxsYmFjayh0aGlzKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzID0gZmFsc2U7XG4gICAgfVxuICB9XG59XG5leHBvcnQgeyBTY29wZSB9O1xuIiwiaW1wb3J0IHsgZ2V0R2xvYmFsU2luZ2xldG9uIH0gZnJvbSAnLi9jYXJyaWVyLmpzJztcbmltcG9ydCB7IFNjb3BlIH0gZnJvbSAnLi9zY29wZS5qcyc7XG5cbi8qKiBHZXQgdGhlIGRlZmF1bHQgY3VycmVudCBzY29wZS4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRDdXJyZW50U2NvcGUoKSB7XG4gIHJldHVybiBnZXRHbG9iYWxTaW5nbGV0b24oJ2RlZmF1bHRDdXJyZW50U2NvcGUnLCAoKSA9PiBuZXcgU2NvcGUoKSk7XG59XG5cbi8qKiBHZXQgdGhlIGRlZmF1bHQgaXNvbGF0aW9uIHNjb3BlLiAqL1xuZnVuY3Rpb24gZ2V0RGVmYXVsdElzb2xhdGlvblNjb3BlKCkge1xuICByZXR1cm4gZ2V0R2xvYmFsU2luZ2xldG9uKCdkZWZhdWx0SXNvbGF0aW9uU2NvcGUnLCAoKSA9PiBuZXcgU2NvcGUoKSk7XG59XG5leHBvcnQgeyBnZXREZWZhdWx0Q3VycmVudFNjb3BlLCBnZXREZWZhdWx0SXNvbGF0aW9uU2NvcGUgfTtcbiIsImltcG9ydCB7IGdldERlZmF1bHRDdXJyZW50U2NvcGUsIGdldERlZmF1bHRJc29sYXRpb25TY29wZSB9IGZyb20gJy4uL2RlZmF1bHRTY29wZXMuanMnO1xuaW1wb3J0IHsgU2NvcGUgfSBmcm9tICcuLi9zY29wZS5qcyc7XG5pbXBvcnQgeyBpc1RoZW5hYmxlIH0gZnJvbSAnLi4vdXRpbHMvaXMuanMnO1xuaW1wb3J0IHsgZ2V0TWFpbkNhcnJpZXIsIGdldFNlbnRyeUNhcnJpZXIgfSBmcm9tICcuLi9jYXJyaWVyLmpzJztcblxuLyoqXG4gKiBUaGlzIGlzIGFuIG9iamVjdCB0aGF0IGhvbGRzIGEgc3RhY2sgb2Ygc2NvcGVzLlxuICovXG5jbGFzcyBBc3luY0NvbnRleHRTdGFjayB7XG4gIGNvbnN0cnVjdG9yKHNjb3BlLCBpc29sYXRpb25TY29wZSkge1xuICAgIGxldCBhc3NpZ25lZFNjb3BlO1xuICAgIGlmICghc2NvcGUpIHtcbiAgICAgIGFzc2lnbmVkU2NvcGUgPSBuZXcgU2NvcGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzaWduZWRTY29wZSA9IHNjb3BlO1xuICAgIH1cbiAgICBsZXQgYXNzaWduZWRJc29sYXRpb25TY29wZTtcbiAgICBpZiAoIWlzb2xhdGlvblNjb3BlKSB7XG4gICAgICBhc3NpZ25lZElzb2xhdGlvblNjb3BlID0gbmV3IFNjb3BlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2lnbmVkSXNvbGF0aW9uU2NvcGUgPSBpc29sYXRpb25TY29wZTtcbiAgICB9XG5cbiAgICAvLyBzY29wZSBzdGFjayBmb3IgZG9tYWlucyBvciB0aGUgcHJvY2Vzc1xuICAgIHRoaXMuX3N0YWNrID0gW3tcbiAgICAgIHNjb3BlOiBhc3NpZ25lZFNjb3BlXG4gICAgfV07XG4gICAgdGhpcy5faXNvbGF0aW9uU2NvcGUgPSBhc3NpZ25lZElzb2xhdGlvblNjb3BlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcmsgYSBzY29wZSBmb3IgdGhlIHN0YWNrLlxuICAgKi9cbiAgd2l0aFNjb3BlKGNhbGxiYWNrKSB7XG4gICAgY29uc3Qgc2NvcGUgPSB0aGlzLl9wdXNoU2NvcGUoKTtcbiAgICBsZXQgbWF5YmVQcm9taXNlUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICBtYXliZVByb21pc2VSZXN1bHQgPSBjYWxsYmFjayhzY29wZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5fcG9wU2NvcGUoKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGlmIChpc1RoZW5hYmxlKG1heWJlUHJvbWlzZVJlc3VsdCkpIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBpc1RoZW5hYmxlIHJldHVybnMgdGhlIHdyb25nIHR5cGVcbiAgICAgIHJldHVybiBtYXliZVByb21pc2VSZXN1bHQudGhlbihyZXMgPT4ge1xuICAgICAgICB0aGlzLl9wb3BTY29wZSgpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSwgZSA9PiB7XG4gICAgICAgIHRoaXMuX3BvcFNjb3BlKCk7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5fcG9wU2NvcGUoKTtcbiAgICByZXR1cm4gbWF5YmVQcm9taXNlUmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY2xpZW50IG9mIHRoZSBzdGFjay5cbiAgICovXG4gIGdldENsaWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTdGFja1RvcCgpLmNsaWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzY29wZSBvZiB0aGUgdG9wIHN0YWNrLlxuICAgKi9cbiAgZ2V0U2NvcGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhY2tUb3AoKS5zY29wZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGlzb2xhdGlvbiBzY29wZSBmb3IgdGhlIHN0YWNrLlxuICAgKi9cbiAgZ2V0SXNvbGF0aW9uU2NvcGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzb2xhdGlvblNjb3BlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRvcG1vc3Qgc2NvcGUgbGF5ZXIgaW4gdGhlIG9yZGVyIGRvbWFpbiA+IGxvY2FsID4gcHJvY2Vzcy5cbiAgICovXG4gIGdldFN0YWNrVG9wKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGFja1t0aGlzLl9zdGFjay5sZW5ndGggLSAxXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXNoIGEgc2NvcGUgdG8gdGhlIHN0YWNrLlxuICAgKi9cbiAgX3B1c2hTY29wZSgpIHtcbiAgICAvLyBXZSB3YW50IHRvIGNsb25lIHRoZSBjb250ZW50IG9mIHByZXYgc2NvcGVcbiAgICBjb25zdCBzY29wZSA9IHRoaXMuZ2V0U2NvcGUoKS5jbG9uZSgpO1xuICAgIHRoaXMuX3N0YWNrLnB1c2goe1xuICAgICAgY2xpZW50OiB0aGlzLmdldENsaWVudCgpLFxuICAgICAgc2NvcGVcbiAgICB9KTtcbiAgICByZXR1cm4gc2NvcGU7XG4gIH1cblxuICAvKipcbiAgICogUG9wIGEgc2NvcGUgZnJvbSB0aGUgc3RhY2suXG4gICAqL1xuICBfcG9wU2NvcGUoKSB7XG4gICAgaWYgKHRoaXMuX3N0YWNrLmxlbmd0aCA8PSAxKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICEhdGhpcy5fc3RhY2sucG9wKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgdGhlIGdsb2JhbCBhc3luYyBjb250ZXh0IHN0YWNrLlxuICogVGhpcyB3aWxsIGJlIHJlbW92ZWQgZHVyaW5nIHRoZSB2OCBjeWNsZSBhbmQgaXMgb25seSBoZXJlIHRvIG1ha2UgbWlncmF0aW9uIGVhc2llci5cbiAqL1xuZnVuY3Rpb24gZ2V0QXN5bmNDb250ZXh0U3RhY2soKSB7XG4gIGNvbnN0IHJlZ2lzdHJ5ID0gZ2V0TWFpbkNhcnJpZXIoKTtcbiAgY29uc3Qgc2VudHJ5ID0gZ2V0U2VudHJ5Q2FycmllcihyZWdpc3RyeSk7XG4gIHJldHVybiBzZW50cnkuc3RhY2sgPSBzZW50cnkuc3RhY2sgfHwgbmV3IEFzeW5jQ29udGV4dFN0YWNrKGdldERlZmF1bHRDdXJyZW50U2NvcGUoKSwgZ2V0RGVmYXVsdElzb2xhdGlvblNjb3BlKCkpO1xufVxuZnVuY3Rpb24gd2l0aFNjb3BlKGNhbGxiYWNrKSB7XG4gIHJldHVybiBnZXRBc3luY0NvbnRleHRTdGFjaygpLndpdGhTY29wZShjYWxsYmFjayk7XG59XG5mdW5jdGlvbiB3aXRoU2V0U2NvcGUoc2NvcGUsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IHN0YWNrID0gZ2V0QXN5bmNDb250ZXh0U3RhY2soKTtcbiAgcmV0dXJuIHN0YWNrLndpdGhTY29wZSgoKSA9PiB7XG4gICAgc3RhY2suZ2V0U3RhY2tUb3AoKS5zY29wZSA9IHNjb3BlO1xuICAgIHJldHVybiBjYWxsYmFjayhzY29wZSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gd2l0aElzb2xhdGlvblNjb3BlKGNhbGxiYWNrKSB7XG4gIHJldHVybiBnZXRBc3luY0NvbnRleHRTdGFjaygpLndpdGhTY29wZSgoKSA9PiB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGdldEFzeW5jQ29udGV4dFN0YWNrKCkuZ2V0SXNvbGF0aW9uU2NvcGUoKSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgc3RhY2stYmFzZWQgYXN5bmMgY29udGV4dCBzdHJhdGVneS5cbiAqL1xuZnVuY3Rpb24gZ2V0U3RhY2tBc3luY0NvbnRleHRTdHJhdGVneSgpIHtcbiAgcmV0dXJuIHtcbiAgICB3aXRoSXNvbGF0aW9uU2NvcGUsXG4gICAgd2l0aFNjb3BlLFxuICAgIHdpdGhTZXRTY29wZSxcbiAgICB3aXRoU2V0SXNvbGF0aW9uU2NvcGU6IChfaXNvbGF0aW9uU2NvcGUsIGNhbGxiYWNrKSA9PiB7XG4gICAgICByZXR1cm4gd2l0aElzb2xhdGlvblNjb3BlKGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIGdldEN1cnJlbnRTY29wZTogKCkgPT4gZ2V0QXN5bmNDb250ZXh0U3RhY2soKS5nZXRTY29wZSgpLFxuICAgIGdldElzb2xhdGlvblNjb3BlOiAoKSA9PiBnZXRBc3luY0NvbnRleHRTdGFjaygpLmdldElzb2xhdGlvblNjb3BlKClcbiAgfTtcbn1cbmV4cG9ydCB7IEFzeW5jQ29udGV4dFN0YWNrLCBnZXRTdGFja0FzeW5jQ29udGV4dFN0cmF0ZWd5IH07XG4iLCJpbXBvcnQgeyBnZXRNYWluQ2FycmllciwgZ2V0U2VudHJ5Q2FycmllciB9IGZyb20gJy4uL2NhcnJpZXIuanMnO1xuaW1wb3J0IHsgZ2V0U3RhY2tBc3luY0NvbnRleHRTdHJhdGVneSB9IGZyb20gJy4vc3RhY2tTdHJhdGVneS5qcyc7XG5cbi8qKlxuICogQHByaXZhdGUgUHJpdmF0ZSBBUEkgd2l0aCBubyBzZW12ZXIgZ3VhcmFudGVlcyFcbiAqXG4gKiBTZXRzIHRoZSBnbG9iYWwgYXN5bmMgY29udGV4dCBzdHJhdGVneVxuICovXG5mdW5jdGlvbiBzZXRBc3luY0NvbnRleHRTdHJhdGVneShzdHJhdGVneSkge1xuICAvLyBHZXQgbWFpbiBjYXJyaWVyIChnbG9iYWwgZm9yIGV2ZXJ5IGVudmlyb25tZW50KVxuICBjb25zdCByZWdpc3RyeSA9IGdldE1haW5DYXJyaWVyKCk7XG4gIGNvbnN0IHNlbnRyeSA9IGdldFNlbnRyeUNhcnJpZXIocmVnaXN0cnkpO1xuICBzZW50cnkuYWNzID0gc3RyYXRlZ3k7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGFzeW5jIGNvbnRleHQgc3RyYXRlZ3kuXG4gKiBJZiBub25lIGhhcyBiZWVuIHNldHVwLCB0aGUgZGVmYXVsdCB3aWxsIGJlIHVzZWQuXG4gKi9cbmZ1bmN0aW9uIGdldEFzeW5jQ29udGV4dFN0cmF0ZWd5KGNhcnJpZXIpIHtcbiAgY29uc3Qgc2VudHJ5ID0gZ2V0U2VudHJ5Q2FycmllcihjYXJyaWVyKTtcbiAgaWYgKHNlbnRyeS5hY3MpIHtcbiAgICByZXR1cm4gc2VudHJ5LmFjcztcbiAgfVxuXG4gIC8vIE90aGVyd2lzZSwgdXNlIHRoZSBkZWZhdWx0IG9uZSAoc3RhY2spXG4gIHJldHVybiBnZXRTdGFja0FzeW5jQ29udGV4dFN0cmF0ZWd5KCk7XG59XG5leHBvcnQgeyBnZXRBc3luY0NvbnRleHRTdHJhdGVneSwgc2V0QXN5bmNDb250ZXh0U3RyYXRlZ3kgfTtcbiIsImltcG9ydCB7IGdldEFzeW5jQ29udGV4dFN0cmF0ZWd5IH0gZnJvbSAnLi9hc3luY0NvbnRleHQvaW5kZXguanMnO1xuaW1wb3J0IHsgZ2V0TWFpbkNhcnJpZXIsIGdldEdsb2JhbFNpbmdsZXRvbiB9IGZyb20gJy4vY2Fycmllci5qcyc7XG5pbXBvcnQgeyBTY29wZSB9IGZyb20gJy4vc2NvcGUuanMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQgfSBmcm9tICcuL3V0aWxzL3Byb3BhZ2F0aW9uQ29udGV4dC5qcyc7XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIHNjb3BlLlxuICovXG5mdW5jdGlvbiBnZXRDdXJyZW50U2NvcGUoKSB7XG4gIGNvbnN0IGNhcnJpZXIgPSBnZXRNYWluQ2FycmllcigpO1xuICBjb25zdCBhY3MgPSBnZXRBc3luY0NvbnRleHRTdHJhdGVneShjYXJyaWVyKTtcbiAgcmV0dXJuIGFjcy5nZXRDdXJyZW50U2NvcGUoKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnRseSBhY3RpdmUgaXNvbGF0aW9uIHNjb3BlLlxuICogVGhlIGlzb2xhdGlvbiBzY29wZSBpcyBhY3RpdmUgZm9yIHRoZSBjdXJyZW50IGV4ZWN1dGlvbiBjb250ZXh0LlxuICovXG5mdW5jdGlvbiBnZXRJc29sYXRpb25TY29wZSgpIHtcbiAgY29uc3QgY2FycmllciA9IGdldE1haW5DYXJyaWVyKCk7XG4gIGNvbnN0IGFjcyA9IGdldEFzeW5jQ29udGV4dFN0cmF0ZWd5KGNhcnJpZXIpO1xuICByZXR1cm4gYWNzLmdldElzb2xhdGlvblNjb3BlKCk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBnbG9iYWwgc2NvcGUuXG4gKiBUaGlzIHNjb3BlIGlzIGFwcGxpZWQgdG8gX2FsbF8gZXZlbnRzLlxuICovXG5mdW5jdGlvbiBnZXRHbG9iYWxTY29wZSgpIHtcbiAgcmV0dXJuIGdldEdsb2JhbFNpbmdsZXRvbignZ2xvYmFsU2NvcGUnLCAoKSA9PiBuZXcgU2NvcGUoKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBzY29wZSB3aXRoIGFuZCBleGVjdXRlcyB0aGUgZ2l2ZW4gb3BlcmF0aW9uIHdpdGhpbi5cbiAqIFRoZSBzY29wZSBpcyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgb25jZSB0aGUgb3BlcmF0aW9uXG4gKiBmaW5pc2hlcyBvciB0aHJvd3MuXG4gKi9cblxuLyoqXG4gKiBFaXRoZXIgY3JlYXRlcyBhIG5ldyBhY3RpdmUgc2NvcGUsIG9yIHNldHMgdGhlIGdpdmVuIHNjb3BlIGFzIGFjdGl2ZSBzY29wZSBpbiB0aGUgZ2l2ZW4gY2FsbGJhY2suXG4gKi9cbmZ1bmN0aW9uIHdpdGhTY29wZSguLi5yZXN0KSB7XG4gIGNvbnN0IGNhcnJpZXIgPSBnZXRNYWluQ2FycmllcigpO1xuICBjb25zdCBhY3MgPSBnZXRBc3luY0NvbnRleHRTdHJhdGVneShjYXJyaWVyKTtcblxuICAvLyBJZiBhIHNjb3BlIGlzIGRlZmluZWQsIHdlIHdhbnQgdG8gbWFrZSB0aGlzIHRoZSBhY3RpdmUgc2NvcGUgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBvbmVcbiAgaWYgKHJlc3QubGVuZ3RoID09PSAyKSB7XG4gICAgY29uc3QgW3Njb3BlLCBjYWxsYmFja10gPSByZXN0O1xuICAgIGlmICghc2NvcGUpIHtcbiAgICAgIHJldHVybiBhY3Mud2l0aFNjb3BlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjcy53aXRoU2V0U2NvcGUoc2NvcGUsIGNhbGxiYWNrKTtcbiAgfVxuICByZXR1cm4gYWNzLndpdGhTY29wZShyZXN0WzBdKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBmb3JrIHRoZSBjdXJyZW50IGlzb2xhdGlvbiBzY29wZSBhbmQgdGhlIGN1cnJlbnQgc2NvcGUgYmFzZWQgb24gdGhlIGN1cnJlbnQgYXN5bmMgY29udGV4dCBzdHJhdGVneS4gSWYgbm9cbiAqIGFzeW5jIGNvbnRleHQgc3RyYXRlZ3kgaXMgc2V0LCB0aGUgaXNvbGF0aW9uIHNjb3BlIGFuZCB0aGUgY3VycmVudCBzY29wZSB3aWxsIG5vdCBiZSBmb3JrZWQgKHRoaXMgaXMgY3VycmVudGx5IHRoZVxuICogY2FzZSwgZm9yIGV4YW1wbGUsIGluIHRoZSBicm93c2VyKS5cbiAqXG4gKiBVc2FnZSBvZiB0aGlzIGZ1bmN0aW9uIGluIGVudmlyb25tZW50cyB3aXRob3V0IGFzeW5jIGNvbnRleHQgc3RyYXRlZ3kgaXMgZGlzY291cmFnZWQgYW5kIG1heSBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3VyLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgaW50ZW5kZWQgZm9yIFNlbnRyeSBTREsgYW5kIFNESyBpbnRlZ3JhdGlvbiBkZXZlbG9wbWVudC4gSXQgaXMgbm90IHJlY29tbWVuZGVkIHRvIGJlIHVzZWQgaW4gXCJub3JtYWxcIlxuICogYXBwbGljYXRpb25zIGRpcmVjdGx5IGJlY2F1c2UgaXQgY29tZXMgd2l0aCBwaXRmYWxscy4gVXNlIGF0IHlvdXIgb3duIHJpc2shXG4gKi9cblxuLyoqXG4gKiBFaXRoZXIgY3JlYXRlcyBhIG5ldyBhY3RpdmUgaXNvbGF0aW9uIHNjb3BlLCBvciBzZXRzIHRoZSBnaXZlbiBpc29sYXRpb24gc2NvcGUgYXMgYWN0aXZlIHNjb3BlIGluIHRoZSBnaXZlbiBjYWxsYmFjay5cbiAqL1xuZnVuY3Rpb24gd2l0aElzb2xhdGlvblNjb3BlKC4uLnJlc3QpIHtcbiAgY29uc3QgY2FycmllciA9IGdldE1haW5DYXJyaWVyKCk7XG4gIGNvbnN0IGFjcyA9IGdldEFzeW5jQ29udGV4dFN0cmF0ZWd5KGNhcnJpZXIpO1xuXG4gIC8vIElmIGEgc2NvcGUgaXMgZGVmaW5lZCwgd2Ugd2FudCB0byBtYWtlIHRoaXMgdGhlIGFjdGl2ZSBzY29wZSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IG9uZVxuICBpZiAocmVzdC5sZW5ndGggPT09IDIpIHtcbiAgICBjb25zdCBbaXNvbGF0aW9uU2NvcGUsIGNhbGxiYWNrXSA9IHJlc3Q7XG4gICAgaWYgKCFpc29sYXRpb25TY29wZSkge1xuICAgICAgcmV0dXJuIGFjcy53aXRoSXNvbGF0aW9uU2NvcGUoY2FsbGJhY2spO1xuICAgIH1cbiAgICByZXR1cm4gYWNzLndpdGhTZXRJc29sYXRpb25TY29wZShpc29sYXRpb25TY29wZSwgY2FsbGJhY2spO1xuICB9XG4gIHJldHVybiBhY3Mud2l0aElzb2xhdGlvblNjb3BlKHJlc3RbMF0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudGx5IGFjdGl2ZSBjbGllbnQuXG4gKi9cbmZ1bmN0aW9uIGdldENsaWVudCgpIHtcbiAgcmV0dXJuIGdldEN1cnJlbnRTY29wZSgpLmdldENsaWVudCgpO1xufVxuXG4vKipcbiAqIEdldCBhIHRyYWNlIGNvbnRleHQgZm9yIHRoZSBnaXZlbiBzY29wZS5cbiAqL1xuZnVuY3Rpb24gZ2V0VHJhY2VDb250ZXh0RnJvbVNjb3BlKHNjb3BlKSB7XG4gIGNvbnN0IHByb3BhZ2F0aW9uQ29udGV4dCA9IHNjb3BlLmdldFByb3BhZ2F0aW9uQ29udGV4dCgpO1xuICBjb25zdCB7XG4gICAgdHJhY2VJZCxcbiAgICBwYXJlbnRTcGFuSWQsXG4gICAgcHJvcGFnYXRpb25TcGFuSWRcbiAgfSA9IHByb3BhZ2F0aW9uQ29udGV4dDtcbiAgY29uc3QgdHJhY2VDb250ZXh0ID0ge1xuICAgIHRyYWNlX2lkOiB0cmFjZUlkLFxuICAgIHNwYW5faWQ6IHByb3BhZ2F0aW9uU3BhbklkIHx8IGdlbmVyYXRlU3BhbklkKClcbiAgfTtcbiAgaWYgKHBhcmVudFNwYW5JZCkge1xuICAgIHRyYWNlQ29udGV4dC5wYXJlbnRfc3Bhbl9pZCA9IHBhcmVudFNwYW5JZDtcbiAgfVxuICByZXR1cm4gdHJhY2VDb250ZXh0O1xufVxuZXhwb3J0IHsgZ2V0Q2xpZW50LCBnZXRDdXJyZW50U2NvcGUsIGdldEdsb2JhbFNjb3BlLCBnZXRJc29sYXRpb25TY29wZSwgZ2V0VHJhY2VDb250ZXh0RnJvbVNjb3BlLCB3aXRoSXNvbGF0aW9uU2NvcGUsIHdpdGhTY29wZSB9O1xuIiwiLyoqXG4gKiBVc2UgdGhpcyBhdHRyaWJ1dGUgdG8gcmVwcmVzZW50IHRoZSBzb3VyY2Ugb2YgYSBzcGFuLlxuICogU2hvdWxkIGJlIG9uZSBvZjogY3VzdG9tLCB1cmwsIHJvdXRlLCB2aWV3LCBjb21wb25lbnQsIHRhc2ssIHVua25vd25cbiAqXG4gKi9cbmNvbnN0IFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFID0gJ3NlbnRyeS5zb3VyY2UnO1xuXG4vKipcbiAqIEF0dHJpYnV0ZXMgdGhhdCBob2xkcyB0aGUgc2FtcGxlIHJhdGUgdGhhdCB3YXMgbG9jYWxseSBhcHBsaWVkIHRvIGEgc3Bhbi5cbiAqIElmIHRoaXMgYXR0cmlidXRlIGlzIG5vdCBkZWZpbmVkLCBpdCBtZWFucyB0aGF0IHRoZSBzcGFuIGluaGVyaXRlZCBhIHNhbXBsaW5nIGRlY2lzaW9uLlxuICpcbiAqIE5PVEU6IElzIG9ubHkgZGVmaW5lZCBvbiByb290IHNwYW5zLlxuICovXG5jb25zdCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NBTVBMRV9SQVRFID0gJ3NlbnRyeS5zYW1wbGVfcmF0ZSc7XG5cbi8qKlxuICogQXR0cmlidXRlIGhvbGRpbmcgdGhlIHNhbXBsZSByYXRlIG9mIHRoZSBwcmV2aW91cyB0cmFjZS5cbiAqIFRoaXMgaXMgdXNlZCB0byBzYW1wbGUgY29uc2lzdGVudGx5IGFjcm9zcyBzdWJzZXF1ZW50IHRyYWNlcyBpbiB0aGUgYnJvd3NlciBTREsuXG4gKlxuICogTm90ZTogT25seSBkZWZpbmVkIG9uIHJvb3Qgc3BhbnMsIGlmIG9wdGVkIGludG8gY29uc2lzdGVudCBzYW1wbGluZ1xuICovXG5jb25zdCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1BSRVZJT1VTX1RSQUNFX1NBTVBMRV9SQVRFID0gJ3NlbnRyeS5wcmV2aW91c190cmFjZV9zYW1wbGVfcmF0ZSc7XG5cbi8qKlxuICogVXNlIHRoaXMgYXR0cmlidXRlIHRvIHJlcHJlc2VudCB0aGUgb3BlcmF0aW9uIG9mIGEgc3Bhbi5cbiAqL1xuY29uc3QgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUCA9ICdzZW50cnkub3AnO1xuXG4vKipcbiAqIFVzZSB0aGlzIGF0dHJpYnV0ZSB0byByZXByZXNlbnQgdGhlIG9yaWdpbiBvZiBhIHNwYW4uXG4gKi9cbmNvbnN0IFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOID0gJ3NlbnRyeS5vcmlnaW4nO1xuXG4vKiogVGhlIHJlYXNvbiB3aHkgYW4gaWRsZSBzcGFuIGZpbmlzaGVkLiAqL1xuY29uc3QgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9JRExFX1NQQU5fRklOSVNIX1JFQVNPTiA9ICdzZW50cnkuaWRsZV9zcGFuX2ZpbmlzaF9yZWFzb24nO1xuXG4vKiogVGhlIHVuaXQgb2YgYSBtZWFzdXJlbWVudCwgd2hpY2ggbWF5IGJlIHN0b3JlZCBhcyBhIFRpbWVkRXZlbnQuICovXG5jb25zdCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1VOSVQgPSAnc2VudHJ5Lm1lYXN1cmVtZW50X3VuaXQnO1xuXG4vKiogVGhlIHZhbHVlIG9mIGEgbWVhc3VyZW1lbnQsIHdoaWNoIG1heSBiZSBzdG9yZWQgYXMgYSBUaW1lZEV2ZW50LiAqL1xuY29uc3QgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9NRUFTVVJFTUVOVF9WQUxVRSA9ICdzZW50cnkubWVhc3VyZW1lbnRfdmFsdWUnO1xuXG4vKipcbiAqIEEgY3VzdG9tIHNwYW4gbmFtZSBzZXQgYnkgdXNlcnMgZ3VhcmFudGVlZCB0byBiZSB0YWtlbiBvdmVyIGFueSBhdXRvbWF0aWNhbGx5XG4gKiBpbmZlcnJlZCBuYW1lLiBUaGlzIGF0dHJpYnV0ZSBpcyByZW1vdmVkIGJlZm9yZSB0aGUgc3BhbiBpcyBzZW50LlxuICpcbiAqIEBpbnRlcm5hbCBvbmx5IG1lYW50IGZvciBpbnRlcm5hbCBTREsgdXNhZ2VcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9DVVNUT01fU1BBTl9OQU1FID0gJ3NlbnRyeS5jdXN0b21fc3Bhbl9uYW1lJztcblxuLyoqXG4gKiBUaGUgaWQgb2YgdGhlIHByb2ZpbGUgdGhhdCB0aGlzIHNwYW4gb2NjdXJyZWQgaW4uXG4gKi9cbmNvbnN0IFNFTUFOVElDX0FUVFJJQlVURV9QUk9GSUxFX0lEID0gJ3NlbnRyeS5wcm9maWxlX2lkJztcbmNvbnN0IFNFTUFOVElDX0FUVFJJQlVURV9FWENMVVNJVkVfVElNRSA9ICdzZW50cnkuZXhjbHVzaXZlX3RpbWUnO1xuY29uc3QgU0VNQU5USUNfQVRUUklCVVRFX0NBQ0hFX0hJVCA9ICdjYWNoZS5oaXQnO1xuY29uc3QgU0VNQU5USUNfQVRUUklCVVRFX0NBQ0hFX0tFWSA9ICdjYWNoZS5rZXknO1xuY29uc3QgU0VNQU5USUNfQVRUUklCVVRFX0NBQ0hFX0lURU1fU0laRSA9ICdjYWNoZS5pdGVtX3NpemUnO1xuXG4vKiogVE9ETzogUmVtb3ZlIHRoZXNlIG9uY2Ugd2UgdXBkYXRlIHRvIGxhdGVzdCBzZW1hbnRpYyBjb252ZW50aW9ucyAqL1xuY29uc3QgU0VNQU5USUNfQVRUUklCVVRFX0hUVFBfUkVRVUVTVF9NRVRIT0QgPSAnaHR0cC5yZXF1ZXN0Lm1ldGhvZCc7XG5jb25zdCBTRU1BTlRJQ19BVFRSSUJVVEVfVVJMX0ZVTEwgPSAndXJsLmZ1bGwnO1xuXG4vKipcbiAqIEEgc3BhbiBsaW5rIGF0dHJpYnV0ZSB0byBtYXJrIHRoZSBsaW5rIGFzIGEgc3BlY2lhbCBzcGFuIGxpbmsuXG4gKlxuICogS25vd24gdmFsdWVzOlxuICogLSBgcHJldmlvdXNfdHJhY2VgOiBUaGUgc3BhbiBsaW5rcyB0byB0aGUgZnJvbnRlbmQgcm9vdCBzcGFuIG9mIHRoZSBwcmV2aW91cyB0cmFjZS5cbiAqIC0gYG5leHRfdHJhY2VgOiBUaGUgc3BhbiBsaW5rcyB0byB0aGUgZnJvbnRlbmQgcm9vdCBzcGFuIG9mIHRoZSBuZXh0IHRyYWNlLiAoTm90IHNldCBieSB0aGUgU0RLKVxuICpcbiAqIE90aGVyIHZhbHVlcyBtYXkgYmUgc2V0IGFzIGFwcHJvcHJpYXRlLlxuICogQHNlZSBodHRwczovL2RldmVsb3Auc2VudHJ5LmRldi9zZGsvdGVsZW1ldHJ5L3RyYWNlcy9zcGFuLWxpbmtzLyNsaW5rLXR5cGVzXG4gKi9cbmNvbnN0IFNFTUFOVElDX0xJTktfQVRUUklCVVRFX0xJTktfVFlQRSA9ICdzZW50cnkubGluay50eXBlJztcbmV4cG9ydCB7IFNFTUFOVElDX0FUVFJJQlVURV9DQUNIRV9ISVQsIFNFTUFOVElDX0FUVFJJQlVURV9DQUNIRV9JVEVNX1NJWkUsIFNFTUFOVElDX0FUVFJJQlVURV9DQUNIRV9LRVksIFNFTUFOVElDX0FUVFJJQlVURV9FWENMVVNJVkVfVElNRSwgU0VNQU5USUNfQVRUUklCVVRFX0hUVFBfUkVRVUVTVF9NRVRIT0QsIFNFTUFOVElDX0FUVFJJQlVURV9QUk9GSUxFX0lELCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX0NVU1RPTV9TUEFOX05BTUUsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfSURMRV9TUEFOX0ZJTklTSF9SRUFTT04sIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfTUVBU1VSRU1FTlRfVU5JVCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9NRUFTVVJFTUVOVF9WQUxVRSwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU4sIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfUFJFVklPVVNfVFJBQ0VfU0FNUExFX1JBVEUsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU0FNUExFX1JBVEUsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFLCBTRU1BTlRJQ19BVFRSSUJVVEVfVVJMX0ZVTEwsIFNFTUFOVElDX0xJTktfQVRUUklCVVRFX0xJTktfVFlQRSB9O1xuIiwiY29uc3QgU1BBTl9TVEFUVVNfVU5TRVQgPSAwO1xuY29uc3QgU1BBTl9TVEFUVVNfT0sgPSAxO1xuY29uc3QgU1BBTl9TVEFUVVNfRVJST1IgPSAyO1xuXG4vKipcbiAqIENvbnZlcnRzIGEgSFRUUCBzdGF0dXMgY29kZSBpbnRvIGEgc2VudHJ5IHN0YXR1cyB3aXRoIGEgbWVzc2FnZS5cbiAqXG4gKiBAcGFyYW0gaHR0cFN0YXR1cyBUaGUgSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZS5cbiAqIEByZXR1cm5zIFRoZSBzcGFuIHN0YXR1cyBvciB1bmtub3duX2Vycm9yLlxuICovXG4vLyBodHRwczovL2RldmVsb3Auc2VudHJ5LmRldi9zZGsvZXZlbnQtcGF5bG9hZHMvc3Bhbi9cbmZ1bmN0aW9uIGdldFNwYW5TdGF0dXNGcm9tSHR0cENvZGUoaHR0cFN0YXR1cykge1xuICBpZiAoaHR0cFN0YXR1cyA8IDQwMCAmJiBodHRwU3RhdHVzID49IDEwMCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2RlOiBTUEFOX1NUQVRVU19PS1xuICAgIH07XG4gIH1cbiAgaWYgKGh0dHBTdGF0dXMgPj0gNDAwICYmIGh0dHBTdGF0dXMgPCA1MDApIHtcbiAgICBzd2l0Y2ggKGh0dHBTdGF0dXMpIHtcbiAgICAgIGNhc2UgNDAxOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvZGU6IFNQQU5fU1RBVFVTX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6ICd1bmF1dGhlbnRpY2F0ZWQnXG4gICAgICAgIH07XG4gICAgICBjYXNlIDQwMzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgICAgICBtZXNzYWdlOiAncGVybWlzc2lvbl9kZW5pZWQnXG4gICAgICAgIH07XG4gICAgICBjYXNlIDQwNDpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgICAgICBtZXNzYWdlOiAnbm90X2ZvdW5kJ1xuICAgICAgICB9O1xuICAgICAgY2FzZSA0MDk6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29kZTogU1BBTl9TVEFUVVNfRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogJ2FscmVhZHlfZXhpc3RzJ1xuICAgICAgICB9O1xuICAgICAgY2FzZSA0MTM6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29kZTogU1BBTl9TVEFUVVNfRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogJ2ZhaWxlZF9wcmVjb25kaXRpb24nXG4gICAgICAgIH07XG4gICAgICBjYXNlIDQyOTpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgICAgICBtZXNzYWdlOiAncmVzb3VyY2VfZXhoYXVzdGVkJ1xuICAgICAgICB9O1xuICAgICAgY2FzZSA0OTk6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29kZTogU1BBTl9TVEFUVVNfRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogJ2NhbmNlbGxlZCdcbiAgICAgICAgfTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29kZTogU1BBTl9TVEFUVVNfRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogJ2ludmFsaWRfYXJndW1lbnQnXG4gICAgICAgIH07XG4gICAgfVxuICB9XG4gIGlmIChodHRwU3RhdHVzID49IDUwMCAmJiBodHRwU3RhdHVzIDwgNjAwKSB7XG4gICAgc3dpdGNoIChodHRwU3RhdHVzKSB7XG4gICAgICBjYXNlIDUwMTpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgICAgICBtZXNzYWdlOiAndW5pbXBsZW1lbnRlZCdcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgNTAzOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvZGU6IFNQQU5fU1RBVFVTX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6ICd1bmF2YWlsYWJsZSdcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgNTA0OlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvZGU6IFNQQU5fU1RBVFVTX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6ICdkZWFkbGluZV9leGNlZWRlZCdcbiAgICAgICAgfTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29kZTogU1BBTl9TVEFUVVNfRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogJ2ludGVybmFsX2Vycm9yJ1xuICAgICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGNvZGU6IFNQQU5fU1RBVFVTX0VSUk9SLFxuICAgIG1lc3NhZ2U6ICd1bmtub3duX2Vycm9yJ1xuICB9O1xufVxuXG4vKipcbiAqIFNldHMgdGhlIEh0dHAgc3RhdHVzIGF0dHJpYnV0ZXMgb24gdGhlIGN1cnJlbnQgc3BhbiBiYXNlZCBvbiB0aGUgaHR0cCBjb2RlLlxuICogQWRkaXRpb25hbGx5LCB0aGUgc3BhbidzIHN0YXR1cyBpcyB1cGRhdGVkLCBkZXBlbmRpbmcgb24gdGhlIGh0dHAgY29kZS5cbiAqL1xuZnVuY3Rpb24gc2V0SHR0cFN0YXR1cyhzcGFuLCBodHRwU3RhdHVzKSB7XG4gIHNwYW4uc2V0QXR0cmlidXRlKCdodHRwLnJlc3BvbnNlLnN0YXR1c19jb2RlJywgaHR0cFN0YXR1cyk7XG4gIGNvbnN0IHNwYW5TdGF0dXMgPSBnZXRTcGFuU3RhdHVzRnJvbUh0dHBDb2RlKGh0dHBTdGF0dXMpO1xuICBpZiAoc3BhblN0YXR1cy5tZXNzYWdlICE9PSAndW5rbm93bl9lcnJvcicpIHtcbiAgICBzcGFuLnNldFN0YXR1cyhzcGFuU3RhdHVzKTtcbiAgfVxufVxuZXhwb3J0IHsgU1BBTl9TVEFUVVNfRVJST1IsIFNQQU5fU1RBVFVTX09LLCBTUEFOX1NUQVRVU19VTlNFVCwgZ2V0U3BhblN0YXR1c0Zyb21IdHRwQ29kZSwgc2V0SHR0cFN0YXR1cyB9O1xuIiwiaW1wb3J0IHsgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5IH0gZnJvbSAnLi4vdXRpbHMvb2JqZWN0LmpzJztcbmNvbnN0IFNDT1BFX09OX1NUQVJUX1NQQU5fRklFTEQgPSAnX3NlbnRyeVNjb3BlJztcbmNvbnN0IElTT0xBVElPTl9TQ09QRV9PTl9TVEFSVF9TUEFOX0ZJRUxEID0gJ19zZW50cnlJc29sYXRpb25TY29wZSc7XG5cbi8qKiBTdG9yZSB0aGUgc2NvcGUgJiBpc29sYXRpb24gc2NvcGUgZm9yIGEgc3Bhbiwgd2hpY2ggY2FuIHRoZSBiZSB1c2VkIHdoZW4gaXQgaXMgZmluaXNoZWQuICovXG5mdW5jdGlvbiBzZXRDYXB0dXJlZFNjb3Blc09uU3BhbihzcGFuLCBzY29wZSwgaXNvbGF0aW9uU2NvcGUpIHtcbiAgaWYgKHNwYW4pIHtcbiAgICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoc3BhbiwgSVNPTEFUSU9OX1NDT1BFX09OX1NUQVJUX1NQQU5fRklFTEQsIGlzb2xhdGlvblNjb3BlKTtcbiAgICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoc3BhbiwgU0NPUEVfT05fU1RBUlRfU1BBTl9GSUVMRCwgc2NvcGUpO1xuICB9XG59XG5cbi8qKlxuICogR3JhYnMgdGhlIHNjb3BlIGFuZCBpc29sYXRpb24gc2NvcGUgb2ZmIGEgc3BhbiB0aGF0IHdlcmUgYWN0aXZlIHdoZW4gdGhlIHNwYW4gd2FzIHN0YXJ0ZWQuXG4gKi9cbmZ1bmN0aW9uIGdldENhcHR1cmVkU2NvcGVzT25TcGFuKHNwYW4pIHtcbiAgcmV0dXJuIHtcbiAgICBzY29wZTogc3BhbltTQ09QRV9PTl9TVEFSVF9TUEFOX0ZJRUxEXSxcbiAgICBpc29sYXRpb25TY29wZTogc3BhbltJU09MQVRJT05fU0NPUEVfT05fU1RBUlRfU1BBTl9GSUVMRF1cbiAgfTtcbn1cbmV4cG9ydCB7IGdldENhcHR1cmVkU2NvcGVzT25TcGFuLCBzZXRDYXB0dXJlZFNjb3Blc09uU3BhbiB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJy4vaXMuanMnO1xuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuL2xvZ2dlci5qcyc7XG5jb25zdCBTRU5UUllfQkFHR0FHRV9LRVlfUFJFRklYID0gJ3NlbnRyeS0nO1xuY29uc3QgU0VOVFJZX0JBR0dBR0VfS0VZX1BSRUZJWF9SRUdFWCA9IC9ec2VudHJ5LS87XG5cbi8qKlxuICogTWF4IGxlbmd0aCBvZiBhIHNlcmlhbGl6ZWQgYmFnZ2FnZSBzdHJpbmdcbiAqXG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvYmFnZ2FnZS8jbGltaXRzXG4gKi9cbmNvbnN0IE1BWF9CQUdHQUdFX1NUUklOR19MRU5HVEggPSA4MTkyO1xuXG4vKipcbiAqIFRha2VzIGEgYmFnZ2FnZSBoZWFkZXIgYW5kIHR1cm5zIGl0IGludG8gRHluYW1pYyBTYW1wbGluZyBDb250ZXh0LCBieSBleHRyYWN0aW5nIGFsbCB0aGUgXCJzZW50cnktXCIgcHJlZml4ZWQgdmFsdWVzXG4gKiBmcm9tIGl0LlxuICpcbiAqIEBwYXJhbSBiYWdnYWdlSGVhZGVyIEEgdmVyeSBicmVhZCBkZWZpbml0aW9uIG9mIGEgYmFnZ2FnZSBoZWFkZXIgYXMgaXQgbWlnaHQgYXBwZWFyIGluIHZhcmlvdXMgZnJhbWV3b3Jrcy5cbiAqIEByZXR1cm5zIFRoZSBEeW5hbWljIFNhbXBsaW5nIENvbnRleHQgdGhhdCB3YXMgZm91bmQgb24gYGJhZ2dhZ2VIZWFkZXJgLCBpZiB0aGVyZSB3YXMgYW55LCBgdW5kZWZpbmVkYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGJhZ2dhZ2VIZWFkZXJUb0R5bmFtaWNTYW1wbGluZ0NvbnRleHQoXG4vLyBWZXJ5IGxpYmVyYWwgZGVmaW5pdGlvbiBvZiB3aGF0IGFueSBpbmNvbWluZyBoZWFkZXIgbWlnaHQgbG9vayBsaWtlXG5iYWdnYWdlSGVhZGVyKSB7XG4gIGNvbnN0IGJhZ2dhZ2VPYmplY3QgPSBwYXJzZUJhZ2dhZ2VIZWFkZXIoYmFnZ2FnZUhlYWRlcik7XG4gIGlmICghYmFnZ2FnZU9iamVjdCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyBSZWFkIGFsbCBcInNlbnRyeS1cIiBwcmVmaXhlZCB2YWx1ZXMgb3V0IG9mIHRoZSBiYWdnYWdlIG9iamVjdCBhbmQgcHV0IGl0IG9udG8gYSBkeW5hbWljIHNhbXBsaW5nIGNvbnRleHQgb2JqZWN0LlxuICBjb25zdCBkeW5hbWljU2FtcGxpbmdDb250ZXh0ID0gT2JqZWN0LmVudHJpZXMoYmFnZ2FnZU9iamVjdCkucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmIChrZXkubWF0Y2goU0VOVFJZX0JBR0dBR0VfS0VZX1BSRUZJWF9SRUdFWCkpIHtcbiAgICAgIGNvbnN0IG5vblByZWZpeGVkS2V5ID0ga2V5LnNsaWNlKFNFTlRSWV9CQUdHQUdFX0tFWV9QUkVGSVgubGVuZ3RoKTtcbiAgICAgIGFjY1tub25QcmVmaXhlZEtleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuXG4gIC8vIE9ubHkgcmV0dXJuIGEgZHluYW1pYyBzYW1wbGluZyBjb250ZXh0IG9iamVjdCBpZiB0aGVyZSBhcmUga2V5cyBpbiBpdC5cbiAgLy8gQSBrZXlsZXNzIG9iamVjdCBtZWFucyB0aGVyZSB3ZXJlIG5vIHNlbnRyeSB2YWx1ZXMgb24gdGhlIGhlYWRlciwgd2hpY2ggbWVhbnMgdGhhdCB0aGVyZSBpcyBubyBEU0MuXG4gIGlmIChPYmplY3Qua2V5cyhkeW5hbWljU2FtcGxpbmdDb250ZXh0KS5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIGR5bmFtaWNTYW1wbGluZ0NvbnRleHQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFR1cm5zIGEgRHluYW1pYyBTYW1wbGluZyBPYmplY3QgaW50byBhIGJhZ2dhZ2UgaGVhZGVyIGJ5IHByZWZpeGluZyBhbGwgdGhlIGtleXMgb24gdGhlIG9iamVjdCB3aXRoIFwic2VudHJ5LVwiLlxuICpcbiAqIEBwYXJhbSBkeW5hbWljU2FtcGxpbmdDb250ZXh0IFRoZSBEeW5hbWljIFNhbXBsaW5nIENvbnRleHQgdG8gdHVybiBpbnRvIGEgaGVhZGVyLiBGb3IgY29udmVuaWVuY2UgYW5kIGNvbXBhdGliaWxpdHlcbiAqIHdpdGggdGhlIGBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0YCBtZXRob2Qgb24gdGhlIFRyYW5zYWN0aW9uIGNsYXNzICx0aGlzIGFyZ3VtZW50IGNhbiBhbHNvIGJlIGB1bmRlZmluZWRgLiBJZiBpdCBpc1xuICogYHVuZGVmaW5lZGAgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGB1bmRlZmluZWRgLlxuICogQHJldHVybnMgYSBiYWdnYWdlIGhlYWRlciwgY3JlYXRlZCBmcm9tIGBkeW5hbWljU2FtcGxpbmdDb250ZXh0YCwgb3IgYHVuZGVmaW5lZGAgZWl0aGVyIGlmIGBkeW5hbWljU2FtcGxpbmdDb250ZXh0YFxuICogd2FzIGB1bmRlZmluZWRgLCBvciBpZiBgZHluYW1pY1NhbXBsaW5nQ29udGV4dGAgZGlkbid0IGNvbnRhaW4gYW55IHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gZHluYW1pY1NhbXBsaW5nQ29udGV4dFRvU2VudHJ5QmFnZ2FnZUhlYWRlcihcbi8vIHRoaXMgYWxzbyB0YWtlcyB1bmRlZmluZWQgZm9yIGNvbnZlbmllbmNlIGFuZCBidW5kbGUgc2l6ZSBpbiBvdGhlciBwbGFjZXNcbmR5bmFtaWNTYW1wbGluZ0NvbnRleHQpIHtcbiAgaWYgKCFkeW5hbWljU2FtcGxpbmdDb250ZXh0KSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIFByZWZpeCBhbGwgRFNDIGtleXMgd2l0aCBcInNlbnRyeS1cIiBhbmQgcHV0IHRoZW0gaW50byBhIG5ldyBvYmplY3RcbiAgY29uc3Qgc2VudHJ5UHJlZml4ZWREU0MgPSBPYmplY3QuZW50cmllcyhkeW5hbWljU2FtcGxpbmdDb250ZXh0KS5yZWR1Y2UoKGFjYywgW2RzY0tleSwgZHNjVmFsdWVdKSA9PiB7XG4gICAgaWYgKGRzY1ZhbHVlKSB7XG4gICAgICBhY2NbYCR7U0VOVFJZX0JBR0dBR0VfS0VZX1BSRUZJWH0ke2RzY0tleX1gXSA9IGRzY1ZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG4gIHJldHVybiBvYmplY3RUb0JhZ2dhZ2VIZWFkZXIoc2VudHJ5UHJlZml4ZWREU0MpO1xufVxuXG4vKipcbiAqIFRha2UgYSBiYWdnYWdlIGhlYWRlciBhbmQgcGFyc2UgaXQgaW50byBhbiBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQmFnZ2FnZUhlYWRlcihiYWdnYWdlSGVhZGVyKSB7XG4gIGlmICghYmFnZ2FnZUhlYWRlciB8fCAhaXNTdHJpbmcoYmFnZ2FnZUhlYWRlcikgJiYgIUFycmF5LmlzQXJyYXkoYmFnZ2FnZUhlYWRlcikpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGJhZ2dhZ2VIZWFkZXIpKSB7XG4gICAgLy8gQ29tYmluZSBhbGwgYmFnZ2FnZSBoZWFkZXJzIGludG8gb25lIG9iamVjdCBjb250YWluaW5nIHRoZSBiYWdnYWdlIHZhbHVlcyBzbyB3ZSBjYW4gbGF0ZXIgcmVhZCB0aGUgU2VudHJ5LURTQy12YWx1ZXMgZnJvbSBpdFxuICAgIHJldHVybiBiYWdnYWdlSGVhZGVyLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiB7XG4gICAgICBjb25zdCBjdXJyQmFnZ2FnZU9iamVjdCA9IGJhZ2dhZ2VIZWFkZXJUb09iamVjdChjdXJyKTtcbiAgICAgIE9iamVjdC5lbnRyaWVzKGN1cnJCYWdnYWdlT2JqZWN0KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgYWNjW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gIH1cbiAgcmV0dXJuIGJhZ2dhZ2VIZWFkZXJUb09iamVjdChiYWdnYWdlSGVhZGVyKTtcbn1cblxuLyoqXG4gKiBXaWxsIHBhcnNlIGEgYmFnZ2FnZSBoZWFkZXIsIHdoaWNoIGlzIGEgc2ltcGxlIGtleS12YWx1ZSBtYXAsIGludG8gYSBmbGF0IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gYmFnZ2FnZUhlYWRlciBUaGUgYmFnZ2FnZSBoZWFkZXIgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBhIGZsYXQgb2JqZWN0IGNvbnRhaW5pbmcgYWxsIHRoZSBrZXktdmFsdWUgcGFpcnMgZnJvbSBgYmFnZ2FnZUhlYWRlcmAuXG4gKi9cbmZ1bmN0aW9uIGJhZ2dhZ2VIZWFkZXJUb09iamVjdChiYWdnYWdlSGVhZGVyKSB7XG4gIHJldHVybiBiYWdnYWdlSGVhZGVyLnNwbGl0KCcsJykubWFwKGJhZ2dhZ2VFbnRyeSA9PiBiYWdnYWdlRW50cnkuc3BsaXQoJz0nKS5tYXAoa2V5T3JWYWx1ZSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoa2V5T3JWYWx1ZS50cmltKCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gV2UgaWdub3JlIGVycm9ycyBoZXJlLCBlLmcuIGlmIHRoZSB2YWx1ZSBjYW5ub3QgYmUgVVJMIGRlY29kZWQuXG4gICAgICAvLyBUaGlzIHdpbGwgdGhlbiBiZSBza2lwcGVkIGluIHRoZSBuZXh0IHN0ZXBcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0pKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKGtleSAmJiB2YWx1ZSkge1xuICAgICAgYWNjW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG4vKipcbiAqIFR1cm5zIGEgZmxhdCBvYmplY3QgKGtleS12YWx1ZSBwYWlycykgaW50byBhIGJhZ2dhZ2UgaGVhZGVyLCB3aGljaCBpcyBhbHNvIGp1c3Qga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwYXJhbSBvYmplY3QgVGhlIG9iamVjdCB0byB0dXJuIGludG8gYSBiYWdnYWdlIGhlYWRlci5cbiAqIEByZXR1cm5zIGEgYmFnZ2FnZSBoZWFkZXIgc3RyaW5nLCBvciBgdW5kZWZpbmVkYCBpZiB0aGUgb2JqZWN0IGRpZG4ndCBoYXZlIGFueSB2YWx1ZXMsIHNpbmNlIGFuIGVtcHR5IGJhZ2dhZ2UgaGVhZGVyXG4gKiBpcyBub3Qgc3BlYyBjb21wbGlhbnQuXG4gKi9cbmZ1bmN0aW9uIG9iamVjdFRvQmFnZ2FnZUhlYWRlcihvYmplY3QpIHtcbiAgaWYgKE9iamVjdC5rZXlzKG9iamVjdCkubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gQW4gZW1wdHkgYmFnZ2FnZSBoZWFkZXIgaXMgbm90IHNwZWMgY29tcGxpYW50OiBXZSByZXR1cm4gdW5kZWZpbmVkLlxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9iamVjdCkucmVkdWNlKChiYWdnYWdlSGVhZGVyLCBbb2JqZWN0S2V5LCBvYmplY3RWYWx1ZV0sIGN1cnJlbnRJbmRleCkgPT4ge1xuICAgIGNvbnN0IGJhZ2dhZ2VFbnRyeSA9IGAke2VuY29kZVVSSUNvbXBvbmVudChvYmplY3RLZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudChvYmplY3RWYWx1ZSl9YDtcbiAgICBjb25zdCBuZXdCYWdnYWdlSGVhZGVyID0gY3VycmVudEluZGV4ID09PSAwID8gYmFnZ2FnZUVudHJ5IDogYCR7YmFnZ2FnZUhlYWRlcn0sJHtiYWdnYWdlRW50cnl9YDtcbiAgICBpZiAobmV3QmFnZ2FnZUhlYWRlci5sZW5ndGggPiBNQVhfQkFHR0FHRV9TVFJJTkdfTEVOR1RIKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy53YXJuKGBOb3QgYWRkaW5nIGtleTogJHtvYmplY3RLZXl9IHdpdGggdmFsOiAke29iamVjdFZhbHVlfSB0byBiYWdnYWdlIGhlYWRlciBkdWUgdG8gZXhjZWVkaW5nIGJhZ2dhZ2Ugc2l6ZSBsaW1pdHMuYCk7XG4gICAgICByZXR1cm4gYmFnZ2FnZUhlYWRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ld0JhZ2dhZ2VIZWFkZXI7XG4gICAgfVxuICB9LCAnJyk7XG59XG5leHBvcnQgeyBNQVhfQkFHR0FHRV9TVFJJTkdfTEVOR1RILCBTRU5UUllfQkFHR0FHRV9LRVlfUFJFRklYLCBTRU5UUllfQkFHR0FHRV9LRVlfUFJFRklYX1JFR0VYLCBiYWdnYWdlSGVhZGVyVG9EeW5hbWljU2FtcGxpbmdDb250ZXh0LCBkeW5hbWljU2FtcGxpbmdDb250ZXh0VG9TZW50cnlCYWdnYWdlSGVhZGVyLCBvYmplY3RUb0JhZ2dhZ2VIZWFkZXIsIHBhcnNlQmFnZ2FnZUhlYWRlciB9O1xuIiwiLyoqXG4gKiBQYXJzZSBhIHNhbXBsZSByYXRlIGZyb20gYSBnaXZlbiB2YWx1ZS5cbiAqIFRoaXMgd2lsbCBlaXRoZXIgcmV0dXJuIGEgYm9vbGVhbiBvciBudW1iZXIgc2FtcGxlIHJhdGUsIGlmIHRoZSBzYW1wbGUgcmF0ZSBpcyB2YWxpZCAoYmV0d2VlbiAwIGFuZCAxKS5cbiAqIElmIGEgc3RyaW5nIGlzIHBhc3NlZCwgd2UgdHJ5IHRvIGNvbnZlcnQgaXQgdG8gYSBudW1iZXIuXG4gKlxuICogQW55IGludmFsaWQgc2FtcGxlIHJhdGUgd2lsbCByZXR1cm4gYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2FtcGxlUmF0ZShzYW1wbGVSYXRlKSB7XG4gIGlmICh0eXBlb2Ygc2FtcGxlUmF0ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIE51bWJlcihzYW1wbGVSYXRlKTtcbiAgfVxuICBjb25zdCByYXRlID0gdHlwZW9mIHNhbXBsZVJhdGUgPT09ICdzdHJpbmcnID8gcGFyc2VGbG9hdChzYW1wbGVSYXRlKSA6IHNhbXBsZVJhdGU7XG4gIGlmICh0eXBlb2YgcmF0ZSAhPT0gJ251bWJlcicgfHwgaXNOYU4ocmF0ZSkgfHwgcmF0ZSA8IDAgfHwgcmF0ZSA+IDEpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiByYXRlO1xufVxuZXhwb3J0IHsgcGFyc2VTYW1wbGVSYXRlIH07XG4iLCJpbXBvcnQgeyBiYWdnYWdlSGVhZGVyVG9EeW5hbWljU2FtcGxpbmdDb250ZXh0IH0gZnJvbSAnLi9iYWdnYWdlLmpzJztcbmltcG9ydCB7IHBhcnNlU2FtcGxlUmF0ZSB9IGZyb20gJy4vcGFyc2VTYW1wbGVSYXRlLmpzJztcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCwgZ2VuZXJhdGVTcGFuSWQgfSBmcm9tICcuL3Byb3BhZ2F0aW9uQ29udGV4dC5qcyc7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAc2VudHJ5LWludGVybmFsL3Nkay9uby1yZWdleHAtY29uc3RydWN0b3IgLS0gUmVnRXhwIGlzIHVzZWQgZm9yIHJlYWRhYmlsaXR5IGhlcmVcbmNvbnN0IFRSQUNFUEFSRU5UX1JFR0VYUCA9IG5ldyBSZWdFeHAoJ15bIFxcXFx0XSonICtcbi8vIHdoaXRlc3BhY2VcbicoWzAtOWEtZl17MzJ9KT8nICtcbi8vIHRyYWNlX2lkXG4nLT8oWzAtOWEtZl17MTZ9KT8nICtcbi8vIHNwYW5faWRcbictPyhbMDFdKT8nICtcbi8vIHNhbXBsZWRcbidbIFxcXFx0XSokJykgLy8gd2hpdGVzcGFjZVxuO1xuXG4vKipcbiAqIEV4dHJhY3QgdHJhbnNhY3Rpb24gY29udGV4dCBkYXRhIGZyb20gYSBgc2VudHJ5LXRyYWNlYCBoZWFkZXIuXG4gKlxuICogQHBhcmFtIHRyYWNlcGFyZW50IFRyYWNlcGFyZW50IHN0cmluZ1xuICpcbiAqIEByZXR1cm5zIE9iamVjdCBjb250YWluaW5nIGRhdGEgZnJvbSB0aGUgaGVhZGVyLCBvciB1bmRlZmluZWQgaWYgdHJhY2VwYXJlbnQgc3RyaW5nIGlzIG1hbGZvcm1lZFxuICovXG5mdW5jdGlvbiBleHRyYWN0VHJhY2VwYXJlbnREYXRhKHRyYWNlcGFyZW50KSB7XG4gIGlmICghdHJhY2VwYXJlbnQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGNvbnN0IG1hdGNoZXMgPSB0cmFjZXBhcmVudC5tYXRjaChUUkFDRVBBUkVOVF9SRUdFWFApO1xuICBpZiAoIW1hdGNoZXMpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGxldCBwYXJlbnRTYW1wbGVkO1xuICBpZiAobWF0Y2hlc1szXSA9PT0gJzEnKSB7XG4gICAgcGFyZW50U2FtcGxlZCA9IHRydWU7XG4gIH0gZWxzZSBpZiAobWF0Y2hlc1szXSA9PT0gJzAnKSB7XG4gICAgcGFyZW50U2FtcGxlZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB7XG4gICAgdHJhY2VJZDogbWF0Y2hlc1sxXSxcbiAgICBwYXJlbnRTYW1wbGVkLFxuICAgIHBhcmVudFNwYW5JZDogbWF0Y2hlc1syXVxuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHByb3BhZ2F0aW9uIGNvbnRleHQgZnJvbSBpbmNvbWluZyBoZWFkZXJzIG9yXG4gKiBjcmVhdGVzIGEgbWluaW1hbCBuZXcgb25lIGlmIHRoZSBoZWFkZXJzIGFyZSB1bmRlZmluZWQuXG4gKi9cbmZ1bmN0aW9uIHByb3BhZ2F0aW9uQ29udGV4dEZyb21IZWFkZXJzKHNlbnRyeVRyYWNlLCBiYWdnYWdlKSB7XG4gIGNvbnN0IHRyYWNlcGFyZW50RGF0YSA9IGV4dHJhY3RUcmFjZXBhcmVudERhdGEoc2VudHJ5VHJhY2UpO1xuICBjb25zdCBkeW5hbWljU2FtcGxpbmdDb250ZXh0ID0gYmFnZ2FnZUhlYWRlclRvRHluYW1pY1NhbXBsaW5nQ29udGV4dChiYWdnYWdlKTtcbiAgaWYgKCF0cmFjZXBhcmVudERhdGE/LnRyYWNlSWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHJhY2VJZDogZ2VuZXJhdGVUcmFjZUlkKCksXG4gICAgICBzYW1wbGVSYW5kOiBNYXRoLnJhbmRvbSgpXG4gICAgfTtcbiAgfVxuICBjb25zdCBzYW1wbGVSYW5kID0gZ2V0U2FtcGxlUmFuZEZyb21UcmFjZXBhcmVudEFuZERzYyh0cmFjZXBhcmVudERhdGEsIGR5bmFtaWNTYW1wbGluZ0NvbnRleHQpO1xuXG4gIC8vIFRoZSBzYW1wbGVfcmFuZCBvbiB0aGUgRFNDIG5lZWRzIHRvIGJlIGdlbmVyYXRlZCBiYXNlZCBvbiB0cmFjZXBhcmVudCArIGJhZ2dhZ2UuXG4gIGlmIChkeW5hbWljU2FtcGxpbmdDb250ZXh0KSB7XG4gICAgZHluYW1pY1NhbXBsaW5nQ29udGV4dC5zYW1wbGVfcmFuZCA9IHNhbXBsZVJhbmQudG9TdHJpbmcoKTtcbiAgfVxuICBjb25zdCB7XG4gICAgdHJhY2VJZCxcbiAgICBwYXJlbnRTcGFuSWQsXG4gICAgcGFyZW50U2FtcGxlZFxuICB9ID0gdHJhY2VwYXJlbnREYXRhO1xuICByZXR1cm4ge1xuICAgIHRyYWNlSWQsXG4gICAgcGFyZW50U3BhbklkLFxuICAgIHNhbXBsZWQ6IHBhcmVudFNhbXBsZWQsXG4gICAgZHNjOiBkeW5hbWljU2FtcGxpbmdDb250ZXh0IHx8IHt9LFxuICAgIC8vIElmIHdlIGhhdmUgdHJhY2VwYXJlbnQgZGF0YSBidXQgbm8gRFNDIGl0IG1lYW5zIHdlIGFyZSBub3QgaGVhZCBvZiB0cmFjZSBhbmQgd2UgbXVzdCBmcmVlemUgaXRcbiAgICBzYW1wbGVSYW5kXG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlIHNlbnRyeS10cmFjZSBoZWFkZXIgZnJvbSBzcGFuIGNvbnRleHQgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVNlbnRyeVRyYWNlSGVhZGVyKHRyYWNlSWQgPSBnZW5lcmF0ZVRyYWNlSWQoKSwgc3BhbklkID0gZ2VuZXJhdGVTcGFuSWQoKSwgc2FtcGxlZCkge1xuICBsZXQgc2FtcGxlZFN0cmluZyA9ICcnO1xuICBpZiAoc2FtcGxlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc2FtcGxlZFN0cmluZyA9IHNhbXBsZWQgPyAnLTEnIDogJy0wJztcbiAgfVxuICByZXR1cm4gYCR7dHJhY2VJZH0tJHtzcGFuSWR9JHtzYW1wbGVkU3RyaW5nfWA7XG59XG5cbi8qKlxuICogR2l2ZW4gYW55IGNvbWJpbmF0aW9uIG9mIGFuIGluY29taW5nIHRyYWNlLCBnZW5lcmF0ZSBhIHNhbXBsZSByYW5kIGJhc2VkIG9uIGl0cyBkZWZpbmVkIHNlbWFudGljcy5cbiAqXG4gKiBSZWFkIG1vcmU6IGh0dHBzOi8vZGV2ZWxvcC5zZW50cnkuZGV2L3Nkay90ZWxlbWV0cnkvdHJhY2VzLyNwcm9wYWdhdGVkLXJhbmRvbS12YWx1ZVxuICovXG5mdW5jdGlvbiBnZXRTYW1wbGVSYW5kRnJvbVRyYWNlcGFyZW50QW5kRHNjKHRyYWNlcGFyZW50RGF0YSwgZHNjKSB7XG4gIC8vIFdoZW4gdGhlcmUgaXMgYW4gaW5jb21pbmcgc2FtcGxlIHJhbmQgdXNlIGl0LlxuICBjb25zdCBwYXJzZWRTYW1wbGVSYW5kID0gcGFyc2VTYW1wbGVSYXRlKGRzYz8uc2FtcGxlX3JhbmQpO1xuICBpZiAocGFyc2VkU2FtcGxlUmFuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHBhcnNlZFNhbXBsZVJhbmQ7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGlmIHRoZXJlIGlzIGFuIGluY29taW5nIHNhbXBsaW5nIGRlY2lzaW9uICsgc2FtcGxlIHJhdGUsIGdlbmVyYXRlIGEgc2FtcGxlIHJhbmQgdGhhdCB3b3VsZCBsZWFkIHRvIHRoZSBzYW1lIHNhbXBsaW5nIGRlY2lzaW9uLlxuICBjb25zdCBwYXJzZWRTYW1wbGVSYXRlID0gcGFyc2VTYW1wbGVSYXRlKGRzYz8uc2FtcGxlX3JhdGUpO1xuICBpZiAocGFyc2VkU2FtcGxlUmF0ZSAmJiB0cmFjZXBhcmVudERhdGE/LnBhcmVudFNhbXBsZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0cmFjZXBhcmVudERhdGEucGFyZW50U2FtcGxlZCA/XG4gICAgLy8gUmV0dXJucyBhIHNhbXBsZSByYW5kIHdpdGggcG9zaXRpdmUgc2FtcGxpbmcgZGVjaXNpb24gWzAsIHNhbXBsZVJhdGUpXG4gICAgTWF0aC5yYW5kb20oKSAqIHBhcnNlZFNhbXBsZVJhdGUgOlxuICAgIC8vIFJldHVybnMgYSBzYW1wbGUgcmFuZCB3aXRoIG5lZ2F0aXZlIHNhbXBsaW5nIGRlY2lzaW9uIFtzYW1wbGVSYXRlLCAxKVxuICAgIHBhcnNlZFNhbXBsZVJhdGUgKyBNYXRoLnJhbmRvbSgpICogKDEgLSBwYXJzZWRTYW1wbGVSYXRlKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBJZiBub3RoaW5nIGFwcGxpZXMsIHJldHVybiBhIHJhbmRvbSBzYW1wbGUgcmFuZC5cbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKTtcbiAgfVxufVxuZXhwb3J0IHsgVFJBQ0VQQVJFTlRfUkVHRVhQLCBleHRyYWN0VHJhY2VwYXJlbnREYXRhLCBnZW5lcmF0ZVNlbnRyeVRyYWNlSGVhZGVyLCBwcm9wYWdhdGlvbkNvbnRleHRGcm9tSGVhZGVycyB9O1xuIiwiaW1wb3J0IHsgZ2V0QXN5bmNDb250ZXh0U3RyYXRlZ3kgfSBmcm9tICcuLi9hc3luY0NvbnRleHQvaW5kZXguanMnO1xuaW1wb3J0IHsgZ2V0TWFpbkNhcnJpZXIgfSBmcm9tICcuLi9jYXJyaWVyLmpzJztcbmltcG9ydCB7IGdldEN1cnJlbnRTY29wZSB9IGZyb20gJy4uL2N1cnJlbnRTY29wZXMuanMnO1xuaW1wb3J0IHsgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU4sIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1AsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfQ1VTVE9NX1NQQU5fTkFNRSwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0UgfSBmcm9tICcuLi9zZW1hbnRpY0F0dHJpYnV0ZXMuanMnO1xuaW1wb3J0IHsgU1BBTl9TVEFUVVNfVU5TRVQsIFNQQU5fU1RBVFVTX09LIH0gZnJvbSAnLi4vdHJhY2luZy9zcGFuc3RhdHVzLmpzJztcbmltcG9ydCB7IGdldENhcHR1cmVkU2NvcGVzT25TcGFuIH0gZnJvbSAnLi4vdHJhY2luZy91dGlscy5qcyc7XG5pbXBvcnQgeyBjb25zb2xlU2FuZGJveCB9IGZyb20gJy4vbG9nZ2VyLmpzJztcbmltcG9ydCB7IGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSB9IGZyb20gJy4vb2JqZWN0LmpzJztcbmltcG9ydCB7IGdlbmVyYXRlU3BhbklkIH0gZnJvbSAnLi9wcm9wYWdhdGlvbkNvbnRleHQuanMnO1xuaW1wb3J0IHsgdGltZXN0YW1wSW5TZWNvbmRzIH0gZnJvbSAnLi90aW1lLmpzJztcbmltcG9ydCB7IGdlbmVyYXRlU2VudHJ5VHJhY2VIZWFkZXIgfSBmcm9tICcuL3RyYWNpbmcuanMnO1xuaW1wb3J0IHsgX2dldFNwYW5Gb3JTY29wZSB9IGZyb20gJy4vc3Bhbk9uU2NvcGUuanMnO1xuXG4vLyBUaGVzZSBhcmUgYWxpZ25lZCB3aXRoIE9wZW5UZWxlbWV0cnkgdHJhY2UgZmxhZ3NcbmNvbnN0IFRSQUNFX0ZMQUdfTk9ORSA9IDB4MDtcbmNvbnN0IFRSQUNFX0ZMQUdfU0FNUExFRCA9IDB4MTtcbmxldCBoYXNTaG93blNwYW5Ecm9wV2FybmluZyA9IGZhbHNlO1xuXG4vKipcbiAqIENvbnZlcnQgYSBzcGFuIHRvIGEgdHJhY2UgY29udGV4dCwgd2hpY2ggY2FuIGJlIHNlbnQgYXMgdGhlIGB0cmFjZWAgY29udGV4dCBpbiBhbiBldmVudC5cbiAqIEJ5IGRlZmF1bHQsIHRoaXMgd2lsbCBvbmx5IGluY2x1ZGUgdHJhY2VfaWQsIHNwYW5faWQgJiBwYXJlbnRfc3Bhbl9pZC5cbiAqIElmIGBpbmNsdWRlQWxsRGF0YWAgaXMgdHJ1ZSwgaXQgd2lsbCBhbHNvIGluY2x1ZGUgZGF0YSwgb3AsIHN0YXR1cyAmIG9yaWdpbi5cbiAqL1xuZnVuY3Rpb24gc3BhblRvVHJhbnNhY3Rpb25UcmFjZUNvbnRleHQoc3Bhbikge1xuICBjb25zdCB7XG4gICAgc3BhbklkOiBzcGFuX2lkLFxuICAgIHRyYWNlSWQ6IHRyYWNlX2lkXG4gIH0gPSBzcGFuLnNwYW5Db250ZXh0KCk7XG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIG9wLFxuICAgIHBhcmVudF9zcGFuX2lkLFxuICAgIHN0YXR1cyxcbiAgICBvcmlnaW4sXG4gICAgbGlua3NcbiAgfSA9IHNwYW5Ub0pTT04oc3Bhbik7XG4gIHJldHVybiB7XG4gICAgcGFyZW50X3NwYW5faWQsXG4gICAgc3Bhbl9pZCxcbiAgICB0cmFjZV9pZCxcbiAgICBkYXRhLFxuICAgIG9wLFxuICAgIHN0YXR1cyxcbiAgICBvcmlnaW4sXG4gICAgbGlua3NcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgc3BhbiB0byBhIHRyYWNlIGNvbnRleHQsIHdoaWNoIGNhbiBiZSBzZW50IGFzIHRoZSBgdHJhY2VgIGNvbnRleHQgaW4gYSBub24tdHJhbnNhY3Rpb24gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIHNwYW5Ub1RyYWNlQ29udGV4dChzcGFuKSB7XG4gIGNvbnN0IHtcbiAgICBzcGFuSWQsXG4gICAgdHJhY2VJZDogdHJhY2VfaWQsXG4gICAgaXNSZW1vdGVcbiAgfSA9IHNwYW4uc3BhbkNvbnRleHQoKTtcblxuICAvLyBJZiB0aGUgc3BhbiBpcyByZW1vdGUsIHdlIHVzZSBhIHJhbmRvbS92aXJ0dWFsIHNwYW4gYXMgc3Bhbl9pZCB0byB0aGUgdHJhY2UgY29udGV4dCxcbiAgLy8gYW5kIHRoZSByZW1vdGUgc3BhbiBhcyBwYXJlbnRfc3Bhbl9pZFxuICBjb25zdCBwYXJlbnRfc3Bhbl9pZCA9IGlzUmVtb3RlID8gc3BhbklkIDogc3BhblRvSlNPTihzcGFuKS5wYXJlbnRfc3Bhbl9pZDtcbiAgY29uc3Qgc2NvcGUgPSBnZXRDYXB0dXJlZFNjb3Blc09uU3BhbihzcGFuKS5zY29wZTtcbiAgY29uc3Qgc3Bhbl9pZCA9IGlzUmVtb3RlID8gc2NvcGU/LmdldFByb3BhZ2F0aW9uQ29udGV4dCgpLnByb3BhZ2F0aW9uU3BhbklkIHx8IGdlbmVyYXRlU3BhbklkKCkgOiBzcGFuSWQ7XG4gIHJldHVybiB7XG4gICAgcGFyZW50X3NwYW5faWQsXG4gICAgc3Bhbl9pZCxcbiAgICB0cmFjZV9pZFxuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBTcGFuIHRvIGEgU2VudHJ5IHRyYWNlIGhlYWRlci5cbiAqL1xuZnVuY3Rpb24gc3BhblRvVHJhY2VIZWFkZXIoc3Bhbikge1xuICBjb25zdCB7XG4gICAgdHJhY2VJZCxcbiAgICBzcGFuSWRcbiAgfSA9IHNwYW4uc3BhbkNvbnRleHQoKTtcbiAgY29uc3Qgc2FtcGxlZCA9IHNwYW5Jc1NhbXBsZWQoc3Bhbik7XG4gIHJldHVybiBnZW5lcmF0ZVNlbnRyeVRyYWNlSGVhZGVyKHRyYWNlSWQsIHNwYW5JZCwgc2FtcGxlZCk7XG59XG5cbi8qKlxuICogIENvbnZlcnRzIHRoZSBzcGFuIGxpbmtzIGFycmF5IHRvIGEgZmxhdHRlbmVkIHZlcnNpb24gdG8gYmUgc2VudCB3aXRoaW4gYW4gZW52ZWxvcGUuXG4gKlxuICogIElmIHRoZSBsaW5rcyBhcnJheSBpcyBlbXB0eSwgaXQgcmV0dXJucyBgdW5kZWZpbmVkYCBzbyB0aGUgZW1wdHkgdmFsdWUgY2FuIGJlIGRyb3BwZWQgYmVmb3JlIGl0J3Mgc2VudC5cbiAqL1xuZnVuY3Rpb24gY29udmVydFNwYW5MaW5rc0ZvckVudmVsb3BlKGxpbmtzKSB7XG4gIGlmIChsaW5rcyAmJiBsaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIGxpbmtzLm1hcCgoe1xuICAgICAgY29udGV4dDoge1xuICAgICAgICBzcGFuSWQsXG4gICAgICAgIHRyYWNlSWQsXG4gICAgICAgIHRyYWNlRmxhZ3MsXG4gICAgICAgIC4uLnJlc3RDb250ZXh0XG4gICAgICB9LFxuICAgICAgYXR0cmlidXRlc1xuICAgIH0pID0+ICh7XG4gICAgICBzcGFuX2lkOiBzcGFuSWQsXG4gICAgICB0cmFjZV9pZDogdHJhY2VJZCxcbiAgICAgIHNhbXBsZWQ6IHRyYWNlRmxhZ3MgPT09IFRSQUNFX0ZMQUdfU0FNUExFRCxcbiAgICAgIGF0dHJpYnV0ZXMsXG4gICAgICAuLi5yZXN0Q29udGV4dFxuICAgIH0pKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBhIHNwYW4gdGltZSBpbnB1dCBpbnRvIGEgdGltZXN0YW1wIGluIHNlY29uZHMuXG4gKi9cbmZ1bmN0aW9uIHNwYW5UaW1lSW5wdXRUb1NlY29uZHMoaW5wdXQpIHtcbiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gZW5zdXJlVGltZXN0YW1wSW5TZWNvbmRzKGlucHV0KTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAvLyBTZWUge0BsaW5rIEhyVGltZX0gZm9yIHRoZSBhcnJheS1iYXNlZCB0aW1lIGZvcm1hdFxuICAgIHJldHVybiBpbnB1dFswXSArIGlucHV0WzFdIC8gMWU5O1xuICB9XG4gIGlmIChpbnB1dCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICByZXR1cm4gZW5zdXJlVGltZXN0YW1wSW5TZWNvbmRzKGlucHV0LmdldFRpbWUoKSk7XG4gIH1cbiAgcmV0dXJuIHRpbWVzdGFtcEluU2Vjb25kcygpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgdGltZXN0YW1wIHRvIHNlY29uZCwgaWYgaXQgd2FzIGluIG1pbGxpc2Vjb25kcywgb3Iga2VlcHMgaXQgYXMgc2Vjb25kLlxuICovXG5mdW5jdGlvbiBlbnN1cmVUaW1lc3RhbXBJblNlY29uZHModGltZXN0YW1wKSB7XG4gIGNvbnN0IGlzTXMgPSB0aW1lc3RhbXAgPiA5OTk5OTk5OTk5O1xuICByZXR1cm4gaXNNcyA/IHRpbWVzdGFtcCAvIDEwMDAgOiB0aW1lc3RhbXA7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHNwYW4gdG8gYSBKU09OIHJlcHJlc2VudGF0aW9uLlxuICovXG4vLyBOb3RlOiBCZWNhdXNlIG9mIHRoaXMsIHdlIGN1cnJlbnRseSBoYXZlIGEgY2lyY3VsYXIgdHlwZSBkZXBlbmRlbmN5ICh3aGljaCB3ZSBvcHRlZCBvdXQgb2YgaW4gcGFja2FnZS5qc29uKS5cbi8vIFRoaXMgaXMgbm90IGF2b2lkYWJsZSBhcyB3ZSBuZWVkIGBzcGFuVG9KU09OYCBpbiBgc3BhblV0aWxzLnRzYCwgd2hpY2ggaW4gdHVybiBpcyBuZWVkZWQgYnkgYHNwYW4udHNgIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbi8vIEFuZCBgc3BhblRvSlNPTmAgbmVlZHMgdGhlIFNwYW4gY2xhc3MgZnJvbSBgc3Bhbi50c2AgdG8gY2hlY2sgaGVyZS5cbmZ1bmN0aW9uIHNwYW5Ub0pTT04oc3Bhbikge1xuICBpZiAoc3BhbklzU2VudHJ5U3BhbihzcGFuKSkge1xuICAgIHJldHVybiBzcGFuLmdldFNwYW5KU09OKCk7XG4gIH1cbiAgY29uc3Qge1xuICAgIHNwYW5JZDogc3Bhbl9pZCxcbiAgICB0cmFjZUlkOiB0cmFjZV9pZFxuICB9ID0gc3Bhbi5zcGFuQ29udGV4dCgpO1xuXG4gIC8vIEhhbmRsZSBhIHNwYW4gZnJvbSBAb3BlbnRlbGVtZXRyeS9zZGstYmFzZS10cmFjZSdzIGBTcGFuYCBjbGFzc1xuICBpZiAoc3BhbklzT3BlblRlbGVtZXRyeVNka1RyYWNlQmFzZVNwYW4oc3BhbikpIHtcbiAgICBjb25zdCB7XG4gICAgICBhdHRyaWJ1dGVzLFxuICAgICAgc3RhcnRUaW1lLFxuICAgICAgbmFtZSxcbiAgICAgIGVuZFRpbWUsXG4gICAgICBzdGF0dXMsXG4gICAgICBsaW5rc1xuICAgIH0gPSBzcGFuO1xuXG4gICAgLy8gSW4gcHJlcGFyYXRpb24gZm9yIHRoZSBuZXh0IG1ham9yIG9mIE9wZW5UZWxlbWV0cnksIHdlIHdhbnQgdG8gc3VwcG9ydFxuICAgIC8vIGxvb2tpbmcgdXAgdGhlIHBhcmVudCBzcGFuIGlkIGFjY29yZGluZyB0byB0aGUgbmV3IEFQSVxuICAgIC8vIEluIE9UZWwgdjEsIHRoZSBwYXJlbnQgc3BhbiBpZCBpcyBhY2Nlc3NlZCBhcyBgcGFyZW50U3BhbklkYFxuICAgIC8vIEluIE9UZWwgdjIsIHRoZSBwYXJlbnQgc3BhbiBpZCBpcyBhY2Nlc3NlZCBhcyBgc3BhbklkYCBvbiB0aGUgYHBhcmVudFNwYW5Db250ZXh0YFxuICAgIGNvbnN0IHBhcmVudFNwYW5JZCA9ICdwYXJlbnRTcGFuSWQnIGluIHNwYW4gPyBzcGFuLnBhcmVudFNwYW5JZCA6ICdwYXJlbnRTcGFuQ29udGV4dCcgaW4gc3BhbiA/IHNwYW4ucGFyZW50U3BhbkNvbnRleHQ/LnNwYW5JZCA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4ge1xuICAgICAgc3Bhbl9pZCxcbiAgICAgIHRyYWNlX2lkLFxuICAgICAgZGF0YTogYXR0cmlidXRlcyxcbiAgICAgIGRlc2NyaXB0aW9uOiBuYW1lLFxuICAgICAgcGFyZW50X3NwYW5faWQ6IHBhcmVudFNwYW5JZCxcbiAgICAgIHN0YXJ0X3RpbWVzdGFtcDogc3BhblRpbWVJbnB1dFRvU2Vjb25kcyhzdGFydFRpbWUpLFxuICAgICAgLy8gVGhpcyBpcyBbMCwwXSBieSBkZWZhdWx0IGluIE9URUwsIGluIHdoaWNoIGNhc2Ugd2Ugd2FudCB0byBpbnRlcnByZXQgdGhpcyBhcyBubyBlbmQgdGltZVxuICAgICAgdGltZXN0YW1wOiBzcGFuVGltZUlucHV0VG9TZWNvbmRzKGVuZFRpbWUpIHx8IHVuZGVmaW5lZCxcbiAgICAgIHN0YXR1czogZ2V0U3RhdHVzTWVzc2FnZShzdGF0dXMpLFxuICAgICAgb3A6IGF0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUF0sXG4gICAgICBvcmlnaW46IGF0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dLFxuICAgICAgbGlua3M6IGNvbnZlcnRTcGFuTGlua3NGb3JFbnZlbG9wZShsaW5rcylcbiAgICB9O1xuICB9XG5cbiAgLy8gRmluYWxseSwgYXQgbGVhc3Qgd2UgaGF2ZSBgc3BhbkNvbnRleHQoKWAuLi4uXG4gIC8vIFRoaXMgc2hvdWxkIG5vdCBhY3R1YWxseSBoYXBwZW4gaW4gcmVhbGl0eSwgYnV0IHdlIG5lZWQgdG8gaGFuZGxlIGl0IGZvciB0eXBlIHNhZmV0eS5cbiAgcmV0dXJuIHtcbiAgICBzcGFuX2lkLFxuICAgIHRyYWNlX2lkLFxuICAgIHN0YXJ0X3RpbWVzdGFtcDogMCxcbiAgICBkYXRhOiB7fVxuICB9O1xufVxuZnVuY3Rpb24gc3BhbklzT3BlblRlbGVtZXRyeVNka1RyYWNlQmFzZVNwYW4oc3Bhbikge1xuICBjb25zdCBjYXN0U3BhbiA9IHNwYW47XG4gIHJldHVybiAhIWNhc3RTcGFuLmF0dHJpYnV0ZXMgJiYgISFjYXN0U3Bhbi5zdGFydFRpbWUgJiYgISFjYXN0U3Bhbi5uYW1lICYmICEhY2FzdFNwYW4uZW5kVGltZSAmJiAhIWNhc3RTcGFuLnN0YXR1cztcbn1cblxuLyoqIEV4cG9ydGVkIG9ubHkgZm9yIHRlc3RzLiAqL1xuXG4vKipcbiAqIFNhZGx5LCBkdWUgdG8gY2lyY3VsYXIgZGVwZW5kZW5jeSBjaGVja3Mgd2UgY2Fubm90IGFjdHVhbGx5IGltcG9ydCB0aGUgU3BhbiBjbGFzcyBoZXJlIGFuZCBjaGVjayBmb3IgaW5zdGFuY2VvZi5cbiAqIDooIFNvIGluc3RlYWQgd2UgYXBwcm94aW1hdGUgdGhpcyBieSBjaGVja2luZyBpZiBpdCBoYXMgdGhlIGBnZXRTcGFuSlNPTmAgbWV0aG9kLlxuICovXG5mdW5jdGlvbiBzcGFuSXNTZW50cnlTcGFuKHNwYW4pIHtcbiAgcmV0dXJuIHR5cGVvZiBzcGFuLmdldFNwYW5KU09OID09PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIHNwYW4gaXMgc2FtcGxlZC5cbiAqIEluIG1vc3QgY2FzZXMsIHlvdSBzaG91bGQganVzdCB1c2UgYHNwYW4uaXNSZWNvcmRpbmcoKWAgaW5zdGVhZC5cbiAqIEhvd2V2ZXIsIHRoaXMgaGFzIGEgc2xpZ2h0bHkgZGlmZmVyZW50IHNlbWFudGljLCBhcyBpdCBhbHNvIHJldHVybnMgZmFsc2UgaWYgdGhlIHNwYW4gaXMgZmluaXNoZWQuXG4gKiBTbyBpbiB0aGUgY2FzZSB3aGVyZSB0aGlzIGRpc3RpbmN0aW9uIGlzIGltcG9ydGFudCwgdXNlIHRoaXMgbWV0aG9kLlxuICovXG5mdW5jdGlvbiBzcGFuSXNTYW1wbGVkKHNwYW4pIHtcbiAgLy8gV2UgYWxpZ24gb3VyIHRyYWNlIGZsYWdzIHdpdGggdGhlIG9uZXMgT3BlblRlbGVtZXRyeSB1c2VcbiAgLy8gU28gd2UgYWxzbyBjaGVjayBmb3Igc2FtcGxlZCB0aGUgc2FtZSB3YXkgdGhleSBkby5cbiAgY29uc3Qge1xuICAgIHRyYWNlRmxhZ3NcbiAgfSA9IHNwYW4uc3BhbkNvbnRleHQoKTtcbiAgcmV0dXJuIHRyYWNlRmxhZ3MgPT09IFRSQUNFX0ZMQUdfU0FNUExFRDtcbn1cblxuLyoqIEdldCB0aGUgc3RhdHVzIG1lc3NhZ2UgdG8gdXNlIGZvciBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSBzcGFuLiAqL1xuZnVuY3Rpb24gZ2V0U3RhdHVzTWVzc2FnZShzdGF0dXMpIHtcbiAgaWYgKCFzdGF0dXMgfHwgc3RhdHVzLmNvZGUgPT09IFNQQU5fU1RBVFVTX1VOU0VUKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoc3RhdHVzLmNvZGUgPT09IFNQQU5fU1RBVFVTX09LKSB7XG4gICAgcmV0dXJuICdvayc7XG4gIH1cbiAgcmV0dXJuIHN0YXR1cy5tZXNzYWdlIHx8ICd1bmtub3duX2Vycm9yJztcbn1cbmNvbnN0IENISUxEX1NQQU5TX0ZJRUxEID0gJ19zZW50cnlDaGlsZFNwYW5zJztcbmNvbnN0IFJPT1RfU1BBTl9GSUVMRCA9ICdfc2VudHJ5Um9vdFNwYW4nO1xuXG4vKipcbiAqIEFkZHMgYW4gb3BhcXVlIGNoaWxkIHNwYW4gcmVmZXJlbmNlIHRvIGEgc3Bhbi5cbiAqL1xuZnVuY3Rpb24gYWRkQ2hpbGRTcGFuVG9TcGFuKHNwYW4sIGNoaWxkU3Bhbikge1xuICAvLyBXZSBzdG9yZSB0aGUgcm9vdCBzcGFuIHJlZmVyZW5jZSBvbiB0aGUgY2hpbGQgc3BhblxuICAvLyBXZSBuZWVkIHRoaXMgZm9yIGBnZXRSb290U3BhbigpYCB0byB3b3JrXG4gIGNvbnN0IHJvb3RTcGFuID0gc3BhbltST09UX1NQQU5fRklFTERdIHx8IHNwYW47XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShjaGlsZFNwYW4sIFJPT1RfU1BBTl9GSUVMRCwgcm9vdFNwYW4pO1xuXG4gIC8vIFdlIHN0b3JlIGEgbGlzdCBvZiBjaGlsZCBzcGFucyBvbiB0aGUgcGFyZW50IHNwYW5cbiAgLy8gV2UgbmVlZCB0aGlzIGZvciBgZ2V0U3BhbkRlc2NlbmRhbnRzKClgIHRvIHdvcmtcbiAgaWYgKHNwYW5bQ0hJTERfU1BBTlNfRklFTERdKSB7XG4gICAgc3BhbltDSElMRF9TUEFOU19GSUVMRF0uYWRkKGNoaWxkU3Bhbik7XG4gIH0gZWxzZSB7XG4gICAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KHNwYW4sIENISUxEX1NQQU5TX0ZJRUxELCBuZXcgU2V0KFtjaGlsZFNwYW5dKSk7XG4gIH1cbn1cblxuLyoqIFRoaXMgaXMgb25seSB1c2VkIGludGVybmFsbHkgYnkgSWRsZSBTcGFucy4gKi9cbmZ1bmN0aW9uIHJlbW92ZUNoaWxkU3BhbkZyb21TcGFuKHNwYW4sIGNoaWxkU3Bhbikge1xuICBpZiAoc3BhbltDSElMRF9TUEFOU19GSUVMRF0pIHtcbiAgICBzcGFuW0NISUxEX1NQQU5TX0ZJRUxEXS5kZWxldGUoY2hpbGRTcGFuKTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGdpdmVuIHNwYW4gYW5kIGFsbCBvZiBpdHMgZGVzY2VuZGFudHMuXG4gKi9cbmZ1bmN0aW9uIGdldFNwYW5EZXNjZW5kYW50cyhzcGFuKSB7XG4gIGNvbnN0IHJlc3VsdFNldCA9IG5ldyBTZXQoKTtcbiAgZnVuY3Rpb24gYWRkU3BhbkNoaWxkcmVuKHNwYW4pIHtcbiAgICAvLyBUaGlzIGV4aXQgY29uZGl0aW9uIGlzIHJlcXVpcmVkIHRvIG5vdCBpbmZpbml0ZWx5IGxvb3AgaW4gY2FzZSBvZiBhIGNpcmN1bGFyIGRlcGVuZGVuY3kuXG4gICAgaWYgKHJlc3VsdFNldC5oYXMoc3BhbikpIHtcbiAgICAgIHJldHVybjtcbiAgICAgIC8vIFdlIHdhbnQgdG8gaWdub3JlIHVuc2FtcGxlZCBzcGFucyAoZS5nLiBub24gcmVjb3JkaW5nIHNwYW5zKVxuICAgIH0gZWxzZSBpZiAoc3BhbklzU2FtcGxlZChzcGFuKSkge1xuICAgICAgcmVzdWx0U2V0LmFkZChzcGFuKTtcbiAgICAgIGNvbnN0IGNoaWxkU3BhbnMgPSBzcGFuW0NISUxEX1NQQU5TX0ZJRUxEXSA/IEFycmF5LmZyb20oc3BhbltDSElMRF9TUEFOU19GSUVMRF0pIDogW107XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkU3BhbiBvZiBjaGlsZFNwYW5zKSB7XG4gICAgICAgIGFkZFNwYW5DaGlsZHJlbihjaGlsZFNwYW4pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBhZGRTcGFuQ2hpbGRyZW4oc3Bhbik7XG4gIHJldHVybiBBcnJheS5mcm9tKHJlc3VsdFNldCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcm9vdCBzcGFuIG9mIGEgZ2l2ZW4gc3Bhbi5cbiAqL1xuZnVuY3Rpb24gZ2V0Um9vdFNwYW4oc3Bhbikge1xuICByZXR1cm4gc3BhbltST09UX1NQQU5fRklFTERdIHx8IHNwYW47XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudGx5IGFjdGl2ZSBzcGFuLlxuICovXG5mdW5jdGlvbiBnZXRBY3RpdmVTcGFuKCkge1xuICBjb25zdCBjYXJyaWVyID0gZ2V0TWFpbkNhcnJpZXIoKTtcbiAgY29uc3QgYWNzID0gZ2V0QXN5bmNDb250ZXh0U3RyYXRlZ3koY2Fycmllcik7XG4gIGlmIChhY3MuZ2V0QWN0aXZlU3Bhbikge1xuICAgIHJldHVybiBhY3MuZ2V0QWN0aXZlU3BhbigpO1xuICB9XG4gIHJldHVybiBfZ2V0U3BhbkZvclNjb3BlKGdldEN1cnJlbnRTY29wZSgpKTtcbn1cblxuLyoqXG4gKiBMb2dzIGEgd2FybmluZyBvbmNlIGlmIGBiZWZvcmVTZW5kU3BhbmAgaXMgdXNlZCB0byBkcm9wIHNwYW5zLlxuICovXG5mdW5jdGlvbiBzaG93U3BhbkRyb3BXYXJuaW5nKCkge1xuICBpZiAoIWhhc1Nob3duU3BhbkRyb3BXYXJuaW5nKSB7XG4gICAgY29uc29sZVNhbmRib3goKCkgPT4ge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybignW1NlbnRyeV0gUmV0dXJuaW5nIG51bGwgZnJvbSBgYmVmb3JlU2VuZFNwYW5gIGlzIGRpc2FsbG93ZWQuIFRvIGRyb3AgY2VydGFpbiBzcGFucywgY29uZmlndXJlIHRoZSByZXNwZWN0aXZlIGludGVncmF0aW9ucyBkaXJlY3RseS4nKTtcbiAgICB9KTtcbiAgICBoYXNTaG93blNwYW5Ecm9wV2FybmluZyA9IHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBuYW1lIG9mIHRoZSBnaXZlbiBzcGFuIGFuZCBlbnN1cmVzIHRoYXQgdGhlIHNwYW4gbmFtZSBpcyBub3RcbiAqIG92ZXJ3cml0dGVuIGJ5IHRoZSBTZW50cnkgU0RLLlxuICpcbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIGluc3RlYWQgb2YgYHNwYW4udXBkYXRlTmFtZSgpYCBpZiB5b3Ugd2FudCB0byBtYWtlIHN1cmUgdGhhdFxuICogeW91ciBuYW1lIGlzIGtlcHQuIEZvciBzb21lIHNwYW5zLCBmb3IgZXhhbXBsZSByb290IGBodHRwLnNlcnZlcmAgc3BhbnMgdGhlXG4gKiBTZW50cnkgU0RLIHdvdWxkIG90aGVyd2lzZSBvdmVyd3JpdGUgdGhlIHNwYW4gbmFtZSB3aXRoIGEgaGlnaC1xdWFsaXR5IG5hbWVcbiAqIGl0IGluZmVycyB3aGVuIHRoZSBzcGFuIGVuZHMuXG4gKlxuICogVXNlIHRoaXMgZnVuY3Rpb24gaW4gc2VydmVyIGNvZGUgb3Igd2hlbiB5b3VyIHNwYW4gaXMgc3RhcnRlZCBvbiB0aGUgc2VydmVyXG4gKiBhbmQgb24gdGhlIGNsaWVudCAoYnJvd3NlcikuIElmIHlvdSBvbmx5IHVwZGF0ZSBhIHNwYW4gbmFtZSBvbiB0aGUgY2xpZW50LFxuICogeW91IGNhbiBhbHNvIHVzZSBgc3Bhbi51cGRhdGVOYW1lKClgIHRoZSBTREsgZG9lcyBub3Qgb3ZlcndyaXRlIHRoZSBuYW1lLlxuICpcbiAqIEBwYXJhbSBzcGFuIC0gVGhlIHNwYW4gdG8gdXBkYXRlIHRoZSBuYW1lIG9mLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSB0byBzZXQgb24gdGhlIHNwYW4uXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVNwYW5OYW1lKHNwYW4sIG5hbWUpIHtcbiAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRV06ICdjdXN0b20nLFxuICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX0NVU1RPTV9TUEFOX05BTUVdOiBuYW1lXG4gIH0pO1xufVxuZXhwb3J0IHsgVFJBQ0VfRkxBR19OT05FLCBUUkFDRV9GTEFHX1NBTVBMRUQsIGFkZENoaWxkU3BhblRvU3BhbiwgY29udmVydFNwYW5MaW5rc0ZvckVudmVsb3BlLCBnZXRBY3RpdmVTcGFuLCBnZXRSb290U3BhbiwgZ2V0U3BhbkRlc2NlbmRhbnRzLCBnZXRTdGF0dXNNZXNzYWdlLCByZW1vdmVDaGlsZFNwYW5Gcm9tU3Bhbiwgc2hvd1NwYW5Ecm9wV2FybmluZywgc3BhbklzU2FtcGxlZCwgc3BhblRpbWVJbnB1dFRvU2Vjb25kcywgc3BhblRvSlNPTiwgc3BhblRvVHJhY2VDb250ZXh0LCBzcGFuVG9UcmFjZUhlYWRlciwgc3BhblRvVHJhbnNhY3Rpb25UcmFjZUNvbnRleHQsIHVwZGF0ZVNwYW5OYW1lIH07XG4iLCJpbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4uL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IGFkZEdsb2JhbEVycm9ySW5zdHJ1bWVudGF0aW9uSGFuZGxlciB9IGZyb20gJy4uL2luc3RydW1lbnQvZ2xvYmFsRXJyb3IuanMnO1xuaW1wb3J0IHsgYWRkR2xvYmFsVW5oYW5kbGVkUmVqZWN0aW9uSW5zdHJ1bWVudGF0aW9uSGFuZGxlciB9IGZyb20gJy4uL2luc3RydW1lbnQvZ2xvYmFsVW5oYW5kbGVkUmVqZWN0aW9uLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7IGdldEFjdGl2ZVNwYW4sIGdldFJvb3RTcGFuIH0gZnJvbSAnLi4vdXRpbHMvc3BhblV0aWxzLmpzJztcbmltcG9ydCB7IFNQQU5fU1RBVFVTX0VSUk9SIH0gZnJvbSAnLi9zcGFuc3RhdHVzLmpzJztcbmxldCBlcnJvcnNJbnN0cnVtZW50ZWQgPSBmYWxzZTtcblxuLyoqXG4gKiBFbnN1cmUgdGhhdCBnbG9iYWwgZXJyb3JzIGF1dG9tYXRpY2FsbHkgc2V0IHRoZSBhY3RpdmUgc3BhbiBzdGF0dXMuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyU3BhbkVycm9ySW5zdHJ1bWVudGF0aW9uKCkge1xuICBpZiAoZXJyb3JzSW5zdHJ1bWVudGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGVycm9yc0luc3RydW1lbnRlZCA9IHRydWU7XG4gIGFkZEdsb2JhbEVycm9ySW5zdHJ1bWVudGF0aW9uSGFuZGxlcihlcnJvckNhbGxiYWNrKTtcbiAgYWRkR2xvYmFsVW5oYW5kbGVkUmVqZWN0aW9uSW5zdHJ1bWVudGF0aW9uSGFuZGxlcihlcnJvckNhbGxiYWNrKTtcbn1cblxuLyoqXG4gKiBJZiBhbiBlcnJvciBvciB1bmhhbmRsZWQgcHJvbWlzZSBvY2N1cnMsIHdlIG1hcmsgdGhlIGFjdGl2ZSByb290IHNwYW4gYXMgZmFpbGVkXG4gKi9cbmZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soKSB7XG4gIGNvbnN0IGFjdGl2ZVNwYW4gPSBnZXRBY3RpdmVTcGFuKCk7XG4gIGNvbnN0IHJvb3RTcGFuID0gYWN0aXZlU3BhbiAmJiBnZXRSb290U3BhbihhY3RpdmVTcGFuKTtcbiAgaWYgKHJvb3RTcGFuKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdpbnRlcm5hbF9lcnJvcic7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcubG9nKGBbVHJhY2luZ10gUm9vdCBzcGFuOiAke21lc3NhZ2V9IC0+IEdsb2JhbCBlcnJvciBvY2N1cnJlZGApO1xuICAgIHJvb3RTcGFuLnNldFN0YXR1cyh7XG4gICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgIG1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBUaGUgZnVuY3Rpb24gbmFtZSB3aWxsIGJlIGxvc3Qgd2hlbiBidW5kbGluZyBidXQgd2UgbmVlZCB0byBiZSBhYmxlIHRvIGlkZW50aWZ5IHRoaXMgbGlzdGVuZXIgbGF0ZXIgdG8gbWFpbnRhaW4gdGhlXG4vLyBub2RlLmpzIGRlZmF1bHQgZXhpdCBiZWhhdmlvdXJcbmVycm9yQ2FsbGJhY2sudGFnID0gJ3NlbnRyeV90cmFjaW5nRXJyb3JDYWxsYmFjayc7XG5leHBvcnQgeyByZWdpc3RlclNwYW5FcnJvckluc3RydW1lbnRhdGlvbiB9O1xuIiwiaW1wb3J0IHsgZ2V0Q2xpZW50IH0gZnJvbSAnLi4vY3VycmVudFNjb3Blcy5qcyc7XG5cbi8vIFRyZWVzaGFrYWJsZSBndWFyZCB0byByZW1vdmUgYWxsIGNvZGUgcmVsYXRlZCB0byB0cmFjaW5nXG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBzcGFuIHJlY29yZGluZyBpcyBjdXJyZW50bHkgZW5hYmxlZC5cbiAqXG4gKiBTcGFucyBhcmUgcmVjb3JkZWQgd2hlbiBhdCBsZWFzdCBvbmUgb2YgYHRyYWNlc1NhbXBsZVJhdGVgIGFuZCBgdHJhY2VzU2FtcGxlcmBcbiAqIGlzIGRlZmluZWQgaW4gdGhlIFNESyBjb25maWcuIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgbWFrZSBhbnkgYXNzdW1wdGlvbiBhYm91dFxuICogc2FtcGxpbmcgZGVjaXNpb25zLCBpdCBvbmx5IGNoZWNrcyBpZiB0aGUgU0RLIGlzIGNvbmZpZ3VyZWQgdG8gcmVjb3JkIHNwYW5zLlxuICpcbiAqIEltcG9ydGFudDogVGhpcyBmdW5jdGlvbiBvbmx5IGRldGVybWluZXMgaWYgc3BhbiByZWNvcmRpbmcgaXMgZW5hYmxlZC4gVHJhY2VcbiAqIGNvbnRpbnVhdGlvbiBhbmQgcHJvcGFnYXRpb24gaXMgc2VwYXJhdGVseSBjb250cm9sbGVkIGFuZCBub3QgY292ZXJlZCBieSB0aGlzIGZ1bmN0aW9uLlxuICogSWYgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIHRyYWNlcyBjYW4gc3RpbGwgYmUgcHJvcGFnYXRlZCAod2hpY2ggaXMgd2hhdFxuICogd2UgcmVmZXIgdG8gYnkgXCJUcmFjaW5nIHdpdGhvdXQgUGVyZm9ybWFuY2VcIilcbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wLnNlbnRyeS5kZXYvc2RrL3RlbGVtZXRyeS90cmFjZXMvdHJhY2luZy13aXRob3V0LXBlcmZvcm1hbmNlL1xuICpcbiAqIEBwYXJhbSBtYXliZU9wdGlvbnMgQW4gU0RLIG9wdGlvbnMgb2JqZWN0IHRvIGJlIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uLlxuICogSWYgdGhpcyBvcHRpb24gaXMgbm90IHByb3ZpZGVkLCB0aGUgZnVuY3Rpb24gd2lsbCB1c2UgdGhlIGN1cnJlbnQgY2xpZW50J3Mgb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gaGFzU3BhbnNFbmFibGVkKG1heWJlT3B0aW9ucykge1xuICBpZiAodHlwZW9mIF9fU0VOVFJZX1RSQUNJTkdfXyA9PT0gJ2Jvb2xlYW4nICYmICFfX1NFTlRSWV9UUkFDSU5HX18pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3Qgb3B0aW9ucyA9IG1heWJlT3B0aW9ucyB8fCBnZXRDbGllbnQoKT8uZ2V0T3B0aW9ucygpO1xuICByZXR1cm4gISFvcHRpb25zICYmIChcbiAgLy8gTm90ZTogVGhpcyBjaGVjayBpcyBgIT0gbnVsbGAsIG1lYW5pbmcgXCJudWxsaXNoXCIuIGAwYCBpcyBub3QgXCJudWxsaXNoXCIsIGB1bmRlZmluZWRgIGFuZCBgbnVsbGAgYXJlLiAoVGhpcyBjb21tZW50IHdhcyBicm91Z2h0IHRvIHlvdSBieSAxNSBtaW51dGVzIG9mIHF1ZXN0aW9uaW5nIGxpZmUpXG4gIG9wdGlvbnMudHJhY2VzU2FtcGxlUmF0ZSAhPSBudWxsIHx8ICEhb3B0aW9ucy50cmFjZXNTYW1wbGVyKTtcbn1cblxuLyoqXG4gKiBAc2VlIEpTRG9jIG9mIGBoYXNTcGFuc0VuYWJsZWRgXG4gKiBAZGVwcmVjYXRlZCBVc2UgYGhhc1NwYW5zRW5hYmxlZGAgaW5zdGVhZCwgd2hpY2ggaXMgYSBtb3JlIGFjY3VyYXRlbHkgbmFtZWQgdmVyc2lvbiBvZiB0aGlzIGZ1bmN0aW9uLlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiB0aGUgU0RLLlxuICovXG4vLyBUT0RPKHYxMCk6IFJlbW92ZSB0aGlzIGV4cG9ydFxuY29uc3QgaGFzVHJhY2luZ0VuYWJsZWQgPSBoYXNTcGFuc0VuYWJsZWQ7XG5leHBvcnQgeyBoYXNTcGFuc0VuYWJsZWQsIGhhc1RyYWNpbmdFbmFibGVkIH07XG4iLCJjb25zdCBERUZBVUxUX0VOVklST05NRU5UID0gJ3Byb2R1Y3Rpb24nO1xuZXhwb3J0IHsgREVGQVVMVF9FTlZJUk9OTUVOVCB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBjb25zb2xlU2FuZGJveCwgZGVidWcgfSBmcm9tICcuL2xvZ2dlci5qcyc7XG5cbi8qKiBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byBleHRyYWN0IG9yZyBJRCBmcm9tIGEgRFNOIGhvc3QuICovXG5jb25zdCBPUkdfSURfUkVHRVggPSAvXm8oXFxkKylcXC4vO1xuXG4vKiogUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gcGFyc2UgYSBEc24uICovXG5jb25zdCBEU05fUkVHRVggPSAvXig/OihcXHcrKTopXFwvXFwvKD86KFxcdyspKD86OihcXHcrKT8pP0ApKFtcXHcuLV0rKSg/OjooXFxkKykpP1xcLyguKykvO1xuZnVuY3Rpb24gaXNWYWxpZFByb3RvY29sKHByb3RvY29sKSB7XG4gIHJldHVybiBwcm90b2NvbCA9PT0gJ2h0dHAnIHx8IHByb3RvY29sID09PSAnaHR0cHMnO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERzbi5cbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGlzIHdpbGwgcmVuZGVyIHRoZSBwdWJsaWMgcmVwcmVzZW50YXRpb24gd2l0aG91dCB0aGUgcGFzc3dvcmRcbiAqIGNvbXBvbmVudC4gVG8gZ2V0IHRoZSBkZXByZWNhdGVkIHByaXZhdGUgcmVwcmVzZW50YXRpb24sIHNldCBgd2l0aFBhc3N3b3JkYFxuICogdG8gdHJ1ZS5cbiAqXG4gKiBAcGFyYW0gd2l0aFBhc3N3b3JkIFdoZW4gc2V0IHRvIHRydWUsIHRoZSBwYXNzd29yZCB3aWxsIGJlIGluY2x1ZGVkLlxuICovXG5mdW5jdGlvbiBkc25Ub1N0cmluZyhkc24sIHdpdGhQYXNzd29yZCA9IGZhbHNlKSB7XG4gIGNvbnN0IHtcbiAgICBob3N0LFxuICAgIHBhdGgsXG4gICAgcGFzcyxcbiAgICBwb3J0LFxuICAgIHByb2plY3RJZCxcbiAgICBwcm90b2NvbCxcbiAgICBwdWJsaWNLZXlcbiAgfSA9IGRzbjtcbiAgcmV0dXJuIGAke3Byb3RvY29sfTovLyR7cHVibGljS2V5fSR7d2l0aFBhc3N3b3JkICYmIHBhc3MgPyBgOiR7cGFzc31gIDogJyd9YCArIGBAJHtob3N0fSR7cG9ydCA/IGA6JHtwb3J0fWAgOiAnJ30vJHtwYXRoID8gYCR7cGF0aH0vYCA6IHBhdGh9JHtwcm9qZWN0SWR9YDtcbn1cblxuLyoqXG4gKiBQYXJzZXMgYSBEc24gZnJvbSBhIGdpdmVuIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gc3RyIEEgRHNuIGFzIHN0cmluZ1xuICogQHJldHVybnMgRHNuIGFzIERzbkNvbXBvbmVudHMgb3IgdW5kZWZpbmVkIGlmIEBwYXJhbSBzdHIgaXMgbm90IGEgdmFsaWQgRFNOIHN0cmluZ1xuICovXG5mdW5jdGlvbiBkc25Gcm9tU3RyaW5nKHN0cikge1xuICBjb25zdCBtYXRjaCA9IERTTl9SRUdFWC5leGVjKHN0cik7XG4gIGlmICghbWF0Y2gpIHtcbiAgICAvLyBUaGlzIHNob3VsZCBiZSBsb2dnZWQgdG8gdGhlIGNvbnNvbGVcbiAgICBjb25zb2xlU2FuZGJveCgoKSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBTZW50cnkgRHNuOiAke3N0cn1gKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGNvbnN0IFtwcm90b2NvbCwgcHVibGljS2V5LCBwYXNzID0gJycsIGhvc3QgPSAnJywgcG9ydCA9ICcnLCBsYXN0UGF0aCA9ICcnXSA9IG1hdGNoLnNsaWNlKDEpO1xuICBsZXQgcGF0aCA9ICcnO1xuICBsZXQgcHJvamVjdElkID0gbGFzdFBhdGg7XG4gIGNvbnN0IHNwbGl0ID0gcHJvamVjdElkLnNwbGl0KCcvJyk7XG4gIGlmIChzcGxpdC5sZW5ndGggPiAxKSB7XG4gICAgcGF0aCA9IHNwbGl0LnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XG4gICAgcHJvamVjdElkID0gc3BsaXQucG9wKCk7XG4gIH1cbiAgaWYgKHByb2plY3RJZCkge1xuICAgIGNvbnN0IHByb2plY3RNYXRjaCA9IHByb2plY3RJZC5tYXRjaCgvXlxcZCsvKTtcbiAgICBpZiAocHJvamVjdE1hdGNoKSB7XG4gICAgICBwcm9qZWN0SWQgPSBwcm9qZWN0TWF0Y2hbMF07XG4gICAgfVxuICB9XG4gIHJldHVybiBkc25Gcm9tQ29tcG9uZW50cyh7XG4gICAgaG9zdCxcbiAgICBwYXNzLFxuICAgIHBhdGgsXG4gICAgcHJvamVjdElkLFxuICAgIHBvcnQsXG4gICAgcHJvdG9jb2w6IHByb3RvY29sLFxuICAgIHB1YmxpY0tleVxuICB9KTtcbn1cbmZ1bmN0aW9uIGRzbkZyb21Db21wb25lbnRzKGNvbXBvbmVudHMpIHtcbiAgcmV0dXJuIHtcbiAgICBwcm90b2NvbDogY29tcG9uZW50cy5wcm90b2NvbCxcbiAgICBwdWJsaWNLZXk6IGNvbXBvbmVudHMucHVibGljS2V5IHx8ICcnLFxuICAgIHBhc3M6IGNvbXBvbmVudHMucGFzcyB8fCAnJyxcbiAgICBob3N0OiBjb21wb25lbnRzLmhvc3QsXG4gICAgcG9ydDogY29tcG9uZW50cy5wb3J0IHx8ICcnLFxuICAgIHBhdGg6IGNvbXBvbmVudHMucGF0aCB8fCAnJyxcbiAgICBwcm9qZWN0SWQ6IGNvbXBvbmVudHMucHJvamVjdElkXG4gIH07XG59XG5mdW5jdGlvbiB2YWxpZGF0ZURzbihkc24pIHtcbiAgaWYgKCFERUJVR19CVUlMRCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IHtcbiAgICBwb3J0LFxuICAgIHByb2plY3RJZCxcbiAgICBwcm90b2NvbFxuICB9ID0gZHNuO1xuICBjb25zdCByZXF1aXJlZENvbXBvbmVudHMgPSBbJ3Byb3RvY29sJywgJ3B1YmxpY0tleScsICdob3N0JywgJ3Byb2plY3RJZCddO1xuICBjb25zdCBoYXNNaXNzaW5nUmVxdWlyZWRDb21wb25lbnQgPSByZXF1aXJlZENvbXBvbmVudHMuZmluZChjb21wb25lbnQgPT4ge1xuICAgIGlmICghZHNuW2NvbXBvbmVudF0pIHtcbiAgICAgIGRlYnVnLmVycm9yKGBJbnZhbGlkIFNlbnRyeSBEc246ICR7Y29tcG9uZW50fSBtaXNzaW5nYCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbiAgaWYgKGhhc01pc3NpbmdSZXF1aXJlZENvbXBvbmVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIXByb2plY3RJZC5tYXRjaCgvXlxcZCskLykpIHtcbiAgICBkZWJ1Zy5lcnJvcihgSW52YWxpZCBTZW50cnkgRHNuOiBJbnZhbGlkIHByb2plY3RJZCAke3Byb2plY3RJZH1gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCFpc1ZhbGlkUHJvdG9jb2wocHJvdG9jb2wpKSB7XG4gICAgZGVidWcuZXJyb3IoYEludmFsaWQgU2VudHJ5IERzbjogSW52YWxpZCBwcm90b2NvbCAke3Byb3RvY29sfWApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAocG9ydCAmJiBpc05hTihwYXJzZUludChwb3J0LCAxMCkpKSB7XG4gICAgZGVidWcuZXJyb3IoYEludmFsaWQgU2VudHJ5IERzbjogSW52YWxpZCBwb3J0ICR7cG9ydH1gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogRXh0cmFjdCB0aGUgb3JnIElEIGZyb20gYSBEU04gaG9zdC5cbiAqXG4gKiBAcGFyYW0gaG9zdCBUaGUgaG9zdCBmcm9tIGEgRFNOXG4gKiBAcmV0dXJucyBUaGUgb3JnIElEIGlmIGZvdW5kLCB1bmRlZmluZWQgb3RoZXJ3aXNlXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RPcmdJZEZyb21Ec25Ib3N0KGhvc3QpIHtcbiAgY29uc3QgbWF0Y2ggPSBob3N0Lm1hdGNoKE9SR19JRF9SRUdFWCk7XG4gIHJldHVybiBtYXRjaD8uWzFdO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB2YWxpZCBTZW50cnkgRHNuIG9iamVjdCwgaWRlbnRpZnlpbmcgYSBTZW50cnkgaW5zdGFuY2UgYW5kIHByb2plY3QuXG4gKiBAcmV0dXJucyBhIHZhbGlkIERzbkNvbXBvbmVudHMgb2JqZWN0IG9yIGB1bmRlZmluZWRgIGlmIEBwYXJhbSBmcm9tIGlzIGFuIGludmFsaWQgRFNOIHNvdXJjZVxuICovXG5mdW5jdGlvbiBtYWtlRHNuKGZyb20pIHtcbiAgY29uc3QgY29tcG9uZW50cyA9IHR5cGVvZiBmcm9tID09PSAnc3RyaW5nJyA/IGRzbkZyb21TdHJpbmcoZnJvbSkgOiBkc25Gcm9tQ29tcG9uZW50cyhmcm9tKTtcbiAgaWYgKCFjb21wb25lbnRzIHx8ICF2YWxpZGF0ZURzbihjb21wb25lbnRzKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvbXBvbmVudHM7XG59XG5leHBvcnQgeyBkc25Gcm9tU3RyaW5nLCBkc25Ub1N0cmluZywgZXh0cmFjdE9yZ0lkRnJvbURzbkhvc3QsIG1ha2VEc24gfTtcbiIsImltcG9ydCB7IERFRkFVTFRfRU5WSVJPTk1FTlQgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgZ2V0Q2xpZW50IH0gZnJvbSAnLi4vY3VycmVudFNjb3Blcy5qcyc7XG5pbXBvcnQgeyBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NBTVBMRV9SQVRFLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1BSRVZJT1VTX1RSQUNFX1NBTVBMRV9SQVRFLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRSB9IGZyb20gJy4uL3NlbWFudGljQXR0cmlidXRlcy5qcyc7XG5pbXBvcnQgeyBiYWdnYWdlSGVhZGVyVG9EeW5hbWljU2FtcGxpbmdDb250ZXh0LCBkeW5hbWljU2FtcGxpbmdDb250ZXh0VG9TZW50cnlCYWdnYWdlSGVhZGVyIH0gZnJvbSAnLi4vdXRpbHMvYmFnZ2FnZS5qcyc7XG5pbXBvcnQgeyBleHRyYWN0T3JnSWRGcm9tRHNuSG9zdCB9IGZyb20gJy4uL3V0aWxzL2Rzbi5qcyc7XG5pbXBvcnQgeyBoYXNTcGFuc0VuYWJsZWQgfSBmcm9tICcuLi91dGlscy9oYXNTcGFuc0VuYWJsZWQuanMnO1xuaW1wb3J0IHsgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5IH0gZnJvbSAnLi4vdXRpbHMvb2JqZWN0LmpzJztcbmltcG9ydCB7IGdldFJvb3RTcGFuLCBzcGFuVG9KU09OLCBzcGFuSXNTYW1wbGVkIH0gZnJvbSAnLi4vdXRpbHMvc3BhblV0aWxzLmpzJztcbmltcG9ydCB7IGdldENhcHR1cmVkU2NvcGVzT25TcGFuIH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbi8qKlxuICogSWYgeW91IGNoYW5nZSB0aGlzIHZhbHVlLCBhbHNvIHVwZGF0ZSB0aGUgdGVyc2VyIHBsdWdpbiBjb25maWcgdG9cbiAqIGF2b2lkIG1pbmlmaWNhdGlvbiBvZiB0aGUgb2JqZWN0IHByb3BlcnR5IVxuICovXG5jb25zdCBGUk9aRU5fRFNDX0ZJRUxEID0gJ19mcm96ZW5Ec2MnO1xuXG4vKipcbiAqIEZyZWV6ZSB0aGUgZ2l2ZW4gRFNDIG9uIHRoZSBnaXZlbiBzcGFuLlxuICovXG5mdW5jdGlvbiBmcmVlemVEc2NPblNwYW4oc3BhbiwgZHNjKSB7XG4gIGNvbnN0IHNwYW5XaXRoTWF5YmVEc2MgPSBzcGFuO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoc3BhbldpdGhNYXliZURzYywgRlJPWkVOX0RTQ19GSUVMRCwgZHNjKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZHluYW1pYyBzYW1wbGluZyBjb250ZXh0IGZyb20gYSBjbGllbnQuXG4gKlxuICogRGlzcGF0Y2hlcyB0aGUgYGNyZWF0ZURzY2AgbGlmZWN5Y2xlIGhvb2sgYXMgYSBzaWRlIGVmZmVjdC5cbiAqL1xuZnVuY3Rpb24gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21DbGllbnQodHJhY2VfaWQsIGNsaWVudCkge1xuICBjb25zdCBvcHRpb25zID0gY2xpZW50LmdldE9wdGlvbnMoKTtcbiAgY29uc3Qge1xuICAgIHB1YmxpY0tleTogcHVibGljX2tleSxcbiAgICBob3N0XG4gIH0gPSBjbGllbnQuZ2V0RHNuKCkgfHwge307XG4gIGxldCBvcmdfaWQ7XG4gIGlmIChvcHRpb25zLm9yZ0lkKSB7XG4gICAgb3JnX2lkID0gU3RyaW5nKG9wdGlvbnMub3JnSWQpO1xuICB9IGVsc2UgaWYgKGhvc3QpIHtcbiAgICBvcmdfaWQgPSBleHRyYWN0T3JnSWRGcm9tRHNuSG9zdChob3N0KTtcbiAgfVxuXG4gIC8vIEluc3RlYWQgb2YgY29uZGl0aW9uYWxseSBhZGRpbmcgbm9uLXVuZGVmaW5lZCB2YWx1ZXMsIHdlIGFkZCB0aGVtIGFuZCB0aGVuIHJlbW92ZSB0aGVtIGlmIG5lZWRlZFxuICAvLyBvdGhlcndpc2UsIHRoZSBvcmRlciBvZiBiYWdnYWdlIGVudHJpZXMgY2hhbmdlcywgd2hpY2ggXCJicmVha3NcIiBhIGJ1bmNoIG9mIHRlc3RzIGV0Yy5cbiAgY29uc3QgZHNjID0ge1xuICAgIGVudmlyb25tZW50OiBvcHRpb25zLmVudmlyb25tZW50IHx8IERFRkFVTFRfRU5WSVJPTk1FTlQsXG4gICAgcmVsZWFzZTogb3B0aW9ucy5yZWxlYXNlLFxuICAgIHB1YmxpY19rZXksXG4gICAgdHJhY2VfaWQsXG4gICAgb3JnX2lkXG4gIH07XG4gIGNsaWVudC5lbWl0KCdjcmVhdGVEc2MnLCBkc2MpO1xuICByZXR1cm4gZHNjO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZHluYW1pYyBzYW1wbGluZyBjb250ZXh0IGZvciB0aGUgY3VycmVudGx5IGFjdGl2ZSBzY29wZXMuXG4gKi9cbmZ1bmN0aW9uIGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU2NvcGUoY2xpZW50LCBzY29wZSkge1xuICBjb25zdCBwcm9wYWdhdGlvbkNvbnRleHQgPSBzY29wZS5nZXRQcm9wYWdhdGlvbkNvbnRleHQoKTtcbiAgcmV0dXJuIHByb3BhZ2F0aW9uQ29udGV4dC5kc2MgfHwgZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21DbGllbnQocHJvcGFnYXRpb25Db250ZXh0LnRyYWNlSWQsIGNsaWVudCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGR5bmFtaWMgc2FtcGxpbmcgY29udGV4dCBmcm9tIGEgc3BhbiAoYW5kIGNsaWVudCBhbmQgc2NvcGUpXG4gKlxuICogQHBhcmFtIHNwYW4gdGhlIHNwYW4gZnJvbSB3aGljaCBhIGZldyB2YWx1ZXMgbGlrZSB0aGUgcm9vdCBzcGFuIG5hbWUgYW5kIHNhbXBsZSByYXRlIGFyZSBleHRyYWN0ZWQuXG4gKlxuICogQHJldHVybnMgYSBkeW5hbWljIHNhbXBsaW5nIGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TcGFuKHNwYW4pIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gIGlmICghY2xpZW50KSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGNvbnN0IHJvb3RTcGFuID0gZ2V0Um9vdFNwYW4oc3Bhbik7XG4gIGNvbnN0IHJvb3RTcGFuSnNvbiA9IHNwYW5Ub0pTT04ocm9vdFNwYW4pO1xuICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSByb290U3Bhbkpzb24uZGF0YTtcbiAgY29uc3QgdHJhY2VTdGF0ZSA9IHJvb3RTcGFuLnNwYW5Db250ZXh0KCkudHJhY2VTdGF0ZTtcblxuICAvLyBUaGUgc3BhbiBzYW1wbGUgcmF0ZSB0aGF0IHdhcyBsb2NhbGx5IGFwcGxpZWQgdG8gdGhlIHJvb3Qgc3BhbiBzaG91bGQgYWxzbyBhbHdheXMgYmUgYXBwbGllZCB0byB0aGUgRFNDLCBldmVuIGlmIHRoZSBEU0MgaXMgZnJvemVuLlxuICAvLyBUaGlzIGlzIHNvIHRoYXQgdGhlIGRvd25zdHJlYW0gdHJhY2VzL3NlcnZpY2VzIGNhbiB1c2UgcGFyZW50U2FtcGxlUmF0ZSBpbiB0aGVpciBgdHJhY2VzU2FtcGxlcmAgdG8gbWFrZSBjb25zaXN0ZW50IHNhbXBsaW5nIGRlY2lzaW9ucyBhY3Jvc3MgdGhlIGVudGlyZSB0cmFjZS5cbiAgY29uc3Qgcm9vdFNwYW5TYW1wbGVSYXRlID0gdHJhY2VTdGF0ZT8uZ2V0KCdzZW50cnkuc2FtcGxlX3JhdGUnKSA/PyByb290U3BhbkF0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TQU1QTEVfUkFURV0gPz8gcm9vdFNwYW5BdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfUFJFVklPVVNfVFJBQ0VfU0FNUExFX1JBVEVdO1xuICBmdW5jdGlvbiBhcHBseUxvY2FsU2FtcGxlUmF0ZVRvRHNjKGRzYykge1xuICAgIGlmICh0eXBlb2Ygcm9vdFNwYW5TYW1wbGVSYXRlID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygcm9vdFNwYW5TYW1wbGVSYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgZHNjLnNhbXBsZV9yYXRlID0gYCR7cm9vdFNwYW5TYW1wbGVSYXRlfWA7XG4gICAgfVxuICAgIHJldHVybiBkc2M7XG4gIH1cblxuICAvLyBGb3IgY29yZSBpbXBsZW1lbnRhdGlvbiwgd2UgZnJlZXplIHRoZSBEU0Mgb250byB0aGUgc3BhbiBhcyBhIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5XG4gIGNvbnN0IGZyb3plbkRzYyA9IHJvb3RTcGFuW0ZST1pFTl9EU0NfRklFTERdO1xuICBpZiAoZnJvemVuRHNjKSB7XG4gICAgcmV0dXJuIGFwcGx5TG9jYWxTYW1wbGVSYXRlVG9Ec2MoZnJvemVuRHNjKTtcbiAgfVxuXG4gIC8vIEZvciBPcGVuVGVsZW1ldHJ5LCB3ZSBmcmVlemUgdGhlIERTQyBvbiB0aGUgdHJhY2Ugc3RhdGVcbiAgY29uc3QgdHJhY2VTdGF0ZURzYyA9IHRyYWNlU3RhdGU/LmdldCgnc2VudHJ5LmRzYycpO1xuXG4gIC8vIElmIHRoZSBzcGFuIGhhcyBhIERTQywgd2Ugd2FudCBpdCB0byB0YWtlIHByZWNlZGVuY2VcbiAgY29uc3QgZHNjT25UcmFjZVN0YXRlID0gdHJhY2VTdGF0ZURzYyAmJiBiYWdnYWdlSGVhZGVyVG9EeW5hbWljU2FtcGxpbmdDb250ZXh0KHRyYWNlU3RhdGVEc2MpO1xuICBpZiAoZHNjT25UcmFjZVN0YXRlKSB7XG4gICAgcmV0dXJuIGFwcGx5TG9jYWxTYW1wbGVSYXRlVG9Ec2MoZHNjT25UcmFjZVN0YXRlKTtcbiAgfVxuXG4gIC8vIEVsc2UsIHdlIGdlbmVyYXRlIGl0IGZyb20gdGhlIHNwYW5cbiAgY29uc3QgZHNjID0gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21DbGllbnQoc3Bhbi5zcGFuQ29udGV4dCgpLnRyYWNlSWQsIGNsaWVudCk7XG5cbiAgLy8gV2UgZG9uJ3Qgd2FudCB0byBoYXZlIGEgdHJhbnNhY3Rpb24gbmFtZSBpbiB0aGUgRFNDIGlmIHRoZSBzb3VyY2UgaXMgXCJ1cmxcIiBiZWNhdXNlIFVSTHMgbWlnaHQgY29udGFpbiBQSUlcbiAgY29uc3Qgc291cmNlID0gcm9vdFNwYW5BdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFXTtcblxuICAvLyBhZnRlciBKU09OIGNvbnZlcnNpb24sIHR4bi5uYW1lIGJlY29tZXMganNvblNwYW4uZGVzY3JpcHRpb25cbiAgY29uc3QgbmFtZSA9IHJvb3RTcGFuSnNvbi5kZXNjcmlwdGlvbjtcbiAgaWYgKHNvdXJjZSAhPT0gJ3VybCcgJiYgbmFtZSkge1xuICAgIGRzYy50cmFuc2FjdGlvbiA9IG5hbWU7XG4gIH1cblxuICAvLyBIb3cgY2FuIHdlIGV2ZW4gbGFuZCBoZXJlIHdpdGggaGFzU3BhbnNFbmFibGVkKCkgcmV0dXJuaW5nIGZhbHNlP1xuICAvLyBPdGVsIGNyZWF0ZXMgYSBOb24tcmVjb3JkaW5nIHNwYW4gaW4gVHJhY2luZyBXaXRob3V0IFBlcmZvcm1hbmNlIG1vZGUgd2hlbiBoYW5kbGluZyBpbmNvbWluZyByZXF1ZXN0c1xuICAvLyBTbyB3ZSBlbmQgdXAgd2l0aCBhbiBhY3RpdmUgc3BhbiB0aGF0IGlzIG5vdCBzYW1wbGVkIChuZWl0aGVyIHBvc2l0aXZlbHkgbm9yIG5lZ2F0aXZlbHkpXG4gIGlmIChoYXNTcGFuc0VuYWJsZWQoKSkge1xuICAgIGRzYy5zYW1wbGVkID0gU3RyaW5nKHNwYW5Jc1NhbXBsZWQocm9vdFNwYW4pKTtcbiAgICBkc2Muc2FtcGxlX3JhbmQgPVxuICAgIC8vIEluIE9URUwgd2Ugc3RvcmUgdGhlIHNhbXBsZSByYW5kIG9uIHRoZSB0cmFjZSBzdGF0ZSBiZWNhdXNlIHdlIGNhbm5vdCBhY2Nlc3Mgc2NvcGVzIGZvciBOb25SZWNvcmRpbmdTcGFuc1xuICAgIC8vIFRoZSBTZW50cnkgT1RFTCBTcGFuU2FtcGxlciB0YWtlcyBjYXJlIG9mIHdyaXRpbmcgdGhlIHNhbXBsZSByYW5kIG9uIHRoZSByb290IHNwYW5cbiAgICB0cmFjZVN0YXRlPy5nZXQoJ3NlbnRyeS5zYW1wbGVfcmFuZCcpID8/XG4gICAgLy8gT24gYWxsIG90aGVyIHBsYXRmb3JtcyB3ZSBjYW4gYWN0dWFsbHkgZ2V0IHRoZSBzY29wZXMgZnJvbSBhIHJvb3Qgc3BhbiAod2UgdXNlIHRoaXMgYXMgYSBmYWxsYmFjaylcbiAgICBnZXRDYXB0dXJlZFNjb3Blc09uU3Bhbihyb290U3Bhbikuc2NvcGU/LmdldFByb3BhZ2F0aW9uQ29udGV4dCgpLnNhbXBsZVJhbmQudG9TdHJpbmcoKTtcbiAgfVxuICBhcHBseUxvY2FsU2FtcGxlUmF0ZVRvRHNjKGRzYyk7XG4gIGNsaWVudC5lbWl0KCdjcmVhdGVEc2MnLCBkc2MsIHJvb3RTcGFuKTtcbiAgcmV0dXJuIGRzYztcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgU3BhbiB0byBhIGJhZ2dhZ2UgaGVhZGVyLlxuICovXG5mdW5jdGlvbiBzcGFuVG9CYWdnYWdlSGVhZGVyKHNwYW4pIHtcbiAgY29uc3QgZHNjID0gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TcGFuKHNwYW4pO1xuICByZXR1cm4gZHluYW1pY1NhbXBsaW5nQ29udGV4dFRvU2VudHJ5QmFnZ2FnZUhlYWRlcihkc2MpO1xufVxuZXhwb3J0IHsgZnJlZXplRHNjT25TcGFuLCBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbUNsaWVudCwgZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TY29wZSwgZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TcGFuLCBzcGFuVG9CYWdnYWdlSGVhZGVyIH07XG4iLCJpbXBvcnQgeyBnZW5lcmF0ZVRyYWNlSWQsIGdlbmVyYXRlU3BhbklkIH0gZnJvbSAnLi4vdXRpbHMvcHJvcGFnYXRpb25Db250ZXh0LmpzJztcbmltcG9ydCB7IFRSQUNFX0ZMQUdfTk9ORSB9IGZyb20gJy4uL3V0aWxzL3NwYW5VdGlscy5qcyc7XG5cbi8qKlxuICogQSBTZW50cnkgU3BhbiB0aGF0IGlzIG5vbi1yZWNvcmRpbmcsIG1lYW5pbmcgaXQgd2lsbCBub3QgYmUgc2VudCB0byBTZW50cnkuXG4gKi9cbmNsYXNzIFNlbnRyeU5vblJlY29yZGluZ1NwYW4ge1xuICBjb25zdHJ1Y3RvcihzcGFuQ29udGV4dCA9IHt9KSB7XG4gICAgdGhpcy5fdHJhY2VJZCA9IHNwYW5Db250ZXh0LnRyYWNlSWQgfHwgZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgdGhpcy5fc3BhbklkID0gc3BhbkNvbnRleHQuc3BhbklkIHx8IGdlbmVyYXRlU3BhbklkKCk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3BhbkNvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNwYW5JZDogdGhpcy5fc3BhbklkLFxuICAgICAgdHJhY2VJZDogdGhpcy5fdHJhY2VJZCxcbiAgICAgIHRyYWNlRmxhZ3M6IFRSQUNFX0ZMQUdfTk9ORVxuICAgIH07XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICBlbmQoX3RpbWVzdGFtcCkge31cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc2V0QXR0cmlidXRlKF9rZXksIF92YWx1ZSkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHNldEF0dHJpYnV0ZXMoX3ZhbHVlcykge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHNldFN0YXR1cyhfc3RhdHVzKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgdXBkYXRlTmFtZShfbmFtZSkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGlzUmVjb3JkaW5nKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBhZGRFdmVudChfbmFtZSwgX2F0dHJpYnV0ZXNPclN0YXJ0VGltZSwgX3N0YXJ0VGltZSkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGFkZExpbmsoX2xpbmspIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBhZGRMaW5rcyhfbGlua3MpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBnZW5lcmFsbHkgbm90IGJlIHVzZWQsXG4gICAqIGJ1dCB3ZSBuZWVkIGl0IGZvciBiZWluZyBjb21wbGlhbnQgd2l0aCB0aGUgT1RFTCBTcGFuIGludGVyZmFjZS5cbiAgICpcbiAgICogQGhpZGRlblxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlY29yZEV4Y2VwdGlvbihfZXhjZXB0aW9uLCBfdGltZSkge1xuICAgIC8vIG5vb3BcbiAgfVxufVxuZXhwb3J0IHsgU2VudHJ5Tm9uUmVjb3JkaW5nU3BhbiB9O1xuIiwiaW1wb3J0IHsgaXNUaGVuYWJsZSB9IGZyb20gJy4vaXMuanMnO1xuXG4vKipcbiAqIFdyYXAgYSBjYWxsYmFjayBmdW5jdGlvbiB3aXRoIGVycm9yIGhhbmRsaW5nLlxuICogSWYgYW4gZXJyb3IgaXMgdGhyb3duLCBpdCB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYG9uRXJyb3JgIGNhbGxiYWNrIGFuZCByZS10aHJvd24uXG4gKlxuICogSWYgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gaXMgYSBwcm9taXNlLCBpdCB3aWxsIGJlIGhhbmRsZWQgd2l0aCBgbWF5YmVIYW5kbGVQcm9taXNlUmVqZWN0aW9uYC5cbiAqXG4gKiBJZiBhbiBgb25GaW5hbGx5YCBjYWxsYmFjayBpcyBwcm92aWRlZCwgdGhpcyB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBjYWxsYmFjayBoYXMgZmluaXNoZWRcbiAqIC0gc28gaWYgaXQgcmV0dXJucyBhIHByb21pc2UsIG9uY2UgdGhlIHByb21pc2UgcmVzb2x2ZWQvcmVqZWN0ZWQsXG4gKiBlbHNlIG9uY2UgdGhlIGNhbGxiYWNrIGhhcyBmaW5pc2hlZCBleGVjdXRpbmcuXG4gKiBUaGUgYG9uRmluYWxseWAgY2FsbGJhY2sgd2lsbCBfYWx3YXlzXyBiZSBjYWxsZWQsIG5vIG1hdHRlciBpZiBhbiBlcnJvciB3YXMgdGhyb3duIG9yIG5vdC5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2tFcnJvcnMoZm4sIG9uRXJyb3IsXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG5vbkZpbmFsbHkgPSAoKSA9PiB7fSkge1xuICBsZXQgbWF5YmVQcm9taXNlUmVzdWx0O1xuICB0cnkge1xuICAgIG1heWJlUHJvbWlzZVJlc3VsdCA9IGZuKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBvbkVycm9yKGUpO1xuICAgIG9uRmluYWxseSgpO1xuICAgIHRocm93IGU7XG4gIH1cbiAgcmV0dXJuIG1heWJlSGFuZGxlUHJvbWlzZVJlamVjdGlvbihtYXliZVByb21pc2VSZXN1bHQsIG9uRXJyb3IsIG9uRmluYWxseSk7XG59XG5cbi8qKlxuICogTWF5YmUgaGFuZGxlIGEgcHJvbWlzZSByZWplY3Rpb24uXG4gKiBUaGlzIGV4cGVjdHMgdG8gYmUgZ2l2ZW4gYSB2YWx1ZSB0aGF0IF9tYXlfIGJlIGEgcHJvbWlzZSwgb3IgYW55IG90aGVyIHZhbHVlLlxuICogSWYgaXQgaXMgYSBwcm9taXNlLCBhbmQgaXQgcmVqZWN0cywgaXQgd2lsbCBjYWxsIHRoZSBgb25FcnJvcmAgY2FsbGJhY2suXG4gKiBPdGhlciB0aGFuIHRoaXMsIGl0IHdpbGwgZ2VuZXJhbGx5IHJldHVybiB0aGUgZ2l2ZW4gdmFsdWUgYXMtaXMuXG4gKi9cbmZ1bmN0aW9uIG1heWJlSGFuZGxlUHJvbWlzZVJlamVjdGlvbih2YWx1ZSwgb25FcnJvciwgb25GaW5hbGx5KSB7XG4gIGlmIChpc1RoZW5hYmxlKHZhbHVlKSkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSB0aGUgaXNUaGVuYWJsZSBjaGVjayByZXR1cm5zIHRoZSBcIndyb25nXCIgdHlwZSBoZXJlXG4gICAgcmV0dXJuIHZhbHVlLnRoZW4ocmVzID0+IHtcbiAgICAgIG9uRmluYWxseSgpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9LCBlID0+IHtcbiAgICAgIG9uRXJyb3IoZSk7XG4gICAgICBvbkZpbmFsbHkoKTtcbiAgICAgIHRocm93IGU7XG4gICAgfSk7XG4gIH1cbiAgb25GaW5hbGx5KCk7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmV4cG9ydCB7IGhhbmRsZUNhbGxiYWNrRXJyb3JzIH07XG4iLCJpbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4uL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7IHNwYW5Ub0pTT04sIGdldFJvb3RTcGFuLCBzcGFuSXNTYW1wbGVkIH0gZnJvbSAnLi4vdXRpbHMvc3BhblV0aWxzLmpzJztcblxuLyoqXG4gKiBQcmludCBhIGxvZyBtZXNzYWdlIGZvciBhIHN0YXJ0ZWQgc3Bhbi5cbiAqL1xuZnVuY3Rpb24gbG9nU3BhblN0YXJ0KHNwYW4pIHtcbiAgaWYgKCFERUJVR19CVUlMRCkgcmV0dXJuO1xuICBjb25zdCB7XG4gICAgZGVzY3JpcHRpb24gPSAnPCB1bmtub3duIG5hbWUgPicsXG4gICAgb3AgPSAnPCB1bmtub3duIG9wID4nLFxuICAgIHBhcmVudF9zcGFuX2lkOiBwYXJlbnRTcGFuSWRcbiAgfSA9IHNwYW5Ub0pTT04oc3Bhbik7XG4gIGNvbnN0IHtcbiAgICBzcGFuSWRcbiAgfSA9IHNwYW4uc3BhbkNvbnRleHQoKTtcbiAgY29uc3Qgc2FtcGxlZCA9IHNwYW5Jc1NhbXBsZWQoc3Bhbik7XG4gIGNvbnN0IHJvb3RTcGFuID0gZ2V0Um9vdFNwYW4oc3Bhbik7XG4gIGNvbnN0IGlzUm9vdFNwYW4gPSByb290U3BhbiA9PT0gc3BhbjtcbiAgY29uc3QgaGVhZGVyID0gYFtUcmFjaW5nXSBTdGFydGluZyAke3NhbXBsZWQgPyAnc2FtcGxlZCcgOiAndW5zYW1wbGVkJ30gJHtpc1Jvb3RTcGFuID8gJ3Jvb3QgJyA6ICcnfXNwYW5gO1xuICBjb25zdCBpbmZvUGFydHMgPSBbYG9wOiAke29wfWAsIGBuYW1lOiAke2Rlc2NyaXB0aW9ufWAsIGBJRDogJHtzcGFuSWR9YF07XG4gIGlmIChwYXJlbnRTcGFuSWQpIHtcbiAgICBpbmZvUGFydHMucHVzaChgcGFyZW50IElEOiAke3BhcmVudFNwYW5JZH1gKTtcbiAgfVxuICBpZiAoIWlzUm9vdFNwYW4pIHtcbiAgICBjb25zdCB7XG4gICAgICBvcCxcbiAgICAgIGRlc2NyaXB0aW9uXG4gICAgfSA9IHNwYW5Ub0pTT04ocm9vdFNwYW4pO1xuICAgIGluZm9QYXJ0cy5wdXNoKGByb290IElEOiAke3Jvb3RTcGFuLnNwYW5Db250ZXh0KCkuc3BhbklkfWApO1xuICAgIGlmIChvcCkge1xuICAgICAgaW5mb1BhcnRzLnB1c2goYHJvb3Qgb3A6ICR7b3B9YCk7XG4gICAgfVxuICAgIGlmIChkZXNjcmlwdGlvbikge1xuICAgICAgaW5mb1BhcnRzLnB1c2goYHJvb3QgZGVzY3JpcHRpb246ICR7ZGVzY3JpcHRpb259YCk7XG4gICAgfVxuICB9XG4gIGRlYnVnLmxvZyhgJHtoZWFkZXJ9XG4gICR7aW5mb1BhcnRzLmpvaW4oJ1xcbiAgJyl9YCk7XG59XG5cbi8qKlxuICogUHJpbnQgYSBsb2cgbWVzc2FnZSBmb3IgYW4gZW5kZWQgc3Bhbi5cbiAqL1xuZnVuY3Rpb24gbG9nU3BhbkVuZChzcGFuKSB7XG4gIGlmICghREVCVUdfQlVJTEQpIHJldHVybjtcbiAgY29uc3Qge1xuICAgIGRlc2NyaXB0aW9uID0gJzwgdW5rbm93biBuYW1lID4nLFxuICAgIG9wID0gJzwgdW5rbm93biBvcCA+J1xuICB9ID0gc3BhblRvSlNPTihzcGFuKTtcbiAgY29uc3Qge1xuICAgIHNwYW5JZFxuICB9ID0gc3Bhbi5zcGFuQ29udGV4dCgpO1xuICBjb25zdCByb290U3BhbiA9IGdldFJvb3RTcGFuKHNwYW4pO1xuICBjb25zdCBpc1Jvb3RTcGFuID0gcm9vdFNwYW4gPT09IHNwYW47XG4gIGNvbnN0IG1zZyA9IGBbVHJhY2luZ10gRmluaXNoaW5nIFwiJHtvcH1cIiAke2lzUm9vdFNwYW4gPyAncm9vdCAnIDogJyd9c3BhbiBcIiR7ZGVzY3JpcHRpb259XCIgd2l0aCBJRCAke3NwYW5JZH1gO1xuICBkZWJ1Zy5sb2cobXNnKTtcbn1cbmV4cG9ydCB7IGxvZ1NwYW5FbmQsIGxvZ1NwYW5TdGFydCB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBoYXNTcGFuc0VuYWJsZWQgfSBmcm9tICcuLi91dGlscy9oYXNTcGFuc0VuYWJsZWQuanMnO1xuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgcGFyc2VTYW1wbGVSYXRlIH0gZnJvbSAnLi4vdXRpbHMvcGFyc2VTYW1wbGVSYXRlLmpzJztcblxuLyoqXG4gKiBNYWtlcyBhIHNhbXBsaW5nIGRlY2lzaW9uIGZvciB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAqXG4gKiBDYWxsZWQgZXZlcnkgdGltZSBhIHJvb3Qgc3BhbiBpcyBjcmVhdGVkLiBPbmx5IHJvb3Qgc3BhbnMgd2hpY2ggZW1lcmdlIHdpdGggYSBgc2FtcGxlZGAgdmFsdWUgb2YgYHRydWVgIHdpbGwgYmVcbiAqIHNlbnQgdG8gU2VudHJ5LlxuICovXG5mdW5jdGlvbiBzYW1wbGVTcGFuKG9wdGlvbnMsIHNhbXBsaW5nQ29udGV4dCwgc2FtcGxlUmFuZCkge1xuICAvLyBub3RoaW5nIHRvIGRvIGlmIHNwYW4gcmVjb3JkaW5nIGlzIG5vdCBlbmFibGVkXG4gIGlmICghaGFzU3BhbnNFbmFibGVkKG9wdGlvbnMpKSB7XG4gICAgcmV0dXJuIFtmYWxzZV07XG4gIH1cbiAgbGV0IGxvY2FsU2FtcGxlUmF0ZVdhc0FwcGxpZWQgPSB1bmRlZmluZWQ7XG5cbiAgLy8gd2Ugd291bGQgaGF2ZSBiYWlsZWQgYWxyZWFkeSBpZiBuZWl0aGVyIGB0cmFjZXNTYW1wbGVyYCBub3IgYHRyYWNlc1NhbXBsZVJhdGVgIHdlcmUgZGVmaW5lZCwgc28gb25lIG9mIHRoZXNlIHNob3VsZFxuICAvLyB3b3JrOyBwcmVmZXIgdGhlIGhvb2sgaWYgc29cbiAgbGV0IHNhbXBsZVJhdGU7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy50cmFjZXNTYW1wbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgc2FtcGxlUmF0ZSA9IG9wdGlvbnMudHJhY2VzU2FtcGxlcih7XG4gICAgICAuLi5zYW1wbGluZ0NvbnRleHQsXG4gICAgICBpbmhlcml0T3JTYW1wbGVXaXRoOiBmYWxsYmFja1NhbXBsZVJhdGUgPT4ge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGFuIGluY29taW5nIHBhcmVudCBzYW1wbGUgcmF0ZSwgd2UnbGwganVzdCB1c2UgdGhhdCBvbmUuXG4gICAgICAgIC8vIFRoZSBzYW1wbGluZyBkZWNpc2lvbiB3aWxsIGJlIGluaGVyaXRlZCBiZWNhdXNlIG9mIHRoZSBzYW1wbGVfcmFuZCB0aGF0IHdhcyBnZW5lcmF0ZWQgd2hlbiB0aGUgdHJhY2UgcmVhY2hlZCB0aGUgaW5jb21pbmcgYm91bmRhcmllcyBvZiB0aGUgU0RLLlxuICAgICAgICBpZiAodHlwZW9mIHNhbXBsaW5nQ29udGV4dC5wYXJlbnRTYW1wbGVSYXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHJldHVybiBzYW1wbGluZ0NvbnRleHQucGFyZW50U2FtcGxlUmF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZhbGxiYWNrIGlmIHBhcmVudCBzYW1wbGUgcmF0ZSBpcyBub3Qgb24gdGhlIGluY29taW5nIHRyYWNlIChlLmcuIGlmIHRoZXJlIGlzIG5vIGJhZ2dhZ2UpXG4gICAgICAgIC8vIFRoaXMgaXMgdG8gcHJvdmlkZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBpZiB0aGVyZSBhcmUgaW5jb21pbmcgdHJhY2VzIGZyb20gb2xkZXIgU0RLcyB0aGF0IGRvbid0IHNlbmQgYSBwYXJlbnQgc2FtcGxlIHJhdGUgb3IgYSBzYW1wbGUgcmFuZC4gSW4gdGhlc2UgY2FzZXMgd2UganVzdCB3YW50IHRvIGZvcmNlIGVpdGhlciBhIHNhbXBsaW5nIGRlY2lzaW9uIG9uIHRoZSBkb3duc3RyZWFtIHRyYWNlcyB2aWEgdGhlIHNhbXBsZSByYXRlLlxuICAgICAgICBpZiAodHlwZW9mIHNhbXBsaW5nQ29udGV4dC5wYXJlbnRTYW1wbGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICByZXR1cm4gTnVtYmVyKHNhbXBsaW5nQ29udGV4dC5wYXJlbnRTYW1wbGVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsbGJhY2tTYW1wbGVSYXRlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGxvY2FsU2FtcGxlUmF0ZVdhc0FwcGxpZWQgPSB0cnVlO1xuICB9IGVsc2UgaWYgKHNhbXBsaW5nQ29udGV4dC5wYXJlbnRTYW1wbGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICBzYW1wbGVSYXRlID0gc2FtcGxpbmdDb250ZXh0LnBhcmVudFNhbXBsZWQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMudHJhY2VzU2FtcGxlUmF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBzYW1wbGVSYXRlID0gb3B0aW9ucy50cmFjZXNTYW1wbGVSYXRlO1xuICAgIGxvY2FsU2FtcGxlUmF0ZVdhc0FwcGxpZWQgPSB0cnVlO1xuICB9XG5cbiAgLy8gU2luY2UgdGhpcyBpcyBjb21pbmcgZnJvbSB0aGUgdXNlciAob3IgZnJvbSBhIGZ1bmN0aW9uIHByb3ZpZGVkIGJ5IHRoZSB1c2VyKSwgd2hvIGtub3dzIHdoYXQgd2UgbWlnaHQgZ2V0LlxuICAvLyAoVGhlIG9ubHkgdmFsaWQgdmFsdWVzIGFyZSBib29sZWFucyBvciBudW1iZXJzIGJldHdlZW4gMCBhbmQgMS4pXG4gIGNvbnN0IHBhcnNlZFNhbXBsZVJhdGUgPSBwYXJzZVNhbXBsZVJhdGUoc2FtcGxlUmF0ZSk7XG4gIGlmIChwYXJzZWRTYW1wbGVSYXRlID09PSB1bmRlZmluZWQpIHtcbiAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy53YXJuKGBbVHJhY2luZ10gRGlzY2FyZGluZyByb290IHNwYW4gYmVjYXVzZSBvZiBpbnZhbGlkIHNhbXBsZSByYXRlLiBTYW1wbGUgcmF0ZSBtdXN0IGJlIGEgYm9vbGVhbiBvciBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEuIEdvdCAke0pTT04uc3RyaW5naWZ5KHNhbXBsZVJhdGUpfSBvZiB0eXBlICR7SlNPTi5zdHJpbmdpZnkodHlwZW9mIHNhbXBsZVJhdGUpfS5gKTtcbiAgICByZXR1cm4gW2ZhbHNlXTtcbiAgfVxuXG4gIC8vIGlmIHRoZSBmdW5jdGlvbiByZXR1cm5lZCAwIChvciBmYWxzZSksIG9yIGlmIGB0cmFjZXNTYW1wbGVSYXRlYCBpcyAwLCBpdCdzIGEgc2lnbiB0aGUgdHJhbnNhY3Rpb24gc2hvdWxkIGJlIGRyb3BwZWRcbiAgaWYgKCFwYXJzZWRTYW1wbGVSYXRlKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcubG9nKGBbVHJhY2luZ10gRGlzY2FyZGluZyB0cmFuc2FjdGlvbiBiZWNhdXNlICR7dHlwZW9mIG9wdGlvbnMudHJhY2VzU2FtcGxlciA9PT0gJ2Z1bmN0aW9uJyA/ICd0cmFjZXNTYW1wbGVyIHJldHVybmVkIDAgb3IgZmFsc2UnIDogJ2EgbmVnYXRpdmUgc2FtcGxpbmcgZGVjaXNpb24gd2FzIGluaGVyaXRlZCBvciB0cmFjZXNTYW1wbGVSYXRlIGlzIHNldCB0byAwJ31gKTtcbiAgICByZXR1cm4gW2ZhbHNlLCBwYXJzZWRTYW1wbGVSYXRlLCBsb2NhbFNhbXBsZVJhdGVXYXNBcHBsaWVkXTtcbiAgfVxuXG4gIC8vIFdlIGFsd2F5cyBjb21wYXJlIHRoZSBzYW1wbGUgcmFuZCBmb3IgdGhlIGN1cnJlbnQgZXhlY3V0aW9uIGNvbnRleHQgYWdhaW5zdCB0aGUgY2hvc2VuIHNhbXBsZSByYXRlLlxuICAvLyBSZWFkIG1vcmU6IGh0dHBzOi8vZGV2ZWxvcC5zZW50cnkuZGV2L3Nkay90ZWxlbWV0cnkvdHJhY2VzLyNwcm9wYWdhdGVkLXJhbmRvbS12YWx1ZVxuICBjb25zdCBzaG91bGRTYW1wbGUgPSBzYW1wbGVSYW5kIDwgcGFyc2VkU2FtcGxlUmF0ZTtcblxuICAvLyBpZiB3ZSdyZSBub3QgZ29pbmcgdG8ga2VlcCBpdCwgd2UncmUgZG9uZVxuICBpZiAoIXNob3VsZFNhbXBsZSkge1xuICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZyhgW1RyYWNpbmddIERpc2NhcmRpbmcgdHJhbnNhY3Rpb24gYmVjYXVzZSBpdCdzIG5vdCBpbmNsdWRlZCBpbiB0aGUgcmFuZG9tIHNhbXBsZSAoc2FtcGxpbmcgcmF0ZSA9ICR7TnVtYmVyKHNhbXBsZVJhdGUpfSlgKTtcbiAgfVxuICByZXR1cm4gW3Nob3VsZFNhbXBsZSwgcGFyc2VkU2FtcGxlUmF0ZSwgbG9jYWxTYW1wbGVSYXRlV2FzQXBwbGllZF07XG59XG5leHBvcnQgeyBzYW1wbGVTcGFuIH07XG4iLCJpbXBvcnQgeyBpc1Z1ZVZpZXdNb2RlbCwgaXNTeW50aGV0aWNFdmVudCB9IGZyb20gJy4vaXMuanMnO1xuaW1wb3J0IHsgY29udmVydFRvUGxhaW5PYmplY3QgfSBmcm9tICcuL29iamVjdC5qcyc7XG5pbXBvcnQgeyBnZXRGdW5jdGlvbk5hbWUgfSBmcm9tICcuL3N0YWNrdHJhY2UuanMnO1xuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IG5vcm1hbGl6ZXMgdGhlIGdpdmVuIG9iamVjdC5cbiAqXG4gKiAtIENyZWF0ZXMgYSBjb3B5IHRvIHByZXZlbnQgb3JpZ2luYWwgaW5wdXQgbXV0YXRpb25cbiAqIC0gU2tpcHMgbm9uLWVudW1lcmFibGUgcHJvcGVydGllc1xuICogLSBXaGVuIHN0cmluZ2lmeWluZywgY2FsbHMgYHRvSlNPTmAgaWYgaW1wbGVtZW50ZWRcbiAqIC0gUmVtb3ZlcyBjaXJjdWxhciByZWZlcmVuY2VzXG4gKiAtIFRyYW5zbGF0ZXMgbm9uLXNlcmlhbGl6YWJsZSB2YWx1ZXMgKGB1bmRlZmluZWRgL2BOYU5gL2Z1bmN0aW9ucykgdG8gc2VyaWFsaXphYmxlIGZvcm1hdFxuICogLSBUcmFuc2xhdGVzIGtub3duIGdsb2JhbCBvYmplY3RzL2NsYXNzZXMgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb25zXG4gKiAtIFRha2VzIGNhcmUgb2YgYEVycm9yYCBvYmplY3Qgc2VyaWFsaXphdGlvblxuICogLSBPcHRpb25hbGx5IGxpbWl0cyBkZXB0aCBvZiBmaW5hbCBvdXRwdXRcbiAqIC0gT3B0aW9uYWxseSBsaW1pdHMgbnVtYmVyIG9mIHByb3BlcnRpZXMvZWxlbWVudHMgaW5jbHVkZWQgaW4gYW55IHNpbmdsZSBvYmplY3QvYXJyYXlcbiAqXG4gKiBAcGFyYW0gaW5wdXQgVGhlIG9iamVjdCB0byBiZSBub3JtYWxpemVkLlxuICogQHBhcmFtIGRlcHRoIFRoZSBtYXggZGVwdGggdG8gd2hpY2ggdG8gbm9ybWFsaXplIHRoZSBvYmplY3QuIChBbnl0aGluZyBkZWVwZXIgc3RyaW5naWZpZWQgd2hvbGUuKVxuICogQHBhcmFtIG1heFByb3BlcnRpZXMgVGhlIG1heCBudW1iZXIgb2YgZWxlbWVudHMgb3IgcHJvcGVydGllcyB0byBiZSBpbmNsdWRlZCBpbiBhbnkgc2luZ2xlIGFycmF5IG9yXG4gKiBvYmplY3QgaW4gdGhlIG5vcm1hbGl6ZWQgb3V0cHV0LlxuICogQHJldHVybnMgQSBub3JtYWxpemVkIHZlcnNpb24gb2YgdGhlIG9iamVjdCwgb3IgYFwiKipub24tc2VyaWFsaXphYmxlKipcImAgaWYgYW55IGVycm9ycyBhcmUgdGhyb3duIGR1cmluZyBub3JtYWxpemF0aW9uLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gbm9ybWFsaXplKGlucHV0LCBkZXB0aCA9IDEwMCwgbWF4UHJvcGVydGllcyA9ICtJbmZpbml0eSkge1xuICB0cnkge1xuICAgIC8vIHNpbmNlIHdlJ3JlIGF0IHRoZSBvdXRlcm1vc3QgbGV2ZWwsIHdlIGRvbid0IHByb3ZpZGUgYSBrZXlcbiAgICByZXR1cm4gdmlzaXQoJycsIGlucHV0LCBkZXB0aCwgbWF4UHJvcGVydGllcyk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7XG4gICAgICBFUlJPUjogYCoqbm9uLXNlcmlhbGl6YWJsZSoqICgke2Vycn0pYFxuICAgIH07XG4gIH1cbn1cblxuLyoqIEpTRG9jICovXG5mdW5jdGlvbiBub3JtYWxpemVUb1NpemUoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxub2JqZWN0LFxuLy8gRGVmYXVsdCBOb2RlLmpzIFJFUEwgZGVwdGhcbmRlcHRoID0gMyxcbi8vIDEwMGtCLCBhcyAyMDBrQiBpcyBtYXggcGF5bG9hZCBzaXplLCBzbyBoYWxmIHNvdW5kcyByZWFzb25hYmxlXG5tYXhTaXplID0gMTAwICogMTAyNCkge1xuICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplKG9iamVjdCwgZGVwdGgpO1xuICBpZiAoanNvblNpemUobm9ybWFsaXplZCkgPiBtYXhTaXplKSB7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVRvU2l6ZShvYmplY3QsIGRlcHRoIC0gMSwgbWF4U2l6ZSk7XG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG5cbi8qKlxuICogVmlzaXRzIGEgbm9kZSB0byBwZXJmb3JtIG5vcm1hbGl6YXRpb24gb24gaXRcbiAqXG4gKiBAcGFyYW0ga2V5IFRoZSBrZXkgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gbm9kZVxuICogQHBhcmFtIHZhbHVlIFRoZSBub2RlIHRvIGJlIHZpc2l0ZWRcbiAqIEBwYXJhbSBkZXB0aCBPcHRpb25hbCBudW1iZXIgaW5kaWNhdGluZyB0aGUgbWF4aW11bSByZWN1cnNpb24gZGVwdGhcbiAqIEBwYXJhbSBtYXhQcm9wZXJ0aWVzIE9wdGlvbmFsIG1heGltdW0gbnVtYmVyIG9mIHByb3BlcnRpZXMvZWxlbWVudHMgaW5jbHVkZWQgaW4gYW55IHNpbmdsZSBvYmplY3QvYXJyYXlcbiAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIE1lbW8gY2xhc3MgaGFuZGxpbmcgZGVjeWNsaW5nXG4gKi9cbmZ1bmN0aW9uIHZpc2l0KGtleSwgdmFsdWUsIGRlcHRoID0gK0luZmluaXR5LCBtYXhQcm9wZXJ0aWVzID0gK0luZmluaXR5LCBtZW1vID0gbWVtb0J1aWxkZXIoKSkge1xuICBjb25zdCBbbWVtb2l6ZSwgdW5tZW1vaXplXSA9IG1lbW87XG5cbiAgLy8gR2V0IHRoZSBzaW1wbGUgY2FzZXMgb3V0IG9mIHRoZSB3YXkgZmlyc3RcbiAgaWYgKHZhbHVlID09IG51bGwgfHxcbiAgLy8gdGhpcyBtYXRjaGVzIG51bGwgYW5kIHVuZGVmaW5lZCAtPiBlcWVxIG5vdCBlcWVxZXFcbiAgWydib29sZWFuJywgJ3N0cmluZyddLmluY2x1ZGVzKHR5cGVvZiB2YWx1ZSkgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGNvbnN0IHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5VmFsdWUoa2V5LCB2YWx1ZSk7XG5cbiAgLy8gQW55dGhpbmcgd2UgY291bGQgcG90ZW50aWFsbHkgZGlnIGludG8gbW9yZSAob2JqZWN0cyBvciBhcnJheXMpIHdpbGwgaGF2ZSBjb21lIGJhY2sgYXMgYFwiW29iamVjdCBYWFhYXVwiYC5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIHdpbGwgaGF2ZSBhbHJlYWR5IGJlZW4gc2VyaWFsaXplZCwgc28gaWYgd2UgZG9uJ3Qgc2VlIHRoYXQgcGF0dGVybiwgd2UncmUgZG9uZS5cbiAgaWYgKCFzdHJpbmdpZmllZC5zdGFydHNXaXRoKCdbb2JqZWN0ICcpKSB7XG4gICAgcmV0dXJuIHN0cmluZ2lmaWVkO1xuICB9XG5cbiAgLy8gRnJvbSBoZXJlIG9uLCB3ZSBjYW4gYXNzZXJ0IHRoYXQgYHZhbHVlYCBpcyBlaXRoZXIgYW4gb2JqZWN0IG9yIGFuIGFycmF5LlxuXG4gIC8vIERvIG5vdCBub3JtYWxpemUgb2JqZWN0cyB0aGF0IHdlIGtub3cgaGF2ZSBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZC4gQXMgYSBnZW5lcmFsIHJ1bGUsIHRoZVxuICAvLyBcIl9fc2VudHJ5X3NraXBfbm9ybWFsaXphdGlvbl9fXCIgcHJvcGVydHkgc2hvdWxkIG9ubHkgYmUgdXNlZCBzcGFyaW5nbHkgYW5kIG9ubHkgc2hvdWxkIG9ubHkgYmUgc2V0IG9uIG9iamVjdHMgdGhhdFxuICAvLyBoYXZlIGFscmVhZHkgYmVlbiBub3JtYWxpemVkLlxuICBpZiAodmFsdWVbJ19fc2VudHJ5X3NraXBfbm9ybWFsaXphdGlvbl9fJ10pIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvLyBXZSBjYW4gc2V0IGBfX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX19gIG9uIGFuIG9iamVjdCB0byBlbnN1cmUgdGhhdCBmcm9tIHRoZXJlXG4gIC8vIFdlIGtlZXAgYSBjZXJ0YWluIGFtb3VudCBvZiBkZXB0aC5cbiAgLy8gVGhpcyBzaG91bGQgYmUgdXNlZCBzcGFyaW5nbHksIGUuZy4gd2UgdXNlIGl0IGZvciB0aGUgcmVkdXggaW50ZWdyYXRpb24gdG8gZW5zdXJlIHdlIGdldCBhIGNlcnRhaW4gYW1vdW50IG9mIHN0YXRlLlxuICBjb25zdCByZW1haW5pbmdEZXB0aCA9IHR5cGVvZiB2YWx1ZVsnX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fJ10gPT09ICdudW1iZXInID8gdmFsdWVbJ19fc2VudHJ5X292ZXJyaWRlX25vcm1hbGl6YXRpb25fZGVwdGhfXyddIDogZGVwdGg7XG5cbiAgLy8gV2UncmUgYWxzbyBkb25lIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIG1heCBkZXB0aFxuICBpZiAocmVtYWluaW5nRGVwdGggPT09IDApIHtcbiAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGtub3cgYHNlcmlhbGl6ZWRgIGlzIGEgc3RyaW5nIG9mIHRoZSBmb3JtIGBcIltvYmplY3QgWFhYWF1cImAuIENsZWFuIGl0IHVwIHNvIGl0J3MganVzdCBgXCJbWFhYWF1cImAuXG4gICAgcmV0dXJuIHN0cmluZ2lmaWVkLnJlcGxhY2UoJ29iamVjdCAnLCAnJyk7XG4gIH1cblxuICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHZpc2l0ZWQgdGhpcyBicmFuY2gsIGJhaWwgb3V0LCBhcyBpdCdzIGNpcmN1bGFyIHJlZmVyZW5jZS4gSWYgbm90LCBub3RlIHRoYXQgd2UncmUgc2VlaW5nIGl0IG5vdy5cbiAgaWYgKG1lbW9pemUodmFsdWUpKSB7XG4gICAgcmV0dXJuICdbQ2lyY3VsYXIgfl0nO1xuICB9XG5cbiAgLy8gSWYgdGhlIHZhbHVlIGhhcyBhIGB0b0pTT05gIG1ldGhvZCwgd2UgY2FsbCBpdCB0byBleHRyYWN0IG1vcmUgaW5mb3JtYXRpb25cbiAgY29uc3QgdmFsdWVXaXRoVG9KU09OID0gdmFsdWU7XG4gIGlmICh2YWx1ZVdpdGhUb0pTT04gJiYgdHlwZW9mIHZhbHVlV2l0aFRvSlNPTi50b0pTT04gPT09ICdmdW5jdGlvbicpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QganNvblZhbHVlID0gdmFsdWVXaXRoVG9KU09OLnRvSlNPTigpO1xuICAgICAgLy8gV2UgbmVlZCB0byBub3JtYWxpemUgdGhlIHJldHVybiB2YWx1ZSBvZiBgLnRvSlNPTigpYCBpbiBjYXNlIGl0IGhhcyBjaXJjdWxhciByZWZlcmVuY2VzXG4gICAgICByZXR1cm4gdmlzaXQoJycsIGpzb25WYWx1ZSwgcmVtYWluaW5nRGVwdGggLSAxLCBtYXhQcm9wZXJ0aWVzLCBtZW1vKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIHBhc3MgKFRoZSBidWlsdC1pbiBgdG9KU09OYCBmYWlsZWQsIGJ1dCB3ZSBjYW4gc3RpbGwgdHJ5IHRvIGRvIGl0IG91cnNlbHZlcylcbiAgICB9XG4gIH1cblxuICAvLyBBdCB0aGlzIHBvaW50IHdlIGtub3cgd2UgZWl0aGVyIGhhdmUgYW4gb2JqZWN0IG9yIGFuIGFycmF5LCB3ZSBoYXZlbid0IHNlZW4gaXQgYmVmb3JlLCBhbmQgd2UncmUgZ29pbmcgdG8gcmVjdXJzZVxuICAvLyBiZWNhdXNlIHdlIGhhdmVuJ3QgeWV0IHJlYWNoZWQgdGhlIG1heCBkZXB0aC4gQ3JlYXRlIGFuIGFjY3VtdWxhdG9yIHRvIGhvbGQgdGhlIHJlc3VsdHMgb2YgdmlzaXRpbmcgZWFjaFxuICAvLyBwcm9wZXJ0eS9lbnRyeSwgYW5kIGtlZXAgdHJhY2sgb2YgdGhlIG51bWJlciBvZiBpdGVtcyB3ZSBhZGQgdG8gaXQuXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/IFtdIDoge307XG4gIGxldCBudW1BZGRlZCA9IDA7XG5cbiAgLy8gQmVmb3JlIHdlIGJlZ2luLCBjb252ZXJ0YEVycm9yYCBhbmRgRXZlbnRgIGluc3RhbmNlcyBpbnRvIHBsYWluIG9iamVjdHMsIHNpbmNlIHNvbWUgb2YgZWFjaCBvZiB0aGVpciByZWxldmFudFxuICAvLyBwcm9wZXJ0aWVzIGFyZSBub24tZW51bWVyYWJsZSBhbmQgb3RoZXJ3aXNlIHdvdWxkIGdldCBtaXNzZWQuXG4gIGNvbnN0IHZpc2l0YWJsZSA9IGNvbnZlcnRUb1BsYWluT2JqZWN0KHZhbHVlKTtcbiAgZm9yIChjb25zdCB2aXNpdEtleSBpbiB2aXNpdGFibGUpIHtcbiAgICAvLyBBdm9pZCBpdGVyYXRpbmcgb3ZlciBmaWVsZHMgaW4gdGhlIHByb3RvdHlwZSBpZiB0aGV5J3ZlIHNvbWVob3cgYmVlbiBleHBvc2VkIHRvIGVudW1lcmF0aW9uLlxuICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZpc2l0YWJsZSwgdmlzaXRLZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKG51bUFkZGVkID49IG1heFByb3BlcnRpZXMpIHtcbiAgICAgIG5vcm1hbGl6ZWRbdmlzaXRLZXldID0gJ1tNYXhQcm9wZXJ0aWVzIH5dJztcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIFJlY3Vyc2l2ZWx5IHZpc2l0IGFsbCB0aGUgY2hpbGQgbm9kZXNcbiAgICBjb25zdCB2aXNpdFZhbHVlID0gdmlzaXRhYmxlW3Zpc2l0S2V5XTtcbiAgICBub3JtYWxpemVkW3Zpc2l0S2V5XSA9IHZpc2l0KHZpc2l0S2V5LCB2aXNpdFZhbHVlLCByZW1haW5pbmdEZXB0aCAtIDEsIG1heFByb3BlcnRpZXMsIG1lbW8pO1xuICAgIG51bUFkZGVkKys7XG4gIH1cblxuICAvLyBPbmNlIHdlJ3ZlIHZpc2l0ZWQgYWxsIHRoZSBicmFuY2hlcywgcmVtb3ZlIHRoZSBwYXJlbnQgZnJvbSBtZW1vIHN0b3JhZ2VcbiAgdW5tZW1vaXplKHZhbHVlKTtcblxuICAvLyBSZXR1cm4gYWNjdW11bGF0ZWQgdmFsdWVzXG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5ICovXG4vKipcbiAqIFN0cmluZ2lmeSB0aGUgZ2l2ZW4gdmFsdWUuIEhhbmRsZXMgdmFyaW91cyBrbm93biBzcGVjaWFsIHZhbHVlcyBhbmQgdHlwZXMuXG4gKlxuICogTm90IG1lYW50IHRvIGJlIHVzZWQgb24gc2ltcGxlIHByaW1pdGl2ZXMgd2hpY2ggYWxyZWFkeSBoYXZlIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLCBhcyBpdCB3aWxsLCBmb3IgZXhhbXBsZSwgdHVyblxuICogdGhlIG51bWJlciAxMjMxIGludG8gXCJbT2JqZWN0IE51bWJlcl1cIiwgbm9yIG9uIGBudWxsYCwgYXMgaXQgd2lsbCB0aHJvdy5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHN0cmluZ2lmeVxuICogQHJldHVybnMgQSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gdmFsdWVcbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5VmFsdWUoa2V5LFxuLy8gdGhpcyB0eXBlIGlzIGEgdGlueSBiaXQgb2YgYSBjaGVhdCwgc2luY2UgdGhpcyBmdW5jdGlvbiBkb2VzIGhhbmRsZSBOYU4gKHdoaWNoIGlzIHRlY2huaWNhbGx5IGEgbnVtYmVyKSwgYnV0IGZvclxuLy8gb3VyIGludGVybmFsIHVzZSwgaXQnbGwgZG9cbnZhbHVlKSB7XG4gIHRyeSB7XG4gICAgaWYgKGtleSA9PT0gJ2RvbWFpbicgJiYgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZS5fZXZlbnRzKSB7XG4gICAgICByZXR1cm4gJ1tEb21haW5dJztcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gJ2RvbWFpbkVtaXR0ZXInKSB7XG4gICAgICByZXR1cm4gJ1tEb21haW5FbWl0dGVyXSc7XG4gICAgfVxuXG4gICAgLy8gSXQncyBzYWZlIHRvIHVzZSBgZ2xvYmFsYCwgYHdpbmRvd2AsIGFuZCBgZG9jdW1lbnRgIGhlcmUgaW4gdGhpcyBtYW5uZXIsIGFzIHdlIGFyZSBhc3NlcnRpbmcgdXNpbmcgYHR5cGVvZmAgZmlyc3RcbiAgICAvLyB3aGljaCB3b24ndCB0aHJvdyBpZiB0aGV5IGFyZSBub3QgcHJlc2VudC5cblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gZ2xvYmFsKSB7XG4gICAgICByZXR1cm4gJ1tHbG9iYWxdJztcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlID09PSB3aW5kb3cpIHtcbiAgICAgIHJldHVybiAnW1dpbmRvd10nO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gZG9jdW1lbnQpIHtcbiAgICAgIHJldHVybiAnW0RvY3VtZW50XSc7XG4gICAgfVxuICAgIGlmIChpc1Z1ZVZpZXdNb2RlbCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiAnW1Z1ZVZpZXdNb2RlbF0nO1xuICAgIH1cblxuICAgIC8vIFJlYWN0J3MgU3ludGhldGljRXZlbnQgdGhpbmd5XG4gICAgaWYgKGlzU3ludGhldGljRXZlbnQodmFsdWUpKSB7XG4gICAgICByZXR1cm4gJ1tTeW50aGV0aWNFdmVudF0nO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGBbJHt2YWx1ZX1dYDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGBbRnVuY3Rpb246ICR7Z2V0RnVuY3Rpb25OYW1lKHZhbHVlKX1dYDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N5bWJvbCcpIHtcbiAgICAgIHJldHVybiBgWyR7U3RyaW5nKHZhbHVlKX1dYDtcbiAgICB9XG5cbiAgICAvLyBzdHJpbmdpZmllZCBCaWdJbnRzIGFyZSBpbmRpc3Rpbmd1aXNoYWJsZSBmcm9tIHJlZ3VsYXIgbnVtYmVycywgc28gd2UgbmVlZCB0byBsYWJlbCB0aGVtIHRvIGF2b2lkIGNvbmZ1c2lvblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdiaWdpbnQnKSB7XG4gICAgICByZXR1cm4gYFtCaWdJbnQ6ICR7U3RyaW5nKHZhbHVlKX1dYDtcbiAgICB9XG5cbiAgICAvLyBOb3cgdGhhdCB3ZSd2ZSBrbm9ja2VkIG91dCBhbGwgdGhlIHNwZWNpYWwgY2FzZXMgYW5kIHRoZSBwcmltaXRpdmVzLCBhbGwgd2UgaGF2ZSBsZWZ0IGFyZSBvYmplY3RzLiBTaW1wbHkgY2FzdGluZ1xuICAgIC8vIHRoZW0gdG8gc3RyaW5ncyBtZWFucyB0aGF0IGluc3RhbmNlcyBvZiBjbGFzc2VzIHdoaWNoIGhhdmVuJ3QgZGVmaW5lZCB0aGVpciBgdG9TdHJpbmdUYWdgIHdpbGwganVzdCBjb21lIG91dCBhc1xuICAgIC8vIGBcIltvYmplY3QgT2JqZWN0XVwiYC4gSWYgd2UgaW5zdGVhZCBsb29rIGF0IHRoZSBjb25zdHJ1Y3RvcidzIG5hbWUgKHdoaWNoIGlzIHRoZSBzYW1lIGFzIHRoZSBuYW1lIG9mIHRoZSBjbGFzcyksXG4gICAgLy8gd2UgY2FuIG1ha2Ugc3VyZSB0aGF0IG9ubHkgcGxhaW4gb2JqZWN0cyBjb21lIG91dCB0aGF0IHdheS5cbiAgICBjb25zdCBvYmpOYW1lID0gZ2V0Q29uc3RydWN0b3JOYW1lKHZhbHVlKTtcblxuICAgIC8vIEhhbmRsZSBIVE1MIEVsZW1lbnRzXG4gICAgaWYgKC9eSFRNTChcXHcqKUVsZW1lbnQkLy50ZXN0KG9iak5hbWUpKSB7XG4gICAgICByZXR1cm4gYFtIVE1MRWxlbWVudDogJHtvYmpOYW1lfV1gO1xuICAgIH1cbiAgICByZXR1cm4gYFtvYmplY3QgJHtvYmpOYW1lfV1gO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gYCoqbm9uLXNlcmlhbGl6YWJsZSoqICgke2Vycn0pYDtcbiAgfVxufVxuLyogZXNsaW50LWVuYWJsZSBjb21wbGV4aXR5ICovXG5cbmZ1bmN0aW9uIGdldENvbnN0cnVjdG9yTmFtZSh2YWx1ZSkge1xuICBjb25zdCBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICByZXR1cm4gcHJvdG90eXBlPy5jb25zdHJ1Y3RvciA/IHByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lIDogJ251bGwgcHJvdG90eXBlJztcbn1cblxuLyoqIENhbGN1bGF0ZXMgYnl0ZXMgc2l6ZSBvZiBpbnB1dCBzdHJpbmcgKi9cbmZ1bmN0aW9uIHV0ZjhMZW5ndGgodmFsdWUpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgcmV0dXJuIH4tZW5jb2RlVVJJKHZhbHVlKS5zcGxpdCgvJS4ufC4vKS5sZW5ndGg7XG59XG5cbi8qKiBDYWxjdWxhdGVzIGJ5dGVzIHNpemUgb2YgaW5wdXQgb2JqZWN0ICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24ganNvblNpemUodmFsdWUpIHtcbiAgcmV0dXJuIHV0ZjhMZW5ndGgoSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemVzIFVSTHMgaW4gZXhjZXB0aW9ucyBhbmQgc3RhY2t0cmFjZXMgdG8gYSBiYXNlIHBhdGggc28gU2VudHJ5IGNhbiBmaW5nZXJwcmludFxuICogYWNyb3NzIHBsYXRmb3JtcyBhbmQgd29ya2luZyBkaXJlY3RvcnkuXG4gKlxuICogQHBhcmFtIHVybCBUaGUgVVJMIHRvIGJlIG5vcm1hbGl6ZWQuXG4gKiBAcGFyYW0gYmFzZVBhdGggVGhlIGFwcGxpY2F0aW9uIGJhc2UgcGF0aC5cbiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIFVSTC5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplVXJsVG9CYXNlKHVybCwgYmFzZVBhdGgpIHtcbiAgY29uc3QgZXNjYXBlZEJhc2UgPSBiYXNlUGF0aFxuICAvLyBCYWNrc2xhc2ggdG8gZm9yd2FyZFxuICAucmVwbGFjZSgvXFxcXC9nLCAnLycpXG4gIC8vIEVzY2FwZSBSZWdFeHAgc3BlY2lhbCBjaGFyYWN0ZXJzXG4gIC5yZXBsYWNlKC9bfFxcXFx7fSgpW1xcXV4kKyo/Ll0vZywgJ1xcXFwkJicpO1xuICBsZXQgbmV3VXJsID0gdXJsO1xuICB0cnkge1xuICAgIG5ld1VybCA9IGRlY29kZVVSSSh1cmwpO1xuICB9IGNhdGNoIChfT28pIHtcbiAgICAvLyBTb21ldGltZSB0aGlzIGJyZWFrc1xuICB9XG4gIHJldHVybiBuZXdVcmwucmVwbGFjZSgvXFxcXC9nLCAnLycpLnJlcGxhY2UoL3dlYnBhY2s6XFwvPy9nLCAnJykgLy8gUmVtb3ZlIGludGVybWVkaWF0ZSBiYXNlIHBhdGhcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBzZW50cnktaW50ZXJuYWwvc2RrL25vLXJlZ2V4cC1jb25zdHJ1Y3RvclxuICAucmVwbGFjZShuZXcgUmVnRXhwKGAoZmlsZTovLyk/Lyoke2VzY2FwZWRCYXNlfS8qYCwgJ2lnJyksICdhcHA6Ly8vJyk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGRlY3ljbGUganNvbiBvYmplY3RzXG4gKi9cbmZ1bmN0aW9uIG1lbW9CdWlsZGVyKCkge1xuICBjb25zdCBpbm5lciA9IG5ldyBXZWFrU2V0KCk7XG4gIGZ1bmN0aW9uIG1lbW9pemUob2JqKSB7XG4gICAgaWYgKGlubmVyLmhhcyhvYmopKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaW5uZXIuYWRkKG9iaik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZ1bmN0aW9uIHVubWVtb2l6ZShvYmopIHtcbiAgICBpbm5lci5kZWxldGUob2JqKTtcbiAgfVxuICByZXR1cm4gW21lbW9pemUsIHVubWVtb2l6ZV07XG59XG5leHBvcnQgeyBub3JtYWxpemUsIG5vcm1hbGl6ZVRvU2l6ZSwgbm9ybWFsaXplVXJsVG9CYXNlIH07XG4iLCJpbXBvcnQgeyBnZXRTZW50cnlDYXJyaWVyIH0gZnJvbSAnLi4vY2Fycmllci5qcyc7XG5pbXBvcnQgeyBkc25Ub1N0cmluZyB9IGZyb20gJy4vZHNuLmpzJztcbmltcG9ydCB7IG5vcm1hbGl6ZSB9IGZyb20gJy4vbm9ybWFsaXplLmpzJztcbmltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICcuL3dvcmxkd2lkZS5qcyc7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBlbnZlbG9wZS5cbiAqIE1ha2Ugc3VyZSB0byBhbHdheXMgZXhwbGljaXRseSBwcm92aWRlIHRoZSBnZW5lcmljIHRvIHRoaXMgZnVuY3Rpb25cbiAqIHNvIHRoYXQgdGhlIGVudmVsb3BlIHR5cGVzIHJlc29sdmUgY29ycmVjdGx5LlxuICovXG5mdW5jdGlvbiBjcmVhdGVFbnZlbG9wZShoZWFkZXJzLCBpdGVtcyA9IFtdKSB7XG4gIHJldHVybiBbaGVhZGVycywgaXRlbXNdO1xufVxuXG4vKipcbiAqIEFkZCBhbiBpdGVtIHRvIGFuIGVudmVsb3BlLlxuICogTWFrZSBzdXJlIHRvIGFsd2F5cyBleHBsaWNpdGx5IHByb3ZpZGUgdGhlIGdlbmVyaWMgdG8gdGhpcyBmdW5jdGlvblxuICogc28gdGhhdCB0aGUgZW52ZWxvcGUgdHlwZXMgcmVzb2x2ZSBjb3JyZWN0bHkuXG4gKi9cbmZ1bmN0aW9uIGFkZEl0ZW1Ub0VudmVsb3BlKGVudmVsb3BlLCBuZXdJdGVtKSB7XG4gIGNvbnN0IFtoZWFkZXJzLCBpdGVtc10gPSBlbnZlbG9wZTtcbiAgcmV0dXJuIFtoZWFkZXJzLCBbLi4uaXRlbXMsIG5ld0l0ZW1dXTtcbn1cblxuLyoqXG4gKiBDb252ZW5pZW5jZSBmdW5jdGlvbiB0byBsb29wIHRocm91Z2ggdGhlIGl0ZW1zIGFuZCBpdGVtIHR5cGVzIG9mIGFuIGVudmVsb3BlLlxuICogKFRoaXMgZnVuY3Rpb24gd2FzIG1vc3RseSBjcmVhdGVkIGJlY2F1c2Ugd29ya2luZyB3aXRoIGVudmVsb3BlIHR5cGVzIGlzIHBhaW5mdWwgYXQgdGhlIG1vbWVudClcbiAqXG4gKiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVlLCB0aGUgcmVzdCBvZiB0aGUgaXRlbXMgd2lsbCBiZSBza2lwcGVkLlxuICovXG5mdW5jdGlvbiBmb3JFYWNoRW52ZWxvcGVJdGVtKGVudmVsb3BlLCBjYWxsYmFjaykge1xuICBjb25zdCBlbnZlbG9wZUl0ZW1zID0gZW52ZWxvcGVbMV07XG4gIGZvciAoY29uc3QgZW52ZWxvcGVJdGVtIG9mIGVudmVsb3BlSXRlbXMpIHtcbiAgICBjb25zdCBlbnZlbG9wZUl0ZW1UeXBlID0gZW52ZWxvcGVJdGVtWzBdLnR5cGU7XG4gICAgY29uc3QgcmVzdWx0ID0gY2FsbGJhY2soZW52ZWxvcGVJdGVtLCBlbnZlbG9wZUl0ZW1UeXBlKTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZW52ZWxvcGUgY29udGFpbnMgYW55IG9mIHRoZSBnaXZlbiBlbnZlbG9wZSBpdGVtIHR5cGVzXG4gKi9cbmZ1bmN0aW9uIGVudmVsb3BlQ29udGFpbnNJdGVtVHlwZShlbnZlbG9wZSwgdHlwZXMpIHtcbiAgcmV0dXJuIGZvckVhY2hFbnZlbG9wZUl0ZW0oZW52ZWxvcGUsIChfLCB0eXBlKSA9PiB0eXBlcy5pbmNsdWRlcyh0eXBlKSk7XG59XG5cbi8qKlxuICogRW5jb2RlIGEgc3RyaW5nIHRvIFVURjggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVURjgoaW5wdXQpIHtcbiAgY29uc3QgY2FycmllciA9IGdldFNlbnRyeUNhcnJpZXIoR0xPQkFMX09CSik7XG4gIHJldHVybiBjYXJyaWVyLmVuY29kZVBvbHlmaWxsID8gY2Fycmllci5lbmNvZGVQb2x5ZmlsbChpbnB1dCkgOiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoaW5wdXQpO1xufVxuXG4vKipcbiAqIERlY29kZSBhIFVURjggYXJyYXkgdG8gc3RyaW5nLlxuICovXG5mdW5jdGlvbiBkZWNvZGVVVEY4KGlucHV0KSB7XG4gIGNvbnN0IGNhcnJpZXIgPSBnZXRTZW50cnlDYXJyaWVyKEdMT0JBTF9PQkopO1xuICByZXR1cm4gY2Fycmllci5kZWNvZGVQb2x5ZmlsbCA/IGNhcnJpZXIuZGVjb2RlUG9seWZpbGwoaW5wdXQpIDogbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGlucHV0KTtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemVzIGFuIGVudmVsb3BlLlxuICovXG5mdW5jdGlvbiBzZXJpYWxpemVFbnZlbG9wZShlbnZlbG9wZSkge1xuICBjb25zdCBbZW52SGVhZGVycywgaXRlbXNdID0gZW52ZWxvcGU7XG4gIC8vIEluaXRpYWxseSB3ZSBjb25zdHJ1Y3Qgb3VyIGVudmVsb3BlIGFzIGEgc3RyaW5nIGFuZCBvbmx5IGNvbnZlcnQgdG8gYmluYXJ5IGNodW5rcyBpZiB3ZSBlbmNvdW50ZXIgYmluYXJ5IGRhdGFcbiAgbGV0IHBhcnRzID0gSlNPTi5zdHJpbmdpZnkoZW52SGVhZGVycyk7XG4gIGZ1bmN0aW9uIGFwcGVuZChuZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBwYXJ0cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHBhcnRzID0gdHlwZW9mIG5leHQgPT09ICdzdHJpbmcnID8gcGFydHMgKyBuZXh0IDogW2VuY29kZVVURjgocGFydHMpLCBuZXh0XTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydHMucHVzaCh0eXBlb2YgbmV4dCA9PT0gJ3N0cmluZycgPyBlbmNvZGVVVEY4KG5leHQpIDogbmV4dCk7XG4gICAgfVxuICB9XG4gIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgIGNvbnN0IFtpdGVtSGVhZGVycywgcGF5bG9hZF0gPSBpdGVtO1xuICAgIGFwcGVuZChgXFxuJHtKU09OLnN0cmluZ2lmeShpdGVtSGVhZGVycyl9XFxuYCk7XG4gICAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSAnc3RyaW5nJyB8fCBwYXlsb2FkIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgYXBwZW5kKHBheWxvYWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc3RyaW5naWZpZWRQYXlsb2FkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RyaW5naWZpZWRQYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEluIGNhc2UsIGRlc3BpdGUgYWxsIG91ciBlZmZvcnRzIHRvIGtlZXAgYHBheWxvYWRgIGNpcmN1bGFyLWRlcGVuZGVuY3ktZnJlZSwgYEpTT04uc3RyaW5naWZ5KClgIHN0aWxsXG4gICAgICAgIC8vIGZhaWxzLCB3ZSB0cnkgYWdhaW4gYWZ0ZXIgbm9ybWFsaXppbmcgaXQgYWdhaW4gd2l0aCBpbmZpbml0ZSBub3JtYWxpemF0aW9uIGRlcHRoLiBUaGlzIG9mIGNvdXJzZSBoYXMgYVxuICAgICAgICAvLyBwZXJmb3JtYW5jZSBpbXBhY3QgYnV0IGluIHRoaXMgY2FzZSBhIHBlcmZvcm1hbmNlIGhpdCBpcyBiZXR0ZXIgdGhhbiB0aHJvd2luZy5cbiAgICAgICAgc3RyaW5naWZpZWRQYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkobm9ybWFsaXplKHBheWxvYWQpKTtcbiAgICAgIH1cbiAgICAgIGFwcGVuZChzdHJpbmdpZmllZFBheWxvYWQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHlwZW9mIHBhcnRzID09PSAnc3RyaW5nJyA/IHBhcnRzIDogY29uY2F0QnVmZmVycyhwYXJ0cyk7XG59XG5mdW5jdGlvbiBjb25jYXRCdWZmZXJzKGJ1ZmZlcnMpIHtcbiAgY29uc3QgdG90YWxMZW5ndGggPSBidWZmZXJzLnJlZHVjZSgoYWNjLCBidWYpID0+IGFjYyArIGJ1Zi5sZW5ndGgsIDApO1xuICBjb25zdCBtZXJnZWQgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7XG4gIGxldCBvZmZzZXQgPSAwO1xuICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7XG4gICAgbWVyZ2VkLnNldChidWZmZXIsIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IGJ1ZmZlci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIG1lcmdlZDtcbn1cblxuLyoqXG4gKiBQYXJzZXMgYW4gZW52ZWxvcGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VFbnZlbG9wZShlbnYpIHtcbiAgbGV0IGJ1ZmZlciA9IHR5cGVvZiBlbnYgPT09ICdzdHJpbmcnID8gZW5jb2RlVVRGOChlbnYpIDogZW52O1xuICBmdW5jdGlvbiByZWFkQmluYXJ5KGxlbmd0aCkge1xuICAgIGNvbnN0IGJpbiA9IGJ1ZmZlci5zdWJhcnJheSgwLCBsZW5ndGgpO1xuICAgIC8vIFJlcGxhY2UgdGhlIGJ1ZmZlciB3aXRoIHRoZSByZW1haW5pbmcgZGF0YSBleGNsdWRpbmcgdHJhaWxpbmcgbmV3bGluZVxuICAgIGJ1ZmZlciA9IGJ1ZmZlci5zdWJhcnJheShsZW5ndGggKyAxKTtcbiAgICByZXR1cm4gYmluO1xuICB9XG4gIGZ1bmN0aW9uIHJlYWRKc29uKCkge1xuICAgIGxldCBpID0gYnVmZmVyLmluZGV4T2YoMHhhKTtcbiAgICAvLyBJZiB3ZSBjb3VsZG4ndCBmaW5kIGEgbmV3bGluZSwgd2UgbXVzdCBoYXZlIGZvdW5kIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICAgIGlmIChpIDwgMCkge1xuICAgICAgaSA9IGJ1ZmZlci5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGRlY29kZVVURjgocmVhZEJpbmFyeShpKSkpO1xuICB9XG4gIGNvbnN0IGVudmVsb3BlSGVhZGVyID0gcmVhZEpzb24oKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgY29uc3QgaXRlbXMgPSBbXTtcbiAgd2hpbGUgKGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBjb25zdCBpdGVtSGVhZGVyID0gcmVhZEpzb24oKTtcbiAgICBjb25zdCBiaW5hcnlMZW5ndGggPSB0eXBlb2YgaXRlbUhlYWRlci5sZW5ndGggPT09ICdudW1iZXInID8gaXRlbUhlYWRlci5sZW5ndGggOiB1bmRlZmluZWQ7XG4gICAgaXRlbXMucHVzaChbaXRlbUhlYWRlciwgYmluYXJ5TGVuZ3RoID8gcmVhZEJpbmFyeShiaW5hcnlMZW5ndGgpIDogcmVhZEpzb24oKV0pO1xuICB9XG4gIHJldHVybiBbZW52ZWxvcGVIZWFkZXIsIGl0ZW1zXTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGVudmVsb3BlIGl0ZW0gZm9yIGEgc2luZ2xlIHNwYW5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3BhbkVudmVsb3BlSXRlbShzcGFuSnNvbikge1xuICBjb25zdCBzcGFuSGVhZGVycyA9IHtcbiAgICB0eXBlOiAnc3BhbidcbiAgfTtcbiAgcmV0dXJuIFtzcGFuSGVhZGVycywgc3Bhbkpzb25dO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYXR0YWNobWVudCBlbnZlbG9wZSBpdGVtc1xuICovXG5mdW5jdGlvbiBjcmVhdGVBdHRhY2htZW50RW52ZWxvcGVJdGVtKGF0dGFjaG1lbnQpIHtcbiAgY29uc3QgYnVmZmVyID0gdHlwZW9mIGF0dGFjaG1lbnQuZGF0YSA9PT0gJ3N0cmluZycgPyBlbmNvZGVVVEY4KGF0dGFjaG1lbnQuZGF0YSkgOiBhdHRhY2htZW50LmRhdGE7XG4gIHJldHVybiBbe1xuICAgIHR5cGU6ICdhdHRhY2htZW50JyxcbiAgICBsZW5ndGg6IGJ1ZmZlci5sZW5ndGgsXG4gICAgZmlsZW5hbWU6IGF0dGFjaG1lbnQuZmlsZW5hbWUsXG4gICAgY29udGVudF90eXBlOiBhdHRhY2htZW50LmNvbnRlbnRUeXBlLFxuICAgIGF0dGFjaG1lbnRfdHlwZTogYXR0YWNobWVudC5hdHRhY2htZW50VHlwZVxuICB9LCBidWZmZXJdO1xufVxuY29uc3QgSVRFTV9UWVBFX1RPX0RBVEFfQ0FURUdPUllfTUFQID0ge1xuICBzZXNzaW9uOiAnc2Vzc2lvbicsXG4gIHNlc3Npb25zOiAnc2Vzc2lvbicsXG4gIGF0dGFjaG1lbnQ6ICdhdHRhY2htZW50JyxcbiAgdHJhbnNhY3Rpb246ICd0cmFuc2FjdGlvbicsXG4gIGV2ZW50OiAnZXJyb3InLFxuICBjbGllbnRfcmVwb3J0OiAnaW50ZXJuYWwnLFxuICB1c2VyX3JlcG9ydDogJ2RlZmF1bHQnLFxuICBwcm9maWxlOiAncHJvZmlsZScsXG4gIHByb2ZpbGVfY2h1bms6ICdwcm9maWxlJyxcbiAgcmVwbGF5X2V2ZW50OiAncmVwbGF5JyxcbiAgcmVwbGF5X3JlY29yZGluZzogJ3JlcGxheScsXG4gIGNoZWNrX2luOiAnbW9uaXRvcicsXG4gIGZlZWRiYWNrOiAnZmVlZGJhY2snLFxuICBzcGFuOiAnc3BhbicsXG4gIHJhd19zZWN1cml0eTogJ3NlY3VyaXR5JyxcbiAgbG9nOiAnbG9nX2l0ZW0nXG59O1xuXG4vKipcbiAqIE1hcHMgdGhlIHR5cGUgb2YgYW4gZW52ZWxvcGUgaXRlbSB0byBhIGRhdGEgY2F0ZWdvcnkuXG4gKi9cbmZ1bmN0aW9uIGVudmVsb3BlSXRlbVR5cGVUb0RhdGFDYXRlZ29yeSh0eXBlKSB7XG4gIHJldHVybiBJVEVNX1RZUEVfVE9fREFUQV9DQVRFR09SWV9NQVBbdHlwZV07XG59XG5cbi8qKiBFeHRyYWN0cyB0aGUgbWluaW1hbCBTREsgaW5mbyBmcm9tIHRoZSBtZXRhZGF0YSBvciBhbiBldmVudHMgKi9cbmZ1bmN0aW9uIGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIobWV0YWRhdGFPckV2ZW50KSB7XG4gIGlmICghbWV0YWRhdGFPckV2ZW50Py5zZGspIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qge1xuICAgIG5hbWUsXG4gICAgdmVyc2lvblxuICB9ID0gbWV0YWRhdGFPckV2ZW50LnNkaztcbiAgcmV0dXJuIHtcbiAgICBuYW1lLFxuICAgIHZlcnNpb25cbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGV2ZW50IGVudmVsb3BlIGhlYWRlcnMsIGJhc2VkIG9uIGV2ZW50LCBzZGsgaW5mbyBhbmQgdHVubmVsXG4gKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIHdhcyBleHRyYWN0ZWQgZnJvbSB0aGUgY29yZSBwYWNrYWdlIHRvIG1ha2UgaXQgYXZhaWxhYmxlIGluIFJlcGxheVxuICovXG5mdW5jdGlvbiBjcmVhdGVFdmVudEVudmVsb3BlSGVhZGVycyhldmVudCwgc2RrSW5mbywgdHVubmVsLCBkc24pIHtcbiAgY29uc3QgZHluYW1pY1NhbXBsaW5nQ29udGV4dCA9IGV2ZW50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YT8uZHluYW1pY1NhbXBsaW5nQ29udGV4dDtcbiAgcmV0dXJuIHtcbiAgICBldmVudF9pZDogZXZlbnQuZXZlbnRfaWQsXG4gICAgc2VudF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIC4uLihzZGtJbmZvICYmIHtcbiAgICAgIHNkazogc2RrSW5mb1xuICAgIH0pLFxuICAgIC4uLighIXR1bm5lbCAmJiBkc24gJiYge1xuICAgICAgZHNuOiBkc25Ub1N0cmluZyhkc24pXG4gICAgfSksXG4gICAgLi4uKGR5bmFtaWNTYW1wbGluZ0NvbnRleHQgJiYge1xuICAgICAgdHJhY2U6IGR5bmFtaWNTYW1wbGluZ0NvbnRleHRcbiAgICB9KVxuICB9O1xufVxuZXhwb3J0IHsgYWRkSXRlbVRvRW52ZWxvcGUsIGNyZWF0ZUF0dGFjaG1lbnRFbnZlbG9wZUl0ZW0sIGNyZWF0ZUVudmVsb3BlLCBjcmVhdGVFdmVudEVudmVsb3BlSGVhZGVycywgY3JlYXRlU3BhbkVudmVsb3BlSXRlbSwgZW52ZWxvcGVDb250YWluc0l0ZW1UeXBlLCBlbnZlbG9wZUl0ZW1UeXBlVG9EYXRhQ2F0ZWdvcnksIGZvckVhY2hFbnZlbG9wZUl0ZW0sIGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIsIHBhcnNlRW52ZWxvcGUsIHNlcmlhbGl6ZUVudmVsb3BlIH07XG4iLCJpbXBvcnQgeyBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4gfSBmcm9tICcuL3RyYWNpbmcvZHluYW1pY1NhbXBsaW5nQ29udGV4dC5qcyc7XG5pbXBvcnQgeyBkc25Ub1N0cmluZyB9IGZyb20gJy4vdXRpbHMvZHNuLmpzJztcbmltcG9ydCB7IGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIsIGNyZWF0ZUV2ZW50RW52ZWxvcGVIZWFkZXJzLCBjcmVhdGVFbnZlbG9wZSwgY3JlYXRlU3BhbkVudmVsb3BlSXRlbSB9IGZyb20gJy4vdXRpbHMvZW52ZWxvcGUuanMnO1xuaW1wb3J0ICcuL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IHNwYW5Ub0pTT04sIHNob3dTcGFuRHJvcFdhcm5pbmcgfSBmcm9tICcuL3V0aWxzL3NwYW5VdGlscy5qcyc7XG5cbi8qKlxuICogQXBwbHkgU2RrSW5mbyAobmFtZSwgdmVyc2lvbiwgcGFja2FnZXMsIGludGVncmF0aW9ucykgdG8gdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQga2V5LlxuICogTWVyZ2Ugd2l0aCBleGlzdGluZyBkYXRhIGlmIGFueS5cbiAqKi9cbmZ1bmN0aW9uIGVuaGFuY2VFdmVudFdpdGhTZGtJbmZvKGV2ZW50LCBzZGtJbmZvKSB7XG4gIGlmICghc2RrSW5mbykge1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuICBldmVudC5zZGsgPSBldmVudC5zZGsgfHwge307XG4gIGV2ZW50LnNkay5uYW1lID0gZXZlbnQuc2RrLm5hbWUgfHwgc2RrSW5mby5uYW1lO1xuICBldmVudC5zZGsudmVyc2lvbiA9IGV2ZW50LnNkay52ZXJzaW9uIHx8IHNka0luZm8udmVyc2lvbjtcbiAgZXZlbnQuc2RrLmludGVncmF0aW9ucyA9IFsuLi4oZXZlbnQuc2RrLmludGVncmF0aW9ucyB8fCBbXSksIC4uLihzZGtJbmZvLmludGVncmF0aW9ucyB8fCBbXSldO1xuICBldmVudC5zZGsucGFja2FnZXMgPSBbLi4uKGV2ZW50LnNkay5wYWNrYWdlcyB8fCBbXSksIC4uLihzZGtJbmZvLnBhY2thZ2VzIHx8IFtdKV07XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqIENyZWF0ZXMgYW4gZW52ZWxvcGUgZnJvbSBhIFNlc3Npb24gKi9cbmZ1bmN0aW9uIGNyZWF0ZVNlc3Npb25FbnZlbG9wZShzZXNzaW9uLCBkc24sIG1ldGFkYXRhLCB0dW5uZWwpIHtcbiAgY29uc3Qgc2RrSW5mbyA9IGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIobWV0YWRhdGEpO1xuICBjb25zdCBlbnZlbG9wZUhlYWRlcnMgPSB7XG4gICAgc2VudF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIC4uLihzZGtJbmZvICYmIHtcbiAgICAgIHNkazogc2RrSW5mb1xuICAgIH0pLFxuICAgIC4uLighIXR1bm5lbCAmJiBkc24gJiYge1xuICAgICAgZHNuOiBkc25Ub1N0cmluZyhkc24pXG4gICAgfSlcbiAgfTtcbiAgY29uc3QgZW52ZWxvcGVJdGVtID0gJ2FnZ3JlZ2F0ZXMnIGluIHNlc3Npb24gPyBbe1xuICAgIHR5cGU6ICdzZXNzaW9ucydcbiAgfSwgc2Vzc2lvbl0gOiBbe1xuICAgIHR5cGU6ICdzZXNzaW9uJ1xuICB9LCBzZXNzaW9uLnRvSlNPTigpXTtcbiAgcmV0dXJuIGNyZWF0ZUVudmVsb3BlKGVudmVsb3BlSGVhZGVycywgW2VudmVsb3BlSXRlbV0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBFbnZlbG9wZSBmcm9tIGFuIGV2ZW50LlxuICovXG5mdW5jdGlvbiBjcmVhdGVFdmVudEVudmVsb3BlKGV2ZW50LCBkc24sIG1ldGFkYXRhLCB0dW5uZWwpIHtcbiAgY29uc3Qgc2RrSW5mbyA9IGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIobWV0YWRhdGEpO1xuXG4gIC8qXG4gICAgTm90ZTogRHVlIHRvIFRTLCBldmVudC50eXBlIG1heSBiZSBgcmVwbGF5X2V2ZW50YCwgdGhlb3JldGljYWxseS5cbiAgICBJbiBwcmFjdGljZSwgd2UgbmV2ZXIgY2FsbCBgY3JlYXRlRXZlbnRFbnZlbG9wZWAgd2l0aCBgcmVwbGF5X2V2ZW50YCB0eXBlLFxuICAgIGFuZCB3ZSdkIGhhdmUgdG8gYWRqdXN0IGEgbG9vb3Qgb2YgdHlwZXMgdG8gbWFrZSB0aGlzIHdvcmsgcHJvcGVybHkuXG4gICAgV2Ugd2FudCB0byBhdm9pZCBjYXN0aW5nIHRoaXMgYXJvdW5kLCBhcyB0aGF0IGNvdWxkIGxlYWQgdG8gYnVncyAoZS5nLiB3aGVuIHdlIGFkZCBhbm90aGVyIHR5cGUpXG4gICAgU28gdGhlIHNhZmUgY2hvaWNlIGlzIHRvIHJlYWxseSBndWFyZCBhZ2FpbnN0IHRoZSByZXBsYXlfZXZlbnQgdHlwZSBoZXJlLlxuICAqL1xuICBjb25zdCBldmVudFR5cGUgPSBldmVudC50eXBlICYmIGV2ZW50LnR5cGUgIT09ICdyZXBsYXlfZXZlbnQnID8gZXZlbnQudHlwZSA6ICdldmVudCc7XG4gIGVuaGFuY2VFdmVudFdpdGhTZGtJbmZvKGV2ZW50LCBtZXRhZGF0YT8uc2RrKTtcbiAgY29uc3QgZW52ZWxvcGVIZWFkZXJzID0gY3JlYXRlRXZlbnRFbnZlbG9wZUhlYWRlcnMoZXZlbnQsIHNka0luZm8sIHR1bm5lbCwgZHNuKTtcblxuICAvLyBQcmV2ZW50IHRoaXMgZGF0YSAod2hpY2gsIGlmIGl0IGV4aXN0cywgd2FzIHVzZWQgaW4gZWFybGllciBzdGVwcyBpbiB0aGUgcHJvY2Vzc2luZyBwaXBlbGluZSkgZnJvbSBiZWluZyBzZW50IHRvXG4gIC8vIHNlbnRyeS4gKE5vdGU6IE91ciB1c2Ugb2YgdGhpcyBwcm9wZXJ0eSBjb21lcyBhbmQgZ29lcyB3aXRoIHdoYXRldmVyIHdlIG1pZ2h0IGJlIGRlYnVnZ2luZywgd2hhdGV2ZXIgaGFja3Mgd2UgbWF5XG4gIC8vIGhhdmUgdGVtcG9yYXJpbHkgYWRkZWQsIGV0Yy4gRXZlbiBpZiB3ZSBkb24ndCBoYXBwZW4gdG8gYmUgdXNpbmcgaXQgYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLCBsZXQncyBub3QgZ2V0IHJpZFxuICAvLyBvZiB0aGlzIGBkZWxldGVgLCBsZXN0IHdlIG1pc3MgcHV0dGluZyBpdCBiYWNrIGluIHRoZSBuZXh0IHRpbWUgdGhlIHByb3BlcnR5IGlzIGluIHVzZS4pXG4gIGRlbGV0ZSBldmVudC5zZGtQcm9jZXNzaW5nTWV0YWRhdGE7XG4gIGNvbnN0IGV2ZW50SXRlbSA9IFt7XG4gICAgdHlwZTogZXZlbnRUeXBlXG4gIH0sIGV2ZW50XTtcbiAgcmV0dXJuIGNyZWF0ZUVudmVsb3BlKGVudmVsb3BlSGVhZGVycywgW2V2ZW50SXRlbV0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSBlbnZlbG9wZSBmcm9tIFNwYW4gaXRlbS5cbiAqXG4gKiBUYWtlcyBhbiBvcHRpb25hbCBjbGllbnQgYW5kIHJ1bnMgc3BhbnMgdGhyb3VnaCBgYmVmb3JlU2VuZFNwYW5gIGlmIGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3BhbkVudmVsb3BlKHNwYW5zLCBjbGllbnQpIHtcbiAgZnVuY3Rpb24gZHNjSGFzUmVxdWlyZWRQcm9wcyhkc2MpIHtcbiAgICByZXR1cm4gISFkc2MudHJhY2VfaWQgJiYgISFkc2MucHVibGljX2tleTtcbiAgfVxuXG4gIC8vIEZvciB0aGUgbW9tZW50IHdlJ2xsIG9idGFpbiB0aGUgRFNDIGZyb20gdGhlIGZpcnN0IHNwYW4gaW4gdGhlIGFycmF5XG4gIC8vIFRoaXMgbWlnaHQgbmVlZCB0byBiZSBjaGFuZ2VkIGlmIHdlIHBlcm1pdCBzZW5kaW5nIG11bHRpcGxlIHNwYW5zIGZyb21cbiAgLy8gZGlmZmVyZW50IHNlZ21lbnRzIGluIG9uZSBlbnZlbG9wZVxuICBjb25zdCBkc2MgPSBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4oc3BhbnNbMF0pO1xuICBjb25zdCBkc24gPSBjbGllbnQ/LmdldERzbigpO1xuICBjb25zdCB0dW5uZWwgPSBjbGllbnQ/LmdldE9wdGlvbnMoKS50dW5uZWw7XG4gIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgc2VudF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIC4uLihkc2NIYXNSZXF1aXJlZFByb3BzKGRzYykgJiYge1xuICAgICAgdHJhY2U6IGRzY1xuICAgIH0pLFxuICAgIC4uLighIXR1bm5lbCAmJiBkc24gJiYge1xuICAgICAgZHNuOiBkc25Ub1N0cmluZyhkc24pXG4gICAgfSlcbiAgfTtcbiAgY29uc3QgYmVmb3JlU2VuZFNwYW4gPSBjbGllbnQ/LmdldE9wdGlvbnMoKS5iZWZvcmVTZW5kU3BhbjtcbiAgY29uc3QgY29udmVydFRvU3BhbkpTT04gPSBiZWZvcmVTZW5kU3BhbiA/IHNwYW4gPT4ge1xuICAgIGNvbnN0IHNwYW5Kc29uID0gc3BhblRvSlNPTihzcGFuKTtcbiAgICBjb25zdCBwcm9jZXNzZWRTcGFuID0gYmVmb3JlU2VuZFNwYW4oc3Bhbkpzb24pO1xuICAgIGlmICghcHJvY2Vzc2VkU3Bhbikge1xuICAgICAgc2hvd1NwYW5Ecm9wV2FybmluZygpO1xuICAgICAgcmV0dXJuIHNwYW5Kc29uO1xuICAgIH1cbiAgICByZXR1cm4gcHJvY2Vzc2VkU3BhbjtcbiAgfSA6IHNwYW5Ub0pTT047XG4gIGNvbnN0IGl0ZW1zID0gW107XG4gIGZvciAoY29uc3Qgc3BhbiBvZiBzcGFucykge1xuICAgIGNvbnN0IHNwYW5Kc29uID0gY29udmVydFRvU3BhbkpTT04oc3Bhbik7XG4gICAgaWYgKHNwYW5Kc29uKSB7XG4gICAgICBpdGVtcy5wdXNoKGNyZWF0ZVNwYW5FbnZlbG9wZUl0ZW0oc3Bhbkpzb24pKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUVudmVsb3BlKGhlYWRlcnMsIGl0ZW1zKTtcbn1cbmV4cG9ydCB7IGNyZWF0ZUV2ZW50RW52ZWxvcGUsIGNyZWF0ZVNlc3Npb25FbnZlbG9wZSwgY3JlYXRlU3BhbkVudmVsb3BlIH07XG4iLCJpbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4uL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfTUVBU1VSRU1FTlRfVU5JVCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9NRUFTVVJFTUVOVF9WQUxVRSB9IGZyb20gJy4uL3NlbWFudGljQXR0cmlidXRlcy5qcyc7XG5pbXBvcnQgeyBkZWJ1ZyB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmVTcGFuLCBnZXRSb290U3BhbiB9IGZyb20gJy4uL3V0aWxzL3NwYW5VdGlscy5qcyc7XG5cbi8qKlxuICogQWRkcyBhIG1lYXN1cmVtZW50IHRvIHRoZSBhY3RpdmUgdHJhbnNhY3Rpb24gb24gdGhlIGN1cnJlbnQgZ2xvYmFsIHNjb3BlLiBZb3UgY2FuIG9wdGlvbmFsbHkgcGFzcyBpbiBhIGRpZmZlcmVudCBzcGFuXG4gKiBhcyB0aGUgNHRoIHBhcmFtZXRlci5cbiAqL1xuZnVuY3Rpb24gc2V0TWVhc3VyZW1lbnQobmFtZSwgdmFsdWUsIHVuaXQsIGFjdGl2ZVNwYW4gPSBnZXRBY3RpdmVTcGFuKCkpIHtcbiAgY29uc3Qgcm9vdFNwYW4gPSBhY3RpdmVTcGFuICYmIGdldFJvb3RTcGFuKGFjdGl2ZVNwYW4pO1xuICBpZiAocm9vdFNwYW4pIHtcbiAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy5sb2coYFtNZWFzdXJlbWVudF0gU2V0dGluZyBtZWFzdXJlbWVudCBvbiByb290IHNwYW46ICR7bmFtZX0gPSAke3ZhbHVlfSAke3VuaXR9YCk7XG4gICAgcm9vdFNwYW4uYWRkRXZlbnQobmFtZSwge1xuICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfTUVBU1VSRU1FTlRfVkFMVUVdOiB2YWx1ZSxcbiAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1VOSVRdOiB1bml0XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0IHRpbWVkIGV2ZW50cyB0byBtZWFzdXJlbWVudHMuXG4gKi9cbmZ1bmN0aW9uIHRpbWVkRXZlbnRzVG9NZWFzdXJlbWVudHMoZXZlbnRzKSB7XG4gIGlmICghZXZlbnRzIHx8IGV2ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGNvbnN0IG1lYXN1cmVtZW50cyA9IHt9O1xuICBldmVudHMuZm9yRWFjaChldmVudCA9PiB7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IGV2ZW50LmF0dHJpYnV0ZXMgfHwge307XG4gICAgY29uc3QgdW5pdCA9IGF0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9NRUFTVVJFTUVOVF9VTklUXTtcbiAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9NRUFTVVJFTUVOVF9WQUxVRV07XG4gICAgaWYgKHR5cGVvZiB1bml0ID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICBtZWFzdXJlbWVudHNbZXZlbnQubmFtZV0gPSB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB1bml0XG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBtZWFzdXJlbWVudHM7XG59XG5leHBvcnQgeyBzZXRNZWFzdXJlbWVudCwgdGltZWRFdmVudHNUb01lYXN1cmVtZW50cyB9O1xuIiwiaW1wb3J0IHsgZ2V0Q2xpZW50LCBnZXRDdXJyZW50U2NvcGUgfSBmcm9tICcuLi9jdXJyZW50U2NvcGVzLmpzJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgY3JlYXRlU3BhbkVudmVsb3BlIH0gZnJvbSAnLi4vZW52ZWxvcGUuanMnO1xuaW1wb3J0IHsgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU4sIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFLCBTRU1BTlRJQ19BVFRSSUJVVEVfRVhDTFVTSVZFX1RJTUUsIFNFTUFOVElDX0FUVFJJQlVURV9QUk9GSUxFX0lELCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX0NVU1RPTV9TUEFOX05BTUUgfSBmcm9tICcuLi9zZW1hbnRpY0F0dHJpYnV0ZXMuanMnO1xuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkLCBnZW5lcmF0ZVNwYW5JZCB9IGZyb20gJy4uL3V0aWxzL3Byb3BhZ2F0aW9uQ29udGV4dC5qcyc7XG5pbXBvcnQgeyBUUkFDRV9GTEFHX1NBTVBMRUQsIFRSQUNFX0ZMQUdfTk9ORSwgc3BhblRpbWVJbnB1dFRvU2Vjb25kcywgY29udmVydFNwYW5MaW5rc0ZvckVudmVsb3BlLCBnZXRSb290U3BhbiwgZ2V0U3RhdHVzTWVzc2FnZSwgc3BhblRvSlNPTiwgZ2V0U3BhbkRlc2NlbmRhbnRzLCBzcGFuVG9UcmFuc2FjdGlvblRyYWNlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxzL3NwYW5VdGlscy5qcyc7XG5pbXBvcnQgeyB0aW1lc3RhbXBJblNlY29uZHMgfSBmcm9tICcuLi91dGlscy90aW1lLmpzJztcbmltcG9ydCB7IGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU3BhbiB9IGZyb20gJy4vZHluYW1pY1NhbXBsaW5nQ29udGV4dC5qcyc7XG5pbXBvcnQgeyBsb2dTcGFuRW5kIH0gZnJvbSAnLi9sb2dTcGFucy5qcyc7XG5pbXBvcnQgeyB0aW1lZEV2ZW50c1RvTWVhc3VyZW1lbnRzIH0gZnJvbSAnLi9tZWFzdXJlbWVudC5qcyc7XG5pbXBvcnQgeyBnZXRDYXB0dXJlZFNjb3Blc09uU3BhbiB9IGZyb20gJy4vdXRpbHMuanMnO1xuY29uc3QgTUFYX1NQQU5fQ09VTlQgPSAxMDAwO1xuXG4vKipcbiAqIFNwYW4gY29udGFpbnMgYWxsIGRhdGEgYWJvdXQgYSBzcGFuXG4gKi9cbmNsYXNzIFNlbnRyeVNwYW4ge1xuICAvKiogRXBvY2ggdGltZXN0YW1wIGluIHNlY29uZHMgd2hlbiB0aGUgc3BhbiBzdGFydGVkLiAqL1xuXG4gIC8qKiBFcG9jaCB0aW1lc3RhbXAgaW4gc2Vjb25kcyB3aGVuIHRoZSBzcGFuIGVuZGVkLiAqL1xuXG4gIC8qKiBJbnRlcm5hbCBrZWVwZXIgb2YgdGhlIHN0YXR1cyAqL1xuXG4gIC8qKiBUaGUgdGltZWQgZXZlbnRzIGFkZGVkIHRvIHRoaXMgc3Bhbi4gKi9cblxuICAvKiogaWYgdHJ1ZSwgdHJlYXQgc3BhbiBhcyBhIHN0YW5kYWxvbmUgc3BhbiAobm90IHBhcnQgb2YgYSB0cmFuc2FjdGlvbikgKi9cblxuICAvKipcbiAgICogWW91IHNob3VsZCBuZXZlciBjYWxsIHRoZSBjb25zdHJ1Y3RvciBtYW51YWxseSwgYWx3YXlzIHVzZSBgU2VudHJ5LnN0YXJ0U3BhbigpYFxuICAgKiBvciBvdGhlciBzcGFuIG1ldGhvZHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHNwYW5Db250ZXh0ID0ge30pIHtcbiAgICB0aGlzLl90cmFjZUlkID0gc3BhbkNvbnRleHQudHJhY2VJZCB8fCBnZW5lcmF0ZVRyYWNlSWQoKTtcbiAgICB0aGlzLl9zcGFuSWQgPSBzcGFuQ29udGV4dC5zcGFuSWQgfHwgZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICB0aGlzLl9zdGFydFRpbWUgPSBzcGFuQ29udGV4dC5zdGFydFRpbWVzdGFtcCB8fCB0aW1lc3RhbXBJblNlY29uZHMoKTtcbiAgICB0aGlzLl9saW5rcyA9IHNwYW5Db250ZXh0LmxpbmtzO1xuICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSB7fTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOXTogJ21hbnVhbCcsXG4gICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUF06IHNwYW5Db250ZXh0Lm9wLFxuICAgICAgLi4uc3BhbkNvbnRleHQuYXR0cmlidXRlc1xuICAgIH0pO1xuICAgIHRoaXMuX25hbWUgPSBzcGFuQ29udGV4dC5uYW1lO1xuICAgIGlmIChzcGFuQ29udGV4dC5wYXJlbnRTcGFuSWQpIHtcbiAgICAgIHRoaXMuX3BhcmVudFNwYW5JZCA9IHNwYW5Db250ZXh0LnBhcmVudFNwYW5JZDtcbiAgICB9XG4gICAgLy8gV2Ugd2FudCB0byBpbmNsdWRlIGJvb2xlYW5zIGFzIHdlbGwgaGVyZVxuICAgIGlmICgnc2FtcGxlZCcgaW4gc3BhbkNvbnRleHQpIHtcbiAgICAgIHRoaXMuX3NhbXBsZWQgPSBzcGFuQ29udGV4dC5zYW1wbGVkO1xuICAgIH1cbiAgICBpZiAoc3BhbkNvbnRleHQuZW5kVGltZXN0YW1wKSB7XG4gICAgICB0aGlzLl9lbmRUaW1lID0gc3BhbkNvbnRleHQuZW5kVGltZXN0YW1wO1xuICAgIH1cbiAgICB0aGlzLl9ldmVudHMgPSBbXTtcbiAgICB0aGlzLl9pc1N0YW5kYWxvbmVTcGFuID0gc3BhbkNvbnRleHQuaXNTdGFuZGFsb25lO1xuXG4gICAgLy8gSWYgdGhlIHNwYW4gaXMgYWxyZWFkeSBlbmRlZCwgZW5zdXJlIHdlIGZpbmFsaXplIHRoZSBzcGFuIGltbWVkaWF0ZWx5XG4gICAgaWYgKHRoaXMuX2VuZFRpbWUpIHtcbiAgICAgIHRoaXMuX29uU3BhbkVuZGVkKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGFkZExpbmsobGluaykge1xuICAgIGlmICh0aGlzLl9saW5rcykge1xuICAgICAgdGhpcy5fbGlua3MucHVzaChsaW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlua3MgPSBbbGlua107XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGFkZExpbmtzKGxpbmtzKSB7XG4gICAgaWYgKHRoaXMuX2xpbmtzKSB7XG4gICAgICB0aGlzLl9saW5rcy5wdXNoKC4uLmxpbmtzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlua3MgPSBsaW5rcztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBzaG91bGQgZ2VuZXJhbGx5IG5vdCBiZSB1c2VkLFxuICAgKiBidXQgaXQgaXMgbmVlZGVkIGZvciBiZWluZyBjb21wbGlhbnQgd2l0aCB0aGUgT1RFTCBTcGFuIGludGVyZmFjZS5cbiAgICpcbiAgICogQGhpZGRlblxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlY29yZEV4Y2VwdGlvbihfZXhjZXB0aW9uLCBfdGltZSkge1xuICAgIC8vIG5vb3BcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzcGFuQ29udGV4dCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBfc3BhbklkOiBzcGFuSWQsXG4gICAgICBfdHJhY2VJZDogdHJhY2VJZCxcbiAgICAgIF9zYW1wbGVkOiBzYW1wbGVkXG4gICAgfSA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNwYW5JZCxcbiAgICAgIHRyYWNlSWQsXG4gICAgICB0cmFjZUZsYWdzOiBzYW1wbGVkID8gVFJBQ0VfRkxBR19TQU1QTEVEIDogVFJBQ0VfRkxBR19OT05FXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWR5bmFtaWMtZGVsZXRlXG4gICAgICBkZWxldGUgdGhpcy5fYXR0cmlidXRlc1trZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hdHRyaWJ1dGVzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzKSB7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChrZXkgPT4gdGhpcy5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBnZW5lcmFsbHkgbm90IGJlIHVzZWQsXG4gICAqIGJ1dCB3ZSBuZWVkIGl0IGZvciBicm93c2VyIHRyYWNpbmcgd2hlcmUgd2Ugd2FudCB0byBhZGp1c3QgdGhlIHN0YXJ0IHRpbWUgYWZ0ZXJ3YXJkcy5cbiAgICogVVNFIFRISVMgV0lUSCBDQVVUSU9OIVxuICAgKlxuICAgKiBAaGlkZGVuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdXBkYXRlU3RhcnRUaW1lKHRpbWVJbnB1dCkge1xuICAgIHRoaXMuX3N0YXJ0VGltZSA9IHNwYW5UaW1lSW5wdXRUb1NlY29uZHModGltZUlucHV0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgc2V0U3RhdHVzKHZhbHVlKSB7XG4gICAgdGhpcy5fc3RhdHVzID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHVwZGF0ZU5hbWUobmFtZSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFLCAnY3VzdG9tJyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZW5kKGVuZFRpbWVzdGFtcCkge1xuICAgIC8vIElmIGFscmVhZHkgZW5kZWQsIHNraXBcbiAgICBpZiAodGhpcy5fZW5kVGltZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9lbmRUaW1lID0gc3BhblRpbWVJbnB1dFRvU2Vjb25kcyhlbmRUaW1lc3RhbXApO1xuICAgIGxvZ1NwYW5FbmQodGhpcyk7XG4gICAgdGhpcy5fb25TcGFuRW5kZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHNwYW4uXG4gICAqXG4gICAqIEBoaWRkZW5cbiAgICogQGludGVybmFsIFRoaXMgbWV0aG9kIGlzIHB1cmVseSBmb3IgaW50ZXJuYWwgcHVycG9zZXMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBvdXRzaWRlXG4gICAqIG9mIFNESyBjb2RlLiBJZiB5b3UgbmVlZCB0byBnZXQgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgc3BhbixcbiAgICogdXNlIGBzcGFuVG9KU09OKHNwYW4pYCBpbnN0ZWFkLlxuICAgKi9cbiAgZ2V0U3BhbkpTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHRoaXMuX2F0dHJpYnV0ZXMsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fbmFtZSxcbiAgICAgIG9wOiB0aGlzLl9hdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1BdLFxuICAgICAgcGFyZW50X3NwYW5faWQ6IHRoaXMuX3BhcmVudFNwYW5JZCxcbiAgICAgIHNwYW5faWQ6IHRoaXMuX3NwYW5JZCxcbiAgICAgIHN0YXJ0X3RpbWVzdGFtcDogdGhpcy5fc3RhcnRUaW1lLFxuICAgICAgc3RhdHVzOiBnZXRTdGF0dXNNZXNzYWdlKHRoaXMuX3N0YXR1cyksXG4gICAgICB0aW1lc3RhbXA6IHRoaXMuX2VuZFRpbWUsXG4gICAgICB0cmFjZV9pZDogdGhpcy5fdHJhY2VJZCxcbiAgICAgIG9yaWdpbjogdGhpcy5fYXR0cmlidXRlc1tTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTl0sXG4gICAgICBwcm9maWxlX2lkOiB0aGlzLl9hdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9QUk9GSUxFX0lEXSxcbiAgICAgIGV4Y2x1c2l2ZV90aW1lOiB0aGlzLl9hdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9FWENMVVNJVkVfVElNRV0sXG4gICAgICBtZWFzdXJlbWVudHM6IHRpbWVkRXZlbnRzVG9NZWFzdXJlbWVudHModGhpcy5fZXZlbnRzKSxcbiAgICAgIGlzX3NlZ21lbnQ6IHRoaXMuX2lzU3RhbmRhbG9uZVNwYW4gJiYgZ2V0Um9vdFNwYW4odGhpcykgPT09IHRoaXMgfHwgdW5kZWZpbmVkLFxuICAgICAgc2VnbWVudF9pZDogdGhpcy5faXNTdGFuZGFsb25lU3BhbiA/IGdldFJvb3RTcGFuKHRoaXMpLnNwYW5Db250ZXh0KCkuc3BhbklkIDogdW5kZWZpbmVkLFxuICAgICAgbGlua3M6IGNvbnZlcnRTcGFuTGlua3NGb3JFbnZlbG9wZSh0aGlzLl9saW5rcylcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGlzUmVjb3JkaW5nKCkge1xuICAgIHJldHVybiAhdGhpcy5fZW5kVGltZSAmJiAhIXRoaXMuX3NhbXBsZWQ7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIGFkZEV2ZW50KG5hbWUsIGF0dHJpYnV0ZXNPclN0YXJ0VGltZSwgc3RhcnRUaW1lKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcubG9nKCdbVHJhY2luZ10gQWRkaW5nIGFuIGV2ZW50IHRvIHNwYW46JywgbmFtZSk7XG4gICAgY29uc3QgdGltZSA9IGlzU3BhblRpbWVJbnB1dChhdHRyaWJ1dGVzT3JTdGFydFRpbWUpID8gYXR0cmlidXRlc09yU3RhcnRUaW1lIDogc3RhcnRUaW1lIHx8IHRpbWVzdGFtcEluU2Vjb25kcygpO1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBpc1NwYW5UaW1lSW5wdXQoYXR0cmlidXRlc09yU3RhcnRUaW1lKSA/IHt9IDogYXR0cmlidXRlc09yU3RhcnRUaW1lIHx8IHt9O1xuICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgbmFtZSxcbiAgICAgIHRpbWU6IHNwYW5UaW1lSW5wdXRUb1NlY29uZHModGltZSksXG4gICAgICBhdHRyaWJ1dGVzXG4gICAgfTtcbiAgICB0aGlzLl9ldmVudHMucHVzaChldmVudCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGdlbmVyYWxseSBub3QgYmUgdXNlZCxcbiAgICogYnV0IGZvciBub3cgd2UgbmVlZCBhIHdheSB0byBwdWJsaWNseSBjaGVjayBpZiB0aGUgYF9pc1N0YW5kYWxvbmVTcGFuYCBmbGFnIGlzIHNldC5cbiAgICogVVNFIFRISVMgV0lUSCBDQVVUSU9OIVxuICAgKiBAaW50ZXJuYWxcbiAgICogQGhpZGRlblxuICAgKiBAZXhwZXJpbWVudGFsXG4gICAqL1xuICBpc1N0YW5kYWxvbmVTcGFuKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2lzU3RhbmRhbG9uZVNwYW47XG4gIH1cblxuICAvKiogRW1pdCBgc3BhbkVuZGAgd2hlbiB0aGUgc3BhbiBpcyBlbmRlZC4gKi9cbiAgX29uU3BhbkVuZGVkKCkge1xuICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICAgIGlmIChjbGllbnQpIHtcbiAgICAgIGNsaWVudC5lbWl0KCdzcGFuRW5kJywgdGhpcyk7XG4gICAgfVxuXG4gICAgLy8gQSBzZWdtZW50IHNwYW4gaXMgYmFzaWNhbGx5IHRoZSByb290IHNwYW4gb2YgYSBsb2NhbCBzcGFuIHRyZWUuXG4gICAgLy8gU28gZm9yIG5vdywgdGhpcyBpcyBlaXRoZXIgd2hhdCB3ZSBwcmV2aW91c2x5IHJlZmVyIHRvIGFzIHRoZSByb290IHNwYW4sXG4gICAgLy8gb3IgYSBzdGFuZGFsb25lIHNwYW4uXG4gICAgY29uc3QgaXNTZWdtZW50U3BhbiA9IHRoaXMuX2lzU3RhbmRhbG9uZVNwYW4gfHwgdGhpcyA9PT0gZ2V0Um9vdFNwYW4odGhpcyk7XG4gICAgaWYgKCFpc1NlZ21lbnRTcGFuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgdGhpcyBpcyBhIHN0YW5kYWxvbmUgc3Bhbiwgd2Ugc2VuZCBpdCBpbW1lZGlhdGVseVxuICAgIGlmICh0aGlzLl9pc1N0YW5kYWxvbmVTcGFuKSB7XG4gICAgICBpZiAodGhpcy5fc2FtcGxlZCkge1xuICAgICAgICBzZW5kU3BhbkVudmVsb3BlKGNyZWF0ZVNwYW5FbnZlbG9wZShbdGhpc10sIGNsaWVudCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgREVCVUdfQlVJTEQgJiYgZGVidWcubG9nKCdbVHJhY2luZ10gRGlzY2FyZGluZyBzdGFuZGFsb25lIHNwYW4gYmVjYXVzZSBpdHMgdHJhY2Ugd2FzIG5vdCBjaG9zZW4gdG8gYmUgc2FtcGxlZC4nKTtcbiAgICAgICAgaWYgKGNsaWVudCkge1xuICAgICAgICAgIGNsaWVudC5yZWNvcmREcm9wcGVkRXZlbnQoJ3NhbXBsZV9yYXRlJywgJ3NwYW4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0cmFuc2FjdGlvbkV2ZW50ID0gdGhpcy5fY29udmVydFNwYW5Ub1RyYW5zYWN0aW9uKCk7XG4gICAgaWYgKHRyYW5zYWN0aW9uRXZlbnQpIHtcbiAgICAgIGNvbnN0IHNjb3BlID0gZ2V0Q2FwdHVyZWRTY29wZXNPblNwYW4odGhpcykuc2NvcGUgfHwgZ2V0Q3VycmVudFNjb3BlKCk7XG4gICAgICBzY29wZS5jYXB0dXJlRXZlbnQodHJhbnNhY3Rpb25FdmVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmlzaCB0aGUgdHJhbnNhY3Rpb24gJiBwcmVwYXJlIHRoZSBldmVudCB0byBzZW5kIHRvIFNlbnRyeS5cbiAgICovXG4gIF9jb252ZXJ0U3BhblRvVHJhbnNhY3Rpb24oKSB7XG4gICAgLy8gV2UgY2FuIG9ubHkgY29udmVydCBmaW5pc2hlZCBzcGFuc1xuICAgIGlmICghaXNGdWxsRmluaXNoZWRTcGFuKHNwYW5Ub0pTT04odGhpcykpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX25hbWUpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oJ1RyYW5zYWN0aW9uIGhhcyBubyBuYW1lLCBmYWxsaW5nIGJhY2sgdG8gYDx1bmxhYmVsZWQgdHJhbnNhY3Rpb24+YC4nKTtcbiAgICAgIHRoaXMuX25hbWUgPSAnPHVubGFiZWxlZCB0cmFuc2FjdGlvbj4nO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBzY29wZTogY2FwdHVyZWRTcGFuU2NvcGUsXG4gICAgICBpc29sYXRpb25TY29wZTogY2FwdHVyZWRTcGFuSXNvbGF0aW9uU2NvcGVcbiAgICB9ID0gZ2V0Q2FwdHVyZWRTY29wZXNPblNwYW4odGhpcyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFJlcXVlc3QgPSBjYXB0dXJlZFNwYW5TY29wZT8uZ2V0U2NvcGVEYXRhKCkuc2RrUHJvY2Vzc2luZ01ldGFkYXRhPy5ub3JtYWxpemVkUmVxdWVzdDtcbiAgICBpZiAodGhpcy5fc2FtcGxlZCAhPT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBUaGUgdHJhbnNhY3Rpb24gc3BhbiBpdHNlbGYgYXMgd2VsbCBhcyBhbnkgcG90ZW50aWFsIHN0YW5kYWxvbmUgc3BhbnMgc2hvdWxkIGJlIGZpbHRlcmVkIG91dFxuICAgIGNvbnN0IGZpbmlzaGVkU3BhbnMgPSBnZXRTcGFuRGVzY2VuZGFudHModGhpcykuZmlsdGVyKHNwYW4gPT4gc3BhbiAhPT0gdGhpcyAmJiAhaXNTdGFuZGFsb25lU3BhbihzcGFuKSk7XG4gICAgY29uc3Qgc3BhbnMgPSBmaW5pc2hlZFNwYW5zLm1hcChzcGFuID0+IHNwYW5Ub0pTT04oc3BhbikpLmZpbHRlcihpc0Z1bGxGaW5pc2hlZFNwYW4pO1xuICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuX2F0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0VdO1xuXG4gICAgLy8gcmVtb3ZlIGludGVybmFsIHJvb3Qgc3BhbiBhdHRyaWJ1dGVzIHdlIGRvbid0IG5lZWQgdG8gc2VuZC5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZHluYW1pYy1kZWxldGUgKi9cbiAgICBkZWxldGUgdGhpcy5fYXR0cmlidXRlc1tTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX0NVU1RPTV9TUEFOX05BTUVdO1xuICAgIHNwYW5zLmZvckVhY2goc3BhbiA9PiB7XG4gICAgICBkZWxldGUgc3Bhbi5kYXRhW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfQ1VTVE9NX1NQQU5fTkFNRV07XG4gICAgfSk7XG4gICAgLy8gZXNsaW50LWVuYWJsZWQtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1keW5hbWljLWRlbGV0ZVxuXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB7XG4gICAgICBjb250ZXh0czoge1xuICAgICAgICB0cmFjZTogc3BhblRvVHJhbnNhY3Rpb25UcmFjZUNvbnRleHQodGhpcylcbiAgICAgIH0sXG4gICAgICBzcGFuczpcbiAgICAgIC8vIHNwYW5zLnNvcnQoKSBtdXRhdGVzIHRoZSBhcnJheSwgYnV0IGBzcGFuc2AgaXMgYWxyZWFkeSBhIGNvcHkgc28gd2UgY2FuIHNhZmVseSBkbyB0aGlzIGhlcmVcbiAgICAgIC8vIHdlIGRvIG5vdCB1c2Ugc3BhbnMgYW55bW9yZSBhZnRlciB0aGlzIHBvaW50XG4gICAgICBzcGFucy5sZW5ndGggPiBNQVhfU1BBTl9DT1VOVCA/IHNwYW5zLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRfdGltZXN0YW1wIC0gYi5zdGFydF90aW1lc3RhbXApLnNsaWNlKDAsIE1BWF9TUEFOX0NPVU5UKSA6IHNwYW5zLFxuICAgICAgc3RhcnRfdGltZXN0YW1wOiB0aGlzLl9zdGFydFRpbWUsXG4gICAgICB0aW1lc3RhbXA6IHRoaXMuX2VuZFRpbWUsXG4gICAgICB0cmFuc2FjdGlvbjogdGhpcy5fbmFtZSxcbiAgICAgIHR5cGU6ICd0cmFuc2FjdGlvbicsXG4gICAgICBzZGtQcm9jZXNzaW5nTWV0YWRhdGE6IHtcbiAgICAgICAgY2FwdHVyZWRTcGFuU2NvcGUsXG4gICAgICAgIGNhcHR1cmVkU3Bhbklzb2xhdGlvblNjb3BlLFxuICAgICAgICBkeW5hbWljU2FtcGxpbmdDb250ZXh0OiBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4odGhpcylcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiBub3JtYWxpemVkUmVxdWVzdCxcbiAgICAgIC4uLihzb3VyY2UgJiYge1xuICAgICAgICB0cmFuc2FjdGlvbl9pbmZvOiB7XG4gICAgICAgICAgc291cmNlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfTtcbiAgICBjb25zdCBtZWFzdXJlbWVudHMgPSB0aW1lZEV2ZW50c1RvTWVhc3VyZW1lbnRzKHRoaXMuX2V2ZW50cyk7XG4gICAgY29uc3QgaGFzTWVhc3VyZW1lbnRzID0gbWVhc3VyZW1lbnRzICYmIE9iamVjdC5rZXlzKG1lYXN1cmVtZW50cykubGVuZ3RoO1xuICAgIGlmIChoYXNNZWFzdXJlbWVudHMpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZygnW01lYXN1cmVtZW50c10gQWRkaW5nIG1lYXN1cmVtZW50cyB0byB0cmFuc2FjdGlvbiBldmVudCcsIEpTT04uc3RyaW5naWZ5KG1lYXN1cmVtZW50cywgdW5kZWZpbmVkLCAyKSk7XG4gICAgICB0cmFuc2FjdGlvbi5tZWFzdXJlbWVudHMgPSBtZWFzdXJlbWVudHM7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbiAgfVxufVxuZnVuY3Rpb24gaXNTcGFuVGltZUlucHV0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHZhbHVlIGluc3RhbmNlb2YgRGF0ZSB8fCBBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuLy8gV2Ugd2FudCB0byBmaWx0ZXIgb3V0IGFueSBpbmNvbXBsZXRlIFNwYW5KU09OIG9iamVjdHNcbmZ1bmN0aW9uIGlzRnVsbEZpbmlzaGVkU3BhbihpbnB1dCkge1xuICByZXR1cm4gISFpbnB1dC5zdGFydF90aW1lc3RhbXAgJiYgISFpbnB1dC50aW1lc3RhbXAgJiYgISFpbnB1dC5zcGFuX2lkICYmICEhaW5wdXQudHJhY2VfaWQ7XG59XG5cbi8qKiBgU2VudHJ5U3BhbmBzIGNhbiBiZSBzZW50IGFzIGEgc3RhbmRhbG9uZSBzcGFuIHJhdGhlciB0aGFuIGJlbG9uZ2luZyB0byBhIHRyYW5zYWN0aW9uICovXG5mdW5jdGlvbiBpc1N0YW5kYWxvbmVTcGFuKHNwYW4pIHtcbiAgcmV0dXJuIHNwYW4gaW5zdGFuY2VvZiBTZW50cnlTcGFuICYmIHNwYW4uaXNTdGFuZGFsb25lU3BhbigpO1xufVxuXG4vKipcbiAqIFNlbmRzIGEgYFNwYW5FbnZlbG9wZWAuXG4gKlxuICogTm90ZTogSWYgdGhlIGVudmVsb3BlJ3Mgc3BhbnMgYXJlIGRyb3BwZWQsIGUuZy4gdmlhIGBiZWZvcmVTZW5kU3BhbmAsXG4gKiB0aGUgZW52ZWxvcGUgd2lsbCBub3QgYmUgc2VudCBlaXRoZXIuXG4gKi9cbmZ1bmN0aW9uIHNlbmRTcGFuRW52ZWxvcGUoZW52ZWxvcGUpIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gIGlmICghY2xpZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNwYW5JdGVtcyA9IGVudmVsb3BlWzFdO1xuICBpZiAoIXNwYW5JdGVtcyB8fCBzcGFuSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgY2xpZW50LnJlY29yZERyb3BwZWRFdmVudCgnYmVmb3JlX3NlbmQnLCAnc3BhbicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNlbmRFbnZlbG9wZSBzaG91bGQgbm90IHRocm93XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgY2xpZW50LnNlbmRFbnZlbG9wZShlbnZlbG9wZSk7XG59XG5leHBvcnQgeyBTZW50cnlTcGFuIH07XG4iLCJpbXBvcnQgeyBnZXRBc3luY0NvbnRleHRTdHJhdGVneSB9IGZyb20gJy4uL2FzeW5jQ29udGV4dC9pbmRleC5qcyc7XG5pbXBvcnQgeyBnZXRNYWluQ2FycmllciB9IGZyb20gJy4uL2NhcnJpZXIuanMnO1xuaW1wb3J0IHsgd2l0aFNjb3BlLCBnZXRDdXJyZW50U2NvcGUsIGdldENsaWVudCwgZ2V0SXNvbGF0aW9uU2NvcGUgfSBmcm9tICcuLi9jdXJyZW50U2NvcGVzLmpzJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TQU1QTEVfUkFURSwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0UgfSBmcm9tICcuLi9zZW1hbnRpY0F0dHJpYnV0ZXMuanMnO1xuaW1wb3J0IHsgaGFuZGxlQ2FsbGJhY2tFcnJvcnMgfSBmcm9tICcuLi91dGlscy9oYW5kbGVDYWxsYmFja0Vycm9ycy5qcyc7XG5pbXBvcnQgeyBoYXNTcGFuc0VuYWJsZWQgfSBmcm9tICcuLi91dGlscy9oYXNTcGFuc0VuYWJsZWQuanMnO1xuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgcGFyc2VTYW1wbGVSYXRlIH0gZnJvbSAnLi4vdXRpbHMvcGFyc2VTYW1wbGVSYXRlLmpzJztcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gJy4uL3V0aWxzL3Byb3BhZ2F0aW9uQ29udGV4dC5qcyc7XG5pbXBvcnQgeyBfc2V0U3BhbkZvclNjb3BlLCBfZ2V0U3BhbkZvclNjb3BlIH0gZnJvbSAnLi4vdXRpbHMvc3Bhbk9uU2NvcGUuanMnO1xuaW1wb3J0IHsgc3BhblRvSlNPTiwgc3BhblRpbWVJbnB1dFRvU2Vjb25kcywgZ2V0Um9vdFNwYW4sIGFkZENoaWxkU3BhblRvU3Bhbiwgc3BhbklzU2FtcGxlZCB9IGZyb20gJy4uL3V0aWxzL3NwYW5VdGlscy5qcyc7XG5pbXBvcnQgeyBwcm9wYWdhdGlvbkNvbnRleHRGcm9tSGVhZGVycyB9IGZyb20gJy4uL3V0aWxzL3RyYWNpbmcuanMnO1xuaW1wb3J0IHsgZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TcGFuLCBmcmVlemVEc2NPblNwYW4gfSBmcm9tICcuL2R5bmFtaWNTYW1wbGluZ0NvbnRleHQuanMnO1xuaW1wb3J0IHsgbG9nU3BhblN0YXJ0IH0gZnJvbSAnLi9sb2dTcGFucy5qcyc7XG5pbXBvcnQgeyBzYW1wbGVTcGFuIH0gZnJvbSAnLi9zYW1wbGluZy5qcyc7XG5pbXBvcnQgeyBTZW50cnlOb25SZWNvcmRpbmdTcGFuIH0gZnJvbSAnLi9zZW50cnlOb25SZWNvcmRpbmdTcGFuLmpzJztcbmltcG9ydCB7IFNlbnRyeVNwYW4gfSBmcm9tICcuL3NlbnRyeVNwYW4uanMnO1xuaW1wb3J0IHsgU1BBTl9TVEFUVVNfRVJST1IgfSBmcm9tICcuL3NwYW5zdGF0dXMuanMnO1xuaW1wb3J0IHsgc2V0Q2FwdHVyZWRTY29wZXNPblNwYW4gfSBmcm9tICcuL3V0aWxzLmpzJztcblxuLyogZXNsaW50LWRpc2FibGUgbWF4LWxpbmVzICovXG5cbmNvbnN0IFNVUFBSRVNTX1RSQUNJTkdfS0VZID0gJ19fU0VOVFJZX1NVUFBSRVNTX1RSQUNJTkdfXyc7XG5cbi8qKlxuICogV3JhcHMgYSBmdW5jdGlvbiB3aXRoIGEgdHJhbnNhY3Rpb24vc3BhbiBhbmQgZmluaXNoZXMgdGhlIHNwYW4gYWZ0ZXIgdGhlIGZ1bmN0aW9uIGlzIGRvbmUuXG4gKiBUaGUgY3JlYXRlZCBzcGFuIGlzIHRoZSBhY3RpdmUgc3BhbiBhbmQgd2lsbCBiZSB1c2VkIGFzIHBhcmVudCBieSBvdGhlciBzcGFucyBjcmVhdGVkIGluc2lkZSB0aGUgZnVuY3Rpb25cbiAqIGFuZCBjYW4gYmUgYWNjZXNzZWQgdmlhIGBTZW50cnkuZ2V0QWN0aXZlU3BhbigpYCwgYXMgbG9uZyBhcyB0aGUgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgd2hpbGUgdGhlIHNjb3BlIGlzIGFjdGl2ZS5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byBjcmVhdGUgYSBzcGFuIHRoYXQgaXMgbm90IHNldCBhcyBhY3RpdmUsIHVzZSB7QGxpbmsgc3RhcnRJbmFjdGl2ZVNwYW59LlxuICpcbiAqIFlvdSdsbCBhbHdheXMgZ2V0IGEgc3BhbiBwYXNzZWQgdG8gdGhlIGNhbGxiYWNrLFxuICogaXQgbWF5IGp1c3QgYmUgYSBub24tcmVjb3JkaW5nIHNwYW4gaWYgdGhlIHNwYW4gaXMgbm90IHNhbXBsZWQgb3IgaWYgdHJhY2luZyBpcyBkaXNhYmxlZC5cbiAqL1xuZnVuY3Rpb24gc3RhcnRTcGFuKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGFjcyA9IGdldEFjcygpO1xuICBpZiAoYWNzLnN0YXJ0U3Bhbikge1xuICAgIHJldHVybiBhY3Muc3RhcnRTcGFuKG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfVxuICBjb25zdCBzcGFuQXJndW1lbnRzID0gcGFyc2VTZW50cnlTcGFuQXJndW1lbnRzKG9wdGlvbnMpO1xuICBjb25zdCB7XG4gICAgZm9yY2VUcmFuc2FjdGlvbixcbiAgICBwYXJlbnRTcGFuOiBjdXN0b21QYXJlbnRTcGFuLFxuICAgIHNjb3BlOiBjdXN0b21TY29wZVxuICB9ID0gb3B0aW9ucztcblxuICAvLyBXZSBzdGlsbCBuZWVkIHRvIGZvcmsgYSBwb3RlbnRpYWxseSBwYXNzZWQgc2NvcGUsIGFzIHdlIHNldCB0aGUgYWN0aXZlIHNwYW4gb24gaXRcbiAgLy8gYW5kIHdlIG5lZWQgdG8gZW5zdXJlIHRoYXQgaXQgaXMgY2xlYW5lZCB1cCBwcm9wZXJseSBvbmNlIHRoZSBzcGFuIGVuZHMuXG4gIGNvbnN0IGN1c3RvbUZvcmtlZFNjb3BlID0gY3VzdG9tU2NvcGU/LmNsb25lKCk7XG4gIHJldHVybiB3aXRoU2NvcGUoY3VzdG9tRm9ya2VkU2NvcGUsICgpID0+IHtcbiAgICAvLyBJZiBgb3B0aW9ucy5wYXJlbnRTcGFuYCBpcyBkZWZpbmVkLCB3ZSB3YW50IHRvIHdyYXAgdGhlIGNhbGxiYWNrIGluIGB3aXRoQWN0aXZlU3BhbmBcbiAgICBjb25zdCB3cmFwcGVyID0gZ2V0QWN0aXZlU3BhbldyYXBwZXIoY3VzdG9tUGFyZW50U3Bhbik7XG4gICAgcmV0dXJuIHdyYXBwZXIoKCkgPT4ge1xuICAgICAgY29uc3Qgc2NvcGUgPSBnZXRDdXJyZW50U2NvcGUoKTtcbiAgICAgIGNvbnN0IHBhcmVudFNwYW4gPSBnZXRQYXJlbnRTcGFuKHNjb3BlLCBjdXN0b21QYXJlbnRTcGFuKTtcbiAgICAgIGNvbnN0IHNob3VsZFNraXBTcGFuID0gb3B0aW9ucy5vbmx5SWZQYXJlbnQgJiYgIXBhcmVudFNwYW47XG4gICAgICBjb25zdCBhY3RpdmVTcGFuID0gc2hvdWxkU2tpcFNwYW4gPyBuZXcgU2VudHJ5Tm9uUmVjb3JkaW5nU3BhbigpIDogY3JlYXRlQ2hpbGRPclJvb3RTcGFuKHtcbiAgICAgICAgcGFyZW50U3BhbixcbiAgICAgICAgc3BhbkFyZ3VtZW50cyxcbiAgICAgICAgZm9yY2VUcmFuc2FjdGlvbixcbiAgICAgICAgc2NvcGVcbiAgICAgIH0pO1xuICAgICAgX3NldFNwYW5Gb3JTY29wZShzY29wZSwgYWN0aXZlU3Bhbik7XG4gICAgICByZXR1cm4gaGFuZGxlQ2FsbGJhY2tFcnJvcnMoKCkgPT4gY2FsbGJhY2soYWN0aXZlU3BhbiksICgpID0+IHtcbiAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHNwYW4gc3RhdHVzIGlmIGl0IGhhc24ndCBiZWVuIGNoYW5nZWQgeWV0LCBhbmQgdGhlIHNwYW4gaXMgbm90IHlldCBmaW5pc2hlZFxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgc3RhdHVzXG4gICAgICAgIH0gPSBzcGFuVG9KU09OKGFjdGl2ZVNwYW4pO1xuICAgICAgICBpZiAoYWN0aXZlU3Bhbi5pc1JlY29yZGluZygpICYmICghc3RhdHVzIHx8IHN0YXR1cyA9PT0gJ29rJykpIHtcbiAgICAgICAgICBhY3RpdmVTcGFuLnNldFN0YXR1cyh7XG4gICAgICAgICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdpbnRlcm5hbF9lcnJvcidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgKCkgPT4ge1xuICAgICAgICBhY3RpdmVTcGFuLmVuZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFNpbWlsYXIgdG8gYFNlbnRyeS5zdGFydFNwYW5gLiBXcmFwcyBhIGZ1bmN0aW9uIHdpdGggYSB0cmFuc2FjdGlvbi9zcGFuLCBidXQgZG9lcyBub3QgZmluaXNoIHRoZSBzcGFuXG4gKiBhZnRlciB0aGUgZnVuY3Rpb24gaXMgZG9uZSBhdXRvbWF0aWNhbGx5LiBVc2UgYHNwYW4uZW5kKClgIHRvIGVuZCB0aGUgc3Bhbi5cbiAqXG4gKiBUaGUgY3JlYXRlZCBzcGFuIGlzIHRoZSBhY3RpdmUgc3BhbiBhbmQgd2lsbCBiZSB1c2VkIGFzIHBhcmVudCBieSBvdGhlciBzcGFucyBjcmVhdGVkIGluc2lkZSB0aGUgZnVuY3Rpb25cbiAqIGFuZCBjYW4gYmUgYWNjZXNzZWQgdmlhIGBTZW50cnkuZ2V0QWN0aXZlU3BhbigpYCwgYXMgbG9uZyBhcyB0aGUgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgd2hpbGUgdGhlIHNjb3BlIGlzIGFjdGl2ZS5cbiAqXG4gKiBZb3UnbGwgYWx3YXlzIGdldCBhIHNwYW4gcGFzc2VkIHRvIHRoZSBjYWxsYmFjayxcbiAqIGl0IG1heSBqdXN0IGJlIGEgbm9uLXJlY29yZGluZyBzcGFuIGlmIHRoZSBzcGFuIGlzIG5vdCBzYW1wbGVkIG9yIGlmIHRyYWNpbmcgaXMgZGlzYWJsZWQuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0U3Bhbk1hbnVhbChvcHRpb25zLCBjYWxsYmFjaykge1xuICBjb25zdCBhY3MgPSBnZXRBY3MoKTtcbiAgaWYgKGFjcy5zdGFydFNwYW5NYW51YWwpIHtcbiAgICByZXR1cm4gYWNzLnN0YXJ0U3Bhbk1hbnVhbChvcHRpb25zLCBjYWxsYmFjayk7XG4gIH1cbiAgY29uc3Qgc3BhbkFyZ3VtZW50cyA9IHBhcnNlU2VudHJ5U3BhbkFyZ3VtZW50cyhvcHRpb25zKTtcbiAgY29uc3Qge1xuICAgIGZvcmNlVHJhbnNhY3Rpb24sXG4gICAgcGFyZW50U3BhbjogY3VzdG9tUGFyZW50U3BhbixcbiAgICBzY29wZTogY3VzdG9tU2NvcGVcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGN1c3RvbUZvcmtlZFNjb3BlID0gY3VzdG9tU2NvcGU/LmNsb25lKCk7XG4gIHJldHVybiB3aXRoU2NvcGUoY3VzdG9tRm9ya2VkU2NvcGUsICgpID0+IHtcbiAgICAvLyBJZiBgb3B0aW9ucy5wYXJlbnRTcGFuYCBpcyBkZWZpbmVkLCB3ZSB3YW50IHRvIHdyYXAgdGhlIGNhbGxiYWNrIGluIGB3aXRoQWN0aXZlU3BhbmBcbiAgICBjb25zdCB3cmFwcGVyID0gZ2V0QWN0aXZlU3BhbldyYXBwZXIoY3VzdG9tUGFyZW50U3Bhbik7XG4gICAgcmV0dXJuIHdyYXBwZXIoKCkgPT4ge1xuICAgICAgY29uc3Qgc2NvcGUgPSBnZXRDdXJyZW50U2NvcGUoKTtcbiAgICAgIGNvbnN0IHBhcmVudFNwYW4gPSBnZXRQYXJlbnRTcGFuKHNjb3BlLCBjdXN0b21QYXJlbnRTcGFuKTtcbiAgICAgIGNvbnN0IHNob3VsZFNraXBTcGFuID0gb3B0aW9ucy5vbmx5SWZQYXJlbnQgJiYgIXBhcmVudFNwYW47XG4gICAgICBjb25zdCBhY3RpdmVTcGFuID0gc2hvdWxkU2tpcFNwYW4gPyBuZXcgU2VudHJ5Tm9uUmVjb3JkaW5nU3BhbigpIDogY3JlYXRlQ2hpbGRPclJvb3RTcGFuKHtcbiAgICAgICAgcGFyZW50U3BhbixcbiAgICAgICAgc3BhbkFyZ3VtZW50cyxcbiAgICAgICAgZm9yY2VUcmFuc2FjdGlvbixcbiAgICAgICAgc2NvcGVcbiAgICAgIH0pO1xuICAgICAgX3NldFNwYW5Gb3JTY29wZShzY29wZSwgYWN0aXZlU3Bhbik7XG4gICAgICByZXR1cm4gaGFuZGxlQ2FsbGJhY2tFcnJvcnMoXG4gICAgICAvLyBXZSBwYXNzIHRoZSBgZmluaXNoYCBmdW5jdGlvbiB0byB0aGUgY2FsbGJhY2ssIHNvIHRoZSB1c2VyIGNhbiBmaW5pc2ggdGhlIHNwYW4gbWFudWFsbHlcbiAgICAgIC8vIHRoaXMgaXMgbWFpbmx5IGhlcmUgZm9yIGhpc3RvcmljIHB1cnBvc2VzIGJlY2F1c2UgcHJldmlvdXNseSwgd2UgaW5zdHJ1Y3RlZCB1c2VycyB0byBjYWxsXG4gICAgICAvLyBgZmluaXNoYCBpbnN0ZWFkIG9mIGBzcGFuLmVuZCgpYCB0byBhbHNvIGNsZWFuIHVwIHRoZSBzY29wZS4gTm93YWRheXMsIGNhbGxpbmcgYHNwYW4uZW5kKClgXG4gICAgICAvLyBvciBgZmluaXNoYCBoYXMgdGhlIHNhbWUgZWZmZWN0IGFuZCB3ZSBzaW1wbHkgbGVhdmUgaXQgaGVyZSB0byBhdm9pZCBicmVha2luZyB1c2VyIGNvZGUuXG4gICAgICAoKSA9PiBjYWxsYmFjayhhY3RpdmVTcGFuLCAoKSA9PiBhY3RpdmVTcGFuLmVuZCgpKSwgKCkgPT4ge1xuICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgc3BhbiBzdGF0dXMgaWYgaXQgaGFzbid0IGJlZW4gY2hhbmdlZCB5ZXQsIGFuZCB0aGUgc3BhbiBpcyBub3QgeWV0IGZpbmlzaGVkXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBzdGF0dXNcbiAgICAgICAgfSA9IHNwYW5Ub0pTT04oYWN0aXZlU3Bhbik7XG4gICAgICAgIGlmIChhY3RpdmVTcGFuLmlzUmVjb3JkaW5nKCkgJiYgKCFzdGF0dXMgfHwgc3RhdHVzID09PSAnb2snKSkge1xuICAgICAgICAgIGFjdGl2ZVNwYW4uc2V0U3RhdHVzKHtcbiAgICAgICAgICAgIGNvZGU6IFNQQU5fU1RBVFVTX0VSUk9SLFxuICAgICAgICAgICAgbWVzc2FnZTogJ2ludGVybmFsX2Vycm9yJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNwYW4uIFRoaXMgc3BhbiBpcyBub3Qgc2V0IGFzIGFjdGl2ZSwgc28gd2lsbCBub3QgZ2V0IGF1dG9tYXRpYyBpbnN0cnVtZW50YXRpb24gc3BhbnNcbiAqIGFzIGNoaWxkcmVuIG9yIGJlIGFibGUgdG8gYmUgYWNjZXNzZWQgdmlhIGBTZW50cnkuZ2V0QWN0aXZlU3BhbigpYC5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byBjcmVhdGUgYSBzcGFuIHRoYXQgaXMgc2V0IGFzIGFjdGl2ZSwgdXNlIHtAbGluayBzdGFydFNwYW59LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBhbHdheXMgcmV0dXJuIGEgc3BhbixcbiAqIGl0IG1heSBqdXN0IGJlIGEgbm9uLXJlY29yZGluZyBzcGFuIGlmIHRoZSBzcGFuIGlzIG5vdCBzYW1wbGVkIG9yIGlmIHRyYWNpbmcgaXMgZGlzYWJsZWQuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0SW5hY3RpdmVTcGFuKG9wdGlvbnMpIHtcbiAgY29uc3QgYWNzID0gZ2V0QWNzKCk7XG4gIGlmIChhY3Muc3RhcnRJbmFjdGl2ZVNwYW4pIHtcbiAgICByZXR1cm4gYWNzLnN0YXJ0SW5hY3RpdmVTcGFuKG9wdGlvbnMpO1xuICB9XG4gIGNvbnN0IHNwYW5Bcmd1bWVudHMgPSBwYXJzZVNlbnRyeVNwYW5Bcmd1bWVudHMob3B0aW9ucyk7XG4gIGNvbnN0IHtcbiAgICBmb3JjZVRyYW5zYWN0aW9uLFxuICAgIHBhcmVudFNwYW46IGN1c3RvbVBhcmVudFNwYW5cbiAgfSA9IG9wdGlvbnM7XG5cbiAgLy8gSWYgYG9wdGlvbnMuc2NvcGVgIGlzIGRlZmluZWQsIHdlIHVzZSB0aGlzIGFzIGFzIGEgd3JhcHBlcixcbiAgLy8gSWYgYG9wdGlvbnMucGFyZW50U3BhbmAgaXMgZGVmaW5lZCwgd2Ugd2FudCB0byB3cmFwIHRoZSBjYWxsYmFjayBpbiBgd2l0aEFjdGl2ZVNwYW5gXG4gIGNvbnN0IHdyYXBwZXIgPSBvcHRpb25zLnNjb3BlID8gY2FsbGJhY2sgPT4gd2l0aFNjb3BlKG9wdGlvbnMuc2NvcGUsIGNhbGxiYWNrKSA6IGN1c3RvbVBhcmVudFNwYW4gIT09IHVuZGVmaW5lZCA/IGNhbGxiYWNrID0+IHdpdGhBY3RpdmVTcGFuKGN1c3RvbVBhcmVudFNwYW4sIGNhbGxiYWNrKSA6IGNhbGxiYWNrID0+IGNhbGxiYWNrKCk7XG4gIHJldHVybiB3cmFwcGVyKCgpID0+IHtcbiAgICBjb25zdCBzY29wZSA9IGdldEN1cnJlbnRTY29wZSgpO1xuICAgIGNvbnN0IHBhcmVudFNwYW4gPSBnZXRQYXJlbnRTcGFuKHNjb3BlLCBjdXN0b21QYXJlbnRTcGFuKTtcbiAgICBjb25zdCBzaG91bGRTa2lwU3BhbiA9IG9wdGlvbnMub25seUlmUGFyZW50ICYmICFwYXJlbnRTcGFuO1xuICAgIGlmIChzaG91bGRTa2lwU3Bhbikge1xuICAgICAgcmV0dXJuIG5ldyBTZW50cnlOb25SZWNvcmRpbmdTcGFuKCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVDaGlsZE9yUm9vdFNwYW4oe1xuICAgICAgcGFyZW50U3BhbixcbiAgICAgIHNwYW5Bcmd1bWVudHMsXG4gICAgICBmb3JjZVRyYW5zYWN0aW9uLFxuICAgICAgc2NvcGVcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ29udGludWUgYSB0cmFjZSBmcm9tIGBzZW50cnktdHJhY2VgIGFuZCBgYmFnZ2FnZWAgdmFsdWVzLlxuICogVGhlc2UgdmFsdWVzIGNhbiBiZSBvYnRhaW5lZCBmcm9tIGluY29taW5nIHJlcXVlc3QgaGVhZGVycywgb3IgaW4gdGhlIGJyb3dzZXIgZnJvbSBgPG1ldGEgbmFtZT1cInNlbnRyeS10cmFjZVwiPmBcbiAqIGFuZCBgPG1ldGEgbmFtZT1cImJhZ2dhZ2VcIj5gIEhUTUwgdGFncy5cbiAqXG4gKiBTcGFucyBzdGFydGVkIHdpdGggYHN0YXJ0U3BhbmAsIGBzdGFydFNwYW5NYW51YWxgIGFuZCBgc3RhcnRJbmFjdGl2ZVNwYW5gLCB3aXRoaW4gdGhlIGNhbGxiYWNrIHdpbGwgYXV0b21hdGljYWxseVxuICogYmUgYXR0YWNoZWQgdG8gdGhlIGluY29taW5nIHRyYWNlLlxuICovXG5jb25zdCBjb250aW51ZVRyYWNlID0gKG9wdGlvbnMsIGNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IGNhcnJpZXIgPSBnZXRNYWluQ2FycmllcigpO1xuICBjb25zdCBhY3MgPSBnZXRBc3luY0NvbnRleHRTdHJhdGVneShjYXJyaWVyKTtcbiAgaWYgKGFjcy5jb250aW51ZVRyYWNlKSB7XG4gICAgcmV0dXJuIGFjcy5jb250aW51ZVRyYWNlKG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfVxuICBjb25zdCB7XG4gICAgc2VudHJ5VHJhY2UsXG4gICAgYmFnZ2FnZVxuICB9ID0gb3B0aW9ucztcbiAgcmV0dXJuIHdpdGhTY29wZShzY29wZSA9PiB7XG4gICAgY29uc3QgcHJvcGFnYXRpb25Db250ZXh0ID0gcHJvcGFnYXRpb25Db250ZXh0RnJvbUhlYWRlcnMoc2VudHJ5VHJhY2UsIGJhZ2dhZ2UpO1xuICAgIHNjb3BlLnNldFByb3BhZ2F0aW9uQ29udGV4dChwcm9wYWdhdGlvbkNvbnRleHQpO1xuICAgIHJldHVybiBjYWxsYmFjaygpO1xuICB9KTtcbn07XG5cbi8qKlxuICogRm9ya3MgdGhlIGN1cnJlbnQgc2NvcGUgYW5kIHNldHMgdGhlIHByb3ZpZGVkIHNwYW4gYXMgYWN0aXZlIHNwYW4gaW4gdGhlIGNvbnRleHQgb2YgdGhlIHByb3ZpZGVkIGNhbGxiYWNrLiBDYW4gYmVcbiAqIHBhc3NlZCBgbnVsbGAgdG8gc3RhcnQgYW4gZW50aXJlbHkgbmV3IHNwYW4gdHJlZS5cbiAqXG4gKiBAcGFyYW0gc3BhbiBTcGFucyBzdGFydGVkIGluIHRoZSBjb250ZXh0IG9mIHRoZSBwcm92aWRlZCBjYWxsYmFjayB3aWxsIGJlIGNoaWxkcmVuIG9mIHRoaXMgc3Bhbi4gSWYgYG51bGxgIGlzIHBhc3NlZCxcbiAqIHNwYW5zIHN0YXJ0ZWQgd2l0aGluIHRoZSBjYWxsYmFjayB3aWxsIG5vdCBiZSBhdHRhY2hlZCB0byBhIHBhcmVudCBzcGFuLlxuICogQHBhcmFtIGNhbGxiYWNrIEV4ZWN1dGlvbiBjb250ZXh0IGluIHdoaWNoIHRoZSBwcm92aWRlZCBzcGFuIHdpbGwgYmUgYWN0aXZlLiBJcyBwYXNzZWQgdGhlIG5ld2x5IGZvcmtlZCBzY29wZS5cbiAqIEByZXR1cm5zIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBwcm92aWRlZCBjYWxsYmFjayBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gd2l0aEFjdGl2ZVNwYW4oc3BhbiwgY2FsbGJhY2spIHtcbiAgY29uc3QgYWNzID0gZ2V0QWNzKCk7XG4gIGlmIChhY3Mud2l0aEFjdGl2ZVNwYW4pIHtcbiAgICByZXR1cm4gYWNzLndpdGhBY3RpdmVTcGFuKHNwYW4sIGNhbGxiYWNrKTtcbiAgfVxuICByZXR1cm4gd2l0aFNjb3BlKHNjb3BlID0+IHtcbiAgICBfc2V0U3BhbkZvclNjb3BlKHNjb3BlLCBzcGFuIHx8IHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIGNhbGxiYWNrKHNjb3BlKTtcbiAgfSk7XG59XG5cbi8qKiBTdXBwcmVzcyB0cmFjaW5nIGluIHRoZSBnaXZlbiBjYWxsYmFjaywgZW5zdXJpbmcgbm8gc3BhbnMgYXJlIGdlbmVyYXRlZCBpbnNpZGUgb2YgaXQuICovXG5mdW5jdGlvbiBzdXBwcmVzc1RyYWNpbmcoY2FsbGJhY2spIHtcbiAgY29uc3QgYWNzID0gZ2V0QWNzKCk7XG4gIGlmIChhY3Muc3VwcHJlc3NUcmFjaW5nKSB7XG4gICAgcmV0dXJuIGFjcy5zdXBwcmVzc1RyYWNpbmcoY2FsbGJhY2spO1xuICB9XG4gIHJldHVybiB3aXRoU2NvcGUoc2NvcGUgPT4ge1xuICAgIC8vIE5vdGU6IFdlIGRvIG5vdCB3YWl0IGZvciB0aGUgY2FsbGJhY2sgdG8gZmluaXNoIGJlZm9yZSB3ZSByZXNldCB0aGUgbWV0YWRhdGFcbiAgICAvLyB0aGUgcmVhc29uIGZvciB0aGlzIGlzIHRoYXQgb3RoZXJ3aXNlLCBpbiB0aGUgYnJvd3NlciB0aGlzIGNhbiBsZWFkIHRvIHZlcnkgd2VpcmQgYmVoYXZpb3JcbiAgICAvLyBhcyB0aGVyZSBpcyBvbmx5IGEgc2luZ2xlIHRvcCBzY29wZSwgaWYgdGhlIGNhbGxiYWNrIHRha2VzIGxvbmdlciB0byBmaW5pc2gsXG4gICAgLy8gb3RoZXIsIHVucmVsYXRlZCBzcGFucyBtYXkgYWxzbyBiZSBzdXBwcmVzc2VkLCB3aGljaCB3ZSBkbyBub3Qgd2FudFxuICAgIC8vIHNvIGluc3RlYWQsIHdlIG9ubHkgc3VwcHJlc3MgdHJhY2luZyBzeW5jaHJvbm95c2x5IGluIHRoZSBicm93c2VyXG4gICAgc2NvcGUuc2V0U0RLUHJvY2Vzc2luZ01ldGFkYXRhKHtcbiAgICAgIFtTVVBQUkVTU19UUkFDSU5HX0tFWV06IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCByZXMgPSBjYWxsYmFjaygpO1xuICAgIHNjb3BlLnNldFNES1Byb2Nlc3NpbmdNZXRhZGF0YSh7XG4gICAgICBbU1VQUFJFU1NfVFJBQ0lOR19LRVldOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzO1xuICB9KTtcbn1cblxuLyoqXG4gKiBTdGFydHMgYSBuZXcgdHJhY2UgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgcHJvdmlkZWQgY2FsbGJhY2suIFNwYW5zIHN0YXJ0ZWQgd2l0aGluIHRoZVxuICogY2FsbGJhY2sgd2lsbCBiZSBwYXJ0IG9mIHRoZSBuZXcgdHJhY2UgaW5zdGVhZCBvZiBhIHBvdGVudGlhbGx5IHByZXZpb3VzbHkgc3RhcnRlZCB0cmFjZS5cbiAqXG4gKiBJbXBvcnRhbnQ6IE9ubHkgdXNlIHRoaXMgZnVuY3Rpb24gaWYgeW91IHdhbnQgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgdHJhY2UgbGlmZXRpbWUgYW5kXG4gKiBwcm9wYWdhdGlvbiBtZWNoYW5pc20gb2YgdGhlIFNESyBmb3IgdGhlIGR1cmF0aW9uIGFuZCBzY29wZSBvZiB0aGUgcHJvdmlkZWQgY2FsbGJhY2suXG4gKiBUaGUgbmV3bHkgY3JlYXRlZCB0cmFjZSB3aWxsIGFsc28gYmUgdGhlIHJvb3Qgb2YgYSBuZXcgZGlzdHJpYnV0ZWQgdHJhY2UsIGZvciBleGFtcGxlIGlmXG4gKiB5b3UgbWFrZSBodHRwIHJlcXVlc3RzIHdpdGhpbiB0aGUgY2FsbGJhY2suXG4gKiBUaGlzIGZ1bmN0aW9uIG1pZ2h0IGJlIHVzZWZ1bCBpZiB0aGUgb3BlcmF0aW9uIHlvdSB3YW50IHRvIGluc3RydW1lbnQgc2hvdWxkIG5vdCBiZSBwYXJ0XG4gKiBvZiBhIHBvdGVudGlhbGx5IG9uZ29pbmcgdHJhY2UuXG4gKlxuICogRGVmYXVsdCBiZWhhdmlvcjpcbiAqIC0gU2VydmVyLXNpZGU6IEEgbmV3IHRyYWNlIGlzIHN0YXJ0ZWQgZm9yIGVhY2ggaW5jb21pbmcgcmVxdWVzdC5cbiAqIC0gQnJvd3NlcjogQSBuZXcgdHJhY2UgaXMgc3RhcnRlZCBmb3IgZWFjaCBwYWdlIG91ciByb3V0ZS4gTmF2aWdhdGluZyB0byBhIG5ldyByb3V0ZVxuICogICAgICAgICAgICBvciBwYWdlIHdpbGwgYXV0b21hdGljYWxseSBjcmVhdGUgYSBuZXcgdHJhY2UuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0TmV3VHJhY2UoY2FsbGJhY2spIHtcbiAgcmV0dXJuIHdpdGhTY29wZShzY29wZSA9PiB7XG4gICAgc2NvcGUuc2V0UHJvcGFnYXRpb25Db250ZXh0KHtcbiAgICAgIHRyYWNlSWQ6IGdlbmVyYXRlVHJhY2VJZCgpLFxuICAgICAgc2FtcGxlUmFuZDogTWF0aC5yYW5kb20oKVxuICAgIH0pO1xuICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZyhgU3RhcnRpbmcgYSBuZXcgdHJhY2Ugd2l0aCBpZCAke3Njb3BlLmdldFByb3BhZ2F0aW9uQ29udGV4dCgpLnRyYWNlSWR9YCk7XG4gICAgcmV0dXJuIHdpdGhBY3RpdmVTcGFuKG51bGwsIGNhbGxiYWNrKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVDaGlsZE9yUm9vdFNwYW4oe1xuICBwYXJlbnRTcGFuLFxuICBzcGFuQXJndW1lbnRzLFxuICBmb3JjZVRyYW5zYWN0aW9uLFxuICBzY29wZVxufSkge1xuICBpZiAoIWhhc1NwYW5zRW5hYmxlZCgpKSB7XG4gICAgY29uc3Qgc3BhbiA9IG5ldyBTZW50cnlOb25SZWNvcmRpbmdTcGFuKCk7XG5cbiAgICAvLyBJZiB0aGlzIGlzIGEgcm9vdCBzcGFuLCB3ZSBlbnN1cmUgdG8gZnJlZXplIGEgRFNDXG4gICAgLy8gU28gd2UgY2FuIGhhdmUgYXQgbGVhc3QgcGFydGlhbCBkYXRhIGhlcmVcbiAgICBpZiAoZm9yY2VUcmFuc2FjdGlvbiB8fCAhcGFyZW50U3Bhbikge1xuICAgICAgY29uc3QgZHNjID0ge1xuICAgICAgICBzYW1wbGVkOiAnZmFsc2UnLFxuICAgICAgICBzYW1wbGVfcmF0ZTogJzAnLFxuICAgICAgICB0cmFuc2FjdGlvbjogc3BhbkFyZ3VtZW50cy5uYW1lLFxuICAgICAgICAuLi5nZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4oc3BhbilcbiAgICAgIH07XG4gICAgICBmcmVlemVEc2NPblNwYW4oc3BhbiwgZHNjKTtcbiAgICB9XG4gICAgcmV0dXJuIHNwYW47XG4gIH1cbiAgY29uc3QgaXNvbGF0aW9uU2NvcGUgPSBnZXRJc29sYXRpb25TY29wZSgpO1xuICBsZXQgc3BhbjtcbiAgaWYgKHBhcmVudFNwYW4gJiYgIWZvcmNlVHJhbnNhY3Rpb24pIHtcbiAgICBzcGFuID0gX3N0YXJ0Q2hpbGRTcGFuKHBhcmVudFNwYW4sIHNjb3BlLCBzcGFuQXJndW1lbnRzKTtcbiAgICBhZGRDaGlsZFNwYW5Ub1NwYW4ocGFyZW50U3Bhbiwgc3Bhbik7XG4gIH0gZWxzZSBpZiAocGFyZW50U3Bhbikge1xuICAgIC8vIElmIHdlIGZvcmNlZCBhIHRyYW5zYWN0aW9uIGJ1dCBoYXZlIGEgcGFyZW50IHNwYW4sIG1ha2Ugc3VyZSB0byBjb250aW51ZSBmcm9tIHRoZSBwYXJlbnQgc3Bhbiwgbm90IHRoZSBzY29wZVxuICAgIGNvbnN0IGRzYyA9IGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU3BhbihwYXJlbnRTcGFuKTtcbiAgICBjb25zdCB7XG4gICAgICB0cmFjZUlkLFxuICAgICAgc3BhbklkOiBwYXJlbnRTcGFuSWRcbiAgICB9ID0gcGFyZW50U3Bhbi5zcGFuQ29udGV4dCgpO1xuICAgIGNvbnN0IHBhcmVudFNhbXBsZWQgPSBzcGFuSXNTYW1wbGVkKHBhcmVudFNwYW4pO1xuICAgIHNwYW4gPSBfc3RhcnRSb290U3Bhbih7XG4gICAgICB0cmFjZUlkLFxuICAgICAgcGFyZW50U3BhbklkLFxuICAgICAgLi4uc3BhbkFyZ3VtZW50c1xuICAgIH0sIHNjb3BlLCBwYXJlbnRTYW1wbGVkKTtcbiAgICBmcmVlemVEc2NPblNwYW4oc3BhbiwgZHNjKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7XG4gICAgICB0cmFjZUlkLFxuICAgICAgZHNjLFxuICAgICAgcGFyZW50U3BhbklkLFxuICAgICAgc2FtcGxlZDogcGFyZW50U2FtcGxlZFxuICAgIH0gPSB7XG4gICAgICAuLi5pc29sYXRpb25TY29wZS5nZXRQcm9wYWdhdGlvbkNvbnRleHQoKSxcbiAgICAgIC4uLnNjb3BlLmdldFByb3BhZ2F0aW9uQ29udGV4dCgpXG4gICAgfTtcbiAgICBzcGFuID0gX3N0YXJ0Um9vdFNwYW4oe1xuICAgICAgdHJhY2VJZCxcbiAgICAgIHBhcmVudFNwYW5JZCxcbiAgICAgIC4uLnNwYW5Bcmd1bWVudHNcbiAgICB9LCBzY29wZSwgcGFyZW50U2FtcGxlZCk7XG4gICAgaWYgKGRzYykge1xuICAgICAgZnJlZXplRHNjT25TcGFuKHNwYW4sIGRzYyk7XG4gICAgfVxuICB9XG4gIGxvZ1NwYW5TdGFydChzcGFuKTtcbiAgc2V0Q2FwdHVyZWRTY29wZXNPblNwYW4oc3Bhbiwgc2NvcGUsIGlzb2xhdGlvblNjb3BlKTtcbiAgcmV0dXJuIHNwYW47XG59XG5cbi8qKlxuICogVGhpcyBjb252ZXJ0cyBTdGFydFNwYW5PcHRpb25zIHRvIFNlbnRyeVNwYW5Bcmd1bWVudHMuXG4gKiBGb3IgdGhlIG1vc3QgcGFydCAoZm9yIG5vdykgd2UgYWNjZXB0IHRoZSBzYW1lIG9wdGlvbnMsXG4gKiBidXQgc29tZSBvZiB0aGVtIG5lZWQgdG8gYmUgdHJhbnNmb3JtZWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2VudHJ5U3BhbkFyZ3VtZW50cyhvcHRpb25zKSB7XG4gIGNvbnN0IGV4cCA9IG9wdGlvbnMuZXhwZXJpbWVudGFsIHx8IHt9O1xuICBjb25zdCBpbml0aWFsQ3R4ID0ge1xuICAgIGlzU3RhbmRhbG9uZTogZXhwLnN0YW5kYWxvbmUsXG4gICAgLi4ub3B0aW9uc1xuICB9O1xuICBpZiAob3B0aW9ucy5zdGFydFRpbWUpIHtcbiAgICBjb25zdCBjdHggPSB7XG4gICAgICAuLi5pbml0aWFsQ3R4XG4gICAgfTtcbiAgICBjdHguc3RhcnRUaW1lc3RhbXAgPSBzcGFuVGltZUlucHV0VG9TZWNvbmRzKG9wdGlvbnMuc3RhcnRUaW1lKTtcbiAgICBkZWxldGUgY3R4LnN0YXJ0VGltZTtcbiAgICByZXR1cm4gY3R4O1xuICB9XG4gIHJldHVybiBpbml0aWFsQ3R4O1xufVxuZnVuY3Rpb24gZ2V0QWNzKCkge1xuICBjb25zdCBjYXJyaWVyID0gZ2V0TWFpbkNhcnJpZXIoKTtcbiAgcmV0dXJuIGdldEFzeW5jQ29udGV4dFN0cmF0ZWd5KGNhcnJpZXIpO1xufVxuZnVuY3Rpb24gX3N0YXJ0Um9vdFNwYW4oc3BhbkFyZ3VtZW50cywgc2NvcGUsIHBhcmVudFNhbXBsZWQpIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gIGNvbnN0IG9wdGlvbnMgPSBjbGllbnQ/LmdldE9wdGlvbnMoKSB8fCB7fTtcbiAgY29uc3Qge1xuICAgIG5hbWUgPSAnJ1xuICB9ID0gc3BhbkFyZ3VtZW50cztcbiAgY29uc3QgbXV0YWJsZVNwYW5TYW1wbGluZ0RhdGEgPSB7XG4gICAgc3BhbkF0dHJpYnV0ZXM6IHtcbiAgICAgIC4uLnNwYW5Bcmd1bWVudHMuYXR0cmlidXRlc1xuICAgIH0sXG4gICAgc3Bhbk5hbWU6IG5hbWUsXG4gICAgcGFyZW50U2FtcGxlZFxuICB9O1xuXG4gIC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRlY2lzaW9uIGZvciB0aGUgbW9tZW50OyB0aGlzIGlzIGp1c3QgYSBwbGFjZWhvbGRlclxuICBjbGllbnQ/LmVtaXQoJ2JlZm9yZVNhbXBsaW5nJywgbXV0YWJsZVNwYW5TYW1wbGluZ0RhdGEsIHtcbiAgICBkZWNpc2lvbjogZmFsc2VcbiAgfSk7XG5cbiAgLy8gSWYgaG9vayBjb25zdW1lcnMgb3ZlcnJpZGUgdGhlIHBhcmVudFNhbXBsZWQgZmxhZywgd2Ugd2lsbCB1c2UgdGhhdCB2YWx1ZSBpbnN0ZWFkIG9mIHRoZSBhY3R1YWwgb25lXG4gIGNvbnN0IGZpbmFsUGFyZW50U2FtcGxlZCA9IG11dGFibGVTcGFuU2FtcGxpbmdEYXRhLnBhcmVudFNhbXBsZWQgPz8gcGFyZW50U2FtcGxlZDtcbiAgY29uc3QgZmluYWxBdHRyaWJ1dGVzID0gbXV0YWJsZVNwYW5TYW1wbGluZ0RhdGEuc3BhbkF0dHJpYnV0ZXM7XG4gIGNvbnN0IGN1cnJlbnRQcm9wYWdhdGlvbkNvbnRleHQgPSBzY29wZS5nZXRQcm9wYWdhdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgW3NhbXBsZWQsIHNhbXBsZVJhdGUsIGxvY2FsU2FtcGxlUmF0ZVdhc0FwcGxpZWRdID0gc2NvcGUuZ2V0U2NvcGVEYXRhKCkuc2RrUHJvY2Vzc2luZ01ldGFkYXRhW1NVUFBSRVNTX1RSQUNJTkdfS0VZXSA/IFtmYWxzZV0gOiBzYW1wbGVTcGFuKG9wdGlvbnMsIHtcbiAgICBuYW1lLFxuICAgIHBhcmVudFNhbXBsZWQ6IGZpbmFsUGFyZW50U2FtcGxlZCxcbiAgICBhdHRyaWJ1dGVzOiBmaW5hbEF0dHJpYnV0ZXMsXG4gICAgcGFyZW50U2FtcGxlUmF0ZTogcGFyc2VTYW1wbGVSYXRlKGN1cnJlbnRQcm9wYWdhdGlvbkNvbnRleHQuZHNjPy5zYW1wbGVfcmF0ZSlcbiAgfSwgY3VycmVudFByb3BhZ2F0aW9uQ29udGV4dC5zYW1wbGVSYW5kKTtcbiAgY29uc3Qgcm9vdFNwYW4gPSBuZXcgU2VudHJ5U3Bhbih7XG4gICAgLi4uc3BhbkFyZ3VtZW50cyxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0VdOiAnY3VzdG9tJyxcbiAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NBTVBMRV9SQVRFXTogc2FtcGxlUmF0ZSAhPT0gdW5kZWZpbmVkICYmIGxvY2FsU2FtcGxlUmF0ZVdhc0FwcGxpZWQgPyBzYW1wbGVSYXRlIDogdW5kZWZpbmVkLFxuICAgICAgLi4uZmluYWxBdHRyaWJ1dGVzXG4gICAgfSxcbiAgICBzYW1wbGVkXG4gIH0pO1xuICBpZiAoIXNhbXBsZWQgJiYgY2xpZW50KSB7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcubG9nKCdbVHJhY2luZ10gRGlzY2FyZGluZyByb290IHNwYW4gYmVjYXVzZSBpdHMgdHJhY2Ugd2FzIG5vdCBjaG9zZW4gdG8gYmUgc2FtcGxlZC4nKTtcbiAgICBjbGllbnQucmVjb3JkRHJvcHBlZEV2ZW50KCdzYW1wbGVfcmF0ZScsICd0cmFuc2FjdGlvbicpO1xuICB9XG4gIGlmIChjbGllbnQpIHtcbiAgICBjbGllbnQuZW1pdCgnc3BhblN0YXJ0Jywgcm9vdFNwYW4pO1xuICB9XG4gIHJldHVybiByb290U3Bhbjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBTcGFuYCB3aGlsZSBzZXR0aW5nIHRoZSBjdXJyZW50IGBTcGFuLmlkYCBhcyBgcGFyZW50U3BhbklkYC5cbiAqIFRoaXMgaW5oZXJpdHMgdGhlIHNhbXBsaW5nIGRlY2lzaW9uIGZyb20gdGhlIHBhcmVudCBzcGFuLlxuICovXG5mdW5jdGlvbiBfc3RhcnRDaGlsZFNwYW4ocGFyZW50U3Bhbiwgc2NvcGUsIHNwYW5Bcmd1bWVudHMpIHtcbiAgY29uc3Qge1xuICAgIHNwYW5JZCxcbiAgICB0cmFjZUlkXG4gIH0gPSBwYXJlbnRTcGFuLnNwYW5Db250ZXh0KCk7XG4gIGNvbnN0IHNhbXBsZWQgPSBzY29wZS5nZXRTY29wZURhdGEoKS5zZGtQcm9jZXNzaW5nTWV0YWRhdGFbU1VQUFJFU1NfVFJBQ0lOR19LRVldID8gZmFsc2UgOiBzcGFuSXNTYW1wbGVkKHBhcmVudFNwYW4pO1xuICBjb25zdCBjaGlsZFNwYW4gPSBzYW1wbGVkID8gbmV3IFNlbnRyeVNwYW4oe1xuICAgIC4uLnNwYW5Bcmd1bWVudHMsXG4gICAgcGFyZW50U3BhbklkOiBzcGFuSWQsXG4gICAgdHJhY2VJZCxcbiAgICBzYW1wbGVkXG4gIH0pIDogbmV3IFNlbnRyeU5vblJlY29yZGluZ1NwYW4oe1xuICAgIHRyYWNlSWRcbiAgfSk7XG4gIGFkZENoaWxkU3BhblRvU3BhbihwYXJlbnRTcGFuLCBjaGlsZFNwYW4pO1xuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgaWYgKGNsaWVudCkge1xuICAgIGNsaWVudC5lbWl0KCdzcGFuU3RhcnQnLCBjaGlsZFNwYW4pO1xuICAgIC8vIElmIGl0IGhhcyBhbiBlbmRUaW1lc3RhbXAsIGl0J3MgYWxyZWFkeSBlbmRlZFxuICAgIGlmIChzcGFuQXJndW1lbnRzLmVuZFRpbWVzdGFtcCkge1xuICAgICAgY2xpZW50LmVtaXQoJ3NwYW5FbmQnLCBjaGlsZFNwYW4pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2hpbGRTcGFuO1xufVxuZnVuY3Rpb24gZ2V0UGFyZW50U3BhbihzY29wZSwgY3VzdG9tUGFyZW50U3Bhbikge1xuICAvLyBhbHdheXMgdXNlIHRoZSBwYXNzZWQgaW4gc3BhbiBkaXJlY3RseVxuICBpZiAoY3VzdG9tUGFyZW50U3Bhbikge1xuICAgIHJldHVybiBjdXN0b21QYXJlbnRTcGFuO1xuICB9XG5cbiAgLy8gVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBgdW5kZWZpbmVkYCBhcyBpdCBtZWFucyB0aGUgdXNlciBleHBsaWNpdGx5IHdhbnRzIG5vIHBhcmVudCBzcGFuXG4gIGlmIChjdXN0b21QYXJlbnRTcGFuID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBjb25zdCBzcGFuID0gX2dldFNwYW5Gb3JTY29wZShzY29wZSk7XG4gIGlmICghc3Bhbikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gIGNvbnN0IG9wdGlvbnMgPSBjbGllbnQgPyBjbGllbnQuZ2V0T3B0aW9ucygpIDoge307XG4gIGlmIChvcHRpb25zLnBhcmVudFNwYW5Jc0Fsd2F5c1Jvb3RTcGFuKSB7XG4gICAgcmV0dXJuIGdldFJvb3RTcGFuKHNwYW4pO1xuICB9XG4gIHJldHVybiBzcGFuO1xufVxuZnVuY3Rpb24gZ2V0QWN0aXZlU3BhbldyYXBwZXIocGFyZW50U3Bhbikge1xuICByZXR1cm4gcGFyZW50U3BhbiAhPT0gdW5kZWZpbmVkID8gY2FsbGJhY2sgPT4ge1xuICAgIHJldHVybiB3aXRoQWN0aXZlU3BhbihwYXJlbnRTcGFuLCBjYWxsYmFjayk7XG4gIH0gOiBjYWxsYmFjayA9PiBjYWxsYmFjaygpO1xufVxuZXhwb3J0IHsgY29udGludWVUcmFjZSwgc3RhcnRJbmFjdGl2ZVNwYW4sIHN0YXJ0TmV3VHJhY2UsIHN0YXJ0U3Bhbiwgc3RhcnRTcGFuTWFudWFsLCBzdXBwcmVzc1RyYWNpbmcsIHdpdGhBY3RpdmVTcGFuIH07XG4iLCJpbXBvcnQgeyBnZXRDbGllbnQsIGdldEN1cnJlbnRTY29wZSB9IGZyb20gJy4uL2N1cnJlbnRTY29wZXMuanMnO1xuaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX0lETEVfU1BBTl9GSU5JU0hfUkVBU09OIH0gZnJvbSAnLi4vc2VtYW50aWNBdHRyaWJ1dGVzLmpzJztcbmltcG9ydCB7IGhhc1NwYW5zRW5hYmxlZCB9IGZyb20gJy4uL3V0aWxzL2hhc1NwYW5zRW5hYmxlZC5qcyc7XG5pbXBvcnQgeyBkZWJ1ZyB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBfc2V0U3BhbkZvclNjb3BlIH0gZnJvbSAnLi4vdXRpbHMvc3Bhbk9uU2NvcGUuanMnO1xuaW1wb3J0IHsgZ2V0QWN0aXZlU3Bhbiwgc3BhblRpbWVJbnB1dFRvU2Vjb25kcywgZ2V0U3BhbkRlc2NlbmRhbnRzLCBzcGFuVG9KU09OLCByZW1vdmVDaGlsZFNwYW5Gcm9tU3BhbiB9IGZyb20gJy4uL3V0aWxzL3NwYW5VdGlscy5qcyc7XG5pbXBvcnQgeyB0aW1lc3RhbXBJblNlY29uZHMgfSBmcm9tICcuLi91dGlscy90aW1lLmpzJztcbmltcG9ydCB7IGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU3BhbiwgZnJlZXplRHNjT25TcGFuIH0gZnJvbSAnLi9keW5hbWljU2FtcGxpbmdDb250ZXh0LmpzJztcbmltcG9ydCB7IFNlbnRyeU5vblJlY29yZGluZ1NwYW4gfSBmcm9tICcuL3NlbnRyeU5vblJlY29yZGluZ1NwYW4uanMnO1xuaW1wb3J0IHsgU1BBTl9TVEFUVVNfRVJST1IgfSBmcm9tICcuL3NwYW5zdGF0dXMuanMnO1xuaW1wb3J0IHsgc3RhcnRJbmFjdGl2ZVNwYW4gfSBmcm9tICcuL3RyYWNlLmpzJztcbmNvbnN0IFRSQUNJTkdfREVGQVVMVFMgPSB7XG4gIGlkbGVUaW1lb3V0OiAxMDAwLFxuICBmaW5hbFRpbWVvdXQ6IDMwMDAwLFxuICBjaGlsZFNwYW5UaW1lb3V0OiAxNTAwMFxufTtcbmNvbnN0IEZJTklTSF9SRUFTT05fSEVBUlRCRUFUX0ZBSUxFRCA9ICdoZWFydGJlYXRGYWlsZWQnO1xuY29uc3QgRklOSVNIX1JFQVNPTl9JRExFX1RJTUVPVVQgPSAnaWRsZVRpbWVvdXQnO1xuY29uc3QgRklOSVNIX1JFQVNPTl9GSU5BTF9USU1FT1VUID0gJ2ZpbmFsVGltZW91dCc7XG5jb25zdCBGSU5JU0hfUkVBU09OX0VYVEVSTkFMX0ZJTklTSCA9ICdleHRlcm5hbEZpbmlzaCc7XG5cbi8qKlxuICogQW4gaWRsZSBzcGFuIGlzIGEgc3BhbiB0aGF0IGF1dG9tYXRpY2FsbHkgZmluaXNoZXMuIEl0IGRvZXMgdGhpcyBieSB0cmFja2luZyBjaGlsZCBzcGFucyBhcyBhY3Rpdml0aWVzLlxuICogQW4gaWRsZSBzcGFuIGlzIGFsd2F5cyB0aGUgYWN0aXZlIHNwYW4uXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0SWRsZVNwYW4oc3RhcnRTcGFuT3B0aW9ucywgb3B0aW9ucyA9IHt9KSB7XG4gIC8vIEFjdGl2aXRpZXMgc3RvcmUgYSBsaXN0IG9mIGFjdGl2ZSBzcGFuc1xuICBjb25zdCBhY3Rpdml0aWVzID0gbmV3IE1hcCgpO1xuXG4gIC8vIFdlIHNob3VsZCBub3QgdXNlIGhlYXJ0YmVhdCBpZiB3ZSBmaW5pc2hlZCBhIHNwYW5cbiAgbGV0IF9maW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIFRpbWVyIHRoYXQgdHJhY2tzIGlkbGVUaW1lb3V0XG4gIGxldCBfaWRsZVRpbWVvdXRJRDtcblxuICAvLyBUaGUgcmVhc29uIHdoeSB0aGUgc3BhbiB3YXMgZmluaXNoZWRcbiAgbGV0IF9maW5pc2hSZWFzb24gPSBGSU5JU0hfUkVBU09OX0VYVEVSTkFMX0ZJTklTSDtcbiAgbGV0IF9hdXRvRmluaXNoQWxsb3dlZCA9ICFvcHRpb25zLmRpc2FibGVBdXRvRmluaXNoO1xuICBjb25zdCBfY2xlYW51cEhvb2tzID0gW107XG4gIGNvbnN0IHtcbiAgICBpZGxlVGltZW91dCA9IFRSQUNJTkdfREVGQVVMVFMuaWRsZVRpbWVvdXQsXG4gICAgZmluYWxUaW1lb3V0ID0gVFJBQ0lOR19ERUZBVUxUUy5maW5hbFRpbWVvdXQsXG4gICAgY2hpbGRTcGFuVGltZW91dCA9IFRSQUNJTkdfREVGQVVMVFMuY2hpbGRTcGFuVGltZW91dCxcbiAgICBiZWZvcmVTcGFuRW5kXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgaWYgKCFjbGllbnQgfHwgIWhhc1NwYW5zRW5hYmxlZCgpKSB7XG4gICAgY29uc3Qgc3BhbiA9IG5ldyBTZW50cnlOb25SZWNvcmRpbmdTcGFuKCk7XG4gICAgY29uc3QgZHNjID0ge1xuICAgICAgc2FtcGxlX3JhdGU6ICcwJyxcbiAgICAgIHNhbXBsZWQ6ICdmYWxzZScsXG4gICAgICAuLi5nZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4oc3BhbilcbiAgICB9O1xuICAgIGZyZWV6ZURzY09uU3BhbihzcGFuLCBkc2MpO1xuICAgIHJldHVybiBzcGFuO1xuICB9XG4gIGNvbnN0IHNjb3BlID0gZ2V0Q3VycmVudFNjb3BlKCk7XG4gIGNvbnN0IHByZXZpb3VzQWN0aXZlU3BhbiA9IGdldEFjdGl2ZVNwYW4oKTtcbiAgY29uc3Qgc3BhbiA9IF9zdGFydElkbGVTcGFuKHN0YXJ0U3Bhbk9wdGlvbnMpO1xuXG4gIC8vIFdlIHBhdGNoIHNwYW4uZW5kIHRvIGVuc3VyZSB3ZSBjYW4gcnVuIHNvbWUgdGhpbmdzIGJlZm9yZSB0aGUgc3BhbiBpcyBlbmRlZFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gIHNwYW4uZW5kID0gbmV3IFByb3h5KHNwYW4uZW5kLCB7XG4gICAgYXBwbHkodGFyZ2V0LCB0aGlzQXJnLCBhcmdzKSB7XG4gICAgICBpZiAoYmVmb3JlU3BhbkVuZCkge1xuICAgICAgICBiZWZvcmVTcGFuRW5kKHNwYW4pO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc3BhbiBpcyBub24tcmVjb3JkaW5nLCBub3RoaW5nIG1vcmUgdG8gZG8gaGVyZS4uLlxuICAgICAgLy8gVGhpcyBpcyB0aGUgY2FzZSBpZiB0cmFjaW5nIGlzIGVuYWJsZWQgYnV0IHRoaXMgc3BlY2lmaWMgc3BhbiB3YXMgbm90IHNhbXBsZWRcbiAgICAgIGlmICh0aGlzQXJnIGluc3RhbmNlb2YgU2VudHJ5Tm9uUmVjb3JkaW5nU3Bhbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEp1c3QgZW5zdXJpbmcgdGhhdCB0aGlzIGtlZXBzIHdvcmtpbmcsIGV2ZW4gaWYgd2UgZXZlciBoYXZlIG1vcmUgYXJndW1lbnRzIGhlcmVcbiAgICAgIGNvbnN0IFtkZWZpbmVkRW5kVGltZXN0YW1wLCAuLi5yZXN0XSA9IGFyZ3M7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBkZWZpbmVkRW5kVGltZXN0YW1wIHx8IHRpbWVzdGFtcEluU2Vjb25kcygpO1xuICAgICAgY29uc3Qgc3BhbkVuZFRpbWVzdGFtcCA9IHNwYW5UaW1lSW5wdXRUb1NlY29uZHModGltZXN0YW1wKTtcblxuICAgICAgLy8gRW5zdXJlIHdlIGVuZCB3aXRoIHRoZSBsYXN0IHNwYW4gdGltZXN0YW1wLCBpZiBwb3NzaWJsZVxuICAgICAgY29uc3Qgc3BhbnMgPSBnZXRTcGFuRGVzY2VuZGFudHMoc3BhbikuZmlsdGVyKGNoaWxkID0+IGNoaWxkICE9PSBzcGFuKTtcblxuICAgICAgLy8gSWYgd2UgaGF2ZSBubyBzcGFucywgd2UganVzdCBlbmQsIG5vdGhpbmcgZWxzZSB0byBkbyBoZXJlXG4gICAgICBpZiAoIXNwYW5zLmxlbmd0aCkge1xuICAgICAgICBvbklkbGVTcGFuRW5kZWQoc3BhbkVuZFRpbWVzdGFtcCk7XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmFwcGx5KHRhcmdldCwgdGhpc0FyZywgW3NwYW5FbmRUaW1lc3RhbXAsIC4uLnJlc3RdKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoaWxkRW5kVGltZXN0YW1wcyA9IHNwYW5zLm1hcChzcGFuID0+IHNwYW5Ub0pTT04oc3BhbikudGltZXN0YW1wKS5maWx0ZXIodGltZXN0YW1wID0+ICEhdGltZXN0YW1wKTtcbiAgICAgIGNvbnN0IGxhdGVzdFNwYW5FbmRUaW1lc3RhbXAgPSBjaGlsZEVuZFRpbWVzdGFtcHMubGVuZ3RoID8gTWF0aC5tYXgoLi4uY2hpbGRFbmRUaW1lc3RhbXBzKSA6IHVuZGVmaW5lZDtcblxuICAgICAgLy8gSW4gcmVhbGl0eSB0aGlzIHNob3VsZCBhbHdheXMgZXhpc3QgaGVyZSwgYnV0IHR5cGUtd2lzZSBpdCBtYXkgYmUgdW5kZWZpbmVkLi4uXG4gICAgICBjb25zdCBzcGFuU3RhcnRUaW1lc3RhbXAgPSBzcGFuVG9KU09OKHNwYW4pLnN0YXJ0X3RpbWVzdGFtcDtcblxuICAgICAgLy8gVGhlIGZpbmFsIGVuZFRpbWVzdGFtcCBzaG91bGQ6XG4gICAgICAvLyAqIE5ldmVyIGJlIGJlZm9yZSB0aGUgc3BhbiBzdGFydCB0aW1lc3RhbXBcbiAgICAgIC8vICogQmUgdGhlIGxhdGVzdFNwYW5FbmRUaW1lc3RhbXAsIGlmIHRoZXJlIGlzIG9uZSwgYW5kIGl0IGlzIHNtYWxsZXIgdGhhbiB0aGUgcGFzc2VkIHNwYW4gZW5kIHRpbWVzdGFtcFxuICAgICAgLy8gKiBPdGhlcndpc2UgYmUgdGhlIHBhc3NlZCBlbmQgdGltZXN0YW1wXG4gICAgICAvLyBGaW5hbCB0aW1lc3RhbXAgY2FuIG5ldmVyIGJlIGFmdGVyIGZpbmFsVGltZW91dFxuICAgICAgY29uc3QgZW5kVGltZXN0YW1wID0gTWF0aC5taW4oc3BhblN0YXJ0VGltZXN0YW1wID8gc3BhblN0YXJ0VGltZXN0YW1wICsgZmluYWxUaW1lb3V0IC8gMTAwMCA6IEluZmluaXR5LCBNYXRoLm1heChzcGFuU3RhcnRUaW1lc3RhbXAgfHwgLUluZmluaXR5LCBNYXRoLm1pbihzcGFuRW5kVGltZXN0YW1wLCBsYXRlc3RTcGFuRW5kVGltZXN0YW1wIHx8IEluZmluaXR5KSkpO1xuICAgICAgb25JZGxlU3BhbkVuZGVkKGVuZFRpbWVzdGFtcCk7XG4gICAgICByZXR1cm4gUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmcsIFtlbmRUaW1lc3RhbXAsIC4uLnJlc3RdKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSBleGlzdGluZyBpZGxlIHRpbWVvdXQsIGlmIHRoZXJlIGlzIG9uZS5cbiAgICovXG4gIGZ1bmN0aW9uIF9jYW5jZWxJZGxlVGltZW91dCgpIHtcbiAgICBpZiAoX2lkbGVUaW1lb3V0SUQpIHtcbiAgICAgIGNsZWFyVGltZW91dChfaWRsZVRpbWVvdXRJRCk7XG4gICAgICBfaWRsZVRpbWVvdXRJRCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzdGFydHMgaWRsZSB0aW1lb3V0LCBpZiB0aGVyZSBpcyBubyBydW5uaW5nIGlkbGUgdGltZW91dCBpdCB3aWxsIHN0YXJ0IG9uZS5cbiAgICovXG4gIGZ1bmN0aW9uIF9yZXN0YXJ0SWRsZVRpbWVvdXQoZW5kVGltZXN0YW1wKSB7XG4gICAgX2NhbmNlbElkbGVUaW1lb3V0KCk7XG4gICAgX2lkbGVUaW1lb3V0SUQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghX2ZpbmlzaGVkICYmIGFjdGl2aXRpZXMuc2l6ZSA9PT0gMCAmJiBfYXV0b0ZpbmlzaEFsbG93ZWQpIHtcbiAgICAgICAgX2ZpbmlzaFJlYXNvbiA9IEZJTklTSF9SRUFTT05fSURMRV9USU1FT1VUO1xuICAgICAgICBzcGFuLmVuZChlbmRUaW1lc3RhbXApO1xuICAgICAgfVxuICAgIH0sIGlkbGVUaW1lb3V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0YXJ0cyBjaGlsZCBzcGFuIHRpbWVvdXQsIGlmIHRoZXJlIGlzIG5vbmUgcnVubmluZyBpdCB3aWxsIHN0YXJ0IG9uZS5cbiAgICovXG4gIGZ1bmN0aW9uIF9yZXN0YXJ0Q2hpbGRTcGFuVGltZW91dChlbmRUaW1lc3RhbXApIHtcbiAgICBfaWRsZVRpbWVvdXRJRCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCFfZmluaXNoZWQgJiYgX2F1dG9GaW5pc2hBbGxvd2VkKSB7XG4gICAgICAgIF9maW5pc2hSZWFzb24gPSBGSU5JU0hfUkVBU09OX0hFQVJUQkVBVF9GQUlMRUQ7XG4gICAgICAgIHNwYW4uZW5kKGVuZFRpbWVzdGFtcCk7XG4gICAgICB9XG4gICAgfSwgY2hpbGRTcGFuVGltZW91dCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgdHJhY2tpbmcgYSBzcGVjaWZpYyBhY3Rpdml0eS5cbiAgICogQHBhcmFtIHNwYW5JZCBUaGUgc3BhbiBpZCB0aGF0IHJlcHJlc2VudHMgdGhlIGFjdGl2aXR5XG4gICAqL1xuICBmdW5jdGlvbiBfcHVzaEFjdGl2aXR5KHNwYW5JZCkge1xuICAgIF9jYW5jZWxJZGxlVGltZW91dCgpO1xuICAgIGFjdGl2aXRpZXMuc2V0KHNwYW5JZCwgdHJ1ZSk7XG4gICAgY29uc3QgZW5kVGltZXN0YW1wID0gdGltZXN0YW1wSW5TZWNvbmRzKCk7XG4gICAgLy8gV2UgbmVlZCB0byBhZGQgdGhlIHRpbWVvdXQgaGVyZSB0byBoYXZlIHRoZSByZWFsIGVuZHRpbWVzdGFtcCBvZiB0aGUgaWRsZSBzcGFuXG4gICAgLy8gUmVtZW1iZXIgdGltZXN0YW1wSW5TZWNvbmRzIGlzIGluIHNlY29uZHMsIHRpbWVvdXQgaXMgaW4gbXNcbiAgICBfcmVzdGFydENoaWxkU3BhblRpbWVvdXQoZW5kVGltZXN0YW1wICsgY2hpbGRTcGFuVGltZW91dCAvIDEwMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBhY3Rpdml0eSBmcm9tIHVzYWdlXG4gICAqIEBwYXJhbSBzcGFuSWQgVGhlIHNwYW4gaWQgdGhhdCByZXByZXNlbnRzIHRoZSBhY3Rpdml0eVxuICAgKi9cbiAgZnVuY3Rpb24gX3BvcEFjdGl2aXR5KHNwYW5JZCkge1xuICAgIGlmIChhY3Rpdml0aWVzLmhhcyhzcGFuSWQpKSB7XG4gICAgICBhY3Rpdml0aWVzLmRlbGV0ZShzcGFuSWQpO1xuICAgIH1cbiAgICBpZiAoYWN0aXZpdGllcy5zaXplID09PSAwKSB7XG4gICAgICBjb25zdCBlbmRUaW1lc3RhbXAgPSB0aW1lc3RhbXBJblNlY29uZHMoKTtcbiAgICAgIC8vIFdlIG5lZWQgdG8gYWRkIHRoZSB0aW1lb3V0IGhlcmUgdG8gaGF2ZSB0aGUgcmVhbCBlbmR0aW1lc3RhbXAgb2YgdGhlIGlkbGUgc3BhblxuICAgICAgLy8gUmVtZW1iZXIgdGltZXN0YW1wSW5TZWNvbmRzIGlzIGluIHNlY29uZHMsIHRpbWVvdXQgaXMgaW4gbXNcbiAgICAgIF9yZXN0YXJ0SWRsZVRpbWVvdXQoZW5kVGltZXN0YW1wICsgaWRsZVRpbWVvdXQgLyAxMDAwKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gb25JZGxlU3BhbkVuZGVkKGVuZFRpbWVzdGFtcCkge1xuICAgIF9maW5pc2hlZCA9IHRydWU7XG4gICAgYWN0aXZpdGllcy5jbGVhcigpO1xuICAgIF9jbGVhbnVwSG9va3MuZm9yRWFjaChjbGVhbnVwID0+IGNsZWFudXAoKSk7XG4gICAgX3NldFNwYW5Gb3JTY29wZShzY29wZSwgcHJldmlvdXNBY3RpdmVTcGFuKTtcbiAgICBjb25zdCBzcGFuSlNPTiA9IHNwYW5Ub0pTT04oc3Bhbik7XG4gICAgY29uc3Qge1xuICAgICAgc3RhcnRfdGltZXN0YW1wOiBzdGFydFRpbWVzdGFtcFxuICAgIH0gPSBzcGFuSlNPTjtcbiAgICAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4sIGJ1dCB0byBtYWtlIFRTIGhhcHB5Li4uXG4gICAgaWYgKCFzdGFydFRpbWVzdGFtcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gc3BhbkpTT04uZGF0YTtcbiAgICBpZiAoIWF0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9JRExFX1NQQU5fRklOSVNIX1JFQVNPTl0pIHtcbiAgICAgIHNwYW4uc2V0QXR0cmlidXRlKFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfSURMRV9TUEFOX0ZJTklTSF9SRUFTT04sIF9maW5pc2hSZWFzb24pO1xuICAgIH1cbiAgICBkZWJ1Zy5sb2coYFtUcmFjaW5nXSBJZGxlIHNwYW4gXCIke3NwYW5KU09OLm9wfVwiIGZpbmlzaGVkYCk7XG4gICAgY29uc3QgY2hpbGRTcGFucyA9IGdldFNwYW5EZXNjZW5kYW50cyhzcGFuKS5maWx0ZXIoY2hpbGQgPT4gY2hpbGQgIT09IHNwYW4pO1xuICAgIGxldCBkaXNjYXJkZWRTcGFucyA9IDA7XG4gICAgY2hpbGRTcGFucy5mb3JFYWNoKGNoaWxkU3BhbiA9PiB7XG4gICAgICAvLyBXZSBjYW5jZWwgYWxsIHBlbmRpbmcgc3BhbnMgd2l0aCBzdGF0dXMgXCJjYW5jZWxsZWRcIiB0byBpbmRpY2F0ZSB0aGUgaWRsZSBzcGFuIHdhcyBmaW5pc2hlZCBlYXJseVxuICAgICAgaWYgKGNoaWxkU3Bhbi5pc1JlY29yZGluZygpKSB7XG4gICAgICAgIGNoaWxkU3Bhbi5zZXRTdGF0dXMoe1xuICAgICAgICAgIGNvZGU6IFNQQU5fU1RBVFVTX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6ICdjYW5jZWxsZWQnXG4gICAgICAgIH0pO1xuICAgICAgICBjaGlsZFNwYW4uZW5kKGVuZFRpbWVzdGFtcCk7XG4gICAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZygnW1RyYWNpbmddIENhbmNlbGxpbmcgc3BhbiBzaW5jZSBzcGFuIGVuZGVkIGVhcmx5JywgSlNPTi5zdHJpbmdpZnkoY2hpbGRTcGFuLCB1bmRlZmluZWQsIDIpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoaWxkU3BhbkpTT04gPSBzcGFuVG9KU09OKGNoaWxkU3Bhbik7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHRpbWVzdGFtcDogY2hpbGRFbmRUaW1lc3RhbXAgPSAwLFxuICAgICAgICBzdGFydF90aW1lc3RhbXA6IGNoaWxkU3RhcnRUaW1lc3RhbXAgPSAwXG4gICAgICB9ID0gY2hpbGRTcGFuSlNPTjtcbiAgICAgIGNvbnN0IHNwYW5TdGFydGVkQmVmb3JlSWRsZVNwYW5FbmQgPSBjaGlsZFN0YXJ0VGltZXN0YW1wIDw9IGVuZFRpbWVzdGFtcDtcblxuICAgICAgLy8gQWRkIGEgZGVsdGEgd2l0aCBpZGxlIHRpbWVvdXQgc28gdGhhdCB3ZSBwcmV2ZW50IGZhbHNlIHBvc2l0aXZlc1xuICAgICAgY29uc3QgdGltZW91dFdpdGhNYXJnaW5PZkVycm9yID0gKGZpbmFsVGltZW91dCArIGlkbGVUaW1lb3V0KSAvIDEwMDA7XG4gICAgICBjb25zdCBzcGFuRW5kZWRCZWZvcmVGaW5hbFRpbWVvdXQgPSBjaGlsZEVuZFRpbWVzdGFtcCAtIGNoaWxkU3RhcnRUaW1lc3RhbXAgPD0gdGltZW91dFdpdGhNYXJnaW5PZkVycm9yO1xuICAgICAgaWYgKERFQlVHX0JVSUxEKSB7XG4gICAgICAgIGNvbnN0IHN0cmluZ2lmaWVkU3BhbiA9IEpTT04uc3RyaW5naWZ5KGNoaWxkU3BhbiwgdW5kZWZpbmVkLCAyKTtcbiAgICAgICAgaWYgKCFzcGFuU3RhcnRlZEJlZm9yZUlkbGVTcGFuRW5kKSB7XG4gICAgICAgICAgZGVidWcubG9nKCdbVHJhY2luZ10gRGlzY2FyZGluZyBzcGFuIHNpbmNlIGl0IGhhcHBlbmVkIGFmdGVyIGlkbGUgc3BhbiB3YXMgZmluaXNoZWQnLCBzdHJpbmdpZmllZFNwYW4pO1xuICAgICAgICB9IGVsc2UgaWYgKCFzcGFuRW5kZWRCZWZvcmVGaW5hbFRpbWVvdXQpIHtcbiAgICAgICAgICBkZWJ1Zy5sb2coJ1tUcmFjaW5nXSBEaXNjYXJkaW5nIHNwYW4gc2luY2UgaXQgZmluaXNoZWQgYWZ0ZXIgaWRsZSBzcGFuIGZpbmFsIHRpbWVvdXQnLCBzdHJpbmdpZmllZFNwYW4pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXNwYW5FbmRlZEJlZm9yZUZpbmFsVGltZW91dCB8fCAhc3BhblN0YXJ0ZWRCZWZvcmVJZGxlU3BhbkVuZCkge1xuICAgICAgICByZW1vdmVDaGlsZFNwYW5Gcm9tU3BhbihzcGFuLCBjaGlsZFNwYW4pO1xuICAgICAgICBkaXNjYXJkZWRTcGFucysrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChkaXNjYXJkZWRTcGFucyA+IDApIHtcbiAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdzZW50cnkuaWRsZV9zcGFuX2Rpc2NhcmRlZF9zcGFucycsIGRpc2NhcmRlZFNwYW5zKTtcbiAgICB9XG4gIH1cbiAgX2NsZWFudXBIb29rcy5wdXNoKGNsaWVudC5vbignc3BhblN0YXJ0Jywgc3RhcnRlZFNwYW4gPT4ge1xuICAgIC8vIElmIHdlIGFscmVhZHkgZmluaXNoZWQgdGhlIGlkbGUgc3BhbixcbiAgICAvLyBvciBpZiB0aGlzIGlzIHRoZSBpZGxlIHNwYW4gaXRzZWxmIGJlaW5nIHN0YXJ0ZWQsXG4gICAgLy8gb3IgaWYgdGhlIHN0YXJ0ZWQgc3BhbiBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZCxcbiAgICAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGl0IGZvciBhY3Rpdml0eVxuICAgIGlmIChfZmluaXNoZWQgfHwgc3RhcnRlZFNwYW4gPT09IHNwYW4gfHwgISFzcGFuVG9KU09OKHN0YXJ0ZWRTcGFuKS50aW1lc3RhbXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYWxsU3BhbnMgPSBnZXRTcGFuRGVzY2VuZGFudHMoc3Bhbik7XG5cbiAgICAvLyBJZiB0aGUgc3BhbiB0aGF0IHdhcyBqdXN0IHN0YXJ0ZWQgaXMgYSBjaGlsZCBvZiB0aGUgaWRsZSBzcGFuLCB3ZSBzaG91bGQgdHJhY2sgaXRcbiAgICBpZiAoYWxsU3BhbnMuaW5jbHVkZXMoc3RhcnRlZFNwYW4pKSB7XG4gICAgICBfcHVzaEFjdGl2aXR5KHN0YXJ0ZWRTcGFuLnNwYW5Db250ZXh0KCkuc3BhbklkKTtcbiAgICB9XG4gIH0pKTtcbiAgX2NsZWFudXBIb29rcy5wdXNoKGNsaWVudC5vbignc3BhbkVuZCcsIGVuZGVkU3BhbiA9PiB7XG4gICAgaWYgKF9maW5pc2hlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfcG9wQWN0aXZpdHkoZW5kZWRTcGFuLnNwYW5Db250ZXh0KCkuc3BhbklkKTtcbiAgfSkpO1xuICBfY2xlYW51cEhvb2tzLnB1c2goY2xpZW50Lm9uKCdpZGxlU3BhbkVuYWJsZUF1dG9GaW5pc2gnLCBzcGFuVG9BbGxvd0F1dG9GaW5pc2ggPT4ge1xuICAgIGlmIChzcGFuVG9BbGxvd0F1dG9GaW5pc2ggPT09IHNwYW4pIHtcbiAgICAgIF9hdXRvRmluaXNoQWxsb3dlZCA9IHRydWU7XG4gICAgICBfcmVzdGFydElkbGVUaW1lb3V0KCk7XG4gICAgICBpZiAoYWN0aXZpdGllcy5zaXplKSB7XG4gICAgICAgIF9yZXN0YXJ0Q2hpbGRTcGFuVGltZW91dCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSkpO1xuXG4gIC8vIFdlIG9ubHkgc3RhcnQgdGhlIGluaXRpYWwgaWRsZSB0aW1lb3V0IGlmIHdlIGFyZSBub3QgZGVsYXlpbmcgdGhlIGF1dG8gZmluaXNoXG4gIGlmICghb3B0aW9ucy5kaXNhYmxlQXV0b0ZpbmlzaCkge1xuICAgIF9yZXN0YXJ0SWRsZVRpbWVvdXQoKTtcbiAgfVxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpZiAoIV9maW5pc2hlZCkge1xuICAgICAgc3Bhbi5zZXRTdGF0dXMoe1xuICAgICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgICAgbWVzc2FnZTogJ2RlYWRsaW5lX2V4Y2VlZGVkJ1xuICAgICAgfSk7XG4gICAgICBfZmluaXNoUmVhc29uID0gRklOSVNIX1JFQVNPTl9GSU5BTF9USU1FT1VUO1xuICAgICAgc3Bhbi5lbmQoKTtcbiAgICB9XG4gIH0sIGZpbmFsVGltZW91dCk7XG4gIHJldHVybiBzcGFuO1xufVxuZnVuY3Rpb24gX3N0YXJ0SWRsZVNwYW4ob3B0aW9ucykge1xuICBjb25zdCBzcGFuID0gc3RhcnRJbmFjdGl2ZVNwYW4ob3B0aW9ucyk7XG4gIF9zZXRTcGFuRm9yU2NvcGUoZ2V0Q3VycmVudFNjb3BlKCksIHNwYW4pO1xuICBERUJVR19CVUlMRCAmJiBkZWJ1Zy5sb2coJ1tUcmFjaW5nXSBTdGFydGVkIHNwYW4gaXMgYW4gaWRsZSBzcGFuJyk7XG4gIHJldHVybiBzcGFuO1xufVxuZXhwb3J0IHsgVFJBQ0lOR19ERUZBVUxUUywgc3RhcnRJZGxlU3BhbiB9O1xuIiwiaW1wb3J0IHsgaXNUaGVuYWJsZSB9IGZyb20gJy4vaXMuanMnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5cbi8qKiBTeW5jUHJvbWlzZSBpbnRlcm5hbCBzdGF0ZXMgKi9cbmNvbnN0IFNUQVRFX1BFTkRJTkcgPSAwO1xuY29uc3QgU1RBVEVfUkVTT0xWRUQgPSAxO1xuY29uc3QgU1RBVEVfUkVKRUNURUQgPSAyO1xuXG4vKipcbiAqIENyZWF0ZXMgYSByZXNvbHZlZCBzeW5jIHByb21pc2UuXG4gKlxuICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0byByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGhcbiAqIEByZXR1cm5zIHRoZSByZXNvbHZlZCBzeW5jIHByb21pc2VcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZWRTeW5jUHJvbWlzZSh2YWx1ZSkge1xuICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgcmVqZWN0ZWQgc3luYyBwcm9taXNlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdG8gcmVqZWN0IHRoZSBwcm9taXNlIHdpdGhcbiAqIEByZXR1cm5zIHRoZSByZWplY3RlZCBzeW5jIHByb21pc2VcbiAqL1xuZnVuY3Rpb24gcmVqZWN0ZWRTeW5jUHJvbWlzZShyZWFzb24pIHtcbiAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRoZW5hYmxlIGNsYXNzIHRoYXQgYmVoYXZlcyBsaWtlIGEgUHJvbWlzZSBhbmQgZm9sbG93cyBpdCdzIGludGVyZmFjZVxuICogYnV0IGlzIG5vdCBhc3luYyBpbnRlcm5hbGx5XG4gKi9cbmNsYXNzIFN5bmNQcm9taXNlIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICB0aGlzLl9zdGF0ZSA9IFNUQVRFX1BFTkRJTkc7XG4gICAgdGhpcy5faGFuZGxlcnMgPSBbXTtcbiAgICB0aGlzLl9ydW5FeGVjdXRvcihleGVjdXRvcik7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgdGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCkge1xuICAgIHJldHVybiBuZXcgU3luY1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlcnMucHVzaChbZmFsc2UsIHJlc3VsdCA9PiB7XG4gICAgICAgIGlmICghb25mdWxmaWxsZWQpIHtcbiAgICAgICAgICAvLyBUT0RPOiDCr1xcXyjjg4QpXy/Cr1xuICAgICAgICAgIC8vIFRPRE86IEZJWE1FXG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNvbHZlKG9uZnVsZmlsbGVkKHJlc3VsdCkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICAgIGlmICghb25yZWplY3RlZCkge1xuICAgICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNvbHZlKG9ucmVqZWN0ZWQocmVhc29uKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfV0pO1xuICAgICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgY2F0Y2gob25yZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4odmFsID0+IHZhbCwgb25yZWplY3RlZCk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZmluYWxseShvbmZpbmFsbHkpIHtcbiAgICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCB2YWw7XG4gICAgICBsZXQgaXNSZWplY3RlZDtcbiAgICAgIHJldHVybiB0aGlzLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICBpc1JlamVjdGVkID0gZmFsc2U7XG4gICAgICAgIHZhbCA9IHZhbHVlO1xuICAgICAgICBpZiAob25maW5hbGx5KSB7XG4gICAgICAgICAgb25maW5hbGx5KCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICAgIGlzUmVqZWN0ZWQgPSB0cnVlO1xuICAgICAgICB2YWwgPSByZWFzb247XG4gICAgICAgIGlmIChvbmZpbmFsbHkpIHtcbiAgICAgICAgICBvbmZpbmFsbHkoKTtcbiAgICAgICAgfVxuICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgIGlmIChpc1JlamVjdGVkKSB7XG4gICAgICAgICAgcmVqZWN0KHZhbCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUodmFsKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEV4Y3V0ZSB0aGUgcmVzb2x2ZS9yZWplY3QgaGFuZGxlcnMuICovXG4gIF9leGVjdXRlSGFuZGxlcnMoKSB7XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBTVEFURV9QRU5ESU5HKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNhY2hlZEhhbmRsZXJzID0gdGhpcy5faGFuZGxlcnMuc2xpY2UoKTtcbiAgICB0aGlzLl9oYW5kbGVycyA9IFtdO1xuICAgIGNhY2hlZEhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7XG4gICAgICBpZiAoaGFuZGxlclswXSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IFNUQVRFX1JFU09MVkVEKSB7XG4gICAgICAgIGhhbmRsZXJbMV0odGhpcy5fdmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSBTVEFURV9SRUpFQ1RFRCkge1xuICAgICAgICBoYW5kbGVyWzJdKHRoaXMuX3ZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGhhbmRsZXJbMF0gPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIFJ1biB0aGUgZXhlY3V0b3IgZm9yIHRoZSBTeW5jUHJvbWlzZS4gKi9cbiAgX3J1bkV4ZWN1dG9yKGV4ZWN1dG9yKSB7XG4gICAgY29uc3Qgc2V0UmVzdWx0ID0gKHN0YXRlLCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSBTVEFURV9QRU5ESU5HKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChpc1RoZW5hYmxlKHZhbHVlKSkge1xuICAgICAgICB2b2lkIHZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnMoKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlc29sdmUgPSB2YWx1ZSA9PiB7XG4gICAgICBzZXRSZXN1bHQoU1RBVEVfUkVTT0xWRUQsIHZhbHVlKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlamVjdCA9IHJlYXNvbiA9PiB7XG4gICAgICBzZXRSZXN1bHQoU1RBVEVfUkVKRUNURUQsIHJlYXNvbik7XG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZWplY3QoZSk7XG4gICAgfVxuICB9XG59XG5leHBvcnQgeyBTeW5jUHJvbWlzZSwgcmVqZWN0ZWRTeW5jUHJvbWlzZSwgcmVzb2x2ZWRTeW5jUHJvbWlzZSB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IGlzVGhlbmFibGUgfSBmcm9tICcuL3V0aWxzL2lzLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgU3luY1Byb21pc2UgfSBmcm9tICcuL3V0aWxzL3N5bmNwcm9taXNlLmpzJztcblxuLyoqXG4gKiBQcm9jZXNzIGFuIGFycmF5IG9mIGV2ZW50IHByb2Nlc3NvcnMsIHJldHVybmluZyB0aGUgcHJvY2Vzc2VkIGV2ZW50IChvciBgbnVsbGAgaWYgdGhlIGV2ZW50IHdhcyBkcm9wcGVkKS5cbiAqL1xuZnVuY3Rpb24gbm90aWZ5RXZlbnRQcm9jZXNzb3JzKHByb2Nlc3NvcnMsIGV2ZW50LCBoaW50LCBpbmRleCA9IDApIHtcbiAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcHJvY2Vzc29yID0gcHJvY2Vzc29yc1tpbmRleF07XG4gICAgaWYgKGV2ZW50ID09PSBudWxsIHx8IHR5cGVvZiBwcm9jZXNzb3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc29sdmUoZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBwcm9jZXNzb3Ioe1xuICAgICAgICAuLi5ldmVudFxuICAgICAgfSwgaGludCk7XG4gICAgICBERUJVR19CVUlMRCAmJiBwcm9jZXNzb3IuaWQgJiYgcmVzdWx0ID09PSBudWxsICYmIGRlYnVnLmxvZyhgRXZlbnQgcHJvY2Vzc29yIFwiJHtwcm9jZXNzb3IuaWR9XCIgZHJvcHBlZCBldmVudGApO1xuICAgICAgaWYgKGlzVGhlbmFibGUocmVzdWx0KSkge1xuICAgICAgICB2b2lkIHJlc3VsdC50aGVuKGZpbmFsID0+IG5vdGlmeUV2ZW50UHJvY2Vzc29ycyhwcm9jZXNzb3JzLCBmaW5hbCwgaGludCwgaW5kZXggKyAxKS50aGVuKHJlc29sdmUpKS50aGVuKG51bGwsIHJlamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2b2lkIG5vdGlmeUV2ZW50UHJvY2Vzc29ycyhwcm9jZXNzb3JzLCByZXN1bHQsIGhpbnQsIGluZGV4ICsgMSkudGhlbihyZXNvbHZlKS50aGVuKG51bGwsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydCB7IG5vdGlmeUV2ZW50UHJvY2Vzc29ycyB9O1xuIiwiaW1wb3J0IHsgZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TcGFuIH0gZnJvbSAnLi4vdHJhY2luZy9keW5hbWljU2FtcGxpbmdDb250ZXh0LmpzJztcbmltcG9ydCB7IG1lcmdlIH0gZnJvbSAnLi9tZXJnZS5qcyc7XG5pbXBvcnQgeyBzcGFuVG9UcmFjZUNvbnRleHQsIGdldFJvb3RTcGFuLCBzcGFuVG9KU09OIH0gZnJvbSAnLi9zcGFuVXRpbHMuanMnO1xuXG4vKipcbiAqIEFwcGxpZXMgZGF0YSBmcm9tIHRoZSBzY29wZSB0byB0aGUgZXZlbnQgYW5kIHJ1bnMgYWxsIGV2ZW50IHByb2Nlc3NvcnMgb24gaXQuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5U2NvcGVEYXRhVG9FdmVudChldmVudCwgZGF0YSkge1xuICBjb25zdCB7XG4gICAgZmluZ2VycHJpbnQsXG4gICAgc3BhbixcbiAgICBicmVhZGNydW1icyxcbiAgICBzZGtQcm9jZXNzaW5nTWV0YWRhdGFcbiAgfSA9IGRhdGE7XG5cbiAgLy8gQXBwbHkgZ2VuZXJhbCBkYXRhXG4gIGFwcGx5RGF0YVRvRXZlbnQoZXZlbnQsIGRhdGEpO1xuXG4gIC8vIFdlIHdhbnQgdG8gc2V0IHRoZSB0cmFjZSBjb250ZXh0IGZvciBub3JtYWwgZXZlbnRzIG9ubHkgaWYgdGhlcmUgaXNuJ3QgYWxyZWFkeVxuICAvLyBhIHRyYWNlIGNvbnRleHQgb24gdGhlIGV2ZW50LiBUaGVyZSBpcyBhIHByb2R1Y3QgZmVhdHVyZSBpbiBwbGFjZSB3aGVyZSB3ZSBsaW5rXG4gIC8vIGVycm9ycyB3aXRoIHRyYW5zYWN0aW9uIGFuZCBpdCByZWxpZXMgb24gdGhhdC5cbiAgaWYgKHNwYW4pIHtcbiAgICBhcHBseVNwYW5Ub0V2ZW50KGV2ZW50LCBzcGFuKTtcbiAgfVxuICBhcHBseUZpbmdlcnByaW50VG9FdmVudChldmVudCwgZmluZ2VycHJpbnQpO1xuICBhcHBseUJyZWFkY3J1bWJzVG9FdmVudChldmVudCwgYnJlYWRjcnVtYnMpO1xuICBhcHBseVNka01ldGFkYXRhVG9FdmVudChldmVudCwgc2RrUHJvY2Vzc2luZ01ldGFkYXRhKTtcbn1cblxuLyoqIE1lcmdlIGRhdGEgb2YgdHdvIHNjb3BlcyB0b2dldGhlci4gKi9cbmZ1bmN0aW9uIG1lcmdlU2NvcGVEYXRhKGRhdGEsIG1lcmdlRGF0YSkge1xuICBjb25zdCB7XG4gICAgZXh0cmEsXG4gICAgdGFncyxcbiAgICB1c2VyLFxuICAgIGNvbnRleHRzLFxuICAgIGxldmVsLFxuICAgIHNka1Byb2Nlc3NpbmdNZXRhZGF0YSxcbiAgICBicmVhZGNydW1icyxcbiAgICBmaW5nZXJwcmludCxcbiAgICBldmVudFByb2Nlc3NvcnMsXG4gICAgYXR0YWNobWVudHMsXG4gICAgcHJvcGFnYXRpb25Db250ZXh0LFxuICAgIHRyYW5zYWN0aW9uTmFtZSxcbiAgICBzcGFuXG4gIH0gPSBtZXJnZURhdGE7XG4gIG1lcmdlQW5kT3ZlcndyaXRlU2NvcGVEYXRhKGRhdGEsICdleHRyYScsIGV4dHJhKTtcbiAgbWVyZ2VBbmRPdmVyd3JpdGVTY29wZURhdGEoZGF0YSwgJ3RhZ3MnLCB0YWdzKTtcbiAgbWVyZ2VBbmRPdmVyd3JpdGVTY29wZURhdGEoZGF0YSwgJ3VzZXInLCB1c2VyKTtcbiAgbWVyZ2VBbmRPdmVyd3JpdGVTY29wZURhdGEoZGF0YSwgJ2NvbnRleHRzJywgY29udGV4dHMpO1xuICBkYXRhLnNka1Byb2Nlc3NpbmdNZXRhZGF0YSA9IG1lcmdlKGRhdGEuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLCBzZGtQcm9jZXNzaW5nTWV0YWRhdGEsIDIpO1xuICBpZiAobGV2ZWwpIHtcbiAgICBkYXRhLmxldmVsID0gbGV2ZWw7XG4gIH1cbiAgaWYgKHRyYW5zYWN0aW9uTmFtZSkge1xuICAgIGRhdGEudHJhbnNhY3Rpb25OYW1lID0gdHJhbnNhY3Rpb25OYW1lO1xuICB9XG4gIGlmIChzcGFuKSB7XG4gICAgZGF0YS5zcGFuID0gc3BhbjtcbiAgfVxuICBpZiAoYnJlYWRjcnVtYnMubGVuZ3RoKSB7XG4gICAgZGF0YS5icmVhZGNydW1icyA9IFsuLi5kYXRhLmJyZWFkY3J1bWJzLCAuLi5icmVhZGNydW1ic107XG4gIH1cbiAgaWYgKGZpbmdlcnByaW50Lmxlbmd0aCkge1xuICAgIGRhdGEuZmluZ2VycHJpbnQgPSBbLi4uZGF0YS5maW5nZXJwcmludCwgLi4uZmluZ2VycHJpbnRdO1xuICB9XG4gIGlmIChldmVudFByb2Nlc3NvcnMubGVuZ3RoKSB7XG4gICAgZGF0YS5ldmVudFByb2Nlc3NvcnMgPSBbLi4uZGF0YS5ldmVudFByb2Nlc3NvcnMsIC4uLmV2ZW50UHJvY2Vzc29yc107XG4gIH1cbiAgaWYgKGF0dGFjaG1lbnRzLmxlbmd0aCkge1xuICAgIGRhdGEuYXR0YWNobWVudHMgPSBbLi4uZGF0YS5hdHRhY2htZW50cywgLi4uYXR0YWNobWVudHNdO1xuICB9XG4gIGRhdGEucHJvcGFnYXRpb25Db250ZXh0ID0ge1xuICAgIC4uLmRhdGEucHJvcGFnYXRpb25Db250ZXh0LFxuICAgIC4uLnByb3BhZ2F0aW9uQ29udGV4dFxuICB9O1xufVxuXG4vKipcbiAqIE1lcmdlcyBjZXJ0YWluIHNjb3BlIGRhdGEuIFVuZGVmaW5lZCB2YWx1ZXMgd2lsbCBvdmVyd3JpdGUgYW55IGV4aXN0aW5nIHZhbHVlcy5cbiAqIEV4cG9ydGVkIG9ubHkgZm9yIHRlc3RzLlxuICovXG5mdW5jdGlvbiBtZXJnZUFuZE92ZXJ3cml0ZVNjb3BlRGF0YShkYXRhLCBwcm9wLCBtZXJnZVZhbCkge1xuICBkYXRhW3Byb3BdID0gbWVyZ2UoZGF0YVtwcm9wXSwgbWVyZ2VWYWwsIDEpO1xufVxuZnVuY3Rpb24gYXBwbHlEYXRhVG9FdmVudChldmVudCwgZGF0YSkge1xuICBjb25zdCB7XG4gICAgZXh0cmEsXG4gICAgdGFncyxcbiAgICB1c2VyLFxuICAgIGNvbnRleHRzLFxuICAgIGxldmVsLFxuICAgIHRyYW5zYWN0aW9uTmFtZVxuICB9ID0gZGF0YTtcbiAgaWYgKE9iamVjdC5rZXlzKGV4dHJhKS5sZW5ndGgpIHtcbiAgICBldmVudC5leHRyYSA9IHtcbiAgICAgIC4uLmV4dHJhLFxuICAgICAgLi4uZXZlbnQuZXh0cmFcbiAgICB9O1xuICB9XG4gIGlmIChPYmplY3Qua2V5cyh0YWdzKS5sZW5ndGgpIHtcbiAgICBldmVudC50YWdzID0ge1xuICAgICAgLi4udGFncyxcbiAgICAgIC4uLmV2ZW50LnRhZ3NcbiAgICB9O1xuICB9XG4gIGlmIChPYmplY3Qua2V5cyh1c2VyKS5sZW5ndGgpIHtcbiAgICBldmVudC51c2VyID0ge1xuICAgICAgLi4udXNlcixcbiAgICAgIC4uLmV2ZW50LnVzZXJcbiAgICB9O1xuICB9XG4gIGlmIChPYmplY3Qua2V5cyhjb250ZXh0cykubGVuZ3RoKSB7XG4gICAgZXZlbnQuY29udGV4dHMgPSB7XG4gICAgICAuLi5jb250ZXh0cyxcbiAgICAgIC4uLmV2ZW50LmNvbnRleHRzXG4gICAgfTtcbiAgfVxuICBpZiAobGV2ZWwpIHtcbiAgICBldmVudC5sZXZlbCA9IGxldmVsO1xuICB9XG5cbiAgLy8gdHJhbnNhY3Rpb24gZXZlbnRzIGdldCB0aGVpciBgdHJhbnNhY3Rpb25gIGZyb20gdGhlIHJvb3Qgc3BhbiBuYW1lXG4gIGlmICh0cmFuc2FjdGlvbk5hbWUgJiYgZXZlbnQudHlwZSAhPT0gJ3RyYW5zYWN0aW9uJykge1xuICAgIGV2ZW50LnRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb25OYW1lO1xuICB9XG59XG5mdW5jdGlvbiBhcHBseUJyZWFkY3J1bWJzVG9FdmVudChldmVudCwgYnJlYWRjcnVtYnMpIHtcbiAgY29uc3QgbWVyZ2VkQnJlYWRjcnVtYnMgPSBbLi4uKGV2ZW50LmJyZWFkY3J1bWJzIHx8IFtdKSwgLi4uYnJlYWRjcnVtYnNdO1xuICBldmVudC5icmVhZGNydW1icyA9IG1lcmdlZEJyZWFkY3J1bWJzLmxlbmd0aCA/IG1lcmdlZEJyZWFkY3J1bWJzIDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYXBwbHlTZGtNZXRhZGF0YVRvRXZlbnQoZXZlbnQsIHNka1Byb2Nlc3NpbmdNZXRhZGF0YSkge1xuICBldmVudC5zZGtQcm9jZXNzaW5nTWV0YWRhdGEgPSB7XG4gICAgLi4uZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLFxuICAgIC4uLnNka1Byb2Nlc3NpbmdNZXRhZGF0YVxuICB9O1xufVxuZnVuY3Rpb24gYXBwbHlTcGFuVG9FdmVudChldmVudCwgc3Bhbikge1xuICBldmVudC5jb250ZXh0cyA9IHtcbiAgICB0cmFjZTogc3BhblRvVHJhY2VDb250ZXh0KHNwYW4pLFxuICAgIC4uLmV2ZW50LmNvbnRleHRzXG4gIH07XG4gIGV2ZW50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YSA9IHtcbiAgICBkeW5hbWljU2FtcGxpbmdDb250ZXh0OiBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4oc3BhbiksXG4gICAgLi4uZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhXG4gIH07XG4gIGNvbnN0IHJvb3RTcGFuID0gZ2V0Um9vdFNwYW4oc3Bhbik7XG4gIGNvbnN0IHRyYW5zYWN0aW9uTmFtZSA9IHNwYW5Ub0pTT04ocm9vdFNwYW4pLmRlc2NyaXB0aW9uO1xuICBpZiAodHJhbnNhY3Rpb25OYW1lICYmICFldmVudC50cmFuc2FjdGlvbiAmJiBldmVudC50eXBlID09PSAndHJhbnNhY3Rpb24nKSB7XG4gICAgZXZlbnQudHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvbk5hbWU7XG4gIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIGZpbmdlcnByaW50IGZyb20gdGhlIHNjb3BlIHRvIHRoZSBldmVudCBpZiB0aGVyZSdzIG9uZSxcbiAqIHVzZXMgbWVzc2FnZSBpZiB0aGVyZSdzIG9uZSBpbnN0ZWFkIG9yIGdldCByaWQgb2YgZW1wdHkgZmluZ2VycHJpbnRcbiAqL1xuZnVuY3Rpb24gYXBwbHlGaW5nZXJwcmludFRvRXZlbnQoZXZlbnQsIGZpbmdlcnByaW50KSB7XG4gIC8vIE1ha2Ugc3VyZSBpdCdzIGFuIGFycmF5IGZpcnN0IGFuZCB3ZSBhY3R1YWxseSBoYXZlIHNvbWV0aGluZyBpbiBwbGFjZVxuICBldmVudC5maW5nZXJwcmludCA9IGV2ZW50LmZpbmdlcnByaW50ID8gQXJyYXkuaXNBcnJheShldmVudC5maW5nZXJwcmludCkgPyBldmVudC5maW5nZXJwcmludCA6IFtldmVudC5maW5nZXJwcmludF0gOiBbXTtcblxuICAvLyBJZiB3ZSBoYXZlIHNvbWV0aGluZyBvbiB0aGUgc2NvcGUsIHRoZW4gbWVyZ2UgaXQgd2l0aCBldmVudFxuICBpZiAoZmluZ2VycHJpbnQpIHtcbiAgICBldmVudC5maW5nZXJwcmludCA9IGV2ZW50LmZpbmdlcnByaW50LmNvbmNhdChmaW5nZXJwcmludCk7XG4gIH1cblxuICAvLyBJZiB3ZSBoYXZlIG5vIGRhdGEgYXQgYWxsLCByZW1vdmUgZW1wdHkgYXJyYXkgZGVmYXVsdFxuICBpZiAoIWV2ZW50LmZpbmdlcnByaW50Lmxlbmd0aCkge1xuICAgIGRlbGV0ZSBldmVudC5maW5nZXJwcmludDtcbiAgfVxufVxuZXhwb3J0IHsgYXBwbHlTY29wZURhdGFUb0V2ZW50LCBtZXJnZUFuZE92ZXJ3cml0ZVNjb3BlRGF0YSwgbWVyZ2VTY29wZURhdGEgfTtcbiIsImltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICcuL3dvcmxkd2lkZS5qcyc7XG5sZXQgcGFyc2VkU3RhY2tSZXN1bHRzO1xubGV0IGxhc3RLZXlzQ291bnQ7XG5sZXQgY2FjaGVkRmlsZW5hbWVEZWJ1Z0lkcztcblxuLyoqXG4gKiBSZXR1cm5zIGEgbWFwIG9mIGZpbGVuYW1lcyB0byBkZWJ1ZyBpZGVudGlmaWVycy5cbiAqL1xuZnVuY3Rpb24gZ2V0RmlsZW5hbWVUb0RlYnVnSWRNYXAoc3RhY2tQYXJzZXIpIHtcbiAgY29uc3QgZGVidWdJZE1hcCA9IEdMT0JBTF9PQkouX3NlbnRyeURlYnVnSWRzO1xuICBpZiAoIWRlYnVnSWRNYXApIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgY29uc3QgZGVidWdJZEtleXMgPSBPYmplY3Qua2V5cyhkZWJ1Z0lkTWFwKTtcblxuICAvLyBJZiB0aGUgY291bnQgb2YgcmVnaXN0ZXJlZCBnbG9iYWxzIGhhc24ndCBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IGNhbGwsIHdlXG4gIC8vIGNhbiBqdXN0IHJldHVybiB0aGUgY2FjaGVkIHJlc3VsdC5cbiAgaWYgKGNhY2hlZEZpbGVuYW1lRGVidWdJZHMgJiYgZGVidWdJZEtleXMubGVuZ3RoID09PSBsYXN0S2V5c0NvdW50KSB7XG4gICAgcmV0dXJuIGNhY2hlZEZpbGVuYW1lRGVidWdJZHM7XG4gIH1cbiAgbGFzdEtleXNDb3VudCA9IGRlYnVnSWRLZXlzLmxlbmd0aDtcblxuICAvLyBCdWlsZCBhIG1hcCBvZiBmaWxlbmFtZSAtPiBkZWJ1Z19pZC5cbiAgY2FjaGVkRmlsZW5hbWVEZWJ1Z0lkcyA9IGRlYnVnSWRLZXlzLnJlZHVjZSgoYWNjLCBzdGFja0tleSkgPT4ge1xuICAgIGlmICghcGFyc2VkU3RhY2tSZXN1bHRzKSB7XG4gICAgICBwYXJzZWRTdGFja1Jlc3VsdHMgPSB7fTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gcGFyc2VkU3RhY2tSZXN1bHRzW3N0YWNrS2V5XTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBhY2NbcmVzdWx0WzBdXSA9IHJlc3VsdFsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGFyc2VkU3RhY2sgPSBzdGFja1BhcnNlcihzdGFja0tleSk7XG4gICAgICBmb3IgKGxldCBpID0gcGFyc2VkU3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3Qgc3RhY2tGcmFtZSA9IHBhcnNlZFN0YWNrW2ldO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHN0YWNrRnJhbWU/LmZpbGVuYW1lO1xuICAgICAgICBjb25zdCBkZWJ1Z0lkID0gZGVidWdJZE1hcFtzdGFja0tleV07XG4gICAgICAgIGlmIChmaWxlbmFtZSAmJiBkZWJ1Z0lkKSB7XG4gICAgICAgICAgYWNjW2ZpbGVuYW1lXSA9IGRlYnVnSWQ7XG4gICAgICAgICAgcGFyc2VkU3RhY2tSZXN1bHRzW3N0YWNrS2V5XSA9IFtmaWxlbmFtZSwgZGVidWdJZF07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuICByZXR1cm4gY2FjaGVkRmlsZW5hbWVEZWJ1Z0lkcztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbGlzdCBvZiBkZWJ1ZyBpbWFnZXMgZm9yIHRoZSBnaXZlbiByZXNvdXJjZXMuXG4gKi9cbmZ1bmN0aW9uIGdldERlYnVnSW1hZ2VzRm9yUmVzb3VyY2VzKHN0YWNrUGFyc2VyLCByZXNvdXJjZV9wYXRocykge1xuICBjb25zdCBmaWxlbmFtZURlYnVnSWRNYXAgPSBnZXRGaWxlbmFtZVRvRGVidWdJZE1hcChzdGFja1BhcnNlcik7XG4gIGlmICghZmlsZW5hbWVEZWJ1Z0lkTWFwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGltYWdlcyA9IFtdO1xuICBmb3IgKGNvbnN0IHBhdGggb2YgcmVzb3VyY2VfcGF0aHMpIHtcbiAgICBpZiAocGF0aCAmJiBmaWxlbmFtZURlYnVnSWRNYXBbcGF0aF0pIHtcbiAgICAgIGltYWdlcy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ3NvdXJjZW1hcCcsXG4gICAgICAgIGNvZGVfZmlsZTogcGF0aCxcbiAgICAgICAgZGVidWdfaWQ6IGZpbGVuYW1lRGVidWdJZE1hcFtwYXRoXVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBpbWFnZXM7XG59XG5leHBvcnQgeyBnZXREZWJ1Z0ltYWdlc0ZvclJlc291cmNlcywgZ2V0RmlsZW5hbWVUb0RlYnVnSWRNYXAgfTtcbiIsImltcG9ydCB7IERFRkFVTFRfRU5WSVJPTk1FTlQgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsU2NvcGUgfSBmcm9tICcuLi9jdXJyZW50U2NvcGVzLmpzJztcbmltcG9ydCB7IG5vdGlmeUV2ZW50UHJvY2Vzc29ycyB9IGZyb20gJy4uL2V2ZW50UHJvY2Vzc29ycy5qcyc7XG5pbXBvcnQgeyBTY29wZSB9IGZyb20gJy4uL3Njb3BlLmpzJztcbmltcG9ydCB7IG1lcmdlU2NvcGVEYXRhLCBhcHBseVNjb3BlRGF0YVRvRXZlbnQgfSBmcm9tICcuL2FwcGx5U2NvcGVEYXRhVG9FdmVudC5qcyc7XG5pbXBvcnQgeyBnZXRGaWxlbmFtZVRvRGVidWdJZE1hcCB9IGZyb20gJy4vZGVidWctaWRzLmpzJztcbmltcG9ydCB7IHV1aWQ0LCBhZGRFeGNlcHRpb25NZWNoYW5pc20gfSBmcm9tICcuL21pc2MuanMnO1xuaW1wb3J0IHsgbm9ybWFsaXplIH0gZnJvbSAnLi9ub3JtYWxpemUuanMnO1xuaW1wb3J0IHsgdHJ1bmNhdGUgfSBmcm9tICcuL3N0cmluZy5qcyc7XG5pbXBvcnQgeyBkYXRlVGltZXN0YW1wSW5TZWNvbmRzIH0gZnJvbSAnLi90aW1lLmpzJztcblxuLyoqXG4gKiBUaGlzIHR5cGUgbWFrZXMgc3VyZSB0aGF0IHdlIGdldCBlaXRoZXIgYSBDYXB0dXJlQ29udGV4dCwgT1IgYW4gRXZlbnRIaW50LlxuICogSXQgZG9lcyBub3QgYWxsb3cgbWl4aW5nIHRoZW0sIHdoaWNoIGNvdWxkIGxlYWQgdG8gdW5leHBlY3RlZCBvdXRjb21lcywgZS5nLiB0aGlzIGlzIGRpc2FsbG93ZWQ6XG4gKiB7IHVzZXI6IHsgaWQ6ICcxMjMnIH0sIG1lY2hhbmlzbTogeyBoYW5kbGVkOiBmYWxzZSB9IH1cbiAqL1xuXG4vKipcbiAqIEFkZHMgY29tbW9uIGluZm9ybWF0aW9uIHRvIGV2ZW50cy5cbiAqXG4gKiBUaGUgaW5mb3JtYXRpb24gaW5jbHVkZXMgcmVsZWFzZSBhbmQgZW52aXJvbm1lbnQgZnJvbSBgb3B0aW9uc2AsXG4gKiBicmVhZGNydW1icyBhbmQgY29udGV4dCAoZXh0cmEsIHRhZ3MgYW5kIHVzZXIpIGZyb20gdGhlIHNjb3BlLlxuICpcbiAqIEluZm9ybWF0aW9uIHRoYXQgaXMgYWxyZWFkeSBwcmVzZW50IGluIHRoZSBldmVudCBpcyBuZXZlciBvdmVyd3JpdHRlbi4gRm9yXG4gKiBuZXN0ZWQgb2JqZWN0cywgc3VjaCBhcyB0aGUgY29udGV4dCwga2V5cyBhcmUgbWVyZ2VkLlxuICpcbiAqIEBwYXJhbSBldmVudCBUaGUgb3JpZ2luYWwgZXZlbnQuXG4gKiBAcGFyYW0gaGludCBNYXkgY29udGFpbiBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcmlnaW5hbCBleGNlcHRpb24uXG4gKiBAcGFyYW0gc2NvcGUgQSBzY29wZSBjb250YWluaW5nIGV2ZW50IG1ldGFkYXRhLlxuICogQHJldHVybnMgQSBuZXcgZXZlbnQgd2l0aCBtb3JlIGluZm9ybWF0aW9uLlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBwcmVwYXJlRXZlbnQob3B0aW9ucywgZXZlbnQsIGhpbnQsIHNjb3BlLCBjbGllbnQsIGlzb2xhdGlvblNjb3BlKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVEZXB0aCA9IDMsXG4gICAgbm9ybWFsaXplTWF4QnJlYWR0aCA9IDEwMDBcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHByZXBhcmVkID0ge1xuICAgIC4uLmV2ZW50LFxuICAgIGV2ZW50X2lkOiBldmVudC5ldmVudF9pZCB8fCBoaW50LmV2ZW50X2lkIHx8IHV1aWQ0KCksXG4gICAgdGltZXN0YW1wOiBldmVudC50aW1lc3RhbXAgfHwgZGF0ZVRpbWVzdGFtcEluU2Vjb25kcygpXG4gIH07XG4gIGNvbnN0IGludGVncmF0aW9ucyA9IGhpbnQuaW50ZWdyYXRpb25zIHx8IG9wdGlvbnMuaW50ZWdyYXRpb25zLm1hcChpID0+IGkubmFtZSk7XG4gIGFwcGx5Q2xpZW50T3B0aW9ucyhwcmVwYXJlZCwgb3B0aW9ucyk7XG4gIGFwcGx5SW50ZWdyYXRpb25zTWV0YWRhdGEocHJlcGFyZWQsIGludGVncmF0aW9ucyk7XG4gIGlmIChjbGllbnQpIHtcbiAgICBjbGllbnQuZW1pdCgnYXBwbHlGcmFtZU1ldGFkYXRhJywgZXZlbnQpO1xuICB9XG5cbiAgLy8gT25seSBwdXQgZGVidWcgSURzIG9udG8gZnJhbWVzIGZvciBlcnJvciBldmVudHMuXG4gIGlmIChldmVudC50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICBhcHBseURlYnVnSWRzKHByZXBhcmVkLCBvcHRpb25zLnN0YWNrUGFyc2VyKTtcbiAgfVxuXG4gIC8vIElmIHdlIGhhdmUgc2NvcGUgZ2l2ZW4gdG8gdXMsIHVzZSBpdCBhcyB0aGUgYmFzZSBmb3IgZnVydGhlciBtb2RpZmljYXRpb25zLlxuICAvLyBUaGlzIGFsbG93cyB1cyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IGNvcHlpbmcgb2YgZGF0YSBpZiBgY2FwdHVyZUNvbnRleHRgIGlzIG5vdCBwcm92aWRlZC5cbiAgY29uc3QgZmluYWxTY29wZSA9IGdldEZpbmFsU2NvcGUoc2NvcGUsIGhpbnQuY2FwdHVyZUNvbnRleHQpO1xuICBpZiAoaGludC5tZWNoYW5pc20pIHtcbiAgICBhZGRFeGNlcHRpb25NZWNoYW5pc20ocHJlcGFyZWQsIGhpbnQubWVjaGFuaXNtKTtcbiAgfVxuICBjb25zdCBjbGllbnRFdmVudFByb2Nlc3NvcnMgPSBjbGllbnQgPyBjbGllbnQuZ2V0RXZlbnRQcm9jZXNzb3JzKCkgOiBbXTtcblxuICAvLyBUaGlzIHNob3VsZCBiZSB0aGUgbGFzdCB0aGluZyBjYWxsZWQsIHNpbmNlIHdlIHdhbnQgdGhhdFxuICAvLyB7QGxpbmsgU2NvcGUuYWRkRXZlbnRQcm9jZXNzb3J9IGdldHMgdGhlIGZpbmlzaGVkIHByZXBhcmVkIGV2ZW50LlxuICAvLyBNZXJnZSBzY29wZSBkYXRhIHRvZ2V0aGVyXG4gIGNvbnN0IGRhdGEgPSBnZXRHbG9iYWxTY29wZSgpLmdldFNjb3BlRGF0YSgpO1xuICBpZiAoaXNvbGF0aW9uU2NvcGUpIHtcbiAgICBjb25zdCBpc29sYXRpb25EYXRhID0gaXNvbGF0aW9uU2NvcGUuZ2V0U2NvcGVEYXRhKCk7XG4gICAgbWVyZ2VTY29wZURhdGEoZGF0YSwgaXNvbGF0aW9uRGF0YSk7XG4gIH1cbiAgaWYgKGZpbmFsU2NvcGUpIHtcbiAgICBjb25zdCBmaW5hbFNjb3BlRGF0YSA9IGZpbmFsU2NvcGUuZ2V0U2NvcGVEYXRhKCk7XG4gICAgbWVyZ2VTY29wZURhdGEoZGF0YSwgZmluYWxTY29wZURhdGEpO1xuICB9XG4gIGNvbnN0IGF0dGFjaG1lbnRzID0gWy4uLihoaW50LmF0dGFjaG1lbnRzIHx8IFtdKSwgLi4uZGF0YS5hdHRhY2htZW50c107XG4gIGlmIChhdHRhY2htZW50cy5sZW5ndGgpIHtcbiAgICBoaW50LmF0dGFjaG1lbnRzID0gYXR0YWNobWVudHM7XG4gIH1cbiAgYXBwbHlTY29wZURhdGFUb0V2ZW50KHByZXBhcmVkLCBkYXRhKTtcbiAgY29uc3QgZXZlbnRQcm9jZXNzb3JzID0gWy4uLmNsaWVudEV2ZW50UHJvY2Vzc29ycyxcbiAgLy8gUnVuIHNjb3BlIGV2ZW50IHByb2Nlc3NvcnMgX2FmdGVyXyBhbGwgb3RoZXIgcHJvY2Vzc29yc1xuICAuLi5kYXRhLmV2ZW50UHJvY2Vzc29yc107XG4gIGNvbnN0IHJlc3VsdCA9IG5vdGlmeUV2ZW50UHJvY2Vzc29ycyhldmVudFByb2Nlc3NvcnMsIHByZXBhcmVkLCBoaW50KTtcbiAgcmV0dXJuIHJlc3VsdC50aGVuKGV2dCA9PiB7XG4gICAgaWYgKGV2dCkge1xuICAgICAgLy8gV2UgYXBwbHkgdGhlIGRlYnVnX21ldGEgZmllbGQgb25seSBhZnRlciBhbGwgZXZlbnQgcHJvY2Vzc29ycyBoYXZlIHJhbiwgc28gdGhhdCBpZiBhbnkgZXZlbnQgcHJvY2Vzc29ycyBtb2RpZmllZFxuICAgICAgLy8gZmlsZSBuYW1lcyAoZS5nLnRoZSBSZXdyaXRlRnJhbWVzIGludGVncmF0aW9uKSB0aGUgZmlsZW5hbWUgLT4gZGVidWcgSUQgcmVsYXRpb25zaGlwIGlzbid0IGRlc3Ryb3llZC5cbiAgICAgIC8vIFRoaXMgc2hvdWxkIG5vdCBjYXVzZSBhbnkgUElJIGlzc3Vlcywgc2luY2Ugd2UncmUgb25seSBtb3ZpbmcgZGF0YSB0aGF0IGlzIGFscmVhZHkgb24gdGhlIGV2ZW50IGFuZCBub3QgYWRkaW5nXG4gICAgICAvLyBhbnkgbmV3IGRhdGFcbiAgICAgIGFwcGx5RGVidWdNZXRhKGV2dCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygbm9ybWFsaXplRGVwdGggPT09ICdudW1iZXInICYmIG5vcm1hbGl6ZURlcHRoID4gMCkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZUV2ZW50KGV2dCwgbm9ybWFsaXplRGVwdGgsIG5vcm1hbGl6ZU1heEJyZWFkdGgpO1xuICAgIH1cbiAgICByZXR1cm4gZXZ0O1xuICB9KTtcbn1cblxuLyoqXG4gKiBFbmhhbmNlcyBldmVudCB1c2luZyB0aGUgY2xpZW50IGNvbmZpZ3VyYXRpb24uXG4gKiBJdCB0YWtlcyBjYXJlIG9mIGFsbCBcInN0YXRpY1wiIHZhbHVlcyBsaWtlIGVudmlyb25tZW50LCByZWxlYXNlIGFuZCBgZGlzdGAsXG4gKiBhcyB3ZWxsIGFzIHRydW5jYXRpbmcgb3Zlcmx5IGxvbmcgdmFsdWVzLlxuICpcbiAqIE9ubHkgZXhwb3J0ZWQgZm9yIHRlc3RzLlxuICpcbiAqIEBwYXJhbSBldmVudCBldmVudCBpbnN0YW5jZSB0byBiZSBlbmhhbmNlZFxuICovXG5mdW5jdGlvbiBhcHBseUNsaWVudE9wdGlvbnMoZXZlbnQsIG9wdGlvbnMpIHtcbiAgY29uc3Qge1xuICAgIGVudmlyb25tZW50LFxuICAgIHJlbGVhc2UsXG4gICAgZGlzdCxcbiAgICBtYXhWYWx1ZUxlbmd0aCA9IDI1MFxuICB9ID0gb3B0aW9ucztcblxuICAvLyBlbXB0eSBzdHJpbmdzIGRvIG5vdCBtYWtlIHNlbnNlIGZvciBlbnZpcm9ubWVudCwgcmVsZWFzZSwgYW5kIGRpc3RcbiAgLy8gc28gd2UgaGFuZGxlIHRoZW0gdGhlIHNhbWUgYXMgaWYgdGhleSB3ZXJlIG5vdCBwcm92aWRlZFxuICBldmVudC5lbnZpcm9ubWVudCA9IGV2ZW50LmVudmlyb25tZW50IHx8IGVudmlyb25tZW50IHx8IERFRkFVTFRfRU5WSVJPTk1FTlQ7XG4gIGlmICghZXZlbnQucmVsZWFzZSAmJiByZWxlYXNlKSB7XG4gICAgZXZlbnQucmVsZWFzZSA9IHJlbGVhc2U7XG4gIH1cbiAgaWYgKCFldmVudC5kaXN0ICYmIGRpc3QpIHtcbiAgICBldmVudC5kaXN0ID0gZGlzdDtcbiAgfVxuICBjb25zdCByZXF1ZXN0ID0gZXZlbnQucmVxdWVzdDtcbiAgaWYgKHJlcXVlc3Q/LnVybCkge1xuICAgIHJlcXVlc3QudXJsID0gdHJ1bmNhdGUocmVxdWVzdC51cmwsIG1heFZhbHVlTGVuZ3RoKTtcbiAgfVxufVxuXG4vKipcbiAqIFB1dHMgZGVidWcgSURzIGludG8gdGhlIHN0YWNrIGZyYW1lcyBvZiBhbiBlcnJvciBldmVudC5cbiAqL1xuZnVuY3Rpb24gYXBwbHlEZWJ1Z0lkcyhldmVudCwgc3RhY2tQYXJzZXIpIHtcbiAgLy8gQnVpbGQgYSBtYXAgb2YgZmlsZW5hbWUgLT4gZGVidWdfaWRcbiAgY29uc3QgZmlsZW5hbWVEZWJ1Z0lkTWFwID0gZ2V0RmlsZW5hbWVUb0RlYnVnSWRNYXAoc3RhY2tQYXJzZXIpO1xuICBldmVudC5leGNlcHRpb24/LnZhbHVlcz8uZm9yRWFjaChleGNlcHRpb24gPT4ge1xuICAgIGV4Y2VwdGlvbi5zdGFja3RyYWNlPy5mcmFtZXM/LmZvckVhY2goZnJhbWUgPT4ge1xuICAgICAgaWYgKGZyYW1lLmZpbGVuYW1lKSB7XG4gICAgICAgIGZyYW1lLmRlYnVnX2lkID0gZmlsZW5hbWVEZWJ1Z0lkTWFwW2ZyYW1lLmZpbGVuYW1lXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogTW92ZXMgZGVidWcgSURzIGZyb20gdGhlIHN0YWNrIGZyYW1lcyBvZiBhbiBlcnJvciBldmVudCBpbnRvIHRoZSBkZWJ1Z19tZXRhIGZpZWxkLlxuICovXG5mdW5jdGlvbiBhcHBseURlYnVnTWV0YShldmVudCkge1xuICAvLyBFeHRyYWN0IGRlYnVnIElEcyBhbmQgZmlsZW5hbWVzIGZyb20gdGhlIHN0YWNrIGZyYW1lcyBvbiB0aGUgZXZlbnQuXG4gIGNvbnN0IGZpbGVuYW1lRGVidWdJZE1hcCA9IHt9O1xuICBldmVudC5leGNlcHRpb24/LnZhbHVlcz8uZm9yRWFjaChleGNlcHRpb24gPT4ge1xuICAgIGV4Y2VwdGlvbi5zdGFja3RyYWNlPy5mcmFtZXM/LmZvckVhY2goZnJhbWUgPT4ge1xuICAgICAgaWYgKGZyYW1lLmRlYnVnX2lkKSB7XG4gICAgICAgIGlmIChmcmFtZS5hYnNfcGF0aCkge1xuICAgICAgICAgIGZpbGVuYW1lRGVidWdJZE1hcFtmcmFtZS5hYnNfcGF0aF0gPSBmcmFtZS5kZWJ1Z19pZDtcbiAgICAgICAgfSBlbHNlIGlmIChmcmFtZS5maWxlbmFtZSkge1xuICAgICAgICAgIGZpbGVuYW1lRGVidWdJZE1hcFtmcmFtZS5maWxlbmFtZV0gPSBmcmFtZS5kZWJ1Z19pZDtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgZnJhbWUuZGVidWdfaWQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBpZiAoT2JqZWN0LmtleXMoZmlsZW5hbWVEZWJ1Z0lkTWFwKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGaWxsIGRlYnVnX21ldGEgaW5mb3JtYXRpb25cbiAgZXZlbnQuZGVidWdfbWV0YSA9IGV2ZW50LmRlYnVnX21ldGEgfHwge307XG4gIGV2ZW50LmRlYnVnX21ldGEuaW1hZ2VzID0gZXZlbnQuZGVidWdfbWV0YS5pbWFnZXMgfHwgW107XG4gIGNvbnN0IGltYWdlcyA9IGV2ZW50LmRlYnVnX21ldGEuaW1hZ2VzO1xuICBPYmplY3QuZW50cmllcyhmaWxlbmFtZURlYnVnSWRNYXApLmZvckVhY2goKFtmaWxlbmFtZSwgZGVidWdfaWRdKSA9PiB7XG4gICAgaW1hZ2VzLnB1c2goe1xuICAgICAgdHlwZTogJ3NvdXJjZW1hcCcsXG4gICAgICBjb2RlX2ZpbGU6IGZpbGVuYW1lLFxuICAgICAgZGVidWdfaWRcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBhZGRzIGFsbCB1c2VkIGludGVncmF0aW9ucyB0byB0aGUgU0RLIGluZm8gaW4gdGhlIGV2ZW50LlxuICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCB0aGF0IHdpbGwgYmUgZmlsbGVkIHdpdGggYWxsIGludGVncmF0aW9ucy5cbiAqL1xuZnVuY3Rpb24gYXBwbHlJbnRlZ3JhdGlvbnNNZXRhZGF0YShldmVudCwgaW50ZWdyYXRpb25OYW1lcykge1xuICBpZiAoaW50ZWdyYXRpb25OYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgZXZlbnQuc2RrID0gZXZlbnQuc2RrIHx8IHt9O1xuICAgIGV2ZW50LnNkay5pbnRlZ3JhdGlvbnMgPSBbLi4uKGV2ZW50LnNkay5pbnRlZ3JhdGlvbnMgfHwgW10pLCAuLi5pbnRlZ3JhdGlvbk5hbWVzXTtcbiAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYG5vcm1hbGl6ZWAgZnVuY3Rpb24gb24gbmVjZXNzYXJ5IGBFdmVudGAgYXR0cmlidXRlcyB0byBtYWtlIHRoZW0gc2FmZSBmb3Igc2VyaWFsaXphdGlvbi5cbiAqIE5vcm1hbGl6ZWQga2V5czpcbiAqIC0gYGJyZWFkY3J1bWJzLmRhdGFgXG4gKiAtIGB1c2VyYFxuICogLSBgY29udGV4dHNgXG4gKiAtIGBleHRyYWBcbiAqIEBwYXJhbSBldmVudCBFdmVudFxuICogQHJldHVybnMgTm9ybWFsaXplZCBldmVudFxuICovXG5mdW5jdGlvbiBub3JtYWxpemVFdmVudChldmVudCwgZGVwdGgsIG1heEJyZWFkdGgpIHtcbiAgaWYgKCFldmVudCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB7XG4gICAgLi4uZXZlbnQsXG4gICAgLi4uKGV2ZW50LmJyZWFkY3J1bWJzICYmIHtcbiAgICAgIGJyZWFkY3J1bWJzOiBldmVudC5icmVhZGNydW1icy5tYXAoYiA9PiAoe1xuICAgICAgICAuLi5iLFxuICAgICAgICAuLi4oYi5kYXRhICYmIHtcbiAgICAgICAgICBkYXRhOiBub3JtYWxpemUoYi5kYXRhLCBkZXB0aCwgbWF4QnJlYWR0aClcbiAgICAgICAgfSlcbiAgICAgIH0pKVxuICAgIH0pLFxuICAgIC4uLihldmVudC51c2VyICYmIHtcbiAgICAgIHVzZXI6IG5vcm1hbGl6ZShldmVudC51c2VyLCBkZXB0aCwgbWF4QnJlYWR0aClcbiAgICB9KSxcbiAgICAuLi4oZXZlbnQuY29udGV4dHMgJiYge1xuICAgICAgY29udGV4dHM6IG5vcm1hbGl6ZShldmVudC5jb250ZXh0cywgZGVwdGgsIG1heEJyZWFkdGgpXG4gICAgfSksXG4gICAgLi4uKGV2ZW50LmV4dHJhICYmIHtcbiAgICAgIGV4dHJhOiBub3JtYWxpemUoZXZlbnQuZXh0cmEsIGRlcHRoLCBtYXhCcmVhZHRoKVxuICAgIH0pXG4gIH07XG5cbiAgLy8gZXZlbnQuY29udGV4dHMudHJhY2Ugc3RvcmVzIGluZm9ybWF0aW9uIGFib3V0IGEgVHJhbnNhY3Rpb24uIFNpbWlsYXJseSxcbiAgLy8gZXZlbnQuc3BhbnNbXSBzdG9yZXMgaW5mb3JtYXRpb24gYWJvdXQgY2hpbGQgU3BhbnMuIEdpdmVuIHRoYXQgYVxuICAvLyBUcmFuc2FjdGlvbiBpcyBjb25jZXB0dWFsbHkgYSBTcGFuLCBub3JtYWxpemF0aW9uIHNob3VsZCBhcHBseSB0byBib3RoXG4gIC8vIFRyYW5zYWN0aW9ucyBhbmQgU3BhbnMgY29uc2lzdGVudGx5LlxuICAvLyBGb3Igbm93IHRoZSBkZWNpc2lvbiBpcyB0byBza2lwIG5vcm1hbGl6YXRpb24gb2YgVHJhbnNhY3Rpb25zIGFuZCBTcGFucyxcbiAgLy8gc28gdGhpcyBibG9jayBvdmVyd3JpdGVzIHRoZSBub3JtYWxpemVkIGV2ZW50IHRvIGFkZCBiYWNrIHRoZSBvcmlnaW5hbFxuICAvLyBUcmFuc2FjdGlvbiBpbmZvcm1hdGlvbiBwcmlvciB0byBub3JtYWxpemF0aW9uLlxuICBpZiAoZXZlbnQuY29udGV4dHM/LnRyYWNlICYmIG5vcm1hbGl6ZWQuY29udGV4dHMpIHtcbiAgICBub3JtYWxpemVkLmNvbnRleHRzLnRyYWNlID0gZXZlbnQuY29udGV4dHMudHJhY2U7XG5cbiAgICAvLyBldmVudC5jb250ZXh0cy50cmFjZS5kYXRhIG1heSBjb250YWluIGNpcmN1bGFyL2Rhbmdlcm91cyBkYXRhIHNvIHdlIG5lZWQgdG8gbm9ybWFsaXplIGl0XG4gICAgaWYgKGV2ZW50LmNvbnRleHRzLnRyYWNlLmRhdGEpIHtcbiAgICAgIG5vcm1hbGl6ZWQuY29udGV4dHMudHJhY2UuZGF0YSA9IG5vcm1hbGl6ZShldmVudC5jb250ZXh0cy50cmFjZS5kYXRhLCBkZXB0aCwgbWF4QnJlYWR0aCk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXZlbnQuc3BhbnNbXS5kYXRhIG1heSBjb250YWluIGNpcmN1bGFyL2Rhbmdlcm91cyBkYXRhIHNvIHdlIG5lZWQgdG8gbm9ybWFsaXplIGl0XG4gIGlmIChldmVudC5zcGFucykge1xuICAgIG5vcm1hbGl6ZWQuc3BhbnMgPSBldmVudC5zcGFucy5tYXAoc3BhbiA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zcGFuLFxuICAgICAgICAuLi4oc3Bhbi5kYXRhICYmIHtcbiAgICAgICAgICBkYXRhOiBub3JtYWxpemUoc3Bhbi5kYXRhLCBkZXB0aCwgbWF4QnJlYWR0aClcbiAgICAgICAgfSlcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvLyBldmVudC5jb250ZXh0cy5mbGFncyAoRmVhdHVyZUZsYWdDb250ZXh0KSBzdG9yZXMgY29udGV4dCBmb3Igb3VyIGZlYXR1cmVcbiAgLy8gZmxhZyBpbnRlZ3JhdGlvbnMuIEl0IGhhcyBhIGdyZWF0ZXIgbmVzdGluZyBkZXB0aCB0aGFuIG91ciBvdGhlciB0eXBlZFxuICAvLyBDb250ZXh0cywgc28gd2UgcmUtbm9ybWFsaXplIHdpdGggYSBmaXhlZCBkZXB0aCBvZiAzIGhlcmUuIFdlIGRvIG5vdCB3YW50XG4gIC8vIHRvIHNraXAgdGhpcyBpbiBjYXNlIG9mIGNvbmZsaWN0aW5nLCB1c2VyLXByb3ZpZGVkIGNvbnRleHQuXG4gIGlmIChldmVudC5jb250ZXh0cz8uZmxhZ3MgJiYgbm9ybWFsaXplZC5jb250ZXh0cykge1xuICAgIG5vcm1hbGl6ZWQuY29udGV4dHMuZmxhZ3MgPSBub3JtYWxpemUoZXZlbnQuY29udGV4dHMuZmxhZ3MsIDMsIG1heEJyZWFkdGgpO1xuICB9XG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuZnVuY3Rpb24gZ2V0RmluYWxTY29wZShzY29wZSwgY2FwdHVyZUNvbnRleHQpIHtcbiAgaWYgKCFjYXB0dXJlQ29udGV4dCkge1xuICAgIHJldHVybiBzY29wZTtcbiAgfVxuICBjb25zdCBmaW5hbFNjb3BlID0gc2NvcGUgPyBzY29wZS5jbG9uZSgpIDogbmV3IFNjb3BlKCk7XG4gIGZpbmFsU2NvcGUudXBkYXRlKGNhcHR1cmVDb250ZXh0KTtcbiAgcmV0dXJuIGZpbmFsU2NvcGU7XG59XG5cbi8qKlxuICogUGFyc2UgZWl0aGVyIGFuIGBFdmVudEhpbnRgIGRpcmVjdGx5LCBvciBjb252ZXJ0IGEgYENhcHR1cmVDb250ZXh0YCB0byBhbiBgRXZlbnRIaW50YC5cbiAqIFRoaXMgaXMgdXNlZCB0byBhbGxvdyB0byB1cGRhdGUgbWV0aG9kIHNpZ25hdHVyZXMgdGhhdCB1c2VkIHRvIGFjY2VwdCBhIGBDYXB0dXJlQ29udGV4dGAgYnV0IHNob3VsZCBub3cgYWNjZXB0IGFuIGBFdmVudEhpbnRgLlxuICovXG5mdW5jdGlvbiBwYXJzZUV2ZW50SGludE9yQ2FwdHVyZUNvbnRleHQoaGludCkge1xuICBpZiAoIWhpbnQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLy8gSWYgeW91IHBhc3MgYSBTY29wZSBvciBgKCkgPT4gU2NvcGVgIGFzIENhcHR1cmVDb250ZXh0LCB3ZSBqdXN0IHJldHVybiB0aGlzIGFzIGNhcHR1cmVDb250ZXh0XG4gIGlmIChoaW50SXNTY29wZU9yRnVuY3Rpb24oaGludCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2FwdHVyZUNvbnRleHQ6IGhpbnRcbiAgICB9O1xuICB9XG4gIGlmIChoaW50SXNTY29wZUNvbnRleHQoaGludCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2FwdHVyZUNvbnRleHQ6IGhpbnRcbiAgICB9O1xuICB9XG4gIHJldHVybiBoaW50O1xufVxuZnVuY3Rpb24gaGludElzU2NvcGVPckZ1bmN0aW9uKGhpbnQpIHtcbiAgcmV0dXJuIGhpbnQgaW5zdGFuY2VvZiBTY29wZSB8fCB0eXBlb2YgaGludCA9PT0gJ2Z1bmN0aW9uJztcbn1cbmNvbnN0IGNhcHR1cmVDb250ZXh0S2V5cyA9IFsndXNlcicsICdsZXZlbCcsICdleHRyYScsICdjb250ZXh0cycsICd0YWdzJywgJ2ZpbmdlcnByaW50JywgJ3Byb3BhZ2F0aW9uQ29udGV4dCddO1xuZnVuY3Rpb24gaGludElzU2NvcGVDb250ZXh0KGhpbnQpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGhpbnQpLnNvbWUoa2V5ID0+IGNhcHR1cmVDb250ZXh0S2V5cy5pbmNsdWRlcyhrZXkpKTtcbn1cbmV4cG9ydCB7IGFwcGx5Q2xpZW50T3B0aW9ucywgYXBwbHlEZWJ1Z0lkcywgYXBwbHlEZWJ1Z01ldGEsIHBhcnNlRXZlbnRIaW50T3JDYXB0dXJlQ29udGV4dCwgcHJlcGFyZUV2ZW50IH07XG4iLCJpbXBvcnQgeyBnZXRDdXJyZW50U2NvcGUsIGdldENsaWVudCwgd2l0aElzb2xhdGlvblNjb3BlLCBnZXRJc29sYXRpb25TY29wZSB9IGZyb20gJy4vY3VycmVudFNjb3Blcy5qcyc7XG5pbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgbWFrZVNlc3Npb24sIHVwZGF0ZVNlc3Npb24sIGNsb3NlU2Vzc2lvbiB9IGZyb20gJy4vc2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyBpc1RoZW5hYmxlIH0gZnJvbSAnLi91dGlscy9pcy5qcyc7XG5pbXBvcnQgeyBkZWJ1ZyB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7IHV1aWQ0IH0gZnJvbSAnLi91dGlscy9taXNjLmpzJztcbmltcG9ydCB7IHBhcnNlRXZlbnRIaW50T3JDYXB0dXJlQ29udGV4dCB9IGZyb20gJy4vdXRpbHMvcHJlcGFyZUV2ZW50LmpzJztcbmltcG9ydCB7IHRpbWVzdGFtcEluU2Vjb25kcyB9IGZyb20gJy4vdXRpbHMvdGltZS5qcyc7XG5pbXBvcnQgeyBHTE9CQUxfT0JKIH0gZnJvbSAnLi91dGlscy93b3JsZHdpZGUuanMnO1xuXG4vKipcbiAqIENhcHR1cmVzIGFuIGV4Y2VwdGlvbiBldmVudCBhbmQgc2VuZHMgaXQgdG8gU2VudHJ5LlxuICpcbiAqIEBwYXJhbSBleGNlcHRpb24gVGhlIGV4Y2VwdGlvbiB0byBjYXB0dXJlLlxuICogQHBhcmFtIGhpbnQgT3B0aW9uYWwgYWRkaXRpb25hbCBkYXRhIHRvIGF0dGFjaCB0byB0aGUgU2VudHJ5IGV2ZW50LlxuICogQHJldHVybnMgdGhlIGlkIG9mIHRoZSBjYXB0dXJlZCBTZW50cnkgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGNhcHR1cmVFeGNlcHRpb24oZXhjZXB0aW9uLCBoaW50KSB7XG4gIHJldHVybiBnZXRDdXJyZW50U2NvcGUoKS5jYXB0dXJlRXhjZXB0aW9uKGV4Y2VwdGlvbiwgcGFyc2VFdmVudEhpbnRPckNhcHR1cmVDb250ZXh0KGhpbnQpKTtcbn1cblxuLyoqXG4gKiBDYXB0dXJlcyBhIG1lc3NhZ2UgZXZlbnQgYW5kIHNlbmRzIGl0IHRvIFNlbnRyeS5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBzZW5kIHRvIFNlbnRyeS5cbiAqIEBwYXJhbSBjYXB0dXJlQ29udGV4dCBEZWZpbmUgdGhlIGxldmVsIG9mIHRoZSBtZXNzYWdlIG9yIHBhc3MgaW4gYWRkaXRpb25hbCBkYXRhIHRvIGF0dGFjaCB0byB0aGUgbWVzc2FnZS5cbiAqIEByZXR1cm5zIHRoZSBpZCBvZiB0aGUgY2FwdHVyZWQgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gY2FwdHVyZU1lc3NhZ2UobWVzc2FnZSwgY2FwdHVyZUNvbnRleHQpIHtcbiAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gcHJvdmlkZSBleHBsaWNpdCBzY29wZXMgdXBncmFkZSwgd2l0aG91dCBjaGFuZ2luZyB0aGUgb3JpZ2luYWxcbiAgLy8gYXJpdHkgb2YgdGhlIGBjYXB0dXJlTWVzc2FnZShtZXNzYWdlLCBsZXZlbClgIG1ldGhvZC5cbiAgY29uc3QgbGV2ZWwgPSB0eXBlb2YgY2FwdHVyZUNvbnRleHQgPT09ICdzdHJpbmcnID8gY2FwdHVyZUNvbnRleHQgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IGNvbnRleHQgPSB0eXBlb2YgY2FwdHVyZUNvbnRleHQgIT09ICdzdHJpbmcnID8ge1xuICAgIGNhcHR1cmVDb250ZXh0XG4gIH0gOiB1bmRlZmluZWQ7XG4gIHJldHVybiBnZXRDdXJyZW50U2NvcGUoKS5jYXB0dXJlTWVzc2FnZShtZXNzYWdlLCBsZXZlbCwgY29udGV4dCk7XG59XG5cbi8qKlxuICogQ2FwdHVyZXMgYSBtYW51YWxseSBjcmVhdGVkIGV2ZW50IGFuZCBzZW5kcyBpdCB0byBTZW50cnkuXG4gKlxuICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCB0byBzZW5kIHRvIFNlbnRyeS5cbiAqIEBwYXJhbSBoaW50IE9wdGlvbmFsIGFkZGl0aW9uYWwgZGF0YSB0byBhdHRhY2ggdG8gdGhlIFNlbnRyeSBldmVudC5cbiAqIEByZXR1cm5zIHRoZSBpZCBvZiB0aGUgY2FwdHVyZWQgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGNhcHR1cmVFdmVudChldmVudCwgaGludCkge1xuICByZXR1cm4gZ2V0Q3VycmVudFNjb3BlKCkuY2FwdHVyZUV2ZW50KGV2ZW50LCBoaW50KTtcbn1cblxuLyoqXG4gKiBTZXRzIGNvbnRleHQgZGF0YSB3aXRoIHRoZSBnaXZlbiBuYW1lLlxuICogQHBhcmFtIG5hbWUgb2YgdGhlIGNvbnRleHRcbiAqIEBwYXJhbSBjb250ZXh0IEFueSBraW5kIG9mIGRhdGEuIFRoaXMgZGF0YSB3aWxsIGJlIG5vcm1hbGl6ZWQuXG4gKi9cbmZ1bmN0aW9uIHNldENvbnRleHQobmFtZSwgY29udGV4dCkge1xuICBnZXRJc29sYXRpb25TY29wZSgpLnNldENvbnRleHQobmFtZSwgY29udGV4dCk7XG59XG5cbi8qKlxuICogU2V0IGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgbWVyZ2VkIHNlbnQgYXMgZXh0cmEgZGF0YSB3aXRoIHRoZSBldmVudC5cbiAqIEBwYXJhbSBleHRyYXMgRXh0cmFzIG9iamVjdCB0byBtZXJnZSBpbnRvIGN1cnJlbnQgY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gc2V0RXh0cmFzKGV4dHJhcykge1xuICBnZXRJc29sYXRpb25TY29wZSgpLnNldEV4dHJhcyhleHRyYXMpO1xufVxuXG4vKipcbiAqIFNldCBrZXk6dmFsdWUgdGhhdCB3aWxsIGJlIHNlbnQgYXMgZXh0cmEgZGF0YSB3aXRoIHRoZSBldmVudC5cbiAqIEBwYXJhbSBrZXkgU3RyaW5nIG9mIGV4dHJhXG4gKiBAcGFyYW0gZXh0cmEgQW55IGtpbmQgb2YgZGF0YS4gVGhpcyBkYXRhIHdpbGwgYmUgbm9ybWFsaXplZC5cbiAqL1xuZnVuY3Rpb24gc2V0RXh0cmEoa2V5LCBleHRyYSkge1xuICBnZXRJc29sYXRpb25TY29wZSgpLnNldEV4dHJhKGtleSwgZXh0cmEpO1xufVxuXG4vKipcbiAqIFNldCBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIG1lcmdlZCBzZW50IGFzIHRhZ3MgZGF0YSB3aXRoIHRoZSBldmVudC5cbiAqIEBwYXJhbSB0YWdzIFRhZ3MgY29udGV4dCBvYmplY3QgdG8gbWVyZ2UgaW50byBjdXJyZW50IGNvbnRleHQuXG4gKi9cbmZ1bmN0aW9uIHNldFRhZ3ModGFncykge1xuICBnZXRJc29sYXRpb25TY29wZSgpLnNldFRhZ3ModGFncyk7XG59XG5cbi8qKlxuICogU2V0IGtleTp2YWx1ZSB0aGF0IHdpbGwgYmUgc2VudCBhcyB0YWdzIGRhdGEgd2l0aCB0aGUgZXZlbnQuXG4gKlxuICogQ2FuIGFsc28gYmUgdXNlZCB0byB1bnNldCBhIHRhZywgYnkgcGFzc2luZyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAcGFyYW0ga2V5IFN0cmluZyBrZXkgb2YgdGFnXG4gKiBAcGFyYW0gdmFsdWUgVmFsdWUgb2YgdGFnXG4gKi9cbmZ1bmN0aW9uIHNldFRhZyhrZXksIHZhbHVlKSB7XG4gIGdldElzb2xhdGlvblNjb3BlKCkuc2V0VGFnKGtleSwgdmFsdWUpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdXNlciBjb250ZXh0IGluZm9ybWF0aW9uIGZvciBmdXR1cmUgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSB1c2VyIFVzZXIgY29udGV4dCBvYmplY3QgdG8gYmUgc2V0IGluIHRoZSBjdXJyZW50IGNvbnRleHQuIFBhc3MgYG51bGxgIHRvIHVuc2V0IHRoZSB1c2VyLlxuICovXG5mdW5jdGlvbiBzZXRVc2VyKHVzZXIpIHtcbiAgZ2V0SXNvbGF0aW9uU2NvcGUoKS5zZXRVc2VyKHVzZXIpO1xufVxuXG4vKipcbiAqIFRoZSBsYXN0IGVycm9yIGV2ZW50IGlkIG9mIHRoZSBpc29sYXRpb24gc2NvcGUuXG4gKlxuICogV2FybmluZzogVGhpcyBmdW5jdGlvbiByZWFsbHkgcmV0dXJucyB0aGUgbGFzdCByZWNvcmRlZCBlcnJvciBldmVudCBpZCBvbiB0aGUgY3VycmVudFxuICogaXNvbGF0aW9uIHNjb3BlLiBJZiB5b3UgY2FsbCB0aGlzIGZ1bmN0aW9uIGFmdGVyIGhhbmRsaW5nIGEgY2VydGFpbiBlcnJvciBhbmQgYW5vdGhlciBlcnJvclxuICogaXMgY2FwdHVyZWQgaW4gYmV0d2VlbiwgdGhlIGxhc3Qgb25lIGlzIHJldHVybmVkIGluc3RlYWQgb2YgdGhlIG9uZSB5b3UgbWlnaHQgZXhwZWN0LlxuICogQWxzbywgaWRzIG9mIGV2ZW50cyB0aGF0IHdlcmUgbmV2ZXIgc2VudCB0byBTZW50cnkgKGZvciBleGFtcGxlIGJlY2F1c2VcbiAqIHRoZXkgd2VyZSBkcm9wcGVkIGluIGBiZWZvcmVTZW5kYCkgY291bGQgYmUgcmV0dXJuZWQuXG4gKlxuICogQHJldHVybnMgVGhlIGxhc3QgZXZlbnQgaWQgb2YgdGhlIGlzb2xhdGlvbiBzY29wZS5cbiAqL1xuZnVuY3Rpb24gbGFzdEV2ZW50SWQoKSB7XG4gIHJldHVybiBnZXRJc29sYXRpb25TY29wZSgpLmxhc3RFdmVudElkKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgY3JvbiBtb25pdG9yIGNoZWNrIGluIGFuZCBzZW5kIGl0IHRvIFNlbnRyeS5cbiAqXG4gKiBAcGFyYW0gY2hlY2tJbiBBbiBvYmplY3QgdGhhdCBkZXNjcmliZXMgYSBjaGVjayBpbi5cbiAqIEBwYXJhbSB1cHNlcnRNb25pdG9yQ29uZmlnIEFuIG9wdGlvbmFsIG9iamVjdCB0aGF0IGRlc2NyaWJlcyBhIG1vbml0b3IgY29uZmlnLiBVc2UgdGhpcyBpZiB5b3Ugd2FudFxuICogdG8gY3JlYXRlIGEgbW9uaXRvciBhdXRvbWF0aWNhbGx5IHdoZW4gc2VuZGluZyBhIGNoZWNrIGluLlxuICovXG5mdW5jdGlvbiBjYXB0dXJlQ2hlY2tJbihjaGVja0luLCB1cHNlcnRNb25pdG9yQ29uZmlnKSB7XG4gIGNvbnN0IHNjb3BlID0gZ2V0Q3VycmVudFNjb3BlKCk7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBpZiAoIWNsaWVudCkge1xuICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oJ0Nhbm5vdCBjYXB0dXJlIGNoZWNrLWluLiBObyBjbGllbnQgZGVmaW5lZC4nKTtcbiAgfSBlbHNlIGlmICghY2xpZW50LmNhcHR1cmVDaGVja0luKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcud2FybignQ2Fubm90IGNhcHR1cmUgY2hlY2staW4uIENsaWVudCBkb2VzIG5vdCBzdXBwb3J0IHNlbmRpbmcgY2hlY2staW5zLicpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjbGllbnQuY2FwdHVyZUNoZWNrSW4oY2hlY2tJbiwgdXBzZXJ0TW9uaXRvckNvbmZpZywgc2NvcGUpO1xuICB9XG4gIHJldHVybiB1dWlkNCgpO1xufVxuXG4vKipcbiAqIFdyYXBzIGEgY2FsbGJhY2sgd2l0aCBhIGNyb24gbW9uaXRvciBjaGVjayBpbi4gVGhlIGNoZWNrIGluIHdpbGwgYmUgc2VudCB0byBTZW50cnkgd2hlbiB0aGUgY2FsbGJhY2sgZmluaXNoZXMuXG4gKlxuICogQHBhcmFtIG1vbml0b3JTbHVnIFRoZSBkaXN0aW5jdCBzbHVnIG9mIHRoZSBtb25pdG9yLlxuICogQHBhcmFtIGNhbGxiYWNrIENhbGxiYWNrIHRvIGJlIG1vbml0b3JlZFxuICogQHBhcmFtIHVwc2VydE1vbml0b3JDb25maWcgQW4gb3B0aW9uYWwgb2JqZWN0IHRoYXQgZGVzY3JpYmVzIGEgbW9uaXRvciBjb25maWcuIFVzZSB0aGlzIGlmIHlvdSB3YW50XG4gKiB0byBjcmVhdGUgYSBtb25pdG9yIGF1dG9tYXRpY2FsbHkgd2hlbiBzZW5kaW5nIGEgY2hlY2sgaW4uXG4gKi9cbmZ1bmN0aW9uIHdpdGhNb25pdG9yKG1vbml0b3JTbHVnLCBjYWxsYmFjaywgdXBzZXJ0TW9uaXRvckNvbmZpZykge1xuICBjb25zdCBjaGVja0luSWQgPSBjYXB0dXJlQ2hlY2tJbih7XG4gICAgbW9uaXRvclNsdWcsXG4gICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnXG4gIH0sIHVwc2VydE1vbml0b3JDb25maWcpO1xuICBjb25zdCBub3cgPSB0aW1lc3RhbXBJblNlY29uZHMoKTtcbiAgZnVuY3Rpb24gZmluaXNoQ2hlY2tJbihzdGF0dXMpIHtcbiAgICBjYXB0dXJlQ2hlY2tJbih7XG4gICAgICBtb25pdG9yU2x1ZyxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGNoZWNrSW5JZCxcbiAgICAgIGR1cmF0aW9uOiB0aW1lc3RhbXBJblNlY29uZHMoKSAtIG5vd1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB3aXRoSXNvbGF0aW9uU2NvcGUoKCkgPT4ge1xuICAgIGxldCBtYXliZVByb21pc2VSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgIG1heWJlUHJvbWlzZVJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZmluaXNoQ2hlY2tJbignZXJyb3InKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGlmIChpc1RoZW5hYmxlKG1heWJlUHJvbWlzZVJlc3VsdCkpIHtcbiAgICAgIHJldHVybiBtYXliZVByb21pc2VSZXN1bHQudGhlbihyID0+IHtcbiAgICAgICAgZmluaXNoQ2hlY2tJbignb2snKTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgICB9LCBlID0+IHtcbiAgICAgICAgZmluaXNoQ2hlY2tJbignZXJyb3InKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5pc2hDaGVja0luKCdvaycpO1xuICAgIHJldHVybiBtYXliZVByb21pc2VSZXN1bHQ7XG4gIH0pO1xufVxuXG4vKipcbiAqIENhbGwgYGZsdXNoKClgIG9uIHRoZSBjdXJyZW50IGNsaWVudCwgaWYgdGhlcmUgaXMgb25lLiBTZWUge0BsaW5rIENsaWVudC5mbHVzaH0uXG4gKlxuICogQHBhcmFtIHRpbWVvdXQgTWF4aW11bSB0aW1lIGluIG1zIHRoZSBjbGllbnQgc2hvdWxkIHdhaXQgdG8gZmx1c2ggaXRzIGV2ZW50IHF1ZXVlLiBPbWl0dGluZyB0aGlzIHBhcmFtZXRlciB3aWxsIGNhdXNlXG4gKiB0aGUgY2xpZW50IHRvIHdhaXQgdW50aWwgYWxsIGV2ZW50cyBhcmUgc2VudCBiZWZvcmUgcmVzb2x2aW5nIHRoZSBwcm9taXNlLlxuICogQHJldHVybnMgQSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGB0cnVlYCBpZiB0aGUgcXVldWUgc3VjY2Vzc2Z1bGx5IGRyYWlucyBiZWZvcmUgdGhlIHRpbWVvdXQsIG9yIGBmYWxzZWAgaWYgaXRcbiAqIGRvZXNuJ3QgKG9yIGlmIHRoZXJlJ3Mgbm8gY2xpZW50IGRlZmluZWQpLlxuICovXG5hc3luYyBmdW5jdGlvbiBmbHVzaCh0aW1lb3V0KSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBpZiAoY2xpZW50KSB7XG4gICAgcmV0dXJuIGNsaWVudC5mbHVzaCh0aW1lb3V0KTtcbiAgfVxuICBERUJVR19CVUlMRCAmJiBkZWJ1Zy53YXJuKCdDYW5ub3QgZmx1c2ggZXZlbnRzLiBObyBjbGllbnQgZGVmaW5lZC4nKTtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG59XG5cbi8qKlxuICogQ2FsbCBgY2xvc2UoKWAgb24gdGhlIGN1cnJlbnQgY2xpZW50LCBpZiB0aGVyZSBpcyBvbmUuIFNlZSB7QGxpbmsgQ2xpZW50LmNsb3NlfS5cbiAqXG4gKiBAcGFyYW0gdGltZW91dCBNYXhpbXVtIHRpbWUgaW4gbXMgdGhlIGNsaWVudCBzaG91bGQgd2FpdCB0byBmbHVzaCBpdHMgZXZlbnQgcXVldWUgYmVmb3JlIHNodXR0aW5nIGRvd24uIE9taXR0aW5nIHRoaXNcbiAqIHBhcmFtZXRlciB3aWxsIGNhdXNlIHRoZSBjbGllbnQgdG8gd2FpdCB1bnRpbCBhbGwgZXZlbnRzIGFyZSBzZW50IGJlZm9yZSBkaXNhYmxpbmcgaXRzZWxmLlxuICogQHJldHVybnMgQSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGB0cnVlYCBpZiB0aGUgcXVldWUgc3VjY2Vzc2Z1bGx5IGRyYWlucyBiZWZvcmUgdGhlIHRpbWVvdXQsIG9yIGBmYWxzZWAgaWYgaXRcbiAqIGRvZXNuJ3QgKG9yIGlmIHRoZXJlJ3Mgbm8gY2xpZW50IGRlZmluZWQpLlxuICovXG5hc3luYyBmdW5jdGlvbiBjbG9zZSh0aW1lb3V0KSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBpZiAoY2xpZW50KSB7XG4gICAgcmV0dXJuIGNsaWVudC5jbG9zZSh0aW1lb3V0KTtcbiAgfVxuICBERUJVR19CVUlMRCAmJiBkZWJ1Zy53YXJuKCdDYW5ub3QgZmx1c2ggZXZlbnRzIGFuZCBkaXNhYmxlIFNESy4gTm8gY2xpZW50IGRlZmluZWQuJyk7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBTZW50cnkgaGFzIGJlZW4gcHJvcGVybHkgaW5pdGlhbGl6ZWQuXG4gKi9cbmZ1bmN0aW9uIGlzSW5pdGlhbGl6ZWQoKSB7XG4gIHJldHVybiAhIWdldENsaWVudCgpO1xufVxuXG4vKiogSWYgdGhlIFNESyBpcyBpbml0aWFsaXplZCAmIGVuYWJsZWQuICovXG5mdW5jdGlvbiBpc0VuYWJsZWQoKSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICByZXR1cm4gY2xpZW50Py5nZXRPcHRpb25zKCkuZW5hYmxlZCAhPT0gZmFsc2UgJiYgISFjbGllbnQ/LmdldFRyYW5zcG9ydCgpO1xufVxuXG4vKipcbiAqIEFkZCBhbiBldmVudCBwcm9jZXNzb3IuXG4gKiBUaGlzIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGN1cnJlbnQgaXNvbGF0aW9uIHNjb3BlLCBlbnN1cmluZyBhbnkgZXZlbnQgdGhhdCBpcyBwcm9jZXNzZWQgaW4gdGhlIGN1cnJlbnQgZXhlY3V0aW9uXG4gKiBjb250ZXh0IHdpbGwgaGF2ZSB0aGUgcHJvY2Vzc29yIGFwcGxpZWQuXG4gKi9cbmZ1bmN0aW9uIGFkZEV2ZW50UHJvY2Vzc29yKGNhbGxiYWNrKSB7XG4gIGdldElzb2xhdGlvblNjb3BlKCkuYWRkRXZlbnRQcm9jZXNzb3IoY2FsbGJhY2spO1xufVxuXG4vKipcbiAqIFN0YXJ0IGEgc2Vzc2lvbiBvbiB0aGUgY3VycmVudCBpc29sYXRpb24gc2NvcGUuXG4gKlxuICogQHBhcmFtIGNvbnRleHQgKG9wdGlvbmFsKSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYmUgYXBwbGllZCB0byB0aGUgcmV0dXJuZWQgc2Vzc2lvbiBvYmplY3RcbiAqXG4gKiBAcmV0dXJucyB0aGUgbmV3IGFjdGl2ZSBzZXNzaW9uXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0U2Vzc2lvbihjb250ZXh0KSB7XG4gIGNvbnN0IGlzb2xhdGlvblNjb3BlID0gZ2V0SXNvbGF0aW9uU2NvcGUoKTtcbiAgY29uc3QgY3VycmVudFNjb3BlID0gZ2V0Q3VycmVudFNjb3BlKCk7XG5cbiAgLy8gV2lsbCBmZXRjaCB1c2VyQWdlbnQgaWYgY2FsbGVkIGZyb20gYnJvd3NlciBzZGtcbiAgY29uc3Qge1xuICAgIHVzZXJBZ2VudFxuICB9ID0gR0xPQkFMX09CSi5uYXZpZ2F0b3IgfHwge307XG4gIGNvbnN0IHNlc3Npb24gPSBtYWtlU2Vzc2lvbih7XG4gICAgdXNlcjogY3VycmVudFNjb3BlLmdldFVzZXIoKSB8fCBpc29sYXRpb25TY29wZS5nZXRVc2VyKCksXG4gICAgLi4uKHVzZXJBZ2VudCAmJiB7XG4gICAgICB1c2VyQWdlbnRcbiAgICB9KSxcbiAgICAuLi5jb250ZXh0XG4gIH0pO1xuXG4gIC8vIEVuZCBleGlzdGluZyBzZXNzaW9uIGlmIHRoZXJlJ3Mgb25lXG4gIGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gaXNvbGF0aW9uU2NvcGUuZ2V0U2Vzc2lvbigpO1xuICBpZiAoY3VycmVudFNlc3Npb24/LnN0YXR1cyA9PT0gJ29rJykge1xuICAgIHVwZGF0ZVNlc3Npb24oY3VycmVudFNlc3Npb24sIHtcbiAgICAgIHN0YXR1czogJ2V4aXRlZCdcbiAgICB9KTtcbiAgfVxuICBlbmRTZXNzaW9uKCk7XG5cbiAgLy8gQWZ0ZXJ3YXJkcyB3ZSBzZXQgdGhlIG5ldyBzZXNzaW9uIG9uIHRoZSBzY29wZVxuICBpc29sYXRpb25TY29wZS5zZXRTZXNzaW9uKHNlc3Npb24pO1xuICByZXR1cm4gc2Vzc2lvbjtcbn1cblxuLyoqXG4gKiBFbmQgdGhlIHNlc3Npb24gb24gdGhlIGN1cnJlbnQgaXNvbGF0aW9uIHNjb3BlLlxuICovXG5mdW5jdGlvbiBlbmRTZXNzaW9uKCkge1xuICBjb25zdCBpc29sYXRpb25TY29wZSA9IGdldElzb2xhdGlvblNjb3BlKCk7XG4gIGNvbnN0IGN1cnJlbnRTY29wZSA9IGdldEN1cnJlbnRTY29wZSgpO1xuICBjb25zdCBzZXNzaW9uID0gY3VycmVudFNjb3BlLmdldFNlc3Npb24oKSB8fCBpc29sYXRpb25TY29wZS5nZXRTZXNzaW9uKCk7XG4gIGlmIChzZXNzaW9uKSB7XG4gICAgY2xvc2VTZXNzaW9uKHNlc3Npb24pO1xuICB9XG4gIF9zZW5kU2Vzc2lvblVwZGF0ZSgpO1xuXG4gIC8vIHRoZSBzZXNzaW9uIGlzIG92ZXI7IHRha2UgaXQgb2ZmIG9mIHRoZSBzY29wZVxuICBpc29sYXRpb25TY29wZS5zZXRTZXNzaW9uKCk7XG59XG5cbi8qKlxuICogU2VuZHMgdGhlIGN1cnJlbnQgU2Vzc2lvbiBvbiB0aGUgc2NvcGVcbiAqL1xuZnVuY3Rpb24gX3NlbmRTZXNzaW9uVXBkYXRlKCkge1xuICBjb25zdCBpc29sYXRpb25TY29wZSA9IGdldElzb2xhdGlvblNjb3BlKCk7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBjb25zdCBzZXNzaW9uID0gaXNvbGF0aW9uU2NvcGUuZ2V0U2Vzc2lvbigpO1xuICBpZiAoc2Vzc2lvbiAmJiBjbGllbnQpIHtcbiAgICBjbGllbnQuY2FwdHVyZVNlc3Npb24oc2Vzc2lvbik7XG4gIH1cbn1cblxuLyoqXG4gKiBTZW5kcyB0aGUgY3VycmVudCBzZXNzaW9uIG9uIHRoZSBzY29wZSB0byBTZW50cnlcbiAqXG4gKiBAcGFyYW0gZW5kIElmIHNldCB0aGUgc2Vzc2lvbiB3aWxsIGJlIG1hcmtlZCBhcyBleGl0ZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgc2NvcGUuXG4gKiAgICAgICAgICAgIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGNhcHR1cmVTZXNzaW9uKGVuZCA9IGZhbHNlKSB7XG4gIC8vIGJvdGggc2VuZCB0aGUgdXBkYXRlIGFuZCBwdWxsIHRoZSBzZXNzaW9uIGZyb20gdGhlIHNjb3BlXG4gIGlmIChlbmQpIHtcbiAgICBlbmRTZXNzaW9uKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gb25seSBzZW5kIHRoZSB1cGRhdGVcbiAgX3NlbmRTZXNzaW9uVXBkYXRlKCk7XG59XG5leHBvcnQgeyBhZGRFdmVudFByb2Nlc3NvciwgY2FwdHVyZUNoZWNrSW4sIGNhcHR1cmVFdmVudCwgY2FwdHVyZUV4Y2VwdGlvbiwgY2FwdHVyZU1lc3NhZ2UsIGNhcHR1cmVTZXNzaW9uLCBjbG9zZSwgZW5kU2Vzc2lvbiwgZmx1c2gsIGlzRW5hYmxlZCwgaXNJbml0aWFsaXplZCwgbGFzdEV2ZW50SWQsIHNldENvbnRleHQsIHNldEV4dHJhLCBzZXRFeHRyYXMsIHNldFRhZywgc2V0VGFncywgc2V0VXNlciwgc3RhcnRTZXNzaW9uLCB3aXRoTW9uaXRvciB9O1xuIiwiaW1wb3J0IHsgbWFrZURzbiwgZHNuVG9TdHJpbmcgfSBmcm9tICcuL3V0aWxzL2Rzbi5qcyc7XG5jb25zdCBTRU5UUllfQVBJX1ZFUlNJT04gPSAnNyc7XG5cbi8qKiBSZXR1cm5zIHRoZSBwcmVmaXggdG8gY29uc3RydWN0IFNlbnRyeSBpbmdlc3Rpb24gQVBJIGVuZHBvaW50cy4gKi9cbmZ1bmN0aW9uIGdldEJhc2VBcGlFbmRwb2ludChkc24pIHtcbiAgY29uc3QgcHJvdG9jb2wgPSBkc24ucHJvdG9jb2wgPyBgJHtkc24ucHJvdG9jb2x9OmAgOiAnJztcbiAgY29uc3QgcG9ydCA9IGRzbi5wb3J0ID8gYDoke2Rzbi5wb3J0fWAgOiAnJztcbiAgcmV0dXJuIGAke3Byb3RvY29sfS8vJHtkc24uaG9zdH0ke3BvcnR9JHtkc24ucGF0aCA/IGAvJHtkc24ucGF0aH1gIDogJyd9L2FwaS9gO1xufVxuXG4vKiogUmV0dXJucyB0aGUgaW5nZXN0IEFQSSBlbmRwb2ludCBmb3IgdGFyZ2V0LiAqL1xuZnVuY3Rpb24gX2dldEluZ2VzdEVuZHBvaW50KGRzbikge1xuICByZXR1cm4gYCR7Z2V0QmFzZUFwaUVuZHBvaW50KGRzbil9JHtkc24ucHJvamVjdElkfS9lbnZlbG9wZS9gO1xufVxuXG4vKiogUmV0dXJucyBhIFVSTC1lbmNvZGVkIHN0cmluZyB3aXRoIGF1dGggY29uZmlnIHN1aXRhYmxlIGZvciBhIHF1ZXJ5IHN0cmluZy4gKi9cbmZ1bmN0aW9uIF9lbmNvZGVkQXV0aChkc24sIHNka0luZm8pIHtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIHNlbnRyeV92ZXJzaW9uOiBTRU5UUllfQVBJX1ZFUlNJT05cbiAgfTtcbiAgaWYgKGRzbi5wdWJsaWNLZXkpIHtcbiAgICAvLyBXZSBzZW5kIG9ubHkgdGhlIG1pbmltdW0gc2V0IG9mIHJlcXVpcmVkIGluZm9ybWF0aW9uLiBTZWVcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yNTcyLlxuICAgIHBhcmFtcy5zZW50cnlfa2V5ID0gZHNuLnB1YmxpY0tleTtcbiAgfVxuICBpZiAoc2RrSW5mbykge1xuICAgIHBhcmFtcy5zZW50cnlfY2xpZW50ID0gYCR7c2RrSW5mby5uYW1lfS8ke3Nka0luZm8udmVyc2lvbn1gO1xuICB9XG4gIHJldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBlbnZlbG9wZSBlbmRwb2ludCBVUkwgd2l0aCBhdXRoIGluIHRoZSBxdWVyeSBzdHJpbmcuXG4gKlxuICogU2VuZGluZyBhdXRoIGFzIHBhcnQgb2YgdGhlIHF1ZXJ5IHN0cmluZyBhbmQgbm90IGFzIGN1c3RvbSBIVFRQIGhlYWRlcnMgYXZvaWRzIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3RzLlxuICovXG5mdW5jdGlvbiBnZXRFbnZlbG9wZUVuZHBvaW50V2l0aFVybEVuY29kZWRBdXRoKGRzbiwgdHVubmVsLCBzZGtJbmZvKSB7XG4gIHJldHVybiB0dW5uZWwgPyB0dW5uZWwgOiBgJHtfZ2V0SW5nZXN0RW5kcG9pbnQoZHNuKX0/JHtfZW5jb2RlZEF1dGgoZHNuLCBzZGtJbmZvKX1gO1xufVxuXG4vKiogUmV0dXJucyB0aGUgdXJsIHRvIHRoZSByZXBvcnQgZGlhbG9nIGVuZHBvaW50LiAqL1xuZnVuY3Rpb24gZ2V0UmVwb3J0RGlhbG9nRW5kcG9pbnQoZHNuTGlrZSwgZGlhbG9nT3B0aW9ucykge1xuICBjb25zdCBkc24gPSBtYWtlRHNuKGRzbkxpa2UpO1xuICBpZiAoIWRzbikge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBjb25zdCBlbmRwb2ludCA9IGAke2dldEJhc2VBcGlFbmRwb2ludChkc24pfWVtYmVkL2Vycm9yLXBhZ2UvYDtcbiAgbGV0IGVuY29kZWRPcHRpb25zID0gYGRzbj0ke2RzblRvU3RyaW5nKGRzbil9YDtcbiAgZm9yIChjb25zdCBrZXkgaW4gZGlhbG9nT3B0aW9ucykge1xuICAgIGlmIChrZXkgPT09ICdkc24nKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gJ29uQ2xvc2UnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gJ3VzZXInKSB7XG4gICAgICBjb25zdCB1c2VyID0gZGlhbG9nT3B0aW9ucy51c2VyO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXIubmFtZSkge1xuICAgICAgICBlbmNvZGVkT3B0aW9ucyArPSBgJm5hbWU9JHtlbmNvZGVVUklDb21wb25lbnQodXNlci5uYW1lKX1gO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXIuZW1haWwpIHtcbiAgICAgICAgZW5jb2RlZE9wdGlvbnMgKz0gYCZlbWFpbD0ke2VuY29kZVVSSUNvbXBvbmVudCh1c2VyLmVtYWlsKX1gO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGVkT3B0aW9ucyArPSBgJiR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRpYWxvZ09wdGlvbnNba2V5XSl9YDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGAke2VuZHBvaW50fT8ke2VuY29kZWRPcHRpb25zfWA7XG59XG5leHBvcnQgeyBnZXRFbnZlbG9wZUVuZHBvaW50V2l0aFVybEVuY29kZWRBdXRoLCBnZXRSZXBvcnREaWFsb2dFbmRwb2ludCB9O1xuIiwiaW1wb3J0IHsgZ2V0Q2xpZW50IH0gZnJvbSAnLi9jdXJyZW50U2NvcGVzLmpzJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBkZWJ1ZyB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyLmpzJztcbmNvbnN0IGluc3RhbGxlZEludGVncmF0aW9ucyA9IFtdO1xuXG4vKiogTWFwIG9mIGludGVncmF0aW9ucyBhc3NpZ25lZCB0byBhIGNsaWVudCAqL1xuXG4vKipcbiAqIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gdGhlIGdpdmVuIGFycmF5LCBwcmVmZXJyaW5nIHRoZSBsYXN0IGluc3RhbmNlIG9mIGFueSBkdXBsaWNhdGUuIE5vdCBndWFyYW50ZWVkIHRvXG4gKiBwcmVzZXJ2ZSB0aGUgb3JkZXIgb2YgaW50ZWdyYXRpb25zIGluIHRoZSBhcnJheS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBmaWx0ZXJEdXBsaWNhdGVzKGludGVncmF0aW9ucykge1xuICBjb25zdCBpbnRlZ3JhdGlvbnNCeU5hbWUgPSB7fTtcbiAgaW50ZWdyYXRpb25zLmZvckVhY2goY3VycmVudEluc3RhbmNlID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lXG4gICAgfSA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gaW50ZWdyYXRpb25zQnlOYW1lW25hbWVdO1xuXG4gICAgLy8gV2Ugd2FudCBpbnRlZ3JhdGlvbnMgbGF0ZXIgaW4gdGhlIGFycmF5IHRvIG92ZXJ3cml0ZSBlYXJsaWVyIG9uZXMgb2YgdGhlIHNhbWUgdHlwZSwgZXhjZXB0IHRoYXQgd2UgbmV2ZXIgd2FudCBhXG4gICAgLy8gZGVmYXVsdCBpbnN0YW5jZSB0byBvdmVyd3JpdGUgYW4gZXhpc3RpbmcgdXNlciBpbnN0YW5jZVxuICAgIGlmIChleGlzdGluZ0luc3RhbmNlICYmICFleGlzdGluZ0luc3RhbmNlLmlzRGVmYXVsdEluc3RhbmNlICYmIGN1cnJlbnRJbnN0YW5jZS5pc0RlZmF1bHRJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpbnRlZ3JhdGlvbnNCeU5hbWVbbmFtZV0gPSBjdXJyZW50SW5zdGFuY2U7XG4gIH0pO1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhpbnRlZ3JhdGlvbnNCeU5hbWUpO1xufVxuXG4vKiogR2V0cyBpbnRlZ3JhdGlvbnMgdG8gaW5zdGFsbCAqL1xuZnVuY3Rpb24gZ2V0SW50ZWdyYXRpb25zVG9TZXR1cChvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRJbnRlZ3JhdGlvbnMgPSBvcHRpb25zLmRlZmF1bHRJbnRlZ3JhdGlvbnMgfHwgW107XG4gIGNvbnN0IHVzZXJJbnRlZ3JhdGlvbnMgPSBvcHRpb25zLmludGVncmF0aW9ucztcblxuICAvLyBXZSBmbGFnIGRlZmF1bHQgaW5zdGFuY2VzLCBzbyB0aGF0IGxhdGVyIHdlIGNhbiB0ZWxsIHRoZW0gYXBhcnQgZnJvbSBhbnkgdXNlci1jcmVhdGVkIGluc3RhbmNlcyBvZiB0aGUgc2FtZSBjbGFzc1xuICBkZWZhdWx0SW50ZWdyYXRpb25zLmZvckVhY2goaW50ZWdyYXRpb24gPT4ge1xuICAgIGludGVncmF0aW9uLmlzRGVmYXVsdEluc3RhbmNlID0gdHJ1ZTtcbiAgfSk7XG4gIGxldCBpbnRlZ3JhdGlvbnM7XG4gIGlmIChBcnJheS5pc0FycmF5KHVzZXJJbnRlZ3JhdGlvbnMpKSB7XG4gICAgaW50ZWdyYXRpb25zID0gWy4uLmRlZmF1bHRJbnRlZ3JhdGlvbnMsIC4uLnVzZXJJbnRlZ3JhdGlvbnNdO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB1c2VySW50ZWdyYXRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgcmVzb2x2ZWRVc2VySW50ZWdyYXRpb25zID0gdXNlckludGVncmF0aW9ucyhkZWZhdWx0SW50ZWdyYXRpb25zKTtcbiAgICBpbnRlZ3JhdGlvbnMgPSBBcnJheS5pc0FycmF5KHJlc29sdmVkVXNlckludGVncmF0aW9ucykgPyByZXNvbHZlZFVzZXJJbnRlZ3JhdGlvbnMgOiBbcmVzb2x2ZWRVc2VySW50ZWdyYXRpb25zXTtcbiAgfSBlbHNlIHtcbiAgICBpbnRlZ3JhdGlvbnMgPSBkZWZhdWx0SW50ZWdyYXRpb25zO1xuICB9XG4gIHJldHVybiBmaWx0ZXJEdXBsaWNhdGVzKGludGVncmF0aW9ucyk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBsaXN0IG9mIGludGVncmF0aW9uIGluc3RhbmNlcyB0aGlzIGluc3RhbGxzIHRoZW0gYWxsLiBXaGVuIGB3aXRoRGVmYXVsdHNgIGlzIHNldCB0byBgdHJ1ZWAgdGhlbiBhbGwgZGVmYXVsdFxuICogaW50ZWdyYXRpb25zIGFyZSBhZGRlZCB1bmxlc3MgdGhleSB3ZXJlIGFscmVhZHkgcHJvdmlkZWQgYmVmb3JlLlxuICogQHBhcmFtIGludGVncmF0aW9ucyBhcnJheSBvZiBpbnRlZ3JhdGlvbiBpbnN0YW5jZXNcbiAqIEBwYXJhbSB3aXRoRGVmYXVsdCBzaG91bGQgZW5hYmxlIGRlZmF1bHQgaW50ZWdyYXRpb25zXG4gKi9cbmZ1bmN0aW9uIHNldHVwSW50ZWdyYXRpb25zKGNsaWVudCwgaW50ZWdyYXRpb25zKSB7XG4gIGNvbnN0IGludGVncmF0aW9uSW5kZXggPSB7fTtcbiAgaW50ZWdyYXRpb25zLmZvckVhY2goaW50ZWdyYXRpb24gPT4ge1xuICAgIC8vIGd1YXJkIGFnYWluc3QgZW1wdHkgcHJvdmlkZWQgaW50ZWdyYXRpb25zXG4gICAgaWYgKGludGVncmF0aW9uKSB7XG4gICAgICBzZXR1cEludGVncmF0aW9uKGNsaWVudCwgaW50ZWdyYXRpb24sIGludGVncmF0aW9uSW5kZXgpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBpbnRlZ3JhdGlvbkluZGV4O1xufVxuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIGBhZnRlckFsbFNldHVwYCBob29rcyBvZiB0aGUgZ2l2ZW4gaW50ZWdyYXRpb25zLlxuICovXG5mdW5jdGlvbiBhZnRlclNldHVwSW50ZWdyYXRpb25zKGNsaWVudCwgaW50ZWdyYXRpb25zKSB7XG4gIGZvciAoY29uc3QgaW50ZWdyYXRpb24gb2YgaW50ZWdyYXRpb25zKSB7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCBlbXB0eSBwcm92aWRlZCBpbnRlZ3JhdGlvbnNcbiAgICBpZiAoaW50ZWdyYXRpb24/LmFmdGVyQWxsU2V0dXApIHtcbiAgICAgIGludGVncmF0aW9uLmFmdGVyQWxsU2V0dXAoY2xpZW50KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqIFNldHVwIGEgc2luZ2xlIGludGVncmF0aW9uLiAgKi9cbmZ1bmN0aW9uIHNldHVwSW50ZWdyYXRpb24oY2xpZW50LCBpbnRlZ3JhdGlvbiwgaW50ZWdyYXRpb25JbmRleCkge1xuICBpZiAoaW50ZWdyYXRpb25JbmRleFtpbnRlZ3JhdGlvbi5uYW1lXSkge1xuICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZyhgSW50ZWdyYXRpb24gc2tpcHBlZCBiZWNhdXNlIGl0IHdhcyBhbHJlYWR5IGluc3RhbGxlZDogJHtpbnRlZ3JhdGlvbi5uYW1lfWApO1xuICAgIHJldHVybjtcbiAgfVxuICBpbnRlZ3JhdGlvbkluZGV4W2ludGVncmF0aW9uLm5hbWVdID0gaW50ZWdyYXRpb247XG5cbiAgLy8gYHNldHVwT25jZWAgaXMgb25seSBjYWxsZWQgdGhlIGZpcnN0IHRpbWVcbiAgaWYgKGluc3RhbGxlZEludGVncmF0aW9ucy5pbmRleE9mKGludGVncmF0aW9uLm5hbWUpID09PSAtMSAmJiB0eXBlb2YgaW50ZWdyYXRpb24uc2V0dXBPbmNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaW50ZWdyYXRpb24uc2V0dXBPbmNlKCk7XG4gICAgaW5zdGFsbGVkSW50ZWdyYXRpb25zLnB1c2goaW50ZWdyYXRpb24ubmFtZSk7XG4gIH1cblxuICAvLyBgc2V0dXBgIGlzIHJ1biBmb3IgZWFjaCBjbGllbnRcbiAgaWYgKGludGVncmF0aW9uLnNldHVwICYmIHR5cGVvZiBpbnRlZ3JhdGlvbi5zZXR1cCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGludGVncmF0aW9uLnNldHVwKGNsaWVudCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBpbnRlZ3JhdGlvbi5wcmVwcm9jZXNzRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zdCBjYWxsYmFjayA9IGludGVncmF0aW9uLnByZXByb2Nlc3NFdmVudC5iaW5kKGludGVncmF0aW9uKTtcbiAgICBjbGllbnQub24oJ3ByZXByb2Nlc3NFdmVudCcsIChldmVudCwgaGludCkgPT4gY2FsbGJhY2soZXZlbnQsIGhpbnQsIGNsaWVudCkpO1xuICB9XG4gIGlmICh0eXBlb2YgaW50ZWdyYXRpb24ucHJvY2Vzc0V2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSBpbnRlZ3JhdGlvbi5wcm9jZXNzRXZlbnQuYmluZChpbnRlZ3JhdGlvbik7XG4gICAgY29uc3QgcHJvY2Vzc29yID0gT2JqZWN0LmFzc2lnbigoZXZlbnQsIGhpbnQpID0+IGNhbGxiYWNrKGV2ZW50LCBoaW50LCBjbGllbnQpLCB7XG4gICAgICBpZDogaW50ZWdyYXRpb24ubmFtZVxuICAgIH0pO1xuICAgIGNsaWVudC5hZGRFdmVudFByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICB9XG4gIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZyhgSW50ZWdyYXRpb24gaW5zdGFsbGVkOiAke2ludGVncmF0aW9uLm5hbWV9YCk7XG59XG5cbi8qKiBBZGQgYW4gaW50ZWdyYXRpb24gdG8gdGhlIGN1cnJlbnQgc2NvcGUncyBjbGllbnQuICovXG5mdW5jdGlvbiBhZGRJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvbikge1xuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgaWYgKCFjbGllbnQpIHtcbiAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy53YXJuKGBDYW5ub3QgYWRkIGludGVncmF0aW9uIFwiJHtpbnRlZ3JhdGlvbi5uYW1lfVwiIGJlY2F1c2Ugbm8gU0RLIENsaWVudCBpcyBhdmFpbGFibGUuYCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNsaWVudC5hZGRJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvbik7XG59XG5cbi8qKlxuICogRGVmaW5lIGFuIGludGVncmF0aW9uIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGFuIGludGVncmF0aW9uIGluc3RhbmNlLlxuICogTm90ZSB0aGF0IHRoaXMgYnkgZGVzaWduIGhpZGVzIHRoZSBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIG9mIHRoZSBpbnRlZ3JhdGlvbiwgYXMgdGhleSBhcmUgY29uc2lkZXJlZCBpbnRlcm5hbC5cbiAqL1xuZnVuY3Rpb24gZGVmaW5lSW50ZWdyYXRpb24oZm4pIHtcbiAgcmV0dXJuIGZuO1xufVxuZXhwb3J0IHsgYWRkSW50ZWdyYXRpb24sIGFmdGVyU2V0dXBJbnRlZ3JhdGlvbnMsIGRlZmluZUludGVncmF0aW9uLCBnZXRJbnRlZ3JhdGlvbnNUb1NldHVwLCBpbnN0YWxsZWRJbnRlZ3JhdGlvbnMsIHNldHVwSW50ZWdyYXRpb24sIHNldHVwSW50ZWdyYXRpb25zIH07XG4iLCJpbXBvcnQgeyBjcmVhdGVFbnZlbG9wZSB9IGZyb20gJy4vZW52ZWxvcGUuanMnO1xuaW1wb3J0IHsgZGF0ZVRpbWVzdGFtcEluU2Vjb25kcyB9IGZyb20gJy4vdGltZS5qcyc7XG5cbi8qKlxuICogQ3JlYXRlcyBjbGllbnQgcmVwb3J0IGVudmVsb3BlXG4gKiBAcGFyYW0gZGlzY2FyZGVkX2V2ZW50cyBBbiBhcnJheSBvZiBkaXNjYXJkIGV2ZW50c1xuICogQHBhcmFtIGRzbiBBIERTTiB0aGF0IGNhbiBiZSBzZXQgb24gdGhlIGhlYWRlci4gT3B0aW9uYWwuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNsaWVudFJlcG9ydEVudmVsb3BlKGRpc2NhcmRlZF9ldmVudHMsIGRzbiwgdGltZXN0YW1wKSB7XG4gIGNvbnN0IGNsaWVudFJlcG9ydEl0ZW0gPSBbe1xuICAgIHR5cGU6ICdjbGllbnRfcmVwb3J0J1xuICB9LCB7XG4gICAgdGltZXN0YW1wOiB0aW1lc3RhbXAgfHwgZGF0ZVRpbWVzdGFtcEluU2Vjb25kcygpLFxuICAgIGRpc2NhcmRlZF9ldmVudHNcbiAgfV07XG4gIHJldHVybiBjcmVhdGVFbnZlbG9wZShkc24gPyB7XG4gICAgZHNuXG4gIH0gOiB7fSwgW2NsaWVudFJlcG9ydEl0ZW1dKTtcbn1cbmV4cG9ydCB7IGNyZWF0ZUNsaWVudFJlcG9ydEVudmVsb3BlIH07XG4iLCIvKipcbiAqIEdldCBhIGxpc3Qgb2YgcG9zc2libGUgZXZlbnQgbWVzc2FnZXMgZnJvbSBhIFNlbnRyeSBldmVudC5cbiAqL1xuZnVuY3Rpb24gZ2V0UG9zc2libGVFdmVudE1lc3NhZ2VzKGV2ZW50KSB7XG4gIGNvbnN0IHBvc3NpYmxlTWVzc2FnZXMgPSBbXTtcbiAgaWYgKGV2ZW50Lm1lc3NhZ2UpIHtcbiAgICBwb3NzaWJsZU1lc3NhZ2VzLnB1c2goZXZlbnQubWVzc2FnZSk7XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRyeSBjYXRjaGluZyB0byBzYXZlIGJ1bmRsZSBzaXplXG4gICAgY29uc3QgbGFzdEV4Y2VwdGlvbiA9IGV2ZW50LmV4Y2VwdGlvbi52YWx1ZXNbZXZlbnQuZXhjZXB0aW9uLnZhbHVlcy5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdEV4Y2VwdGlvbj8udmFsdWUpIHtcbiAgICAgIHBvc3NpYmxlTWVzc2FnZXMucHVzaChsYXN0RXhjZXB0aW9uLnZhbHVlKTtcbiAgICAgIGlmIChsYXN0RXhjZXB0aW9uLnR5cGUpIHtcbiAgICAgICAgcG9zc2libGVNZXNzYWdlcy5wdXNoKGAke2xhc3RFeGNlcHRpb24udHlwZX06ICR7bGFzdEV4Y2VwdGlvbi52YWx1ZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBpZ25vcmUgZXJyb3JzIGhlcmVcbiAgfVxuICByZXR1cm4gcG9zc2libGVNZXNzYWdlcztcbn1cbmV4cG9ydCB7IGdldFBvc3NpYmxlRXZlbnRNZXNzYWdlcyB9O1xuIiwiaW1wb3J0IHsgU0VNQU5USUNfQVRUUklCVVRFX0VYQ0xVU0lWRV9USU1FLCBTRU1BTlRJQ19BVFRSSUJVVEVfUFJPRklMRV9JRCB9IGZyb20gJy4uL3NlbWFudGljQXR0cmlidXRlcy5qcyc7XG5cbi8qKlxuICogQ29udmVydHMgYSB0cmFuc2FjdGlvbiBldmVudCB0byBhIHNwYW4gSlNPTiBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRUcmFuc2FjdGlvbkV2ZW50VG9TcGFuSnNvbihldmVudCkge1xuICBjb25zdCB7XG4gICAgdHJhY2VfaWQsXG4gICAgcGFyZW50X3NwYW5faWQsXG4gICAgc3Bhbl9pZCxcbiAgICBzdGF0dXMsXG4gICAgb3JpZ2luLFxuICAgIGRhdGEsXG4gICAgb3BcbiAgfSA9IGV2ZW50LmNvbnRleHRzPy50cmFjZSA/PyB7fTtcbiAgcmV0dXJuIHtcbiAgICBkYXRhOiBkYXRhID8/IHt9LFxuICAgIGRlc2NyaXB0aW9uOiBldmVudC50cmFuc2FjdGlvbixcbiAgICBvcCxcbiAgICBwYXJlbnRfc3Bhbl9pZCxcbiAgICBzcGFuX2lkOiBzcGFuX2lkID8/ICcnLFxuICAgIHN0YXJ0X3RpbWVzdGFtcDogZXZlbnQuc3RhcnRfdGltZXN0YW1wID8/IDAsXG4gICAgc3RhdHVzLFxuICAgIHRpbWVzdGFtcDogZXZlbnQudGltZXN0YW1wLFxuICAgIHRyYWNlX2lkOiB0cmFjZV9pZCA/PyAnJyxcbiAgICBvcmlnaW4sXG4gICAgcHJvZmlsZV9pZDogZGF0YT8uW1NFTUFOVElDX0FUVFJJQlVURV9QUk9GSUxFX0lEXSxcbiAgICBleGNsdXNpdmVfdGltZTogZGF0YT8uW1NFTUFOVElDX0FUVFJJQlVURV9FWENMVVNJVkVfVElNRV0sXG4gICAgbWVhc3VyZW1lbnRzOiBldmVudC5tZWFzdXJlbWVudHMsXG4gICAgaXNfc2VnbWVudDogdHJ1ZVxuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3BhbiBKU09OIG9iamVjdCB0byBhIHRyYW5zYWN0aW9uIGV2ZW50LlxuICovXG5mdW5jdGlvbiBjb252ZXJ0U3Bhbkpzb25Ub1RyYW5zYWN0aW9uRXZlbnQoc3Bhbikge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICd0cmFuc2FjdGlvbicsXG4gICAgdGltZXN0YW1wOiBzcGFuLnRpbWVzdGFtcCxcbiAgICBzdGFydF90aW1lc3RhbXA6IHNwYW4uc3RhcnRfdGltZXN0YW1wLFxuICAgIHRyYW5zYWN0aW9uOiBzcGFuLmRlc2NyaXB0aW9uLFxuICAgIGNvbnRleHRzOiB7XG4gICAgICB0cmFjZToge1xuICAgICAgICB0cmFjZV9pZDogc3Bhbi50cmFjZV9pZCxcbiAgICAgICAgc3Bhbl9pZDogc3Bhbi5zcGFuX2lkLFxuICAgICAgICBwYXJlbnRfc3Bhbl9pZDogc3Bhbi5wYXJlbnRfc3Bhbl9pZCxcbiAgICAgICAgb3A6IHNwYW4ub3AsXG4gICAgICAgIHN0YXR1czogc3Bhbi5zdGF0dXMsXG4gICAgICAgIG9yaWdpbjogc3Bhbi5vcmlnaW4sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi5zcGFuLmRhdGEsXG4gICAgICAgICAgLi4uKHNwYW4ucHJvZmlsZV9pZCAmJiB7XG4gICAgICAgICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1BST0ZJTEVfSURdOiBzcGFuLnByb2ZpbGVfaWRcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAuLi4oc3Bhbi5leGNsdXNpdmVfdGltZSAmJiB7XG4gICAgICAgICAgICBbU0VNQU5USUNfQVRUUklCVVRFX0VYQ0xVU0lWRV9USU1FXTogc3Bhbi5leGNsdXNpdmVfdGltZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIG1lYXN1cmVtZW50czogc3Bhbi5tZWFzdXJlbWVudHNcbiAgfTtcbn1cbmV4cG9ydCB7IGNvbnZlcnRTcGFuSnNvblRvVHJhbnNhY3Rpb25FdmVudCwgY29udmVydFRyYW5zYWN0aW9uRXZlbnRUb1NwYW5Kc29uIH07XG4iLCJpbXBvcnQgeyBnZXRFbnZlbG9wZUVuZHBvaW50V2l0aFVybEVuY29kZWRBdXRoIH0gZnJvbSAnLi9hcGkuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9FTlZJUk9OTUVOVCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IGdldFRyYWNlQ29udGV4dEZyb21TY29wZSwgZ2V0Q3VycmVudFNjb3BlLCBnZXRJc29sYXRpb25TY29wZSwgd2l0aFNjb3BlIH0gZnJvbSAnLi9jdXJyZW50U2NvcGVzLmpzJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFdmVudEVudmVsb3BlLCBjcmVhdGVTZXNzaW9uRW52ZWxvcGUgfSBmcm9tICcuL2VudmVsb3BlLmpzJztcbmltcG9ydCB7IHNldHVwSW50ZWdyYXRpb24sIGFmdGVyU2V0dXBJbnRlZ3JhdGlvbnMsIHNldHVwSW50ZWdyYXRpb25zIH0gZnJvbSAnLi9pbnRlZ3JhdGlvbi5qcyc7XG5pbXBvcnQgeyB1cGRhdGVTZXNzaW9uIH0gZnJvbSAnLi9zZXNzaW9uLmpzJztcbmltcG9ydCB7IGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU2NvcGUsIGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU3BhbiB9IGZyb20gJy4vdHJhY2luZy9keW5hbWljU2FtcGxpbmdDb250ZXh0LmpzJztcbmltcG9ydCB7IGNyZWF0ZUNsaWVudFJlcG9ydEVudmVsb3BlIH0gZnJvbSAnLi91dGlscy9jbGllbnRyZXBvcnQuanMnO1xuaW1wb3J0IHsgbWFrZURzbiwgZHNuVG9TdHJpbmcgfSBmcm9tICcuL3V0aWxzL2Rzbi5qcyc7XG5pbXBvcnQgeyBhZGRJdGVtVG9FbnZlbG9wZSwgY3JlYXRlQXR0YWNobWVudEVudmVsb3BlSXRlbSB9IGZyb20gJy4vdXRpbHMvZW52ZWxvcGUuanMnO1xuaW1wb3J0IHsgZ2V0UG9zc2libGVFdmVudE1lc3NhZ2VzIH0gZnJvbSAnLi91dGlscy9ldmVudFV0aWxzLmpzJztcbmltcG9ydCB7IGlzUHJpbWl0aXZlLCBpc1BhcmFtZXRlcml6ZWRTdHJpbmcsIGlzVGhlbmFibGUsIGlzUGxhaW5PYmplY3QgfSBmcm9tICcuL3V0aWxzL2lzLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgbWVyZ2UgfSBmcm9tICcuL3V0aWxzL21lcmdlLmpzJztcbmltcG9ydCB7IHV1aWQ0LCBjaGVja09yU2V0QWxyZWFkeUNhdWdodCB9IGZyb20gJy4vdXRpbHMvbWlzYy5qcyc7XG5pbXBvcnQgeyBwYXJzZVNhbXBsZVJhdGUgfSBmcm9tICcuL3V0aWxzL3BhcnNlU2FtcGxlUmF0ZS5qcyc7XG5pbXBvcnQgeyBwcmVwYXJlRXZlbnQgfSBmcm9tICcuL3V0aWxzL3ByZXBhcmVFdmVudC5qcyc7XG5pbXBvcnQgeyBzaG93U3BhbkRyb3BXYXJuaW5nLCBnZXRBY3RpdmVTcGFuLCBzcGFuVG9UcmFjZUNvbnRleHQgfSBmcm9tICcuL3V0aWxzL3NwYW5VdGlscy5qcyc7XG5pbXBvcnQgeyByZXNvbHZlZFN5bmNQcm9taXNlLCBTeW5jUHJvbWlzZSwgcmVqZWN0ZWRTeW5jUHJvbWlzZSB9IGZyb20gJy4vdXRpbHMvc3luY3Byb21pc2UuanMnO1xuaW1wb3J0IHsgY29udmVydFRyYW5zYWN0aW9uRXZlbnRUb1NwYW5Kc29uLCBjb252ZXJ0U3Bhbkpzb25Ub1RyYW5zYWN0aW9uRXZlbnQgfSBmcm9tICcuL3V0aWxzL3RyYW5zYWN0aW9uRXZlbnQuanMnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGluZXMgKi9cblxuY29uc3QgQUxSRUFEWV9TRUVOX0VSUk9SID0gXCJOb3QgY2FwdHVyaW5nIGV4Y2VwdGlvbiBiZWNhdXNlIGl0J3MgYWxyZWFkeSBiZWVuIGNhcHR1cmVkLlwiO1xuY29uc3QgTUlTU0lOR19SRUxFQVNFX0ZPUl9TRVNTSU9OX0VSUk9SID0gJ0Rpc2NhcmRlZCBzZXNzaW9uIGJlY2F1c2Ugb2YgbWlzc2luZyBvciBub24tc3RyaW5nIHJlbGVhc2UnO1xuY29uc3QgSU5URVJOQUxfRVJST1JfU1lNQk9MID0gU3ltYm9sLmZvcignU2VudHJ5SW50ZXJuYWxFcnJvcicpO1xuY29uc3QgRE9fTk9UX1NFTkRfRVZFTlRfU1lNQk9MID0gU3ltYm9sLmZvcignU2VudHJ5RG9Ob3RTZW5kRXZlbnRFcnJvcicpO1xuZnVuY3Rpb24gX21ha2VJbnRlcm5hbEVycm9yKG1lc3NhZ2UpIHtcbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlLFxuICAgIFtJTlRFUk5BTF9FUlJPUl9TWU1CT0xdOiB0cnVlXG4gIH07XG59XG5mdW5jdGlvbiBfbWFrZURvTm90U2VuZEV2ZW50RXJyb3IobWVzc2FnZSkge1xuICByZXR1cm4ge1xuICAgIG1lc3NhZ2UsXG4gICAgW0RPX05PVF9TRU5EX0VWRU5UX1NZTUJPTF06IHRydWVcbiAgfTtcbn1cbmZ1bmN0aW9uIF9pc0ludGVybmFsRXJyb3IoZXJyb3IpIHtcbiAgcmV0dXJuICEhZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBJTlRFUk5BTF9FUlJPUl9TWU1CT0wgaW4gZXJyb3I7XG59XG5mdW5jdGlvbiBfaXNEb05vdFNlbmRFdmVudEVycm9yKGVycm9yKSB7XG4gIHJldHVybiAhIWVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgRE9fTk9UX1NFTkRfRVZFTlRfU1lNQk9MIGluIGVycm9yO1xufVxuXG4vKipcbiAqIEJhc2UgaW1wbGVtZW50YXRpb24gZm9yIGFsbCBKYXZhU2NyaXB0IFNESyBjbGllbnRzLlxuICpcbiAqIENhbGwgdGhlIGNvbnN0cnVjdG9yIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgb3B0aW9uc1xuICogc3BlY2lmaWMgdG8gdGhlIGNsaWVudCBzdWJjbGFzcy4gVG8gYWNjZXNzIHRoZXNlIG9wdGlvbnMgbGF0ZXIsIHVzZVxuICoge0BsaW5rIENsaWVudC5nZXRPcHRpb25zfS5cbiAqXG4gKiBJZiBhIERzbiBpcyBzcGVjaWZpZWQgaW4gdGhlIG9wdGlvbnMsIGl0IHdpbGwgYmUgcGFyc2VkIGFuZCBzdG9yZWQuIFVzZVxuICoge0BsaW5rIENsaWVudC5nZXREc259IHRvIHJldHJpZXZlIHRoZSBEc24gYXQgYW55IG1vbWVudC4gSW4gY2FzZSB0aGUgRHNuIGlzXG4gKiBpbnZhbGlkLCB0aGUgY29uc3RydWN0b3Igd2lsbCB0aHJvdyBhIHtAbGluayBTZW50cnlFeGNlcHRpb259LiBOb3RlIHRoYXRcbiAqIHdpdGhvdXQgYSB2YWxpZCBEc24sIHRoZSBTREsgd2lsbCBub3Qgc2VuZCBhbnkgZXZlbnRzIHRvIFNlbnRyeS5cbiAqXG4gKiBCZWZvcmUgc2VuZGluZyBhbiBldmVudCwgaXQgaXMgcGFzc2VkIHRocm91Z2hcbiAqIHtAbGluayBDbGllbnQuX3ByZXBhcmVFdmVudH0gdG8gYWRkIFNESyBpbmZvcm1hdGlvbiBhbmQgc2NvcGUgZGF0YVxuICogKGJyZWFkY3J1bWJzIGFuZCBjb250ZXh0KS4gVG8gYWRkIG1vcmUgY3VzdG9tIGluZm9ybWF0aW9uLCBvdmVycmlkZSB0aGlzXG4gKiBtZXRob2QgYW5kIGV4dGVuZCB0aGUgcmVzdWx0aW5nIHByZXBhcmVkIGV2ZW50LlxuICpcbiAqIFRvIGlzc3VlIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCBldmVudHMgKGUuZy4gdmlhIGluc3RydW1lbnRhdGlvbiksIHVzZVxuICoge0BsaW5rIENsaWVudC5jYXB0dXJlRXZlbnR9LiBJdCB3aWxsIHByZXBhcmUgdGhlIGV2ZW50IGFuZCBwYXNzIGl0IHRocm91Z2hcbiAqIHRoZSBjYWxsYmFjayBsaWZlY3ljbGUuIFRvIGlzc3VlIGF1dG8tYnJlYWRjcnVtYnMsIHVzZVxuICoge0BsaW5rIENsaWVudC5hZGRCcmVhZGNydW1ifS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY2xhc3MgTm9kZUNsaWVudCBleHRlbmRzIENsaWVudDxOb2RlT3B0aW9ucz4ge1xuICogICBwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9uczogTm9kZU9wdGlvbnMpIHtcbiAqICAgICBzdXBlcihvcHRpb25zKTtcbiAqICAgfVxuICpcbiAqICAgLy8gLi4uXG4gKiB9XG4gKi9cbmNsYXNzIENsaWVudCB7XG4gIC8qKiBPcHRpb25zIHBhc3NlZCB0byB0aGUgU0RLLiAqL1xuXG4gIC8qKiBUaGUgY2xpZW50IERzbiwgaWYgc3BlY2lmaWVkIGluIG9wdGlvbnMuIFdpdGhvdXQgdGhpcyBEc24sIHRoZSBTREsgd2lsbCBiZSBkaXNhYmxlZC4gKi9cblxuICAvKiogQXJyYXkgb2Ygc2V0IHVwIGludGVncmF0aW9ucy4gKi9cblxuICAvKiogTnVtYmVyIG9mIGNhbGxzIGJlaW5nIHByb2Nlc3NlZCAqL1xuXG4gIC8qKiBIb2xkcyBmbHVzaGFibGUgICovXG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhpcyBjbGllbnQgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBjbGllbnQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5faW50ZWdyYXRpb25zID0ge307XG4gICAgdGhpcy5fbnVtUHJvY2Vzc2luZyA9IDA7XG4gICAgdGhpcy5fb3V0Y29tZXMgPSB7fTtcbiAgICB0aGlzLl9ob29rcyA9IHt9O1xuICAgIHRoaXMuX2V2ZW50UHJvY2Vzc29ycyA9IFtdO1xuICAgIGlmIChvcHRpb25zLmRzbikge1xuICAgICAgdGhpcy5fZHNuID0gbWFrZURzbihvcHRpb25zLmRzbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oJ05vIERTTiBwcm92aWRlZCwgY2xpZW50IHdpbGwgbm90IHNlbmQgZXZlbnRzLicpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZHNuKSB7XG4gICAgICBjb25zdCB1cmwgPSBnZXRFbnZlbG9wZUVuZHBvaW50V2l0aFVybEVuY29kZWRBdXRoKHRoaXMuX2Rzbiwgb3B0aW9ucy50dW5uZWwsIG9wdGlvbnMuX21ldGFkYXRhID8gb3B0aW9ucy5fbWV0YWRhdGEuc2RrIDogdW5kZWZpbmVkKTtcbiAgICAgIHRoaXMuX3RyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0KHtcbiAgICAgICAgdHVubmVsOiB0aGlzLl9vcHRpb25zLnR1bm5lbCxcbiAgICAgICAgcmVjb3JkRHJvcHBlZEV2ZW50OiB0aGlzLnJlY29yZERyb3BwZWRFdmVudC5iaW5kKHRoaXMpLFxuICAgICAgICAuLi5vcHRpb25zLnRyYW5zcG9ydE9wdGlvbnMsXG4gICAgICAgIHVybFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhcHR1cmVzIGFuIGV4Y2VwdGlvbiBldmVudCBhbmQgc2VuZHMgaXQgdG8gU2VudHJ5LlxuICAgKlxuICAgKiBVbmxpa2UgYGNhcHR1cmVFeGNlcHRpb25gIGV4cG9ydGVkIGZyb20gZXZlcnkgU0RLLCB0aGlzIG1ldGhvZCByZXF1aXJlcyB0aGF0IHlvdSBwYXNzIGl0IHRoZSBjdXJyZW50IHNjb3BlLlxuICAgKi9cbiAgY2FwdHVyZUV4Y2VwdGlvbihleGNlcHRpb24sIGhpbnQsIHNjb3BlKSB7XG4gICAgY29uc3QgZXZlbnRJZCA9IHV1aWQ0KCk7XG5cbiAgICAvLyBlbnN1cmUgd2UgaGF2ZW4ndCBjYXB0dXJlZCB0aGlzIHZlcnkgb2JqZWN0IGJlZm9yZVxuICAgIGlmIChjaGVja09yU2V0QWxyZWFkeUNhdWdodChleGNlcHRpb24pKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy5sb2coQUxSRUFEWV9TRUVOX0VSUk9SKTtcbiAgICAgIHJldHVybiBldmVudElkO1xuICAgIH1cbiAgICBjb25zdCBoaW50V2l0aEV2ZW50SWQgPSB7XG4gICAgICBldmVudF9pZDogZXZlbnRJZCxcbiAgICAgIC4uLmhpbnRcbiAgICB9O1xuICAgIHRoaXMuX3Byb2Nlc3ModGhpcy5ldmVudEZyb21FeGNlcHRpb24oZXhjZXB0aW9uLCBoaW50V2l0aEV2ZW50SWQpLnRoZW4oZXZlbnQgPT4gdGhpcy5fY2FwdHVyZUV2ZW50KGV2ZW50LCBoaW50V2l0aEV2ZW50SWQsIHNjb3BlKSkpO1xuICAgIHJldHVybiBoaW50V2l0aEV2ZW50SWQuZXZlbnRfaWQ7XG4gIH1cblxuICAvKipcbiAgICogQ2FwdHVyZXMgYSBtZXNzYWdlIGV2ZW50IGFuZCBzZW5kcyBpdCB0byBTZW50cnkuXG4gICAqXG4gICAqIFVubGlrZSBgY2FwdHVyZU1lc3NhZ2VgIGV4cG9ydGVkIGZyb20gZXZlcnkgU0RLLCB0aGlzIG1ldGhvZCByZXF1aXJlcyB0aGF0IHlvdSBwYXNzIGl0IHRoZSBjdXJyZW50IHNjb3BlLlxuICAgKi9cbiAgY2FwdHVyZU1lc3NhZ2UobWVzc2FnZSwgbGV2ZWwsIGhpbnQsIGN1cnJlbnRTY29wZSkge1xuICAgIGNvbnN0IGhpbnRXaXRoRXZlbnRJZCA9IHtcbiAgICAgIGV2ZW50X2lkOiB1dWlkNCgpLFxuICAgICAgLi4uaGludFxuICAgIH07XG4gICAgY29uc3QgZXZlbnRNZXNzYWdlID0gaXNQYXJhbWV0ZXJpemVkU3RyaW5nKG1lc3NhZ2UpID8gbWVzc2FnZSA6IFN0cmluZyhtZXNzYWdlKTtcbiAgICBjb25zdCBwcm9taXNlZEV2ZW50ID0gaXNQcmltaXRpdmUobWVzc2FnZSkgPyB0aGlzLmV2ZW50RnJvbU1lc3NhZ2UoZXZlbnRNZXNzYWdlLCBsZXZlbCwgaGludFdpdGhFdmVudElkKSA6IHRoaXMuZXZlbnRGcm9tRXhjZXB0aW9uKG1lc3NhZ2UsIGhpbnRXaXRoRXZlbnRJZCk7XG4gICAgdGhpcy5fcHJvY2Vzcyhwcm9taXNlZEV2ZW50LnRoZW4oZXZlbnQgPT4gdGhpcy5fY2FwdHVyZUV2ZW50KGV2ZW50LCBoaW50V2l0aEV2ZW50SWQsIGN1cnJlbnRTY29wZSkpKTtcbiAgICByZXR1cm4gaGludFdpdGhFdmVudElkLmV2ZW50X2lkO1xuICB9XG5cbiAgLyoqXG4gICAqIENhcHR1cmVzIGEgbWFudWFsbHkgY3JlYXRlZCBldmVudCBhbmQgc2VuZHMgaXQgdG8gU2VudHJ5LlxuICAgKlxuICAgKiBVbmxpa2UgYGNhcHR1cmVFdmVudGAgZXhwb3J0ZWQgZnJvbSBldmVyeSBTREssIHRoaXMgbWV0aG9kIHJlcXVpcmVzIHRoYXQgeW91IHBhc3MgaXQgdGhlIGN1cnJlbnQgc2NvcGUuXG4gICAqL1xuICBjYXB0dXJlRXZlbnQoZXZlbnQsIGhpbnQsIGN1cnJlbnRTY29wZSkge1xuICAgIGNvbnN0IGV2ZW50SWQgPSB1dWlkNCgpO1xuXG4gICAgLy8gZW5zdXJlIHdlIGhhdmVuJ3QgY2FwdHVyZWQgdGhpcyB2ZXJ5IG9iamVjdCBiZWZvcmVcbiAgICBpZiAoaGludD8ub3JpZ2luYWxFeGNlcHRpb24gJiYgY2hlY2tPclNldEFscmVhZHlDYXVnaHQoaGludC5vcmlnaW5hbEV4Y2VwdGlvbikpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZyhBTFJFQURZX1NFRU5fRVJST1IpO1xuICAgICAgcmV0dXJuIGV2ZW50SWQ7XG4gICAgfVxuICAgIGNvbnN0IGhpbnRXaXRoRXZlbnRJZCA9IHtcbiAgICAgIGV2ZW50X2lkOiBldmVudElkLFxuICAgICAgLi4uaGludFxuICAgIH07XG4gICAgY29uc3Qgc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0gZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhIHx8IHt9O1xuICAgIGNvbnN0IGNhcHR1cmVkU3BhblNjb3BlID0gc2RrUHJvY2Vzc2luZ01ldGFkYXRhLmNhcHR1cmVkU3BhblNjb3BlO1xuICAgIGNvbnN0IGNhcHR1cmVkU3Bhbklzb2xhdGlvblNjb3BlID0gc2RrUHJvY2Vzc2luZ01ldGFkYXRhLmNhcHR1cmVkU3Bhbklzb2xhdGlvblNjb3BlO1xuICAgIHRoaXMuX3Byb2Nlc3ModGhpcy5fY2FwdHVyZUV2ZW50KGV2ZW50LCBoaW50V2l0aEV2ZW50SWQsIGNhcHR1cmVkU3BhblNjb3BlIHx8IGN1cnJlbnRTY29wZSwgY2FwdHVyZWRTcGFuSXNvbGF0aW9uU2NvcGUpKTtcbiAgICByZXR1cm4gaGludFdpdGhFdmVudElkLmV2ZW50X2lkO1xuICB9XG5cbiAgLyoqXG4gICAqIENhcHR1cmVzIGEgc2Vzc2lvbi5cbiAgICovXG4gIGNhcHR1cmVTZXNzaW9uKHNlc3Npb24pIHtcbiAgICB0aGlzLnNlbmRTZXNzaW9uKHNlc3Npb24pO1xuICAgIC8vIEFmdGVyIHNlbmRpbmcsIHdlIHNldCBpbml0IGZhbHNlIHRvIGluZGljYXRlIGl0J3Mgbm90IHRoZSBmaXJzdCBvY2N1cnJlbmNlXG4gICAgdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCB7XG4gICAgICBpbml0OiBmYWxzZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNyb24gbW9uaXRvciBjaGVjayBpbiBhbmQgc2VuZCBpdCB0byBTZW50cnkuIFRoaXMgbWV0aG9kIGlzIG5vdCBhdmFpbGFibGUgb24gYWxsIGNsaWVudHMuXG4gICAqXG4gICAqIEBwYXJhbSBjaGVja0luIEFuIG9iamVjdCB0aGF0IGRlc2NyaWJlcyBhIGNoZWNrIGluLlxuICAgKiBAcGFyYW0gdXBzZXJ0TW9uaXRvckNvbmZpZyBBbiBvcHRpb25hbCBvYmplY3QgdGhhdCBkZXNjcmliZXMgYSBtb25pdG9yIGNvbmZpZy4gVXNlIHRoaXMgaWYgeW91IHdhbnRcbiAgICogdG8gY3JlYXRlIGEgbW9uaXRvciBhdXRvbWF0aWNhbGx5IHdoZW4gc2VuZGluZyBhIGNoZWNrIGluLlxuICAgKiBAcGFyYW0gc2NvcGUgQW4gb3B0aW9uYWwgc2NvcGUgY29udGFpbmluZyBldmVudCBtZXRhZGF0YS5cbiAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBpZCBvZiB0aGUgY2hlY2sgaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgRHNuLlxuICAgKi9cbiAgZ2V0RHNuKCkge1xuICAgIHJldHVybiB0aGlzLl9kc247XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAqL1xuICBnZXRPcHRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgU0RLIG1ldGFkYXRhLlxuICAgKiBAc2VlIFNka01ldGFkYXRhXG4gICAqL1xuICBnZXRTZGtNZXRhZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5fbWV0YWRhdGE7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdHJhbnNwb3J0IHRoYXQgaXMgdXNlZCBieSB0aGUgY2xpZW50LlxuICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHRoZSB0cmFuc3BvcnQgZ2V0cyBsYXp5IGluaXRpYWxpemVkIHNvIGl0IHdpbGwgb25seSBiZSB0aGVyZSBvbmNlIHRoZSBmaXJzdCBldmVudCBoYXMgYmVlbiBzZW50LlxuICAgKi9cbiAgZ2V0VHJhbnNwb3J0KCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQ7XG4gIH1cblxuICAvKipcbiAgICogV2FpdCBmb3IgYWxsIGV2ZW50cyB0byBiZSBzZW50IG9yIHRoZSB0aW1lb3V0IHRvIGV4cGlyZSwgd2hpY2hldmVyIGNvbWVzIGZpcnN0LlxuICAgKlxuICAgKiBAcGFyYW0gdGltZW91dCBNYXhpbXVtIHRpbWUgaW4gbXMgdGhlIGNsaWVudCBzaG91bGQgd2FpdCBmb3IgZXZlbnRzIHRvIGJlIGZsdXNoZWQuIE9taXR0aW5nIHRoaXMgcGFyYW1ldGVyIHdpbGxcbiAgICogICBjYXVzZSB0aGUgY2xpZW50IHRvIHdhaXQgdW50aWwgYWxsIGV2ZW50cyBhcmUgc2VudCBiZWZvcmUgcmVzb2x2aW5nIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgd2l0aCBgdHJ1ZWAgaWYgYWxsIGV2ZW50cyBhcmUgc2VudCBiZWZvcmUgdGhlIHRpbWVvdXQsIG9yIGBmYWxzZWAgaWYgdGhlcmUgYXJlXG4gICAqIHN0aWxsIGV2ZW50cyBpbiB0aGUgcXVldWUgd2hlbiB0aGUgdGltZW91dCBpcyByZWFjaGVkLlxuICAgKi9cbiAgZmx1c2godGltZW91dCkge1xuICAgIGNvbnN0IHRyYW5zcG9ydCA9IHRoaXMuX3RyYW5zcG9ydDtcbiAgICBpZiAodHJhbnNwb3J0KSB7XG4gICAgICB0aGlzLmVtaXQoJ2ZsdXNoJyk7XG4gICAgICByZXR1cm4gdGhpcy5faXNDbGllbnREb25lUHJvY2Vzc2luZyh0aW1lb3V0KS50aGVuKGNsaWVudEZpbmlzaGVkID0+IHtcbiAgICAgICAgcmV0dXJuIHRyYW5zcG9ydC5mbHVzaCh0aW1lb3V0KS50aGVuKHRyYW5zcG9ydEZsdXNoZWQgPT4gY2xpZW50RmluaXNoZWQgJiYgdHJhbnNwb3J0Rmx1c2hlZCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc29sdmVkU3luY1Byb21pc2UodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoIHRoZSBldmVudCBxdWV1ZSBhbmQgc2V0IHRoZSBjbGllbnQgdG8gYGVuYWJsZWQgPSBmYWxzZWAuIFNlZSB7QGxpbmsgQ2xpZW50LmZsdXNofS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXQgTWF4aW11bSB0aW1lIGluIG1zIHRoZSBjbGllbnQgc2hvdWxkIHdhaXQgYmVmb3JlIHNodXR0aW5nIGRvd24uIE9taXR0aW5nIHRoaXMgcGFyYW1ldGVyIHdpbGwgY2F1c2VcbiAgICogICB0aGUgY2xpZW50IHRvIHdhaXQgdW50aWwgYWxsIGV2ZW50cyBhcmUgc2VudCBiZWZvcmUgZGlzYWJsaW5nIGl0c2VsZi5cbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IEEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBgdHJ1ZWAgaWYgdGhlIGZsdXNoIGNvbXBsZXRlcyBzdWNjZXNzZnVsbHkgYmVmb3JlIHRoZSB0aW1lb3V0LCBvciBgZmFsc2VgIGlmXG4gICAqIGl0IGRvZXNuJ3QuXG4gICAqL1xuICBjbG9zZSh0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHRoaXMuZmx1c2godGltZW91dCkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgdGhpcy5nZXRPcHRpb25zKCkuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5lbWl0KCdjbG9zZScpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGluc3RhbGxlZCBldmVudCBwcm9jZXNzb3JzLlxuICAgKi9cbiAgZ2V0RXZlbnRQcm9jZXNzb3JzKCkge1xuICAgIHJldHVybiB0aGlzLl9ldmVudFByb2Nlc3NvcnM7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhbiBldmVudCBwcm9jZXNzb3IgdGhhdCBhcHBsaWVzIHRvIGFueSBldmVudCBwcm9jZXNzZWQgYnkgdGhpcyBjbGllbnQuXG4gICAqL1xuICBhZGRFdmVudFByb2Nlc3NvcihldmVudFByb2Nlc3Nvcikge1xuICAgIHRoaXMuX2V2ZW50UHJvY2Vzc29ycy5wdXNoKGV2ZW50UHJvY2Vzc29yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoaXMgY2xpZW50LlxuICAgKiBDYWxsIHRoaXMgYWZ0ZXIgdGhlIGNsaWVudCB3YXMgc2V0IG9uIGEgc2NvcGUuXG4gICAqL1xuICBpbml0KCkge1xuICAgIGlmICh0aGlzLl9pc0VuYWJsZWQoKSB8fFxuICAgIC8vIEZvcmNlIGludGVncmF0aW9ucyB0byBiZSBzZXR1cCBldmVuIGlmIG5vIERTTiB3YXMgc2V0IHdoZW4gd2UgaGF2ZVxuICAgIC8vIFNwb3RsaWdodCBlbmFibGVkLiBUaGlzIGlzIHBhcnRpY3VsYXJseSBpbXBvcnRhbnQgZm9yIGJyb3dzZXIgYXMgd2VcbiAgICAvLyBkb24ndCBzdXBwb3J0IHRoZSBgc3BvdGxpZ2h0YCBvcHRpb24gdGhlcmUgYW5kIHJlbHkgb24gdGhlIHVzZXJzXG4gICAgLy8gYWRkaW5nIHRoZSBgc3BvdGxpZ2h0QnJvd3NlckludGVncmF0aW9uKClgIHRvIHRoZWlyIGludGVncmF0aW9ucyB3aGljaFxuICAgIC8vIHdvdWxkbid0IGdldCBpbml0aWFsaXplZCB3aXRoIHRoZSBjaGVjayBiZWxvdyB3aGVuIHRoZXJlJ3Mgbm8gRFNOIHNldC5cbiAgICB0aGlzLl9vcHRpb25zLmludGVncmF0aW9ucy5zb21lKCh7XG4gICAgICBuYW1lXG4gICAgfSkgPT4gbmFtZS5zdGFydHNXaXRoKCdTcG90bGlnaHQnKSkpIHtcbiAgICAgIHRoaXMuX3NldHVwSW50ZWdyYXRpb25zKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYW4gaW5zdGFsbGVkIGludGVncmF0aW9uIGJ5IGl0cyBuYW1lLlxuICAgKlxuICAgKiBAcmV0dXJucyB7SW50ZWdyYXRpb258dW5kZWZpbmVkfSBUaGUgaW5zdGFsbGVkIGludGVncmF0aW9uIG9yIGB1bmRlZmluZWRgIGlmIG5vIGludGVncmF0aW9uIHdpdGggdGhhdCBgbmFtZWAgd2FzIGluc3RhbGxlZC5cbiAgICovXG4gIGdldEludGVncmF0aW9uQnlOYW1lKGludGVncmF0aW9uTmFtZSkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlZ3JhdGlvbnNbaW50ZWdyYXRpb25OYW1lXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gaW50ZWdyYXRpb24gdG8gdGhlIGNsaWVudC5cbiAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBlLmcuIGxhenkgbG9hZCBpbnRlZ3JhdGlvbnMuXG4gICAqIEluIG1vc3QgY2FzZXMsIHRoaXMgc2hvdWxkIG5vdCBiZSBuZWNlc3NhcnksXG4gICAqIGFuZCB5b3UncmUgYmV0dGVyIG9mZiBqdXN0IHBhc3NpbmcgdGhlIGludGVncmF0aW9ucyB2aWEgYGludGVncmF0aW9uczogW11gIGF0IGluaXRpYWxpemF0aW9uIHRpbWUuXG4gICAqIEhvd2V2ZXIsIGlmIHlvdSBmaW5kIHRoZSBuZWVkIHRvIGNvbmRpdGlvbmFsbHkgbG9hZCAmIGFkZCBhbiBpbnRlZ3JhdGlvbiwgeW91IGNhbiB1c2UgYGFkZEludGVncmF0aW9uYCB0byBkbyBzby5cbiAgICovXG4gIGFkZEludGVncmF0aW9uKGludGVncmF0aW9uKSB7XG4gICAgY29uc3QgaXNBbHJlYWR5SW5zdGFsbGVkID0gdGhpcy5faW50ZWdyYXRpb25zW2ludGVncmF0aW9uLm5hbWVdO1xuXG4gICAgLy8gVGhpcyBob29rIHRha2VzIGNhcmUgb2Ygb25seSBpbnN0YWxsaW5nIGlmIG5vdCBhbHJlYWR5IGluc3RhbGxlZFxuICAgIHNldHVwSW50ZWdyYXRpb24odGhpcywgaW50ZWdyYXRpb24sIHRoaXMuX2ludGVncmF0aW9ucyk7XG4gICAgLy8gSGVyZSB3ZSBuZWVkIHRvIGNoZWNrIG1hbnVhbGx5IHRvIG1ha2Ugc3VyZSB0byBub3QgcnVuIHRoaXMgbXVsdGlwbGUgdGltZXNcbiAgICBpZiAoIWlzQWxyZWFkeUluc3RhbGxlZCkge1xuICAgICAgYWZ0ZXJTZXR1cEludGVncmF0aW9ucyh0aGlzLCBbaW50ZWdyYXRpb25dKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhIGZ1bGx5IHByZXBhcmVkIGV2ZW50IHRvIFNlbnRyeS5cbiAgICovXG4gIHNlbmRFdmVudChldmVudCwgaGludCA9IHt9KSB7XG4gICAgdGhpcy5lbWl0KCdiZWZvcmVTZW5kRXZlbnQnLCBldmVudCwgaGludCk7XG4gICAgbGV0IGVudiA9IGNyZWF0ZUV2ZW50RW52ZWxvcGUoZXZlbnQsIHRoaXMuX2RzbiwgdGhpcy5fb3B0aW9ucy5fbWV0YWRhdGEsIHRoaXMuX29wdGlvbnMudHVubmVsKTtcbiAgICBmb3IgKGNvbnN0IGF0dGFjaG1lbnQgb2YgaGludC5hdHRhY2htZW50cyB8fCBbXSkge1xuICAgICAgZW52ID0gYWRkSXRlbVRvRW52ZWxvcGUoZW52LCBjcmVhdGVBdHRhY2htZW50RW52ZWxvcGVJdGVtKGF0dGFjaG1lbnQpKTtcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuc2VuZEVudmVsb3BlKGVudik7XG4gICAgaWYgKHByb21pc2UpIHtcbiAgICAgIHByb21pc2UudGhlbihzZW5kUmVzcG9uc2UgPT4gdGhpcy5lbWl0KCdhZnRlclNlbmRFdmVudCcsIGV2ZW50LCBzZW5kUmVzcG9uc2UpLCBudWxsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhIHNlc3Npb24gb3Igc2Vzc2lvbiBhZ2dyZWdyYXRlcyB0byBTZW50cnkuXG4gICAqL1xuICBzZW5kU2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgLy8gQmFja2ZpbGwgcmVsZWFzZSBhbmQgZW52aXJvbm1lbnQgb24gc2Vzc2lvblxuICAgIGNvbnN0IHtcbiAgICAgIHJlbGVhc2U6IGNsaWVudFJlbGVhc2VPcHRpb24sXG4gICAgICBlbnZpcm9ubWVudDogY2xpZW50RW52aXJvbm1lbnRPcHRpb24gPSBERUZBVUxUX0VOVklST05NRU5UXG4gICAgfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgaWYgKCdhZ2dyZWdhdGVzJyBpbiBzZXNzaW9uKSB7XG4gICAgICBjb25zdCBzZXNzaW9uQXR0cnMgPSBzZXNzaW9uLmF0dHJzIHx8IHt9O1xuICAgICAgaWYgKCFzZXNzaW9uQXR0cnMucmVsZWFzZSAmJiAhY2xpZW50UmVsZWFzZU9wdGlvbikge1xuICAgICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy53YXJuKE1JU1NJTkdfUkVMRUFTRV9GT1JfU0VTU0lPTl9FUlJPUik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlc3Npb25BdHRycy5yZWxlYXNlID0gc2Vzc2lvbkF0dHJzLnJlbGVhc2UgfHwgY2xpZW50UmVsZWFzZU9wdGlvbjtcbiAgICAgIHNlc3Npb25BdHRycy5lbnZpcm9ubWVudCA9IHNlc3Npb25BdHRycy5lbnZpcm9ubWVudCB8fCBjbGllbnRFbnZpcm9ubWVudE9wdGlvbjtcbiAgICAgIHNlc3Npb24uYXR0cnMgPSBzZXNzaW9uQXR0cnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghc2Vzc2lvbi5yZWxlYXNlICYmICFjbGllbnRSZWxlYXNlT3B0aW9uKSB7XG4gICAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oTUlTU0lOR19SRUxFQVNFX0ZPUl9TRVNTSU9OX0VSUk9SKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2Vzc2lvbi5yZWxlYXNlID0gc2Vzc2lvbi5yZWxlYXNlIHx8IGNsaWVudFJlbGVhc2VPcHRpb247XG4gICAgICBzZXNzaW9uLmVudmlyb25tZW50ID0gc2Vzc2lvbi5lbnZpcm9ubWVudCB8fCBjbGllbnRFbnZpcm9ubWVudE9wdGlvbjtcbiAgICB9XG4gICAgdGhpcy5lbWl0KCdiZWZvcmVTZW5kU2Vzc2lvbicsIHNlc3Npb24pO1xuICAgIGNvbnN0IGVudiA9IGNyZWF0ZVNlc3Npb25FbnZlbG9wZShzZXNzaW9uLCB0aGlzLl9kc24sIHRoaXMuX29wdGlvbnMuX21ldGFkYXRhLCB0aGlzLl9vcHRpb25zLnR1bm5lbCk7XG5cbiAgICAvLyBzZW5kRW52ZWxvcGUgc2hvdWxkIG5vdCB0aHJvd1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICB0aGlzLnNlbmRFbnZlbG9wZShlbnYpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZCBvbiB0aGUgY2xpZW50IHRoYXQgYW4gZXZlbnQgZ290IGRyb3BwZWQgKGllLCBhbiBldmVudCB0aGF0IHdpbGwgbm90IGJlIHNlbnQgdG8gU2VudHJ5KS5cbiAgICovXG4gIHJlY29yZERyb3BwZWRFdmVudChyZWFzb24sIGNhdGVnb3J5LCBjb3VudCA9IDEpIHtcbiAgICBpZiAodGhpcy5fb3B0aW9ucy5zZW5kQ2xpZW50UmVwb3J0cykge1xuICAgICAgLy8gV2Ugd2FudCB0byB0cmFjayBlYWNoIGNhdGVnb3J5IChlcnJvciwgdHJhbnNhY3Rpb24sIHNlc3Npb24sIHJlcGxheV9ldmVudCkgc2VwYXJhdGVseVxuICAgICAgLy8gYnV0IHN0aWxsIGtlZXAgdGhlIGRpc3RpbmN0aW9uIGJldHdlZW4gZGlmZmVyZW50IHR5cGUgb2Ygb3V0Y29tZXMuXG4gICAgICAvLyBXZSBjb3VsZCB1c2UgbmVzdGVkIG1hcHMsIGJ1dCBpdCdzIG11Y2ggZWFzaWVyIHRvIHJlYWQgYW5kIHR5cGUgdGhpcyB3YXkuXG4gICAgICAvLyBBIGNvcnJlY3QgdHlwZSBmb3IgbWFwLWJhc2VkIGltcGxlbWVudGF0aW9uIGlmIHdlIHdhbnQgdG8gZ28gdGhhdCByb3V0ZVxuICAgICAgLy8gd291bGQgYmUgYFBhcnRpYWw8UmVjb3JkPFNlbnRyeVJlcXVlc3RUeXBlLCBQYXJ0aWFsPFJlY29yZDxPdXRjb21lLCBudW1iZXI+Pj4+YFxuICAgICAgLy8gV2l0aCB0eXBlc2NyaXB0IDQuMSB3ZSBjb3VsZCBldmVuIHVzZSB0ZW1wbGF0ZSBsaXRlcmFsIHR5cGVzXG4gICAgICBjb25zdCBrZXkgPSBgJHtyZWFzb259OiR7Y2F0ZWdvcnl9YDtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZyhgUmVjb3JkaW5nIG91dGNvbWU6IFwiJHtrZXl9XCIke2NvdW50ID4gMSA/IGAgKCR7Y291bnR9IHRpbWVzKWAgOiAnJ31gKTtcbiAgICAgIHRoaXMuX291dGNvbWVzW2tleV0gPSAodGhpcy5fb3V0Y29tZXNba2V5XSB8fCAwKSArIGNvdW50O1xuICAgIH1cbiAgfVxuXG4gIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC91bmlmaWVkLXNpZ25hdHVyZXMgKi9cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZm9yIHdoZW5ldmVyIGEgc3BhbiBpcyBzdGFydGVkLlxuICAgKiBSZWNlaXZlcyB0aGUgc3BhbiBhcyBhcmd1bWVudC5cbiAgICogQHJldHVybnMgeygpID0+IHZvaWR9IEEgZnVuY3Rpb24gdGhhdCwgd2hlbiBleGVjdXRlZCwgcmVtb3ZlcyB0aGUgcmVnaXN0ZXJlZCBjYWxsYmFjay5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgaG9vayBvbiB0aGlzIGNsaWVudC5cbiAgICovXG4gIG9uKGhvb2ssIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaG9va3MgPSB0aGlzLl9ob29rc1tob29rXSA9IHRoaXMuX2hvb2tzW2hvb2tdIHx8IFtdO1xuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBXZSBhc3N1bWUgdGhlIHR5cGVzIGFyZSBjb3JyZWN0XG4gICAgaG9va3MucHVzaChjYWxsYmFjayk7XG5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYSBjYWxsYmFjayBleGVjdXRpb24gaGFuZGxlciB0aGF0LCB3aGVuIGludm9rZWQsXG4gICAgLy8gZGVyZWdpc3RlcnMgYSBjYWxsYmFjay4gVGhpcyBpcyBjcnVjaWFsIGZvciBtYW5hZ2luZyBpbnN0YW5jZXMgd2hlcmUgY2FsbGJhY2tzXG4gICAgLy8gbmVlZCB0byBiZSB1bnJlZ2lzdGVyZWQgdG8gcHJldmVudCBzZWxmLXJlZmVyZW5jaW5nIGluIGNhbGxiYWNrIGNsb3N1cmVzLFxuICAgIC8vIGVuc3VyaW5nIHByb3BlciBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgV2UgYXNzdW1lIHRoZSB0eXBlcyBhcmUgY29ycmVjdFxuICAgICAgY29uc3QgY2JJbmRleCA9IGhvb2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgaWYgKGNiSW5kZXggPiAtMSkge1xuICAgICAgICBob29rcy5zcGxpY2UoY2JJbmRleCwgMSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKiBGaXJlIGEgaG9vayB3aGVuZXZlciBhIHNwYW4gc3RhcnRzLiAqL1xuXG4gIC8qKlxuICAgKiBFbWl0IGEgaG9vayB0aGF0IHdhcyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgdmlhIGBvbigpYC5cbiAgICovXG4gIGVtaXQoaG9vaywgLi4ucmVzdCkge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMuX2hvb2tzW2hvb2tdO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKC4uLnJlc3QpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhbiBlbnZlbG9wZSB0byBTZW50cnkuXG4gICAqL1xuICBzZW5kRW52ZWxvcGUoZW52ZWxvcGUpIHtcbiAgICB0aGlzLmVtaXQoJ2JlZm9yZUVudmVsb3BlJywgZW52ZWxvcGUpO1xuICAgIGlmICh0aGlzLl9pc0VuYWJsZWQoKSAmJiB0aGlzLl90cmFuc3BvcnQpIHtcbiAgICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuc2VuZChlbnZlbG9wZSkudGhlbihudWxsLCByZWFzb24gPT4ge1xuICAgICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy5lcnJvcignRXJyb3Igd2hpbGUgc2VuZGluZyBlbnZlbG9wZTonLCByZWFzb24pO1xuICAgICAgICByZXR1cm4gcmVhc29uO1xuICAgICAgfSk7XG4gICAgfVxuICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmVycm9yKCdUcmFuc3BvcnQgZGlzYWJsZWQnKTtcbiAgICByZXR1cm4gcmVzb2x2ZWRTeW5jUHJvbWlzZSh7fSk7XG4gIH1cblxuICAvKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC91bmlmaWVkLXNpZ25hdHVyZXMgKi9cblxuICAvKiogU2V0dXAgaW50ZWdyYXRpb25zIGZvciB0aGlzIGNsaWVudC4gKi9cbiAgX3NldHVwSW50ZWdyYXRpb25zKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGludGVncmF0aW9uc1xuICAgIH0gPSB0aGlzLl9vcHRpb25zO1xuICAgIHRoaXMuX2ludGVncmF0aW9ucyA9IHNldHVwSW50ZWdyYXRpb25zKHRoaXMsIGludGVncmF0aW9ucyk7XG4gICAgYWZ0ZXJTZXR1cEludGVncmF0aW9ucyh0aGlzLCBpbnRlZ3JhdGlvbnMpO1xuICB9XG5cbiAgLyoqIFVwZGF0ZXMgZXhpc3Rpbmcgc2Vzc2lvbiBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZXZlbnQgKi9cbiAgX3VwZGF0ZVNlc3Npb25Gcm9tRXZlbnQoc2Vzc2lvbiwgZXZlbnQpIHtcbiAgICBsZXQgY3Jhc2hlZCA9IGV2ZW50LmxldmVsID09PSAnZmF0YWwnO1xuICAgIGxldCBlcnJvcmVkID0gZmFsc2U7XG4gICAgY29uc3QgZXhjZXB0aW9ucyA9IGV2ZW50LmV4Y2VwdGlvbj8udmFsdWVzO1xuICAgIGlmIChleGNlcHRpb25zKSB7XG4gICAgICBlcnJvcmVkID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgZXggb2YgZXhjZXB0aW9ucykge1xuICAgICAgICBjb25zdCBtZWNoYW5pc20gPSBleC5tZWNoYW5pc207XG4gICAgICAgIGlmIChtZWNoYW5pc20/LmhhbmRsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgY3Jhc2hlZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBIHNlc3Npb24gaXMgdXBkYXRlZCBhbmQgdGhhdCBzZXNzaW9uIHVwZGF0ZSBpcyBzZW50IGluIG9ubHkgb25lIG9mIHRoZSB0d28gZm9sbG93aW5nIHNjZW5hcmlvczpcbiAgICAvLyAxLiBTZXNzaW9uIHdpdGggbm9uIHRlcm1pbmFsIHN0YXR1cyBhbmQgMCBlcnJvcnMgKyBhbiBlcnJvciBvY2N1cnJlZCAtPiBXaWxsIHNldCBlcnJvciBjb3VudCB0byAxIGFuZCBzZW5kIHVwZGF0ZVxuICAgIC8vIDIuIFNlc3Npb24gd2l0aCBub24gdGVybWluYWwgc3RhdHVzIGFuZCAxIGVycm9yICsgYSBjcmFzaCBvY2N1cnJlZCAtPiBXaWxsIHNldCBzdGF0dXMgY3Jhc2hlZCBhbmQgc2VuZCB1cGRhdGVcbiAgICBjb25zdCBzZXNzaW9uTm9uVGVybWluYWwgPSBzZXNzaW9uLnN0YXR1cyA9PT0gJ29rJztcbiAgICBjb25zdCBzaG91bGRVcGRhdGVBbmRTZW5kID0gc2Vzc2lvbk5vblRlcm1pbmFsICYmIHNlc3Npb24uZXJyb3JzID09PSAwIHx8IHNlc3Npb25Ob25UZXJtaW5hbCAmJiBjcmFzaGVkO1xuICAgIGlmIChzaG91bGRVcGRhdGVBbmRTZW5kKSB7XG4gICAgICB1cGRhdGVTZXNzaW9uKHNlc3Npb24sIHtcbiAgICAgICAgLi4uKGNyYXNoZWQgJiYge1xuICAgICAgICAgIHN0YXR1czogJ2NyYXNoZWQnXG4gICAgICAgIH0pLFxuICAgICAgICBlcnJvcnM6IHNlc3Npb24uZXJyb3JzIHx8IE51bWJlcihlcnJvcmVkIHx8IGNyYXNoZWQpXG4gICAgICB9KTtcbiAgICAgIHRoaXMuY2FwdHVyZVNlc3Npb24oc2Vzc2lvbik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGUgY2xpZW50IGlzIGZpbmlzaGVkIHByb2Nlc3NpbmcuIFJldHVybnMgYSBwcm9taXNlIGJlY2F1c2UgaXQgd2lsbCB3YWl0IGB0aW1lb3V0YCBtcyBiZWZvcmUgc2F5aW5nXG4gICAqIFwibm9cIiAocmVzb2x2aW5nIHRvIGBmYWxzZWApIGluIG9yZGVyIHRvIGdpdmUgdGhlIGNsaWVudCBhIGNoYW5jZSB0byBwb3RlbnRpYWxseSBmaW5pc2ggZmlyc3QuXG4gICAqXG4gICAqIEBwYXJhbSB0aW1lb3V0IFRoZSB0aW1lLCBpbiBtcywgYWZ0ZXIgd2hpY2ggdG8gcmVzb2x2ZSB0byBgZmFsc2VgIGlmIHRoZSBjbGllbnQgaXMgc3RpbGwgYnVzeS4gUGFzc2luZyBgMGAgKG9yIG5vdFxuICAgKiBwYXNzaW5nIGFueXRoaW5nKSB3aWxsIG1ha2UgdGhlIHByb21pc2Ugd2FpdCBhcyBsb25nIGFzIGl0IHRha2VzIGZvciBwcm9jZXNzaW5nIHRvIGZpbmlzaCBiZWZvcmUgcmVzb2x2aW5nIHRvXG4gICAqIGB0cnVlYC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHdoaWNoIHdpbGwgcmVzb2x2ZSB0byBgdHJ1ZWAgaWYgcHJvY2Vzc2luZyBpcyBhbHJlYWR5IGRvbmUgb3IgZmluaXNoZXMgYmVmb3JlIHRoZSB0aW1lb3V0LCBhbmRcbiAgICogYGZhbHNlYCBvdGhlcndpc2VcbiAgICovXG4gIF9pc0NsaWVudERvbmVQcm9jZXNzaW5nKHRpbWVvdXQpIHtcbiAgICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IHRpY2tlZCA9IDA7XG4gICAgICBjb25zdCB0aWNrID0gMTtcbiAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fbnVtUHJvY2Vzc2luZyA9PSAwKSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aWNrZWQgKz0gdGljaztcbiAgICAgICAgICBpZiAodGltZW91dCAmJiB0aWNrZWQgPj0gdGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIHRpY2spO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIERldGVybWluZXMgd2hldGhlciB0aGlzIFNESyBpcyBlbmFibGVkIGFuZCBhIHRyYW5zcG9ydCBpcyBwcmVzZW50LiAqL1xuICBfaXNFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmdldE9wdGlvbnMoKS5lbmFibGVkICE9PSBmYWxzZSAmJiB0aGlzLl90cmFuc3BvcnQgIT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNvbW1vbiBpbmZvcm1hdGlvbiB0byBldmVudHMuXG4gICAqXG4gICAqIFRoZSBpbmZvcm1hdGlvbiBpbmNsdWRlcyByZWxlYXNlIGFuZCBlbnZpcm9ubWVudCBmcm9tIGBvcHRpb25zYCxcbiAgICogYnJlYWRjcnVtYnMgYW5kIGNvbnRleHQgKGV4dHJhLCB0YWdzIGFuZCB1c2VyKSBmcm9tIHRoZSBzY29wZS5cbiAgICpcbiAgICogSW5mb3JtYXRpb24gdGhhdCBpcyBhbHJlYWR5IHByZXNlbnQgaW4gdGhlIGV2ZW50IGlzIG5ldmVyIG92ZXJ3cml0dGVuLiBGb3JcbiAgICogbmVzdGVkIG9iamVjdHMsIHN1Y2ggYXMgdGhlIGNvbnRleHQsIGtleXMgYXJlIG1lcmdlZC5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50IFRoZSBvcmlnaW5hbCBldmVudC5cbiAgICogQHBhcmFtIGhpbnQgTWF5IGNvbnRhaW4gYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb3JpZ2luYWwgZXhjZXB0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFNjb3BlIEEgc2NvcGUgY29udGFpbmluZyBldmVudCBtZXRhZGF0YS5cbiAgICogQHJldHVybnMgQSBuZXcgZXZlbnQgd2l0aCBtb3JlIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgX3ByZXBhcmVFdmVudChldmVudCwgaGludCwgY3VycmVudFNjb3BlLCBpc29sYXRpb25TY29wZSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcbiAgICBjb25zdCBpbnRlZ3JhdGlvbnMgPSBPYmplY3Qua2V5cyh0aGlzLl9pbnRlZ3JhdGlvbnMpO1xuICAgIGlmICghaGludC5pbnRlZ3JhdGlvbnMgJiYgaW50ZWdyYXRpb25zPy5sZW5ndGgpIHtcbiAgICAgIGhpbnQuaW50ZWdyYXRpb25zID0gaW50ZWdyYXRpb25zO1xuICAgIH1cbiAgICB0aGlzLmVtaXQoJ3ByZXByb2Nlc3NFdmVudCcsIGV2ZW50LCBoaW50KTtcbiAgICBpZiAoIWV2ZW50LnR5cGUpIHtcbiAgICAgIGlzb2xhdGlvblNjb3BlLnNldExhc3RFdmVudElkKGV2ZW50LmV2ZW50X2lkIHx8IGhpbnQuZXZlbnRfaWQpO1xuICAgIH1cbiAgICByZXR1cm4gcHJlcGFyZUV2ZW50KG9wdGlvbnMsIGV2ZW50LCBoaW50LCBjdXJyZW50U2NvcGUsIHRoaXMsIGlzb2xhdGlvblNjb3BlKS50aGVuKGV2dCA9PiB7XG4gICAgICBpZiAoZXZ0ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBldnQ7XG4gICAgICB9XG4gICAgICB0aGlzLmVtaXQoJ3Bvc3Rwcm9jZXNzRXZlbnQnLCBldnQsIGhpbnQpO1xuICAgICAgZXZ0LmNvbnRleHRzID0ge1xuICAgICAgICB0cmFjZTogZ2V0VHJhY2VDb250ZXh0RnJvbVNjb3BlKGN1cnJlbnRTY29wZSksXG4gICAgICAgIC4uLmV2dC5jb250ZXh0c1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGR5bmFtaWNTYW1wbGluZ0NvbnRleHQgPSBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNjb3BlKHRoaXMsIGN1cnJlbnRTY29wZSk7XG4gICAgICBldnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0ge1xuICAgICAgICBkeW5hbWljU2FtcGxpbmdDb250ZXh0LFxuICAgICAgICAuLi5ldnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGV2dDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzZXMgdGhlIGV2ZW50IGFuZCBsb2dzIGFuIGVycm9yIGluIGNhc2Ugb2YgcmVqZWN0aW9uXG4gICAqIEBwYXJhbSBldmVudFxuICAgKiBAcGFyYW0gaGludFxuICAgKiBAcGFyYW0gc2NvcGVcbiAgICovXG4gIF9jYXB0dXJlRXZlbnQoZXZlbnQsIGhpbnQgPSB7fSwgY3VycmVudFNjb3BlID0gZ2V0Q3VycmVudFNjb3BlKCksIGlzb2xhdGlvblNjb3BlID0gZ2V0SXNvbGF0aW9uU2NvcGUoKSkge1xuICAgIGlmIChERUJVR19CVUlMRCAmJiBpc0Vycm9yRXZlbnQoZXZlbnQpKSB7XG4gICAgICBkZWJ1Zy5sb2coYENhcHR1cmVkIGVycm9yIGV2ZW50IFxcYCR7Z2V0UG9zc2libGVFdmVudE1lc3NhZ2VzKGV2ZW50KVswXSB8fCAnPHVua25vd24+J31cXGBgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NFdmVudChldmVudCwgaGludCwgY3VycmVudFNjb3BlLCBpc29sYXRpb25TY29wZSkudGhlbihmaW5hbEV2ZW50ID0+IHtcbiAgICAgIHJldHVybiBmaW5hbEV2ZW50LmV2ZW50X2lkO1xuICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICBpZiAoREVCVUdfQlVJTEQpIHtcbiAgICAgICAgaWYgKF9pc0RvTm90U2VuZEV2ZW50RXJyb3IocmVhc29uKSkge1xuICAgICAgICAgIGRlYnVnLmxvZyhyZWFzb24ubWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoX2lzSW50ZXJuYWxFcnJvcihyZWFzb24pKSB7XG4gICAgICAgICAgZGVidWcud2FybihyZWFzb24ubWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWcud2FybihyZWFzb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NlcyBhbiBldmVudCAoZWl0aGVyIGVycm9yIG9yIG1lc3NhZ2UpIGFuZCBzZW5kcyBpdCB0byBTZW50cnkuXG4gICAqXG4gICAqIFRoaXMgYWxzbyBhZGRzIGJyZWFkY3J1bWJzIGFuZCBjb250ZXh0IGluZm9ybWF0aW9uIHRvIHRoZSBldmVudC4gSG93ZXZlcixcbiAgICogcGxhdGZvcm0gc3BlY2lmaWMgbWV0YSBkYXRhIChzdWNoIGFzIHRoZSBVc2VyJ3MgSVAgYWRkcmVzcykgbXVzdCBiZSBhZGRlZFxuICAgKiBieSB0aGUgU0RLIGltcGxlbWVudG9yLlxuICAgKlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHRvIHNlbmQgdG8gU2VudHJ5LlxuICAgKiBAcGFyYW0gaGludCBNYXkgY29udGFpbiBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcmlnaW5hbCBleGNlcHRpb24uXG4gICAqIEBwYXJhbSBjdXJyZW50U2NvcGUgQSBzY29wZSBjb250YWluaW5nIGV2ZW50IG1ldGFkYXRhLlxuICAgKiBAcmV0dXJucyBBIFN5bmNQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZXZlbnQgb3IgcmVqZWN0cyBpbiBjYXNlIGV2ZW50IHdhcy93aWxsIG5vdCBiZSBzZW5kLlxuICAgKi9cbiAgX3Byb2Nlc3NFdmVudChldmVudCwgaGludCwgY3VycmVudFNjb3BlLCBpc29sYXRpb25TY29wZSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcbiAgICBjb25zdCB7XG4gICAgICBzYW1wbGVSYXRlXG4gICAgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgaXNUcmFuc2FjdGlvbiA9IGlzVHJhbnNhY3Rpb25FdmVudChldmVudCk7XG4gICAgY29uc3QgaXNFcnJvciA9IGlzRXJyb3JFdmVudChldmVudCk7XG4gICAgY29uc3QgZXZlbnRUeXBlID0gZXZlbnQudHlwZSB8fCAnZXJyb3InO1xuICAgIGNvbnN0IGJlZm9yZVNlbmRMYWJlbCA9IGBiZWZvcmUgc2VuZCBmb3IgdHlwZSBcXGAke2V2ZW50VHlwZX1cXGBgO1xuXG4gICAgLy8gMS4wID09PSAxMDAlIGV2ZW50cyBhcmUgc2VudFxuICAgIC8vIDAuMCA9PT0gMCUgZXZlbnRzIGFyZSBzZW50XG4gICAgLy8gU2FtcGxpbmcgZm9yIHRyYW5zYWN0aW9uIGhhcHBlbnMgc29tZXdoZXJlIGVsc2VcbiAgICBjb25zdCBwYXJzZWRTYW1wbGVSYXRlID0gdHlwZW9mIHNhbXBsZVJhdGUgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogcGFyc2VTYW1wbGVSYXRlKHNhbXBsZVJhdGUpO1xuICAgIGlmIChpc0Vycm9yICYmIHR5cGVvZiBwYXJzZWRTYW1wbGVSYXRlID09PSAnbnVtYmVyJyAmJiBNYXRoLnJhbmRvbSgpID4gcGFyc2VkU2FtcGxlUmF0ZSkge1xuICAgICAgdGhpcy5yZWNvcmREcm9wcGVkRXZlbnQoJ3NhbXBsZV9yYXRlJywgJ2Vycm9yJyk7XG4gICAgICByZXR1cm4gcmVqZWN0ZWRTeW5jUHJvbWlzZShfbWFrZURvTm90U2VuZEV2ZW50RXJyb3IoYERpc2NhcmRpbmcgZXZlbnQgYmVjYXVzZSBpdCdzIG5vdCBpbmNsdWRlZCBpbiB0aGUgcmFuZG9tIHNhbXBsZSAoc2FtcGxpbmcgcmF0ZSA9ICR7c2FtcGxlUmF0ZX0pYCkpO1xuICAgIH1cbiAgICBjb25zdCBkYXRhQ2F0ZWdvcnkgPSBldmVudFR5cGUgPT09ICdyZXBsYXlfZXZlbnQnID8gJ3JlcGxheScgOiBldmVudFR5cGU7XG4gICAgcmV0dXJuIHRoaXMuX3ByZXBhcmVFdmVudChldmVudCwgaGludCwgY3VycmVudFNjb3BlLCBpc29sYXRpb25TY29wZSkudGhlbihwcmVwYXJlZCA9PiB7XG4gICAgICBpZiAocHJlcGFyZWQgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5yZWNvcmREcm9wcGVkRXZlbnQoJ2V2ZW50X3Byb2Nlc3NvcicsIGRhdGFDYXRlZ29yeSk7XG4gICAgICAgIHRocm93IF9tYWtlRG9Ob3RTZW5kRXZlbnRFcnJvcignQW4gZXZlbnQgcHJvY2Vzc29yIHJldHVybmVkIGBudWxsYCwgd2lsbCBub3Qgc2VuZCBldmVudC4nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzSW50ZXJuYWxFeGNlcHRpb24gPSBoaW50LmRhdGEgJiYgaGludC5kYXRhLl9fc2VudHJ5X18gPT09IHRydWU7XG4gICAgICBpZiAoaXNJbnRlcm5hbEV4Y2VwdGlvbikge1xuICAgICAgICByZXR1cm4gcHJlcGFyZWQ7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSBwcm9jZXNzQmVmb3JlU2VuZCh0aGlzLCBvcHRpb25zLCBwcmVwYXJlZCwgaGludCk7XG4gICAgICByZXR1cm4gX3ZhbGlkYXRlQmVmb3JlU2VuZFJlc3VsdChyZXN1bHQsIGJlZm9yZVNlbmRMYWJlbCk7XG4gICAgfSkudGhlbihwcm9jZXNzZWRFdmVudCA9PiB7XG4gICAgICBpZiAocHJvY2Vzc2VkRXZlbnQgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5yZWNvcmREcm9wcGVkRXZlbnQoJ2JlZm9yZV9zZW5kJywgZGF0YUNhdGVnb3J5KTtcbiAgICAgICAgaWYgKGlzVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICBjb25zdCBzcGFucyA9IGV2ZW50LnNwYW5zIHx8IFtdO1xuICAgICAgICAgIC8vIHRoZSB0cmFuc2FjdGlvbiBpdHNlbGYgY291bnRzIGFzIG9uZSBzcGFuLCBwbHVzIGFsbCB0aGUgY2hpbGQgc3BhbnMgdGhhdCBhcmUgYWRkZWRcbiAgICAgICAgICBjb25zdCBzcGFuQ291bnQgPSAxICsgc3BhbnMubGVuZ3RoO1xuICAgICAgICAgIHRoaXMucmVjb3JkRHJvcHBlZEV2ZW50KCdiZWZvcmVfc2VuZCcsICdzcGFuJywgc3BhbkNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBfbWFrZURvTm90U2VuZEV2ZW50RXJyb3IoYCR7YmVmb3JlU2VuZExhYmVsfSByZXR1cm5lZCBcXGBudWxsXFxgLCB3aWxsIG5vdCBzZW5kIGV2ZW50LmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGN1cnJlbnRTY29wZS5nZXRTZXNzaW9uKCkgfHwgaXNvbGF0aW9uU2NvcGUuZ2V0U2Vzc2lvbigpO1xuICAgICAgaWYgKGlzRXJyb3IgJiYgc2Vzc2lvbikge1xuICAgICAgICB0aGlzLl91cGRhdGVTZXNzaW9uRnJvbUV2ZW50KHNlc3Npb24sIHByb2Nlc3NlZEV2ZW50KTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1RyYW5zYWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNwYW5Db3VudEJlZm9yZSA9IHByb2Nlc3NlZEV2ZW50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YT8uc3BhbkNvdW50QmVmb3JlUHJvY2Vzc2luZyB8fCAwO1xuICAgICAgICBjb25zdCBzcGFuQ291bnRBZnRlciA9IHByb2Nlc3NlZEV2ZW50LnNwYW5zID8gcHJvY2Vzc2VkRXZlbnQuc3BhbnMubGVuZ3RoIDogMDtcbiAgICAgICAgY29uc3QgZHJvcHBlZFNwYW5Db3VudCA9IHNwYW5Db3VudEJlZm9yZSAtIHNwYW5Db3VudEFmdGVyO1xuICAgICAgICBpZiAoZHJvcHBlZFNwYW5Db3VudCA+IDApIHtcbiAgICAgICAgICB0aGlzLnJlY29yZERyb3BwZWRFdmVudCgnYmVmb3JlX3NlbmQnLCAnc3BhbicsIGRyb3BwZWRTcGFuQ291bnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE5vbmUgb2YgdGhlIFNlbnRyeSBidWlsdCBldmVudCBwcm9jZXNzb3Igd2lsbCB1cGRhdGUgdHJhbnNhY3Rpb24gbmFtZSxcbiAgICAgIC8vIHNvIGlmIHRoZSB0cmFuc2FjdGlvbiBuYW1lIGhhcyBiZWVuIGNoYW5nZWQgYnkgYW4gZXZlbnQgcHJvY2Vzc29yLCB3ZSBrbm93XG4gICAgICAvLyBpdCBoYXMgdG8gY29tZSBmcm9tIGN1c3RvbSBldmVudCBwcm9jZXNzb3IgYWRkZWQgYnkgYSB1c2VyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkluZm8gPSBwcm9jZXNzZWRFdmVudC50cmFuc2FjdGlvbl9pbmZvO1xuICAgICAgaWYgKGlzVHJhbnNhY3Rpb24gJiYgdHJhbnNhY3Rpb25JbmZvICYmIHByb2Nlc3NlZEV2ZW50LnRyYW5zYWN0aW9uICE9PSBldmVudC50cmFuc2FjdGlvbikge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSAnY3VzdG9tJztcbiAgICAgICAgcHJvY2Vzc2VkRXZlbnQudHJhbnNhY3Rpb25faW5mbyA9IHtcbiAgICAgICAgICAuLi50cmFuc2FjdGlvbkluZm8sXG4gICAgICAgICAgc291cmNlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB0aGlzLnNlbmRFdmVudChwcm9jZXNzZWRFdmVudCwgaGludCk7XG4gICAgICByZXR1cm4gcHJvY2Vzc2VkRXZlbnQ7XG4gICAgfSkudGhlbihudWxsLCByZWFzb24gPT4ge1xuICAgICAgaWYgKF9pc0RvTm90U2VuZEV2ZW50RXJyb3IocmVhc29uKSB8fCBfaXNJbnRlcm5hbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgdGhyb3cgcmVhc29uO1xuICAgICAgfVxuICAgICAgdGhpcy5jYXB0dXJlRXhjZXB0aW9uKHJlYXNvbiwge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgX19zZW50cnlfXzogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBvcmlnaW5hbEV4Y2VwdGlvbjogcmVhc29uXG4gICAgICB9KTtcbiAgICAgIHRocm93IF9tYWtlSW50ZXJuYWxFcnJvcihgRXZlbnQgcHJvY2Vzc2luZyBwaXBlbGluZSB0aHJldyBhbiBlcnJvciwgb3JpZ2luYWwgZXZlbnQgd2lsbCBub3QgYmUgc2VudC4gRGV0YWlscyBoYXZlIGJlZW4gc2VudCBhcyBhIG5ldyBldmVudC5cXG5SZWFzb246ICR7cmVhc29ufWApO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE9jY3VwaWVzIHRoZSBjbGllbnQgd2l0aCBwcm9jZXNzaW5nIGFuZCBldmVudFxuICAgKi9cbiAgX3Byb2Nlc3MocHJvbWlzZSkge1xuICAgIHRoaXMuX251bVByb2Nlc3NpbmcrKztcbiAgICB2b2lkIHByb21pc2UudGhlbih2YWx1ZSA9PiB7XG4gICAgICB0aGlzLl9udW1Qcm9jZXNzaW5nLS07XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSwgcmVhc29uID0+IHtcbiAgICAgIHRoaXMuX251bVByb2Nlc3NpbmctLTtcbiAgICAgIHJldHVybiByZWFzb247XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIG91dGNvbWVzIG9uIHRoaXMgY2xpZW50IGFuZCByZXR1cm5zIHRoZW0uXG4gICAqL1xuICBfY2xlYXJPdXRjb21lcygpIHtcbiAgICBjb25zdCBvdXRjb21lcyA9IHRoaXMuX291dGNvbWVzO1xuICAgIHRoaXMuX291dGNvbWVzID0ge307XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG91dGNvbWVzKS5tYXAoKFtrZXksIHF1YW50aXR5XSkgPT4ge1xuICAgICAgY29uc3QgW3JlYXNvbiwgY2F0ZWdvcnldID0ga2V5LnNwbGl0KCc6Jyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWFzb24sXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICBxdWFudGl0eVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBjbGllbnQgcmVwb3J0cyBhcyBhbiBlbnZlbG9wZS5cbiAgICovXG4gIF9mbHVzaE91dGNvbWVzKCkge1xuICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmxvZygnRmx1c2hpbmcgb3V0Y29tZXMuLi4nKTtcbiAgICBjb25zdCBvdXRjb21lcyA9IHRoaXMuX2NsZWFyT3V0Y29tZXMoKTtcbiAgICBpZiAob3V0Y29tZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy5sb2coJ05vIG91dGNvbWVzIHRvIHNlbmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGlzIHJlYWxseSB0aGUgb25seSBwbGFjZSB3aGVyZSB3ZSB3YW50IHRvIGNoZWNrIGZvciBhIERTTiBhbmQgb25seSBzZW5kIG91dGNvbWVzIHRoZW5cbiAgICBpZiAoIXRoaXMuX2Rzbikge1xuICAgICAgREVCVUdfQlVJTEQgJiYgZGVidWcubG9nKCdObyBkc24gcHJvdmlkZWQsIHdpbGwgbm90IHNlbmQgb3V0Y29tZXMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcubG9nKCdTZW5kaW5nIG91dGNvbWVzOicsIG91dGNvbWVzKTtcbiAgICBjb25zdCBlbnZlbG9wZSA9IGNyZWF0ZUNsaWVudFJlcG9ydEVudmVsb3BlKG91dGNvbWVzLCB0aGlzLl9vcHRpb25zLnR1bm5lbCAmJiBkc25Ub1N0cmluZyh0aGlzLl9kc24pKTtcblxuICAgIC8vIHNlbmRFbnZlbG9wZSBzaG91bGQgbm90IHRocm93XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgIHRoaXMuc2VuZEVudmVsb3BlKGVudmVsb3BlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIHtAbGluayBFdmVudH0gZnJvbSBhbGwgaW5wdXRzIHRvIGBjYXB0dXJlRXhjZXB0aW9uYCBhbmQgbm9uLXByaW1pdGl2ZSBpbnB1dHMgdG8gYGNhcHR1cmVNZXNzYWdlYC5cbiAgICovXG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIGBDbGllbnRgIGluc3RlYWQuIFRoaXMgYWxpYXMgbWF5IGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgdmVyc2lvbi5cbiAqL1xuLy8gVE9ETyh2MTApOiBSZW1vdmVcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgYENsaWVudGAgaW5zdGVhZC4gVGhpcyBhbGlhcyBtYXkgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciB2ZXJzaW9uLlxuICovXG4vLyBUT0RPKHYxMCk6IFJlbW92ZVxuY29uc3QgQmFzZUNsaWVudCA9IENsaWVudDtcblxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IHJldHVybiB2YWx1ZSBvZiBjb25maWd1cmVkIGBiZWZvcmVTZW5kYCBvciBgYmVmb3JlU2VuZFRyYW5zYWN0aW9uYCBpcyBvZiBleHBlY3RlZCB0eXBlLCBhbmQgcmV0dXJucyB0aGUgdmFsdWUgaWYgc28uXG4gKi9cbmZ1bmN0aW9uIF92YWxpZGF0ZUJlZm9yZVNlbmRSZXN1bHQoYmVmb3JlU2VuZFJlc3VsdCwgYmVmb3JlU2VuZExhYmVsKSB7XG4gIGNvbnN0IGludmFsaWRWYWx1ZUVycm9yID0gYCR7YmVmb3JlU2VuZExhYmVsfSBtdXN0IHJldHVybiBcXGBudWxsXFxgIG9yIGEgdmFsaWQgZXZlbnQuYDtcbiAgaWYgKGlzVGhlbmFibGUoYmVmb3JlU2VuZFJlc3VsdCkpIHtcbiAgICByZXR1cm4gYmVmb3JlU2VuZFJlc3VsdC50aGVuKGV2ZW50ID0+IHtcbiAgICAgIGlmICghaXNQbGFpbk9iamVjdChldmVudCkgJiYgZXZlbnQgIT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgX21ha2VJbnRlcm5hbEVycm9yKGludmFsaWRWYWx1ZUVycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9LCBlID0+IHtcbiAgICAgIHRocm93IF9tYWtlSW50ZXJuYWxFcnJvcihgJHtiZWZvcmVTZW5kTGFiZWx9IHJlamVjdGVkIHdpdGggJHtlfWApO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKCFpc1BsYWluT2JqZWN0KGJlZm9yZVNlbmRSZXN1bHQpICYmIGJlZm9yZVNlbmRSZXN1bHQgIT09IG51bGwpIHtcbiAgICB0aHJvdyBfbWFrZUludGVybmFsRXJyb3IoaW52YWxpZFZhbHVlRXJyb3IpO1xuICB9XG4gIHJldHVybiBiZWZvcmVTZW5kUmVzdWx0O1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIG1hdGNoaW5nIGBiZWZvcmVTZW5kWFhYYCBjYWxsYmFjay5cbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc0JlZm9yZVNlbmQoY2xpZW50LCBvcHRpb25zLCBldmVudCwgaGludCkge1xuICBjb25zdCB7XG4gICAgYmVmb3JlU2VuZCxcbiAgICBiZWZvcmVTZW5kVHJhbnNhY3Rpb24sXG4gICAgYmVmb3JlU2VuZFNwYW5cbiAgfSA9IG9wdGlvbnM7XG4gIGxldCBwcm9jZXNzZWRFdmVudCA9IGV2ZW50O1xuICBpZiAoaXNFcnJvckV2ZW50KHByb2Nlc3NlZEV2ZW50KSAmJiBiZWZvcmVTZW5kKSB7XG4gICAgcmV0dXJuIGJlZm9yZVNlbmQocHJvY2Vzc2VkRXZlbnQsIGhpbnQpO1xuICB9XG4gIGlmIChpc1RyYW5zYWN0aW9uRXZlbnQocHJvY2Vzc2VkRXZlbnQpKSB7XG4gICAgaWYgKGJlZm9yZVNlbmRTcGFuKSB7XG4gICAgICAvLyBwcm9jZXNzIHJvb3Qgc3BhblxuICAgICAgY29uc3QgcHJvY2Vzc2VkUm9vdFNwYW5Kc29uID0gYmVmb3JlU2VuZFNwYW4oY29udmVydFRyYW5zYWN0aW9uRXZlbnRUb1NwYW5Kc29uKHByb2Nlc3NlZEV2ZW50KSk7XG4gICAgICBpZiAoIXByb2Nlc3NlZFJvb3RTcGFuSnNvbikge1xuICAgICAgICBzaG93U3BhbkRyb3BXYXJuaW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1cGRhdGUgZXZlbnQgd2l0aCBwcm9jZXNzZWQgcm9vdCBzcGFuIHZhbHVlc1xuICAgICAgICBwcm9jZXNzZWRFdmVudCA9IG1lcmdlKGV2ZW50LCBjb252ZXJ0U3Bhbkpzb25Ub1RyYW5zYWN0aW9uRXZlbnQocHJvY2Vzc2VkUm9vdFNwYW5Kc29uKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHByb2Nlc3MgY2hpbGQgc3BhbnNcbiAgICAgIGlmIChwcm9jZXNzZWRFdmVudC5zcGFucykge1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRTcGFucyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHNwYW4gb2YgcHJvY2Vzc2VkRXZlbnQuc3BhbnMpIHtcbiAgICAgICAgICBjb25zdCBwcm9jZXNzZWRTcGFuID0gYmVmb3JlU2VuZFNwYW4oc3Bhbik7XG4gICAgICAgICAgaWYgKCFwcm9jZXNzZWRTcGFuKSB7XG4gICAgICAgICAgICBzaG93U3BhbkRyb3BXYXJuaW5nKCk7XG4gICAgICAgICAgICBwcm9jZXNzZWRTcGFucy5wdXNoKHNwYW4pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzZWRTcGFucy5wdXNoKHByb2Nlc3NlZFNwYW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzZWRFdmVudC5zcGFucyA9IHByb2Nlc3NlZFNwYW5zO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYmVmb3JlU2VuZFRyYW5zYWN0aW9uKSB7XG4gICAgICBpZiAocHJvY2Vzc2VkRXZlbnQuc3BhbnMpIHtcbiAgICAgICAgLy8gV2Ugc3RvcmUgdGhlICMgb2Ygc3BhbnMgYmVmb3JlIHByb2Nlc3NpbmcgaW4gU0RLIG1ldGFkYXRhLFxuICAgICAgICAvLyBzbyB3ZSBjYW4gY29tcGFyZSBpdCBhZnRlcndhcmRzIHRvIGRldGVybWluZSBob3cgbWFueSBzcGFucyB3ZXJlIGRyb3BwZWRcbiAgICAgICAgY29uc3Qgc3BhbkNvdW50QmVmb3JlID0gcHJvY2Vzc2VkRXZlbnQuc3BhbnMubGVuZ3RoO1xuICAgICAgICBwcm9jZXNzZWRFdmVudC5zZGtQcm9jZXNzaW5nTWV0YWRhdGEgPSB7XG4gICAgICAgICAgLi4uZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLFxuICAgICAgICAgIHNwYW5Db3VudEJlZm9yZVByb2Nlc3Npbmc6IHNwYW5Db3VudEJlZm9yZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJlZm9yZVNlbmRUcmFuc2FjdGlvbihwcm9jZXNzZWRFdmVudCwgaGludCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9jZXNzZWRFdmVudDtcbn1cbmZ1bmN0aW9uIGlzRXJyb3JFdmVudChldmVudCkge1xuICByZXR1cm4gZXZlbnQudHlwZSA9PT0gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gaXNUcmFuc2FjdGlvbkV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC50eXBlID09PSAndHJhbnNhY3Rpb24nO1xufVxuXG4vKiogRXh0cmFjdCB0cmFjZSBpbmZvcm1hdGlvbiBmcm9tIHNjb3BlICovXG5mdW5jdGlvbiBfZ2V0VHJhY2VJbmZvRnJvbVNjb3BlKGNsaWVudCwgc2NvcGUpIHtcbiAgaWYgKCFzY29wZSkge1xuICAgIHJldHVybiBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICB9XG4gIHJldHVybiB3aXRoU2NvcGUoc2NvcGUsICgpID0+IHtcbiAgICBjb25zdCBzcGFuID0gZ2V0QWN0aXZlU3BhbigpO1xuICAgIGNvbnN0IHRyYWNlQ29udGV4dCA9IHNwYW4gPyBzcGFuVG9UcmFjZUNvbnRleHQoc3BhbikgOiBnZXRUcmFjZUNvbnRleHRGcm9tU2NvcGUoc2NvcGUpO1xuICAgIGNvbnN0IGR5bmFtaWNTYW1wbGluZ0NvbnRleHQgPSBzcGFuID8gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TcGFuKHNwYW4pIDogZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TY29wZShjbGllbnQsIHNjb3BlKTtcbiAgICByZXR1cm4gW2R5bmFtaWNTYW1wbGluZ0NvbnRleHQsIHRyYWNlQ29udGV4dF07XG4gIH0pO1xufVxuZXhwb3J0IHsgQmFzZUNsaWVudCwgQ2xpZW50LCBfZ2V0VHJhY2VJbmZvRnJvbVNjb3BlIH07XG4iLCJpbXBvcnQgeyBkc25Ub1N0cmluZyB9IGZyb20gJy4uL3V0aWxzL2Rzbi5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFbnZlbG9wZSB9IGZyb20gJy4uL3V0aWxzL2VudmVsb3BlLmpzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbG9nIGNvbnRhaW5lciBlbnZlbG9wZSBpdGVtIGZvciBhIGxpc3Qgb2YgbG9ncy5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgLSBUaGUgbG9ncyB0byBpbmNsdWRlIGluIHRoZSBlbnZlbG9wZS5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGxvZyBjb250YWluZXIgZW52ZWxvcGUgaXRlbS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTG9nQ29udGFpbmVyRW52ZWxvcGVJdGVtKGl0ZW1zKSB7XG4gIHJldHVybiBbe1xuICAgIHR5cGU6ICdsb2cnLFxuICAgIGl0ZW1fY291bnQ6IGl0ZW1zLmxlbmd0aCxcbiAgICBjb250ZW50X3R5cGU6ICdhcHBsaWNhdGlvbi92bmQuc2VudHJ5Lml0ZW1zLmxvZytqc29uJ1xuICB9LCB7XG4gICAgaXRlbXNcbiAgfV07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBlbnZlbG9wZSBmb3IgYSBsaXN0IG9mIGxvZ3MuXG4gKlxuICogTG9ncyBmcm9tIG11bHRpcGxlIHRyYWNlcyBjYW4gYmUgaW5jbHVkZWQgaW4gdGhlIHNhbWUgZW52ZWxvcGUuXG4gKlxuICogQHBhcmFtIGxvZ3MgLSBUaGUgbG9ncyB0byBpbmNsdWRlIGluIHRoZSBlbnZlbG9wZS5cbiAqIEBwYXJhbSBtZXRhZGF0YSAtIFRoZSBtZXRhZGF0YSB0byBpbmNsdWRlIGluIHRoZSBlbnZlbG9wZS5cbiAqIEBwYXJhbSB0dW5uZWwgLSBUaGUgdHVubmVsIHRvIGluY2x1ZGUgaW4gdGhlIGVudmVsb3BlLlxuICogQHBhcmFtIGRzbiAtIFRoZSBEU04gdG8gaW5jbHVkZSBpbiB0aGUgZW52ZWxvcGUuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBlbnZlbG9wZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTG9nRW52ZWxvcGUobG9ncywgbWV0YWRhdGEsIHR1bm5lbCwgZHNuKSB7XG4gIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgaWYgKG1ldGFkYXRhPy5zZGspIHtcbiAgICBoZWFkZXJzLnNkayA9IHtcbiAgICAgIG5hbWU6IG1ldGFkYXRhLnNkay5uYW1lLFxuICAgICAgdmVyc2lvbjogbWV0YWRhdGEuc2RrLnZlcnNpb25cbiAgICB9O1xuICB9XG4gIGlmICghIXR1bm5lbCAmJiAhIWRzbikge1xuICAgIGhlYWRlcnMuZHNuID0gZHNuVG9TdHJpbmcoZHNuKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlRW52ZWxvcGUoaGVhZGVycywgW2NyZWF0ZUxvZ0NvbnRhaW5lckVudmVsb3BlSXRlbShsb2dzKV0pO1xufVxuZXhwb3J0IHsgY3JlYXRlTG9nQ29udGFpbmVyRW52ZWxvcGVJdGVtLCBjcmVhdGVMb2dFbnZlbG9wZSB9O1xuIiwiaW1wb3J0IHsgX2dldFRyYWNlSW5mb0Zyb21TY29wZSB9IGZyb20gJy4uL2NsaWVudC5qcyc7XG5pbXBvcnQgeyBnZXRDbGllbnQsIGdldEN1cnJlbnRTY29wZSwgZ2V0R2xvYmFsU2NvcGUsIGdldElzb2xhdGlvblNjb3BlIH0gZnJvbSAnLi4vY3VycmVudFNjb3Blcy5qcyc7XG5pbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4uL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IG1lcmdlU2NvcGVEYXRhIH0gZnJvbSAnLi4vdXRpbHMvYXBwbHlTY29wZURhdGFUb0V2ZW50LmpzJztcbmltcG9ydCB7IGlzUGFyYW1ldGVyaXplZFN0cmluZyB9IGZyb20gJy4uL3V0aWxzL2lzLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7IF9nZXRTcGFuRm9yU2NvcGUgfSBmcm9tICcuLi91dGlscy9zcGFuT25TY29wZS5qcyc7XG5pbXBvcnQgeyB0aW1lc3RhbXBJblNlY29uZHMgfSBmcm9tICcuLi91dGlscy90aW1lLmpzJztcbmltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICcuLi91dGlscy93b3JsZHdpZGUuanMnO1xuaW1wb3J0IHsgU0VWRVJJVFlfVEVYVF9UT19TRVZFUklUWV9OVU1CRVIgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVMb2dFbnZlbG9wZSB9IGZyb20gJy4vZW52ZWxvcGUuanMnO1xuY29uc3QgTUFYX0xPR19CVUZGRVJfU0laRSA9IDEwMDtcblxuLy8gVGhlIHJlZmVyZW5jZSB0byB0aGUgQ2xpZW50IDw+IExvZ0J1ZmZlciBtYXAgaXMgc3RvcmVkIHRvIGVuc3VyZSBpdCdzIGFsd2F5cyB0aGUgc2FtZVxuR0xPQkFMX09CSi5fc2VudHJ5Q2xpZW50VG9Mb2dCdWZmZXJNYXAgPSBuZXcgV2Vha01hcCgpO1xuXG4vKipcbiAqIENvbnZlcnRzIGEgbG9nIGF0dHJpYnV0ZSB0byBhIHNlcmlhbGl6ZWQgbG9nIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGtleSBvZiB0aGUgbG9nIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBvZiB0aGUgbG9nIGF0dHJpYnV0ZS5cbiAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIGxvZyBhdHRyaWJ1dGUuXG4gKi9cbmZ1bmN0aW9uIGxvZ0F0dHJpYnV0ZVRvU2VyaWFsaXplZExvZ0F0dHJpYnV0ZSh2YWx1ZSkge1xuICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB0eXBlOiAnaW50ZWdlcidcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB0eXBlOiAnZG91YmxlJ1xuICAgICAgfTtcbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICAgIH07XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAge1xuICAgICAgICBsZXQgc3RyaW5nVmFsdWUgPSAnJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdHJpbmdWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA/PyAnJztcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgLy8gRG8gbm90aGluZ1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IHN0cmluZ1ZhbHVlLFxuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgICAgIH07XG4gICAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTZXRzIGEgbG9nIGF0dHJpYnV0ZSBpZiB0aGUgdmFsdWUgZXhpc3RzIGFuZCB0aGUgYXR0cmlidXRlIGtleSBpcyBub3QgYWxyZWFkeSBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSBsb2dBdHRyaWJ1dGVzIC0gVGhlIGxvZyBhdHRyaWJ1dGVzIG9iamVjdCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGF0dHJpYnV0ZSBrZXkgdG8gc2V0LlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldCAob25seSBzZXRzIGlmIHRydXRoeSBhbmQga2V5IG5vdCBwcmVzZW50KS5cbiAqIEBwYXJhbSBzZXRFdmVuSWZQcmVzZW50IC0gV2hldGhlciB0byBzZXQgdGhlIGF0dHJpYnV0ZSBpZiBpdCBpcyBwcmVzZW50LiBEZWZhdWx0cyB0byB0cnVlLlxuICovXG5mdW5jdGlvbiBzZXRMb2dBdHRyaWJ1dGUobG9nQXR0cmlidXRlcywga2V5LCB2YWx1ZSwgc2V0RXZlbklmUHJlc2VudCA9IHRydWUpIHtcbiAgaWYgKHZhbHVlICYmICghbG9nQXR0cmlidXRlc1trZXldIHx8IHNldEV2ZW5JZlByZXNlbnQpKSB7XG4gICAgbG9nQXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBDYXB0dXJlcyBhIHNlcmlhbGl6ZWQgbG9nIGV2ZW50IGFuZCBhZGRzIGl0IHRvIHRoZSBsb2cgYnVmZmVyIGZvciB0aGUgZ2l2ZW4gY2xpZW50LlxuICpcbiAqIEBwYXJhbSBjbGllbnQgLSBBIGNsaWVudC4gVXNlcyB0aGUgY3VycmVudCBjbGllbnQgaWYgbm90IHByb3ZpZGVkLlxuICogQHBhcmFtIHNlcmlhbGl6ZWRMb2cgLSBUaGUgc2VyaWFsaXplZCBsb2cgZXZlbnQgdG8gY2FwdHVyZS5cbiAqXG4gKiBAZXhwZXJpbWVudGFsIFRoaXMgbWV0aG9kIHdpbGwgZXhwZXJpZW5jZSBicmVha2luZyBjaGFuZ2VzLiBUaGlzIGlzIG5vdCB5ZXQgcGFydCBvZlxuICogdGhlIHN0YWJsZSBTZW50cnkgU0RLIEFQSSBhbmQgY2FuIGJlIGNoYW5nZWQgb3IgcmVtb3ZlZCB3aXRob3V0IHdhcm5pbmcuXG4gKi9cbmZ1bmN0aW9uIF9JTlRFUk5BTF9jYXB0dXJlU2VyaWFsaXplZExvZyhjbGllbnQsIHNlcmlhbGl6ZWRMb2cpIHtcbiAgY29uc3QgbG9nQnVmZmVyID0gX0lOVEVSTkFMX2dldExvZ0J1ZmZlcihjbGllbnQpO1xuICBpZiAobG9nQnVmZmVyID09PSB1bmRlZmluZWQpIHtcbiAgICBHTE9CQUxfT0JKLl9zZW50cnlDbGllbnRUb0xvZ0J1ZmZlck1hcD8uc2V0KGNsaWVudCwgW3NlcmlhbGl6ZWRMb2ddKTtcbiAgfSBlbHNlIHtcbiAgICBHTE9CQUxfT0JKLl9zZW50cnlDbGllbnRUb0xvZ0J1ZmZlck1hcD8uc2V0KGNsaWVudCwgWy4uLmxvZ0J1ZmZlciwgc2VyaWFsaXplZExvZ10pO1xuICAgIGlmIChsb2dCdWZmZXIubGVuZ3RoID49IE1BWF9MT0dfQlVGRkVSX1NJWkUpIHtcbiAgICAgIF9JTlRFUk5BTF9mbHVzaExvZ3NCdWZmZXIoY2xpZW50LCBsb2dCdWZmZXIpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENhcHR1cmVzIGEgbG9nIGV2ZW50IGFuZCBzZW5kcyBpdCB0byBTZW50cnkuXG4gKlxuICogQHBhcmFtIGxvZyAtIFRoZSBsb2cgZXZlbnQgdG8gY2FwdHVyZS5cbiAqIEBwYXJhbSBzY29wZSAtIEEgc2NvcGUuIFVzZXMgdGhlIGN1cnJlbnQgc2NvcGUgaWYgbm90IHByb3ZpZGVkLlxuICogQHBhcmFtIGNsaWVudCAtIEEgY2xpZW50LiBVc2VzIHRoZSBjdXJyZW50IGNsaWVudCBpZiBub3QgcHJvdmlkZWQuXG4gKiBAcGFyYW0gY2FwdHVyZVNlcmlhbGl6ZWRMb2cgLSBBIGZ1bmN0aW9uIHRvIGNhcHR1cmUgdGhlIHNlcmlhbGl6ZWQgbG9nLlxuICpcbiAqIEBleHBlcmltZW50YWwgVGhpcyBtZXRob2Qgd2lsbCBleHBlcmllbmNlIGJyZWFraW5nIGNoYW5nZXMuIFRoaXMgaXMgbm90IHlldCBwYXJ0IG9mXG4gKiB0aGUgc3RhYmxlIFNlbnRyeSBTREsgQVBJIGFuZCBjYW4gYmUgY2hhbmdlZCBvciByZW1vdmVkIHdpdGhvdXQgd2FybmluZy5cbiAqL1xuZnVuY3Rpb24gX0lOVEVSTkFMX2NhcHR1cmVMb2coYmVmb3JlTG9nLCBjbGllbnQgPSBnZXRDbGllbnQoKSwgY3VycmVudFNjb3BlID0gZ2V0Q3VycmVudFNjb3BlKCksIGNhcHR1cmVTZXJpYWxpemVkTG9nID0gX0lOVEVSTkFMX2NhcHR1cmVTZXJpYWxpemVkTG9nKSB7XG4gIGlmICghY2xpZW50KSB7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcud2FybignTm8gY2xpZW50IGF2YWlsYWJsZSB0byBjYXB0dXJlIGxvZy4nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qge1xuICAgIF9leHBlcmltZW50cyxcbiAgICByZWxlYXNlLFxuICAgIGVudmlyb25tZW50XG4gIH0gPSBjbGllbnQuZ2V0T3B0aW9ucygpO1xuICBjb25zdCB7XG4gICAgZW5hYmxlTG9ncyA9IGZhbHNlLFxuICAgIGJlZm9yZVNlbmRMb2dcbiAgfSA9IF9leHBlcmltZW50cyA/PyB7fTtcbiAgaWYgKCFlbmFibGVMb2dzKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcud2FybignbG9nZ2luZyBvcHRpb24gbm90IGVuYWJsZWQsIGxvZyB3aWxsIG5vdCBiZSBjYXB0dXJlZC4nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgWywgdHJhY2VDb250ZXh0XSA9IF9nZXRUcmFjZUluZm9Gcm9tU2NvcGUoY2xpZW50LCBjdXJyZW50U2NvcGUpO1xuICBjb25zdCBwcm9jZXNzZWRMb2dBdHRyaWJ1dGVzID0ge1xuICAgIC4uLmJlZm9yZUxvZy5hdHRyaWJ1dGVzXG4gIH07XG4gIGNvbnN0IHtcbiAgICB1c2VyOiB7XG4gICAgICBpZCxcbiAgICAgIGVtYWlsLFxuICAgICAgdXNlcm5hbWVcbiAgICB9XG4gIH0gPSBnZXRNZXJnZWRTY29wZURhdGEoY3VycmVudFNjb3BlKTtcbiAgc2V0TG9nQXR0cmlidXRlKHByb2Nlc3NlZExvZ0F0dHJpYnV0ZXMsICd1c2VyLmlkJywgaWQsIGZhbHNlKTtcbiAgc2V0TG9nQXR0cmlidXRlKHByb2Nlc3NlZExvZ0F0dHJpYnV0ZXMsICd1c2VyLmVtYWlsJywgZW1haWwsIGZhbHNlKTtcbiAgc2V0TG9nQXR0cmlidXRlKHByb2Nlc3NlZExvZ0F0dHJpYnV0ZXMsICd1c2VyLm5hbWUnLCB1c2VybmFtZSwgZmFsc2UpO1xuICBzZXRMb2dBdHRyaWJ1dGUocHJvY2Vzc2VkTG9nQXR0cmlidXRlcywgJ3NlbnRyeS5yZWxlYXNlJywgcmVsZWFzZSk7XG4gIHNldExvZ0F0dHJpYnV0ZShwcm9jZXNzZWRMb2dBdHRyaWJ1dGVzLCAnc2VudHJ5LmVudmlyb25tZW50JywgZW52aXJvbm1lbnQpO1xuICBjb25zdCB7XG4gICAgbmFtZSxcbiAgICB2ZXJzaW9uXG4gIH0gPSBjbGllbnQuZ2V0U2RrTWV0YWRhdGEoKT8uc2RrID8/IHt9O1xuICBzZXRMb2dBdHRyaWJ1dGUocHJvY2Vzc2VkTG9nQXR0cmlidXRlcywgJ3NlbnRyeS5zZGsubmFtZScsIG5hbWUpO1xuICBzZXRMb2dBdHRyaWJ1dGUocHJvY2Vzc2VkTG9nQXR0cmlidXRlcywgJ3NlbnRyeS5zZGsudmVyc2lvbicsIHZlcnNpb24pO1xuICBjb25zdCBiZWZvcmVMb2dNZXNzYWdlID0gYmVmb3JlTG9nLm1lc3NhZ2U7XG4gIGlmIChpc1BhcmFtZXRlcml6ZWRTdHJpbmcoYmVmb3JlTG9nTWVzc2FnZSkpIHtcbiAgICBjb25zdCB7XG4gICAgICBfX3NlbnRyeV90ZW1wbGF0ZV9zdHJpbmdfXyxcbiAgICAgIF9fc2VudHJ5X3RlbXBsYXRlX3ZhbHVlc19fID0gW11cbiAgICB9ID0gYmVmb3JlTG9nTWVzc2FnZTtcbiAgICBwcm9jZXNzZWRMb2dBdHRyaWJ1dGVzWydzZW50cnkubWVzc2FnZS50ZW1wbGF0ZSddID0gX19zZW50cnlfdGVtcGxhdGVfc3RyaW5nX187XG4gICAgX19zZW50cnlfdGVtcGxhdGVfdmFsdWVzX18uZm9yRWFjaCgocGFyYW0sIGluZGV4KSA9PiB7XG4gICAgICBwcm9jZXNzZWRMb2dBdHRyaWJ1dGVzW2BzZW50cnkubWVzc2FnZS5wYXJhbWV0ZXIuJHtpbmRleH1gXSA9IHBhcmFtO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IHNwYW4gPSBfZ2V0U3BhbkZvclNjb3BlKGN1cnJlbnRTY29wZSk7XG4gIC8vIEFkZCB0aGUgcGFyZW50IHNwYW4gSUQgdG8gdGhlIGxvZyBhdHRyaWJ1dGVzIGZvciB0cmFjZSBjb250ZXh0XG4gIHNldExvZ0F0dHJpYnV0ZShwcm9jZXNzZWRMb2dBdHRyaWJ1dGVzLCAnc2VudHJ5LnRyYWNlLnBhcmVudF9zcGFuX2lkJywgc3Bhbj8uc3BhbkNvbnRleHQoKS5zcGFuSWQpO1xuICBjb25zdCBwcm9jZXNzZWRMb2cgPSB7XG4gICAgLi4uYmVmb3JlTG9nLFxuICAgIGF0dHJpYnV0ZXM6IHByb2Nlc3NlZExvZ0F0dHJpYnV0ZXNcbiAgfTtcbiAgY2xpZW50LmVtaXQoJ2JlZm9yZUNhcHR1cmVMb2cnLCBwcm9jZXNzZWRMb2cpO1xuICBjb25zdCBsb2cgPSBiZWZvcmVTZW5kTG9nID8gYmVmb3JlU2VuZExvZyhwcm9jZXNzZWRMb2cpIDogcHJvY2Vzc2VkTG9nO1xuICBpZiAoIWxvZykge1xuICAgIGNsaWVudC5yZWNvcmREcm9wcGVkRXZlbnQoJ2JlZm9yZV9zZW5kJywgJ2xvZ19pdGVtJywgMSk7XG4gICAgREVCVUdfQlVJTEQgJiYgZGVidWcud2FybignYmVmb3JlU2VuZExvZyByZXR1cm5lZCBudWxsLCBsb2cgd2lsbCBub3QgYmUgY2FwdHVyZWQuJyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHtcbiAgICBsZXZlbCxcbiAgICBtZXNzYWdlLFxuICAgIGF0dHJpYnV0ZXMgPSB7fSxcbiAgICBzZXZlcml0eU51bWJlclxuICB9ID0gbG9nO1xuICBjb25zdCBzZXJpYWxpemVkTG9nID0ge1xuICAgIHRpbWVzdGFtcDogdGltZXN0YW1wSW5TZWNvbmRzKCksXG4gICAgbGV2ZWwsXG4gICAgYm9keTogbWVzc2FnZSxcbiAgICB0cmFjZV9pZDogdHJhY2VDb250ZXh0Py50cmFjZV9pZCxcbiAgICBzZXZlcml0eV9udW1iZXI6IHNldmVyaXR5TnVtYmVyID8/IFNFVkVSSVRZX1RFWFRfVE9fU0VWRVJJVFlfTlVNQkVSW2xldmVsXSxcbiAgICBhdHRyaWJ1dGVzOiBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgICBhY2Nba2V5XSA9IGxvZ0F0dHJpYnV0ZVRvU2VyaWFsaXplZExvZ0F0dHJpYnV0ZShhdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSlcbiAgfTtcbiAgY2FwdHVyZVNlcmlhbGl6ZWRMb2coY2xpZW50LCBzZXJpYWxpemVkTG9nKTtcbiAgY2xpZW50LmVtaXQoJ2FmdGVyQ2FwdHVyZUxvZycsIGxvZyk7XG59XG5cbi8qKlxuICogRmx1c2hlcyB0aGUgbG9ncyBidWZmZXIgdG8gU2VudHJ5LlxuICpcbiAqIEBwYXJhbSBjbGllbnQgLSBBIGNsaWVudC5cbiAqIEBwYXJhbSBtYXliZUxvZ0J1ZmZlciAtIEEgbG9nIGJ1ZmZlci4gVXNlcyB0aGUgbG9nIGJ1ZmZlciBmb3IgdGhlIGdpdmVuIGNsaWVudCBpZiBub3QgcHJvdmlkZWQuXG4gKlxuICogQGV4cGVyaW1lbnRhbCBUaGlzIG1ldGhvZCB3aWxsIGV4cGVyaWVuY2UgYnJlYWtpbmcgY2hhbmdlcy4gVGhpcyBpcyBub3QgeWV0IHBhcnQgb2ZcbiAqIHRoZSBzdGFibGUgU2VudHJ5IFNESyBBUEkgYW5kIGNhbiBiZSBjaGFuZ2VkIG9yIHJlbW92ZWQgd2l0aG91dCB3YXJuaW5nLlxuICovXG5mdW5jdGlvbiBfSU5URVJOQUxfZmx1c2hMb2dzQnVmZmVyKGNsaWVudCwgbWF5YmVMb2dCdWZmZXIpIHtcbiAgY29uc3QgbG9nQnVmZmVyID0gbWF5YmVMb2dCdWZmZXIgPz8gX0lOVEVSTkFMX2dldExvZ0J1ZmZlcihjbGllbnQpID8/IFtdO1xuICBpZiAobG9nQnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjbGllbnRPcHRpb25zID0gY2xpZW50LmdldE9wdGlvbnMoKTtcbiAgY29uc3QgZW52ZWxvcGUgPSBjcmVhdGVMb2dFbnZlbG9wZShsb2dCdWZmZXIsIGNsaWVudE9wdGlvbnMuX21ldGFkYXRhLCBjbGllbnRPcHRpb25zLnR1bm5lbCwgY2xpZW50LmdldERzbigpKTtcblxuICAvLyBDbGVhciB0aGUgbG9nIGJ1ZmZlciBhZnRlciBlbnZlbG9wZXMgaGF2ZSBiZWVuIGNvbnN0cnVjdGVkLlxuICBHTE9CQUxfT0JKLl9zZW50cnlDbGllbnRUb0xvZ0J1ZmZlck1hcD8uc2V0KGNsaWVudCwgW10pO1xuICBjbGllbnQuZW1pdCgnZmx1c2hMb2dzJyk7XG5cbiAgLy8gc2VuZEVudmVsb3BlIHNob3VsZCBub3QgdGhyb3dcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICBjbGllbnQuc2VuZEVudmVsb3BlKGVudmVsb3BlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsb2cgYnVmZmVyIGZvciBhIGdpdmVuIGNsaWVudC5cbiAqXG4gKiBFeHBvcnRlZCBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAqXG4gKiBAcGFyYW0gY2xpZW50IC0gVGhlIGNsaWVudCB0byBnZXQgdGhlIGxvZyBidWZmZXIgZm9yLlxuICogQHJldHVybnMgVGhlIGxvZyBidWZmZXIgZm9yIHRoZSBnaXZlbiBjbGllbnQuXG4gKi9cbmZ1bmN0aW9uIF9JTlRFUk5BTF9nZXRMb2dCdWZmZXIoY2xpZW50KSB7XG4gIHJldHVybiBHTE9CQUxfT0JKLl9zZW50cnlDbGllbnRUb0xvZ0J1ZmZlck1hcD8uZ2V0KGNsaWVudCk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBzY29wZSBkYXRhIGZvciB0aGUgY3VycmVudCBzY29wZSBhZnRlciBtZXJnaW5nIHdpdGggdGhlXG4gKiBnbG9iYWwgc2NvcGUgYW5kIGlzb2xhdGlvbiBzY29wZS5cbiAqXG4gKiBAcGFyYW0gY3VycmVudFNjb3BlIC0gVGhlIGN1cnJlbnQgc2NvcGUuXG4gKiBAcmV0dXJucyBUaGUgc2NvcGUgZGF0YS5cbiAqL1xuZnVuY3Rpb24gZ2V0TWVyZ2VkU2NvcGVEYXRhKGN1cnJlbnRTY29wZSkge1xuICBjb25zdCBzY29wZURhdGEgPSBnZXRHbG9iYWxTY29wZSgpLmdldFNjb3BlRGF0YSgpO1xuICBtZXJnZVNjb3BlRGF0YShzY29wZURhdGEsIGdldElzb2xhdGlvblNjb3BlKCkuZ2V0U2NvcGVEYXRhKCkpO1xuICBtZXJnZVNjb3BlRGF0YShzY29wZURhdGEsIGN1cnJlbnRTY29wZS5nZXRTY29wZURhdGEoKSk7XG4gIHJldHVybiBzY29wZURhdGE7XG59XG5leHBvcnQgeyBfSU5URVJOQUxfY2FwdHVyZUxvZywgX0lOVEVSTkFMX2NhcHR1cmVTZXJpYWxpemVkTG9nLCBfSU5URVJOQUxfZmx1c2hMb2dzQnVmZmVyLCBfSU5URVJOQUxfZ2V0TG9nQnVmZmVyLCBsb2dBdHRyaWJ1dGVUb1NlcmlhbGl6ZWRMb2dBdHRyaWJ1dGUgfTtcbiIsImltcG9ydCB7IGdldEN1cnJlbnRTY29wZSB9IGZyb20gJy4vY3VycmVudFNjb3Blcy5qcyc7XG5pbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgZGVidWcsIGNvbnNvbGVTYW5kYm94IH0gZnJvbSAnLi91dGlscy9sb2dnZXIuanMnO1xuXG4vKiogQSBjbGFzcyBvYmplY3QgdGhhdCBjYW4gaW5zdGFudGlhdGUgQ2xpZW50IG9iamVjdHMuICovXG5cbi8qKlxuICogSW50ZXJuYWwgZnVuY3Rpb24gdG8gY3JlYXRlIGEgbmV3IFNESyBjbGllbnQgaW5zdGFuY2UuIFRoZSBjbGllbnQgaXNcbiAqIGluc3RhbGxlZCBhbmQgdGhlbiBib3VuZCB0byB0aGUgY3VycmVudCBzY29wZS5cbiAqXG4gKiBAcGFyYW0gY2xpZW50Q2xhc3MgVGhlIGNsaWVudCBjbGFzcyB0byBpbnN0YW50aWF0ZS5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gcGFzcyB0byB0aGUgY2xpZW50LlxuICovXG5mdW5jdGlvbiBpbml0QW5kQmluZChjbGllbnRDbGFzcywgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucy5kZWJ1ZyA9PT0gdHJ1ZSkge1xuICAgIGlmIChERUJVR19CVUlMRCkge1xuICAgICAgZGVidWcuZW5hYmxlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVzZSBgY29uc29sZS53YXJuYCByYXRoZXIgdGhhbiBgZGVidWcud2FybmAgc2luY2UgYnkgbm9uLWRlYnVnIGJ1bmRsZXMgaGF2ZSBhbGwgYGRlYnVnLnhgIHN0YXRlbWVudHMgc3RyaXBwZWRcbiAgICAgIGNvbnNvbGVTYW5kYm94KCgpID0+IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKCdbU2VudHJ5XSBDYW5ub3QgaW5pdGlhbGl6ZSBTREsgd2l0aCBgZGVidWdgIG9wdGlvbiB1c2luZyBhIG5vbi1kZWJ1ZyBidW5kbGUuJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgY29uc3Qgc2NvcGUgPSBnZXRDdXJyZW50U2NvcGUoKTtcbiAgc2NvcGUudXBkYXRlKG9wdGlvbnMuaW5pdGlhbFNjb3BlKTtcbiAgY29uc3QgY2xpZW50ID0gbmV3IGNsaWVudENsYXNzKG9wdGlvbnMpO1xuICBzZXRDdXJyZW50Q2xpZW50KGNsaWVudCk7XG4gIGNsaWVudC5pbml0KCk7XG4gIHJldHVybiBjbGllbnQ7XG59XG5cbi8qKlxuICogTWFrZSB0aGUgZ2l2ZW4gY2xpZW50IHRoZSBjdXJyZW50IGNsaWVudC5cbiAqL1xuZnVuY3Rpb24gc2V0Q3VycmVudENsaWVudChjbGllbnQpIHtcbiAgZ2V0Q3VycmVudFNjb3BlKCkuc2V0Q2xpZW50KGNsaWVudCk7XG59XG5leHBvcnQgeyBpbml0QW5kQmluZCwgc2V0Q3VycmVudENsaWVudCB9O1xuIiwiaW1wb3J0IHsgU3luY1Byb21pc2UsIHJlc29sdmVkU3luY1Byb21pc2UsIHJlamVjdGVkU3luY1Byb21pc2UgfSBmcm9tICcuL3N5bmNwcm9taXNlLmpzJztcbmNvbnN0IFNFTlRSWV9CVUZGRVJfRlVMTF9FUlJPUiA9IFN5bWJvbC5mb3IoJ1NlbnRyeUJ1ZmZlckZ1bGxFcnJvcicpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gbmV3IFByb21pc2VCdWZmZXIgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBsaW1pdFxuICogQHBhcmFtIGxpbWl0IG1heCBudW1iZXIgb2YgcHJvbWlzZXMgdGhhdCBjYW4gYmUgc3RvcmVkIGluIHRoZSBidWZmZXJcbiAqL1xuZnVuY3Rpb24gbWFrZVByb21pc2VCdWZmZXIobGltaXQpIHtcbiAgY29uc3QgYnVmZmVyID0gW107XG4gIGZ1bmN0aW9uIGlzUmVhZHkoKSB7XG4gICAgcmV0dXJuIGxpbWl0ID09PSB1bmRlZmluZWQgfHwgYnVmZmVyLmxlbmd0aCA8IGxpbWl0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHByb21pc2UgZnJvbSB0aGUgcXVldWUuXG4gICAqXG4gICAqIEBwYXJhbSB0YXNrIENhbiBiZSBhbnkgUHJvbWlzZUxpa2U8VD5cbiAgICogQHJldHVybnMgUmVtb3ZlZCBwcm9taXNlLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVtb3ZlKHRhc2spIHtcbiAgICByZXR1cm4gYnVmZmVyLnNwbGljZShidWZmZXIuaW5kZXhPZih0YXNrKSwgMSlbMF0gfHwgUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcHJvbWlzZSAocmVwcmVzZW50aW5nIGFuIGluLWZsaWdodCBhY3Rpb24pIHRvIHRoZSBxdWV1ZSwgYW5kIHNldCBpdCB0byByZW1vdmUgaXRzZWxmIG9uIGZ1bGZpbGxtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gdGFza1Byb2R1Y2VyIEEgZnVuY3Rpb24gcHJvZHVjaW5nIGFueSBQcm9taXNlTGlrZTxUPjsgSW4gcHJldmlvdXMgdmVyc2lvbnMgdGhpcyB1c2VkIHRvIGJlIGB0YXNrOlxuICAgKiAgICAgICAgUHJvbWlzZUxpa2U8VD5gLCBidXQgdW5kZXIgdGhhdCBtb2RlbCwgUHJvbWlzZXMgd2VyZSBpbnN0YW50bHkgY3JlYXRlZCBvbiB0aGUgY2FsbC1zaXRlIGFuZCB0aGVpciBleGVjdXRvclxuICAgKiAgICAgICAgZnVuY3Rpb25zIHRoZXJlZm9yZSByYW4gaW1tZWRpYXRlbHkuIFRodXMsIGV2ZW4gaWYgdGhlIGJ1ZmZlciB3YXMgZnVsbCwgdGhlIGFjdGlvbiBzdGlsbCBoYXBwZW5lZC4gQnlcbiAgICogICAgICAgIHJlcXVpcmluZyB0aGUgcHJvbWlzZSB0byBiZSB3cmFwcGVkIGluIGEgZnVuY3Rpb24sIHdlIGNhbiBkZWZlciBwcm9taXNlIGNyZWF0aW9uIHVudGlsIGFmdGVyIHRoZSBidWZmZXJcbiAgICogICAgICAgIGxpbWl0IGNoZWNrLlxuICAgKiBAcmV0dXJucyBUaGUgb3JpZ2luYWwgcHJvbWlzZS5cbiAgICovXG4gIGZ1bmN0aW9uIGFkZCh0YXNrUHJvZHVjZXIpIHtcbiAgICBpZiAoIWlzUmVhZHkoKSkge1xuICAgICAgcmV0dXJuIHJlamVjdGVkU3luY1Byb21pc2UoU0VOVFJZX0JVRkZFUl9GVUxMX0VSUk9SKTtcbiAgICB9XG5cbiAgICAvLyBzdGFydCB0aGUgdGFzayBhbmQgYWRkIGl0cyBwcm9taXNlIHRvIHRoZSBxdWV1ZVxuICAgIGNvbnN0IHRhc2sgPSB0YXNrUHJvZHVjZXIoKTtcbiAgICBpZiAoYnVmZmVyLmluZGV4T2YodGFzaykgPT09IC0xKSB7XG4gICAgICBidWZmZXIucHVzaCh0YXNrKTtcbiAgICB9XG4gICAgdm9pZCB0YXNrLnRoZW4oKCkgPT4gcmVtb3ZlKHRhc2spKVxuICAgIC8vIFVzZSBgdGhlbihudWxsLCByZWplY3Rpb25IYW5kbGVyKWAgcmF0aGVyIHRoYW4gYGNhdGNoKHJlamVjdGlvbkhhbmRsZXIpYCBzbyB0aGF0IHdlIGNhbiB1c2UgYFByb21pc2VMaWtlYFxuICAgIC8vIHJhdGhlciB0aGFuIGBQcm9taXNlYC4gYFByb21pc2VMaWtlYCBkb2Vzbid0IGhhdmUgYSBgLmNhdGNoYCBtZXRob2QsIG1ha2luZyBpdHMgcG9seWZpbGwgc21hbGxlci4gKEVTNSBkaWRuJ3RcbiAgICAvLyBoYXZlIHByb21pc2VzLCBzbyBUUyBoYXMgdG8gcG9seWZpbGwgd2hlbiBkb3duLWNvbXBpbGluZy4pXG4gICAgLnRoZW4obnVsbCwgKCkgPT4gcmVtb3ZlKHRhc2spLnRoZW4obnVsbCwgKCkgPT4ge1xuICAgICAgLy8gV2UgaGF2ZSB0byBhZGQgYW5vdGhlciBjYXRjaCBoZXJlIGJlY2F1c2UgYHJlbW92ZSgpYCBzdGFydHMgYSBuZXcgcHJvbWlzZSBjaGFpbi5cbiAgICB9KSk7XG4gICAgcmV0dXJuIHRhc2s7XG4gIH1cblxuICAvKipcbiAgICogV2FpdCBmb3IgYWxsIHByb21pc2VzIGluIHRoZSBxdWV1ZSB0byByZXNvbHZlIG9yIGZvciB0aW1lb3V0IHRvIGV4cGlyZSwgd2hpY2hldmVyIGNvbWVzIGZpcnN0LlxuICAgKlxuICAgKiBAcGFyYW0gdGltZW91dCBUaGUgdGltZSwgaW4gbXMsIGFmdGVyIHdoaWNoIHRvIHJlc29sdmUgdG8gYGZhbHNlYCBpZiB0aGUgcXVldWUgaXMgc3RpbGwgbm9uLWVtcHR5LiBQYXNzaW5nIGAwYCAob3JcbiAgICogbm90IHBhc3NpbmcgYW55dGhpbmcpIHdpbGwgbWFrZSB0aGUgcHJvbWlzZSB3YWl0IGFzIGxvbmcgYXMgaXQgdGFrZXMgZm9yIHRoZSBxdWV1ZSB0byBkcmFpbiBiZWZvcmUgcmVzb2x2aW5nIHRvXG4gICAqIGB0cnVlYC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHdoaWNoIHdpbGwgcmVzb2x2ZSB0byBgdHJ1ZWAgaWYgdGhlIHF1ZXVlIGlzIGFscmVhZHkgZW1wdHkgb3IgZHJhaW5zIGJlZm9yZSB0aGUgdGltZW91dCwgYW5kXG4gICAqIGBmYWxzZWAgb3RoZXJ3aXNlXG4gICAqL1xuICBmdW5jdGlvbiBkcmFpbih0aW1lb3V0KSB7XG4gICAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgY291bnRlciA9IGJ1ZmZlci5sZW5ndGg7XG4gICAgICBpZiAoIWNvdW50ZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHdhaXQgZm9yIGB0aW1lb3V0YCBtcyBhbmQgdGhlbiByZXNvbHZlIHRvIGBmYWxzZWAgKGlmIG5vdCBjYW5jZWxsZWQgZmlyc3QpXG4gICAgICBjb25zdCBjYXB0dXJlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRpbWVvdXQgJiYgdGltZW91dCA+IDApIHtcbiAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGltZW91dCk7XG5cbiAgICAgIC8vIGlmIGFsbCBwcm9taXNlcyByZXNvbHZlIGluIHRpbWUsIGNhbmNlbCB0aGUgdGltZXIgYW5kIHJlc29sdmUgdG8gYHRydWVgXG4gICAgICBidWZmZXIuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgdm9pZCByZXNvbHZlZFN5bmNQcm9taXNlKGl0ZW0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGlmICghIC0tY291bnRlcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNhcHR1cmVkU2V0VGltZW91dCk7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB7XG4gICAgJDogYnVmZmVyLFxuICAgIGFkZCxcbiAgICBkcmFpblxuICB9O1xufVxuZXhwb3J0IHsgU0VOVFJZX0JVRkZFUl9GVUxMX0VSUk9SLCBtYWtlUHJvbWlzZUJ1ZmZlciB9O1xuIiwiLy8gSW50ZW50aW9uYWxseSBrZWVwaW5nIHRoZSBrZXkgYnJvYWQsIGFzIHdlIGRvbid0IGtub3cgZm9yIHN1cmUgd2hhdCByYXRlIGxpbWl0IGhlYWRlcnMgZ2V0IHJldHVybmVkIGZyb20gYmFja2VuZFxuXG5jb25zdCBERUZBVUxUX1JFVFJZX0FGVEVSID0gNjAgKiAxMDAwOyAvLyA2MCBzZWNvbmRzXG5cbi8qKlxuICogRXh0cmFjdHMgUmV0cnktQWZ0ZXIgdmFsdWUgZnJvbSB0aGUgcmVxdWVzdCBoZWFkZXIgb3IgcmV0dXJucyBkZWZhdWx0IHZhbHVlXG4gKiBAcGFyYW0gaGVhZGVyIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiAnUmV0cnktQWZ0ZXInIGhlYWRlclxuICogQHBhcmFtIG5vdyBjdXJyZW50IHVuaXggdGltZXN0YW1wXG4gKlxuICovXG5mdW5jdGlvbiBwYXJzZVJldHJ5QWZ0ZXJIZWFkZXIoaGVhZGVyLCBub3cgPSBEYXRlLm5vdygpKSB7XG4gIGNvbnN0IGhlYWRlckRlbGF5ID0gcGFyc2VJbnQoYCR7aGVhZGVyfWAsIDEwKTtcbiAgaWYgKCFpc05hTihoZWFkZXJEZWxheSkpIHtcbiAgICByZXR1cm4gaGVhZGVyRGVsYXkgKiAxMDAwO1xuICB9XG4gIGNvbnN0IGhlYWRlckRhdGUgPSBEYXRlLnBhcnNlKGAke2hlYWRlcn1gKTtcbiAgaWYgKCFpc05hTihoZWFkZXJEYXRlKSkge1xuICAgIHJldHVybiBoZWFkZXJEYXRlIC0gbm93O1xuICB9XG4gIHJldHVybiBERUZBVUxUX1JFVFJZX0FGVEVSO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHRpbWUgdGhhdCB0aGUgZ2l2ZW4gY2F0ZWdvcnkgaXMgZGlzYWJsZWQgdW50aWwgZm9yIHJhdGUgbGltaXRpbmcuXG4gKiBJbiBjYXNlIG5vIGNhdGVnb3J5LXNwZWNpZmljIGxpbWl0IGlzIHNldCBidXQgYSBnZW5lcmFsIHJhdGUgbGltaXQgYWNyb3NzIGFsbCBjYXRlZ29yaWVzIGlzIGFjdGl2ZSxcbiAqIHRoYXQgdGltZSBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcmV0dXJuIHRoZSB0aW1lIGluIG1zIHRoYXQgdGhlIGNhdGVnb3J5IGlzIGRpc2FibGVkIHVudGlsIG9yIDAgaWYgdGhlcmUncyBubyBhY3RpdmUgcmF0ZSBsaW1pdC5cbiAqL1xuZnVuY3Rpb24gZGlzYWJsZWRVbnRpbChsaW1pdHMsIGRhdGFDYXRlZ29yeSkge1xuICByZXR1cm4gbGltaXRzW2RhdGFDYXRlZ29yeV0gfHwgbGltaXRzLmFsbCB8fCAwO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGNhdGVnb3J5IGlzIHJhdGUgbGltaXRlZFxuICovXG5mdW5jdGlvbiBpc1JhdGVMaW1pdGVkKGxpbWl0cywgZGF0YUNhdGVnb3J5LCBub3cgPSBEYXRlLm5vdygpKSB7XG4gIHJldHVybiBkaXNhYmxlZFVudGlsKGxpbWl0cywgZGF0YUNhdGVnb3J5KSA+IG5vdztcbn1cblxuLyoqXG4gKiBVcGRhdGUgcmF0ZWxpbWl0cyBmcm9tIGluY29taW5nIGhlYWRlcnMuXG4gKlxuICogQHJldHVybiB0aGUgdXBkYXRlZCBSYXRlTGltaXRzIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gdXBkYXRlUmF0ZUxpbWl0cyhsaW1pdHMsIHtcbiAgc3RhdHVzQ29kZSxcbiAgaGVhZGVyc1xufSwgbm93ID0gRGF0ZS5ub3coKSkge1xuICBjb25zdCB1cGRhdGVkUmF0ZUxpbWl0cyA9IHtcbiAgICAuLi5saW1pdHNcbiAgfTtcblxuICAvLyBcIlRoZSBuYW1lIGlzIGNhc2UtaW5zZW5zaXRpdmUuXCJcbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hlYWRlcnMvZ2V0XG4gIGNvbnN0IHJhdGVMaW1pdEhlYWRlciA9IGhlYWRlcnM/LlsneC1zZW50cnktcmF0ZS1saW1pdHMnXTtcbiAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IGhlYWRlcnM/LlsncmV0cnktYWZ0ZXInXTtcbiAgaWYgKHJhdGVMaW1pdEhlYWRlcikge1xuICAgIC8qKlxuICAgICAqIHJhdGUgbGltaXQgaGVhZGVycyBhcmUgb2YgdGhlIGZvcm1cbiAgICAgKiAgICAgPGhlYWRlcj4sPGhlYWRlcj4sLi5cbiAgICAgKiB3aGVyZSBlYWNoIDxoZWFkZXI+IGlzIG9mIHRoZSBmb3JtXG4gICAgICogICAgIDxyZXRyeV9hZnRlcj46IDxjYXRlZ29yaWVzPjogPHNjb3BlPjogPHJlYXNvbl9jb2RlPjogPG5hbWVzcGFjZXM+XG4gICAgICogd2hlcmVcbiAgICAgKiAgICAgPHJldHJ5X2FmdGVyPiBpcyBhIGRlbGF5IGluIHNlY29uZHNcbiAgICAgKiAgICAgPGNhdGVnb3JpZXM+IGlzIHRoZSBldmVudCB0eXBlKHMpIChlcnJvciwgdHJhbnNhY3Rpb24sIGV0YykgYmVpbmcgcmF0ZSBsaW1pdGVkIGFuZCBpcyBvZiB0aGUgZm9ybVxuICAgICAqICAgICAgICAgPGNhdGVnb3J5Pjs8Y2F0ZWdvcnk+Oy4uLlxuICAgICAqICAgICA8c2NvcGU+IGlzIHdoYXQncyBiZWluZyBsaW1pdGVkIChvcmcsIHByb2plY3QsIG9yIGtleSkgLSBpZ25vcmVkIGJ5IFNES1xuICAgICAqICAgICA8cmVhc29uX2NvZGU+IGlzIGFuIGFyYml0cmFyeSBzdHJpbmcgbGlrZSBcIm9yZ19xdW90YVwiIC0gaWdub3JlZCBieSBTREtcbiAgICAgKiAgICAgPG5hbWVzcGFjZXM+IFNlbWljb2xvbi1zZXBhcmF0ZWQgbGlzdCBvZiBtZXRyaWMgbmFtZXNwYWNlIGlkZW50aWZpZXJzLiBEZWZpbmVzIHdoaWNoIG5hbWVzcGFjZShzKSB3aWxsIGJlIGFmZmVjdGVkLlxuICAgICAqICAgICAgICAgT25seSBwcmVzZW50IGlmIHJhdGUgbGltaXQgYXBwbGllcyB0byB0aGUgbWV0cmljX2J1Y2tldCBkYXRhIGNhdGVnb3J5LlxuICAgICAqL1xuICAgIGZvciAoY29uc3QgbGltaXQgb2YgcmF0ZUxpbWl0SGVhZGVyLnRyaW0oKS5zcGxpdCgnLCcpKSB7XG4gICAgICBjb25zdCBbcmV0cnlBZnRlciwgY2F0ZWdvcmllcywsLCBuYW1lc3BhY2VzXSA9IGxpbWl0LnNwbGl0KCc6JywgNSk7XG4gICAgICBjb25zdCBoZWFkZXJEZWxheSA9IHBhcnNlSW50KHJldHJ5QWZ0ZXIsIDEwKTtcbiAgICAgIGNvbnN0IGRlbGF5ID0gKCFpc05hTihoZWFkZXJEZWxheSkgPyBoZWFkZXJEZWxheSA6IDYwKSAqIDEwMDA7IC8vIDYwc2VjIGRlZmF1bHRcbiAgICAgIGlmICghY2F0ZWdvcmllcykge1xuICAgICAgICB1cGRhdGVkUmF0ZUxpbWl0cy5hbGwgPSBub3cgKyBkZWxheTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcy5zcGxpdCgnOycpKSB7XG4gICAgICAgICAgaWYgKGNhdGVnb3J5ID09PSAnbWV0cmljX2J1Y2tldCcpIHtcbiAgICAgICAgICAgIC8vIG5hbWVzcGFjZXMgd2lsbCBiZSBwcmVzZW50IHdoZW4gY2F0ZWdvcnkgPT09ICdtZXRyaWNfYnVja2V0J1xuICAgICAgICAgICAgaWYgKCFuYW1lc3BhY2VzIHx8IG5hbWVzcGFjZXMuc3BsaXQoJzsnKS5pbmNsdWRlcygnY3VzdG9tJykpIHtcbiAgICAgICAgICAgICAgdXBkYXRlZFJhdGVMaW1pdHNbY2F0ZWdvcnldID0gbm93ICsgZGVsYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZWRSYXRlTGltaXRzW2NhdGVnb3J5XSA9IG5vdyArIGRlbGF5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChyZXRyeUFmdGVySGVhZGVyKSB7XG4gICAgdXBkYXRlZFJhdGVMaW1pdHMuYWxsID0gbm93ICsgcGFyc2VSZXRyeUFmdGVySGVhZGVyKHJldHJ5QWZ0ZXJIZWFkZXIsIG5vdyk7XG4gIH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDI5KSB7XG4gICAgdXBkYXRlZFJhdGVMaW1pdHMuYWxsID0gbm93ICsgNjAgKiAxMDAwO1xuICB9XG4gIHJldHVybiB1cGRhdGVkUmF0ZUxpbWl0cztcbn1cbmV4cG9ydCB7IERFRkFVTFRfUkVUUllfQUZURVIsIGRpc2FibGVkVW50aWwsIGlzUmF0ZUxpbWl0ZWQsIHBhcnNlUmV0cnlBZnRlckhlYWRlciwgdXBkYXRlUmF0ZUxpbWl0cyB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBmb3JFYWNoRW52ZWxvcGVJdGVtLCBlbnZlbG9wZUl0ZW1UeXBlVG9EYXRhQ2F0ZWdvcnksIGNyZWF0ZUVudmVsb3BlLCBzZXJpYWxpemVFbnZlbG9wZSB9IGZyb20gJy4uL3V0aWxzL2VudmVsb3BlLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7IG1ha2VQcm9taXNlQnVmZmVyLCBTRU5UUllfQlVGRkVSX0ZVTExfRVJST1IgfSBmcm9tICcuLi91dGlscy9wcm9taXNlYnVmZmVyLmpzJztcbmltcG9ydCB7IGlzUmF0ZUxpbWl0ZWQsIHVwZGF0ZVJhdGVMaW1pdHMgfSBmcm9tICcuLi91dGlscy9yYXRlbGltaXQuanMnO1xuaW1wb3J0IHsgcmVzb2x2ZWRTeW5jUHJvbWlzZSB9IGZyb20gJy4uL3V0aWxzL3N5bmNwcm9taXNlLmpzJztcbmNvbnN0IERFRkFVTFRfVFJBTlNQT1JUX0JVRkZFUl9TSVpFID0gNjQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhIFNlbnRyeSBgVHJhbnNwb3J0YFxuICpcbiAqIEBwYXJhbSBvcHRpb25zXG4gKiBAcGFyYW0gbWFrZVJlcXVlc3RcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVHJhbnNwb3J0KG9wdGlvbnMsIG1ha2VSZXF1ZXN0LCBidWZmZXIgPSBtYWtlUHJvbWlzZUJ1ZmZlcihvcHRpb25zLmJ1ZmZlclNpemUgfHwgREVGQVVMVF9UUkFOU1BPUlRfQlVGRkVSX1NJWkUpKSB7XG4gIGxldCByYXRlTGltaXRzID0ge307XG4gIGNvbnN0IGZsdXNoID0gdGltZW91dCA9PiBidWZmZXIuZHJhaW4odGltZW91dCk7XG4gIGZ1bmN0aW9uIHNlbmQoZW52ZWxvcGUpIHtcbiAgICBjb25zdCBmaWx0ZXJlZEVudmVsb3BlSXRlbXMgPSBbXTtcblxuICAgIC8vIERyb3AgcmF0ZSBsaW1pdGVkIGl0ZW1zIGZyb20gZW52ZWxvcGVcbiAgICBmb3JFYWNoRW52ZWxvcGVJdGVtKGVudmVsb3BlLCAoaXRlbSwgdHlwZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YUNhdGVnb3J5ID0gZW52ZWxvcGVJdGVtVHlwZVRvRGF0YUNhdGVnb3J5KHR5cGUpO1xuICAgICAgaWYgKGlzUmF0ZUxpbWl0ZWQocmF0ZUxpbWl0cywgZGF0YUNhdGVnb3J5KSkge1xuICAgICAgICBvcHRpb25zLnJlY29yZERyb3BwZWRFdmVudCgncmF0ZWxpbWl0X2JhY2tvZmYnLCBkYXRhQ2F0ZWdvcnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlsdGVyZWRFbnZlbG9wZUl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTa2lwIHNlbmRpbmcgaWYgZW52ZWxvcGUgaXMgZW1wdHkgYWZ0ZXIgZmlsdGVyaW5nIG91dCByYXRlIGxpbWl0ZWQgZXZlbnRzXG4gICAgaWYgKGZpbHRlcmVkRW52ZWxvcGVJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByZXNvbHZlZFN5bmNQcm9taXNlKHt9KTtcbiAgICB9XG4gICAgY29uc3QgZmlsdGVyZWRFbnZlbG9wZSA9IGNyZWF0ZUVudmVsb3BlKGVudmVsb3BlWzBdLCBmaWx0ZXJlZEVudmVsb3BlSXRlbXMpO1xuXG4gICAgLy8gQ3JlYXRlcyBjbGllbnQgcmVwb3J0IGZvciBlYWNoIGl0ZW0gaW4gYW4gZW52ZWxvcGVcbiAgICBjb25zdCByZWNvcmRFbnZlbG9wZUxvc3MgPSByZWFzb24gPT4ge1xuICAgICAgZm9yRWFjaEVudmVsb3BlSXRlbShmaWx0ZXJlZEVudmVsb3BlLCAoaXRlbSwgdHlwZSkgPT4ge1xuICAgICAgICBvcHRpb25zLnJlY29yZERyb3BwZWRFdmVudChyZWFzb24sIGVudmVsb3BlSXRlbVR5cGVUb0RhdGFDYXRlZ29yeSh0eXBlKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlcXVlc3RUYXNrID0gKCkgPT4gbWFrZVJlcXVlc3Qoe1xuICAgICAgYm9keTogc2VyaWFsaXplRW52ZWxvcGUoZmlsdGVyZWRFbnZlbG9wZSlcbiAgICB9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gdGhyb3cgb24gTk9LIHJlc3BvbnNlcywgYnV0IHdlIHdhbnQgdG8gYXQgbGVhc3QgbG9nIHRoZW1cbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlICE9PSB1bmRlZmluZWQgJiYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSAzMDApKSB7XG4gICAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oYFNlbnRyeSByZXNwb25kZWQgd2l0aCBzdGF0dXMgY29kZSAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9IHRvIHNlbnQgZXZlbnQuYCk7XG4gICAgICB9XG4gICAgICByYXRlTGltaXRzID0gdXBkYXRlUmF0ZUxpbWl0cyhyYXRlTGltaXRzLCByZXNwb25zZSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSwgZXJyb3IgPT4ge1xuICAgICAgcmVjb3JkRW52ZWxvcGVMb3NzKCduZXR3b3JrX2Vycm9yJyk7XG4gICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy5lcnJvcignRW5jb3VudGVyZWQgZXJyb3IgcnVubmluZyB0cmFuc3BvcnQgcmVxdWVzdDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9KTtcbiAgICByZXR1cm4gYnVmZmVyLmFkZChyZXF1ZXN0VGFzaykudGhlbihyZXN1bHQgPT4gcmVzdWx0LCBlcnJvciA9PiB7XG4gICAgICBpZiAoZXJyb3IgPT09IFNFTlRSWV9CVUZGRVJfRlVMTF9FUlJPUikge1xuICAgICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy5lcnJvcignU2tpcHBlZCBzZW5kaW5nIGV2ZW50IGJlY2F1c2UgYnVmZmVyIGlzIGZ1bGwuJyk7XG4gICAgICAgIHJlY29yZEVudmVsb3BlTG9zcygncXVldWVfb3ZlcmZsb3cnKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVkU3luY1Byb21pc2Uoe30pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzZW5kLFxuICAgIGZsdXNoXG4gIH07XG59XG5leHBvcnQgeyBERUZBVUxUX1RSQU5TUE9SVF9CVUZGRVJfU0laRSwgY3JlYXRlVHJhbnNwb3J0IH07XG4iLCIvKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHVybCBwb2ludHMgdG8gU2VudHJ5IHNlcnZlclxuICpcbiAqIEBwYXJhbSB1cmwgdXJsIHRvIHZlcmlmeVxuICovXG5mdW5jdGlvbiBpc1NlbnRyeVJlcXVlc3RVcmwodXJsLCBjbGllbnQpIHtcbiAgY29uc3QgZHNuID0gY2xpZW50Py5nZXREc24oKTtcbiAgY29uc3QgdHVubmVsID0gY2xpZW50Py5nZXRPcHRpb25zKCkudHVubmVsO1xuICByZXR1cm4gY2hlY2tEc24odXJsLCBkc24pIHx8IGNoZWNrVHVubmVsKHVybCwgdHVubmVsKTtcbn1cbmZ1bmN0aW9uIGNoZWNrVHVubmVsKHVybCwgdHVubmVsKSB7XG4gIGlmICghdHVubmVsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiByZW1vdmVUcmFpbGluZ1NsYXNoKHVybCkgPT09IHJlbW92ZVRyYWlsaW5nU2xhc2godHVubmVsKTtcbn1cbmZ1bmN0aW9uIGNoZWNrRHNuKHVybCwgZHNuKSB7XG4gIHJldHVybiBkc24gPyB1cmwuaW5jbHVkZXMoZHNuLmhvc3QpIDogZmFsc2U7XG59XG5mdW5jdGlvbiByZW1vdmVUcmFpbGluZ1NsYXNoKHN0cikge1xuICByZXR1cm4gc3RyW3N0ci5sZW5ndGggLSAxXSA9PT0gJy8nID8gc3RyLnNsaWNlKDAsIC0xKSA6IHN0cjtcbn1cbmV4cG9ydCB7IGlzU2VudHJ5UmVxdWVzdFVybCB9O1xuIiwiLy8gQnkgZGVmYXVsdCwgd2Ugd2FudCB0byBpbmZlciB0aGUgSVAgYWRkcmVzcywgdW5sZXNzIHRoaXMgaXMgZXhwbGljaXRseSBzZXQgdG8gYG51bGxgXG4vLyBXZSBkbyB0aGlzIGFmdGVyIGFsbCBvdGhlciBwcm9jZXNzaW5nIGlzIGRvbmVcbi8vIElmIGBpcF9hZGRyZXNzYCBpcyBleHBsaWNpdGx5IHNldCB0byBgbnVsbGAgb3IgYSB2YWx1ZSwgd2UgbGVhdmUgaXQgYXMgaXNcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gYWRkQXV0b0lwQWRkcmVzc1RvVXNlcihvYmpXaXRoTWF5YmVVc2VyKSB7XG4gIGlmIChvYmpXaXRoTWF5YmVVc2VyLnVzZXI/LmlwX2FkZHJlc3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG9ialdpdGhNYXliZVVzZXIudXNlciA9IHtcbiAgICAgIC4uLm9ialdpdGhNYXliZVVzZXIudXNlcixcbiAgICAgIGlwX2FkZHJlc3M6ICd7e2F1dG99fSdcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGFkZEF1dG9JcEFkZHJlc3NUb1Nlc3Npb24oc2Vzc2lvbikge1xuICBpZiAoJ2FnZ3JlZ2F0ZXMnIGluIHNlc3Npb24pIHtcbiAgICBpZiAoc2Vzc2lvbi5hdHRycz8uWydpcF9hZGRyZXNzJ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgc2Vzc2lvbi5hdHRycyA9IHtcbiAgICAgICAgLi4uc2Vzc2lvbi5hdHRycyxcbiAgICAgICAgaXBfYWRkcmVzczogJ3t7YXV0b319J1xuICAgICAgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHNlc3Npb24uaXBBZGRyZXNzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHNlc3Npb24uaXBBZGRyZXNzID0gJ3t7YXV0b319JztcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCB7IGFkZEF1dG9JcEFkZHJlc3NUb1Nlc3Npb24sIGFkZEF1dG9JcEFkZHJlc3NUb1VzZXIgfTtcbiIsImltcG9ydCB7IFNES19WRVJTSU9OIH0gZnJvbSAnLi92ZXJzaW9uLmpzJztcblxuLyoqXG4gKiBBIGJ1aWxkZXIgZm9yIHRoZSBTREsgbWV0YWRhdGEgaW4gdGhlIG9wdGlvbnMgZm9yIHRoZSBTREsgaW5pdGlhbGl6YXRpb24uXG4gKlxuICogTm90ZTogVGhpcyBmdW5jdGlvbiBpcyBpZGVudGljYWwgdG8gYGJ1aWxkTWV0YWRhdGFgIGluIFJlbWl4IGFuZCBOZXh0SlMgYW5kIFN2ZWx0ZUtpdC5cbiAqIFdlIGRvbid0IGV4dHJhY3QgaXQgZm9yIGJ1bmRsZSBzaXplIHJlYXNvbnMuXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvcHVsbC83NDA0XG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvcHVsbC80MTk2XG4gKlxuICogSWYgeW91IG1ha2UgY2hhbmdlcyB0byB0aGlzIGZ1bmN0aW9uIGNvbnNpZGVyIHVwZGF0aW5nIHRoZSBvdGhlcnMgYXMgd2VsbC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBTREsgb3B0aW9ucyBvYmplY3QgdGhhdCBnZXRzIG11dGF0ZWRcbiAqIEBwYXJhbSBuYW1lcyBsaXN0IG9mIHBhY2thZ2UgbmFtZXNcbiAqL1xuZnVuY3Rpb24gYXBwbHlTZGtNZXRhZGF0YShvcHRpb25zLCBuYW1lLCBuYW1lcyA9IFtuYW1lXSwgc291cmNlID0gJ25wbScpIHtcbiAgY29uc3QgbWV0YWRhdGEgPSBvcHRpb25zLl9tZXRhZGF0YSB8fCB7fTtcbiAgaWYgKCFtZXRhZGF0YS5zZGspIHtcbiAgICBtZXRhZGF0YS5zZGsgPSB7XG4gICAgICBuYW1lOiBgc2VudHJ5LmphdmFzY3JpcHQuJHtuYW1lfWAsXG4gICAgICBwYWNrYWdlczogbmFtZXMubWFwKG5hbWUgPT4gKHtcbiAgICAgICAgbmFtZTogYCR7c291cmNlfTpAc2VudHJ5LyR7bmFtZX1gLFxuICAgICAgICB2ZXJzaW9uOiBTREtfVkVSU0lPTlxuICAgICAgfSkpLFxuICAgICAgdmVyc2lvbjogU0RLX1ZFUlNJT05cbiAgICB9O1xuICB9XG4gIG9wdGlvbnMuX21ldGFkYXRhID0gbWV0YWRhdGE7XG59XG5leHBvcnQgeyBhcHBseVNka01ldGFkYXRhIH07XG4iLCJpbXBvcnQgeyBnZXRBc3luY0NvbnRleHRTdHJhdGVneSB9IGZyb20gJy4uL2FzeW5jQ29udGV4dC9pbmRleC5qcyc7XG5pbXBvcnQgeyBnZXRNYWluQ2FycmllciB9IGZyb20gJy4uL2NhcnJpZXIuanMnO1xuaW1wb3J0IHsgZ2V0Q2xpZW50LCBnZXRDdXJyZW50U2NvcGUgfSBmcm9tICcuLi9jdXJyZW50U2NvcGVzLmpzJztcbmltcG9ydCB7IGlzRW5hYmxlZCB9IGZyb20gJy4uL2V4cG9ydHMuanMnO1xuaW1wb3J0ICcuLi90cmFjaW5nL2Vycm9ycy5qcyc7XG5pbXBvcnQgJy4uL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuaW1wb3J0IHsgZ2V0QWN0aXZlU3Bhbiwgc3BhblRvVHJhY2VIZWFkZXIgfSBmcm9tICcuL3NwYW5VdGlscy5qcyc7XG5pbXBvcnQgeyBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4sIGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU2NvcGUgfSBmcm9tICcuLi90cmFjaW5nL2R5bmFtaWNTYW1wbGluZ0NvbnRleHQuanMnO1xuaW1wb3J0IHsgVFJBQ0VQQVJFTlRfUkVHRVhQLCBnZW5lcmF0ZVNlbnRyeVRyYWNlSGVhZGVyIH0gZnJvbSAnLi90cmFjaW5nLmpzJztcbmltcG9ydCB7IGR5bmFtaWNTYW1wbGluZ0NvbnRleHRUb1NlbnRyeUJhZ2dhZ2VIZWFkZXIgfSBmcm9tICcuL2JhZ2dhZ2UuanMnO1xuXG4vKipcbiAqIEV4dHJhY3RzIHRyYWNlIHByb3BhZ2F0aW9uIGRhdGEgZnJvbSB0aGUgY3VycmVudCBzcGFuIG9yIGZyb20gdGhlIGNsaWVudCdzIHNjb3BlICh2aWEgdHJhbnNhY3Rpb24gb3IgcHJvcGFnYXRpb25cbiAqIGNvbnRleHQpIGFuZCBzZXJpYWxpemVzIGl0IHRvIGBzZW50cnktdHJhY2VgIGFuZCBgYmFnZ2FnZWAgdmFsdWVzIHRvIHN0cmluZ3MuIFRoZXNlIHZhbHVlcyBjYW4gYmUgdXNlZCB0byBwcm9wYWdhdGVcbiAqIGEgdHJhY2UgdmlhIG91ciB0cmFjaW5nIEh0dHAgaGVhZGVycyBvciBIdG1sIGA8bWV0YT5gIHRhZ3MuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBhbHNvIGFwcGxpZXMgc29tZSB2YWxpZGF0aW9uIHRvIHRoZSBnZW5lcmF0ZWQgc2VudHJ5LXRyYWNlIGFuZCBiYWdnYWdlIHZhbHVlcyB0byBlbnN1cmUgdGhhdFxuICogb25seSB2YWxpZCBzdHJpbmdzIGFyZSByZXR1cm5lZC5cbiAqXG4gKiBAcmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGUgdHJhY2luZyBkYXRhIHZhbHVlcy4gVGhlIG9iamVjdCBrZXlzIGFyZSB0aGUgbmFtZSBvZiB0aGUgdHJhY2luZyBrZXkgdG8gYmUgdXNlZCBhcyBoZWFkZXJcbiAqIG9yIG1ldGEgdGFnIG5hbWUuXG4gKi9cbmZ1bmN0aW9uIGdldFRyYWNlRGF0YShvcHRpb25zID0ge30pIHtcbiAgY29uc3QgY2xpZW50ID0gb3B0aW9ucy5jbGllbnQgfHwgZ2V0Q2xpZW50KCk7XG4gIGlmICghaXNFbmFibGVkKCkgfHwgIWNsaWVudCkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBjb25zdCBjYXJyaWVyID0gZ2V0TWFpbkNhcnJpZXIoKTtcbiAgY29uc3QgYWNzID0gZ2V0QXN5bmNDb250ZXh0U3RyYXRlZ3koY2Fycmllcik7XG4gIGlmIChhY3MuZ2V0VHJhY2VEYXRhKSB7XG4gICAgcmV0dXJuIGFjcy5nZXRUcmFjZURhdGEob3B0aW9ucyk7XG4gIH1cbiAgY29uc3Qgc2NvcGUgPSBvcHRpb25zLnNjb3BlIHx8IGdldEN1cnJlbnRTY29wZSgpO1xuICBjb25zdCBzcGFuID0gb3B0aW9ucy5zcGFuIHx8IGdldEFjdGl2ZVNwYW4oKTtcbiAgY29uc3Qgc2VudHJ5VHJhY2UgPSBzcGFuID8gc3BhblRvVHJhY2VIZWFkZXIoc3BhbikgOiBzY29wZVRvVHJhY2VIZWFkZXIoc2NvcGUpO1xuICBjb25zdCBkc2MgPSBzcGFuID8gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TcGFuKHNwYW4pIDogZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TY29wZShjbGllbnQsIHNjb3BlKTtcbiAgY29uc3QgYmFnZ2FnZSA9IGR5bmFtaWNTYW1wbGluZ0NvbnRleHRUb1NlbnRyeUJhZ2dhZ2VIZWFkZXIoZHNjKTtcbiAgY29uc3QgaXNWYWxpZFNlbnRyeVRyYWNlSGVhZGVyID0gVFJBQ0VQQVJFTlRfUkVHRVhQLnRlc3Qoc2VudHJ5VHJhY2UpO1xuICBpZiAoIWlzVmFsaWRTZW50cnlUcmFjZUhlYWRlcikge1xuICAgIGRlYnVnLndhcm4oJ0ludmFsaWQgc2VudHJ5LXRyYWNlIGRhdGEuIENhbm5vdCBnZW5lcmF0ZSB0cmFjZSBkYXRhJyk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIHJldHVybiB7XG4gICAgJ3NlbnRyeS10cmFjZSc6IHNlbnRyeVRyYWNlLFxuICAgIGJhZ2dhZ2VcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgYSBzZW50cnktdHJhY2UgaGVhZGVyIHZhbHVlIGZvciB0aGUgZ2l2ZW4gc2NvcGUuXG4gKi9cbmZ1bmN0aW9uIHNjb3BlVG9UcmFjZUhlYWRlcihzY29wZSkge1xuICBjb25zdCB7XG4gICAgdHJhY2VJZCxcbiAgICBzYW1wbGVkLFxuICAgIHByb3BhZ2F0aW9uU3BhbklkXG4gIH0gPSBzY29wZS5nZXRQcm9wYWdhdGlvbkNvbnRleHQoKTtcbiAgcmV0dXJuIGdlbmVyYXRlU2VudHJ5VHJhY2VIZWFkZXIodHJhY2VJZCwgcHJvcGFnYXRpb25TcGFuSWQsIHNhbXBsZWQpO1xufVxuZXhwb3J0IHsgZ2V0VHJhY2VEYXRhIH07XG4iLCIvKipcbiAqIEhlYXZpbHkgc2ltcGxpZmllZCBkZWJvdW5jZSBmdW5jdGlvbiBiYXNlZCBvbiBsb2Rhc2guZGVib3VuY2UuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIChAcGFyYW0gZnVuKSBhbmQgZGVsYXlzIGl0cyBpbnZvY2F0aW9uXG4gKiBieSBAcGFyYW0gd2FpdCBtaWxsaXNlY29uZHMuIE9wdGlvbmFsbHksIGEgbWF4V2FpdCBjYW4gYmUgc3BlY2lmaWVkIGluIEBwYXJhbSBvcHRpb25zLFxuICogd2hpY2ggZW5zdXJlcyB0aGF0IHRoZSBjYWxsYmFjayBpcyBpbnZva2VkIGF0IGxlYXN0IG9uY2UgYWZ0ZXIgdGhlIHNwZWNpZmllZCBtYXguIHdhaXQgdGltZS5cbiAqXG4gKiBAcGFyYW0gZnVuYyB0aGUgZnVuY3Rpb24gd2hvc2UgaW52b2NhdGlvbiBpcyB0byBiZSBkZWJvdW5jZWRcbiAqIEBwYXJhbSB3YWl0IHRoZSBtaW5pbXVtIHRpbWUgdW50aWwgdGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgYWZ0ZXIgaXQgd2FzIGNhbGxlZCBvbmNlXG4gKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBjb250YWluIHRoZSBgbWF4V2FpdGAgcHJvcGVydHlcbiAqXG4gKiBAcmV0dXJucyB0aGUgZGVib3VuY2VkIHZlcnNpb24gb2YgdGhlIGZ1bmN0aW9uLCB3aGljaCBuZWVkcyB0byBiZSBjYWxsZWQgYXQgbGVhc3Qgb25jZSB0byBzdGFydCB0aGVcbiAqICAgICAgICAgIGRlYm91bmNpbmcgcHJvY2Vzcy4gU3Vic2VxdWVudCBjYWxscyB3aWxsIHJlc2V0IHRoZSBkZWJvdW5jaW5nIHRpbWVyIGFuZCwgaW4gY2FzZSBAcGFyYW1mdW5jXG4gKiAgICAgICAgICB3YXMgYWxyZWFkeSBpbnZva2VkIGluIHRoZSBtZWFudGltZSwgcmV0dXJuIEBwYXJhbSBmdW5jJ3MgcmV0dXJuIHZhbHVlLlxuICogICAgICAgICAgVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBoYXMgdHdvIGFkZGl0aW9uYWwgcHJvcGVydGllczpcbiAqICAgICAgICAgIC0gYGZsdXNoYDogSW52b2tlcyB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGltbWVkaWF0ZWx5IGFuZCByZXR1cm5zIGl0cyByZXR1cm4gdmFsdWVcbiAqICAgICAgICAgIC0gYGNhbmNlbGA6IENhbmNlbHMgdGhlIGRlYm91bmNpbmcgcHJvY2VzcyBhbmQgcmVzZXRzIHRoZSBkZWJvdW5jaW5nIHRpbWVyXG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgbGV0IGNhbGxiYWNrUmV0dXJuVmFsdWU7XG4gIGxldCB0aW1lcklkO1xuICBsZXQgbWF4VGltZXJJZDtcbiAgY29uc3QgbWF4V2FpdCA9IG9wdGlvbnM/Lm1heFdhaXQgPyBNYXRoLm1heChvcHRpb25zLm1heFdhaXQsIHdhaXQpIDogMDtcbiAgY29uc3Qgc2V0VGltZW91dEltcGwgPSBvcHRpb25zPy5zZXRUaW1lb3V0SW1wbCB8fCBzZXRUaW1lb3V0O1xuICBmdW5jdGlvbiBpbnZva2VGdW5jKCkge1xuICAgIGNhbmNlbFRpbWVycygpO1xuICAgIGNhbGxiYWNrUmV0dXJuVmFsdWUgPSBmdW5jKCk7XG4gICAgcmV0dXJuIGNhbGxiYWNrUmV0dXJuVmFsdWU7XG4gIH1cbiAgZnVuY3Rpb24gY2FuY2VsVGltZXJzKCkge1xuICAgIHRpbWVySWQgIT09IHVuZGVmaW5lZCAmJiBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgbWF4VGltZXJJZCAhPT0gdW5kZWZpbmVkICYmIGNsZWFyVGltZW91dChtYXhUaW1lcklkKTtcbiAgICB0aW1lcklkID0gbWF4VGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkIHx8IG1heFRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmMoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbGxiYWNrUmV0dXJuVmFsdWU7XG4gIH1cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIGlmICh0aW1lcklkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfVxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0SW1wbChpbnZva2VGdW5jLCB3YWl0KTtcbiAgICBpZiAobWF4V2FpdCAmJiBtYXhUaW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG1heFRpbWVySWQgPSBzZXRUaW1lb3V0SW1wbChpbnZva2VGdW5jLCBtYXhXYWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbGxiYWNrUmV0dXJuVmFsdWU7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbFRpbWVycztcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5leHBvcnQgeyBkZWJvdW5jZSB9O1xuIiwiaW1wb3J0IHsgZ2V0Q2xpZW50LCBnZXRJc29sYXRpb25TY29wZSB9IGZyb20gJy4vY3VycmVudFNjb3Blcy5qcyc7XG5pbXBvcnQgeyBjb25zb2xlU2FuZGJveCB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7IGRhdGVUaW1lc3RhbXBJblNlY29uZHMgfSBmcm9tICcuL3V0aWxzL3RpbWUuanMnO1xuXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSBudW1iZXIgb2YgYnJlYWRjcnVtYnMgYWRkZWQgdG8gYW4gZXZlbnQuIENhbiBiZSBvdmVyd3JpdHRlblxuICogd2l0aCB7QGxpbmsgT3B0aW9ucy5tYXhCcmVhZGNydW1ic30uXG4gKi9cbmNvbnN0IERFRkFVTFRfQlJFQURDUlVNQlMgPSAxMDA7XG5cbi8qKlxuICogUmVjb3JkcyBhIG5ldyBicmVhZGNydW1iIHdoaWNoIHdpbGwgYmUgYXR0YWNoZWQgdG8gZnV0dXJlIGV2ZW50cy5cbiAqXG4gKiBCcmVhZGNydW1icyB3aWxsIGJlIGFkZGVkIHRvIHN1YnNlcXVlbnQgZXZlbnRzIHRvIHByb3ZpZGUgbW9yZSBjb250ZXh0IG9uXG4gKiB1c2VyJ3MgYWN0aW9ucyBwcmlvciB0byBhbiBlcnJvciBvciBjcmFzaC5cbiAqL1xuZnVuY3Rpb24gYWRkQnJlYWRjcnVtYihicmVhZGNydW1iLCBoaW50KSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBjb25zdCBpc29sYXRpb25TY29wZSA9IGdldElzb2xhdGlvblNjb3BlKCk7XG4gIGlmICghY2xpZW50KSByZXR1cm47XG4gIGNvbnN0IHtcbiAgICBiZWZvcmVCcmVhZGNydW1iID0gbnVsbCxcbiAgICBtYXhCcmVhZGNydW1icyA9IERFRkFVTFRfQlJFQURDUlVNQlNcbiAgfSA9IGNsaWVudC5nZXRPcHRpb25zKCk7XG4gIGlmIChtYXhCcmVhZGNydW1icyA8PSAwKSByZXR1cm47XG4gIGNvbnN0IHRpbWVzdGFtcCA9IGRhdGVUaW1lc3RhbXBJblNlY29uZHMoKTtcbiAgY29uc3QgbWVyZ2VkQnJlYWRjcnVtYiA9IHtcbiAgICB0aW1lc3RhbXAsXG4gICAgLi4uYnJlYWRjcnVtYlxuICB9O1xuICBjb25zdCBmaW5hbEJyZWFkY3J1bWIgPSBiZWZvcmVCcmVhZGNydW1iID8gY29uc29sZVNhbmRib3goKCkgPT4gYmVmb3JlQnJlYWRjcnVtYihtZXJnZWRCcmVhZGNydW1iLCBoaW50KSkgOiBtZXJnZWRCcmVhZGNydW1iO1xuICBpZiAoZmluYWxCcmVhZGNydW1iID09PSBudWxsKSByZXR1cm47XG4gIGlmIChjbGllbnQuZW1pdCkge1xuICAgIGNsaWVudC5lbWl0KCdiZWZvcmVBZGRCcmVhZGNydW1iJywgZmluYWxCcmVhZGNydW1iLCBoaW50KTtcbiAgfVxuICBpc29sYXRpb25TY29wZS5hZGRCcmVhZGNydW1iKGZpbmFsQnJlYWRjcnVtYiwgbWF4QnJlYWRjcnVtYnMpO1xufVxuZXhwb3J0IHsgYWRkQnJlYWRjcnVtYiB9O1xuIiwiaW1wb3J0IHsgZ2V0Q2xpZW50IH0gZnJvbSAnLi4vY3VycmVudFNjb3Blcy5qcyc7XG5pbXBvcnQgeyBkZWZpbmVJbnRlZ3JhdGlvbiB9IGZyb20gJy4uL2ludGVncmF0aW9uLmpzJztcbmltcG9ydCB7IGdldE9yaWdpbmFsRnVuY3Rpb24gfSBmcm9tICcuLi91dGlscy9vYmplY3QuanMnO1xubGV0IG9yaWdpbmFsRnVuY3Rpb25Ub1N0cmluZztcbmNvbnN0IElOVEVHUkFUSU9OX05BTUUgPSAnRnVuY3Rpb25Ub1N0cmluZyc7XG5jb25zdCBTRVRVUF9DTElFTlRTID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IF9mdW5jdGlvblRvU3RyaW5nSW50ZWdyYXRpb24gPSAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogSU5URUdSQVRJT05fTkFNRSxcbiAgICBzZXR1cE9uY2UoKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgICBvcmlnaW5hbEZ1bmN0aW9uVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbiAgICAgIC8vIGludHJpbnNpY3MgKGxpa2UgRnVuY3Rpb24ucHJvdG90eXBlKSBtaWdodCBiZSBpbW11dGFibGUgaW4gc29tZSBlbnZpcm9ubWVudHNcbiAgICAgIC8vIGUuZy4gTm9kZSB3aXRoIC0tZnJvemVuLWludHJpbnNpY3MsIFhTIChhbiBlbWJlZGRlZCBKYXZhU2NyaXB0IGVuZ2luZSkgb3IgU0VTIChhIEphdmFTY3JpcHQgcHJvcG9zYWwpXG4gICAgICB0cnkge1xuICAgICAgICBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsRnVuY3Rpb24gPSBnZXRPcmlnaW5hbEZ1bmN0aW9uKHRoaXMpO1xuICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBTRVRVUF9DTElFTlRTLmhhcyhnZXRDbGllbnQoKSkgJiYgb3JpZ2luYWxGdW5jdGlvbiAhPT0gdW5kZWZpbmVkID8gb3JpZ2luYWxGdW5jdGlvbiA6IHRoaXM7XG4gICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRnVuY3Rpb25Ub1N0cmluZy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGhlcmUsIGp1c3QgZG9uJ3QgcGF0Y2ggdGhpc1xuICAgICAgfVxuICAgIH0sXG4gICAgc2V0dXAoY2xpZW50KSB7XG4gICAgICBTRVRVUF9DTElFTlRTLnNldChjbGllbnQsIHRydWUpO1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogUGF0Y2ggdG9TdHJpbmcgY2FsbHMgdG8gcmV0dXJuIHByb3BlciBuYW1lIGZvciB3cmFwcGVkIGZ1bmN0aW9ucy5cbiAqXG4gKiBgYGBqc1xuICogU2VudHJ5LmluaXQoe1xuICogICBpbnRlZ3JhdGlvbnM6IFtcbiAqICAgICBmdW5jdGlvblRvU3RyaW5nSW50ZWdyYXRpb24oKSxcbiAqICAgXSxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmNvbnN0IGZ1bmN0aW9uVG9TdHJpbmdJbnRlZ3JhdGlvbiA9IGRlZmluZUludGVncmF0aW9uKF9mdW5jdGlvblRvU3RyaW5nSW50ZWdyYXRpb24pO1xuZXhwb3J0IHsgZnVuY3Rpb25Ub1N0cmluZ0ludGVncmF0aW9uIH07XG4iLCJpbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4uL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IGRlZmluZUludGVncmF0aW9uIH0gZnJvbSAnLi4vaW50ZWdyYXRpb24uanMnO1xuaW1wb3J0IHsgZ2V0UG9zc2libGVFdmVudE1lc3NhZ2VzIH0gZnJvbSAnLi4vdXRpbHMvZXZlbnRVdGlscy5qcyc7XG5pbXBvcnQgeyBkZWJ1ZyB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBnZXRFdmVudERlc2NyaXB0aW9uIH0gZnJvbSAnLi4vdXRpbHMvbWlzYy5qcyc7XG5pbXBvcnQgeyBzdHJpbmdNYXRjaGVzU29tZVBhdHRlcm4gfSBmcm9tICcuLi91dGlscy9zdHJpbmcuanMnO1xuXG4vLyBcIlNjcmlwdCBlcnJvci5cIiBpcyBoYXJkIGNvZGVkIGludG8gYnJvd3NlcnMgZm9yIGVycm9ycyB0aGF0IGl0IGNhbid0IHJlYWQuXG4vLyB0aGlzIGlzIHRoZSByZXN1bHQgb2YgYSBzY3JpcHQgYmVpbmcgcHVsbGVkIGluIGZyb20gYW4gZXh0ZXJuYWwgZG9tYWluIGFuZCBDT1JTLlxuY29uc3QgREVGQVVMVF9JR05PUkVfRVJST1JTID0gWy9eU2NyaXB0IGVycm9yXFwuPyQvLCAvXkphdmFzY3JpcHQgZXJyb3I6IFNjcmlwdCBlcnJvclxcLj8gb24gbGluZSAwJC8sIC9eUmVzaXplT2JzZXJ2ZXIgbG9vcCBjb21wbGV0ZWQgd2l0aCB1bmRlbGl2ZXJlZCBub3RpZmljYXRpb25zLiQvLFxuLy8gVGhlIGJyb3dzZXIgbG9ncyB0aGlzIHdoZW4gYSBSZXNpemVPYnNlcnZlciBoYW5kbGVyIHRha2VzIGEgYml0IGxvbmdlci4gVXN1YWxseSB0aGlzIGlzIG5vdCBhbiBhY3R1YWwgaXNzdWUgdGhvdWdoLiBJdCBpbmRpY2F0ZXMgc2xvd25lc3MuXG4vXkNhbm5vdCByZWRlZmluZSBwcm9wZXJ0eTogZ29vZ2xldGFnJC8sXG4vLyBUaGlzIGlzIHRocm93biB3aGVuIGdvb2dsZSB0YWcgbWFuYWdlciBpcyB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggYW4gYWQgYmxvY2tlclxuL15DYW4ndCBmaW5kIHZhcmlhYmxlOiBnbW8kLyxcbi8vIEVycm9yIGZyb20gR29vZ2xlIFNlYXJjaCBBcHAgaHR0cHM6Ly9pc3N1ZXRyYWNrZXIuZ29vZ2xlLmNvbS9pc3N1ZXMvMzk2MDQzMzMxXG4vXnVuZGVmaW5lZCBpcyBub3QgYW4gb2JqZWN0IFxcKGV2YWx1YXRpbmcgJ2FcXC5bQS1aXSdcXCkkLyxcbi8vIFJhbmRvbSBlcnJvciB0aGF0IGhhcHBlbnMgYnV0IG5vdCBhY3Rpb25hYmxlIG9yIG5vdGljZWFibGUgdG8gZW5kLXVzZXJzLlxuJ2NhblxcJ3QgcmVkZWZpbmUgbm9uLWNvbmZpZ3VyYWJsZSBwcm9wZXJ0eSBcInNvbGFuYVwiJyxcbi8vIFByb2JhYmx5IGEgYnJvd3NlciBleHRlbnNpb24gb3IgY3VzdG9tIGJyb3dzZXIgKEJyYXZlKSB0aHJvd2luZyB0aGlzIGVycm9yXG5cInZ2KCkuZ2V0UmVzdHJpY3Rpb25zIGlzIG5vdCBhIGZ1bmN0aW9uLiAoSW4gJ3Z2KCkuZ2V0UmVzdHJpY3Rpb25zKDEsYSknLCAndnYoKS5nZXRSZXN0cmljdGlvbnMnIGlzIHVuZGVmaW5lZClcIixcbi8vIEVycm9yIHRocm93biBieSBHVE0sIHNlZW1pbmdseSBub3QgYWZmZWN0aW5nIGVuZC11c2Vyc1xuXCJDYW4ndCBmaW5kIHZhcmlhYmxlOiBfQXV0b2ZpbGxDYWxsYmFja0hhbmRsZXJcIixcbi8vIFVuYWN0aW9uYWJsZSBlcnJvciBpbiBpbnN0YWdyYW0gd2VidmlldyBodHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2NvbW11bml0eS90aHJlYWRzLzMyMDAxMzU0OTc5MTE0MS9cbi9eTm9uLUVycm9yIHByb21pc2UgcmVqZWN0aW9uIGNhcHR1cmVkIHdpdGggdmFsdWU6IE9iamVjdCBOb3QgRm91bmQgTWF0Y2hpbmcgSWQ6XFxkKywgTWV0aG9kTmFtZTpzaW11bGF0ZUV2ZW50LCBQYXJhbUNvdW50OlxcZCskLyxcbi8vIHVuYWN0aW9uYWJsZSBlcnJvciBmcm9tIENFRlNoYXJwLCBhIC5ORVQgbGlicmFyeSB0aGF0IGVtYmVkcyBjaHJvbWl1bSBpbiAuTkVUIGFwcHNcbi9eSmF2YSBleGNlcHRpb24gd2FzIHJhaXNlZCBkdXJpbmcgbWV0aG9kIGludm9jYXRpb24kLyAvLyBlcnJvciBmcm9tIEZhY2Vib29rIE1vYmlsZSBicm93c2VyIChodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8xNTA2NSlcbl07XG5cbi8qKiBPcHRpb25zIGZvciB0aGUgRXZlbnRGaWx0ZXJzIGludGVncmF0aW9uICovXG5cbmNvbnN0IElOVEVHUkFUSU9OX05BTUUgPSAnRXZlbnRGaWx0ZXJzJztcblxuLyoqXG4gKiBBbiBpbnRlZ3JhdGlvbiB0aGF0IGZpbHRlcnMgb3V0IGV2ZW50cyAoZXJyb3JzIGFuZCB0cmFuc2FjdGlvbnMpIGJhc2VkIG9uOlxuICpcbiAqIC0gKEVycm9ycykgQSBjdXJhdGVkIGxpc3Qgb2Yga25vd24gbG93LXZhbHVlIG9yIGlycmVsZXZhbnQgZXJyb3JzIChzZWUge0BsaW5rIERFRkFVTFRfSUdOT1JFX0VSUk9SU30pXG4gKiAtIChFcnJvcnMpIEEgbGlzdCBvZiBlcnJvciBtZXNzYWdlcyBvciB1cmxzL2ZpbGVuYW1lcyBwYXNzZWQgaW4gdmlhXG4gKiAgIC0gVG9wIGxldmVsIFNlbnRyeS5pbml0IG9wdGlvbnMgKGBpZ25vcmVFcnJvcnNgLCBgZGVueVVybHNgLCBgYWxsb3dVcmxzYClcbiAqICAgLSBUaGUgc2FtZSBvcHRpb25zIHBhc3NlZCB0byB0aGUgaW50ZWdyYXRpb24gZGlyZWN0bHkgdmlhIEBwYXJhbSBvcHRpb25zXG4gKiAtIChUcmFuc2FjdGlvbnMvU3BhbnMpIEEgbGlzdCBvZiByb290IHNwYW4gKHRyYW5zYWN0aW9uKSBuYW1lcyBwYXNzZWQgaW4gdmlhXG4gKiAgIC0gVG9wIGxldmVsIFNlbnRyeS5pbml0IG9wdGlvbiAoYGlnbm9yZVRyYW5zYWN0aW9uc2ApXG4gKiAgIC0gVGhlIHNhbWUgb3B0aW9uIHBhc3NlZCB0byB0aGUgaW50ZWdyYXRpb24gZGlyZWN0bHkgdmlhIEBwYXJhbSBvcHRpb25zXG4gKlxuICogRXZlbnRzIGZpbHRlcmVkIGJ5IHRoaXMgaW50ZWdyYXRpb24gd2lsbCBub3QgYmUgc2VudCB0byBTZW50cnkuXG4gKi9cbmNvbnN0IGV2ZW50RmlsdGVyc0ludGVncmF0aW9uID0gZGVmaW5lSW50ZWdyYXRpb24oKG9wdGlvbnMgPSB7fSkgPT4ge1xuICBsZXQgbWVyZ2VkT3B0aW9ucztcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBJTlRFR1JBVElPTl9OQU1FLFxuICAgIHNldHVwKGNsaWVudCkge1xuICAgICAgY29uc3QgY2xpZW50T3B0aW9ucyA9IGNsaWVudC5nZXRPcHRpb25zKCk7XG4gICAgICBtZXJnZWRPcHRpb25zID0gX21lcmdlT3B0aW9ucyhvcHRpb25zLCBjbGllbnRPcHRpb25zKTtcbiAgICB9LFxuICAgIHByb2Nlc3NFdmVudChldmVudCwgX2hpbnQsIGNsaWVudCkge1xuICAgICAgaWYgKCFtZXJnZWRPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudE9wdGlvbnMgPSBjbGllbnQuZ2V0T3B0aW9ucygpO1xuICAgICAgICBtZXJnZWRPcHRpb25zID0gX21lcmdlT3B0aW9ucyhvcHRpb25zLCBjbGllbnRPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfc2hvdWxkRHJvcEV2ZW50KGV2ZW50LCBtZXJnZWRPcHRpb25zKSA/IG51bGwgOiBldmVudDtcbiAgICB9XG4gIH07XG59KTtcblxuLyoqXG4gKiBBbiBpbnRlZ3JhdGlvbiB0aGF0IGZpbHRlcnMgb3V0IGV2ZW50cyAoZXJyb3JzIGFuZCB0cmFuc2FjdGlvbnMpIGJhc2VkIG9uOlxuICpcbiAqIC0gKEVycm9ycykgQSBjdXJhdGVkIGxpc3Qgb2Yga25vd24gbG93LXZhbHVlIG9yIGlycmVsZXZhbnQgZXJyb3JzIChzZWUge0BsaW5rIERFRkFVTFRfSUdOT1JFX0VSUk9SU30pXG4gKiAtIChFcnJvcnMpIEEgbGlzdCBvZiBlcnJvciBtZXNzYWdlcyBvciB1cmxzL2ZpbGVuYW1lcyBwYXNzZWQgaW4gdmlhXG4gKiAgIC0gVG9wIGxldmVsIFNlbnRyeS5pbml0IG9wdGlvbnMgKGBpZ25vcmVFcnJvcnNgLCBgZGVueVVybHNgLCBgYWxsb3dVcmxzYClcbiAqICAgLSBUaGUgc2FtZSBvcHRpb25zIHBhc3NlZCB0byB0aGUgaW50ZWdyYXRpb24gZGlyZWN0bHkgdmlhIEBwYXJhbSBvcHRpb25zXG4gKiAtIChUcmFuc2FjdGlvbnMvU3BhbnMpIEEgbGlzdCBvZiByb290IHNwYW4gKHRyYW5zYWN0aW9uKSBuYW1lcyBwYXNzZWQgaW4gdmlhXG4gKiAgIC0gVG9wIGxldmVsIFNlbnRyeS5pbml0IG9wdGlvbiAoYGlnbm9yZVRyYW5zYWN0aW9uc2ApXG4gKiAgIC0gVGhlIHNhbWUgb3B0aW9uIHBhc3NlZCB0byB0aGUgaW50ZWdyYXRpb24gZGlyZWN0bHkgdmlhIEBwYXJhbSBvcHRpb25zXG4gKlxuICogRXZlbnRzIGZpbHRlcmVkIGJ5IHRoaXMgaW50ZWdyYXRpb24gd2lsbCBub3QgYmUgc2VudCB0byBTZW50cnkuXG4gKlxuICogQGRlcHJlY2F0ZWQgdGhpcyBpbnRlZ3JhdGlvbiB3YXMgcmVuYW1lZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIG1ham9yIHZlcnNpb24uXG4gKiBVc2UgYGV2ZW50RmlsdGVyc0ludGVncmF0aW9uYCBpbnN0ZWFkLlxuICovXG5jb25zdCBpbmJvdW5kRmlsdGVyc0ludGVncmF0aW9uID0gZGVmaW5lSW50ZWdyYXRpb24oKG9wdGlvbnMgPSB7fSkgPT4ge1xuICByZXR1cm4ge1xuICAgIC4uLmV2ZW50RmlsdGVyc0ludGVncmF0aW9uKG9wdGlvbnMpLFxuICAgIG5hbWU6ICdJbmJvdW5kRmlsdGVycydcbiAgfTtcbn0pO1xuZnVuY3Rpb24gX21lcmdlT3B0aW9ucyhpbnRlcm5hbE9wdGlvbnMgPSB7fSwgY2xpZW50T3B0aW9ucyA9IHt9KSB7XG4gIHJldHVybiB7XG4gICAgYWxsb3dVcmxzOiBbLi4uKGludGVybmFsT3B0aW9ucy5hbGxvd1VybHMgfHwgW10pLCAuLi4oY2xpZW50T3B0aW9ucy5hbGxvd1VybHMgfHwgW10pXSxcbiAgICBkZW55VXJsczogWy4uLihpbnRlcm5hbE9wdGlvbnMuZGVueVVybHMgfHwgW10pLCAuLi4oY2xpZW50T3B0aW9ucy5kZW55VXJscyB8fCBbXSldLFxuICAgIGlnbm9yZUVycm9yczogWy4uLihpbnRlcm5hbE9wdGlvbnMuaWdub3JlRXJyb3JzIHx8IFtdKSwgLi4uKGNsaWVudE9wdGlvbnMuaWdub3JlRXJyb3JzIHx8IFtdKSwgLi4uKGludGVybmFsT3B0aW9ucy5kaXNhYmxlRXJyb3JEZWZhdWx0cyA/IFtdIDogREVGQVVMVF9JR05PUkVfRVJST1JTKV0sXG4gICAgaWdub3JlVHJhbnNhY3Rpb25zOiBbLi4uKGludGVybmFsT3B0aW9ucy5pZ25vcmVUcmFuc2FjdGlvbnMgfHwgW10pLCAuLi4oY2xpZW50T3B0aW9ucy5pZ25vcmVUcmFuc2FjdGlvbnMgfHwgW10pXVxuICB9O1xufVxuZnVuY3Rpb24gX3Nob3VsZERyb3BFdmVudChldmVudCwgb3B0aW9ucykge1xuICBpZiAoIWV2ZW50LnR5cGUpIHtcbiAgICAvLyBGaWx0ZXIgZXJyb3JzXG4gICAgaWYgKF9pc0lnbm9yZWRFcnJvcihldmVudCwgb3B0aW9ucy5pZ25vcmVFcnJvcnMpKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy53YXJuKGBFdmVudCBkcm9wcGVkIGR1ZSB0byBiZWluZyBtYXRjaGVkIGJ5IFxcYGlnbm9yZUVycm9yc1xcYCBvcHRpb24uXFxuRXZlbnQ6ICR7Z2V0RXZlbnREZXNjcmlwdGlvbihldmVudCl9YCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKF9pc1VzZWxlc3NFcnJvcihldmVudCkpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oYEV2ZW50IGRyb3BwZWQgZHVlIHRvIG5vdCBoYXZpbmcgYW4gZXJyb3IgbWVzc2FnZSwgZXJyb3IgdHlwZSBvciBzdGFja3RyYWNlLlxcbkV2ZW50OiAke2dldEV2ZW50RGVzY3JpcHRpb24oZXZlbnQpfWApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChfaXNEZW5pZWRVcmwoZXZlbnQsIG9wdGlvbnMuZGVueVVybHMpKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBkZWJ1Zy53YXJuKGBFdmVudCBkcm9wcGVkIGR1ZSB0byBiZWluZyBtYXRjaGVkIGJ5IFxcYGRlbnlVcmxzXFxgIG9wdGlvbi5cXG5FdmVudDogJHtnZXRFdmVudERlc2NyaXB0aW9uKGV2ZW50KX0uXFxuVXJsOiAke19nZXRFdmVudEZpbHRlclVybChldmVudCl9YCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFfaXNBbGxvd2VkVXJsKGV2ZW50LCBvcHRpb25zLmFsbG93VXJscykpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oYEV2ZW50IGRyb3BwZWQgZHVlIHRvIG5vdCBiZWluZyBtYXRjaGVkIGJ5IFxcYGFsbG93VXJsc1xcYCBvcHRpb24uXFxuRXZlbnQ6ICR7Z2V0RXZlbnREZXNjcmlwdGlvbihldmVudCl9LlxcblVybDogJHtfZ2V0RXZlbnRGaWx0ZXJVcmwoZXZlbnQpfWApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09ICd0cmFuc2FjdGlvbicpIHtcbiAgICAvLyBGaWx0ZXIgdHJhbnNhY3Rpb25zXG5cbiAgICBpZiAoX2lzSWdub3JlZFRyYW5zYWN0aW9uKGV2ZW50LCBvcHRpb25zLmlnbm9yZVRyYW5zYWN0aW9ucykpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLndhcm4oYEV2ZW50IGRyb3BwZWQgZHVlIHRvIGJlaW5nIG1hdGNoZWQgYnkgXFxgaWdub3JlVHJhbnNhY3Rpb25zXFxgIG9wdGlvbi5cXG5FdmVudDogJHtnZXRFdmVudERlc2NyaXB0aW9uKGV2ZW50KX1gKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBfaXNJZ25vcmVkRXJyb3IoZXZlbnQsIGlnbm9yZUVycm9ycykge1xuICBpZiAoIWlnbm9yZUVycm9ycz8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBnZXRQb3NzaWJsZUV2ZW50TWVzc2FnZXMoZXZlbnQpLnNvbWUobWVzc2FnZSA9PiBzdHJpbmdNYXRjaGVzU29tZVBhdHRlcm4obWVzc2FnZSwgaWdub3JlRXJyb3JzKSk7XG59XG5mdW5jdGlvbiBfaXNJZ25vcmVkVHJhbnNhY3Rpb24oZXZlbnQsIGlnbm9yZVRyYW5zYWN0aW9ucykge1xuICBpZiAoIWlnbm9yZVRyYW5zYWN0aW9ucz8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IG5hbWUgPSBldmVudC50cmFuc2FjdGlvbjtcbiAgcmV0dXJuIG5hbWUgPyBzdHJpbmdNYXRjaGVzU29tZVBhdHRlcm4obmFtZSwgaWdub3JlVHJhbnNhY3Rpb25zKSA6IGZhbHNlO1xufVxuZnVuY3Rpb24gX2lzRGVuaWVkVXJsKGV2ZW50LCBkZW55VXJscykge1xuICBpZiAoIWRlbnlVcmxzPy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgdXJsID0gX2dldEV2ZW50RmlsdGVyVXJsKGV2ZW50KTtcbiAgcmV0dXJuICF1cmwgPyBmYWxzZSA6IHN0cmluZ01hdGNoZXNTb21lUGF0dGVybih1cmwsIGRlbnlVcmxzKTtcbn1cbmZ1bmN0aW9uIF9pc0FsbG93ZWRVcmwoZXZlbnQsIGFsbG93VXJscykge1xuICBpZiAoIWFsbG93VXJscz8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3QgdXJsID0gX2dldEV2ZW50RmlsdGVyVXJsKGV2ZW50KTtcbiAgcmV0dXJuICF1cmwgPyB0cnVlIDogc3RyaW5nTWF0Y2hlc1NvbWVQYXR0ZXJuKHVybCwgYWxsb3dVcmxzKTtcbn1cbmZ1bmN0aW9uIF9nZXRMYXN0VmFsaWRVcmwoZnJhbWVzID0gW10pIHtcbiAgZm9yIChsZXQgaSA9IGZyYW1lcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNvbnN0IGZyYW1lID0gZnJhbWVzW2ldO1xuICAgIGlmIChmcmFtZSAmJiBmcmFtZS5maWxlbmFtZSAhPT0gJzxhbm9ueW1vdXM+JyAmJiBmcmFtZS5maWxlbmFtZSAhPT0gJ1tuYXRpdmUgY29kZV0nKSB7XG4gICAgICByZXR1cm4gZnJhbWUuZmlsZW5hbWUgfHwgbnVsbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBfZ2V0RXZlbnRGaWx0ZXJVcmwoZXZlbnQpIHtcbiAgdHJ5IHtcbiAgICAvLyBJZiB0aGVyZSBhcmUgbGlua2VkIGV4Y2VwdGlvbnMgb3IgZXhjZXB0aW9uIGFnZ3JlZ2F0ZXMgd2Ugb25seSB3YW50IHRvIG1hdGNoIGFnYWluc3QgdGhlIHRvcCBmcmFtZSBvZiB0aGUgXCJyb290XCIgKHRoZSBtYWluIGV4Y2VwdGlvbilcbiAgICAvLyBUaGUgcm9vdCBhbHdheXMgY29tZXMgbGFzdCBpbiBsaW5rZWQgZXhjZXB0aW9uc1xuICAgIGNvbnN0IHJvb3RFeGNlcHRpb24gPSBbLi4uKGV2ZW50LmV4Y2VwdGlvbj8udmFsdWVzID8/IFtdKV0ucmV2ZXJzZSgpLmZpbmQodmFsdWUgPT4gdmFsdWUubWVjaGFuaXNtPy5wYXJlbnRfaWQgPT09IHVuZGVmaW5lZCAmJiB2YWx1ZS5zdGFja3RyYWNlPy5mcmFtZXM/Lmxlbmd0aCk7XG4gICAgY29uc3QgZnJhbWVzID0gcm9vdEV4Y2VwdGlvbj8uc3RhY2t0cmFjZT8uZnJhbWVzO1xuICAgIHJldHVybiBmcmFtZXMgPyBfZ2V0TGFzdFZhbGlkVXJsKGZyYW1lcykgOiBudWxsO1xuICB9IGNhdGNoIChvTykge1xuICAgIERFQlVHX0JVSUxEICYmIGRlYnVnLmVycm9yKGBDYW5ub3QgZXh0cmFjdCB1cmwgZm9yIGV2ZW50ICR7Z2V0RXZlbnREZXNjcmlwdGlvbihldmVudCl9YCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIF9pc1VzZWxlc3NFcnJvcihldmVudCkge1xuICAvLyBXZSBvbmx5IHdhbnQgdG8gY29uc2lkZXIgZXZlbnRzIGZvciBkcm9wcGluZyB0aGF0IGFjdHVhbGx5IGhhdmUgcmVjb3JkZWQgZXhjZXB0aW9uIHZhbHVlcy5cbiAgaWYgKCFldmVudC5leGNlcHRpb24/LnZhbHVlcz8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAoXG4gICAgLy8gTm8gdG9wLWxldmVsIG1lc3NhZ2VcbiAgICAhZXZlbnQubWVzc2FnZSAmJlxuICAgIC8vIFRoZXJlIGFyZSBubyBleGNlcHRpb24gdmFsdWVzIHRoYXQgaGF2ZSBhIHN0YWNrdHJhY2UsIGEgbm9uLWdlbmVyaWMtRXJyb3IgdHlwZSBvciB2YWx1ZVxuICAgICFldmVudC5leGNlcHRpb24udmFsdWVzLnNvbWUodmFsdWUgPT4gdmFsdWUuc3RhY2t0cmFjZSB8fCB2YWx1ZS50eXBlICYmIHZhbHVlLnR5cGUgIT09ICdFcnJvcicgfHwgdmFsdWUudmFsdWUpXG4gICk7XG59XG5leHBvcnQgeyBldmVudEZpbHRlcnNJbnRlZ3JhdGlvbiwgaW5ib3VuZEZpbHRlcnNJbnRlZ3JhdGlvbiB9O1xuIiwiaW1wb3J0IHsgaXNJbnN0YW5jZU9mIH0gZnJvbSAnLi9pcy5qcyc7XG5cbi8qKlxuICogQ3JlYXRlcyBleGNlcHRpb25zIGluc2lkZSBgZXZlbnQuZXhjZXB0aW9uLnZhbHVlc2AgZm9yIGVycm9ycyB0aGF0IGFyZSBuZXN0ZWQgb24gcHJvcGVydGllcyBiYXNlZCBvbiB0aGUgYGtleWAgcGFyYW1ldGVyLlxuICovXG5mdW5jdGlvbiBhcHBseUFnZ3JlZ2F0ZUVycm9yc1RvRXZlbnQoZXhjZXB0aW9uRnJvbUVycm9ySW1wbGVtZW50YXRpb24sIHBhcnNlciwga2V5LCBsaW1pdCwgZXZlbnQsIGhpbnQpIHtcbiAgaWYgKCFldmVudC5leGNlcHRpb24/LnZhbHVlcyB8fCAhaGludCB8fCAhaXNJbnN0YW5jZU9mKGhpbnQub3JpZ2luYWxFeGNlcHRpb24sIEVycm9yKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEdlbmVyYWxseSBzcGVha2luZyB0aGUgbGFzdCBpdGVtIGluIGBldmVudC5leGNlcHRpb24udmFsdWVzYCBpcyB0aGUgZXhjZXB0aW9uIG9yaWdpbmF0aW5nIGZyb20gdGhlIG9yaWdpbmFsIEVycm9yXG4gIGNvbnN0IG9yaWdpbmFsRXhjZXB0aW9uID0gZXZlbnQuZXhjZXB0aW9uLnZhbHVlcy5sZW5ndGggPiAwID8gZXZlbnQuZXhjZXB0aW9uLnZhbHVlc1tldmVudC5leGNlcHRpb24udmFsdWVzLmxlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xuXG4gIC8vIFdlIG9ubHkgY3JlYXRlIGV4Y2VwdGlvbiBncm91cGluZyBpZiB0aGVyZSBpcyBhbiBleGNlcHRpb24gaW4gdGhlIGV2ZW50LlxuICBpZiAob3JpZ2luYWxFeGNlcHRpb24pIHtcbiAgICBldmVudC5leGNlcHRpb24udmFsdWVzID0gYWdncmVnYXRlRXhjZXB0aW9uc0Zyb21FcnJvcihleGNlcHRpb25Gcm9tRXJyb3JJbXBsZW1lbnRhdGlvbiwgcGFyc2VyLCBsaW1pdCwgaGludC5vcmlnaW5hbEV4Y2VwdGlvbiwga2V5LCBldmVudC5leGNlcHRpb24udmFsdWVzLCBvcmlnaW5hbEV4Y2VwdGlvbiwgMCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGFnZ3JlZ2F0ZUV4Y2VwdGlvbnNGcm9tRXJyb3IoZXhjZXB0aW9uRnJvbUVycm9ySW1wbGVtZW50YXRpb24sIHBhcnNlciwgbGltaXQsIGVycm9yLCBrZXksIHByZXZFeGNlcHRpb25zLCBleGNlcHRpb24sIGV4Y2VwdGlvbklkKSB7XG4gIGlmIChwcmV2RXhjZXB0aW9ucy5sZW5ndGggPj0gbGltaXQgKyAxKSB7XG4gICAgcmV0dXJuIHByZXZFeGNlcHRpb25zO1xuICB9XG4gIGxldCBuZXdFeGNlcHRpb25zID0gWy4uLnByZXZFeGNlcHRpb25zXTtcblxuICAvLyBSZWN1cnNpdmVseSBjYWxsIHRoaXMgZnVuY3Rpb24gaW4gb3JkZXIgdG8gd2FsayBkb3duIGEgY2hhaW4gb2YgZXJyb3JzXG4gIGlmIChpc0luc3RhbmNlT2YoZXJyb3Jba2V5XSwgRXJyb3IpKSB7XG4gICAgYXBwbHlFeGNlcHRpb25Hcm91cEZpZWxkc0ZvclBhcmVudEV4Y2VwdGlvbihleGNlcHRpb24sIGV4Y2VwdGlvbklkKTtcbiAgICBjb25zdCBuZXdFeGNlcHRpb24gPSBleGNlcHRpb25Gcm9tRXJyb3JJbXBsZW1lbnRhdGlvbihwYXJzZXIsIGVycm9yW2tleV0pO1xuICAgIGNvbnN0IG5ld0V4Y2VwdGlvbklkID0gbmV3RXhjZXB0aW9ucy5sZW5ndGg7XG4gICAgYXBwbHlFeGNlcHRpb25Hcm91cEZpZWxkc0ZvckNoaWxkRXhjZXB0aW9uKG5ld0V4Y2VwdGlvbiwga2V5LCBuZXdFeGNlcHRpb25JZCwgZXhjZXB0aW9uSWQpO1xuICAgIG5ld0V4Y2VwdGlvbnMgPSBhZ2dyZWdhdGVFeGNlcHRpb25zRnJvbUVycm9yKGV4Y2VwdGlvbkZyb21FcnJvckltcGxlbWVudGF0aW9uLCBwYXJzZXIsIGxpbWl0LCBlcnJvcltrZXldLCBrZXksIFtuZXdFeGNlcHRpb24sIC4uLm5ld0V4Y2VwdGlvbnNdLCBuZXdFeGNlcHRpb24sIG5ld0V4Y2VwdGlvbklkKTtcbiAgfVxuXG4gIC8vIFRoaXMgd2lsbCBjcmVhdGUgZXhjZXB0aW9uIGdyb3VwaW5nIGZvciBBZ2dyZWdhdGVFcnJvcnNcbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQWdncmVnYXRlRXJyb3JcbiAgaWYgKEFycmF5LmlzQXJyYXkoZXJyb3IuZXJyb3JzKSkge1xuICAgIGVycm9yLmVycm9ycy5mb3JFYWNoKChjaGlsZEVycm9yLCBpKSA9PiB7XG4gICAgICBpZiAoaXNJbnN0YW5jZU9mKGNoaWxkRXJyb3IsIEVycm9yKSkge1xuICAgICAgICBhcHBseUV4Y2VwdGlvbkdyb3VwRmllbGRzRm9yUGFyZW50RXhjZXB0aW9uKGV4Y2VwdGlvbiwgZXhjZXB0aW9uSWQpO1xuICAgICAgICBjb25zdCBuZXdFeGNlcHRpb24gPSBleGNlcHRpb25Gcm9tRXJyb3JJbXBsZW1lbnRhdGlvbihwYXJzZXIsIGNoaWxkRXJyb3IpO1xuICAgICAgICBjb25zdCBuZXdFeGNlcHRpb25JZCA9IG5ld0V4Y2VwdGlvbnMubGVuZ3RoO1xuICAgICAgICBhcHBseUV4Y2VwdGlvbkdyb3VwRmllbGRzRm9yQ2hpbGRFeGNlcHRpb24obmV3RXhjZXB0aW9uLCBgZXJyb3JzWyR7aX1dYCwgbmV3RXhjZXB0aW9uSWQsIGV4Y2VwdGlvbklkKTtcbiAgICAgICAgbmV3RXhjZXB0aW9ucyA9IGFnZ3JlZ2F0ZUV4Y2VwdGlvbnNGcm9tRXJyb3IoZXhjZXB0aW9uRnJvbUVycm9ySW1wbGVtZW50YXRpb24sIHBhcnNlciwgbGltaXQsIGNoaWxkRXJyb3IsIGtleSwgW25ld0V4Y2VwdGlvbiwgLi4ubmV3RXhjZXB0aW9uc10sIG5ld0V4Y2VwdGlvbiwgbmV3RXhjZXB0aW9uSWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBuZXdFeGNlcHRpb25zO1xufVxuZnVuY3Rpb24gYXBwbHlFeGNlcHRpb25Hcm91cEZpZWxkc0ZvclBhcmVudEV4Y2VwdGlvbihleGNlcHRpb24sIGV4Y2VwdGlvbklkKSB7XG4gIC8vIERvbid0IGtub3cgaWYgdGhpcyBkZWZhdWx0IG1ha2VzIHNlbnNlLiBUaGUgcHJvdG9jb2wgcmVxdWlyZXMgdXMgdG8gc2V0IHRoZXNlIHZhbHVlcyBzbyB3ZSBwaWNrICpzb21lKiBkZWZhdWx0LlxuICBleGNlcHRpb24ubWVjaGFuaXNtID0gZXhjZXB0aW9uLm1lY2hhbmlzbSB8fCB7XG4gICAgdHlwZTogJ2dlbmVyaWMnLFxuICAgIGhhbmRsZWQ6IHRydWVcbiAgfTtcbiAgZXhjZXB0aW9uLm1lY2hhbmlzbSA9IHtcbiAgICAuLi5leGNlcHRpb24ubWVjaGFuaXNtLFxuICAgIC4uLihleGNlcHRpb24udHlwZSA9PT0gJ0FnZ3JlZ2F0ZUVycm9yJyAmJiB7XG4gICAgICBpc19leGNlcHRpb25fZ3JvdXA6IHRydWVcbiAgICB9KSxcbiAgICBleGNlcHRpb25faWQ6IGV4Y2VwdGlvbklkXG4gIH07XG59XG5mdW5jdGlvbiBhcHBseUV4Y2VwdGlvbkdyb3VwRmllbGRzRm9yQ2hpbGRFeGNlcHRpb24oZXhjZXB0aW9uLCBzb3VyY2UsIGV4Y2VwdGlvbklkLCBwYXJlbnRJZCkge1xuICAvLyBEb24ndCBrbm93IGlmIHRoaXMgZGVmYXVsdCBtYWtlcyBzZW5zZS4gVGhlIHByb3RvY29sIHJlcXVpcmVzIHVzIHRvIHNldCB0aGVzZSB2YWx1ZXMgc28gd2UgcGljayAqc29tZSogZGVmYXVsdC5cbiAgZXhjZXB0aW9uLm1lY2hhbmlzbSA9IGV4Y2VwdGlvbi5tZWNoYW5pc20gfHwge1xuICAgIHR5cGU6ICdnZW5lcmljJyxcbiAgICBoYW5kbGVkOiB0cnVlXG4gIH07XG4gIGV4Y2VwdGlvbi5tZWNoYW5pc20gPSB7XG4gICAgLi4uZXhjZXB0aW9uLm1lY2hhbmlzbSxcbiAgICB0eXBlOiAnY2hhaW5lZCcsXG4gICAgc291cmNlLFxuICAgIGV4Y2VwdGlvbl9pZDogZXhjZXB0aW9uSWQsXG4gICAgcGFyZW50X2lkOiBwYXJlbnRJZFxuICB9O1xufVxuZXhwb3J0IHsgYXBwbHlBZ2dyZWdhdGVFcnJvcnNUb0V2ZW50IH07XG4iLCJpbXBvcnQgeyBDT05TT0xFX0xFVkVMUywgb3JpZ2luYWxDb25zb2xlTWV0aG9kcyB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnLi4vdXRpbHMvb2JqZWN0LmpzJztcbmltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICcuLi91dGlscy93b3JsZHdpZGUuanMnO1xuaW1wb3J0IHsgYWRkSGFuZGxlciwgbWF5YmVJbnN0cnVtZW50LCB0cmlnZ2VySGFuZGxlcnMgfSBmcm9tICcuL2hhbmRsZXJzLmpzJztcblxuLyoqXG4gKiBBZGQgYW4gaW5zdHJ1bWVudGF0aW9uIGhhbmRsZXIgZm9yIHdoZW4gYSBjb25zb2xlLnh4eCBtZXRob2QgaXMgY2FsbGVkLlxuICpcbiAqIFVzZSBhdCB5b3VyIG93biByaXNrLCB0aGlzIG1pZ2h0IGJyZWFrIHdpdGhvdXQgY2hhbmdlbG9nIG5vdGljZSwgb25seSB1c2VkIGludGVybmFsbHkuXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGFkZENvbnNvbGVJbnN0cnVtZW50YXRpb25IYW5kbGVyKGhhbmRsZXIpIHtcbiAgY29uc3QgdHlwZSA9ICdjb25zb2xlJztcbiAgYWRkSGFuZGxlcih0eXBlLCBoYW5kbGVyKTtcbiAgbWF5YmVJbnN0cnVtZW50KHR5cGUsIGluc3RydW1lbnRDb25zb2xlKTtcbn1cbmZ1bmN0aW9uIGluc3RydW1lbnRDb25zb2xlKCkge1xuICBpZiAoISgnY29uc29sZScgaW4gR0xPQkFMX09CSikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgQ09OU09MRV9MRVZFTFMuZm9yRWFjaChmdW5jdGlvbiAobGV2ZWwpIHtcbiAgICBpZiAoIShsZXZlbCBpbiBHTE9CQUxfT0JKLmNvbnNvbGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZpbGwoR0xPQkFMX09CSi5jb25zb2xlLCBsZXZlbCwgZnVuY3Rpb24gKG9yaWdpbmFsQ29uc29sZU1ldGhvZCkge1xuICAgICAgb3JpZ2luYWxDb25zb2xlTWV0aG9kc1tsZXZlbF0gPSBvcmlnaW5hbENvbnNvbGVNZXRob2Q7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlckRhdGEgPSB7XG4gICAgICAgICAgYXJncyxcbiAgICAgICAgICBsZXZlbFxuICAgICAgICB9O1xuICAgICAgICB0cmlnZ2VySGFuZGxlcnMoJ2NvbnNvbGUnLCBoYW5kbGVyRGF0YSk7XG4gICAgICAgIGNvbnN0IGxvZyA9IG9yaWdpbmFsQ29uc29sZU1ldGhvZHNbbGV2ZWxdO1xuICAgICAgICBsb2c/LmFwcGx5KEdMT0JBTF9PQkouY29uc29sZSwgYXJncyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcbn1cbmV4cG9ydCB7IGFkZENvbnNvbGVJbnN0cnVtZW50YXRpb25IYW5kbGVyIH07XG4iLCIvKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nLWJhc2VkIGxldmVsIGludG8gYSBgU2V2ZXJpdHlMZXZlbGAsIG5vcm1hbGl6aW5nIGl0IGFsb25nIHRoZSB3YXkuXG4gKlxuICogQHBhcmFtIGxldmVsIFN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBkZXNpcmVkIGBTZXZlcml0eUxldmVsYC5cbiAqIEByZXR1cm5zIFRoZSBgU2V2ZXJpdHlMZXZlbGAgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gc3RyaW5nLCBvciAnbG9nJyBpZiB0aGUgc3RyaW5nIGlzbid0IGEgdmFsaWQgbGV2ZWwuXG4gKi9cbmZ1bmN0aW9uIHNldmVyaXR5TGV2ZWxGcm9tU3RyaW5nKGxldmVsKSB7XG4gIHJldHVybiBsZXZlbCA9PT0gJ3dhcm4nID8gJ3dhcm5pbmcnIDogWydmYXRhbCcsICdlcnJvcicsICd3YXJuaW5nJywgJ2xvZycsICdpbmZvJywgJ2RlYnVnJ10uaW5jbHVkZXMobGV2ZWwpID8gbGV2ZWwgOiAnbG9nJztcbn1cbmV4cG9ydCB7IHNldmVyaXR5TGV2ZWxGcm9tU3RyaW5nIH07XG4iLCJpbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4uL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IGRlZmluZUludGVncmF0aW9uIH0gZnJvbSAnLi4vaW50ZWdyYXRpb24uanMnO1xuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgZ2V0RnJhbWVzRnJvbUV2ZW50IH0gZnJvbSAnLi4vdXRpbHMvc3RhY2t0cmFjZS5qcyc7XG5jb25zdCBJTlRFR1JBVElPTl9OQU1FID0gJ0RlZHVwZSc7XG5jb25zdCBfZGVkdXBlSW50ZWdyYXRpb24gPSAoKSA9PiB7XG4gIGxldCBwcmV2aW91c0V2ZW50O1xuICByZXR1cm4ge1xuICAgIG5hbWU6IElOVEVHUkFUSU9OX05BTUUsXG4gICAgcHJvY2Vzc0V2ZW50KGN1cnJlbnRFdmVudCkge1xuICAgICAgLy8gV2Ugd2FudCB0byBpZ25vcmUgYW55IG5vbi1lcnJvciB0eXBlIGV2ZW50cywgZS5nLiB0cmFuc2FjdGlvbnMgb3IgcmVwbGF5c1xuICAgICAgLy8gVGhlc2Ugc2hvdWxkIG5ldmVyIGJlIGRlZHVwZWQsIGFuZCBhbHNvIG5vdCBiZSBjb21wYXJlZCBhZ2FpbnN0IGFzIF9wcmV2aW91c0V2ZW50LlxuICAgICAgaWYgKGN1cnJlbnRFdmVudC50eXBlKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50RXZlbnQ7XG4gICAgICB9XG5cbiAgICAgIC8vIEp1dXVzdCBpbiBjYXNlIHNvbWV0aGluZyBnb2VzIHdyb25nXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoX3Nob3VsZERyb3BFdmVudChjdXJyZW50RXZlbnQsIHByZXZpb3VzRXZlbnQpKSB7XG4gICAgICAgICAgREVCVUdfQlVJTEQgJiYgZGVidWcud2FybignRXZlbnQgZHJvcHBlZCBkdWUgdG8gYmVpbmcgYSBkdXBsaWNhdGUgb2YgcHJldmlvdXNseSBjYXB0dXJlZCBldmVudC4nKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoX29PKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XG5cbiAgICAgIHJldHVybiBwcmV2aW91c0V2ZW50ID0gY3VycmVudEV2ZW50O1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogRGVkdXBsaWNhdGlvbiBmaWx0ZXIuXG4gKi9cbmNvbnN0IGRlZHVwZUludGVncmF0aW9uID0gZGVmaW5lSW50ZWdyYXRpb24oX2RlZHVwZUludGVncmF0aW9uKTtcblxuLyoqIG9ubHkgZXhwb3J0ZWQgZm9yIHRlc3RzLiAqL1xuZnVuY3Rpb24gX3Nob3VsZERyb3BFdmVudChjdXJyZW50RXZlbnQsIHByZXZpb3VzRXZlbnQpIHtcbiAgaWYgKCFwcmV2aW91c0V2ZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChfaXNTYW1lTWVzc2FnZUV2ZW50KGN1cnJlbnRFdmVudCwgcHJldmlvdXNFdmVudCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoX2lzU2FtZUV4Y2VwdGlvbkV2ZW50KGN1cnJlbnRFdmVudCwgcHJldmlvdXNFdmVudCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBfaXNTYW1lTWVzc2FnZUV2ZW50KGN1cnJlbnRFdmVudCwgcHJldmlvdXNFdmVudCkge1xuICBjb25zdCBjdXJyZW50TWVzc2FnZSA9IGN1cnJlbnRFdmVudC5tZXNzYWdlO1xuICBjb25zdCBwcmV2aW91c01lc3NhZ2UgPSBwcmV2aW91c0V2ZW50Lm1lc3NhZ2U7XG5cbiAgLy8gSWYgbmVpdGhlciBldmVudCBoYXMgYSBtZXNzYWdlIHByb3BlcnR5LCB0aGV5IHdlcmUgYm90aCBleGNlcHRpb25zLCBzbyBiYWlsIG91dFxuICBpZiAoIWN1cnJlbnRNZXNzYWdlICYmICFwcmV2aW91c01lc3NhZ2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBJZiBvbmx5IG9uZSBldmVudCBoYXMgYSBzdGFja3RyYWNlLCBidXQgbm90IHRoZSBvdGhlciBvbmUsIHRoZXkgYXJlIG5vdCB0aGUgc2FtZVxuICBpZiAoY3VycmVudE1lc3NhZ2UgJiYgIXByZXZpb3VzTWVzc2FnZSB8fCAhY3VycmVudE1lc3NhZ2UgJiYgcHJldmlvdXNNZXNzYWdlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChjdXJyZW50TWVzc2FnZSAhPT0gcHJldmlvdXNNZXNzYWdlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghX2lzU2FtZUZpbmdlcnByaW50KGN1cnJlbnRFdmVudCwgcHJldmlvdXNFdmVudCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCFfaXNTYW1lU3RhY2t0cmFjZShjdXJyZW50RXZlbnQsIHByZXZpb3VzRXZlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gX2lzU2FtZUV4Y2VwdGlvbkV2ZW50KGN1cnJlbnRFdmVudCwgcHJldmlvdXNFdmVudCkge1xuICBjb25zdCBwcmV2aW91c0V4Y2VwdGlvbiA9IF9nZXRFeGNlcHRpb25Gcm9tRXZlbnQocHJldmlvdXNFdmVudCk7XG4gIGNvbnN0IGN1cnJlbnRFeGNlcHRpb24gPSBfZ2V0RXhjZXB0aW9uRnJvbUV2ZW50KGN1cnJlbnRFdmVudCk7XG4gIGlmICghcHJldmlvdXNFeGNlcHRpb24gfHwgIWN1cnJlbnRFeGNlcHRpb24pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHByZXZpb3VzRXhjZXB0aW9uLnR5cGUgIT09IGN1cnJlbnRFeGNlcHRpb24udHlwZSB8fCBwcmV2aW91c0V4Y2VwdGlvbi52YWx1ZSAhPT0gY3VycmVudEV4Y2VwdGlvbi52YWx1ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIV9pc1NhbWVGaW5nZXJwcmludChjdXJyZW50RXZlbnQsIHByZXZpb3VzRXZlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghX2lzU2FtZVN0YWNrdHJhY2UoY3VycmVudEV2ZW50LCBwcmV2aW91c0V2ZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIF9pc1NhbWVTdGFja3RyYWNlKGN1cnJlbnRFdmVudCwgcHJldmlvdXNFdmVudCkge1xuICBsZXQgY3VycmVudEZyYW1lcyA9IGdldEZyYW1lc0Zyb21FdmVudChjdXJyZW50RXZlbnQpO1xuICBsZXQgcHJldmlvdXNGcmFtZXMgPSBnZXRGcmFtZXNGcm9tRXZlbnQocHJldmlvdXNFdmVudCk7XG5cbiAgLy8gSWYgbmVpdGhlciBldmVudCBoYXMgYSBzdGFja3RyYWNlLCB0aGV5IGFyZSBhc3N1bWVkIHRvIGJlIHRoZSBzYW1lXG4gIGlmICghY3VycmVudEZyYW1lcyAmJiAhcHJldmlvdXNGcmFtZXMpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIElmIG9ubHkgb25lIGV2ZW50IGhhcyBhIHN0YWNrdHJhY2UsIGJ1dCBub3QgdGhlIG90aGVyIG9uZSwgdGhleSBhcmUgbm90IHRoZSBzYW1lXG4gIGlmIChjdXJyZW50RnJhbWVzICYmICFwcmV2aW91c0ZyYW1lcyB8fCAhY3VycmVudEZyYW1lcyAmJiBwcmV2aW91c0ZyYW1lcykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjdXJyZW50RnJhbWVzID0gY3VycmVudEZyYW1lcztcbiAgcHJldmlvdXNGcmFtZXMgPSBwcmV2aW91c0ZyYW1lcztcblxuICAvLyBJZiBudW1iZXIgb2YgZnJhbWVzIGRpZmZlciwgdGhleSBhcmUgbm90IHRoZSBzYW1lXG4gIGlmIChwcmV2aW91c0ZyYW1lcy5sZW5ndGggIT09IGN1cnJlbnRGcmFtZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gT3RoZXJ3aXNlLCBjb21wYXJlIHRoZSB0d29cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2aW91c0ZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgY29uc3QgZnJhbWVBID0gcHJldmlvdXNGcmFtZXNbaV07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICBjb25zdCBmcmFtZUIgPSBjdXJyZW50RnJhbWVzW2ldO1xuICAgIGlmIChmcmFtZUEuZmlsZW5hbWUgIT09IGZyYW1lQi5maWxlbmFtZSB8fCBmcmFtZUEubGluZW5vICE9PSBmcmFtZUIubGluZW5vIHx8IGZyYW1lQS5jb2xubyAhPT0gZnJhbWVCLmNvbG5vIHx8IGZyYW1lQS5mdW5jdGlvbiAhPT0gZnJhbWVCLmZ1bmN0aW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gX2lzU2FtZUZpbmdlcnByaW50KGN1cnJlbnRFdmVudCwgcHJldmlvdXNFdmVudCkge1xuICBsZXQgY3VycmVudEZpbmdlcnByaW50ID0gY3VycmVudEV2ZW50LmZpbmdlcnByaW50O1xuICBsZXQgcHJldmlvdXNGaW5nZXJwcmludCA9IHByZXZpb3VzRXZlbnQuZmluZ2VycHJpbnQ7XG5cbiAgLy8gSWYgbmVpdGhlciBldmVudCBoYXMgYSBmaW5nZXJwcmludCwgdGhleSBhcmUgYXNzdW1lZCB0byBiZSB0aGUgc2FtZVxuICBpZiAoIWN1cnJlbnRGaW5nZXJwcmludCAmJiAhcHJldmlvdXNGaW5nZXJwcmludCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gSWYgb25seSBvbmUgZXZlbnQgaGFzIGEgZmluZ2VycHJpbnQsIGJ1dCBub3QgdGhlIG90aGVyIG9uZSwgdGhleSBhcmUgbm90IHRoZSBzYW1lXG4gIGlmIChjdXJyZW50RmluZ2VycHJpbnQgJiYgIXByZXZpb3VzRmluZ2VycHJpbnQgfHwgIWN1cnJlbnRGaW5nZXJwcmludCAmJiBwcmV2aW91c0ZpbmdlcnByaW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGN1cnJlbnRGaW5nZXJwcmludCA9IGN1cnJlbnRGaW5nZXJwcmludDtcbiAgcHJldmlvdXNGaW5nZXJwcmludCA9IHByZXZpb3VzRmluZ2VycHJpbnQ7XG5cbiAgLy8gT3RoZXJ3aXNlLCBjb21wYXJlIHRoZSB0d29cbiAgdHJ5IHtcbiAgICByZXR1cm4gISEoY3VycmVudEZpbmdlcnByaW50LmpvaW4oJycpID09PSBwcmV2aW91c0ZpbmdlcnByaW50LmpvaW4oJycpKTtcbiAgfSBjYXRjaCAoX29PKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5mdW5jdGlvbiBfZ2V0RXhjZXB0aW9uRnJvbUV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5leGNlcHRpb24/LnZhbHVlcyAmJiBldmVudC5leGNlcHRpb24udmFsdWVzWzBdO1xufVxuZXhwb3J0IHsgX3Nob3VsZERyb3BFdmVudCwgZGVkdXBlSW50ZWdyYXRpb24gfTtcbiIsImltcG9ydCB7IFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFLCBTRU1BTlRJQ19BVFRSSUJVVEVfSFRUUF9SRVFVRVNUX01FVEhPRCwgU0VNQU5USUNfQVRUUklCVVRFX1VSTF9GVUxMLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTiB9IGZyb20gJy4uL3NlbWFudGljQXR0cmlidXRlcy5qcyc7XG5cbi8vIEN1cmlvdXMgYWJvdXQgYHRoaXNtZXNzYWdlOi9gPyBTZWU6IGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmMyNTU3Lmh0bWxcbi8vICA+IFdoZW4gdGhlIG1ldGhvZHMgYWJvdmUgZG8gbm90IHlpZWxkIGFuIGFic29sdXRlIFVSSSwgYSBiYXNlIFVSTFxuLy8gID4gb2YgXCJ0aGlzbWVzc2FnZTovXCIgTVVTVCBiZSBlbXBsb3llZC4gVGhpcyBiYXNlIFVSTCBoYXMgYmVlblxuLy8gID4gZGVmaW5lZCBmb3IgdGhlIHNvbGUgcHVycG9zZSBvZiByZXNvbHZpbmcgcmVsYXRpdmUgcmVmZXJlbmNlc1xuLy8gID4gd2l0aGluIGEgbXVsdGlwYXJ0L3JlbGF0ZWQgc3RydWN0dXJlIHdoZW4gbm8gb3RoZXIgYmFzZSBVUkkgaXNcbi8vICA+IHNwZWNpZmllZC5cbi8vXG4vLyBXZSBuZWVkIHRvIHByb3ZpZGUgYSBiYXNlIFVSTCB0byBgcGFyc2VTdHJpbmdUb1VSTE9iamVjdGAgYmVjYXVzZSB0aGUgZmV0Y2ggQVBJIGdpdmVzIHVzIGFcbi8vIHJlbGF0aXZlIFVSTCBzb21ldGltZXMuXG4vL1xuLy8gVGhpcyBpcyB0aGUgb25seSBjYXNlIHdoZXJlIHdlIG5lZWQgdG8gcHJvdmlkZSBhIGJhc2UgVVJMIHRvIGBwYXJzZVN0cmluZ1RvVVJMT2JqZWN0YFxuLy8gYmVjYXVzZSB0aGUgcmVsYXRpdmUgVVJMIGlzIG5vdCB2YWxpZCBvbiBpdHMgb3duLlxuY29uc3QgREVGQVVMVF9CQVNFX1VSTCA9ICd0aGlzbWVzc2FnZTovJztcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIFVSTCBvYmplY3QgaXMgcmVsYXRpdmVcbiAqXG4gKiBAcGFyYW0gdXJsIC0gVGhlIFVSTCBvYmplY3QgdG8gY2hlY2tcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIFVSTCBvYmplY3QgaXMgcmVsYXRpdmUsIGZhbHNlIG90aGVyd2lzZVxuICovXG5mdW5jdGlvbiBpc1VSTE9iamVjdFJlbGF0aXZlKHVybCkge1xuICByZXR1cm4gJ2lzUmVsYXRpdmUnIGluIHVybDtcbn1cblxuLyoqXG4gKiBQYXJzZXMgc3RyaW5nIHRvIGEgVVJMIG9iamVjdFxuICpcbiAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIHRvIHBhcnNlXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIFVSTCBvYmplY3Qgb3IgdW5kZWZpbmVkIGlmIHRoZSBVUkwgaXMgaW52YWxpZFxuICovXG5mdW5jdGlvbiBwYXJzZVN0cmluZ1RvVVJMT2JqZWN0KHVybCwgdXJsQmFzZSkge1xuICBjb25zdCBpc1JlbGF0aXZlID0gdXJsLmluZGV4T2YoJzovLycpIDw9IDAgJiYgdXJsLmluZGV4T2YoJy8vJykgIT09IDA7XG4gIGNvbnN0IGJhc2UgPSB1cmxCYXNlID8/IChpc1JlbGF0aXZlID8gREVGQVVMVF9CQVNFX1VSTCA6IHVuZGVmaW5lZCk7XG4gIHRyeSB7XG4gICAgLy8gVXNlIGBjYW5QYXJzZWAgdG8gc2hvcnQtY2lyY3VpdCB0aGUgVVJMIGNvbnN0cnVjdG9yIGlmIGl0J3Mgbm90IGEgdmFsaWQgVVJMXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIgdGhhbiB0cnlpbmcgdG8gY29uc3RydWN0IHRoZSBVUkwgYW5kIGNhdGNoaW5nIHRoZSBlcnJvclxuICAgIC8vIE5vZGUgMjArLCBDaHJvbWUgMTIwKywgRmlyZWZveCAxMTUrLCBTYWZhcmkgMTcrXG4gICAgaWYgKCdjYW5QYXJzZScgaW4gVVJMICYmICFVUkwuY2FuUGFyc2UodXJsLCBiYXNlKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgZnVsbFVybE9iamVjdCA9IG5ldyBVUkwodXJsLCBiYXNlKTtcbiAgICBpZiAoaXNSZWxhdGl2ZSkge1xuICAgICAgLy8gQmVjYXVzZSB3ZSB1c2VkIGEgZmFrZSBiYXNlIFVSTCwgd2UgbmVlZCB0byByZXR1cm4gYSByZWxhdGl2ZSBVUkwgb2JqZWN0LlxuICAgICAgLy8gV2UgY2Fubm90IHJldHVybiBhbnl0aGluZyBhYm91dCB0aGUgb3JpZ2luLCBob3N0LCBldGMuIGJlY2F1c2UgaXQgd2lsbCByZWZlciB0byB0aGUgZmFrZSBiYXNlIFVSTC5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzUmVsYXRpdmUsXG4gICAgICAgIHBhdGhuYW1lOiBmdWxsVXJsT2JqZWN0LnBhdGhuYW1lLFxuICAgICAgICBzZWFyY2g6IGZ1bGxVcmxPYmplY3Quc2VhcmNoLFxuICAgICAgICBoYXNoOiBmdWxsVXJsT2JqZWN0Lmhhc2hcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdWxsVXJsT2JqZWN0O1xuICB9IGNhdGNoIHtcbiAgICAvLyBlbXB0eSBib2R5XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBUYWtlcyBhIFVSTCBvYmplY3QgYW5kIHJldHVybnMgYSBzYW5pdGl6ZWQgc3RyaW5nIHdoaWNoIGlzIHNhZmUgdG8gdXNlIGFzIHNwYW4gbmFtZVxuICogc2VlOiBodHRwczovL2RldmVsb3Auc2VudHJ5LmRldi9zZGsvZGF0YS1oYW5kbGluZy8jc3RydWN0dXJpbmctZGF0YVxuICovXG5mdW5jdGlvbiBnZXRTYW5pdGl6ZWRVcmxTdHJpbmdGcm9tVXJsT2JqZWN0KHVybCkge1xuICBpZiAoaXNVUkxPYmplY3RSZWxhdGl2ZSh1cmwpKSB7XG4gICAgcmV0dXJuIHVybC5wYXRobmFtZTtcbiAgfVxuICBjb25zdCBuZXdVcmwgPSBuZXcgVVJMKHVybCk7XG4gIG5ld1VybC5zZWFyY2ggPSAnJztcbiAgbmV3VXJsLmhhc2ggPSAnJztcbiAgaWYgKFsnODAnLCAnNDQzJ10uaW5jbHVkZXMobmV3VXJsLnBvcnQpKSB7XG4gICAgbmV3VXJsLnBvcnQgPSAnJztcbiAgfVxuICBpZiAobmV3VXJsLnBhc3N3b3JkKSB7XG4gICAgbmV3VXJsLnBhc3N3b3JkID0gJyVmaWx0ZXJlZCUnO1xuICB9XG4gIGlmIChuZXdVcmwudXNlcm5hbWUpIHtcbiAgICBuZXdVcmwudXNlcm5hbWUgPSAnJWZpbHRlcmVkJSc7XG4gIH1cbiAgcmV0dXJuIG5ld1VybC50b1N0cmluZygpO1xufVxuZnVuY3Rpb24gZ2V0SHR0cFNwYW5OYW1lRnJvbVVybE9iamVjdCh1cmxPYmplY3QsIGtpbmQsIHJlcXVlc3QsIHJvdXRlTmFtZSkge1xuICBjb25zdCBtZXRob2QgPSByZXF1ZXN0Py5tZXRob2Q/LnRvVXBwZXJDYXNlKCkgPz8gJ0dFVCc7XG4gIGNvbnN0IHJvdXRlID0gcm91dGVOYW1lID8gcm91dGVOYW1lIDogdXJsT2JqZWN0ID8ga2luZCA9PT0gJ2NsaWVudCcgPyBnZXRTYW5pdGl6ZWRVcmxTdHJpbmdGcm9tVXJsT2JqZWN0KHVybE9iamVjdCkgOiB1cmxPYmplY3QucGF0aG5hbWUgOiAnLyc7XG4gIHJldHVybiBgJHttZXRob2R9ICR7cm91dGV9YDtcbn1cblxuLyoqXG4gKiBUYWtlcyBhIHBhcnNlZCBVUkwgb2JqZWN0IGFuZCByZXR1cm5zIGEgc2V0IG9mIGF0dHJpYnV0ZXMgZm9yIHRoZSBzcGFuXG4gKiB0aGF0IHJlcHJlc2VudHMgdGhlIEhUVFAgcmVxdWVzdCBmb3IgdGhhdCB1cmwuIFRoaXMgaXMgdXNlZCBmb3IgYm90aCBzZXJ2ZXJcbiAqIGFuZCBjbGllbnQgaHR0cCBzcGFucy5cbiAqXG4gKiBGb2xsb3dzIGh0dHBzOi8vb3BlbnRlbGVtZXRyeS5pby9kb2NzL3NwZWNzL3NlbWNvbnYvaHR0cC8uXG4gKlxuICogQHBhcmFtIHVybE9iamVjdCAtIHNlZSB7QGxpbmsgcGFyc2VTdHJpbmdUb1VSTE9iamVjdH1cbiAqIEBwYXJhbSBraW5kIC0gVGhlIHR5cGUgb2YgSFRUUCBvcGVyYXRpb24gKHNlcnZlciBvciBjbGllbnQpXG4gKiBAcGFyYW0gc3Bhbk9yaWdpbiAtIFRoZSBvcmlnaW4gb2YgdGhlIHNwYW5cbiAqIEBwYXJhbSByZXF1ZXN0IC0gVGhlIHJlcXVlc3Qgb2JqZWN0LCBzZWUge0BsaW5rIFBhcnRpYWxSZXF1ZXN0fVxuICogQHBhcmFtIHJvdXRlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSByb3V0ZSwgbXVzdCBiZSBsb3cgY2FyZGluYWxpdHlcbiAqIEByZXR1cm5zIFRoZSBzcGFuIG5hbWUgYW5kIGF0dHJpYnV0ZXMgZm9yIHRoZSBIVFRQIG9wZXJhdGlvblxuICovXG5mdW5jdGlvbiBnZXRIdHRwU3BhbkRldGFpbHNGcm9tVXJsT2JqZWN0KHVybE9iamVjdCwga2luZCwgc3Bhbk9yaWdpbiwgcmVxdWVzdCwgcm91dGVOYW1lKSB7XG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOXTogc3Bhbk9yaWdpbixcbiAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0VdOiAndXJsJ1xuICB9O1xuICBpZiAocm91dGVOYW1lKSB7XG4gICAgLy8gVGhpcyBpcyBiYXNlZCBvbiBodHRwczovL29wZW50ZWxlbWV0cnkuaW8vZG9jcy9zcGVjcy9zZW1jb252L2h0dHAvaHR0cC1zcGFucy8jbmFtZVxuICAgIGF0dHJpYnV0ZXNba2luZCA9PT0gJ3NlcnZlcicgPyAnaHR0cC5yb3V0ZScgOiAndXJsLnRlbXBsYXRlJ10gPSByb3V0ZU5hbWU7XG4gICAgYXR0cmlidXRlc1tTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRV0gPSAncm91dGUnO1xuICB9XG4gIGlmIChyZXF1ZXN0Py5tZXRob2QpIHtcbiAgICBhdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9IVFRQX1JFUVVFU1RfTUVUSE9EXSA9IHJlcXVlc3QubWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gIH1cbiAgaWYgKHVybE9iamVjdCkge1xuICAgIGlmICh1cmxPYmplY3Quc2VhcmNoKSB7XG4gICAgICBhdHRyaWJ1dGVzWyd1cmwucXVlcnknXSA9IHVybE9iamVjdC5zZWFyY2g7XG4gICAgfVxuICAgIGlmICh1cmxPYmplY3QuaGFzaCkge1xuICAgICAgYXR0cmlidXRlc1sndXJsLmZyYWdtZW50J10gPSB1cmxPYmplY3QuaGFzaDtcbiAgICB9XG4gICAgaWYgKHVybE9iamVjdC5wYXRobmFtZSkge1xuICAgICAgYXR0cmlidXRlc1sndXJsLnBhdGgnXSA9IHVybE9iamVjdC5wYXRobmFtZTtcbiAgICAgIGlmICh1cmxPYmplY3QucGF0aG5hbWUgPT09ICcvJykge1xuICAgICAgICBhdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFXSA9ICdyb3V0ZSc7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXNVUkxPYmplY3RSZWxhdGl2ZSh1cmxPYmplY3QpKSB7XG4gICAgICBhdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9VUkxfRlVMTF0gPSB1cmxPYmplY3QuaHJlZjtcbiAgICAgIGlmICh1cmxPYmplY3QucG9ydCkge1xuICAgICAgICBhdHRyaWJ1dGVzWyd1cmwucG9ydCddID0gdXJsT2JqZWN0LnBvcnQ7XG4gICAgICB9XG4gICAgICBpZiAodXJsT2JqZWN0LnByb3RvY29sKSB7XG4gICAgICAgIGF0dHJpYnV0ZXNbJ3VybC5zY2hlbWUnXSA9IHVybE9iamVjdC5wcm90b2NvbDtcbiAgICAgIH1cbiAgICAgIGlmICh1cmxPYmplY3QuaG9zdG5hbWUpIHtcbiAgICAgICAgYXR0cmlidXRlc1traW5kID09PSAnc2VydmVyJyA/ICdzZXJ2ZXIuYWRkcmVzcycgOiAndXJsLmRvbWFpbiddID0gdXJsT2JqZWN0Lmhvc3RuYW1lO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gW2dldEh0dHBTcGFuTmFtZUZyb21VcmxPYmplY3QodXJsT2JqZWN0LCBraW5kLCByZXF1ZXN0LCByb3V0ZU5hbWUpLCBhdHRyaWJ1dGVzXTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgc3RyaW5nIGZvcm0gb2YgVVJMIGludG8gYW4gb2JqZWN0XG4gKiAvLyBib3Jyb3dlZCBmcm9tIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I2FwcGVuZGl4LUJcbiAqIC8vIGludGVudGlvbmFsbHkgdXNpbmcgcmVnZXggYW5kIG5vdCA8YS8+IGhyZWYgcGFyc2luZyB0cmljayBiZWNhdXNlIFJlYWN0IE5hdGl2ZSBhbmQgb3RoZXJcbiAqIC8vIGVudmlyb25tZW50cyB3aGVyZSBET00gbWlnaHQgbm90IGJlIGF2YWlsYWJsZVxuICogQHJldHVybnMgcGFyc2VkIFVSTCBvYmplY3RcbiAqL1xuZnVuY3Rpb24gcGFyc2VVcmwodXJsKSB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGNvbnN0IG1hdGNoID0gdXJsLm1hdGNoKC9eKChbXjovPyNdKyk6KT8oXFwvXFwvKFteLz8jXSopKT8oW14/I10qKShcXD8oW14jXSopKT8oIyguKikpPyQvKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIC8vIGNvZXJjZSB0byB1bmRlZmluZWQgdmFsdWVzIHRvIGVtcHR5IHN0cmluZyBzbyB3ZSBkb24ndCBnZXQgJ3VuZGVmaW5lZCdcbiAgY29uc3QgcXVlcnkgPSBtYXRjaFs2XSB8fCAnJztcbiAgY29uc3QgZnJhZ21lbnQgPSBtYXRjaFs4XSB8fCAnJztcbiAgcmV0dXJuIHtcbiAgICBob3N0OiBtYXRjaFs0XSxcbiAgICBwYXRoOiBtYXRjaFs1XSxcbiAgICBwcm90b2NvbDogbWF0Y2hbMl0sXG4gICAgc2VhcmNoOiBxdWVyeSxcbiAgICBoYXNoOiBmcmFnbWVudCxcbiAgICByZWxhdGl2ZTogbWF0Y2hbNV0gKyBxdWVyeSArIGZyYWdtZW50IC8vIGV2ZXJ5dGhpbmcgbWludXMgb3JpZ2luXG4gIH07XG59XG5cbi8qKlxuICogU3RyaXAgdGhlIHF1ZXJ5IHN0cmluZyBhbmQgZnJhZ21lbnQgb2ZmIG9mIGEgZ2l2ZW4gVVJMIG9yIHBhdGggKGlmIHByZXNlbnQpXG4gKlxuICogQHBhcmFtIHVybFBhdGggRnVsbCBVUkwgb3IgcGF0aCwgaW5jbHVkaW5nIHBvc3NpYmxlIHF1ZXJ5IHN0cmluZyBhbmQvb3IgZnJhZ21lbnRcbiAqIEByZXR1cm5zIFVSTCBvciBwYXRoIHdpdGhvdXQgcXVlcnkgc3RyaW5nIG9yIGZyYWdtZW50XG4gKi9cbmZ1bmN0aW9uIHN0cmlwVXJsUXVlcnlBbmRGcmFnbWVudCh1cmxQYXRoKSB7XG4gIHJldHVybiB1cmxQYXRoLnNwbGl0KC9bPyNdLywgMSlbMF07XG59XG5cbi8qKlxuICogVGFrZXMgYSBVUkwgb2JqZWN0IGFuZCByZXR1cm5zIGEgc2FuaXRpemVkIHN0cmluZyB3aGljaCBpcyBzYWZlIHRvIHVzZSBhcyBzcGFuIG5hbWVcbiAqIHNlZTogaHR0cHM6Ly9kZXZlbG9wLnNlbnRyeS5kZXYvc2RrL2RhdGEtaGFuZGxpbmcvI3N0cnVjdHVyaW5nLWRhdGFcbiAqL1xuZnVuY3Rpb24gZ2V0U2FuaXRpemVkVXJsU3RyaW5nKHVybCkge1xuICBjb25zdCB7XG4gICAgcHJvdG9jb2wsXG4gICAgaG9zdCxcbiAgICBwYXRoXG4gIH0gPSB1cmw7XG4gIGNvbnN0IGZpbHRlcmVkSG9zdCA9IGhvc3RcbiAgLy8gQWx3YXlzIGZpbHRlciBvdXQgYXV0aG9yaXR5XG4gID8ucmVwbGFjZSgvXi4qQC8sICdbZmlsdGVyZWRdOltmaWx0ZXJlZF1AJylcbiAgLy8gRG9uJ3Qgc2hvdyBzdGFuZGFyZCA6ODAgKGh0dHApIGFuZCA6NDQzIChodHRwcykgcG9ydHMgdG8gcmVkdWNlIHRoZSBub2lzZVxuICAvLyBUT0RPOiBVc2UgbmV3IFVSTCBnbG9iYWwgaWYgaXQgZXhpc3RzXG4gIC5yZXBsYWNlKC8oOjgwKSQvLCAnJykucmVwbGFjZSgvKDo0NDMpJC8sICcnKSB8fCAnJztcbiAgcmV0dXJuIGAke3Byb3RvY29sID8gYCR7cHJvdG9jb2x9Oi8vYCA6ICcnfSR7ZmlsdGVyZWRIb3N0fSR7cGF0aH1gO1xufVxuZXhwb3J0IHsgZ2V0SHR0cFNwYW5EZXRhaWxzRnJvbVVybE9iamVjdCwgZ2V0U2FuaXRpemVkVXJsU3RyaW5nLCBnZXRTYW5pdGl6ZWRVcmxTdHJpbmdGcm9tVXJsT2JqZWN0LCBpc1VSTE9iamVjdFJlbGF0aXZlLCBwYXJzZVN0cmluZ1RvVVJMT2JqZWN0LCBwYXJzZVVybCwgc3RyaXBVcmxRdWVyeUFuZEZyYWdtZW50IH07XG4iLCJpbXBvcnQgeyBnZXRDbGllbnQgfSBmcm9tICcuL2N1cnJlbnRTY29wZXMuanMnO1xuaW1wb3J0IHsgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU4gfSBmcm9tICcuL3NlbWFudGljQXR0cmlidXRlcy5qcyc7XG5pbXBvcnQgJy4vdHJhY2luZy9lcnJvcnMuanMnO1xuaW1wb3J0ICcuL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IGlzUmVxdWVzdCwgaXNJbnN0YW5jZU9mIH0gZnJvbSAnLi91dGlscy9pcy5qcyc7XG5pbXBvcnQgeyBoYXNTcGFuc0VuYWJsZWQgfSBmcm9tICcuL3V0aWxzL2hhc1NwYW5zRW5hYmxlZC5qcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmVTcGFuIH0gZnJvbSAnLi91dGlscy9zcGFuVXRpbHMuanMnO1xuaW1wb3J0IHsgU0VOVFJZX0JBR0dBR0VfS0VZX1BSRUZJWCB9IGZyb20gJy4vdXRpbHMvYmFnZ2FnZS5qcyc7XG5pbXBvcnQgeyBTZW50cnlOb25SZWNvcmRpbmdTcGFuIH0gZnJvbSAnLi90cmFjaW5nL3NlbnRyeU5vblJlY29yZGluZ1NwYW4uanMnO1xuaW1wb3J0IHsgc2V0SHR0cFN0YXR1cywgU1BBTl9TVEFUVVNfRVJST1IgfSBmcm9tICcuL3RyYWNpbmcvc3BhbnN0YXR1cy5qcyc7XG5pbXBvcnQgeyBzdGFydEluYWN0aXZlU3BhbiB9IGZyb20gJy4vdHJhY2luZy90cmFjZS5qcyc7XG5pbXBvcnQgeyBnZXRUcmFjZURhdGEgfSBmcm9tICcuL3V0aWxzL3RyYWNlRGF0YS5qcyc7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ1RvVVJMT2JqZWN0LCBnZXRTYW5pdGl6ZWRVcmxTdHJpbmdGcm9tVXJsT2JqZWN0LCBpc1VSTE9iamVjdFJlbGF0aXZlIH0gZnJvbSAnLi91dGlscy91cmwuanMnO1xuXG4vKipcbiAqIENyZWF0ZSBhbmQgdHJhY2sgZmV0Y2ggcmVxdWVzdCBzcGFucyBmb3IgdXNhZ2UgaW4gY29tYmluYXRpb24gd2l0aCBgYWRkRmV0Y2hJbnN0cnVtZW50YXRpb25IYW5kbGVyYC5cbiAqXG4gKiBAcmV0dXJucyBTcGFuIGlmIGEgc3BhbiB3YXMgY3JlYXRlZCwgb3RoZXJ3aXNlIHZvaWQuXG4gKi9cbmZ1bmN0aW9uIGluc3RydW1lbnRGZXRjaFJlcXVlc3QoaGFuZGxlckRhdGEsIHNob3VsZENyZWF0ZVNwYW4sIHNob3VsZEF0dGFjaEhlYWRlcnMsIHNwYW5zLCBzcGFuT3JpZ2luID0gJ2F1dG8uaHR0cC5icm93c2VyJykge1xuICBpZiAoIWhhbmRsZXJEYXRhLmZldGNoRGF0YSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgY29uc3Qge1xuICAgIG1ldGhvZCxcbiAgICB1cmxcbiAgfSA9IGhhbmRsZXJEYXRhLmZldGNoRGF0YTtcbiAgY29uc3Qgc2hvdWxkQ3JlYXRlU3BhblJlc3VsdCA9IGhhc1NwYW5zRW5hYmxlZCgpICYmIHNob3VsZENyZWF0ZVNwYW4odXJsKTtcbiAgaWYgKGhhbmRsZXJEYXRhLmVuZFRpbWVzdGFtcCAmJiBzaG91bGRDcmVhdGVTcGFuUmVzdWx0KSB7XG4gICAgY29uc3Qgc3BhbklkID0gaGFuZGxlckRhdGEuZmV0Y2hEYXRhLl9fc3BhbjtcbiAgICBpZiAoIXNwYW5JZCkgcmV0dXJuO1xuICAgIGNvbnN0IHNwYW4gPSBzcGFuc1tzcGFuSWRdO1xuICAgIGlmIChzcGFuKSB7XG4gICAgICBlbmRTcGFuKHNwYW4sIGhhbmRsZXJEYXRhKTtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1keW5hbWljLWRlbGV0ZVxuICAgICAgZGVsZXRlIHNwYW5zW3NwYW5JZF07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgY29uc3QgaGFzUGFyZW50ID0gISFnZXRBY3RpdmVTcGFuKCk7XG4gIGNvbnN0IHNwYW4gPSBzaG91bGRDcmVhdGVTcGFuUmVzdWx0ICYmIGhhc1BhcmVudCA/IHN0YXJ0SW5hY3RpdmVTcGFuKGdldFNwYW5TdGFydE9wdGlvbnModXJsLCBtZXRob2QsIHNwYW5PcmlnaW4pKSA6IG5ldyBTZW50cnlOb25SZWNvcmRpbmdTcGFuKCk7XG4gIGhhbmRsZXJEYXRhLmZldGNoRGF0YS5fX3NwYW4gPSBzcGFuLnNwYW5Db250ZXh0KCkuc3BhbklkO1xuICBzcGFuc1tzcGFuLnNwYW5Db250ZXh0KCkuc3BhbklkXSA9IHNwYW47XG4gIGlmIChzaG91bGRBdHRhY2hIZWFkZXJzKGhhbmRsZXJEYXRhLmZldGNoRGF0YS51cmwpKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGhhbmRsZXJEYXRhLmFyZ3NbMF07XG4gICAgY29uc3Qgb3B0aW9ucyA9IGhhbmRsZXJEYXRhLmFyZ3NbMV0gfHwge307XG4gICAgY29uc3QgaGVhZGVycyA9IF9hZGRUcmFjaW5nSGVhZGVyc1RvRmV0Y2hSZXF1ZXN0KHJlcXVlc3QsIG9wdGlvbnMsXG4gICAgLy8gSWYgcGVyZm9ybWFuY2UgaXMgZGlzYWJsZWQgKFRXUCkgb3IgdGhlcmUncyBubyBhY3RpdmUgcm9vdCBzcGFuIChwYWdlbG9hZC9uYXZpZ2F0aW9uL2ludGVyYWN0aW9uKSxcbiAgICAvLyB3ZSBkbyBub3Qgd2FudCB0byB1c2UgdGhlIHNwYW4gYXMgYmFzZSBmb3IgdGhlIHRyYWNlIGhlYWRlcnMsXG4gICAgLy8gd2hpY2ggbWVhbnMgdGhhdCB0aGUgaGVhZGVycyB3aWxsIGJlIGdlbmVyYXRlZCBmcm9tIHRoZSBzY29wZSBhbmQgdGhlIHNhbXBsaW5nIGRlY2lzaW9uIGlzIGRlZmVycmVkXG4gICAgaGFzU3BhbnNFbmFibGVkKCkgJiYgaGFzUGFyZW50ID8gc3BhbiA6IHVuZGVmaW5lZCk7XG4gICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgIC8vIEVuc3VyZSB0aGlzIGlzIGFjdHVhbGx5IHNldCwgaWYgbm8gb3B0aW9ucyBoYXZlIGJlZW4gcGFzc2VkIHByZXZpb3VzbHlcbiAgICAgIGhhbmRsZXJEYXRhLmFyZ3NbMV0gPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucy5oZWFkZXJzID0gaGVhZGVycztcbiAgICB9XG4gIH1cbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gIGlmIChjbGllbnQpIHtcbiAgICBjb25zdCBmZXRjaEhpbnQgPSB7XG4gICAgICBpbnB1dDogaGFuZGxlckRhdGEuYXJncyxcbiAgICAgIHJlc3BvbnNlOiBoYW5kbGVyRGF0YS5yZXNwb25zZSxcbiAgICAgIHN0YXJ0VGltZXN0YW1wOiBoYW5kbGVyRGF0YS5zdGFydFRpbWVzdGFtcCxcbiAgICAgIGVuZFRpbWVzdGFtcDogaGFuZGxlckRhdGEuZW5kVGltZXN0YW1wXG4gICAgfTtcbiAgICBjbGllbnQuZW1pdCgnYmVmb3JlT3V0Z29pbmdSZXF1ZXN0U3BhbicsIHNwYW4sIGZldGNoSGludCk7XG4gIH1cbiAgcmV0dXJuIHNwYW47XG59XG5cbi8qKlxuICogQWRkcyBzZW50cnktdHJhY2UgYW5kIGJhZ2dhZ2UgaGVhZGVycyB0byB0aGUgdmFyaW91cyBmb3JtcyBvZiBmZXRjaCBoZWFkZXJzLlxuICogZXhwb3J0ZWQgb25seSBmb3IgdGVzdGluZyBwdXJwb3Nlc1xuICpcbiAqIFdoZW4gd2UgZGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBhZGQgYSBiYWdnYWdlIGhlYWRlciwgdGhlcmUgYXJlIDMgY2FzZXM6XG4gKiAxLiBObyBwcmV2aW91cyBiYWdnYWdlIGhlYWRlciAtPiBhZGQgYmFnZ2FnZVxuICogMi4gUHJldmlvdXMgYmFnZ2FnZSBoZWFkZXIgaGFzIG5vIHNlbnRyeSBiYWdnYWdlIHZhbHVlcyAtPiBhZGQgb3VyIGJhZ2dhZ2VcbiAqIDMuIFByZXZpb3VzIGJhZ2dhZ2UgaGVhZGVyIGhhcyBzZW50cnkgYmFnZ2FnZSB2YWx1ZXMgLT4gZG8gbm90aGluZyAobWlnaHQgaGF2ZSBiZWVuIGFkZGVkIG1hbnVhbGx5IGJ5IHVzZXJzKVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eSAtLSB5dXAgaXQncyB0aGlzIGNvbXBsaWNhdGVkIDooXG5mdW5jdGlvbiBfYWRkVHJhY2luZ0hlYWRlcnNUb0ZldGNoUmVxdWVzdChyZXF1ZXN0LCBmZXRjaE9wdGlvbnNPYmosIHNwYW4pIHtcbiAgY29uc3QgdHJhY2VIZWFkZXJzID0gZ2V0VHJhY2VEYXRhKHtcbiAgICBzcGFuXG4gIH0pO1xuICBjb25zdCBzZW50cnlUcmFjZSA9IHRyYWNlSGVhZGVyc1snc2VudHJ5LXRyYWNlJ107XG4gIGNvbnN0IGJhZ2dhZ2UgPSB0cmFjZUhlYWRlcnMuYmFnZ2FnZTtcblxuICAvLyBOb3RoaW5nIHRvIGRvLCB3aGVuIHdlIHJldHVybiB1bmRlZmluZWQgaGVyZSwgdGhlIG9yaWdpbmFsIGhlYWRlcnMgd2lsbCBiZSB1c2VkXG4gIGlmICghc2VudHJ5VHJhY2UpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGNvbnN0IG9yaWdpbmFsSGVhZGVycyA9IGZldGNoT3B0aW9uc09iai5oZWFkZXJzIHx8IChpc1JlcXVlc3QocmVxdWVzdCkgPyByZXF1ZXN0LmhlYWRlcnMgOiB1bmRlZmluZWQpO1xuICBpZiAoIW9yaWdpbmFsSGVhZGVycykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50cmFjZUhlYWRlcnNcbiAgICB9O1xuICB9IGVsc2UgaWYgKGlzSGVhZGVycyhvcmlnaW5hbEhlYWRlcnMpKSB7XG4gICAgY29uc3QgbmV3SGVhZGVycyA9IG5ldyBIZWFkZXJzKG9yaWdpbmFsSGVhZGVycyk7XG5cbiAgICAvLyBXZSBkb24ndCB3YW50IHRvIG92ZXJyaWRlIG1hbnVhbGx5IGFkZGVkIHNlbnRyeSBoZWFkZXJzXG4gICAgaWYgKCFuZXdIZWFkZXJzLmdldCgnc2VudHJ5LXRyYWNlJykpIHtcbiAgICAgIG5ld0hlYWRlcnMuc2V0KCdzZW50cnktdHJhY2UnLCBzZW50cnlUcmFjZSk7XG4gICAgfVxuICAgIGlmIChiYWdnYWdlKSB7XG4gICAgICBjb25zdCBwcmV2QmFnZ2FnZUhlYWRlciA9IG5ld0hlYWRlcnMuZ2V0KCdiYWdnYWdlJyk7XG4gICAgICBpZiAoIXByZXZCYWdnYWdlSGVhZGVyKSB7XG4gICAgICAgIG5ld0hlYWRlcnMuc2V0KCdiYWdnYWdlJywgYmFnZ2FnZSk7XG4gICAgICB9IGVsc2UgaWYgKCFiYWdnYWdlSGVhZGVySGFzU2VudHJ5QmFnZ2FnZVZhbHVlcyhwcmV2QmFnZ2FnZUhlYWRlcikpIHtcbiAgICAgICAgbmV3SGVhZGVycy5zZXQoJ2JhZ2dhZ2UnLCBgJHtwcmV2QmFnZ2FnZUhlYWRlcn0sJHtiYWdnYWdlfWApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3SGVhZGVycztcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9yaWdpbmFsSGVhZGVycykpIHtcbiAgICBjb25zdCBuZXdIZWFkZXJzID0gWy4uLm9yaWdpbmFsSGVhZGVyc107XG4gICAgaWYgKCFvcmlnaW5hbEhlYWRlcnMuZmluZChoZWFkZXIgPT4gaGVhZGVyWzBdID09PSAnc2VudHJ5LXRyYWNlJykpIHtcbiAgICAgIG5ld0hlYWRlcnMucHVzaChbJ3NlbnRyeS10cmFjZScsIHNlbnRyeVRyYWNlXSk7XG4gICAgfVxuICAgIGNvbnN0IHByZXZCYWdnYWdlSGVhZGVyV2l0aFNlbnRyeVZhbHVlcyA9IG9yaWdpbmFsSGVhZGVycy5maW5kKGhlYWRlciA9PiBoZWFkZXJbMF0gPT09ICdiYWdnYWdlJyAmJiBiYWdnYWdlSGVhZGVySGFzU2VudHJ5QmFnZ2FnZVZhbHVlcyhoZWFkZXJbMV0pKTtcbiAgICBpZiAoYmFnZ2FnZSAmJiAhcHJldkJhZ2dhZ2VIZWFkZXJXaXRoU2VudHJ5VmFsdWVzKSB7XG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgZW50cmllcyB3aXRoIHRoZSBzYW1lIGtleSwgdGhlIGJyb3dzZXIgd2lsbCBtZXJnZSB0aGUgdmFsdWVzIGludG8gYSBzaW5nbGUgcmVxdWVzdCBoZWFkZXIuXG4gICAgICAvLyBJdHMgdGhlcmVmb3JlIHNhZmUgdG8gc2ltcGx5IHB1c2ggYSBcImJhZ2dhZ2VcIiBlbnRyeSwgZXZlbiB0aG91Z2ggdGhlcmUgbWlnaHQgYWxyZWFkeSBiZSBhbm90aGVyIGJhZ2dhZ2UgaGVhZGVyLlxuICAgICAgbmV3SGVhZGVycy5wdXNoKFsnYmFnZ2FnZScsIGJhZ2dhZ2VdKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0hlYWRlcnM7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZXhpc3RpbmdTZW50cnlUcmFjZUhlYWRlciA9ICdzZW50cnktdHJhY2UnIGluIG9yaWdpbmFsSGVhZGVycyA/IG9yaWdpbmFsSGVhZGVyc1snc2VudHJ5LXRyYWNlJ10gOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZXhpc3RpbmdCYWdnYWdlSGVhZGVyID0gJ2JhZ2dhZ2UnIGluIG9yaWdpbmFsSGVhZGVycyA/IG9yaWdpbmFsSGVhZGVycy5iYWdnYWdlIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG5ld0JhZ2dhZ2VIZWFkZXJzID0gZXhpc3RpbmdCYWdnYWdlSGVhZGVyID8gQXJyYXkuaXNBcnJheShleGlzdGluZ0JhZ2dhZ2VIZWFkZXIpID8gWy4uLmV4aXN0aW5nQmFnZ2FnZUhlYWRlcl0gOiBbZXhpc3RpbmdCYWdnYWdlSGVhZGVyXSA6IFtdO1xuICAgIGNvbnN0IHByZXZCYWdnYWdlSGVhZGVyV2l0aFNlbnRyeVZhbHVlcyA9IGV4aXN0aW5nQmFnZ2FnZUhlYWRlciAmJiAoQXJyYXkuaXNBcnJheShleGlzdGluZ0JhZ2dhZ2VIZWFkZXIpID8gZXhpc3RpbmdCYWdnYWdlSGVhZGVyLmZpbmQoaGVhZGVySXRlbSA9PiBiYWdnYWdlSGVhZGVySGFzU2VudHJ5QmFnZ2FnZVZhbHVlcyhoZWFkZXJJdGVtKSkgOiBiYWdnYWdlSGVhZGVySGFzU2VudHJ5QmFnZ2FnZVZhbHVlcyhleGlzdGluZ0JhZ2dhZ2VIZWFkZXIpKTtcbiAgICBpZiAoYmFnZ2FnZSAmJiAhcHJldkJhZ2dhZ2VIZWFkZXJXaXRoU2VudHJ5VmFsdWVzKSB7XG4gICAgICBuZXdCYWdnYWdlSGVhZGVycy5wdXNoKGJhZ2dhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4ub3JpZ2luYWxIZWFkZXJzLFxuICAgICAgJ3NlbnRyeS10cmFjZSc6IGV4aXN0aW5nU2VudHJ5VHJhY2VIZWFkZXIgPz8gc2VudHJ5VHJhY2UsXG4gICAgICBiYWdnYWdlOiBuZXdCYWdnYWdlSGVhZGVycy5sZW5ndGggPiAwID8gbmV3QmFnZ2FnZUhlYWRlcnMuam9pbignLCcpIDogdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gZW5kU3BhbihzcGFuLCBoYW5kbGVyRGF0YSkge1xuICBpZiAoaGFuZGxlckRhdGEucmVzcG9uc2UpIHtcbiAgICBzZXRIdHRwU3RhdHVzKHNwYW4sIGhhbmRsZXJEYXRhLnJlc3BvbnNlLnN0YXR1cyk7XG4gICAgY29uc3QgY29udGVudExlbmd0aCA9IGhhbmRsZXJEYXRhLnJlc3BvbnNlPy5oZWFkZXJzICYmIGhhbmRsZXJEYXRhLnJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LWxlbmd0aCcpO1xuICAgIGlmIChjb250ZW50TGVuZ3RoKSB7XG4gICAgICBjb25zdCBjb250ZW50TGVuZ3RoTnVtID0gcGFyc2VJbnQoY29udGVudExlbmd0aCk7XG4gICAgICBpZiAoY29udGVudExlbmd0aE51bSA+IDApIHtcbiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoJ2h0dHAucmVzcG9uc2VfY29udGVudF9sZW5ndGgnLCBjb250ZW50TGVuZ3RoTnVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaGFuZGxlckRhdGEuZXJyb3IpIHtcbiAgICBzcGFuLnNldFN0YXR1cyh7XG4gICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgIG1lc3NhZ2U6ICdpbnRlcm5hbF9lcnJvcidcbiAgICB9KTtcbiAgfVxuICBzcGFuLmVuZCgpO1xufVxuZnVuY3Rpb24gYmFnZ2FnZUhlYWRlckhhc1NlbnRyeUJhZ2dhZ2VWYWx1ZXMoYmFnZ2FnZUhlYWRlcikge1xuICByZXR1cm4gYmFnZ2FnZUhlYWRlci5zcGxpdCgnLCcpLnNvbWUoYmFnZ2FnZUVudHJ5ID0+IGJhZ2dhZ2VFbnRyeS50cmltKCkuc3RhcnRzV2l0aChTRU5UUllfQkFHR0FHRV9LRVlfUFJFRklYKSk7XG59XG5mdW5jdGlvbiBpc0hlYWRlcnMoaGVhZGVycykge1xuICByZXR1cm4gdHlwZW9mIEhlYWRlcnMgIT09ICd1bmRlZmluZWQnICYmIGlzSW5zdGFuY2VPZihoZWFkZXJzLCBIZWFkZXJzKTtcbn1cbmZ1bmN0aW9uIGdldFNwYW5TdGFydE9wdGlvbnModXJsLCBtZXRob2QsIHNwYW5PcmlnaW4pIHtcbiAgY29uc3QgcGFyc2VkVXJsID0gcGFyc2VTdHJpbmdUb1VSTE9iamVjdCh1cmwpO1xuICByZXR1cm4ge1xuICAgIG5hbWU6IHBhcnNlZFVybCA/IGAke21ldGhvZH0gJHtnZXRTYW5pdGl6ZWRVcmxTdHJpbmdGcm9tVXJsT2JqZWN0KHBhcnNlZFVybCl9YCA6IG1ldGhvZCxcbiAgICBhdHRyaWJ1dGVzOiBnZXRGZXRjaFNwYW5BdHRyaWJ1dGVzKHVybCwgcGFyc2VkVXJsLCBtZXRob2QsIHNwYW5PcmlnaW4pXG4gIH07XG59XG5mdW5jdGlvbiBnZXRGZXRjaFNwYW5BdHRyaWJ1dGVzKHVybCwgcGFyc2VkVXJsLCBtZXRob2QsIHNwYW5PcmlnaW4pIHtcbiAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICB1cmwsXG4gICAgdHlwZTogJ2ZldGNoJyxcbiAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOXTogc3Bhbk9yaWdpbixcbiAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUF06ICdodHRwLmNsaWVudCdcbiAgfTtcbiAgaWYgKHBhcnNlZFVybCkge1xuICAgIGlmICghaXNVUkxPYmplY3RSZWxhdGl2ZShwYXJzZWRVcmwpKSB7XG4gICAgICBhdHRyaWJ1dGVzWydodHRwLnVybCddID0gcGFyc2VkVXJsLmhyZWY7XG4gICAgICBhdHRyaWJ1dGVzWydzZXJ2ZXIuYWRkcmVzcyddID0gcGFyc2VkVXJsLmhvc3Q7XG4gICAgfVxuICAgIGlmIChwYXJzZWRVcmwuc2VhcmNoKSB7XG4gICAgICBhdHRyaWJ1dGVzWydodHRwLnF1ZXJ5J10gPSBwYXJzZWRVcmwuc2VhcmNoO1xuICAgIH1cbiAgICBpZiAocGFyc2VkVXJsLmhhc2gpIHtcbiAgICAgIGF0dHJpYnV0ZXNbJ2h0dHAuZnJhZ21lbnQnXSA9IHBhcnNlZFVybC5oYXNoO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXR0cmlidXRlcztcbn1cbmV4cG9ydCB7IF9hZGRUcmFjaW5nSGVhZGVyc1RvRmV0Y2hSZXF1ZXN0LCBpbnN0cnVtZW50RmV0Y2hSZXF1ZXN0IH07XG4iLCJpbXBvcnQgeyBnZXRDdXJyZW50U2NvcGUsIGdldENsaWVudCB9IGZyb20gJy4vY3VycmVudFNjb3Blcy5qcyc7XG5cbi8qKlxuICogU2VuZCB1c2VyIGZlZWRiYWNrIHRvIFNlbnRyeS5cbiAqL1xuZnVuY3Rpb24gY2FwdHVyZUZlZWRiYWNrKHBhcmFtcywgaGludCA9IHt9LCBzY29wZSA9IGdldEN1cnJlbnRTY29wZSgpKSB7XG4gIGNvbnN0IHtcbiAgICBtZXNzYWdlLFxuICAgIG5hbWUsXG4gICAgZW1haWwsXG4gICAgdXJsLFxuICAgIHNvdXJjZSxcbiAgICBhc3NvY2lhdGVkRXZlbnRJZCxcbiAgICB0YWdzXG4gIH0gPSBwYXJhbXM7XG4gIGNvbnN0IGZlZWRiYWNrRXZlbnQgPSB7XG4gICAgY29udGV4dHM6IHtcbiAgICAgIGZlZWRiYWNrOiB7XG4gICAgICAgIGNvbnRhY3RfZW1haWw6IGVtYWlsLFxuICAgICAgICBuYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB1cmwsXG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgYXNzb2NpYXRlZF9ldmVudF9pZDogYXNzb2NpYXRlZEV2ZW50SWRcbiAgICAgIH1cbiAgICB9LFxuICAgIHR5cGU6ICdmZWVkYmFjaycsXG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICB0YWdzXG4gIH07XG4gIGNvbnN0IGNsaWVudCA9IHNjb3BlPy5nZXRDbGllbnQoKSB8fCBnZXRDbGllbnQoKTtcbiAgaWYgKGNsaWVudCkge1xuICAgIGNsaWVudC5lbWl0KCdiZWZvcmVTZW5kRmVlZGJhY2snLCBmZWVkYmFja0V2ZW50LCBoaW50KTtcbiAgfVxuICBjb25zdCBldmVudElkID0gc2NvcGUuY2FwdHVyZUV2ZW50KGZlZWRiYWNrRXZlbnQsIGhpbnQpO1xuICByZXR1cm4gZXZlbnRJZDtcbn1cbmV4cG9ydCB7IGNhcHR1cmVGZWVkYmFjayB9O1xuIiwiLyoqXG4gKiBEZXRlcm1pbmUgYSBicmVhZGNydW1iJ3MgbG9nIGxldmVsIChvbmx5IGB3YXJuaW5nYCBvciBgZXJyb3JgKSBiYXNlZCBvbiBhbiBIVFRQIHN0YXR1cyBjb2RlLlxuICovXG5mdW5jdGlvbiBnZXRCcmVhZGNydW1iTG9nTGV2ZWxGcm9tSHR0cFN0YXR1c0NvZGUoc3RhdHVzQ29kZSkge1xuICAvLyBOT1RFOiB1bmRlZmluZWQgZGVmYXVsdHMgdG8gJ2luZm8nIGluIFNlbnRyeVxuICBpZiAoc3RhdHVzQ29kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIGlmIChzdGF0dXNDb2RlID49IDQwMCAmJiBzdGF0dXNDb2RlIDwgNTAwKSB7XG4gICAgcmV0dXJuICd3YXJuaW5nJztcbiAgfSBlbHNlIGlmIChzdGF0dXNDb2RlID49IDUwMCkge1xuICAgIHJldHVybiAnZXJyb3InO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cbmV4cG9ydCB7IGdldEJyZWFkY3J1bWJMb2dMZXZlbEZyb21IdHRwU3RhdHVzQ29kZSB9O1xuIiwiaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBkZWJ1ZyB9IGZyb20gJy4vbG9nZ2VyLmpzJztcbmltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICcuL3dvcmxkd2lkZS5qcyc7XG5jb25zdCBXSU5ET1cgPSBHTE9CQUxfT0JKO1xuXG4vKipcbiAqIFRlbGxzIHdoZXRoZXIgY3VycmVudCBlbnZpcm9ubWVudCBzdXBwb3J0cyBFcnJvckV2ZW50IG9iamVjdHNcbiAqIHtAbGluayBzdXBwb3J0c0Vycm9yRXZlbnR9LlxuICpcbiAqIEByZXR1cm5zIEFuc3dlciB0byB0aGUgZ2l2ZW4gcXVlc3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHN1cHBvcnRzRXJyb3JFdmVudCgpIHtcbiAgdHJ5IHtcbiAgICBuZXcgRXJyb3JFdmVudCgnJyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBUZWxscyB3aGV0aGVyIGN1cnJlbnQgZW52aXJvbm1lbnQgc3VwcG9ydHMgRE9NRXJyb3Igb2JqZWN0c1xuICoge0BsaW5rIHN1cHBvcnRzRE9NRXJyb3J9LlxuICpcbiAqIEByZXR1cm5zIEFuc3dlciB0byB0aGUgZ2l2ZW4gcXVlc3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHN1cHBvcnRzRE9NRXJyb3IoKSB7XG4gIHRyeSB7XG4gICAgLy8gQ2hyb21lOiBWTTg5OjEgVW5jYXVnaHQgVHlwZUVycm9yOiBGYWlsZWQgdG8gY29uc3RydWN0ICdET01FcnJvcic6XG4gICAgLy8gMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LlxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgSXQgcmVhbGx5IG5lZWRzIDEgYXJndW1lbnQsIG5vdCAwLlxuICAgIG5ldyBET01FcnJvcignJyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBUZWxscyB3aGV0aGVyIGN1cnJlbnQgZW52aXJvbm1lbnQgc3VwcG9ydHMgRE9NRXhjZXB0aW9uIG9iamVjdHNcbiAqIHtAbGluayBzdXBwb3J0c0RPTUV4Y2VwdGlvbn0uXG4gKlxuICogQHJldHVybnMgQW5zd2VyIHRvIHRoZSBnaXZlbiBxdWVzdGlvbi5cbiAqL1xuZnVuY3Rpb24gc3VwcG9ydHNET01FeGNlcHRpb24oKSB7XG4gIHRyeSB7XG4gICAgbmV3IERPTUV4Y2VwdGlvbignJyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBUZWxscyB3aGV0aGVyIGN1cnJlbnQgZW52aXJvbm1lbnQgc3VwcG9ydHMgSGlzdG9yeSBBUElcbiAqIHtAbGluayBzdXBwb3J0c0hpc3Rvcnl9LlxuICpcbiAqIEByZXR1cm5zIEFuc3dlciB0byB0aGUgZ2l2ZW4gcXVlc3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHN1cHBvcnRzSGlzdG9yeSgpIHtcbiAgcmV0dXJuICdoaXN0b3J5JyBpbiBXSU5ET1cgJiYgISFXSU5ET1cuaGlzdG9yeTtcbn1cblxuLyoqXG4gKiBUZWxscyB3aGV0aGVyIGN1cnJlbnQgZW52aXJvbm1lbnQgc3VwcG9ydHMgRmV0Y2ggQVBJXG4gKiB7QGxpbmsgc3VwcG9ydHNGZXRjaH0uXG4gKlxuICogQHJldHVybnMgQW5zd2VyIHRvIHRoZSBnaXZlbiBxdWVzdGlvbi5cbiAqIEBkZXByZWNhdGVkIFRoaXMgaXMgbm8gbG9uZ2VyIHVzZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciB2ZXJzaW9uLlxuICovXG5jb25zdCBzdXBwb3J0c0ZldGNoID0gX2lzRmV0Y2hTdXBwb3J0ZWQ7XG5mdW5jdGlvbiBfaXNGZXRjaFN1cHBvcnRlZCgpIHtcbiAgaWYgKCEoJ2ZldGNoJyBpbiBXSU5ET1cpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHRyeSB7XG4gICAgbmV3IEhlYWRlcnMoKTtcbiAgICBuZXcgUmVxdWVzdCgnaHR0cDovL3d3dy5leGFtcGxlLmNvbScpO1xuICAgIG5ldyBSZXNwb25zZSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogaXNOYXRpdmUgY2hlY2tzIGlmIHRoZSBnaXZlbiBmdW5jdGlvbiBpcyBhIG5hdGl2ZSBpbXBsZW1lbnRhdGlvblxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZnVuY3Rpb24gaXNOYXRpdmVGdW5jdGlvbihmdW5jKSB7XG4gIHJldHVybiBmdW5jICYmIC9eZnVuY3Rpb25cXHMrXFx3K1xcKFxcKVxccytcXHtcXHMrXFxbbmF0aXZlIGNvZGVcXF1cXHMrXFx9JC8udGVzdChmdW5jLnRvU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIFRlbGxzIHdoZXRoZXIgY3VycmVudCBlbnZpcm9ubWVudCBzdXBwb3J0cyBGZXRjaCBBUEkgbmF0aXZlbHlcbiAqIHtAbGluayBzdXBwb3J0c05hdGl2ZUZldGNofS5cbiAqXG4gKiBAcmV0dXJucyB0cnVlIGlmIGB3aW5kb3cuZmV0Y2hgIGlzIG5hdGl2ZWx5IGltcGxlbWVudGVkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZnVuY3Rpb24gc3VwcG9ydHNOYXRpdmVGZXRjaCgpIHtcbiAgaWYgKHR5cGVvZiBFZGdlUnVudGltZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoIV9pc0ZldGNoU3VwcG9ydGVkKCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBGYXN0IHBhdGggdG8gYXZvaWQgRE9NIEkvT1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gIGlmIChpc05hdGl2ZUZ1bmN0aW9uKFdJTkRPVy5mZXRjaCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIHdpbmRvdy5mZXRjaCBpcyBpbXBsZW1lbnRlZCwgYnV0IGlzIHBvbHlmaWxsZWQgb3IgYWxyZWFkeSB3cmFwcGVkIChlLmc6IGJ5IGEgY2hyb21lIGV4dGVuc2lvbilcbiAgLy8gc28gY3JlYXRlIGEgXCJwdXJlXCIgaWZyYW1lIHRvIHNlZSBpZiB0aGF0IGhhcyBuYXRpdmUgZmV0Y2hcbiAgbGV0IHJlc3VsdCA9IGZhbHNlO1xuICBjb25zdCBkb2MgPSBXSU5ET1cuZG9jdW1lbnQ7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvblxuICBpZiAoZG9jICYmIHR5cGVvZiBkb2MuY3JlYXRlRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzYW5kYm94ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgc2FuZGJveC5oaWRkZW4gPSB0cnVlO1xuICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQoc2FuZGJveCk7XG4gICAgICBpZiAoc2FuZGJveC5jb250ZW50V2luZG93Py5mZXRjaCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgICAgIHJlc3VsdCA9IGlzTmF0aXZlRnVuY3Rpb24oc2FuZGJveC5jb250ZW50V2luZG93LmZldGNoKTtcbiAgICAgIH1cbiAgICAgIGRvYy5oZWFkLnJlbW92ZUNoaWxkKHNhbmRib3gpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgREVCVUdfQlVJTEQgJiYgZGVidWcud2FybignQ291bGQgbm90IGNyZWF0ZSBzYW5kYm94IGlmcmFtZSBmb3IgcHVyZSBmZXRjaCBjaGVjaywgYmFpbGluZyB0byB3aW5kb3cuZmV0Y2g6ICcsIGVycik7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGVsbHMgd2hldGhlciBjdXJyZW50IGVudmlyb25tZW50IHN1cHBvcnRzIFJlcG9ydGluZ09ic2VydmVyIEFQSVxuICoge0BsaW5rIHN1cHBvcnRzUmVwb3J0aW5nT2JzZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEFuc3dlciB0byB0aGUgZ2l2ZW4gcXVlc3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHN1cHBvcnRzUmVwb3J0aW5nT2JzZXJ2ZXIoKSB7XG4gIHJldHVybiAnUmVwb3J0aW5nT2JzZXJ2ZXInIGluIFdJTkRPVztcbn1cblxuLyoqXG4gKiBUZWxscyB3aGV0aGVyIGN1cnJlbnQgZW52aXJvbm1lbnQgc3VwcG9ydHMgUmVmZXJyZXIgUG9saWN5IEFQSVxuICoge0BsaW5rIHN1cHBvcnRzUmVmZXJyZXJQb2xpY3l9LlxuICpcbiAqIEByZXR1cm5zIEFuc3dlciB0byB0aGUgZ2l2ZW4gcXVlc3Rpb24uXG4gKiBAZGVwcmVjYXRlZCBUaGlzIGlzIG5vIGxvbmdlciB1c2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgdmVyc2lvbi5cbiAqL1xuZnVuY3Rpb24gc3VwcG9ydHNSZWZlcnJlclBvbGljeSgpIHtcbiAgLy8gRGVzcGl0ZSBhbGwgc3RhcnMgaW4gdGhlIHNreSBzYXlpbmcgdGhhdCBFZGdlIHN1cHBvcnRzIG9sZCBkcmFmdCBzeW50YXgsIGFrYSAnbmV2ZXInLCAnYWx3YXlzJywgJ29yaWdpbicgYW5kICdkZWZhdWx0J1xuICAvLyAoc2VlIGh0dHBzOi8vY2FuaXVzZS5jb20vI2ZlYXQ9cmVmZXJyZXItcG9saWN5KSxcbiAgLy8gaXQgZG9lc24ndC4gQW5kIGl0IHRocm93cyBhbiBleGNlcHRpb24gaW5zdGVhZCBvZiBpZ25vcmluZyB0aGlzIHBhcmFtZXRlci4uLlxuICAvLyBSRUY6IGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvcmF2ZW4tanMvaXNzdWVzLzEyMzNcblxuICBpZiAoIV9pc0ZldGNoU3VwcG9ydGVkKCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdHJ5IHtcbiAgICBuZXcgUmVxdWVzdCgnXycsIHtcbiAgICAgIHJlZmVycmVyUG9saWN5OiAnb3JpZ2luJ1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5leHBvcnQgeyBpc05hdGl2ZUZ1bmN0aW9uLCBzdXBwb3J0c0RPTUVycm9yLCBzdXBwb3J0c0RPTUV4Y2VwdGlvbiwgc3VwcG9ydHNFcnJvckV2ZW50LCBzdXBwb3J0c0ZldGNoLCBzdXBwb3J0c0hpc3RvcnksIHN1cHBvcnRzTmF0aXZlRmV0Y2gsIHN1cHBvcnRzUmVmZXJyZXJQb2xpY3ksIHN1cHBvcnRzUmVwb3J0aW5nT2JzZXJ2ZXIgfTtcbiIsImltcG9ydCB7IGlzRXJyb3IsIGlzUmVxdWVzdCB9IGZyb20gJy4uL3V0aWxzL2lzLmpzJztcbmltcG9ydCB7IGZpbGwsIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSB9IGZyb20gJy4uL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQgeyBzdXBwb3J0c05hdGl2ZUZldGNoIH0gZnJvbSAnLi4vdXRpbHMvc3VwcG9ydHMuanMnO1xuaW1wb3J0IHsgdGltZXN0YW1wSW5TZWNvbmRzIH0gZnJvbSAnLi4vdXRpbHMvdGltZS5qcyc7XG5pbXBvcnQgeyBHTE9CQUxfT0JKIH0gZnJvbSAnLi4vdXRpbHMvd29ybGR3aWRlLmpzJztcbmltcG9ydCB7IGFkZEhhbmRsZXIsIG1heWJlSW5zdHJ1bWVudCwgdHJpZ2dlckhhbmRsZXJzIH0gZnJvbSAnLi9oYW5kbGVycy5qcyc7XG5cbi8qKlxuICogQWRkIGFuIGluc3RydW1lbnRhdGlvbiBoYW5kbGVyIGZvciB3aGVuIGEgZmV0Y2ggcmVxdWVzdCBoYXBwZW5zLlxuICogVGhlIGhhbmRsZXIgZnVuY3Rpb24gaXMgY2FsbGVkIG9uY2Ugd2hlbiB0aGUgcmVxdWVzdCBzdGFydHMgYW5kIG9uY2Ugd2hlbiBpdCBlbmRzLFxuICogd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnkgY2hlY2tpbmcgaWYgaXQgaGFzIGFuIGBlbmRUaW1lc3RhbXBgLlxuICpcbiAqIFVzZSBhdCB5b3VyIG93biByaXNrLCB0aGlzIG1pZ2h0IGJyZWFrIHdpdGhvdXQgY2hhbmdlbG9nIG5vdGljZSwgb25seSB1c2VkIGludGVybmFsbHkuXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGFkZEZldGNoSW5zdHJ1bWVudGF0aW9uSGFuZGxlcihoYW5kbGVyLCBza2lwTmF0aXZlRmV0Y2hDaGVjaykge1xuICBjb25zdCB0eXBlID0gJ2ZldGNoJztcbiAgYWRkSGFuZGxlcih0eXBlLCBoYW5kbGVyKTtcbiAgbWF5YmVJbnN0cnVtZW50KHR5cGUsICgpID0+IGluc3RydW1lbnRGZXRjaCh1bmRlZmluZWQsIHNraXBOYXRpdmVGZXRjaENoZWNrKSk7XG59XG5cbi8qKlxuICogQWRkIGFuIGluc3RydW1lbnRhdGlvbiBoYW5kbGVyIGZvciBsb25nLWxpdmVkIGZldGNoIHJlcXVlc3RzLCBsaWtlIGNvbnN1bWluZyBzZXJ2ZXItc2VudCBldmVudHMgKFNTRSkgdmlhIGZldGNoLlxuICogVGhlIGhhbmRsZXIgd2lsbCByZXNvbHZlIHRoZSByZXF1ZXN0IGJvZHkgYW5kIGVtaXQgdGhlIGFjdHVhbCBgZW5kVGltZXN0YW1wYCwgc28gdGhhdCB0aGVcbiAqIHNwYW4gY2FuIGJlIHVwZGF0ZWQgYWNjb3JkaW5nbHkuXG4gKlxuICogT25seSB1c2VkIGludGVybmFsbHlcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gYWRkRmV0Y2hFbmRJbnN0cnVtZW50YXRpb25IYW5kbGVyKGhhbmRsZXIpIHtcbiAgY29uc3QgdHlwZSA9ICdmZXRjaC1ib2R5LXJlc29sdmVkJztcbiAgYWRkSGFuZGxlcih0eXBlLCBoYW5kbGVyKTtcbiAgbWF5YmVJbnN0cnVtZW50KHR5cGUsICgpID0+IGluc3RydW1lbnRGZXRjaChzdHJlYW1IYW5kbGVyKSk7XG59XG5mdW5jdGlvbiBpbnN0cnVtZW50RmV0Y2gob25GZXRjaFJlc29sdmVkLCBza2lwTmF0aXZlRmV0Y2hDaGVjayA9IGZhbHNlKSB7XG4gIGlmIChza2lwTmF0aXZlRmV0Y2hDaGVjayAmJiAhc3VwcG9ydHNOYXRpdmVGZXRjaCgpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZpbGwoR0xPQkFMX09CSiwgJ2ZldGNoJywgZnVuY3Rpb24gKG9yaWdpbmFsRmV0Y2gpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgIC8vIFdlIGNhcHR1cmUgdGhlIGVycm9yIHJpZ2h0IGhlcmUgYW5kIG5vdCBpbiB0aGUgUHJvbWlzZSBlcnJvciBjYWxsYmFjayBiZWNhdXNlIFNhZmFyaSAoYW5kIHByb2JhYmx5IG90aGVyXG4gICAgICAvLyBicm93c2VycyB0b28pIHdpbGwgd2lwZSB0aGUgc3RhY2sgdHJhY2UgdXAgdG8gdGhpcyBwb2ludCwgb25seSBsZWF2aW5nIHVzIHdpdGggdGhpcyBmaWxlIHdoaWNoIGlzIHVzZWxlc3MuXG5cbiAgICAgIC8vIE5PVEU6IElmIHlvdSBhcmUgYSBTZW50cnkgdXNlciwgYW5kIHlvdSBhcmUgc2VlaW5nIHRoaXMgc3RhY2sgZnJhbWUsXG4gICAgICAvLyAgICAgICBpdCBtZWFucyB0aGUgZXJyb3IsIHRoYXQgd2FzIGNhdXNlZCBieSB5b3VyIGZldGNoIGNhbGwgZGlkIG5vdFxuICAgICAgLy8gICAgICAgaGF2ZSBhIHN0YWNrIHRyYWNlLCBzbyB0aGUgU0RLIGJhY2tmaWxsZWQgdGhlIHN0YWNrIHRyYWNlIHNvXG4gICAgICAvLyAgICAgICB5b3UgY2FuIHNlZSB3aGljaCBmZXRjaCBjYWxsIGZhaWxlZC5cbiAgICAgIGNvbnN0IHZpcnR1YWxFcnJvciA9IG5ldyBFcnJvcigpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBtZXRob2QsXG4gICAgICAgIHVybFxuICAgICAgfSA9IHBhcnNlRmV0Y2hBcmdzKGFyZ3MpO1xuICAgICAgY29uc3QgaGFuZGxlckRhdGEgPSB7XG4gICAgICAgIGFyZ3MsXG4gICAgICAgIGZldGNoRGF0YToge1xuICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICB1cmxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhcnRUaW1lc3RhbXA6IHRpbWVzdGFtcEluU2Vjb25kcygpICogMTAwMCxcbiAgICAgICAgLy8gLy8gQWRkaW5nIHRoZSBlcnJvciB0byBiZSBhYmxlIHRvIGZpbmdlcnByaW50IHRoZSBmYWlsZWQgZmV0Y2ggZXZlbnQgaW4gSHR0cENsaWVudCBpbnN0cnVtZW50YXRpb25cbiAgICAgICAgdmlydHVhbEVycm9yLFxuICAgICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzRnJvbUZldGNoQXJncyhhcmdzKVxuICAgICAgfTtcblxuICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gY2FsbGJhY2ssIGZldGNoIGlzIGluc3RydW1lbnRlZCBkaXJlY3RseVxuICAgICAgaWYgKCFvbkZldGNoUmVzb2x2ZWQpIHtcbiAgICAgICAgdHJpZ2dlckhhbmRsZXJzKCdmZXRjaCcsIHtcbiAgICAgICAgICAuLi5oYW5kbGVyRGF0YVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgcmV0dXJuIG9yaWdpbmFsRmV0Y2guYXBwbHkoR0xPQkFMX09CSiwgYXJncykudGhlbihhc3luYyByZXNwb25zZSA9PiB7XG4gICAgICAgIGlmIChvbkZldGNoUmVzb2x2ZWQpIHtcbiAgICAgICAgICBvbkZldGNoUmVzb2x2ZWQocmVzcG9uc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyaWdnZXJIYW5kbGVycygnZmV0Y2gnLCB7XG4gICAgICAgICAgICAuLi5oYW5kbGVyRGF0YSxcbiAgICAgICAgICAgIGVuZFRpbWVzdGFtcDogdGltZXN0YW1wSW5TZWNvbmRzKCkgKiAxMDAwLFxuICAgICAgICAgICAgcmVzcG9uc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgIHRyaWdnZXJIYW5kbGVycygnZmV0Y2gnLCB7XG4gICAgICAgICAgLi4uaGFuZGxlckRhdGEsXG4gICAgICAgICAgZW5kVGltZXN0YW1wOiB0aW1lc3RhbXBJblNlY29uZHMoKSAqIDEwMDAsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc0Vycm9yKGVycm9yKSAmJiBlcnJvci5zdGFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgLy8gTk9URTogSWYgeW91IGFyZSBhIFNlbnRyeSB1c2VyLCBhbmQgeW91IGFyZSBzZWVpbmcgdGhpcyBzdGFjayBmcmFtZSxcbiAgICAgICAgICAvLyAgICAgICBpdCBtZWFucyB0aGUgZXJyb3IsIHRoYXQgd2FzIGNhdXNlZCBieSB5b3VyIGZldGNoIGNhbGwgZGlkIG5vdFxuICAgICAgICAgIC8vICAgICAgIGhhdmUgYSBzdGFjayB0cmFjZSwgc28gdGhlIFNESyBiYWNrZmlsbGVkIHRoZSBzdGFjayB0cmFjZSBzb1xuICAgICAgICAgIC8vICAgICAgIHlvdSBjYW4gc2VlIHdoaWNoIGZldGNoIGNhbGwgZmFpbGVkLlxuICAgICAgICAgIGVycm9yLnN0YWNrID0gdmlydHVhbEVycm9yLnN0YWNrO1xuICAgICAgICAgIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShlcnJvciwgJ2ZyYW1lc1RvUG9wJywgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBlbmhhbmNlIHRoZSBub3Qtc28taGVscGZ1bCBcIkZhaWxlZCB0byBmZXRjaFwiIGVycm9yIG1lc3NhZ2VzIHdpdGggdGhlIGhvc3RcbiAgICAgICAgLy8gUG9zc2libGUgbWVzc2FnZXMgd2UgaGFuZGxlIGhlcmU6XG4gICAgICAgIC8vICogXCJGYWlsZWQgdG8gZmV0Y2hcIiAoY2hyb21pdW0pXG4gICAgICAgIC8vICogXCJMb2FkIGZhaWxlZFwiICh3ZWJraXQpXG4gICAgICAgIC8vICogXCJOZXR3b3JrRXJyb3Igd2hlbiBhdHRlbXB0aW5nIHRvIGZldGNoIHJlc291cmNlLlwiIChmaXJlZm94KVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgJiYgKGVycm9yLm1lc3NhZ2UgPT09ICdGYWlsZWQgdG8gZmV0Y2gnIHx8IGVycm9yLm1lc3NhZ2UgPT09ICdMb2FkIGZhaWxlZCcgfHwgZXJyb3IubWVzc2FnZSA9PT0gJ05ldHdvcmtFcnJvciB3aGVuIGF0dGVtcHRpbmcgdG8gZmV0Y2ggcmVzb3VyY2UuJykpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChoYW5kbGVyRGF0YS5mZXRjaERhdGEudXJsKTtcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgPSBgJHtlcnJvci5tZXNzYWdlfSAoJHt1cmwuaG9zdH0pYDtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSBpdCBpZiBlcnJvcnMgaGFwcGVuIGhlcmVcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBOT1RFOiBJZiB5b3UgYXJlIGEgU2VudHJ5IHVzZXIsIGFuZCB5b3UgYXJlIHNlZWluZyB0aGlzIHN0YWNrIGZyYW1lLFxuICAgICAgICAvLyAgICAgICBpdCBtZWFucyB0aGUgc2VudHJ5LmphdmFzY3JpcHQgU0RLIGNhdWdodCBhbiBlcnJvciBpbnZva2luZyB5b3VyIGFwcGxpY2F0aW9uIGNvZGUuXG4gICAgICAgIC8vICAgICAgIFRoaXMgaXMgZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIE5PVCBpbmRpY2F0aXZlIG9mIGEgYnVnIHdpdGggc2VudHJ5LmphdmFzY3JpcHQuXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiByZXNvbHZlUmVzcG9uc2UocmVzLCBvbkZpbmlzaGVkUmVzb2x2aW5nKSB7XG4gIGlmIChyZXM/LmJvZHkpIHtcbiAgICBjb25zdCBib2R5ID0gcmVzLmJvZHk7XG4gICAgY29uc3QgcmVzcG9uc2VSZWFkZXIgPSBib2R5LmdldFJlYWRlcigpO1xuXG4gICAgLy8gRGVmaW5lIGEgbWF4aW11bSBkdXJhdGlvbiBhZnRlciB3aGljaCB3ZSBqdXN0IGNhbmNlbFxuICAgIGNvbnN0IG1heEZldGNoRHVyYXRpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBib2R5LmNhbmNlbCgpLnRoZW4obnVsbCwgKCkgPT4ge1xuICAgICAgICAvLyBub29wXG4gICAgICB9KTtcbiAgICB9LCA5MCAqIDEwMDAgLy8gOTBzXG4gICAgKTtcbiAgICBsZXQgcmVhZGluZ0FjdGl2ZSA9IHRydWU7XG4gICAgd2hpbGUgKHJlYWRpbmdBY3RpdmUpIHtcbiAgICAgIGxldCBjaHVua1RpbWVvdXQ7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBhYm9ydCByZWFkaW5nIGlmIHJlYWQgb3AgdGFrZXMgbW9yZSB0aGFuIDVzXG4gICAgICAgIGNodW5rVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGJvZHkuY2FuY2VsKCkudGhlbihudWxsLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBub29wIG9uIGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDUwMDApO1xuXG4gICAgICAgIC8vIFRoaXMgLnJlYWQoKSBjYWxsIHdpbGwgcmVqZWN0L3Rocm93IHdoZW4gd2UgYWJvcnQgZHVlIHRvIHRpbWVvdXRzIHRocm91Z2ggYGJvZHkuY2FuY2VsKClgXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBkb25lXG4gICAgICAgIH0gPSBhd2FpdCByZXNwb25zZVJlYWRlci5yZWFkKCk7XG4gICAgICAgIGNsZWFyVGltZW91dChjaHVua1RpbWVvdXQpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgIG9uRmluaXNoZWRSZXNvbHZpbmcoKTtcbiAgICAgICAgICByZWFkaW5nQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlYWRpbmdBY3RpdmUgPSBmYWxzZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFyVGltZW91dChjaHVua1RpbWVvdXQpO1xuICAgICAgfVxuICAgIH1cbiAgICBjbGVhclRpbWVvdXQobWF4RmV0Y2hEdXJhdGlvblRpbWVvdXQpO1xuICAgIHJlc3BvbnNlUmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgYm9keS5jYW5jZWwoKS50aGVuKG51bGwsICgpID0+IHtcbiAgICAgIC8vIG5vb3Agb24gZXJyb3JcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gc3RyZWFtSGFuZGxlcihyZXNwb25zZSkge1xuICAvLyBjbG9uZSByZXNwb25zZSBmb3IgYXdhaXRpbmcgc3RyZWFtXG4gIGxldCBjbG9uZWRSZXNwb25zZUZvclJlc29sdmluZztcbiAgdHJ5IHtcbiAgICBjbG9uZWRSZXNwb25zZUZvclJlc29sdmluZyA9IHJlc3BvbnNlLmNsb25lKCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgcmVzb2x2ZVJlc3BvbnNlKGNsb25lZFJlc3BvbnNlRm9yUmVzb2x2aW5nLCAoKSA9PiB7XG4gICAgdHJpZ2dlckhhbmRsZXJzKCdmZXRjaC1ib2R5LXJlc29sdmVkJywge1xuICAgICAgZW5kVGltZXN0YW1wOiB0aW1lc3RhbXBJblNlY29uZHMoKSAqIDEwMDAsXG4gICAgICByZXNwb25zZVxuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGhhc1Byb3Aob2JqLCBwcm9wKSB7XG4gIHJldHVybiAhIW9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiAhIW9ialtwcm9wXTtcbn1cbmZ1bmN0aW9uIGdldFVybEZyb21SZXNvdXJjZShyZXNvdXJjZSkge1xuICBpZiAodHlwZW9mIHJlc291cmNlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiByZXNvdXJjZTtcbiAgfVxuICBpZiAoIXJlc291cmNlKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGlmIChoYXNQcm9wKHJlc291cmNlLCAndXJsJykpIHtcbiAgICByZXR1cm4gcmVzb3VyY2UudXJsO1xuICB9XG4gIGlmIChyZXNvdXJjZS50b1N0cmluZykge1xuICAgIHJldHVybiByZXNvdXJjZS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBQYXJzZXMgdGhlIGZldGNoIGFyZ3VtZW50cyB0byBmaW5kIHRoZSB1c2VkIEh0dHAgbWV0aG9kIGFuZCB0aGUgdXJsIG9mIHRoZSByZXF1ZXN0LlxuICogRXhwb3J0ZWQgZm9yIHRlc3RzIG9ubHkuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlRmV0Y2hBcmdzKGZldGNoQXJncykge1xuICBpZiAoZmV0Y2hBcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsOiAnJ1xuICAgIH07XG4gIH1cbiAgaWYgKGZldGNoQXJncy5sZW5ndGggPT09IDIpIHtcbiAgICBjb25zdCBbdXJsLCBvcHRpb25zXSA9IGZldGNoQXJncztcbiAgICByZXR1cm4ge1xuICAgICAgdXJsOiBnZXRVcmxGcm9tUmVzb3VyY2UodXJsKSxcbiAgICAgIG1ldGhvZDogaGFzUHJvcChvcHRpb25zLCAnbWV0aG9kJykgPyBTdHJpbmcob3B0aW9ucy5tZXRob2QpLnRvVXBwZXJDYXNlKCkgOiAnR0VUJ1xuICAgIH07XG4gIH1cbiAgY29uc3QgYXJnID0gZmV0Y2hBcmdzWzBdO1xuICByZXR1cm4ge1xuICAgIHVybDogZ2V0VXJsRnJvbVJlc291cmNlKGFyZyksXG4gICAgbWV0aG9kOiBoYXNQcm9wKGFyZywgJ21ldGhvZCcpID8gU3RyaW5nKGFyZy5tZXRob2QpLnRvVXBwZXJDYXNlKCkgOiAnR0VUJ1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0SGVhZGVyc0Zyb21GZXRjaEFyZ3MoZmV0Y2hBcmdzKSB7XG4gIGNvbnN0IFtyZXF1ZXN0QXJndW1lbnQsIG9wdGlvbnNBcmd1bWVudF0gPSBmZXRjaEFyZ3M7XG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zQXJndW1lbnQgPT09ICdvYmplY3QnICYmIG9wdGlvbnNBcmd1bWVudCAhPT0gbnVsbCAmJiAnaGVhZGVycycgaW4gb3B0aW9uc0FyZ3VtZW50ICYmIG9wdGlvbnNBcmd1bWVudC5oZWFkZXJzKSB7XG4gICAgICByZXR1cm4gbmV3IEhlYWRlcnMob3B0aW9uc0FyZ3VtZW50LmhlYWRlcnMpO1xuICAgIH1cbiAgICBpZiAoaXNSZXF1ZXN0KHJlcXVlc3RBcmd1bWVudCkpIHtcbiAgICAgIHJldHVybiBuZXcgSGVhZGVycyhyZXF1ZXN0QXJndW1lbnQuaGVhZGVycyk7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICAvLyBub29wXG4gIH1cbiAgcmV0dXJuO1xufVxuZXhwb3J0IHsgYWRkRmV0Y2hFbmRJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBhZGRGZXRjaEluc3RydW1lbnRhdGlvbkhhbmRsZXIsIHBhcnNlRmV0Y2hBcmdzIH07XG4iLCIvKlxuICogVGhpcyBtb2R1bGUgZXhpc3RzIGZvciBvcHRpbWl6YXRpb25zIGluIHRoZSBidWlsZCBwcm9jZXNzIHRocm91Z2ggcm9sbHVwIGFuZCB0ZXJzZXIuICBXZSBkZWZpbmUgc29tZSBnbG9iYWxcbiAqIGNvbnN0YW50cywgd2hpY2ggY2FuIGJlIG92ZXJyaWRkZW4gZHVyaW5nIGJ1aWxkLiBCeSBndWFyZGluZyBjZXJ0YWluIHBpZWNlcyBvZiBjb2RlIHdpdGggZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHRoZXNlXG4gKiBjb25zdGFudHMsIHdlIGNhbiBjb250cm9sIHdoZXRoZXIgb3Igbm90IHRoZXkgYXBwZWFyIGluIHRoZSBmaW5hbCBidW5kbGUuIChBbnkgY29kZSBndWFyZGVkIGJ5IGEgZmFsc2UgY29uZGl0aW9uIHdpbGxcbiAqIG5ldmVyIHJ1biwgYW5kIHdpbGwgaGVuY2UgYmUgZHJvcHBlZCBkdXJpbmcgdHJlZXNoYWtpbmcuKSBUaGUgdHdvIHByaW1hcnkgdXNlcyBmb3IgdGhpcyBhcmUgc3RyaXBwaW5nIG91dCBjYWxscyB0b1xuICogYGRlYnVnYCBhbmQgcHJldmVudGluZyBub2RlLXJlbGF0ZWQgY29kZSBmcm9tIGFwcGVhcmluZyBpbiBicm93c2VyIGJ1bmRsZXMuXG4gKlxuICogQXR0ZW50aW9uOlxuICogVGhpcyBmaWxlIHNob3VsZCBub3QgYmUgdXNlZCB0byBkZWZpbmUgY29uc3RhbnRzL2ZsYWdzIHRoYXQgYXJlIGludGVuZGVkIHRvIGJlIHVzZWQgZm9yIHRyZWUtc2hha2luZyBjb25kdWN0ZWQgYnlcbiAqIHVzZXJzLiBUaGVzZSBmbGFncyBzaG91bGQgbGl2ZSBpbiB0aGVpciByZXNwZWN0aXZlIHBhY2thZ2VzLCBhcyB3ZSBpZGVudGlmaWVkIHVzZXIgdG9vbGluZyAoc3BlY2lmaWNhbGx5IHdlYnBhY2spXG4gKiBoYXZpbmcgaXNzdWVzIHRyZWUtc2hha2luZyB0aGVzZSBjb25zdGFudHMgYWNyb3NzIHBhY2thZ2UgYm91bmRhcmllcy5cbiAqIEFuIGV4YW1wbGUgZm9yIHRoaXMgaXMgdGhlIF9fU0VOVFJZX0RFQlVHX18gY29uc3RhbnQuIEl0IGlzIGRlY2xhcmVkIGluIGVhY2ggcGFja2FnZSBpbmRpdmlkdWFsbHkgYmVjYXVzZSB3ZSB3YW50XG4gKiB1c2VycyB0byBiZSBhYmxlIHRvIHNoYWtlIGF3YXkgZXhwcmVzc2lvbnMgdGhhdCBpdCBndWFyZHMuXG4gKi9cblxuLyoqXG4gKiBGaWd1cmVzIG91dCBpZiB3ZSdyZSBidWlsZGluZyBhIGJyb3dzZXIgYnVuZGxlLlxuICpcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBpcyBhIGJyb3dzZXIgYnVuZGxlIGJ1aWxkLlxuICovXG5mdW5jdGlvbiBpc0Jyb3dzZXJCdW5kbGUoKSB7XG4gIHJldHVybiB0eXBlb2YgX19TRU5UUllfQlJPV1NFUl9CVU5ETEVfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgISFfX1NFTlRSWV9CUk9XU0VSX0JVTkRMRV9fO1xufVxuXG4vKipcbiAqIEdldCBzb3VyY2Ugb2YgU0RLLlxuICovXG5mdW5jdGlvbiBnZXRTREtTb3VyY2UoKSB7XG4gIC8vIFRoaXMgY29tbWVudCBpcyB1c2VkIHRvIGlkZW50aWZ5IHRoaXMgbGluZSBpbiB0aGUgQ0ROIGJ1bmRsZSBidWlsZCBzdGVwIGFuZCByZXBsYWNlIHRoaXMgd2l0aCBcInJldHVybiAnY2RuJztcIlxuICAvKiBfX1NFTlRSWV9TREtfU09VUkNFX18gKi9cbiAgcmV0dXJuICducG0nO1xufVxuZXhwb3J0IHsgZ2V0U0RLU291cmNlLCBpc0Jyb3dzZXJCdW5kbGUgfTtcbiIsImltcG9ydCB7IGlzQnJvd3NlckJ1bmRsZSB9IGZyb20gJy4vZW52LmpzJztcblxuLyoqXG4gKiBOT1RFOiBJbiBvcmRlciB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXMsIGlmIHlvdSBhZGQgYSBmdW5jdGlvbiB0byB0aGlzIG1vZHVsZSBhbmQgaXQgbmVlZHMgdG8gcHJpbnQgc29tZXRoaW5nLFxuICogeW91IG11c3QgZWl0aGVyIGEpIHVzZSBgY29uc29sZS5sb2dgIHJhdGhlciB0aGFuIHRoZSBgZGVidWdgIHNpbmdsZXRvbiwgb3IgYikgcHV0IHlvdXIgZnVuY3Rpb24gZWxzZXdoZXJlLlxuICovXG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgd2UncmUgaW4gdGhlIE5vZGUuanMgb3IgQnJvd3NlciBlbnZpcm9ubWVudFxuICpcbiAqIEByZXR1cm5zIEFuc3dlciB0byBnaXZlbiBxdWVzdGlvblxuICovXG5mdW5jdGlvbiBpc05vZGVFbnYoKSB7XG4gIC8vIGV4cGxpY2l0bHkgY2hlY2sgZm9yIGJyb3dzZXIgYnVuZGxlcyBhcyB0aG9zZSBjYW4gYmUgb3B0aW1pemVkIHN0YXRpY2FsbHlcbiAgLy8gYnkgdGVyc2VyL3JvbGx1cC5cbiAgcmV0dXJuICFpc0Jyb3dzZXJCdW5kbGUoKSAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnID8gcHJvY2VzcyA6IDApID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG59XG5cbi8qKlxuICogUmVxdWlyZXMgYSBtb2R1bGUgd2hpY2ggaXMgcHJvdGVjdGVkIGFnYWluc3QgYnVuZGxlciBtaW5pZmljYXRpb24uXG4gKlxuICogQHBhcmFtIHJlcXVlc3QgVGhlIG1vZHVsZSBwYXRoIHRvIHJlc29sdmVcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIGR5bmFtaWNSZXF1aXJlKG1vZCwgcmVxdWVzdCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gIHJldHVybiBtb2QucmVxdWlyZShyZXF1ZXN0KTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZm9yIGR5bmFtaWNhbGx5IGxvYWRpbmcgbW9kdWxlIHRoYXQgc2hvdWxkIHdvcmsgd2l0aCBsaW5rZWQgZGVwZW5kZW5jaWVzLlxuICogVGhlIHByb2JsZW0gaXMgdGhhdCB3ZSBfc2hvdWxkXyBiZSB1c2luZyBgcmVxdWlyZShyZXF1aXJlLnJlc29sdmUobW9kdWxlTmFtZSwgeyBwYXRoczogW2N3ZCgpXSB9KSlgXG4gKiBIb3dldmVyIGl0J3MgX25vdCBwb3NzaWJsZV8gdG8gZG8gdGhhdCB3aXRoIFdlYnBhY2ssIGFzIGl0IGhhcyB0byBrbm93IGFsbCB0aGUgZGVwZW5kZW5jaWVzIGR1cmluZ1xuICogYnVpbGQgdGltZS4gYHJlcXVpcmUucmVzb2x2ZWAgaXMgYWxzbyBub3QgYXZhaWxhYmxlIGluIGFueSBvdGhlciB3YXksIHNvIHdlIGNhbm5vdCBjcmVhdGUsXG4gKiBhIGZha2UgaGVscGVyIGxpa2Ugd2UgZG8gd2l0aCBgZHluYW1pY1JlcXVpcmVgLlxuICpcbiAqIFdlIGFsd2F5cyBwcmVmZXIgdG8gdXNlIGxvY2FsIHBhY2thZ2UsIHRodXMgdGhlIHZhbHVlIGlzIG5vdCByZXR1cm5lZCBlYXJseSBmcm9tIGVhY2ggYHRyeS9jYXRjaGAgYmxvY2suXG4gKiBUaGF0IGlzIHRvIG1pbWljIHRoZSBiZWhhdmlvciBvZiBgcmVxdWlyZS5yZXNvbHZlYCBleGFjdGx5LlxuICpcbiAqIEBwYXJhbSBtb2R1bGVOYW1lIG1vZHVsZSBuYW1lIHRvIHJlcXVpcmVcbiAqIEBwYXJhbSBleGlzdGluZ01vZHVsZSBtb2R1bGUgdG8gdXNlIGZvciByZXF1aXJpbmdcbiAqIEByZXR1cm5zIHBvc3NpYmx5IHJlcXVpcmVkIG1vZHVsZVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gbG9hZE1vZHVsZShtb2R1bGVOYW1lLCBleGlzdGluZ01vZHVsZSA9IG1vZHVsZSkge1xuICBsZXQgbW9kO1xuICB0cnkge1xuICAgIG1vZCA9IGR5bmFtaWNSZXF1aXJlKGV4aXN0aW5nTW9kdWxlLCBtb2R1bGVOYW1lKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIG5vLWVtcHR5XG4gIH1cbiAgaWYgKCFtb2QpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBjd2RcbiAgICAgIH0gPSBkeW5hbWljUmVxdWlyZShleGlzdGluZ01vZHVsZSwgJ3Byb2Nlc3MnKTtcbiAgICAgIG1vZCA9IGR5bmFtaWNSZXF1aXJlKGV4aXN0aW5nTW9kdWxlLCBgJHtjd2QoKX0vbm9kZV9tb2R1bGVzLyR7bW9kdWxlTmFtZX1gKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBuby1lbXB0eVxuICAgIH1cbiAgfVxuICByZXR1cm4gbW9kO1xufVxuZXhwb3J0IHsgaXNOb2RlRW52LCBsb2FkTW9kdWxlIH07XG4iLCJpbXBvcnQgeyBpc05vZGVFbnYgfSBmcm9tICcuL25vZGUuanMnO1xuaW1wb3J0IHsgR0xPQkFMX09CSiB9IGZyb20gJy4vd29ybGR3aWRlLmpzJztcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIGluIHRoZSBicm93c2VyLlxuICovXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICghaXNOb2RlRW52KCkgfHwgaXNFbGVjdHJvbk5vZGVSZW5kZXJlcigpKTtcbn1cblxuLy8gRWxlY3Ryb24gcmVuZGVyZXJzIHdpdGggbm9kZUludGVncmF0aW9uIGVuYWJsZWQgYXJlIGRldGVjdGVkIGFzIE5vZGUuanMgc28gd2Ugc3BlY2lmaWNhbGx5IHRlc3QgZm9yIHRoZW1cbmZ1bmN0aW9uIGlzRWxlY3Ryb25Ob2RlUmVuZGVyZXIoKSB7XG4gIGNvbnN0IHByb2Nlc3MgPSBHTE9CQUxfT0JKLnByb2Nlc3M7XG4gIHJldHVybiBwcm9jZXNzPy50eXBlID09PSAncmVuZGVyZXInO1xufVxuZXhwb3J0IHsgaXNCcm93c2VyIH07XG4iLCJpbXBvcnQgeyBHTE9CQUxfT0JKLCBnZXRDbGllbnQsIGdldEN1cnJlbnRTY29wZSwgY2FwdHVyZUZlZWRiYWNrLCBnZXRMb2NhdGlvbkhyZWYsIGlzQnJvd3NlciwgbG9nZ2VyLCBhZGRJbnRlZ3JhdGlvbiwgZ2V0SXNvbGF0aW9uU2NvcGUsIGdldEdsb2JhbFNjb3BlIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcblxuLy8gZXhwb3J0aW5nIGEgc2VwYXJhdGUgY29weSBvZiBgV0lORE9XYCByYXRoZXIgdGhhbiBleHBvcnRpbmcgdGhlIG9uZSBmcm9tIGBAc2VudHJ5L2Jyb3dzZXJgXG4vLyBwcmV2ZW50cyB0aGUgYnJvd3NlciBwYWNrYWdlIGZyb20gYmVpbmcgYnVuZGxlZCBpbiB0aGUgQ0ROIGJ1bmRsZSwgYW5kIGF2b2lkcyBhXG4vLyBjaXJjdWxhciBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGJyb3dzZXIgYW5kIGZlZWRiYWNrIHBhY2thZ2VzXG5jb25zdCBXSU5ET1cgPSBHTE9CQUxfT0JKO1xuY29uc3QgRE9DVU1FTlQgPSBXSU5ET1cuZG9jdW1lbnQ7XG5jb25zdCBOQVZJR0FUT1IgPSBXSU5ET1cubmF2aWdhdG9yO1xuY29uc3QgVFJJR0dFUl9MQUJFTCA9ICdSZXBvcnQgYSBCdWcnO1xuY29uc3QgQ0FOQ0VMX0JVVFRPTl9MQUJFTCA9ICdDYW5jZWwnO1xuY29uc3QgU1VCTUlUX0JVVFRPTl9MQUJFTCA9ICdTZW5kIEJ1ZyBSZXBvcnQnO1xuY29uc3QgQ09ORklSTV9CVVRUT05fTEFCRUwgPSAnQ29uZmlybSc7XG5jb25zdCBGT1JNX1RJVExFID0gJ1JlcG9ydCBhIEJ1Zyc7XG5jb25zdCBFTUFJTF9QTEFDRUhPTERFUiA9ICd5b3VyLmVtYWlsQGV4YW1wbGUub3JnJztcbmNvbnN0IEVNQUlMX0xBQkVMID0gJ0VtYWlsJztcbmNvbnN0IE1FU1NBR0VfUExBQ0VIT0xERVIgPSBcIldoYXQncyB0aGUgYnVnPyBXaGF0IGRpZCB5b3UgZXhwZWN0P1wiO1xuY29uc3QgTUVTU0FHRV9MQUJFTCA9ICdEZXNjcmlwdGlvbic7XG5jb25zdCBOQU1FX1BMQUNFSE9MREVSID0gJ1lvdXIgTmFtZSc7XG5jb25zdCBOQU1FX0xBQkVMID0gJ05hbWUnO1xuY29uc3QgU1VDQ0VTU19NRVNTQUdFX1RFWFQgPSAnVGhhbmsgeW91IGZvciB5b3VyIHJlcG9ydCEnO1xuY29uc3QgSVNfUkVRVUlSRURfTEFCRUwgPSAnKHJlcXVpcmVkKSc7XG5jb25zdCBBRERfU0NSRUVOU0hPVF9MQUJFTCA9ICdBZGQgYSBzY3JlZW5zaG90JztcbmNvbnN0IFJFTU9WRV9TQ1JFRU5TSE9UX0xBQkVMID0gJ1JlbW92ZSBzY3JlZW5zaG90JztcbmNvbnN0IEZFRURCQUNLX1dJREdFVF9TT1VSQ0UgPSAnd2lkZ2V0JztcbmNvbnN0IEZFRURCQUNLX0FQSV9TT1VSQ0UgPSAnYXBpJztcbmNvbnN0IFNVQ0NFU1NfTUVTU0FHRV9USU1FT1VUID0gNTAwMDtcblxuLyoqXG4gKiBQdWJsaWMgQVBJIHRvIHNlbmQgYSBGZWVkYmFjayBpdGVtIHRvIFNlbnRyeVxuICovXG5jb25zdCBzZW5kRmVlZGJhY2sgPSAocGFyYW1zLCBoaW50ID0ge1xuICBpbmNsdWRlUmVwbGF5OiB0cnVlXG59KSA9PiB7XG4gIGlmICghcGFyYW1zLm1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBzdWJtaXQgZmVlZGJhY2sgd2l0aCBlbXB0eSBtZXNzYWdlJyk7XG4gIH1cblxuICAvLyBXZSB3YW50IHRvIHdhaXQgZm9yIHRoZSBmZWVkYmFjayB0byBiZSBzZW50IChvciBub3QpXG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBpZiAoIWNsaWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gY2xpZW50IHNldHVwLCBjYW5ub3Qgc2VuZCBmZWVkYmFjay4nKTtcbiAgfVxuICBpZiAocGFyYW1zLnRhZ3MgJiYgT2JqZWN0LmtleXMocGFyYW1zLnRhZ3MpLmxlbmd0aCkge1xuICAgIGdldEN1cnJlbnRTY29wZSgpLnNldFRhZ3MocGFyYW1zLnRhZ3MpO1xuICB9XG4gIGNvbnN0IGV2ZW50SWQgPSBjYXB0dXJlRmVlZGJhY2soe1xuICAgIHNvdXJjZTogRkVFREJBQ0tfQVBJX1NPVVJDRSxcbiAgICB1cmw6IGdldExvY2F0aW9uSHJlZigpLFxuICAgIC4uLnBhcmFtc1xuICB9LCBoaW50KTtcblxuICAvLyBXZSB3YW50IHRvIHdhaXQgZm9yIHRoZSBmZWVkYmFjayB0byBiZSBzZW50IChvciBub3QpXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gQWZ0ZXIgMzBzLCB3ZSB3YW50IHRvIGNsZWFyIGFueWhvd1xuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHJlamVjdCgnVW5hYmxlIHRvIGRldGVybWluZSBpZiBGZWVkYmFjayB3YXMgY29ycmVjdGx5IHNlbnQuJyksIDMwMDAwKTtcbiAgICBjb25zdCBjbGVhbnVwID0gY2xpZW50Lm9uKCdhZnRlclNlbmRFdmVudCcsIChldmVudCwgcmVzcG9uc2UpID0+IHtcbiAgICAgIGlmIChldmVudC5ldmVudF9pZCAhPT0gZXZlbnRJZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICBjbGVhbnVwKCk7XG5cbiAgICAgIC8vIFJlcXVpcmUgdmFsaWQgc3RhdHVzIGNvZGVzLCBvdGhlcndpc2UgY2FuIGFzc3VtZSBmZWVkYmFjayB3YXMgbm90IHNlbnQgc3VjY2Vzc2Z1bGx5XG4gICAgICBpZiAocmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09ICdudW1iZXInICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAzMDApIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoZXZlbnRJZCk7XG4gICAgICB9XG4gICAgICBpZiAocmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09ICdudW1iZXInICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdCgnVW5hYmxlIHRvIHNlbmQgRmVlZGJhY2suIFRoaXMgaXMgYmVjYXVzZSBvZiBuZXR3b3JrIGlzc3Vlcywgb3IgYmVjYXVzZSB5b3UgYXJlIHVzaW5nIGFuIGFkLWJsb2NrZXIuJyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09ICdudW1iZXInICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICByZXR1cm4gcmVqZWN0KCdVbmFibGUgdG8gc2VuZCBGZWVkYmFjay4gVGhpcyBjb3VsZCBiZSBiZWNhdXNlIHRoaXMgZG9tYWluIGlzIG5vdCBpbiB5b3VyIGxpc3Qgb2YgYWxsb3dlZCBkb21haW5zLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlamVjdCgnVW5hYmxlIHRvIHNlbmQgRmVlZGJhY2suIFRoaXMgY291bGQgYmUgYmVjYXVzZSBvZiBuZXR3b3JrIGlzc3Vlcywgb3IgYmVjYXVzZSB5b3UgYXJlIHVzaW5nIGFuIGFkLWJsb2NrZXInKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKlxuICogRm9yIHJlZmVyZW5jZSwgdGhlIGZ1bGx5IGJ1aWx0IGV2ZW50IGxvb2tzIHNvbWV0aGluZyBsaWtlIHRoaXM6XG4gKiB7XG4gKiAgICAgXCJ0eXBlXCI6IFwiZmVlZGJhY2tcIixcbiAqICAgICBcImV2ZW50X2lkXCI6IFwiZDIxMzJkMzFiMzk0NDVmMTkzOGQ3ZTIxYjZiZjBlYzRcIixcbiAqICAgICBcInRpbWVzdGFtcFwiOiAxNTk3OTc3Nzc3LjYxODk3MTgsXG4gKiAgICAgXCJkaXN0XCI6IFwiMS4xMlwiLFxuICogICAgIFwicGxhdGZvcm1cIjogXCJqYXZhc2NyaXB0XCIsXG4gKiAgICAgXCJlbnZpcm9ubWVudFwiOiBcInByb2R1Y3Rpb25cIixcbiAqICAgICBcInJlbGVhc2VcIjogNDIsXG4gKiAgICAgXCJ0YWdzXCI6IHtcInRyYW5zYWN0aW9uXCI6IFwiL29yZ2FuaXphdGlvbnMvOm9yZ0lkL3BlcmZvcm1hbmNlLzpldmVudFNsdWcvXCJ9LFxuICogICAgIFwic2RrXCI6IHtcIm5hbWVcIjogXCJuYW1lXCIsIFwidmVyc2lvblwiOiBcInZlcnNpb25cIn0sXG4gKiAgICAgXCJ1c2VyXCI6IHtcbiAqICAgICAgICAgXCJpZFwiOiBcIjEyM1wiLFxuICogICAgICAgICBcInVzZXJuYW1lXCI6IFwidXNlclwiLFxuICogICAgICAgICBcImVtYWlsXCI6IFwidXNlckBzaXRlLmNvbVwiLFxuICogICAgICAgICBcImlwX2FkZHJlc3NcIjogXCIxOTIuMTY4LjExLjEyXCIsXG4gKiAgICAgfSxcbiAqICAgICBcInJlcXVlc3RcIjoge1xuICogICAgICAgICBcInVybFwiOiBOb25lLFxuICogICAgICAgICBcImhlYWRlcnNcIjoge1xuICogICAgICAgICAgICAgXCJ1c2VyLUFnZW50XCI6IFwiTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNjA1LjEuMTUgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzE1LjUgU2FmYXJpLzYwNS4xLjE1XCJcbiAqICAgICAgICAgfSxcbiAqICAgICB9LFxuICogICAgIFwiY29udGV4dHNcIjoge1xuICogICAgICAgICBcImZlZWRiYWNrXCI6IHtcbiAqICAgICAgICAgICAgIFwibWVzc2FnZVwiOiBcInRlc3QgbWVzc2FnZVwiLFxuICogICAgICAgICAgICAgXCJjb250YWN0X2VtYWlsXCI6IFwidGVzdEBleGFtcGxlLmNvbVwiLFxuICogICAgICAgICAgICAgXCJ0eXBlXCI6IFwiZmVlZGJhY2tcIixcbiAqICAgICAgICAgfSxcbiAqICAgICAgICAgXCJ0cmFjZVwiOiB7XG4gKiAgICAgICAgICAgICBcInRyYWNlX2lkXCI6IFwiNEM3OUY2MEMxMTIxNEVCMzg2MDRGNEFFMDc4MUJGQjJcIixcbiAqICAgICAgICAgICAgIFwic3Bhbl9pZFwiOiBcIkZBOTBGREVBRDVGNzQwNTJcIixcbiAqICAgICAgICAgICAgIFwidHlwZVwiOiBcInRyYWNlXCIsXG4gKiAgICAgICAgIH0sXG4gKiAgICAgICAgIFwicmVwbGF5XCI6IHtcbiAqICAgICAgICAgICAgIFwicmVwbGF5X2lkXCI6IFwiZTJkNDIwNDdiMWM1NDMxYzhjYmE4NWVlMmE4YWIyNWRcIixcbiAqICAgICAgICAgfSxcbiAqICAgICB9LFxuICogICB9XG4gKi9cblxuLyoqXG4gKiBUaGlzIHNlcnZlcyBhcyBhIGJ1aWxkIHRpbWUgZmxhZyB0aGF0IHdpbGwgYmUgdHJ1ZSBieSBkZWZhdWx0LCBidXQgZmFsc2UgaW4gbm9uLWRlYnVnIGJ1aWxkcyBvciBpZiB1c2VycyByZXBsYWNlIGBfX1NFTlRSWV9ERUJVR19fYCBpbiB0aGVpciBnZW5lcmF0ZWQgY29kZS5cbiAqXG4gKiBBVFRFTlRJT046IFRoaXMgY29uc3RhbnQgbXVzdCBuZXZlciBjcm9zcyBwYWNrYWdlIGJvdW5kYXJpZXMgKGkuZS4gYmUgZXhwb3J0ZWQpIHRvIGd1YXJhbnRlZSB0aGF0IGl0IGNhbiBiZSB1c2VkIGZvciB0cmVlIHNoYWtpbmcuXG4gKi9cbmNvbnN0IERFQlVHX0JVSUxEID0gdHlwZW9mIF9fU0VOVFJZX0RFQlVHX18gPT09ICd1bmRlZmluZWQnIHx8IF9fU0VOVFJZX0RFQlVHX187XG5cbi8qKlxuICogTW9iaWxlIGJyb3dzZXJzIGRvIG5vdCBzdXBwb3J0IGBtZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhYCBldmVuIHRob3VnaCB0aGV5IGhhdmUgdGhlIGFwaSBpbXBsZW1lbnRlZFxuICogSW5zdGVhZCB0aGV5IHJldHVybiB0aGluZ3MgbGlrZSBgTm90QWxsb3dlZEVycm9yYCB3aGVuIGNhbGxlZC5cbiAqXG4gKiBJdCdzIHNpbXBsZXIgZm9yIHVzIHRvIGJyb3dzZXIgc25pZmYgZmlyc3QsIGFuZCBhdm9pZCBsb2FkaW5nIHRoZSBpbnRlZ3JhdGlvbiBpZiB3ZSBjYW4uXG4gKlxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzU4ODc5MjEyXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzU0MDI5NVxuICpcbiAqIGBtZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhYCBpcyBhbHNvIG9ubHkgc3VwcG9ydGVkIGluIHNlY3VyZSBjb250ZXh0cywgYW5kIHJldHVybiBhIGBtZWRpYURldmljZXMgaXMgbm90IHN1cHBvcnRlZGAgZXJyb3IsIHNvIHdlIHNob3VsZCBhbHNvIGF2b2lkIGxvYWRpbmcgdGhlIGludGVncmF0aW9uIGlmIHdlIGNhbi5cbiAqXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTWVkaWFEZXZpY2VzL2dldERpc3BsYXlNZWRpYVxuICovXG5mdW5jdGlvbiBpc1NjcmVlbnNob3RTdXBwb3J0ZWQoKSB7XG4gIGlmICgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoTkFWSUdBVE9SLnVzZXJBZ2VudCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFVzZXIgYWdlbnQgb24gaVBhZHMgc2hvdyBhcyBNYWNpbnRvc2gsIHNvIHdlIG5lZWQgZXh0cmEgY2hlY2tzXG4gICAqXG4gICAqIGh0dHBzOi8vZm9ydW1zLmRldmVsb3Blci5hcHBsZS5jb20vZm9ydW1zL3RocmVhZC8xMTkxODZcbiAgICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNjA0ODI2NTAvaG93LXRvLWRldGVjdC1pcGFkLXVzZXJhZ2VudC1vbi1zYWZhcmktYnJvd3NlclxuICAgKi9cbiAgaWYgKC9NYWNpbnRvc2gvaS50ZXN0KE5BVklHQVRPUi51c2VyQWdlbnQpICYmIE5BVklHQVRPUi5tYXhUb3VjaFBvaW50cyAmJiBOQVZJR0FUT1IubWF4VG91Y2hQb2ludHMgPiAxKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghaXNTZWN1cmVDb250ZXh0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFF1aWNrIGFuZCBkaXJ0eSBkZWVwIG1lcmdlIGZvciB0aGUgRmVlZGJhY2sgaW50ZWdyYXRpb24gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbk92ZXJyaWRlcykge1xuICByZXR1cm4ge1xuICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgIC4uLm9wdGlvbk92ZXJyaWRlcyxcbiAgICB0YWdzOiB7XG4gICAgICAuLi5kZWZhdWx0T3B0aW9ucy50YWdzLFxuICAgICAgLi4ub3B0aW9uT3ZlcnJpZGVzLnRhZ3NcbiAgICB9LFxuICAgIG9uRm9ybU9wZW46ICgpID0+IHtcbiAgICAgIG9wdGlvbk92ZXJyaWRlcy5vbkZvcm1PcGVuPy4oKTtcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9uRm9ybU9wZW4/LigpO1xuICAgIH0sXG4gICAgb25Gb3JtQ2xvc2U6ICgpID0+IHtcbiAgICAgIG9wdGlvbk92ZXJyaWRlcy5vbkZvcm1DbG9zZT8uKCk7XG4gICAgICBkZWZhdWx0T3B0aW9ucy5vbkZvcm1DbG9zZT8uKCk7XG4gICAgfSxcbiAgICBvblN1Ym1pdFN1Y2Nlc3M6IChkYXRhLCBldmVudElkKSA9PiB7XG4gICAgICBvcHRpb25PdmVycmlkZXMub25TdWJtaXRTdWNjZXNzPy4oZGF0YSwgZXZlbnRJZCk7XG4gICAgICBkZWZhdWx0T3B0aW9ucy5vblN1Ym1pdFN1Y2Nlc3M/LihkYXRhLCBldmVudElkKTtcbiAgICB9LFxuICAgIG9uU3VibWl0RXJyb3I6IGVycm9yID0+IHtcbiAgICAgIG9wdGlvbk92ZXJyaWRlcy5vblN1Ym1pdEVycm9yPy4oZXJyb3IpO1xuICAgICAgZGVmYXVsdE9wdGlvbnMub25TdWJtaXRFcnJvcj8uKGVycm9yKTtcbiAgICB9LFxuICAgIG9uRm9ybVN1Ym1pdHRlZDogKCkgPT4ge1xuICAgICAgb3B0aW9uT3ZlcnJpZGVzLm9uRm9ybVN1Ym1pdHRlZD8uKCk7XG4gICAgICBkZWZhdWx0T3B0aW9ucy5vbkZvcm1TdWJtaXR0ZWQ/LigpO1xuICAgIH0sXG4gICAgdGhlbWVEYXJrOiB7XG4gICAgICAuLi5kZWZhdWx0T3B0aW9ucy50aGVtZURhcmssXG4gICAgICAuLi5vcHRpb25PdmVycmlkZXMudGhlbWVEYXJrXG4gICAgfSxcbiAgICB0aGVtZUxpZ2h0OiB7XG4gICAgICAuLi5kZWZhdWx0T3B0aW9ucy50aGVtZUxpZ2h0LFxuICAgICAgLi4ub3B0aW9uT3ZlcnJpZGVzLnRoZW1lTGlnaHRcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyA8c3R5bGU+IGVsZW1lbnQgZm9yIHdpZGdldCBhY3RvciAoYnV0dG9uIHRoYXQgb3BlbnMgdGhlIGRpYWxvZylcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQWN0b3JTdHlsZXMoc3R5bGVOb25jZSkge1xuICBjb25zdCBzdHlsZSA9IERPQ1VNRU5ULmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLnRleHRDb250ZW50ID0gYFxuLndpZGdldF9fYWN0b3Ige1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHotaW5kZXg6IHZhcigtLXotaW5kZXgpO1xuICBtYXJnaW46IHZhcigtLXBhZ2UtbWFyZ2luKTtcbiAgaW5zZXQ6IHZhcigtLWFjdG9yLWluc2V0KTtcblxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDhweDtcbiAgcGFkZGluZzogMTZweDtcblxuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUpO1xuICBmb250LXdlaWdodDogNjAwO1xuICBsaW5lLWhlaWdodDogMS4xNGVtO1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG5cbiAgYmFja2dyb3VuZDogdmFyKC0tYWN0b3ItYmFja2dyb3VuZCwgdmFyKC0tYmFja2dyb3VuZCkpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1hY3Rvci1ib3JkZXItcmFkaXVzLCAxLjdlbS81MCUpO1xuICBib3JkZXI6IHZhcigtLWFjdG9yLWJvcmRlciwgdmFyKC0tYm9yZGVyKSk7XG4gIGJveC1zaGFkb3c6IHZhcigtLWFjdG9yLWJveC1zaGFkb3csIHZhcigtLWJveC1zaGFkb3cpKTtcbiAgY29sb3I6IHZhcigtLWFjdG9yLWNvbG9yLCB2YXIoLS1mb3JlZ3JvdW5kKSk7XG4gIGZpbGw6IHZhcigtLWFjdG9yLWNvbG9yLCB2YXIoLS1mb3JlZ3JvdW5kKSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgb3BhY2l0eTogMTtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZS1pbi1vdXQ7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApIHNjYWxlKDEpO1xufVxuLndpZGdldF9fYWN0b3JbYXJpYS1oaWRkZW49XCJ0cnVlXCJdIHtcbiAgb3BhY2l0eTogMDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgMTZweCkgc2NhbGUoMC45OCk7XG59XG5cbi53aWRnZXRfX2FjdG9yOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYWN0b3ItaG92ZXItYmFja2dyb3VuZCwgdmFyKC0tYmFja2dyb3VuZCkpO1xuICBmaWx0ZXI6IHZhcigtLWludGVyYWN0aXZlLWZpbHRlcik7XG59XG5cbi53aWRnZXRfX2FjdG9yIHN2ZyB7XG4gIHdpZHRoOiAxLjE0ZW07XG4gIGhlaWdodDogMS4xNGVtO1xufVxuXG5AbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHtcbiAgLndpZGdldF9fYWN0b3Igc3BhbiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuYDtcbiAgaWYgKHN0eWxlTm9uY2UpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgc3R5bGVOb25jZSk7XG4gIH1cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBzZXQgYSBkaWN0IG9mIGF0dHJpYnV0ZXMgb24gZWxlbWVudCAody8gc3BlY2lmaWVkIG5hbWVzcGFjZSlcbiAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc05TKGVsLCBhdHRyaWJ1dGVzKSB7XG4gIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLmZvckVhY2goKFtrZXksIHZhbF0pID0+IHtcbiAgICBlbC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBrZXksIHZhbCk7XG4gIH0pO1xuICByZXR1cm4gZWw7XG59XG5jb25zdCBTSVpFID0gMjA7XG5jb25zdCBYTUxOUyQyID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcblxuLyoqXG4gKiBGZWVkYmFjayBJY29uXG4gKi9cbmZ1bmN0aW9uIEZlZWRiYWNrSWNvbigpIHtcbiAgY29uc3QgY3JlYXRlRWxlbWVudE5TID0gdGFnTmFtZSA9PiBXSU5ET1cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFhNTE5TJDIsIHRhZ05hbWUpO1xuICBjb25zdCBzdmcgPSBzZXRBdHRyaWJ1dGVzTlMoY3JlYXRlRWxlbWVudE5TKCdzdmcnKSwge1xuICAgIHdpZHRoOiBgJHtTSVpFfWAsXG4gICAgaGVpZ2h0OiBgJHtTSVpFfWAsXG4gICAgdmlld0JveDogYDAgMCAke1NJWkV9ICR7U0laRX1gLFxuICAgIGZpbGw6ICd2YXIoLS1hY3Rvci1jb2xvciwgdmFyKC0tZm9yZWdyb3VuZCkpJ1xuICB9KTtcbiAgY29uc3QgZyA9IHNldEF0dHJpYnV0ZXNOUyhjcmVhdGVFbGVtZW50TlMoJ2cnKSwge1xuICAgIGNsaXBQYXRoOiAndXJsKCNjbGlwMF81N184MCknXG4gIH0pO1xuICBjb25zdCBwYXRoID0gc2V0QXR0cmlidXRlc05TKGNyZWF0ZUVsZW1lbnROUygncGF0aCcpLCB7XG4gICAgWydmaWxsLXJ1bGUnXTogJ2V2ZW5vZGQnLFxuICAgIFsnY2xpcC1ydWxlJ106ICdldmVub2RkJyxcbiAgICBkOiAnTTE1LjY2MjIgMTVIMTIuMzk5N0MxMi4yMTI5IDE0Ljk5NTkgMTIuMDMxIDE0LjkzOTYgMTEuODc0NyAxNC44Mzc1TDguMDQ5NjUgMTIuMkg3LjQ5OTU2VjE5LjFDNy40ODc1IDE5LjMzNDggNy4zODg4IDE5LjU1NjggNy4yMjI1NiAxOS43MjNDNy4wNTYzMiAxOS44ODkyIDYuODM0MzUgMTkuOTg3OSA2LjU5OTU2IDIwSDIuMDQ5NTZDMS44MDE5MyAxOS45OTY4IDEuNTY1MzUgMTkuODk2OSAxLjM5MDIzIDE5LjcyMThDMS4yMTUxMSAxOS41NDY3IDEuMTE1MyAxOS4zMTAxIDEuMTEyMDYgMTkuMDYyNVYxMi4ySDAuOTQ5NjUyQzAuODI0NDMxIDEyLjIwMTcgMC43MDAxNDIgMTIuMTc4MyAwLjU4NDEyMyAxMi4xMzExQzAuNDY4MTA0IDEyLjA4NCAwLjM2MjcwOCAxMi4wMTQgMC4yNzQxNTUgMTEuOTI1NUMwLjE4NTYwMiAxMS44MzY5IDAuMTE1Njg5IDExLjczMTUgMC4wNjg1NDE5IDExLjYxNTVDMC4wMjEzOTUyIDExLjQ5OTUgLTAuMDAyMDI5MTMgMTEuMzc1MiAtMC4wMDAzNDgwOCAxMS4yNVYzLjc1Qy0wLjAwOTAwNDk4IDMuNjIwNjcgMC4wMDkyNTA0IDMuNDkwOTUgMC4wNTMyNjUxIDMuMzY5MDRDMC4wOTcyNzk4IDMuMjQ3MTIgMC4xNjYwOTcgMy4xMzU2NiAwLjI1NTM3MiAzLjA0MTY4QzAuMzQ0NjQ2IDIuOTQ3NzEgMC40NTI0MzcgMi44NzMyNyAwLjU3MTkzNyAyLjgyMzA3QzAuNjkxNDM3IDIuNzcyODYgMC44MjAwNSAyLjc0Nzk4IDAuOTQ5NjUyIDIuNzVIOC4wNDk2NUwxMS44NzQ3IDAuMTYyNUMxMi4wMzEgMC4wNjAzNjQ5IDEyLjIxMjkgMC4wMDQwNzIyMSAxMi4zOTk3IDBIMTUuNjYyMkMxNS45MDk4IDAuMDAzMjM3NDYgMTYuMTQ2NCAwLjEwMzA0OSAxNi4zMjE1IDAuMjc4MTY3QzE2LjQ5NjYgMC40NTMyODYgMTYuNTk2NCAwLjY4OTg2NiAxNi41OTk3IDAuOTM3NVYzLjI1MjY5QzE3LjM5NjkgMy40Mjk1OSAxOC4xMzQ1IDMuODMwMjYgMTguNzIxMSA0LjQxNjc5QzE5LjUzMjIgNS4yMjc4OCAxOS45ODc4IDYuMzI3OTYgMTkuOTg3OCA3LjQ3NTAyQzE5Ljk4NzggOC42MjIwOSAxOS41MzIyIDkuNzIyMTcgMTguNzIxMSAxMC41MzMzQzE4LjEzNDUgMTEuMTE5OCAxNy4zOTY5IDExLjUyMDUgMTYuNTk5NyAxMS42OTc0VjE0LjAxMjVDMTYuNjA0NyAxNC4xMzkzIDE2LjU4NDIgMTQuMjY1OSAxNi41Mzk1IDE0LjM4NDdDMTYuNDk0OCAxNC41MDM1IDE2LjQyNjggMTQuNjEyMSAxNi4zMzk0IDE0LjcwNDJDMTYuMjUyIDE0Ljc5NjIgMTYuMTQ3IDE0Ljg2OTggMTYuMDMwNyAxNC45MjA2QzE1LjkxNDQgMTQuOTcxNCAxNS43ODkxIDE0Ljk5ODQgMTUuNjYyMiAxNVpNMS44OTY5NSAxMC4zMjVIMS44ODcxNVY0LjYyNUg4LjMzNzE1QzguNTI0MjMgNC42MjMwMSA4LjcwNjY2IDQuNTY2NTQgOC44NjIxNSA0LjQ2MjVMMTIuNjg3MiAxLjg3NUgxNC43MjQ3VjEzLjEyNUgxMi42ODcyTDguODYyMTUgMTAuNDg3NUM4LjcwNjY2IDEwLjM4MzUgOC41MjQyMyAxMC4zMjcgOC4zMzcxNSAxMC4zMjVIMi4yMDIxN0MyLjE1MjA1IDEwLjMxNjcgMi4xMDEwMiAxMC4zMTI1IDIuMDQ5NTYgMTAuMzEyNUMxLjk5ODEgMTAuMzEyNSAxLjk0NzA4IDEwLjMxNjcgMS44OTY5NSAxMC4zMjVaTTIuOTg3MDYgMTIuMlYxOC4xNjI1SDUuNjYyMDZWMTIuMkgyLjk4NzA2Wk0xNi41OTk3IDkuOTM2MTJWNS4wMTM5M0MxNi42NTM2IDUuMDIzNTUgMTYuNzA3MiA1LjAzNDk1IDE2Ljc2MDUgNS4wNDgxNEMxNy4xMjAyIDUuMTM3MDkgMTcuNDU1NiA1LjMwNDg3IDE3Ljc0MjUgNS41MzkzNEMxOC4wMjkzIDUuNzczODEgMTguMjYwNSA2LjA2OTEyIDE4LjQxOTIgNi40MDM4OUMxOC41NzggNi43Mzg2NiAxOC42NjAzIDcuMTA0NTIgMTguNjYwMyA3LjQ3NTAyQzE4LjY2MDMgNy44NDU1MiAxOC41NzggOC4yMTEzOSAxOC40MTkyIDguNTQ2MTZDMTguMjYwNSA4Ljg4MDkzIDE4LjAyOTMgOS4xNzYyNCAxNy43NDI1IDkuNDEwNzFDMTcuNDU1NiA5LjY0NTE4IDE3LjEyMDIgOS44MTI5NiAxNi43NjA1IDkuOTAxOTFDMTYuNzA3MiA5LjkxNTA5IDE2LjY1MzYgOS45MjY1IDE2LjU5OTcgOS45MzYxMlonXG4gIH0pO1xuICBzdmcuYXBwZW5kQ2hpbGQoZykuYXBwZW5kQ2hpbGQocGF0aCk7XG4gIGNvbnN0IHNwZWFrZXJEZWZzID0gY3JlYXRlRWxlbWVudE5TKCdkZWZzJyk7XG4gIGNvbnN0IHNwZWFrZXJDbGlwUGF0aERlZiA9IHNldEF0dHJpYnV0ZXNOUyhjcmVhdGVFbGVtZW50TlMoJ2NsaXBQYXRoJyksIHtcbiAgICBpZDogJ2NsaXAwXzU3XzgwJ1xuICB9KTtcbiAgY29uc3Qgc3BlYWtlclJlY3QgPSBzZXRBdHRyaWJ1dGVzTlMoY3JlYXRlRWxlbWVudE5TKCdyZWN0JyksIHtcbiAgICB3aWR0aDogYCR7U0laRX1gLFxuICAgIGhlaWdodDogYCR7U0laRX1gLFxuICAgIGZpbGw6ICd3aGl0ZSdcbiAgfSk7XG4gIHNwZWFrZXJDbGlwUGF0aERlZi5hcHBlbmRDaGlsZChzcGVha2VyUmVjdCk7XG4gIHNwZWFrZXJEZWZzLmFwcGVuZENoaWxkKHNwZWFrZXJDbGlwUGF0aERlZik7XG4gIHN2Zy5hcHBlbmRDaGlsZChzcGVha2VyRGVmcykuYXBwZW5kQ2hpbGQoc3BlYWtlckNsaXBQYXRoRGVmKS5hcHBlbmRDaGlsZChzcGVha2VyUmVjdCk7XG4gIHJldHVybiBzdmc7XG59XG5cbi8qKlxuICogVGhlIHNlbnRyeS1wcm92aWRlZCBidXR0b24gdG8gb3BlbiB0aGUgZmVlZGJhY2sgbW9kYWxcbiAqL1xuZnVuY3Rpb24gQWN0b3Ioe1xuICB0cmlnZ2VyTGFiZWwsXG4gIHRyaWdnZXJBcmlhTGFiZWwsXG4gIHNoYWRvdyxcbiAgc3R5bGVOb25jZVxufSkge1xuICBjb25zdCBlbCA9IERPQ1VNRU5ULmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBlbC50eXBlID0gJ2J1dHRvbic7XG4gIGVsLmNsYXNzTmFtZSA9ICd3aWRnZXRfX2FjdG9yJztcbiAgZWwuYXJpYUhpZGRlbiA9ICdmYWxzZSc7XG4gIGVsLmFyaWFMYWJlbCA9IHRyaWdnZXJBcmlhTGFiZWwgfHwgdHJpZ2dlckxhYmVsIHx8IFRSSUdHRVJfTEFCRUw7XG4gIGVsLmFwcGVuZENoaWxkKEZlZWRiYWNrSWNvbigpKTtcbiAgaWYgKHRyaWdnZXJMYWJlbCkge1xuICAgIGNvbnN0IGxhYmVsID0gRE9DVU1FTlQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGxhYmVsLmFwcGVuZENoaWxkKERPQ1VNRU5ULmNyZWF0ZVRleHROb2RlKHRyaWdnZXJMYWJlbCkpO1xuICAgIGVsLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgfVxuICBjb25zdCBzdHlsZSA9IGNyZWF0ZUFjdG9yU3R5bGVzKHN0eWxlTm9uY2UpO1xuICByZXR1cm4ge1xuICAgIGVsLFxuICAgIGFwcGVuZFRvRG9tKCkge1xuICAgICAgc2hhZG93LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgIHNoYWRvdy5hcHBlbmRDaGlsZChlbCk7XG4gICAgfSxcbiAgICByZW1vdmVGcm9tRG9tKCkge1xuICAgICAgZWwucmVtb3ZlKCk7XG4gICAgICBzdHlsZS5yZW1vdmUoKTtcbiAgICB9LFxuICAgIHNob3coKSB7XG4gICAgICBlbC5hcmlhSGlkZGVuID0gJ2ZhbHNlJztcbiAgICB9LFxuICAgIGhpZGUoKSB7XG4gICAgICBlbC5hcmlhSGlkZGVuID0gJ3RydWUnO1xuICAgIH1cbiAgfTtcbn1cbmNvbnN0IFBVUlBMRSA9ICdyZ2JhKDg4LCA3NCwgMTkyLCAxKSc7XG5jb25zdCBERUZBVUxUX0xJR0hUID0ge1xuICBmb3JlZ3JvdW5kOiAnIzJiMjIzMycsXG4gIGJhY2tncm91bmQ6ICcjZmZmZmZmJyxcbiAgYWNjZW50Rm9yZWdyb3VuZDogJ3doaXRlJyxcbiAgYWNjZW50QmFja2dyb3VuZDogUFVSUExFLFxuICBzdWNjZXNzQ29sb3I6ICcjMjY4ZDc1JyxcbiAgZXJyb3JDb2xvcjogJyNkZjMzMzgnLFxuICBib3JkZXI6ICcxLjVweCBzb2xpZCByZ2JhKDQxLCAzNSwgNDcsIDAuMTMpJyxcbiAgYm94U2hhZG93OiAnMHB4IDRweCAyNHB4IDBweCByZ2JhKDQzLCAzNCwgNTEsIDAuMTIpJyxcbiAgb3V0bGluZTogJzFweCBhdXRvIHZhcigtLWFjY2VudC1iYWNrZ3JvdW5kKScsXG4gIGludGVyYWN0aXZlRmlsdGVyOiAnYnJpZ2h0bmVzcyg5NSUpJ1xufTtcbmNvbnN0IERFRkFVTFRfREFSSyA9IHtcbiAgZm9yZWdyb3VuZDogJyNlYmU2ZWYnLFxuICBiYWNrZ3JvdW5kOiAnIzI5MjMyZicsXG4gIGFjY2VudEZvcmVncm91bmQ6ICd3aGl0ZScsXG4gIGFjY2VudEJhY2tncm91bmQ6IFBVUlBMRSxcbiAgc3VjY2Vzc0NvbG9yOiAnIzJkYTk4YycsXG4gIGVycm9yQ29sb3I6ICcjZjU1NDU5JyxcbiAgYm9yZGVyOiAnMS41cHggc29saWQgcmdiYSgyMzUsIDIzMCwgMjM5LCAwLjE1KScsXG4gIGJveFNoYWRvdzogJzBweCA0cHggMjRweCAwcHggcmdiYSg0MywgMzQsIDUxLCAwLjEyKScsXG4gIG91dGxpbmU6ICcxcHggYXV0byB2YXIoLS1hY2NlbnQtYmFja2dyb3VuZCknLFxuICBpbnRlcmFjdGl2ZUZpbHRlcjogJ2JyaWdodG5lc3MoMTUwJSknXG59O1xuZnVuY3Rpb24gZ2V0VGhlbWVkQ3NzVmFyaWFibGVzKHRoZW1lKSB7XG4gIHJldHVybiBgXG4gIC0tZm9yZWdyb3VuZDogJHt0aGVtZS5mb3JlZ3JvdW5kfTtcbiAgLS1iYWNrZ3JvdW5kOiAke3RoZW1lLmJhY2tncm91bmR9O1xuICAtLWFjY2VudC1mb3JlZ3JvdW5kOiAke3RoZW1lLmFjY2VudEZvcmVncm91bmR9O1xuICAtLWFjY2VudC1iYWNrZ3JvdW5kOiAke3RoZW1lLmFjY2VudEJhY2tncm91bmR9O1xuICAtLXN1Y2Nlc3MtY29sb3I6ICR7dGhlbWUuc3VjY2Vzc0NvbG9yfTtcbiAgLS1lcnJvci1jb2xvcjogJHt0aGVtZS5lcnJvckNvbG9yfTtcbiAgLS1ib3JkZXI6ICR7dGhlbWUuYm9yZGVyfTtcbiAgLS1ib3gtc2hhZG93OiAke3RoZW1lLmJveFNoYWRvd307XG4gIC0tb3V0bGluZTogJHt0aGVtZS5vdXRsaW5lfTtcbiAgLS1pbnRlcmFjdGl2ZS1maWx0ZXI6ICR7dGhlbWUuaW50ZXJhY3RpdmVGaWx0ZXJ9O1xuICBgO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgPHN0eWxlPiBlbGVtZW50IGZvciB3aWRnZXQgYWN0b3IgKGJ1dHRvbiB0aGF0IG9wZW5zIHRoZSBkaWFsb2cpXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1haW5TdHlsZXMoe1xuICBjb2xvclNjaGVtZSxcbiAgdGhlbWVEYXJrLFxuICB0aGVtZUxpZ2h0LFxuICBzdHlsZU5vbmNlXG59KSB7XG4gIGNvbnN0IHN0eWxlID0gRE9DVU1FTlQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgc3R5bGUudGV4dENvbnRlbnQgPSBgXG46aG9zdCB7XG4gIC0tZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgJ0hlbHZldGljYSBOZXVlJywgQXJpYWwsIHNhbnMtc2VyaWY7XG4gIC0tZm9udC1zaXplOiAxNHB4O1xuICAtLXotaW5kZXg6IDEwMDAwMDtcblxuICAtLXBhZ2UtbWFyZ2luOiAxNnB4O1xuICAtLWluc2V0OiBhdXRvIDAgMCBhdXRvO1xuICAtLWFjdG9yLWluc2V0OiB2YXIoLS1pbnNldCk7XG5cbiAgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtZmFtaWx5KTtcbiAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUpO1xuXG4gICR7Y29sb3JTY2hlbWUgIT09ICdzeXN0ZW0nID8gJ2NvbG9yLXNjaGVtZTogb25seSBsaWdodDsnIDogJyd9XG5cbiAgJHtnZXRUaGVtZWRDc3NWYXJpYWJsZXMoY29sb3JTY2hlbWUgPT09ICdkYXJrJyA/IHtcbiAgICAuLi5ERUZBVUxUX0RBUkssXG4gICAgLi4udGhlbWVEYXJrXG4gIH0gOiB7XG4gICAgLi4uREVGQVVMVF9MSUdIVCxcbiAgICAuLi50aGVtZUxpZ2h0XG4gIH0pfVxufVxuXG4ke2NvbG9yU2NoZW1lID09PSAnc3lzdGVtJyA/IGBcbkBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIHtcbiAgOmhvc3Qge1xuICAgICR7Z2V0VGhlbWVkQ3NzVmFyaWFibGVzKHtcbiAgICAuLi5ERUZBVUxUX0RBUkssXG4gICAgLi4udGhlbWVEYXJrXG4gIH0pfVxuICB9XG59YCA6ICcnfVxufVxuYDtcbiAgaWYgKHN0eWxlTm9uY2UpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgc3R5bGVOb25jZSk7XG4gIH1cbiAgcmV0dXJuIHN0eWxlO1xufVxuY29uc3QgYnVpbGRGZWVkYmFja0ludGVncmF0aW9uID0gKHtcbiAgbGF6eUxvYWRJbnRlZ3JhdGlvbixcbiAgZ2V0TW9kYWxJbnRlZ3JhdGlvbixcbiAgZ2V0U2NyZWVuc2hvdEludGVncmF0aW9uXG59KSA9PiB7XG4gIGNvbnN0IGZlZWRiYWNrSW50ZWdyYXRpb24gPSAoe1xuICAgIC8vIEZlZWRiYWNrR2VuZXJhbENvbmZpZ3VyYXRpb25cbiAgICBpZCA9ICdzZW50cnktZmVlZGJhY2snLFxuICAgIGF1dG9JbmplY3QgPSB0cnVlLFxuICAgIHNob3dCcmFuZGluZyA9IHRydWUsXG4gICAgaXNFbWFpbFJlcXVpcmVkID0gZmFsc2UsXG4gICAgaXNOYW1lUmVxdWlyZWQgPSBmYWxzZSxcbiAgICBzaG93RW1haWwgPSB0cnVlLFxuICAgIHNob3dOYW1lID0gdHJ1ZSxcbiAgICBlbmFibGVTY3JlZW5zaG90ID0gdHJ1ZSxcbiAgICB1c2VTZW50cnlVc2VyID0ge1xuICAgICAgZW1haWw6ICdlbWFpbCcsXG4gICAgICBuYW1lOiAndXNlcm5hbWUnXG4gICAgfSxcbiAgICB0YWdzLFxuICAgIHN0eWxlTm9uY2UsXG4gICAgc2NyaXB0Tm9uY2UsXG4gICAgLy8gRmVlZGJhY2tUaGVtZUNvbmZpZ3VyYXRpb25cbiAgICBjb2xvclNjaGVtZSA9ICdzeXN0ZW0nLFxuICAgIHRoZW1lTGlnaHQgPSB7fSxcbiAgICB0aGVtZURhcmsgPSB7fSxcbiAgICAvLyBGZWVkYmFja1RleHRDb25maWd1cmF0aW9uXG4gICAgYWRkU2NyZWVuc2hvdEJ1dHRvbkxhYmVsID0gQUREX1NDUkVFTlNIT1RfTEFCRUwsXG4gICAgY2FuY2VsQnV0dG9uTGFiZWwgPSBDQU5DRUxfQlVUVE9OX0xBQkVMLFxuICAgIGNvbmZpcm1CdXR0b25MYWJlbCA9IENPTkZJUk1fQlVUVE9OX0xBQkVMLFxuICAgIGVtYWlsTGFiZWwgPSBFTUFJTF9MQUJFTCxcbiAgICBlbWFpbFBsYWNlaG9sZGVyID0gRU1BSUxfUExBQ0VIT0xERVIsXG4gICAgZm9ybVRpdGxlID0gRk9STV9USVRMRSxcbiAgICBpc1JlcXVpcmVkTGFiZWwgPSBJU19SRVFVSVJFRF9MQUJFTCxcbiAgICBtZXNzYWdlTGFiZWwgPSBNRVNTQUdFX0xBQkVMLFxuICAgIG1lc3NhZ2VQbGFjZWhvbGRlciA9IE1FU1NBR0VfUExBQ0VIT0xERVIsXG4gICAgbmFtZUxhYmVsID0gTkFNRV9MQUJFTCxcbiAgICBuYW1lUGxhY2Vob2xkZXIgPSBOQU1FX1BMQUNFSE9MREVSLFxuICAgIHJlbW92ZVNjcmVlbnNob3RCdXR0b25MYWJlbCA9IFJFTU9WRV9TQ1JFRU5TSE9UX0xBQkVMLFxuICAgIHN1Ym1pdEJ1dHRvbkxhYmVsID0gU1VCTUlUX0JVVFRPTl9MQUJFTCxcbiAgICBzdWNjZXNzTWVzc2FnZVRleHQgPSBTVUNDRVNTX01FU1NBR0VfVEVYVCxcbiAgICB0cmlnZ2VyTGFiZWwgPSBUUklHR0VSX0xBQkVMLFxuICAgIHRyaWdnZXJBcmlhTGFiZWwgPSAnJyxcbiAgICAvLyBGZWVkYmFja0NhbGxiYWNrc1xuICAgIG9uRm9ybU9wZW4sXG4gICAgb25Gb3JtQ2xvc2UsXG4gICAgb25TdWJtaXRTdWNjZXNzLFxuICAgIG9uU3VibWl0RXJyb3IsXG4gICAgb25Gb3JtU3VibWl0dGVkXG4gIH0gPSB7fSkgPT4ge1xuICAgIGNvbnN0IF9vcHRpb25zID0ge1xuICAgICAgaWQsXG4gICAgICBhdXRvSW5qZWN0LFxuICAgICAgc2hvd0JyYW5kaW5nLFxuICAgICAgaXNFbWFpbFJlcXVpcmVkLFxuICAgICAgaXNOYW1lUmVxdWlyZWQsXG4gICAgICBzaG93RW1haWwsXG4gICAgICBzaG93TmFtZSxcbiAgICAgIGVuYWJsZVNjcmVlbnNob3QsXG4gICAgICB1c2VTZW50cnlVc2VyLFxuICAgICAgdGFncyxcbiAgICAgIHN0eWxlTm9uY2UsXG4gICAgICBzY3JpcHROb25jZSxcbiAgICAgIGNvbG9yU2NoZW1lLFxuICAgICAgdGhlbWVEYXJrLFxuICAgICAgdGhlbWVMaWdodCxcbiAgICAgIHRyaWdnZXJMYWJlbCxcbiAgICAgIHRyaWdnZXJBcmlhTGFiZWwsXG4gICAgICBjYW5jZWxCdXR0b25MYWJlbCxcbiAgICAgIHN1Ym1pdEJ1dHRvbkxhYmVsLFxuICAgICAgY29uZmlybUJ1dHRvbkxhYmVsLFxuICAgICAgZm9ybVRpdGxlLFxuICAgICAgZW1haWxMYWJlbCxcbiAgICAgIGVtYWlsUGxhY2Vob2xkZXIsXG4gICAgICBtZXNzYWdlTGFiZWwsXG4gICAgICBtZXNzYWdlUGxhY2Vob2xkZXIsXG4gICAgICBuYW1lTGFiZWwsXG4gICAgICBuYW1lUGxhY2Vob2xkZXIsXG4gICAgICBzdWNjZXNzTWVzc2FnZVRleHQsXG4gICAgICBpc1JlcXVpcmVkTGFiZWwsXG4gICAgICBhZGRTY3JlZW5zaG90QnV0dG9uTGFiZWwsXG4gICAgICByZW1vdmVTY3JlZW5zaG90QnV0dG9uTGFiZWwsXG4gICAgICBvbkZvcm1DbG9zZSxcbiAgICAgIG9uRm9ybU9wZW4sXG4gICAgICBvblN1Ym1pdEVycm9yLFxuICAgICAgb25TdWJtaXRTdWNjZXNzLFxuICAgICAgb25Gb3JtU3VibWl0dGVkXG4gICAgfTtcbiAgICBsZXQgX3NoYWRvdyA9IG51bGw7XG4gICAgbGV0IF9zdWJzY3JpcHRpb25zID0gW107XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNoYWRvdyByb290IHdoZXJlIHdlIHdpbGwgYXBwZW5kIGNzc1xuICAgICAqL1xuICAgIGNvbnN0IF9jcmVhdGVTaGFkb3cgPSBvcHRpb25zID0+IHtcbiAgICAgIGlmICghX3NoYWRvdykge1xuICAgICAgICBjb25zdCBob3N0ID0gRE9DVU1FTlQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhvc3QuaWQgPSBTdHJpbmcob3B0aW9ucy5pZCk7XG4gICAgICAgIERPQ1VNRU5ULmJvZHkuYXBwZW5kQ2hpbGQoaG9zdCk7XG4gICAgICAgIF9zaGFkb3cgPSBob3N0LmF0dGFjaFNoYWRvdyh7XG4gICAgICAgICAgbW9kZTogJ29wZW4nXG4gICAgICAgIH0pO1xuICAgICAgICBfc2hhZG93LmFwcGVuZENoaWxkKGNyZWF0ZU1haW5TdHlsZXMob3B0aW9ucykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9zaGFkb3c7XG4gICAgfTtcbiAgICBjb25zdCBfbG9hZEFuZFJlbmRlckRpYWxvZyA9IGFzeW5jIG9wdGlvbnMgPT4ge1xuICAgICAgY29uc3Qgc2NyZWVuc2hvdFJlcXVpcmVkID0gb3B0aW9ucy5lbmFibGVTY3JlZW5zaG90ICYmIGlzU2NyZWVuc2hvdFN1cHBvcnRlZCgpO1xuICAgICAgbGV0IG1vZGFsSW50ZWdyYXRpb247XG4gICAgICBsZXQgc2NyZWVuc2hvdEludGVncmF0aW9uO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbW9kYWxJbnRlZ3JhdGlvbkZuID0gZ2V0TW9kYWxJbnRlZ3JhdGlvbiA/IGdldE1vZGFsSW50ZWdyYXRpb24oKSA6IGF3YWl0IGxhenlMb2FkSW50ZWdyYXRpb24oJ2ZlZWRiYWNrTW9kYWxJbnRlZ3JhdGlvbicsIHNjcmlwdE5vbmNlKTtcbiAgICAgICAgbW9kYWxJbnRlZ3JhdGlvbiA9IG1vZGFsSW50ZWdyYXRpb25GbigpO1xuICAgICAgICBhZGRJbnRlZ3JhdGlvbihtb2RhbEludGVncmF0aW9uKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuZXJyb3IoJ1tGZWVkYmFja10gRXJyb3Igd2hlbiB0cnlpbmcgdG8gbG9hZCBmZWVkYmFjayBpbnRlZ3JhdGlvbnMuIFRyeSB1c2luZyBgZmVlZGJhY2tTeW5jSW50ZWdyYXRpb25gIGluIHlvdXIgYFNlbnRyeS5pbml0YC4nKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdbRmVlZGJhY2tdIE1pc3NpbmcgZmVlZGJhY2sgbW9kYWwgaW50ZWdyYXRpb24hJyk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzY3JlZW5zaG90SW50ZWdyYXRpb25GbiA9IHNjcmVlbnNob3RSZXF1aXJlZCA/IGdldFNjcmVlbnNob3RJbnRlZ3JhdGlvbiA/IGdldFNjcmVlbnNob3RJbnRlZ3JhdGlvbigpIDogYXdhaXQgbGF6eUxvYWRJbnRlZ3JhdGlvbignZmVlZGJhY2tTY3JlZW5zaG90SW50ZWdyYXRpb24nLCBzY3JpcHROb25jZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzY3JlZW5zaG90SW50ZWdyYXRpb25Gbikge1xuICAgICAgICAgIHNjcmVlbnNob3RJbnRlZ3JhdGlvbiA9IHNjcmVlbnNob3RJbnRlZ3JhdGlvbkZuKCk7XG4gICAgICAgICAgYWRkSW50ZWdyYXRpb24oc2NyZWVuc2hvdEludGVncmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5lcnJvcignW0ZlZWRiYWNrXSBNaXNzaW5nIGZlZWRiYWNrIHNjcmVlbnNob3QgaW50ZWdyYXRpb24uIFByb2NlZWRpbmcgd2l0aG91dCBzY3JlZW5zaG90cy4nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpYWxvZyA9IG1vZGFsSW50ZWdyYXRpb24uY3JlYXRlRGlhbG9nKHtcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgb25Gb3JtQ2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGRpYWxvZz8uY2xvc2UoKTtcbiAgICAgICAgICAgIG9wdGlvbnMub25Gb3JtQ2xvc2U/LigpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Gb3JtU3VibWl0dGVkOiAoKSA9PiB7XG4gICAgICAgICAgICBkaWFsb2c/LmNsb3NlKCk7XG4gICAgICAgICAgICBvcHRpb25zLm9uRm9ybVN1Ym1pdHRlZD8uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzY3JlZW5zaG90SW50ZWdyYXRpb24sXG4gICAgICAgIHNlbmRGZWVkYmFjayxcbiAgICAgICAgc2hhZG93OiBfY3JlYXRlU2hhZG93KG9wdGlvbnMpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkaWFsb2c7XG4gICAgfTtcbiAgICBjb25zdCBfYXR0YWNoVG8gPSAoZWwsIG9wdGlvbk92ZXJyaWRlcyA9IHt9KSA9PiB7XG4gICAgICBjb25zdCBtZXJnZWRPcHRpb25zID0gbWVyZ2VPcHRpb25zKF9vcHRpb25zLCBvcHRpb25PdmVycmlkZXMpO1xuICAgICAgY29uc3QgdGFyZ2V0RWwgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gRE9DVU1FTlQucXVlcnlTZWxlY3RvcihlbCkgOiB0eXBlb2YgZWwuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJyA/IGVsIDogbnVsbDtcbiAgICAgIGlmICghdGFyZ2V0RWwpIHtcbiAgICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmVycm9yKCdbRmVlZGJhY2tdIFVuYWJsZSB0byBhdHRhY2ggdG8gdGFyZ2V0IGVsZW1lbnQnKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gYXR0YWNoIHRvIHRhcmdldCBlbGVtZW50Jyk7XG4gICAgICB9XG4gICAgICBsZXQgZGlhbG9nID0gbnVsbDtcbiAgICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIWRpYWxvZykge1xuICAgICAgICAgIGRpYWxvZyA9IGF3YWl0IF9sb2FkQW5kUmVuZGVyRGlhbG9nKHtcbiAgICAgICAgICAgIC4uLm1lcmdlZE9wdGlvbnMsXG4gICAgICAgICAgICBvbkZvcm1TdWJtaXR0ZWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgZGlhbG9nPy5yZW1vdmVGcm9tRG9tKCk7XG4gICAgICAgICAgICAgIG1lcmdlZE9wdGlvbnMub25Gb3JtU3VibWl0dGVkPy4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBkaWFsb2cuYXBwZW5kVG9Eb20oKTtcbiAgICAgICAgZGlhbG9nLm9wZW4oKTtcbiAgICAgIH07XG4gICAgICB0YXJnZXRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTtcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gKCkgPT4ge1xuICAgICAgICBfc3Vic2NyaXB0aW9ucyA9IF9zdWJzY3JpcHRpb25zLmZpbHRlcihzdWIgPT4gc3ViICE9PSB1bnN1YnNjcmliZSk7XG4gICAgICAgIGRpYWxvZz8ucmVtb3ZlRnJvbURvbSgpO1xuICAgICAgICBkaWFsb2cgPSBudWxsO1xuICAgICAgICB0YXJnZXRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTtcbiAgICAgIH07XG4gICAgICBfc3Vic2NyaXB0aW9ucy5wdXNoKHVuc3Vic2NyaWJlKTtcbiAgICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgICB9O1xuICAgIGNvbnN0IF9jcmVhdGVBY3RvciA9IChvcHRpb25PdmVycmlkZXMgPSB7fSkgPT4ge1xuICAgICAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhfb3B0aW9ucywgb3B0aW9uT3ZlcnJpZGVzKTtcbiAgICAgIGNvbnN0IHNoYWRvdyA9IF9jcmVhdGVTaGFkb3cobWVyZ2VkT3B0aW9ucyk7XG4gICAgICBjb25zdCBhY3RvciA9IEFjdG9yKHtcbiAgICAgICAgdHJpZ2dlckxhYmVsOiBtZXJnZWRPcHRpb25zLnRyaWdnZXJMYWJlbCxcbiAgICAgICAgdHJpZ2dlckFyaWFMYWJlbDogbWVyZ2VkT3B0aW9ucy50cmlnZ2VyQXJpYUxhYmVsLFxuICAgICAgICBzaGFkb3csXG4gICAgICAgIHN0eWxlTm9uY2VcbiAgICAgIH0pO1xuICAgICAgX2F0dGFjaFRvKGFjdG9yLmVsLCB7XG4gICAgICAgIC4uLm1lcmdlZE9wdGlvbnMsXG4gICAgICAgIG9uRm9ybU9wZW4oKSB7XG4gICAgICAgICAgYWN0b3IuaGlkZSgpO1xuICAgICAgICB9LFxuICAgICAgICBvbkZvcm1DbG9zZSgpIHtcbiAgICAgICAgICBhY3Rvci5zaG93KCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRm9ybVN1Ym1pdHRlZCgpIHtcbiAgICAgICAgICBhY3Rvci5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjdG9yO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6ICdGZWVkYmFjaycsXG4gICAgICBzZXR1cE9uY2UoKSB7XG4gICAgICAgIGlmICghaXNCcm93c2VyKCkgfHwgIV9vcHRpb25zLmF1dG9JbmplY3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKERPQ1VNRU5ULnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xuICAgICAgICAgIERPQ1VNRU5ULmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiBfY3JlYXRlQWN0b3IoKS5hcHBlbmRUb0RvbSgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfY3JlYXRlQWN0b3IoKS5hcHBlbmRUb0RvbSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBBZGRzIGNsaWNrIGxpc3RlbmVyIHRvIHRoZSBlbGVtZW50IHRvIG9wZW4gYSBmZWVkYmFjayBkaWFsb2dcbiAgICAgICAqXG4gICAgICAgKiBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gcmVtb3ZlIHRoZSBjbGljayBsaXN0ZW5lclxuICAgICAgICovXG4gICAgICBhdHRhY2hUbzogX2F0dGFjaFRvLFxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGEgbmV3IHdpZGdldCB3aGljaCBpcyBjb21wb3NlZCBvZiBhIEJ1dHRvbiB3aGljaCB0cmlnZ2VycyBhIERpYWxvZy5cbiAgICAgICAqIEFjY2VwdHMgcGFydGlhbCBvcHRpb25zIHRvIG92ZXJyaWRlIGFueSBvcHRpb25zIHBhc3NlZCB0byBjb25zdHJ1Y3Rvci5cbiAgICAgICAqL1xuICAgICAgY3JlYXRlV2lkZ2V0KG9wdGlvbk92ZXJyaWRlcyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGFjdG9yID0gX2NyZWF0ZUFjdG9yKG1lcmdlT3B0aW9ucyhfb3B0aW9ucywgb3B0aW9uT3ZlcnJpZGVzKSk7XG4gICAgICAgIGFjdG9yLmFwcGVuZFRvRG9tKCk7XG4gICAgICAgIHJldHVybiBhY3RvcjtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBuZXcgRm9ybSB3aGljaCB5b3UgY2FuXG4gICAgICAgKiBBY2NlcHRzIHBhcnRpYWwgb3B0aW9ucyB0byBvdmVycmlkZSBhbnkgb3B0aW9ucyBwYXNzZWQgdG8gY29uc3RydWN0b3IuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNyZWF0ZUZvcm0ob3B0aW9uT3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgcmV0dXJuIF9sb2FkQW5kUmVuZGVyRGlhbG9nKG1lcmdlT3B0aW9ucyhfb3B0aW9ucywgb3B0aW9uT3ZlcnJpZGVzKSk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmVzIHRoZSBGZWVkYmFjayBpbnRlZ3JhdGlvbiAoaW5jbHVkaW5nIGhvc3QsIHNoYWRvdyBET00sIGFuZCBhbGwgd2lkZ2V0cylcbiAgICAgICAqL1xuICAgICAgcmVtb3ZlKCkge1xuICAgICAgICBpZiAoX3NoYWRvdykge1xuICAgICAgICAgIF9zaGFkb3cucGFyZW50RWxlbWVudD8ucmVtb3ZlKCk7XG4gICAgICAgICAgX3NoYWRvdyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIGFueSBsaW5nZXJpbmcgc3Vic2NyaXB0aW9uc1xuICAgICAgICBfc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHN1YiA9PiBzdWIoKSk7XG4gICAgICAgIF9zdWJzY3JpcHRpb25zID0gW107XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIGZlZWRiYWNrSW50ZWdyYXRpb247XG59O1xuXG4vKipcbiAqIFRoaXMgaXMgYSBzbWFsbCB1dGlsaXR5IHRvIGdldCBhIHR5cGUtc2FmZSBpbnN0YW5jZSBvZiB0aGUgRmVlZGJhY2sgaW50ZWdyYXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldEZlZWRiYWNrKCkge1xuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgcmV0dXJuIGNsaWVudD8uZ2V0SW50ZWdyYXRpb25CeU5hbWUoJ0ZlZWRiYWNrJyk7XG59XG52YXIgbixcbiAgbCQxLFxuICB1JDEsXG4gIGkkMSxcbiAgbyQxLFxuICByJDEsXG4gIGYkMSxcbiAgYyQxID0ge30sXG4gIHMkMSA9IFtdLFxuICBhJDEgPSAvYWNpdHxleCg/OnN8Z3xufHB8JCl8cnBofGdyaWR8b3dzfG1uY3xudHd8aW5lW2NoXXx6b298Xm9yZHxpdGVyYS9pLFxuICBoJDEgPSBBcnJheS5pc0FycmF5O1xuZnVuY3Rpb24gdiQxKG4sIGwpIHtcbiAgZm9yICh2YXIgdSBpbiBsKSBuW3VdID0gbFt1XTtcbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBwJDEobikge1xuICB2YXIgbCA9IG4ucGFyZW50Tm9kZTtcbiAgbCAmJiBsLnJlbW92ZUNoaWxkKG4pO1xufVxuZnVuY3Rpb24geSQxKGwsIHUsIHQpIHtcbiAgdmFyIGksXG4gICAgbyxcbiAgICByLFxuICAgIGYgPSB7fTtcbiAgZm9yIChyIGluIHUpIFwia2V5XCIgPT0gciA/IGkgPSB1W3JdIDogXCJyZWZcIiA9PSByID8gbyA9IHVbcl0gOiBmW3JdID0gdVtyXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIChmLmNoaWxkcmVuID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBuLmNhbGwoYXJndW1lbnRzLCAyKSA6IHQpLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGwgJiYgbnVsbCAhPSBsLmRlZmF1bHRQcm9wcykgZm9yIChyIGluIGwuZGVmYXVsdFByb3BzKSB2b2lkIDAgPT09IGZbcl0gJiYgKGZbcl0gPSBsLmRlZmF1bHRQcm9wc1tyXSk7XG4gIHJldHVybiBkJDEobCwgZiwgaSwgbywgbnVsbCk7XG59XG5mdW5jdGlvbiBkJDEobiwgdCwgaSwgbywgcikge1xuICB2YXIgZiA9IHtcbiAgICB0eXBlOiBuLFxuICAgIHByb3BzOiB0LFxuICAgIGtleTogaSxcbiAgICByZWY6IG8sXG4gICAgX19rOiBudWxsLFxuICAgIF9fOiBudWxsLFxuICAgIF9fYjogMCxcbiAgICBfX2U6IG51bGwsXG4gICAgX19kOiB2b2lkIDAsXG4gICAgX19jOiBudWxsLFxuICAgIGNvbnN0cnVjdG9yOiB2b2lkIDAsXG4gICAgX192OiBudWxsID09IHIgPyArK3UkMSA6IHIsXG4gICAgX19pOiAtMSxcbiAgICBfX3U6IDBcbiAgfTtcbiAgcmV0dXJuIG51bGwgPT0gciAmJiBudWxsICE9IGwkMS52bm9kZSAmJiBsJDEudm5vZGUoZiksIGY7XG59XG5mdW5jdGlvbiBnJDEobikge1xuICByZXR1cm4gbi5jaGlsZHJlbjtcbn1cbmZ1bmN0aW9uIGIkMShuLCBsKSB7XG4gIHRoaXMucHJvcHMgPSBuLCB0aGlzLmNvbnRleHQgPSBsO1xufVxuZnVuY3Rpb24gbSQxKG4sIGwpIHtcbiAgaWYgKG51bGwgPT0gbCkgcmV0dXJuIG4uX18gPyBtJDEobi5fXywgbi5fX2kgKyAxKSA6IG51bGw7XG4gIGZvciAodmFyIHU7IGwgPCBuLl9fay5sZW5ndGg7IGwrKykgaWYgKG51bGwgIT0gKHUgPSBuLl9fa1tsXSkgJiYgbnVsbCAhPSB1Ll9fZSkgcmV0dXJuIHUuX19lO1xuICByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiBuLnR5cGUgPyBtJDEobikgOiBudWxsO1xufVxuZnVuY3Rpb24gdyQxKG4sIHUsIHQpIHtcbiAgdmFyIGksXG4gICAgbyA9IG4uX192LFxuICAgIHIgPSBvLl9fZSxcbiAgICBmID0gbi5fX1A7XG4gIGlmIChmKSByZXR1cm4gKGkgPSB2JDEoe30sIG8pKS5fX3YgPSBvLl9fdiArIDEsIGwkMS52bm9kZSAmJiBsJDEudm5vZGUoaSksIE0oZiwgaSwgbywgbi5fX24sIHZvaWQgMCAhPT0gZi5vd25lclNWR0VsZW1lbnQsIDMyICYgby5fX3UgPyBbcl0gOiBudWxsLCB1LCBudWxsID09IHIgPyBtJDEobykgOiByLCAhISgzMiAmIG8uX191KSwgdCksIGkuX18uX19rW2kuX19pXSA9IGksIGkuX19kID0gdm9pZCAwLCBpLl9fZSAhPSByICYmIGskMShpKSwgaTtcbn1cbmZ1bmN0aW9uIGskMShuKSB7XG4gIHZhciBsLCB1O1xuICBpZiAobnVsbCAhPSAobiA9IG4uX18pICYmIG51bGwgIT0gbi5fX2MpIHtcbiAgICBmb3IgKG4uX19lID0gbi5fX2MuYmFzZSA9IG51bGwsIGwgPSAwOyBsIDwgbi5fX2subGVuZ3RoOyBsKyspIGlmIChudWxsICE9ICh1ID0gbi5fX2tbbF0pICYmIG51bGwgIT0gdS5fX2UpIHtcbiAgICAgIG4uX19lID0gbi5fX2MuYmFzZSA9IHUuX19lO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBrJDEobik7XG4gIH1cbn1cbmZ1bmN0aW9uIHgkMShuKSB7XG4gICghbi5fX2QgJiYgKG4uX19kID0gdHJ1ZSkgJiYgaSQxLnB1c2gobikgJiYgIUMkMS5fX3IrKyB8fCBvJDEgIT09IGwkMS5kZWJvdW5jZVJlbmRlcmluZykgJiYgKChvJDEgPSBsJDEuZGVib3VuY2VSZW5kZXJpbmcpIHx8IHIkMSkoQyQxKTtcbn1cbmZ1bmN0aW9uIEMkMSgpIHtcbiAgdmFyIG4sXG4gICAgdSxcbiAgICB0LFxuICAgIG8gPSBbXSxcbiAgICByID0gW107XG4gIGZvciAoaSQxLnNvcnQoZiQxKTsgbiA9IGkkMS5zaGlmdCgpOykgbi5fX2QgJiYgKHQgPSBpJDEubGVuZ3RoLCB1ID0gdyQxKG4sIG8sIHIpIHx8IHUsIDAgPT09IHQgfHwgaSQxLmxlbmd0aCA+IHQgPyAoaiQxKG8sIHUsIHIpLCByLmxlbmd0aCA9IG8ubGVuZ3RoID0gMCwgdSA9IHZvaWQgMCwgaSQxLnNvcnQoZiQxKSkgOiB1ICYmIGwkMS5fX2MgJiYgbCQxLl9fYyh1LCBzJDEpKTtcbiAgdSAmJiBqJDEobywgdSwgciksIEMkMS5fX3IgPSAwO1xufVxuZnVuY3Rpb24gUCQxKG4sIGwsIHUsIHQsIGksIG8sIHIsIGYsIGUsIGEsIGgpIHtcbiAgdmFyIHYsXG4gICAgcCxcbiAgICB5LFxuICAgIGQsXG4gICAgXyxcbiAgICBnID0gdCAmJiB0Ll9fayB8fCBzJDEsXG4gICAgYiA9IGwubGVuZ3RoO1xuICBmb3IgKHUuX19kID0gZSwgUyh1LCBsLCBnKSwgZSA9IHUuX19kLCB2ID0gMDsgdiA8IGI7IHYrKykgbnVsbCAhPSAoeSA9IHUuX19rW3ZdKSAmJiBcImJvb2xlYW5cIiAhPSB0eXBlb2YgeSAmJiBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHkgJiYgKHAgPSAtMSA9PT0geS5fX2kgPyBjJDEgOiBnW3kuX19pXSB8fCBjJDEsIHkuX19pID0gdiwgTShuLCB5LCBwLCBpLCBvLCByLCBmLCBlLCBhLCBoKSwgZCA9IHkuX19lLCB5LnJlZiAmJiBwLnJlZiAhPSB5LnJlZiAmJiAocC5yZWYgJiYgTihwLnJlZiwgbnVsbCwgeSksIGgucHVzaCh5LnJlZiwgeS5fX2MgfHwgZCwgeSkpLCBudWxsID09IF8gJiYgbnVsbCAhPSBkICYmIChfID0gZCksIDY1NTM2ICYgeS5fX3UgfHwgcC5fX2sgPT09IHkuX19rID8gZSA9ICQoeSwgZSwgbikgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHkudHlwZSAmJiB2b2lkIDAgIT09IHkuX19kID8gZSA9IHkuX19kIDogZCAmJiAoZSA9IGQubmV4dFNpYmxpbmcpLCB5Ll9fZCA9IHZvaWQgMCwgeS5fX3UgJj0gLTE5NjYwOSk7XG4gIHUuX19kID0gZSwgdS5fX2UgPSBfO1xufVxuZnVuY3Rpb24gUyhuLCBsLCB1KSB7XG4gIHZhciB0LFxuICAgIGksXG4gICAgbyxcbiAgICByLFxuICAgIGYsXG4gICAgZSA9IGwubGVuZ3RoLFxuICAgIGMgPSB1Lmxlbmd0aCxcbiAgICBzID0gYyxcbiAgICBhID0gMDtcbiAgZm9yIChuLl9fayA9IFtdLCB0ID0gMDsgdCA8IGU7IHQrKykgbnVsbCAhPSAoaSA9IG4uX19rW3RdID0gbnVsbCA9PSAoaSA9IGxbdF0pIHx8IFwiYm9vbGVhblwiID09IHR5cGVvZiBpIHx8IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgaSA/IG51bGwgOiBcInN0cmluZ1wiID09IHR5cGVvZiBpIHx8IFwibnVtYmVyXCIgPT0gdHlwZW9mIGkgfHwgXCJiaWdpbnRcIiA9PSB0eXBlb2YgaSB8fCBpLmNvbnN0cnVjdG9yID09IFN0cmluZyA/IGQkMShudWxsLCBpLCBudWxsLCBudWxsLCBpKSA6IGgkMShpKSA/IGQkMShnJDEsIHtcbiAgICBjaGlsZHJlbjogaVxuICB9LCBudWxsLCBudWxsLCBudWxsKSA6IHZvaWQgMCA9PT0gaS5jb25zdHJ1Y3RvciAmJiBpLl9fYiA+IDAgPyBkJDEoaS50eXBlLCBpLnByb3BzLCBpLmtleSwgaS5yZWYgPyBpLnJlZiA6IG51bGwsIGkuX192KSA6IGkpID8gKGkuX18gPSBuLCBpLl9fYiA9IG4uX19iICsgMSwgZiA9IEkoaSwgdSwgciA9IHQgKyBhLCBzKSwgaS5fX2kgPSBmLCBvID0gbnVsbCwgLTEgIT09IGYgJiYgKHMtLSwgKG8gPSB1W2ZdKSAmJiAoby5fX3UgfD0gMTMxMDcyKSksIG51bGwgPT0gbyB8fCBudWxsID09PSBvLl9fdiA/ICgtMSA9PSBmICYmIGEtLSwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiBpLnR5cGUgJiYgKGkuX191IHw9IDY1NTM2KSkgOiBmICE9PSByICYmIChmID09PSByICsgMSA/IGErKyA6IGYgPiByID8gcyA+IGUgLSByID8gYSArPSBmIC0gciA6IGEtLSA6IGEgPSBmIDwgciAmJiBmID09IHIgLSAxID8gZiAtIHIgOiAwLCBmICE9PSB0ICsgYSAmJiAoaS5fX3UgfD0gNjU1MzYpKSkgOiAobyA9IHVbdF0pICYmIG51bGwgPT0gby5rZXkgJiYgby5fX2UgJiYgKG8uX19lID09IG4uX19kICYmIChuLl9fZCA9IG0kMShvKSksIE8obywgbywgZmFsc2UpLCB1W3RdID0gbnVsbCwgcy0tKTtcbiAgaWYgKHMpIGZvciAodCA9IDA7IHQgPCBjOyB0KyspIG51bGwgIT0gKG8gPSB1W3RdKSAmJiAwID09ICgxMzEwNzIgJiBvLl9fdSkgJiYgKG8uX19lID09IG4uX19kICYmIChuLl9fZCA9IG0kMShvKSksIE8obywgbykpO1xufVxuZnVuY3Rpb24gJChuLCBsLCB1KSB7XG4gIHZhciB0LCBpO1xuICBpZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiBuLnR5cGUpIHtcbiAgICBmb3IgKHQgPSBuLl9faywgaSA9IDA7IHQgJiYgaSA8IHQubGVuZ3RoOyBpKyspIHRbaV0gJiYgKHRbaV0uX18gPSBuLCBsID0gJCh0W2ldLCBsLCB1KSk7XG4gICAgcmV0dXJuIGw7XG4gIH1cbiAgbi5fX2UgIT0gbCAmJiAodS5pbnNlcnRCZWZvcmUobi5fX2UsIGwgfHwgbnVsbCksIGwgPSBuLl9fZSk7XG4gIGRvIHtcbiAgICBsID0gbCAmJiBsLm5leHRTaWJsaW5nO1xuICB9IHdoaWxlIChudWxsICE9IGwgJiYgOCA9PT0gbC5ub2RlVHlwZSk7XG4gIHJldHVybiBsO1xufVxuZnVuY3Rpb24gSShuLCBsLCB1LCB0KSB7XG4gIHZhciBpID0gbi5rZXksXG4gICAgbyA9IG4udHlwZSxcbiAgICByID0gdSAtIDEsXG4gICAgZiA9IHUgKyAxLFxuICAgIGUgPSBsW3VdO1xuICBpZiAobnVsbCA9PT0gZSB8fCBlICYmIGkgPT0gZS5rZXkgJiYgbyA9PT0gZS50eXBlKSByZXR1cm4gdTtcbiAgaWYgKHQgPiAobnVsbCAhPSBlICYmIDAgPT0gKDEzMTA3MiAmIGUuX191KSA/IDEgOiAwKSkgZm9yICg7IHIgPj0gMCB8fCBmIDwgbC5sZW5ndGg7KSB7XG4gICAgaWYgKHIgPj0gMCkge1xuICAgICAgaWYgKChlID0gbFtyXSkgJiYgMCA9PSAoMTMxMDcyICYgZS5fX3UpICYmIGkgPT0gZS5rZXkgJiYgbyA9PT0gZS50eXBlKSByZXR1cm4gcjtcbiAgICAgIHItLTtcbiAgICB9XG4gICAgaWYgKGYgPCBsLmxlbmd0aCkge1xuICAgICAgaWYgKChlID0gbFtmXSkgJiYgMCA9PSAoMTMxMDcyICYgZS5fX3UpICYmIGkgPT0gZS5rZXkgJiYgbyA9PT0gZS50eXBlKSByZXR1cm4gZjtcbiAgICAgIGYrKztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gVCQxKG4sIGwsIHUpIHtcbiAgXCItXCIgPT09IGxbMF0gPyBuLnNldFByb3BlcnR5KGwsIG51bGwgPT0gdSA/IFwiXCIgOiB1KSA6IG5bbF0gPSBudWxsID09IHUgPyBcIlwiIDogXCJudW1iZXJcIiAhPSB0eXBlb2YgdSB8fCBhJDEudGVzdChsKSA/IHUgOiB1ICsgXCJweFwiO1xufVxuZnVuY3Rpb24gQSQxKG4sIGwsIHUsIHQsIGkpIHtcbiAgdmFyIG87XG4gIG46IGlmIChcInN0eWxlXCIgPT09IGwpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdSkgbi5zdHlsZS5jc3NUZXh0ID0gdTtlbHNlIHtcbiAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIChuLnN0eWxlLmNzc1RleHQgPSB0ID0gXCJcIiksIHQpIGZvciAobCBpbiB0KSB1ICYmIGwgaW4gdSB8fCBUJDEobi5zdHlsZSwgbCwgXCJcIik7XG4gICAgICBpZiAodSkgZm9yIChsIGluIHUpIHQgJiYgdVtsXSA9PT0gdFtsXSB8fCBUJDEobi5zdHlsZSwgbCwgdVtsXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKFwib1wiID09PSBsWzBdICYmIFwiblwiID09PSBsWzFdKSBvID0gbCAhPT0gKGwgPSBsLnJlcGxhY2UoLyhQb2ludGVyQ2FwdHVyZSkkfENhcHR1cmUkL2ksIFwiJDFcIikpLCBsID0gbC50b0xvd2VyQ2FzZSgpIGluIG4gPyBsLnRvTG93ZXJDYXNlKCkuc2xpY2UoMikgOiBsLnNsaWNlKDIpLCBuLmwgfHwgKG4ubCA9IHt9KSwgbi5sW2wgKyBvXSA9IHUsIHUgPyB0ID8gdS51ID0gdC51IDogKHUudSA9IERhdGUubm93KCksIG4uYWRkRXZlbnRMaXN0ZW5lcihsLCBvID8gTCA6IEQkMSwgbykpIDogbi5yZW1vdmVFdmVudExpc3RlbmVyKGwsIG8gPyBMIDogRCQxLCBvKTtlbHNlIHtcbiAgICBpZiAoaSkgbCA9IGwucmVwbGFjZSgveGxpbmsoSHw6aCkvLCBcImhcIikucmVwbGFjZSgvc05hbWUkLywgXCJzXCIpO2Vsc2UgaWYgKFwid2lkdGhcIiAhPT0gbCAmJiBcImhlaWdodFwiICE9PSBsICYmIFwiaHJlZlwiICE9PSBsICYmIFwibGlzdFwiICE9PSBsICYmIFwiZm9ybVwiICE9PSBsICYmIFwidGFiSW5kZXhcIiAhPT0gbCAmJiBcImRvd25sb2FkXCIgIT09IGwgJiYgXCJyb3dTcGFuXCIgIT09IGwgJiYgXCJjb2xTcGFuXCIgIT09IGwgJiYgXCJyb2xlXCIgIT09IGwgJiYgbCBpbiBuKSB0cnkge1xuICAgICAgbltsXSA9IG51bGwgPT0gdSA/IFwiXCIgOiB1O1xuICAgICAgYnJlYWsgbjtcbiAgICB9IGNhdGNoIChuKSB7fVxuICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdSB8fCAobnVsbCA9PSB1IHx8IGZhbHNlID09PSB1ICYmIFwiLVwiICE9PSBsWzRdID8gbi5yZW1vdmVBdHRyaWJ1dGUobCkgOiBuLnNldEF0dHJpYnV0ZShsLCB1KSk7XG4gIH1cbn1cbmZ1bmN0aW9uIEQkMShuKSB7XG4gIGlmICh0aGlzLmwpIHtcbiAgICB2YXIgdSA9IHRoaXMubFtuLnR5cGUgKyBmYWxzZV07XG4gICAgaWYgKG4udCkge1xuICAgICAgaWYgKG4udCA8PSB1LnUpIHJldHVybjtcbiAgICB9IGVsc2Ugbi50ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gdShsJDEuZXZlbnQgPyBsJDEuZXZlbnQobikgOiBuKTtcbiAgfVxufVxuZnVuY3Rpb24gTChuKSB7XG4gIGlmICh0aGlzLmwpIHJldHVybiB0aGlzLmxbbi50eXBlICsgdHJ1ZV0obCQxLmV2ZW50ID8gbCQxLmV2ZW50KG4pIDogbik7XG59XG5mdW5jdGlvbiBNKG4sIHUsIHQsIGksIG8sIHIsIGYsIGUsIGMsIHMpIHtcbiAgdmFyIGEsXG4gICAgcCxcbiAgICB5LFxuICAgIGQsXG4gICAgXyxcbiAgICBtLFxuICAgIHcsXG4gICAgayxcbiAgICB4LFxuICAgIEMsXG4gICAgUyxcbiAgICAkLFxuICAgIEgsXG4gICAgSSxcbiAgICBULFxuICAgIEEgPSB1LnR5cGU7XG4gIGlmICh2b2lkIDAgIT09IHUuY29uc3RydWN0b3IpIHJldHVybiBudWxsO1xuICAxMjggJiB0Ll9fdSAmJiAoYyA9ICEhKDMyICYgdC5fX3UpLCByID0gW2UgPSB1Ll9fZSA9IHQuX19lXSksIChhID0gbCQxLl9fYikgJiYgYSh1KTtcbiAgbjogaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgQSkgdHJ5IHtcbiAgICBpZiAoayA9IHUucHJvcHMsIHggPSAoYSA9IEEuY29udGV4dFR5cGUpICYmIGlbYS5fX2NdLCBDID0gYSA/IHggPyB4LnByb3BzLnZhbHVlIDogYS5fXyA6IGksIHQuX19jID8gdyA9IChwID0gdS5fX2MgPSB0Ll9fYykuX18gPSBwLl9fRSA6IChcInByb3RvdHlwZVwiIGluIEEgJiYgQS5wcm90b3R5cGUucmVuZGVyID8gdS5fX2MgPSBwID0gbmV3IEEoaywgQykgOiAodS5fX2MgPSBwID0gbmV3IGIkMShrLCBDKSwgcC5jb25zdHJ1Y3RvciA9IEEsIHAucmVuZGVyID0gcSQxKSwgeCAmJiB4LnN1YihwKSwgcC5wcm9wcyA9IGssIHAuc3RhdGUgfHwgKHAuc3RhdGUgPSB7fSksIHAuY29udGV4dCA9IEMsIHAuX19uID0gaSwgeSA9IHAuX19kID0gITAsIHAuX19oID0gW10sIHAuX3NiID0gW10pLCBudWxsID09IHAuX19zICYmIChwLl9fcyA9IHAuc3RhdGUpLCBudWxsICE9IEEuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzICYmIChwLl9fcyA9PSBwLnN0YXRlICYmIChwLl9fcyA9IHYkMSh7fSwgcC5fX3MpKSwgdiQxKHAuX19zLCBBLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhrLCBwLl9fcykpKSwgZCA9IHAucHJvcHMsIF8gPSBwLnN0YXRlLCBwLl9fdiA9IHUsIHkpIG51bGwgPT0gQS5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgJiYgbnVsbCAhPSBwLmNvbXBvbmVudFdpbGxNb3VudCAmJiBwLmNvbXBvbmVudFdpbGxNb3VudCgpLCBudWxsICE9IHAuY29tcG9uZW50RGlkTW91bnQgJiYgcC5fX2gucHVzaChwLmNvbXBvbmVudERpZE1vdW50KTtlbHNlIHtcbiAgICAgIGlmIChudWxsID09IEEuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzICYmIGsgIT09IGQgJiYgbnVsbCAhPSBwLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYgcC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKGssIEMpLCAhcC5fX2UgJiYgKG51bGwgIT0gcC5zaG91bGRDb21wb25lbnRVcGRhdGUgJiYgITEgPT09IHAuc2hvdWxkQ29tcG9uZW50VXBkYXRlKGssIHAuX19zLCBDKSB8fCB1Ll9fdiA9PT0gdC5fX3YpKSB7XG4gICAgICAgIGZvciAodS5fX3YgIT09IHQuX192ICYmIChwLnByb3BzID0gaywgcC5zdGF0ZSA9IHAuX19zLCBwLl9fZCA9ICExKSwgdS5fX2UgPSB0Ll9fZSwgdS5fX2sgPSB0Ll9faywgdS5fX2suZm9yRWFjaChmdW5jdGlvbiAobikge1xuICAgICAgICAgIG4gJiYgKG4uX18gPSB1KTtcbiAgICAgICAgfSksIFMgPSAwOyBTIDwgcC5fc2IubGVuZ3RoOyBTKyspIHAuX19oLnB1c2gocC5fc2JbU10pO1xuICAgICAgICBwLl9zYiA9IFtdLCBwLl9faC5sZW5ndGggJiYgZi5wdXNoKHApO1xuICAgICAgICBicmVhayBuO1xuICAgICAgfVxuICAgICAgbnVsbCAhPSBwLmNvbXBvbmVudFdpbGxVcGRhdGUgJiYgcC5jb21wb25lbnRXaWxsVXBkYXRlKGssIHAuX19zLCBDKSwgbnVsbCAhPSBwLmNvbXBvbmVudERpZFVwZGF0ZSAmJiBwLl9faC5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcC5jb21wb25lbnREaWRVcGRhdGUoZCwgXywgbSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHAuY29udGV4dCA9IEMsIHAucHJvcHMgPSBrLCBwLl9fUCA9IG4sIHAuX19lID0gITEsICQgPSBsJDEuX19yLCBIID0gMCwgXCJwcm90b3R5cGVcIiBpbiBBICYmIEEucHJvdG90eXBlLnJlbmRlcikge1xuICAgICAgZm9yIChwLnN0YXRlID0gcC5fX3MsIHAuX19kID0gITEsICQgJiYgJCh1KSwgYSA9IHAucmVuZGVyKHAucHJvcHMsIHAuc3RhdGUsIHAuY29udGV4dCksIEkgPSAwOyBJIDwgcC5fc2IubGVuZ3RoOyBJKyspIHAuX19oLnB1c2gocC5fc2JbSV0pO1xuICAgICAgcC5fc2IgPSBbXTtcbiAgICB9IGVsc2UgZG8ge1xuICAgICAgcC5fX2QgPSAhMSwgJCAmJiAkKHUpLCBhID0gcC5yZW5kZXIocC5wcm9wcywgcC5zdGF0ZSwgcC5jb250ZXh0KSwgcC5zdGF0ZSA9IHAuX19zO1xuICAgIH0gd2hpbGUgKHAuX19kICYmICsrSCA8IDI1KTtcbiAgICBwLnN0YXRlID0gcC5fX3MsIG51bGwgIT0gcC5nZXRDaGlsZENvbnRleHQgJiYgKGkgPSB2JDEodiQxKHt9LCBpKSwgcC5nZXRDaGlsZENvbnRleHQoKSkpLCB5IHx8IG51bGwgPT0gcC5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSB8fCAobSA9IHAuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoZCwgXykpLCBQJDEobiwgaCQxKFQgPSBudWxsICE9IGEgJiYgYS50eXBlID09PSBnJDEgJiYgbnVsbCA9PSBhLmtleSA/IGEucHJvcHMuY2hpbGRyZW4gOiBhKSA/IFQgOiBbVF0sIHUsIHQsIGksIG8sIHIsIGYsIGUsIGMsIHMpLCBwLmJhc2UgPSB1Ll9fZSwgdS5fX3UgJj0gLTE2MSwgcC5fX2gubGVuZ3RoICYmIGYucHVzaChwKSwgdyAmJiAocC5fX0UgPSBwLl9fID0gbnVsbCk7XG4gIH0gY2F0Y2ggKG4pIHtcbiAgICB1Ll9fdiA9IG51bGwsIGMgfHwgbnVsbCAhPSByID8gKHUuX19lID0gZSwgdS5fX3UgfD0gYyA/IDE2MCA6IDMyLCByW3IuaW5kZXhPZihlKV0gPSBudWxsKSA6ICh1Ll9fZSA9IHQuX19lLCB1Ll9fayA9IHQuX19rKSwgbCQxLl9fZShuLCB1LCB0KTtcbiAgfSBlbHNlIG51bGwgPT0gciAmJiB1Ll9fdiA9PT0gdC5fX3YgPyAodS5fX2sgPSB0Ll9faywgdS5fX2UgPSB0Ll9fZSkgOiB1Ll9fZSA9IHokMSh0Ll9fZSwgdSwgdCwgaSwgbywgciwgZiwgYywgcyk7XG4gIChhID0gbCQxLmRpZmZlZCkgJiYgYSh1KTtcbn1cbmZ1bmN0aW9uIGokMShuLCB1LCB0KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKykgTih0W2ldLCB0WysraV0sIHRbKytpXSk7XG4gIGwkMS5fX2MgJiYgbCQxLl9fYyh1LCBuKSwgbi5zb21lKGZ1bmN0aW9uICh1KSB7XG4gICAgdHJ5IHtcbiAgICAgIG4gPSB1Ll9faCwgdS5fX2ggPSBbXSwgbi5zb21lKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIG4uY2FsbCh1KTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgIGwkMS5fX2UobiwgdS5fX3YpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiB6JDEobCwgdSwgdCwgaSwgbywgciwgZiwgZSwgcykge1xuICB2YXIgYSxcbiAgICB2LFxuICAgIHksXG4gICAgZCxcbiAgICBfLFxuICAgIGcsXG4gICAgYixcbiAgICB3ID0gdC5wcm9wcyxcbiAgICBrID0gdS5wcm9wcyxcbiAgICB4ID0gdS50eXBlO1xuICBpZiAoXCJzdmdcIiA9PT0geCAmJiAobyA9IHRydWUpLCBudWxsICE9IHIpIGZvciAoYSA9IDA7IGEgPCByLmxlbmd0aDsgYSsrKSBpZiAoKF8gPSByW2FdKSAmJiBcInNldEF0dHJpYnV0ZVwiIGluIF8gPT0gISF4ICYmICh4ID8gXy5sb2NhbE5hbWUgPT09IHggOiAzID09PSBfLm5vZGVUeXBlKSkge1xuICAgIGwgPSBfLCByW2FdID0gbnVsbDtcbiAgICBicmVhaztcbiAgfVxuICBpZiAobnVsbCA9PSBsKSB7XG4gICAgaWYgKG51bGwgPT09IHgpIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShrKTtcbiAgICBsID0gbyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHgpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh4LCBrLmlzICYmIGspLCByID0gbnVsbCwgZSA9IGZhbHNlO1xuICB9XG4gIGlmIChudWxsID09PSB4KSB3ID09PSBrIHx8IGUgJiYgbC5kYXRhID09PSBrIHx8IChsLmRhdGEgPSBrKTtlbHNlIHtcbiAgICBpZiAociA9IHIgJiYgbi5jYWxsKGwuY2hpbGROb2RlcyksIHcgPSB0LnByb3BzIHx8IGMkMSwgIWUgJiYgbnVsbCAhPSByKSBmb3IgKHcgPSB7fSwgYSA9IDA7IGEgPCBsLmF0dHJpYnV0ZXMubGVuZ3RoOyBhKyspIHdbKF8gPSBsLmF0dHJpYnV0ZXNbYV0pLm5hbWVdID0gXy52YWx1ZTtcbiAgICBmb3IgKGEgaW4gdykgXyA9IHdbYV0sIFwiY2hpbGRyZW5cIiA9PSBhIHx8IChcImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MXCIgPT0gYSA/IHkgPSBfIDogXCJrZXlcIiA9PT0gYSB8fCBhIGluIGsgfHwgQSQxKGwsIGEsIG51bGwsIF8sIG8pKTtcbiAgICBmb3IgKGEgaW4gaykgXyA9IGtbYV0sIFwiY2hpbGRyZW5cIiA9PSBhID8gZCA9IF8gOiBcImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MXCIgPT0gYSA/IHYgPSBfIDogXCJ2YWx1ZVwiID09IGEgPyBnID0gXyA6IFwiY2hlY2tlZFwiID09IGEgPyBiID0gXyA6IFwia2V5XCIgPT09IGEgfHwgZSAmJiBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIF8gfHwgd1thXSA9PT0gXyB8fCBBJDEobCwgYSwgXywgd1thXSwgbyk7XG4gICAgaWYgKHYpIGUgfHwgeSAmJiAodi5fX2h0bWwgPT09IHkuX19odG1sIHx8IHYuX19odG1sID09PSBsLmlubmVySFRNTCkgfHwgKGwuaW5uZXJIVE1MID0gdi5fX2h0bWwpLCB1Ll9fayA9IFtdO2Vsc2UgaWYgKHkgJiYgKGwuaW5uZXJIVE1MID0gXCJcIiksIFAkMShsLCBoJDEoZCkgPyBkIDogW2RdLCB1LCB0LCBpLCBvICYmIFwiZm9yZWlnbk9iamVjdFwiICE9PSB4LCByLCBmLCByID8gclswXSA6IHQuX19rICYmIG0kMSh0LCAwKSwgZSwgcyksIG51bGwgIT0gcikgZm9yIChhID0gci5sZW5ndGg7IGEtLTspIG51bGwgIT0gclthXSAmJiBwJDEoclthXSk7XG4gICAgZSB8fCAoYSA9IFwidmFsdWVcIiwgdm9pZCAwICE9PSBnICYmIChnICE9PSBsW2FdIHx8IFwicHJvZ3Jlc3NcIiA9PT0geCAmJiAhZyB8fCBcIm9wdGlvblwiID09PSB4ICYmIGcgIT09IHdbYV0pICYmIEEkMShsLCBhLCBnLCB3W2FdLCBmYWxzZSksIGEgPSBcImNoZWNrZWRcIiwgdm9pZCAwICE9PSBiICYmIGIgIT09IGxbYV0gJiYgQSQxKGwsIGEsIGIsIHdbYV0sIGZhbHNlKSk7XG4gIH1cbiAgcmV0dXJuIGw7XG59XG5mdW5jdGlvbiBOKG4sIHUsIHQpIHtcbiAgdHJ5IHtcbiAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG4gPyBuKHUpIDogbi5jdXJyZW50ID0gdTtcbiAgfSBjYXRjaCAobikge1xuICAgIGwkMS5fX2UobiwgdCk7XG4gIH1cbn1cbmZ1bmN0aW9uIE8obiwgdSwgdCkge1xuICB2YXIgaSwgbztcbiAgaWYgKGwkMS51bm1vdW50ICYmIGwkMS51bm1vdW50KG4pLCAoaSA9IG4ucmVmKSAmJiAoaS5jdXJyZW50ICYmIGkuY3VycmVudCAhPT0gbi5fX2UgfHwgTihpLCBudWxsLCB1KSksIG51bGwgIT0gKGkgPSBuLl9fYykpIHtcbiAgICBpZiAoaS5jb21wb25lbnRXaWxsVW5tb3VudCkgdHJ5IHtcbiAgICAgIGkuY29tcG9uZW50V2lsbFVubW91bnQoKTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICBsJDEuX19lKG4sIHUpO1xuICAgIH1cbiAgICBpLmJhc2UgPSBpLl9fUCA9IG51bGwsIG4uX19jID0gdm9pZCAwO1xuICB9XG4gIGlmIChpID0gbi5fX2spIGZvciAobyA9IDA7IG8gPCBpLmxlbmd0aDsgbysrKSBpW29dICYmIE8oaVtvXSwgdSwgdCB8fCBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIG4udHlwZSk7XG4gIHQgfHwgbnVsbCA9PSBuLl9fZSB8fCBwJDEobi5fX2UpLCBuLl9fID0gbi5fX2UgPSBuLl9fZCA9IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIHEkMShuLCBsLCB1KSB7XG4gIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKG4sIHUpO1xufVxuZnVuY3Rpb24gQiQxKHUsIHQsIGkpIHtcbiAgdmFyIG8sIHIsIGYsIGU7XG4gIGwkMS5fXyAmJiBsJDEuX18odSwgdCksIHIgPSAobyA9IFwiZnVuY3Rpb25cIiA9PSBcInVuZGVmaW5lZFwiKSA/IG51bGwgOiB0Ll9faywgZiA9IFtdLCBlID0gW10sIE0odCwgdSA9IHQuX19rID0geSQxKGckMSwgbnVsbCwgW3VdKSwgciB8fCBjJDEsIGMkMSwgdm9pZCAwICE9PSB0Lm93bmVyU1ZHRWxlbWVudCwgciA/IG51bGwgOiB0LmZpcnN0Q2hpbGQgPyBuLmNhbGwodC5jaGlsZE5vZGVzKSA6IG51bGwsIGYsIHIgPyByLl9fZSA6IHQuZmlyc3RDaGlsZCwgbywgZSksIHUuX19kID0gdm9pZCAwLCBqJDEoZiwgdSwgZSk7XG59XG5uID0gcyQxLnNsaWNlLCBsJDEgPSB7XG4gIF9fZTogZnVuY3Rpb24gKG4sIGwsIHUsIHQpIHtcbiAgICBmb3IgKHZhciBpLCBvLCByOyBsID0gbC5fXzspIGlmICgoaSA9IGwuX19jKSAmJiAhaS5fXykgdHJ5IHtcbiAgICAgIGlmICgobyA9IGkuY29uc3RydWN0b3IpICYmIG51bGwgIT0gby5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IgJiYgKGkuc2V0U3RhdGUoby5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IobikpLCByID0gaS5fX2QpLCBudWxsICE9IGkuY29tcG9uZW50RGlkQ2F0Y2ggJiYgKGkuY29tcG9uZW50RGlkQ2F0Y2gobiwgdCB8fCB7fSksIHIgPSBpLl9fZCksIHIpIHJldHVybiBpLl9fRSA9IGk7XG4gICAgfSBjYXRjaCAobCkge1xuICAgICAgbiA9IGw7XG4gICAgfVxuICAgIHRocm93IG47XG4gIH1cbn0sIHUkMSA9IDAsIGIkMS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAobiwgbCkge1xuICB2YXIgdTtcbiAgdSA9IG51bGwgIT0gdGhpcy5fX3MgJiYgdGhpcy5fX3MgIT09IHRoaXMuc3RhdGUgPyB0aGlzLl9fcyA6IHRoaXMuX19zID0gdiQxKHt9LCB0aGlzLnN0YXRlKSwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuICYmIChuID0gbih2JDEoe30sIHUpLCB0aGlzLnByb3BzKSksIG4gJiYgdiQxKHUsIG4pLCBudWxsICE9IG4gJiYgdGhpcy5fX3YgJiYgKGwgJiYgdGhpcy5fc2IucHVzaChsKSwgeCQxKHRoaXMpKTtcbn0sIGIkMS5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAobikge1xuICB0aGlzLl9fdiAmJiAodGhpcy5fX2UgPSB0cnVlLCBuICYmIHRoaXMuX19oLnB1c2gobiksIHgkMSh0aGlzKSk7XG59LCBiJDEucHJvdG90eXBlLnJlbmRlciA9IGckMSwgaSQxID0gW10sIHIkMSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgUHJvbWlzZSA/IFByb21pc2UucHJvdG90eXBlLnRoZW4uYmluZChQcm9taXNlLnJlc29sdmUoKSkgOiBzZXRUaW1lb3V0LCBmJDEgPSBmdW5jdGlvbiAobiwgbCkge1xuICByZXR1cm4gbi5fX3YuX19iIC0gbC5fX3YuX19iO1xufSwgQyQxLl9fciA9IDA7XG52YXIgdCxcbiAgcixcbiAgdSxcbiAgaSxcbiAgbyA9IDAsXG4gIGYgPSBbXSxcbiAgYyA9IFtdLFxuICBlID0gbCQxLFxuICBhID0gZS5fX2IsXG4gIHYgPSBlLl9fcixcbiAgbCA9IGUuZGlmZmVkLFxuICBtID0gZS5fX2MsXG4gIHMgPSBlLnVubW91bnQsXG4gIGQgPSBlLl9fO1xuZnVuY3Rpb24gaChuLCB0KSB7XG4gIGUuX19oICYmIGUuX19oKHIsIG4sIG8gfHwgdCksIG8gPSAwO1xuICB2YXIgdSA9IHIuX19IIHx8IChyLl9fSCA9IHtcbiAgICBfXzogW10sXG4gICAgX19oOiBbXVxuICB9KTtcbiAgcmV0dXJuIG4gPj0gdS5fXy5sZW5ndGggJiYgdS5fXy5wdXNoKHtcbiAgICBfX1Y6IGNcbiAgfSksIHUuX19bbl07XG59XG5mdW5jdGlvbiBwKG4pIHtcbiAgcmV0dXJuIG8gPSAxLCB5KEQsIG4pO1xufVxuZnVuY3Rpb24geShuLCB1LCBpKSB7XG4gIHZhciBvID0gaCh0KyssIDIpO1xuICBpZiAoby50ID0gbiwgIW8uX19jICYmIChvLl9fID0gW2kgPyBpKHUpIDogRCh2b2lkIDAsIHUpLCBmdW5jdGlvbiAobikge1xuICAgIHZhciB0ID0gby5fX04gPyBvLl9fTlswXSA6IG8uX19bMF0sXG4gICAgICByID0gby50KHQsIG4pO1xuICAgIHQgIT09IHIgJiYgKG8uX19OID0gW3IsIG8uX19bMV1dLCBvLl9fYy5zZXRTdGF0ZSh7fSkpO1xuICB9XSwgby5fX2MgPSByLCAhci51KSkge1xuICAgIHZhciBmID0gZnVuY3Rpb24gKG4sIHQsIHIpIHtcbiAgICAgIGlmICghby5fX2MuX19IKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHZhciB1ID0gby5fX2MuX19ILl9fLmZpbHRlcihmdW5jdGlvbiAobikge1xuICAgICAgICByZXR1cm4gISFuLl9fYztcbiAgICAgIH0pO1xuICAgICAgaWYgKHUuZXZlcnkoZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgcmV0dXJuICFuLl9fTjtcbiAgICAgIH0pKSByZXR1cm4gIWMgfHwgYy5jYWxsKHRoaXMsIG4sIHQsIHIpO1xuICAgICAgdmFyIGkgPSBmYWxzZTtcbiAgICAgIHJldHVybiB1LmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKG4uX19OKSB7XG4gICAgICAgICAgdmFyIHQgPSBuLl9fWzBdO1xuICAgICAgICAgIG4uX18gPSBuLl9fTiwgbi5fX04gPSB2b2lkIDAsIHQgIT09IG4uX19bMF0gJiYgKGkgPSB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSksICEoIWkgJiYgby5fX2MucHJvcHMgPT09IG4pICYmICghYyB8fCBjLmNhbGwodGhpcywgbiwgdCwgcikpO1xuICAgIH07XG4gICAgci51ID0gdHJ1ZTtcbiAgICB2YXIgYyA9IHIuc2hvdWxkQ29tcG9uZW50VXBkYXRlLFxuICAgICAgZSA9IHIuY29tcG9uZW50V2lsbFVwZGF0ZTtcbiAgICByLmNvbXBvbmVudFdpbGxVcGRhdGUgPSBmdW5jdGlvbiAobiwgdCwgcikge1xuICAgICAgaWYgKHRoaXMuX19lKSB7XG4gICAgICAgIHZhciB1ID0gYztcbiAgICAgICAgYyA9IHZvaWQgMCwgZihuLCB0LCByKSwgYyA9IHU7XG4gICAgICB9XG4gICAgICBlICYmIGUuY2FsbCh0aGlzLCBuLCB0LCByKTtcbiAgICB9LCByLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGY7XG4gIH1cbiAgcmV0dXJuIG8uX19OIHx8IG8uX187XG59XG5mdW5jdGlvbiBfKG4sIHUpIHtcbiAgdmFyIGkgPSBoKHQrKywgMyk7XG4gICFlLl9fcyAmJiBDKGkuX19ILCB1KSAmJiAoaS5fXyA9IG4sIGkuaSA9IHUsIHIuX19ILl9faC5wdXNoKGkpKTtcbn1cbmZ1bmN0aW9uIEEobiwgdSkge1xuICB2YXIgaSA9IGgodCsrLCA0KTtcbiAgIWUuX19zICYmIEMoaS5fX0gsIHUpICYmIChpLl9fID0gbiwgaS5pID0gdSwgci5fX2gucHVzaChpKSk7XG59XG5mdW5jdGlvbiBGKG4pIHtcbiAgcmV0dXJuIG8gPSA1LCBxKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudDogblxuICAgIH07XG4gIH0sIFtdKTtcbn1cbmZ1bmN0aW9uIFQobiwgdCwgcikge1xuICBvID0gNiwgQShmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgbiA/IChuKHQoKSksIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuKG51bGwpO1xuICAgIH0pIDogbiA/IChuLmN1cnJlbnQgPSB0KCksIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuLmN1cnJlbnQgPSBudWxsO1xuICAgIH0pIDogdm9pZCAwO1xuICB9LCBudWxsID09IHIgPyByIDogci5jb25jYXQobikpO1xufVxuZnVuY3Rpb24gcShuLCByKSB7XG4gIHZhciB1ID0gaCh0KyssIDcpO1xuICByZXR1cm4gQyh1Ll9fSCwgcikgPyAodS5fX1YgPSBuKCksIHUuaSA9IHIsIHUuX19oID0gbiwgdS5fX1YpIDogdS5fXztcbn1cbmZ1bmN0aW9uIHgobiwgdCkge1xuICByZXR1cm4gbyA9IDgsIHEoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuO1xuICB9LCB0KTtcbn1cbmZ1bmN0aW9uIFAobikge1xuICB2YXIgdSA9IHIuY29udGV4dFtuLl9fY10sXG4gICAgaSA9IGgodCsrLCA5KTtcbiAgcmV0dXJuIGkuYyA9IG4sIHUgPyAobnVsbCA9PSBpLl9fICYmIChpLl9fID0gdHJ1ZSwgdS5zdWIocikpLCB1LnByb3BzLnZhbHVlKSA6IG4uX187XG59XG5mdW5jdGlvbiBWKG4sIHQpIHtcbiAgZS51c2VEZWJ1Z1ZhbHVlICYmIGUudXNlRGVidWdWYWx1ZSh0ID8gdChuKSA6IG4pO1xufVxuZnVuY3Rpb24gYihuKSB7XG4gIHZhciB1ID0gaCh0KyssIDEwKSxcbiAgICBpID0gcCgpO1xuICByZXR1cm4gdS5fXyA9IG4sIHIuY29tcG9uZW50RGlkQ2F0Y2ggfHwgKHIuY29tcG9uZW50RGlkQ2F0Y2ggPSBmdW5jdGlvbiAobiwgdCkge1xuICAgIHUuX18gJiYgdS5fXyhuLCB0KSwgaVsxXShuKTtcbiAgfSksIFtpWzBdLCBmdW5jdGlvbiAoKSB7XG4gICAgaVsxXSh2b2lkIDApO1xuICB9XTtcbn1cbmZ1bmN0aW9uIGcoKSB7XG4gIHZhciBuID0gaCh0KyssIDExKTtcbiAgaWYgKCFuLl9fKSB7XG4gICAgZm9yICh2YXIgdSA9IHIuX192OyBudWxsICE9PSB1ICYmICF1Ll9fbSAmJiBudWxsICE9PSB1Ll9fOykgdSA9IHUuX187XG4gICAgdmFyIGkgPSB1Ll9fbSB8fCAodS5fX20gPSBbMCwgMF0pO1xuICAgIG4uX18gPSBcIlBcIiArIGlbMF0gKyBcIi1cIiArIGlbMV0rKztcbiAgfVxuICByZXR1cm4gbi5fXztcbn1cbmZ1bmN0aW9uIGooKSB7XG4gIGZvciAodmFyIG47IG4gPSBmLnNoaWZ0KCk7KSBpZiAobi5fX1AgJiYgbi5fX0gpIHRyeSB7XG4gICAgbi5fX0guX19oLmZvckVhY2goeiksIG4uX19ILl9faC5mb3JFYWNoKEIpLCBuLl9fSC5fX2ggPSBbXTtcbiAgfSBjYXRjaCAodCkge1xuICAgIG4uX19ILl9faCA9IFtdLCBlLl9fZSh0LCBuLl9fdik7XG4gIH1cbn1cbmUuX19iID0gZnVuY3Rpb24gKG4pIHtcbiAgciA9IG51bGwsIGEgJiYgYShuKTtcbn0sIGUuX18gPSBmdW5jdGlvbiAobiwgdCkge1xuICB0Ll9fayAmJiB0Ll9fay5fX20gJiYgKG4uX19tID0gdC5fX2suX19tKSwgZCAmJiBkKG4sIHQpO1xufSwgZS5fX3IgPSBmdW5jdGlvbiAobikge1xuICB2ICYmIHYobiksIHQgPSAwO1xuICB2YXIgaSA9IChyID0gbi5fX2MpLl9fSDtcbiAgaSAmJiAodSA9PT0gciA/IChpLl9faCA9IFtdLCByLl9faCA9IFtdLCBpLl9fLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICBuLl9fTiAmJiAobi5fXyA9IG4uX19OKSwgbi5fX1YgPSBjLCBuLl9fTiA9IG4uaSA9IHZvaWQgMDtcbiAgfSkpIDogKGkuX19oLmZvckVhY2goeiksIGkuX19oLmZvckVhY2goQiksIGkuX19oID0gW10sIHQgPSAwKSksIHUgPSByO1xufSwgZS5kaWZmZWQgPSBmdW5jdGlvbiAobikge1xuICBsICYmIGwobik7XG4gIHZhciB0ID0gbi5fX2M7XG4gIHQgJiYgdC5fX0ggJiYgKHQuX19ILl9faC5sZW5ndGggJiYgKDEgIT09IGYucHVzaCh0KSAmJiBpID09PSBlLnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCAoKGkgPSBlLnJlcXVlc3RBbmltYXRpb25GcmFtZSkgfHwgdykoaikpLCB0Ll9fSC5fXy5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7XG4gICAgbi5pICYmIChuLl9fSCA9IG4uaSksIG4uX19WICE9PSBjICYmIChuLl9fID0gbi5fX1YpLCBuLmkgPSB2b2lkIDAsIG4uX19WID0gYztcbiAgfSkpLCB1ID0gciA9IG51bGw7XG59LCBlLl9fYyA9IGZ1bmN0aW9uIChuLCB0KSB7XG4gIHQuc29tZShmdW5jdGlvbiAobikge1xuICAgIHRyeSB7XG4gICAgICBuLl9faC5mb3JFYWNoKHopLCBuLl9faCA9IG4uX19oLmZpbHRlcihmdW5jdGlvbiAobikge1xuICAgICAgICByZXR1cm4gIW4uX18gfHwgQihuKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIHQuc29tZShmdW5jdGlvbiAobikge1xuICAgICAgICBuLl9faCAmJiAobi5fX2ggPSBbXSk7XG4gICAgICB9KSwgdCA9IFtdLCBlLl9fZShyLCBuLl9fdik7XG4gICAgfVxuICB9KSwgbSAmJiBtKG4sIHQpO1xufSwgZS51bm1vdW50ID0gZnVuY3Rpb24gKG4pIHtcbiAgcyAmJiBzKG4pO1xuICB2YXIgdCxcbiAgICByID0gbi5fX2M7XG4gIHIgJiYgci5fX0ggJiYgKHIuX19ILl9fLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICB0cnkge1xuICAgICAgeihuKTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICB0ID0gbjtcbiAgICB9XG4gIH0pLCByLl9fSCA9IHZvaWQgMCwgdCAmJiBlLl9fZSh0LCByLl9fdikpO1xufTtcbnZhciBrID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5mdW5jdGlvbiB3KG4pIHtcbiAgdmFyIHQsXG4gICAgciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh1KSwgayAmJiBjYW5jZWxBbmltYXRpb25GcmFtZSh0KSwgc2V0VGltZW91dChuKTtcbiAgICB9LFxuICAgIHUgPSBzZXRUaW1lb3V0KHIsIDEwMCk7XG4gIGsgJiYgKHQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocikpO1xufVxuZnVuY3Rpb24geihuKSB7XG4gIHZhciB0ID0gcixcbiAgICB1ID0gbi5fX2M7XG4gIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdSAmJiAobi5fX2MgPSB2b2lkIDAsIHUoKSksIHIgPSB0O1xufVxuZnVuY3Rpb24gQihuKSB7XG4gIHZhciB0ID0gcjtcbiAgbi5fX2MgPSBuLl9fKCksIHIgPSB0O1xufVxuZnVuY3Rpb24gQyhuLCB0KSB7XG4gIHJldHVybiAhbiB8fCBuLmxlbmd0aCAhPT0gdC5sZW5ndGggfHwgdC5zb21lKGZ1bmN0aW9uICh0LCByKSB7XG4gICAgcmV0dXJuIHQgIT09IG5bcl07XG4gIH0pO1xufVxuZnVuY3Rpb24gRChuLCB0KSB7XG4gIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgPyB0KG4pIDogdDtcbn1cbmNvbnN0IGhvb2tzID0gLyojX19QVVJFX18qL09iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgdXNlQ2FsbGJhY2s6IHgsXG4gIHVzZUNvbnRleHQ6IFAsXG4gIHVzZURlYnVnVmFsdWU6IFYsXG4gIHVzZUVmZmVjdDogXyxcbiAgdXNlRXJyb3JCb3VuZGFyeTogYixcbiAgdXNlSWQ6IGcsXG4gIHVzZUltcGVyYXRpdmVIYW5kbGU6IFQsXG4gIHVzZUxheW91dEVmZmVjdDogQSxcbiAgdXNlTWVtbzogcSxcbiAgdXNlUmVkdWNlcjogeSxcbiAgdXNlUmVmOiBGLFxuICB1c2VTdGF0ZTogcFxufSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7XG4gIHZhbHVlOiAnTW9kdWxlJ1xufSk7XG5jb25zdCBYTUxOUyQxID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcblxuLyoqXG4gKiBTZW50cnkgTG9nb1xuICovXG5mdW5jdGlvbiBTZW50cnlMb2dvKCkge1xuICBjb25zdCBjcmVhdGVFbGVtZW50TlMgPSB0YWdOYW1lID0+IERPQ1VNRU5ULmNyZWF0ZUVsZW1lbnROUyhYTUxOUyQxLCB0YWdOYW1lKTtcbiAgY29uc3Qgc3ZnID0gc2V0QXR0cmlidXRlc05TKGNyZWF0ZUVsZW1lbnROUygnc3ZnJyksIHtcbiAgICB3aWR0aDogJzMyJyxcbiAgICBoZWlnaHQ6ICczMCcsXG4gICAgdmlld0JveDogJzAgMCA3MiA2NicsXG4gICAgZmlsbDogJ2luaGVyaXQnXG4gIH0pO1xuICBjb25zdCBwYXRoID0gc2V0QXR0cmlidXRlc05TKGNyZWF0ZUVsZW1lbnROUygncGF0aCcpLCB7XG4gICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDExLCAxMSknLFxuICAgIGQ6ICdNMjksMi4yNmE0LjY3LDQuNjcsMCwwLDAtOCwwTDE0LjQyLDEzLjUzQTMyLjIxLDMyLjIxLDAsMCwxLDMyLjE3LDQwLjE5SDI3LjU1QTI3LjY4LDI3LjY4LDAsMCwwLDEyLjA5LDE3LjQ3TDYsMjhhMTUuOTIsMTUuOTIsMCwwLDEsOS4yMywxMi4xN0g0LjYyQS43Ni43NiwwLDAsMSw0LDM5LjA2bDIuOTQtNWExMC43NCwxMC43NCwwLDAsMC0zLjM2LTEuOWwtMi45MSw1YTQuNTQsNC41NCwwLDAsMCwxLjY5LDYuMjRBNC42Niw0LjY2LDAsMCwwLDQuNjIsNDRIMTkuMTVhMTkuNCwxOS40LDAsMCwwLTgtMTcuMzFsMi4zMS00QTIzLjg3LDIzLjg3LDAsMCwxLDIzLjc2LDQ0SDM2LjA3YTM1Ljg4LDM1Ljg4LDAsMCwwLTE2LjQxLTMxLjhsNC42Ny04YS43Ny43NywwLDAsMSwxLjA1LS4yN2MuNTMuMjksMjAuMjksMzQuNzcsMjAuNjYsMzUuMTdhLjc2Ljc2LDAsMCwxLS42OCwxLjEzSDQwLjZxLjA5LDEuOTEsMCwzLjgxaDQuNzhBNC41OSw0LjU5LDAsMCwwLDUwLDM5LjQzYTQuNDksNC40OSwwLDAsMC0uNjItMi4yOFonXG4gIH0pO1xuICBzdmcuYXBwZW5kQ2hpbGQocGF0aCk7XG4gIHJldHVybiBzdmc7XG59XG5mdW5jdGlvbiBEaWFsb2dIZWFkZXIoe1xuICBvcHRpb25zXG59KSB7XG4gIGNvbnN0IGxvZ29IdG1sID0gcSgoKSA9PiAoe1xuICAgIF9faHRtbDogU2VudHJ5TG9nbygpLm91dGVySFRNTFxuICB9KSwgW10pO1xuICByZXR1cm4geSQxKCdoMicsIHtcbiAgICBjbGFzczogXCJkaWFsb2dfX2hlYWRlclwiXG4gIH0sIHkkMSgnc3BhbicsIHtcbiAgICBjbGFzczogXCJkaWFsb2dfX3RpdGxlXCJcbiAgfSwgb3B0aW9ucy5mb3JtVGl0bGUpLCBvcHRpb25zLnNob3dCcmFuZGluZyA/IHkkMSgnYScsIHtcbiAgICBjbGFzczogXCJicmFuZC1saW5rXCIsXG4gICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgIGhyZWY6IFwiaHR0cHM6Ly9zZW50cnkuaW8vd2VsY29tZS9cIixcbiAgICB0aXRsZTogXCJQb3dlcmVkIGJ5IFNlbnRyeVwiLFxuICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsXG4gICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IGxvZ29IdG1sXG4gIH0pIDogbnVsbCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgdGhhdCBhIGdpdmVuIGZlZWRiYWNrIHN1Ym1pc3Npb24gaGFzIHRoZSByZXF1aXJlZCBmaWVsZHNcbiAqL1xuZnVuY3Rpb24gZ2V0TWlzc2luZ0ZpZWxkcyhmZWVkYmFjaywgcHJvcHMpIHtcbiAgY29uc3QgZW1wdHlGaWVsZHMgPSBbXTtcbiAgaWYgKHByb3BzLmlzTmFtZVJlcXVpcmVkICYmICFmZWVkYmFjay5uYW1lKSB7XG4gICAgZW1wdHlGaWVsZHMucHVzaChwcm9wcy5uYW1lTGFiZWwpO1xuICB9XG4gIGlmIChwcm9wcy5pc0VtYWlsUmVxdWlyZWQgJiYgIWZlZWRiYWNrLmVtYWlsKSB7XG4gICAgZW1wdHlGaWVsZHMucHVzaChwcm9wcy5lbWFpbExhYmVsKTtcbiAgfVxuICBpZiAoIWZlZWRiYWNrLm1lc3NhZ2UpIHtcbiAgICBlbXB0eUZpZWxkcy5wdXNoKHByb3BzLm1lc3NhZ2VMYWJlbCk7XG4gIH1cbiAgcmV0dXJuIGVtcHR5RmllbGRzO1xufVxuZnVuY3Rpb24gcmV0cmlldmVTdHJpbmdWYWx1ZShmb3JtRGF0YSwga2V5KSB7XG4gIGNvbnN0IHZhbHVlID0gZm9ybURhdGEuZ2V0KGtleSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRyaW0oKTtcbiAgfVxuICByZXR1cm4gJyc7XG59XG5mdW5jdGlvbiBGb3JtKHtcbiAgb3B0aW9ucyxcbiAgZGVmYXVsdEVtYWlsLFxuICBkZWZhdWx0TmFtZSxcbiAgb25Gb3JtQ2xvc2UsXG4gIG9uU3VibWl0LFxuICBvblN1Ym1pdFN1Y2Nlc3MsXG4gIG9uU3VibWl0RXJyb3IsXG4gIHNob3dFbWFpbCxcbiAgc2hvd05hbWUsXG4gIHNjcmVlbnNob3RJbnB1dFxufSkge1xuICBjb25zdCB7XG4gICAgdGFncyxcbiAgICBhZGRTY3JlZW5zaG90QnV0dG9uTGFiZWwsXG4gICAgcmVtb3ZlU2NyZWVuc2hvdEJ1dHRvbkxhYmVsLFxuICAgIGNhbmNlbEJ1dHRvbkxhYmVsLFxuICAgIGVtYWlsTGFiZWwsXG4gICAgZW1haWxQbGFjZWhvbGRlcixcbiAgICBpc0VtYWlsUmVxdWlyZWQsXG4gICAgaXNOYW1lUmVxdWlyZWQsXG4gICAgbWVzc2FnZUxhYmVsLFxuICAgIG1lc3NhZ2VQbGFjZWhvbGRlcixcbiAgICBuYW1lTGFiZWwsXG4gICAgbmFtZVBsYWNlaG9sZGVyLFxuICAgIHN1Ym1pdEJ1dHRvbkxhYmVsLFxuICAgIGlzUmVxdWlyZWRMYWJlbFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgW2lzU3VibWl0dGluZywgc2V0SXNTdWJtaXR0aW5nXSA9IHAoZmFsc2UpO1xuICAvLyBUT0RPOiBzZXQgYSByZWYgb24gdGhlIGZvcm0sIGFuZCB3aGVuZXZlciBhbiBpbnB1dCBjaGFuZ2VzIGNhbGwgcHJvY2Vzc0Zvcm0oKSBhbmQgc2V0RXJyb3IoKVxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHAobnVsbCk7XG4gIGNvbnN0IFtzaG93U2NyZWVuc2hvdElucHV0LCBzZXRTaG93U2NyZWVuc2hvdElucHV0XSA9IHAoZmFsc2UpO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICBjb25zdCBTY3JlZW5zaG90SW5wdXRDb21wb25lbnQgPSBzY3JlZW5zaG90SW5wdXQ/LmlucHV0O1xuICBjb25zdCBbc2NyZWVuc2hvdEVycm9yLCBzZXRTY3JlZW5zaG90RXJyb3JdID0gcChudWxsKTtcbiAgY29uc3Qgb25TY3JlZW5zaG90RXJyb3IgPSB4KGVycm9yID0+IHtcbiAgICBzZXRTY3JlZW5zaG90RXJyb3IoZXJyb3IpO1xuICAgIHNldFNob3dTY3JlZW5zaG90SW5wdXQoZmFsc2UpO1xuICB9LCBbXSk7XG4gIGNvbnN0IGhhc0FsbFJlcXVpcmVkRmllbGRzID0geChkYXRhID0+IHtcbiAgICBjb25zdCBtaXNzaW5nRmllbGRzID0gZ2V0TWlzc2luZ0ZpZWxkcyhkYXRhLCB7XG4gICAgICBlbWFpbExhYmVsLFxuICAgICAgaXNFbWFpbFJlcXVpcmVkLFxuICAgICAgaXNOYW1lUmVxdWlyZWQsXG4gICAgICBtZXNzYWdlTGFiZWwsXG4gICAgICBuYW1lTGFiZWxcbiAgICB9KTtcbiAgICBpZiAobWlzc2luZ0ZpZWxkcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRFcnJvcihgUGxlYXNlIGVudGVyIGluIHRoZSBmb2xsb3dpbmcgcmVxdWlyZWQgZmllbGRzOiAke21pc3NpbmdGaWVsZHMuam9pbignLCAnKX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgfVxuICAgIHJldHVybiBtaXNzaW5nRmllbGRzLmxlbmd0aCA9PT0gMDtcbiAgfSwgW2VtYWlsTGFiZWwsIGlzRW1haWxSZXF1aXJlZCwgaXNOYW1lUmVxdWlyZWQsIG1lc3NhZ2VMYWJlbCwgbmFtZUxhYmVsXSk7XG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IHgoYXN5bmMgZSA9PiB7XG4gICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIShlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZS50YXJnZXQpO1xuICAgICAgY29uc3QgYXR0YWNobWVudCA9IGF3YWl0IChzY3JlZW5zaG90SW5wdXQgJiYgc2hvd1NjcmVlbnNob3RJbnB1dCA/IHNjcmVlbnNob3RJbnB1dC52YWx1ZSgpIDogdW5kZWZpbmVkKTtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIG5hbWU6IHJldHJpZXZlU3RyaW5nVmFsdWUoZm9ybURhdGEsICduYW1lJyksXG4gICAgICAgIGVtYWlsOiByZXRyaWV2ZVN0cmluZ1ZhbHVlKGZvcm1EYXRhLCAnZW1haWwnKSxcbiAgICAgICAgbWVzc2FnZTogcmV0cmlldmVTdHJpbmdWYWx1ZShmb3JtRGF0YSwgJ21lc3NhZ2UnKSxcbiAgICAgICAgYXR0YWNobWVudHM6IGF0dGFjaG1lbnQgPyBbYXR0YWNobWVudF0gOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgICBpZiAoIWhhc0FsbFJlcXVpcmVkRmllbGRzKGRhdGEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGV2ZW50SWQgPSBhd2FpdCBvblN1Ym1pdCh7XG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSxcbiAgICAgICAgICBzb3VyY2U6IEZFRURCQUNLX1dJREdFVF9TT1VSQ0UsXG4gICAgICAgICAgdGFnc1xuICAgICAgICB9LCB7XG4gICAgICAgICAgYXR0YWNobWVudHM6IGRhdGEuYXR0YWNobWVudHNcbiAgICAgICAgfSk7XG4gICAgICAgIG9uU3VibWl0U3VjY2VzcyhkYXRhLCBldmVudElkKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgIHNldEVycm9yKGVycm9yKTtcbiAgICAgICAgb25TdWJtaXRFcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzU3VibWl0dGluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbc2NyZWVuc2hvdElucHV0ICYmIHNob3dTY3JlZW5zaG90SW5wdXQsIG9uU3VibWl0U3VjY2Vzcywgb25TdWJtaXRFcnJvcl0pO1xuICByZXR1cm4geSQxKCdmb3JtJywge1xuICAgIGNsYXNzOiBcImZvcm1cIixcbiAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0XG4gIH0sIFNjcmVlbnNob3RJbnB1dENvbXBvbmVudCAmJiBzaG93U2NyZWVuc2hvdElucHV0ID8geSQxKFNjcmVlbnNob3RJbnB1dENvbXBvbmVudCwge1xuICAgIG9uRXJyb3I6IG9uU2NyZWVuc2hvdEVycm9yXG4gIH0pIDogbnVsbCwgeSQxKCdmaWVsZHNldCcsIHtcbiAgICBjbGFzczogXCJmb3JtX19yaWdodFwiLFxuICAgICdkYXRhLXNlbnRyeS1mZWVkYmFjayc6IHRydWUsXG4gICAgZGlzYWJsZWQ6IGlzU3VibWl0dGluZ1xuICB9LCB5JDEoJ2RpdicsIHtcbiAgICBjbGFzczogXCJmb3JtX190b3BcIlxuICB9LCBlcnJvciA/IHkkMSgnZGl2Jywge1xuICAgIGNsYXNzOiBcImZvcm1fX2Vycm9yLWNvbnRhaW5lclwiXG4gIH0sIGVycm9yKSA6IG51bGwsIHNob3dOYW1lID8geSQxKCdsYWJlbCcsIHtcbiAgICBmb3I6IFwibmFtZVwiLFxuICAgIGNsYXNzOiBcImZvcm1fX2xhYmVsXCJcbiAgfSwgeSQxKExhYmVsVGV4dCwge1xuICAgIGxhYmVsOiBuYW1lTGFiZWwsXG4gICAgaXNSZXF1aXJlZExhYmVsOiBpc1JlcXVpcmVkTGFiZWwsXG4gICAgaXNSZXF1aXJlZDogaXNOYW1lUmVxdWlyZWRcbiAgfSksIHkkMSgnaW5wdXQnLCB7XG4gICAgY2xhc3M6IFwiZm9ybV9faW5wdXRcIixcbiAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHROYW1lLFxuICAgIGlkOiBcIm5hbWVcIixcbiAgICBuYW1lOiBcIm5hbWVcIixcbiAgICBwbGFjZWhvbGRlcjogbmFtZVBsYWNlaG9sZGVyLFxuICAgIHJlcXVpcmVkOiBpc05hbWVSZXF1aXJlZCxcbiAgICB0eXBlOiBcInRleHRcIlxuICB9KSkgOiB5JDEoJ2lucHV0Jywge1xuICAgICdhcmlhLWhpZGRlbic6IHRydWUsXG4gICAgdmFsdWU6IGRlZmF1bHROYW1lLFxuICAgIG5hbWU6IFwibmFtZVwiLFxuICAgIHR5cGU6IFwiaGlkZGVuXCJcbiAgfSksIHNob3dFbWFpbCA/IHkkMSgnbGFiZWwnLCB7XG4gICAgZm9yOiBcImVtYWlsXCIsXG4gICAgY2xhc3M6IFwiZm9ybV9fbGFiZWxcIlxuICB9LCB5JDEoTGFiZWxUZXh0LCB7XG4gICAgbGFiZWw6IGVtYWlsTGFiZWwsXG4gICAgaXNSZXF1aXJlZExhYmVsOiBpc1JlcXVpcmVkTGFiZWwsXG4gICAgaXNSZXF1aXJlZDogaXNFbWFpbFJlcXVpcmVkXG4gIH0pLCB5JDEoJ2lucHV0Jywge1xuICAgIGNsYXNzOiBcImZvcm1fX2lucHV0XCIsXG4gICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0RW1haWwsXG4gICAgaWQ6IFwiZW1haWxcIixcbiAgICBuYW1lOiBcImVtYWlsXCIsXG4gICAgcGxhY2Vob2xkZXI6IGVtYWlsUGxhY2Vob2xkZXIsXG4gICAgcmVxdWlyZWQ6IGlzRW1haWxSZXF1aXJlZCxcbiAgICB0eXBlOiBcImVtYWlsXCJcbiAgfSkpIDogeSQxKCdpbnB1dCcsIHtcbiAgICAnYXJpYS1oaWRkZW4nOiB0cnVlLFxuICAgIHZhbHVlOiBkZWZhdWx0RW1haWwsXG4gICAgbmFtZTogXCJlbWFpbFwiLFxuICAgIHR5cGU6IFwiaGlkZGVuXCJcbiAgfSksIHkkMSgnbGFiZWwnLCB7XG4gICAgZm9yOiBcIm1lc3NhZ2VcIixcbiAgICBjbGFzczogXCJmb3JtX19sYWJlbFwiXG4gIH0sIHkkMShMYWJlbFRleHQsIHtcbiAgICBsYWJlbDogbWVzc2FnZUxhYmVsLFxuICAgIGlzUmVxdWlyZWRMYWJlbDogaXNSZXF1aXJlZExhYmVsLFxuICAgIGlzUmVxdWlyZWQ6IHRydWVcbiAgfSksIHkkMSgndGV4dGFyZWEnLCB7XG4gICAgYXV0b0ZvY3VzOiB0cnVlLFxuICAgIGNsYXNzOiBcImZvcm1fX2lucHV0IGZvcm1fX2lucHV0LS10ZXh0YXJlYVwiLFxuICAgIGlkOiBcIm1lc3NhZ2VcIixcbiAgICBuYW1lOiBcIm1lc3NhZ2VcIixcbiAgICBwbGFjZWhvbGRlcjogbWVzc2FnZVBsYWNlaG9sZGVyLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIHJvd3M6IDVcbiAgfSkpLCBTY3JlZW5zaG90SW5wdXRDb21wb25lbnQgPyB5JDEoJ2xhYmVsJywge1xuICAgIGZvcjogXCJzY3JlZW5zaG90XCIsXG4gICAgY2xhc3M6IFwiZm9ybV9fbGFiZWxcIlxuICB9LCB5JDEoJ2J1dHRvbicsIHtcbiAgICBjbGFzczogXCJidG4gYnRuLS1kZWZhdWx0XCIsXG4gICAgZGlzYWJsZWQ6IGlzU3VibWl0dGluZyxcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIHNldFNjcmVlbnNob3RFcnJvcihudWxsKTtcbiAgICAgIHNldFNob3dTY3JlZW5zaG90SW5wdXQocHJldiA9PiAhcHJldik7XG4gICAgfVxuICB9LCBzaG93U2NyZWVuc2hvdElucHV0ID8gcmVtb3ZlU2NyZWVuc2hvdEJ1dHRvbkxhYmVsIDogYWRkU2NyZWVuc2hvdEJ1dHRvbkxhYmVsKSwgc2NyZWVuc2hvdEVycm9yID8geSQxKCdkaXYnLCB7XG4gICAgY2xhc3M6IFwiZm9ybV9fZXJyb3ItY29udGFpbmVyXCJcbiAgfSwgc2NyZWVuc2hvdEVycm9yLm1lc3NhZ2UpIDogbnVsbCkgOiBudWxsKSwgeSQxKCdkaXYnLCB7XG4gICAgY2xhc3M6IFwiYnRuLWdyb3VwXCJcbiAgfSwgeSQxKCdidXR0b24nLCB7XG4gICAgY2xhc3M6IFwiYnRuIGJ0bi0tcHJpbWFyeVwiLFxuICAgIGRpc2FibGVkOiBpc1N1Ym1pdHRpbmcsXG4gICAgdHlwZTogXCJzdWJtaXRcIlxuICB9LCBzdWJtaXRCdXR0b25MYWJlbCksIHkkMSgnYnV0dG9uJywge1xuICAgIGNsYXNzOiBcImJ0biBidG4tLWRlZmF1bHRcIixcbiAgICBkaXNhYmxlZDogaXNTdWJtaXR0aW5nLFxuICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgb25DbGljazogb25Gb3JtQ2xvc2VcbiAgfSwgY2FuY2VsQnV0dG9uTGFiZWwpKSkpO1xufVxuZnVuY3Rpb24gTGFiZWxUZXh0KHtcbiAgbGFiZWwsXG4gIGlzUmVxdWlyZWQsXG4gIGlzUmVxdWlyZWRMYWJlbFxufSkge1xuICByZXR1cm4geSQxKCdzcGFuJywge1xuICAgIGNsYXNzOiBcImZvcm1fX2xhYmVsX190ZXh0XCJcbiAgfSwgbGFiZWwsIGlzUmVxdWlyZWQgJiYgeSQxKCdzcGFuJywge1xuICAgIGNsYXNzOiBcImZvcm1fX2xhYmVsX190ZXh0LS1yZXF1aXJlZFwiXG4gIH0sIGlzUmVxdWlyZWRMYWJlbCkpO1xufVxuY29uc3QgV0lEVEggPSAxNjtcbmNvbnN0IEhFSUdIVCA9IDE3O1xuY29uc3QgWE1MTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuXG4vKipcbiAqIFN1Y2Nlc3MgSWNvbiAoY2hlY2ttYXJrKVxuICovXG5mdW5jdGlvbiBTdWNjZXNzSWNvbigpIHtcbiAgY29uc3QgY3JlYXRlRWxlbWVudE5TID0gdGFnTmFtZSA9PiBXSU5ET1cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFhNTE5TLCB0YWdOYW1lKTtcbiAgY29uc3Qgc3ZnID0gc2V0QXR0cmlidXRlc05TKGNyZWF0ZUVsZW1lbnROUygnc3ZnJyksIHtcbiAgICB3aWR0aDogYCR7V0lEVEh9YCxcbiAgICBoZWlnaHQ6IGAke0hFSUdIVH1gLFxuICAgIHZpZXdCb3g6IGAwIDAgJHtXSURUSH0gJHtIRUlHSFR9YCxcbiAgICBmaWxsOiAnaW5oZXJpdCdcbiAgfSk7XG4gIGNvbnN0IGcgPSBzZXRBdHRyaWJ1dGVzTlMoY3JlYXRlRWxlbWVudE5TKCdnJyksIHtcbiAgICBjbGlwUGF0aDogJ3VybCgjY2xpcDBfNTdfMTU2KSdcbiAgfSk7XG4gIGNvbnN0IHBhdGgyID0gc2V0QXR0cmlidXRlc05TKGNyZWF0ZUVsZW1lbnROUygncGF0aCcpLCB7XG4gICAgWydmaWxsLXJ1bGUnXTogJ2V2ZW5vZGQnLFxuICAgIFsnY2xpcC1ydWxlJ106ICdldmVub2RkJyxcbiAgICBkOiAnTTMuNTU1NDQgMTUuMTUxOEM0Ljg3MTAzIDE2LjAzMDggNi40MTc3NSAxNi41IDggMTYuNUMxMC4xMjE3IDE2LjUgMTIuMTU2NiAxNS42NTcxIDEzLjY1NjkgMTQuMTU2OUMxNS4xNTcxIDEyLjY1NjYgMTYgMTAuNjIxNyAxNiA4LjVDMTYgNi45MTc3NSAxNS41MzA4IDUuMzcxMDMgMTQuNjUxOCA0LjA1NTQ0QzEzLjc3MjcgMi43Mzk4NSAxMi41MjMzIDEuNzE0NDcgMTEuMDYxNSAxLjEwODk3QzkuNTk5NjYgMC41MDM0NjYgNy45OTExMyAwLjM0NTA0IDYuNDM5MjggMC42NTM3MjFDNC44ODc0MyAwLjk2MjQwMyAzLjQ2MTk3IDEuNzI0MzMgMi4zNDMxNSAyLjg0MzE1QzEuMjI0MzMgMy45NjE5NyAwLjQ2MjQwMyA1LjM4NzQzIDAuMTUzNzIxIDYuOTM5MjhDLTAuMTU0OTYgOC40OTExMyAwLjAwMzQ2NjI1IDEwLjA5OTcgMC42MDg5NjcgMTEuNTYxNUMxLjIxNDQ3IDEzLjAyMzMgMi4yMzk4NSAxNC4yNzI3IDMuNTU1NDQgMTUuMTUxOFpNNC40MDU0NiAzLjEyMDRDNS40Njk0NSAyLjQwOTQ2IDYuNzIwMzYgMi4wMyA4IDIuMDNDOS43MTU5NSAyLjAzIDExLjM2MTYgMi43MTE2NiAxMi41NzUgMy45MjUwMkMxMy43ODgzIDUuMTM4MzggMTQuNDcgNi43ODQwNSAxNC40NyA4LjVDMTQuNDcgOS43Nzk2NSAxNC4wOTA1IDExLjAzMDYgMTMuMzc5NiAxMi4wOTQ1QzEyLjY2ODcgMTMuMTU4NSAxMS42NTgyIDEzLjk4NzggMTAuNDc2IDE0LjQ3NzVDOS4yOTM3MyAxNC45NjcyIDcuOTkyODMgMTUuMDk1MyA2LjczNzc3IDE0Ljg0NTdDNS40ODI3MSAxNC41OTYgNC4zMjk4NyAxMy45Nzk4IDMuNDI1MDIgMTMuMDc1QzIuNTIwMTggMTIuMTcwMSAxLjkwMzk3IDExLjAxNzMgMS42NTQzMiA5Ljc2MjI0QzEuNDA0NjggOC41MDcxOCAxLjUzMjggNy4yMDYyOCAyLjAyMjUgNi4wMjQwNEMyLjUxMjIgNC44NDE4IDMuMzQxNDggMy44MzEzMyA0LjQwNTQ2IDMuMTIwNFonXG4gIH0pO1xuICBjb25zdCBwYXRoID0gc2V0QXR0cmlidXRlc05TKGNyZWF0ZUVsZW1lbnROUygncGF0aCcpLCB7XG4gICAgZDogJ002LjY4Nzc1IDEyLjQyOTdDNi43ODU4NiAxMi40NzQ1IDYuODkyMTggMTIuNDk4NCA3IDEyLjVDNy4xMTI3NSAxMi40OTU1IDcuMjIzMTUgMTIuNDY2NCA3LjMyMzM3IDEyLjQxNDVDNy40MjM2IDEyLjM2MjcgNy41MTEyMSAxMi4yODk0IDcuNTggMTIuMkwxMiA1LjYzOTk5QzEyLjA4NDggNS40NzcyNCAxMi4xMDcxIDUuMjg5MDIgMTIuMDYyNSA1LjExMDk4QzEyLjAxNzggNC45MzI5NCAxMS45MDk1IDQuNzc3NDQgMTEuNzU3OSA0LjY3MzkyQzExLjYwNjQgNC41NzA0MSAxMS40MjIxIDQuNTI2MDggMTEuMjQgNC41NDkzMUMxMS4wNTc5IDQuNTcyNTQgMTAuODkwNyA0LjY2MTczIDEwLjc3IDQuNzk5OTlMNi44OCAxMC41N0w1LjEzIDguNTY5OTlDNS4wNjUwOCA4LjQ5NTY2IDQuOTg2MTMgOC40MzQ4OCA0Ljg5NzY4IDguMzkxMTFDNC44MDkyMiA4LjM0NzM1IDQuNzEzIDguMzIxNDggNC42MTQ1MyA4LjMxNDk4QzQuNTE2MDUgOC4zMDg0NyA0LjQxNzI3IDguMzIxNDcgNC4zMjM4MiA4LjM1MzIyQzQuMjMwMzggOC4zODQ5NyA0LjE0NDEzIDguNDM0ODQgNC4wNyA4LjQ5OTk5QzMuOTI1MTEgOC42MzIxNyAzLjgzNjkyIDguODE1MjMgMy44MjM4NyA5LjAxMDkyQzMuODEwODMgOS4yMDY2IDMuODczOTMgOS4zOTk3NiA0IDkuNTQ5OTlMNi40MyAxMi4yNEM2LjUwMTg3IDEyLjMyMDQgNi41ODk2NCAxMi4zODUgNi42ODc3NSAxMi40Mjk3WidcbiAgfSk7XG4gIHN2Zy5hcHBlbmRDaGlsZChnKS5hcHBlbmQocGF0aCwgcGF0aDIpO1xuICBjb25zdCBzcGVha2VyRGVmcyA9IGNyZWF0ZUVsZW1lbnROUygnZGVmcycpO1xuICBjb25zdCBzcGVha2VyQ2xpcFBhdGhEZWYgPSBzZXRBdHRyaWJ1dGVzTlMoY3JlYXRlRWxlbWVudE5TKCdjbGlwUGF0aCcpLCB7XG4gICAgaWQ6ICdjbGlwMF81N18xNTYnXG4gIH0pO1xuICBjb25zdCBzcGVha2VyUmVjdCA9IHNldEF0dHJpYnV0ZXNOUyhjcmVhdGVFbGVtZW50TlMoJ3JlY3QnKSwge1xuICAgIHdpZHRoOiBgJHtXSURUSH1gLFxuICAgIGhlaWdodDogYCR7V0lEVEh9YCxcbiAgICBmaWxsOiAnd2hpdGUnLFxuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwIDAuNSknXG4gIH0pO1xuICBzcGVha2VyQ2xpcFBhdGhEZWYuYXBwZW5kQ2hpbGQoc3BlYWtlclJlY3QpO1xuICBzcGVha2VyRGVmcy5hcHBlbmRDaGlsZChzcGVha2VyQ2xpcFBhdGhEZWYpO1xuICBzdmcuYXBwZW5kQ2hpbGQoc3BlYWtlckRlZnMpLmFwcGVuZENoaWxkKHNwZWFrZXJDbGlwUGF0aERlZikuYXBwZW5kQ2hpbGQoc3BlYWtlclJlY3QpO1xuICByZXR1cm4gc3ZnO1xufVxuZnVuY3Rpb24gRGlhbG9nKHtcbiAgb3BlbixcbiAgb25Gb3JtU3VibWl0dGVkLFxuICAuLi5wcm9wc1xufSkge1xuICBjb25zdCBvcHRpb25zID0gcHJvcHMub3B0aW9ucztcbiAgY29uc3Qgc3VjY2Vzc0ljb25IdG1sID0gcSgoKSA9PiAoe1xuICAgIF9faHRtbDogU3VjY2Vzc0ljb24oKS5vdXRlckhUTUxcbiAgfSksIFtdKTtcbiAgY29uc3QgW3RpbWVvdXRJZCwgc2V0VGltZW91dElkXSA9IHAobnVsbCk7XG4gIGNvbnN0IGhhbmRsZU9uU3VjY2Vzc0NsaWNrID0geCgoKSA9PiB7XG4gICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICBzZXRUaW1lb3V0SWQobnVsbCk7XG4gICAgfVxuICAgIG9uRm9ybVN1Ym1pdHRlZCgpO1xuICB9LCBbdGltZW91dElkXSk7XG4gIGNvbnN0IG9uU3VibWl0U3VjY2VzcyA9IHgoKGRhdGEsIGV2ZW50SWQpID0+IHtcbiAgICBwcm9wcy5vblN1Ym1pdFN1Y2Nlc3MoZGF0YSwgZXZlbnRJZCk7XG4gICAgc2V0VGltZW91dElkKHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgb25Gb3JtU3VibWl0dGVkKCk7XG4gICAgICBzZXRUaW1lb3V0SWQobnVsbCk7XG4gICAgfSwgU1VDQ0VTU19NRVNTQUdFX1RJTUVPVVQpKTtcbiAgfSwgW29uRm9ybVN1Ym1pdHRlZF0pO1xuICByZXR1cm4geSQxKGckMSwgbnVsbCwgdGltZW91dElkID8geSQxKCdkaXYnLCB7XG4gICAgY2xhc3M6IFwic3VjY2Vzc19fcG9zaXRpb25cIixcbiAgICBvbkNsaWNrOiBoYW5kbGVPblN1Y2Nlc3NDbGlja1xuICB9LCB5JDEoJ2RpdicsIHtcbiAgICBjbGFzczogXCJzdWNjZXNzX19jb250ZW50XCJcbiAgfSwgb3B0aW9ucy5zdWNjZXNzTWVzc2FnZVRleHQsIHkkMSgnc3BhbicsIHtcbiAgICBjbGFzczogXCJzdWNjZXNzX19pY29uXCIsXG4gICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHN1Y2Nlc3NJY29uSHRtbFxuICB9KSkpIDogeSQxKCdkaWFsb2cnLCB7XG4gICAgY2xhc3M6IFwiZGlhbG9nXCIsXG4gICAgb25DbGljazogb3B0aW9ucy5vbkZvcm1DbG9zZSxcbiAgICBvcGVuOiBvcGVuXG4gIH0sIHkkMSgnZGl2Jywge1xuICAgIGNsYXNzOiBcImRpYWxvZ19fcG9zaXRpb25cIlxuICB9LCB5JDEoJ2RpdicsIHtcbiAgICBjbGFzczogXCJkaWFsb2dfX2NvbnRlbnRcIixcbiAgICBvbkNsaWNrOiBlID0+IHtcbiAgICAgIC8vIFN0b3AgZXZlbnQgcHJvcGFnYXRpb24gc28gY2xpY2tzIG9uIGNvbnRlbnQgbW9kYWwgZG8gbm90IHByb3BhZ2F0ZSB0byBkaWFsb2cgKHdoaWNoIHdpbGwgY2xvc2UgZGlhbG9nKVxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH0sIHkkMShEaWFsb2dIZWFkZXIsIHtcbiAgICBvcHRpb25zOiBvcHRpb25zXG4gIH0pLCB5JDEoRm9ybSwge1xuICAgIC4uLnByb3BzLFxuICAgIG9uU3VibWl0U3VjY2Vzczogb25TdWJtaXRTdWNjZXNzXG4gIH0pKSkpKTtcbn1cbmNvbnN0IERJQUxPRyA9IGBcbi5kaWFsb2cge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHotaW5kZXg6IHZhcigtLXotaW5kZXgpO1xuICBtYXJnaW46IDA7XG4gIGluc2V0OiAwO1xuXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBwYWRkaW5nOiAwO1xuICBoZWlnaHQ6IDEwMHZoO1xuICB3aWR0aDogMTAwdnc7XG5cbiAgY29sb3I6IHZhcigtLWRpYWxvZy1jb2xvciwgdmFyKC0tZm9yZWdyb3VuZCkpO1xuICBmaWxsOiB2YXIoLS1kaWFsb2ctY29sb3IsIHZhcigtLWZvcmVncm91bmQpKTtcbiAgbGluZS1oZWlnaHQ6IDEuNzVlbTtcblxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICBib3JkZXI6IG5vbmU7XG4gIGluc2V0OiAwO1xuICBvcGFjaXR5OiAxO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7XG59XG5cbi5kaWFsb2dfX3Bvc2l0aW9uIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB6LWluZGV4OiB2YXIoLS16LWluZGV4KTtcbiAgaW5zZXQ6IHZhcigtLWRpYWxvZy1pbnNldCk7XG4gIHBhZGRpbmc6IHZhcigtLXBhZ2UtbWFyZ2luKTtcbiAgZGlzcGxheTogZmxleDtcbiAgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtICgyICogdmFyKC0tcGFnZS1tYXJnaW4pKSk7XG59XG5AbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHtcbiAgLmRpYWxvZ19fcG9zaXRpb24ge1xuICAgIGluc2V0OiB2YXIoLS1wYWdlLW1hcmdpbik7XG4gICAgcGFkZGluZzogMDtcbiAgfVxufVxuXG4uZGlhbG9nX19wb3NpdGlvbjpoYXMoLmVkaXRvcikge1xuICBpbnNldDogdmFyKC0tcGFnZS1tYXJnaW4pO1xuICBwYWRkaW5nOiAwO1xufVxuXG4uZGlhbG9nOm5vdChbb3Blbl0pIHtcbiAgb3BhY2l0eTogMDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbn1cbi5kaWFsb2c6bm90KFtvcGVuXSkgLmRpYWxvZ19fY29udGVudCB7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIC0xNnB4KSBzY2FsZSgwLjk4KTtcbn1cblxuLmRpYWxvZ19fY29udGVudCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogMTZweDtcbiAgcGFkZGluZzogdmFyKC0tZGlhbG9nLXBhZGRpbmcsIDI0cHgpO1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtaGVpZ2h0OiAxMDAlO1xuICBvdmVyZmxvdzogYXV0bztcblxuICBiYWNrZ3JvdW5kOiB2YXIoLS1kaWFsb2ctYmFja2dyb3VuZCwgdmFyKC0tYmFja2dyb3VuZCkpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1kaWFsb2ctYm9yZGVyLXJhZGl1cywgMjBweCk7XG4gIGJvcmRlcjogdmFyKC0tZGlhbG9nLWJvcmRlciwgdmFyKC0tYm9yZGVyKSk7XG4gIGJveC1zaGFkb3c6IHZhcigtLWRpYWxvZy1ib3gtc2hhZG93LCB2YXIoLS1ib3gtc2hhZG93KSk7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApIHNjYWxlKDEpO1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlLWluLW91dDtcbn1cblxuYDtcbmNvbnN0IERJQUxPR19IRUFERVIgPSBgXG4uZGlhbG9nX19oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDRweDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBmb250LXdlaWdodDogdmFyKC0tZGlhbG9nLWhlYWRlci13ZWlnaHQsIDYwMCk7XG4gIG1hcmdpbjogMDtcbn1cbi5kaWFsb2dfX3RpdGxlIHtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICB3aWR0aDogdmFyKC0tZm9ybS13aWR0aCwgMjcycHgpO1xufVxuXG5AbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHtcbiAgLmRpYWxvZ19fdGl0bGUge1xuICAgIHdpZHRoOiBhdXRvO1xuICB9XG59XG5cbi5kaWFsb2dfX3Bvc2l0aW9uOmhhcyguZWRpdG9yKSAuZGlhbG9nX190aXRsZSB7XG4gIHdpZHRoOiBhdXRvO1xufVxuXG5cbi5icmFuZC1saW5rIHtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG59XG4uYnJhbmQtbGluazpmb2N1cy12aXNpYmxlIHtcbiAgb3V0bGluZTogdmFyKC0tb3V0bGluZSk7XG59XG5gO1xuY29uc3QgRk9STSA9IGBcbi5mb3JtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGdhcDogMTZweDtcbiAgZmxleDogMSAwO1xufVxuXG4uZm9ybSBmaWVsZHNldCB7XG4gIGJvcmRlcjogbm9uZTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xufVxuXG4uZm9ybV9fcmlnaHQge1xuICBmbGV4OiAwIDAgYXV0bztcbiAgZGlzcGxheTogZmxleDtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgZ2FwOiAyMHB4O1xuICB3aWR0aDogdmFyKC0tZm9ybS13aWR0aCwgMTAwJSk7XG59XG5cbi5kaWFsb2dfX3Bvc2l0aW9uOmhhcyguZWRpdG9yKSAuZm9ybV9fcmlnaHQge1xuICB3aWR0aDogdmFyKC0tZm9ybS13aWR0aCwgMjcycHgpO1xufVxuXG4uZm9ybV9fdG9wIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiA4cHg7XG59XG5cbi5mb3JtX19lcnJvci1jb250YWluZXIge1xuICBjb2xvcjogdmFyKC0tZXJyb3ItY29sb3IpO1xuICBmaWxsOiB2YXIoLS1lcnJvci1jb2xvcik7XG59XG5cbi5mb3JtX19sYWJlbCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogNHB4O1xuICBtYXJnaW46IDBweDtcbn1cblxuLmZvcm1fX2xhYmVsX190ZXh0IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA0cHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi5mb3JtX19sYWJlbF9fdGV4dC0tcmVxdWlyZWQge1xuICBmb250LXNpemU6IDAuODVlbTtcbn1cblxuLmZvcm1fX2lucHV0IHtcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiB2YXIoLS1pbnB1dC1ib3JkZXIsIHZhcigtLWJvcmRlcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1pbnB1dC1ib3JkZXItcmFkaXVzLCA2cHgpO1xuICBjb2xvcjogdmFyKC0taW5wdXQtY29sb3IsIGluaGVyaXQpO1xuICBmaWxsOiB2YXIoLS1pbnB1dC1jb2xvciwgaW5oZXJpdCk7XG4gIGZvbnQtc2l6ZTogdmFyKC0taW5wdXQtZm9udC1zaXplLCBpbmhlcml0KTtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLWlucHV0LWZvbnQtd2VpZ2h0LCA1MDApO1xuICBwYWRkaW5nOiA2cHggMTJweDtcbn1cblxuLmZvcm1fX2lucHV0OjpwbGFjZWhvbGRlciB7XG4gIG9wYWNpdHk6IDAuNjU7XG4gIGNvbG9yOiB2YXIoLS1pbnB1dC1wbGFjZWhvbGRlci1jb2xvciwgaW5oZXJpdCk7XG4gIGZpbHRlcjogdmFyKC0taW50ZXJhY3RpdmUtZmlsdGVyKTtcbn1cblxuLmZvcm1fX2lucHV0OmZvY3VzLXZpc2libGUge1xuICBvdXRsaW5lOiB2YXIoLS1pbnB1dC1mb2N1cy1vdXRsaW5lLCB2YXIoLS1vdXRsaW5lKSk7XG59XG5cbi5mb3JtX19pbnB1dC0tdGV4dGFyZWEge1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgcmVzaXplOiB2ZXJ0aWNhbDtcbn1cblxuLmVycm9yIHtcbiAgY29sb3I6IHZhcigtLWVycm9yLWNvbG9yKTtcbiAgZmlsbDogdmFyKC0tZXJyb3ItY29sb3IpO1xufVxuYDtcbmNvbnN0IEJVVFRPTiA9IGBcbi5idG4tZ3JvdXAge1xuICBkaXNwbGF5OiBncmlkO1xuICBnYXA6IDhweDtcbn1cblxuLmJ0biB7XG4gIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xuICBib3JkZXI6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWJvcmRlcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1idXR0b24tYm9yZGVyLXJhZGl1cywgNnB4KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC1zaXplOiB2YXIoLS1idXR0b24tZm9udC1zaXplLCBpbmhlcml0KTtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLWJ1dHRvbi1mb250LXdlaWdodCwgNjAwKTtcbiAgcGFkZGluZzogdmFyKC0tYnV0dG9uLXBhZGRpbmcsIDZweCAxNnB4KTtcbn1cbi5idG5bZGlzYWJsZWRdIHtcbiAgb3BhY2l0eTogMC42O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLmJ0bi0tcHJpbWFyeSB7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tcHJpbWFyeS1jb2xvciwgdmFyKC0tYWNjZW50LWZvcmVncm91bmQpKTtcbiAgZmlsbDogdmFyKC0tYnV0dG9uLXByaW1hcnktY29sb3IsIHZhcigtLWFjY2VudC1mb3JlZ3JvdW5kKSk7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1wcmltYXJ5LWJhY2tncm91bmQsIHZhcigtLWFjY2VudC1iYWNrZ3JvdW5kKSk7XG4gIGJvcmRlcjogdmFyKC0tYnV0dG9uLXByaW1hcnktYm9yZGVyLCB2YXIoLS1ib3JkZXIpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYnV0dG9uLXByaW1hcnktYm9yZGVyLXJhZGl1cywgNnB4KTtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLWJ1dHRvbi1wcmltYXJ5LWZvbnQtd2VpZ2h0LCA1MDApO1xufVxuLmJ0bi0tcHJpbWFyeTpob3ZlciB7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tcHJpbWFyeS1ob3Zlci1jb2xvciwgdmFyKC0tYWNjZW50LWZvcmVncm91bmQpKTtcbiAgZmlsbDogdmFyKC0tYnV0dG9uLXByaW1hcnktaG92ZXItY29sb3IsIHZhcigtLWFjY2VudC1mb3JlZ3JvdW5kKSk7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQsIHZhcigtLWFjY2VudC1iYWNrZ3JvdW5kKSk7XG4gIGZpbHRlcjogdmFyKC0taW50ZXJhY3RpdmUtZmlsdGVyKTtcbn1cbi5idG4tLXByaW1hcnk6Zm9jdXMtdmlzaWJsZSB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQsIHZhcigtLWFjY2VudC1iYWNrZ3JvdW5kKSk7XG4gIGZpbHRlcjogdmFyKC0taW50ZXJhY3RpdmUtZmlsdGVyKTtcbiAgb3V0bGluZTogdmFyKC0tYnV0dG9uLXByaW1hcnktZm9jdXMtb3V0bGluZSwgdmFyKC0tb3V0bGluZSkpO1xufVxuXG4uYnRuLS1kZWZhdWx0IHtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tZm9yZWdyb3VuZCkpO1xuICBmaWxsOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWZvcmVncm91bmQpKTtcbiAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWJhY2tncm91bmQsIHZhcigtLWJhY2tncm91bmQpKTtcbiAgYm9yZGVyOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1ib3JkZXIpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYnV0dG9uLWJvcmRlci1yYWRpdXMsIDZweCk7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1idXR0b24tZm9udC13ZWlnaHQsIDUwMCk7XG59XG4uYnRuLS1kZWZhdWx0OmhvdmVyIHtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tZm9yZWdyb3VuZCkpO1xuICBmaWxsOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWZvcmVncm91bmQpKTtcbiAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJhY2tncm91bmQsIHZhcigtLWJhY2tncm91bmQpKTtcbiAgZmlsdGVyOiB2YXIoLS1pbnRlcmFjdGl2ZS1maWx0ZXIpO1xufVxuLmJ0bi0tZGVmYXVsdDpmb2N1cy12aXNpYmxlIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJhY2tncm91bmQsIHZhcigtLWJhY2tncm91bmQpKTtcbiAgZmlsdGVyOiB2YXIoLS1pbnRlcmFjdGl2ZS1maWx0ZXIpO1xuICBvdXRsaW5lOiB2YXIoLS1idXR0b24tZm9jdXMtb3V0bGluZSwgdmFyKC0tb3V0bGluZSkpO1xufVxuYDtcbmNvbnN0IFNVQ0NFU1MgPSBgXG4uc3VjY2Vzc19fcG9zaXRpb24ge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGluc2V0OiB2YXIoLS1kaWFsb2ctaW5zZXQpO1xuICBwYWRkaW5nOiB2YXIoLS1wYWdlLW1hcmdpbik7XG4gIHotaW5kZXg6IHZhcigtLXotaW5kZXgpO1xufVxuLnN1Y2Nlc3NfX2NvbnRlbnQge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zdWNjZXNzLWJhY2tncm91bmQsIHZhcigtLWJhY2tncm91bmQpKTtcbiAgYm9yZGVyOiB2YXIoLS1zdWNjZXNzLWJvcmRlciwgdmFyKC0tYm9yZGVyKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXN1Y2Nlc3MtYm9yZGVyLXJhZGl1cywgMS43ZW0vNTAlKTtcbiAgYm94LXNoYWRvdzogdmFyKC0tc3VjY2Vzcy1ib3gtc2hhZG93LCB2YXIoLS1ib3gtc2hhZG93KSk7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1zdWNjZXNzLWZvbnQtd2VpZ2h0LCA2MDApO1xuICBjb2xvcjogdmFyKC0tc3VjY2Vzcy1jb2xvcik7XG4gIGZpbGw6IHZhcigtLXN1Y2Nlc3MtY29sb3IpO1xuICBwYWRkaW5nOiAxMnB4IDI0cHg7XG4gIGxpbmUtaGVpZ2h0OiAxLjc1ZW07XG5cbiAgZGlzcGxheTogZ3JpZDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ3JpZC1hdXRvLWZsb3c6IGNvbHVtbjtcbiAgZ2FwOiA2cHg7XG4gIGN1cnNvcjogZGVmYXVsdDtcbn1cblxuLnN1Y2Nlc3NfX2ljb24ge1xuICBkaXNwbGF5OiBmbGV4O1xufVxuYDtcblxuLyoqXG4gKiBDcmVhdGVzIDxzdHlsZT4gZWxlbWVudCBmb3Igd2lkZ2V0IGRpYWxvZ1xuICovXG5mdW5jdGlvbiBjcmVhdGVEaWFsb2dTdHlsZXMoc3R5bGVOb25jZSkge1xuICBjb25zdCBzdHlsZSA9IERPQ1VNRU5ULmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLnRleHRDb250ZW50ID0gYFxuOmhvc3Qge1xuICAtLWRpYWxvZy1pbnNldDogdmFyKC0taW5zZXQpO1xufVxuXG4ke0RJQUxPR31cbiR7RElBTE9HX0hFQURFUn1cbiR7Rk9STX1cbiR7QlVUVE9OfVxuJHtTVUNDRVNTfVxuYDtcbiAgaWYgKHN0eWxlTm9uY2UpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgc3R5bGVOb25jZSk7XG4gIH1cbiAgcmV0dXJuIHN0eWxlO1xufVxuZnVuY3Rpb24gZ2V0VXNlcigpIHtcbiAgY29uc3QgY3VycmVudFVzZXIgPSBnZXRDdXJyZW50U2NvcGUoKS5nZXRVc2VyKCk7XG4gIGNvbnN0IGlzb2xhdGlvblVzZXIgPSBnZXRJc29sYXRpb25TY29wZSgpLmdldFVzZXIoKTtcbiAgY29uc3QgZ2xvYmFsVXNlciA9IGdldEdsb2JhbFNjb3BlKCkuZ2V0VXNlcigpO1xuICBpZiAoY3VycmVudFVzZXIgJiYgT2JqZWN0LmtleXMoY3VycmVudFVzZXIpLmxlbmd0aCkge1xuICAgIHJldHVybiBjdXJyZW50VXNlcjtcbiAgfVxuICBpZiAoaXNvbGF0aW9uVXNlciAmJiBPYmplY3Qua2V5cyhpc29sYXRpb25Vc2VyKS5sZW5ndGgpIHtcbiAgICByZXR1cm4gaXNvbGF0aW9uVXNlcjtcbiAgfVxuICByZXR1cm4gZ2xvYmFsVXNlcjtcbn1cbmNvbnN0IGZlZWRiYWNrTW9kYWxJbnRlZ3JhdGlvbiA9ICgpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAnRmVlZGJhY2tNb2RhbCcsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgIHNldHVwT25jZSgpIHt9LFxuICAgIGNyZWF0ZURpYWxvZzogKHtcbiAgICAgIG9wdGlvbnMsXG4gICAgICBzY3JlZW5zaG90SW50ZWdyYXRpb24sXG4gICAgICBzZW5kRmVlZGJhY2ssXG4gICAgICBzaGFkb3dcbiAgICB9KSA9PiB7XG4gICAgICBjb25zdCBzaGFkb3dSb290ID0gc2hhZG93O1xuICAgICAgY29uc3QgdXNlcktleSA9IG9wdGlvbnMudXNlU2VudHJ5VXNlcjtcbiAgICAgIGNvbnN0IHVzZXIgPSBnZXRVc2VyKCk7XG4gICAgICBjb25zdCBlbCA9IERPQ1VNRU5ULmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29uc3Qgc3R5bGUgPSBjcmVhdGVEaWFsb2dTdHlsZXMob3B0aW9ucy5zdHlsZU5vbmNlKTtcbiAgICAgIGxldCBvcmlnaW5hbE92ZXJmbG93ID0gJyc7XG4gICAgICBjb25zdCBkaWFsb2cgPSB7XG4gICAgICAgIGdldCBlbCgpIHtcbiAgICAgICAgICByZXR1cm4gZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGFwcGVuZFRvRG9tKCkge1xuICAgICAgICAgIGlmICghc2hhZG93Um9vdC5jb250YWlucyhzdHlsZSkgJiYgIXNoYWRvd1Jvb3QuY29udGFpbnMoZWwpKSB7XG4gICAgICAgICAgICBzaGFkb3dSb290LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlRnJvbURvbSgpIHtcbiAgICAgICAgICBlbC5yZW1vdmUoKTtcbiAgICAgICAgICBzdHlsZS5yZW1vdmUoKTtcbiAgICAgICAgICBET0NVTUVOVC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gb3JpZ2luYWxPdmVyZmxvdztcbiAgICAgICAgfSxcbiAgICAgICAgb3BlbigpIHtcbiAgICAgICAgICByZW5kZXJDb250ZW50KHRydWUpO1xuICAgICAgICAgIG9wdGlvbnMub25Gb3JtT3Blbj8uKCk7XG4gICAgICAgICAgZ2V0Q2xpZW50KCk/LmVtaXQoJ29wZW5GZWVkYmFja1dpZGdldCcpO1xuICAgICAgICAgIG9yaWdpbmFsT3ZlcmZsb3cgPSBET0NVTUVOVC5ib2R5LnN0eWxlLm92ZXJmbG93O1xuICAgICAgICAgIERPQ1VNRU5ULmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgfSxcbiAgICAgICAgY2xvc2UoKSB7XG4gICAgICAgICAgcmVuZGVyQ29udGVudChmYWxzZSk7XG4gICAgICAgICAgRE9DVU1FTlQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IG9yaWdpbmFsT3ZlcmZsb3c7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdCBzY3JlZW5zaG90SW5wdXQgPSBzY3JlZW5zaG90SW50ZWdyYXRpb24/LmNyZWF0ZUlucHV0KHtcbiAgICAgICAgaDogeSQxLFxuICAgICAgICBob29rcyxcbiAgICAgICAgZGlhbG9nLFxuICAgICAgICBvcHRpb25zXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHJlbmRlckNvbnRlbnQgPSBvcGVuID0+IHtcbiAgICAgICAgQiQxKHkkMShEaWFsb2csIHtcbiAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgIHNjcmVlbnNob3RJbnB1dDogc2NyZWVuc2hvdElucHV0LFxuICAgICAgICAgIHNob3dOYW1lOiBvcHRpb25zLnNob3dOYW1lIHx8IG9wdGlvbnMuaXNOYW1lUmVxdWlyZWQsXG4gICAgICAgICAgc2hvd0VtYWlsOiBvcHRpb25zLnNob3dFbWFpbCB8fCBvcHRpb25zLmlzRW1haWxSZXF1aXJlZCxcbiAgICAgICAgICBkZWZhdWx0TmFtZTogdXNlcktleSAmJiB1c2VyICYmIHVzZXJbdXNlcktleS5uYW1lXSB8fCAnJyxcbiAgICAgICAgICBkZWZhdWx0RW1haWw6IHVzZXJLZXkgJiYgdXNlciAmJiB1c2VyW3VzZXJLZXkuZW1haWxdIHx8ICcnLFxuICAgICAgICAgIG9uRm9ybUNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICByZW5kZXJDb250ZW50KGZhbHNlKTtcbiAgICAgICAgICAgIG9wdGlvbnMub25Gb3JtQ2xvc2U/LigpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25TdWJtaXQ6IHNlbmRGZWVkYmFjayxcbiAgICAgICAgICBvblN1Ym1pdFN1Y2Nlc3M6IChkYXRhLCBldmVudElkKSA9PiB7XG4gICAgICAgICAgICByZW5kZXJDb250ZW50KGZhbHNlKTtcbiAgICAgICAgICAgIG9wdGlvbnMub25TdWJtaXRTdWNjZXNzPy4oZGF0YSwgZXZlbnRJZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvblN1Ym1pdEVycm9yOiBlcnJvciA9PiB7XG4gICAgICAgICAgICBvcHRpb25zLm9uU3VibWl0RXJyb3I/LihlcnJvcik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvbkZvcm1TdWJtaXR0ZWQ6ICgpID0+IHtcbiAgICAgICAgICAgIG9wdGlvbnMub25Gb3JtU3VibWl0dGVkPy4oKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wZW46IG9wZW5cbiAgICAgICAgfSksIGVsKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gZGlhbG9nO1xuICAgIH1cbiAgfTtcbn07XG5mdW5jdGlvbiBJY29uQ2xvc2VGYWN0b3J5KHtcbiAgaCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xufSkge1xuICByZXR1cm4gZnVuY3Rpb24gSWNvbkNsb3NlKCkge1xuICAgIHJldHVybiBoKCdzdmcnLCB7XG4gICAgICAnZGF0YS10ZXN0LWlkJzogXCJpY29uLWNsb3NlXCIsXG4gICAgICB2aWV3Qm94OiBcIjAgMCAxNiAxNlwiLFxuICAgICAgZmlsbDogXCIjMkIyMjMzXCIsXG4gICAgICBoZWlnaHQ6IFwiMjVweFwiLFxuICAgICAgd2lkdGg6IFwiMjVweFwiXG4gICAgfSwgaCgnY2lyY2xlJywge1xuICAgICAgcjogXCI3XCIsXG4gICAgICBjeDogXCI4XCIsXG4gICAgICBjeTogXCI4XCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCJcbiAgICB9KSwgaCgncGF0aCcsIHtcbiAgICAgIHN0cm9rZVdpZHRoOiBcIjEuNVwiLFxuICAgICAgZDogXCJNOCwxNmE4LDgsMCwxLDEsOC04QTgsOCwwLDAsMSw4LDE2Wk04LDEuNTNBNi40Nyw2LjQ3LDAsMSwwLDE0LjQ3LDgsNi40Nyw2LjQ3LDAsMCwwLDgsMS41M1pcIlxuICAgIH0pLCBoKCdwYXRoJywge1xuICAgICAgc3Ryb2tlV2lkdGg6IFwiMS41XCIsXG4gICAgICBkOiBcIk01LjM0LDExLjQxYS43MS43MSwwLDAsMS0uNTMtLjIyLjc0Ljc0LDAsMCwxLDAtMS4wNmw1LjMyLTUuMzJhLjc1Ljc1LDAsMCwxLDEuMDYsMS4wNkw1Ljg3LDExLjE5QS43NC43NCwwLDAsMSw1LjM0LDExLjQxWlwiXG4gICAgfSksIGgoJ3BhdGgnLCB7XG4gICAgICBzdHJva2VXaWR0aDogXCIxLjVcIixcbiAgICAgIGQ6IFwiTTEwLjY2LDExLjQxYS43NC43NCwwLDAsMS0uNTMtLjIyTDQuODEsNS44N0EuNzUuNzUsMCwwLDEsNS44Nyw0LjgxbDUuMzIsNS4zMmEuNzQuNzQsMCwwLDEsMCwxLjA2QS43MS43MSwwLDAsMSwxMC42NiwxMS40MVpcIlxuICAgIH0pKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIDxzdHlsZT4gZWxlbWVudCBmb3Igd2lkZ2V0IGRpYWxvZ1xuICovXG5mdW5jdGlvbiBjcmVhdGVTY3JlZW5zaG90SW5wdXRTdHlsZXMoc3R5bGVOb25jZSkge1xuICBjb25zdCBzdHlsZSA9IERPQ1VNRU5ULmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIGNvbnN0IHN1cmZhY2UyMDAgPSAnIzFBMTQxRic7XG4gIGNvbnN0IGdyYXkxMDAgPSAnIzMwMjczNSc7XG4gIHN0eWxlLnRleHRDb250ZW50ID0gYFxuLmVkaXRvciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZ3JvdzogMTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuLmVkaXRvcl9faW1hZ2UtY29udGFpbmVyIHtcbiAganVzdGlmeS1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAxNXB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGhlaWdodDogMTAwJTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tbWVudS1ib3JkZXItcmFkaXVzLCA2cHgpO1xuXG4gIGJhY2tncm91bmQtY29sb3I6ICR7c3VyZmFjZTIwMH07XG4gIGJhY2tncm91bmQtaW1hZ2U6IHJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoXG4gICAgICAtMTQ1ZGVnLFxuICAgICAgdHJhbnNwYXJlbnQsXG4gICAgICB0cmFuc3BhcmVudCA4cHgsXG4gICAgICAke3N1cmZhY2UyMDB9IDhweCxcbiAgICAgICR7c3VyZmFjZTIwMH0gMTFweFxuICAgICksXG4gICAgcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudChcbiAgICAgIC00NWRlZyxcbiAgICAgIHRyYW5zcGFyZW50LFxuICAgICAgdHJhbnNwYXJlbnQgMTVweCxcbiAgICAgICR7Z3JheTEwMH0gMTVweCxcbiAgICAgICR7Z3JheTEwMH0gMTZweFxuICAgICk7XG59XG5cbi5lZGl0b3JfX2NhbnZhcy1jb250YWluZXIge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uZWRpdG9yX19jYW52YXMtY29udGFpbmVyID4gKiB7XG4gIG9iamVjdC1maXQ6IGNvbnRhaW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbn1cblxuLmVkaXRvcl9fdG9vbC1jb250YWluZXIge1xuICBwYWRkaW5nLXRvcDogOHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLmVkaXRvcl9fdG9vbC1iYXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDhweDtcbn1cblxuLmVkaXRvcl9fdG9vbCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBhZGRpbmc6IDhweCAxMnB4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYm9yZGVyOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1ib3JkZXIpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYnV0dG9uLWJvcmRlci1yYWRpdXMsIDZweCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1iYWNrZ3JvdW5kLCB2YXIoLS1iYWNrZ3JvdW5kKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWZvcmVncm91bmQpKTtcbn1cblxuLmVkaXRvcl9fdG9vbC0tYWN0aXZlIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLXByaW1hcnktYmFja2dyb3VuZCwgdmFyKC0tYWNjZW50LWJhY2tncm91bmQpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1wcmltYXJ5LWNvbG9yLCB2YXIoLS1hY2NlbnQtZm9yZWdyb3VuZCkpO1xufVxuXG4uZWRpdG9yX19yZWN0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAyO1xufVxuXG4uZWRpdG9yX19yZWN0IGJ1dHRvbiB7XG4gIG9wYWNpdHk6IDA7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMTJweDtcbiAgcmlnaHQ6IC0xMnB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHBhZGRpbmc6IDA7XG4gIHotaW5kZXg6IDM7XG4gIGJvcmRlcjogbm9uZTtcbiAgYmFja2dyb3VuZDogbm9uZTtcbn1cblxuLmVkaXRvcl9fcmVjdDpob3ZlciBidXR0b24ge1xuICBvcGFjaXR5OiAxO1xufVxuYDtcbiAgaWYgKHN0eWxlTm9uY2UpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgc3R5bGVOb25jZSk7XG4gIH1cbiAgcmV0dXJuIHN0eWxlO1xufVxuZnVuY3Rpb24gVG9vbGJhckZhY3Rvcnkoe1xuICBoIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG59KSB7XG4gIHJldHVybiBmdW5jdGlvbiBUb29sYmFyKHtcbiAgICBhY3Rpb24sXG4gICAgc2V0QWN0aW9uXG4gIH0pIHtcbiAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgY2xhc3M6IFwiZWRpdG9yX190b29sLWNvbnRhaW5lclwiXG4gICAgfSwgaCgnZGl2Jywge1xuICAgICAgY2xhc3M6IFwiZWRpdG9yX190b29sLWJhclwiXG4gICAgfSwgaCgnYnV0dG9uJywge1xuICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgIGNsYXNzOiBgZWRpdG9yX190b29sICR7YWN0aW9uID09PSAnaGlnaGxpZ2h0JyA/ICdlZGl0b3JfX3Rvb2wtLWFjdGl2ZScgOiAnJ31gLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBzZXRBY3Rpb24oYWN0aW9uID09PSAnaGlnaGxpZ2h0JyA/ICcnIDogJ2hpZ2hsaWdodCcpO1xuICAgICAgfVxuICAgIH0sIFwiSGlnaGxpZ2h0XCIpLCBoKCdidXR0b24nLCB7XG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgY2xhc3M6IGBlZGl0b3JfX3Rvb2wgJHthY3Rpb24gPT09ICdoaWRlJyA/ICdlZGl0b3JfX3Rvb2wtLWFjdGl2ZScgOiAnJ31gLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBzZXRBY3Rpb24oYWN0aW9uID09PSAnaGlkZScgPyAnJyA6ICdoaWRlJyk7XG4gICAgICB9XG4gICAgfSwgXCJIaWRlXCIpKSk7XG4gIH07XG59XG5mdW5jdGlvbiB1c2VUYWtlU2NyZWVuc2hvdEZhY3Rvcnkoe1xuICBob29rc1xufSkge1xuICBmdW5jdGlvbiB1c2VEcGkoKSB7XG4gICAgY29uc3QgW2RwaSwgc2V0RHBpXSA9IGhvb2tzLnVzZVN0YXRlKFdJTkRPVy5kZXZpY2VQaXhlbFJhdGlvID8/IDEpO1xuICAgIGhvb2tzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zdCBvbkNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgc2V0RHBpKFdJTkRPVy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICAgIH07XG4gICAgICBjb25zdCBtZWRpYSA9IG1hdGNoTWVkaWEoYChyZXNvbHV0aW9uOiAke1dJTkRPVy5kZXZpY2VQaXhlbFJhdGlvfWRwcHgpYCk7XG4gICAgICBtZWRpYS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBtZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgICB9O1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gZHBpO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiB1c2VUYWtlU2NyZWVuc2hvdCh7XG4gICAgb25CZWZvcmVTY3JlZW5zaG90LFxuICAgIG9uU2NyZWVuc2hvdCxcbiAgICBvbkFmdGVyU2NyZWVuc2hvdCxcbiAgICBvbkVycm9yXG4gIH0pIHtcbiAgICBjb25zdCBkcGkgPSB1c2VEcGkoKTtcbiAgICBob29rcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgdGFrZVNjcmVlbnNob3QgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIG9uQmVmb3JlU2NyZWVuc2hvdCgpO1xuXG4gICAgICAgIC8vIENocm9tZSB3aWxsIGFuaW1hdGUgYSB0b3AtYmFyIHdoaWNoIGNhbiBzaHJpbmsgdGhlIHdpbmRvdyBoZWlnaHQgYnkgYVxuICAgICAgICAvLyBmZXcgcGl4ZWxzLiBUaGUgZXhhY3QgYW1vdW50IGRlcGVuZHMgb24gaG93IGZhc3QgaXQgdGFrZXMgdG8gZXhlY1xuICAgICAgICAvLyB0aGUgb25sb2FkZWRtZXRhZGF0YSBjYWxsYmFjay5cbiAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzc1ODMzMDQ5XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IE5BVklHQVRPUi5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKHtcbiAgICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgd2lkdGg6IFdJTkRPVy5pbm5lcldpZHRoICogZHBpLFxuICAgICAgICAgICAgaGVpZ2h0OiBXSU5ET1cuaW5uZXJIZWlnaHQgKiBkcGlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGF1ZGlvOiBmYWxzZSxcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGV4cGVyaW1lbnRhbCBmbGFnczogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhRGV2aWNlcy9nZXREaXNwbGF5TWVkaWEjcHJlZmVyY3VycmVudHRhYlxuICAgICAgICAgIG1vbml0b3JUeXBlU3VyZmFjZXM6ICdleGNsdWRlJyxcbiAgICAgICAgICBwcmVmZXJDdXJyZW50VGFiOiB0cnVlLFxuICAgICAgICAgIHNlbGZCcm93c2VyU3VyZmFjZTogJ2luY2x1ZGUnLFxuICAgICAgICAgIHN1cmZhY2VTd2l0Y2hpbmc6ICdleGNsdWRlJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdmlkZW8gPSBET0NVTUVOVC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgICAgIHZpZGVvLm9ubG9hZGVkbWV0YWRhdGEgPSAoKSA9PiB7XG4gICAgICAgICAgICBvblNjcmVlbnNob3QodmlkZW8sIGRwaSk7XG4gICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgdmlkZW8ucGxheSgpLmNhdGNoKHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgICBvbkFmdGVyU2NyZWVuc2hvdCgpO1xuICAgICAgfTtcbiAgICAgIHRha2VTY3JlZW5zaG90KCkuY2F0Y2gob25FcnJvcik7XG4gICAgfSwgW10pO1xuICB9O1xufVxuZnVuY3Rpb24gZHJhd1JlY3QoY29tbWFuZCwgY3R4LCBjb2xvcikge1xuICBzd2l0Y2ggKGNvbW1hbmQudHlwZSkge1xuICAgIGNhc2UgJ2hpZ2hsaWdodCc6XG4gICAgICB7XG4gICAgICAgIC8vIGNyZWF0ZXMgYSBzaGFkb3cgYXJvdW5kXG4gICAgICAgIGN0eC5zaGFkb3dDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDUwO1xuXG4gICAgICAgIC8vIGRyYXdzIGEgcmVjdGFuZ2xlIGZpcnN0IHdpdGggYSBzaGFkb3dcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICBjdHguZmlsbFJlY3QoY29tbWFuZC54IC0gMSwgY29tbWFuZC55IC0gMSwgY29tbWFuZC53ICsgMiwgY29tbWFuZC5oICsgMik7XG5cbiAgICAgICAgLy8gY3V0IG91dCB0aGUgaW5zaWRlIG9mIHRoZSByZWN0YW5nbGVcbiAgICAgICAgY3R4LmNsZWFyUmVjdChjb21tYW5kLngsIGNvbW1hbmQueSwgY29tbWFuZC53LCBjb21tYW5kLmgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICBjYXNlICdoaWRlJzpcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiKDAsIDAsIDApJztcbiAgICAgIGN0eC5maWxsUmVjdChjb21tYW5kLngsIGNvbW1hbmQueSwgY29tbWFuZC53LCBjb21tYW5kLmgpO1xuICAgICAgYnJlYWs7XG4gIH1cbn1cbmZ1bmN0aW9uIHdpdGgyZENvbnRleHQoY2FudmFzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAoIWNhbnZhcykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnLCBvcHRpb25zKTtcbiAgaWYgKCFjdHgpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY2FsbGJhY2soY2FudmFzLCBjdHgpO1xufVxuZnVuY3Rpb24gcGFpbnRJbWFnZShtYXliZURlc3QsIHNvdXJjZSkge1xuICB3aXRoMmRDb250ZXh0KG1heWJlRGVzdCwge1xuICAgIGFscGhhOiB0cnVlXG4gIH0sIChkZXN0Q2FudmFzLCBkZXN0Q3R4KSA9PiB7XG4gICAgZGVzdEN0eC5kcmF3SW1hZ2Uoc291cmNlLCAwLCAwLCBzb3VyY2Uud2lkdGgsIHNvdXJjZS5oZWlnaHQsIDAsIDAsIGRlc3RDYW52YXMud2lkdGgsIGRlc3RDYW52YXMuaGVpZ2h0KTtcbiAgfSk7XG59XG5cbi8vIFBhaW50IHRoZSBhcnJheSBvZiBkcmF3Q29tbWFuZHMgaW50byBhIGNhbnZhcy5cbi8vIEFzc3VtaW5nIHRoaXMgaXMgdGhlIGNhbnZhcyBmb3JlZ3JvdW5kLCBhbmQgdGhlIGJhY2tncm91bmQgaXMgY2xlYW5lZC5cbmZ1bmN0aW9uIHBhaW50Rm9yZWdyb3VuZChtYXliZUNhbnZhcywgc3Ryb2tlQ29sb3IsIGRyYXdDb21tYW5kcykge1xuICB3aXRoMmRDb250ZXh0KG1heWJlQ2FudmFzLCB7XG4gICAgYWxwaGE6IHRydWVcbiAgfSwgKGNhbnZhcywgY3R4KSA9PiB7XG4gICAgLy8gSWYgdGhlcmUncyBhbnl0aGluZyB0byBkcmF3LCB0aGVuIHdlJ2xsIGZpcnN0IGNsZWFyIHRoZSBjYW52YXMgd2l0aFxuICAgIC8vIGEgdHJhbnNwYXJlbnQgZ3JleSBiYWNrZ3JvdW5kXG4gICAgaWYgKGRyYXdDb21tYW5kcy5sZW5ndGgpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAwLjI1KSc7XG4gICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB9XG4gICAgZHJhd0NvbW1hbmRzLmZvckVhY2goY29tbWFuZCA9PiB7XG4gICAgICBkcmF3UmVjdChjb21tYW5kLCBjdHgsIHN0cm9rZUNvbG9yKTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBTY3JlZW5zaG90RWRpdG9yRmFjdG9yeSh7XG4gIGgsXG4gIGhvb2tzLFxuICBvdXRwdXRCdWZmZXIsXG4gIGRpYWxvZyxcbiAgb3B0aW9uc1xufSkge1xuICBjb25zdCB1c2VUYWtlU2NyZWVuc2hvdCA9IHVzZVRha2VTY3JlZW5zaG90RmFjdG9yeSh7XG4gICAgaG9va3NcbiAgfSk7XG4gIGNvbnN0IFRvb2xiYXIgPSBUb29sYmFyRmFjdG9yeSh7XG4gICAgaFxuICB9KTtcbiAgY29uc3QgSWNvbkNsb3NlID0gSWNvbkNsb3NlRmFjdG9yeSh7XG4gICAgaFxuICB9KTtcbiAgY29uc3QgZWRpdG9yU3R5bGVJbm5lclRleHQgPSB7XG4gICAgX19odG1sOiBjcmVhdGVTY3JlZW5zaG90SW5wdXRTdHlsZXMob3B0aW9ucy5zdHlsZU5vbmNlKS5pbm5lclRleHRcbiAgfTtcbiAgY29uc3QgZGlhbG9nU3R5bGUgPSBkaWFsb2cuZWwuc3R5bGU7XG4gIGNvbnN0IFNjcmVlbnNob3RFZGl0b3IgPSAoe1xuICAgIHNjcmVlbnNob3RcbiAgfSkgPT4ge1xuICAgIC8vIERhdGEgZm9yIHJlbmRlcmluZzpcbiAgICBjb25zdCBbYWN0aW9uLCBzZXRBY3Rpb25dID0gaG9va3MudXNlU3RhdGUoJ2hpZ2hsaWdodCcpO1xuICAgIGNvbnN0IFtkcmF3Q29tbWFuZHMsIHNldERyYXdDb21tYW5kc10gPSBob29rcy51c2VTdGF0ZShbXSk7XG5cbiAgICAvLyBSZWZzIHRvIG91ciBodG1sIGNvbXBvbmVudHM6XG4gICAgY29uc3QgbWVhc3VyZW1lbnRSZWYgPSBob29rcy51c2VSZWYobnVsbCk7XG4gICAgY29uc3QgYmFja2dyb3VuZFJlZiA9IGhvb2tzLnVzZVJlZihudWxsKTtcbiAgICBjb25zdCBmb3JlZ3JvdW5kUmVmID0gaG9va3MudXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IG1vdXNlUmVmID0gaG9va3MudXNlUmVmKG51bGwpO1xuXG4gICAgLy8gVGhlIHNpemUgb2Ygb3VyIHdpbmRvdywgcmVsYXRpdmUgdG8gdGhlIGltYWdlU291cmNlXG4gICAgY29uc3QgW3NjYWxlRmFjdG9yLCBzZXRTY2FsZUZhY3Rvcl0gPSBob29rcy51c2VTdGF0ZSgxKTtcbiAgICBjb25zdCBzdHJva2VDb2xvciA9IGhvb2tzLnVzZU1lbW8oKCkgPT4ge1xuICAgICAgY29uc3Qgc2VudHJ5RmVlZGJhY2sgPSBET0NVTUVOVC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmlkKTtcbiAgICAgIGlmICghc2VudHJ5RmVlZGJhY2spIHtcbiAgICAgICAgcmV0dXJuICd3aGl0ZSc7XG4gICAgICB9XG4gICAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShzZW50cnlGZWVkYmFjayk7XG4gICAgICByZXR1cm4gY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJ1dHRvbi1wcmltYXJ5LWJhY2tncm91bmQnKSB8fCBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy0tYWNjZW50LWJhY2tncm91bmQnKTtcbiAgICB9LCBbb3B0aW9ucy5pZF0pO1xuXG4gICAgLy8gVGhlIGluaXRpYWwgcmVzaXplLCB0byBtZWFzdXJlIHRoZSBhcmVhIGFuZCBzZXQgdGhlIGNoaWxkcmVuIHRvIHRoZSBjb3JyZWN0IHNpemVcbiAgICBob29rcy51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtZWFzdXJlbWVudERpdiA9IG1lYXN1cmVtZW50UmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghbWVhc3VyZW1lbnREaXYpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2l0aDJkQ29udGV4dChzY3JlZW5zaG90LmNhbnZhcywge1xuICAgICAgICAgIGFscGhhOiBmYWxzZVxuICAgICAgICB9LCBjYW52YXMgPT4ge1xuICAgICAgICAgIGNvbnN0IHNjYWxlID0gTWF0aC5taW4obWVhc3VyZW1lbnREaXYuY2xpZW50V2lkdGggLyBjYW52YXMud2lkdGgsIG1lYXN1cmVtZW50RGl2LmNsaWVudEhlaWdodCAvIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgIHNldFNjYWxlRmFjdG9yKHNjYWxlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRm9yIEZpcmVmb3gsIHRoZSBjYW52YXMgaXMgbm90IHlldCBtZWFzdXJlZCwgc28gd2UgbmVlZCB0byB3YWl0IGZvciBpdCB0byBnZXQgdGhlIGNvcnJlY3Qgc2l6ZVxuICAgICAgICBpZiAobWVhc3VyZW1lbnREaXYuY2xpZW50SGVpZ2h0ID09PSAwIHx8IG1lYXN1cmVtZW50RGl2LmNsaWVudFdpZHRoID09PSAwKSB7XG4gICAgICAgICAgc2V0VGltZW91dChoYW5kbGVSZXNpemUsIDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaGFuZGxlUmVzaXplKCk7XG4gICAgICBXSU5ET1cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlUmVzaXplKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIFdJTkRPVy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVSZXNpemUpO1xuICAgICAgfTtcbiAgICB9LCBbc2NyZWVuc2hvdF0pO1xuXG4gICAgLy8gU2V0IHRoZSBzaXplIG9mIHRoZSBjYW52YXMgZWxlbWVudCB0byBtYXRjaCBvdXIgc2NyZWVuc2hvdFxuICAgIGNvbnN0IHNldENhbnZhc1NpemUgPSBob29rcy51c2VDYWxsYmFjaygobWF5YmVDYW52YXMsIHNjYWxlKSA9PiB7XG4gICAgICB3aXRoMmRDb250ZXh0KG1heWJlQ2FudmFzLCB7XG4gICAgICAgIGFscGhhOiB0cnVlXG4gICAgICB9LCAoY2FudmFzLCBjdHgpID0+IHtcbiAgICAgICAgLy8gTXVzdCBjYWxsIGBzY2FsZSgpYCBiZWZvcmUgc2V0dGluZyBgd2lkdGhgICYgYGhlaWdodGBcbiAgICAgICAgY3R4LnNjYWxlKHNjYWxlLCBzY2FsZSk7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNjcmVlbnNob3QuY2FudmFzLndpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2NyZWVuc2hvdC5jYW52YXMuaGVpZ2h0O1xuICAgICAgfSk7XG4gICAgfSwgW3NjcmVlbnNob3RdKTtcblxuICAgIC8vIERyYXcgdGhlIHNjcmVlbnNob3QgaW50byB0aGUgYmFja2dyb3VuZFxuICAgIGhvb2tzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBzZXRDYW52YXNTaXplKGJhY2tncm91bmRSZWYuY3VycmVudCwgc2NyZWVuc2hvdC5kcGkpO1xuICAgICAgcGFpbnRJbWFnZShiYWNrZ3JvdW5kUmVmLmN1cnJlbnQsIHNjcmVlbnNob3QuY2FudmFzKTtcbiAgICB9LCBbc2NyZWVuc2hvdF0pO1xuXG4gICAgLy8gRHJhdyB0aGUgY29tbWFuZHMgaW50byB0aGUgZm9yZWdyb3VuZFxuICAgIGhvb2tzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBzZXRDYW52YXNTaXplKGZvcmVncm91bmRSZWYuY3VycmVudCwgc2NyZWVuc2hvdC5kcGkpO1xuICAgICAgd2l0aDJkQ29udGV4dChmb3JlZ3JvdW5kUmVmLmN1cnJlbnQsIHtcbiAgICAgICAgYWxwaGE6IHRydWVcbiAgICAgIH0sIChjYW52YXMsIGN0eCkgPT4ge1xuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9KTtcbiAgICAgIHBhaW50Rm9yZWdyb3VuZChmb3JlZ3JvdW5kUmVmLmN1cnJlbnQsIHN0cm9rZUNvbG9yLCBkcmF3Q29tbWFuZHMpO1xuICAgIH0sIFtkcmF3Q29tbWFuZHMsIHN0cm9rZUNvbG9yXSk7XG5cbiAgICAvLyBEcmF3IGludG8gdGhlIG91dHB1dCBvdXRwdXRCdWZmZXJcbiAgICBob29rcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgc2V0Q2FudmFzU2l6ZShvdXRwdXRCdWZmZXIsIHNjcmVlbnNob3QuZHBpKTtcbiAgICAgIHBhaW50SW1hZ2Uob3V0cHV0QnVmZmVyLCBzY3JlZW5zaG90LmNhbnZhcyk7XG4gICAgICB3aXRoMmRDb250ZXh0KERPQ1VNRU5ULmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLCB7XG4gICAgICAgIGFscGhhOiB0cnVlXG4gICAgICB9LCAoZm9yZWdyb3VuZCwgY3R4KSA9PiB7XG4gICAgICAgIGN0eC5zY2FsZShzY3JlZW5zaG90LmRwaSwgc2NyZWVuc2hvdC5kcGkpOyAvLyBUaGUgc2NhbGUgbmVlZHMgdG8gYmUgc2V0IGJlZm9yZSB3ZSBzZXQgdGhlIHdpZHRoL2hlaWdodCBhbmQgcGFpbnRcbiAgICAgICAgZm9yZWdyb3VuZC53aWR0aCA9IHNjcmVlbnNob3QuY2FudmFzLndpZHRoO1xuICAgICAgICBmb3JlZ3JvdW5kLmhlaWdodCA9IHNjcmVlbnNob3QuY2FudmFzLmhlaWdodDtcbiAgICAgICAgcGFpbnRGb3JlZ3JvdW5kKGZvcmVncm91bmQsIHN0cm9rZUNvbG9yLCBkcmF3Q29tbWFuZHMpO1xuICAgICAgICBwYWludEltYWdlKG91dHB1dEJ1ZmZlciwgZm9yZWdyb3VuZCk7XG4gICAgICB9KTtcbiAgICB9LCBbZHJhd0NvbW1hbmRzLCBzY3JlZW5zaG90LCBzdHJva2VDb2xvcl0pO1xuICAgIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IGUgPT4ge1xuICAgICAgaWYgKCFhY3Rpb24gfHwgIW1vdXNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgYm91bmRpbmdSZWN0ID0gbW91c2VSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHN0YXJ0aW5nUG9pbnQgPSB7XG4gICAgICAgIHR5cGU6IGFjdGlvbixcbiAgICAgICAgeDogZS5vZmZzZXRYIC8gc2NhbGVGYWN0b3IsXG4gICAgICAgIHk6IGUub2Zmc2V0WSAvIHNjYWxlRmFjdG9yXG4gICAgICB9O1xuICAgICAgY29uc3QgZ2V0RHJhd0NvbW1hbmQgPSAoc3RhcnRpbmdQb2ludCwgZSkgPT4ge1xuICAgICAgICBjb25zdCB4ID0gKGUuY2xpZW50WCAtIGJvdW5kaW5nUmVjdC54KSAvIHNjYWxlRmFjdG9yO1xuICAgICAgICBjb25zdCB5ID0gKGUuY2xpZW50WSAtIGJvdW5kaW5nUmVjdC55KSAvIHNjYWxlRmFjdG9yO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IHN0YXJ0aW5nUG9pbnQudHlwZSxcbiAgICAgICAgICB4OiBNYXRoLm1pbihzdGFydGluZ1BvaW50LngsIHgpLFxuICAgICAgICAgIHk6IE1hdGgubWluKHN0YXJ0aW5nUG9pbnQueSwgeSksXG4gICAgICAgICAgdzogTWF0aC5hYnMoeCAtIHN0YXJ0aW5nUG9pbnQueCksXG4gICAgICAgICAgaDogTWF0aC5hYnMoeSAtIHN0YXJ0aW5nUG9pbnQueSlcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSBlID0+IHtcbiAgICAgICAgd2l0aDJkQ29udGV4dChmb3JlZ3JvdW5kUmVmLmN1cnJlbnQsIHtcbiAgICAgICAgICBhbHBoYTogdHJ1ZVxuICAgICAgICB9LCAoY2FudmFzLCBjdHgpID0+IHtcbiAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIH0pO1xuICAgICAgICBwYWludEZvcmVncm91bmQoZm9yZWdyb3VuZFJlZi5jdXJyZW50LCBzdHJva2VDb2xvciwgWy4uLmRyYXdDb21tYW5kcywgZ2V0RHJhd0NvbW1hbmQoc3RhcnRpbmdQb2ludCwgZSldKTtcbiAgICAgIH07XG4gICAgICBjb25zdCBoYW5kbGVNb3VzZVVwID0gZSA9PiB7XG4gICAgICAgIGNvbnN0IGRyYXdDb21tYW5kID0gZ2V0RHJhd0NvbW1hbmQoc3RhcnRpbmdQb2ludCwgZSk7XG5cbiAgICAgICAgLy8gUHJldmVudCBqdXN0IGNsaWNraW5nIG9udG8gdGhlIGNhbnZhcywgbW91c2UgaGFzIHRvIG1vdmUgYXQgbGVhc3QgMSBwaXhlbFxuICAgICAgICBpZiAoZHJhd0NvbW1hbmQudyAqIHNjYWxlRmFjdG9yID49IDEgJiYgZHJhd0NvbW1hbmQuaCAqIHNjYWxlRmFjdG9yID49IDEpIHtcbiAgICAgICAgICBzZXREcmF3Q29tbWFuZHMocHJldiA9PiBbLi4ucHJldiwgZHJhd0NvbW1hbmRdKTtcbiAgICAgICAgfVxuICAgICAgICBET0NVTUVOVC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgICBET0NVTUVOVC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XG4gICAgICB9O1xuICAgICAgRE9DVU1FTlQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIERPQ1VNRU5ULmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcbiAgICB9O1xuICAgIGNvbnN0IGRlbGV0ZVJlY3QgPSBob29rcy51c2VDYWxsYmFjayhpbmRleCA9PiB7XG4gICAgICByZXR1cm4gZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgc2V0RHJhd0NvbW1hbmRzKHByZXYgPT4ge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRSZWN0cyA9IFsuLi5wcmV2XTtcbiAgICAgICAgICB1cGRhdGVkUmVjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICByZXR1cm4gdXBkYXRlZFJlY3RzO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIGNvbnN0IGRpbWVuc2lvbnMgPSB7XG4gICAgICB3aWR0aDogYCR7c2NyZWVuc2hvdC5jYW52YXMud2lkdGggKiBzY2FsZUZhY3Rvcn1weGAsXG4gICAgICBoZWlnaHQ6IGAke3NjcmVlbnNob3QuY2FudmFzLmhlaWdodCAqIHNjYWxlRmFjdG9yfXB4YFxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlU3RvcFByb3BhZ2F0aW9uID0gZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH07XG4gICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgIGNsYXNzOiBcImVkaXRvclwiXG4gICAgfSwgaCgnc3R5bGUnLCB7XG4gICAgICBub25jZTogb3B0aW9ucy5zdHlsZU5vbmNlLFxuICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IGVkaXRvclN0eWxlSW5uZXJUZXh0XG4gICAgfSksIGgoJ2RpdicsIHtcbiAgICAgIGNsYXNzOiBcImVkaXRvcl9faW1hZ2UtY29udGFpbmVyXCJcbiAgICB9LCBoKCdkaXYnLCB7XG4gICAgICBjbGFzczogXCJlZGl0b3JfX2NhbnZhcy1jb250YWluZXJcIixcbiAgICAgIHJlZjogbWVhc3VyZW1lbnRSZWZcbiAgICB9LCBoKCdjYW52YXMnLCB7XG4gICAgICByZWY6IGJhY2tncm91bmRSZWYsXG4gICAgICBpZDogXCJiYWNrZ3JvdW5kXCIsXG4gICAgICBzdHlsZTogZGltZW5zaW9uc1xuICAgIH0pLCBoKCdjYW52YXMnLCB7XG4gICAgICByZWY6IGZvcmVncm91bmRSZWYsXG4gICAgICBpZDogXCJmb3JlZ3JvdW5kXCIsXG4gICAgICBzdHlsZTogZGltZW5zaW9uc1xuICAgIH0pLCBoKCdkaXYnLCB7XG4gICAgICByZWY6IG1vdXNlUmVmLFxuICAgICAgb25Nb3VzZURvd246IGhhbmRsZU1vdXNlRG93bixcbiAgICAgIHN0eWxlOiBkaW1lbnNpb25zXG4gICAgfSwgZHJhd0NvbW1hbmRzLm1hcCgocmVjdCwgaW5kZXgpID0+IGgoJ2RpdicsIHtcbiAgICAgIGtleTogaW5kZXgsXG4gICAgICBjbGFzczogXCJlZGl0b3JfX3JlY3RcIixcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHRvcDogYCR7cmVjdC55ICogc2NhbGVGYWN0b3J9cHhgLFxuICAgICAgICBsZWZ0OiBgJHtyZWN0LnggKiBzY2FsZUZhY3Rvcn1weGAsXG4gICAgICAgIHdpZHRoOiBgJHtyZWN0LncgKiBzY2FsZUZhY3Rvcn1weGAsXG4gICAgICAgIGhlaWdodDogYCR7cmVjdC5oICogc2NhbGVGYWN0b3J9cHhgXG4gICAgICB9XG4gICAgfSwgaCgnYnV0dG9uJywge1xuICAgICAgJ2FyaWEtbGFiZWwnOiBcIlJlbW92ZVwiLFxuICAgICAgb25DbGljazogZGVsZXRlUmVjdChpbmRleCksXG4gICAgICBvbk1vdXNlRG93bjogaGFuZGxlU3RvcFByb3BhZ2F0aW9uLFxuICAgICAgb25Nb3VzZVVwOiBoYW5kbGVTdG9wUHJvcGFnYXRpb24sXG4gICAgICB0eXBlOiBcImJ1dHRvblwiXG4gICAgfSwgaChJY29uQ2xvc2UsIG51bGwpKSkpKSkpLCBoKFRvb2xiYXIsIHtcbiAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgc2V0QWN0aW9uOiBzZXRBY3Rpb25cbiAgICB9KSk7XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbiBXcmFwcGVyKHtcbiAgICBvbkVycm9yXG4gIH0pIHtcbiAgICBjb25zdCBbc2NyZWVuc2hvdCwgc2V0U2NyZWVuc2hvdF0gPSBob29rcy51c2VTdGF0ZSgpO1xuICAgIHVzZVRha2VTY3JlZW5zaG90KHtcbiAgICAgIG9uQmVmb3JlU2NyZWVuc2hvdDogaG9va3MudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBkaWFsb2dTdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfSwgW10pLFxuICAgICAgb25TY3JlZW5zaG90OiBob29rcy51c2VDYWxsYmFjaygoc2NyZWVuc2hvdFZpZGVvLCBkcGkpID0+IHtcbiAgICAgICAgLy8gU3Rhc2ggdGhlIG9yaWdpbmFsIHNjcmVlbnNob3QgaW1hZ2Ugc28gd2UgY2FuIChyZSlkcmF3IGl0IG11bHRpcGxlIHRpbWVzXG4gICAgICAgIHdpdGgyZENvbnRleHQoRE9DVU1FTlQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksIHtcbiAgICAgICAgICBhbHBoYTogZmFsc2VcbiAgICAgICAgfSwgKGNhbnZhcywgY3R4KSA9PiB7XG4gICAgICAgICAgY3R4LnNjYWxlKGRwaSwgZHBpKTsgLy8gVGhlIHNjYWxlIG5lZWRzIHRvIGJlIHNldCBiZWZvcmUgd2Ugc2V0IHRoZSB3aWR0aC9oZWlnaHQgYW5kIHBhaW50XG4gICAgICAgICAgY2FudmFzLndpZHRoID0gc2NyZWVuc2hvdFZpZGVvLnZpZGVvV2lkdGg7XG4gICAgICAgICAgY2FudmFzLmhlaWdodCA9IHNjcmVlbnNob3RWaWRlby52aWRlb0hlaWdodDtcbiAgICAgICAgICBjdHguZHJhd0ltYWdlKHNjcmVlbnNob3RWaWRlbywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICBzZXRTY3JlZW5zaG90KHtcbiAgICAgICAgICAgIGNhbnZhcyxcbiAgICAgICAgICAgIGRwaVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUaGUgb3V0cHV0IGJ1ZmZlciwgd2Ugb25seSBuZWVkIHRvIHNldCB0aGUgd2lkdGgvaGVpZ2h0IG9uIHRoaXMgb25jZSwgaXQgc3RheXMgdGhlIHNhbWUgZm9yZXZlclxuICAgICAgICBvdXRwdXRCdWZmZXIud2lkdGggPSBzY3JlZW5zaG90VmlkZW8udmlkZW9XaWR0aDtcbiAgICAgICAgb3V0cHV0QnVmZmVyLmhlaWdodCA9IHNjcmVlbnNob3RWaWRlby52aWRlb0hlaWdodDtcbiAgICAgIH0sIFtdKSxcbiAgICAgIG9uQWZ0ZXJTY3JlZW5zaG90OiBob29rcy51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGRpYWxvZ1N0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgfSwgW10pLFxuICAgICAgb25FcnJvcjogaG9va3MudXNlQ2FsbGJhY2soZXJyb3IgPT4ge1xuICAgICAgICBkaWFsb2dTdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICB9LCBbXSlcbiAgICB9KTtcbiAgICBpZiAoc2NyZWVuc2hvdCkge1xuICAgICAgcmV0dXJuIGgoU2NyZWVuc2hvdEVkaXRvciwge1xuICAgICAgICBzY3JlZW5zaG90OiBzY3JlZW5zaG90XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGgoJ2RpdicsIG51bGwpO1xuICB9O1xufVxuY29uc3QgZmVlZGJhY2tTY3JlZW5zaG90SW50ZWdyYXRpb24gPSAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ0ZlZWRiYWNrU2NyZWVuc2hvdCcsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgIHNldHVwT25jZSgpIHt9LFxuICAgIGNyZWF0ZUlucHV0OiAoe1xuICAgICAgaCxcbiAgICAgIGhvb2tzLFxuICAgICAgZGlhbG9nLFxuICAgICAgb3B0aW9uc1xuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IG91dHB1dEJ1ZmZlciA9IERPQ1VNRU5ULmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5wdXQ6IFNjcmVlbnNob3RFZGl0b3JGYWN0b3J5KHtcbiAgICAgICAgICBoOiBoLFxuICAgICAgICAgIGhvb2tzOiBob29rcyxcbiAgICAgICAgICBvdXRwdXRCdWZmZXIsXG4gICAgICAgICAgZGlhbG9nLFxuICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgfSksXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXG4gICAgICAgIHZhbHVlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgb3V0cHV0QnVmZmVyLnRvQmxvYihyZXNvbHZlLCAnaW1hZ2UvcG5nJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGJsb2IpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShhd2FpdCBibG9iLmFycmF5QnVmZmVyKCkpO1xuICAgICAgICAgICAgY29uc3QgYXR0YWNobWVudCA9IHtcbiAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgZmlsZW5hbWU6ICdzY3JlZW5zaG90LnBuZycsXG4gICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vcG5nJ1xuICAgICAgICAgICAgICAvLyBhdHRhY2htZW50VHlwZT86IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuZXhwb3J0IHsgYnVpbGRGZWVkYmFja0ludGVncmF0aW9uLCBmZWVkYmFja01vZGFsSW50ZWdyYXRpb24sIGZlZWRiYWNrU2NyZWVuc2hvdEludGVncmF0aW9uLCBnZXRGZWVkYmFjaywgc2VuZEZlZWRiYWNrIH07XG4iLCJpbXBvcnQgeyBHTE9CQUxfT0JKLCBnZXRPcmlnaW5hbEZ1bmN0aW9uLCBtYXJrRnVuY3Rpb25XcmFwcGVkLCBhZGROb25FbnVtZXJhYmxlUHJvcGVydHksIHdpdGhTY29wZSwgYWRkRXhjZXB0aW9uVHlwZVZhbHVlLCBhZGRFeGNlcHRpb25NZWNoYW5pc20sIGNhcHR1cmVFeGNlcHRpb24sIGdldExvY2F0aW9uSHJlZiB9IGZyb20gJ0BzZW50cnkvY29yZSc7XG5jb25zdCBXSU5ET1cgPSBHTE9CQUxfT0JKO1xubGV0IGlnbm9yZU9uRXJyb3IgPSAwO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gc2hvdWxkSWdub3JlT25FcnJvcigpIHtcbiAgcmV0dXJuIGlnbm9yZU9uRXJyb3IgPiAwO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gaWdub3JlTmV4dE9uRXJyb3IoKSB7XG4gIC8vIG9uZXJyb3Igc2hvdWxkIHRyaWdnZXIgYmVmb3JlIHNldFRpbWVvdXRcbiAgaWdub3JlT25FcnJvcisrO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpZ25vcmVPbkVycm9yLS07XG4gIH0pO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuXG4vKipcbiAqIEluc3RydW1lbnRzIHRoZSBnaXZlbiBmdW5jdGlvbiBhbmQgc2VuZHMgYW4gZXZlbnQgdG8gU2VudHJ5IGV2ZXJ5IHRpbWUgdGhlXG4gKiBmdW5jdGlvbiB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICpcbiAqIEBwYXJhbSBmbiBBIGZ1bmN0aW9uIHRvIHdyYXAuIEl0IGlzIGdlbmVyYWxseSBzYWZlIHRvIHBhc3MgYW4gdW5ib3VuZCBmdW5jdGlvbiwgYmVjYXVzZSB0aGUgcmV0dXJuZWQgd3JhcHBlciBhbHdheXNcbiAqIGhhcyBhIGNvcnJlY3QgYHRoaXNgIGNvbnRleHQuXG4gKiBAcmV0dXJucyBUaGUgd3JhcHBlZCBmdW5jdGlvbi5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gd3JhcChmbiwgb3B0aW9ucyA9IHt9KSB7XG4gIC8vIGZvciBmdXR1cmUgcmVhZGVycyB3aGF0IHRoaXMgZG9lcyBpcyB3cmFwIGEgZnVuY3Rpb24gYW5kIHRoZW4gY3JlYXRlXG4gIC8vIGEgYmktZGlyZWN0aW9uYWwgd3JhcHBpbmcgYmV0d2VlbiB0aGVtLlxuICAvL1xuICAvLyBleGFtcGxlOiB3cmFwcGVkID0gd3JhcChvcmlnaW5hbCk7XG4gIC8vICBvcmlnaW5hbC5fX3NlbnRyeV93cmFwcGVkX18gLT4gd3JhcHBlZFxuICAvLyAgd3JhcHBlZC5fX3NlbnRyeV9vcmlnaW5hbF9fIC0+IG9yaWdpbmFsXG5cbiAgZnVuY3Rpb24gaXNGdW5jdGlvbihmbikge1xuICAgIHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbic7XG4gIH1cbiAgaWYgKCFpc0Z1bmN0aW9uKGZuKSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuICB0cnkge1xuICAgIC8vIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGZ1bmN0aW9uIHRoYXQgd2FzIHByZXZpb3VzbHkgd3JhcHBlZCwgcmV0dXJuXG4gICAgLy8gdGhlIG9yaWdpbmFsIHdyYXBwZXIuXG4gICAgY29uc3Qgd3JhcHBlciA9IGZuLl9fc2VudHJ5X3dyYXBwZWRfXztcbiAgICBpZiAod3JhcHBlcikge1xuICAgICAgaWYgKHR5cGVvZiB3cmFwcGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgd2UgZmluZCB0aGF0IHRoZSBgX19zZW50cnlfd3JhcHBlZF9fYCBmdW5jdGlvbiBpcyBub3QgYSBmdW5jdGlvbiBhdCB0aGUgdGltZSBvZiBhY2Nlc3NpbmcgaXQsIGl0IG1lYW5zXG4gICAgICAgIC8vIHRoYXQgc29tZXRoaW5nIG1lc3NlZCB3aXRoIGl0LiBJbiB0aGF0IGNhc2Ugd2Ugd2FudCB0byByZXR1cm4gdGhlIG9yaWdpbmFsbHkgcGFzc2VkIGZ1bmN0aW9uLlxuICAgICAgICByZXR1cm4gZm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2UgZG9uJ3Qgd2FubmEgd3JhcCBpdCB0d2ljZVxuICAgIGlmIChnZXRPcmlnaW5hbEZ1bmN0aW9uKGZuKSkge1xuICAgICAgcmV0dXJuIGZuO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIEp1c3QgYWNjZXNzaW5nIGN1c3RvbSBwcm9wcyBpbiBzb21lIFNlbGVuaXVtIGVudmlyb25tZW50c1xuICAgIC8vIGNhbiBjYXVzZSBhIFwiUGVybWlzc2lvbiBkZW5pZWRcIiBleGNlcHRpb24gKHNlZSByYXZlbi1qcyM0OTUpLlxuICAgIC8vIEJhaWwgb24gd3JhcHBpbmcgYW5kIHJldHVybiB0aGUgZnVuY3Rpb24gYXMtaXMgKGRlZmVycyB0byB3aW5kb3cub25lcnJvcikuXG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgLy8gV3JhcCB0aGUgZnVuY3Rpb24gaXRzZWxmXG4gIC8vIEl0IGlzIGltcG9ydGFudCB0aGF0IGBzZW50cnlXcmFwcGVkYCBpcyBub3QgYW4gYXJyb3cgZnVuY3Rpb24gdG8gcHJlc2VydmUgdGhlIGNvbnRleHQgb2YgYHRoaXNgXG4gIGNvbnN0IHNlbnRyeVdyYXBwZWQgPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgIHRyeSB7XG4gICAgICAvLyBBbHNvIHdyYXAgYXJndW1lbnRzIHRoYXQgYXJlIHRoZW1zZWx2ZXMgZnVuY3Rpb25zXG4gICAgICBjb25zdCB3cmFwcGVkQXJndW1lbnRzID0gYXJncy5tYXAoYXJnID0+IHdyYXAoYXJnLCBvcHRpb25zKSk7XG5cbiAgICAgIC8vIEF0dGVtcHQgdG8gaW52b2tlIHVzZXItbGFuZCBmdW5jdGlvblxuICAgICAgLy8gTk9URTogSWYgeW91IGFyZSBhIFNlbnRyeSB1c2VyLCBhbmQgeW91IGFyZSBzZWVpbmcgdGhpcyBzdGFjayBmcmFtZSwgaXRcbiAgICAgIC8vICAgICAgIG1lYW5zIHRoZSBzZW50cnkuamF2YXNjcmlwdCBTREsgY2F1Z2h0IGFuIGVycm9yIGludm9raW5nIHlvdXIgYXBwbGljYXRpb24gY29kZS4gVGhpc1xuICAgICAgLy8gICAgICAgaXMgZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIE5PVCBpbmRpY2F0aXZlIG9mIGEgYnVnIHdpdGggc2VudHJ5LmphdmFzY3JpcHQuXG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgd3JhcHBlZEFyZ3VtZW50cyk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGlnbm9yZU5leHRPbkVycm9yKCk7XG4gICAgICB3aXRoU2NvcGUoc2NvcGUgPT4ge1xuICAgICAgICBzY29wZS5hZGRFdmVudFByb2Nlc3NvcihldmVudCA9PiB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMubWVjaGFuaXNtKSB7XG4gICAgICAgICAgICBhZGRFeGNlcHRpb25UeXBlVmFsdWUoZXZlbnQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGFkZEV4Y2VwdGlvbk1lY2hhbmlzbShldmVudCwgb3B0aW9ucy5tZWNoYW5pc20pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBldmVudC5leHRyYSA9IHtcbiAgICAgICAgICAgIC4uLmV2ZW50LmV4dHJhLFxuICAgICAgICAgICAgYXJndW1lbnRzOiBhcmdzXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICAgIH0pO1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKGV4KTtcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgZXg7XG4gICAgfVxuICB9O1xuXG4gIC8vIFdyYXAgdGhlIHdyYXBwZWQgZnVuY3Rpb24gaW4gYSBwcm94eSwgdG8gZW5zdXJlIGFueSBvdGhlciBwcm9wZXJ0aWVzIG9mIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiByZW1haW4gYXZhaWxhYmxlXG4gIHRyeSB7XG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBmbikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChmbiwgcHJvcGVydHkpKSB7XG4gICAgICAgIHNlbnRyeVdyYXBwZWRbcHJvcGVydHldID0gZm5bcHJvcGVydHldO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gQWNjZXNzaW5nIHNvbWUgb2JqZWN0cyBtYXkgdGhyb3dcbiAgICAvLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzExNjhcbiAgfVxuXG4gIC8vIFNpZ25hbCB0aGF0IHRoaXMgZnVuY3Rpb24gaGFzIGJlZW4gd3JhcHBlZC9maWxsZWQgYWxyZWFkeVxuICAvLyBmb3IgYm90aCBkZWJ1Z2dpbmcgYW5kIHRvIHByZXZlbnQgaXQgdG8gYmVpbmcgd3JhcHBlZC9maWxsZWQgdHdpY2VcbiAgbWFya0Z1bmN0aW9uV3JhcHBlZChzZW50cnlXcmFwcGVkLCBmbik7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShmbiwgJ19fc2VudHJ5X3dyYXBwZWRfXycsIHNlbnRyeVdyYXBwZWQpO1xuXG4gIC8vIFJlc3RvcmUgb3JpZ2luYWwgZnVuY3Rpb24gbmFtZSAobm90IGFsbCBicm93c2VycyBhbGxvdyB0aGF0KVxuICB0cnkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgY29uc3QgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc2VudHJ5V3JhcHBlZCwgJ25hbWUnKTtcbiAgICBpZiAoZGVzY3JpcHRvci5jb25maWd1cmFibGUpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZW50cnlXcmFwcGVkLCAnbmFtZScsIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBmbi5uYW1lO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0gY2F0Y2gge1xuICAgIC8vIFRoaXMgbWF5IHRocm93IGlmIGUuZy4gdGhlIGRlc2NyaXB0b3IgZG9lcyBub3QgZXhpc3QsIG9yIGEgYnJvd3NlciBkb2VzIG5vdCBhbGxvdyByZWRlZmluaW5nIGBuYW1lYC5cbiAgICAvLyB0byBzYXZlIHNvbWUgYnl0ZXMgd2Ugc2ltcGx5IHRyeS1jYXRjaCB0aGlzXG4gIH1cbiAgcmV0dXJuIHNlbnRyeVdyYXBwZWQ7XG59XG5cbi8qKlxuICogR2V0IEhUVFAgcmVxdWVzdCBkYXRhIGZyb20gdGhlIGN1cnJlbnQgcGFnZS5cbiAqL1xuZnVuY3Rpb24gZ2V0SHR0cFJlcXVlc3REYXRhKCkge1xuICAvLyBncmFiIGFzIG11Y2ggaW5mbyBhcyBleGlzdHMgYW5kIGFkZCBpdCB0byB0aGUgZXZlbnRcbiAgY29uc3QgdXJsID0gZ2V0TG9jYXRpb25IcmVmKCk7XG4gIGNvbnN0IHtcbiAgICByZWZlcnJlclxuICB9ID0gV0lORE9XLmRvY3VtZW50IHx8IHt9O1xuICBjb25zdCB7XG4gICAgdXNlckFnZW50XG4gIH0gPSBXSU5ET1cubmF2aWdhdG9yIHx8IHt9O1xuICBjb25zdCBoZWFkZXJzID0ge1xuICAgIC4uLihyZWZlcnJlciAmJiB7XG4gICAgICBSZWZlcmVyOiByZWZlcnJlclxuICAgIH0pLFxuICAgIC4uLih1c2VyQWdlbnQgJiYge1xuICAgICAgJ1VzZXItQWdlbnQnOiB1c2VyQWdlbnRcbiAgICB9KVxuICB9O1xuICBjb25zdCByZXF1ZXN0ID0ge1xuICAgIHVybCxcbiAgICBoZWFkZXJzXG4gIH07XG4gIHJldHVybiByZXF1ZXN0O1xufVxuZXhwb3J0IHsgV0lORE9XLCBnZXRIdHRwUmVxdWVzdERhdGEsIGlnbm9yZU5leHRPbkVycm9yLCBzaG91bGRJZ25vcmVPbkVycm9yLCB3cmFwIH07XG4iLCJpbXBvcnQgeyBidWlsZEZlZWRiYWNrSW50ZWdyYXRpb24sIGZlZWRiYWNrU2NyZWVuc2hvdEludGVncmF0aW9uLCBmZWVkYmFja01vZGFsSW50ZWdyYXRpb24gfSBmcm9tICdAc2VudHJ5LWludGVybmFsL2ZlZWRiYWNrJztcblxuLyoqIEFkZCBhIHdpZGdldCB0byBjYXB0dXJlIHVzZXIgZmVlZGJhY2sgdG8geW91ciBhcHBsaWNhdGlvbi4gKi9cbmNvbnN0IGZlZWRiYWNrU3luY0ludGVncmF0aW9uID0gYnVpbGRGZWVkYmFja0ludGVncmF0aW9uKHtcbiAgZ2V0TW9kYWxJbnRlZ3JhdGlvbjogKCkgPT4gZmVlZGJhY2tNb2RhbEludGVncmF0aW9uLFxuICBnZXRTY3JlZW5zaG90SW50ZWdyYXRpb246ICgpID0+IGZlZWRiYWNrU2NyZWVuc2hvdEludGVncmF0aW9uXG59KTtcbmV4cG9ydCB7IGZlZWRiYWNrU3luY0ludGVncmF0aW9uIH07XG4iLCJpbXBvcnQgeyBpc0Vycm9yRXZlbnQsIGlzRE9NRXJyb3IsIGlzRE9NRXhjZXB0aW9uLCBhZGRFeGNlcHRpb25UeXBlVmFsdWUsIGlzRXJyb3IsIGlzUGxhaW5PYmplY3QsIGlzRXZlbnQsIGFkZEV4Y2VwdGlvbk1lY2hhbmlzbSwgaXNQYXJhbWV0ZXJpemVkU3RyaW5nLCBnZXRDbGllbnQsIG5vcm1hbGl6ZVRvU2l6ZSwgZXh0cmFjdEV4Y2VwdGlvbktleXNGb3JNZXNzYWdlLCByZXNvbHZlZFN5bmNQcm9taXNlIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYW4gZXhjZXB0aW9uIGZyb20gYSBKYXZhU2NyaXB0IEVycm9yXG4gKi9cbmZ1bmN0aW9uIGV4Y2VwdGlvbkZyb21FcnJvcihzdGFja1BhcnNlciwgZXgpIHtcbiAgLy8gR2V0IHRoZSBmcmFtZXMgZmlyc3Qgc2luY2UgT3BlcmEgY2FuIGxvc2UgdGhlIHN0YWNrIGlmIHdlIHRvdWNoIGFueXRoaW5nIGVsc2UgZmlyc3RcbiAgY29uc3QgZnJhbWVzID0gcGFyc2VTdGFja0ZyYW1lcyhzdGFja1BhcnNlciwgZXgpO1xuICBjb25zdCBleGNlcHRpb24gPSB7XG4gICAgdHlwZTogZXh0cmFjdFR5cGUoZXgpLFxuICAgIHZhbHVlOiBleHRyYWN0TWVzc2FnZShleClcbiAgfTtcbiAgaWYgKGZyYW1lcy5sZW5ndGgpIHtcbiAgICBleGNlcHRpb24uc3RhY2t0cmFjZSA9IHtcbiAgICAgIGZyYW1lc1xuICAgIH07XG4gIH1cbiAgaWYgKGV4Y2VwdGlvbi50eXBlID09PSB1bmRlZmluZWQgJiYgZXhjZXB0aW9uLnZhbHVlID09PSAnJykge1xuICAgIGV4Y2VwdGlvbi52YWx1ZSA9ICdVbnJlY292ZXJhYmxlIGVycm9yIGNhdWdodCc7XG4gIH1cbiAgcmV0dXJuIGV4Y2VwdGlvbjtcbn1cbmZ1bmN0aW9uIGV2ZW50RnJvbVBsYWluT2JqZWN0KHN0YWNrUGFyc2VyLCBleGNlcHRpb24sIHN5bnRoZXRpY0V4Y2VwdGlvbiwgaXNVbmhhbmRsZWRSZWplY3Rpb24pIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gIGNvbnN0IG5vcm1hbGl6ZURlcHRoID0gY2xpZW50Py5nZXRPcHRpb25zKCkubm9ybWFsaXplRGVwdGg7XG5cbiAgLy8gSWYgd2UgY2FuLCB3ZSBleHRyYWN0IGFuIGV4Y2VwdGlvbiBmcm9tIHRoZSBvYmplY3QgcHJvcGVydGllc1xuICBjb25zdCBlcnJvckZyb21Qcm9wID0gZ2V0RXJyb3JQcm9wZXJ0eUZyb21PYmplY3QoZXhjZXB0aW9uKTtcbiAgY29uc3QgZXh0cmEgPSB7XG4gICAgX19zZXJpYWxpemVkX186IG5vcm1hbGl6ZVRvU2l6ZShleGNlcHRpb24sIG5vcm1hbGl6ZURlcHRoKVxuICB9O1xuICBpZiAoZXJyb3JGcm9tUHJvcCkge1xuICAgIHJldHVybiB7XG4gICAgICBleGNlcHRpb246IHtcbiAgICAgICAgdmFsdWVzOiBbZXhjZXB0aW9uRnJvbUVycm9yKHN0YWNrUGFyc2VyLCBlcnJvckZyb21Qcm9wKV1cbiAgICAgIH0sXG4gICAgICBleHRyYVxuICAgIH07XG4gIH1cbiAgY29uc3QgZXZlbnQgPSB7XG4gICAgZXhjZXB0aW9uOiB7XG4gICAgICB2YWx1ZXM6IFt7XG4gICAgICAgIHR5cGU6IGlzRXZlbnQoZXhjZXB0aW9uKSA/IGV4Y2VwdGlvbi5jb25zdHJ1Y3Rvci5uYW1lIDogaXNVbmhhbmRsZWRSZWplY3Rpb24gPyAnVW5oYW5kbGVkUmVqZWN0aW9uJyA6ICdFcnJvcicsXG4gICAgICAgIHZhbHVlOiBnZXROb25FcnJvck9iamVjdEV4Y2VwdGlvblZhbHVlKGV4Y2VwdGlvbiwge1xuICAgICAgICAgIGlzVW5oYW5kbGVkUmVqZWN0aW9uXG4gICAgICAgIH0pXG4gICAgICB9XVxuICAgIH0sXG4gICAgZXh0cmFcbiAgfTtcbiAgaWYgKHN5bnRoZXRpY0V4Y2VwdGlvbikge1xuICAgIGNvbnN0IGZyYW1lcyA9IHBhcnNlU3RhY2tGcmFtZXMoc3RhY2tQYXJzZXIsIHN5bnRoZXRpY0V4Y2VwdGlvbik7XG4gICAgaWYgKGZyYW1lcy5sZW5ndGgpIHtcbiAgICAgIC8vIGV2ZW50LmV4Y2VwdGlvbi52YWx1ZXNbMF0gaGFzIGJlZW4gc2V0IGFib3ZlXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgZXZlbnQuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlID0ge1xuICAgICAgICBmcmFtZXNcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIHJldHVybiBldmVudDtcbn1cbmZ1bmN0aW9uIGV2ZW50RnJvbUVycm9yKHN0YWNrUGFyc2VyLCBleCkge1xuICByZXR1cm4ge1xuICAgIGV4Y2VwdGlvbjoge1xuICAgICAgdmFsdWVzOiBbZXhjZXB0aW9uRnJvbUVycm9yKHN0YWNrUGFyc2VyLCBleCldXG4gICAgfVxuICB9O1xufVxuXG4vKiogUGFyc2VzIHN0YWNrIGZyYW1lcyBmcm9tIGFuIGVycm9yICovXG5mdW5jdGlvbiBwYXJzZVN0YWNrRnJhbWVzKHN0YWNrUGFyc2VyLCBleCkge1xuICAvLyBBY2Nlc3MgYW5kIHN0b3JlIHRoZSBzdGFja3RyYWNlIHByb3BlcnR5IGJlZm9yZSBkb2luZyBBTllUSElOR1xuICAvLyBlbHNlIHRvIGl0IGJlY2F1c2UgT3BlcmEgaXMgbm90IHZlcnkgZ29vZCBhdCBwcm92aWRpbmcgaXRcbiAgLy8gcmVsaWFibHkgaW4gb3RoZXIgY2lyY3Vtc3RhbmNlcy5cbiAgY29uc3Qgc3RhY2t0cmFjZSA9IGV4LnN0YWNrdHJhY2UgfHwgZXguc3RhY2sgfHwgJyc7XG4gIGNvbnN0IHNraXBMaW5lcyA9IGdldFNraXBGaXJzdFN0YWNrU3RyaW5nTGluZXMoZXgpO1xuICBjb25zdCBmcmFtZXNUb1BvcCA9IGdldFBvcEZpcnN0VG9wRnJhbWVzKGV4KTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gc3RhY2tQYXJzZXIoc3RhY2t0cmFjZSwgc2tpcExpbmVzLCBmcmFtZXNUb1BvcCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBuby1lbXB0eVxuICB9XG4gIHJldHVybiBbXTtcbn1cblxuLy8gQmFzZWQgb24gb3VyIG93biBtYXBwaW5nIHBhdHRlcm4gLSBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS9ibG9iLzlmMDgzMDVlMDk4NjZjOGJkNmQwYzI0ZjViMGFhYmRkN2RkNmM1OWMvc3JjL3NlbnRyeS9sYW5nL2phdmFzY3JpcHQvZXJyb3JtYXBwaW5nLnB5I0w4My1MMTA4XG5jb25zdCByZWFjdE1pbmlmaWVkUmVnZXhwID0gL01pbmlmaWVkIFJlYWN0IGVycm9yICNcXGQrOy9pO1xuXG4vKipcbiAqIENlcnRhaW4ga25vd24gUmVhY3QgZXJyb3JzIGNvbnRhaW4gbGlua3MgdGhhdCB3b3VsZCBiZSBmYWxzZWx5XG4gKiBwYXJzZWQgYXMgZnJhbWVzLiBUaGlzIGZ1bmN0aW9uIGNoZWNrIGZvciB0aGVzZSBlcnJvcnMgYW5kXG4gKiByZXR1cm5zIG51bWJlciBvZiB0aGUgc3RhY2sgc3RyaW5nIGxpbmVzIHRvIHNraXAuXG4gKi9cbmZ1bmN0aW9uIGdldFNraXBGaXJzdFN0YWNrU3RyaW5nTGluZXMoZXgpIHtcbiAgaWYgKGV4ICYmIHJlYWN0TWluaWZpZWRSZWdleHAudGVzdChleC5tZXNzYWdlKSkge1xuICAgIHJldHVybiAxO1xuICB9XG4gIHJldHVybiAwO1xufVxuXG4vKipcbiAqIElmIGVycm9yIGhhcyBgZnJhbWVzVG9Qb3BgIHByb3BlcnR5LCBpdCBtZWFucyB0aGF0IHRoZVxuICogY3JlYXRvciB0ZWxscyB1cyB0aGUgZmlyc3QgeCBmcmFtZXMgd2lsbCBiZSB1c2VsZXNzXG4gKiBhbmQgc2hvdWxkIGJlIGRpc2NhcmRlZC4gVHlwaWNhbGx5IGVycm9yIGZyb20gd3JhcHBlciBmdW5jdGlvblxuICogd2hpY2ggZG9uJ3QgcG9pbnQgdG8gdGhlIGFjdHVhbCBsb2NhdGlvbiBpbiB0aGUgZGV2ZWxvcGVyJ3MgY29kZS5cbiAqXG4gKiBFeGFtcGxlOiBodHRwczovL2dpdGh1Yi5jb20vemVydG9zaC9pbnZhcmlhbnQvYmxvYi9tYXN0ZXIvaW52YXJpYW50LmpzI0w0NlxuICovXG5mdW5jdGlvbiBnZXRQb3BGaXJzdFRvcEZyYW1lcyhleCkge1xuICBpZiAodHlwZW9mIGV4LmZyYW1lc1RvUG9wID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBleC5mcmFtZXNUb1BvcDtcbiAgfVxuICByZXR1cm4gMDtcbn1cblxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWJBc3NlbWJseS9KYXZhU2NyaXB0X2ludGVyZmFjZS9FeGNlcHRpb25cbi8vIEB0cy1leHBlY3QtZXJyb3IgLSBXZWJBc3NlbWJseS5FeGNlcHRpb24gaXMgYSB2YWxpZCBjbGFzc1xuZnVuY3Rpb24gaXNXZWJBc3NlbWJseUV4Y2VwdGlvbihleGNlcHRpb24pIHtcbiAgLy8gQ2hlY2sgZm9yIHN1cHBvcnRcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIFdlYkFzc2VtYmx5LkV4Y2VwdGlvbiBpcyBhIHZhbGlkIGNsYXNzXG4gIGlmICh0eXBlb2YgV2ViQXNzZW1ibHkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBXZWJBc3NlbWJseS5FeGNlcHRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIFdlYkFzc2VtYmx5LkV4Y2VwdGlvbiBpcyBhIHZhbGlkIGNsYXNzXG4gICAgcmV0dXJuIGV4Y2VwdGlvbiBpbnN0YW5jZW9mIFdlYkFzc2VtYmx5LkV4Y2VwdGlvbjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0cyBmcm9tIGVycm9ycyB3aGF0IHdlIHVzZSBhcyB0aGUgZXhjZXB0aW9uIGB0eXBlYCBpbiBlcnJvciBldmVudHMuXG4gKlxuICogVXN1YWxseSwgdGhpcyBpcyB0aGUgYG5hbWVgIHByb3BlcnR5IG9uIEVycm9yIG9iamVjdHMgYnV0IFdBU00gZXJyb3JzIG5lZWQgdG8gYmUgdHJlYXRlZCBkaWZmZXJlbnRseS5cbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFR5cGUoZXgpIHtcbiAgY29uc3QgbmFtZSA9IGV4Py5uYW1lO1xuXG4gIC8vIFRoZSBuYW1lIGZvciBXZWJBc3NlbWJseS5FeGNlcHRpb24gRXJyb3JzIG5lZWRzIHRvIGJlIGV4dHJhY3RlZCBkaWZmZXJlbnRseS5cbiAgLy8gQ29udGV4dDogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvMTM3ODdcbiAgaWYgKCFuYW1lICYmIGlzV2ViQXNzZW1ibHlFeGNlcHRpb24oZXgpKSB7XG4gICAgLy8gRW1zY3JpcHRlbiBzZXRzIGFycmF5W3R5cGUsIG1lc3NhZ2VdIHRvIHRoZSBcIm1lc3NhZ2VcIiBwcm9wZXJ0eSBvbiB0aGUgV2ViQXNzZW1ibHkuRXhjZXB0aW9uIG9iamVjdFxuICAgIGNvbnN0IGhhc1R5cGVJbk1lc3NhZ2UgPSBleC5tZXNzYWdlICYmIEFycmF5LmlzQXJyYXkoZXgubWVzc2FnZSkgJiYgZXgubWVzc2FnZS5sZW5ndGggPT0gMjtcbiAgICByZXR1cm4gaGFzVHlwZUluTWVzc2FnZSA/IGV4Lm1lc3NhZ2VbMF0gOiAnV2ViQXNzZW1ibHkuRXhjZXB0aW9uJztcbiAgfVxuICByZXR1cm4gbmFtZTtcbn1cblxuLyoqXG4gKiBUaGVyZSBhcmUgY2FzZXMgd2hlcmUgc3RhY2t0cmFjZS5tZXNzYWdlIGlzIGFuIEV2ZW50IG9iamVjdFxuICogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvMTk0OVxuICogSW4gdGhpcyBzcGVjaWZpYyBjYXNlIHdlIHRyeSB0byBleHRyYWN0IHN0YWNrdHJhY2UubWVzc2FnZS5lcnJvci5tZXNzYWdlXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RNZXNzYWdlKGV4KSB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBleD8ubWVzc2FnZTtcbiAgaWYgKGlzV2ViQXNzZW1ibHlFeGNlcHRpb24oZXgpKSB7XG4gICAgLy8gRm9yIE5vZGUgMTgsIEVtc2NyaXB0ZW4gc2V0cyBhcnJheVt0eXBlLCBtZXNzYWdlXSB0byB0aGUgXCJtZXNzYWdlXCIgcHJvcGVydHkgb24gdGhlIFdlYkFzc2VtYmx5LkV4Y2VwdGlvbiBvYmplY3RcbiAgICBpZiAoQXJyYXkuaXNBcnJheShleC5tZXNzYWdlKSAmJiBleC5tZXNzYWdlLmxlbmd0aCA9PSAyKSB7XG4gICAgICByZXR1cm4gZXgubWVzc2FnZVsxXTtcbiAgICB9XG4gICAgcmV0dXJuICd3YXNtIGV4Y2VwdGlvbic7XG4gIH1cbiAgaWYgKCFtZXNzYWdlKSB7XG4gICAgcmV0dXJuICdObyBlcnJvciBtZXNzYWdlJztcbiAgfVxuICBpZiAobWVzc2FnZS5lcnJvciAmJiB0eXBlb2YgbWVzc2FnZS5lcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBtZXNzYWdlLmVycm9yLm1lc3NhZ2U7XG4gIH1cbiAgcmV0dXJuIG1lc3NhZ2U7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiB7QGxpbmsgRXZlbnR9IGZyb20gYWxsIGlucHV0cyB0byBgY2FwdHVyZUV4Y2VwdGlvbmAgYW5kIG5vbi1wcmltaXRpdmUgaW5wdXRzIHRvIGBjYXB0dXJlTWVzc2FnZWAuXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGV2ZW50RnJvbUV4Y2VwdGlvbihzdGFja1BhcnNlciwgZXhjZXB0aW9uLCBoaW50LCBhdHRhY2hTdGFja3RyYWNlKSB7XG4gIGNvbnN0IHN5bnRoZXRpY0V4Y2VwdGlvbiA9IGhpbnQ/LnN5bnRoZXRpY0V4Y2VwdGlvbiB8fCB1bmRlZmluZWQ7XG4gIGNvbnN0IGV2ZW50ID0gZXZlbnRGcm9tVW5rbm93bklucHV0KHN0YWNrUGFyc2VyLCBleGNlcHRpb24sIHN5bnRoZXRpY0V4Y2VwdGlvbiwgYXR0YWNoU3RhY2t0cmFjZSk7XG4gIGFkZEV4Y2VwdGlvbk1lY2hhbmlzbShldmVudCk7IC8vIGRlZmF1bHRzIHRvIHsgdHlwZTogJ2dlbmVyaWMnLCBoYW5kbGVkOiB0cnVlIH1cbiAgZXZlbnQubGV2ZWwgPSAnZXJyb3InO1xuICBpZiAoaGludD8uZXZlbnRfaWQpIHtcbiAgICBldmVudC5ldmVudF9pZCA9IGhpbnQuZXZlbnRfaWQ7XG4gIH1cbiAgcmV0dXJuIHJlc29sdmVkU3luY1Byb21pc2UoZXZlbnQpO1xufVxuXG4vKipcbiAqIEJ1aWxkcyBhbmQgRXZlbnQgZnJvbSBhIE1lc3NhZ2VcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gZXZlbnRGcm9tTWVzc2FnZShzdGFja1BhcnNlciwgbWVzc2FnZSwgbGV2ZWwgPSAnaW5mbycsIGhpbnQsIGF0dGFjaFN0YWNrdHJhY2UpIHtcbiAgY29uc3Qgc3ludGhldGljRXhjZXB0aW9uID0gaGludD8uc3ludGhldGljRXhjZXB0aW9uIHx8IHVuZGVmaW5lZDtcbiAgY29uc3QgZXZlbnQgPSBldmVudEZyb21TdHJpbmcoc3RhY2tQYXJzZXIsIG1lc3NhZ2UsIHN5bnRoZXRpY0V4Y2VwdGlvbiwgYXR0YWNoU3RhY2t0cmFjZSk7XG4gIGV2ZW50LmxldmVsID0gbGV2ZWw7XG4gIGlmIChoaW50Py5ldmVudF9pZCkge1xuICAgIGV2ZW50LmV2ZW50X2lkID0gaGludC5ldmVudF9pZDtcbiAgfVxuICByZXR1cm4gcmVzb2x2ZWRTeW5jUHJvbWlzZShldmVudCk7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBldmVudEZyb21Vbmtub3duSW5wdXQoc3RhY2tQYXJzZXIsIGV4Y2VwdGlvbiwgc3ludGhldGljRXhjZXB0aW9uLCBhdHRhY2hTdGFja3RyYWNlLCBpc1VuaGFuZGxlZFJlamVjdGlvbikge1xuICBsZXQgZXZlbnQ7XG4gIGlmIChpc0Vycm9yRXZlbnQoZXhjZXB0aW9uKSAmJiBleGNlcHRpb24uZXJyb3IpIHtcbiAgICAvLyBJZiBpdCBpcyBhbiBFcnJvckV2ZW50IHdpdGggYGVycm9yYCBwcm9wZXJ0eSwgZXh0cmFjdCBpdCB0byBnZXQgYWN0dWFsIEVycm9yXG4gICAgY29uc3QgZXJyb3JFdmVudCA9IGV4Y2VwdGlvbjtcbiAgICByZXR1cm4gZXZlbnRGcm9tRXJyb3Ioc3RhY2tQYXJzZXIsIGVycm9yRXZlbnQuZXJyb3IpO1xuICB9XG5cbiAgLy8gSWYgaXQgaXMgYSBgRE9NRXJyb3JgICh3aGljaCBpcyBhIGxlZ2FjeSBBUEksIGJ1dCBzdGlsbCBzdXBwb3J0ZWQgaW4gc29tZSBicm93c2VycykgdGhlbiB3ZSBqdXN0IGV4dHJhY3QgdGhlIG5hbWVcbiAgLy8gYW5kIG1lc3NhZ2UsIGFzIGl0IGRvZXNuJ3QgcHJvdmlkZSBhbnl0aGluZyBlbHNlLiBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIGFsbCBgRE9NRXhjZXB0aW9uc2Agc2hvdWxkIGFsc28gYmVcbiAgLy8gYEVycm9yYHMsIGJ1dCB0aGF0J3Mgbm90IHRoZSBjYXNlIGluIElFMTEsIHNvIGluIHRoYXQgY2FzZSB3ZSB0cmVhdCBpdCB0aGUgc2FtZSBhcyB3ZSBkbyBhIGBET01FcnJvcmAuXG4gIC8vXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ET01FcnJvclxuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRE9NRXhjZXB0aW9uXG4gIC8vIGh0dHBzOi8vd2ViaWRsLnNwZWMud2hhdHdnLm9yZy8jZXMtRE9NRXhjZXB0aW9uLXNwZWNpYWxuZXNzXG4gIGlmIChpc0RPTUVycm9yKGV4Y2VwdGlvbikgfHwgaXNET01FeGNlcHRpb24oZXhjZXB0aW9uKSkge1xuICAgIGNvbnN0IGRvbUV4Y2VwdGlvbiA9IGV4Y2VwdGlvbjtcbiAgICBpZiAoJ3N0YWNrJyBpbiBleGNlcHRpb24pIHtcbiAgICAgIGV2ZW50ID0gZXZlbnRGcm9tRXJyb3Ioc3RhY2tQYXJzZXIsIGV4Y2VwdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG5hbWUgPSBkb21FeGNlcHRpb24ubmFtZSB8fCAoaXNET01FcnJvcihkb21FeGNlcHRpb24pID8gJ0RPTUVycm9yJyA6ICdET01FeGNlcHRpb24nKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkb21FeGNlcHRpb24ubWVzc2FnZSA/IGAke25hbWV9OiAke2RvbUV4Y2VwdGlvbi5tZXNzYWdlfWAgOiBuYW1lO1xuICAgICAgZXZlbnQgPSBldmVudEZyb21TdHJpbmcoc3RhY2tQYXJzZXIsIG1lc3NhZ2UsIHN5bnRoZXRpY0V4Y2VwdGlvbiwgYXR0YWNoU3RhY2t0cmFjZSk7XG4gICAgICBhZGRFeGNlcHRpb25UeXBlVmFsdWUoZXZlbnQsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBpZiAoJ2NvZGUnIGluIGRvbUV4Y2VwdGlvbikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gICAgICBldmVudC50YWdzID0ge1xuICAgICAgICAuLi5ldmVudC50YWdzLFxuICAgICAgICAnRE9NRXhjZXB0aW9uLmNvZGUnOiBgJHtkb21FeGNlcHRpb24uY29kZX1gXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cbiAgaWYgKGlzRXJyb3IoZXhjZXB0aW9uKSkge1xuICAgIC8vIHdlIGhhdmUgYSByZWFsIEVycm9yIG9iamVjdCwgZG8gbm90aGluZ1xuICAgIHJldHVybiBldmVudEZyb21FcnJvcihzdGFja1BhcnNlciwgZXhjZXB0aW9uKTtcbiAgfVxuICBpZiAoaXNQbGFpbk9iamVjdChleGNlcHRpb24pIHx8IGlzRXZlbnQoZXhjZXB0aW9uKSkge1xuICAgIC8vIElmIGl0J3MgYSBwbGFpbiBvYmplY3Qgb3IgYW4gaW5zdGFuY2Ugb2YgYEV2ZW50YCAodGhlIGJ1aWx0LWluIEpTIGtpbmQsIG5vdCB0aGlzIFNESydzIGBFdmVudGAgdHlwZSksIHNlcmlhbGl6ZVxuICAgIC8vIGl0IG1hbnVhbGx5LiBUaGlzIHdpbGwgYWxsb3cgdXMgdG8gZ3JvdXAgZXZlbnRzIGJhc2VkIG9uIHRvcC1sZXZlbCBrZXlzIHdoaWNoIGlzIG11Y2ggYmV0dGVyIHRoYW4gY3JlYXRpbmcgYSBuZXdcbiAgICAvLyBncm91cCBvbiBhbnkga2V5L3ZhbHVlIGNoYW5nZS5cbiAgICBjb25zdCBvYmplY3RFeGNlcHRpb24gPSBleGNlcHRpb247XG4gICAgZXZlbnQgPSBldmVudEZyb21QbGFpbk9iamVjdChzdGFja1BhcnNlciwgb2JqZWN0RXhjZXB0aW9uLCBzeW50aGV0aWNFeGNlcHRpb24sIGlzVW5oYW5kbGVkUmVqZWN0aW9uKTtcbiAgICBhZGRFeGNlcHRpb25NZWNoYW5pc20oZXZlbnQsIHtcbiAgICAgIHN5bnRoZXRpYzogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuXG4gIC8vIElmIG5vbmUgb2YgcHJldmlvdXMgY2hlY2tzIHdlcmUgdmFsaWQsIHRoZW4gaXQgbWVhbnMgdGhhdCBpdCdzIG5vdDpcbiAgLy8gLSBhbiBpbnN0YW5jZSBvZiBET01FcnJvclxuICAvLyAtIGFuIGluc3RhbmNlIG9mIERPTUV4Y2VwdGlvblxuICAvLyAtIGFuIGluc3RhbmNlIG9mIEV2ZW50XG4gIC8vIC0gYW4gaW5zdGFuY2Ugb2YgRXJyb3JcbiAgLy8gLSBhIHZhbGlkIEVycm9yRXZlbnQgKG9uZSB3aXRoIGFuIGVycm9yIHByb3BlcnR5KVxuICAvLyAtIGEgcGxhaW4gT2JqZWN0XG4gIC8vXG4gIC8vIFNvIGJhaWwgb3V0IGFuZCBjYXB0dXJlIGl0IGFzIGEgc2ltcGxlIG1lc3NhZ2U6XG4gIGV2ZW50ID0gZXZlbnRGcm9tU3RyaW5nKHN0YWNrUGFyc2VyLCBleGNlcHRpb24sIHN5bnRoZXRpY0V4Y2VwdGlvbiwgYXR0YWNoU3RhY2t0cmFjZSk7XG4gIGFkZEV4Y2VwdGlvblR5cGVWYWx1ZShldmVudCwgYCR7ZXhjZXB0aW9ufWAsIHVuZGVmaW5lZCk7XG4gIGFkZEV4Y2VwdGlvbk1lY2hhbmlzbShldmVudCwge1xuICAgIHN5bnRoZXRpYzogdHJ1ZVxuICB9KTtcbiAgcmV0dXJuIGV2ZW50O1xufVxuZnVuY3Rpb24gZXZlbnRGcm9tU3RyaW5nKHN0YWNrUGFyc2VyLCBtZXNzYWdlLCBzeW50aGV0aWNFeGNlcHRpb24sIGF0dGFjaFN0YWNrdHJhY2UpIHtcbiAgY29uc3QgZXZlbnQgPSB7fTtcbiAgaWYgKGF0dGFjaFN0YWNrdHJhY2UgJiYgc3ludGhldGljRXhjZXB0aW9uKSB7XG4gICAgY29uc3QgZnJhbWVzID0gcGFyc2VTdGFja0ZyYW1lcyhzdGFja1BhcnNlciwgc3ludGhldGljRXhjZXB0aW9uKTtcbiAgICBpZiAoZnJhbWVzLmxlbmd0aCkge1xuICAgICAgZXZlbnQuZXhjZXB0aW9uID0ge1xuICAgICAgICB2YWx1ZXM6IFt7XG4gICAgICAgICAgdmFsdWU6IG1lc3NhZ2UsXG4gICAgICAgICAgc3RhY2t0cmFjZToge1xuICAgICAgICAgICAgZnJhbWVzXG4gICAgICAgICAgfVxuICAgICAgICB9XVxuICAgICAgfTtcbiAgICB9XG4gICAgYWRkRXhjZXB0aW9uTWVjaGFuaXNtKGV2ZW50LCB7XG4gICAgICBzeW50aGV0aWM6IHRydWVcbiAgICB9KTtcbiAgfVxuICBpZiAoaXNQYXJhbWV0ZXJpemVkU3RyaW5nKG1lc3NhZ2UpKSB7XG4gICAgY29uc3Qge1xuICAgICAgX19zZW50cnlfdGVtcGxhdGVfc3RyaW5nX18sXG4gICAgICBfX3NlbnRyeV90ZW1wbGF0ZV92YWx1ZXNfX1xuICAgIH0gPSBtZXNzYWdlO1xuICAgIGV2ZW50LmxvZ2VudHJ5ID0ge1xuICAgICAgbWVzc2FnZTogX19zZW50cnlfdGVtcGxhdGVfc3RyaW5nX18sXG4gICAgICBwYXJhbXM6IF9fc2VudHJ5X3RlbXBsYXRlX3ZhbHVlc19fXG4gICAgfTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cbiAgZXZlbnQubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIHJldHVybiBldmVudDtcbn1cbmZ1bmN0aW9uIGdldE5vbkVycm9yT2JqZWN0RXhjZXB0aW9uVmFsdWUoZXhjZXB0aW9uLCB7XG4gIGlzVW5oYW5kbGVkUmVqZWN0aW9uXG59KSB7XG4gIGNvbnN0IGtleXMgPSBleHRyYWN0RXhjZXB0aW9uS2V5c0Zvck1lc3NhZ2UoZXhjZXB0aW9uKTtcbiAgY29uc3QgY2FwdHVyZVR5cGUgPSBpc1VuaGFuZGxlZFJlamVjdGlvbiA/ICdwcm9taXNlIHJlamVjdGlvbicgOiAnZXhjZXB0aW9uJztcblxuICAvLyBTb21lIEVycm9yRXZlbnQgaW5zdGFuY2VzIGRvIG5vdCBoYXZlIGFuIGBlcnJvcmAgcHJvcGVydHksIHdoaWNoIGlzIHdoeSB0aGV5IGFyZSBub3QgaGFuZGxlZCBiZWZvcmVcbiAgLy8gV2Ugc3RpbGwgd2FudCB0byB0cnkgdG8gZ2V0IGEgZGVjZW50IG1lc3NhZ2UgZm9yIHRoZXNlIGNhc2VzXG4gIGlmIChpc0Vycm9yRXZlbnQoZXhjZXB0aW9uKSkge1xuICAgIHJldHVybiBgRXZlbnQgXFxgRXJyb3JFdmVudFxcYCBjYXB0dXJlZCBhcyAke2NhcHR1cmVUeXBlfSB3aXRoIG1lc3NhZ2UgXFxgJHtleGNlcHRpb24ubWVzc2FnZX1cXGBgO1xuICB9XG4gIGlmIChpc0V2ZW50KGV4Y2VwdGlvbikpIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSBnZXRPYmplY3RDbGFzc05hbWUoZXhjZXB0aW9uKTtcbiAgICByZXR1cm4gYEV2ZW50IFxcYCR7Y2xhc3NOYW1lfVxcYCAodHlwZT0ke2V4Y2VwdGlvbi50eXBlfSkgY2FwdHVyZWQgYXMgJHtjYXB0dXJlVHlwZX1gO1xuICB9XG4gIHJldHVybiBgT2JqZWN0IGNhcHR1cmVkIGFzICR7Y2FwdHVyZVR5cGV9IHdpdGgga2V5czogJHtrZXlzfWA7XG59XG5mdW5jdGlvbiBnZXRPYmplY3RDbGFzc05hbWUob2JqKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7XG4gICAgcmV0dXJuIHByb3RvdHlwZSA/IHByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lIDogdW5kZWZpbmVkO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gaWdub3JlIGVycm9ycyBoZXJlXG4gIH1cbn1cblxuLyoqIElmIGEgcGxhaW4gb2JqZWN0IGhhcyBhIHByb3BlcnR5IHRoYXQgaXMgYW4gYEVycm9yYCwgcmV0dXJuIHRoaXMgZXJyb3IuICovXG5mdW5jdGlvbiBnZXRFcnJvclByb3BlcnR5RnJvbU9iamVjdChvYmopIHtcbiAgZm9yIChjb25zdCBwcm9wIGluIG9iaikge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBvYmpbcHJvcF07XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5leHBvcnQgeyBldmVudEZyb21FeGNlcHRpb24sIGV2ZW50RnJvbU1lc3NhZ2UsIGV2ZW50RnJvbVVua25vd25JbnB1dCwgZXhjZXB0aW9uRnJvbUVycm9yLCBleHRyYWN0TWVzc2FnZSwgZXh0cmFjdFR5cGUgfTtcbiIsImltcG9ydCB7IENsaWVudCwgZ2V0U0RLU291cmNlLCBhcHBseVNka01ldGFkYXRhLCBfSU5URVJOQUxfZmx1c2hMb2dzQnVmZmVyLCBhZGRBdXRvSXBBZGRyZXNzVG9Vc2VyLCBhZGRBdXRvSXBBZGRyZXNzVG9TZXNzaW9uIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IGV2ZW50RnJvbUV4Y2VwdGlvbiwgZXZlbnRGcm9tTWVzc2FnZSB9IGZyb20gJy4vZXZlbnRidWlsZGVyLmpzJztcbmltcG9ydCB7IFdJTkRPVyB9IGZyb20gJy4vaGVscGVycy5qcyc7XG5cbi8qKlxuICogQSBtYWdpYyBzdHJpbmcgdGhhdCBidWlsZCB0b29saW5nIGNhbiBsZXZlcmFnZSBpbiBvcmRlciB0byBpbmplY3QgYSByZWxlYXNlIHZhbHVlIGludG8gdGhlIFNESy5cbiAqL1xuXG5jb25zdCBERUZBVUxUX0ZMVVNIX0lOVEVSVkFMID0gNTAwMDtcblxuLyoqXG4gKiBUaGUgU2VudHJ5IEJyb3dzZXIgU0RLIENsaWVudC5cbiAqXG4gKiBAc2VlIEJyb3dzZXJPcHRpb25zIGZvciBkb2N1bWVudGF0aW9uIG9uIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAqIEBzZWUgU2VudHJ5Q2xpZW50IGZvciB1c2FnZSBkb2N1bWVudGF0aW9uLlxuICovXG5jbGFzcyBCcm93c2VyQ2xpZW50IGV4dGVuZHMgQ2xpZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQnJvd3NlciBTREsgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhpcyBTREsuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0cyA9IGFwcGx5RGVmYXVsdE9wdGlvbnMob3B0aW9ucyk7XG4gICAgY29uc3Qgc2RrU291cmNlID0gV0lORE9XLlNFTlRSWV9TREtfU09VUkNFIHx8IGdldFNES1NvdXJjZSgpO1xuICAgIGFwcGx5U2RrTWV0YWRhdGEob3B0cywgJ2Jyb3dzZXInLCBbJ2Jyb3dzZXInXSwgc2RrU291cmNlKTtcbiAgICBzdXBlcihvcHRzKTtcbiAgICBjb25zdCB7XG4gICAgICBzZW5kRGVmYXVsdFBpaSxcbiAgICAgIHNlbmRDbGllbnRSZXBvcnRzLFxuICAgICAgX2V4cGVyaW1lbnRzXG4gICAgfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgY29uc3QgZW5hYmxlTG9ncyA9IF9leHBlcmltZW50cz8uZW5hYmxlTG9ncztcbiAgICBpZiAoV0lORE9XLmRvY3VtZW50ICYmIChzZW5kQ2xpZW50UmVwb3J0cyB8fCBlbmFibGVMb2dzKSkge1xuICAgICAgV0lORE9XLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgIGlmIChXSU5ET1cuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykge1xuICAgICAgICAgIGlmIChzZW5kQ2xpZW50UmVwb3J0cykge1xuICAgICAgICAgICAgdGhpcy5fZmx1c2hPdXRjb21lcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZW5hYmxlTG9ncykge1xuICAgICAgICAgICAgX0lOVEVSTkFMX2ZsdXNoTG9nc0J1ZmZlcih0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZW5hYmxlTG9ncykge1xuICAgICAgdGhpcy5vbignZmx1c2gnLCAoKSA9PiB7XG4gICAgICAgIF9JTlRFUk5BTF9mbHVzaExvZ3NCdWZmZXIodGhpcyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2FmdGVyQ2FwdHVyZUxvZycsICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2xvZ0ZsdXNoSWRsZVRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fbG9nRmx1c2hJZGxlVGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9nRmx1c2hJZGxlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIF9JTlRFUk5BTF9mbHVzaExvZ3NCdWZmZXIodGhpcyk7XG4gICAgICAgIH0sIERFRkFVTFRfRkxVU0hfSU5URVJWQUwpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzZW5kRGVmYXVsdFBpaSkge1xuICAgICAgdGhpcy5vbigncG9zdHByb2Nlc3NFdmVudCcsIGFkZEF1dG9JcEFkZHJlc3NUb1VzZXIpO1xuICAgICAgdGhpcy5vbignYmVmb3JlU2VuZFNlc3Npb24nLCBhZGRBdXRvSXBBZGRyZXNzVG9TZXNzaW9uKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGV2ZW50RnJvbUV4Y2VwdGlvbihleGNlcHRpb24sIGhpbnQpIHtcbiAgICByZXR1cm4gZXZlbnRGcm9tRXhjZXB0aW9uKHRoaXMuX29wdGlvbnMuc3RhY2tQYXJzZXIsIGV4Y2VwdGlvbiwgaGludCwgdGhpcy5fb3B0aW9ucy5hdHRhY2hTdGFja3RyYWNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgZXZlbnRGcm9tTWVzc2FnZShtZXNzYWdlLCBsZXZlbCA9ICdpbmZvJywgaGludCkge1xuICAgIHJldHVybiBldmVudEZyb21NZXNzYWdlKHRoaXMuX29wdGlvbnMuc3RhY2tQYXJzZXIsIG1lc3NhZ2UsIGxldmVsLCBoaW50LCB0aGlzLl9vcHRpb25zLmF0dGFjaFN0YWNrdHJhY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBfcHJlcGFyZUV2ZW50KGV2ZW50LCBoaW50LCBjdXJyZW50U2NvcGUsIGlzb2xhdGlvblNjb3BlKSB7XG4gICAgZXZlbnQucGxhdGZvcm0gPSBldmVudC5wbGF0Zm9ybSB8fCAnamF2YXNjcmlwdCc7XG4gICAgcmV0dXJuIHN1cGVyLl9wcmVwYXJlRXZlbnQoZXZlbnQsIGhpbnQsIGN1cnJlbnRTY29wZSwgaXNvbGF0aW9uU2NvcGUpO1xuICB9XG59XG5cbi8qKiBFeHBvcnRlZCBvbmx5IGZvciB0ZXN0cy4gKi9cbmZ1bmN0aW9uIGFwcGx5RGVmYXVsdE9wdGlvbnMob3B0aW9uc0FyZykge1xuICByZXR1cm4ge1xuICAgIHJlbGVhc2U6IHR5cGVvZiBfX1NFTlRSWV9SRUxFQVNFX18gPT09ICdzdHJpbmcnIC8vIFRoaXMgYWxsb3dzIGJ1aWxkIHRvb2xpbmcgdG8gZmluZC1hbmQtcmVwbGFjZSBfX1NFTlRSWV9SRUxFQVNFX18gdG8gaW5qZWN0IGEgcmVsZWFzZSB2YWx1ZVxuICAgID8gX19TRU5UUllfUkVMRUFTRV9fIDogV0lORE9XLlNFTlRSWV9SRUxFQVNFPy5pZCxcbiAgICAvLyBUaGlzIHN1cHBvcnRzIHRoZSB2YXJpYWJsZSB0aGF0IHNlbnRyeS13ZWJwYWNrLXBsdWdpbiBpbmplY3RzXG4gICAgc2VuZENsaWVudFJlcG9ydHM6IHRydWUsXG4gICAgLy8gV2UgZGVmYXVsdCB0aGlzIHRvIHRydWUsIGFzIGl0IGlzIHRoZSBzYWZlciBzY2VuYXJpb1xuICAgIHBhcmVudFNwYW5Jc0Fsd2F5c1Jvb3RTcGFuOiB0cnVlLFxuICAgIC4uLm9wdGlvbnNBcmdcbiAgfTtcbn1cbmV4cG9ydCB7IEJyb3dzZXJDbGllbnQsIGFwcGx5RGVmYXVsdE9wdGlvbnMgfTtcbiIsIi8qKlxuICogVGhpcyBzZXJ2ZXMgYXMgYSBidWlsZCB0aW1lIGZsYWcgdGhhdCB3aWxsIGJlIHRydWUgYnkgZGVmYXVsdCwgYnV0IGZhbHNlIGluIG5vbi1kZWJ1ZyBidWlsZHMgb3IgaWYgdXNlcnMgcmVwbGFjZSBgX19TRU5UUllfREVCVUdfX2AgaW4gdGhlaXIgZ2VuZXJhdGVkIGNvZGUuXG4gKlxuICogQVRURU5USU9OOiBUaGlzIGNvbnN0YW50IG11c3QgbmV2ZXIgY3Jvc3MgcGFja2FnZSBib3VuZGFyaWVzIChpLmUuIGJlIGV4cG9ydGVkKSB0byBndWFyYW50ZWUgdGhhdCBpdCBjYW4gYmUgdXNlZCBmb3IgdHJlZSBzaGFraW5nLlxuICovXG5jb25zdCBERUJVR19CVUlMRCA9IHR5cGVvZiBfX1NFTlRSWV9ERUJVR19fID09PSAndW5kZWZpbmVkJyB8fCBfX1NFTlRSWV9ERUJVR19fO1xuZXhwb3J0IHsgREVCVUdfQlVJTEQgfTtcbiIsImltcG9ydCB7IEdMT0JBTF9PQkogfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuY29uc3QgV0lORE9XID0gR0xPQkFMX09CSjtcbmV4cG9ydCB7IFdJTkRPVyB9O1xuIiwiY29uc3QgZ2V0UmF0aW5nID0gKHZhbHVlLCB0aHJlc2hvbGRzKSA9PiB7XG4gIGlmICh2YWx1ZSA+IHRocmVzaG9sZHNbMV0pIHtcbiAgICByZXR1cm4gJ3Bvb3InO1xuICB9XG4gIGlmICh2YWx1ZSA+IHRocmVzaG9sZHNbMF0pIHtcbiAgICByZXR1cm4gJ25lZWRzLWltcHJvdmVtZW50JztcbiAgfVxuICByZXR1cm4gJ2dvb2QnO1xufTtcbmNvbnN0IGJpbmRSZXBvcnRlciA9IChjYWxsYmFjaywgbWV0cmljLCB0aHJlc2hvbGRzLCByZXBvcnRBbGxDaGFuZ2VzKSA9PiB7XG4gIGxldCBwcmV2VmFsdWU7XG4gIGxldCBkZWx0YTtcbiAgcmV0dXJuIGZvcmNlUmVwb3J0ID0+IHtcbiAgICBpZiAobWV0cmljLnZhbHVlID49IDApIHtcbiAgICAgIGlmIChmb3JjZVJlcG9ydCB8fCByZXBvcnRBbGxDaGFuZ2VzKSB7XG4gICAgICAgIGRlbHRhID0gbWV0cmljLnZhbHVlIC0gKHByZXZWYWx1ZSA/PyAwKTtcblxuICAgICAgICAvLyBSZXBvcnQgdGhlIG1ldHJpYyBpZiB0aGVyZSdzIGEgbm9uLXplcm8gZGVsdGEgb3IgaWYgbm8gcHJldmlvdXNcbiAgICAgICAgLy8gdmFsdWUgZXhpc3RzICh3aGljaCBjYW4gaGFwcGVuIGluIHRoZSBjYXNlIG9mIHRoZSBkb2N1bWVudCBiZWNvbWluZ1xuICAgICAgICAvLyBoaWRkZW4gd2hlbiB0aGUgbWV0cmljIHZhbHVlIGlzIDApLlxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWUvd2ViLXZpdGFscy9pc3N1ZXMvMTRcbiAgICAgICAgaWYgKGRlbHRhIHx8IHByZXZWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcHJldlZhbHVlID0gbWV0cmljLnZhbHVlO1xuICAgICAgICAgIG1ldHJpYy5kZWx0YSA9IGRlbHRhO1xuICAgICAgICAgIG1ldHJpYy5yYXRpbmcgPSBnZXRSYXRpbmcobWV0cmljLnZhbHVlLCB0aHJlc2hvbGRzKTtcbiAgICAgICAgICBjYWxsYmFjayhtZXRyaWMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcbmV4cG9ydCB7IGJpbmRSZXBvcnRlciB9O1xuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUGVyZm9ybWFudGx5IGdlbmVyYXRlIGEgdW5pcXVlLCAzMC1jaGFyIHN0cmluZyBieSBjb21iaW5pbmcgYSB2ZXJzaW9uXG4gKiBudW1iZXIsIHRoZSBjdXJyZW50IHRpbWVzdGFtcCB3aXRoIGEgMTMtZGlnaXQgbnVtYmVyIGludGVnZXIuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmNvbnN0IGdlbmVyYXRlVW5pcXVlSUQgPSAoKSA9PiB7XG4gIHJldHVybiBgdjUtJHtEYXRlLm5vdygpfS0ke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg5ZTEyIC0gMSkpICsgMWUxMn1gO1xufTtcbmV4cG9ydCB7IGdlbmVyYXRlVW5pcXVlSUQgfTtcbiIsImltcG9ydCB7IFdJTkRPVyB9IGZyb20gJy4uLy4uLy4uL3R5cGVzLmpzJztcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIHNlbnRyeS1zcGVjaWZpYyBjaGFuZ2U6XG4vLyBhZGQgb3B0aW9uYWwgcGFyYW0gdG8gbm90IGNoZWNrIGZvciByZXNwb25zZVN0YXJ0IChzZWUgY29tbWVudCBiZWxvdylcbmNvbnN0IGdldE5hdmlnYXRpb25FbnRyeSA9IChjaGVja1Jlc3BvbnNlU3RhcnQgPSB0cnVlKSA9PiB7XG4gIGNvbnN0IG5hdmlnYXRpb25FbnRyeSA9IFdJTkRPVy5wZXJmb3JtYW5jZT8uZ2V0RW50cmllc0J5VHlwZT8uKCduYXZpZ2F0aW9uJylbMF07XG4gIC8vIENoZWNrIHRvIGVuc3VyZSB0aGUgYHJlc3BvbnNlU3RhcnRgIHByb3BlcnR5IGlzIHByZXNlbnQgYW5kIHZhbGlkLlxuICAvLyBJbiBzb21lIGNhc2VzIGEgemVybyB2YWx1ZSBpcyByZXBvcnRlZCBieSB0aGUgYnJvd3NlciAoZm9yXG4gIC8vIHByaXZhY3kvc2VjdXJpdHkgcmVhc29ucyksIGFuZCBpbiBvdGhlciBjYXNlcyAoYnVncykgdGhlIHZhbHVlIGlzXG4gIC8vIG5lZ2F0aXZlIG9yIGlzIGxhcmdlciB0aGFuIHRoZSBjdXJyZW50IHBhZ2UgdGltZS4gSWdub3JlIHRoZXNlIGNhc2VzOlxuICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWUvd2ViLXZpdGFscy9pc3N1ZXMvMTM3XG4gIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS93ZWItdml0YWxzL2lzc3Vlcy8xNjJcbiAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dlYi12aXRhbHMvaXNzdWVzLzI3NVxuICBpZiAoXG4gIC8vIHNlbnRyeS1zcGVjaWZpYyBjaGFuZ2U6XG4gIC8vIFdlIGRvbid0IHdhbnQgdG8gY2hlY2sgZm9yIHJlc3BvbnNlU3RhcnQgZm9yIG91ciBvd24gdXNlIG9mIGBnZXROYXZpZ2F0aW9uRW50cnlgXG4gICFjaGVja1Jlc3BvbnNlU3RhcnQgfHwgbmF2aWdhdGlvbkVudHJ5ICYmIG5hdmlnYXRpb25FbnRyeS5yZXNwb25zZVN0YXJ0ID4gMCAmJiBuYXZpZ2F0aW9uRW50cnkucmVzcG9uc2VTdGFydCA8IHBlcmZvcm1hbmNlLm5vdygpKSB7XG4gICAgcmV0dXJuIG5hdmlnYXRpb25FbnRyeTtcbiAgfVxufTtcbmV4cG9ydCB7IGdldE5hdmlnYXRpb25FbnRyeSB9O1xuIiwiaW1wb3J0IHsgZ2V0TmF2aWdhdGlvbkVudHJ5IH0gZnJvbSAnLi9nZXROYXZpZ2F0aW9uRW50cnkuanMnO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3QgZ2V0QWN0aXZhdGlvblN0YXJ0ID0gKCkgPT4ge1xuICBjb25zdCBuYXZFbnRyeSA9IGdldE5hdmlnYXRpb25FbnRyeSgpO1xuICByZXR1cm4gbmF2RW50cnk/LmFjdGl2YXRpb25TdGFydCA/PyAwO1xufTtcbmV4cG9ydCB7IGdldEFjdGl2YXRpb25TdGFydCB9O1xuIiwiaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMuanMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVVbmlxdWVJRCB9IGZyb20gJy4vZ2VuZXJhdGVVbmlxdWVJRC5qcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmF0aW9uU3RhcnQgfSBmcm9tICcuL2dldEFjdGl2YXRpb25TdGFydC5qcyc7XG5pbXBvcnQgeyBnZXROYXZpZ2F0aW9uRW50cnkgfSBmcm9tICcuL2dldE5hdmlnYXRpb25FbnRyeS5qcyc7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBpbml0TWV0cmljID0gKG5hbWUsIHZhbHVlID0gLTEpID0+IHtcbiAgY29uc3QgbmF2RW50cnkgPSBnZXROYXZpZ2F0aW9uRW50cnkoKTtcbiAgbGV0IG5hdmlnYXRpb25UeXBlID0gJ25hdmlnYXRlJztcbiAgaWYgKG5hdkVudHJ5KSB7XG4gICAgaWYgKFdJTkRPVy5kb2N1bWVudD8ucHJlcmVuZGVyaW5nIHx8IGdldEFjdGl2YXRpb25TdGFydCgpID4gMCkge1xuICAgICAgbmF2aWdhdGlvblR5cGUgPSAncHJlcmVuZGVyJztcbiAgICB9IGVsc2UgaWYgKFdJTkRPVy5kb2N1bWVudD8ud2FzRGlzY2FyZGVkKSB7XG4gICAgICBuYXZpZ2F0aW9uVHlwZSA9ICdyZXN0b3JlJztcbiAgICB9IGVsc2UgaWYgKG5hdkVudHJ5LnR5cGUpIHtcbiAgICAgIG5hdmlnYXRpb25UeXBlID0gbmF2RW50cnkudHlwZS5yZXBsYWNlKC9fL2csICctJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gVXNlIGBlbnRyaWVzYCB0eXBlIHNwZWNpZmljIGZvciB0aGUgbWV0cmljLlxuICBjb25zdCBlbnRyaWVzID0gW107XG4gIHJldHVybiB7XG4gICAgbmFtZSxcbiAgICB2YWx1ZSxcbiAgICByYXRpbmc6ICdnb29kJyxcbiAgICAvLyBJZiBuZWVkZWQsIHdpbGwgYmUgdXBkYXRlZCB3aGVuIHJlcG9ydGVkLiBgY29uc3RgIHRvIGtlZXAgdGhlIHR5cGUgZnJvbSB3aWRlbmluZyB0byBgc3RyaW5nYC5cbiAgICBkZWx0YTogMCxcbiAgICBlbnRyaWVzLFxuICAgIGlkOiBnZW5lcmF0ZVVuaXF1ZUlEKCksXG4gICAgbmF2aWdhdGlvblR5cGVcbiAgfTtcbn07XG5leHBvcnQgeyBpbml0TWV0cmljIH07XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3QgaW5zdGFuY2VNYXAgPSBuZXcgV2Vha01hcCgpO1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGFuZCBpZGVudGl0eSBvYmplY3QgYW5kIGEgY2xhc3Mgb2JqZWN0IGFuZCByZXR1cm5zXG4gKiBlaXRoZXIgYSBuZXcgaW5zdGFuY2Ugb2YgdGhhdCBjbGFzcyBvciBhbiBleGlzdGluZyBpbnN0YW5jZSwgaWYgdGhlXG4gKiBpZGVudGl0eSBvYmplY3Qgd2FzIHByZXZpb3VzbHkgdXNlZC5cbiAqL1xuZnVuY3Rpb24gaW5pdFVuaXF1ZShpZGVudGl0eU9iaiwgQ2xhc3NPYmopIHtcbiAgaWYgKCFpbnN0YW5jZU1hcC5nZXQoaWRlbnRpdHlPYmopKSB7XG4gICAgaW5zdGFuY2VNYXAuc2V0KGlkZW50aXR5T2JqLCBuZXcgQ2xhc3NPYmooKSk7XG4gIH1cbiAgcmV0dXJuIGluc3RhbmNlTWFwLmdldChpZGVudGl0eU9iaik7XG59XG5leHBvcnQgeyBpbml0VW5pcXVlIH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBqc2RvYy9yZXF1aXJlLWpzZG9jICovXG4vKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY2xhc3MgTGF5b3V0U2hpZnRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgTGF5b3V0U2hpZnRNYW5hZ2VyLnByb3RvdHlwZS5fX2luaXQuY2FsbCh0aGlzKTtcbiAgICBMYXlvdXRTaGlmdE1hbmFnZXIucHJvdG90eXBlLl9faW5pdDIuY2FsbCh0aGlzKTtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBzZW50cnktaW50ZXJuYWwvc2RrL25vLWNsYXNzLWZpZWxkLWluaXRpYWxpemVycywgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG4gIF9faW5pdCgpIHtcbiAgICB0aGlzLl9zZXNzaW9uVmFsdWUgPSAwO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAc2VudHJ5LWludGVybmFsL3Nkay9uby1jbGFzcy1maWVsZC1pbml0aWFsaXplcnMsIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBfX2luaXQyKCkge1xuICAgIHRoaXMuX3Nlc3Npb25FbnRyaWVzID0gW107XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG4gIF9wcm9jZXNzRW50cnkoZW50cnkpIHtcbiAgICAvLyBPbmx5IGNvdW50IGxheW91dCBzaGlmdHMgd2l0aG91dCByZWNlbnQgdXNlciBpbnB1dC5cbiAgICBpZiAoZW50cnkuaGFkUmVjZW50SW5wdXQpIHJldHVybjtcbiAgICBjb25zdCBmaXJzdFNlc3Npb25FbnRyeSA9IHRoaXMuX3Nlc3Npb25FbnRyaWVzWzBdO1xuICAgIC8vIFRoaXMgcHJldmlvdXNseSB1c2VkIGB0aGlzLl9zZXNzaW9uRW50cmllcy5hdCgtMSlgIGJ1dCB0aGF0IGlzIEVTMjAyMi4gV2Ugc3VwcG9ydCBFUzIwMjEgYW5kIGVhcmxpZXIuXG4gICAgY29uc3QgbGFzdFNlc3Npb25FbnRyeSA9IHRoaXMuX3Nlc3Npb25FbnRyaWVzW3RoaXMuX3Nlc3Npb25FbnRyaWVzLmxlbmd0aCAtIDFdO1xuXG4gICAgLy8gSWYgdGhlIGVudHJ5IG9jY3VycmVkIGxlc3MgdGhhbiAxIHNlY29uZCBhZnRlciB0aGUgcHJldmlvdXMgZW50cnlcbiAgICAvLyBhbmQgbGVzcyB0aGFuIDUgc2Vjb25kcyBhZnRlciB0aGUgZmlyc3QgZW50cnkgaW4gdGhlIHNlc3Npb24sXG4gICAgLy8gaW5jbHVkZSB0aGUgZW50cnkgaW4gdGhlIGN1cnJlbnQgc2Vzc2lvbi4gT3RoZXJ3aXNlLCBzdGFydCBhIG5ld1xuICAgIC8vIHNlc3Npb24uXG4gICAgaWYgKHRoaXMuX3Nlc3Npb25WYWx1ZSAmJiBmaXJzdFNlc3Npb25FbnRyeSAmJiBsYXN0U2Vzc2lvbkVudHJ5ICYmIGVudHJ5LnN0YXJ0VGltZSAtIGxhc3RTZXNzaW9uRW50cnkuc3RhcnRUaW1lIDwgMTAwMCAmJiBlbnRyeS5zdGFydFRpbWUgLSBmaXJzdFNlc3Npb25FbnRyeS5zdGFydFRpbWUgPCA1MDAwKSB7XG4gICAgICB0aGlzLl9zZXNzaW9uVmFsdWUgKz0gZW50cnkudmFsdWU7XG4gICAgICB0aGlzLl9zZXNzaW9uRW50cmllcy5wdXNoKGVudHJ5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2Vzc2lvblZhbHVlID0gZW50cnkudmFsdWU7XG4gICAgICB0aGlzLl9zZXNzaW9uRW50cmllcyA9IFtlbnRyeV07XG4gICAgfVxuICAgIHRoaXMuX29uQWZ0ZXJQcm9jZXNzaW5nVW5leHBlY3RlZFNoaWZ0Py4oZW50cnkpO1xuICB9XG59XG5leHBvcnQgeyBMYXlvdXRTaGlmdE1hbmFnZXIgfTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRha2VzIGEgcGVyZm9ybWFuY2UgZW50cnkgdHlwZSBhbmQgYSBjYWxsYmFjayBmdW5jdGlvbiwgYW5kIGNyZWF0ZXMgYVxuICogYFBlcmZvcm1hbmNlT2JzZXJ2ZXJgIGluc3RhbmNlIHRoYXQgd2lsbCBvYnNlcnZlIHRoZSBzcGVjaWZpZWQgZW50cnkgdHlwZVxuICogd2l0aCBidWZmZXJpbmcgZW5hYmxlZCBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgX2ZvciBlYWNoIGVudHJ5Xy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGFsc28gZmVhdHVyZS1kZXRlY3RzIGVudHJ5IHN1cHBvcnQgYW5kIHdyYXBzIHRoZSBsb2dpYyBpbiBhXG4gKiB0cnkvY2F0Y2ggdG8gYXZvaWQgZXJyb3JzIGluIHVuc3VwcG9ydGluZyBicm93c2Vycy5cbiAqL1xuY29uc3Qgb2JzZXJ2ZSA9ICh0eXBlLCBjYWxsYmFjaywgb3B0cyA9IHt9KSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKFBlcmZvcm1hbmNlT2JzZXJ2ZXIuc3VwcG9ydGVkRW50cnlUeXBlcy5pbmNsdWRlcyh0eXBlKSkge1xuICAgICAgY29uc3QgcG8gPSBuZXcgUGVyZm9ybWFuY2VPYnNlcnZlcihsaXN0ID0+IHtcbiAgICAgICAgLy8gRGVsYXkgYnkgYSBtaWNyb3Rhc2sgdG8gd29ya2Fyb3VuZCBhIGJ1ZyBpbiBTYWZhcmkgd2hlcmUgdGhlXG4gICAgICAgIC8vIGNhbGxiYWNrIGlzIGludm9rZWQgaW1tZWRpYXRlbHksIHJhdGhlciB0aGFuIGluIGEgc2VwYXJhdGUgdGFzay5cbiAgICAgICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dlYi12aXRhbHMvaXNzdWVzLzI3N1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNhbGxiYWNrKGxpc3QuZ2V0RW50cmllcygpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHBvLm9ic2VydmUoe1xuICAgICAgICB0eXBlLFxuICAgICAgICBidWZmZXJlZDogdHJ1ZSxcbiAgICAgICAgLi4ub3B0c1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcG87XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICAvLyBEbyBub3RoaW5nLlxuICB9XG4gIHJldHVybjtcbn07XG5leHBvcnQgeyBvYnNlcnZlIH07XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3QgcnVuT25jZSA9IGNiID0+IHtcbiAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmICghY2FsbGVkKSB7XG4gICAgICBjYigpO1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG59O1xuZXhwb3J0IHsgcnVuT25jZSB9O1xuIiwiaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMuanMnO1xuaW1wb3J0IHsgZ2V0QWN0aXZhdGlvblN0YXJ0IH0gZnJvbSAnLi9nZXRBY3RpdmF0aW9uU3RhcnQuanMnO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxubGV0IGZpcnN0SGlkZGVuVGltZSA9IC0xO1xuY29uc3QgaW5pdEhpZGRlblRpbWUgPSAoKSA9PiB7XG4gIC8vIElmIHRoZSBkb2N1bWVudCBpcyBoaWRkZW4gd2hlbiB0aGlzIGNvZGUgcnVucywgYXNzdW1lIGl0IHdhcyBhbHdheXNcbiAgLy8gaGlkZGVuIGFuZCB0aGUgcGFnZSB3YXMgbG9hZGVkIGluIHRoZSBiYWNrZ3JvdW5kLCB3aXRoIHRoZSBvbmUgZXhjZXB0aW9uXG4gIC8vIHRoYXQgdmlzaWJpbGl0eSBzdGF0ZSBpcyBhbHdheXMgJ2hpZGRlbicgZHVyaW5nIHByZXJlbmRlcmluZywgc28gd2UgaGF2ZVxuICAvLyB0byBpZ25vcmUgdGhhdCBjYXNlIHVudGlsIHByZXJlbmRlcmluZyBmaW5pc2hlcyAoc2VlOiBgcHJlcmVuZGVyaW5nY2hhbmdlYFxuICAvLyBldmVudCBsb2dpYyBiZWxvdykuXG4gIHJldHVybiBXSU5ET1cuZG9jdW1lbnQ/LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ2hpZGRlbicgJiYgIVdJTkRPVy5kb2N1bWVudD8ucHJlcmVuZGVyaW5nID8gMCA6IEluZmluaXR5O1xufTtcbmNvbnN0IG9uVmlzaWJpbGl0eVVwZGF0ZSA9IGV2ZW50ID0+IHtcbiAgLy8gSWYgdGhlIGRvY3VtZW50IGlzICdoaWRkZW4nIGFuZCBubyBwcmV2aW91cyBoaWRkZW4gdGltZXN0YW1wIGhhcyBiZWVuXG4gIC8vIHNldCwgdXBkYXRlIGl0IGJhc2VkIG9uIHRoZSBjdXJyZW50IGV2ZW50IGRhdGEuXG4gIGlmIChXSU5ET1cuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJyAmJiBmaXJzdEhpZGRlblRpbWUgPiAtMSkge1xuICAgIC8vIElmIHRoZSBldmVudCBpcyBhICd2aXNpYmlsaXR5Y2hhbmdlJyBldmVudCwgaXQgbWVhbnMgdGhlIHBhZ2Ugd2FzXG4gICAgLy8gdmlzaWJsZSBwcmlvciB0byB0aGlzIGNoYW5nZSwgc28gdGhlIGV2ZW50IHRpbWVzdGFtcCBpcyB0aGUgZmlyc3RcbiAgICAvLyBoaWRkZW4gdGltZS5cbiAgICAvLyBIb3dldmVyLCBpZiB0aGUgZXZlbnQgaXMgbm90IGEgJ3Zpc2liaWxpdHljaGFuZ2UnIGV2ZW50LCB0aGVuIGl0IG11c3RcbiAgICAvLyBiZSBhICdwcmVyZW5kZXJpbmdjaGFuZ2UnIGV2ZW50LCBhbmQgdGhlIGZhY3QgdGhhdCB0aGUgZG9jdW1lbnQgaXNcbiAgICAvLyBzdGlsbCAnaGlkZGVuJyBmcm9tIHRoZSBhYm92ZSBjaGVjayBtZWFucyB0aGUgdGFiIHdhcyBhY3RpdmF0ZWRcbiAgICAvLyBpbiBhIGJhY2tncm91bmQgc3RhdGUgYW5kIHNvIGhhcyBhbHdheXMgYmVlbiBoaWRkZW4uXG4gICAgZmlyc3RIaWRkZW5UaW1lID0gZXZlbnQudHlwZSA9PT0gJ3Zpc2liaWxpdHljaGFuZ2UnID8gZXZlbnQudGltZVN0YW1wIDogMDtcblxuICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzIG5vdyB0aGF0IGEgYGZpcnN0SGlkZGVuVGltZWAgdmFsdWUgaGFzIGJlZW4gc2V0LlxuICAgIHJlbW92ZUNoYW5nZUxpc3RlbmVycygpO1xuICB9XG59O1xuY29uc3QgYWRkQ2hhbmdlTGlzdGVuZXJzID0gKCkgPT4ge1xuICBhZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgb25WaXNpYmlsaXR5VXBkYXRlLCB0cnVlKTtcbiAgLy8gSU1QT1JUQU5UOiB3aGVuIGEgcGFnZSBpcyBwcmVyZW5kZXJpbmcsIGl0cyBgdmlzaWJpbGl0eVN0YXRlYCBpc1xuICAvLyAnaGlkZGVuJywgc28gaW4gb3JkZXIgdG8gYWNjb3VudCBmb3IgY2FzZXMgd2hlcmUgdGhpcyBtb2R1bGUgY2hlY2tzIGZvclxuICAvLyB2aXNpYmlsaXR5IGR1cmluZyBwcmVyZW5kZXJpbmcsIGFuIGFkZGl0aW9uYWwgY2hlY2sgYWZ0ZXIgcHJlcmVuZGVyaW5nXG4gIC8vIGNvbXBsZXRlcyBpcyBhbHNvIHJlcXVpcmVkLlxuICBhZGRFdmVudExpc3RlbmVyKCdwcmVyZW5kZXJpbmdjaGFuZ2UnLCBvblZpc2liaWxpdHlVcGRhdGUsIHRydWUpO1xufTtcbmNvbnN0IHJlbW92ZUNoYW5nZUxpc3RlbmVycyA9ICgpID0+IHtcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eVVwZGF0ZSwgdHJ1ZSk7XG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZXJlbmRlcmluZ2NoYW5nZScsIG9uVmlzaWJpbGl0eVVwZGF0ZSwgdHJ1ZSk7XG59O1xuY29uc3QgZ2V0VmlzaWJpbGl0eVdhdGNoZXIgPSAoKSA9PiB7XG4gIGlmIChXSU5ET1cuZG9jdW1lbnQgJiYgZmlyc3RIaWRkZW5UaW1lIDwgMCkge1xuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYSBwcmV2aW91cyBoaWRkZW4gYHZpc2liaWxpdHktc3RhdGVgIHBlcmZvcm1hbmNlIGVudHJ5LlxuICAgIGNvbnN0IGFjdGl2YXRpb25TdGFydCA9IGdldEFjdGl2YXRpb25TdGFydCgpO1xuICAgIGNvbnN0IGZpcnN0VmlzaWJpbGl0eVN0YXRlSGlkZGVuVGltZSA9ICFXSU5ET1cuZG9jdW1lbnQucHJlcmVuZGVyaW5nID8gZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKCd2aXNpYmlsaXR5LXN0YXRlJykuZmlsdGVyKGUgPT4gZS5uYW1lID09PSAnaGlkZGVuJyAmJiBlLnN0YXJ0VGltZSA+IGFjdGl2YXRpb25TdGFydClbMF0/LnN0YXJ0VGltZSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFByZWZlciB0aGF0LCBidXQgaWYgaXQncyBub3QgYXZhaWxhYmxlIGFuZCB0aGUgZG9jdW1lbnQgaXMgaGlkZGVuIHdoZW5cbiAgICAvLyB0aGlzIGNvZGUgcnVucywgYXNzdW1lIGl0IHdhcyBoaWRkZW4gc2luY2UgbmF2aWdhdGlvbiBzdGFydC4gVGhpcyBpc24ndFxuICAgIC8vIGEgcGVyZmVjdCBoZXVyaXN0aWMsIGJ1dCBpdCdzIHRoZSBiZXN0IHdlIGNhbiBkbyB1bnRpbCB0aGVcbiAgICAvLyBgdmlzaWJpbGl0eS1zdGF0ZWAgcGVyZm9ybWFuY2UgZW50cnkgYmVjb21lcyBhdmFpbGFibGUgaW4gYWxsIGJyb3dzZXJzLlxuICAgIGZpcnN0SGlkZGVuVGltZSA9IGZpcnN0VmlzaWJpbGl0eVN0YXRlSGlkZGVuVGltZSA/PyBpbml0SGlkZGVuVGltZSgpO1xuICAgIC8vIFdlJ3JlIHN0aWxsIGdvaW5nIHRvIGxpc3RlbiB0byBmb3IgY2hhbmdlcyBzbyB3ZSBjYW4gaGFuZGxlIHRoaW5ncyBsaWtlXG4gICAgLy8gYmZjYWNoZSByZXN0b3JlcyBhbmQvb3IgcHJlcmVuZGVyIHdpdGhvdXQgaGF2aW5nIHRvIGV4YW1pbmUgaW5kaXZpZHVhbFxuICAgIC8vIHRpbWVzdGFtcHMgaW4gZGV0YWlsLlxuICAgIGFkZENoYW5nZUxpc3RlbmVycygpO1xuICB9XG4gIHJldHVybiB7XG4gICAgZ2V0IGZpcnN0SGlkZGVuVGltZSgpIHtcbiAgICAgIHJldHVybiBmaXJzdEhpZGRlblRpbWU7XG4gICAgfVxuICB9O1xufTtcbmV4cG9ydCB7IGdldFZpc2liaWxpdHlXYXRjaGVyIH07XG4iLCJpbXBvcnQgeyBXSU5ET1cgfSBmcm9tICcuLi8uLi8uLi90eXBlcy5qcyc7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCB3aGVuQWN0aXZhdGVkID0gY2FsbGJhY2sgPT4ge1xuICBpZiAoV0lORE9XLmRvY3VtZW50Py5wcmVyZW5kZXJpbmcpIHtcbiAgICBhZGRFdmVudExpc3RlbmVyKCdwcmVyZW5kZXJpbmdjaGFuZ2UnLCAoKSA9PiBjYWxsYmFjaygpLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBjYWxsYmFjaygpO1xuICB9XG59O1xuZXhwb3J0IHsgd2hlbkFjdGl2YXRlZCB9O1xuIiwiaW1wb3J0IHsgYmluZFJlcG9ydGVyIH0gZnJvbSAnLi9saWIvYmluZFJlcG9ydGVyLmpzJztcbmltcG9ydCB7IGdldEFjdGl2YXRpb25TdGFydCB9IGZyb20gJy4vbGliL2dldEFjdGl2YXRpb25TdGFydC5qcyc7XG5pbXBvcnQgeyBnZXRWaXNpYmlsaXR5V2F0Y2hlciB9IGZyb20gJy4vbGliL2dldFZpc2liaWxpdHlXYXRjaGVyLmpzJztcbmltcG9ydCB7IGluaXRNZXRyaWMgfSBmcm9tICcuL2xpYi9pbml0TWV0cmljLmpzJztcbmltcG9ydCB7IG9ic2VydmUgfSBmcm9tICcuL2xpYi9vYnNlcnZlLmpzJztcbmltcG9ydCB7IHdoZW5BY3RpdmF0ZWQgfSBmcm9tICcuL2xpYi93aGVuQWN0aXZhdGVkLmpzJztcblxuLypcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBUaHJlc2hvbGRzIGZvciBGQ1AuIFNlZSBodHRwczovL3dlYi5kZXYvYXJ0aWNsZXMvZmNwI3doYXRfaXNfYV9nb29kX2ZjcF9zY29yZSAqL1xuY29uc3QgRkNQVGhyZXNob2xkcyA9IFsxODAwLCAzMDAwXTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBbRkNQXShodHRwczovL3dlYi5kZXYvYXJ0aWNsZXMvZmNwKSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgcGFnZSBhbmRcbiAqIGNhbGxzIHRoZSBgY2FsbGJhY2tgIGZ1bmN0aW9uIG9uY2UgdGhlIHZhbHVlIGlzIHJlYWR5LCBhbG9uZyB3aXRoIHRoZVxuICogcmVsZXZhbnQgYHBhaW50YCBwZXJmb3JtYW5jZSBlbnRyeSB1c2VkIHRvIGRldGVybWluZSB0aGUgdmFsdWUuIFRoZSByZXBvcnRlZFxuICogdmFsdWUgaXMgYSBgRE9NSGlnaFJlc1RpbWVTdGFtcGAuXG4gKi9cbmNvbnN0IG9uRkNQID0gKG9uUmVwb3J0LCBvcHRzID0ge30pID0+IHtcbiAgd2hlbkFjdGl2YXRlZCgoKSA9PiB7XG4gICAgY29uc3QgdmlzaWJpbGl0eVdhdGNoZXIgPSBnZXRWaXNpYmlsaXR5V2F0Y2hlcigpO1xuICAgIGNvbnN0IG1ldHJpYyA9IGluaXRNZXRyaWMoJ0ZDUCcpO1xuICAgIGxldCByZXBvcnQ7XG4gICAgY29uc3QgaGFuZGxlRW50cmllcyA9IGVudHJpZXMgPT4ge1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmIChlbnRyeS5uYW1lID09PSAnZmlyc3QtY29udGVudGZ1bC1wYWludCcpIHtcbiAgICAgICAgICBwby5kaXNjb25uZWN0KCk7XG5cbiAgICAgICAgICAvLyBPbmx5IHJlcG9ydCBpZiB0aGUgcGFnZSB3YXNuJ3QgaGlkZGVuIHByaW9yIHRvIHRoZSBmaXJzdCBwYWludC5cbiAgICAgICAgICBpZiAoZW50cnkuc3RhcnRUaW1lIDwgdmlzaWJpbGl0eVdhdGNoZXIuZmlyc3RIaWRkZW5UaW1lKSB7XG4gICAgICAgICAgICAvLyBUaGUgYWN0aXZhdGlvblN0YXJ0IHJlZmVyZW5jZSBpcyB1c2VkIGJlY2F1c2UgRkNQIHNob3VsZCBiZVxuICAgICAgICAgICAgLy8gcmVsYXRpdmUgdG8gcGFnZSBhY3RpdmF0aW9uIHJhdGhlciB0aGFuIG5hdmlnYXRpb24gc3RhcnQgaWYgdGhlXG4gICAgICAgICAgICAvLyBwYWdlIHdhcyBwcmVyZW5kZXJlZC4gQnV0IGluIGNhc2VzIHdoZXJlIGBhY3RpdmF0aW9uU3RhcnRgIG9jY3Vyc1xuICAgICAgICAgICAgLy8gYWZ0ZXIgdGhlIEZDUCwgdGhpcyB0aW1lIHNob3VsZCBiZSBjbGFtcGVkIGF0IDAuXG4gICAgICAgICAgICBtZXRyaWMudmFsdWUgPSBNYXRoLm1heChlbnRyeS5zdGFydFRpbWUgLSBnZXRBY3RpdmF0aW9uU3RhcnQoKSwgMCk7XG4gICAgICAgICAgICBtZXRyaWMuZW50cmllcy5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgIHJlcG9ydCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBvID0gb2JzZXJ2ZSgncGFpbnQnLCBoYW5kbGVFbnRyaWVzKTtcbiAgICBpZiAocG8pIHtcbiAgICAgIHJlcG9ydCA9IGJpbmRSZXBvcnRlcihvblJlcG9ydCwgbWV0cmljLCBGQ1BUaHJlc2hvbGRzLCBvcHRzLnJlcG9ydEFsbENoYW5nZXMpO1xuICAgIH1cbiAgfSk7XG59O1xuZXhwb3J0IHsgRkNQVGhyZXNob2xkcywgb25GQ1AgfTtcbiIsImltcG9ydCB7IFdJTkRPVyB9IGZyb20gJy4uLy4uL3R5cGVzLmpzJztcbmltcG9ydCB7IGJpbmRSZXBvcnRlciB9IGZyb20gJy4vbGliL2JpbmRSZXBvcnRlci5qcyc7XG5pbXBvcnQgeyBpbml0TWV0cmljIH0gZnJvbSAnLi9saWIvaW5pdE1ldHJpYy5qcyc7XG5pbXBvcnQgeyBpbml0VW5pcXVlIH0gZnJvbSAnLi9saWIvaW5pdFVuaXF1ZS5qcyc7XG5pbXBvcnQgeyBMYXlvdXRTaGlmdE1hbmFnZXIgfSBmcm9tICcuL2xpYi9MYXlvdXRTaGlmdE1hbmFnZXIuanMnO1xuaW1wb3J0IHsgb2JzZXJ2ZSB9IGZyb20gJy4vbGliL29ic2VydmUuanMnO1xuaW1wb3J0IHsgcnVuT25jZSB9IGZyb20gJy4vbGliL3J1bk9uY2UuanMnO1xuaW1wb3J0IHsgb25GQ1AgfSBmcm9tICcuL29uRkNQLmpzJztcblxuLypcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBUaHJlc2hvbGRzIGZvciBDTFMuIFNlZSBodHRwczovL3dlYi5kZXYvYXJ0aWNsZXMvY2xzI3doYXRfaXNfYV9nb29kX2Nsc19zY29yZSAqL1xuY29uc3QgQ0xTVGhyZXNob2xkcyA9IFswLjEsIDAuMjVdO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIFtDTFNdKGh0dHBzOi8vd2ViLmRldi9hcnRpY2xlcy9jbHMpIHZhbHVlIGZvciB0aGUgY3VycmVudCBwYWdlIGFuZFxuICogY2FsbHMgdGhlIGBjYWxsYmFja2AgZnVuY3Rpb24gb25jZSB0aGUgdmFsdWUgaXMgcmVhZHkgdG8gYmUgcmVwb3J0ZWQsIGFsb25nXG4gKiB3aXRoIGFsbCBgbGF5b3V0LXNoaWZ0YCBwZXJmb3JtYW5jZSBlbnRyaWVzIHRoYXQgd2VyZSB1c2VkIGluIHRoZSBtZXRyaWNcbiAqIHZhbHVlIGNhbGN1bGF0aW9uLiBUaGUgcmVwb3J0ZWQgdmFsdWUgaXMgYSBgZG91YmxlYCAoY29ycmVzcG9uZGluZyB0byBhXG4gKiBbbGF5b3V0IHNoaWZ0IHNjb3JlXShodHRwczovL3dlYi5kZXYvYXJ0aWNsZXMvY2xzI2xheW91dF9zaGlmdF9zY29yZSkpLlxuICpcbiAqIElmIHRoZSBgcmVwb3J0QWxsQ2hhbmdlc2AgY29uZmlndXJhdGlvbiBvcHRpb24gaXMgc2V0IHRvIGB0cnVlYCwgdGhlXG4gKiBgY2FsbGJhY2tgIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFzIHNvb24gYXMgdGhlIHZhbHVlIGlzIGluaXRpYWxseVxuICogZGV0ZXJtaW5lZCBhcyB3ZWxsIGFzIGFueSB0aW1lIHRoZSB2YWx1ZSBjaGFuZ2VzIHRocm91Z2hvdXQgdGhlIHBhZ2VcbiAqIGxpZmVzcGFuLlxuICpcbiAqIF8qKkltcG9ydGFudDoqKiBDTFMgc2hvdWxkIGJlIGNvbnRpbnVhbGx5IG1vbml0b3JlZCBmb3IgY2hhbmdlcyB0aHJvdWdob3V0XG4gKiB0aGUgZW50aXJlIGxpZmVzcGFuIG9mIGEgcGFnZeKAlGluY2x1ZGluZyBpZiB0aGUgdXNlciByZXR1cm5zIHRvIHRoZSBwYWdlIGFmdGVyXG4gKiBpdCdzIGJlZW4gaGlkZGVuL2JhY2tncm91bmRlZC4gSG93ZXZlciwgc2luY2UgYnJvd3NlcnMgb2Z0ZW4gW3dpbGwgbm90IGZpcmVcbiAqIGFkZGl0aW9uYWwgY2FsbGJhY2tzIG9uY2UgdGhlIHVzZXIgaGFzIGJhY2tncm91bmRlZCBhXG4gKiBwYWdlXShodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2Jsb2cvcGFnZS1saWZlY3ljbGUtYXBpLyNhZHZpY2UtaGlkZGVuKSxcbiAqIGBjYWxsYmFja2AgaXMgYWx3YXlzIGNhbGxlZCB3aGVuIHRoZSBwYWdlJ3MgdmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VzIHRvXG4gKiBoaWRkZW4uIEFzIGEgcmVzdWx0LCB0aGUgYGNhbGxiYWNrYCBmdW5jdGlvbiBtaWdodCBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXNcbiAqIGR1cmluZyB0aGUgc2FtZSBwYWdlIGxvYWQuX1xuICovXG5jb25zdCBvbkNMUyA9IChvblJlcG9ydCwgb3B0cyA9IHt9KSA9PiB7XG4gIC8vIFN0YXJ0IG1vbml0b3JpbmcgRkNQIHNvIHdlIGNhbiBvbmx5IHJlcG9ydCBDTFMgaWYgRkNQIGlzIGFsc28gcmVwb3J0ZWQuXG4gIC8vIE5vdGU6IHRoaXMgaXMgZG9uZSB0byBtYXRjaCB0aGUgY3VycmVudCBiZWhhdmlvciBvZiBDclVYLlxuICBvbkZDUChydW5PbmNlKCgpID0+IHtcbiAgICBjb25zdCBtZXRyaWMgPSBpbml0TWV0cmljKCdDTFMnLCAwKTtcbiAgICBsZXQgcmVwb3J0O1xuICAgIGNvbnN0IGxheW91dFNoaWZ0TWFuYWdlciA9IGluaXRVbmlxdWUob3B0cywgTGF5b3V0U2hpZnRNYW5hZ2VyKTtcbiAgICBjb25zdCBoYW5kbGVFbnRyaWVzID0gZW50cmllcyA9PiB7XG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgbGF5b3V0U2hpZnRNYW5hZ2VyLl9wcm9jZXNzRW50cnkoZW50cnkpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgY3VycmVudCBzZXNzaW9uIHZhbHVlIGlzIGxhcmdlciB0aGFuIHRoZSBjdXJyZW50IENMUyB2YWx1ZSxcbiAgICAgIC8vIHVwZGF0ZSBDTFMgYW5kIHRoZSBlbnRyaWVzIGNvbnRyaWJ1dGluZyB0byBpdC5cbiAgICAgIGlmIChsYXlvdXRTaGlmdE1hbmFnZXIuX3Nlc3Npb25WYWx1ZSA+IG1ldHJpYy52YWx1ZSkge1xuICAgICAgICBtZXRyaWMudmFsdWUgPSBsYXlvdXRTaGlmdE1hbmFnZXIuX3Nlc3Npb25WYWx1ZTtcbiAgICAgICAgbWV0cmljLmVudHJpZXMgPSBsYXlvdXRTaGlmdE1hbmFnZXIuX3Nlc3Npb25FbnRyaWVzO1xuICAgICAgICByZXBvcnQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBvID0gb2JzZXJ2ZSgnbGF5b3V0LXNoaWZ0JywgaGFuZGxlRW50cmllcyk7XG4gICAgaWYgKHBvKSB7XG4gICAgICByZXBvcnQgPSBiaW5kUmVwb3J0ZXIob25SZXBvcnQsIG1ldHJpYywgQ0xTVGhyZXNob2xkcywgb3B0cy5yZXBvcnRBbGxDaGFuZ2VzKTtcbiAgICAgIFdJTkRPVy5kb2N1bWVudD8uYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgaWYgKFdJTkRPVy5kb2N1bWVudD8udmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykge1xuICAgICAgICAgIGhhbmRsZUVudHJpZXMocG8udGFrZVJlY29yZHMoKSk7XG4gICAgICAgICAgcmVwb3J0KHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gUXVldWUgYSB0YXNrIHRvIHJlcG9ydCAoaWYgbm90aGluZyBlbHNlIHRyaWdnZXJzIGEgcmVwb3J0IGZpcnN0KS5cbiAgICAgIC8vIFRoaXMgYWxsb3dzIENMUyB0byBiZSByZXBvcnRlZCBhcyBzb29uIGFzIEZDUCBmaXJlcyB3aGVuXG4gICAgICAvLyBgcmVwb3J0QWxsQ2hhbmdlc2AgaXMgdHJ1ZS5cbiAgICAgIFdJTkRPVz8uc2V0VGltZW91dD8uKHJlcG9ydCk7XG4gICAgfVxuICB9KSk7XG59O1xuZXhwb3J0IHsgQ0xTVGhyZXNob2xkcywgb25DTFMgfTtcbiIsImltcG9ydCB7IFdJTkRPVyB9IGZyb20gJy4uLy4uLy4uL3R5cGVzLmpzJztcblxuLypcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFNlbnRyeS1zcGVjaWZpYyBjaGFuZ2U6XG4vLyBUaGlzIGZ1bmN0aW9uJ3MgbG9naWMgd2FzIE5PVCB1cGRhdGVkIHRvIHdlYi12aXRhbHMgNC4yLjQgb3IgNS54IGJ1dCB3ZSBjb250aW51ZVxuLy8gdG8gdXNlIHRoZSB3ZWItdml0YWxzIDMuNS4yIHZlcnNpb25kdWUgdG8gdXMgaGF2aW5nIHN0cmljdGVyIGJyb3dzZXIgc3VwcG9ydC5cbi8vIFBSIHdpdGggY29udGV4dCB0aGF0IG1hZGUgdGhlIGNoYW5nZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWUvd2ViLXZpdGFscy9wdWxsLzQ0Mi9maWxlcyNyMTUzMDQ5MjQwMlxuLy8gVGhlIFBSIHJlbW92ZWQgbGlzdGVuaW5nIHRvIHRoZSBgcGFnZWhpZGVgIGV2ZW50LCBpbiBmYXZvdXIgb2Ygb25seSBsaXN0ZW5pbmcgdG8gYHZpc2liaWxpdHljaGFuZ2VgIGV2ZW50LlxuLy8gVGhpcyBpcyBcIm1vcmUgY29ycmVjdFwiIGJ1dCBzb21lIGJyb3dzZXJzIHdlIHN0aWxsIHN1cHBvcnQgKFNhZmFyaSA8MTQuNCkgZG9uJ3QgZnVsbHkgc3VwcG9ydCBgdmlzaWJpbGl0eWNoYW5nZWBcbi8vIG9yIGhhdmUga25vd24gYnVncyB3LnIudCB0aGUgYHZpc2liaWxpdHljaGFuZ2VgIGV2ZW50LlxuLy8gVE9ETyAodjEwKTogSWYgd2UgZGVjaWRlIHRvIGRyb3Agc3VwcG9ydCBmb3IgU2FmYXJpIDE0LjQsIHdlIGNhbiB1c2UgdGhlIGxvZ2ljIGZyb20gd2ViLXZpdGFscyA0LjIuNFxuLy8gSW4gdGhpcyBjYXNlLCB3ZSBhbHNvIG5lZWQgdG8gdXBkYXRlIHRoZSBpbnRlZ3JhdGlvbiB0ZXN0cyB0aGF0IGN1cnJlbnRseSB0cmlnZ2VyIHRoZSBgcGFnZWhpZGVgIGV2ZW50IHRvXG4vLyBzaW11bGF0ZSB0aGUgcGFnZSBiZWluZyBoaWRkZW4uXG5jb25zdCBvbkhpZGRlbiA9IGNiID0+IHtcbiAgY29uc3Qgb25IaWRkZW5PclBhZ2VIaWRlID0gZXZlbnQgPT4ge1xuICAgIGlmIChldmVudC50eXBlID09PSAncGFnZWhpZGUnIHx8IFdJTkRPVy5kb2N1bWVudD8udmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykge1xuICAgICAgY2IoZXZlbnQpO1xuICAgIH1cbiAgfTtcbiAgaWYgKFdJTkRPVy5kb2N1bWVudCkge1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBvbkhpZGRlbk9yUGFnZUhpZGUsIHRydWUpO1xuICAgIC8vIFNvbWUgYnJvd3NlcnMgaGF2ZSBidWdneSBpbXBsZW1lbnRhdGlvbnMgb2YgdmlzaWJpbGl0eWNoYW5nZSxcbiAgICAvLyBzbyB3ZSB1c2UgcGFnZWhpZGUgaW4gYWRkaXRpb24sIGp1c3QgdG8gYmUgc2FmZS5cbiAgICBhZGRFdmVudExpc3RlbmVyKCdwYWdlaGlkZScsIG9uSGlkZGVuT3JQYWdlSGlkZSwgdHJ1ZSk7XG4gIH1cbn07XG5leHBvcnQgeyBvbkhpZGRlbiB9O1xuIiwiaW1wb3J0IHsgYmluZFJlcG9ydGVyIH0gZnJvbSAnLi9saWIvYmluZFJlcG9ydGVyLmpzJztcbmltcG9ydCB7IGdldFZpc2liaWxpdHlXYXRjaGVyIH0gZnJvbSAnLi9saWIvZ2V0VmlzaWJpbGl0eVdhdGNoZXIuanMnO1xuaW1wb3J0IHsgaW5pdE1ldHJpYyB9IGZyb20gJy4vbGliL2luaXRNZXRyaWMuanMnO1xuaW1wb3J0IHsgb2JzZXJ2ZSB9IGZyb20gJy4vbGliL29ic2VydmUuanMnO1xuaW1wb3J0IHsgb25IaWRkZW4gfSBmcm9tICcuL2xpYi9vbkhpZGRlbi5qcyc7XG5pbXBvcnQgeyBydW5PbmNlIH0gZnJvbSAnLi9saWIvcnVuT25jZS5qcyc7XG5pbXBvcnQgeyB3aGVuQWN0aXZhdGVkIH0gZnJvbSAnLi9saWIvd2hlbkFjdGl2YXRlZC5qcyc7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKiAvLyBTZW50cnk6IHdlYi12aXRhbHMgcmVtb3ZlZCBGSUQgcmVwb3J0aW5nIGZyb20gdjUuIFdlJ3JlIGtlZXBpbmcgaXQgYXJvdW5kXG4gKiBmb3IgdGhlIHRpbWUgYmVpbmcuXG4gKiAvLyBUT0RPKHYxMCk6IFJlbW92ZSBGSUQgcmVwb3J0aW5nIVxuICovXG5cbi8qKiBUaHJlc2hvbGRzIGZvciBGSUQuIFNlZSBodHRwczovL3dlYi5kZXYvYXJ0aWNsZXMvZmlkI3doYXRfaXNfYV9nb29kX2ZpZF9zY29yZSAqL1xuY29uc3QgRklEVGhyZXNob2xkcyA9IFsxMDAsIDMwMF07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgW0ZJRF0oaHR0cHM6Ly93ZWIuZGV2L2FydGljbGVzL2ZpZCkgdmFsdWUgZm9yIHRoZSBjdXJyZW50IHBhZ2UgYW5kXG4gKiBjYWxscyB0aGUgYGNhbGxiYWNrYCBmdW5jdGlvbiBvbmNlIHRoZSB2YWx1ZSBpcyByZWFkeSwgYWxvbmcgd2l0aCB0aGVcbiAqIHJlbGV2YW50IGBmaXJzdC1pbnB1dGAgcGVyZm9ybWFuY2UgZW50cnkgdXNlZCB0byBkZXRlcm1pbmUgdGhlIHZhbHVlLiBUaGVcbiAqIHJlcG9ydGVkIHZhbHVlIGlzIGEgYERPTUhpZ2hSZXNUaW1lU3RhbXBgLlxuICpcbiAqIF8qKkltcG9ydGFudDoqKiBzaW5jZSBGSUQgaXMgb25seSByZXBvcnRlZCBhZnRlciB0aGUgdXNlciBpbnRlcmFjdHMgd2l0aCB0aGVcbiAqIHBhZ2UsIGl0J3MgcG9zc2libGUgdGhhdCBpdCB3aWxsIG5vdCBiZSByZXBvcnRlZCBmb3Igc29tZSBwYWdlIGxvYWRzLl9cbiAqL1xuY29uc3Qgb25GSUQgPSAob25SZXBvcnQsIG9wdHMgPSB7fSkgPT4ge1xuICB3aGVuQWN0aXZhdGVkKCgpID0+IHtcbiAgICBjb25zdCB2aXNpYmlsaXR5V2F0Y2hlciA9IGdldFZpc2liaWxpdHlXYXRjaGVyKCk7XG4gICAgY29uc3QgbWV0cmljID0gaW5pdE1ldHJpYygnRklEJyk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICAgIGxldCByZXBvcnQ7XG4gICAgY29uc3QgaGFuZGxlRW50cnkgPSBlbnRyeSA9PiB7XG4gICAgICAvLyBPbmx5IHJlcG9ydCBpZiB0aGUgcGFnZSB3YXNuJ3QgaGlkZGVuIHByaW9yIHRvIHRoZSBmaXJzdCBpbnB1dC5cbiAgICAgIGlmIChlbnRyeS5zdGFydFRpbWUgPCB2aXNpYmlsaXR5V2F0Y2hlci5maXJzdEhpZGRlblRpbWUpIHtcbiAgICAgICAgbWV0cmljLnZhbHVlID0gZW50cnkucHJvY2Vzc2luZ1N0YXJ0IC0gZW50cnkuc3RhcnRUaW1lO1xuICAgICAgICBtZXRyaWMuZW50cmllcy5wdXNoKGVudHJ5KTtcbiAgICAgICAgcmVwb3J0KHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlRW50cmllcyA9IGVudHJpZXMgPT4ge1xuICAgICAgZW50cmllcy5mb3JFYWNoKGhhbmRsZUVudHJ5KTtcbiAgICB9O1xuICAgIGNvbnN0IHBvID0gb2JzZXJ2ZSgnZmlyc3QtaW5wdXQnLCBoYW5kbGVFbnRyaWVzKTtcbiAgICByZXBvcnQgPSBiaW5kUmVwb3J0ZXIob25SZXBvcnQsIG1ldHJpYywgRklEVGhyZXNob2xkcywgb3B0cy5yZXBvcnRBbGxDaGFuZ2VzKTtcbiAgICBpZiAocG8pIHtcbiAgICAgIC8vIHNlbnRyeTogVE9ETzogRmlndXJlIG91dCBpZiB3ZSBjYW4gdXNlIG5ldyB3aGluSWRsZU9ySGlkZGVuIGluc3RlYXJkIG9mIG9uSGlkZGVuXG4gICAgICBvbkhpZGRlbihydW5PbmNlKCgpID0+IHtcbiAgICAgICAgaGFuZGxlRW50cmllcyhwby50YWtlUmVjb3JkcygpKTtcbiAgICAgICAgcG8uZGlzY29ubmVjdCgpO1xuICAgICAgfSkpO1xuICAgIH1cbiAgfSk7XG59O1xuZXhwb3J0IHsgRklEVGhyZXNob2xkcywgb25GSUQgfTtcbiIsImltcG9ydCB7IG9ic2VydmUgfSBmcm9tICcuLi9vYnNlcnZlLmpzJztcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmxldCBpbnRlcmFjdGlvbkNvdW50RXN0aW1hdGUgPSAwO1xubGV0IG1pbktub3duSW50ZXJhY3Rpb25JZCA9IEluZmluaXR5O1xubGV0IG1heEtub3duSW50ZXJhY3Rpb25JZCA9IDA7XG5jb25zdCB1cGRhdGVFc3RpbWF0ZSA9IGVudHJpZXMgPT4ge1xuICBlbnRyaWVzLmZvckVhY2goZSA9PiB7XG4gICAgaWYgKGUuaW50ZXJhY3Rpb25JZCkge1xuICAgICAgbWluS25vd25JbnRlcmFjdGlvbklkID0gTWF0aC5taW4obWluS25vd25JbnRlcmFjdGlvbklkLCBlLmludGVyYWN0aW9uSWQpO1xuICAgICAgbWF4S25vd25JbnRlcmFjdGlvbklkID0gTWF0aC5tYXgobWF4S25vd25JbnRlcmFjdGlvbklkLCBlLmludGVyYWN0aW9uSWQpO1xuICAgICAgaW50ZXJhY3Rpb25Db3VudEVzdGltYXRlID0gbWF4S25vd25JbnRlcmFjdGlvbklkID8gKG1heEtub3duSW50ZXJhY3Rpb25JZCAtIG1pbktub3duSW50ZXJhY3Rpb25JZCkgLyA3ICsgMSA6IDA7XG4gICAgfVxuICB9KTtcbn07XG5sZXQgcG87XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYGludGVyYWN0aW9uQ291bnRgIHZhbHVlIHVzaW5nIHRoZSBuYXRpdmUgQVBJIChpZiBhdmFpbGFibGUpXG4gKiBvciB0aGUgcG9seWZpbGwgZXN0aW1hdGUgaW4gdGhpcyBtb2R1bGUuXG4gKi9cbmNvbnN0IGdldEludGVyYWN0aW9uQ291bnQgPSAoKSA9PiB7XG4gIHJldHVybiBwbyA/IGludGVyYWN0aW9uQ291bnRFc3RpbWF0ZSA6IHBlcmZvcm1hbmNlLmludGVyYWN0aW9uQ291bnQgfHwgMDtcbn07XG5cbi8qKlxuICogRmVhdHVyZSBkZXRlY3RzIG5hdGl2ZSBzdXBwb3J0IG9yIGluaXRpYWxpemVzIHRoZSBwb2x5ZmlsbCBpZiBuZWVkZWQuXG4gKi9cbmNvbnN0IGluaXRJbnRlcmFjdGlvbkNvdW50UG9seWZpbGwgPSAoKSA9PiB7XG4gIGlmICgnaW50ZXJhY3Rpb25Db3VudCcgaW4gcGVyZm9ybWFuY2UgfHwgcG8pIHJldHVybjtcbiAgcG8gPSBvYnNlcnZlKCdldmVudCcsIHVwZGF0ZUVzdGltYXRlLCB7XG4gICAgdHlwZTogJ2V2ZW50JyxcbiAgICBidWZmZXJlZDogdHJ1ZSxcbiAgICBkdXJhdGlvblRocmVzaG9sZDogMFxuICB9KTtcbn07XG5leHBvcnQgeyBnZXRJbnRlcmFjdGlvbkNvdW50LCBpbml0SW50ZXJhY3Rpb25Db3VudFBvbHlmaWxsIH07XG4iLCJpbXBvcnQgeyBnZXRJbnRlcmFjdGlvbkNvdW50IH0gZnJvbSAnLi9wb2x5ZmlsbHMvaW50ZXJhY3Rpb25Db3VudFBvbHlmaWxsLmpzJztcblxuLypcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFRvIHByZXZlbnQgdW5uZWNlc3NhcnkgbWVtb3J5IHVzYWdlIG9uIHBhZ2VzIHdpdGggbG90cyBvZiBpbnRlcmFjdGlvbnMsXG4vLyBzdG9yZSBhdCBtb3N0IDEwIG9mIHRoZSBsb25nZXN0IGludGVyYWN0aW9ucyB0byBjb25zaWRlciBhcyBJTlAgY2FuZGlkYXRlcy5cbmNvbnN0IE1BWF9JTlRFUkFDVElPTlNfVE9fQ09OU0lERVIgPSAxMDtcblxuLy8gVXNlZCB0byBzdG9yZSB0aGUgaW50ZXJhY3Rpb24gY291bnQgYWZ0ZXIgYSBiZmNhY2hlIHJlc3RvcmUsIHNpbmNlIHA5OFxuLy8gaW50ZXJhY3Rpb24gbGF0ZW5jaWVzIHNob3VsZCBvbmx5IGNvbnNpZGVyIHRoZSBjdXJyZW50IG5hdmlnYXRpb24uXG5sZXQgcHJldkludGVyYWN0aW9uQ291bnQgPSAwO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGludGVyYWN0aW9uIGNvdW50IHNpbmNlIHRoZSBsYXN0IGJmY2FjaGUgcmVzdG9yZSAob3IgZm9yIHRoZVxuICogZnVsbCBwYWdlIGxpZmVjeWNsZSBpZiB0aGVyZSB3ZXJlIG5vIGJmY2FjaGUgcmVzdG9yZXMpLlxuICovXG5jb25zdCBnZXRJbnRlcmFjdGlvbkNvdW50Rm9yTmF2aWdhdGlvbiA9ICgpID0+IHtcbiAgcmV0dXJuIGdldEludGVyYWN0aW9uQ291bnQoKSAtIHByZXZJbnRlcmFjdGlvbkNvdW50O1xufTtcblxuLyoqXG4gKlxuICovXG5jbGFzcyBJbnRlcmFjdGlvbk1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBJbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLl9faW5pdC5jYWxsKHRoaXMpO1xuICAgIEludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUuX19pbml0Mi5jYWxsKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgbG9uZ2VzdCBpbnRlcmFjdGlvbnMgb24gdGhlIHBhZ2UgKGJ5IGxhdGVuY3kpIHNvcnRlZCBzbyB0aGVcbiAgICogbG9uZ2VzdCBvbmUgaXMgZmlyc3QuIFRoZSBsaXN0IGlzIGF0IG1vc3QgTUFYX0lOVEVSQUNUSU9OU19UT19DT05TSURFUlxuICAgKiBsb25nLlxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBzZW50cnktaW50ZXJuYWwvc2RrL25vLWNsYXNzLWZpZWxkLWluaXRpYWxpemVycywgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG4gIF9faW5pdCgpIHtcbiAgICB0aGlzLl9sb25nZXN0SW50ZXJhY3Rpb25MaXN0ID0gW107XG4gIH1cblxuICAvKipcbiAgICogQSBtYXBwaW5nIG9mIGxvbmdlc3QgaW50ZXJhY3Rpb25zIGJ5IHRoZWlyIGludGVyYWN0aW9uIElELlxuICAgKiBUaGlzIGlzIHVzZWQgZm9yIGZhc3RlciBsb29rdXAuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHNlbnRyeS1pbnRlcm5hbC9zZGsvbm8tY2xhc3MtZmllbGQtaW5pdGlhbGl6ZXJzLCBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgX19pbml0MigpIHtcbiAgICB0aGlzLl9sb25nZXN0SW50ZXJhY3Rpb25NYXAgPSBuZXcgTWFwKCk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHksIGpzZG9jL3JlcXVpcmUtanNkb2NcbiAgX3Jlc2V0SW50ZXJhY3Rpb25zKCkge1xuICAgIHByZXZJbnRlcmFjdGlvbkNvdW50ID0gZ2V0SW50ZXJhY3Rpb25Db3VudCgpO1xuICAgIHRoaXMuX2xvbmdlc3RJbnRlcmFjdGlvbkxpc3QubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9sb25nZXN0SW50ZXJhY3Rpb25NYXAuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlc3RpbWF0ZWQgcDk4IGxvbmdlc3QgaW50ZXJhY3Rpb24gYmFzZWQgb24gdGhlIHN0b3JlZFxuICAgKiBpbnRlcmFjdGlvbiBjYW5kaWRhdGVzIGFuZCB0aGUgaW50ZXJhY3Rpb24gY291bnQgZm9yIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG4gIF9lc3RpbWF0ZVA5OExvbmdlc3RJbnRlcmFjdGlvbigpIHtcbiAgICBjb25zdCBjYW5kaWRhdGVJbnRlcmFjdGlvbkluZGV4ID0gTWF0aC5taW4odGhpcy5fbG9uZ2VzdEludGVyYWN0aW9uTGlzdC5sZW5ndGggLSAxLCBNYXRoLmZsb29yKGdldEludGVyYWN0aW9uQ291bnRGb3JOYXZpZ2F0aW9uKCkgLyA1MCkpO1xuICAgIHJldHVybiB0aGlzLl9sb25nZXN0SW50ZXJhY3Rpb25MaXN0W2NhbmRpZGF0ZUludGVyYWN0aW9uSW5kZXhdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgcGVyZm9ybWFuY2UgZW50cnkgYW5kIGFkZHMgaXQgdG8gdGhlIGxpc3Qgb2Ygd29yc3QgaW50ZXJhY3Rpb25zXG4gICAqIGlmIGl0cyBkdXJhdGlvbiBpcyBsb25nIGVub3VnaCB0byBtYWtlIGl0IGFtb25nIHRoZSB3b3JzdC4gSWYgdGhlXG4gICAqIGVudHJ5IGlzIHBhcnQgb2YgYW4gZXhpc3RpbmcgaW50ZXJhY3Rpb24sIGl0IGlzIG1lcmdlZCBhbmQgdGhlIGxhdGVuY3lcbiAgICogYW5kIGVudHJpZXMgbGlzdCBpcyB1cGRhdGVkIGFzIG5lZWRlZC5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgX3Byb2Nlc3NFbnRyeShlbnRyeSkge1xuICAgIHRoaXMuX29uQmVmb3JlUHJvY2Vzc2luZ0VudHJ5Py4oZW50cnkpO1xuXG4gICAgLy8gU2tpcCBmdXJ0aGVyIHByb2Nlc3NpbmcgZm9yIGVudHJpZXMgdGhhdCBjYW5ub3QgYmUgSU5QIGNhbmRpZGF0ZXMuXG4gICAgaWYgKCEoZW50cnkuaW50ZXJhY3Rpb25JZCB8fCBlbnRyeS5lbnRyeVR5cGUgPT09ICdmaXJzdC1pbnB1dCcpKSByZXR1cm47XG5cbiAgICAvLyBUaGUgbGVhc3QtbG9uZyBvZiB0aGUgMTAgbG9uZ2VzdCBpbnRlcmFjdGlvbnMuXG4gICAgY29uc3QgbWluTG9uZ2VzdEludGVyYWN0aW9uID0gdGhpcy5fbG9uZ2VzdEludGVyYWN0aW9uTGlzdC5hdCgtMSk7XG4gICAgbGV0IGludGVyYWN0aW9uID0gdGhpcy5fbG9uZ2VzdEludGVyYWN0aW9uTWFwLmdldChlbnRyeS5pbnRlcmFjdGlvbklkKTtcblxuICAgIC8vIE9ubHkgcHJvY2VzcyB0aGUgZW50cnkgaWYgaXQncyBwb3NzaWJseSBvbmUgb2YgdGhlIHRlbiBsb25nZXN0LFxuICAgIC8vIG9yIGlmIGl0J3MgcGFydCBvZiBhbiBleGlzdGluZyBpbnRlcmFjdGlvbi5cbiAgICBpZiAoaW50ZXJhY3Rpb24gfHwgdGhpcy5fbG9uZ2VzdEludGVyYWN0aW9uTGlzdC5sZW5ndGggPCBNQVhfSU5URVJBQ1RJT05TX1RPX0NPTlNJREVSIHx8XG4gICAgLy8gSWYgdGhlIGFib3ZlIGNvbmRpdGlvbnMgYXJlIGZhbHNlLCBgbWluTG9uZ2VzdEludGVyYWN0aW9uYCB3aWxsIGJlIHNldC5cbiAgICBlbnRyeS5kdXJhdGlvbiA+IG1pbkxvbmdlc3RJbnRlcmFjdGlvbi5fbGF0ZW5jeSkge1xuICAgICAgLy8gSWYgdGhlIGludGVyYWN0aW9uIGFscmVhZHkgZXhpc3RzLCB1cGRhdGUgaXQuIE90aGVyd2lzZSBjcmVhdGUgb25lLlxuICAgICAgaWYgKGludGVyYWN0aW9uKSB7XG4gICAgICAgIC8vIElmIHRoZSBuZXcgZW50cnkgaGFzIGEgbG9uZ2VyIGR1cmF0aW9uLCByZXBsYWNlIHRoZSBvbGQgZW50cmllcyxcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGFkZCB0byB0aGUgYXJyYXkuXG4gICAgICAgIGlmIChlbnRyeS5kdXJhdGlvbiA+IGludGVyYWN0aW9uLl9sYXRlbmN5KSB7XG4gICAgICAgICAgaW50ZXJhY3Rpb24uZW50cmllcyA9IFtlbnRyeV07XG4gICAgICAgICAgaW50ZXJhY3Rpb24uX2xhdGVuY3kgPSBlbnRyeS5kdXJhdGlvbjtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS5kdXJhdGlvbiA9PT0gaW50ZXJhY3Rpb24uX2xhdGVuY3kgJiYgZW50cnkuc3RhcnRUaW1lID09PSBpbnRlcmFjdGlvbi5lbnRyaWVzWzBdLnN0YXJ0VGltZSkge1xuICAgICAgICAgIGludGVyYWN0aW9uLmVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludGVyYWN0aW9uID0ge1xuICAgICAgICAgIGlkOiBlbnRyeS5pbnRlcmFjdGlvbklkLFxuICAgICAgICAgIGVudHJpZXM6IFtlbnRyeV0sXG4gICAgICAgICAgX2xhdGVuY3k6IGVudHJ5LmR1cmF0aW9uXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2xvbmdlc3RJbnRlcmFjdGlvbk1hcC5zZXQoaW50ZXJhY3Rpb24uaWQsIGludGVyYWN0aW9uKTtcbiAgICAgICAgdGhpcy5fbG9uZ2VzdEludGVyYWN0aW9uTGlzdC5wdXNoKGludGVyYWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gU29ydCB0aGUgZW50cmllcyBieSBsYXRlbmN5IChkZXNjZW5kaW5nKSBhbmQga2VlcCBvbmx5IHRoZSB0b3AgdGVuLlxuICAgICAgdGhpcy5fbG9uZ2VzdEludGVyYWN0aW9uTGlzdC5zb3J0KChhLCBiKSA9PiBiLl9sYXRlbmN5IC0gYS5fbGF0ZW5jeSk7XG4gICAgICBpZiAodGhpcy5fbG9uZ2VzdEludGVyYWN0aW9uTGlzdC5sZW5ndGggPiBNQVhfSU5URVJBQ1RJT05TX1RPX0NPTlNJREVSKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZWRJbnRlcmFjdGlvbnMgPSB0aGlzLl9sb25nZXN0SW50ZXJhY3Rpb25MaXN0LnNwbGljZShNQVhfSU5URVJBQ1RJT05TX1RPX0NPTlNJREVSKTtcbiAgICAgICAgZm9yIChjb25zdCBpbnRlcmFjdGlvbiBvZiByZW1vdmVkSW50ZXJhY3Rpb25zKSB7XG4gICAgICAgICAgdGhpcy5fbG9uZ2VzdEludGVyYWN0aW9uTWFwLmRlbGV0ZShpbnRlcmFjdGlvbi5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2FsbCBhbnkgcG9zdC1wcm9jZXNzaW5nIG9uIHRoZSBpbnRlcmFjdGlvblxuICAgICAgdGhpcy5fb25BZnRlclByb2Nlc3NpbmdJTlBDYW5kaWRhdGU/LihpbnRlcmFjdGlvbik7XG4gICAgfVxuICB9XG59XG5leHBvcnQgeyBJbnRlcmFjdGlvbk1hbmFnZXIgfTtcbiIsImltcG9ydCB7IFdJTkRPVyB9IGZyb20gJy4uLy4uLy4uL3R5cGVzLmpzJztcbmltcG9ydCB7IG9uSGlkZGVuIH0gZnJvbSAnLi9vbkhpZGRlbi5qcyc7XG5pbXBvcnQgeyBydW5PbmNlIH0gZnJvbSAnLi9ydW5PbmNlLmpzJztcblxuLypcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUnVucyB0aGUgcGFzc2VkIGNhbGxiYWNrIGR1cmluZyB0aGUgbmV4dCBpZGxlIHBlcmlvZCwgb3IgaW1tZWRpYXRlbHlcbiAqIGlmIHRoZSBicm93c2VyJ3MgdmlzaWJpbGl0eSBzdGF0ZSBpcyAob3IgYmVjb21lcykgaGlkZGVuLlxuICovXG5jb25zdCB3aGVuSWRsZU9ySGlkZGVuID0gY2IgPT4ge1xuICBjb25zdCBySUMgPSBXSU5ET1cucmVxdWVzdElkbGVDYWxsYmFjayB8fCBXSU5ET1cuc2V0VGltZW91dDtcblxuICAvLyBJZiB0aGUgZG9jdW1lbnQgaXMgaGlkZGVuLCBydW4gdGhlIGNhbGxiYWNrIGltbWVkaWF0ZWx5LCBvdGhlcndpc2VcbiAgLy8gcmFjZSBhbiBpZGxlIGNhbGxiYWNrIHdpdGggdGhlIG5leHQgYHZpc2liaWxpdHljaGFuZ2VgIGV2ZW50LlxuICBpZiAoV0lORE9XLmRvY3VtZW50Py52aXNpYmlsaXR5U3RhdGUgPT09ICdoaWRkZW4nKSB7XG4gICAgY2IoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBjYiA9IHJ1bk9uY2UoY2IpO1xuICAgIHJJQyhjYik7XG4gICAgLy8gc2VudHJ5OiB3ZSB1c2Ugb25IaWRkZW4gaW5zdGVhZCBvZiBkaXJlY3RseSBsaXN0ZW5pbmcgdG8gdmlzaWJpbGl0eWNoYW5nZVxuICAgIC8vIGJlY2F1c2Ugc29tZSBicm93c2VycyB3ZSBzdGlsbCBzdXBwb3J0IChTYWZhcmkgPDE0LjQpIGRvbid0IGZ1bGx5IHN1cHBvcnRcbiAgICAvLyBgdmlzaWJpbGl0eWNoYW5nZWAgb3IgaGF2ZSBrbm93biBidWdzIHcuci50IHRoZSBgdmlzaWJpbGl0eWNoYW5nZWAgZXZlbnQuXG4gICAgb25IaWRkZW4oY2IpO1xuICB9XG59O1xuZXhwb3J0IHsgd2hlbklkbGVPckhpZGRlbiB9O1xuIiwiaW1wb3J0IHsgYmluZFJlcG9ydGVyIH0gZnJvbSAnLi9saWIvYmluZFJlcG9ydGVyLmpzJztcbmltcG9ydCB7IGluaXRNZXRyaWMgfSBmcm9tICcuL2xpYi9pbml0TWV0cmljLmpzJztcbmltcG9ydCB7IGluaXRVbmlxdWUgfSBmcm9tICcuL2xpYi9pbml0VW5pcXVlLmpzJztcbmltcG9ydCB7IEludGVyYWN0aW9uTWFuYWdlciB9IGZyb20gJy4vbGliL0ludGVyYWN0aW9uTWFuYWdlci5qcyc7XG5pbXBvcnQgeyBvYnNlcnZlIH0gZnJvbSAnLi9saWIvb2JzZXJ2ZS5qcyc7XG5pbXBvcnQgeyBvbkhpZGRlbiB9IGZyb20gJy4vbGliL29uSGlkZGVuLmpzJztcbmltcG9ydCB7IGluaXRJbnRlcmFjdGlvbkNvdW50UG9seWZpbGwgfSBmcm9tICcuL2xpYi9wb2x5ZmlsbHMvaW50ZXJhY3Rpb25Db3VudFBvbHlmaWxsLmpzJztcbmltcG9ydCB7IHdoZW5BY3RpdmF0ZWQgfSBmcm9tICcuL2xpYi93aGVuQWN0aXZhdGVkLmpzJztcbmltcG9ydCB7IHdoZW5JZGxlT3JIaWRkZW4gfSBmcm9tICcuL2xpYi93aGVuSWRsZU9ySGlkZGVuLmpzJztcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBUaHJlc2hvbGRzIGZvciBJTlAuIFNlZSBodHRwczovL3dlYi5kZXYvYXJ0aWNsZXMvaW5wI3doYXRfaXNfYV9nb29kX2lucF9zY29yZSAqL1xuY29uc3QgSU5QVGhyZXNob2xkcyA9IFsyMDAsIDUwMF07XG5cbi8vIFRoZSBkZWZhdWx0IGBkdXJhdGlvblRocmVzaG9sZGAgdXNlZCBhY3Jvc3MgdGhpcyBsaWJyYXJ5IGZvciBvYnNlcnZpbmdcbi8vIGBldmVudGAgZW50cmllcyB2aWEgUGVyZm9ybWFuY2VPYnNlcnZlci5cbmNvbnN0IERFRkFVTFRfRFVSQVRJT05fVEhSRVNIT0xEID0gNDA7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgW0lOUF0oaHR0cHM6Ly93ZWIuZGV2L2FydGljbGVzL2lucCkgdmFsdWUgZm9yIHRoZSBjdXJyZW50XG4gKiBwYWdlIGFuZCBjYWxscyB0aGUgYGNhbGxiYWNrYCBmdW5jdGlvbiBvbmNlIHRoZSB2YWx1ZSBpcyByZWFkeSwgYWxvbmcgd2l0aFxuICogdGhlIGBldmVudGAgcGVyZm9ybWFuY2UgZW50cmllcyByZXBvcnRlZCBmb3IgdGhhdCBpbnRlcmFjdGlvbi4gVGhlIHJlcG9ydGVkXG4gKiB2YWx1ZSBpcyBhIGBET01IaWdoUmVzVGltZVN0YW1wYC5cbiAqXG4gKiBBIGN1c3RvbSBgZHVyYXRpb25UaHJlc2hvbGRgIGNvbmZpZ3VyYXRpb24gb3B0aW9uIGNhbiBvcHRpb25hbGx5IGJlIHBhc3NlZFxuICogdG8gY29udHJvbCB3aGF0IGBldmVudC10aW1pbmdgIGVudHJpZXMgYXJlIGNvbnNpZGVyZWQgZm9yIElOUCByZXBvcnRpbmcuIFRoZVxuICogZGVmYXVsdCB0aHJlc2hvbGQgaXMgYDQwYCwgd2hpY2ggbWVhbnMgSU5QIHNjb3JlcyBvZiBsZXNzIHRoYW4gNDAgd2lsbCBub3RcbiAqIGJlIHJlcG9ydGVkLiBUbyBhdm9pZCByZXBvcnRpbmcgbm8gaW50ZXJhY3Rpb25zIGluIHRoZXNlIGNhc2VzLCB0aGUgbGlicmFyeVxuICogd2lsbCBmYWxsIGJhY2sgdG8gdGhlIGlucHV0IGRlbGF5IG9mIHRoZSBmaXJzdCBpbnRlcmFjdGlvbi4gTm90ZSB0aGF0IHRoaXNcbiAqIHdpbGwgbm90IGFmZmVjdCB5b3VyIDc1dGggcGVyY2VudGlsZSBJTlAgdmFsdWUgdW5sZXNzIHRoYXQgdmFsdWUgaXMgYWxzb1xuICogbGVzcyB0aGFuIDQwICh3ZWxsIGJlbG93IHRoZSByZWNvbW1lbmRlZFxuICogW2dvb2RdKGh0dHBzOi8vd2ViLmRldi9hcnRpY2xlcy9pbnAjd2hhdF9pc19hX2dvb2RfaW5wX3Njb3JlKSB0aHJlc2hvbGQpLlxuICpcbiAqIElmIHRoZSBgcmVwb3J0QWxsQ2hhbmdlc2AgY29uZmlndXJhdGlvbiBvcHRpb24gaXMgc2V0IHRvIGB0cnVlYCwgdGhlXG4gKiBgY2FsbGJhY2tgIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFzIHNvb24gYXMgdGhlIHZhbHVlIGlzIGluaXRpYWxseVxuICogZGV0ZXJtaW5lZCBhcyB3ZWxsIGFzIGFueSB0aW1lIHRoZSB2YWx1ZSBjaGFuZ2VzIHRocm91Z2hvdXQgdGhlIHBhZ2VcbiAqIGxpZmVzcGFuLlxuICpcbiAqIF8qKkltcG9ydGFudDoqKiBJTlAgc2hvdWxkIGJlIGNvbnRpbnVhbGx5IG1vbml0b3JlZCBmb3IgY2hhbmdlcyB0aHJvdWdob3V0XG4gKiB0aGUgZW50aXJlIGxpZmVzcGFuIG9mIGEgcGFnZeKAlGluY2x1ZGluZyBpZiB0aGUgdXNlciByZXR1cm5zIHRvIHRoZSBwYWdlIGFmdGVyXG4gKiBpdCdzIGJlZW4gaGlkZGVuL2JhY2tncm91bmRlZC4gSG93ZXZlciwgc2luY2UgYnJvd3NlcnMgb2Z0ZW4gW3dpbGwgbm90IGZpcmVcbiAqIGFkZGl0aW9uYWwgY2FsbGJhY2tzIG9uY2UgdGhlIHVzZXIgaGFzIGJhY2tncm91bmRlZCBhXG4gKiBwYWdlXShodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2Jsb2cvcGFnZS1saWZlY3ljbGUtYXBpLyNhZHZpY2UtaGlkZGVuKSxcbiAqIGBjYWxsYmFja2AgaXMgYWx3YXlzIGNhbGxlZCB3aGVuIHRoZSBwYWdlJ3MgdmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VzIHRvXG4gKiBoaWRkZW4uIEFzIGEgcmVzdWx0LCB0aGUgYGNhbGxiYWNrYCBmdW5jdGlvbiBtaWdodCBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXNcbiAqIGR1cmluZyB0aGUgc2FtZSBwYWdlIGxvYWQuX1xuICovXG5jb25zdCBvbklOUCA9IChvblJlcG9ydCwgb3B0cyA9IHt9KSA9PiB7XG4gIC8vIFJldHVybiBpZiB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgYWxsIEFQSXMgbmVlZGVkIHRvIG1lYXN1cmUgSU5QLlxuICBpZiAoIShnbG9iYWxUaGlzLlBlcmZvcm1hbmNlRXZlbnRUaW1pbmcgJiYgJ2ludGVyYWN0aW9uSWQnIGluIFBlcmZvcm1hbmNlRXZlbnRUaW1pbmcucHJvdG90eXBlKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB3aGVuQWN0aXZhdGVkKCgpID0+IHtcbiAgICAvLyBUT0RPKHBoaWxpcHdhbHRvbik6IHJlbW92ZSBvbmNlIHRoZSBwb2x5ZmlsbCBpcyBubyBsb25nZXIgbmVlZGVkLlxuICAgIGluaXRJbnRlcmFjdGlvbkNvdW50UG9seWZpbGwoKTtcbiAgICBjb25zdCBtZXRyaWMgPSBpbml0TWV0cmljKCdJTlAnKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgbGV0IHJlcG9ydDtcbiAgICBjb25zdCBpbnRlcmFjdGlvbk1hbmFnZXIgPSBpbml0VW5pcXVlKG9wdHMsIEludGVyYWN0aW9uTWFuYWdlcik7XG4gICAgY29uc3QgaGFuZGxlRW50cmllcyA9IGVudHJpZXMgPT4ge1xuICAgICAgLy8gUXVldWUgdGhlIGBoYW5kbGVFbnRyaWVzKClgIGNhbGxiYWNrIGluIHRoZSBuZXh0IGlkbGUgdGFzay5cbiAgICAgIC8vIFRoaXMgaXMgbmVlZGVkIHRvIGluY3JlYXNlIHRoZSBjaGFuY2VzIHRoYXQgYWxsIGV2ZW50IGVudHJpZXMgdGhhdFxuICAgICAgLy8gb2NjdXJyZWQgYmV0d2VlbiB0aGUgdXNlciBpbnRlcmFjdGlvbiBhbmQgdGhlIG5leHQgcGFpbnRcbiAgICAgIC8vIGhhdmUgYmVlbiBkaXNwYXRjaGVkLiBOb3RlOiB0aGVyZSBpcyBjdXJyZW50bHkgYW4gZXhwZXJpbWVudFxuICAgICAgLy8gcnVubmluZyBpbiBDaHJvbWUgKEV2ZW50VGltaW5nS2V5cHJlc3NBbmRDb21wb3NpdGlvbkludGVyYWN0aW9uSWQpXG4gICAgICAvLyAxMjMrIHRoYXQgaWYgcm9sbGVkIG91dCBmdWxseSBtYXkgbWFrZSB0aGlzIG5vIGxvbmdlciBuZWNlc3NhcnkuXG4gICAgICB3aGVuSWRsZU9ySGlkZGVuKCgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgaW50ZXJhY3Rpb25NYW5hZ2VyLl9wcm9jZXNzRW50cnkoZW50cnkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlucCA9IGludGVyYWN0aW9uTWFuYWdlci5fZXN0aW1hdGVQOThMb25nZXN0SW50ZXJhY3Rpb24oKTtcbiAgICAgICAgaWYgKGlucCAmJiBpbnAuX2xhdGVuY3kgIT09IG1ldHJpYy52YWx1ZSkge1xuICAgICAgICAgIG1ldHJpYy52YWx1ZSA9IGlucC5fbGF0ZW5jeTtcbiAgICAgICAgICBtZXRyaWMuZW50cmllcyA9IGlucC5lbnRyaWVzO1xuICAgICAgICAgIHJlcG9ydCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHBvID0gb2JzZXJ2ZSgnZXZlbnQnLCBoYW5kbGVFbnRyaWVzLCB7XG4gICAgICAvLyBFdmVudCBUaW1pbmcgZW50cmllcyBoYXZlIHRoZWlyIGR1cmF0aW9ucyByb3VuZGVkIHRvIHRoZSBuZWFyZXN0IDhtcyxcbiAgICAgIC8vIHNvIGEgZHVyYXRpb24gb2YgNDBtcyB3b3VsZCBiZSBhbnkgZXZlbnQgdGhhdCBzcGFucyAyLjUgb3IgbW9yZSBmcmFtZXNcbiAgICAgIC8vIGF0IDYwSHouIFRoaXMgdGhyZXNob2xkIGlzIGNob3NlbiB0byBzdHJpa2UgYSBiYWxhbmNlIGJldHdlZW4gdXNlZnVsbmVzc1xuICAgICAgLy8gYW5kIHBlcmZvcm1hbmNlLiBSdW5uaW5nIHRoaXMgY2FsbGJhY2sgZm9yIGFueSBpbnRlcmFjdGlvbiB0aGF0IHNwYW5zXG4gICAgICAvLyBqdXN0IG9uZSBvciB0d28gZnJhbWVzIGlzIGxpa2VseSBub3Qgd29ydGggdGhlIGluc2lnaHQgdGhhdCBjb3VsZCBiZVxuICAgICAgLy8gZ2FpbmVkLlxuICAgICAgZHVyYXRpb25UaHJlc2hvbGQ6IG9wdHMuZHVyYXRpb25UaHJlc2hvbGQgPz8gREVGQVVMVF9EVVJBVElPTl9USFJFU0hPTERcbiAgICB9KTtcbiAgICByZXBvcnQgPSBiaW5kUmVwb3J0ZXIob25SZXBvcnQsIG1ldHJpYywgSU5QVGhyZXNob2xkcywgb3B0cy5yZXBvcnRBbGxDaGFuZ2VzKTtcbiAgICBpZiAocG8pIHtcbiAgICAgIC8vIEFsc28gb2JzZXJ2ZSBlbnRyaWVzIG9mIHR5cGUgYGZpcnN0LWlucHV0YC4gVGhpcyBpcyB1c2VmdWwgaW4gY2FzZXNcbiAgICAgIC8vIHdoZXJlIHRoZSBmaXJzdCBpbnRlcmFjdGlvbiBpcyBsZXNzIHRoYW4gdGhlIGBkdXJhdGlvblRocmVzaG9sZGAuXG4gICAgICBwby5vYnNlcnZlKHtcbiAgICAgICAgdHlwZTogJ2ZpcnN0LWlucHV0JyxcbiAgICAgICAgYnVmZmVyZWQ6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICAvLyBzZW50cnk6IHdlIHVzZSBvbkhpZGRlbiBpbnN0ZWFkIG9mIGRpcmVjdGx5IGxpc3RlbmluZyB0byB2aXNpYmlsaXR5Y2hhbmdlXG4gICAgICAvLyBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgd2Ugc3RpbGwgc3VwcG9ydCAoU2FmYXJpIDwxNC40KSBkb24ndCBmdWxseSBzdXBwb3J0XG4gICAgICAvLyBgdmlzaWJpbGl0eWNoYW5nZWAgb3IgaGF2ZSBrbm93biBidWdzIHcuci50IHRoZSBgdmlzaWJpbGl0eWNoYW5nZWAgZXZlbnQuXG4gICAgICBvbkhpZGRlbigoKSA9PiB7XG4gICAgICAgIGhhbmRsZUVudHJpZXMocG8udGFrZVJlY29yZHMoKSk7XG4gICAgICAgIHJlcG9ydCh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuZXhwb3J0IHsgSU5QVGhyZXNob2xkcywgb25JTlAgfTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUganNkb2MvcmVxdWlyZS1qc2RvY1xuY2xhc3MgTENQRW50cnlNYW5hZ2VyIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHksIGpzZG9jL3JlcXVpcmUtanNkb2NcbiAgX3Byb2Nlc3NFbnRyeShlbnRyeSkge1xuICAgIHRoaXMuX29uQmVmb3JlUHJvY2Vzc2luZ0VudHJ5Py4oZW50cnkpO1xuICB9XG59XG5leHBvcnQgeyBMQ1BFbnRyeU1hbmFnZXIgfTtcbiIsImltcG9ydCB7IFdJTkRPVyB9IGZyb20gJy4uLy4uL3R5cGVzLmpzJztcbmltcG9ydCB7IGJpbmRSZXBvcnRlciB9IGZyb20gJy4vbGliL2JpbmRSZXBvcnRlci5qcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmF0aW9uU3RhcnQgfSBmcm9tICcuL2xpYi9nZXRBY3RpdmF0aW9uU3RhcnQuanMnO1xuaW1wb3J0IHsgZ2V0VmlzaWJpbGl0eVdhdGNoZXIgfSBmcm9tICcuL2xpYi9nZXRWaXNpYmlsaXR5V2F0Y2hlci5qcyc7XG5pbXBvcnQgeyBpbml0TWV0cmljIH0gZnJvbSAnLi9saWIvaW5pdE1ldHJpYy5qcyc7XG5pbXBvcnQgeyBpbml0VW5pcXVlIH0gZnJvbSAnLi9saWIvaW5pdFVuaXF1ZS5qcyc7XG5pbXBvcnQgeyBMQ1BFbnRyeU1hbmFnZXIgfSBmcm9tICcuL2xpYi9MQ1BFbnRyeU1hbmFnZXIuanMnO1xuaW1wb3J0IHsgb2JzZXJ2ZSB9IGZyb20gJy4vbGliL29ic2VydmUuanMnO1xuaW1wb3J0IHsgcnVuT25jZSB9IGZyb20gJy4vbGliL3J1bk9uY2UuanMnO1xuaW1wb3J0IHsgd2hlbkFjdGl2YXRlZCB9IGZyb20gJy4vbGliL3doZW5BY3RpdmF0ZWQuanMnO1xuaW1wb3J0IHsgd2hlbklkbGVPckhpZGRlbiB9IGZyb20gJy4vbGliL3doZW5JZGxlT3JIaWRkZW4uanMnO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIFRocmVzaG9sZHMgZm9yIExDUC4gU2VlIGh0dHBzOi8vd2ViLmRldi9hcnRpY2xlcy9sY3Ajd2hhdF9pc19hX2dvb2RfbGNwX3Njb3JlICovXG5jb25zdCBMQ1BUaHJlc2hvbGRzID0gWzI1MDAsIDQwMDBdO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIFtMQ1BdKGh0dHBzOi8vd2ViLmRldi9hcnRpY2xlcy9sY3ApIHZhbHVlIGZvciB0aGUgY3VycmVudCBwYWdlIGFuZFxuICogY2FsbHMgdGhlIGBjYWxsYmFja2AgZnVuY3Rpb24gb25jZSB0aGUgdmFsdWUgaXMgcmVhZHkgKGFsb25nIHdpdGggdGhlXG4gKiByZWxldmFudCBgbGFyZ2VzdC1jb250ZW50ZnVsLXBhaW50YCBwZXJmb3JtYW5jZSBlbnRyeSB1c2VkIHRvIGRldGVybWluZSB0aGVcbiAqIHZhbHVlKS4gVGhlIHJlcG9ydGVkIHZhbHVlIGlzIGEgYERPTUhpZ2hSZXNUaW1lU3RhbXBgLlxuICpcbiAqIElmIHRoZSBgcmVwb3J0QWxsQ2hhbmdlc2AgY29uZmlndXJhdGlvbiBvcHRpb24gaXMgc2V0IHRvIGB0cnVlYCwgdGhlXG4gKiBgY2FsbGJhY2tgIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFueSB0aW1lIGEgbmV3IGBsYXJnZXN0LWNvbnRlbnRmdWwtcGFpbnRgXG4gKiBwZXJmb3JtYW5jZSBlbnRyeSBpcyBkaXNwYXRjaGVkLCBvciBvbmNlIHRoZSBmaW5hbCB2YWx1ZSBvZiB0aGUgbWV0cmljIGhhc1xuICogYmVlbiBkZXRlcm1pbmVkLlxuICovXG5jb25zdCBvbkxDUCA9IChvblJlcG9ydCwgb3B0cyA9IHt9KSA9PiB7XG4gIHdoZW5BY3RpdmF0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IHZpc2liaWxpdHlXYXRjaGVyID0gZ2V0VmlzaWJpbGl0eVdhdGNoZXIoKTtcbiAgICBjb25zdCBtZXRyaWMgPSBpbml0TWV0cmljKCdMQ1AnKTtcbiAgICBsZXQgcmVwb3J0O1xuICAgIGNvbnN0IGxjcEVudHJ5TWFuYWdlciA9IGluaXRVbmlxdWUob3B0cywgTENQRW50cnlNYW5hZ2VyKTtcbiAgICBjb25zdCBoYW5kbGVFbnRyaWVzID0gZW50cmllcyA9PiB7XG4gICAgICAvLyBJZiByZXBvcnRBbGxDaGFuZ2VzIGlzIHNldCB0aGVuIGNhbGwgdGhpcyBmdW5jdGlvbiBmb3IgZWFjaCBlbnRyeSxcbiAgICAgIC8vIG90aGVyd2lzZSBvbmx5IGNvbnNpZGVyIHRoZSBsYXN0IG9uZS5cbiAgICAgIGlmICghb3B0cy5yZXBvcnRBbGxDaGFuZ2VzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBlbnRyaWVzID0gZW50cmllcy5zbGljZSgtMSk7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgbGNwRW50cnlNYW5hZ2VyLl9wcm9jZXNzRW50cnkoZW50cnkpO1xuXG4gICAgICAgIC8vIE9ubHkgcmVwb3J0IGlmIHRoZSBwYWdlIHdhc24ndCBoaWRkZW4gcHJpb3IgdG8gTENQLlxuICAgICAgICBpZiAoZW50cnkuc3RhcnRUaW1lIDwgdmlzaWJpbGl0eVdhdGNoZXIuZmlyc3RIaWRkZW5UaW1lKSB7XG4gICAgICAgICAgLy8gVGhlIHN0YXJ0VGltZSBhdHRyaWJ1dGUgcmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIHJlbmRlclRpbWUgaWYgaXQgaXNcbiAgICAgICAgICAvLyBub3QgMCwgYW5kIHRoZSB2YWx1ZSBvZiB0aGUgbG9hZFRpbWUgb3RoZXJ3aXNlLiBUaGUgYWN0aXZhdGlvblN0YXJ0XG4gICAgICAgICAgLy8gcmVmZXJlbmNlIGlzIHVzZWQgYmVjYXVzZSBMQ1Agc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHBhZ2UgYWN0aXZhdGlvblxuICAgICAgICAgIC8vIHJhdGhlciB0aGFuIG5hdmlnYXRpb24gc3RhcnQgaWYgdGhlIHBhZ2Ugd2FzIHByZXJlbmRlcmVkLiBCdXQgaW4gY2FzZXNcbiAgICAgICAgICAvLyB3aGVyZSBgYWN0aXZhdGlvblN0YXJ0YCBvY2N1cnMgYWZ0ZXIgdGhlIExDUCwgdGhpcyB0aW1lIHNob3VsZCBiZVxuICAgICAgICAgIC8vIGNsYW1wZWQgYXQgMC5cbiAgICAgICAgICBtZXRyaWMudmFsdWUgPSBNYXRoLm1heChlbnRyeS5zdGFydFRpbWUgLSBnZXRBY3RpdmF0aW9uU3RhcnQoKSwgMCk7XG4gICAgICAgICAgbWV0cmljLmVudHJpZXMgPSBbZW50cnldO1xuICAgICAgICAgIHJlcG9ydCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwbyA9IG9ic2VydmUoJ2xhcmdlc3QtY29udGVudGZ1bC1wYWludCcsIGhhbmRsZUVudHJpZXMpO1xuICAgIGlmIChwbykge1xuICAgICAgcmVwb3J0ID0gYmluZFJlcG9ydGVyKG9uUmVwb3J0LCBtZXRyaWMsIExDUFRocmVzaG9sZHMsIG9wdHMucmVwb3J0QWxsQ2hhbmdlcyk7XG5cbiAgICAgIC8vIEVuc3VyZSB0aGlzIGxvZ2ljIG9ubHkgcnVucyBvbmNlLCBzaW5jZSBpdCBjYW4gYmUgdHJpZ2dlcmVkIGZyb21cbiAgICAgIC8vIGFueSBvZiB0aHJlZSBkaWZmZXJlbnQgZXZlbnQgbGlzdGVuZXJzIGJlbG93LlxuICAgICAgY29uc3Qgc3RvcExpc3RlbmluZyA9IHJ1bk9uY2UoKCkgPT4ge1xuICAgICAgICBoYW5kbGVFbnRyaWVzKHBvLnRha2VSZWNvcmRzKCkpO1xuICAgICAgICBwby5kaXNjb25uZWN0KCk7XG4gICAgICAgIHJlcG9ydCh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdG9wIGxpc3RlbmluZyBhZnRlciBpbnB1dCBvciB2aXNpYmlsaXR5Y2hhbmdlLlxuICAgICAgLy8gTm90ZTogd2hpbGUgc2Nyb2xsaW5nIGlzIGFuIGlucHV0IHRoYXQgc3RvcHMgTENQIG9ic2VydmF0aW9uLCBpdCdzXG4gICAgICAvLyB1bnJlbGlhYmxlIHNpbmNlIGl0IGNhbiBiZSBwcm9ncmFtbWF0aWNhbGx5IGdlbmVyYXRlZC5cbiAgICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS93ZWItdml0YWxzL2lzc3Vlcy83NVxuICAgICAgZm9yIChjb25zdCB0eXBlIG9mIFsna2V5ZG93bicsICdjbGljaycsICd2aXNpYmlsaXR5Y2hhbmdlJ10pIHtcbiAgICAgICAgLy8gV3JhcCB0aGUgbGlzdGVuZXIgaW4gYW4gaWRsZSBjYWxsYmFjayBzbyBpdCdzIHJ1biBpbiBhIHNlcGFyYXRlXG4gICAgICAgIC8vIHRhc2sgdG8gcmVkdWNlIHBvdGVudGlhbCBJTlAgaW1wYWN0LlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL3dlYi12aXRhbHMvaXNzdWVzLzM4M1xuICAgICAgICBpZiAoV0lORE9XLmRvY3VtZW50KSB7XG4gICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCAoKSA9PiB3aGVuSWRsZU9ySGlkZGVuKHN0b3BMaXN0ZW5pbmcpLCB7XG4gICAgICAgICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgICAgICAgb25jZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5leHBvcnQgeyBMQ1BUaHJlc2hvbGRzLCBvbkxDUCB9O1xuIiwiaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vLi4vdHlwZXMuanMnO1xuaW1wb3J0IHsgYmluZFJlcG9ydGVyIH0gZnJvbSAnLi9saWIvYmluZFJlcG9ydGVyLmpzJztcbmltcG9ydCB7IGdldEFjdGl2YXRpb25TdGFydCB9IGZyb20gJy4vbGliL2dldEFjdGl2YXRpb25TdGFydC5qcyc7XG5pbXBvcnQgeyBnZXROYXZpZ2F0aW9uRW50cnkgfSBmcm9tICcuL2xpYi9nZXROYXZpZ2F0aW9uRW50cnkuanMnO1xuaW1wb3J0IHsgaW5pdE1ldHJpYyB9IGZyb20gJy4vbGliL2luaXRNZXRyaWMuanMnO1xuaW1wb3J0IHsgd2hlbkFjdGl2YXRlZCB9IGZyb20gJy4vbGliL3doZW5BY3RpdmF0ZWQuanMnO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIFRocmVzaG9sZHMgZm9yIFRURkIuIFNlZSBodHRwczovL3dlYi5kZXYvYXJ0aWNsZXMvdHRmYiN3aGF0X2lzX2FfZ29vZF90dGZiX3Njb3JlICovXG5jb25zdCBUVEZCVGhyZXNob2xkcyA9IFs4MDAsIDE4MDBdO1xuXG4vKipcbiAqIFJ1bnMgaW4gdGhlIG5leHQgdGFzayBhZnRlciB0aGUgcGFnZSBpcyBkb25lIGxvYWRpbmcgYW5kL29yIHByZXJlbmRlcmluZy5cbiAqIEBwYXJhbSBjYWxsYmFja1xuICovXG5jb25zdCB3aGVuUmVhZHkgPSBjYWxsYmFjayA9PiB7XG4gIGlmIChXSU5ET1cuZG9jdW1lbnQ/LnByZXJlbmRlcmluZykge1xuICAgIHdoZW5BY3RpdmF0ZWQoKCkgPT4gd2hlblJlYWR5KGNhbGxiYWNrKSk7XG4gIH0gZWxzZSBpZiAoV0lORE9XLmRvY3VtZW50Py5yZWFkeVN0YXRlICE9PSAnY29tcGxldGUnKSB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHdoZW5SZWFkeShjYWxsYmFjayksIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIC8vIFF1ZXVlIGEgdGFzayBzbyB0aGUgY2FsbGJhY2sgcnVucyBhZnRlciBgbG9hZEV2ZW50RW5kYC5cbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBbVFRGQl0oaHR0cHM6Ly93ZWIuZGV2L2FydGljbGVzL3R0ZmIpIHZhbHVlIGZvciB0aGVcbiAqIGN1cnJlbnQgcGFnZSBhbmQgY2FsbHMgdGhlIGBjYWxsYmFja2AgZnVuY3Rpb24gb25jZSB0aGUgcGFnZSBoYXMgbG9hZGVkLFxuICogYWxvbmcgd2l0aCB0aGUgcmVsZXZhbnQgYG5hdmlnYXRpb25gIHBlcmZvcm1hbmNlIGVudHJ5IHVzZWQgdG8gZGV0ZXJtaW5lIHRoZVxuICogdmFsdWUuIFRoZSByZXBvcnRlZCB2YWx1ZSBpcyBhIGBET01IaWdoUmVzVGltZVN0YW1wYC5cbiAqXG4gKiBOb3RlLCB0aGlzIGZ1bmN0aW9uIHdhaXRzIHVudGlsIGFmdGVyIHRoZSBwYWdlIGlzIGxvYWRlZCB0byBjYWxsIGBjYWxsYmFja2BcbiAqIGluIG9yZGVyIHRvIGVuc3VyZSBhbGwgcHJvcGVydGllcyBvZiB0aGUgYG5hdmlnYXRpb25gIGVudHJ5IGFyZSBwb3B1bGF0ZWQuXG4gKiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byByZXBvcnQgb24gb3RoZXIgbWV0cmljcyBleHBvc2VkIGJ5IHRoZVxuICogW05hdmlnYXRpb24gVGltaW5nIEFQSV0oaHR0cHM6Ly93M2MuZ2l0aHViLmlvL25hdmlnYXRpb24tdGltaW5nLykuIEZvclxuICogZXhhbXBsZSwgdGhlIFRURkIgbWV0cmljIHN0YXJ0cyBmcm9tIHRoZSBwYWdlJ3MgW3RpbWVcbiAqIG9yaWdpbl0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2hyLXRpbWUtMi8jc2VjLXRpbWUtb3JpZ2luKSwgd2hpY2ggbWVhbnMgaXRcbiAqIGluY2x1ZGVzIHRpbWUgc3BlbnQgb24gRE5TIGxvb2t1cCwgY29ubmVjdGlvbiBuZWdvdGlhdGlvbiwgbmV0d29yayBsYXRlbmN5LFxuICogYW5kIHNlcnZlciBwcm9jZXNzaW5nIHRpbWUuXG4gKi9cbmNvbnN0IG9uVFRGQiA9IChvblJlcG9ydCwgb3B0cyA9IHt9KSA9PiB7XG4gIGNvbnN0IG1ldHJpYyA9IGluaXRNZXRyaWMoJ1RURkInKTtcbiAgY29uc3QgcmVwb3J0ID0gYmluZFJlcG9ydGVyKG9uUmVwb3J0LCBtZXRyaWMsIFRURkJUaHJlc2hvbGRzLCBvcHRzLnJlcG9ydEFsbENoYW5nZXMpO1xuICB3aGVuUmVhZHkoKCkgPT4ge1xuICAgIGNvbnN0IG5hdmlnYXRpb25FbnRyeSA9IGdldE5hdmlnYXRpb25FbnRyeSgpO1xuICAgIGlmIChuYXZpZ2F0aW9uRW50cnkpIHtcbiAgICAgIC8vIFRoZSBhY3RpdmF0aW9uU3RhcnQgcmVmZXJlbmNlIGlzIHVzZWQgYmVjYXVzZSBUVEZCIHNob3VsZCBiZVxuICAgICAgLy8gcmVsYXRpdmUgdG8gcGFnZSBhY3RpdmF0aW9uIHJhdGhlciB0aGFuIG5hdmlnYXRpb24gc3RhcnQgaWYgdGhlXG4gICAgICAvLyBwYWdlIHdhcyBwcmVyZW5kZXJlZC4gQnV0IGluIGNhc2VzIHdoZXJlIGBhY3RpdmF0aW9uU3RhcnRgIG9jY3Vyc1xuICAgICAgLy8gYWZ0ZXIgdGhlIGZpcnN0IGJ5dGUgaXMgcmVjZWl2ZWQsIHRoaXMgdGltZSBzaG91bGQgYmUgY2xhbXBlZCBhdCAwLlxuICAgICAgbWV0cmljLnZhbHVlID0gTWF0aC5tYXgobmF2aWdhdGlvbkVudHJ5LnJlc3BvbnNlU3RhcnQgLSBnZXRBY3RpdmF0aW9uU3RhcnQoKSwgMCk7XG4gICAgICBtZXRyaWMuZW50cmllcyA9IFtuYXZpZ2F0aW9uRW50cnldO1xuICAgICAgcmVwb3J0KHRydWUpO1xuICAgIH1cbiAgfSk7XG59O1xuZXhwb3J0IHsgVFRGQlRocmVzaG9sZHMsIG9uVFRGQiB9O1xuIiwiaW1wb3J0IHsgbG9nZ2VyLCBnZXRGdW5jdGlvbk5hbWUgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBvbkNMUyB9IGZyb20gJy4vd2ViLXZpdGFscy9nZXRDTFMuanMnO1xuaW1wb3J0IHsgb25GSUQgfSBmcm9tICcuL3dlYi12aXRhbHMvZ2V0RklELmpzJztcbmltcG9ydCB7IG9uSU5QIH0gZnJvbSAnLi93ZWItdml0YWxzL2dldElOUC5qcyc7XG5pbXBvcnQgeyBvbkxDUCB9IGZyb20gJy4vd2ViLXZpdGFscy9nZXRMQ1AuanMnO1xuaW1wb3J0IHsgb2JzZXJ2ZSB9IGZyb20gJy4vd2ViLXZpdGFscy9saWIvb2JzZXJ2ZS5qcyc7XG5pbXBvcnQgeyBvblRURkIgfSBmcm9tICcuL3dlYi12aXRhbHMvb25UVEZCLmpzJztcbmNvbnN0IGhhbmRsZXJzID0ge307XG5jb25zdCBpbnN0cnVtZW50ZWQgPSB7fTtcbmxldCBfcHJldmlvdXNDbHM7XG5sZXQgX3ByZXZpb3VzRmlkO1xubGV0IF9wcmV2aW91c0xjcDtcbmxldCBfcHJldmlvdXNUdGZiO1xubGV0IF9wcmV2aW91c0lucDtcblxuLyoqXG4gKiBBZGQgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgdHJpZ2dlcmVkIHdoZW4gYSBDTFMgbWV0cmljIGlzIGF2YWlsYWJsZS5cbiAqIFJldHVybnMgYSBjbGVhbnVwIGNhbGxiYWNrIHdoaWNoIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSBpbnN0cnVtZW50YXRpb24gaGFuZGxlci5cbiAqXG4gKiBQYXNzIGBzdG9wT25DYWxsYmFjayA9IHRydWVgIHRvIHN0b3AgbGlzdGVuaW5nIGZvciBDTFMgd2hlbiB0aGUgY2xlYW51cCBjYWxsYmFjayBpcyBjYWxsZWQuXG4gKiBUaGlzIHdpbGwgbGVhZCB0byB0aGUgQ0xTIGJlaW5nIGZpbmFsaXplZCBhbmQgZnJvemVuLlxuICovXG5mdW5jdGlvbiBhZGRDbHNJbnN0cnVtZW50YXRpb25IYW5kbGVyKGNhbGxiYWNrLCBzdG9wT25DYWxsYmFjayA9IGZhbHNlKSB7XG4gIHJldHVybiBhZGRNZXRyaWNPYnNlcnZlcignY2xzJywgY2FsbGJhY2ssIGluc3RydW1lbnRDbHMsIF9wcmV2aW91c0Nscywgc3RvcE9uQ2FsbGJhY2spO1xufVxuXG4vKipcbiAqIEFkZCBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSB0cmlnZ2VyZWQgd2hlbiBhIExDUCBtZXRyaWMgaXMgYXZhaWxhYmxlLlxuICogUmV0dXJucyBhIGNsZWFudXAgY2FsbGJhY2sgd2hpY2ggY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGluc3RydW1lbnRhdGlvbiBoYW5kbGVyLlxuICpcbiAqIFBhc3MgYHN0b3BPbkNhbGxiYWNrID0gdHJ1ZWAgdG8gc3RvcCBsaXN0ZW5pbmcgZm9yIExDUCB3aGVuIHRoZSBjbGVhbnVwIGNhbGxiYWNrIGlzIGNhbGxlZC5cbiAqIFRoaXMgd2lsbCBsZWFkIHRvIHRoZSBMQ1AgYmVpbmcgZmluYWxpemVkIGFuZCBmcm96ZW4uXG4gKi9cbmZ1bmN0aW9uIGFkZExjcEluc3RydW1lbnRhdGlvbkhhbmRsZXIoY2FsbGJhY2ssIHN0b3BPbkNhbGxiYWNrID0gZmFsc2UpIHtcbiAgcmV0dXJuIGFkZE1ldHJpY09ic2VydmVyKCdsY3AnLCBjYWxsYmFjaywgaW5zdHJ1bWVudExjcCwgX3ByZXZpb3VzTGNwLCBzdG9wT25DYWxsYmFjayk7XG59XG5cbi8qKlxuICogQWRkIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZCB3aGVuIGEgRklEIG1ldHJpYyBpcyBhdmFpbGFibGUuXG4gKiBSZXR1cm5zIGEgY2xlYW51cCBjYWxsYmFjayB3aGljaCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgaW5zdHJ1bWVudGF0aW9uIGhhbmRsZXIuXG4gKi9cbmZ1bmN0aW9uIGFkZEZpZEluc3RydW1lbnRhdGlvbkhhbmRsZXIoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGFkZE1ldHJpY09ic2VydmVyKCdmaWQnLCBjYWxsYmFjaywgaW5zdHJ1bWVudEZpZCwgX3ByZXZpb3VzRmlkKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgdHJpZ2dlcmVkIHdoZW4gYSBGSUQgbWV0cmljIGlzIGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gYWRkVHRmYkluc3RydW1lbnRhdGlvbkhhbmRsZXIoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGFkZE1ldHJpY09ic2VydmVyKCd0dGZiJywgY2FsbGJhY2ssIGluc3RydW1lbnRUdGZiLCBfcHJldmlvdXNUdGZiKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgdHJpZ2dlcmVkIHdoZW4gYSBJTlAgbWV0cmljIGlzIGF2YWlsYWJsZS5cbiAqIFJldHVybnMgYSBjbGVhbnVwIGNhbGxiYWNrIHdoaWNoIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSBpbnN0cnVtZW50YXRpb24gaGFuZGxlci5cbiAqL1xuZnVuY3Rpb24gYWRkSW5wSW5zdHJ1bWVudGF0aW9uSGFuZGxlcihjYWxsYmFjaykge1xuICByZXR1cm4gYWRkTWV0cmljT2JzZXJ2ZXIoJ2lucCcsIGNhbGxiYWNrLCBpbnN0cnVtZW50SW5wLCBfcHJldmlvdXNJbnApO1xufVxuXG4vKipcbiAqIEFkZCBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSB0cmlnZ2VyZWQgd2hlbiBhIHBlcmZvcm1hbmNlIG9ic2VydmVyIGlzIHRyaWdnZXJlZCxcbiAqIGFuZCByZWNlaXZlcyB0aGUgZW50cmllcyBvZiB0aGUgb2JzZXJ2ZXIuXG4gKiBSZXR1cm5zIGEgY2xlYW51cCBjYWxsYmFjayB3aGljaCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgaW5zdHJ1bWVudGF0aW9uIGhhbmRsZXIuXG4gKi9cbmZ1bmN0aW9uIGFkZFBlcmZvcm1hbmNlSW5zdHJ1bWVudGF0aW9uSGFuZGxlcih0eXBlLCBjYWxsYmFjaykge1xuICBhZGRIYW5kbGVyKHR5cGUsIGNhbGxiYWNrKTtcbiAgaWYgKCFpbnN0cnVtZW50ZWRbdHlwZV0pIHtcbiAgICBpbnN0cnVtZW50UGVyZm9ybWFuY2VPYnNlcnZlcih0eXBlKTtcbiAgICBpbnN0cnVtZW50ZWRbdHlwZV0gPSB0cnVlO1xuICB9XG4gIHJldHVybiBnZXRDbGVhbnVwQ2FsbGJhY2sodHlwZSwgY2FsbGJhY2spO1xufVxuXG4vKiogVHJpZ2dlciBhbGwgaGFuZGxlcnMgb2YgYSBnaXZlbiB0eXBlLiAqL1xuZnVuY3Rpb24gdHJpZ2dlckhhbmRsZXJzKHR5cGUsIGRhdGEpIHtcbiAgY29uc3QgdHlwZUhhbmRsZXJzID0gaGFuZGxlcnNbdHlwZV07XG4gIGlmICghdHlwZUhhbmRsZXJzPy5sZW5ndGgpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yIChjb25zdCBoYW5kbGVyIG9mIHR5cGVIYW5kbGVycykge1xuICAgIHRyeSB7XG4gICAgICBoYW5kbGVyKGRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5lcnJvcihgRXJyb3Igd2hpbGUgdHJpZ2dlcmluZyBpbnN0cnVtZW50YXRpb24gaGFuZGxlci5cXG5UeXBlOiAke3R5cGV9XFxuTmFtZTogJHtnZXRGdW5jdGlvbk5hbWUoaGFuZGxlcil9XFxuRXJyb3I6YCwgZSk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBpbnN0cnVtZW50Q2xzKCkge1xuICByZXR1cm4gb25DTFMobWV0cmljID0+IHtcbiAgICB0cmlnZ2VySGFuZGxlcnMoJ2NscycsIHtcbiAgICAgIG1ldHJpY1xuICAgIH0pO1xuICAgIF9wcmV2aW91c0NscyA9IG1ldHJpYztcbiAgfSxcbiAgLy8gV2Ugd2FudCB0aGUgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdoZW5ldmVyIHRoZSBDTFMgdmFsdWUgdXBkYXRlcy5cbiAgLy8gQnkgZGVmYXVsdCwgdGhlIGNhbGxiYWNrIGlzIG9ubHkgY2FsbGVkIHdoZW4gdGhlIHRhYiBnb2VzIHRvIHRoZSBiYWNrZ3JvdW5kLlxuICB7XG4gICAgcmVwb3J0QWxsQ2hhbmdlczogdHJ1ZVxuICB9KTtcbn1cbmZ1bmN0aW9uIGluc3RydW1lbnRGaWQoKSB7XG4gIHJldHVybiBvbkZJRChtZXRyaWMgPT4ge1xuICAgIHRyaWdnZXJIYW5kbGVycygnZmlkJywge1xuICAgICAgbWV0cmljXG4gICAgfSk7XG4gICAgX3ByZXZpb3VzRmlkID0gbWV0cmljO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGluc3RydW1lbnRMY3AoKSB7XG4gIHJldHVybiBvbkxDUChtZXRyaWMgPT4ge1xuICAgIHRyaWdnZXJIYW5kbGVycygnbGNwJywge1xuICAgICAgbWV0cmljXG4gICAgfSk7XG4gICAgX3ByZXZpb3VzTGNwID0gbWV0cmljO1xuICB9LFxuICAvLyBXZSB3YW50IHRoZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbmV2ZXIgdGhlIExDUCB2YWx1ZSB1cGRhdGVzLlxuICAvLyBCeSBkZWZhdWx0LCB0aGUgY2FsbGJhY2sgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgdGFiIGdvZXMgdG8gdGhlIGJhY2tncm91bmQuXG4gIHtcbiAgICByZXBvcnRBbGxDaGFuZ2VzOiB0cnVlXG4gIH0pO1xufVxuZnVuY3Rpb24gaW5zdHJ1bWVudFR0ZmIoKSB7XG4gIHJldHVybiBvblRURkIobWV0cmljID0+IHtcbiAgICB0cmlnZ2VySGFuZGxlcnMoJ3R0ZmInLCB7XG4gICAgICBtZXRyaWNcbiAgICB9KTtcbiAgICBfcHJldmlvdXNUdGZiID0gbWV0cmljO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGluc3RydW1lbnRJbnAoKSB7XG4gIHJldHVybiBvbklOUChtZXRyaWMgPT4ge1xuICAgIHRyaWdnZXJIYW5kbGVycygnaW5wJywge1xuICAgICAgbWV0cmljXG4gICAgfSk7XG4gICAgX3ByZXZpb3VzSW5wID0gbWV0cmljO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGFkZE1ldHJpY09ic2VydmVyKHR5cGUsIGNhbGxiYWNrLCBpbnN0cnVtZW50Rm4sIHByZXZpb3VzVmFsdWUsIHN0b3BPbkNhbGxiYWNrID0gZmFsc2UpIHtcbiAgYWRkSGFuZGxlcih0eXBlLCBjYWxsYmFjayk7XG4gIGxldCBzdG9wTGlzdGVuaW5nO1xuICBpZiAoIWluc3RydW1lbnRlZFt0eXBlXSkge1xuICAgIHN0b3BMaXN0ZW5pbmcgPSBpbnN0cnVtZW50Rm4oKTtcbiAgICBpbnN0cnVtZW50ZWRbdHlwZV0gPSB0cnVlO1xuICB9XG4gIGlmIChwcmV2aW91c1ZhbHVlKSB7XG4gICAgY2FsbGJhY2soe1xuICAgICAgbWV0cmljOiBwcmV2aW91c1ZhbHVlXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGdldENsZWFudXBDYWxsYmFjayh0eXBlLCBjYWxsYmFjaywgc3RvcE9uQ2FsbGJhY2sgPyBzdG9wTGlzdGVuaW5nIDogdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uIGluc3RydW1lbnRQZXJmb3JtYW5jZU9ic2VydmVyKHR5cGUpIHtcbiAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG4gIC8vIFNwZWNpYWwgcGVyLXR5cGUgb3B0aW9ucyB3ZSB3YW50IHRvIHVzZVxuICBpZiAodHlwZSA9PT0gJ2V2ZW50Jykge1xuICAgIG9wdGlvbnMuZHVyYXRpb25UaHJlc2hvbGQgPSAwO1xuICB9XG4gIG9ic2VydmUodHlwZSwgZW50cmllcyA9PiB7XG4gICAgdHJpZ2dlckhhbmRsZXJzKHR5cGUsIHtcbiAgICAgIGVudHJpZXNcbiAgICB9KTtcbiAgfSwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBhZGRIYW5kbGVyKHR5cGUsIGhhbmRsZXIpIHtcbiAgaGFuZGxlcnNbdHlwZV0gPSBoYW5kbGVyc1t0eXBlXSB8fCBbXTtcbiAgaGFuZGxlcnNbdHlwZV0ucHVzaChoYW5kbGVyKTtcbn1cblxuLy8gR2V0IGEgY2FsbGJhY2sgd2hpY2ggY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGluc3RydW1lbnRhdGlvbiBoYW5kbGVyXG5mdW5jdGlvbiBnZXRDbGVhbnVwQ2FsbGJhY2sodHlwZSwgY2FsbGJhY2ssIHN0b3BMaXN0ZW5pbmcpIHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBpZiAoc3RvcExpc3RlbmluZykge1xuICAgICAgc3RvcExpc3RlbmluZygpO1xuICAgIH1cbiAgICBjb25zdCB0eXBlSGFuZGxlcnMgPSBoYW5kbGVyc1t0eXBlXTtcbiAgICBpZiAoIXR5cGVIYW5kbGVycykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHR5cGVIYW5kbGVycy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0eXBlSGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBQZXJmb3JtYW5jZUVudHJ5IGlzIGEgUGVyZm9ybWFuY2VFdmVudFRpbWluZyBieSBjaGVja2luZyBmb3IgdGhlIGBkdXJhdGlvbmAgcHJvcGVydHkuXG4gKi9cbmZ1bmN0aW9uIGlzUGVyZm9ybWFuY2VFdmVudFRpbWluZyhlbnRyeSkge1xuICByZXR1cm4gJ2R1cmF0aW9uJyBpbiBlbnRyeTtcbn1cbmV4cG9ydCB7IGFkZENsc0luc3RydW1lbnRhdGlvbkhhbmRsZXIsIGFkZEZpZEluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGFkZElucEluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGFkZExjcEluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGFkZFBlcmZvcm1hbmNlSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgYWRkVHRmYkluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGlzUGVyZm9ybWFuY2VFdmVudFRpbWluZyB9O1xuIiwiaW1wb3J0IHsgc3BhblRvSlNPTiwgd2l0aEFjdGl2ZVNwYW4sIHN0YXJ0SW5hY3RpdmVTcGFuLCBnZXRDbGllbnQsIGdldEFjdGl2ZVNwYW4sIGdldFJvb3RTcGFuLCBnZXRDdXJyZW50U2NvcGUgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vdHlwZXMuanMnO1xuaW1wb3J0IHsgb25IaWRkZW4gfSBmcm9tICcuL3dlYi12aXRhbHMvbGliL29uSGlkZGVuLmpzJztcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBnaXZlbiB2YWx1ZSBpcyBhIHZhbGlkIG1lYXN1cmVtZW50IHZhbHVlLlxuICovXG5mdW5jdGlvbiBpc01lYXN1cmVtZW50VmFsdWUodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsdWUpO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBzdGFydCBjaGlsZCBvbiB0cmFuc2FjdGlvbnMuIFRoaXMgZnVuY3Rpb24gd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgdHJhbnNhY3Rpb24gd2lsbFxuICogdXNlIHRoZSBzdGFydCB0aW1lc3RhbXAgb2YgdGhlIGNyZWF0ZWQgY2hpbGQgc3BhbiBpZiBpdCBpcyBlYXJsaWVyIHRoYW4gdGhlIHRyYW5zYWN0aW9ucyBhY3R1YWxcbiAqIHN0YXJ0IHRpbWVzdGFtcC5cbiAqL1xuZnVuY3Rpb24gc3RhcnRBbmRFbmRTcGFuKHBhcmVudFNwYW4sIHN0YXJ0VGltZUluU2Vjb25kcywgZW5kVGltZSwge1xuICAuLi5jdHhcbn0pIHtcbiAgY29uc3QgcGFyZW50U3RhcnRUaW1lID0gc3BhblRvSlNPTihwYXJlbnRTcGFuKS5zdGFydF90aW1lc3RhbXA7XG4gIGlmIChwYXJlbnRTdGFydFRpbWUgJiYgcGFyZW50U3RhcnRUaW1lID4gc3RhcnRUaW1lSW5TZWNvbmRzKSB7XG4gICAgLy8gV2UgY2FuIG9ubHkgZG8gdGhpcyBmb3IgU2VudHJ5U3BhbnMuLi5cbiAgICBpZiAodHlwZW9mIHBhcmVudFNwYW4udXBkYXRlU3RhcnRUaW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwYXJlbnRTcGFuLnVwZGF0ZVN0YXJ0VGltZShzdGFydFRpbWVJblNlY29uZHMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRoZSByZXR1cm4gdmFsdWUgb25seSBleGlzdHMgZm9yIHRlc3RzXG4gIHJldHVybiB3aXRoQWN0aXZlU3BhbihwYXJlbnRTcGFuLCAoKSA9PiB7XG4gICAgY29uc3Qgc3BhbiA9IHN0YXJ0SW5hY3RpdmVTcGFuKHtcbiAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lSW5TZWNvbmRzLFxuICAgICAgLi4uY3R4XG4gICAgfSk7XG4gICAgaWYgKHNwYW4pIHtcbiAgICAgIHNwYW4uZW5kKGVuZFRpbWUpO1xuICAgIH1cbiAgICByZXR1cm4gc3BhbjtcbiAgfSk7XG59XG5cbi8qKlxuICogU3RhcnRzIGFuIGluYWN0aXZlLCBzdGFuZGFsb25lIHNwYW4gdXNlZCB0byBzZW5kIHdlYiB2aXRhbCB2YWx1ZXMgdG8gU2VudHJ5LlxuICogRE8gTk9UIHVzZSB0aGlzIGZvciBhcmJpdHJhcnkgc3BhbnMsIGFzIHRoZXNlIHNwYW5zIHJlcXVpcmUgc3BlY2lhbCBoYW5kbGluZ1xuICogZHVyaW5nIGluZ2VzdGlvbiB0byBleHRyYWN0IG1ldHJpY3MuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBhZGRzIGEgYnVuY2ggb2YgYXR0cmlidXRlcyBhbmQgZGF0YSB0byB0aGUgc3BhbiB0aGF0J3Mgc2hhcmVkXG4gKiBieSBhbGwgd2ViIHZpdGFsIHN0YW5kYWxvbmUgc3BhbnMuIEhvd2V2ZXIsIHlvdSBuZWVkIHRvIHRha2UgY2FyZSBvZiBhZGRpbmdcbiAqIHRoZSBhY3R1YWwgd2ViIHZpdGFsIHZhbHVlIGFzIGFuIGV2ZW50IHRvIHRoZSBzcGFuLiBBbHNvLCB5b3UgbmVlZCB0byBhc3NpZ25cbiAqIGEgdHJhbnNhY3Rpb24gbmFtZSBhbmQgc29tZSBvdGhlciB2YWx1ZXMgdGhhdCBhcmUgc3BlY2lmaWMgdG8gdGhlIHdlYiB2aXRhbC5cbiAqXG4gKiBVbHRpbWF0ZWx5LCB5b3UgYWxzbyBuZWVkIHRvIHRha2UgY2FyZSBvZiBlbmRpbmcgdGhlIHNwYW4gdG8gc2VuZCBpdCBvZmYuXG4gKlxuICogQHBhcmFtIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBhbiBpbmFjdGl2ZSwgc3RhbmRhbG9uZSBhbmQgTk9UIFlFVCBlbmRlZCBzcGFuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0U3RhbmRhbG9uZVdlYlZpdGFsU3BhbihvcHRpb25zKSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBpZiAoIWNsaWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB7XG4gICAgbmFtZSxcbiAgICB0cmFuc2FjdGlvbixcbiAgICBhdHRyaWJ1dGVzOiBwYXNzZWRBdHRyaWJ1dGVzLFxuICAgIHN0YXJ0VGltZVxuICB9ID0gb3B0aW9ucztcbiAgY29uc3Qge1xuICAgIHJlbGVhc2UsXG4gICAgZW52aXJvbm1lbnQsXG4gICAgc2VuZERlZmF1bHRQaWlcbiAgfSA9IGNsaWVudC5nZXRPcHRpb25zKCk7XG4gIC8vIFdlIG5lZWQgdG8gZ2V0IHRoZSByZXBsYXksIHVzZXIsIGFuZCBhY3RpdmVUcmFuc2FjdGlvbiBmcm9tIHRoZSBjdXJyZW50IHNjb3BlXG4gIC8vIHNvIHRoYXQgd2UgY2FuIGFzc29jaWF0ZSByZXBsYXkgaWQsIHByb2ZpbGUgaWQsIGFuZCBhIHVzZXIgZGlzcGxheSB0byB0aGUgc3BhblxuICBjb25zdCByZXBsYXkgPSBjbGllbnQuZ2V0SW50ZWdyYXRpb25CeU5hbWUoJ1JlcGxheScpO1xuICBjb25zdCByZXBsYXlJZCA9IHJlcGxheT8uZ2V0UmVwbGF5SWQoKTtcbiAgY29uc3Qgc2NvcGUgPSBnZXRDdXJyZW50U2NvcGUoKTtcbiAgY29uc3QgdXNlciA9IHNjb3BlLmdldFVzZXIoKTtcbiAgY29uc3QgdXNlckRpc3BsYXkgPSB1c2VyICE9PSB1bmRlZmluZWQgPyB1c2VyLmVtYWlsIHx8IHVzZXIuaWQgfHwgdXNlci5pcF9hZGRyZXNzIDogdW5kZWZpbmVkO1xuICBsZXQgcHJvZmlsZUlkO1xuICB0cnkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3Igc2tpcCBvcHRpb25hbCBjaGFpbmluZyB0byBzYXZlIGJ1bmRsZSBzaXplIHdpdGggdHJ5IGNhdGNoXG4gICAgcHJvZmlsZUlkID0gc2NvcGUuZ2V0U2NvcGVEYXRhKCkuY29udGV4dHMucHJvZmlsZS5wcm9maWxlX2lkO1xuICB9IGNhdGNoIHtcbiAgICAvLyBkbyBub3RoaW5nXG4gIH1cbiAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICByZWxlYXNlLFxuICAgIGVudmlyb25tZW50LFxuICAgIHVzZXI6IHVzZXJEaXNwbGF5IHx8IHVuZGVmaW5lZCxcbiAgICBwcm9maWxlX2lkOiBwcm9maWxlSWQgfHwgdW5kZWZpbmVkLFxuICAgIHJlcGxheV9pZDogcmVwbGF5SWQgfHwgdW5kZWZpbmVkLFxuICAgIHRyYW5zYWN0aW9uLFxuICAgIC8vIFdlYiB2aXRhbCBzY29yZSBjYWxjdWxhdGlvbiByZWxpZXMgb24gdGhlIHVzZXIgYWdlbnQgdG8gYWNjb3VudCBmb3IgZGlmZmVyZW50XG4gICAgLy8gYnJvd3NlcnMgc2V0dGluZyBkaWZmZXJlbnQgdGhyZXNob2xkcyBmb3Igd2hhdCBpcyBjb25zaWRlcmVkIGEgZ29vZC9tZWgvYmFkIHZhbHVlLlxuICAgIC8vIEZvciBleGFtcGxlOiBDaHJvbWUgdnMuIENocm9tZSBNb2JpbGVcbiAgICAndXNlcl9hZ2VudC5vcmlnaW5hbCc6IFdJTkRPVy5uYXZpZ2F0b3I/LnVzZXJBZ2VudCxcbiAgICAvLyBUaGlzIHRlbGxzIFNlbnRyeSB0byBpbmZlciB0aGUgSVAgYWRkcmVzcyBmcm9tIHRoZSByZXF1ZXN0XG4gICAgJ2NsaWVudC5hZGRyZXNzJzogc2VuZERlZmF1bHRQaWkgPyAne3thdXRvfX0nIDogdW5kZWZpbmVkLFxuICAgIC4uLnBhc3NlZEF0dHJpYnV0ZXNcbiAgfTtcbiAgcmV0dXJuIHN0YXJ0SW5hY3RpdmVTcGFuKHtcbiAgICBuYW1lLFxuICAgIGF0dHJpYnV0ZXMsXG4gICAgc3RhcnRUaW1lLFxuICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgc3RhbmRhbG9uZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG59XG5cbi8qKiBHZXQgdGhlIGJyb3dzZXIgcGVyZm9ybWFuY2UgQVBJLiAqL1xuZnVuY3Rpb24gZ2V0QnJvd3NlclBlcmZvcm1hbmNlQVBJKCkge1xuICAvLyBAdHMtZXhwZWN0LWVycm9yIHdlIHdhbnQgdG8gbWFrZSBzdXJlIGFsbCBvZiB0aGVzZSBhcmUgYXZhaWxhYmxlLCBldmVuIGlmIFRTIGlzIHN1cmUgdGhleSBhcmVcbiAgcmV0dXJuIFdJTkRPVy5hZGRFdmVudExpc3RlbmVyICYmIFdJTkRPVy5wZXJmb3JtYW5jZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBmcm9tIG1pbGxpc2Vjb25kcyB0byBzZWNvbmRzXG4gKiBAcGFyYW0gdGltZSB0aW1lIGluIG1zXG4gKi9cbmZ1bmN0aW9uIG1zVG9TZWModGltZSkge1xuICByZXR1cm4gdGltZSAvIDEwMDA7XG59XG5cbi8qKlxuICogQ29udmVydHMgQUxQTiBwcm90b2NvbCBpZHMgdG8gbmFtZSBhbmQgdmVyc2lvbi5cbiAqXG4gKiAoaHR0cHM6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvdGxzLWV4dGVuc2lvbnR5cGUtdmFsdWVzL3Rscy1leHRlbnNpb250eXBlLXZhbHVlcy54aHRtbCNhbHBuLXByb3RvY29sLWlkcylcbiAqIEBwYXJhbSBuZXh0SG9wUHJvdG9jb2wgUGVyZm9ybWFuY2VSZXNvdXJjZVRpbWluZy5uZXh0SG9wUHJvdG9jb2xcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdE5ldHdvcmtQcm90b2NvbChuZXh0SG9wUHJvdG9jb2wpIHtcbiAgbGV0IG5hbWUgPSAndW5rbm93bic7XG4gIGxldCB2ZXJzaW9uID0gJ3Vua25vd24nO1xuICBsZXQgX25hbWUgPSAnJztcbiAgZm9yIChjb25zdCBjaGFyIG9mIG5leHRIb3BQcm90b2NvbCkge1xuICAgIC8vIGh0dHAvMS4xIGV0Yy5cbiAgICBpZiAoY2hhciA9PT0gJy8nKSB7XG4gICAgICBbbmFtZSwgdmVyc2lvbl0gPSBuZXh0SG9wUHJvdG9jb2wuc3BsaXQoJy8nKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAvLyBoMiwgaDMgZXRjLlxuICAgIGlmICghaXNOYU4oTnVtYmVyKGNoYXIpKSkge1xuICAgICAgbmFtZSA9IF9uYW1lID09PSAnaCcgPyAnaHR0cCcgOiBfbmFtZTtcbiAgICAgIHZlcnNpb24gPSBuZXh0SG9wUHJvdG9jb2wuc3BsaXQoX25hbWUpWzFdO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIF9uYW1lICs9IGNoYXI7XG4gIH1cbiAgaWYgKF9uYW1lID09PSBuZXh0SG9wUHJvdG9jb2wpIHtcbiAgICAvLyB3ZWJydGMsIGZ0cCwgZXRjLlxuICAgIG5hbWUgPSBfbmFtZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIG5hbWUsXG4gICAgdmVyc2lvblxuICB9O1xufVxuXG4vKipcbiAqIEdlbmVyaWMgc3VwcG9ydCBjaGVjayBmb3Igd2ViIHZpdGFsc1xuICovXG5mdW5jdGlvbiBzdXBwb3J0c1dlYlZpdGFsKGVudHJ5VHlwZSkge1xuICB0cnkge1xuICAgIHJldHVybiBQZXJmb3JtYW5jZU9ic2VydmVyLnN1cHBvcnRlZEVudHJ5VHlwZXMuaW5jbHVkZXMoZW50cnlUeXBlKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogTGlzdGVucyBmb3IgZXZlbnRzIG9uIHdoaWNoIHdlIHdhbnQgdG8gY29sbGVjdCBhIHByZXZpb3VzbHkgYWNjdW11bGF0ZWQgd2ViIHZpdGFsIHZhbHVlLlxuICogQ3VycmVudGx5LCB0aGlzIGluY2x1ZGVzOlxuICpcbiAqIC0gcGFnZWhpZGUgKGkuZS4gdXNlciBtaW5pbWl6ZXMgYnJvd3NlciB3aW5kb3csIGhpZGVzIHRhYiwgZXRjKVxuICogLSBzb2Z0IG5hdmlnYXRpb24gKHdlIG9ubHkgY2FyZSBhYm91dCB0aGUgdml0YWwgb2YgdGhlIGluaXRpYWxseSBsb2FkZWQgcm91dGUpXG4gKlxuICogQXMgYSBcInNpZGUtZWZmZWN0XCIsIHRoaXMgZnVuY3Rpb24gd2lsbCBhbHNvIGNvbGxlY3QgdGhlIHNwYW4gaWQgb2YgdGhlIHBhZ2Vsb2FkIHNwYW4uXG4gKlxuICogQHBhcmFtIGNvbGxlY3RvckNhbGxiYWNrIHRoZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiB0aGUgZmlyc3Qgb2YgdGhlc2UgZXZlbnRzIGlzIHRyaWdnZXJlZC4gUGFyYW1ldGVyczpcbiAqIC0gZXZlbnQ6IHRoZSBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGUgcmVwb3J0aW5nIG9mIHRoZSB3ZWIgdml0YWwgdmFsdWUuXG4gKiAtIHBhZ2Vsb2FkU3BhbklkOiB0aGUgc3BhbiBpZCBvZiB0aGUgcGFnZWxvYWQgc3Bhbi4gVGhpcyBpcyB1c2VkIHRvIGxpbmsgdGhlIHdlYiB2aXRhbCBzcGFuIHRvIHRoZSBwYWdlbG9hZCBzcGFuLlxuICovXG5mdW5jdGlvbiBsaXN0ZW5Gb3JXZWJWaXRhbFJlcG9ydEV2ZW50cyhjb2xsZWN0b3JDYWxsYmFjaykge1xuICBsZXQgcGFnZWxvYWRTcGFuSWQ7XG4gIGxldCBjb2xsZWN0ZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gX3J1bkNvbGxlY3RvckNhbGxiYWNrT25jZShldmVudCkge1xuICAgIGlmICghY29sbGVjdGVkICYmIHBhZ2Vsb2FkU3BhbklkKSB7XG4gICAgICBjb2xsZWN0b3JDYWxsYmFjayhldmVudCwgcGFnZWxvYWRTcGFuSWQpO1xuICAgIH1cbiAgICBjb2xsZWN0ZWQgPSB0cnVlO1xuICB9XG4gIG9uSGlkZGVuKCgpID0+IHtcbiAgICBpZiAoIWNvbGxlY3RlZCkge1xuICAgICAgX3J1bkNvbGxlY3RvckNhbGxiYWNrT25jZSgncGFnZWhpZGUnKTtcbiAgICB9XG4gIH0pO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgICBpZiAoIWNsaWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1bnN1YnNjcmliZVN0YXJ0TmF2aWdhdGlvbiA9IGNsaWVudC5vbignYmVmb3JlU3RhcnROYXZpZ2F0aW9uU3BhbicsIChfLCBvcHRpb25zKSA9PiB7XG4gICAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gY29sbGVjdCBMQ1AgaWYgd2UgYWN0dWFsbHkgbmF2aWdhdGUuIFJlZGlyZWN0cyBzaG91bGQgYmUgaWdub3JlZC5cbiAgICAgIGlmICghb3B0aW9ucz8uaXNSZWRpcmVjdCkge1xuICAgICAgICBfcnVuQ29sbGVjdG9yQ2FsbGJhY2tPbmNlKCduYXZpZ2F0aW9uJyk7XG4gICAgICAgIHVuc3Vic2NyaWJlU3RhcnROYXZpZ2F0aW9uPy4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gZ2V0QWN0aXZlU3BhbigpO1xuICAgIGlmIChhY3RpdmVTcGFuKSB7XG4gICAgICBjb25zdCByb290U3BhbiA9IGdldFJvb3RTcGFuKGFjdGl2ZVNwYW4pO1xuICAgICAgY29uc3Qgc3BhbkpTT04gPSBzcGFuVG9KU09OKHJvb3RTcGFuKTtcbiAgICAgIGlmIChzcGFuSlNPTi5vcCA9PT0gJ3BhZ2Vsb2FkJykge1xuICAgICAgICBwYWdlbG9hZFNwYW5JZCA9IHJvb3RTcGFuLnNwYW5Db250ZXh0KCkuc3BhbklkO1xuICAgICAgfVxuICAgIH1cbiAgfSwgMCk7XG59XG5leHBvcnQgeyBleHRyYWN0TmV0d29ya1Byb3RvY29sLCBnZXRCcm93c2VyUGVyZm9ybWFuY2VBUEksIGlzTWVhc3VyZW1lbnRWYWx1ZSwgbGlzdGVuRm9yV2ViVml0YWxSZXBvcnRFdmVudHMsIG1zVG9TZWMsIHN0YXJ0QW5kRW5kU3Bhbiwgc3RhcnRTdGFuZGFsb25lV2ViVml0YWxTcGFuLCBzdXBwb3J0c1dlYlZpdGFsIH07XG4iLCJpbXBvcnQgeyBsb2dnZXIsIGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4sIGdldEN1cnJlbnRTY29wZSwgaHRtbFRyZWVBc1N0cmluZywgU0VNQU5USUNfQVRUUklCVVRFX0VYQ0xVU0lWRV9USU1FLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1ZBTFVFLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1VOSVQsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1AsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgYWRkQ2xzSW5zdHJ1bWVudGF0aW9uSGFuZGxlciB9IGZyb20gJy4vaW5zdHJ1bWVudC5qcyc7XG5pbXBvcnQgeyBzdXBwb3J0c1dlYlZpdGFsLCBsaXN0ZW5Gb3JXZWJWaXRhbFJlcG9ydEV2ZW50cywgbXNUb1NlYywgc3RhcnRTdGFuZGFsb25lV2ViVml0YWxTcGFuIH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbi8qKlxuICogU3RhcnRzIHRyYWNraW5nIHRoZSBDdW11bGF0aXZlIExheW91dCBTaGlmdCBvbiB0aGUgY3VycmVudCBwYWdlIGFuZCBjb2xsZWN0cyB0aGUgdmFsdWUgb25jZVxuICpcbiAqIC0gdGhlIHBhZ2UgdmlzaWJpbGl0eSBpcyBoaWRkZW5cbiAqIC0gYSBuYXZpZ2F0aW9uIHNwYW4gaXMgc3RhcnRlZCAodG8gc3RvcCBDTFMgbWVhc3VyZW1lbnQgZm9yIFNQQSBzb2Z0IG5hdmlnYXRpb25zKVxuICpcbiAqIE9uY2UgZWl0aGVyIG9mIHRoZXNlIGV2ZW50cyB0cmlnZ2VycywgdGhlIENMUyB2YWx1ZSBpcyBzZW50IGFzIGEgc3RhbmRhbG9uZSBzcGFuIGFuZCB3ZSBzdG9wXG4gKiBtZWFzdXJpbmcgQ0xTLlxuICovXG5mdW5jdGlvbiB0cmFja0Nsc0FzU3RhbmRhbG9uZVNwYW4oKSB7XG4gIGxldCBzdGFuZGFsb25lQ0xzVmFsdWUgPSAwO1xuICBsZXQgc3RhbmRhbG9uZUNsc0VudHJ5O1xuICBpZiAoIXN1cHBvcnRzV2ViVml0YWwoJ2xheW91dC1zaGlmdCcpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGNsZWFudXBDbHNIYW5kbGVyID0gYWRkQ2xzSW5zdHJ1bWVudGF0aW9uSGFuZGxlcigoe1xuICAgIG1ldHJpY1xuICB9KSA9PiB7XG4gICAgY29uc3QgZW50cnkgPSBtZXRyaWMuZW50cmllc1ttZXRyaWMuZW50cmllcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN0YW5kYWxvbmVDTHNWYWx1ZSA9IG1ldHJpYy52YWx1ZTtcbiAgICBzdGFuZGFsb25lQ2xzRW50cnkgPSBlbnRyeTtcbiAgfSwgdHJ1ZSk7XG4gIGxpc3RlbkZvcldlYlZpdGFsUmVwb3J0RXZlbnRzKChyZXBvcnRFdmVudCwgcGFnZWxvYWRTcGFuSWQpID0+IHtcbiAgICBzZW5kU3RhbmRhbG9uZUNsc1NwYW4oc3RhbmRhbG9uZUNMc1ZhbHVlLCBzdGFuZGFsb25lQ2xzRW50cnksIHBhZ2Vsb2FkU3BhbklkLCByZXBvcnRFdmVudCk7XG4gICAgY2xlYW51cENsc0hhbmRsZXIoKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBzZW5kU3RhbmRhbG9uZUNsc1NwYW4oY2xzVmFsdWUsIGVudHJ5LCBwYWdlbG9hZFNwYW5JZCwgcmVwb3J0RXZlbnQpIHtcbiAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmxvZyhgU2VuZGluZyBDTFMgc3BhbiAoJHtjbHNWYWx1ZX0pYCk7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IG1zVG9TZWMoKGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4oKSB8fCAwKSArIChlbnRyeT8uc3RhcnRUaW1lIHx8IDApKTtcbiAgY29uc3Qgcm91dGVOYW1lID0gZ2V0Q3VycmVudFNjb3BlKCkuZ2V0U2NvcGVEYXRhKCkudHJhbnNhY3Rpb25OYW1lO1xuICBjb25zdCBuYW1lID0gZW50cnkgPyBodG1sVHJlZUFzU3RyaW5nKGVudHJ5LnNvdXJjZXNbMF0/Lm5vZGUpIDogJ0xheW91dCBzaGlmdCc7XG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOXTogJ2F1dG8uaHR0cC5icm93c2VyLmNscycsXG4gICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1BdOiAndWkud2Vidml0YWwuY2xzJyxcbiAgICBbU0VNQU5USUNfQVRUUklCVVRFX0VYQ0xVU0lWRV9USU1FXTogZW50cnk/LmR1cmF0aW9uIHx8IDAsXG4gICAgLy8gYXR0YWNoIHRoZSBwYWdlbG9hZCBzcGFuIGlkIHRvIHRoZSBDTFMgc3BhbiBzbyB0aGF0IHdlIGNhbiBsaW5rIHRoZW0gaW4gdGhlIFVJXG4gICAgJ3NlbnRyeS5wYWdlbG9hZC5zcGFuX2lkJzogcGFnZWxvYWRTcGFuSWQsXG4gICAgLy8gZGVzY3JpYmVzIHdoYXQgdHJpZ2dlcmVkIHRoZSB3ZWIgdml0YWwgdG8gYmUgcmVwb3J0ZWRcbiAgICAnc2VudHJ5LnJlcG9ydF9ldmVudCc6IHJlcG9ydEV2ZW50XG4gIH07XG5cbiAgLy8gQWRkIENMUyBzb3VyY2VzIGFzIHNwYW4gYXR0cmlidXRlcyB0byBoZWxwIHdpdGggZGVidWdnaW5nIGxheW91dCBzaGlmdHNcbiAgLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTGF5b3V0U2hpZnQvc291cmNlc1xuICBpZiAoZW50cnk/LnNvdXJjZXMpIHtcbiAgICBlbnRyeS5zb3VyY2VzLmZvckVhY2goKHNvdXJjZSwgaW5kZXgpID0+IHtcbiAgICAgIGF0dHJpYnV0ZXNbYGNscy5zb3VyY2UuJHtpbmRleCArIDF9YF0gPSBodG1sVHJlZUFzU3RyaW5nKHNvdXJjZS5ub2RlKTtcbiAgICB9KTtcbiAgfVxuICBjb25zdCBzcGFuID0gc3RhcnRTdGFuZGFsb25lV2ViVml0YWxTcGFuKHtcbiAgICBuYW1lLFxuICAgIHRyYW5zYWN0aW9uOiByb3V0ZU5hbWUsXG4gICAgYXR0cmlidXRlcyxcbiAgICBzdGFydFRpbWVcbiAgfSk7XG4gIGlmIChzcGFuKSB7XG4gICAgc3Bhbi5hZGRFdmVudCgnY2xzJywge1xuICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfTUVBU1VSRU1FTlRfVU5JVF06ICcnLFxuICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfTUVBU1VSRU1FTlRfVkFMVUVdOiBjbHNWYWx1ZVxuICAgIH0pO1xuXG4gICAgLy8gTGF5b3V0U2hpZnQgcGVyZm9ybWFuY2UgZW50cmllcyBhbHdheXMgaGF2ZSBhIGR1cmF0aW9uIG9mIDAsIHNvIHdlIGRvbid0IG5lZWQgdG8gYWRkIGBlbnRyeS5kdXJhdGlvbmAgaGVyZVxuICAgIC8vIHNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BlcmZvcm1hbmNlRW50cnkvZHVyYXRpb25cbiAgICBzcGFuLmVuZChzdGFydFRpbWUpO1xuICB9XG59XG5leHBvcnQgeyB0cmFja0Nsc0FzU3RhbmRhbG9uZVNwYW4gfTtcbiIsImltcG9ydCB7IGxvZ2dlciwgYnJvd3NlclBlcmZvcm1hbmNlVGltZU9yaWdpbiwgZ2V0Q3VycmVudFNjb3BlLCBodG1sVHJlZUFzU3RyaW5nLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1ZBTFVFLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1VOSVQsIFNFTUFOVElDX0FUVFJJQlVURV9FWENMVVNJVkVfVElNRSwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU4gfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBhZGRMY3BJbnN0cnVtZW50YXRpb25IYW5kbGVyIH0gZnJvbSAnLi9pbnN0cnVtZW50LmpzJztcbmltcG9ydCB7IHN1cHBvcnRzV2ViVml0YWwsIGxpc3RlbkZvcldlYlZpdGFsUmVwb3J0RXZlbnRzLCBtc1RvU2VjLCBzdGFydFN0YW5kYWxvbmVXZWJWaXRhbFNwYW4gfSBmcm9tICcuL3V0aWxzLmpzJztcblxuLyoqXG4gKiBTdGFydHMgdHJhY2tpbmcgdGhlIExhcmdlc3QgQ29udGVudGZ1bCBQYWludCBvbiB0aGUgY3VycmVudCBwYWdlIGFuZCBjb2xsZWN0cyB0aGUgdmFsdWUgb25jZVxuICpcbiAqIC0gdGhlIHBhZ2UgdmlzaWJpbGl0eSBpcyBoaWRkZW5cbiAqIC0gYSBuYXZpZ2F0aW9uIHNwYW4gaXMgc3RhcnRlZCAodG8gc3RvcCBMQ1AgbWVhc3VyZW1lbnQgZm9yIFNQQSBzb2Z0IG5hdmlnYXRpb25zKVxuICpcbiAqIE9uY2UgZWl0aGVyIG9mIHRoZXNlIGV2ZW50cyB0cmlnZ2VycywgdGhlIExDUCB2YWx1ZSBpcyBzZW50IGFzIGEgc3RhbmRhbG9uZSBzcGFuIGFuZCB3ZSBzdG9wXG4gKiBtZWFzdXJpbmcgTENQIGZvciBzdWJzZXF1ZW50IHJvdXRlcy5cbiAqL1xuZnVuY3Rpb24gdHJhY2tMY3BBc1N0YW5kYWxvbmVTcGFuKCkge1xuICBsZXQgc3RhbmRhbG9uZUxjcFZhbHVlID0gMDtcbiAgbGV0IHN0YW5kYWxvbmVMY3BFbnRyeTtcbiAgaWYgKCFzdXBwb3J0c1dlYlZpdGFsKCdsYXJnZXN0LWNvbnRlbnRmdWwtcGFpbnQnKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjbGVhbnVwTGNwSGFuZGxlciA9IGFkZExjcEluc3RydW1lbnRhdGlvbkhhbmRsZXIoKHtcbiAgICBtZXRyaWNcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGVudHJ5ID0gbWV0cmljLmVudHJpZXNbbWV0cmljLmVudHJpZXMubGVuZ3RoIC0gMV07XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdGFuZGFsb25lTGNwVmFsdWUgPSBtZXRyaWMudmFsdWU7XG4gICAgc3RhbmRhbG9uZUxjcEVudHJ5ID0gZW50cnk7XG4gIH0sIHRydWUpO1xuICBsaXN0ZW5Gb3JXZWJWaXRhbFJlcG9ydEV2ZW50cygocmVwb3J0RXZlbnQsIHBhZ2Vsb2FkU3BhbklkKSA9PiB7XG4gICAgX3NlbmRTdGFuZGFsb25lTGNwU3BhbihzdGFuZGFsb25lTGNwVmFsdWUsIHN0YW5kYWxvbmVMY3BFbnRyeSwgcGFnZWxvYWRTcGFuSWQsIHJlcG9ydEV2ZW50KTtcbiAgICBjbGVhbnVwTGNwSGFuZGxlcigpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBFeHBvcnRlZCBvbmx5IGZvciB0ZXN0aW5nIVxuICovXG5mdW5jdGlvbiBfc2VuZFN0YW5kYWxvbmVMY3BTcGFuKGxjcFZhbHVlLCBlbnRyeSwgcGFnZWxvYWRTcGFuSWQsIHJlcG9ydEV2ZW50KSB7XG4gIERFQlVHX0JVSUxEICYmIGxvZ2dlci5sb2coYFNlbmRpbmcgTENQIHNwYW4gKCR7bGNwVmFsdWV9KWApO1xuICBjb25zdCBzdGFydFRpbWUgPSBtc1RvU2VjKChicm93c2VyUGVyZm9ybWFuY2VUaW1lT3JpZ2luKCkgfHwgMCkgKyAoZW50cnk/LnN0YXJ0VGltZSB8fCAwKSk7XG4gIGNvbnN0IHJvdXRlTmFtZSA9IGdldEN1cnJlbnRTY29wZSgpLmdldFNjb3BlRGF0YSgpLnRyYW5zYWN0aW9uTmFtZTtcbiAgY29uc3QgbmFtZSA9IGVudHJ5ID8gaHRtbFRyZWVBc1N0cmluZyhlbnRyeS5lbGVtZW50KSA6ICdMYXJnZXN0IGNvbnRlbnRmdWwgcGFpbnQnO1xuICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTl06ICdhdXRvLmh0dHAuYnJvd3Nlci5sY3AnLFxuICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09QXTogJ3VpLndlYnZpdGFsLmxjcCcsXG4gICAgW1NFTUFOVElDX0FUVFJJQlVURV9FWENMVVNJVkVfVElNRV06IDAsXG4gICAgLy8gTENQIGlzIGEgcG9pbnQtaW4tdGltZSBtZXRyaWNcbiAgICAvLyBhdHRhY2ggdGhlIHBhZ2Vsb2FkIHNwYW4gaWQgdG8gdGhlIExDUCBzcGFuIHNvIHRoYXQgd2UgY2FuIGxpbmsgdGhlbSBpbiB0aGUgVUlcbiAgICAnc2VudHJ5LnBhZ2Vsb2FkLnNwYW5faWQnOiBwYWdlbG9hZFNwYW5JZCxcbiAgICAvLyBkZXNjcmliZXMgd2hhdCB0cmlnZ2VyZWQgdGhlIHdlYiB2aXRhbCB0byBiZSByZXBvcnRlZFxuICAgICdzZW50cnkucmVwb3J0X2V2ZW50JzogcmVwb3J0RXZlbnRcbiAgfTtcbiAgaWYgKGVudHJ5KSB7XG4gICAgZW50cnkuZWxlbWVudCAmJiAoYXR0cmlidXRlc1snbGNwLmVsZW1lbnQnXSA9IGh0bWxUcmVlQXNTdHJpbmcoZW50cnkuZWxlbWVudCkpO1xuICAgIGVudHJ5LmlkICYmIChhdHRyaWJ1dGVzWydsY3AuaWQnXSA9IGVudHJ5LmlkKTtcblxuICAgIC8vIFRyaW0gVVJMIHRvIHRoZSBmaXJzdCAyMDAgY2hhcmFjdGVycy5cbiAgICBlbnRyeS51cmwgJiYgKGF0dHJpYnV0ZXNbJ2xjcC51cmwnXSA9IGVudHJ5LnVybC50cmltKCkuc2xpY2UoMCwgMjAwKSk7XG5cbiAgICAvLyBsb2FkVGltZSBpcyB0aGUgdGltZSBvZiBMQ1AgdGhhdCdzIHJlbGF0ZWQgdG8gcmVjZWl2aW5nIHRoZSBMQ1AgZWxlbWVudCByZXNwb25zZS4uXG4gICAgZW50cnkubG9hZFRpbWUgIT0gbnVsbCAmJiAoYXR0cmlidXRlc1snbGNwLmxvYWRUaW1lJ10gPSBlbnRyeS5sb2FkVGltZSk7XG5cbiAgICAvLyByZW5kZXJUaW1lIGlzIGxvYWRUaW1lICsgcmVuZGVyaW5nIHRpbWVcbiAgICAvLyBpdCdzIDAgaWYgdGhlIExDUCBlbGVtZW50IGlzIGxvYWRlZCBmcm9tIGEgM3JkIHBhcnR5IG9yaWdpbiB0aGF0IGRvZXNuJ3Qgc2VuZCB0aGVcbiAgICAvLyBgVGltaW5nLUFsbG93LU9yaWdpbmAgaGVhZGVyLlxuICAgIGVudHJ5LnJlbmRlclRpbWUgIT0gbnVsbCAmJiAoYXR0cmlidXRlc1snbGNwLnJlbmRlclRpbWUnXSA9IGVudHJ5LnJlbmRlclRpbWUpO1xuICAgIGVudHJ5LnNpemUgIT0gbnVsbCAmJiAoYXR0cmlidXRlc1snbGNwLnNpemUnXSA9IGVudHJ5LnNpemUpO1xuICB9XG4gIGNvbnN0IHNwYW4gPSBzdGFydFN0YW5kYWxvbmVXZWJWaXRhbFNwYW4oe1xuICAgIG5hbWUsXG4gICAgdHJhbnNhY3Rpb246IHJvdXRlTmFtZSxcbiAgICBhdHRyaWJ1dGVzLFxuICAgIHN0YXJ0VGltZVxuICB9KTtcbiAgaWYgKHNwYW4pIHtcbiAgICBzcGFuLmFkZEV2ZW50KCdsY3AnLCB7XG4gICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9NRUFTVVJFTUVOVF9VTklUXTogJ21pbGxpc2Vjb25kJyxcbiAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1ZBTFVFXTogbGNwVmFsdWVcbiAgICB9KTtcblxuICAgIC8vIExDUCBpcyBhIHBvaW50LWluLXRpbWUgbWV0cmljLCBzbyB3ZSBlbmQgdGhlIHNwYW4gaW1tZWRpYXRlbHlcbiAgICBzcGFuLmVuZChzdGFydFRpbWUpO1xuICB9XG59XG5leHBvcnQgeyBfc2VuZFN0YW5kYWxvbmVMY3BTcGFuLCB0cmFja0xjcEFzU3RhbmRhbG9uZVNwYW4gfTtcbiIsImltcG9ydCB7IGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4sIHNwYW5Ub0pTT04sIHNldE1lYXN1cmVtZW50LCBnZXRBY3RpdmVTcGFuLCBwYXJzZVVybCwgc3RyaW5nTWF0Y2hlc1NvbWVQYXR0ZXJuLCBpc1ByaW1pdGl2ZSwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU4sIGh0bWxUcmVlQXNTdHJpbmcsIGdldENvbXBvbmVudE5hbWUgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vdHlwZXMuanMnO1xuaW1wb3J0IHsgdHJhY2tDbHNBc1N0YW5kYWxvbmVTcGFuIH0gZnJvbSAnLi9jbHMuanMnO1xuaW1wb3J0IHsgYWRkUGVyZm9ybWFuY2VJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBhZGRGaWRJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBhZGRMY3BJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBhZGRUdGZiSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgYWRkQ2xzSW5zdHJ1bWVudGF0aW9uSGFuZGxlciB9IGZyb20gJy4vaW5zdHJ1bWVudC5qcyc7XG5pbXBvcnQgeyB0cmFja0xjcEFzU3RhbmRhbG9uZVNwYW4gfSBmcm9tICcuL2xjcC5qcyc7XG5pbXBvcnQgeyBnZXRCcm93c2VyUGVyZm9ybWFuY2VBUEksIG1zVG9TZWMsIHN0YXJ0QW5kRW5kU3BhbiwgZXh0cmFjdE5ldHdvcmtQcm90b2NvbCwgaXNNZWFzdXJlbWVudFZhbHVlIH0gZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmF0aW9uU3RhcnQgfSBmcm9tICcuL3dlYi12aXRhbHMvbGliL2dldEFjdGl2YXRpb25TdGFydC5qcyc7XG5pbXBvcnQgeyBnZXROYXZpZ2F0aW9uRW50cnkgfSBmcm9tICcuL3dlYi12aXRhbHMvbGliL2dldE5hdmlnYXRpb25FbnRyeS5qcyc7XG5pbXBvcnQgeyBnZXRWaXNpYmlsaXR5V2F0Y2hlciB9IGZyb20gJy4vd2ViLXZpdGFscy9saWIvZ2V0VmlzaWJpbGl0eVdhdGNoZXIuanMnO1xuY29uc3QgTUFYX0lOVF9BU19CWVRFUyA9IDIxNDc0ODM2NDc7XG5sZXQgX3BlcmZvcm1hbmNlQ3Vyc29yID0gMDtcbmxldCBfbWVhc3VyZW1lbnRzID0ge307XG5sZXQgX2xjcEVudHJ5O1xubGV0IF9jbHNFbnRyeTtcblxuLyoqXG4gKiBTdGFydCB0cmFja2luZyB3ZWIgdml0YWxzLlxuICogVGhlIGNhbGxiYWNrIHJldHVybmVkIGJ5IHRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gc3RvcCB0cmFja2luZyAmIGVuc3VyZSBhbGwgbWVhc3VyZW1lbnRzIGFyZSBmaW5hbCAmIGNhcHR1cmVkLlxuICpcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCBmb3JjZXMgd2ViIHZpdGFscyBjb2xsZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0VHJhY2tpbmdXZWJWaXRhbHMoe1xuICByZWNvcmRDbHNTdGFuZGFsb25lU3BhbnMsXG4gIHJlY29yZExjcFN0YW5kYWxvbmVTcGFuc1xufSkge1xuICBjb25zdCBwZXJmb3JtYW5jZSA9IGdldEJyb3dzZXJQZXJmb3JtYW5jZUFQSSgpO1xuICBpZiAocGVyZm9ybWFuY2UgJiYgYnJvd3NlclBlcmZvcm1hbmNlVGltZU9yaWdpbigpKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB3ZSB3YW50IHRvIG1ha2Ugc3VyZSBhbGwgb2YgdGhlc2UgYXJlIGF2YWlsYWJsZSwgZXZlbiBpZiBUUyBpcyBzdXJlIHRoZXkgYXJlXG4gICAgaWYgKHBlcmZvcm1hbmNlLm1hcmspIHtcbiAgICAgIFdJTkRPVy5wZXJmb3JtYW5jZS5tYXJrKCdzZW50cnktdHJhY2luZy1pbml0Jyk7XG4gICAgfVxuICAgIGNvbnN0IGZpZENsZWFudXBDYWxsYmFjayA9IF90cmFja0ZJRCgpO1xuICAgIGNvbnN0IGxjcENsZWFudXBDYWxsYmFjayA9IHJlY29yZExjcFN0YW5kYWxvbmVTcGFucyA/IHRyYWNrTGNwQXNTdGFuZGFsb25lU3BhbigpIDogX3RyYWNrTENQKCk7XG4gICAgY29uc3QgdHRmYkNsZWFudXBDYWxsYmFjayA9IF90cmFja1R0ZmIoKTtcbiAgICBjb25zdCBjbHNDbGVhbnVwQ2FsbGJhY2sgPSByZWNvcmRDbHNTdGFuZGFsb25lU3BhbnMgPyB0cmFja0Nsc0FzU3RhbmRhbG9uZVNwYW4oKSA6IF90cmFja0NMUygpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBmaWRDbGVhbnVwQ2FsbGJhY2soKTtcbiAgICAgIGxjcENsZWFudXBDYWxsYmFjaz8uKCk7XG4gICAgICB0dGZiQ2xlYW51cENhbGxiYWNrKCk7XG4gICAgICBjbHNDbGVhbnVwQ2FsbGJhY2s/LigpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuICgpID0+IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBTdGFydCB0cmFja2luZyBsb25nIHRhc2tzLlxuICovXG5mdW5jdGlvbiBzdGFydFRyYWNraW5nTG9uZ1Rhc2tzKCkge1xuICBhZGRQZXJmb3JtYW5jZUluc3RydW1lbnRhdGlvbkhhbmRsZXIoJ2xvbmd0YXNrJywgKHtcbiAgICBlbnRyaWVzXG4gIH0pID0+IHtcbiAgICBjb25zdCBwYXJlbnQgPSBnZXRBY3RpdmVTcGFuKCk7XG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgb3A6IHBhcmVudE9wLFxuICAgICAgc3RhcnRfdGltZXN0YW1wOiBwYXJlbnRTdGFydFRpbWVzdGFtcFxuICAgIH0gPSBzcGFuVG9KU09OKHBhcmVudCk7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBtc1RvU2VjKGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4oKSArIGVudHJ5LnN0YXJ0VGltZSk7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IG1zVG9TZWMoZW50cnkuZHVyYXRpb24pO1xuICAgICAgaWYgKHBhcmVudE9wID09PSAnbmF2aWdhdGlvbicgJiYgcGFyZW50U3RhcnRUaW1lc3RhbXAgJiYgc3RhcnRUaW1lIDwgcGFyZW50U3RhcnRUaW1lc3RhbXApIHtcbiAgICAgICAgLy8gU2tpcCBhZGRpbmcgYSBzcGFuIGlmIHRoZSBsb25nIHRhc2sgc3RhcnRlZCBiZWZvcmUgdGhlIG5hdmlnYXRpb24gc3RhcnRlZC5cbiAgICAgICAgLy8gYHN0YXJ0QW5kRW5kU3BhbmAgd2lsbCBvdGhlcndpc2UgYWRqdXN0IHRoZSBwYXJlbnQncyBzdGFydCB0aW1lIHRvIHRoZSBzcGFuJ3Mgc3RhcnRcbiAgICAgICAgLy8gdGltZSwgcG90ZW50aWFsbHkgc2tld2luZyB0aGUgZHVyYXRpb24gb2YgdGhlIGFjdHVhbCBuYXZpZ2F0aW9uIGFzIHJlcG9ydGVkIHZpYSBvdXJcbiAgICAgICAgLy8gcm91dGluZyBpbnN0cnVtZW50YXRpb25zXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgc3RhcnRBbmRFbmRTcGFuKHBhcmVudCwgc3RhcnRUaW1lLCBzdGFydFRpbWUgKyBkdXJhdGlvbiwge1xuICAgICAgICBuYW1lOiAnTWFpbiBVSSB0aHJlYWQgYmxvY2tlZCcsXG4gICAgICAgIG9wOiAndWkubG9uZy10YXNrJyxcbiAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTl06ICdhdXRvLnVpLmJyb3dzZXIubWV0cmljcydcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBTdGFydCB0cmFja2luZyBsb25nIGFuaW1hdGlvbiBmcmFtZXMuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0VHJhY2tpbmdMb25nQW5pbWF0aW9uRnJhbWVzKCkge1xuICAvLyBOT1RFOiB0aGUgY3VycmVudCB3ZWItdml0YWxzIHZlcnNpb24gKDMuNS4yKSBkb2VzIG5vdCBzdXBwb3J0IGxvbmctYW5pbWF0aW9uLWZyYW1lLCBzb1xuICAvLyB3ZSBkaXJlY3RseSBvYnNlcnZlIGBsb25nLWFuaW1hdGlvbi1mcmFtZWAgZXZlbnRzIGluc3RlYWQgb2YgdGhyb3VnaCB0aGUgd2ViLXZpdGFsc1xuICAvLyBgb2JzZXJ2ZWAgaGVscGVyIGZ1bmN0aW9uLlxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBQZXJmb3JtYW5jZU9ic2VydmVyKGxpc3QgPT4ge1xuICAgIGNvbnN0IHBhcmVudCA9IGdldEFjdGl2ZVNwYW4oKTtcbiAgICBpZiAoIXBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGxpc3QuZ2V0RW50cmllcygpKSB7XG4gICAgICBpZiAoIWVudHJ5LnNjcmlwdHNbMF0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBtc1RvU2VjKGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4oKSArIGVudHJ5LnN0YXJ0VGltZSk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHN0YXJ0X3RpbWVzdGFtcDogcGFyZW50U3RhcnRUaW1lc3RhbXAsXG4gICAgICAgIG9wOiBwYXJlbnRPcFxuICAgICAgfSA9IHNwYW5Ub0pTT04ocGFyZW50KTtcbiAgICAgIGlmIChwYXJlbnRPcCA9PT0gJ25hdmlnYXRpb24nICYmIHBhcmVudFN0YXJ0VGltZXN0YW1wICYmIHN0YXJ0VGltZSA8IHBhcmVudFN0YXJ0VGltZXN0YW1wKSB7XG4gICAgICAgIC8vIFNraXAgYWRkaW5nIHRoZSBzcGFuIGlmIHRoZSBsb25nIGFuaW1hdGlvbiBmcmFtZSBzdGFydGVkIGJlZm9yZSB0aGUgbmF2aWdhdGlvbiBzdGFydGVkLlxuICAgICAgICAvLyBgc3RhcnRBbmRFbmRTcGFuYCB3aWxsIG90aGVyd2lzZSBhZGp1c3QgdGhlIHBhcmVudCdzIHN0YXJ0IHRpbWUgdG8gdGhlIHNwYW4ncyBzdGFydFxuICAgICAgICAvLyB0aW1lLCBwb3RlbnRpYWxseSBza2V3aW5nIHRoZSBkdXJhdGlvbiBvZiB0aGUgYWN0dWFsIG5hdmlnYXRpb24gYXMgcmVwb3J0ZWQgdmlhIG91clxuICAgICAgICAvLyByb3V0aW5nIGluc3RydW1lbnRhdGlvbnNcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IG1zVG9TZWMoZW50cnkuZHVyYXRpb24pO1xuICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOXTogJ2F1dG8udWkuYnJvd3Nlci5tZXRyaWNzJ1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGluaXRpYWxTY3JpcHQgPSBlbnRyeS5zY3JpcHRzWzBdO1xuICAgICAgY29uc3Qge1xuICAgICAgICBpbnZva2VyLFxuICAgICAgICBpbnZva2VyVHlwZSxcbiAgICAgICAgc291cmNlVVJMLFxuICAgICAgICBzb3VyY2VGdW5jdGlvbk5hbWUsXG4gICAgICAgIHNvdXJjZUNoYXJQb3NpdGlvblxuICAgICAgfSA9IGluaXRpYWxTY3JpcHQ7XG4gICAgICBhdHRyaWJ1dGVzWydicm93c2VyLnNjcmlwdC5pbnZva2VyJ10gPSBpbnZva2VyO1xuICAgICAgYXR0cmlidXRlc1snYnJvd3Nlci5zY3JpcHQuaW52b2tlcl90eXBlJ10gPSBpbnZva2VyVHlwZTtcbiAgICAgIGlmIChzb3VyY2VVUkwpIHtcbiAgICAgICAgYXR0cmlidXRlc1snY29kZS5maWxlcGF0aCddID0gc291cmNlVVJMO1xuICAgICAgfVxuICAgICAgaWYgKHNvdXJjZUZ1bmN0aW9uTmFtZSkge1xuICAgICAgICBhdHRyaWJ1dGVzWydjb2RlLmZ1bmN0aW9uJ10gPSBzb3VyY2VGdW5jdGlvbk5hbWU7XG4gICAgICB9XG4gICAgICBpZiAoc291cmNlQ2hhclBvc2l0aW9uICE9PSAtMSkge1xuICAgICAgICBhdHRyaWJ1dGVzWydicm93c2VyLnNjcmlwdC5zb3VyY2VfY2hhcl9wb3NpdGlvbiddID0gc291cmNlQ2hhclBvc2l0aW9uO1xuICAgICAgfVxuICAgICAgc3RhcnRBbmRFbmRTcGFuKHBhcmVudCwgc3RhcnRUaW1lLCBzdGFydFRpbWUgKyBkdXJhdGlvbiwge1xuICAgICAgICBuYW1lOiAnTWFpbiBVSSB0aHJlYWQgYmxvY2tlZCcsXG4gICAgICAgIG9wOiAndWkubG9uZy1hbmltYXRpb24tZnJhbWUnLFxuICAgICAgICBhdHRyaWJ1dGVzXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBvYnNlcnZlci5vYnNlcnZlKHtcbiAgICB0eXBlOiAnbG9uZy1hbmltYXRpb24tZnJhbWUnLFxuICAgIGJ1ZmZlcmVkOiB0cnVlXG4gIH0pO1xufVxuXG4vKipcbiAqIFN0YXJ0IHRyYWNraW5nIGludGVyYWN0aW9uIGV2ZW50cy5cbiAqL1xuZnVuY3Rpb24gc3RhcnRUcmFja2luZ0ludGVyYWN0aW9ucygpIHtcbiAgYWRkUGVyZm9ybWFuY2VJbnN0cnVtZW50YXRpb25IYW5kbGVyKCdldmVudCcsICh7XG4gICAgZW50cmllc1xuICB9KSA9PiB7XG4gICAgY29uc3QgcGFyZW50ID0gZ2V0QWN0aXZlU3BhbigpO1xuICAgIGlmICghcGFyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKGVudHJ5Lm5hbWUgPT09ICdjbGljaycpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gbXNUb1NlYyhicm93c2VyUGVyZm9ybWFuY2VUaW1lT3JpZ2luKCkgKyBlbnRyeS5zdGFydFRpbWUpO1xuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IG1zVG9TZWMoZW50cnkuZHVyYXRpb24pO1xuICAgICAgICBjb25zdCBzcGFuT3B0aW9ucyA9IHtcbiAgICAgICAgICBuYW1lOiBodG1sVHJlZUFzU3RyaW5nKGVudHJ5LnRhcmdldCksXG4gICAgICAgICAgb3A6IGB1aS5pbnRlcmFjdGlvbi4ke2VudHJ5Lm5hbWV9YCxcbiAgICAgICAgICBzdGFydFRpbWU6IHN0YXJ0VGltZSxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by51aS5icm93c2VyLm1ldHJpY3MnXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb21wb25lbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZShlbnRyeS50YXJnZXQpO1xuICAgICAgICBpZiAoY29tcG9uZW50TmFtZSkge1xuICAgICAgICAgIHNwYW5PcHRpb25zLmF0dHJpYnV0ZXNbJ3VpLmNvbXBvbmVudF9uYW1lJ10gPSBjb21wb25lbnROYW1lO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0QW5kRW5kU3BhbihwYXJlbnQsIHN0YXJ0VGltZSwgc3RhcnRUaW1lICsgZHVyYXRpb24sIHNwYW5PcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFN0YXJ0cyB0cmFja2luZyB0aGUgQ3VtdWxhdGl2ZSBMYXlvdXQgU2hpZnQgb24gdGhlIGN1cnJlbnQgcGFnZSBhbmQgY29sbGVjdHMgdGhlIHZhbHVlIGFuZCBsYXN0IGVudHJ5XG4gKiB0byB0aGUgYF9tZWFzdXJlbWVudHNgIG9iamVjdCB3aGljaCB1bHRpbWF0ZWx5IGlzIGFwcGxpZWQgdG8gdGhlIHBhZ2Vsb2FkIHNwYW4ncyBtZWFzdXJlbWVudHMuXG4gKi9cbmZ1bmN0aW9uIF90cmFja0NMUygpIHtcbiAgcmV0dXJuIGFkZENsc0luc3RydW1lbnRhdGlvbkhhbmRsZXIoKHtcbiAgICBtZXRyaWNcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGVudHJ5ID0gbWV0cmljLmVudHJpZXNbbWV0cmljLmVudHJpZXMubGVuZ3RoIC0gMV07XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfbWVhc3VyZW1lbnRzWydjbHMnXSA9IHtcbiAgICAgIHZhbHVlOiBtZXRyaWMudmFsdWUsXG4gICAgICB1bml0OiAnJ1xuICAgIH07XG4gICAgX2Nsc0VudHJ5ID0gZW50cnk7XG4gIH0sIHRydWUpO1xufVxuXG4vKiogU3RhcnRzIHRyYWNraW5nIHRoZSBMYXJnZXN0IENvbnRlbnRmdWwgUGFpbnQgb24gdGhlIGN1cnJlbnQgcGFnZS4gKi9cbmZ1bmN0aW9uIF90cmFja0xDUCgpIHtcbiAgcmV0dXJuIGFkZExjcEluc3RydW1lbnRhdGlvbkhhbmRsZXIoKHtcbiAgICBtZXRyaWNcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGVudHJ5ID0gbWV0cmljLmVudHJpZXNbbWV0cmljLmVudHJpZXMubGVuZ3RoIC0gMV07XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfbWVhc3VyZW1lbnRzWydsY3AnXSA9IHtcbiAgICAgIHZhbHVlOiBtZXRyaWMudmFsdWUsXG4gICAgICB1bml0OiAnbWlsbGlzZWNvbmQnXG4gICAgfTtcbiAgICBfbGNwRW50cnkgPSBlbnRyeTtcbiAgfSwgdHJ1ZSk7XG59XG5cbi8qKiBTdGFydHMgdHJhY2tpbmcgdGhlIEZpcnN0IElucHV0IERlbGF5IG9uIHRoZSBjdXJyZW50IHBhZ2UuICovXG5mdW5jdGlvbiBfdHJhY2tGSUQoKSB7XG4gIHJldHVybiBhZGRGaWRJbnN0cnVtZW50YXRpb25IYW5kbGVyKCh7XG4gICAgbWV0cmljXG4gIH0pID0+IHtcbiAgICBjb25zdCBlbnRyeSA9IG1ldHJpYy5lbnRyaWVzW21ldHJpYy5lbnRyaWVzLmxlbmd0aCAtIDFdO1xuICAgIGlmICghZW50cnkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGltZU9yaWdpbiA9IG1zVG9TZWMoYnJvd3NlclBlcmZvcm1hbmNlVGltZU9yaWdpbigpKTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBtc1RvU2VjKGVudHJ5LnN0YXJ0VGltZSk7XG4gICAgX21lYXN1cmVtZW50c1snZmlkJ10gPSB7XG4gICAgICB2YWx1ZTogbWV0cmljLnZhbHVlLFxuICAgICAgdW5pdDogJ21pbGxpc2Vjb25kJ1xuICAgIH07XG4gICAgX21lYXN1cmVtZW50c1snbWFyay5maWQnXSA9IHtcbiAgICAgIHZhbHVlOiB0aW1lT3JpZ2luICsgc3RhcnRUaW1lLFxuICAgICAgdW5pdDogJ3NlY29uZCdcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIF90cmFja1R0ZmIoKSB7XG4gIHJldHVybiBhZGRUdGZiSW5zdHJ1bWVudGF0aW9uSGFuZGxlcigoe1xuICAgIG1ldHJpY1xuICB9KSA9PiB7XG4gICAgY29uc3QgZW50cnkgPSBtZXRyaWMuZW50cmllc1ttZXRyaWMuZW50cmllcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9tZWFzdXJlbWVudHNbJ3R0ZmInXSA9IHtcbiAgICAgIHZhbHVlOiBtZXRyaWMudmFsdWUsXG4gICAgICB1bml0OiAnbWlsbGlzZWNvbmQnXG4gICAgfTtcbiAgfSk7XG59XG5cbi8qKiBBZGQgcGVyZm9ybWFuY2UgcmVsYXRlZCBzcGFucyB0byBhIHRyYW5zYWN0aW9uICovXG5mdW5jdGlvbiBhZGRQZXJmb3JtYW5jZUVudHJpZXMoc3Bhbiwgb3B0aW9ucykge1xuICBjb25zdCBwZXJmb3JtYW5jZSA9IGdldEJyb3dzZXJQZXJmb3JtYW5jZUFQSSgpO1xuICBjb25zdCBvcmlnaW4gPSBicm93c2VyUGVyZm9ybWFuY2VUaW1lT3JpZ2luKCk7XG4gIGlmICghcGVyZm9ybWFuY2U/LmdldEVudHJpZXMgfHwgIW9yaWdpbikge1xuICAgIC8vIEdhdGVrZWVwZXIgaWYgcGVyZm9ybWFuY2UgQVBJIG5vdCBhdmFpbGFibGVcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdGltZU9yaWdpbiA9IG1zVG9TZWMob3JpZ2luKTtcbiAgY29uc3QgcGVyZm9ybWFuY2VFbnRyaWVzID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllcygpO1xuICBjb25zdCB7XG4gICAgb3AsXG4gICAgc3RhcnRfdGltZXN0YW1wOiB0cmFuc2FjdGlvblN0YXJ0VGltZVxuICB9ID0gc3BhblRvSlNPTihzcGFuKTtcbiAgcGVyZm9ybWFuY2VFbnRyaWVzLnNsaWNlKF9wZXJmb3JtYW5jZUN1cnNvcikuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbXNUb1NlYyhlbnRyeS5zdGFydFRpbWUpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gbXNUb1NlYyhcbiAgICAvLyBJbmV4cGxpY2FibHksIENocm9tZSBzb21ldGltZXMgZW1pdHMgYSBuZWdhdGl2ZSBkdXJhdGlvbi4gV2UgbmVlZCB0byB3b3JrIGFyb3VuZCB0aGlzLlxuICAgIC8vIFRoZXJlIGlzIGEgU08gcG9zdCBhdHRlbXB0aW5nIHRvIGV4cGxhaW4gdGhpcywgYnV0IGl0IGxlYXZlcyBvbmUgd2l0aCBvcGVuIHF1ZXN0aW9uczogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjMxOTE5MTgvcGVmb3JtYW5jZS1nZXRlbnRyaWVzLWFuZC1uZWdhdGl2ZS1kdXJhdGlvbi1kaXNwbGF5XG4gICAgLy8gVGhlIHdheSB3ZSBjbGFtcCB0aGUgdmFsdWUgaXMgcHJvYmFibHkgbm90IGFjY3VyYXRlLCBzaW5jZSB3ZSBoYXZlIG9ic2VydmVkIHRoaXMgaGFwcGVuIGZvciB0aGluZ3MgdGhhdCBtYXkgdGFrZSBhIHdoaWxlIHRvIGxvYWQsIGxpa2UgZm9yIGV4YW1wbGUgdGhlIHJlcGxheSB3b3JrZXIuXG4gICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgd2h5IHRoaXMgaGFwcGVucyBhbmQgaG93IHRvIHByb3Blcmx5IG1pdGlnYXRlLiBGb3Igbm93LCB0aGlzIGlzIGEgd29ya2Fyb3VuZCB0byBwcmV2ZW50IHRyYW5zYWN0aW9ucyBiZWluZyBkcm9wcGVkIGR1ZSB0byBuZWdhdGl2ZSBkdXJhdGlvbiBzcGFucy5cbiAgICBNYXRoLm1heCgwLCBlbnRyeS5kdXJhdGlvbikpO1xuICAgIGlmIChvcCA9PT0gJ25hdmlnYXRpb24nICYmIHRyYW5zYWN0aW9uU3RhcnRUaW1lICYmIHRpbWVPcmlnaW4gKyBzdGFydFRpbWUgPCB0cmFuc2FjdGlvblN0YXJ0VGltZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKGVudHJ5LmVudHJ5VHlwZSkge1xuICAgICAgY2FzZSAnbmF2aWdhdGlvbic6XG4gICAgICAgIHtcbiAgICAgICAgICBfYWRkTmF2aWdhdGlvblNwYW5zKHNwYW4sIGVudHJ5LCB0aW1lT3JpZ2luKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgY2FzZSAnbWFyayc6XG4gICAgICBjYXNlICdwYWludCc6XG4gICAgICBjYXNlICdtZWFzdXJlJzpcbiAgICAgICAge1xuICAgICAgICAgIF9hZGRNZWFzdXJlU3BhbnMoc3BhbiwgZW50cnksIHN0YXJ0VGltZSwgZHVyYXRpb24sIHRpbWVPcmlnaW4sIG9wdGlvbnMuaWdub3JlUGVyZm9ybWFuY2VBcGlTcGFucyk7XG5cbiAgICAgICAgICAvLyBjYXB0dXJlIHdlYiB2aXRhbHNcbiAgICAgICAgICBjb25zdCBmaXJzdEhpZGRlbiA9IGdldFZpc2liaWxpdHlXYXRjaGVyKCk7XG4gICAgICAgICAgLy8gT25seSByZXBvcnQgaWYgdGhlIHBhZ2Ugd2Fzbid0IGhpZGRlbiBwcmlvciB0byB0aGUgd2ViIHZpdGFsLlxuICAgICAgICAgIGNvbnN0IHNob3VsZFJlY29yZCA9IGVudHJ5LnN0YXJ0VGltZSA8IGZpcnN0SGlkZGVuLmZpcnN0SGlkZGVuVGltZTtcbiAgICAgICAgICBpZiAoZW50cnkubmFtZSA9PT0gJ2ZpcnN0LXBhaW50JyAmJiBzaG91bGRSZWNvcmQpIHtcbiAgICAgICAgICAgIF9tZWFzdXJlbWVudHNbJ2ZwJ10gPSB7XG4gICAgICAgICAgICAgIHZhbHVlOiBlbnRyeS5zdGFydFRpbWUsXG4gICAgICAgICAgICAgIHVuaXQ6ICdtaWxsaXNlY29uZCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlbnRyeS5uYW1lID09PSAnZmlyc3QtY29udGVudGZ1bC1wYWludCcgJiYgc2hvdWxkUmVjb3JkKSB7XG4gICAgICAgICAgICBfbWVhc3VyZW1lbnRzWydmY3AnXSA9IHtcbiAgICAgICAgICAgICAgdmFsdWU6IGVudHJ5LnN0YXJ0VGltZSxcbiAgICAgICAgICAgICAgdW5pdDogJ21pbGxpc2Vjb25kJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ3Jlc291cmNlJzpcbiAgICAgICAge1xuICAgICAgICAgIF9hZGRSZXNvdXJjZVNwYW5zKHNwYW4sIGVudHJ5LCBlbnRyeS5uYW1lLCBzdGFydFRpbWUsIGR1cmF0aW9uLCB0aW1lT3JpZ2luLCBvcHRpb25zLmlnbm9yZVJlc291cmNlU3BhbnMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAvLyBJZ25vcmUgb3RoZXIgZW50cnkgdHlwZXMuXG4gICAgfVxuICB9KTtcbiAgX3BlcmZvcm1hbmNlQ3Vyc29yID0gTWF0aC5tYXgocGVyZm9ybWFuY2VFbnRyaWVzLmxlbmd0aCAtIDEsIDApO1xuICBfdHJhY2tOYXZpZ2F0b3Ioc3Bhbik7XG5cbiAgLy8gTWVhc3VyZW1lbnRzIGFyZSBvbmx5IGF2YWlsYWJsZSBmb3IgcGFnZWxvYWQgdHJhbnNhY3Rpb25zXG4gIGlmIChvcCA9PT0gJ3BhZ2Vsb2FkJykge1xuICAgIF9hZGRUdGZiUmVxdWVzdFRpbWVUb01lYXN1cmVtZW50cyhfbWVhc3VyZW1lbnRzKTtcbiAgICBjb25zdCBmaWRNYXJrID0gX21lYXN1cmVtZW50c1snbWFyay5maWQnXTtcbiAgICBpZiAoZmlkTWFyayAmJiBfbWVhc3VyZW1lbnRzWydmaWQnXSkge1xuICAgICAgLy8gY3JlYXRlIHNwYW4gZm9yIEZJRFxuICAgICAgc3RhcnRBbmRFbmRTcGFuKHNwYW4sIGZpZE1hcmsudmFsdWUsIGZpZE1hcmsudmFsdWUgKyBtc1RvU2VjKF9tZWFzdXJlbWVudHNbJ2ZpZCddLnZhbHVlKSwge1xuICAgICAgICBuYW1lOiAnZmlyc3QgaW5wdXQgZGVsYXknLFxuICAgICAgICBvcDogJ3VpLmFjdGlvbicsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by51aS5icm93c2VyLm1ldHJpY3MnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBEZWxldGUgbWFyay5maWQgYXMgd2UgZG9uJ3Qgd2FudCBpdCB0byBiZSBwYXJ0IG9mIGZpbmFsIHBheWxvYWRcbiAgICAgIGRlbGV0ZSBfbWVhc3VyZW1lbnRzWydtYXJrLmZpZCddO1xuICAgIH1cblxuICAgIC8vIElmIEZDUCBpcyBub3QgcmVjb3JkZWQgd2Ugc2hvdWxkIG5vdCByZWNvcmQgdGhlIGNscyB2YWx1ZVxuICAgIC8vIGFjY29yZGluZyB0byB0aGUgbmV3IGRlZmluaXRpb24gb2YgQ0xTLlxuICAgIC8vIFRPRE86IENoZWNrIGlmIHRoZSBmaXJzdCBjb25kaXRpb24gaXMgc3RpbGwgbmVjZXNzYXJ5OiBgb25DTFNgIGFscmVhZHkgb25seSBmaXJlcyBvbmNlIGBvbkZDUGAgd2FzIGNhbGxlZC5cbiAgICBpZiAoISgnZmNwJyBpbiBfbWVhc3VyZW1lbnRzKSB8fCAhb3B0aW9ucy5yZWNvcmRDbHNPblBhZ2Vsb2FkU3Bhbikge1xuICAgICAgZGVsZXRlIF9tZWFzdXJlbWVudHMuY2xzO1xuICAgIH1cblxuICAgIC8vIElmIExDUCBzdGFuZGFsb25lIHNwYW5zIGFyZSBlbmFibGVkLCBkb24ndCByZWNvcmQgTENQIGFzIGEgbWVhc3VyZW1lbnRcbiAgICBpZiAoIW9wdGlvbnMucmVjb3JkTGNwT25QYWdlbG9hZFNwYW4pIHtcbiAgICAgIGRlbGV0ZSBfbWVhc3VyZW1lbnRzLmxjcDtcbiAgICB9XG4gICAgT2JqZWN0LmVudHJpZXMoX21lYXN1cmVtZW50cykuZm9yRWFjaCgoW21lYXN1cmVtZW50TmFtZSwgbWVhc3VyZW1lbnRdKSA9PiB7XG4gICAgICBzZXRNZWFzdXJlbWVudChtZWFzdXJlbWVudE5hbWUsIG1lYXN1cmVtZW50LnZhbHVlLCBtZWFzdXJlbWVudC51bml0KTtcbiAgICB9KTtcblxuICAgIC8vIFNldCB0aW1lT3JpZ2luIHdoaWNoIGRlbm90ZXMgdGhlIHRpbWVzdGFtcCB3aGljaCB0byBiYXNlIHRoZSBMQ1AvRkNQL0ZQL1RURkIgbWVhc3VyZW1lbnRzIG9uXG4gICAgc3Bhbi5zZXRBdHRyaWJ1dGUoJ3BlcmZvcm1hbmNlLnRpbWVPcmlnaW4nLCB0aW1lT3JpZ2luKTtcblxuICAgIC8vIEluIHByZXJlbmRlcmluZyBzY2VuYXJpb3MsIHdoZXJlIGEgcGFnZSBtaWdodCBiZSBwcmVmZXRjaGVkIGFuZCBwcmUtcmVuZGVyZWQgYmVmb3JlIHRoZSB1c2VyIGNsaWNrcyB0aGUgbGluayxcbiAgICAvLyB0aGUgbmF2aWdhdGlvbiBzdGFydHMgZWFybGllciB0aGFuIHdoZW4gdGhlIHVzZXIgY2xpY2tzIGl0LiBXZWIgVml0YWxzIHNob3VsZCBhbHdheXMgYmUgYmFzZWQgb24gdGhlXG4gICAgLy8gdXNlci1wZXJjZWl2ZWQgdGltZSwgc28gdGhleSBhcmUgbm90IHJlcG9ydGVkIGZyb20gdGhlIGFjdHVhbCBzdGFydCBvZiB0aGUgbmF2aWdhdGlvbiwgYnV0IHJhdGhlciBmcm9tIHRoZVxuICAgIC8vIHRpbWUgd2hlcmUgdGhlIHVzZXIgYWN0aXZlbHkgc3RhcnRlZCB0aGUgbmF2aWdhdGlvbiwgZm9yIGV4YW1wbGUgYnkgY2xpY2tpbmcgYSBsaW5rLlxuICAgIC8vIFRoaXMgaXMgdXNlciBhY3Rpb24gaXMgY2FsbGVkIFwiYWN0aXZhdGlvblwiIGFuZCB0aGUgdGltZSBiZXR3ZWVuIG5hdmlnYXRpb24gYW5kIGFjdGl2YXRpb24gaXMgc3RvcmVkIGluXG4gICAgLy8gdGhlIGBhY3RpdmF0aW9uU3RhcnRgIGF0dHJpYnV0ZSBvZiB0aGUgXCJuYXZpZ2F0aW9uXCIgUGVyZm9ybWFuY2VFbnRyeS5cbiAgICBzcGFuLnNldEF0dHJpYnV0ZSgncGVyZm9ybWFuY2UuYWN0aXZhdGlvblN0YXJ0JywgZ2V0QWN0aXZhdGlvblN0YXJ0KCkpO1xuICAgIF9zZXRXZWJWaXRhbEF0dHJpYnV0ZXMoc3Bhbiwgb3B0aW9ucyk7XG4gIH1cbiAgX2xjcEVudHJ5ID0gdW5kZWZpbmVkO1xuICBfY2xzRW50cnkgPSB1bmRlZmluZWQ7XG4gIF9tZWFzdXJlbWVudHMgPSB7fTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgbWVhc3VyZSByZWxhdGVkIHNwYW5zLlxuICogRXhwb3J0ZWQgb25seSBmb3IgdGVzdHMuXG4gKi9cbmZ1bmN0aW9uIF9hZGRNZWFzdXJlU3BhbnMoc3BhbiwgZW50cnksIHN0YXJ0VGltZSwgZHVyYXRpb24sIHRpbWVPcmlnaW4sIGlnbm9yZVBlcmZvcm1hbmNlQXBpU3BhbnMpIHtcbiAgaWYgKFsnbWFyaycsICdtZWFzdXJlJ10uaW5jbHVkZXMoZW50cnkuZW50cnlUeXBlKSAmJiBzdHJpbmdNYXRjaGVzU29tZVBhdHRlcm4oZW50cnkubmFtZSwgaWdub3JlUGVyZm9ybWFuY2VBcGlTcGFucykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbmF2RW50cnkgPSBnZXROYXZpZ2F0aW9uRW50cnkoZmFsc2UpO1xuICBjb25zdCByZXF1ZXN0VGltZSA9IG1zVG9TZWMobmF2RW50cnkgPyBuYXZFbnRyeS5yZXF1ZXN0U3RhcnQgOiAwKTtcbiAgLy8gQmVjYXVzZSBwZXJmb3JtYW5jZS5tZWFzdXJlIGFjY2VwdHMgYXJiaXRyYXJ5IHRpbWVzdGFtcHMgaXQgY2FuIHByb2R1Y2VcbiAgLy8gc3BhbnMgdGhhdCBoYXBwZW4gYmVmb3JlIHRoZSBicm93c2VyIGV2ZW4gbWFrZXMgYSByZXF1ZXN0IGZvciB0aGUgcGFnZS5cbiAgLy9cbiAgLy8gQW4gZXhhbXBsZSBvZiB0aGlzIGlzIHRoZSBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBOZXh0LmpzLWJlZm9yZS1oeWRyYXRpb25cbiAgLy8gc3BhbnMgY3JlYXRlZCBieSB0aGUgTmV4dC5qcyBmcmFtZXdvcmsuXG4gIC8vXG4gIC8vIFRvIHByZXZlbnQgdGhpcyB3ZSB3aWxsIHBpbiB0aGUgc3RhcnQgdGltZXN0YW1wIHRvIHRoZSByZXF1ZXN0IHN0YXJ0IHRpbWVcbiAgLy8gVGhpcyBkb2VzIG1ha2UgZHVyYXRpb24gaW5hY2N1cmF0ZSwgc28gaWYgdGhpcyBkb2VzIGhhcHBlbiwgd2Ugd2lsbCBhZGRcbiAgLy8gYW4gYXR0cmlidXRlIHRvIHRoZSBzcGFuXG4gIGNvbnN0IG1lYXN1cmVTdGFydFRpbWVzdGFtcCA9IHRpbWVPcmlnaW4gKyBNYXRoLm1heChzdGFydFRpbWUsIHJlcXVlc3RUaW1lKTtcbiAgY29uc3Qgc3RhcnRUaW1lU3RhbXAgPSB0aW1lT3JpZ2luICsgc3RhcnRUaW1lO1xuICBjb25zdCBtZWFzdXJlRW5kVGltZXN0YW1wID0gc3RhcnRUaW1lU3RhbXAgKyBkdXJhdGlvbjtcbiAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by5yZXNvdXJjZS5icm93c2VyLm1ldHJpY3MnXG4gIH07XG4gIGlmIChtZWFzdXJlU3RhcnRUaW1lc3RhbXAgIT09IHN0YXJ0VGltZVN0YW1wKSB7XG4gICAgYXR0cmlidXRlc1snc2VudHJ5LmJyb3dzZXIubWVhc3VyZV9oYXBwZW5lZF9iZWZvcmVfcmVxdWVzdCddID0gdHJ1ZTtcbiAgICBhdHRyaWJ1dGVzWydzZW50cnkuYnJvd3Nlci5tZWFzdXJlX3N0YXJ0X3RpbWUnXSA9IG1lYXN1cmVTdGFydFRpbWVzdGFtcDtcbiAgfVxuICBfYWRkRGV0YWlsVG9TcGFuQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBlbnRyeSk7XG5cbiAgLy8gTWVhc3VyZW1lbnRzIGZyb20gdGhpcmQgcGFydGllcyBjYW4gYmUgb2ZmLCB3aGljaCB3b3VsZCBjcmVhdGUgaW52YWxpZCBzcGFucywgZHJvcHBpbmcgdHJhbnNhY3Rpb25zIGluIHRoZSBwcm9jZXNzLlxuICBpZiAobWVhc3VyZVN0YXJ0VGltZXN0YW1wIDw9IG1lYXN1cmVFbmRUaW1lc3RhbXApIHtcbiAgICBzdGFydEFuZEVuZFNwYW4oc3BhbiwgbWVhc3VyZVN0YXJ0VGltZXN0YW1wLCBtZWFzdXJlRW5kVGltZXN0YW1wLCB7XG4gICAgICBuYW1lOiBlbnRyeS5uYW1lLFxuICAgICAgb3A6IGVudHJ5LmVudHJ5VHlwZSxcbiAgICAgIGF0dHJpYnV0ZXNcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gX2FkZERldGFpbFRvU3BhbkF0dHJpYnV0ZXMoYXR0cmlidXRlcywgcGVyZm9ybWFuY2VNZWFzdXJlKSB7XG4gIHRyeSB7XG4gICAgLy8gQWNjZXNzaW5nIGRldGFpbCBtaWdodCB0aHJvdyBpbiBzb21lIGJyb3dzZXJzIChlLmcuLCBGaXJlZm94KSBkdWUgdG8gc2VjdXJpdHkgcmVzdHJpY3Rpb25zXG4gICAgY29uc3QgZGV0YWlsID0gcGVyZm9ybWFuY2VNZWFzdXJlLmRldGFpbDtcbiAgICBpZiAoIWRldGFpbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgZGV0YWlsIGJhc2VkIG9uIGl0cyB0eXBlXG4gICAgaWYgKHR5cGVvZiBkZXRhaWwgPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyBIYW5kbGUgb2JqZWN0IGRldGFpbHNcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRldGFpbCkpIHtcbiAgICAgICAgaWYgKHZhbHVlICYmIGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgICAgIGF0dHJpYnV0ZXNbYHNlbnRyeS5icm93c2VyLm1lYXN1cmUuZGV0YWlsLiR7a2V5fWBdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIHVzZXIgZGVmaW5lZCBzbyB3ZSBjYW4ndCBndWFyYW50ZWUgaXQncyBzZXJpYWxpemFibGVcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNbYHNlbnRyeS5icm93c2VyLm1lYXN1cmUuZGV0YWlsLiR7a2V5fWBdID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLy8gU2tpcCB2YWx1ZXMgdGhhdCBjYW4ndCBiZSBzdHJpbmdpZmllZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNQcmltaXRpdmUoZGV0YWlsKSkge1xuICAgICAgLy8gSGFuZGxlIHByaW1pdGl2ZSBkZXRhaWxzXG4gICAgICBhdHRyaWJ1dGVzWydzZW50cnkuYnJvd3Nlci5tZWFzdXJlLmRldGFpbCddID0gZGV0YWlsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgYXR0cmlidXRlc1snc2VudHJ5LmJyb3dzZXIubWVhc3VyZS5kZXRhaWwnXSA9IEpTT04uc3RyaW5naWZ5KGRldGFpbCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBTa2lwIGlmIHN0cmluZ2lmaWNhdGlvbiBmYWlsc1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gU2lsZW50bHkgaWdub3JlIGFueSBlcnJvcnMgd2hlbiBhY2Nlc3NpbmcgZGV0YWlsXG4gICAgLy8gVGhpcyBoYW5kbGVzIHRoZSBGaXJlZm94IFwiUGVybWlzc2lvbiBkZW5pZWQgdG8gYWNjZXNzIG9iamVjdFwiIGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBJbnN0cnVtZW50IG5hdmlnYXRpb24gZW50cmllc1xuICogZXhwb3J0ZWQgb25seSBmb3IgdGVzdHNcbiAqL1xuZnVuY3Rpb24gX2FkZE5hdmlnYXRpb25TcGFucyhzcGFuLCBlbnRyeSwgdGltZU9yaWdpbikge1xuICBbJ3VubG9hZEV2ZW50JywgJ3JlZGlyZWN0JywgJ2RvbUNvbnRlbnRMb2FkZWRFdmVudCcsICdsb2FkRXZlbnQnLCAnY29ubmVjdCddLmZvckVhY2goZXZlbnQgPT4ge1xuICAgIF9hZGRQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmcoc3BhbiwgZW50cnksIGV2ZW50LCB0aW1lT3JpZ2luKTtcbiAgfSk7XG4gIF9hZGRQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmcoc3BhbiwgZW50cnksICdzZWN1cmVDb25uZWN0aW9uJywgdGltZU9yaWdpbiwgJ1RMUy9TU0wnKTtcbiAgX2FkZFBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyhzcGFuLCBlbnRyeSwgJ2ZldGNoJywgdGltZU9yaWdpbiwgJ2NhY2hlJyk7XG4gIF9hZGRQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmcoc3BhbiwgZW50cnksICdkb21haW5Mb29rdXAnLCB0aW1lT3JpZ2luLCAnRE5TJyk7XG4gIF9hZGRSZXF1ZXN0KHNwYW4sIGVudHJ5LCB0aW1lT3JpZ2luKTtcbn1cblxuLyoqIENyZWF0ZSBwZXJmb3JtYW5jZSBuYXZpZ2F0aW9uIHJlbGF0ZWQgc3BhbnMgKi9cbmZ1bmN0aW9uIF9hZGRQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmcoc3BhbiwgZW50cnksIGV2ZW50LCB0aW1lT3JpZ2luLCBuYW1lID0gZXZlbnQpIHtcbiAgY29uc3QgZXZlbnRFbmQgPSBfZ2V0RW5kUHJvcGVydHlOYW1lRm9yTmF2aWdhdGlvblRpbWluZyhldmVudCk7XG4gIGNvbnN0IGVuZCA9IGVudHJ5W2V2ZW50RW5kXTtcbiAgY29uc3Qgc3RhcnQgPSBlbnRyeVtgJHtldmVudH1TdGFydGBdO1xuICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgc3RhcnRBbmRFbmRTcGFuKHNwYW4sIHRpbWVPcmlnaW4gKyBtc1RvU2VjKHN0YXJ0KSwgdGltZU9yaWdpbiArIG1zVG9TZWMoZW5kKSwge1xuICAgIG9wOiBgYnJvd3Nlci4ke25hbWV9YCxcbiAgICBuYW1lOiBlbnRyeS5uYW1lLFxuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTl06ICdhdXRvLnVpLmJyb3dzZXIubWV0cmljcycsXG4gICAgICAuLi4oZXZlbnQgPT09ICdyZWRpcmVjdCcgJiYgZW50cnkucmVkaXJlY3RDb3VudCAhPSBudWxsID8ge1xuICAgICAgICAnaHR0cC5yZWRpcmVjdF9jb3VudCc6IGVudHJ5LnJlZGlyZWN0Q291bnRcbiAgICAgIH0gOiB7fSlcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gX2dldEVuZFByb3BlcnR5TmFtZUZvck5hdmlnYXRpb25UaW1pbmcoZXZlbnQpIHtcbiAgaWYgKGV2ZW50ID09PSAnc2VjdXJlQ29ubmVjdGlvbicpIHtcbiAgICByZXR1cm4gJ2Nvbm5lY3RFbmQnO1xuICB9XG4gIGlmIChldmVudCA9PT0gJ2ZldGNoJykge1xuICAgIHJldHVybiAnZG9tYWluTG9va3VwU3RhcnQnO1xuICB9XG4gIHJldHVybiBgJHtldmVudH1FbmRgO1xufVxuXG4vKiogQ3JlYXRlIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHJlbGF0ZWQgc3BhbnMgKi9cbmZ1bmN0aW9uIF9hZGRSZXF1ZXN0KHNwYW4sIGVudHJ5LCB0aW1lT3JpZ2luKSB7XG4gIGNvbnN0IHJlcXVlc3RTdGFydFRpbWVzdGFtcCA9IHRpbWVPcmlnaW4gKyBtc1RvU2VjKGVudHJ5LnJlcXVlc3RTdGFydCk7XG4gIGNvbnN0IHJlc3BvbnNlRW5kVGltZXN0YW1wID0gdGltZU9yaWdpbiArIG1zVG9TZWMoZW50cnkucmVzcG9uc2VFbmQpO1xuICBjb25zdCByZXNwb25zZVN0YXJ0VGltZXN0YW1wID0gdGltZU9yaWdpbiArIG1zVG9TZWMoZW50cnkucmVzcG9uc2VTdGFydCk7XG4gIGlmIChlbnRyeS5yZXNwb25zZUVuZCkge1xuICAgIC8vIEl0IGlzIHBvc3NpYmxlIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgdGhlc2UgbWV0cmljcyB3aGVuIHRoZSBwYWdlIGhhc24ndCBmaW5pc2hlZCBsb2FkaW5nIHlldCwgZm9yIGV4YW1wbGUgd2hlbiB0aGUgSFRNTCBzbG93bHkgc3RyZWFtcyBpbi5cbiAgICAvLyBJbiB0aGlzIGNhc2UsIGllLiB3aGVuIHRoZSBkb2N1bWVudCByZXF1ZXN0IGhhc24ndCBmaW5pc2hlZCB5ZXQsIGBlbnRyeS5yZXNwb25zZUVuZGAgd2lsbCBiZSAwLlxuICAgIC8vIEluIG9yZGVyIG5vdCB0byBwcm9kdWNlIGZhdWx0eSBzcGFucywgd2hlcmUgdGhlIGVuZCB0aW1lc3RhbXAgaXMgYmVmb3JlIHRoZSBzdGFydCB0aW1lc3RhbXAsIHdlIHdpbGwgb25seSBjb2xsZWN0XG4gICAgLy8gdGhlc2Ugc3BhbnMgd2hlbiB0aGUgcmVzcG9uc2VFbmQgdmFsdWUgaXMgYXZhaWxhYmxlLiBUaGUgYmFja2VuZCAoUmVsYXkpIHdvdWxkIGRyb3AgdGhlIGVudGlyZSBzcGFuIGlmIGl0IGNvbnRhaW5lZCBmYXVsdHkgc3BhbnMuXG4gICAgc3RhcnRBbmRFbmRTcGFuKHNwYW4sIHJlcXVlc3RTdGFydFRpbWVzdGFtcCwgcmVzcG9uc2VFbmRUaW1lc3RhbXAsIHtcbiAgICAgIG9wOiAnYnJvd3Nlci5yZXF1ZXN0JyxcbiAgICAgIG5hbWU6IGVudHJ5Lm5hbWUsXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTl06ICdhdXRvLnVpLmJyb3dzZXIubWV0cmljcydcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzdGFydEFuZEVuZFNwYW4oc3BhbiwgcmVzcG9uc2VTdGFydFRpbWVzdGFtcCwgcmVzcG9uc2VFbmRUaW1lc3RhbXAsIHtcbiAgICAgIG9wOiAnYnJvd3Nlci5yZXNwb25zZScsXG4gICAgICBuYW1lOiBlbnRyeS5uYW1lLFxuICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by51aS5icm93c2VyLm1ldHJpY3MnXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgcmVzb3VyY2UtcmVsYXRlZCBzcGFucy5cbiAqIEV4cG9ydGVkIG9ubHkgZm9yIHRlc3RzLlxuICovXG5mdW5jdGlvbiBfYWRkUmVzb3VyY2VTcGFucyhzcGFuLCBlbnRyeSwgcmVzb3VyY2VVcmwsIHN0YXJ0VGltZSwgZHVyYXRpb24sIHRpbWVPcmlnaW4sIGlnbm9yZVJlc291cmNlU3BhbnMpIHtcbiAgLy8gd2UgYWxyZWFkeSBpbnN0cnVtZW50IGJhc2VkIG9uIGZldGNoIGFuZCB4aHIsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgLy8gZHVwbGljYXRlIHNwYW5zIGhlcmUuXG4gIGlmIChlbnRyeS5pbml0aWF0b3JUeXBlID09PSAneG1saHR0cHJlcXVlc3QnIHx8IGVudHJ5LmluaXRpYXRvclR5cGUgPT09ICdmZXRjaCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3AgPSBlbnRyeS5pbml0aWF0b3JUeXBlID8gYHJlc291cmNlLiR7ZW50cnkuaW5pdGlhdG9yVHlwZX1gIDogJ3Jlc291cmNlLm90aGVyJztcbiAgaWYgKGlnbm9yZVJlc291cmNlU3BhbnM/LmluY2x1ZGVzKG9wKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBwYXJzZWRVcmwgPSBwYXJzZVVybChyZXNvdXJjZVVybCk7XG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOXTogJ2F1dG8ucmVzb3VyY2UuYnJvd3Nlci5tZXRyaWNzJ1xuICB9O1xuICBzZXRSZXNvdXJjZUVudHJ5U2l6ZURhdGEoYXR0cmlidXRlcywgZW50cnksICd0cmFuc2ZlclNpemUnLCAnaHR0cC5yZXNwb25zZV90cmFuc2Zlcl9zaXplJyk7XG4gIHNldFJlc291cmNlRW50cnlTaXplRGF0YShhdHRyaWJ1dGVzLCBlbnRyeSwgJ2VuY29kZWRCb2R5U2l6ZScsICdodHRwLnJlc3BvbnNlX2NvbnRlbnRfbGVuZ3RoJyk7XG4gIHNldFJlc291cmNlRW50cnlTaXplRGF0YShhdHRyaWJ1dGVzLCBlbnRyeSwgJ2RlY29kZWRCb2R5U2l6ZScsICdodHRwLmRlY29kZWRfcmVzcG9uc2VfY29udGVudF9sZW5ndGgnKTtcblxuICAvLyBgZGVsaXZlcnlUeXBlYCBpcyBleHBlcmltZW50YWwgYW5kIGRvZXMgbm90IGV4aXN0IGV2ZXJ5d2hlcmVcbiAgY29uc3QgZGVsaXZlcnlUeXBlID0gZW50cnkuZGVsaXZlcnlUeXBlO1xuICBpZiAoZGVsaXZlcnlUeXBlICE9IG51bGwpIHtcbiAgICBhdHRyaWJ1dGVzWydodHRwLnJlc3BvbnNlX2RlbGl2ZXJ5X3R5cGUnXSA9IGRlbGl2ZXJ5VHlwZTtcbiAgfVxuXG4gIC8vIFR5cGVzIGRvIG5vdCByZWZsZWN0IHRoaXMgcHJvcGVydHkgeWV0XG4gIGNvbnN0IHJlbmRlckJsb2NraW5nU3RhdHVzID0gZW50cnkucmVuZGVyQmxvY2tpbmdTdGF0dXM7XG4gIGlmIChyZW5kZXJCbG9ja2luZ1N0YXR1cykge1xuICAgIGF0dHJpYnV0ZXNbJ3Jlc291cmNlLnJlbmRlcl9ibG9ja2luZ19zdGF0dXMnXSA9IHJlbmRlckJsb2NraW5nU3RhdHVzO1xuICB9XG4gIGlmIChwYXJzZWRVcmwucHJvdG9jb2wpIHtcbiAgICBhdHRyaWJ1dGVzWyd1cmwuc2NoZW1lJ10gPSBwYXJzZWRVcmwucHJvdG9jb2wuc3BsaXQoJzonKS5wb3AoKTsgLy8gdGhlIHByb3RvY29sIHJldHVybmVkIGJ5IHBhcnNlVXJsIGluY2x1ZGVzIGEgOiwgYnV0IE9URUwgc3BlYyBkb2VzIG5vdCwgc28gd2UgcmVtb3ZlIGl0LlxuICB9XG4gIGlmIChwYXJzZWRVcmwuaG9zdCkge1xuICAgIGF0dHJpYnV0ZXNbJ3NlcnZlci5hZGRyZXNzJ10gPSBwYXJzZWRVcmwuaG9zdDtcbiAgfVxuICBhdHRyaWJ1dGVzWyd1cmwuc2FtZV9vcmlnaW4nXSA9IHJlc291cmNlVXJsLmluY2x1ZGVzKFdJTkRPVy5sb2NhdGlvbi5vcmlnaW4pO1xuXG4gIC8vIENoZWNraW5nIGZvciBvbmx5IGB1bmRlZmluZWRgIGFuZCBgbnVsbGAgaXMgaW50ZW50aW9uYWwgYmVjYXVzZSBpdCdzXG4gIC8vIHZhbGlkIGZvciBgbmV4dEhvcFByb3RvY29sYCB0byBiZSBhbiBlbXB0eSBzdHJpbmcuXG4gIGlmIChlbnRyeS5uZXh0SG9wUHJvdG9jb2wgIT0gbnVsbCkge1xuICAgIGNvbnN0IHtcbiAgICAgIG5hbWUsXG4gICAgICB2ZXJzaW9uXG4gICAgfSA9IGV4dHJhY3ROZXR3b3JrUHJvdG9jb2woZW50cnkubmV4dEhvcFByb3RvY29sKTtcbiAgICBhdHRyaWJ1dGVzWyduZXR3b3JrLnByb3RvY29sLm5hbWUnXSA9IG5hbWU7XG4gICAgYXR0cmlidXRlc1snbmV0d29yay5wcm90b2NvbC52ZXJzaW9uJ10gPSB2ZXJzaW9uO1xuICB9XG4gIGNvbnN0IHN0YXJ0VGltZXN0YW1wID0gdGltZU9yaWdpbiArIHN0YXJ0VGltZTtcbiAgY29uc3QgZW5kVGltZXN0YW1wID0gc3RhcnRUaW1lc3RhbXAgKyBkdXJhdGlvbjtcbiAgc3RhcnRBbmRFbmRTcGFuKHNwYW4sIHN0YXJ0VGltZXN0YW1wLCBlbmRUaW1lc3RhbXAsIHtcbiAgICBuYW1lOiByZXNvdXJjZVVybC5yZXBsYWNlKFdJTkRPVy5sb2NhdGlvbi5vcmlnaW4sICcnKSxcbiAgICBvcCxcbiAgICBhdHRyaWJ1dGVzXG4gIH0pO1xufVxuXG4vKipcbiAqIENhcHR1cmUgdGhlIGluZm9ybWF0aW9uIG9mIHRoZSB1c2VyIGFnZW50LlxuICovXG5mdW5jdGlvbiBfdHJhY2tOYXZpZ2F0b3Ioc3Bhbikge1xuICBjb25zdCBuYXZpZ2F0b3IgPSBXSU5ET1cubmF2aWdhdG9yO1xuICBpZiAoIW5hdmlnYXRvcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHRyYWNrIG5ldHdvcmsgY29ubmVjdGl2aXR5XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBuYXZpZ2F0b3IuY29ubmVjdGlvbjtcbiAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICBpZiAoY29ubmVjdGlvbi5lZmZlY3RpdmVUeXBlKSB7XG4gICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnZWZmZWN0aXZlQ29ubmVjdGlvblR5cGUnLCBjb25uZWN0aW9uLmVmZmVjdGl2ZVR5cGUpO1xuICAgIH1cbiAgICBpZiAoY29ubmVjdGlvbi50eXBlKSB7XG4gICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnY29ubmVjdGlvblR5cGUnLCBjb25uZWN0aW9uLnR5cGUpO1xuICAgIH1cbiAgICBpZiAoaXNNZWFzdXJlbWVudFZhbHVlKGNvbm5lY3Rpb24ucnR0KSkge1xuICAgICAgX21lYXN1cmVtZW50c1snY29ubmVjdGlvbi5ydHQnXSA9IHtcbiAgICAgICAgdmFsdWU6IGNvbm5lY3Rpb24ucnR0LFxuICAgICAgICB1bml0OiAnbWlsbGlzZWNvbmQnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBpZiAoaXNNZWFzdXJlbWVudFZhbHVlKG5hdmlnYXRvci5kZXZpY2VNZW1vcnkpKSB7XG4gICAgc3Bhbi5zZXRBdHRyaWJ1dGUoJ2RldmljZU1lbW9yeScsIGAke25hdmlnYXRvci5kZXZpY2VNZW1vcnl9IEdCYCk7XG4gIH1cbiAgaWYgKGlzTWVhc3VyZW1lbnRWYWx1ZShuYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeSkpIHtcbiAgICBzcGFuLnNldEF0dHJpYnV0ZSgnaGFyZHdhcmVDb25jdXJyZW5jeScsIFN0cmluZyhuYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeSkpO1xuICB9XG59XG5cbi8qKiBBZGQgTENQIC8gQ0xTIGRhdGEgdG8gc3BhbiB0byBhbGxvdyBkZWJ1Z2dpbmcgKi9cbmZ1bmN0aW9uIF9zZXRXZWJWaXRhbEF0dHJpYnV0ZXMoc3Bhbiwgb3B0aW9ucykge1xuICAvLyBPbmx5IGFkZCBMQ1AgYXR0cmlidXRlcyBpZiBMQ1AgaXMgYmVpbmcgcmVjb3JkZWQgb24gdGhlIHBhZ2Vsb2FkIHNwYW5cbiAgaWYgKF9sY3BFbnRyeSAmJiBvcHRpb25zLnJlY29yZExjcE9uUGFnZWxvYWRTcGFuKSB7XG4gICAgLy8gQ2FwdHVyZSBQcm9wZXJ0aWVzIG9mIHRoZSBMQ1AgZWxlbWVudCB0aGF0IGNvbnRyaWJ1dGVzIHRvIHRoZSBMQ1AuXG5cbiAgICBpZiAoX2xjcEVudHJ5LmVsZW1lbnQpIHtcbiAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdsY3AuZWxlbWVudCcsIGh0bWxUcmVlQXNTdHJpbmcoX2xjcEVudHJ5LmVsZW1lbnQpKTtcbiAgICB9XG4gICAgaWYgKF9sY3BFbnRyeS5pZCkge1xuICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoJ2xjcC5pZCcsIF9sY3BFbnRyeS5pZCk7XG4gICAgfVxuICAgIGlmIChfbGNwRW50cnkudXJsKSB7XG4gICAgICAvLyBUcmltIFVSTCB0byB0aGUgZmlyc3QgMjAwIGNoYXJhY3RlcnMuXG4gICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnbGNwLnVybCcsIF9sY3BFbnRyeS51cmwudHJpbSgpLnNsaWNlKDAsIDIwMCkpO1xuICAgIH1cbiAgICBpZiAoX2xjcEVudHJ5LmxvYWRUaW1lICE9IG51bGwpIHtcbiAgICAgIC8vIGxvYWRUaW1lIGlzIHRoZSB0aW1lIG9mIExDUCB0aGF0J3MgcmVsYXRlZCB0byByZWNlaXZpbmcgdGhlIExDUCBlbGVtZW50IHJlc3BvbnNlLi5cbiAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdsY3AubG9hZFRpbWUnLCBfbGNwRW50cnkubG9hZFRpbWUpO1xuICAgIH1cbiAgICBpZiAoX2xjcEVudHJ5LnJlbmRlclRpbWUgIT0gbnVsbCkge1xuICAgICAgLy8gcmVuZGVyVGltZSBpcyBsb2FkVGltZSArIHJlbmRlcmluZyB0aW1lXG4gICAgICAvLyBpdCdzIDAgaWYgdGhlIExDUCBlbGVtZW50IGlzIGxvYWRlZCBmcm9tIGEgM3JkIHBhcnR5IG9yaWdpbiB0aGF0IGRvZXNuJ3Qgc2VuZCB0aGVcbiAgICAgIC8vIGBUaW1pbmctQWxsb3ctT3JpZ2luYCBoZWFkZXIuXG4gICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnbGNwLnJlbmRlclRpbWUnLCBfbGNwRW50cnkucmVuZGVyVGltZSk7XG4gICAgfVxuICAgIHNwYW4uc2V0QXR0cmlidXRlKCdsY3Auc2l6ZScsIF9sY3BFbnRyeS5zaXplKTtcbiAgfVxuXG4gIC8vIE9ubHkgYWRkIENMUyBhdHRyaWJ1dGVzIGlmIENMUyBpcyBiZWluZyByZWNvcmRlZCBvbiB0aGUgcGFnZWxvYWQgc3BhblxuICBpZiAoX2Nsc0VudHJ5Py5zb3VyY2VzICYmIG9wdGlvbnMucmVjb3JkQ2xzT25QYWdlbG9hZFNwYW4pIHtcbiAgICBfY2xzRW50cnkuc291cmNlcy5mb3JFYWNoKChzb3VyY2UsIGluZGV4KSA9PiBzcGFuLnNldEF0dHJpYnV0ZShgY2xzLnNvdXJjZS4ke2luZGV4ICsgMX1gLCBodG1sVHJlZUFzU3RyaW5nKHNvdXJjZS5ub2RlKSkpO1xuICB9XG59XG5mdW5jdGlvbiBzZXRSZXNvdXJjZUVudHJ5U2l6ZURhdGEoYXR0cmlidXRlcywgZW50cnksIGtleSwgZGF0YUtleSkge1xuICBjb25zdCBlbnRyeVZhbCA9IGVudHJ5W2tleV07XG4gIGlmIChlbnRyeVZhbCAhPSBudWxsICYmIGVudHJ5VmFsIDwgTUFYX0lOVF9BU19CWVRFUykge1xuICAgIGF0dHJpYnV0ZXNbZGF0YUtleV0gPSBlbnRyeVZhbDtcbiAgfVxufVxuXG4vKipcbiAqIEFkZCB0dGZiIHJlcXVlc3QgdGltZSBpbmZvcm1hdGlvbiB0byBtZWFzdXJlbWVudHMuXG4gKlxuICogdHRmYiBpbmZvcm1hdGlvbiBpcyBhZGRlZCB2aWEgdmVuZG9yZWQgd2ViIHZpdGFscyBsaWJyYXJ5LlxuICovXG5mdW5jdGlvbiBfYWRkVHRmYlJlcXVlc3RUaW1lVG9NZWFzdXJlbWVudHMoX21lYXN1cmVtZW50cykge1xuICBjb25zdCBuYXZFbnRyeSA9IGdldE5hdmlnYXRpb25FbnRyeShmYWxzZSk7XG4gIGlmICghbmF2RW50cnkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qge1xuICAgIHJlc3BvbnNlU3RhcnQsXG4gICAgcmVxdWVzdFN0YXJ0XG4gIH0gPSBuYXZFbnRyeTtcbiAgaWYgKHJlcXVlc3RTdGFydCA8PSByZXNwb25zZVN0YXJ0KSB7XG4gICAgX21lYXN1cmVtZW50c1sndHRmYi5yZXF1ZXN0VGltZSddID0ge1xuICAgICAgdmFsdWU6IHJlc3BvbnNlU3RhcnQgLSByZXF1ZXN0U3RhcnQsXG4gICAgICB1bml0OiAnbWlsbGlzZWNvbmQnXG4gICAgfTtcbiAgfVxufVxuZXhwb3J0IHsgX2FkZE1lYXN1cmVTcGFucywgX2FkZE5hdmlnYXRpb25TcGFucywgX2FkZFJlc291cmNlU3BhbnMsIGFkZFBlcmZvcm1hbmNlRW50cmllcywgc3RhcnRUcmFja2luZ0ludGVyYWN0aW9ucywgc3RhcnRUcmFja2luZ0xvbmdBbmltYXRpb25GcmFtZXMsIHN0YXJ0VHJhY2tpbmdMb25nVGFza3MsIHN0YXJ0VHJhY2tpbmdXZWJWaXRhbHMgfTtcbiIsImltcG9ydCB7IGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4sIGdldEFjdGl2ZVNwYW4sIGdldFJvb3RTcGFuLCBzcGFuVG9KU09OLCBnZXRDdXJyZW50U2NvcGUsIHRpbWVzdGFtcEluU2Vjb25kcywgc3RhcnRTcGFuLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRSwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU4gfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgYWRkUGVyZm9ybWFuY2VJbnN0cnVtZW50YXRpb25IYW5kbGVyIH0gZnJvbSAnLi9pbnN0cnVtZW50LmpzJztcbmltcG9ydCB7IGdldEJyb3dzZXJQZXJmb3JtYW5jZUFQSSwgbXNUb1NlYyB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG4vLyBFbGVtZW50VGltaW5nIGludGVyZmFjZSBiYXNlZCBvbiB0aGUgVzNDIHNwZWNcblxuLyoqXG4gKiBTdGFydCB0cmFja2luZyBFbGVtZW50VGltaW5nIHBlcmZvcm1hbmNlIGVudHJpZXMuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0VHJhY2tpbmdFbGVtZW50VGltaW5nKCkge1xuICBjb25zdCBwZXJmb3JtYW5jZSA9IGdldEJyb3dzZXJQZXJmb3JtYW5jZUFQSSgpO1xuICBpZiAocGVyZm9ybWFuY2UgJiYgYnJvd3NlclBlcmZvcm1hbmNlVGltZU9yaWdpbigpKSB7XG4gICAgcmV0dXJuIGFkZFBlcmZvcm1hbmNlSW5zdHJ1bWVudGF0aW9uSGFuZGxlcignZWxlbWVudCcsIF9vbkVsZW1lbnRUaW1pbmcpO1xuICB9XG4gIHJldHVybiAoKSA9PiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogZXhwb3J0ZWQgb25seSBmb3IgdGVzdGluZ1xuICovXG5jb25zdCBfb25FbGVtZW50VGltaW5nID0gKHtcbiAgZW50cmllc1xufSkgPT4ge1xuICBjb25zdCBhY3RpdmVTcGFuID0gZ2V0QWN0aXZlU3BhbigpO1xuICBjb25zdCByb290U3BhbiA9IGFjdGl2ZVNwYW4gPyBnZXRSb290U3BhbihhY3RpdmVTcGFuKSA6IHVuZGVmaW5lZDtcbiAgY29uc3QgdHJhbnNhY3Rpb25OYW1lID0gcm9vdFNwYW4gPyBzcGFuVG9KU09OKHJvb3RTcGFuKS5kZXNjcmlwdGlvbiA6IGdldEN1cnJlbnRTY29wZSgpLmdldFNjb3BlRGF0YSgpLnRyYW5zYWN0aW9uTmFtZTtcbiAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICBjb25zdCBlbGVtZW50RW50cnkgPSBlbnRyeTtcblxuICAgIC8vIFNraXAgZW50cmllcyB3aXRob3V0IGlkZW50aWZpZXIgKGVsZW1lbnR0aW1pbmcgYXR0cmlidXRlKVxuICAgIGlmICghZWxlbWVudEVudHJ5LmlkZW50aWZpZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBgbmFtZWAgY29udGFpbnMgdGhlIHR5cGUgb2YgdGhlIGVsZW1lbnQgcGFpbnQuIENhbiBiZSBgJ2ltYWdlLXBhaW50J2Agb3IgYCd0ZXh0LXBhaW50J2AuXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BlcmZvcm1hbmNlRWxlbWVudFRpbWluZyNpbnN0YW5jZV9wcm9wZXJ0aWVzXG4gICAgY29uc3QgcGFpbnRUeXBlID0gZWxlbWVudEVudHJ5Lm5hbWU7XG4gICAgY29uc3QgcmVuZGVyVGltZSA9IGVsZW1lbnRFbnRyeS5yZW5kZXJUaW1lO1xuICAgIGNvbnN0IGxvYWRUaW1lID0gZWxlbWVudEVudHJ5LmxvYWRUaW1lO1xuXG4gICAgLy8gc3RhcnRpbmcgdGhlIHNwYW4gYXQ6XG4gICAgLy8gLSBgbG9hZFRpbWVgIGlmIGF2YWlsYWJsZSAoc2hvdWxkIGJlIGF2YWlsYWJsZSBmb3IgYWxsIFwiaW1hZ2UtcGFpbnRcIiBlbnRyaWVzLCAwIG90aGVyd2lzZSlcbiAgICAvLyAtIGByZW5kZXJUaW1lYCBpZiBhdmFpbGFibGUgKGF2YWlsYWJsZSBmb3IgYWxsIGVudHJpZXMsIGV4Y2VwdCAzcmQgcGFydHkgaW1hZ2VzLCBidXQgdGhlc2Ugc2hvdWxkIGJlIGNvdmVyZWQgYnkgYGxvYWRUaW1lYCwgMCBvdGhlcndpc2UpXG4gICAgLy8gLSBgdGltZXN0YW1wSW5TZWNvbmRzKClgIGFzIGEgc2FmZWd1YXJkXG4gICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9QZXJmb3JtYW5jZUVsZW1lbnRUaW1pbmcvcmVuZGVyVGltZSNjcm9zcy1vcmlnaW5faW1hZ2VfcmVuZGVyX3RpbWVcbiAgICBjb25zdCBbc3BhblN0YXJ0VGltZSwgc3BhblN0YXJ0VGltZVNvdXJjZV0gPSBsb2FkVGltZSA/IFttc1RvU2VjKGxvYWRUaW1lKSwgJ2xvYWQtdGltZSddIDogcmVuZGVyVGltZSA/IFttc1RvU2VjKHJlbmRlclRpbWUpLCAncmVuZGVyLXRpbWUnXSA6IFt0aW1lc3RhbXBJblNlY29uZHMoKSwgJ2VudHJ5LWVtaXNzaW9uJ107XG4gICAgY29uc3QgZHVyYXRpb24gPSBwYWludFR5cGUgPT09ICdpbWFnZS1wYWludCcgP1xuICAgIC8vIGZvciBpbWFnZSBwYWludHMsIHdlIGNhbiBhY3VhbGx5IGdldCBhIGR1cmF0aW9uIGJlY2F1c2UgaW1hZ2UtcGFpbnQgZW50cmllcyBhbHNvIGhhdmUgYSBgbG9hZFRpbWVgXG4gICAgLy8gYW5kIGByZW5kZXJUaW1lYC4gYGxvYWRUaW1lYCBpcyB0aGUgdGltZSB3aGVuIHRoZSBpbWFnZSBmaW5pc2hlZCBsb2FkaW5nIGFuZCBgcmVuZGVyVGltZWAgaXMgdGhlXG4gICAgLy8gdGltZSB3aGVuIHRoZSBpbWFnZSBmaW5pc2hlZCByZW5kZXJpbmcuXG4gICAgbXNUb1NlYyhNYXRoLm1heCgwLCAocmVuZGVyVGltZSA/PyAwKSAtIChsb2FkVGltZSA/PyAwKSkpIDpcbiAgICAvLyBmb3IgYCd0ZXh0LXBhaW50J2AgZW50cmllcywgd2UgY2FuJ3QgZ2V0IGEgZHVyYXRpb24gYmVjYXVzZSB0aGUgYGxvYWRUaW1lYCBpcyBhbHdheXMgemVyby5cbiAgICAwO1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by51aS5icm93c2VyLmVsZW1lbnR0aW1pbmcnLFxuICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1BdOiAndWkuZWxlbWVudHRpbWluZycsXG4gICAgICAvLyBuYW1lIG11c3QgYmUgdXNlci1lbnRlcmVkLCBzbyB3ZSBjYW4gYXNzdW1lIGxvdyBjYXJkaW5hbGl0eVxuICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFXTogJ2NvbXBvbmVudCcsXG4gICAgICAvLyByZWNvcmRpbmcgdGhlIHNvdXJjZSBvZiB0aGUgc3BhbiBzdGFydCB0aW1lLCBhcyBpdCB2YXJpZXMgZGVwZW5kaW5nIG9uIGF2YWlsYWJsZSBkYXRhXG4gICAgICAnc2VudHJ5LnNwYW5fc3RhcnRfdGltZV9zb3VyY2UnOiBzcGFuU3RhcnRUaW1lU291cmNlLFxuICAgICAgJ3NlbnRyeS50cmFuc2FjdGlvbl9uYW1lJzogdHJhbnNhY3Rpb25OYW1lLFxuICAgICAgJ2VsZW1lbnQuaWQnOiBlbGVtZW50RW50cnkuaWQsXG4gICAgICAnZWxlbWVudC50eXBlJzogZWxlbWVudEVudHJ5LmVsZW1lbnQ/LnRhZ05hbWU/LnRvTG93ZXJDYXNlKCkgfHwgJ3Vua25vd24nLFxuICAgICAgJ2VsZW1lbnQuc2l6ZSc6IGVsZW1lbnRFbnRyeS5uYXR1cmFsV2lkdGggJiYgZWxlbWVudEVudHJ5Lm5hdHVyYWxIZWlnaHQgPyBgJHtlbGVtZW50RW50cnkubmF0dXJhbFdpZHRofXgke2VsZW1lbnRFbnRyeS5uYXR1cmFsSGVpZ2h0fWAgOiB1bmRlZmluZWQsXG4gICAgICAnZWxlbWVudC5yZW5kZXJfdGltZSc6IHJlbmRlclRpbWUsXG4gICAgICAnZWxlbWVudC5sb2FkX3RpbWUnOiBsb2FkVGltZSxcbiAgICAgIC8vIGB1cmxgIGlzIGAwYChudW1iZXIpIGZvciB0ZXh0IHBhaW50cyAoaGVuY2Ugd2UgZmFsbCBiYWNrIHRvIHVuZGVmaW5lZClcbiAgICAgICdlbGVtZW50LnVybCc6IGVsZW1lbnRFbnRyeS51cmwgfHwgdW5kZWZpbmVkLFxuICAgICAgJ2VsZW1lbnQuaWRlbnRpZmllcic6IGVsZW1lbnRFbnRyeS5pZGVudGlmaWVyLFxuICAgICAgJ2VsZW1lbnQucGFpbnRfdHlwZSc6IHBhaW50VHlwZVxuICAgIH07XG4gICAgc3RhcnRTcGFuKHtcbiAgICAgIG5hbWU6IGBlbGVtZW50WyR7ZWxlbWVudEVudHJ5LmlkZW50aWZpZXJ9XWAsXG4gICAgICBhdHRyaWJ1dGVzLFxuICAgICAgc3RhcnRUaW1lOiBzcGFuU3RhcnRUaW1lLFxuICAgICAgb25seUlmUGFyZW50OiB0cnVlXG4gICAgfSwgc3BhbiA9PiB7XG4gICAgICBzcGFuLmVuZChzcGFuU3RhcnRUaW1lICsgZHVyYXRpb24pO1xuICAgIH0pO1xuICB9KTtcbn07XG5leHBvcnQgeyBfb25FbGVtZW50VGltaW5nLCBzdGFydFRyYWNraW5nRWxlbWVudFRpbWluZyB9O1xuIiwiaW1wb3J0IHsgYWRkSGFuZGxlciwgbWF5YmVJbnN0cnVtZW50LCB0cmlnZ2VySGFuZGxlcnMsIGZpbGwsIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSwgdXVpZDQgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vdHlwZXMuanMnO1xuY29uc3QgREVCT1VOQ0VfRFVSQVRJT04gPSAxMDAwO1xubGV0IGRlYm91bmNlVGltZXJJRDtcbmxldCBsYXN0Q2FwdHVyZWRFdmVudFR5cGU7XG5sZXQgbGFzdENhcHR1cmVkRXZlbnRUYXJnZXRJZDtcblxuLyoqXG4gKiBBZGQgYW4gaW5zdHJ1bWVudGF0aW9uIGhhbmRsZXIgZm9yIHdoZW4gYSBjbGljayBvciBhIGtleXByZXNzIGhhcHBlbnMuXG4gKlxuICogVXNlIGF0IHlvdXIgb3duIHJpc2ssIHRoaXMgbWlnaHQgYnJlYWsgd2l0aG91dCBjaGFuZ2Vsb2cgbm90aWNlLCBvbmx5IHVzZWQgaW50ZXJuYWxseS5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gYWRkQ2xpY2tLZXlwcmVzc0luc3RydW1lbnRhdGlvbkhhbmRsZXIoaGFuZGxlcikge1xuICBjb25zdCB0eXBlID0gJ2RvbSc7XG4gIGFkZEhhbmRsZXIodHlwZSwgaGFuZGxlcik7XG4gIG1heWJlSW5zdHJ1bWVudCh0eXBlLCBpbnN0cnVtZW50RE9NKTtcbn1cblxuLyoqIEV4cG9ydGVkIGZvciB0ZXN0cyBvbmx5LiAqL1xuZnVuY3Rpb24gaW5zdHJ1bWVudERPTSgpIHtcbiAgaWYgKCFXSU5ET1cuZG9jdW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBNYWtlIGl0IHNvIHRoYXQgYW55IGNsaWNrIG9yIGtleXByZXNzIHRoYXQgaXMgdW5oYW5kbGVkIC8gYnViYmxlZCB1cCBhbGwgdGhlIHdheSB0byB0aGUgZG9jdW1lbnQgdHJpZ2dlcnMgb3VyIGRvbVxuICAvLyBoYW5kbGVycy4gKE5vcm1hbGx5IHdlIGhhdmUgb25seSBvbmUsIHdoaWNoIGNhcHR1cmVzIGEgYnJlYWRjcnVtYiBmb3IgZWFjaCBjbGljayBvciBrZXlwcmVzcy4pIERvIHRoaXMgYmVmb3JlXG4gIC8vIHdlIGluc3RydW1lbnQgYGFkZEV2ZW50TGlzdGVuZXJgIHNvIHRoYXQgd2UgZG9uJ3QgZW5kIHVwIGF0dGFjaGluZyB0aGlzIGhhbmRsZXIgdHdpY2UuXG4gIGNvbnN0IHRyaWdnZXJET01IYW5kbGVyID0gdHJpZ2dlckhhbmRsZXJzLmJpbmQobnVsbCwgJ2RvbScpO1xuICBjb25zdCBnbG9iYWxET01FdmVudEhhbmRsZXIgPSBtYWtlRE9NRXZlbnRIYW5kbGVyKHRyaWdnZXJET01IYW5kbGVyLCB0cnVlKTtcbiAgV0lORE9XLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ2xvYmFsRE9NRXZlbnRIYW5kbGVyLCBmYWxzZSk7XG4gIFdJTkRPVy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGdsb2JhbERPTUV2ZW50SGFuZGxlciwgZmFsc2UpO1xuXG4gIC8vIEFmdGVyIGhvb2tpbmcgaW50byBjbGljayBhbmQga2V5cHJlc3MgZXZlbnRzIGJ1YmJsZWQgdXAgdG8gYGRvY3VtZW50YCwgd2UgYWxzbyBob29rIGludG8gdXNlci1oYW5kbGVkXG4gIC8vIGNsaWNrcyAmIGtleXByZXNzZXMsIGJ5IGFkZGluZyBhbiBldmVudCBsaXN0ZW5lciBvZiBvdXIgb3duIHRvIGFueSBlbGVtZW50IHRvIHdoaWNoIHRoZXkgYWRkIGEgbGlzdGVuZXIuIFRoYXRcbiAgLy8gd2F5LCB3aGVuZXZlciBvbmUgb2YgdGhlaXIgaGFuZGxlcnMgaXMgdHJpZ2dlcmVkLCBvdXJzIHdpbGwgYmUsIHRvby4gKFRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgdGhlaXIgaGFuZGxlclxuICAvLyBjb3VsZCBwb3RlbnRpYWxseSBwcmV2ZW50IHRoZSBldmVudCBmcm9tIGJ1YmJsaW5nIHVwIHRvIG91ciBnbG9iYWwgbGlzdGVuZXJzLiBUaGlzIHdheSwgb3VyIGhhbmRsZXIgYXJlIHN0aWxsXG4gIC8vIGd1YXJhbnRlZWQgdG8gZmlyZSBhdCBsZWFzdCBvbmNlLilcbiAgWydFdmVudFRhcmdldCcsICdOb2RlJ10uZm9yRWFjaCh0YXJnZXQgPT4ge1xuICAgIGNvbnN0IGdsb2JhbE9iamVjdCA9IFdJTkRPVztcbiAgICBjb25zdCBwcm90byA9IGdsb2JhbE9iamVjdFt0YXJnZXRdPy5wcm90b3R5cGU7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgaWYgKCFwcm90bz8uaGFzT3duUHJvcGVydHk/LignYWRkRXZlbnRMaXN0ZW5lcicpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZpbGwocHJvdG8sICdhZGRFdmVudExpc3RlbmVyJywgZnVuY3Rpb24gKG9yaWdpbmFsQWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2NsaWNrJyB8fCB0eXBlID09ICdrZXlwcmVzcycpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9fc2VudHJ5X2luc3RydW1lbnRhdGlvbl9oYW5kbGVyc19fID0gdGhpcy5fX3NlbnRyeV9pbnN0cnVtZW50YXRpb25faGFuZGxlcnNfXyB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXJGb3JUeXBlID0gaGFuZGxlcnNbdHlwZV0gPSBoYW5kbGVyc1t0eXBlXSB8fCB7XG4gICAgICAgICAgICAgIHJlZkNvdW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyRm9yVHlwZS5oYW5kbGVyKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBtYWtlRE9NRXZlbnRIYW5kbGVyKHRyaWdnZXJET01IYW5kbGVyKTtcbiAgICAgICAgICAgICAgaGFuZGxlckZvclR5cGUuaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgICAgICAgIG9yaWdpbmFsQWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsIHR5cGUsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGFuZGxlckZvclR5cGUucmVmQ291bnQrKztcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBBY2Nlc3NpbmcgZG9tIHByb3BlcnRpZXMgaXMgYWx3YXlzIGZyYWdpbGUuXG4gICAgICAgICAgICAvLyBBbHNvIGFsbG93cyB1cyB0byBza2lwIGBhZGRFdmVudExpc3RlbmVyc2AgY2FsbHMgd2l0aCBubyBwcm9wZXIgYHRoaXNgIGNvbnRleHQuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnaW5hbEFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLCB0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIGZpbGwocHJvdG8sICdyZW1vdmVFdmVudExpc3RlbmVyJywgZnVuY3Rpb24gKG9yaWdpbmFsUmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2NsaWNrJyB8fCB0eXBlID09ICdrZXlwcmVzcycpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9fc2VudHJ5X2luc3RydW1lbnRhdGlvbl9oYW5kbGVyc19fIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlckZvclR5cGUgPSBoYW5kbGVyc1t0eXBlXTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyRm9yVHlwZSkge1xuICAgICAgICAgICAgICBoYW5kbGVyRm9yVHlwZS5yZWZDb3VudC0tO1xuICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbG9uZ2VyIGFueSBjdXN0b20gaGFuZGxlcnMgb2YgdGhlIGN1cnJlbnQgdHlwZSBvbiB0aGlzIGVsZW1lbnQsIHdlIGNhbiByZW1vdmUgb3VycywgdG9vLlxuICAgICAgICAgICAgICBpZiAoaGFuZGxlckZvclR5cGUucmVmQ291bnQgPD0gMCkge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsUmVtb3ZlRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsIHR5cGUsIGhhbmRsZXJGb3JUeXBlLmhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGhhbmRsZXJGb3JUeXBlLmhhbmRsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGhhbmRsZXJzW3R5cGVdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1keW5hbWljLWRlbGV0ZVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGxvbmdlciBhbnkgY3VzdG9tIGhhbmRsZXJzIG9mIGFueSB0eXBlIG9uIHRoaXMgZWxlbWVudCwgY2xlYW51cCBldmVyeXRoaW5nLlxuICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoaGFuZGxlcnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9fc2VudHJ5X2luc3RydW1lbnRhdGlvbl9oYW5kbGVyc19fO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gQWNjZXNzaW5nIGRvbSBwcm9wZXJ0aWVzIGlzIGFsd2F5cyBmcmFnaWxlLlxuICAgICAgICAgICAgLy8gQWxzbyBhbGxvd3MgdXMgdG8gc2tpcCBgYWRkRXZlbnRMaXN0ZW5lcnNgIGNhbGxzIHdpdGggbm8gcHJvcGVyIGB0aGlzYCBjb250ZXh0LlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3JpZ2luYWxSZW1vdmVFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgZXZlbnQgaXMgc2ltaWxhciB0byB0aGUgbGFzdCBjYXB0dXJlZCBvbmUuIEZvciBleGFtcGxlLCB0d28gY2xpY2sgZXZlbnRzIG9uIHRoZSBzYW1lIGJ1dHRvbi5cbiAqL1xuZnVuY3Rpb24gaXNTaW1pbGFyVG9MYXN0Q2FwdHVyZWRFdmVudChldmVudCkge1xuICAvLyBJZiBib3RoIGV2ZW50cyBoYXZlIGRpZmZlcmVudCB0eXBlLCB0aGVuIHVzZXIgZGVmaW5pdGVseSBwZXJmb3JtZWQgdHdvIHNlcGFyYXRlIGFjdGlvbnMuIGUuZy4gY2xpY2sgKyBrZXlwcmVzcy5cbiAgaWYgKGV2ZW50LnR5cGUgIT09IGxhc3RDYXB0dXJlZEV2ZW50VHlwZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB0cnkge1xuICAgIC8vIElmIGJvdGggZXZlbnRzIGhhdmUgdGhlIHNhbWUgdHlwZSwgaXQncyBzdGlsbCBwb3NzaWJsZSB0aGF0IGFjdGlvbnMgd2VyZSBwZXJmb3JtZWQgb24gZGlmZmVyZW50IHRhcmdldHMuXG4gICAgLy8gZS5nLiAyIGNsaWNrcyBvbiBkaWZmZXJlbnQgYnV0dG9ucy5cbiAgICBpZiAoIWV2ZW50LnRhcmdldCB8fCBldmVudC50YXJnZXQuX3NlbnRyeUlkICE9PSBsYXN0Q2FwdHVyZWRFdmVudFRhcmdldElkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8ganVzdCBhY2Nlc3NpbmcgYHRhcmdldGAgcHJvcGVydHkgY2FuIHRocm93IGFuIGV4Y2VwdGlvbiBpbiBzb21lIHJhcmUgY2lyY3Vtc3RhbmNlc1xuICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvODM4XG4gIH1cblxuICAvLyBJZiBib3RoIGV2ZW50cyBoYXZlIHRoZSBzYW1lIHR5cGUgX2FuZF8gc2FtZSBgdGFyZ2V0YCAoYW4gZWxlbWVudCB3aGljaCB0cmlnZ2VyZWQgYW4gZXZlbnQsIF9ub3QgbmVjZXNzYXJpbHlfXG4gIC8vIHRvIHdoaWNoIGFuIGV2ZW50IGxpc3RlbmVyIHdhcyBhdHRhY2hlZCksIHdlIHRyZWF0IHRoZW0gYXMgdGhlIHNhbWUgYWN0aW9uLCBhcyB3ZSB3YW50IHRvIGNhcHR1cmVcbiAgLy8gb25seSBvbmUgYnJlYWRjcnVtYi4gZS5nLiBtdWx0aXBsZSBjbGlja3Mgb24gdGhlIHNhbWUgYnV0dG9uLCBvciB0eXBpbmcgaW5zaWRlIGEgdXNlciBpbnB1dCBib3guXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIERlY2lkZSB3aGV0aGVyIGFuIGV2ZW50IHNob3VsZCBiZSBjYXB0dXJlZC5cbiAqIEBwYXJhbSBldmVudCBldmVudCB0byBiZSBjYXB0dXJlZFxuICovXG5mdW5jdGlvbiBzaG91bGRTa2lwRE9NRXZlbnQoZXZlbnRUeXBlLCB0YXJnZXQpIHtcbiAgLy8gV2UgYXJlIG9ubHkgaW50ZXJlc3RlZCBpbiBmaWx0ZXJpbmcgYGtleXByZXNzYCBldmVudHMgZm9yIG5vdy5cbiAgaWYgKGV2ZW50VHlwZSAhPT0gJ2tleXByZXNzJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIXRhcmdldD8udGFnTmFtZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gT25seSBjb25zaWRlciBrZXlwcmVzcyBldmVudHMgb24gYWN0dWFsIGlucHV0IGVsZW1lbnRzLiBUaGlzIHdpbGwgZGlzcmVnYXJkIGtleXByZXNzZXMgdGFyZ2V0aW5nIGJvZHlcbiAgLy8gZS5nLnRhYmJpbmcgdGhyb3VnaCBlbGVtZW50cywgaG90a2V5cywgZXRjLlxuICBpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgdGFyZ2V0LnRhZ05hbWUgPT09ICdURVhUQVJFQScgfHwgdGFyZ2V0LmlzQ29udGVudEVkaXRhYmxlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFdyYXBzIGFkZEV2ZW50TGlzdGVuZXIgdG8gY2FwdHVyZSBVSSBicmVhZGNydW1ic1xuICovXG5mdW5jdGlvbiBtYWtlRE9NRXZlbnRIYW5kbGVyKGhhbmRsZXIsIGdsb2JhbExpc3RlbmVyID0gZmFsc2UpIHtcbiAgcmV0dXJuIGV2ZW50ID0+IHtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoaXMgaGFuZGxlciBtaWdodCB0cmlnZ2VyIG11bHRpcGxlIHRpbWVzIGZvciB0aGUgc2FtZVxuICAgIC8vIGV2ZW50IChlLmcuIGV2ZW50IHByb3BhZ2F0aW9uIHRocm91Z2ggbm9kZSBhbmNlc3RvcnMpLlxuICAgIC8vIElnbm9yZSBpZiB3ZSd2ZSBhbHJlYWR5IGNhcHR1cmVkIHRoYXQgZXZlbnQuXG4gICAgaWYgKCFldmVudCB8fCBldmVudFsnX3NlbnRyeUNhcHR1cmVkJ10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpO1xuXG4gICAgLy8gV2UgYWx3YXlzIHdhbnQgdG8gc2tpcCBfc29tZV8gZXZlbnRzLlxuICAgIGlmIChzaG91bGRTa2lwRE9NRXZlbnQoZXZlbnQudHlwZSwgdGFyZ2V0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE1hcmsgZXZlbnQgYXMgXCJzZWVuXCJcbiAgICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoZXZlbnQsICdfc2VudHJ5Q2FwdHVyZWQnLCB0cnVlKTtcbiAgICBpZiAodGFyZ2V0ICYmICF0YXJnZXQuX3NlbnRyeUlkKSB7XG4gICAgICAvLyBBZGQgVVVJRCB0byBldmVudCB0YXJnZXQgc28gd2UgY2FuIGlkZW50aWZ5IGlmXG4gICAgICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkodGFyZ2V0LCAnX3NlbnRyeUlkJywgdXVpZDQoKSk7XG4gICAgfVxuICAgIGNvbnN0IG5hbWUgPSBldmVudC50eXBlID09PSAna2V5cHJlc3MnID8gJ2lucHV0JyA6IGV2ZW50LnR5cGU7XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBubyBsYXN0IGNhcHR1cmVkIGV2ZW50LCBpdCBtZWFucyB0aGF0IHdlIGNhbiBzYWZlbHkgY2FwdHVyZSB0aGUgbmV3IGV2ZW50IGFuZCBzdG9yZSBpdCBmb3IgZnV0dXJlIGNvbXBhcmlzb25zLlxuICAgIC8vIElmIHRoZXJlIGlzIGEgbGFzdCBjYXB0dXJlZCBldmVudCwgc2VlIGlmIHRoZSBuZXcgZXZlbnQgaXMgZGlmZmVyZW50IGVub3VnaCB0byB0cmVhdCBpdCBhcyBhIHVuaXF1ZSBvbmUuXG4gICAgLy8gSWYgdGhhdCdzIHRoZSBjYXNlLCBlbWl0IHRoZSBwcmV2aW91cyBldmVudCBhbmQgc3RvcmUgbG9jYWxseSB0aGUgbmV3bHktY2FwdHVyZWQgRE9NIGV2ZW50LlxuICAgIGlmICghaXNTaW1pbGFyVG9MYXN0Q2FwdHVyZWRFdmVudChldmVudCkpIHtcbiAgICAgIGNvbnN0IGhhbmRsZXJEYXRhID0ge1xuICAgICAgICBldmVudCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZ2xvYmFsOiBnbG9iYWxMaXN0ZW5lclxuICAgICAgfTtcbiAgICAgIGhhbmRsZXIoaGFuZGxlckRhdGEpO1xuICAgICAgbGFzdENhcHR1cmVkRXZlbnRUeXBlID0gZXZlbnQudHlwZTtcbiAgICAgIGxhc3RDYXB0dXJlZEV2ZW50VGFyZ2V0SWQgPSB0YXJnZXQgPyB0YXJnZXQuX3NlbnRyeUlkIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0IGEgbmV3IGRlYm91bmNlIHRpbWVyIHRoYXQgd2lsbCBwcmV2ZW50IHVzIGZyb20gY2FwdHVyaW5nIG11bHRpcGxlIGV2ZW50cyB0aGF0IHNob3VsZCBiZSBncm91cGVkIHRvZ2V0aGVyLlxuICAgIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVySUQpO1xuICAgIGRlYm91bmNlVGltZXJJRCA9IFdJTkRPVy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGxhc3RDYXB0dXJlZEV2ZW50VGFyZ2V0SWQgPSB1bmRlZmluZWQ7XG4gICAgICBsYXN0Q2FwdHVyZWRFdmVudFR5cGUgPSB1bmRlZmluZWQ7XG4gICAgfSwgREVCT1VOQ0VfRFVSQVRJT04pO1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZXZlbnQudGFyZ2V0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8ganVzdCBhY2Nlc3NpbmcgYHRhcmdldGAgcHJvcGVydHkgY2FuIHRocm93IGFuIGV4Y2VwdGlvbiBpbiBzb21lIHJhcmUgY2lyY3Vtc3RhbmNlc1xuICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvODM4XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmV4cG9ydCB7IGFkZENsaWNrS2V5cHJlc3NJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBpbnN0cnVtZW50RE9NIH07XG4iLCJpbXBvcnQgeyBhZGRIYW5kbGVyLCBtYXliZUluc3RydW1lbnQsIHRyaWdnZXJIYW5kbGVycywgc3VwcG9ydHNIaXN0b3J5LCBmaWxsIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IFdJTkRPVyB9IGZyb20gJy4uL3R5cGVzLmpzJztcbmxldCBsYXN0SHJlZjtcblxuLyoqXG4gKiBBZGQgYW4gaW5zdHJ1bWVudGF0aW9uIGhhbmRsZXIgZm9yIHdoZW4gYSBmZXRjaCByZXF1ZXN0IGhhcHBlbnMuXG4gKiBUaGUgaGFuZGxlciBmdW5jdGlvbiBpcyBjYWxsZWQgb25jZSB3aGVuIHRoZSByZXF1ZXN0IHN0YXJ0cyBhbmQgb25jZSB3aGVuIGl0IGVuZHMsXG4gKiB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieSBjaGVja2luZyBpZiBpdCBoYXMgYW4gYGVuZFRpbWVzdGFtcGAuXG4gKlxuICogVXNlIGF0IHlvdXIgb3duIHJpc2ssIHRoaXMgbWlnaHQgYnJlYWsgd2l0aG91dCBjaGFuZ2Vsb2cgbm90aWNlLCBvbmx5IHVzZWQgaW50ZXJuYWxseS5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gYWRkSGlzdG9yeUluc3RydW1lbnRhdGlvbkhhbmRsZXIoaGFuZGxlcikge1xuICBjb25zdCB0eXBlID0gJ2hpc3RvcnknO1xuICBhZGRIYW5kbGVyKHR5cGUsIGhhbmRsZXIpO1xuICBtYXliZUluc3RydW1lbnQodHlwZSwgaW5zdHJ1bWVudEhpc3RvcnkpO1xufVxuXG4vKipcbiAqIEV4cG9ydGVkIGp1c3QgZm9yIHRlc3RpbmdcbiAqL1xuZnVuY3Rpb24gaW5zdHJ1bWVudEhpc3RvcnkoKSB7XG4gIC8vIFRoZSBgcG9wc3RhdGVgIGV2ZW50IG1heSBhbHNvIGJlIHRyaWdnZXJlZCBvbiBgcHVzaFN0YXRlYCwgYnV0IGl0IG1heSBub3QgYWx3YXlzIHJlbGlhYmx5IGJlIGVtaXR0ZWQgYnkgdGhlIGJyb3dzZXJcbiAgLy8gV2hpY2ggaXMgd2h5IHdlIGFsc28gbW9ua2V5LXBhdGNoIG1ldGhvZHMgYmVsb3csIGluIGFkZGl0aW9uIHRvIHRoaXNcbiAgV0lORE9XLmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgKCkgPT4ge1xuICAgIGNvbnN0IHRvID0gV0lORE9XLmxvY2F0aW9uLmhyZWY7XG4gICAgLy8ga2VlcCB0cmFjayBvZiB0aGUgY3VycmVudCBVUkwgc3RhdGUsIGFzIHdlIGFsd2F5cyByZWNlaXZlIG9ubHkgdGhlIHVwZGF0ZWQgc3RhdGVcbiAgICBjb25zdCBmcm9tID0gbGFzdEhyZWY7XG4gICAgbGFzdEhyZWYgPSB0bztcbiAgICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlckRhdGEgPSB7XG4gICAgICBmcm9tLFxuICAgICAgdG9cbiAgICB9O1xuICAgIHRyaWdnZXJIYW5kbGVycygnaGlzdG9yeScsIGhhbmRsZXJEYXRhKTtcbiAgfSk7XG5cbiAgLy8gSnVzdCBndWFyZCBhZ2FpbnN0IHRoaXMgbm90IGJlaW5nIGF2YWlsYWJsZSwgaW4gd2VpcmQgZW52aXJvbm1lbnRzXG4gIGlmICghc3VwcG9ydHNIaXN0b3J5KCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZnVuY3Rpb24gaGlzdG9yeVJlcGxhY2VtZW50RnVuY3Rpb24ob3JpZ2luYWxIaXN0b3J5RnVuY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgIGNvbnN0IHVybCA9IGFyZ3MubGVuZ3RoID4gMiA/IGFyZ3NbMl0gOiB1bmRlZmluZWQ7XG4gICAgICBpZiAodXJsKSB7XG4gICAgICAgIGNvbnN0IGZyb20gPSBsYXN0SHJlZjtcblxuICAgICAgICAvLyBFbnN1cmUgdGhlIFVSTCBpcyBhYnNvbHV0ZVxuICAgICAgICAvLyB0aGlzIGNhbiBiZSBlaXRoZXIgYSBwYXRoLCB0aGVuIGl0IGlzIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IG9yaWdpblxuICAgICAgICAvLyBvciBhIGZ1bGwgVVJMIG9mIHRoZSBjdXJyZW50IG9yaWdpbiAtIG90aGVyIG9yaWdpbnMgYXJlIG5vdCBhbGxvd2VkXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hpc3RvcnkvcHVzaFN0YXRlI3VybFxuICAgICAgICAvLyBjb2VyY2UgdG8gc3RyaW5nICh0aGlzIGlzIHdoYXQgcHVzaFN0YXRlIGRvZXMpXG4gICAgICAgIGNvbnN0IHRvID0gZ2V0QWJzb2x1dGVVcmwoU3RyaW5nKHVybCkpO1xuXG4gICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhlIGN1cnJlbnQgVVJMIHN0YXRlLCBhcyB3ZSBhbHdheXMgcmVjZWl2ZSBvbmx5IHRoZSB1cGRhdGVkIHN0YXRlXG4gICAgICAgIGxhc3RIcmVmID0gdG87XG4gICAgICAgIGlmIChmcm9tID09PSB0bykge1xuICAgICAgICAgIHJldHVybiBvcmlnaW5hbEhpc3RvcnlGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYW5kbGVyRGF0YSA9IHtcbiAgICAgICAgICBmcm9tLFxuICAgICAgICAgIHRvXG4gICAgICAgIH07XG4gICAgICAgIHRyaWdnZXJIYW5kbGVycygnaGlzdG9yeScsIGhhbmRsZXJEYXRhKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcmlnaW5hbEhpc3RvcnlGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuICB9XG4gIGZpbGwoV0lORE9XLmhpc3RvcnksICdwdXNoU3RhdGUnLCBoaXN0b3J5UmVwbGFjZW1lbnRGdW5jdGlvbik7XG4gIGZpbGwoV0lORE9XLmhpc3RvcnksICdyZXBsYWNlU3RhdGUnLCBoaXN0b3J5UmVwbGFjZW1lbnRGdW5jdGlvbik7XG59XG5mdW5jdGlvbiBnZXRBYnNvbHV0ZVVybCh1cmxPclBhdGgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHVybE9yUGF0aCwgV0lORE9XLmxvY2F0aW9uLm9yaWdpbik7XG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9IGNhdGNoIHtcbiAgICAvLyBmYWxsYmFjaywganVzdCBkbyBub3RoaW5nXG4gICAgcmV0dXJuIHVybE9yUGF0aDtcbiAgfVxufVxuZXhwb3J0IHsgYWRkSGlzdG9yeUluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGluc3RydW1lbnRIaXN0b3J5IH07XG4iLCJpbXBvcnQgeyBpc05hdGl2ZUZ1bmN0aW9uLCBsb2dnZXIgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IFdJTkRPVyB9IGZyb20gJy4vdHlwZXMuanMnO1xuXG4vKipcbiAqIFdlIGdlbmVyYWxseSB3YW50IHRvIHVzZSB3aW5kb3cuZmV0Y2ggLyB3aW5kb3cuc2V0VGltZW91dC5cbiAqIEhvd2V2ZXIsIGluIHNvbWUgY2FzZXMgdGhpcyBtYXkgYmUgd3JhcHBlZCAoZS5nLiBieSBab25lLmpzIGZvciBBbmd1bGFyKSxcbiAqIHNvIHdlIHRyeSB0byBnZXQgYW4gdW5wYXRjaGVkIHZlcnNpb24gb2YgdGhpcyBmcm9tIGEgc2FuZGJveGVkIGlmcmFtZS5cbiAqL1xuXG5jb25zdCBjYWNoZWRJbXBsZW1lbnRhdGlvbnMgPSB7fTtcblxuLyoqXG4gKiBHZXQgdGhlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiBvZiBhIGJyb3dzZXIgZnVuY3Rpb24uXG4gKlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBlbnN1cmUgd2UgZ2V0IGFuIHVud3JhcHBlZCB2ZXJzaW9uIG9mIGEgZnVuY3Rpb24sIGluIGNhc2VzIHdoZXJlIGEgd3JhcHBlZCBmdW5jdGlvbiBjYW4gbGVhZCB0byBwcm9ibGVtcy5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIG1ldGhvZHMgY2FuIGJlIHJldHJpZXZlZDpcbiAqIC0gYHNldFRpbWVvdXRgOiBUaGlzIGNhbiBiZSB3cmFwcGVkIGJ5IGUuZy4gQW5ndWxhciwgY2F1c2luZyBjaGFuZ2UgZGV0ZWN0aW9uIHRvIGJlIHRyaWdnZXJlZC5cbiAqIC0gYGZldGNoYDogVGhpcyBjYW4gYmUgd3JhcHBlZCBieSBlLmcuIGFkLWJsb2NrZXJzLCBjYXVzaW5nIGFuIGluZmluaXRlIGxvb3Agd2hlbiBhIHJlcXVlc3QgaXMgYmxvY2tlZC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlSW1wbGVtZW50YXRpb24obmFtZSkge1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZWRJbXBsZW1lbnRhdGlvbnNbbmFtZV07XG4gIGlmIChjYWNoZWQpIHtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIGxldCBpbXBsID0gV0lORE9XW25hbWVdO1xuXG4gIC8vIEZhc3QgcGF0aCB0byBhdm9pZCBET00gSS9PXG4gIGlmIChpc05hdGl2ZUZ1bmN0aW9uKGltcGwpKSB7XG4gICAgcmV0dXJuIGNhY2hlZEltcGxlbWVudGF0aW9uc1tuYW1lXSA9IGltcGwuYmluZChXSU5ET1cpO1xuICB9XG4gIGNvbnN0IGRvY3VtZW50ID0gV0lORE9XLmRvY3VtZW50O1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb25cbiAgaWYgKGRvY3VtZW50ICYmIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNhbmRib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgIHNhbmRib3guaGlkZGVuID0gdHJ1ZTtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2FuZGJveCk7XG4gICAgICBjb25zdCBjb250ZW50V2luZG93ID0gc2FuZGJveC5jb250ZW50V2luZG93O1xuICAgICAgaWYgKGNvbnRlbnRXaW5kb3c/LltuYW1lXSkge1xuICAgICAgICBpbXBsID0gY29udGVudFdpbmRvd1tuYW1lXTtcbiAgICAgIH1cbiAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoc2FuZGJveCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gQ291bGQgbm90IGNyZWF0ZSBzYW5kYm94IGlmcmFtZSwganVzdCB1c2Ugd2luZG93Lnh4eFxuICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oYENvdWxkIG5vdCBjcmVhdGUgc2FuZGJveCBpZnJhbWUgZm9yICR7bmFtZX0gY2hlY2ssIGJhaWxpbmcgdG8gd2luZG93LiR7bmFtZX06IGAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNhbml0eSBjaGVjazogVGhpcyBfc2hvdWxkXyBub3QgaGFwcGVuLCBidXQgaWYgaXQgZG9lcywgd2UganVzdCBza2lwIGNhY2hpbmcuLi5cbiAgLy8gVGhpcyBjYW4gaGFwcGVuIGUuZy4gaW4gdGVzdHMgd2hlcmUgZmV0Y2ggbWF5IG5vdCBiZSBhdmFpbGFibGUgaW4gdGhlIGVudiwgb3Igc2ltaWxhci5cbiAgaWYgKCFpbXBsKSB7XG4gICAgcmV0dXJuIGltcGw7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZEltcGxlbWVudGF0aW9uc1tuYW1lXSA9IGltcGwuYmluZChXSU5ET1cpO1xufVxuXG4vKiogQ2xlYXIgYSBjYWNoZWQgaW1wbGVtZW50YXRpb24uICovXG5mdW5jdGlvbiBjbGVhckNhY2hlZEltcGxlbWVudGF0aW9uKG5hbWUpIHtcbiAgY2FjaGVkSW1wbGVtZW50YXRpb25zW25hbWVdID0gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbCB1c2VjYXNlIGZvciBpbmNvcnJlY3RseSB3cmFwcGVkIEZldGNoIEFQSXMgaW4gY29uanVuY3Rpb24gd2l0aCBhZC1ibG9ja2Vycy5cbiAqIFdoZW5ldmVyIHNvbWVvbmUgd3JhcHMgdGhlIEZldGNoIEFQSSBhbmQgcmV0dXJucyB0aGUgd3JvbmcgcHJvbWlzZSBjaGFpbixcbiAqIHRoaXMgY2hhaW4gYmVjb21lcyBvcnBoYW5lZCBhbmQgdGhlcmUgaXMgbm8gcG9zc2libGUgd2F5IHRvIGNhcHR1cmUgaXQncyByZWplY3Rpb25zXG4gKiBvdGhlciB0aGFuIGFsbG93aW5nIGl0IGJ1YmJsZSB1cCB0byB0aGlzIHZlcnkgaGFuZGxlci4gZWcuXG4gKlxuICogY29uc3QgZiA9IHdpbmRvdy5mZXRjaDtcbiAqIHdpbmRvdy5mZXRjaCA9IGZ1bmN0aW9uICgpIHtcbiAqICAgY29uc3QgcCA9IGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAqXG4gKiAgIHAudGhlbihmdW5jdGlvbigpIHtcbiAqICAgICBjb25zb2xlLmxvZygnaGkuJyk7XG4gKiAgIH0pO1xuICpcbiAqICAgcmV0dXJuIHA7XG4gKiB9XG4gKlxuICogYHAudGhlbihmdW5jdGlvbiAoKSB7IC4uLiB9KWAgaXMgcHJvZHVjaW5nIGEgY29tcGxldGVseSBzZXBhcmF0ZSBwcm9taXNlIGNoYWluLFxuICogaG93ZXZlciwgd2hhdCdzIHJldHVybmVkIGlzIGBwYCAtIHRoZSByZXN1bHQgb2Ygb3JpZ2luYWwgYGZldGNoYCBjYWxsLlxuICpcbiAqIFRoaXMgbWVhbiwgdGhhdCB3aGVuZXZlciB3ZSB1c2UgdGhlIEZldGNoIEFQSSB0byBzZW5kIG91ciBvd24gcmVxdWVzdHMsIF9hbmRfXG4gKiBzb21lIGFkLWJsb2NrZXIgYmxvY2tzIGl0LCB0aGlzIG9ycGhhbmVkIGNoYWluIHdpbGwgX2Fsd2F5c18gcmVqZWN0LFxuICogZWZmZWN0aXZlbHkgY2F1c2luZyBhbm90aGVyIGV2ZW50IHRvIGJlIGNhcHR1cmVkLlxuICogVGhpcyBtYWtlcyBhIHdob2xlIHByb2Nlc3MgYmVjb21lIGFuIGluZmluaXRlIGxvb3AsIHdoaWNoIHdlIG5lZWQgdG8gc29tZWhvd1xuICogZGVhbCB3aXRoLCBhbmQgYnJlYWsgaXQgaW4gb25lIHdheSBvciBhbm90aGVyLlxuICpcbiAqIFRvIGRlYWwgd2l0aCB0aGlzIGlzc3VlLCB3ZSBhcmUgbWFraW5nIHN1cmUgdGhhdCB3ZSBfYWx3YXlzXyB1c2UgdGhlIHJlYWxcbiAqIGJyb3dzZXIgRmV0Y2ggQVBJLCBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gd2hhdCBgd2luZG93LmZldGNoYCBleHBvc2VzLlxuICogVGhlIG9ubHkgZG93bnNpZGUgdG8gdGhpcyB3b3VsZCBiZSBtaXNzaW5nIG91ciBvd24gcmVxdWVzdHMgYXMgYnJlYWRjcnVtYnMsXG4gKiBidXQgYmVjYXVzZSB3ZSBhcmUgYWxyZWFkeSBub3QgZG9pbmcgdGhpcywgaXQgc2hvdWxkIGJlIGp1c3QgZmluZS5cbiAqXG4gKiBQb3NzaWJsZSBmYWlsZWQgZmV0Y2ggZXJyb3IgbWVzc2FnZXMgcGVyLWJyb3dzZXI6XG4gKlxuICogQ2hyb21lOiAgRmFpbGVkIHRvIGZldGNoXG4gKiBFZGdlOiAgICBGYWlsZWQgdG8gRmV0Y2hcbiAqIEZpcmVmb3g6IE5ldHdvcmtFcnJvciB3aGVuIGF0dGVtcHRpbmcgdG8gZmV0Y2ggcmVzb3VyY2VcbiAqIFNhZmFyaTogIHJlc291cmNlIGJsb2NrZWQgYnkgY29udGVudCBibG9ja2VyXG4gKi9cbmZ1bmN0aW9uIGZldGNoKC4uLnJlc3QpIHtcbiAgcmV0dXJuIGdldE5hdGl2ZUltcGxlbWVudGF0aW9uKCdmZXRjaCcpKC4uLnJlc3QpO1xufVxuXG4vKipcbiAqIEdldCBhbiB1bndyYXBwZWQgYHNldFRpbWVvdXRgIG1ldGhvZC5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IGV2ZW4gaWYgZS5nLiBBbmd1bGFyIHdyYXBzIGBzZXRUaW1lb3V0YCwgd2UgZ2V0IHRoZSBuYXRpdmUgaW1wbGVtZW50YXRpb24sXG4gKiBhdm9pZGluZyB0cmlnZ2VyaW5nIGNoYW5nZSBkZXRlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHNldFRpbWVvdXQoLi4ucmVzdCkge1xuICByZXR1cm4gZ2V0TmF0aXZlSW1wbGVtZW50YXRpb24oJ3NldFRpbWVvdXQnKSguLi5yZXN0KTtcbn1cbmV4cG9ydCB7IGNsZWFyQ2FjaGVkSW1wbGVtZW50YXRpb24sIGZldGNoLCBnZXROYXRpdmVJbXBsZW1lbnRhdGlvbiwgc2V0VGltZW91dCB9O1xuIiwiaW1wb3J0IHsgYWRkSGFuZGxlciwgbWF5YmVJbnN0cnVtZW50LCB0aW1lc3RhbXBJblNlY29uZHMsIGlzU3RyaW5nLCB0cmlnZ2VySGFuZGxlcnMgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vdHlwZXMuanMnO1xuY29uc3QgU0VOVFJZX1hIUl9EQVRBX0tFWSA9ICdfX3NlbnRyeV94aHJfdjNfXyc7XG5cbi8qKlxuICogQWRkIGFuIGluc3RydW1lbnRhdGlvbiBoYW5kbGVyIGZvciB3aGVuIGFuIFhIUiByZXF1ZXN0IGhhcHBlbnMuXG4gKiBUaGUgaGFuZGxlciBmdW5jdGlvbiBpcyBjYWxsZWQgb25jZSB3aGVuIHRoZSByZXF1ZXN0IHN0YXJ0cyBhbmQgb25jZSB3aGVuIGl0IGVuZHMsXG4gKiB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieSBjaGVja2luZyBpZiBpdCBoYXMgYW4gYGVuZFRpbWVzdGFtcGAuXG4gKlxuICogVXNlIGF0IHlvdXIgb3duIHJpc2ssIHRoaXMgbWlnaHQgYnJlYWsgd2l0aG91dCBjaGFuZ2Vsb2cgbm90aWNlLCBvbmx5IHVzZWQgaW50ZXJuYWxseS5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gYWRkWGhySW5zdHJ1bWVudGF0aW9uSGFuZGxlcihoYW5kbGVyKSB7XG4gIGNvbnN0IHR5cGUgPSAneGhyJztcbiAgYWRkSGFuZGxlcih0eXBlLCBoYW5kbGVyKTtcbiAgbWF5YmVJbnN0cnVtZW50KHR5cGUsIGluc3RydW1lbnRYSFIpO1xufVxuXG4vKiogRXhwb3J0ZWQgb25seSBmb3IgdGVzdHMuICovXG5mdW5jdGlvbiBpbnN0cnVtZW50WEhSKCkge1xuICBpZiAoIVdJTkRPVy5YTUxIdHRwUmVxdWVzdCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB4aHJwcm90byA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gIHhocnByb3RvLm9wZW4gPSBuZXcgUHJveHkoeGhycHJvdG8ub3Blbiwge1xuICAgIGFwcGx5KG9yaWdpbmFsT3BlbiwgeGhyT3BlblRoaXNBcmcsIHhock9wZW5BcmdBcnJheSkge1xuICAgICAgLy8gTk9URTogSWYgeW91IGFyZSBhIFNlbnRyeSB1c2VyLCBhbmQgeW91IGFyZSBzZWVpbmcgdGhpcyBzdGFjayBmcmFtZSxcbiAgICAgIC8vICAgICAgIGl0IG1lYW5zIHRoZSBlcnJvciwgdGhhdCB3YXMgY2F1c2VkIGJ5IHlvdXIgWEhSIGNhbGwgZGlkIG5vdFxuICAgICAgLy8gICAgICAgaGF2ZSBhIHN0YWNrIHRyYWNlLiBJZiB5b3UgYXJlIHVzaW5nIEh0dHBDbGllbnQgaW50ZWdyYXRpb24sXG4gICAgICAvLyAgICAgICB0aGlzIGlzIHRoZSBleHBlY3RlZCBiZWhhdmlvciwgYXMgd2UgYXJlIHVzaW5nIHRoaXMgdmlydHVhbCBlcnJvciB0byBjYXB0dXJlXG4gICAgICAvLyAgICAgICB0aGUgbG9jYXRpb24gb2YgeW91ciBYSFIgY2FsbCwgYW5kIGdyb3VwIHlvdXIgSHR0cENsaWVudCBldmVudHMgYWNjb3JkaW5nbHkuXG4gICAgICBjb25zdCB2aXJ0dWFsRXJyb3IgPSBuZXcgRXJyb3IoKTtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZXN0YW1wID0gdGltZXN0YW1wSW5TZWNvbmRzKCkgKiAxMDAwO1xuXG4gICAgICAvLyBvcGVuKCkgc2hvdWxkIGFsd2F5cyBiZSBjYWxsZWQgd2l0aCB0d28gb3IgbW9yZSBhcmd1bWVudHNcbiAgICAgIC8vIEJ1dCB0byBiZSBvbiB0aGUgc2FmZSBzaWRlLCB3ZSBhY3R1YWxseSB2YWxpZGF0ZSB0aGlzIGFuZCBiYWlsIG91dCBpZiB3ZSBkb24ndCBoYXZlIGEgbWV0aG9kICYgdXJsXG4gICAgICBjb25zdCBtZXRob2QgPSBpc1N0cmluZyh4aHJPcGVuQXJnQXJyYXlbMF0pID8geGhyT3BlbkFyZ0FycmF5WzBdLnRvVXBwZXJDYXNlKCkgOiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCB1cmwgPSBwYXJzZVhoclVybEFyZyh4aHJPcGVuQXJnQXJyYXlbMV0pO1xuICAgICAgaWYgKCFtZXRob2QgfHwgIXVybCkge1xuICAgICAgICByZXR1cm4gb3JpZ2luYWxPcGVuLmFwcGx5KHhock9wZW5UaGlzQXJnLCB4aHJPcGVuQXJnQXJyYXkpO1xuICAgICAgfVxuICAgICAgeGhyT3BlblRoaXNBcmdbU0VOVFJZX1hIUl9EQVRBX0tFWV0gPSB7XG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgdXJsLFxuICAgICAgICByZXF1ZXN0X2hlYWRlcnM6IHt9XG4gICAgICB9O1xuXG4gICAgICAvLyBpZiBTZW50cnkga2V5IGFwcGVhcnMgaW4gVVJMLCBkb24ndCBjYXB0dXJlIGl0IGFzIGEgcmVxdWVzdFxuICAgICAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnICYmIHVybC5tYXRjaCgvc2VudHJ5X2tleS8pKSB7XG4gICAgICAgIHhock9wZW5UaGlzQXJnLl9fc2VudHJ5X293bl9yZXF1ZXN0X18gPSB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc3Qgb25yZWFkeXN0YXRlY2hhbmdlSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgLy8gRm9yIHdoYXRldmVyIHJlYXNvbiwgdGhpcyBpcyBub3QgdGhlIHNhbWUgaW5zdGFuY2UgaGVyZSBhcyBmcm9tIHRoZSBvdXRlciBtZXRob2RcbiAgICAgICAgY29uc3QgeGhySW5mbyA9IHhock9wZW5UaGlzQXJnW1NFTlRSWV9YSFJfREFUQV9LRVldO1xuICAgICAgICBpZiAoIXhockluZm8pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHhock9wZW5UaGlzQXJnLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gdG91Y2hpbmcgc3RhdHVzQ29kZSBpbiBzb21lIHBsYXRmb3JtcyB0aHJvd3NcbiAgICAgICAgICAgIC8vIGFuIGV4Y2VwdGlvblxuICAgICAgICAgICAgeGhySW5mby5zdGF0dXNfY29kZSA9IHhock9wZW5UaGlzQXJnLnN0YXR1cztcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvKiBkbyBub3RoaW5nICovXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGhhbmRsZXJEYXRhID0ge1xuICAgICAgICAgICAgZW5kVGltZXN0YW1wOiB0aW1lc3RhbXBJblNlY29uZHMoKSAqIDEwMDAsXG4gICAgICAgICAgICBzdGFydFRpbWVzdGFtcCxcbiAgICAgICAgICAgIHhocjogeGhyT3BlblRoaXNBcmcsXG4gICAgICAgICAgICB2aXJ0dWFsRXJyb3JcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRyaWdnZXJIYW5kbGVycygneGhyJywgaGFuZGxlckRhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKCdvbnJlYWR5c3RhdGVjaGFuZ2UnIGluIHhock9wZW5UaGlzQXJnICYmIHR5cGVvZiB4aHJPcGVuVGhpc0FyZy5vbnJlYWR5c3RhdGVjaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgeGhyT3BlblRoaXNBcmcub25yZWFkeXN0YXRlY2hhbmdlID0gbmV3IFByb3h5KHhock9wZW5UaGlzQXJnLm9ucmVhZHlzdGF0ZWNoYW5nZSwge1xuICAgICAgICAgIGFwcGx5KG9yaWdpbmFsT25yZWFkeXN0YXRlY2hhbmdlLCBvbnJlYWR5c3RhdGVjaGFuZ2VUaGlzQXJnLCBvbnJlYWR5c3RhdGVjaGFuZ2VBcmdBcnJheSkge1xuICAgICAgICAgICAgb25yZWFkeXN0YXRlY2hhbmdlSGFuZGxlcigpO1xuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsT25yZWFkeXN0YXRlY2hhbmdlLmFwcGx5KG9ucmVhZHlzdGF0ZWNoYW5nZVRoaXNBcmcsIG9ucmVhZHlzdGF0ZWNoYW5nZUFyZ0FycmF5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeGhyT3BlblRoaXNBcmcuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIG9ucmVhZHlzdGF0ZWNoYW5nZUhhbmRsZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBJbnRlcmNlcHRpbmcgYHNldFJlcXVlc3RIZWFkZXJgIHRvIGFjY2VzcyB0aGUgcmVxdWVzdCBoZWFkZXJzIG9mIFhIUiBpbnN0YW5jZS5cbiAgICAgIC8vIFRoaXMgd2lsbCBvbmx5IHdvcmsgZm9yIHVzZXIvbGlicmFyeSBkZWZpbmVkIGhlYWRlcnMsIG5vdCBmb3IgdGhlIGRlZmF1bHQvYnJvd3Nlci1hc3NpZ25lZCBoZWFkZXJzLlxuICAgICAgLy8gUmVxdWVzdCBjb29raWVzIGFyZSBhbHNvIHVuYXZhaWxhYmxlIGZvciBYSFIsIGFzIGBDb29raWVgIGhlYWRlciBjYW4ndCBiZSBkZWZpbmVkIGJ5IGBzZXRSZXF1ZXN0SGVhZGVyYC5cbiAgICAgIHhock9wZW5UaGlzQXJnLnNldFJlcXVlc3RIZWFkZXIgPSBuZXcgUHJveHkoeGhyT3BlblRoaXNBcmcuc2V0UmVxdWVzdEhlYWRlciwge1xuICAgICAgICBhcHBseShvcmlnaW5hbFNldFJlcXVlc3RIZWFkZXIsIHNldFJlcXVlc3RIZWFkZXJUaGlzQXJnLCBzZXRSZXF1ZXN0SGVhZGVyQXJnQXJyYXkpIHtcbiAgICAgICAgICBjb25zdCBbaGVhZGVyLCB2YWx1ZV0gPSBzZXRSZXF1ZXN0SGVhZGVyQXJnQXJyYXk7XG4gICAgICAgICAgY29uc3QgeGhySW5mbyA9IHNldFJlcXVlc3RIZWFkZXJUaGlzQXJnW1NFTlRSWV9YSFJfREFUQV9LRVldO1xuICAgICAgICAgIGlmICh4aHJJbmZvICYmIGlzU3RyaW5nKGhlYWRlcikgJiYgaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgICAgICB4aHJJbmZvLnJlcXVlc3RfaGVhZGVyc1toZWFkZXIudG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG9yaWdpbmFsU2V0UmVxdWVzdEhlYWRlci5hcHBseShzZXRSZXF1ZXN0SGVhZGVyVGhpc0FyZywgc2V0UmVxdWVzdEhlYWRlckFyZ0FycmF5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gb3JpZ2luYWxPcGVuLmFwcGx5KHhock9wZW5UaGlzQXJnLCB4aHJPcGVuQXJnQXJyYXkpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmJvdW5kLW1ldGhvZFxuICB4aHJwcm90by5zZW5kID0gbmV3IFByb3h5KHhocnByb3RvLnNlbmQsIHtcbiAgICBhcHBseShvcmlnaW5hbFNlbmQsIHNlbmRUaGlzQXJnLCBzZW5kQXJnQXJyYXkpIHtcbiAgICAgIGNvbnN0IHNlbnRyeVhockRhdGEgPSBzZW5kVGhpc0FyZ1tTRU5UUllfWEhSX0RBVEFfS0VZXTtcbiAgICAgIGlmICghc2VudHJ5WGhyRGF0YSkge1xuICAgICAgICByZXR1cm4gb3JpZ2luYWxTZW5kLmFwcGx5KHNlbmRUaGlzQXJnLCBzZW5kQXJnQXJyYXkpO1xuICAgICAgfVxuICAgICAgaWYgKHNlbmRBcmdBcnJheVswXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlbnRyeVhockRhdGEuYm9keSA9IHNlbmRBcmdBcnJheVswXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGhhbmRsZXJEYXRhID0ge1xuICAgICAgICBzdGFydFRpbWVzdGFtcDogdGltZXN0YW1wSW5TZWNvbmRzKCkgKiAxMDAwLFxuICAgICAgICB4aHI6IHNlbmRUaGlzQXJnXG4gICAgICB9O1xuICAgICAgdHJpZ2dlckhhbmRsZXJzKCd4aHInLCBoYW5kbGVyRGF0YSk7XG4gICAgICByZXR1cm4gb3JpZ2luYWxTZW5kLmFwcGx5KHNlbmRUaGlzQXJnLCBzZW5kQXJnQXJyYXkpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBVUkwgYXJndW1lbnQgb2YgYSBYSFIgbWV0aG9kIHRvIGEgc3RyaW5nLlxuICpcbiAqIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1hNTEh0dHBSZXF1ZXN0L29wZW4jdXJsXG4gKiB1cmw6IEEgc3RyaW5nIG9yIGFueSBvdGhlciBvYmplY3Qgd2l0aCBhIHN0cmluZ2lmaWVyIOKAlCBpbmNsdWRpbmcgYSBVUkwgb2JqZWN0IOKAlCB0aGF0IHByb3ZpZGVzIHRoZSBVUkwgb2YgdGhlIHJlc291cmNlIHRvIHNlbmQgdGhlIHJlcXVlc3QgdG8uXG4gKlxuICogQHBhcmFtIHVybCAtIFRoZSBVUkwgYXJndW1lbnQgb2YgYW4gWEhSIG1ldGhvZFxuICogQHJldHVybnMgVGhlIHBhcnNlZCBVUkwgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZiB0aGUgVVJMIGlzIGludmFsaWRcbiAqL1xuZnVuY3Rpb24gcGFyc2VYaHJVcmxBcmcodXJsKSB7XG4gIGlmIChpc1N0cmluZyh1cmwpKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICB0cnkge1xuICAgIC8vIElmIHRoZSBwYXNzZWQgaW4gYXJndW1lbnQgaXMgbm90IGEgc3RyaW5nLCBpdCBzaG91bGQgaGF2ZSBhIGB0b1N0cmluZ2AgbWV0aG9kIGFzIGEgc3RyaW5naWZpZXIuXG4gICAgLy8gSWYgdGhhdCBmYWlscywgd2UganVzdCByZXR1cm4gdW5kZWZpbmVkIChsaWtlIGluIElFMTEgd2hlcmUgVVJMIGlzIG5vdCBhdmFpbGFibGUpXG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9IGNhdGNoIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZW1wdHlcblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZXhwb3J0IHsgU0VOVFJZX1hIUl9EQVRBX0tFWSwgYWRkWGhySW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgaW5zdHJ1bWVudFhIUiB9O1xuIiwiaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi9kZWJ1Zy1idWlsZC5qcyc7XG5cbi8qKlxuICogU2VyaWFsaXplcyBGb3JtRGF0YS5cbiAqXG4gKiBUaGlzIGlzIGEgYml0IHNpbXBsaWZpZWQsIGJ1dCBnaXZlcyB1cyBhIGRlY2VudCBlc3RpbWF0ZS5cbiAqIFRoaXMgY29udmVydHMgZS5nLiB7IG5hbWU6ICdBbm5lIFNtaXRoJywgYWdlOiAxMyB9IHRvICduYW1lPUFubmUrU21pdGgmYWdlPTEzJy5cbiAqXG4gKi9cbmZ1bmN0aW9uIHNlcmlhbGl6ZUZvcm1EYXRhKGZvcm1EYXRhKSB7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgcGFzc2luZyBGb3JtRGF0YSB0byBVUkxTZWFyY2hQYXJhbXMgYWN0dWFsbHkgd29ya3NcbiAgcmV0dXJuIG5ldyBVUkxTZWFyY2hQYXJhbXMoZm9ybURhdGEpLnRvU3RyaW5nKCk7XG59XG5cbi8qKiBHZXQgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIGJvZHkuICovXG5mdW5jdGlvbiBnZXRCb2R5U3RyaW5nKGJvZHksIF9sb2dnZXIgPSBsb2dnZXIpIHtcbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gW2JvZHldO1xuICAgIH1cbiAgICBpZiAoYm9keSBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcykge1xuICAgICAgcmV0dXJuIFtib2R5LnRvU3RyaW5nKCldO1xuICAgIH1cbiAgICBpZiAoYm9keSBpbnN0YW5jZW9mIEZvcm1EYXRhKSB7XG4gICAgICByZXR1cm4gW3NlcmlhbGl6ZUZvcm1EYXRhKGJvZHkpXTtcbiAgICB9XG4gICAgaWYgKCFib2R5KSB7XG4gICAgICByZXR1cm4gW3VuZGVmaW5lZF07XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIERFQlVHX0JVSUxEICYmIF9sb2dnZXIuZXJyb3IoZXJyb3IsICdGYWlsZWQgdG8gc2VyaWFsaXplIGJvZHknLCBib2R5KTtcbiAgICByZXR1cm4gW3VuZGVmaW5lZCwgJ0JPRFlfUEFSU0VfRVJST1InXTtcbiAgfVxuICBERUJVR19CVUlMRCAmJiBfbG9nZ2VyLmluZm8oJ1NraXBwaW5nIG5ldHdvcmsgYm9keSBiZWNhdXNlIG9mIGJvZHkgdHlwZScsIGJvZHkpO1xuICByZXR1cm4gW3VuZGVmaW5lZCwgJ1VOUEFSU0VBQkxFX0JPRFlfVFlQRSddO1xufVxuXG4vKipcbiAqIFBhcnNlcyB0aGUgZmV0Y2ggYXJndW1lbnRzIHRvIGV4dHJhY3QgdGhlIHJlcXVlc3QgcGF5bG9hZC5cbiAqXG4gKiBXZSBvbmx5IHN1cHBvcnQgZ2V0dGluZyB0aGUgYm9keSBmcm9tIHRoZSBmZXRjaCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBnZXRGZXRjaFJlcXVlc3RBcmdCb2R5KGZldGNoQXJncyA9IFtdKSB7XG4gIGlmIChmZXRjaEFyZ3MubGVuZ3RoICE9PSAyIHx8IHR5cGVvZiBmZXRjaEFyZ3NbMV0gIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gZmV0Y2hBcmdzWzFdLmJvZHk7XG59XG5leHBvcnQgeyBnZXRCb2R5U3RyaW5nLCBnZXRGZXRjaFJlcXVlc3RBcmdCb2R5LCBzZXJpYWxpemVGb3JtRGF0YSB9O1xuIiwiaW1wb3J0IHsgYnJvd3NlclBlcmZvcm1hbmNlVGltZU9yaWdpbiwgZ2V0QWN0aXZlU3BhbiwgZ2V0Um9vdFNwYW4sIHNwYW5Ub0pTT04sIGdldEN1cnJlbnRTY29wZSwgaHRtbFRyZWVBc1N0cmluZywgU0VNQU5USUNfQVRUUklCVVRFX0VYQ0xVU0lWRV9USU1FLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1ZBTFVFLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX01FQVNVUkVNRU5UX1VOSVQsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1AsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IGFkZFBlcmZvcm1hbmNlSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgYWRkSW5wSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgaXNQZXJmb3JtYW5jZUV2ZW50VGltaW5nIH0gZnJvbSAnLi9pbnN0cnVtZW50LmpzJztcbmltcG9ydCB7IGdldEJyb3dzZXJQZXJmb3JtYW5jZUFQSSwgbXNUb1NlYywgc3RhcnRTdGFuZGFsb25lV2ViVml0YWxTcGFuIH0gZnJvbSAnLi91dGlscy5qcyc7XG5jb25zdCBMQVNUX0lOVEVSQUNUSU9OUyA9IFtdO1xuY29uc3QgSU5URVJBQ1RJT05TX1NQQU5fTUFQID0gbmV3IE1hcCgpO1xuXG4vKipcbiAqIDYwIHNlY29uZHMgaXMgdGhlIG1heGltdW0gZm9yIGEgcGxhdXNpYmxlIElOUCB2YWx1ZVxuICogKHNvdXJjZTogTWUpXG4gKi9cbmNvbnN0IE1BWF9QTEFVU0lCTEVfSU5QX0RVUkFUSU9OID0gNjA7XG4vKipcbiAqIFN0YXJ0IHRyYWNraW5nIElOUCB3ZWJ2aXRhbCBldmVudHMuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0VHJhY2tpbmdJTlAoKSB7XG4gIGNvbnN0IHBlcmZvcm1hbmNlID0gZ2V0QnJvd3NlclBlcmZvcm1hbmNlQVBJKCk7XG4gIGlmIChwZXJmb3JtYW5jZSAmJiBicm93c2VyUGVyZm9ybWFuY2VUaW1lT3JpZ2luKCkpIHtcbiAgICBjb25zdCBpbnBDYWxsYmFjayA9IF90cmFja0lOUCgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpbnBDYWxsYmFjaygpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuICgpID0+IHVuZGVmaW5lZDtcbn1cbmNvbnN0IElOUF9FTlRSWV9NQVAgPSB7XG4gIGNsaWNrOiAnY2xpY2snLFxuICBwb2ludGVyZG93bjogJ2NsaWNrJyxcbiAgcG9pbnRlcnVwOiAnY2xpY2snLFxuICBtb3VzZWRvd246ICdjbGljaycsXG4gIG1vdXNldXA6ICdjbGljaycsXG4gIHRvdWNoc3RhcnQ6ICdjbGljaycsXG4gIHRvdWNoZW5kOiAnY2xpY2snLFxuICBtb3VzZW92ZXI6ICdob3ZlcicsXG4gIG1vdXNlb3V0OiAnaG92ZXInLFxuICBtb3VzZWVudGVyOiAnaG92ZXInLFxuICBtb3VzZWxlYXZlOiAnaG92ZXInLFxuICBwb2ludGVyb3ZlcjogJ2hvdmVyJyxcbiAgcG9pbnRlcm91dDogJ2hvdmVyJyxcbiAgcG9pbnRlcmVudGVyOiAnaG92ZXInLFxuICBwb2ludGVybGVhdmU6ICdob3ZlcicsXG4gIGRyYWdzdGFydDogJ2RyYWcnLFxuICBkcmFnZW5kOiAnZHJhZycsXG4gIGRyYWc6ICdkcmFnJyxcbiAgZHJhZ2VudGVyOiAnZHJhZycsXG4gIGRyYWdsZWF2ZTogJ2RyYWcnLFxuICBkcmFnb3ZlcjogJ2RyYWcnLFxuICBkcm9wOiAnZHJhZycsXG4gIGtleWRvd246ICdwcmVzcycsXG4gIGtleXVwOiAncHJlc3MnLFxuICBrZXlwcmVzczogJ3ByZXNzJyxcbiAgaW5wdXQ6ICdwcmVzcydcbn07XG5cbi8qKiBTdGFydHMgdHJhY2tpbmcgdGhlIEludGVyYWN0aW9uIHRvIE5leHQgUGFpbnQgb24gdGhlIGN1cnJlbnQgcGFnZS4gI1xuICogZXhwb3J0ZWQgb25seSBmb3IgdGVzdGluZ1xuICovXG5mdW5jdGlvbiBfdHJhY2tJTlAoKSB7XG4gIHJldHVybiBhZGRJbnBJbnN0cnVtZW50YXRpb25IYW5kbGVyKF9vbklucCk7XG59XG5cbi8qKlxuICogZXhwb3J0ZWQgb25seSBmb3IgdGVzdGluZ1xuICovXG5jb25zdCBfb25JbnAgPSAoe1xuICBtZXRyaWNcbn0pID0+IHtcbiAgaWYgKG1ldHJpYy52YWx1ZSA9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZHVyYXRpb24gPSBtc1RvU2VjKG1ldHJpYy52YWx1ZSk7XG5cbiAgLy8gV2UgcmVjZWl2ZWQgb2NjYXNpb25hbCByZXBvcnRzIG9mIGhvdXItbG9uZyBJTlAgdmFsdWVzLlxuICAvLyBUaGVyZWZvcmUsIHdlIGFkZCBhIHNhbml0eSBjaGVjayB0byBhdm9pZCBjcmVhdGluZyBzcGFucyBmb3JcbiAgLy8gdW5yZWFsaXN0aWNhbGx5IGxvbmcgSU5QIGR1cmF0aW9ucy5cbiAgaWYgKGR1cmF0aW9uID4gTUFYX1BMQVVTSUJMRV9JTlBfRFVSQVRJT04pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZW50cnkgPSBtZXRyaWMuZW50cmllcy5maW5kKGVudHJ5ID0+IGVudHJ5LmR1cmF0aW9uID09PSBtZXRyaWMudmFsdWUgJiYgSU5QX0VOVFJZX01BUFtlbnRyeS5uYW1lXSk7XG4gIGlmICghZW50cnkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qge1xuICAgIGludGVyYWN0aW9uSWRcbiAgfSA9IGVudHJ5O1xuICBjb25zdCBpbnRlcmFjdGlvblR5cGUgPSBJTlBfRU5UUllfTUFQW2VudHJ5Lm5hbWVdO1xuXG4gIC8qKiBCdWlsZCB0aGUgSU5QIHNwYW4sIGNyZWF0ZSBhbiBlbnZlbG9wZSBmcm9tIHRoZSBzcGFuLCBhbmQgdGhlbiBzZW5kIHRoZSBlbnZlbG9wZSAqL1xuICBjb25zdCBzdGFydFRpbWUgPSBtc1RvU2VjKGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4oKSArIGVudHJ5LnN0YXJ0VGltZSk7XG4gIGNvbnN0IGFjdGl2ZVNwYW4gPSBnZXRBY3RpdmVTcGFuKCk7XG4gIGNvbnN0IHJvb3RTcGFuID0gYWN0aXZlU3BhbiA/IGdldFJvb3RTcGFuKGFjdGl2ZVNwYW4pIDogdW5kZWZpbmVkO1xuXG4gIC8vIFdlIGZpcnN0IHRyeSB0byBsb29rdXAgdGhlIHNwYW4gZnJvbSBvdXIgSU5URVJBQ1RJT05TX1NQQU5fTUFQLFxuICAvLyB3aGVyZSB3ZSBjYWNoZSB0aGUgcm91dGUgcGVyIGludGVyYWN0aW9uSWRcbiAgY29uc3QgY2FjaGVkU3BhbiA9IGludGVyYWN0aW9uSWQgIT0gbnVsbCA/IElOVEVSQUNUSU9OU19TUEFOX01BUC5nZXQoaW50ZXJhY3Rpb25JZCkgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IHNwYW5Ub1VzZSA9IGNhY2hlZFNwYW4gfHwgcm9vdFNwYW47XG5cbiAgLy8gRWxzZSwgd2UgdHJ5IHRvIHVzZSB0aGUgYWN0aXZlIHNwYW4uXG4gIC8vIEZpbmFsbHksIHdlIGZhbGwgYmFjayB0byBsb29rIGF0IHRoZSB0cmFuc2FjdGlvbk5hbWUgb24gdGhlIHNjb3BlXG4gIGNvbnN0IHJvdXRlTmFtZSA9IHNwYW5Ub1VzZSA/IHNwYW5Ub0pTT04oc3BhblRvVXNlKS5kZXNjcmlwdGlvbiA6IGdldEN1cnJlbnRTY29wZSgpLmdldFNjb3BlRGF0YSgpLnRyYW5zYWN0aW9uTmFtZTtcbiAgY29uc3QgbmFtZSA9IGh0bWxUcmVlQXNTdHJpbmcoZW50cnkudGFyZ2V0KTtcbiAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by5odHRwLmJyb3dzZXIuaW5wJyxcbiAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUF06IGB1aS5pbnRlcmFjdGlvbi4ke2ludGVyYWN0aW9uVHlwZX1gLFxuICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfRVhDTFVTSVZFX1RJTUVdOiBlbnRyeS5kdXJhdGlvblxuICB9O1xuICBjb25zdCBzcGFuID0gc3RhcnRTdGFuZGFsb25lV2ViVml0YWxTcGFuKHtcbiAgICBuYW1lLFxuICAgIHRyYW5zYWN0aW9uOiByb3V0ZU5hbWUsXG4gICAgYXR0cmlidXRlcyxcbiAgICBzdGFydFRpbWVcbiAgfSk7XG4gIGlmIChzcGFuKSB7XG4gICAgc3Bhbi5hZGRFdmVudCgnaW5wJywge1xuICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfTUVBU1VSRU1FTlRfVU5JVF06ICdtaWxsaXNlY29uZCcsXG4gICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9NRUFTVVJFTUVOVF9WQUxVRV06IG1ldHJpYy52YWx1ZVxuICAgIH0pO1xuICAgIHNwYW4uZW5kKHN0YXJ0VGltZSArIGR1cmF0aW9uKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZWdpc3RlciBhIGxpc3RlbmVyIHRvIGNhY2hlIHJvdXRlIGluZm9ybWF0aW9uIGZvciBJTlAgaW50ZXJhY3Rpb25zLlxuICovXG5mdW5jdGlvbiByZWdpc3RlcklucEludGVyYWN0aW9uTGlzdGVuZXIoKSB7XG4gIGNvbnN0IGhhbmRsZUVudHJpZXMgPSAoe1xuICAgIGVudHJpZXNcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSBnZXRBY3RpdmVTcGFuKCk7XG4gICAgY29uc3QgYWN0aXZlUm9vdFNwYW4gPSBhY3RpdmVTcGFuICYmIGdldFJvb3RTcGFuKGFjdGl2ZVNwYW4pO1xuICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICBpZiAoIWlzUGVyZm9ybWFuY2VFdmVudFRpbWluZyhlbnRyeSkgfHwgIWFjdGl2ZVJvb3RTcGFuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGludGVyYWN0aW9uSWQgPSBlbnRyeS5pbnRlcmFjdGlvbklkO1xuICAgICAgaWYgKGludGVyYWN0aW9uSWQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBpbnRlcmFjdGlvbiB3YXMgYWxyZWFkeSByZWNvcmRlZCBiZWZvcmUsIG5vdGhpbmcgbW9yZSB0byBkb1xuICAgICAgaWYgKElOVEVSQUNUSU9OU19TUEFOX01BUC5oYXMoaW50ZXJhY3Rpb25JZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBXZSBrZWVwIG1heC4gMTAgaW50ZXJhY3Rpb25zIGluIHRoZSBsaXN0LCB0aGVuIHJlbW92ZSB0aGUgb2xkZXN0IG9uZSAmIGNsZWFuIHVwXG4gICAgICBpZiAoTEFTVF9JTlRFUkFDVElPTlMubGVuZ3RoID4gMTApIHtcbiAgICAgICAgY29uc3QgbGFzdCA9IExBU1RfSU5URVJBQ1RJT05TLnNoaWZ0KCk7XG4gICAgICAgIElOVEVSQUNUSU9OU19TUEFOX01BUC5kZWxldGUobGFzdCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGFkZCB0aGUgaW50ZXJhY3Rpb24gdG8gdGhlIGxpc3Qgb2YgcmVjb3JkZWQgaW50ZXJhY3Rpb25zXG4gICAgICAvLyBhbmQgc3RvcmUgdGhlIHNwYW4gZm9yIHRoaXMgaW50ZXJhY3Rpb25cbiAgICAgIExBU1RfSU5URVJBQ1RJT05TLnB1c2goaW50ZXJhY3Rpb25JZCk7XG4gICAgICBJTlRFUkFDVElPTlNfU1BBTl9NQVAuc2V0KGludGVyYWN0aW9uSWQsIGFjdGl2ZVJvb3RTcGFuKTtcbiAgICB9KTtcbiAgfTtcbiAgYWRkUGVyZm9ybWFuY2VJbnN0cnVtZW50YXRpb25IYW5kbGVyKCdldmVudCcsIGhhbmRsZUVudHJpZXMpO1xuICBhZGRQZXJmb3JtYW5jZUluc3RydW1lbnRhdGlvbkhhbmRsZXIoJ2ZpcnN0LWlucHV0JywgaGFuZGxlRW50cmllcyk7XG59XG5leHBvcnQgeyBfb25JbnAsIF90cmFja0lOUCwgcmVnaXN0ZXJJbnBJbnRlcmFjdGlvbkxpc3RlbmVyLCBzdGFydFRyYWNraW5nSU5QIH07XG4iLCJpbXBvcnQgeyBjcmVhdGVUcmFuc3BvcnQsIHJlamVjdGVkU3luY1Byb21pc2UgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgZ2V0TmF0aXZlSW1wbGVtZW50YXRpb24sIGNsZWFyQ2FjaGVkSW1wbGVtZW50YXRpb24gfSBmcm9tICdAc2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBUcmFuc3BvcnQgdGhhdCB1c2VzIHRoZSBGZXRjaCBBUEkgdG8gc2VuZCBldmVudHMgdG8gU2VudHJ5LlxuICovXG5mdW5jdGlvbiBtYWtlRmV0Y2hUcmFuc3BvcnQob3B0aW9ucywgbmF0aXZlRmV0Y2ggPSBnZXROYXRpdmVJbXBsZW1lbnRhdGlvbignZmV0Y2gnKSkge1xuICBsZXQgcGVuZGluZ0JvZHlTaXplID0gMDtcbiAgbGV0IHBlbmRpbmdDb3VudCA9IDA7XG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCByZXF1ZXN0U2l6ZSA9IHJlcXVlc3QuYm9keS5sZW5ndGg7XG4gICAgcGVuZGluZ0JvZHlTaXplICs9IHJlcXVlc3RTaXplO1xuICAgIHBlbmRpbmdDb3VudCsrO1xuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgYm9keTogcmVxdWVzdC5ib2R5LFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICByZWZlcnJlclBvbGljeTogJ3N0cmljdC1vcmlnaW4nLFxuICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgLy8gT3V0Z29pbmcgcmVxdWVzdHMgYXJlIHVzdWFsbHkgY2FuY2VsbGVkIHdoZW4gbmF2aWdhdGluZyB0byBhIGRpZmZlcmVudCBwYWdlLCBjYXVzaW5nIGEgXCJUeXBlRXJyb3I6IEZhaWxlZCB0b1xuICAgICAgLy8gZmV0Y2hcIiBlcnJvciBhbmQgc2VuZGluZyBhIFwibmV0d29ya19lcnJvclwiIGNsaWVudC1vdXRjb21lIC0gaW4gQ2hyb21lLCB0aGUgcmVxdWVzdCBzdGF0dXMgc2hvd3MgXCIoY2FuY2VsbGVkKVwiLlxuICAgICAgLy8gVGhlIGBrZWVwYWxpdmVgIGZsYWcga2VlcHMgb3V0Z29pbmcgcmVxdWVzdHMgYWxpdmUsIGV2ZW4gd2hlbiBzd2l0Y2hpbmcgcGFnZXMuIFdlIHdhbnQgdGhpcyBzaW5jZSB3ZSdyZVxuICAgICAgLy8gZnJlcXVlbnRseSBzZW5kaW5nIGV2ZW50cyByaWdodCBiZWZvcmUgdGhlIHVzZXIgaXMgc3dpdGNoaW5nIHBhZ2VzIChlZy4gd2hlbiBmaW5pc2hpbmcgbmF2aWdhdGlvbiB0cmFuc2FjdGlvbnMpLlxuICAgICAgLy8gR290Y2hhczpcbiAgICAgIC8vIC0gYGtlZXBhbGl2ZWAgaXNuJ3Qgc3VwcG9ydGVkIGJ5IEZpcmVmb3hcbiAgICAgIC8vIC0gQXMgcGVyIHNwZWMgKGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNodHRwLW5ldHdvcmstb3ItY2FjaGUtZmV0Y2gpOlxuICAgICAgLy8gICBJZiB0aGUgc3VtIG9mIGNvbnRlbnRMZW5ndGggYW5kIGluZmxpZ2h0S2VlcGFsaXZlQnl0ZXMgaXMgZ3JlYXRlciB0aGFuIDY0IGtpYmlieXRlcywgdGhlbiByZXR1cm4gYSBuZXR3b3JrIGVycm9yLlxuICAgICAgLy8gICBXZSB3aWxsIHRoZXJlZm9yZSBvbmx5IGFjdGl2YXRlIHRoZSBmbGFnIHdoZW4gd2UncmUgYmVsb3cgdGhhdCBsaW1pdC5cbiAgICAgIC8vIFRoZXJlIGlzIGFsc28gYSBsaW1pdCBvZiByZXF1ZXN0cyB0aGF0IGNhbiBiZSBvcGVuIGF0IHRoZSBzYW1lIHRpbWUsIHNvIHdlIGFsc28gbGltaXQgdGhpcyB0byAxNVxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvcHVsbC83NTUzIGZvciBkZXRhaWxzXG4gICAgICBrZWVwYWxpdmU6IHBlbmRpbmdCb2R5U2l6ZSA8PSA2MDAwMCAmJiBwZW5kaW5nQ291bnQgPCAxNSxcbiAgICAgIC4uLm9wdGlvbnMuZmV0Y2hPcHRpb25zXG4gICAgfTtcbiAgICBpZiAoIW5hdGl2ZUZldGNoKSB7XG4gICAgICBjbGVhckNhY2hlZEltcGxlbWVudGF0aW9uKCdmZXRjaCcpO1xuICAgICAgcmV0dXJuIHJlamVjdGVkU3luY1Byb21pc2UoJ05vIGZldGNoIGltcGxlbWVudGF0aW9uIGF2YWlsYWJsZScpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgLy8gTm90ZTogV2UgZG8gbm90IG5lZWQgdG8gc3VwcHJlc3MgdHJhY2luZyBoZXJlLCBiZWNhc3VlIHdlIGFyZSB1c2luZyB0aGUgbmF0aXZlIGZldGNoLCBpbnN0ZWFkIG9mIG91ciB3cmFwcGVkIG9uZS5cbiAgICAgIHJldHVybiBuYXRpdmVGZXRjaChvcHRpb25zLnVybCwgcmVxdWVzdE9wdGlvbnMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBwZW5kaW5nQm9keVNpemUgLT0gcmVxdWVzdFNpemU7XG4gICAgICAgIHBlbmRpbmdDb3VudC0tO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAneC1zZW50cnktcmF0ZS1saW1pdHMnOiByZXNwb25zZS5oZWFkZXJzLmdldCgnWC1TZW50cnktUmF0ZS1MaW1pdHMnKSxcbiAgICAgICAgICAgICdyZXRyeS1hZnRlcic6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdSZXRyeS1BZnRlcicpXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY2xlYXJDYWNoZWRJbXBsZW1lbnRhdGlvbignZmV0Y2gnKTtcbiAgICAgIHBlbmRpbmdCb2R5U2l6ZSAtPSByZXF1ZXN0U2l6ZTtcbiAgICAgIHBlbmRpbmdDb3VudC0tO1xuICAgICAgcmV0dXJuIHJlamVjdGVkU3luY1Byb21pc2UoZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBjcmVhdGVUcmFuc3BvcnQob3B0aW9ucywgbWFrZVJlcXVlc3QpO1xufVxuZXhwb3J0IHsgbWFrZUZldGNoVHJhbnNwb3J0IH07XG4iLCJpbXBvcnQgeyBjcmVhdGVTdGFja1BhcnNlciwgVU5LTk9XTl9GVU5DVElPTiB9IGZyb20gJ0BzZW50cnkvY29yZSc7XG5jb25zdCBPUEVSQTEwX1BSSU9SSVRZID0gMTA7XG5jb25zdCBPUEVSQTExX1BSSU9SSVRZID0gMjA7XG5jb25zdCBDSFJPTUVfUFJJT1JJVFkgPSAzMDtcbmNvbnN0IFdJTkpTX1BSSU9SSVRZID0gNDA7XG5jb25zdCBHRUNLT19QUklPUklUWSA9IDUwO1xuZnVuY3Rpb24gY3JlYXRlRnJhbWUoZmlsZW5hbWUsIGZ1bmMsIGxpbmVubywgY29sbm8pIHtcbiAgY29uc3QgZnJhbWUgPSB7XG4gICAgZmlsZW5hbWUsXG4gICAgZnVuY3Rpb246IGZ1bmMgPT09ICc8YW5vbnltb3VzPicgPyBVTktOT1dOX0ZVTkNUSU9OIDogZnVuYyxcbiAgICBpbl9hcHA6IHRydWUgLy8gQWxsIGJyb3dzZXIgZnJhbWVzIGFyZSBjb25zaWRlcmVkIGluX2FwcFxuICB9O1xuICBpZiAobGluZW5vICE9PSB1bmRlZmluZWQpIHtcbiAgICBmcmFtZS5saW5lbm8gPSBsaW5lbm87XG4gIH1cbiAgaWYgKGNvbG5vICE9PSB1bmRlZmluZWQpIHtcbiAgICBmcmFtZS5jb2xubyA9IGNvbG5vO1xuICB9XG4gIHJldHVybiBmcmFtZTtcbn1cblxuLy8gVGhpcyByZWdleCBtYXRjaGVzIGZyYW1lcyB0aGF0IGhhdmUgbm8gZnVuY3Rpb24gbmFtZSAoaWUuIGFyZSBhdCB0aGUgdG9wIGxldmVsIG9mIGEgbW9kdWxlKS5cbi8vIEZvciBleGFtcGxlIFwiYXQgaHR0cDovL2xvY2FsaG9zdDo1MDAwLy9zY3JpcHQuanM6MToxMjZcIlxuLy8gRnJhbWVzIF93aXRoXyBmdW5jdGlvbiBuYW1lcyB1c3VhbGx5IGxvb2sgYXMgZm9sbG93czogXCJhdCBjb21taXRMYXlvdXRFZmZlY3RzIChyZWFjdC1kb20uZGV2ZWxvcG1lbnQuanM6MjM0MjY6MSlcIlxuY29uc3QgY2hyb21lUmVnZXhOb0ZuTmFtZSA9IC9eXFxzKmF0IChcXFMrPykoPzo6KFxcZCspKSg/OjooXFxkKykpXFxzKiQvaTtcblxuLy8gVGhpcyByZWdleCBtYXRjaGVzIGFsbCB0aGUgZnJhbWVzIHRoYXQgaGF2ZSBhIGZ1bmN0aW9uIG5hbWUuXG5jb25zdCBjaHJvbWVSZWdleCA9IC9eXFxzKmF0ICg/OiguKz9cXCkoPzogXFxbLitcXF0pP3wuKj8pID9cXCgoPzphZGRyZXNzIGF0ICk/KT8oPzphc3luYyApPygoPzo8YW5vbnltb3VzPnxbLWEtel0rOnwuKmJ1bmRsZXxcXC8pPy4qPykoPzo6KFxcZCspKT8oPzo6KFxcZCspKT9cXCk/XFxzKiQvaTtcbmNvbnN0IGNocm9tZUV2YWxSZWdleCA9IC9cXCgoXFxTKikoPzo6KFxcZCspKSg/OjooXFxkKykpXFwpLztcblxuLy8gQ2hyb21pdW0gYmFzZWQgYnJvd3NlcnM6IENocm9tZSwgQnJhdmUsIG5ldyBPcGVyYSwgbmV3IEVkZ2Vcbi8vIFdlIGNhbm5vdCBjYWxsIHRoaXMgdmFyaWFibGUgYGNocm9tZWAgYmVjYXVzZSBpdCBjYW4gY29uZmxpY3Qgd2l0aCBnbG9iYWwgYGNocm9tZWAgdmFyaWFibGUgaW4gY2VydGFpbiBlbnZpcm9ubWVudHNcbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvNjg4MFxuY29uc3QgY2hyb21lU3RhY2tQYXJzZXJGbiA9IGxpbmUgPT4ge1xuICAvLyBJZiB0aGUgc3RhY2sgbGluZSBoYXMgbm8gZnVuY3Rpb24gbmFtZSwgd2UgbmVlZCB0byBwYXJzZSBpdCBkaWZmZXJlbnRseVxuICBjb25zdCBub0ZuUGFydHMgPSBjaHJvbWVSZWdleE5vRm5OYW1lLmV4ZWMobGluZSk7XG4gIGlmIChub0ZuUGFydHMpIHtcbiAgICBjb25zdCBbLCBmaWxlbmFtZSwgbGluZSwgY29sXSA9IG5vRm5QYXJ0cztcbiAgICByZXR1cm4gY3JlYXRlRnJhbWUoZmlsZW5hbWUsIFVOS05PV05fRlVOQ1RJT04sICtsaW5lLCArY29sKTtcbiAgfVxuICBjb25zdCBwYXJ0cyA9IGNocm9tZVJlZ2V4LmV4ZWMobGluZSk7XG4gIGlmIChwYXJ0cykge1xuICAgIGNvbnN0IGlzRXZhbCA9IHBhcnRzWzJdICYmIHBhcnRzWzJdLmluZGV4T2YoJ2V2YWwnKSA9PT0gMDsgLy8gc3RhcnQgb2YgbGluZVxuXG4gICAgaWYgKGlzRXZhbCkge1xuICAgICAgY29uc3Qgc3ViTWF0Y2ggPSBjaHJvbWVFdmFsUmVnZXguZXhlYyhwYXJ0c1syXSk7XG4gICAgICBpZiAoc3ViTWF0Y2gpIHtcbiAgICAgICAgLy8gdGhyb3cgb3V0IGV2YWwgbGluZS9jb2x1bW4gYW5kIHVzZSB0b3AtbW9zdCBsaW5lL2NvbHVtbiBudW1iZXJcbiAgICAgICAgcGFydHNbMl0gPSBzdWJNYXRjaFsxXTsgLy8gdXJsXG4gICAgICAgIHBhcnRzWzNdID0gc3ViTWF0Y2hbMl07IC8vIGxpbmVcbiAgICAgICAgcGFydHNbNF0gPSBzdWJNYXRjaFszXTsgLy8gY29sdW1uXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gS2FtaWw6IE9uZSBtb3JlIGhhY2sgd29uJ3QgaHVydCB1cyByaWdodD8gVW5kZXJzdGFuZGluZyBhbmQgYWRkaW5nIG1vcmUgcnVsZXMgb24gdG9wIG9mIHRoZXNlIHJlZ2V4cHMgcmlnaHQgbm93XG4gICAgLy8gd291bGQgYmUgd2F5IHRvbyB0aW1lIGNvbnN1bWluZy4gKFRPRE86IFJld3JpdGUgd2hvbGUgUmVnRXhwIHRvIGJlIG1vcmUgcmVhZGFibGUpXG4gICAgY29uc3QgW2Z1bmMsIGZpbGVuYW1lXSA9IGV4dHJhY3RTYWZhcmlFeHRlbnNpb25EZXRhaWxzKHBhcnRzWzFdIHx8IFVOS05PV05fRlVOQ1RJT04sIHBhcnRzWzJdKTtcbiAgICByZXR1cm4gY3JlYXRlRnJhbWUoZmlsZW5hbWUsIGZ1bmMsIHBhcnRzWzNdID8gK3BhcnRzWzNdIDogdW5kZWZpbmVkLCBwYXJ0c1s0XSA/ICtwYXJ0c1s0XSA6IHVuZGVmaW5lZCk7XG4gIH1cbiAgcmV0dXJuO1xufTtcbmNvbnN0IGNocm9tZVN0YWNrTGluZVBhcnNlciA9IFtDSFJPTUVfUFJJT1JJVFksIGNocm9tZVN0YWNrUGFyc2VyRm5dO1xuXG4vLyBnZWNrbyByZWdleDogYCg/OmJ1bmRsZXxcXGQrXFwuanMpYDogYGJ1bmRsZWAgaXMgZm9yIHJlYWN0IG5hdGl2ZSwgYFxcZCtcXC5qc2AgYWxzbyBidXQgc3BlY2lmaWNhbGx5IGZvciByYW0gYnVuZGxlcyBiZWNhdXNlIGl0XG4vLyBnZW5lcmF0ZXMgZmlsZW5hbWVzIHdpdGhvdXQgYSBwcmVmaXggbGlrZSBgZmlsZTovL2AgdGhlIGZpbGVuYW1lcyBpbiB0aGUgc3RhY2t0cmFjZSBhcmUganVzdCA0Mi5qc1xuLy8gV2UgbmVlZCB0aGlzIHNwZWNpZmljIGNhc2UgZm9yIG5vdyBiZWNhdXNlIHdlIHdhbnQgbm8gb3RoZXIgcmVnZXggdG8gbWF0Y2guXG5jb25zdCBnZWNrb1JFZ2V4ID0gL15cXHMqKC4qPykoPzpcXCgoLio/KVxcKSk/KD86XnxAKT8oKD86Wy1hLXpdKyk/OlxcLy4qP3xcXFtuYXRpdmUgY29kZVxcXXxbXkBdKig/OmJ1bmRsZXxcXGQrXFwuanMpfFxcL1tcXHdcXC0uIC89XSspKD86OihcXGQrKSk/KD86OihcXGQrKSk/XFxzKiQvaTtcbmNvbnN0IGdlY2tvRXZhbFJlZ2V4ID0gLyhcXFMrKSBsaW5lIChcXGQrKSg/OiA+IGV2YWwgbGluZSBcXGQrKSogPiBldmFsL2k7XG5jb25zdCBnZWNrbyA9IGxpbmUgPT4ge1xuICBjb25zdCBwYXJ0cyA9IGdlY2tvUkVnZXguZXhlYyhsaW5lKTtcbiAgaWYgKHBhcnRzKSB7XG4gICAgY29uc3QgaXNFdmFsID0gcGFydHNbM10gJiYgcGFydHNbM10uaW5kZXhPZignID4gZXZhbCcpID4gLTE7XG4gICAgaWYgKGlzRXZhbCkge1xuICAgICAgY29uc3Qgc3ViTWF0Y2ggPSBnZWNrb0V2YWxSZWdleC5leGVjKHBhcnRzWzNdKTtcbiAgICAgIGlmIChzdWJNYXRjaCkge1xuICAgICAgICAvLyB0aHJvdyBvdXQgZXZhbCBsaW5lL2NvbHVtbiBhbmQgdXNlIHRvcC1tb3N0IGxpbmUgbnVtYmVyXG4gICAgICAgIHBhcnRzWzFdID0gcGFydHNbMV0gfHwgJ2V2YWwnO1xuICAgICAgICBwYXJ0c1szXSA9IHN1Yk1hdGNoWzFdO1xuICAgICAgICBwYXJ0c1s0XSA9IHN1Yk1hdGNoWzJdO1xuICAgICAgICBwYXJ0c1s1XSA9ICcnOyAvLyBubyBjb2x1bW4gd2hlbiBldmFsXG4gICAgICB9XG4gICAgfVxuICAgIGxldCBmaWxlbmFtZSA9IHBhcnRzWzNdO1xuICAgIGxldCBmdW5jID0gcGFydHNbMV0gfHwgVU5LTk9XTl9GVU5DVElPTjtcbiAgICBbZnVuYywgZmlsZW5hbWVdID0gZXh0cmFjdFNhZmFyaUV4dGVuc2lvbkRldGFpbHMoZnVuYywgZmlsZW5hbWUpO1xuICAgIHJldHVybiBjcmVhdGVGcmFtZShmaWxlbmFtZSwgZnVuYywgcGFydHNbNF0gPyArcGFydHNbNF0gOiB1bmRlZmluZWQsIHBhcnRzWzVdID8gK3BhcnRzWzVdIDogdW5kZWZpbmVkKTtcbiAgfVxuICByZXR1cm47XG59O1xuY29uc3QgZ2Vja29TdGFja0xpbmVQYXJzZXIgPSBbR0VDS09fUFJJT1JJVFksIGdlY2tvXTtcbmNvbnN0IHdpbmpzUmVnZXggPSAvXlxccyphdCAoPzooKD86XFxbb2JqZWN0IG9iamVjdFxcXSk/LispICk/XFwoPygoPzpbLWEtel0rKTouKj8pOihcXGQrKSg/OjooXFxkKykpP1xcKT9cXHMqJC9pO1xuY29uc3Qgd2luanMgPSBsaW5lID0+IHtcbiAgY29uc3QgcGFydHMgPSB3aW5qc1JlZ2V4LmV4ZWMobGluZSk7XG4gIHJldHVybiBwYXJ0cyA/IGNyZWF0ZUZyYW1lKHBhcnRzWzJdLCBwYXJ0c1sxXSB8fCBVTktOT1dOX0ZVTkNUSU9OLCArcGFydHNbM10sIHBhcnRzWzRdID8gK3BhcnRzWzRdIDogdW5kZWZpbmVkKSA6IHVuZGVmaW5lZDtcbn07XG5jb25zdCB3aW5qc1N0YWNrTGluZVBhcnNlciA9IFtXSU5KU19QUklPUklUWSwgd2luanNdO1xuY29uc3Qgb3BlcmExMFJlZ2V4ID0gLyBsaW5lIChcXGQrKS4qc2NyaXB0ICg/OmluICk/KFxcUyspKD86OiBpbiBmdW5jdGlvbiAoXFxTKykpPyQvaTtcbmNvbnN0IG9wZXJhMTAgPSBsaW5lID0+IHtcbiAgY29uc3QgcGFydHMgPSBvcGVyYTEwUmVnZXguZXhlYyhsaW5lKTtcbiAgcmV0dXJuIHBhcnRzID8gY3JlYXRlRnJhbWUocGFydHNbMl0sIHBhcnRzWzNdIHx8IFVOS05PV05fRlVOQ1RJT04sICtwYXJ0c1sxXSkgOiB1bmRlZmluZWQ7XG59O1xuY29uc3Qgb3BlcmExMFN0YWNrTGluZVBhcnNlciA9IFtPUEVSQTEwX1BSSU9SSVRZLCBvcGVyYTEwXTtcbmNvbnN0IG9wZXJhMTFSZWdleCA9IC8gbGluZSAoXFxkKyksIGNvbHVtbiAoXFxkKylcXHMqKD86aW4gKD86PGFub255bW91cyBmdW5jdGlvbjogKFtePl0rKT58KFteKV0rKSlcXCguKlxcKSk/IGluICguKik6XFxzKiQvaTtcbmNvbnN0IG9wZXJhMTEgPSBsaW5lID0+IHtcbiAgY29uc3QgcGFydHMgPSBvcGVyYTExUmVnZXguZXhlYyhsaW5lKTtcbiAgcmV0dXJuIHBhcnRzID8gY3JlYXRlRnJhbWUocGFydHNbNV0sIHBhcnRzWzNdIHx8IHBhcnRzWzRdIHx8IFVOS05PV05fRlVOQ1RJT04sICtwYXJ0c1sxXSwgK3BhcnRzWzJdKSA6IHVuZGVmaW5lZDtcbn07XG5jb25zdCBvcGVyYTExU3RhY2tMaW5lUGFyc2VyID0gW09QRVJBMTFfUFJJT1JJVFksIG9wZXJhMTFdO1xuY29uc3QgZGVmYXVsdFN0YWNrTGluZVBhcnNlcnMgPSBbY2hyb21lU3RhY2tMaW5lUGFyc2VyLCBnZWNrb1N0YWNrTGluZVBhcnNlcl07XG5jb25zdCBkZWZhdWx0U3RhY2tQYXJzZXIgPSBjcmVhdGVTdGFja1BhcnNlciguLi5kZWZhdWx0U3RhY2tMaW5lUGFyc2Vycyk7XG5cbi8qKlxuICogU2FmYXJpIHdlYiBleHRlbnNpb25zLCBzdGFydGluZyB2ZXJzaW9uIHVua25vd24sIGNhbiBwcm9kdWNlIFwiZnJhbWVzLW9ubHlcIiBzdGFja3RyYWNlcy5cbiAqIFdoYXQgaXQgbWVhbnMsIGlzIHRoYXQgaW5zdGVhZCBvZiBmb3JtYXQgbGlrZTpcbiAqXG4gKiBFcnJvcjogd2F0XG4gKiAgIGF0IGZ1bmN0aW9uQHVybDpyb3c6Y29sXG4gKiAgIGF0IGZ1bmN0aW9uQHVybDpyb3c6Y29sXG4gKiAgIGF0IGZ1bmN0aW9uQHVybDpyb3c6Y29sXG4gKlxuICogaXQgcHJvZHVjZXMgc29tZXRoaW5nIGxpa2U6XG4gKlxuICogICBmdW5jdGlvbkB1cmw6cm93OmNvbFxuICogICBmdW5jdGlvbkB1cmw6cm93OmNvbFxuICogICBmdW5jdGlvbkB1cmw6cm93OmNvbFxuICpcbiAqIEJlY2F1c2Ugb2YgdGhhdCwgaXQgd29uJ3QgYmUgY2FwdHVyZWQgYnkgYGNocm9tZWAgUmVnRXhwIGFuZCB3aWxsIGZhbGwgaW50byBgR2Vja29gIGJyYW5jaC5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgZXh0cmFjdGVkIHNvIHRoYXQgd2UgY2FuIHVzZSBpdCBpbiBib3RoIHBsYWNlcyB3aXRob3V0IGR1cGxpY2F0aW5nIHRoZSBsb2dpYy5cbiAqIFVuZm9ydHVuYXRlbHkgXCJqdXN0XCIgY2hhbmdpbmcgUmVnRXhwIGlzIHRvbyBjb21wbGljYXRlZCBub3cgYW5kIG1ha2luZyBpdCBwYXNzIGFsbCB0ZXN0c1xuICogYW5kIGZpeCB0aGlzIGNhc2Ugc2VlbXMgbGlrZSBhbiBpbXBvc3NpYmxlLCBvciBhdCBsZWFzdCB3YXkgdG9vIHRpbWUtY29uc3VtaW5nIHRhc2suXG4gKi9cbmNvbnN0IGV4dHJhY3RTYWZhcmlFeHRlbnNpb25EZXRhaWxzID0gKGZ1bmMsIGZpbGVuYW1lKSA9PiB7XG4gIGNvbnN0IGlzU2FmYXJpRXh0ZW5zaW9uID0gZnVuYy5pbmRleE9mKCdzYWZhcmktZXh0ZW5zaW9uJykgIT09IC0xO1xuICBjb25zdCBpc1NhZmFyaVdlYkV4dGVuc2lvbiA9IGZ1bmMuaW5kZXhPZignc2FmYXJpLXdlYi1leHRlbnNpb24nKSAhPT0gLTE7XG4gIHJldHVybiBpc1NhZmFyaUV4dGVuc2lvbiB8fCBpc1NhZmFyaVdlYkV4dGVuc2lvbiA/IFtmdW5jLmluZGV4T2YoJ0AnKSAhPT0gLTEgPyBmdW5jLnNwbGl0KCdAJylbMF0gOiBVTktOT1dOX0ZVTkNUSU9OLCBpc1NhZmFyaUV4dGVuc2lvbiA/IGBzYWZhcmktZXh0ZW5zaW9uOiR7ZmlsZW5hbWV9YCA6IGBzYWZhcmktd2ViLWV4dGVuc2lvbjoke2ZpbGVuYW1lfWBdIDogW2Z1bmMsIGZpbGVuYW1lXTtcbn07XG5leHBvcnQgeyBjaHJvbWVTdGFja0xpbmVQYXJzZXIsIGRlZmF1bHRTdGFja0xpbmVQYXJzZXJzLCBkZWZhdWx0U3RhY2tQYXJzZXIsIGdlY2tvU3RhY2tMaW5lUGFyc2VyLCBvcGVyYTEwU3RhY2tMaW5lUGFyc2VyLCBvcGVyYTExU3RhY2tMaW5lUGFyc2VyLCB3aW5qc1N0YWNrTGluZVBhcnNlciB9O1xuIiwiLyoqXG4gKiBUaGlzIHNlcnZlcyBhcyBhIGJ1aWxkIHRpbWUgZmxhZyB0aGF0IHdpbGwgYmUgdHJ1ZSBieSBkZWZhdWx0LCBidXQgZmFsc2UgaW4gbm9uLWRlYnVnIGJ1aWxkcyBvciBpZiB1c2VycyByZXBsYWNlIGBfX1NFTlRSWV9ERUJVR19fYCBpbiB0aGVpciBnZW5lcmF0ZWQgY29kZS5cbiAqXG4gKiBBVFRFTlRJT046IFRoaXMgY29uc3RhbnQgbXVzdCBuZXZlciBjcm9zcyBwYWNrYWdlIGJvdW5kYXJpZXMgKGkuZS4gYmUgZXhwb3J0ZWQpIHRvIGd1YXJhbnRlZSB0aGF0IGl0IGNhbiBiZSB1c2VkIGZvciB0cmVlIHNoYWtpbmcuXG4gKi9cbmNvbnN0IERFQlVHX0JVSUxEID0gdHlwZW9mIF9fU0VOVFJZX0RFQlVHX18gPT09ICd1bmRlZmluZWQnIHx8IF9fU0VOVFJZX0RFQlVHX187XG5leHBvcnQgeyBERUJVR19CVUlMRCB9O1xuIiwiaW1wb3J0IHsgZGVmaW5lSW50ZWdyYXRpb24sIGFkZENvbnNvbGVJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBhZGRGZXRjaEluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGdldENsaWVudCwgc2FmZUpvaW4sIHNldmVyaXR5TGV2ZWxGcm9tU3RyaW5nLCBhZGRCcmVhZGNydW1iLCBsb2dnZXIsIGh0bWxUcmVlQXNTdHJpbmcsIGdldENvbXBvbmVudE5hbWUsIGdldEJyZWFkY3J1bWJMb2dMZXZlbEZyb21IdHRwU3RhdHVzQ29kZSwgcGFyc2VVcmwsIGdldEV2ZW50RGVzY3JpcHRpb24gfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgYWRkQ2xpY2tLZXlwcmVzc0luc3RydW1lbnRhdGlvbkhhbmRsZXIsIGFkZFhockluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGFkZEhpc3RvcnlJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBTRU5UUllfWEhSX0RBVEFfS0VZIH0gZnJvbSAnQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vaGVscGVycy5qcyc7XG5cbi8qKiBtYXhTdHJpbmdMZW5ndGggZ2V0cyBjYXBwZWQgdG8gcHJldmVudCAxMDAgYnJlYWRjcnVtYnMgZXhjZWVkaW5nIDFNQiBldmVudCBwYXlsb2FkIHNpemUgKi9cbmNvbnN0IE1BWF9BTExPV0VEX1NUUklOR19MRU5HVEggPSAxMDI0O1xuY29uc3QgSU5URUdSQVRJT05fTkFNRSA9ICdCcmVhZGNydW1icyc7XG5jb25zdCBfYnJlYWRjcnVtYnNJbnRlZ3JhdGlvbiA9IChvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgX29wdGlvbnMgPSB7XG4gICAgY29uc29sZTogdHJ1ZSxcbiAgICBkb206IHRydWUsXG4gICAgZmV0Y2g6IHRydWUsXG4gICAgaGlzdG9yeTogdHJ1ZSxcbiAgICBzZW50cnk6IHRydWUsXG4gICAgeGhyOiB0cnVlLFxuICAgIC4uLm9wdGlvbnNcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBJTlRFR1JBVElPTl9OQU1FLFxuICAgIHNldHVwKGNsaWVudCkge1xuICAgICAgLy8gVE9ETyh2MTApOiBSZW1vdmUgdGhpcyBmdW5jdGlvbmFsaXR5IGFuZCB1c2UgYGNvbnNvbGVJbnRlZ3JhdGlvbmAgZnJvbSBAc2VudHJ5L2NvcmUgaW5zdGVhZC5cbiAgICAgIGlmIChfb3B0aW9ucy5jb25zb2xlKSB7XG4gICAgICAgIGFkZENvbnNvbGVJbnN0cnVtZW50YXRpb25IYW5kbGVyKF9nZXRDb25zb2xlQnJlYWRjcnVtYkhhbmRsZXIoY2xpZW50KSk7XG4gICAgICB9XG4gICAgICBpZiAoX29wdGlvbnMuZG9tKSB7XG4gICAgICAgIGFkZENsaWNrS2V5cHJlc3NJbnN0cnVtZW50YXRpb25IYW5kbGVyKF9nZXREb21CcmVhZGNydW1iSGFuZGxlcihjbGllbnQsIF9vcHRpb25zLmRvbSkpO1xuICAgICAgfVxuICAgICAgaWYgKF9vcHRpb25zLnhocikge1xuICAgICAgICBhZGRYaHJJbnN0cnVtZW50YXRpb25IYW5kbGVyKF9nZXRYaHJCcmVhZGNydW1iSGFuZGxlcihjbGllbnQpKTtcbiAgICAgIH1cbiAgICAgIGlmIChfb3B0aW9ucy5mZXRjaCkge1xuICAgICAgICBhZGRGZXRjaEluc3RydW1lbnRhdGlvbkhhbmRsZXIoX2dldEZldGNoQnJlYWRjcnVtYkhhbmRsZXIoY2xpZW50KSk7XG4gICAgICB9XG4gICAgICBpZiAoX29wdGlvbnMuaGlzdG9yeSkge1xuICAgICAgICBhZGRIaXN0b3J5SW5zdHJ1bWVudGF0aW9uSGFuZGxlcihfZ2V0SGlzdG9yeUJyZWFkY3J1bWJIYW5kbGVyKGNsaWVudCkpO1xuICAgICAgfVxuICAgICAgaWYgKF9vcHRpb25zLnNlbnRyeSkge1xuICAgICAgICBjbGllbnQub24oJ2JlZm9yZVNlbmRFdmVudCcsIF9nZXRTZW50cnlCcmVhZGNydW1iSGFuZGxlcihjbGllbnQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuY29uc3QgYnJlYWRjcnVtYnNJbnRlZ3JhdGlvbiA9IGRlZmluZUludGVncmF0aW9uKF9icmVhZGNydW1ic0ludGVncmF0aW9uKTtcblxuLyoqXG4gKiBBZGRzIGEgYnJlYWRjcnVtYiBmb3IgU2VudHJ5IGV2ZW50cyBvciB0cmFuc2FjdGlvbnMgaWYgdGhpcyBvcHRpb24gaXMgZW5hYmxlZC5cbiAqL1xuZnVuY3Rpb24gX2dldFNlbnRyeUJyZWFkY3J1bWJIYW5kbGVyKGNsaWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gYWRkU2VudHJ5QnJlYWRjcnVtYihldmVudCkge1xuICAgIGlmIChnZXRDbGllbnQoKSAhPT0gY2xpZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFkZEJyZWFkY3J1bWIoe1xuICAgICAgY2F0ZWdvcnk6IGBzZW50cnkuJHtldmVudC50eXBlID09PSAndHJhbnNhY3Rpb24nID8gJ3RyYW5zYWN0aW9uJyA6ICdldmVudCd9YCxcbiAgICAgIGV2ZW50X2lkOiBldmVudC5ldmVudF9pZCxcbiAgICAgIGxldmVsOiBldmVudC5sZXZlbCxcbiAgICAgIG1lc3NhZ2U6IGdldEV2ZW50RGVzY3JpcHRpb24oZXZlbnQpXG4gICAgfSwge1xuICAgICAgZXZlbnRcbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBBIEhPQyB0aGF0IGNyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYnJlYWRjcnVtYnMgZnJvbSBET00gQVBJIGNhbGxzLlxuICogVGhpcyBpcyBhIEhPQyBzbyB0aGF0IHdlIGdldCBhY2Nlc3MgdG8gZG9tIG9wdGlvbnMgaW4gdGhlIGNsb3N1cmUuXG4gKi9cbmZ1bmN0aW9uIF9nZXREb21CcmVhZGNydW1iSGFuZGxlcihjbGllbnQsIGRvbSkge1xuICByZXR1cm4gZnVuY3Rpb24gX2lubmVyRG9tQnJlYWRjcnVtYihoYW5kbGVyRGF0YSkge1xuICAgIGlmIChnZXRDbGllbnQoKSAhPT0gY2xpZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0YXJnZXQ7XG4gICAgbGV0IGNvbXBvbmVudE5hbWU7XG4gICAgbGV0IGtleUF0dHJzID0gdHlwZW9mIGRvbSA9PT0gJ29iamVjdCcgPyBkb20uc2VyaWFsaXplQXR0cmlidXRlIDogdW5kZWZpbmVkO1xuICAgIGxldCBtYXhTdHJpbmdMZW5ndGggPSB0eXBlb2YgZG9tID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZG9tLm1heFN0cmluZ0xlbmd0aCA9PT0gJ251bWJlcicgPyBkb20ubWF4U3RyaW5nTGVuZ3RoIDogdW5kZWZpbmVkO1xuICAgIGlmIChtYXhTdHJpbmdMZW5ndGggJiYgbWF4U3RyaW5nTGVuZ3RoID4gTUFYX0FMTE9XRURfU1RSSU5HX0xFTkdUSCkge1xuICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oYFxcYGRvbS5tYXhTdHJpbmdMZW5ndGhcXGAgY2Fubm90IGV4Y2VlZCAke01BWF9BTExPV0VEX1NUUklOR19MRU5HVEh9LCBidXQgYSB2YWx1ZSBvZiAke21heFN0cmluZ0xlbmd0aH0gd2FzIGNvbmZpZ3VyZWQuIFNlbnRyeSB3aWxsIHVzZSAke01BWF9BTExPV0VEX1NUUklOR19MRU5HVEh9IGluc3RlYWQuYCk7XG4gICAgICBtYXhTdHJpbmdMZW5ndGggPSBNQVhfQUxMT1dFRF9TVFJJTkdfTEVOR1RIO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGtleUF0dHJzID09PSAnc3RyaW5nJykge1xuICAgICAga2V5QXR0cnMgPSBba2V5QXR0cnNdO1xuICAgIH1cblxuICAgIC8vIEFjY2Vzc2luZyBldmVudC50YXJnZXQgY2FuIHRocm93IChzZWUgZ2V0c2VudHJ5L3JhdmVuLWpzIzgzOCwgIzc2OClcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXZlbnQgPSBoYW5kbGVyRGF0YS5ldmVudDtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBfaXNFdmVudChldmVudCkgPyBldmVudC50YXJnZXQgOiBldmVudDtcbiAgICAgIHRhcmdldCA9IGh0bWxUcmVlQXNTdHJpbmcoZWxlbWVudCwge1xuICAgICAgICBrZXlBdHRycyxcbiAgICAgICAgbWF4U3RyaW5nTGVuZ3RoXG4gICAgICB9KTtcbiAgICAgIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lKGVsZW1lbnQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRhcmdldCA9ICc8dW5rbm93bj4nO1xuICAgIH1cbiAgICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBicmVhZGNydW1iID0ge1xuICAgICAgY2F0ZWdvcnk6IGB1aS4ke2hhbmRsZXJEYXRhLm5hbWV9YCxcbiAgICAgIG1lc3NhZ2U6IHRhcmdldFxuICAgIH07XG4gICAgaWYgKGNvbXBvbmVudE5hbWUpIHtcbiAgICAgIGJyZWFkY3J1bWIuZGF0YSA9IHtcbiAgICAgICAgJ3VpLmNvbXBvbmVudF9uYW1lJzogY29tcG9uZW50TmFtZVxuICAgICAgfTtcbiAgICB9XG4gICAgYWRkQnJlYWRjcnVtYihicmVhZGNydW1iLCB7XG4gICAgICBldmVudDogaGFuZGxlckRhdGEuZXZlbnQsXG4gICAgICBuYW1lOiBoYW5kbGVyRGF0YS5uYW1lLFxuICAgICAgZ2xvYmFsOiBoYW5kbGVyRGF0YS5nbG9iYWxcbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGJyZWFkY3J1bWJzIGZyb20gY29uc29sZSBBUEkgY2FsbHNcbiAqL1xuZnVuY3Rpb24gX2dldENvbnNvbGVCcmVhZGNydW1iSGFuZGxlcihjbGllbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIF9jb25zb2xlQnJlYWRjcnVtYihoYW5kbGVyRGF0YSkge1xuICAgIGlmIChnZXRDbGllbnQoKSAhPT0gY2xpZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGJyZWFkY3J1bWIgPSB7XG4gICAgICBjYXRlZ29yeTogJ2NvbnNvbGUnLFxuICAgICAgZGF0YToge1xuICAgICAgICBhcmd1bWVudHM6IGhhbmRsZXJEYXRhLmFyZ3MsXG4gICAgICAgIGxvZ2dlcjogJ2NvbnNvbGUnXG4gICAgICB9LFxuICAgICAgbGV2ZWw6IHNldmVyaXR5TGV2ZWxGcm9tU3RyaW5nKGhhbmRsZXJEYXRhLmxldmVsKSxcbiAgICAgIG1lc3NhZ2U6IHNhZmVKb2luKGhhbmRsZXJEYXRhLmFyZ3MsICcgJylcbiAgICB9O1xuICAgIGlmIChoYW5kbGVyRGF0YS5sZXZlbCA9PT0gJ2Fzc2VydCcpIHtcbiAgICAgIGlmIChoYW5kbGVyRGF0YS5hcmdzWzBdID09PSBmYWxzZSkge1xuICAgICAgICBicmVhZGNydW1iLm1lc3NhZ2UgPSBgQXNzZXJ0aW9uIGZhaWxlZDogJHtzYWZlSm9pbihoYW5kbGVyRGF0YS5hcmdzLnNsaWNlKDEpLCAnICcpIHx8ICdjb25zb2xlLmFzc2VydCd9YDtcbiAgICAgICAgYnJlYWRjcnVtYi5kYXRhLmFyZ3VtZW50cyA9IGhhbmRsZXJEYXRhLmFyZ3Muc2xpY2UoMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEb24ndCBjYXB0dXJlIGEgYnJlYWRjcnVtYiBmb3IgcGFzc2VkIGFzc2VydGlvbnNcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBhZGRCcmVhZGNydW1iKGJyZWFkY3J1bWIsIHtcbiAgICAgIGlucHV0OiBoYW5kbGVyRGF0YS5hcmdzLFxuICAgICAgbGV2ZWw6IGhhbmRsZXJEYXRhLmxldmVsXG4gICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBicmVhZGNydW1icyBmcm9tIFhIUiBBUEkgY2FsbHNcbiAqL1xuZnVuY3Rpb24gX2dldFhockJyZWFkY3J1bWJIYW5kbGVyKGNsaWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gX3hockJyZWFkY3J1bWIoaGFuZGxlckRhdGEpIHtcbiAgICBpZiAoZ2V0Q2xpZW50KCkgIT09IGNsaWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBzdGFydFRpbWVzdGFtcCxcbiAgICAgIGVuZFRpbWVzdGFtcFxuICAgIH0gPSBoYW5kbGVyRGF0YTtcbiAgICBjb25zdCBzZW50cnlYaHJEYXRhID0gaGFuZGxlckRhdGEueGhyW1NFTlRSWV9YSFJfREFUQV9LRVldO1xuXG4gICAgLy8gV2Ugb25seSBjYXB0dXJlIGNvbXBsZXRlLCBub24tc2VudHJ5IHJlcXVlc3RzXG4gICAgaWYgKCFzdGFydFRpbWVzdGFtcCB8fCAhZW5kVGltZXN0YW1wIHx8ICFzZW50cnlYaHJEYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIHVybCxcbiAgICAgIHN0YXR1c19jb2RlLFxuICAgICAgYm9keVxuICAgIH0gPSBzZW50cnlYaHJEYXRhO1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBtZXRob2QsXG4gICAgICB1cmwsXG4gICAgICBzdGF0dXNfY29kZVxuICAgIH07XG4gICAgY29uc3QgaGludCA9IHtcbiAgICAgIHhocjogaGFuZGxlckRhdGEueGhyLFxuICAgICAgaW5wdXQ6IGJvZHksXG4gICAgICBzdGFydFRpbWVzdGFtcCxcbiAgICAgIGVuZFRpbWVzdGFtcFxuICAgIH07XG4gICAgY29uc3QgYnJlYWRjcnVtYiA9IHtcbiAgICAgIGNhdGVnb3J5OiAneGhyJyxcbiAgICAgIGRhdGEsXG4gICAgICB0eXBlOiAnaHR0cCcsXG4gICAgICBsZXZlbDogZ2V0QnJlYWRjcnVtYkxvZ0xldmVsRnJvbUh0dHBTdGF0dXNDb2RlKHN0YXR1c19jb2RlKVxuICAgIH07XG4gICAgY2xpZW50LmVtaXQoJ2JlZm9yZU91dGdvaW5nUmVxdWVzdEJyZWFkY3J1bWInLCBicmVhZGNydW1iLCBoaW50KTtcbiAgICBhZGRCcmVhZGNydW1iKGJyZWFkY3J1bWIsIGhpbnQpO1xuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYnJlYWRjcnVtYnMgZnJvbSBmZXRjaCBBUEkgY2FsbHNcbiAqL1xuZnVuY3Rpb24gX2dldEZldGNoQnJlYWRjcnVtYkhhbmRsZXIoY2xpZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbiBfZmV0Y2hCcmVhZGNydW1iKGhhbmRsZXJEYXRhKSB7XG4gICAgaWYgKGdldENsaWVudCgpICE9PSBjbGllbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgc3RhcnRUaW1lc3RhbXAsXG4gICAgICBlbmRUaW1lc3RhbXBcbiAgICB9ID0gaGFuZGxlckRhdGE7XG5cbiAgICAvLyBXZSBvbmx5IGNhcHR1cmUgY29tcGxldGUgZmV0Y2ggcmVxdWVzdHNcbiAgICBpZiAoIWVuZFRpbWVzdGFtcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaGFuZGxlckRhdGEuZmV0Y2hEYXRhLnVybC5tYXRjaCgvc2VudHJ5X2tleS8pICYmIGhhbmRsZXJEYXRhLmZldGNoRGF0YS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgICAgLy8gV2Ugd2lsbCBub3QgY3JlYXRlIGJyZWFkY3J1bWJzIGZvciBmZXRjaCByZXF1ZXN0cyB0aGF0IGNvbnRhaW4gYHNlbnRyeV9rZXlgIChpbnRlcm5hbCBzZW50cnkgcmVxdWVzdHMpXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgICh7XG4gICAgICBtZXRob2Q6IGhhbmRsZXJEYXRhLmZldGNoRGF0YS5tZXRob2QsXG4gICAgICB1cmw6IGhhbmRsZXJEYXRhLmZldGNoRGF0YS51cmxcbiAgICB9KTtcbiAgICBpZiAoaGFuZGxlckRhdGEuZXJyb3IpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBoYW5kbGVyRGF0YS5mZXRjaERhdGE7XG4gICAgICBjb25zdCBoaW50ID0ge1xuICAgICAgICBkYXRhOiBoYW5kbGVyRGF0YS5lcnJvcixcbiAgICAgICAgaW5wdXQ6IGhhbmRsZXJEYXRhLmFyZ3MsXG4gICAgICAgIHN0YXJ0VGltZXN0YW1wLFxuICAgICAgICBlbmRUaW1lc3RhbXBcbiAgICAgIH07XG4gICAgICBjb25zdCBicmVhZGNydW1iID0ge1xuICAgICAgICBjYXRlZ29yeTogJ2ZldGNoJyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgICAgIHR5cGU6ICdodHRwJ1xuICAgICAgfTtcbiAgICAgIGNsaWVudC5lbWl0KCdiZWZvcmVPdXRnb2luZ1JlcXVlc3RCcmVhZGNydW1iJywgYnJlYWRjcnVtYiwgaGludCk7XG4gICAgICBhZGRCcmVhZGNydW1iKGJyZWFkY3J1bWIsIGhpbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGhhbmRsZXJEYXRhLnJlc3BvbnNlO1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgLi4uaGFuZGxlckRhdGEuZmV0Y2hEYXRhLFxuICAgICAgICBzdGF0dXNfY29kZTogcmVzcG9uc2U/LnN0YXR1c1xuICAgICAgfTtcbiAgICAgIGhhbmRsZXJEYXRhLmZldGNoRGF0YS5yZXF1ZXN0X2JvZHlfc2l6ZTtcbiAgICAgIGhhbmRsZXJEYXRhLmZldGNoRGF0YS5yZXNwb25zZV9ib2R5X3NpemU7XG4gICAgICByZXNwb25zZT8uc3RhdHVzO1xuICAgICAgY29uc3QgaGludCA9IHtcbiAgICAgICAgaW5wdXQ6IGhhbmRsZXJEYXRhLmFyZ3MsXG4gICAgICAgIHJlc3BvbnNlLFxuICAgICAgICBzdGFydFRpbWVzdGFtcCxcbiAgICAgICAgZW5kVGltZXN0YW1wXG4gICAgICB9O1xuICAgICAgY29uc3QgYnJlYWRjcnVtYiA9IHtcbiAgICAgICAgY2F0ZWdvcnk6ICdmZXRjaCcsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHR5cGU6ICdodHRwJyxcbiAgICAgICAgbGV2ZWw6IGdldEJyZWFkY3J1bWJMb2dMZXZlbEZyb21IdHRwU3RhdHVzQ29kZShkYXRhLnN0YXR1c19jb2RlKVxuICAgICAgfTtcbiAgICAgIGNsaWVudC5lbWl0KCdiZWZvcmVPdXRnb2luZ1JlcXVlc3RCcmVhZGNydW1iJywgYnJlYWRjcnVtYiwgaGludCk7XG4gICAgICBhZGRCcmVhZGNydW1iKGJyZWFkY3J1bWIsIGhpbnQpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGJyZWFkY3J1bWJzIGZyb20gaGlzdG9yeSBBUEkgY2FsbHNcbiAqL1xuZnVuY3Rpb24gX2dldEhpc3RvcnlCcmVhZGNydW1iSGFuZGxlcihjbGllbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIF9oaXN0b3J5QnJlYWRjcnVtYihoYW5kbGVyRGF0YSkge1xuICAgIGlmIChnZXRDbGllbnQoKSAhPT0gY2xpZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBmcm9tID0gaGFuZGxlckRhdGEuZnJvbTtcbiAgICBsZXQgdG8gPSBoYW5kbGVyRGF0YS50bztcbiAgICBjb25zdCBwYXJzZWRMb2MgPSBwYXJzZVVybChXSU5ET1cubG9jYXRpb24uaHJlZik7XG4gICAgbGV0IHBhcnNlZEZyb20gPSBmcm9tID8gcGFyc2VVcmwoZnJvbSkgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgcGFyc2VkVG8gPSBwYXJzZVVybCh0byk7XG5cbiAgICAvLyBJbml0aWFsIHB1c2hTdGF0ZSBkb2Vzbid0IHByb3ZpZGUgYGZyb21gIGluZm9ybWF0aW9uXG4gICAgaWYgKCFwYXJzZWRGcm9tPy5wYXRoKSB7XG4gICAgICBwYXJzZWRGcm9tID0gcGFyc2VkTG9jO1xuICAgIH1cblxuICAgIC8vIFVzZSBvbmx5IHRoZSBwYXRoIGNvbXBvbmVudCBvZiB0aGUgVVJMIGlmIHRoZSBVUkwgbWF0Y2hlcyB0aGUgY3VycmVudFxuICAgIC8vIGRvY3VtZW50IChhbG1vc3QgYWxsIHRoZSB0aW1lIHdoZW4gdXNpbmcgcHVzaFN0YXRlKVxuICAgIGlmIChwYXJzZWRMb2MucHJvdG9jb2wgPT09IHBhcnNlZFRvLnByb3RvY29sICYmIHBhcnNlZExvYy5ob3N0ID09PSBwYXJzZWRUby5ob3N0KSB7XG4gICAgICB0byA9IHBhcnNlZFRvLnJlbGF0aXZlO1xuICAgIH1cbiAgICBpZiAocGFyc2VkTG9jLnByb3RvY29sID09PSBwYXJzZWRGcm9tLnByb3RvY29sICYmIHBhcnNlZExvYy5ob3N0ID09PSBwYXJzZWRGcm9tLmhvc3QpIHtcbiAgICAgIGZyb20gPSBwYXJzZWRGcm9tLnJlbGF0aXZlO1xuICAgIH1cbiAgICBhZGRCcmVhZGNydW1iKHtcbiAgICAgIGNhdGVnb3J5OiAnbmF2aWdhdGlvbicsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZyb20sXG4gICAgICAgIHRvXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBfaXNFdmVudChldmVudCkge1xuICByZXR1cm4gISFldmVudCAmJiAhIWV2ZW50LnRhcmdldDtcbn1cbmV4cG9ydCB7IGJyZWFkY3J1bWJzSW50ZWdyYXRpb24gfTtcbiIsImltcG9ydCB7IGRlZmluZUludGVncmF0aW9uLCBmaWxsLCBnZXRGdW5jdGlvbk5hbWUsIGdldE9yaWdpbmFsRnVuY3Rpb24gfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgV0lORE9XLCB3cmFwIH0gZnJvbSAnLi4vaGVscGVycy5qcyc7XG5jb25zdCBERUZBVUxUX0VWRU5UX1RBUkdFVCA9IFsnRXZlbnRUYXJnZXQnLCAnV2luZG93JywgJ05vZGUnLCAnQXBwbGljYXRpb25DYWNoZScsICdBdWRpb1RyYWNrTGlzdCcsICdCcm9hZGNhc3RDaGFubmVsJywgJ0NoYW5uZWxNZXJnZXJOb2RlJywgJ0NyeXB0b09wZXJhdGlvbicsICdFdmVudFNvdXJjZScsICdGaWxlUmVhZGVyJywgJ0hUTUxVbmtub3duRWxlbWVudCcsICdJREJEYXRhYmFzZScsICdJREJSZXF1ZXN0JywgJ0lEQlRyYW5zYWN0aW9uJywgJ0tleU9wZXJhdGlvbicsICdNZWRpYUNvbnRyb2xsZXInLCAnTWVzc2FnZVBvcnQnLCAnTW9kYWxXaW5kb3cnLCAnTm90aWZpY2F0aW9uJywgJ1NWR0VsZW1lbnRJbnN0YW5jZScsICdTY3JlZW4nLCAnU2hhcmVkV29ya2VyJywgJ1RleHRUcmFjaycsICdUZXh0VHJhY2tDdWUnLCAnVGV4dFRyYWNrTGlzdCcsICdXZWJTb2NrZXQnLCAnV2ViU29ja2V0V29ya2VyJywgJ1dvcmtlcicsICdYTUxIdHRwUmVxdWVzdCcsICdYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0JywgJ1hNTEh0dHBSZXF1ZXN0VXBsb2FkJ107XG5jb25zdCBJTlRFR1JBVElPTl9OQU1FID0gJ0Jyb3dzZXJBcGlFcnJvcnMnO1xuY29uc3QgX2Jyb3dzZXJBcGlFcnJvcnNJbnRlZ3JhdGlvbiA9IChvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgX29wdGlvbnMgPSB7XG4gICAgWE1MSHR0cFJlcXVlc3Q6IHRydWUsXG4gICAgZXZlbnRUYXJnZXQ6IHRydWUsXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lOiB0cnVlLFxuICAgIHNldEludGVydmFsOiB0cnVlLFxuICAgIHNldFRpbWVvdXQ6IHRydWUsXG4gICAgdW5yZWdpc3Rlck9yaWdpbmFsQ2FsbGJhY2tzOiBmYWxzZSxcbiAgICAuLi5vcHRpb25zXG4gIH07XG4gIHJldHVybiB7XG4gICAgbmFtZTogSU5URUdSQVRJT05fTkFNRSxcbiAgICAvLyBUT0RPOiBUaGlzIGN1cnJlbnRseSBvbmx5IHdvcmtzIGZvciB0aGUgZmlyc3QgY2xpZW50IHRoaXMgaXMgc2V0dXBcbiAgICAvLyBXZSBtYXkgd2FudCB0byBhZGp1c3QgdGhpcyB0byBjaGVjayBmb3IgY2xpZW50IGV0Yy5cbiAgICBzZXR1cE9uY2UoKSB7XG4gICAgICBpZiAoX29wdGlvbnMuc2V0VGltZW91dCkge1xuICAgICAgICBmaWxsKFdJTkRPVywgJ3NldFRpbWVvdXQnLCBfd3JhcFRpbWVGdW5jdGlvbik7XG4gICAgICB9XG4gICAgICBpZiAoX29wdGlvbnMuc2V0SW50ZXJ2YWwpIHtcbiAgICAgICAgZmlsbChXSU5ET1csICdzZXRJbnRlcnZhbCcsIF93cmFwVGltZUZ1bmN0aW9uKTtcbiAgICAgIH1cbiAgICAgIGlmIChfb3B0aW9ucy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgICAgZmlsbChXSU5ET1csICdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnLCBfd3JhcFJBRik7XG4gICAgICB9XG4gICAgICBpZiAoX29wdGlvbnMuWE1MSHR0cFJlcXVlc3QgJiYgJ1hNTEh0dHBSZXF1ZXN0JyBpbiBXSU5ET1cpIHtcbiAgICAgICAgZmlsbChYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUsICdzZW5kJywgX3dyYXBYSFIpO1xuICAgICAgfVxuICAgICAgY29uc3QgZXZlbnRUYXJnZXRPcHRpb24gPSBfb3B0aW9ucy5ldmVudFRhcmdldDtcbiAgICAgIGlmIChldmVudFRhcmdldE9wdGlvbikge1xuICAgICAgICBjb25zdCBldmVudFRhcmdldCA9IEFycmF5LmlzQXJyYXkoZXZlbnRUYXJnZXRPcHRpb24pID8gZXZlbnRUYXJnZXRPcHRpb24gOiBERUZBVUxUX0VWRU5UX1RBUkdFVDtcbiAgICAgICAgZXZlbnRUYXJnZXQuZm9yRWFjaCh0YXJnZXQgPT4gX3dyYXBFdmVudFRhcmdldCh0YXJnZXQsIF9vcHRpb25zKSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBXcmFwIHRpbWVyIGZ1bmN0aW9ucyBhbmQgZXZlbnQgdGFyZ2V0cyB0byBjYXRjaCBlcnJvcnMgYW5kIHByb3ZpZGUgYmV0dGVyIG1ldGEgZGF0YS5cbiAqL1xuY29uc3QgYnJvd3NlckFwaUVycm9yc0ludGVncmF0aW9uID0gZGVmaW5lSW50ZWdyYXRpb24oX2Jyb3dzZXJBcGlFcnJvcnNJbnRlZ3JhdGlvbik7XG5mdW5jdGlvbiBfd3JhcFRpbWVGdW5jdGlvbihvcmlnaW5hbCkge1xuICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBvcmlnaW5hbENhbGxiYWNrID0gYXJnc1swXTtcbiAgICBhcmdzWzBdID0gd3JhcChvcmlnaW5hbENhbGxiYWNrLCB7XG4gICAgICBtZWNoYW5pc206IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGZ1bmN0aW9uOiBnZXRGdW5jdGlvbk5hbWUob3JpZ2luYWwpXG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZWQ6IGZhbHNlLFxuICAgICAgICB0eXBlOiAnaW5zdHJ1bWVudCdcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG4gIH07XG59XG5mdW5jdGlvbiBfd3JhcFJBRihvcmlnaW5hbCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIFt3cmFwKGNhbGxiYWNrLCB7XG4gICAgICBtZWNoYW5pc206IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGZ1bmN0aW9uOiAncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyxcbiAgICAgICAgICBoYW5kbGVyOiBnZXRGdW5jdGlvbk5hbWUob3JpZ2luYWwpXG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZWQ6IGZhbHNlLFxuICAgICAgICB0eXBlOiAnaW5zdHJ1bWVudCdcbiAgICAgIH1cbiAgICB9KV0pO1xuICB9O1xufVxuZnVuY3Rpb24gX3dyYXBYSFIob3JpZ2luYWxTZW5kKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgIGNvbnN0IHhociA9IHRoaXM7XG4gICAgY29uc3QgeG1sSHR0cFJlcXVlc3RQcm9wcyA9IFsnb25sb2FkJywgJ29uZXJyb3InLCAnb25wcm9ncmVzcycsICdvbnJlYWR5c3RhdGVjaGFuZ2UnXTtcbiAgICB4bWxIdHRwUmVxdWVzdFByb3BzLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICBpZiAocHJvcCBpbiB4aHIgJiYgdHlwZW9mIHhocltwcm9wXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBmaWxsKHhociwgcHJvcCwgZnVuY3Rpb24gKG9yaWdpbmFsKSB7XG4gICAgICAgICAgY29uc3Qgd3JhcE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBtZWNoYW5pc206IHtcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiBwcm9wLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IGdldEZ1bmN0aW9uTmFtZShvcmlnaW5hbClcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaGFuZGxlZDogZmFsc2UsXG4gICAgICAgICAgICAgIHR5cGU6ICdpbnN0cnVtZW50J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBJZiBJbnN0cnVtZW50IGludGVncmF0aW9uIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUgQnJvd3NlckFwaUVycm9ycywgZ2V0IHRoZSBuYW1lIG9mIG9yaWdpbmFsIGZ1bmN0aW9uXG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxGdW5jdGlvbiA9IGdldE9yaWdpbmFsRnVuY3Rpb24ob3JpZ2luYWwpO1xuICAgICAgICAgIGlmIChvcmlnaW5hbEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICB3cmFwT3B0aW9ucy5tZWNoYW5pc20uZGF0YS5oYW5kbGVyID0gZ2V0RnVuY3Rpb25OYW1lKG9yaWdpbmFsRnVuY3Rpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE90aGVyd2lzZSB3cmFwIGRpcmVjdGx5XG4gICAgICAgICAgcmV0dXJuIHdyYXAob3JpZ2luYWwsIHdyYXBPcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG9yaWdpbmFsU2VuZC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIF93cmFwRXZlbnRUYXJnZXQodGFyZ2V0LCBpbnRlZ3JhdGlvbk9wdGlvbnMpIHtcbiAgY29uc3QgZ2xvYmFsT2JqZWN0ID0gV0lORE9XO1xuICBjb25zdCBwcm90byA9IGdsb2JhbE9iamVjdFt0YXJnZXRdPy5wcm90b3R5cGU7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICBpZiAoIXByb3RvPy5oYXNPd25Qcm9wZXJ0eT8uKCdhZGRFdmVudExpc3RlbmVyJykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZmlsbChwcm90bywgJ2FkZEV2ZW50TGlzdGVuZXInLCBmdW5jdGlvbiAob3JpZ2luYWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZm4sIG9wdGlvbnMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChpc0V2ZW50TGlzdGVuZXJPYmplY3QoZm4pKSB7XG4gICAgICAgICAgLy8gRVNsaW50IGRpc2FibGUgZXhwbGFuYXRpb246XG4gICAgICAgICAgLy8gIEZpcnN0LCBpdCBpcyBnZW5lcmFsbHkgc2FmZSB0byBjYWxsIGB3cmFwYCB3aXRoIGFuIHVuYm91bmQgZnVuY3Rpb24uIEZ1cnRoZXJtb3JlLCB1c2luZyBgLmJpbmQoKWAgd291bGRcbiAgICAgICAgICAvLyAgaW50cm9kdWNlIGEgYnVnIGhlcmUsIGJlY2F1c2UgYmluZCByZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIHRoYXQgZG9lc24ndCBoYXZlIG91clxuICAgICAgICAgIC8vICBmbGFncyhsaWtlIF9fc2VudHJ5X29yaWdpbmFsX18pIGF0dGFjaGVkLiBgd3JhcGAgY2hlY2tzIGZvciB0aG9zZSBmbGFncyB0byBhdm9pZCB1bm5lY2Vzc2FyeSB3cmFwcGluZy5cbiAgICAgICAgICAvLyAgV2l0aG91dCB0aG9zZSBmbGFncywgZXZlcnkgY2FsbCB0byBhZGRFdmVudExpc3RlbmVyIHdyYXBzIHRoZSBmdW5jdGlvbiBhZ2FpbiwgY2F1c2luZyBhIG1lbW9yeSBsZWFrLlxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbiAgICAgICAgICBmbi5oYW5kbGVFdmVudCA9IHdyYXAoZm4uaGFuZGxlRXZlbnQsIHtcbiAgICAgICAgICAgIG1lY2hhbmlzbToge1xuICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICdoYW5kbGVFdmVudCcsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogZ2V0RnVuY3Rpb25OYW1lKGZuKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaGFuZGxlZDogZmFsc2UsXG4gICAgICAgICAgICAgIHR5cGU6ICdpbnN0cnVtZW50J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8gY2FuIHNvbWV0aW1lcyBnZXQgJ1Blcm1pc3Npb24gZGVuaWVkIHRvIGFjY2VzcyBwcm9wZXJ0eSBcImhhbmRsZSBFdmVudCdcbiAgICAgIH1cbiAgICAgIGlmIChpbnRlZ3JhdGlvbk9wdGlvbnMudW5yZWdpc3Rlck9yaWdpbmFsQ2FsbGJhY2tzKSB7XG4gICAgICAgIHVucmVnaXN0ZXJPcmlnaW5hbENhbGxiYWNrKHRoaXMsIGV2ZW50TmFtZSwgZm4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIFtldmVudE5hbWUsIHdyYXAoZm4sIHtcbiAgICAgICAgbWVjaGFuaXNtOiB7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZnVuY3Rpb246ICdhZGRFdmVudExpc3RlbmVyJyxcbiAgICAgICAgICAgIGhhbmRsZXI6IGdldEZ1bmN0aW9uTmFtZShmbiksXG4gICAgICAgICAgICB0YXJnZXRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhhbmRsZWQ6IGZhbHNlLFxuICAgICAgICAgIHR5cGU6ICdpbnN0cnVtZW50J1xuICAgICAgICB9XG4gICAgICB9KSwgb3B0aW9uc10pO1xuICAgIH07XG4gIH0pO1xuICBmaWxsKHByb3RvLCAncmVtb3ZlRXZlbnRMaXN0ZW5lcicsIGZ1bmN0aW9uIChvcmlnaW5hbFJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZm4sIG9wdGlvbnMpIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlcmUgYXJlIDIgcG9zc2libGUgc2NlbmFyaW9zIGhlcmU6XG4gICAgICAgKlxuICAgICAgICogMS4gU29tZW9uZSBwYXNzZXMgYSBjYWxsYmFjaywgd2hpY2ggd2FzIGF0dGFjaGVkIHByaW9yIHRvIFNlbnRyeSBpbml0aWFsaXphdGlvbiwgb3IgYnkgdXNpbmcgdW5tb2RpZmllZFxuICAgICAgICogbWV0aG9kLCBlZy4gYGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIuY2FsbChlbCwgbmFtZSwgaGFuZGxlcikuIEluIHRoaXMgY2FzZSwgd2UgdHJlYXQgdGhpcyBmdW5jdGlvblxuICAgICAgICogYXMgYSBwYXNzLXRocm91Z2gsIGFuZCBjYWxsIG9yaWdpbmFsIGByZW1vdmVFdmVudExpc3RlbmVyYCB3aXRoIGl0LlxuICAgICAgICpcbiAgICAgICAqIDIuIFNvbWVvbmUgcGFzc2VzIGEgY2FsbGJhY2ssIHdoaWNoIHdhcyBhdHRhY2hlZCBhZnRlciBTZW50cnkgd2FzIGluaXRpYWxpemVkLCB3aGljaCBtZWFucyB0aGF0IGl0IHdhcyB1c2luZ1xuICAgICAgICogb3VyIHdyYXBwZWQgdmVyc2lvbiBvZiBgYWRkRXZlbnRMaXN0ZW5lcmAsIHdoaWNoIGludGVybmFsbHkgY2FsbHMgYHdyYXBgIGhlbHBlci5cbiAgICAgICAqIFRoaXMgaGVscGVyIFwid3JhcHNcIiB3aG9sZSBjYWxsYmFjayBpbnNpZGUgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LCBhbmQgYXR0YWNoZWQgYXBwcm9wcmlhdGUgbWV0YWRhdGEgdG8gaXQsXG4gICAgICAgKiBpbiBvcmRlciBmb3IgdXMgdG8gbWFrZSBhIGRpc3RpbmN0aW9uIGJldHdlZW4gd3JhcHBlZC9ub24td3JhcHBlZCBmdW5jdGlvbnMgcG9zc2libGUuXG4gICAgICAgKiBJZiBhIGZ1bmN0aW9uIHdhcyB3cmFwcGVkLCBpdCBoYXMgYWRkaXRpb25hbCBwcm9wZXJ0eSBvZiBgX19zZW50cnlfd3JhcHBlZF9fYCwgaG9sZGluZyB0aGUgaGFuZGxlci5cbiAgICAgICAqXG4gICAgICAgKiBXaGVuIHNvbWVvbmUgYWRkcyBhIGhhbmRsZXIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb24sIGFuZCB0aGVuIGRvIGl0IGFnYWluLCBidXQgYWZ0ZXIsXG4gICAgICAgKiB0aGVuIHdlIGhhdmUgdG8gZGV0YWNoIGJvdGggb2YgdGhlbS4gT3RoZXJ3aXNlLCBpZiB3ZSdkIGRldGFjaCBvbmx5IHdyYXBwZWQgb25lLCBpdCdkIGJlIGltcG9zc2libGVcbiAgICAgICAqIHRvIGdldCByaWQgb2YgdGhlIGluaXRpYWwgaGFuZGxlciBhbmQgaXQnZCBzdGljayB0aGVyZSBmb3JldmVyLlxuICAgICAgICovXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbEV2ZW50SGFuZGxlciA9IGZuLl9fc2VudHJ5X3dyYXBwZWRfXztcbiAgICAgICAgaWYgKG9yaWdpbmFsRXZlbnRIYW5kbGVyKSB7XG4gICAgICAgICAgb3JpZ2luYWxSZW1vdmVFdmVudExpc3RlbmVyLmNhbGwodGhpcywgZXZlbnROYW1lLCBvcmlnaW5hbEV2ZW50SGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaWdub3JlLCBhY2Nlc3NpbmcgX19zZW50cnlfd3JhcHBlZF9fIHdpbGwgdGhyb3cgaW4gc29tZSBTZWxlbml1bSBlbnZpcm9ubWVudHNcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcmlnaW5hbFJlbW92ZUV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudE5hbWUsIGZuLCBvcHRpb25zKTtcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIGlzRXZlbnRMaXN0ZW5lck9iamVjdChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmouaGFuZGxlRXZlbnQgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiB1bnJlZ2lzdGVyT3JpZ2luYWxDYWxsYmFjayh0YXJnZXQsIGV2ZW50TmFtZSwgZm4pIHtcbiAgaWYgKHRhcmdldCAmJiB0eXBlb2YgdGFyZ2V0ID09PSAnb2JqZWN0JyAmJiAncmVtb3ZlRXZlbnRMaXN0ZW5lcicgaW4gdGFyZ2V0ICYmIHR5cGVvZiB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZm4pO1xuICB9XG59XG5leHBvcnQgeyBicm93c2VyQXBpRXJyb3JzSW50ZWdyYXRpb24gfTtcbiIsImltcG9ydCB7IGRlZmluZUludGVncmF0aW9uLCBsb2dnZXIsIHN0YXJ0U2Vzc2lvbiwgY2FwdHVyZVNlc3Npb24gfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgYWRkSGlzdG9yeUluc3RydW1lbnRhdGlvbkhhbmRsZXIgfSBmcm9tICdAc2VudHJ5LWludGVybmFsL2Jyb3dzZXItdXRpbHMnO1xuaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBXSU5ET1cgfSBmcm9tICcuLi9oZWxwZXJzLmpzJztcblxuLyoqXG4gKiBXaGVuIGFkZGVkLCBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgc2Vzc2lvbnMgd2hpY2ggYWxsb3cgeW91IHRvIHRyYWNrIGFkb3B0aW9uIGFuZCBjcmFzaGVzIChjcmFzaCBmcmVlIHJhdGUpIGluIHlvdXIgUmVsZWFzZXMgaW4gU2VudHJ5LlxuICogTW9yZSBpbmZvcm1hdGlvbjogaHR0cHM6Ly9kb2NzLnNlbnRyeS5pby9wcm9kdWN0L3JlbGVhc2VzL2hlYWx0aC9cbiAqXG4gKiBOb3RlOiBJbiBvcmRlciBmb3Igc2Vzc2lvbiB0cmFja2luZyB0byB3b3JrLCB5b3UgbmVlZCB0byBzZXQgdXAgUmVsZWFzZXM6IGh0dHBzOi8vZG9jcy5zZW50cnkuaW8vcHJvZHVjdC9yZWxlYXNlcy9cbiAqL1xuY29uc3QgYnJvd3NlclNlc3Npb25JbnRlZ3JhdGlvbiA9IGRlZmluZUludGVncmF0aW9uKCgpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAnQnJvd3NlclNlc3Npb24nLFxuICAgIHNldHVwT25jZSgpIHtcbiAgICAgIGlmICh0eXBlb2YgV0lORE9XLmRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIud2FybignVXNpbmcgdGhlIGBicm93c2VyU2Vzc2lvbkludGVncmF0aW9uYCBpbiBub24tYnJvd3NlciBlbnZpcm9ubWVudHMgaXMgbm90IHN1cHBvcnRlZC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgc2Vzc2lvbiBkdXJhdGlvbiBmb3IgYnJvd3NlciBzZXNzaW9ucyBkb2VzIG5vdCB0cmFjayBhIG1lYW5pbmdmdWxcbiAgICAgIC8vIGNvbmNlcHQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIG1ldHJpYy5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgY2FwdHVyZWQgc2Vzc2lvbnMgYXJlIGFraW4gdG8gcGFnZSB2aWV3cywgYW5kIHRodXMgd2VcbiAgICAgIC8vIGRpc2NhcmQgdGhlaXIgZHVyYXRpb24uXG4gICAgICBzdGFydFNlc3Npb24oe1xuICAgICAgICBpZ25vcmVEdXJhdGlvbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBjYXB0dXJlU2Vzc2lvbigpO1xuXG4gICAgICAvLyBXZSB3YW50IHRvIGNyZWF0ZSBhIHNlc3Npb24gZm9yIGV2ZXJ5IG5hdmlnYXRpb24gYXMgd2VsbFxuICAgICAgYWRkSGlzdG9yeUluc3RydW1lbnRhdGlvbkhhbmRsZXIoKHtcbiAgICAgICAgZnJvbSxcbiAgICAgICAgdG9cbiAgICAgIH0pID0+IHtcbiAgICAgICAgLy8gRG9uJ3QgY3JlYXRlIGFuIGFkZGl0aW9uYWwgc2Vzc2lvbiBmb3IgdGhlIGluaXRpYWwgcm91dGUgb3IgaWYgdGhlIGxvY2F0aW9uIGRpZCBub3QgY2hhbmdlXG4gICAgICAgIGlmIChmcm9tICE9PSB1bmRlZmluZWQgJiYgZnJvbSAhPT0gdG8pIHtcbiAgICAgICAgICBzdGFydFNlc3Npb24oe1xuICAgICAgICAgICAgaWdub3JlRHVyYXRpb246IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXB0dXJlU2Vzc2lvbigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcbmV4cG9ydCB7IGJyb3dzZXJTZXNzaW9uSW50ZWdyYXRpb24gfTtcbiIsImltcG9ydCB7IGRlZmluZUludGVncmF0aW9uLCBhZGRHbG9iYWxFcnJvckluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGdldENsaWVudCwgY2FwdHVyZUV2ZW50LCBsb2dnZXIsIGFkZEdsb2JhbFVuaGFuZGxlZFJlamVjdGlvbkluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGlzUHJpbWl0aXZlLCBpc1N0cmluZywgZ2V0TG9jYXRpb25IcmVmLCBVTktOT1dOX0ZVTkNUSU9OIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgZXZlbnRGcm9tVW5rbm93bklucHV0IH0gZnJvbSAnLi4vZXZlbnRidWlsZGVyLmpzJztcbmltcG9ydCB7IHNob3VsZElnbm9yZU9uRXJyb3IgfSBmcm9tICcuLi9oZWxwZXJzLmpzJztcbmNvbnN0IElOVEVHUkFUSU9OX05BTUUgPSAnR2xvYmFsSGFuZGxlcnMnO1xuY29uc3QgX2dsb2JhbEhhbmRsZXJzSW50ZWdyYXRpb24gPSAob3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IF9vcHRpb25zID0ge1xuICAgIG9uZXJyb3I6IHRydWUsXG4gICAgb251bmhhbmRsZWRyZWplY3Rpb246IHRydWUsXG4gICAgLi4ub3B0aW9uc1xuICB9O1xuICByZXR1cm4ge1xuICAgIG5hbWU6IElOVEVHUkFUSU9OX05BTUUsXG4gICAgc2V0dXBPbmNlKCkge1xuICAgICAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gNTA7XG4gICAgfSxcbiAgICBzZXR1cChjbGllbnQpIHtcbiAgICAgIGlmIChfb3B0aW9ucy5vbmVycm9yKSB7XG4gICAgICAgIF9pbnN0YWxsR2xvYmFsT25FcnJvckhhbmRsZXIoY2xpZW50KTtcbiAgICAgICAgZ2xvYmFsSGFuZGxlckxvZygnb25lcnJvcicpO1xuICAgICAgfVxuICAgICAgaWYgKF9vcHRpb25zLm9udW5oYW5kbGVkcmVqZWN0aW9uKSB7XG4gICAgICAgIF9pbnN0YWxsR2xvYmFsT25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVyKGNsaWVudCk7XG4gICAgICAgIGdsb2JhbEhhbmRsZXJMb2coJ29udW5oYW5kbGVkcmVqZWN0aW9uJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcbmNvbnN0IGdsb2JhbEhhbmRsZXJzSW50ZWdyYXRpb24gPSBkZWZpbmVJbnRlZ3JhdGlvbihfZ2xvYmFsSGFuZGxlcnNJbnRlZ3JhdGlvbik7XG5mdW5jdGlvbiBfaW5zdGFsbEdsb2JhbE9uRXJyb3JIYW5kbGVyKGNsaWVudCkge1xuICBhZGRHbG9iYWxFcnJvckluc3RydW1lbnRhdGlvbkhhbmRsZXIoZGF0YSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgc3RhY2tQYXJzZXIsXG4gICAgICBhdHRhY2hTdGFja3RyYWNlXG4gICAgfSA9IGdldE9wdGlvbnMoKTtcbiAgICBpZiAoZ2V0Q2xpZW50KCkgIT09IGNsaWVudCB8fCBzaG91bGRJZ25vcmVPbkVycm9yKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgbXNnLFxuICAgICAgdXJsLFxuICAgICAgbGluZSxcbiAgICAgIGNvbHVtbixcbiAgICAgIGVycm9yXG4gICAgfSA9IGRhdGE7XG4gICAgY29uc3QgZXZlbnQgPSBfZW5oYW5jZUV2ZW50V2l0aEluaXRpYWxGcmFtZShldmVudEZyb21Vbmtub3duSW5wdXQoc3RhY2tQYXJzZXIsIGVycm9yIHx8IG1zZywgdW5kZWZpbmVkLCBhdHRhY2hTdGFja3RyYWNlLCBmYWxzZSksIHVybCwgbGluZSwgY29sdW1uKTtcbiAgICBldmVudC5sZXZlbCA9ICdlcnJvcic7XG4gICAgY2FwdHVyZUV2ZW50KGV2ZW50LCB7XG4gICAgICBvcmlnaW5hbEV4Y2VwdGlvbjogZXJyb3IsXG4gICAgICBtZWNoYW5pc206IHtcbiAgICAgICAgaGFuZGxlZDogZmFsc2UsXG4gICAgICAgIHR5cGU6ICdvbmVycm9yJ1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIF9pbnN0YWxsR2xvYmFsT25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVyKGNsaWVudCkge1xuICBhZGRHbG9iYWxVbmhhbmRsZWRSZWplY3Rpb25JbnN0cnVtZW50YXRpb25IYW5kbGVyKGUgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHN0YWNrUGFyc2VyLFxuICAgICAgYXR0YWNoU3RhY2t0cmFjZVxuICAgIH0gPSBnZXRPcHRpb25zKCk7XG4gICAgaWYgKGdldENsaWVudCgpICE9PSBjbGllbnQgfHwgc2hvdWxkSWdub3JlT25FcnJvcigpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVycm9yID0gX2dldFVuaGFuZGxlZFJlamVjdGlvbkVycm9yKGUpO1xuICAgIGNvbnN0IGV2ZW50ID0gaXNQcmltaXRpdmUoZXJyb3IpID8gX2V2ZW50RnJvbVJlamVjdGlvbldpdGhQcmltaXRpdmUoZXJyb3IpIDogZXZlbnRGcm9tVW5rbm93bklucHV0KHN0YWNrUGFyc2VyLCBlcnJvciwgdW5kZWZpbmVkLCBhdHRhY2hTdGFja3RyYWNlLCB0cnVlKTtcbiAgICBldmVudC5sZXZlbCA9ICdlcnJvcic7XG4gICAgY2FwdHVyZUV2ZW50KGV2ZW50LCB7XG4gICAgICBvcmlnaW5hbEV4Y2VwdGlvbjogZXJyb3IsXG4gICAgICBtZWNoYW5pc206IHtcbiAgICAgICAgaGFuZGxlZDogZmFsc2UsXG4gICAgICAgIHR5cGU6ICdvbnVuaGFuZGxlZHJlamVjdGlvbidcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBfZ2V0VW5oYW5kbGVkUmVqZWN0aW9uRXJyb3IoZXJyb3IpIHtcbiAgaWYgKGlzUHJpbWl0aXZlKGVycm9yKSkge1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIC8vIGRpZyB0aGUgb2JqZWN0IG9mIHRoZSByZWplY3Rpb24gb3V0IG9mIGtub3duIGV2ZW50IHR5cGVzXG4gIHRyeSB7XG4gICAgLy8gUHJvbWlzZVJlamVjdGlvbkV2ZW50cyBzdG9yZSB0aGUgb2JqZWN0IG9mIHRoZSByZWplY3Rpb24gdW5kZXIgJ3JlYXNvbidcbiAgICAvLyBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1Byb21pc2VSZWplY3Rpb25FdmVudFxuICAgIGlmICgncmVhc29uJyBpbiBlcnJvcikge1xuICAgICAgcmV0dXJuIGVycm9yLnJlYXNvbjtcbiAgICB9XG5cbiAgICAvLyBzb21ldGhpbmcsIHNvbWV3aGVyZSwgKGxpa2VseSBhIGJyb3dzZXIgZXh0ZW5zaW9uKSBlZmZlY3RpdmVseSBjYXN0cyBQcm9taXNlUmVqZWN0aW9uRXZlbnRzXG4gICAgLy8gdG8gQ3VzdG9tRXZlbnRzLCBtb3ZpbmcgdGhlIGBwcm9taXNlYCBhbmQgYHJlYXNvbmAgYXR0cmlidXRlcyBvZiB0aGUgUFJFIGludG9cbiAgICAvLyB0aGUgQ3VzdG9tRXZlbnQncyBgZGV0YWlsYCBhdHRyaWJ1dGUsIHNpbmNlIHRoZXkncmUgbm90IHBhcnQgb2YgQ3VzdG9tRXZlbnQncyBzcGVjXG4gICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudCBhbmRcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yMzgwXG4gICAgaWYgKCdkZXRhaWwnIGluIGVycm9yICYmICdyZWFzb24nIGluIGVycm9yLmRldGFpbCkge1xuICAgICAgcmV0dXJuIGVycm9yLmRldGFpbC5yZWFzb247XG4gICAgfVxuICB9IGNhdGNoIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZW1wdHlcblxuICByZXR1cm4gZXJyb3I7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGV2ZW50IGZyb20gYSBwcm9taXNlIHJlamVjdGlvbiB3aGVyZSB0aGUgYHJlYXNvbmAgaXMgYSBwcmltaXRpdmUuXG4gKlxuICogQHBhcmFtIHJlYXNvbjogVGhlIGByZWFzb25gIHByb3BlcnR5IG9mIHRoZSBwcm9taXNlIHJlamVjdGlvblxuICogQHJldHVybnMgQW4gRXZlbnQgb2JqZWN0IHdpdGggYW4gYXBwcm9wcmlhdGUgYGV4Y2VwdGlvbmAgdmFsdWVcbiAqL1xuZnVuY3Rpb24gX2V2ZW50RnJvbVJlamVjdGlvbldpdGhQcmltaXRpdmUocmVhc29uKSB7XG4gIHJldHVybiB7XG4gICAgZXhjZXB0aW9uOiB7XG4gICAgICB2YWx1ZXM6IFt7XG4gICAgICAgIHR5cGU6ICdVbmhhbmRsZWRSZWplY3Rpb24nLFxuICAgICAgICAvLyBTdHJpbmcoKSBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgUHJpbWl0aXZlIHR5cGUgaW5jbHVkZXMgc3ltYm9scyAod2hpY2ggY2FuJ3QgYmUgYXV0b21hdGljYWxseSBzdHJpbmdpZmllZClcbiAgICAgICAgdmFsdWU6IGBOb24tRXJyb3IgcHJvbWlzZSByZWplY3Rpb24gY2FwdHVyZWQgd2l0aCB2YWx1ZTogJHtTdHJpbmcocmVhc29uKX1gXG4gICAgICB9XVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIF9lbmhhbmNlRXZlbnRXaXRoSW5pdGlhbEZyYW1lKGV2ZW50LCB1cmwsIGxpbmUsIGNvbHVtbikge1xuICAvLyBldmVudC5leGNlcHRpb25cbiAgY29uc3QgZSA9IGV2ZW50LmV4Y2VwdGlvbiA9IGV2ZW50LmV4Y2VwdGlvbiB8fCB7fTtcbiAgLy8gZXZlbnQuZXhjZXB0aW9uLnZhbHVlc1xuICBjb25zdCBldiA9IGUudmFsdWVzID0gZS52YWx1ZXMgfHwgW107XG4gIC8vIGV2ZW50LmV4Y2VwdGlvbi52YWx1ZXNbMF1cbiAgY29uc3QgZXYwID0gZXZbMF0gPSBldlswXSB8fCB7fTtcbiAgLy8gZXZlbnQuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlXG4gIGNvbnN0IGV2MHMgPSBldjAuc3RhY2t0cmFjZSA9IGV2MC5zdGFja3RyYWNlIHx8IHt9O1xuICAvLyBldmVudC5leGNlcHRpb24udmFsdWVzWzBdLnN0YWNrdHJhY2UuZnJhbWVzXG4gIGNvbnN0IGV2MHNmID0gZXYwcy5mcmFtZXMgPSBldjBzLmZyYW1lcyB8fCBbXTtcbiAgY29uc3QgY29sbm8gPSBjb2x1bW47XG4gIGNvbnN0IGxpbmVubyA9IGxpbmU7XG4gIGNvbnN0IGZpbGVuYW1lID0gaXNTdHJpbmcodXJsKSAmJiB1cmwubGVuZ3RoID4gMCA/IHVybCA6IGdldExvY2F0aW9uSHJlZigpO1xuXG4gIC8vIGV2ZW50LmV4Y2VwdGlvbi52YWx1ZXNbMF0uc3RhY2t0cmFjZS5mcmFtZXNcbiAgaWYgKGV2MHNmLmxlbmd0aCA9PT0gMCkge1xuICAgIGV2MHNmLnB1c2goe1xuICAgICAgY29sbm8sXG4gICAgICBmaWxlbmFtZSxcbiAgICAgIGZ1bmN0aW9uOiBVTktOT1dOX0ZVTkNUSU9OLFxuICAgICAgaW5fYXBwOiB0cnVlLFxuICAgICAgbGluZW5vXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGV2ZW50O1xufVxuZnVuY3Rpb24gZ2xvYmFsSGFuZGxlckxvZyh0eXBlKSB7XG4gIERFQlVHX0JVSUxEICYmIGxvZ2dlci5sb2coYEdsb2JhbCBIYW5kbGVyIGF0dGFjaGVkOiAke3R5cGV9YCk7XG59XG5mdW5jdGlvbiBnZXRPcHRpb25zKCkge1xuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgY29uc3Qgb3B0aW9ucyA9IGNsaWVudD8uZ2V0T3B0aW9ucygpIHx8IHtcbiAgICBzdGFja1BhcnNlcjogKCkgPT4gW10sXG4gICAgYXR0YWNoU3RhY2t0cmFjZTogZmFsc2VcbiAgfTtcbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5leHBvcnQgeyBnbG9iYWxIYW5kbGVyc0ludGVncmF0aW9uIH07XG4iLCJpbXBvcnQgeyBkZWZpbmVJbnRlZ3JhdGlvbiB9IGZyb20gJ0BzZW50cnkvY29yZSc7XG5pbXBvcnQgeyBXSU5ET1csIGdldEh0dHBSZXF1ZXN0RGF0YSB9IGZyb20gJy4uL2hlbHBlcnMuanMnO1xuXG4vKipcbiAqIENvbGxlY3RzIGluZm9ybWF0aW9uIGFib3V0IEhUVFAgcmVxdWVzdCBoZWFkZXJzIGFuZFxuICogYXR0YWNoZXMgdGhlbSB0byB0aGUgZXZlbnQuXG4gKi9cbmNvbnN0IGh0dHBDb250ZXh0SW50ZWdyYXRpb24gPSBkZWZpbmVJbnRlZ3JhdGlvbigoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ0h0dHBDb250ZXh0JyxcbiAgICBwcmVwcm9jZXNzRXZlbnQoZXZlbnQpIHtcbiAgICAgIC8vIGlmIG5vbmUgb2YgdGhlIGluZm9ybWF0aW9uIHdlIHdhbnQgZXhpc3RzLCBkb24ndCBib3RoZXJcbiAgICAgIGlmICghV0lORE9XLm5hdmlnYXRvciAmJiAhV0lORE9XLmxvY2F0aW9uICYmICFXSU5ET1cuZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVxRGF0YSA9IGdldEh0dHBSZXF1ZXN0RGF0YSgpO1xuICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgLi4ucmVxRGF0YS5oZWFkZXJzLFxuICAgICAgICAuLi5ldmVudC5yZXF1ZXN0Py5oZWFkZXJzXG4gICAgICB9O1xuICAgICAgZXZlbnQucmVxdWVzdCA9IHtcbiAgICAgICAgLi4ucmVxRGF0YSxcbiAgICAgICAgLi4uZXZlbnQucmVxdWVzdCxcbiAgICAgICAgaGVhZGVyc1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59KTtcbmV4cG9ydCB7IGh0dHBDb250ZXh0SW50ZWdyYXRpb24gfTtcbiIsImltcG9ydCB7IGRlZmluZUludGVncmF0aW9uLCBhcHBseUFnZ3JlZ2F0ZUVycm9yc1RvRXZlbnQgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgZXhjZXB0aW9uRnJvbUVycm9yIH0gZnJvbSAnLi4vZXZlbnRidWlsZGVyLmpzJztcbmNvbnN0IERFRkFVTFRfS0VZID0gJ2NhdXNlJztcbmNvbnN0IERFRkFVTFRfTElNSVQgPSA1O1xuY29uc3QgSU5URUdSQVRJT05fTkFNRSA9ICdMaW5rZWRFcnJvcnMnO1xuY29uc3QgX2xpbmtlZEVycm9yc0ludGVncmF0aW9uID0gKG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBsaW1pdCA9IG9wdGlvbnMubGltaXQgfHwgREVGQVVMVF9MSU1JVDtcbiAgY29uc3Qga2V5ID0gb3B0aW9ucy5rZXkgfHwgREVGQVVMVF9LRVk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogSU5URUdSQVRJT05fTkFNRSxcbiAgICBwcmVwcm9jZXNzRXZlbnQoZXZlbnQsIGhpbnQsIGNsaWVudCkge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IGNsaWVudC5nZXRPcHRpb25zKCk7XG4gICAgICBhcHBseUFnZ3JlZ2F0ZUVycm9yc1RvRXZlbnQoXG4gICAgICAvLyBUaGlzIGRpZmZlcnMgZnJvbSB0aGUgTGlua2VkRXJyb3JzIGludGVncmF0aW9uIGluIGNvcmUgYnkgdXNpbmcgYSBkaWZmZXJlbnQgZXhjZXB0aW9uRnJvbUVycm9yIGZ1bmN0aW9uXG4gICAgICBleGNlcHRpb25Gcm9tRXJyb3IsIG9wdGlvbnMuc3RhY2tQYXJzZXIsIGtleSwgbGltaXQsIGV2ZW50LCBoaW50KTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEFnZ3JlZ3JhdGUgbGlua2VkIGVycm9ycyBpbiBhbiBldmVudC5cbiAqL1xuY29uc3QgbGlua2VkRXJyb3JzSW50ZWdyYXRpb24gPSBkZWZpbmVJbnRlZ3JhdGlvbihfbGlua2VkRXJyb3JzSW50ZWdyYXRpb24pO1xuZXhwb3J0IHsgbGlua2VkRXJyb3JzSW50ZWdyYXRpb24gfTtcbiIsImltcG9ydCB7IGNvbnNvbGVTYW5kYm94LCBnZXRMb2NhdGlvbkhyZWYgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBXSU5ET1cgfSBmcm9tICcuLi9oZWxwZXJzLmpzJztcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIFNESyBpcyBydW5uaW5nIGluIGFuIGVtYmVkZGVkIGJyb3dzZXIgZXh0ZW5zaW9uLlxuICogU3RhbmQtYWxvbmUgYnJvd3NlciBleHRlbnNpb25zICh3aGljaCBkbyBub3Qgc2hhcmUgdGhlIHNhbWUgZGF0YSBhcyB0aGUgbWFpbiBicm93c2VyIHBhZ2UpIGFyZSBmaW5lLlxuICovXG5mdW5jdGlvbiBjaGVja0FuZFdhcm5JZklzRW1iZWRkZWRCcm93c2VyRXh0ZW5zaW9uKCkge1xuICBpZiAoX2lzRW1iZWRkZWRCcm93c2VyRXh0ZW5zaW9uKCkpIHtcbiAgICBpZiAoREVCVUdfQlVJTEQpIHtcbiAgICAgIGNvbnNvbGVTYW5kYm94KCgpID0+IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcignW1NlbnRyeV0gWW91IGNhbm5vdCB1c2UgU2VudHJ5LmluaXQoKSBpbiBhIGJyb3dzZXIgZXh0ZW5zaW9uLCBzZWU6IGh0dHBzOi8vZG9jcy5zZW50cnkuaW8vcGxhdGZvcm1zL2phdmFzY3JpcHQvYmVzdC1wcmFjdGljZXMvYnJvd3Nlci1leHRlbnNpb25zLycpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIF9pc0VtYmVkZGVkQnJvd3NlckV4dGVuc2lvbigpIHtcbiAgaWYgKHR5cGVvZiBXSU5ET1cud2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIC8vIE5vIG5lZWQgdG8gc2hvdyB0aGUgZXJyb3IgaWYgd2UncmUgbm90IGluIGEgYnJvd3NlciB3aW5kb3cgZW52aXJvbm1lbnQgKGUuZy4gc2VydmljZSB3b3JrZXJzKVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBfd2luZG93ID0gV0lORE9XO1xuXG4gIC8vIFJ1bm5pbmcgdGhlIFNESyBpbiBOVy5qcywgd2hpY2ggYXBwZWFycyBsaWtlIGEgYnJvd3NlciBleHRlbnNpb24gYnV0IGlzbid0LCBpcyBhbHNvIGZpbmVcbiAgLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8xMjY2OFxuICBpZiAoX3dpbmRvdy5udykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBleHRlbnNpb25PYmplY3QgPSBfd2luZG93WydjaHJvbWUnXSB8fCBfd2luZG93Wydicm93c2VyJ107XG4gIGlmICghZXh0ZW5zaW9uT2JqZWN0Py5ydW50aW1lPy5pZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBocmVmID0gZ2V0TG9jYXRpb25IcmVmKCk7XG4gIGNvbnN0IGV4dGVuc2lvblByb3RvY29scyA9IFsnY2hyb21lLWV4dGVuc2lvbicsICdtb3otZXh0ZW5zaW9uJywgJ21zLWJyb3dzZXItZXh0ZW5zaW9uJywgJ3NhZmFyaS13ZWItZXh0ZW5zaW9uJ107XG5cbiAgLy8gUnVubmluZyB0aGUgU0RLIGluIGEgZGVkaWNhdGVkIGV4dGVuc2lvbiBwYWdlIGFuZCBjYWxsaW5nIFNlbnRyeS5pbml0IGlzIGZpbmU7IG5vIHJpc2sgb2YgZGF0YSBsZWFrYWdlXG4gIGNvbnN0IGlzRGVkaWNhdGVkRXh0ZW5zaW9uUGFnZSA9IFdJTkRPVyA9PT0gV0lORE9XLnRvcCAmJiBleHRlbnNpb25Qcm90b2NvbHMuc29tZShwcm90b2NvbCA9PiBocmVmLnN0YXJ0c1dpdGgoYCR7cHJvdG9jb2x9Oi8vYCkpO1xuICByZXR1cm4gIWlzRGVkaWNhdGVkRXh0ZW5zaW9uUGFnZTtcbn1cbmV4cG9ydCB7IGNoZWNrQW5kV2FybklmSXNFbWJlZGRlZEJyb3dzZXJFeHRlbnNpb24gfTtcbiIsImltcG9ydCB7IGluYm91bmRGaWx0ZXJzSW50ZWdyYXRpb24sIGZ1bmN0aW9uVG9TdHJpbmdJbnRlZ3JhdGlvbiwgZGVkdXBlSW50ZWdyYXRpb24sIGdldEludGVncmF0aW9uc1RvU2V0dXAsIHN0YWNrUGFyc2VyRnJvbVN0YWNrUGFyc2VyT3B0aW9ucywgaW5pdEFuZEJpbmQgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgQnJvd3NlckNsaWVudCB9IGZyb20gJy4vY2xpZW50LmpzJztcbmltcG9ydCB7IGJyZWFkY3J1bWJzSW50ZWdyYXRpb24gfSBmcm9tICcuL2ludGVncmF0aW9ucy9icmVhZGNydW1icy5qcyc7XG5pbXBvcnQgeyBicm93c2VyQXBpRXJyb3JzSW50ZWdyYXRpb24gfSBmcm9tICcuL2ludGVncmF0aW9ucy9icm93c2VyYXBpZXJyb3JzLmpzJztcbmltcG9ydCB7IGJyb3dzZXJTZXNzaW9uSW50ZWdyYXRpb24gfSBmcm9tICcuL2ludGVncmF0aW9ucy9icm93c2Vyc2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyBnbG9iYWxIYW5kbGVyc0ludGVncmF0aW9uIH0gZnJvbSAnLi9pbnRlZ3JhdGlvbnMvZ2xvYmFsaGFuZGxlcnMuanMnO1xuaW1wb3J0IHsgaHR0cENvbnRleHRJbnRlZ3JhdGlvbiB9IGZyb20gJy4vaW50ZWdyYXRpb25zL2h0dHBjb250ZXh0LmpzJztcbmltcG9ydCB7IGxpbmtlZEVycm9yc0ludGVncmF0aW9uIH0gZnJvbSAnLi9pbnRlZ3JhdGlvbnMvbGlua2VkZXJyb3JzLmpzJztcbmltcG9ydCB7IGRlZmF1bHRTdGFja1BhcnNlciB9IGZyb20gJy4vc3RhY2stcGFyc2Vycy5qcyc7XG5pbXBvcnQgeyBtYWtlRmV0Y2hUcmFuc3BvcnQgfSBmcm9tICcuL3RyYW5zcG9ydHMvZmV0Y2guanMnO1xuaW1wb3J0IHsgY2hlY2tBbmRXYXJuSWZJc0VtYmVkZGVkQnJvd3NlckV4dGVuc2lvbiB9IGZyb20gJy4vdXRpbHMvZGV0ZWN0QnJvd3NlckV4dGVuc2lvbi5qcyc7XG5cbi8qKiBHZXQgdGhlIGRlZmF1bHQgaW50ZWdyYXRpb25zIGZvciB0aGUgYnJvd3NlciBTREsuICovXG5mdW5jdGlvbiBnZXREZWZhdWx0SW50ZWdyYXRpb25zKF9vcHRpb25zKSB7XG4gIC8qKlxuICAgKiBOb3RlOiBQbGVhc2UgbWFrZSBzdXJlIHRoaXMgc3RheXMgaW4gc3luYyB3aXRoIEFuZ3VsYXIgU0RLLCB3aGljaCByZS1leHBvcnRzXG4gICAqIGBnZXREZWZhdWx0SW50ZWdyYXRpb25zYCBidXQgd2l0aCBhbiBhZGp1c3RlZCBzZXQgb2YgaW50ZWdyYXRpb25zLlxuICAgKi9cbiAgcmV0dXJuIFtcbiAgLy8gVE9ETyh2MTApOiBSZXBsYWNlIHdpdGggYGV2ZW50RmlsdGVyc0ludGVncmF0aW9uYCBvbmNlIHdlIHJlbW92ZSB0aGUgZGVwcmVjYXRlZCBgaW5ib3VuZEZpbHRlcnNJbnRlZ3JhdGlvbmBcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gIGluYm91bmRGaWx0ZXJzSW50ZWdyYXRpb24oKSwgZnVuY3Rpb25Ub1N0cmluZ0ludGVncmF0aW9uKCksIGJyb3dzZXJBcGlFcnJvcnNJbnRlZ3JhdGlvbigpLCBicmVhZGNydW1ic0ludGVncmF0aW9uKCksIGdsb2JhbEhhbmRsZXJzSW50ZWdyYXRpb24oKSwgbGlua2VkRXJyb3JzSW50ZWdyYXRpb24oKSwgZGVkdXBlSW50ZWdyYXRpb24oKSwgaHR0cENvbnRleHRJbnRlZ3JhdGlvbigpLCBicm93c2VyU2Vzc2lvbkludGVncmF0aW9uKCldO1xufVxuXG4vKipcbiAqIFRoZSBTZW50cnkgQnJvd3NlciBTREsgQ2xpZW50LlxuICpcbiAqIFRvIHVzZSB0aGlzIFNESywgY2FsbCB0aGUge0BsaW5rIGluaXR9IGZ1bmN0aW9uIGFzIGVhcmx5IGFzIHBvc3NpYmxlIHdoZW5cbiAqIGxvYWRpbmcgdGhlIHdlYiBwYWdlLiBUbyBzZXQgY29udGV4dCBpbmZvcm1hdGlvbiBvciBzZW5kIG1hbnVhbCBldmVudHMsIHVzZVxuICogdGhlIHByb3ZpZGVkIG1ldGhvZHMuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGBcbiAqXG4gKiBpbXBvcnQgeyBpbml0IH0gZnJvbSAnQHNlbnRyeS9icm93c2VyJztcbiAqXG4gKiBpbml0KHtcbiAqICAgZHNuOiAnX19EU05fXycsXG4gKiAgIC8vIC4uLlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogaW1wb3J0IHsgYWRkQnJlYWRjcnVtYiB9IGZyb20gJ0BzZW50cnkvYnJvd3Nlcic7XG4gKiBhZGRCcmVhZGNydW1iKHtcbiAqICAgbWVzc2FnZTogJ015IEJyZWFkY3J1bWInLFxuICogICAvLyAuLi5cbiAqIH0pO1xuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGBcbiAqXG4gKiBpbXBvcnQgKiBhcyBTZW50cnkgZnJvbSAnQHNlbnRyeS9icm93c2VyJztcbiAqIFNlbnRyeS5jYXB0dXJlTWVzc2FnZSgnSGVsbG8sIHdvcmxkIScpO1xuICogU2VudHJ5LmNhcHR1cmVFeGNlcHRpb24obmV3IEVycm9yKCdHb29kIGJ5ZScpKTtcbiAqIFNlbnRyeS5jYXB0dXJlRXZlbnQoe1xuICogICBtZXNzYWdlOiAnTWFudWFsJyxcbiAqICAgc3RhY2t0cmFjZTogW1xuICogICAgIC8vIC4uLlxuICogICBdLFxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAc2VlIHtAbGluayBCcm93c2VyT3B0aW9uc30gZm9yIGRvY3VtZW50YXRpb24gb24gY29uZmlndXJhdGlvbiBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBpbml0KG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBzaG91bGREaXNhYmxlQmVjYXVzZUlzQnJvd3NlckV4dGVuc3Rpb24gPSAhb3B0aW9ucy5za2lwQnJvd3NlckV4dGVuc2lvbkNoZWNrICYmIGNoZWNrQW5kV2FybklmSXNFbWJlZGRlZEJyb3dzZXJFeHRlbnNpb24oKTtcbiAgY29uc3QgY2xpZW50T3B0aW9ucyA9IHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGVuYWJsZWQ6IHNob3VsZERpc2FibGVCZWNhdXNlSXNCcm93c2VyRXh0ZW5zdGlvbiA/IGZhbHNlIDogb3B0aW9ucy5lbmFibGVkLFxuICAgIHN0YWNrUGFyc2VyOiBzdGFja1BhcnNlckZyb21TdGFja1BhcnNlck9wdGlvbnMob3B0aW9ucy5zdGFja1BhcnNlciB8fCBkZWZhdWx0U3RhY2tQYXJzZXIpLFxuICAgIGludGVncmF0aW9uczogZ2V0SW50ZWdyYXRpb25zVG9TZXR1cCh7XG4gICAgICBpbnRlZ3JhdGlvbnM6IG9wdGlvbnMuaW50ZWdyYXRpb25zLFxuICAgICAgZGVmYXVsdEludGVncmF0aW9uczogb3B0aW9ucy5kZWZhdWx0SW50ZWdyYXRpb25zID09IG51bGwgPyBnZXREZWZhdWx0SW50ZWdyYXRpb25zKCkgOiBvcHRpb25zLmRlZmF1bHRJbnRlZ3JhdGlvbnNcbiAgICB9KSxcbiAgICB0cmFuc3BvcnQ6IG9wdGlvbnMudHJhbnNwb3J0IHx8IG1ha2VGZXRjaFRyYW5zcG9ydFxuICB9O1xuICByZXR1cm4gaW5pdEFuZEJpbmQoQnJvd3NlckNsaWVudCwgY2xpZW50T3B0aW9ucyk7XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyBoZXJlIHRvIGJlIEFQSSBjb21wYXRpYmxlIHdpdGggdGhlIGxvYWRlci5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gZm9yY2VMb2FkKCkge1xuICAvLyBOb29wXG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyBoZXJlIHRvIGJlIEFQSSBjb21wYXRpYmxlIHdpdGggdGhlIGxvYWRlci5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gb25Mb2FkKGNhbGxiYWNrKSB7XG4gIGNhbGxiYWNrKCk7XG59XG5leHBvcnQgeyBmb3JjZUxvYWQsIGdldERlZmF1bHRJbnRlZ3JhdGlvbnMsIGluaXQsIG9uTG9hZCB9O1xuIiwiaW1wb3J0IHsgbG9nZ2VyLCBnZXRDdXJyZW50U2NvcGUsIGdldENsaWVudCwgbGFzdEV2ZW50SWQsIGdldFJlcG9ydERpYWxvZ0VuZHBvaW50IH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBXSU5ET1cgfSBmcm9tICcuL2hlbHBlcnMuanMnO1xuXG4vKipcbiAqIFByZXNlbnQgdGhlIHVzZXIgd2l0aCBhIHJlcG9ydCBkaWFsb2cuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgRXZlcnl0aGluZyBpcyBvcHRpb25hbCwgd2UgdHJ5IHRvIGZldGNoIGFsbCBpbmZvIG5lZWQgZnJvbSB0aGUgY3VycmVudCBzY29wZS5cbiAqL1xuZnVuY3Rpb24gc2hvd1JlcG9ydERpYWxvZyhvcHRpb25zID0ge30pIHtcbiAgY29uc3Qgb3B0aW9uYWxEb2N1bWVudCA9IFdJTkRPVy5kb2N1bWVudDtcbiAgY29uc3QgaW5qZWN0aW9uUG9pbnQgPSBvcHRpb25hbERvY3VtZW50Py5oZWFkIHx8IG9wdGlvbmFsRG9jdW1lbnQ/LmJvZHk7XG5cbiAgLy8gZG9lc24ndCB3b3JrIHdpdGhvdXQgYSBkb2N1bWVudCAoUmVhY3QgTmF0aXZlKVxuICBpZiAoIWluamVjdGlvblBvaW50KSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmVycm9yKCdbc2hvd1JlcG9ydERpYWxvZ10gR2xvYmFsIGRvY3VtZW50IG5vdCBkZWZpbmVkJyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNjb3BlID0gZ2V0Q3VycmVudFNjb3BlKCk7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBjb25zdCBkc24gPSBjbGllbnQ/LmdldERzbigpO1xuICBpZiAoIWRzbikge1xuICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5lcnJvcignW3Nob3dSZXBvcnREaWFsb2ddIERTTiBub3QgY29uZmlndXJlZCcpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBtZXJnZWRPcHRpb25zID0ge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgdXNlcjoge1xuICAgICAgLi4uc2NvcGUuZ2V0VXNlcigpLFxuICAgICAgLi4ub3B0aW9ucy51c2VyXG4gICAgfSxcbiAgICBldmVudElkOiBvcHRpb25zLmV2ZW50SWQgfHwgbGFzdEV2ZW50SWQoKVxuICB9O1xuICBjb25zdCBzY3JpcHQgPSBXSU5ET1cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gIHNjcmlwdC5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xuICBzY3JpcHQuc3JjID0gZ2V0UmVwb3J0RGlhbG9nRW5kcG9pbnQoZHNuLCBtZXJnZWRPcHRpb25zKTtcbiAgY29uc3Qge1xuICAgIG9uTG9hZCxcbiAgICBvbkNsb3NlXG4gIH0gPSBtZXJnZWRPcHRpb25zO1xuICBpZiAob25Mb2FkKSB7XG4gICAgc2NyaXB0Lm9ubG9hZCA9IG9uTG9hZDtcbiAgfVxuICBpZiAob25DbG9zZSkge1xuICAgIGNvbnN0IHJlcG9ydERpYWxvZ0Nsb3NlZE1lc3NhZ2VIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50LmRhdGEgPT09ICdfX3NlbnRyeV9yZXBvcnRkaWFsb2dfY2xvc2VkX18nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb25DbG9zZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIFdJTkRPVy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgcmVwb3J0RGlhbG9nQ2xvc2VkTWVzc2FnZUhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBXSU5ET1cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHJlcG9ydERpYWxvZ0Nsb3NlZE1lc3NhZ2VIYW5kbGVyKTtcbiAgfVxuICBpbmplY3Rpb25Qb2ludC5hcHBlbmRDaGlsZChzY3JpcHQpO1xufVxuZXhwb3J0IHsgc2hvd1JlcG9ydERpYWxvZyB9O1xuIiwiaW1wb3J0IHsgR0xPQkFMX09CSiwgbm9ybWFsaXplLCBmaWxsLCBodG1sVHJlZUFzU3RyaW5nLCBicm93c2VyUGVyZm9ybWFuY2VUaW1lT3JpZ2luLCBsb2dnZXIgYXMgbG9nZ2VyJDEsIHNldmVyaXR5TGV2ZWxGcm9tU3RyaW5nLCBjYXB0dXJlRXhjZXB0aW9uLCBhZGRCcmVhZGNydW1iLCB1dWlkNCwgZ2V0Q2xpZW50LCBnZXRMb2NhdGlvbkhyZWYsIGdldEN1cnJlbnRTY29wZSwgZ2V0QWN0aXZlU3BhbiwgZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21TcGFuLCBpc1NlbnRyeVJlcXVlc3RVcmwsIHN0cmluZ01hdGNoZXNTb21lUGF0dGVybiwgYWRkRXZlbnRQcm9jZXNzb3IsIGRlYm91bmNlIGFzIGRlYm91bmNlJDEsIGNyZWF0ZUVudmVsb3BlLCBjcmVhdGVFdmVudEVudmVsb3BlSGVhZGVycywgZ2V0U2RrTWV0YWRhdGFGb3JFbnZlbG9wZUhlYWRlciwgcHJlcGFyZUV2ZW50LCBnZXRJc29sYXRpb25TY29wZSwgcmVzb2x2ZWRTeW5jUHJvbWlzZSwgdXBkYXRlUmF0ZUxpbWl0cywgaXNSYXRlTGltaXRlZCwgc2V0Q29udGV4dCwgZ2V0Um9vdFNwYW4sIHNwYW5Ub0pTT04sIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFLCBpc0Jyb3dzZXIsIHBhcnNlU2FtcGxlUmF0ZSwgY29uc29sZVNhbmRib3ggfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgc2V0VGltZW91dCBhcyBzZXRUaW1lb3V0JDMsIGFkZFBlcmZvcm1hbmNlSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgYWRkTGNwSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgYWRkQ2xzSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgYWRkRmlkSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgYWRkSW5wSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgc2VyaWFsaXplRm9ybURhdGEsIGdldEZldGNoUmVxdWVzdEFyZ0JvZHksIGdldEJvZHlTdHJpbmcsIFNFTlRSWV9YSFJfREFUQV9LRVksIGFkZENsaWNrS2V5cHJlc3NJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBhZGRIaXN0b3J5SW5zdHJ1bWVudGF0aW9uSGFuZGxlciB9IGZyb20gJ0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscyc7XG5cbi8vIGV4cG9ydGluZyBhIHNlcGFyYXRlIGNvcHkgb2YgYFdJTkRPV2AgcmF0aGVyIHRoYW4gZXhwb3J0aW5nIHRoZSBvbmUgZnJvbSBgQHNlbnRyeS9icm93c2VyYFxuLy8gcHJldmVudHMgdGhlIGJyb3dzZXIgcGFja2FnZSBmcm9tIGJlaW5nIGJ1bmRsZWQgaW4gdGhlIENETiBidW5kbGUsIGFuZCBhdm9pZHMgYVxuLy8gY2lyY3VsYXIgZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBicm93c2VyIGFuZCByZXBsYXkgcGFja2FnZXMgc2hvdWxkIGBAc2VudHJ5L2Jyb3dzZXJgIGltcG9ydFxuLy8gZnJvbSBgQHNlbnRyeS9yZXBsYXlgIGluIHRoZSBmdXR1cmVcbmNvbnN0IFdJTkRPVyA9IEdMT0JBTF9PQko7XG5jb25zdCBSRVBMQVlfU0VTU0lPTl9LRVkgPSAnc2VudHJ5UmVwbGF5U2Vzc2lvbic7XG5jb25zdCBSRVBMQVlfRVZFTlRfTkFNRSA9ICdyZXBsYXlfZXZlbnQnO1xuY29uc3QgVU5BQkxFX1RPX1NFTkRfUkVQTEFZID0gJ1VuYWJsZSB0byBzZW5kIFJlcGxheSc7XG5cbi8vIFRoZSBpZGxlIGxpbWl0IGZvciBhIHNlc3Npb24gYWZ0ZXIgd2hpY2ggcmVjb3JkaW5nIGlzIHBhdXNlZC5cbmNvbnN0IFNFU1NJT05fSURMRV9QQVVTRV9EVVJBVElPTiA9IDMwMDAwMDsgLy8gNSBtaW51dGVzIGluIG1zXG5cbi8vIFRoZSBpZGxlIGxpbWl0IGZvciBhIHNlc3Npb24gYWZ0ZXIgd2hpY2ggdGhlIHNlc3Npb24gZXhwaXJlcy5cbmNvbnN0IFNFU1NJT05fSURMRV9FWFBJUkVfRFVSQVRJT04gPSA5MDAwMDA7IC8vIDE1IG1pbnV0ZXMgaW4gbXNcblxuLyoqIERlZmF1bHQgZmx1c2ggZGVsYXlzICovXG5jb25zdCBERUZBVUxUX0ZMVVNIX01JTl9ERUxBWSA9IDUwMDA7XG4vLyBYWFg6IFRlbXAgZml4IGZvciBvdXIgZGVib3VuY2UgbG9naWMgd2hlcmUgYG1heFdhaXRgIHdvdWxkIG5ldmVyIG9jY3VyIGlmIGl0XG4vLyB3YXMgdGhlIHNhbWUgYXMgYHdhaXRgXG5jb25zdCBERUZBVUxUX0ZMVVNIX01BWF9ERUxBWSA9IDU1MDA7XG5cbi8qIEhvdyBsb25nIHRvIHdhaXQgZm9yIGVycm9yIGNoZWNrb3V0cyAqL1xuY29uc3QgQlVGRkVSX0NIRUNLT1VUX1RJTUUgPSA2MDAwMDtcbmNvbnN0IFJFVFJZX0JBU0VfSU5URVJWQUwgPSA1MDAwO1xuY29uc3QgUkVUUllfTUFYX0NPVU5UID0gMztcblxuLyogVGhlIG1heCAodW5jb21wcmVzc2VkKSBzaXplIGluIGJ5dGVzIG9mIGEgbmV0d29yayBib2R5LiBBbnkgYm9keSBsYXJnZXIgdGhhbiB0aGlzIHdpbGwgYmUgdHJ1bmNhdGVkLiAqL1xuY29uc3QgTkVUV09SS19CT0RZX01BWF9TSVpFID0gMTUwMDAwO1xuXG4vKiBUaGUgbWF4IHNpemUgb2YgYSBzaW5nbGUgY29uc29sZSBhcmcgdGhhdCBpcyBjYXB0dXJlZC4gQW55IGFyZyBsYXJnZXIgdGhhbiB0aGlzIHdpbGwgYmUgdHJ1bmNhdGVkLiAqL1xuY29uc3QgQ09OU09MRV9BUkdfTUFYX1NJWkUgPSA1MDAwO1xuXG4vKiBNaW4uIHRpbWUgdG8gd2FpdCBiZWZvcmUgd2UgY29uc2lkZXIgc29tZXRoaW5nIGEgc2xvdyBjbGljay4gKi9cbmNvbnN0IFNMT1dfQ0xJQ0tfVEhSRVNIT0xEID0gMzAwMDtcbi8qIEZvciBzY3JvbGwgYWN0aW9ucyBhZnRlciBhIGNsaWNrLCB3ZSBvbmx5IGxvb2sgZm9yIGEgdmVyeSBzaG9ydCB0aW1lIHBlcmlvZCB0byBkZXRlY3QgcHJvZ3JhbW1hdGljIHNjcm9sbGluZy4gKi9cbmNvbnN0IFNMT1dfQ0xJQ0tfU0NST0xMX1RJTUVPVVQgPSAzMDA7XG5cbi8qKiBXaGVuIGVuY291bnRlcmluZyBhIHRvdGFsIHNlZ21lbnQgc2l6ZSBleGNlZWRpbmcgdGhpcyBzaXplLCBzdG9wIHRoZSByZXBsYXkgKGFzIHdlIGNhbm5vdCBwcm9wZXJseSBpbmdlc3QgaXQpLiAqL1xuY29uc3QgUkVQTEFZX01BWF9FVkVOVF9CVUZGRVJfU0laRSA9IDIwMDAwMDAwOyAvLyB+MjBNQlxuXG4vKiogUmVwbGF5cyBtdXN0IGJlIG1pbi4gNXMgbG9uZyBiZWZvcmUgd2Ugc2VuZCB0aGVtLiAqL1xuY29uc3QgTUlOX1JFUExBWV9EVVJBVElPTiA9IDQ5OTk7XG4vKiBUaGUgbWF4LiBhbGxvd2VkIHZhbHVlIHRoYXQgdGhlIG1pblJlcGxheUR1cmF0aW9uIGNhbiBiZSBzZXQgdG8uICovXG5jb25zdCBNSU5fUkVQTEFZX0RVUkFUSU9OX0xJTUlUID0gMTUwMDA7XG5cbi8qKiBUaGUgbWF4LiBsZW5ndGggb2YgYSByZXBsYXkuICovXG5jb25zdCBNQVhfUkVQTEFZX0RVUkFUSU9OID0gMzYwMDAwMDsgLy8gNjAgbWludXRlcyBpbiBtcztcblxudmFyIF9fZGVmUHJvcCQxID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCQxID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcCQxKG9iaiwga2V5LCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgd3JpdGFibGU6IHRydWUsXG4gIHZhbHVlXG59KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCQxID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wJDEob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xudmFyIE5vZGVUeXBlJDIgPSAvKiBAX19QVVJFX18gKi8oTm9kZVR5cGUyID0+IHtcbiAgTm9kZVR5cGUyW05vZGVUeXBlMltcIkRvY3VtZW50XCJdID0gMF0gPSBcIkRvY3VtZW50XCI7XG4gIE5vZGVUeXBlMltOb2RlVHlwZTJbXCJEb2N1bWVudFR5cGVcIl0gPSAxXSA9IFwiRG9jdW1lbnRUeXBlXCI7XG4gIE5vZGVUeXBlMltOb2RlVHlwZTJbXCJFbGVtZW50XCJdID0gMl0gPSBcIkVsZW1lbnRcIjtcbiAgTm9kZVR5cGUyW05vZGVUeXBlMltcIlRleHRcIl0gPSAzXSA9IFwiVGV4dFwiO1xuICBOb2RlVHlwZTJbTm9kZVR5cGUyW1wiQ0RBVEFcIl0gPSA0XSA9IFwiQ0RBVEFcIjtcbiAgTm9kZVR5cGUyW05vZGVUeXBlMltcIkNvbW1lbnRcIl0gPSA1XSA9IFwiQ29tbWVudFwiO1xuICByZXR1cm4gTm9kZVR5cGUyO1xufSkoTm9kZVR5cGUkMiB8fCB7fSk7XG5mdW5jdGlvbiBpc0VsZW1lbnQkMShuMikge1xuICByZXR1cm4gbjIubm9kZVR5cGUgPT09IG4yLkVMRU1FTlRfTk9ERTtcbn1cbmZ1bmN0aW9uIGlzU2hhZG93Um9vdChuMikge1xuICBjb25zdCBob3N0ID0gbjI/Lmhvc3Q7XG4gIHJldHVybiBCb29sZWFuKGhvc3Q/LnNoYWRvd1Jvb3QgPT09IG4yKTtcbn1cbmZ1bmN0aW9uIGlzTmF0aXZlU2hhZG93RG9tKHNoYWRvd1Jvb3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzaGFkb3dSb290KSA9PT0gXCJbb2JqZWN0IFNoYWRvd1Jvb3RdXCI7XG59XG5mdW5jdGlvbiBmaXhCcm93c2VyQ29tcGF0aWJpbGl0eUlzc3Vlc0luQ1NTKGNzc1RleHQpIHtcbiAgaWYgKGNzc1RleHQuaW5jbHVkZXMoXCIgYmFja2dyb3VuZC1jbGlwOiB0ZXh0O1wiKSAmJiAhY3NzVGV4dC5pbmNsdWRlcyhcIiAtd2Via2l0LWJhY2tncm91bmQtY2xpcDogdGV4dDtcIikpIHtcbiAgICBjc3NUZXh0ID0gY3NzVGV4dC5yZXBsYWNlKC9cXHNiYWNrZ3JvdW5kLWNsaXA6XFxzKnRleHQ7L2csIFwiIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OyBiYWNrZ3JvdW5kLWNsaXA6IHRleHQ7XCIpO1xuICB9XG4gIHJldHVybiBjc3NUZXh0O1xufVxuZnVuY3Rpb24gZXNjYXBlSW1wb3J0U3RhdGVtZW50KHJ1bGUpIHtcbiAgY29uc3Qge1xuICAgIGNzc1RleHRcbiAgfSA9IHJ1bGU7XG4gIGlmIChjc3NUZXh0LnNwbGl0KCdcIicpLmxlbmd0aCA8IDMpIHJldHVybiBjc3NUZXh0O1xuICBjb25zdCBzdGF0ZW1lbnQgPSBbXCJAaW1wb3J0XCIsIGB1cmwoJHtKU09OLnN0cmluZ2lmeShydWxlLmhyZWYpfSlgXTtcbiAgaWYgKHJ1bGUubGF5ZXJOYW1lID09PSBcIlwiKSB7XG4gICAgc3RhdGVtZW50LnB1c2goYGxheWVyYCk7XG4gIH0gZWxzZSBpZiAocnVsZS5sYXllck5hbWUpIHtcbiAgICBzdGF0ZW1lbnQucHVzaChgbGF5ZXIoJHtydWxlLmxheWVyTmFtZX0pYCk7XG4gIH1cbiAgaWYgKHJ1bGUuc3VwcG9ydHNUZXh0KSB7XG4gICAgc3RhdGVtZW50LnB1c2goYHN1cHBvcnRzKCR7cnVsZS5zdXBwb3J0c1RleHR9KWApO1xuICB9XG4gIGlmIChydWxlLm1lZGlhLmxlbmd0aCkge1xuICAgIHN0YXRlbWVudC5wdXNoKHJ1bGUubWVkaWEubWVkaWFUZXh0KTtcbiAgfVxuICByZXR1cm4gc3RhdGVtZW50LmpvaW4oXCIgXCIpICsgXCI7XCI7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnlTdHlsZXNoZWV0KHMyKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcnVsZXMyID0gczIucnVsZXMgfHwgczIuY3NzUnVsZXM7XG4gICAgcmV0dXJuIHJ1bGVzMiA/IGZpeEJyb3dzZXJDb21wYXRpYmlsaXR5SXNzdWVzSW5DU1MoQXJyYXkuZnJvbShydWxlczIsIHN0cmluZ2lmeVJ1bGUpLmpvaW4oXCJcIikpIDogbnVsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gZml4QWxsQ3NzUHJvcGVydHkocnVsZSkge1xuICBsZXQgc3R5bGVzID0gXCJcIjtcbiAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IHJ1bGUuc3R5bGUubGVuZ3RoOyBpMisrKSB7XG4gICAgY29uc3Qgc3R5bGVEZWNsYXJhdGlvbiA9IHJ1bGUuc3R5bGU7XG4gICAgY29uc3QgYXR0cmlidXRlID0gc3R5bGVEZWNsYXJhdGlvbltpMl07XG4gICAgY29uc3QgaXNJbXBvcnRhbnQgPSBzdHlsZURlY2xhcmF0aW9uLmdldFByb3BlcnR5UHJpb3JpdHkoYXR0cmlidXRlKTtcbiAgICBzdHlsZXMgKz0gYCR7YXR0cmlidXRlfToke3N0eWxlRGVjbGFyYXRpb24uZ2V0UHJvcGVydHlWYWx1ZShhdHRyaWJ1dGUpfSR7aXNJbXBvcnRhbnQgPyBgICFpbXBvcnRhbnRgIDogXCJcIn07YDtcbiAgfVxuICByZXR1cm4gYCR7cnVsZS5zZWxlY3RvclRleHR9IHsgJHtzdHlsZXN9IH1gO1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5UnVsZShydWxlKSB7XG4gIGxldCBpbXBvcnRTdHJpbmdpZmllZDtcbiAgaWYgKGlzQ1NTSW1wb3J0UnVsZShydWxlKSkge1xuICAgIHRyeSB7XG4gICAgICBpbXBvcnRTdHJpbmdpZmllZCA9XG4gICAgICAvLyBmb3Igc2FtZS1vcmlnaW4gc3R5bGVzaGVldHMsXG4gICAgICAvLyB3ZSBjYW4gYWNjZXNzIHRoZSBpbXBvcnRlZCBzdHlsZXNoZWV0IHJ1bGVzIGRpcmVjdGx5XG4gICAgICBzdHJpbmdpZnlTdHlsZXNoZWV0KHJ1bGUuc3R5bGVTaGVldCkgfHxcbiAgICAgIC8vIHdvcmsgYXJvdW5kIGJyb3dzZXIgaXNzdWVzIHdpdGggdGhlIHJhdyBzdHJpbmcgYEBpbXBvcnQgdXJsKC4uLilgIHN0YXRlbWVudFxuICAgICAgZXNjYXBlSW1wb3J0U3RhdGVtZW50KHJ1bGUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxuICB9IGVsc2UgaWYgKGlzQ1NTU3R5bGVSdWxlKHJ1bGUpKSB7XG4gICAgbGV0IGNzc1RleHQgPSBydWxlLmNzc1RleHQ7XG4gICAgY29uc3QgbmVlZHNTYWZhcmlDb2xvbkZpeCA9IHJ1bGUuc2VsZWN0b3JUZXh0LmluY2x1ZGVzKFwiOlwiKTtcbiAgICBjb25zdCBuZWVkc0FsbEZpeCA9IHR5cGVvZiBydWxlLnN0eWxlW1wiYWxsXCJdID09PSBcInN0cmluZ1wiICYmIHJ1bGUuc3R5bGVbXCJhbGxcIl07XG4gICAgaWYgKG5lZWRzQWxsRml4KSB7XG4gICAgICBjc3NUZXh0ID0gZml4QWxsQ3NzUHJvcGVydHkocnVsZSk7XG4gICAgfVxuICAgIGlmIChuZWVkc1NhZmFyaUNvbG9uRml4KSB7XG4gICAgICBjc3NUZXh0ID0gZml4U2FmYXJpQ29sb25zKGNzc1RleHQpO1xuICAgIH1cbiAgICBpZiAobmVlZHNTYWZhcmlDb2xvbkZpeCB8fCBuZWVkc0FsbEZpeCkge1xuICAgICAgcmV0dXJuIGNzc1RleHQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBpbXBvcnRTdHJpbmdpZmllZCB8fCBydWxlLmNzc1RleHQ7XG59XG5mdW5jdGlvbiBmaXhTYWZhcmlDb2xvbnMoY3NzU3RyaW5naWZpZWQpIHtcbiAgY29uc3QgcmVnZXggPSAvKFxcWyg/OltcXHctXSspW15cXFxcXSkoOig/OltcXHctXSspXFxdKS9nbTtcbiAgcmV0dXJuIGNzc1N0cmluZ2lmaWVkLnJlcGxhY2UocmVnZXgsIFwiJDFcXFxcJDJcIik7XG59XG5mdW5jdGlvbiBpc0NTU0ltcG9ydFJ1bGUocnVsZSkge1xuICByZXR1cm4gXCJzdHlsZVNoZWV0XCIgaW4gcnVsZTtcbn1cbmZ1bmN0aW9uIGlzQ1NTU3R5bGVSdWxlKHJ1bGUpIHtcbiAgcmV0dXJuIFwic2VsZWN0b3JUZXh0XCIgaW4gcnVsZTtcbn1cbmNsYXNzIE1pcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIF9fcHVibGljRmllbGQkMSh0aGlzLCBcImlkTm9kZU1hcFwiLCAvKiBAX19QVVJFX18gKi9uZXcgTWFwKCkpO1xuICAgIF9fcHVibGljRmllbGQkMSh0aGlzLCBcIm5vZGVNZXRhTWFwXCIsIC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCkpO1xuICB9XG4gIGdldElkKG4yKSB7XG4gICAgaWYgKCFuMikgcmV0dXJuIC0xO1xuICAgIGNvbnN0IGlkID0gdGhpcy5nZXRNZXRhKG4yKT8uaWQ7XG4gICAgcmV0dXJuIGlkID8/IC0xO1xuICB9XG4gIGdldE5vZGUoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5pZE5vZGVNYXAuZ2V0KGlkKSB8fCBudWxsO1xuICB9XG4gIGdldElkcygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmlkTm9kZU1hcC5rZXlzKCkpO1xuICB9XG4gIGdldE1ldGEobjIpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlTWV0YU1hcC5nZXQobjIpIHx8IG51bGw7XG4gIH1cbiAgLy8gcmVtb3ZlcyB0aGUgbm9kZSBmcm9tIGlkTm9kZU1hcFxuICAvLyBkb2Vzbid0IHJlbW92ZSB0aGUgbm9kZSBmcm9tIG5vZGVNZXRhTWFwXG4gIHJlbW92ZU5vZGVGcm9tTWFwKG4yKSB7XG4gICAgY29uc3QgaWQgPSB0aGlzLmdldElkKG4yKTtcbiAgICB0aGlzLmlkTm9kZU1hcC5kZWxldGUoaWQpO1xuICAgIGlmIChuMi5jaGlsZE5vZGVzKSB7XG4gICAgICBuMi5jaGlsZE5vZGVzLmZvckVhY2goY2hpbGROb2RlID0+IHRoaXMucmVtb3ZlTm9kZUZyb21NYXAoY2hpbGROb2RlKSk7XG4gICAgfVxuICB9XG4gIGhhcyhpZCkge1xuICAgIHJldHVybiB0aGlzLmlkTm9kZU1hcC5oYXMoaWQpO1xuICB9XG4gIGhhc05vZGUobm9kZSkge1xuICAgIHJldHVybiB0aGlzLm5vZGVNZXRhTWFwLmhhcyhub2RlKTtcbiAgfVxuICBhZGQobjIsIG1ldGEpIHtcbiAgICBjb25zdCBpZCA9IG1ldGEuaWQ7XG4gICAgdGhpcy5pZE5vZGVNYXAuc2V0KGlkLCBuMik7XG4gICAgdGhpcy5ub2RlTWV0YU1hcC5zZXQobjIsIG1ldGEpO1xuICB9XG4gIHJlcGxhY2UoaWQsIG4yKSB7XG4gICAgY29uc3Qgb2xkTm9kZSA9IHRoaXMuZ2V0Tm9kZShpZCk7XG4gICAgaWYgKG9sZE5vZGUpIHtcbiAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLm5vZGVNZXRhTWFwLmdldChvbGROb2RlKTtcbiAgICAgIGlmIChtZXRhKSB0aGlzLm5vZGVNZXRhTWFwLnNldChuMiwgbWV0YSk7XG4gICAgfVxuICAgIHRoaXMuaWROb2RlTWFwLnNldChpZCwgbjIpO1xuICB9XG4gIHJlc2V0KCkge1xuICAgIHRoaXMuaWROb2RlTWFwID0gLyogQF9fUFVSRV9fICovbmV3IE1hcCgpO1xuICAgIHRoaXMubm9kZU1ldGFNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVNaXJyb3IkMigpIHtcbiAgcmV0dXJuIG5ldyBNaXJyb3IoKTtcbn1cbmZ1bmN0aW9uIHNob3VsZE1hc2tJbnB1dCh7XG4gIG1hc2tJbnB1dE9wdGlvbnMsXG4gIHRhZ05hbWUsXG4gIHR5cGVcbn0pIHtcbiAgaWYgKHRhZ05hbWUgPT09IFwiT1BUSU9OXCIpIHtcbiAgICB0YWdOYW1lID0gXCJTRUxFQ1RcIjtcbiAgfVxuICByZXR1cm4gQm9vbGVhbihtYXNrSW5wdXRPcHRpb25zW3RhZ05hbWUudG9Mb3dlckNhc2UoKV0gfHwgdHlwZSAmJiBtYXNrSW5wdXRPcHRpb25zW3R5cGVdIHx8IHR5cGUgPT09IFwicGFzc3dvcmRcIiB8fFxuICAvLyBEZWZhdWx0IHRvIFwidGV4dFwiIG9wdGlvbiBmb3IgaW5wdXRzIHdpdGhvdXQgYSBcInR5cGVcIiBhdHRyaWJ1dGUgZGVmaW5lZFxuICB0YWdOYW1lID09PSBcIklOUFVUXCIgJiYgIXR5cGUgJiYgbWFza0lucHV0T3B0aW9uc1tcInRleHRcIl0pO1xufVxuZnVuY3Rpb24gbWFza0lucHV0VmFsdWUoe1xuICBpc01hc2tlZCxcbiAgZWxlbWVudCxcbiAgdmFsdWUsXG4gIG1hc2tJbnB1dEZuXG59KSB7XG4gIGxldCB0ZXh0ID0gdmFsdWUgfHwgXCJcIjtcbiAgaWYgKCFpc01hc2tlZCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG4gIGlmIChtYXNrSW5wdXRGbikge1xuICAgIHRleHQgPSBtYXNrSW5wdXRGbih0ZXh0LCBlbGVtZW50KTtcbiAgfVxuICByZXR1cm4gXCIqXCIucmVwZWF0KHRleHQubGVuZ3RoKTtcbn1cbmZ1bmN0aW9uIHRvTG93ZXJDYXNlKHN0cikge1xuICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiB0b1VwcGVyQ2FzZShzdHIpIHtcbiAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpO1xufVxuY29uc3QgT1JJR0lOQUxfQVRUUklCVVRFX05BTUUgPSBcIl9fcnJ3ZWJfb3JpZ2luYWxfX1wiO1xuZnVuY3Rpb24gaXMyRENhbnZhc0JsYW5rKGNhbnZhcykge1xuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICBpZiAoIWN0eCkgcmV0dXJuIHRydWU7XG4gIGNvbnN0IGNodW5rU2l6ZSA9IDUwO1xuICBmb3IgKGxldCB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCArPSBjaHVua1NpemUpIHtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkgKz0gY2h1bmtTaXplKSB7XG4gICAgICBjb25zdCBnZXRJbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhO1xuICAgICAgY29uc3Qgb3JpZ2luYWxHZXRJbWFnZURhdGEgPSBPUklHSU5BTF9BVFRSSUJVVEVfTkFNRSBpbiBnZXRJbWFnZURhdGEgPyBnZXRJbWFnZURhdGFbT1JJR0lOQUxfQVRUUklCVVRFX05BTUVdIDogZ2V0SW1hZ2VEYXRhO1xuICAgICAgY29uc3QgcGl4ZWxCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkoXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICBvcmlnaW5hbEdldEltYWdlRGF0YS5jYWxsKGN0eCwgeCwgeSwgTWF0aC5taW4oY2h1bmtTaXplLCBjYW52YXMud2lkdGggLSB4KSwgTWF0aC5taW4oY2h1bmtTaXplLCBjYW52YXMuaGVpZ2h0IC0geSkpLmRhdGEuYnVmZmVyKTtcbiAgICAgIGlmIChwaXhlbEJ1ZmZlci5zb21lKHBpeGVsID0+IHBpeGVsICE9PSAwKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGdldElucHV0VHlwZShlbGVtZW50KSB7XG4gIGNvbnN0IHR5cGUgPSBlbGVtZW50LnR5cGU7XG4gIHJldHVybiBlbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRhdGEtcnItaXMtcGFzc3dvcmRcIikgPyBcInBhc3N3b3JkXCIgOiB0eXBlID9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICB0b0xvd2VyQ2FzZSh0eXBlKSA6IG51bGw7XG59XG5mdW5jdGlvbiBnZXRJbnB1dFZhbHVlKGVsLCB0YWdOYW1lLCB0eXBlKSB7XG4gIGlmICh0YWdOYW1lID09PSBcIklOUFVUXCIgJiYgKHR5cGUgPT09IFwicmFkaW9cIiB8fCB0eXBlID09PSBcImNoZWNrYm94XCIpKSB7XG4gICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpIHx8IFwiXCI7XG4gIH1cbiAgcmV0dXJuIGVsLnZhbHVlO1xufVxuZnVuY3Rpb24gZXh0cmFjdEZpbGVFeHRlbnNpb24ocGF0aCwgYmFzZVVSTCkge1xuICBsZXQgdXJsO1xuICB0cnkge1xuICAgIHVybCA9IG5ldyBVUkwocGF0aCwgYmFzZVVSTCA/PyB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHJlZ2V4ID0gL1xcLihbMC05YS16XSspKD86JCkvaTtcbiAgY29uc3QgbWF0Y2ggPSB1cmwucGF0aG5hbWUubWF0Y2gocmVnZXgpO1xuICByZXR1cm4gbWF0Y2g/LlsxXSA/PyBudWxsO1xufVxuY29uc3QgY2FjaGVkSW1wbGVtZW50YXRpb25zJDEgPSB7fTtcbmZ1bmN0aW9uIGdldEltcGxlbWVudGF0aW9uJDEobmFtZSkge1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZWRJbXBsZW1lbnRhdGlvbnMkMVtuYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgY29uc3QgZG9jdW1lbnQyID0gd2luZG93LmRvY3VtZW50O1xuICBsZXQgaW1wbCA9IHdpbmRvd1tuYW1lXTtcbiAgaWYgKGRvY3VtZW50MiAmJiB0eXBlb2YgZG9jdW1lbnQyLmNyZWF0ZUVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzYW5kYm94ID0gZG9jdW1lbnQyLmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICBzYW5kYm94LmhpZGRlbiA9IHRydWU7XG4gICAgICBkb2N1bWVudDIuaGVhZC5hcHBlbmRDaGlsZChzYW5kYm94KTtcbiAgICAgIGNvbnN0IGNvbnRlbnRXaW5kb3cgPSBzYW5kYm94LmNvbnRlbnRXaW5kb3c7XG4gICAgICBpZiAoY29udGVudFdpbmRvdyAmJiBjb250ZW50V2luZG93W25hbWVdKSB7XG4gICAgICAgIGltcGwgPVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgICAgIGNvbnRlbnRXaW5kb3dbbmFtZV07XG4gICAgICB9XG4gICAgICBkb2N1bWVudDIuaGVhZC5yZW1vdmVDaGlsZChzYW5kYm94KTtcbiAgICB9IGNhdGNoIChlMikge31cbiAgfVxuICByZXR1cm4gY2FjaGVkSW1wbGVtZW50YXRpb25zJDFbbmFtZV0gPSBpbXBsLmJpbmQod2luZG93KTtcbn1cbmZ1bmN0aW9uIHNldFRpbWVvdXQkMiguLi5yZXN0KSB7XG4gIHJldHVybiBnZXRJbXBsZW1lbnRhdGlvbiQxKFwic2V0VGltZW91dFwiKSguLi5yZXN0KTtcbn1cbmZ1bmN0aW9uIGNsZWFyVGltZW91dCQxKC4uLnJlc3QpIHtcbiAgcmV0dXJuIGdldEltcGxlbWVudGF0aW9uJDEoXCJjbGVhclRpbWVvdXRcIikoLi4ucmVzdCk7XG59XG5mdW5jdGlvbiBnZXRJZnJhbWVDb250ZW50RG9jdW1lbnQoaWZyYW1lKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGlmcmFtZS5jb250ZW50RG9jdW1lbnQ7XG4gIH0gY2F0Y2ggKGUyKSB7fVxufVxubGV0IF9pZCA9IDE7XG5jb25zdCB0YWdOYW1lUmVnZXggPSBuZXcgUmVnRXhwKFwiW15hLXowLTktXzpdXCIpO1xuY29uc3QgSUdOT1JFRF9OT0RFID0gLTI7XG5mdW5jdGlvbiBnZW5JZCgpIHtcbiAgcmV0dXJuIF9pZCsrO1xufVxuZnVuY3Rpb24gZ2V0VmFsaWRUYWdOYW1lJDEoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkge1xuICAgIHJldHVybiBcImZvcm1cIjtcbiAgfVxuICBjb25zdCBwcm9jZXNzZWRUYWdOYW1lID0gdG9Mb3dlckNhc2UoZWxlbWVudC50YWdOYW1lKTtcbiAgaWYgKHRhZ05hbWVSZWdleC50ZXN0KHByb2Nlc3NlZFRhZ05hbWUpKSB7XG4gICAgcmV0dXJuIFwiZGl2XCI7XG4gIH1cbiAgcmV0dXJuIHByb2Nlc3NlZFRhZ05hbWU7XG59XG5mdW5jdGlvbiBleHRyYWN0T3JpZ2luKHVybCkge1xuICBsZXQgb3JpZ2luID0gXCJcIjtcbiAgaWYgKHVybC5pbmRleE9mKFwiLy9cIikgPiAtMSkge1xuICAgIG9yaWdpbiA9IHVybC5zcGxpdChcIi9cIikuc2xpY2UoMCwgMykuam9pbihcIi9cIik7XG4gIH0gZWxzZSB7XG4gICAgb3JpZ2luID0gdXJsLnNwbGl0KFwiL1wiKVswXTtcbiAgfVxuICBvcmlnaW4gPSBvcmlnaW4uc3BsaXQoXCI/XCIpWzBdO1xuICByZXR1cm4gb3JpZ2luO1xufVxubGV0IGNhbnZhc1NlcnZpY2U7XG5sZXQgY2FudmFzQ3R4O1xuY29uc3QgVVJMX0lOX0NTU19SRUYgPSAvdXJsXFwoKD86KCcpKFteJ10qKSd8KFwiKSguKj8pXCJ8KFteKV0qKSlcXCkvZ207XG5jb25zdCBVUkxfUFJPVE9DT0xfTUFUQ0ggPSAvXig/OlthLXorXSs6KT9cXC9cXC8vaTtcbmNvbnN0IFVSTF9XV1dfTUFUQ0ggPSAvXnd3d1xcLi4qL2k7XG5jb25zdCBEQVRBX1VSSSA9IC9eKGRhdGE6KShbXixdKiksKC4qKS9pO1xuZnVuY3Rpb24gYWJzb2x1dGVUb1N0eWxlc2hlZXQoY3NzVGV4dCwgaHJlZikge1xuICByZXR1cm4gKGNzc1RleHQgfHwgXCJcIikucmVwbGFjZShVUkxfSU5fQ1NTX1JFRiwgKG9yaWdpbiwgcXVvdGUxLCBwYXRoMSwgcXVvdGUyLCBwYXRoMiwgcGF0aDMpID0+IHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGgxIHx8IHBhdGgyIHx8IHBhdGgzO1xuICAgIGNvbnN0IG1heWJlUXVvdGUgPSBxdW90ZTEgfHwgcXVvdGUyIHx8IFwiXCI7XG4gICAgaWYgKCFmaWxlUGF0aCkge1xuICAgICAgcmV0dXJuIG9yaWdpbjtcbiAgICB9XG4gICAgaWYgKFVSTF9QUk9UT0NPTF9NQVRDSC50ZXN0KGZpbGVQYXRoKSB8fCBVUkxfV1dXX01BVENILnRlc3QoZmlsZVBhdGgpKSB7XG4gICAgICByZXR1cm4gYHVybCgke21heWJlUXVvdGV9JHtmaWxlUGF0aH0ke21heWJlUXVvdGV9KWA7XG4gICAgfVxuICAgIGlmIChEQVRBX1VSSS50ZXN0KGZpbGVQYXRoKSkge1xuICAgICAgcmV0dXJuIGB1cmwoJHttYXliZVF1b3RlfSR7ZmlsZVBhdGh9JHttYXliZVF1b3RlfSlgO1xuICAgIH1cbiAgICBpZiAoZmlsZVBhdGhbMF0gPT09IFwiL1wiKSB7XG4gICAgICByZXR1cm4gYHVybCgke21heWJlUXVvdGV9JHtleHRyYWN0T3JpZ2luKGhyZWYpICsgZmlsZVBhdGh9JHttYXliZVF1b3RlfSlgO1xuICAgIH1cbiAgICBjb25zdCBzdGFjayA9IGhyZWYuc3BsaXQoXCIvXCIpO1xuICAgIGNvbnN0IHBhcnRzID0gZmlsZVBhdGguc3BsaXQoXCIvXCIpO1xuICAgIHN0YWNrLnBvcCgpO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgaWYgKHBhcnQgPT09IFwiLlwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChwYXJ0ID09PSBcIi4uXCIpIHtcbiAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHBhcnQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYHVybCgke21heWJlUXVvdGV9JHtzdGFjay5qb2luKFwiL1wiKX0ke21heWJlUXVvdGV9KWA7XG4gIH0pO1xufVxuY29uc3QgU1JDU0VUX05PVF9TUEFDRVMgPSAvXlteIFxcdFxcblxcclxcdTAwMGNdKy87XG5jb25zdCBTUkNTRVRfQ09NTUFTX09SX1NQQUNFUyA9IC9eWywgXFx0XFxuXFxyXFx1MDAwY10rLztcbmZ1bmN0aW9uIGdldEFic29sdXRlU3Jjc2V0U3RyaW5nKGRvYywgYXR0cmlidXRlVmFsdWUpIHtcbiAgaWYgKGF0dHJpYnV0ZVZhbHVlLnRyaW0oKSA9PT0gXCJcIikge1xuICAgIHJldHVybiBhdHRyaWJ1dGVWYWx1ZTtcbiAgfVxuICBsZXQgcG9zID0gMDtcbiAgZnVuY3Rpb24gY29sbGVjdENoYXJhY3RlcnMocmVnRXgpIHtcbiAgICBsZXQgY2hhcnMyO1xuICAgIGNvbnN0IG1hdGNoID0gcmVnRXguZXhlYyhhdHRyaWJ1dGVWYWx1ZS5zdWJzdHJpbmcocG9zKSk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjaGFyczIgPSBtYXRjaFswXTtcbiAgICAgIHBvcyArPSBjaGFyczIubGVuZ3RoO1xuICAgICAgcmV0dXJuIGNoYXJzMjtcbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgY29uc3Qgb3V0cHV0ID0gW107XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgY29sbGVjdENoYXJhY3RlcnMoU1JDU0VUX0NPTU1BU19PUl9TUEFDRVMpO1xuICAgIGlmIChwb3MgPj0gYXR0cmlidXRlVmFsdWUubGVuZ3RoKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgbGV0IHVybCA9IGNvbGxlY3RDaGFyYWN0ZXJzKFNSQ1NFVF9OT1RfU1BBQ0VTKTtcbiAgICBpZiAodXJsLnNsaWNlKC0xKSA9PT0gXCIsXCIpIHtcbiAgICAgIHVybCA9IGFic29sdXRlVG9Eb2MoZG9jLCB1cmwuc3Vic3RyaW5nKDAsIHVybC5sZW5ndGggLSAxKSk7XG4gICAgICBvdXRwdXQucHVzaCh1cmwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZGVzY3JpcHRvcnNTdHIgPSBcIlwiO1xuICAgICAgdXJsID0gYWJzb2x1dGVUb0RvYyhkb2MsIHVybCk7XG4gICAgICBsZXQgaW5QYXJlbnMgPSBmYWxzZTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IGMyID0gYXR0cmlidXRlVmFsdWUuY2hhckF0KHBvcyk7XG4gICAgICAgIGlmIChjMiA9PT0gXCJcIikge1xuICAgICAgICAgIG91dHB1dC5wdXNoKCh1cmwgKyBkZXNjcmlwdG9yc1N0cikudHJpbSgpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmICghaW5QYXJlbnMpIHtcbiAgICAgICAgICBpZiAoYzIgPT09IFwiLFwiKSB7XG4gICAgICAgICAgICBwb3MgKz0gMTtcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKCh1cmwgKyBkZXNjcmlwdG9yc1N0cikudHJpbSgpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYzIgPT09IFwiKFwiKSB7XG4gICAgICAgICAgICBpblBhcmVucyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjMiA9PT0gXCIpXCIpIHtcbiAgICAgICAgICAgIGluUGFyZW5zID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlc2NyaXB0b3JzU3RyICs9IGMyO1xuICAgICAgICBwb3MgKz0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKFwiLCBcIik7XG59XG5jb25zdCBjYWNoZWREb2N1bWVudCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBhYnNvbHV0ZVRvRG9jKGRvYywgYXR0cmlidXRlVmFsdWUpIHtcbiAgaWYgKCFhdHRyaWJ1dGVWYWx1ZSB8fCBhdHRyaWJ1dGVWYWx1ZS50cmltKCkgPT09IFwiXCIpIHtcbiAgICByZXR1cm4gYXR0cmlidXRlVmFsdWU7XG4gIH1cbiAgcmV0dXJuIGdldEhyZWYoZG9jLCBhdHRyaWJ1dGVWYWx1ZSk7XG59XG5mdW5jdGlvbiBpc1NWR0VsZW1lbnQoZWwpIHtcbiAgcmV0dXJuIEJvb2xlYW4oZWwudGFnTmFtZSA9PT0gXCJzdmdcIiB8fCBlbC5vd25lclNWR0VsZW1lbnQpO1xufVxuZnVuY3Rpb24gZ2V0SHJlZihkb2MsIGN1c3RvbUhyZWYpIHtcbiAgbGV0IGEyID0gY2FjaGVkRG9jdW1lbnQuZ2V0KGRvYyk7XG4gIGlmICghYTIpIHtcbiAgICBhMiA9IGRvYy5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBjYWNoZWREb2N1bWVudC5zZXQoZG9jLCBhMik7XG4gIH1cbiAgaWYgKCFjdXN0b21IcmVmKSB7XG4gICAgY3VzdG9tSHJlZiA9IFwiXCI7XG4gIH0gZWxzZSBpZiAoY3VzdG9tSHJlZi5zdGFydHNXaXRoKFwiYmxvYjpcIikgfHwgY3VzdG9tSHJlZi5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHtcbiAgICByZXR1cm4gY3VzdG9tSHJlZjtcbiAgfVxuICBhMi5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGN1c3RvbUhyZWYpO1xuICByZXR1cm4gYTIuaHJlZjtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUF0dHJpYnV0ZShkb2MsIHRhZ05hbWUsIG5hbWUsIHZhbHVlLCBlbGVtZW50LCBtYXNrQXR0cmlidXRlRm4pIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAobmFtZSA9PT0gXCJzcmNcIiB8fCBuYW1lID09PSBcImhyZWZcIiAmJiAhKHRhZ05hbWUgPT09IFwidXNlXCIgJiYgdmFsdWVbMF0gPT09IFwiI1wiKSkge1xuICAgIHJldHVybiBhYnNvbHV0ZVRvRG9jKGRvYywgdmFsdWUpO1xuICB9IGVsc2UgaWYgKG5hbWUgPT09IFwieGxpbms6aHJlZlwiICYmIHZhbHVlWzBdICE9PSBcIiNcIikge1xuICAgIHJldHVybiBhYnNvbHV0ZVRvRG9jKGRvYywgdmFsdWUpO1xuICB9IGVsc2UgaWYgKG5hbWUgPT09IFwiYmFja2dyb3VuZFwiICYmICh0YWdOYW1lID09PSBcInRhYmxlXCIgfHwgdGFnTmFtZSA9PT0gXCJ0ZFwiIHx8IHRhZ05hbWUgPT09IFwidGhcIikpIHtcbiAgICByZXR1cm4gYWJzb2x1dGVUb0RvYyhkb2MsIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChuYW1lID09PSBcInNyY3NldFwiKSB7XG4gICAgcmV0dXJuIGdldEFic29sdXRlU3Jjc2V0U3RyaW5nKGRvYywgdmFsdWUpO1xuICB9IGVsc2UgaWYgKG5hbWUgPT09IFwic3R5bGVcIikge1xuICAgIHJldHVybiBhYnNvbHV0ZVRvU3R5bGVzaGVldCh2YWx1ZSwgZ2V0SHJlZihkb2MpKTtcbiAgfSBlbHNlIGlmICh0YWdOYW1lID09PSBcIm9iamVjdFwiICYmIG5hbWUgPT09IFwiZGF0YVwiKSB7XG4gICAgcmV0dXJuIGFic29sdXRlVG9Eb2MoZG9jLCB2YWx1ZSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBtYXNrQXR0cmlidXRlRm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBtYXNrQXR0cmlidXRlRm4obmFtZSwgdmFsdWUsIGVsZW1lbnQpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGlnbm9yZUF0dHJpYnV0ZSh0YWdOYW1lLCBuYW1lLCBfdmFsdWUpIHtcbiAgcmV0dXJuICh0YWdOYW1lID09PSBcInZpZGVvXCIgfHwgdGFnTmFtZSA9PT0gXCJhdWRpb1wiKSAmJiBuYW1lID09PSBcImF1dG9wbGF5XCI7XG59XG5mdW5jdGlvbiBfaXNCbG9ja2VkRWxlbWVudChlbGVtZW50LCBibG9ja0NsYXNzLCBibG9ja1NlbGVjdG9yLCB1bmJsb2NrU2VsZWN0b3IpIHtcbiAgdHJ5IHtcbiAgICBpZiAodW5ibG9ja1NlbGVjdG9yICYmIGVsZW1lbnQubWF0Y2hlcyh1bmJsb2NrU2VsZWN0b3IpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYmxvY2tDbGFzcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGJsb2NrQ2xhc3MpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBlSW5kZXggPSBlbGVtZW50LmNsYXNzTGlzdC5sZW5ndGg7IGVJbmRleC0tOykge1xuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTGlzdFtlSW5kZXhdO1xuICAgICAgICBpZiAoYmxvY2tDbGFzcy50ZXN0KGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYmxvY2tTZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIGVsZW1lbnQubWF0Y2hlcyhibG9ja1NlbGVjdG9yKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUyKSB7fVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBlbGVtZW50Q2xhc3NNYXRjaGVzUmVnZXgoZWwsIHJlZ2V4KSB7XG4gIGZvciAobGV0IGVJbmRleCA9IGVsLmNsYXNzTGlzdC5sZW5ndGg7IGVJbmRleC0tOykge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9IGVsLmNsYXNzTGlzdFtlSW5kZXhdO1xuICAgIGlmIChyZWdleC50ZXN0KGNsYXNzTmFtZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBkaXN0YW5jZVRvTWF0Y2gobm9kZSwgbWF0Y2hQcmVkaWNhdGUsIGxpbWl0ID0gSW5maW5pdHksIGRpc3RhbmNlID0gMCkge1xuICBpZiAoIW5vZGUpIHJldHVybiAtMTtcbiAgaWYgKG5vZGUubm9kZVR5cGUgIT09IG5vZGUuRUxFTUVOVF9OT0RFKSByZXR1cm4gLTE7XG4gIGlmIChkaXN0YW5jZSA+IGxpbWl0KSByZXR1cm4gLTE7XG4gIGlmIChtYXRjaFByZWRpY2F0ZShub2RlKSkgcmV0dXJuIGRpc3RhbmNlO1xuICByZXR1cm4gZGlzdGFuY2VUb01hdGNoKG5vZGUucGFyZW50Tm9kZSwgbWF0Y2hQcmVkaWNhdGUsIGxpbWl0LCBkaXN0YW5jZSArIDEpO1xufVxuZnVuY3Rpb24gY3JlYXRlTWF0Y2hQcmVkaWNhdGUoY2xhc3NOYW1lLCBzZWxlY3Rvcikge1xuICByZXR1cm4gbm9kZSA9PiB7XG4gICAgY29uc3QgZWwgPSBub2RlO1xuICAgIGlmIChlbCA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBpZiAoY2xhc3NOYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgaWYgKGVsLm1hdGNoZXMoYC4ke2NsYXNzTmFtZX1gKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudENsYXNzTWF0Y2hlc1JlZ2V4KGVsLCBjbGFzc05hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzZWxlY3RvciAmJiBlbC5tYXRjaGVzKHNlbGVjdG9yKSkgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gbmVlZE1hc2tpbmdUZXh0KG5vZGUsIG1hc2tUZXh0Q2xhc3MsIG1hc2tUZXh0U2VsZWN0b3IsIHVubWFza1RleHRDbGFzcywgdW5tYXNrVGV4dFNlbGVjdG9yLCBtYXNrQWxsVGV4dCkge1xuICB0cnkge1xuICAgIGNvbnN0IGVsID0gbm9kZS5ub2RlVHlwZSA9PT0gbm9kZS5FTEVNRU5UX05PREUgPyBub2RlIDogbm9kZS5wYXJlbnRFbGVtZW50O1xuICAgIGlmIChlbCA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlbC50YWdOYW1lID09PSBcIklOUFVUXCIpIHtcbiAgICAgIGNvbnN0IGF1dG9jb21wbGV0ZSA9IGVsLmdldEF0dHJpYnV0ZShcImF1dG9jb21wbGV0ZVwiKTtcbiAgICAgIGNvbnN0IGRpc2FsbG93ZWRBdXRvY29tcGxldGVWYWx1ZXMgPSBbXCJjdXJyZW50LXBhc3N3b3JkXCIsIFwibmV3LXBhc3N3b3JkXCIsIFwiY2MtbnVtYmVyXCIsIFwiY2MtZXhwXCIsIFwiY2MtZXhwLW1vbnRoXCIsIFwiY2MtZXhwLXllYXJcIiwgXCJjYy1jc2NcIl07XG4gICAgICBpZiAoZGlzYWxsb3dlZEF1dG9jb21wbGV0ZVZhbHVlcy5pbmNsdWRlcyhhdXRvY29tcGxldGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgbWFza0Rpc3RhbmNlID0gLTE7XG4gICAgbGV0IHVubWFza0Rpc3RhbmNlID0gLTE7XG4gICAgaWYgKG1hc2tBbGxUZXh0KSB7XG4gICAgICB1bm1hc2tEaXN0YW5jZSA9IGRpc3RhbmNlVG9NYXRjaChlbCwgY3JlYXRlTWF0Y2hQcmVkaWNhdGUodW5tYXNrVGV4dENsYXNzLCB1bm1hc2tUZXh0U2VsZWN0b3IpKTtcbiAgICAgIGlmICh1bm1hc2tEaXN0YW5jZSA8IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBtYXNrRGlzdGFuY2UgPSBkaXN0YW5jZVRvTWF0Y2goZWwsIGNyZWF0ZU1hdGNoUHJlZGljYXRlKG1hc2tUZXh0Q2xhc3MsIG1hc2tUZXh0U2VsZWN0b3IpLCB1bm1hc2tEaXN0YW5jZSA+PSAwID8gdW5tYXNrRGlzdGFuY2UgOiBJbmZpbml0eSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hc2tEaXN0YW5jZSA9IGRpc3RhbmNlVG9NYXRjaChlbCwgY3JlYXRlTWF0Y2hQcmVkaWNhdGUobWFza1RleHRDbGFzcywgbWFza1RleHRTZWxlY3RvcikpO1xuICAgICAgaWYgKG1hc2tEaXN0YW5jZSA8IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdW5tYXNrRGlzdGFuY2UgPSBkaXN0YW5jZVRvTWF0Y2goZWwsIGNyZWF0ZU1hdGNoUHJlZGljYXRlKHVubWFza1RleHRDbGFzcywgdW5tYXNrVGV4dFNlbGVjdG9yKSwgbWFza0Rpc3RhbmNlID49IDAgPyBtYXNrRGlzdGFuY2UgOiBJbmZpbml0eSk7XG4gICAgfVxuICAgIHJldHVybiBtYXNrRGlzdGFuY2UgPj0gMCA/IHVubWFza0Rpc3RhbmNlID49IDAgPyBtYXNrRGlzdGFuY2UgPD0gdW5tYXNrRGlzdGFuY2UgOiB0cnVlIDogdW5tYXNrRGlzdGFuY2UgPj0gMCA/IGZhbHNlIDogISFtYXNrQWxsVGV4dDtcbiAgfSBjYXRjaCAoZTIpIHt9XG4gIHJldHVybiAhIW1hc2tBbGxUZXh0O1xufVxuZnVuY3Rpb24gb25jZUlmcmFtZUxvYWRlZChpZnJhbWVFbCwgbGlzdGVuZXIsIGlmcmFtZUxvYWRUaW1lb3V0KSB7XG4gIGNvbnN0IHdpbiA9IGlmcmFtZUVsLmNvbnRlbnRXaW5kb3c7XG4gIGlmICghd2luKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBmaXJlZCA9IGZhbHNlO1xuICBsZXQgcmVhZHlTdGF0ZTtcbiAgdHJ5IHtcbiAgICByZWFkeVN0YXRlID0gd2luLmRvY3VtZW50LnJlYWR5U3RhdGU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChyZWFkeVN0YXRlICE9PSBcImNvbXBsZXRlXCIpIHtcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQkMigoKSA9PiB7XG4gICAgICBpZiAoIWZpcmVkKSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LCBpZnJhbWVMb2FkVGltZW91dCk7XG4gICAgaWZyYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0JDEodGltZXIpO1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIoKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgYmxhbmtVcmwgPSBcImFib3V0OmJsYW5rXCI7XG4gIGlmICh3aW4ubG9jYXRpb24uaHJlZiAhPT0gYmxhbmtVcmwgfHwgaWZyYW1lRWwuc3JjID09PSBibGFua1VybCB8fCBpZnJhbWVFbC5zcmMgPT09IFwiXCIpIHtcbiAgICBzZXRUaW1lb3V0JDIobGlzdGVuZXIsIDApO1xuICAgIHJldHVybiBpZnJhbWVFbC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBsaXN0ZW5lcik7XG4gIH1cbiAgaWZyYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgbGlzdGVuZXIpO1xufVxuZnVuY3Rpb24gb25jZVN0eWxlc2hlZXRMb2FkZWQobGluaywgbGlzdGVuZXIsIHN0eWxlU2hlZXRMb2FkVGltZW91dCkge1xuICBsZXQgZmlyZWQgPSBmYWxzZTtcbiAgbGV0IHN0eWxlU2hlZXRMb2FkZWQ7XG4gIHRyeSB7XG4gICAgc3R5bGVTaGVldExvYWRlZCA9IGxpbmsuc2hlZXQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzdHlsZVNoZWV0TG9hZGVkKSByZXR1cm47XG4gIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCQyKCgpID0+IHtcbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBsaXN0ZW5lcigpO1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfSwgc3R5bGVTaGVldExvYWRUaW1lb3V0KTtcbiAgbGluay5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0JDEodGltZXIpO1xuICAgIGZpcmVkID0gdHJ1ZTtcbiAgICBsaXN0ZW5lcigpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZU5vZGUobjIsIG9wdGlvbnMpIHtcbiAgY29uc3Qge1xuICAgIGRvYyxcbiAgICBtaXJyb3I6IG1pcnJvcjIsXG4gICAgYmxvY2tDbGFzcyxcbiAgICBibG9ja1NlbGVjdG9yLFxuICAgIHVuYmxvY2tTZWxlY3RvcixcbiAgICBtYXNrQWxsVGV4dCxcbiAgICBtYXNrQXR0cmlidXRlRm4sXG4gICAgbWFza1RleHRDbGFzcyxcbiAgICB1bm1hc2tUZXh0Q2xhc3MsXG4gICAgbWFza1RleHRTZWxlY3RvcixcbiAgICB1bm1hc2tUZXh0U2VsZWN0b3IsXG4gICAgaW5saW5lU3R5bGVzaGVldCxcbiAgICBtYXNrSW5wdXRPcHRpb25zID0ge30sXG4gICAgbWFza1RleHRGbixcbiAgICBtYXNrSW5wdXRGbixcbiAgICBkYXRhVVJMT3B0aW9ucyA9IHt9LFxuICAgIGlubGluZUltYWdlcyxcbiAgICByZWNvcmRDYW52YXMsXG4gICAga2VlcElmcmFtZVNyY0ZuLFxuICAgIG5ld2x5QWRkZWRFbGVtZW50ID0gZmFsc2VcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHJvb3RJZCA9IGdldFJvb3RJZChkb2MsIG1pcnJvcjIpO1xuICBzd2l0Y2ggKG4yLm5vZGVUeXBlKSB7XG4gICAgY2FzZSBuMi5ET0NVTUVOVF9OT0RFOlxuICAgICAgaWYgKG4yLmNvbXBhdE1vZGUgIT09IFwiQ1NTMUNvbXBhdFwiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogTm9kZVR5cGUkMi5Eb2N1bWVudCxcbiAgICAgICAgICBjaGlsZE5vZGVzOiBbXSxcbiAgICAgICAgICBjb21wYXRNb2RlOiBuMi5jb21wYXRNb2RlXG4gICAgICAgICAgLy8gcHJvYmFibHkgXCJCYWNrQ29tcGF0XCJcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogTm9kZVR5cGUkMi5Eb2N1bWVudCxcbiAgICAgICAgICBjaGlsZE5vZGVzOiBbXVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIGNhc2UgbjIuRE9DVU1FTlRfVFlQRV9OT0RFOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogTm9kZVR5cGUkMi5Eb2N1bWVudFR5cGUsXG4gICAgICAgIG5hbWU6IG4yLm5hbWUsXG4gICAgICAgIHB1YmxpY0lkOiBuMi5wdWJsaWNJZCxcbiAgICAgICAgc3lzdGVtSWQ6IG4yLnN5c3RlbUlkLFxuICAgICAgICByb290SWRcbiAgICAgIH07XG4gICAgY2FzZSBuMi5FTEVNRU5UX05PREU6XG4gICAgICByZXR1cm4gc2VyaWFsaXplRWxlbWVudE5vZGUobjIsIHtcbiAgICAgICAgZG9jLFxuICAgICAgICBibG9ja0NsYXNzLFxuICAgICAgICBibG9ja1NlbGVjdG9yLFxuICAgICAgICB1bmJsb2NrU2VsZWN0b3IsXG4gICAgICAgIGlubGluZVN0eWxlc2hlZXQsXG4gICAgICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICAgICAgbWFza0lucHV0T3B0aW9ucyxcbiAgICAgICAgbWFza0lucHV0Rm4sXG4gICAgICAgIGRhdGFVUkxPcHRpb25zLFxuICAgICAgICBpbmxpbmVJbWFnZXMsXG4gICAgICAgIHJlY29yZENhbnZhcyxcbiAgICAgICAga2VlcElmcmFtZVNyY0ZuLFxuICAgICAgICBuZXdseUFkZGVkRWxlbWVudCxcbiAgICAgICAgcm9vdElkLFxuICAgICAgICBtYXNrVGV4dENsYXNzLFxuICAgICAgICB1bm1hc2tUZXh0Q2xhc3MsXG4gICAgICAgIG1hc2tUZXh0U2VsZWN0b3IsXG4gICAgICAgIHVubWFza1RleHRTZWxlY3RvclxuICAgICAgfSk7XG4gICAgY2FzZSBuMi5URVhUX05PREU6XG4gICAgICByZXR1cm4gc2VyaWFsaXplVGV4dE5vZGUobjIsIHtcbiAgICAgICAgZG9jLFxuICAgICAgICBtYXNrQWxsVGV4dCxcbiAgICAgICAgbWFza1RleHRDbGFzcyxcbiAgICAgICAgdW5tYXNrVGV4dENsYXNzLFxuICAgICAgICBtYXNrVGV4dFNlbGVjdG9yLFxuICAgICAgICB1bm1hc2tUZXh0U2VsZWN0b3IsXG4gICAgICAgIG1hc2tUZXh0Rm4sXG4gICAgICAgIG1hc2tJbnB1dE9wdGlvbnMsXG4gICAgICAgIG1hc2tJbnB1dEZuLFxuICAgICAgICByb290SWRcbiAgICAgIH0pO1xuICAgIGNhc2UgbjIuQ0RBVEFfU0VDVElPTl9OT0RFOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogTm9kZVR5cGUkMi5DREFUQSxcbiAgICAgICAgdGV4dENvbnRlbnQ6IFwiXCIsXG4gICAgICAgIHJvb3RJZFxuICAgICAgfTtcbiAgICBjYXNlIG4yLkNPTU1FTlRfTk9ERTpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IE5vZGVUeXBlJDIuQ29tbWVudCxcbiAgICAgICAgdGV4dENvbnRlbnQ6IG4yLnRleHRDb250ZW50IHx8IFwiXCIsXG4gICAgICAgIHJvb3RJZFxuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5mdW5jdGlvbiBnZXRSb290SWQoZG9jLCBtaXJyb3IyKSB7XG4gIGlmICghbWlycm9yMi5oYXNOb2RlKGRvYykpIHJldHVybiB2b2lkIDA7XG4gIGNvbnN0IGRvY0lkID0gbWlycm9yMi5nZXRJZChkb2MpO1xuICByZXR1cm4gZG9jSWQgPT09IDEgPyB2b2lkIDAgOiBkb2NJZDtcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZVRleHROb2RlKG4yLCBvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBtYXNrQWxsVGV4dCxcbiAgICBtYXNrVGV4dENsYXNzLFxuICAgIHVubWFza1RleHRDbGFzcyxcbiAgICBtYXNrVGV4dFNlbGVjdG9yLFxuICAgIHVubWFza1RleHRTZWxlY3RvcixcbiAgICBtYXNrVGV4dEZuLFxuICAgIG1hc2tJbnB1dE9wdGlvbnMsXG4gICAgbWFza0lucHV0Rm4sXG4gICAgcm9vdElkXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBwYXJlbnRUYWdOYW1lID0gbjIucGFyZW50Tm9kZSAmJiBuMi5wYXJlbnROb2RlLnRhZ05hbWU7XG4gIGxldCB0ZXh0Q29udGVudCA9IG4yLnRleHRDb250ZW50O1xuICBjb25zdCBpc1N0eWxlID0gcGFyZW50VGFnTmFtZSA9PT0gXCJTVFlMRVwiID8gdHJ1ZSA6IHZvaWQgMDtcbiAgY29uc3QgaXNTY3JpcHQgPSBwYXJlbnRUYWdOYW1lID09PSBcIlNDUklQVFwiID8gdHJ1ZSA6IHZvaWQgMDtcbiAgY29uc3QgaXNUZXh0YXJlYSA9IHBhcmVudFRhZ05hbWUgPT09IFwiVEVYVEFSRUFcIiA/IHRydWUgOiB2b2lkIDA7XG4gIGlmIChpc1N0eWxlICYmIHRleHRDb250ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChuMi5uZXh0U2libGluZyB8fCBuMi5wcmV2aW91c1NpYmxpbmcpIHt9IGVsc2UgaWYgKG4yLnBhcmVudE5vZGUuc2hlZXQ/LmNzc1J1bGVzKSB7XG4gICAgICAgIHRleHRDb250ZW50ID0gc3RyaW5naWZ5U3R5bGVzaGVldChuMi5wYXJlbnROb2RlLnNoZWV0KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ2Fubm90IGdldCBDU1Mgc3R5bGVzIGZyb20gdGV4dCdzIHBhcmVudE5vZGUuIEVycm9yOiAke2Vycn1gLCBuMik7XG4gICAgfVxuICAgIHRleHRDb250ZW50ID0gYWJzb2x1dGVUb1N0eWxlc2hlZXQodGV4dENvbnRlbnQsIGdldEhyZWYob3B0aW9ucy5kb2MpKTtcbiAgfVxuICBpZiAoaXNTY3JpcHQpIHtcbiAgICB0ZXh0Q29udGVudCA9IFwiU0NSSVBUX1BMQUNFSE9MREVSXCI7XG4gIH1cbiAgY29uc3QgZm9yY2VNYXNrID0gbmVlZE1hc2tpbmdUZXh0KG4yLCBtYXNrVGV4dENsYXNzLCBtYXNrVGV4dFNlbGVjdG9yLCB1bm1hc2tUZXh0Q2xhc3MsIHVubWFza1RleHRTZWxlY3RvciwgbWFza0FsbFRleHQpO1xuICBpZiAoIWlzU3R5bGUgJiYgIWlzU2NyaXB0ICYmICFpc1RleHRhcmVhICYmIHRleHRDb250ZW50ICYmIGZvcmNlTWFzaykge1xuICAgIHRleHRDb250ZW50ID0gbWFza1RleHRGbiA/IG1hc2tUZXh0Rm4odGV4dENvbnRlbnQsIG4yLnBhcmVudEVsZW1lbnQpIDogdGV4dENvbnRlbnQucmVwbGFjZSgvW1xcU10vZywgXCIqXCIpO1xuICB9XG4gIGlmIChpc1RleHRhcmVhICYmIHRleHRDb250ZW50ICYmIChtYXNrSW5wdXRPcHRpb25zLnRleHRhcmVhIHx8IGZvcmNlTWFzaykpIHtcbiAgICB0ZXh0Q29udGVudCA9IG1hc2tJbnB1dEZuID8gbWFza0lucHV0Rm4odGV4dENvbnRlbnQsIG4yLnBhcmVudE5vZGUpIDogdGV4dENvbnRlbnQucmVwbGFjZSgvW1xcU10vZywgXCIqXCIpO1xuICB9XG4gIGlmIChwYXJlbnRUYWdOYW1lID09PSBcIk9QVElPTlwiICYmIHRleHRDb250ZW50KSB7XG4gICAgY29uc3QgaXNJbnB1dE1hc2tlZCA9IHNob3VsZE1hc2tJbnB1dCh7XG4gICAgICB0eXBlOiBudWxsLFxuICAgICAgdGFnTmFtZTogcGFyZW50VGFnTmFtZSxcbiAgICAgIG1hc2tJbnB1dE9wdGlvbnNcbiAgICB9KTtcbiAgICB0ZXh0Q29udGVudCA9IG1hc2tJbnB1dFZhbHVlKHtcbiAgICAgIGlzTWFza2VkOiBuZWVkTWFza2luZ1RleHQobjIsIG1hc2tUZXh0Q2xhc3MsIG1hc2tUZXh0U2VsZWN0b3IsIHVubWFza1RleHRDbGFzcywgdW5tYXNrVGV4dFNlbGVjdG9yLCBpc0lucHV0TWFza2VkKSxcbiAgICAgIGVsZW1lbnQ6IG4yLFxuICAgICAgdmFsdWU6IHRleHRDb250ZW50LFxuICAgICAgbWFza0lucHV0Rm5cbiAgICB9KTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHR5cGU6IE5vZGVUeXBlJDIuVGV4dCxcbiAgICB0ZXh0Q29udGVudDogdGV4dENvbnRlbnQgfHwgXCJcIixcbiAgICBpc1N0eWxlLFxuICAgIHJvb3RJZFxuICB9O1xufVxuZnVuY3Rpb24gc2VyaWFsaXplRWxlbWVudE5vZGUobjIsIG9wdGlvbnMpIHtcbiAgY29uc3Qge1xuICAgIGRvYyxcbiAgICBibG9ja0NsYXNzLFxuICAgIGJsb2NrU2VsZWN0b3IsXG4gICAgdW5ibG9ja1NlbGVjdG9yLFxuICAgIGlubGluZVN0eWxlc2hlZXQsXG4gICAgbWFza0lucHV0T3B0aW9ucyA9IHt9LFxuICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICBtYXNrSW5wdXRGbixcbiAgICBkYXRhVVJMT3B0aW9ucyA9IHt9LFxuICAgIGlubGluZUltYWdlcyxcbiAgICByZWNvcmRDYW52YXMsXG4gICAga2VlcElmcmFtZVNyY0ZuLFxuICAgIG5ld2x5QWRkZWRFbGVtZW50ID0gZmFsc2UsXG4gICAgcm9vdElkLFxuICAgIG1hc2tUZXh0Q2xhc3MsXG4gICAgdW5tYXNrVGV4dENsYXNzLFxuICAgIG1hc2tUZXh0U2VsZWN0b3IsXG4gICAgdW5tYXNrVGV4dFNlbGVjdG9yXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBuZWVkQmxvY2sgPSBfaXNCbG9ja2VkRWxlbWVudChuMiwgYmxvY2tDbGFzcywgYmxvY2tTZWxlY3RvciwgdW5ibG9ja1NlbGVjdG9yKTtcbiAgY29uc3QgdGFnTmFtZSA9IGdldFZhbGlkVGFnTmFtZSQxKG4yKTtcbiAgbGV0IGF0dHJpYnV0ZXMyID0ge307XG4gIGNvbnN0IGxlbiA9IG4yLmF0dHJpYnV0ZXMubGVuZ3RoO1xuICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgbGVuOyBpMisrKSB7XG4gICAgY29uc3QgYXR0ciA9IG4yLmF0dHJpYnV0ZXNbaTJdO1xuICAgIGlmIChhdHRyLm5hbWUgJiYgIWlnbm9yZUF0dHJpYnV0ZSh0YWdOYW1lLCBhdHRyLm5hbWUsIGF0dHIudmFsdWUpKSB7XG4gICAgICBhdHRyaWJ1dGVzMlthdHRyLm5hbWVdID0gdHJhbnNmb3JtQXR0cmlidXRlKGRvYywgdGFnTmFtZSwgdG9Mb3dlckNhc2UoYXR0ci5uYW1lKSwgYXR0ci52YWx1ZSwgbjIsIG1hc2tBdHRyaWJ1dGVGbik7XG4gICAgfVxuICB9XG4gIGlmICh0YWdOYW1lID09PSBcImxpbmtcIiAmJiBpbmxpbmVTdHlsZXNoZWV0KSB7XG4gICAgY29uc3Qgc3R5bGVzaGVldCA9IEFycmF5LmZyb20oZG9jLnN0eWxlU2hlZXRzKS5maW5kKHMyID0+IHtcbiAgICAgIHJldHVybiBzMi5ocmVmID09PSBuMi5ocmVmO1xuICAgIH0pO1xuICAgIGxldCBjc3NUZXh0ID0gbnVsbDtcbiAgICBpZiAoc3R5bGVzaGVldCkge1xuICAgICAgY3NzVGV4dCA9IHN0cmluZ2lmeVN0eWxlc2hlZXQoc3R5bGVzaGVldCk7XG4gICAgfVxuICAgIGlmIChjc3NUZXh0KSB7XG4gICAgICBhdHRyaWJ1dGVzMi5yZWwgPSBudWxsO1xuICAgICAgYXR0cmlidXRlczIuaHJlZiA9IG51bGw7XG4gICAgICBhdHRyaWJ1dGVzMi5jcm9zc29yaWdpbiA9IG51bGw7XG4gICAgICBhdHRyaWJ1dGVzMi5fY3NzVGV4dCA9IGFic29sdXRlVG9TdHlsZXNoZWV0KGNzc1RleHQsIHN0eWxlc2hlZXQuaHJlZik7XG4gICAgfVxuICB9XG4gIGlmICh0YWdOYW1lID09PSBcInN0eWxlXCIgJiYgbjIuc2hlZXQgJiZcbiAgLy8gVE9ETzogQ3VycmVudGx5IHdlIG9ubHkgdHJ5IHRvIGdldCBkeW5hbWljIHN0eWxlc2hlZXQgd2hlbiBpdCBpcyBhbiBlbXB0eSBzdHlsZSBlbGVtZW50XG4gICEobjIuaW5uZXJUZXh0IHx8IG4yLnRleHRDb250ZW50IHx8IFwiXCIpLnRyaW0oKS5sZW5ndGgpIHtcbiAgICBjb25zdCBjc3NUZXh0ID0gc3RyaW5naWZ5U3R5bGVzaGVldChuMi5zaGVldCk7XG4gICAgaWYgKGNzc1RleHQpIHtcbiAgICAgIGF0dHJpYnV0ZXMyLl9jc3NUZXh0ID0gYWJzb2x1dGVUb1N0eWxlc2hlZXQoY3NzVGV4dCwgZ2V0SHJlZihkb2MpKTtcbiAgICB9XG4gIH1cbiAgaWYgKHRhZ05hbWUgPT09IFwiaW5wdXRcIiB8fCB0YWdOYW1lID09PSBcInRleHRhcmVhXCIgfHwgdGFnTmFtZSA9PT0gXCJzZWxlY3RcIiB8fCB0YWdOYW1lID09PSBcIm9wdGlvblwiKSB7XG4gICAgY29uc3QgZWwgPSBuMjtcbiAgICBjb25zdCB0eXBlID0gZ2V0SW5wdXRUeXBlKGVsKTtcbiAgICBjb25zdCB2YWx1ZSA9IGdldElucHV0VmFsdWUoZWwsIHRvVXBwZXJDYXNlKHRhZ05hbWUpLCB0eXBlKTtcbiAgICBjb25zdCBjaGVja2VkID0gZWwuY2hlY2tlZDtcbiAgICBpZiAodHlwZSAhPT0gXCJzdWJtaXRcIiAmJiB0eXBlICE9PSBcImJ1dHRvblwiICYmIHZhbHVlKSB7XG4gICAgICBjb25zdCBmb3JjZU1hc2sgPSBuZWVkTWFza2luZ1RleHQoZWwsIG1hc2tUZXh0Q2xhc3MsIG1hc2tUZXh0U2VsZWN0b3IsIHVubWFza1RleHRDbGFzcywgdW5tYXNrVGV4dFNlbGVjdG9yLCBzaG91bGRNYXNrSW5wdXQoe1xuICAgICAgICB0eXBlLFxuICAgICAgICB0YWdOYW1lOiB0b1VwcGVyQ2FzZSh0YWdOYW1lKSxcbiAgICAgICAgbWFza0lucHV0T3B0aW9uc1xuICAgICAgfSkpO1xuICAgICAgYXR0cmlidXRlczIudmFsdWUgPSBtYXNrSW5wdXRWYWx1ZSh7XG4gICAgICAgIGlzTWFza2VkOiBmb3JjZU1hc2ssXG4gICAgICAgIGVsZW1lbnQ6IGVsLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgbWFza0lucHV0Rm5cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgYXR0cmlidXRlczIuY2hlY2tlZCA9IGNoZWNrZWQ7XG4gICAgfVxuICB9XG4gIGlmICh0YWdOYW1lID09PSBcIm9wdGlvblwiKSB7XG4gICAgaWYgKG4yLnNlbGVjdGVkICYmICFtYXNrSW5wdXRPcHRpb25zW1wic2VsZWN0XCJdKSB7XG4gICAgICBhdHRyaWJ1dGVzMi5zZWxlY3RlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSBhdHRyaWJ1dGVzMi5zZWxlY3RlZDtcbiAgICB9XG4gIH1cbiAgaWYgKHRhZ05hbWUgPT09IFwiY2FudmFzXCIgJiYgcmVjb3JkQ2FudmFzKSB7XG4gICAgaWYgKG4yLl9fY29udGV4dCA9PT0gXCIyZFwiKSB7XG4gICAgICBpZiAoIWlzMkRDYW52YXNCbGFuayhuMikpIHtcbiAgICAgICAgYXR0cmlidXRlczIucnJfZGF0YVVSTCA9IG4yLnRvRGF0YVVSTChkYXRhVVJMT3B0aW9ucy50eXBlLCBkYXRhVVJMT3B0aW9ucy5xdWFsaXR5KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEoXCJfX2NvbnRleHRcIiBpbiBuMikpIHtcbiAgICAgIGNvbnN0IGNhbnZhc0RhdGFVUkwgPSBuMi50b0RhdGFVUkwoZGF0YVVSTE9wdGlvbnMudHlwZSwgZGF0YVVSTE9wdGlvbnMucXVhbGl0eSk7XG4gICAgICBjb25zdCBibGFua0NhbnZhcyA9IGRvYy5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgYmxhbmtDYW52YXMud2lkdGggPSBuMi53aWR0aDtcbiAgICAgIGJsYW5rQ2FudmFzLmhlaWdodCA9IG4yLmhlaWdodDtcbiAgICAgIGNvbnN0IGJsYW5rQ2FudmFzRGF0YVVSTCA9IGJsYW5rQ2FudmFzLnRvRGF0YVVSTChkYXRhVVJMT3B0aW9ucy50eXBlLCBkYXRhVVJMT3B0aW9ucy5xdWFsaXR5KTtcbiAgICAgIGlmIChjYW52YXNEYXRhVVJMICE9PSBibGFua0NhbnZhc0RhdGFVUkwpIHtcbiAgICAgICAgYXR0cmlidXRlczIucnJfZGF0YVVSTCA9IGNhbnZhc0RhdGFVUkw7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICh0YWdOYW1lID09PSBcImltZ1wiICYmIGlubGluZUltYWdlcykge1xuICAgIGlmICghY2FudmFzU2VydmljZSkge1xuICAgICAgY2FudmFzU2VydmljZSA9IGRvYy5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgY2FudmFzQ3R4ID0gY2FudmFzU2VydmljZS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgfVxuICAgIGNvbnN0IGltYWdlID0gbjI7XG4gICAgY29uc3QgaW1hZ2VTcmMgPSBpbWFnZS5jdXJyZW50U3JjIHx8IGltYWdlLmdldEF0dHJpYnV0ZShcInNyY1wiKSB8fCBcIjx1bmtub3duLXNyYz5cIjtcbiAgICBjb25zdCBwcmlvckNyb3NzT3JpZ2luID0gaW1hZ2UuY3Jvc3NPcmlnaW47XG4gICAgY29uc3QgcmVjb3JkSW5saW5lSW1hZ2UgPSAoKSA9PiB7XG4gICAgICBpbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCByZWNvcmRJbmxpbmVJbWFnZSk7XG4gICAgICB0cnkge1xuICAgICAgICBjYW52YXNTZXJ2aWNlLndpZHRoID0gaW1hZ2UubmF0dXJhbFdpZHRoO1xuICAgICAgICBjYW52YXNTZXJ2aWNlLmhlaWdodCA9IGltYWdlLm5hdHVyYWxIZWlnaHQ7XG4gICAgICAgIGNhbnZhc0N0eC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xuICAgICAgICBhdHRyaWJ1dGVzMi5ycl9kYXRhVVJMID0gY2FudmFzU2VydmljZS50b0RhdGFVUkwoZGF0YVVSTE9wdGlvbnMudHlwZSwgZGF0YVVSTE9wdGlvbnMucXVhbGl0eSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGltYWdlLmNyb3NzT3JpZ2luICE9PSBcImFub255bW91c1wiKSB7XG4gICAgICAgICAgaW1hZ2UuY3Jvc3NPcmlnaW4gPSBcImFub255bW91c1wiO1xuICAgICAgICAgIGlmIChpbWFnZS5jb21wbGV0ZSAmJiBpbWFnZS5uYXR1cmFsV2lkdGggIT09IDApIHJlY29yZElubGluZUltYWdlKCk7ZWxzZSBpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCByZWNvcmRJbmxpbmVJbWFnZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgQ2Fubm90IGlubGluZSBpbWcgc3JjPSR7aW1hZ2VTcmN9ISBFcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpbWFnZS5jcm9zc09yaWdpbiA9PT0gXCJhbm9ueW1vdXNcIikge1xuICAgICAgICBwcmlvckNyb3NzT3JpZ2luID8gYXR0cmlidXRlczIuY3Jvc3NPcmlnaW4gPSBwcmlvckNyb3NzT3JpZ2luIDogaW1hZ2UucmVtb3ZlQXR0cmlidXRlKFwiY3Jvc3NvcmlnaW5cIik7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoaW1hZ2UuY29tcGxldGUgJiYgaW1hZ2UubmF0dXJhbFdpZHRoICE9PSAwKSByZWNvcmRJbmxpbmVJbWFnZSgpO2Vsc2UgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgcmVjb3JkSW5saW5lSW1hZ2UpO1xuICB9XG4gIGlmICh0YWdOYW1lID09PSBcImF1ZGlvXCIgfHwgdGFnTmFtZSA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgYXR0cmlidXRlczIucnJfbWVkaWFTdGF0ZSA9IG4yLnBhdXNlZCA/IFwicGF1c2VkXCIgOiBcInBsYXllZFwiO1xuICAgIGF0dHJpYnV0ZXMyLnJyX21lZGlhQ3VycmVudFRpbWUgPSBuMi5jdXJyZW50VGltZTtcbiAgfVxuICBpZiAoIW5ld2x5QWRkZWRFbGVtZW50KSB7XG4gICAgaWYgKG4yLnNjcm9sbExlZnQpIHtcbiAgICAgIGF0dHJpYnV0ZXMyLnJyX3Njcm9sbExlZnQgPSBuMi5zY3JvbGxMZWZ0O1xuICAgIH1cbiAgICBpZiAobjIuc2Nyb2xsVG9wKSB7XG4gICAgICBhdHRyaWJ1dGVzMi5ycl9zY3JvbGxUb3AgPSBuMi5zY3JvbGxUb3A7XG4gICAgfVxuICB9XG4gIGlmIChuZWVkQmxvY2spIHtcbiAgICBjb25zdCB7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgIH0gPSBuMi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBhdHRyaWJ1dGVzMiA9IHtcbiAgICAgIGNsYXNzOiBhdHRyaWJ1dGVzMi5jbGFzcyxcbiAgICAgIHJyX3dpZHRoOiBgJHt3aWR0aH1weGAsXG4gICAgICBycl9oZWlnaHQ6IGAke2hlaWdodH1weGBcbiAgICB9O1xuICB9XG4gIGlmICh0YWdOYW1lID09PSBcImlmcmFtZVwiICYmICFrZWVwSWZyYW1lU3JjRm4oYXR0cmlidXRlczIuc3JjKSkge1xuICAgIGlmICghbmVlZEJsb2NrICYmICFnZXRJZnJhbWVDb250ZW50RG9jdW1lbnQobjIpKSB7XG4gICAgICBhdHRyaWJ1dGVzMi5ycl9zcmMgPSBhdHRyaWJ1dGVzMi5zcmM7XG4gICAgfVxuICAgIGRlbGV0ZSBhdHRyaWJ1dGVzMi5zcmM7XG4gIH1cbiAgbGV0IGlzQ3VzdG9tRWxlbWVudDtcbiAgdHJ5IHtcbiAgICBpZiAoY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSBpc0N1c3RvbUVsZW1lbnQgPSB0cnVlO1xuICB9IGNhdGNoIChlMikge31cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBOb2RlVHlwZSQyLkVsZW1lbnQsXG4gICAgdGFnTmFtZSxcbiAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzMixcbiAgICBjaGlsZE5vZGVzOiBbXSxcbiAgICBpc1NWRzogaXNTVkdFbGVtZW50KG4yKSB8fCB2b2lkIDAsXG4gICAgbmVlZEJsb2NrLFxuICAgIHJvb3RJZCxcbiAgICBpc0N1c3RvbTogaXNDdXN0b21FbGVtZW50XG4gIH07XG59XG5mdW5jdGlvbiBsb3dlcklmRXhpc3RzKG1heWJlQXR0cikge1xuICBpZiAobWF5YmVBdHRyID09PSB2b2lkIDAgfHwgbWF5YmVBdHRyID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG1heWJlQXR0ci50b0xvd2VyQ2FzZSgpO1xuICB9XG59XG5mdW5jdGlvbiBzbGltRE9NRXhjbHVkZWQoc24sIHNsaW1ET01PcHRpb25zKSB7XG4gIGlmIChzbGltRE9NT3B0aW9ucy5jb21tZW50ICYmIHNuLnR5cGUgPT09IE5vZGVUeXBlJDIuQ29tbWVudCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKHNuLnR5cGUgPT09IE5vZGVUeXBlJDIuRWxlbWVudCkge1xuICAgIGlmIChzbGltRE9NT3B0aW9ucy5zY3JpcHQgJiYgKFxuICAgIC8vIHNjcmlwdCB0YWdcbiAgICBzbi50YWdOYW1lID09PSBcInNjcmlwdFwiIHx8XG4gICAgLy8gKG1vZHVsZSlwcmVsb2FkIGxpbmtcbiAgICBzbi50YWdOYW1lID09PSBcImxpbmtcIiAmJiAoc24uYXR0cmlidXRlcy5yZWwgPT09IFwicHJlbG9hZFwiIHx8IHNuLmF0dHJpYnV0ZXMucmVsID09PSBcIm1vZHVsZXByZWxvYWRcIikgfHxcbiAgICAvLyBwcmVmZXRjaCBsaW5rXG4gICAgc24udGFnTmFtZSA9PT0gXCJsaW5rXCIgJiYgc24uYXR0cmlidXRlcy5yZWwgPT09IFwicHJlZmV0Y2hcIiAmJiB0eXBlb2Ygc24uYXR0cmlidXRlcy5ocmVmID09PSBcInN0cmluZ1wiICYmIGV4dHJhY3RGaWxlRXh0ZW5zaW9uKHNuLmF0dHJpYnV0ZXMuaHJlZikgPT09IFwianNcIikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoc2xpbURPTU9wdGlvbnMuaGVhZEZhdmljb24gJiYgKHNuLnRhZ05hbWUgPT09IFwibGlua1wiICYmIHNuLmF0dHJpYnV0ZXMucmVsID09PSBcInNob3J0Y3V0IGljb25cIiB8fCBzbi50YWdOYW1lID09PSBcIm1ldGFcIiAmJiAobG93ZXJJZkV4aXN0cyhzbi5hdHRyaWJ1dGVzLm5hbWUpLm1hdGNoKC9ebXNhcHBsaWNhdGlvbi10aWxlKGltYWdlfGNvbG9yKSQvKSB8fCBsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMubmFtZSkgPT09IFwiYXBwbGljYXRpb24tbmFtZVwiIHx8IGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5yZWwpID09PSBcImljb25cIiB8fCBsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMucmVsKSA9PT0gXCJhcHBsZS10b3VjaC1pY29uXCIgfHwgbG93ZXJJZkV4aXN0cyhzbi5hdHRyaWJ1dGVzLnJlbCkgPT09IFwic2hvcnRjdXQgaWNvblwiKSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoc24udGFnTmFtZSA9PT0gXCJtZXRhXCIpIHtcbiAgICAgIGlmIChzbGltRE9NT3B0aW9ucy5oZWFkTWV0YURlc2NLZXl3b3JkcyAmJiBsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMubmFtZSkubWF0Y2goL15kZXNjcmlwdGlvbnxrZXl3b3JkcyQvKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoc2xpbURPTU9wdGlvbnMuaGVhZE1ldGFTb2NpYWwgJiYgKGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5wcm9wZXJ0eSkubWF0Y2goL14ob2d8dHdpdHRlcnxmYik6LykgfHxcbiAgICAgIC8vIG9nID0gb3BlbmdyYXBoIChmYWNlYm9vaylcbiAgICAgIGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5uYW1lKS5tYXRjaCgvXihvZ3x0d2l0dGVyKTovKSB8fCBsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMubmFtZSkgPT09IFwicGludGVyZXN0XCIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChzbGltRE9NT3B0aW9ucy5oZWFkTWV0YVJvYm90cyAmJiAobG93ZXJJZkV4aXN0cyhzbi5hdHRyaWJ1dGVzLm5hbWUpID09PSBcInJvYm90c1wiIHx8IGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5uYW1lKSA9PT0gXCJnb29nbGVib3RcIiB8fCBsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMubmFtZSkgPT09IFwiYmluZ2JvdFwiKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoc2xpbURPTU9wdGlvbnMuaGVhZE1ldGFIdHRwRXF1aXYgJiYgc24uYXR0cmlidXRlc1tcImh0dHAtZXF1aXZcIl0gIT09IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoc2xpbURPTU9wdGlvbnMuaGVhZE1ldGFBdXRob3JzaGlwICYmIChsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMubmFtZSkgPT09IFwiYXV0aG9yXCIgfHwgbG93ZXJJZkV4aXN0cyhzbi5hdHRyaWJ1dGVzLm5hbWUpID09PSBcImdlbmVyYXRvclwiIHx8IGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5uYW1lKSA9PT0gXCJmcmFtZXdvcmtcIiB8fCBsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMubmFtZSkgPT09IFwicHVibGlzaGVyXCIgfHwgbG93ZXJJZkV4aXN0cyhzbi5hdHRyaWJ1dGVzLm5hbWUpID09PSBcInByb2dpZFwiIHx8IGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5wcm9wZXJ0eSkubWF0Y2goL15hcnRpY2xlOi8pIHx8IGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5wcm9wZXJ0eSkubWF0Y2goL15wcm9kdWN0Oi8pKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoc2xpbURPTU9wdGlvbnMuaGVhZE1ldGFWZXJpZmljYXRpb24gJiYgKGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5uYW1lKSA9PT0gXCJnb29nbGUtc2l0ZS12ZXJpZmljYXRpb25cIiB8fCBsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMubmFtZSkgPT09IFwieWFuZGV4LXZlcmlmaWNhdGlvblwiIHx8IGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5uYW1lKSA9PT0gXCJjc3JmLXRva2VuXCIgfHwgbG93ZXJJZkV4aXN0cyhzbi5hdHRyaWJ1dGVzLm5hbWUpID09PSBcInA6ZG9tYWluX3ZlcmlmeVwiIHx8IGxvd2VySWZFeGlzdHMoc24uYXR0cmlidXRlcy5uYW1lKSA9PT0gXCJ2ZXJpZnktdjFcIiB8fCBsb3dlcklmRXhpc3RzKHNuLmF0dHJpYnV0ZXMubmFtZSkgPT09IFwidmVyaWZpY2F0aW9uXCIgfHwgbG93ZXJJZkV4aXN0cyhzbi5hdHRyaWJ1dGVzLm5hbWUpID09PSBcInNob3BpZnktY2hlY2tvdXQtYXBpLXRva2VuXCIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBzZXJpYWxpemVOb2RlV2l0aElkKG4yLCBvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBkb2MsXG4gICAgbWlycm9yOiBtaXJyb3IyLFxuICAgIGJsb2NrQ2xhc3MsXG4gICAgYmxvY2tTZWxlY3RvcixcbiAgICB1bmJsb2NrU2VsZWN0b3IsXG4gICAgbWFza0FsbFRleHQsXG4gICAgbWFza1RleHRDbGFzcyxcbiAgICB1bm1hc2tUZXh0Q2xhc3MsXG4gICAgbWFza1RleHRTZWxlY3RvcixcbiAgICB1bm1hc2tUZXh0U2VsZWN0b3IsXG4gICAgc2tpcENoaWxkID0gZmFsc2UsXG4gICAgaW5saW5lU3R5bGVzaGVldCA9IHRydWUsXG4gICAgbWFza0lucHV0T3B0aW9ucyA9IHt9LFxuICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICBtYXNrVGV4dEZuLFxuICAgIG1hc2tJbnB1dEZuLFxuICAgIHNsaW1ET01PcHRpb25zLFxuICAgIGRhdGFVUkxPcHRpb25zID0ge30sXG4gICAgaW5saW5lSW1hZ2VzID0gZmFsc2UsXG4gICAgcmVjb3JkQ2FudmFzID0gZmFsc2UsXG4gICAgb25TZXJpYWxpemUsXG4gICAgb25JZnJhbWVMb2FkLFxuICAgIGlmcmFtZUxvYWRUaW1lb3V0ID0gNWUzLFxuICAgIG9uU3R5bGVzaGVldExvYWQsXG4gICAgc3R5bGVzaGVldExvYWRUaW1lb3V0ID0gNWUzLFxuICAgIGtlZXBJZnJhbWVTcmNGbiA9ICgpID0+IGZhbHNlLFxuICAgIG5ld2x5QWRkZWRFbGVtZW50ID0gZmFsc2VcbiAgfSA9IG9wdGlvbnM7XG4gIGxldCB7XG4gICAgcHJlc2VydmVXaGl0ZVNwYWNlID0gdHJ1ZVxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgX3NlcmlhbGl6ZWROb2RlID0gc2VyaWFsaXplTm9kZShuMiwge1xuICAgIGRvYyxcbiAgICBtaXJyb3I6IG1pcnJvcjIsXG4gICAgYmxvY2tDbGFzcyxcbiAgICBibG9ja1NlbGVjdG9yLFxuICAgIG1hc2tBbGxUZXh0LFxuICAgIHVuYmxvY2tTZWxlY3RvcixcbiAgICBtYXNrVGV4dENsYXNzLFxuICAgIHVubWFza1RleHRDbGFzcyxcbiAgICBtYXNrVGV4dFNlbGVjdG9yLFxuICAgIHVubWFza1RleHRTZWxlY3RvcixcbiAgICBpbmxpbmVTdHlsZXNoZWV0LFxuICAgIG1hc2tJbnB1dE9wdGlvbnMsXG4gICAgbWFza0F0dHJpYnV0ZUZuLFxuICAgIG1hc2tUZXh0Rm4sXG4gICAgbWFza0lucHV0Rm4sXG4gICAgZGF0YVVSTE9wdGlvbnMsXG4gICAgaW5saW5lSW1hZ2VzLFxuICAgIHJlY29yZENhbnZhcyxcbiAgICBrZWVwSWZyYW1lU3JjRm4sXG4gICAgbmV3bHlBZGRlZEVsZW1lbnRcbiAgfSk7XG4gIGlmICghX3NlcmlhbGl6ZWROb2RlKSB7XG4gICAgY29uc29sZS53YXJuKG4yLCBcIm5vdCBzZXJpYWxpemVkXCIpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGxldCBpZDtcbiAgaWYgKG1pcnJvcjIuaGFzTm9kZShuMikpIHtcbiAgICBpZCA9IG1pcnJvcjIuZ2V0SWQobjIpO1xuICB9IGVsc2UgaWYgKHNsaW1ET01FeGNsdWRlZChfc2VyaWFsaXplZE5vZGUsIHNsaW1ET01PcHRpb25zKSB8fCAhcHJlc2VydmVXaGl0ZVNwYWNlICYmIF9zZXJpYWxpemVkTm9kZS50eXBlID09PSBOb2RlVHlwZSQyLlRleHQgJiYgIV9zZXJpYWxpemVkTm9kZS5pc1N0eWxlICYmICFfc2VyaWFsaXplZE5vZGUudGV4dENvbnRlbnQucmVwbGFjZSgvXlxccyt8XFxzKyQvZ20sIFwiXCIpLmxlbmd0aCkge1xuICAgIGlkID0gSUdOT1JFRF9OT0RFO1xuICB9IGVsc2Uge1xuICAgIGlkID0gZ2VuSWQoKTtcbiAgfVxuICBjb25zdCBzZXJpYWxpemVkTm9kZTIgPSBPYmplY3QuYXNzaWduKF9zZXJpYWxpemVkTm9kZSwge1xuICAgIGlkXG4gIH0pO1xuICBtaXJyb3IyLmFkZChuMiwgc2VyaWFsaXplZE5vZGUyKTtcbiAgaWYgKGlkID09PSBJR05PUkVEX05PREUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAob25TZXJpYWxpemUpIHtcbiAgICBvblNlcmlhbGl6ZShuMik7XG4gIH1cbiAgbGV0IHJlY29yZENoaWxkID0gIXNraXBDaGlsZDtcbiAgaWYgKHNlcmlhbGl6ZWROb2RlMi50eXBlID09PSBOb2RlVHlwZSQyLkVsZW1lbnQpIHtcbiAgICByZWNvcmRDaGlsZCA9IHJlY29yZENoaWxkICYmICFzZXJpYWxpemVkTm9kZTIubmVlZEJsb2NrO1xuICAgIGRlbGV0ZSBzZXJpYWxpemVkTm9kZTIubmVlZEJsb2NrO1xuICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSBuMi5zaGFkb3dSb290O1xuICAgIGlmIChzaGFkb3dSb290ICYmIGlzTmF0aXZlU2hhZG93RG9tKHNoYWRvd1Jvb3QpKSBzZXJpYWxpemVkTm9kZTIuaXNTaGFkb3dIb3N0ID0gdHJ1ZTtcbiAgfVxuICBpZiAoKHNlcmlhbGl6ZWROb2RlMi50eXBlID09PSBOb2RlVHlwZSQyLkRvY3VtZW50IHx8IHNlcmlhbGl6ZWROb2RlMi50eXBlID09PSBOb2RlVHlwZSQyLkVsZW1lbnQpICYmIHJlY29yZENoaWxkKSB7XG4gICAgaWYgKHNsaW1ET01PcHRpb25zLmhlYWRXaGl0ZXNwYWNlICYmIHNlcmlhbGl6ZWROb2RlMi50eXBlID09PSBOb2RlVHlwZSQyLkVsZW1lbnQgJiYgc2VyaWFsaXplZE5vZGUyLnRhZ05hbWUgPT09IFwiaGVhZFwiKSB7XG4gICAgICBwcmVzZXJ2ZVdoaXRlU3BhY2UgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgYnlwYXNzT3B0aW9ucyA9IHtcbiAgICAgIGRvYyxcbiAgICAgIG1pcnJvcjogbWlycm9yMixcbiAgICAgIGJsb2NrQ2xhc3MsXG4gICAgICBibG9ja1NlbGVjdG9yLFxuICAgICAgbWFza0FsbFRleHQsXG4gICAgICB1bmJsb2NrU2VsZWN0b3IsXG4gICAgICBtYXNrVGV4dENsYXNzLFxuICAgICAgdW5tYXNrVGV4dENsYXNzLFxuICAgICAgbWFza1RleHRTZWxlY3RvcixcbiAgICAgIHVubWFza1RleHRTZWxlY3RvcixcbiAgICAgIHNraXBDaGlsZCxcbiAgICAgIGlubGluZVN0eWxlc2hlZXQsXG4gICAgICBtYXNrSW5wdXRPcHRpb25zLFxuICAgICAgbWFza0F0dHJpYnV0ZUZuLFxuICAgICAgbWFza1RleHRGbixcbiAgICAgIG1hc2tJbnB1dEZuLFxuICAgICAgc2xpbURPTU9wdGlvbnMsXG4gICAgICBkYXRhVVJMT3B0aW9ucyxcbiAgICAgIGlubGluZUltYWdlcyxcbiAgICAgIHJlY29yZENhbnZhcyxcbiAgICAgIHByZXNlcnZlV2hpdGVTcGFjZSxcbiAgICAgIG9uU2VyaWFsaXplLFxuICAgICAgb25JZnJhbWVMb2FkLFxuICAgICAgaWZyYW1lTG9hZFRpbWVvdXQsXG4gICAgICBvblN0eWxlc2hlZXRMb2FkLFxuICAgICAgc3R5bGVzaGVldExvYWRUaW1lb3V0LFxuICAgICAga2VlcElmcmFtZVNyY0ZuXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IGNoaWxkTiBvZiBBcnJheS5mcm9tKG4yLmNoaWxkTm9kZXMpKSB7XG4gICAgICBjb25zdCBzZXJpYWxpemVkQ2hpbGROb2RlID0gc2VyaWFsaXplTm9kZVdpdGhJZChjaGlsZE4sIGJ5cGFzc09wdGlvbnMpO1xuICAgICAgaWYgKHNlcmlhbGl6ZWRDaGlsZE5vZGUpIHtcbiAgICAgICAgc2VyaWFsaXplZE5vZGUyLmNoaWxkTm9kZXMucHVzaChzZXJpYWxpemVkQ2hpbGROb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRWxlbWVudCQxKG4yKSAmJiBuMi5zaGFkb3dSb290KSB7XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkTiBvZiBBcnJheS5mcm9tKG4yLnNoYWRvd1Jvb3QuY2hpbGROb2RlcykpIHtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZENoaWxkTm9kZSA9IHNlcmlhbGl6ZU5vZGVXaXRoSWQoY2hpbGROLCBieXBhc3NPcHRpb25zKTtcbiAgICAgICAgaWYgKHNlcmlhbGl6ZWRDaGlsZE5vZGUpIHtcbiAgICAgICAgICBpc05hdGl2ZVNoYWRvd0RvbShuMi5zaGFkb3dSb290KSAmJiAoc2VyaWFsaXplZENoaWxkTm9kZS5pc1NoYWRvdyA9IHRydWUpO1xuICAgICAgICAgIHNlcmlhbGl6ZWROb2RlMi5jaGlsZE5vZGVzLnB1c2goc2VyaWFsaXplZENoaWxkTm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKG4yLnBhcmVudE5vZGUgJiYgaXNTaGFkb3dSb290KG4yLnBhcmVudE5vZGUpICYmIGlzTmF0aXZlU2hhZG93RG9tKG4yLnBhcmVudE5vZGUpKSB7XG4gICAgc2VyaWFsaXplZE5vZGUyLmlzU2hhZG93ID0gdHJ1ZTtcbiAgfVxuICBpZiAoc2VyaWFsaXplZE5vZGUyLnR5cGUgPT09IE5vZGVUeXBlJDIuRWxlbWVudCAmJiBzZXJpYWxpemVkTm9kZTIudGFnTmFtZSA9PT0gXCJpZnJhbWVcIiAmJiAhX2lzQmxvY2tlZEVsZW1lbnQobjIsIGJsb2NrQ2xhc3MsIGJsb2NrU2VsZWN0b3IsIHVuYmxvY2tTZWxlY3RvcikpIHtcbiAgICBvbmNlSWZyYW1lTG9hZGVkKG4yLCAoKSA9PiB7XG4gICAgICBjb25zdCBpZnJhbWVEb2MgPSBnZXRJZnJhbWVDb250ZW50RG9jdW1lbnQobjIpO1xuICAgICAgaWYgKGlmcmFtZURvYyAmJiBvbklmcmFtZUxvYWQpIHtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZElmcmFtZU5vZGUgPSBzZXJpYWxpemVOb2RlV2l0aElkKGlmcmFtZURvYywge1xuICAgICAgICAgIGRvYzogaWZyYW1lRG9jLFxuICAgICAgICAgIG1pcnJvcjogbWlycm9yMixcbiAgICAgICAgICBibG9ja0NsYXNzLFxuICAgICAgICAgIGJsb2NrU2VsZWN0b3IsXG4gICAgICAgICAgdW5ibG9ja1NlbGVjdG9yLFxuICAgICAgICAgIG1hc2tBbGxUZXh0LFxuICAgICAgICAgIG1hc2tUZXh0Q2xhc3MsXG4gICAgICAgICAgdW5tYXNrVGV4dENsYXNzLFxuICAgICAgICAgIG1hc2tUZXh0U2VsZWN0b3IsXG4gICAgICAgICAgdW5tYXNrVGV4dFNlbGVjdG9yLFxuICAgICAgICAgIHNraXBDaGlsZDogZmFsc2UsXG4gICAgICAgICAgaW5saW5lU3R5bGVzaGVldCxcbiAgICAgICAgICBtYXNrSW5wdXRPcHRpb25zLFxuICAgICAgICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICAgICAgICBtYXNrVGV4dEZuLFxuICAgICAgICAgIG1hc2tJbnB1dEZuLFxuICAgICAgICAgIHNsaW1ET01PcHRpb25zLFxuICAgICAgICAgIGRhdGFVUkxPcHRpb25zLFxuICAgICAgICAgIGlubGluZUltYWdlcyxcbiAgICAgICAgICByZWNvcmRDYW52YXMsXG4gICAgICAgICAgcHJlc2VydmVXaGl0ZVNwYWNlLFxuICAgICAgICAgIG9uU2VyaWFsaXplLFxuICAgICAgICAgIG9uSWZyYW1lTG9hZCxcbiAgICAgICAgICBpZnJhbWVMb2FkVGltZW91dCxcbiAgICAgICAgICBvblN0eWxlc2hlZXRMb2FkLFxuICAgICAgICAgIHN0eWxlc2hlZXRMb2FkVGltZW91dCxcbiAgICAgICAgICBrZWVwSWZyYW1lU3JjRm5cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzZXJpYWxpemVkSWZyYW1lTm9kZSkge1xuICAgICAgICAgIG9uSWZyYW1lTG9hZChuMiwgc2VyaWFsaXplZElmcmFtZU5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgaWZyYW1lTG9hZFRpbWVvdXQpO1xuICB9XG4gIGlmIChzZXJpYWxpemVkTm9kZTIudHlwZSA9PT0gTm9kZVR5cGUkMi5FbGVtZW50ICYmIHNlcmlhbGl6ZWROb2RlMi50YWdOYW1lID09PSBcImxpbmtcIiAmJiB0eXBlb2Ygc2VyaWFsaXplZE5vZGUyLmF0dHJpYnV0ZXMucmVsID09PSBcInN0cmluZ1wiICYmIChzZXJpYWxpemVkTm9kZTIuYXR0cmlidXRlcy5yZWwgPT09IFwic3R5bGVzaGVldFwiIHx8IHNlcmlhbGl6ZWROb2RlMi5hdHRyaWJ1dGVzLnJlbCA9PT0gXCJwcmVsb2FkXCIgJiYgdHlwZW9mIHNlcmlhbGl6ZWROb2RlMi5hdHRyaWJ1dGVzLmhyZWYgPT09IFwic3RyaW5nXCIgJiYgZXh0cmFjdEZpbGVFeHRlbnNpb24oc2VyaWFsaXplZE5vZGUyLmF0dHJpYnV0ZXMuaHJlZikgPT09IFwiY3NzXCIpKSB7XG4gICAgb25jZVN0eWxlc2hlZXRMb2FkZWQobjIsICgpID0+IHtcbiAgICAgIGlmIChvblN0eWxlc2hlZXRMb2FkKSB7XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRMaW5rTm9kZSA9IHNlcmlhbGl6ZU5vZGVXaXRoSWQobjIsIHtcbiAgICAgICAgICBkb2MsXG4gICAgICAgICAgbWlycm9yOiBtaXJyb3IyLFxuICAgICAgICAgIGJsb2NrQ2xhc3MsXG4gICAgICAgICAgYmxvY2tTZWxlY3RvcixcbiAgICAgICAgICB1bmJsb2NrU2VsZWN0b3IsXG4gICAgICAgICAgbWFza0FsbFRleHQsXG4gICAgICAgICAgbWFza1RleHRDbGFzcyxcbiAgICAgICAgICB1bm1hc2tUZXh0Q2xhc3MsXG4gICAgICAgICAgbWFza1RleHRTZWxlY3RvcixcbiAgICAgICAgICB1bm1hc2tUZXh0U2VsZWN0b3IsXG4gICAgICAgICAgc2tpcENoaWxkOiBmYWxzZSxcbiAgICAgICAgICBpbmxpbmVTdHlsZXNoZWV0LFxuICAgICAgICAgIG1hc2tJbnB1dE9wdGlvbnMsXG4gICAgICAgICAgbWFza0F0dHJpYnV0ZUZuLFxuICAgICAgICAgIG1hc2tUZXh0Rm4sXG4gICAgICAgICAgbWFza0lucHV0Rm4sXG4gICAgICAgICAgc2xpbURPTU9wdGlvbnMsXG4gICAgICAgICAgZGF0YVVSTE9wdGlvbnMsXG4gICAgICAgICAgaW5saW5lSW1hZ2VzLFxuICAgICAgICAgIHJlY29yZENhbnZhcyxcbiAgICAgICAgICBwcmVzZXJ2ZVdoaXRlU3BhY2UsXG4gICAgICAgICAgb25TZXJpYWxpemUsXG4gICAgICAgICAgb25JZnJhbWVMb2FkLFxuICAgICAgICAgIGlmcmFtZUxvYWRUaW1lb3V0LFxuICAgICAgICAgIG9uU3R5bGVzaGVldExvYWQsXG4gICAgICAgICAgc3R5bGVzaGVldExvYWRUaW1lb3V0LFxuICAgICAgICAgIGtlZXBJZnJhbWVTcmNGblxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNlcmlhbGl6ZWRMaW5rTm9kZSkge1xuICAgICAgICAgIG9uU3R5bGVzaGVldExvYWQobjIsIHNlcmlhbGl6ZWRMaW5rTm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBzdHlsZXNoZWV0TG9hZFRpbWVvdXQpO1xuICB9XG4gIHJldHVybiBzZXJpYWxpemVkTm9kZTI7XG59XG5mdW5jdGlvbiBzbmFwc2hvdChuMiwgb3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgbWlycm9yOiBtaXJyb3IyID0gbmV3IE1pcnJvcigpLFxuICAgIGJsb2NrQ2xhc3MgPSBcInJyLWJsb2NrXCIsXG4gICAgYmxvY2tTZWxlY3RvciA9IG51bGwsXG4gICAgdW5ibG9ja1NlbGVjdG9yID0gbnVsbCxcbiAgICBtYXNrQWxsVGV4dCA9IGZhbHNlLFxuICAgIG1hc2tUZXh0Q2xhc3MgPSBcInJyLW1hc2tcIixcbiAgICB1bm1hc2tUZXh0Q2xhc3MgPSBudWxsLFxuICAgIG1hc2tUZXh0U2VsZWN0b3IgPSBudWxsLFxuICAgIHVubWFza1RleHRTZWxlY3RvciA9IG51bGwsXG4gICAgaW5saW5lU3R5bGVzaGVldCA9IHRydWUsXG4gICAgaW5saW5lSW1hZ2VzID0gZmFsc2UsXG4gICAgcmVjb3JkQ2FudmFzID0gZmFsc2UsXG4gICAgbWFza0FsbElucHV0cyA9IGZhbHNlLFxuICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICBtYXNrVGV4dEZuLFxuICAgIG1hc2tJbnB1dEZuLFxuICAgIHNsaW1ET00gPSBmYWxzZSxcbiAgICBkYXRhVVJMT3B0aW9ucyxcbiAgICBwcmVzZXJ2ZVdoaXRlU3BhY2UsXG4gICAgb25TZXJpYWxpemUsXG4gICAgb25JZnJhbWVMb2FkLFxuICAgIGlmcmFtZUxvYWRUaW1lb3V0LFxuICAgIG9uU3R5bGVzaGVldExvYWQsXG4gICAgc3R5bGVzaGVldExvYWRUaW1lb3V0LFxuICAgIGtlZXBJZnJhbWVTcmNGbiA9ICgpID0+IGZhbHNlXG4gIH0gPSBvcHRpb25zIHx8IHt9O1xuICBjb25zdCBtYXNrSW5wdXRPcHRpb25zID0gbWFza0FsbElucHV0cyA9PT0gdHJ1ZSA/IHtcbiAgICBjb2xvcjogdHJ1ZSxcbiAgICBkYXRlOiB0cnVlLFxuICAgIFwiZGF0ZXRpbWUtbG9jYWxcIjogdHJ1ZSxcbiAgICBlbWFpbDogdHJ1ZSxcbiAgICBtb250aDogdHJ1ZSxcbiAgICBudW1iZXI6IHRydWUsXG4gICAgcmFuZ2U6IHRydWUsXG4gICAgc2VhcmNoOiB0cnVlLFxuICAgIHRlbDogdHJ1ZSxcbiAgICB0ZXh0OiB0cnVlLFxuICAgIHRpbWU6IHRydWUsXG4gICAgdXJsOiB0cnVlLFxuICAgIHdlZWs6IHRydWUsXG4gICAgdGV4dGFyZWE6IHRydWUsXG4gICAgc2VsZWN0OiB0cnVlXG4gIH0gOiBtYXNrQWxsSW5wdXRzID09PSBmYWxzZSA/IHt9IDogbWFza0FsbElucHV0cztcbiAgY29uc3Qgc2xpbURPTU9wdGlvbnMgPSBzbGltRE9NID09PSB0cnVlIHx8IHNsaW1ET00gPT09IFwiYWxsXCIgP1xuICAvLyBpZiB0cnVlOiBzZXQgb2Ygc2Vuc2libGUgb3B0aW9ucyB0aGF0IHNob3VsZCBub3QgdGhyb3cgYXdheSBhbnkgaW5mb3JtYXRpb25cbiAge1xuICAgIHNjcmlwdDogdHJ1ZSxcbiAgICBjb21tZW50OiB0cnVlLFxuICAgIGhlYWRGYXZpY29uOiB0cnVlLFxuICAgIGhlYWRXaGl0ZXNwYWNlOiB0cnVlLFxuICAgIGhlYWRNZXRhRGVzY0tleXdvcmRzOiBzbGltRE9NID09PSBcImFsbFwiLFxuICAgIC8vIGRlc3RydWN0aXZlXG4gICAgaGVhZE1ldGFTb2NpYWw6IHRydWUsXG4gICAgaGVhZE1ldGFSb2JvdHM6IHRydWUsXG4gICAgaGVhZE1ldGFIdHRwRXF1aXY6IHRydWUsXG4gICAgaGVhZE1ldGFBdXRob3JzaGlwOiB0cnVlLFxuICAgIGhlYWRNZXRhVmVyaWZpY2F0aW9uOiB0cnVlXG4gIH0gOiBzbGltRE9NID09PSBmYWxzZSA/IHt9IDogc2xpbURPTTtcbiAgcmV0dXJuIHNlcmlhbGl6ZU5vZGVXaXRoSWQobjIsIHtcbiAgICBkb2M6IG4yLFxuICAgIG1pcnJvcjogbWlycm9yMixcbiAgICBibG9ja0NsYXNzLFxuICAgIGJsb2NrU2VsZWN0b3IsXG4gICAgdW5ibG9ja1NlbGVjdG9yLFxuICAgIG1hc2tBbGxUZXh0LFxuICAgIG1hc2tUZXh0Q2xhc3MsXG4gICAgdW5tYXNrVGV4dENsYXNzLFxuICAgIG1hc2tUZXh0U2VsZWN0b3IsXG4gICAgdW5tYXNrVGV4dFNlbGVjdG9yLFxuICAgIHNraXBDaGlsZDogZmFsc2UsXG4gICAgaW5saW5lU3R5bGVzaGVldCxcbiAgICBtYXNrSW5wdXRPcHRpb25zLFxuICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICBtYXNrVGV4dEZuLFxuICAgIG1hc2tJbnB1dEZuLFxuICAgIHNsaW1ET01PcHRpb25zLFxuICAgIGRhdGFVUkxPcHRpb25zLFxuICAgIGlubGluZUltYWdlcyxcbiAgICByZWNvcmRDYW52YXMsXG4gICAgcHJlc2VydmVXaGl0ZVNwYWNlLFxuICAgIG9uU2VyaWFsaXplLFxuICAgIG9uSWZyYW1lTG9hZCxcbiAgICBpZnJhbWVMb2FkVGltZW91dCxcbiAgICBvblN0eWxlc2hlZXRMb2FkLFxuICAgIHN0eWxlc2hlZXRMb2FkVGltZW91dCxcbiAgICBrZWVwSWZyYW1lU3JjRm4sXG4gICAgbmV3bHlBZGRlZEVsZW1lbnQ6IGZhbHNlXG4gIH0pO1xufVxuZnVuY3Rpb24gb24odHlwZSwgZm4sIHRhcmdldCA9IGRvY3VtZW50KSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgY2FwdHVyZTogdHJ1ZSxcbiAgICBwYXNzaXZlOiB0cnVlXG4gIH07XG4gIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBvcHRpb25zKTtcbiAgcmV0dXJuICgpID0+IHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBvcHRpb25zKTtcbn1cbmNvbnN0IERFUEFSVEVEX01JUlJPUl9BQ0NFU1NfV0FSTklORyA9IFwiUGxlYXNlIHN0b3AgaW1wb3J0IG1pcnJvciBkaXJlY3RseS4gSW5zdGVhZCBvZiB0aGF0LFxcclxcbm5vdyB5b3UgY2FuIHVzZSByZXBsYXllci5nZXRNaXJyb3IoKSB0byBhY2Nlc3MgdGhlIG1pcnJvciBpbnN0YW5jZSBvZiBhIHJlcGxheWVyLFxcclxcbm9yIHlvdSBjYW4gdXNlIHJlY29yZC5taXJyb3IgdG8gYWNjZXNzIHRoZSBtaXJyb3IgaW5zdGFuY2UgZHVyaW5nIHJlY29yZGluZy5cIjtcbmxldCBfbWlycm9yID0ge1xuICBtYXA6IHt9LFxuICBnZXRJZCgpIHtcbiAgICBjb25zb2xlLmVycm9yKERFUEFSVEVEX01JUlJPUl9BQ0NFU1NfV0FSTklORyk7XG4gICAgcmV0dXJuIC0xO1xuICB9LFxuICBnZXROb2RlKCkge1xuICAgIGNvbnNvbGUuZXJyb3IoREVQQVJURURfTUlSUk9SX0FDQ0VTU19XQVJOSU5HKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcbiAgcmVtb3ZlTm9kZUZyb21NYXAoKSB7XG4gICAgY29uc29sZS5lcnJvcihERVBBUlRFRF9NSVJST1JfQUNDRVNTX1dBUk5JTkcpO1xuICB9LFxuICBoYXMoKSB7XG4gICAgY29uc29sZS5lcnJvcihERVBBUlRFRF9NSVJST1JfQUNDRVNTX1dBUk5JTkcpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgcmVzZXQoKSB7XG4gICAgY29uc29sZS5lcnJvcihERVBBUlRFRF9NSVJST1JfQUNDRVNTX1dBUk5JTkcpO1xuICB9XG59O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LlByb3h5ICYmIHdpbmRvdy5SZWZsZWN0KSB7XG4gIF9taXJyb3IgPSBuZXcgUHJveHkoX21pcnJvciwge1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtYXBcIikge1xuICAgICAgICBjb25zb2xlLmVycm9yKERFUEFSVEVEX01JUlJPUl9BQ0NFU1NfV0FSTklORyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHRocm90dGxlJDEoZnVuYywgd2FpdCwgb3B0aW9ucyA9IHt9KSB7XG4gIGxldCB0aW1lb3V0ID0gbnVsbDtcbiAgbGV0IHByZXZpb3VzID0gMDtcbiAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHtcbiAgICAgIHByZXZpb3VzID0gbm93O1xuICAgIH1cbiAgICBjb25zdCByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcbiAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0JDIodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgfVxuICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0JDEoKCkgPT4ge1xuICAgICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogRGF0ZS5ub3coKTtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9LCByZW1haW5pbmcpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGhvb2tTZXR0ZXIodGFyZ2V0LCBrZXksIGQsIGlzUmV2b2tlZCwgd2luID0gd2luZG93KSB7XG4gIGNvbnN0IG9yaWdpbmFsID0gd2luLk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpO1xuICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBpc1Jldm9rZWQgPyBkIDoge1xuICAgIHNldCh2YWx1ZSkge1xuICAgICAgc2V0VGltZW91dCQxKCgpID0+IHtcbiAgICAgICAgZC5zZXQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICB9LCAwKTtcbiAgICAgIGlmIChvcmlnaW5hbCAmJiBvcmlnaW5hbC5zZXQpIHtcbiAgICAgICAgb3JpZ2luYWwuc2V0LmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiAoKSA9PiBob29rU2V0dGVyKHRhcmdldCwga2V5LCBvcmlnaW5hbCB8fCB7fSwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBwYXRjaChzb3VyY2UsIG5hbWUsIHJlcGxhY2VtZW50KSB7XG4gIHRyeSB7XG4gICAgaWYgKCEobmFtZSBpbiBzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge307XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbmFsID0gc291cmNlW25hbWVdO1xuICAgIGNvbnN0IHdyYXBwZWQgPSByZXBsYWNlbWVudChvcmlnaW5hbCk7XG4gICAgaWYgKHR5cGVvZiB3cmFwcGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHdyYXBwZWQucHJvdG90eXBlID0gd3JhcHBlZC5wcm90b3R5cGUgfHwge307XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh3cmFwcGVkLCB7XG4gICAgICAgIF9fcnJ3ZWJfb3JpZ2luYWxfXzoge1xuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgIHZhbHVlOiBvcmlnaW5hbFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgc291cmNlW25hbWVdID0gd3JhcHBlZDtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc291cmNlW25hbWVdID0gb3JpZ2luYWw7XG4gICAgfTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuICgpID0+IHt9O1xuICB9XG59XG5sZXQgbm93VGltZXN0YW1wID0gRGF0ZS5ub3c7XG5pZiAoISAvKiBAX19QVVJFX18gKi8vWzEtOV1bMC05XXsxMn0vLnRlc3QoRGF0ZS5ub3coKS50b1N0cmluZygpKSkge1xuICBub3dUaW1lc3RhbXAgPSAoKSA9PiAoLyogQF9fUFVSRV9fICovbmV3IERhdGUoKSkuZ2V0VGltZSgpO1xufVxuZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsKHdpbikge1xuICBjb25zdCBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gIHJldHVybiB7XG4gICAgbGVmdDogZG9jLnNjcm9sbGluZ0VsZW1lbnQgPyBkb2Muc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxMZWZ0IDogd2luLnBhZ2VYT2Zmc2V0ICE9PSB2b2lkIDAgPyB3aW4ucGFnZVhPZmZzZXQgOiBkb2M/LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvYz8uYm9keT8ucGFyZW50RWxlbWVudD8uc2Nyb2xsTGVmdCB8fCBkb2M/LmJvZHk/LnNjcm9sbExlZnQgfHwgMCxcbiAgICB0b3A6IGRvYy5zY3JvbGxpbmdFbGVtZW50ID8gZG9jLnNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wIDogd2luLnBhZ2VZT2Zmc2V0ICE9PSB2b2lkIDAgPyB3aW4ucGFnZVlPZmZzZXQgOiBkb2M/LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jPy5ib2R5Py5wYXJlbnRFbGVtZW50Py5zY3JvbGxUb3AgfHwgZG9jPy5ib2R5Py5zY3JvbGxUb3AgfHwgMFxuICB9O1xufVxuZnVuY3Rpb24gZ2V0V2luZG93SGVpZ2h0KCkge1xuICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG59XG5mdW5jdGlvbiBnZXRXaW5kb3dXaWR0aCgpIHtcbiAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xufVxuZnVuY3Rpb24gY2xvc2VzdEVsZW1lbnRPZk5vZGUkMShub2RlKSB7XG4gIGlmICghbm9kZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgZWwgPSBub2RlLm5vZGVUeXBlID09PSBub2RlLkVMRU1FTlRfTk9ERSA/IG5vZGUgOiBub2RlLnBhcmVudEVsZW1lbnQ7XG4gICAgcmV0dXJuIGVsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBpc0Jsb2NrZWQobm9kZSwgYmxvY2tDbGFzcywgYmxvY2tTZWxlY3RvciwgdW5ibG9ja1NlbGVjdG9yLCBjaGVja0FuY2VzdG9ycykge1xuICBpZiAoIW5vZGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgZWwgPSBjbG9zZXN0RWxlbWVudE9mTm9kZSQxKG5vZGUpO1xuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGJsb2NrZWRQcmVkaWNhdGUgPSBjcmVhdGVNYXRjaFByZWRpY2F0ZShibG9ja0NsYXNzLCBibG9ja1NlbGVjdG9yKTtcbiAgaWYgKCFjaGVja0FuY2VzdG9ycykge1xuICAgIGNvbnN0IGlzVW5ibG9ja2VkID0gdW5ibG9ja1NlbGVjdG9yICYmIGVsLm1hdGNoZXModW5ibG9ja1NlbGVjdG9yKTtcbiAgICByZXR1cm4gYmxvY2tlZFByZWRpY2F0ZShlbCkgJiYgIWlzVW5ibG9ja2VkO1xuICB9XG4gIGNvbnN0IGJsb2NrRGlzdGFuY2UgPSBkaXN0YW5jZVRvTWF0Y2goZWwsIGJsb2NrZWRQcmVkaWNhdGUpO1xuICBsZXQgdW5ibG9ja0Rpc3RhbmNlID0gLTE7XG4gIGlmIChibG9ja0Rpc3RhbmNlIDwgMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodW5ibG9ja1NlbGVjdG9yKSB7XG4gICAgdW5ibG9ja0Rpc3RhbmNlID0gZGlzdGFuY2VUb01hdGNoKGVsLCBjcmVhdGVNYXRjaFByZWRpY2F0ZShudWxsLCB1bmJsb2NrU2VsZWN0b3IpKTtcbiAgfVxuICBpZiAoYmxvY2tEaXN0YW5jZSA+IC0xICYmIHVuYmxvY2tEaXN0YW5jZSA8IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gYmxvY2tEaXN0YW5jZSA8IHVuYmxvY2tEaXN0YW5jZTtcbn1cbmZ1bmN0aW9uIGlzU2VyaWFsaXplZChuMiwgbWlycm9yMikge1xuICByZXR1cm4gbWlycm9yMi5nZXRJZChuMikgIT09IC0xO1xufVxuZnVuY3Rpb24gaXNJZ25vcmVkKG4yLCBtaXJyb3IyKSB7XG4gIHJldHVybiBtaXJyb3IyLmdldElkKG4yKSA9PT0gSUdOT1JFRF9OT0RFO1xufVxuZnVuY3Rpb24gaXNBbmNlc3RvclJlbW92ZWQodGFyZ2V0LCBtaXJyb3IyKSB7XG4gIGlmIChpc1NoYWRvd1Jvb3QodGFyZ2V0KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBpZCA9IG1pcnJvcjIuZ2V0SWQodGFyZ2V0KTtcbiAgaWYgKCFtaXJyb3IyLmhhcyhpZCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0LnBhcmVudE5vZGUubm9kZVR5cGUgPT09IHRhcmdldC5ET0NVTUVOVF9OT0RFKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghdGFyZ2V0LnBhcmVudE5vZGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gaXNBbmNlc3RvclJlbW92ZWQodGFyZ2V0LnBhcmVudE5vZGUsIG1pcnJvcjIpO1xufVxuZnVuY3Rpb24gbGVnYWN5X2lzVG91Y2hFdmVudChldmVudCkge1xuICByZXR1cm4gQm9vbGVhbihldmVudC5jaGFuZ2VkVG91Y2hlcyk7XG59XG5mdW5jdGlvbiBwb2x5ZmlsbCQxKHdpbiA9IHdpbmRvdykge1xuICBpZiAoXCJOb2RlTGlzdFwiIGluIHdpbiAmJiAhd2luLk5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7XG4gICAgd2luLk5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gQXJyYXkucHJvdG90eXBlLmZvckVhY2g7XG4gIH1cbiAgaWYgKFwiRE9NVG9rZW5MaXN0XCIgaW4gd2luICYmICF3aW4uRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7XG4gICAgd2luLkRPTVRva2VuTGlzdC5wcm90b3R5cGUuZm9yRWFjaCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoO1xuICB9XG4gIGlmICghTm9kZS5wcm90b3R5cGUuY29udGFpbnMpIHtcbiAgICBOb2RlLnByb3RvdHlwZS5jb250YWlucyA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBsZXQgbm9kZSA9IGFyZ3NbMF07XG4gICAgICBpZiAoISgwIGluIGFyZ3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCIxIGFyZ3VtZW50IGlzIHJlcXVpcmVkXCIpO1xuICAgICAgfVxuICAgICAgZG8ge1xuICAgICAgICBpZiAodGhpcyA9PT0gbm9kZSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IHdoaWxlIChub2RlID0gbm9kZSAmJiBub2RlLnBhcmVudE5vZGUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGlzU2VyaWFsaXplZElmcmFtZShuMiwgbWlycm9yMikge1xuICByZXR1cm4gQm9vbGVhbihuMi5ub2RlTmFtZSA9PT0gXCJJRlJBTUVcIiAmJiBtaXJyb3IyLmdldE1ldGEobjIpKTtcbn1cbmZ1bmN0aW9uIGlzU2VyaWFsaXplZFN0eWxlc2hlZXQobjIsIG1pcnJvcjIpIHtcbiAgcmV0dXJuIEJvb2xlYW4objIubm9kZU5hbWUgPT09IFwiTElOS1wiICYmIG4yLm5vZGVUeXBlID09PSBuMi5FTEVNRU5UX05PREUgJiYgbjIuZ2V0QXR0cmlidXRlICYmIG4yLmdldEF0dHJpYnV0ZShcInJlbFwiKSA9PT0gXCJzdHlsZXNoZWV0XCIgJiYgbWlycm9yMi5nZXRNZXRhKG4yKSk7XG59XG5mdW5jdGlvbiBoYXNTaGFkb3dSb290KG4yKSB7XG4gIHJldHVybiBCb29sZWFuKG4yPy5zaGFkb3dSb290KTtcbn1cbmNsYXNzIFN0eWxlU2hlZXRNaXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmlkID0gMTtcbiAgICB0aGlzLnN0eWxlSURNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuICAgIHRoaXMuaWRTdHlsZU1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBNYXAoKTtcbiAgfVxuICBnZXRJZChzdHlsZXNoZWV0KSB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGVJRE1hcC5nZXQoc3R5bGVzaGVldCkgPz8gLTE7XG4gIH1cbiAgaGFzKHN0eWxlc2hlZXQpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZUlETWFwLmhhcyhzdHlsZXNoZWV0KTtcbiAgfVxuICAvKipcbiAgICogQHJldHVybnMgSWYgdGhlIHN0eWxlc2hlZXQgaXMgaW4gdGhlIG1pcnJvciwgcmV0dXJucyB0aGUgaWQgb2YgdGhlIHN0eWxlc2hlZXQuIElmIG5vdCwgcmV0dXJuIHRoZSBuZXcgYXNzaWduZWQgaWQuXG4gICAqL1xuICBhZGQoc3R5bGVzaGVldCwgaWQpIHtcbiAgICBpZiAodGhpcy5oYXMoc3R5bGVzaGVldCkpIHJldHVybiB0aGlzLmdldElkKHN0eWxlc2hlZXQpO1xuICAgIGxldCBuZXdJZDtcbiAgICBpZiAoaWQgPT09IHZvaWQgMCkge1xuICAgICAgbmV3SWQgPSB0aGlzLmlkKys7XG4gICAgfSBlbHNlIG5ld0lkID0gaWQ7XG4gICAgdGhpcy5zdHlsZUlETWFwLnNldChzdHlsZXNoZWV0LCBuZXdJZCk7XG4gICAgdGhpcy5pZFN0eWxlTWFwLnNldChuZXdJZCwgc3R5bGVzaGVldCk7XG4gICAgcmV0dXJuIG5ld0lkO1xuICB9XG4gIGdldFN0eWxlKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRTdHlsZU1hcC5nZXQoaWQpIHx8IG51bGw7XG4gIH1cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5zdHlsZUlETWFwID0gLyogQF9fUFVSRV9fICovbmV3IFdlYWtNYXAoKTtcbiAgICB0aGlzLmlkU3R5bGVNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgTWFwKCk7XG4gICAgdGhpcy5pZCA9IDE7XG4gIH1cbiAgZ2VuZXJhdGVJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pZCsrO1xuICB9XG59XG5mdW5jdGlvbiBnZXRTaGFkb3dIb3N0KG4yKSB7XG4gIGxldCBzaGFkb3dIb3N0ID0gbnVsbDtcbiAgaWYgKG4yLmdldFJvb3ROb2RlPy4oKT8ubm9kZVR5cGUgPT09IE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAmJiBuMi5nZXRSb290Tm9kZSgpLmhvc3QpIHNoYWRvd0hvc3QgPSBuMi5nZXRSb290Tm9kZSgpLmhvc3Q7XG4gIHJldHVybiBzaGFkb3dIb3N0O1xufVxuZnVuY3Rpb24gZ2V0Um9vdFNoYWRvd0hvc3QobjIpIHtcbiAgbGV0IHJvb3RTaGFkb3dIb3N0ID0gbjI7XG4gIGxldCBzaGFkb3dIb3N0O1xuICB3aGlsZSAoc2hhZG93SG9zdCA9IGdldFNoYWRvd0hvc3Qocm9vdFNoYWRvd0hvc3QpKSByb290U2hhZG93SG9zdCA9IHNoYWRvd0hvc3Q7XG4gIHJldHVybiByb290U2hhZG93SG9zdDtcbn1cbmZ1bmN0aW9uIHNoYWRvd0hvc3RJbkRvbShuMikge1xuICBjb25zdCBkb2MgPSBuMi5vd25lckRvY3VtZW50O1xuICBpZiAoIWRvYykgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBzaGFkb3dIb3N0ID0gZ2V0Um9vdFNoYWRvd0hvc3QobjIpO1xuICByZXR1cm4gZG9jLmNvbnRhaW5zKHNoYWRvd0hvc3QpO1xufVxuZnVuY3Rpb24gaW5Eb20objIpIHtcbiAgY29uc3QgZG9jID0gbjIub3duZXJEb2N1bWVudDtcbiAgaWYgKCFkb2MpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGRvYy5jb250YWlucyhuMikgfHwgc2hhZG93SG9zdEluRG9tKG4yKTtcbn1cbmNvbnN0IGNhY2hlZEltcGxlbWVudGF0aW9ucyA9IHt9O1xuZnVuY3Rpb24gZ2V0SW1wbGVtZW50YXRpb24obmFtZSkge1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZWRJbXBsZW1lbnRhdGlvbnNbbmFtZV07XG4gIGlmIChjYWNoZWQpIHtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIGNvbnN0IGRvY3VtZW50MiA9IHdpbmRvdy5kb2N1bWVudDtcbiAgbGV0IGltcGwgPSB3aW5kb3dbbmFtZV07XG4gIGlmIChkb2N1bWVudDIgJiYgdHlwZW9mIGRvY3VtZW50Mi5jcmVhdGVFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2FuZGJveCA9IGRvY3VtZW50Mi5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuICAgICAgc2FuZGJveC5oaWRkZW4gPSB0cnVlO1xuICAgICAgZG9jdW1lbnQyLmhlYWQuYXBwZW5kQ2hpbGQoc2FuZGJveCk7XG4gICAgICBjb25zdCBjb250ZW50V2luZG93ID0gc2FuZGJveC5jb250ZW50V2luZG93O1xuICAgICAgaWYgKGNvbnRlbnRXaW5kb3cgJiYgY29udGVudFdpbmRvd1tuYW1lXSkge1xuICAgICAgICBpbXBsID1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmJvdW5kLW1ldGhvZFxuICAgICAgICBjb250ZW50V2luZG93W25hbWVdO1xuICAgICAgfVxuICAgICAgZG9jdW1lbnQyLmhlYWQucmVtb3ZlQ2hpbGQoc2FuZGJveCk7XG4gICAgfSBjYXRjaCAoZTIpIHt9XG4gIH1cbiAgcmV0dXJuIGNhY2hlZEltcGxlbWVudGF0aW9uc1tuYW1lXSA9IGltcGwuYmluZCh3aW5kb3cpO1xufVxuZnVuY3Rpb24gb25SZXF1ZXN0QW5pbWF0aW9uRnJhbWUoLi4ucmVzdCkge1xuICByZXR1cm4gZ2V0SW1wbGVtZW50YXRpb24oXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIikoLi4ucmVzdCk7XG59XG5mdW5jdGlvbiBzZXRUaW1lb3V0JDEoLi4ucmVzdCkge1xuICByZXR1cm4gZ2V0SW1wbGVtZW50YXRpb24oXCJzZXRUaW1lb3V0XCIpKC4uLnJlc3QpO1xufVxuZnVuY3Rpb24gY2xlYXJUaW1lb3V0JDIoLi4ucmVzdCkge1xuICByZXR1cm4gZ2V0SW1wbGVtZW50YXRpb24oXCJjbGVhclRpbWVvdXRcIikoLi4ucmVzdCk7XG59XG52YXIgRXZlbnRUeXBlID0gLyogQF9fUFVSRV9fICovKEV2ZW50VHlwZTIgPT4ge1xuICBFdmVudFR5cGUyW0V2ZW50VHlwZTJbXCJEb21Db250ZW50TG9hZGVkXCJdID0gMF0gPSBcIkRvbUNvbnRlbnRMb2FkZWRcIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiTG9hZFwiXSA9IDFdID0gXCJMb2FkXCI7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIkZ1bGxTbmFwc2hvdFwiXSA9IDJdID0gXCJGdWxsU25hcHNob3RcIjtcbiAgRXZlbnRUeXBlMltFdmVudFR5cGUyW1wiSW5jcmVtZW50YWxTbmFwc2hvdFwiXSA9IDNdID0gXCJJbmNyZW1lbnRhbFNuYXBzaG90XCI7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIk1ldGFcIl0gPSA0XSA9IFwiTWV0YVwiO1xuICBFdmVudFR5cGUyW0V2ZW50VHlwZTJbXCJDdXN0b21cIl0gPSA1XSA9IFwiQ3VzdG9tXCI7XG4gIEV2ZW50VHlwZTJbRXZlbnRUeXBlMltcIlBsdWdpblwiXSA9IDZdID0gXCJQbHVnaW5cIjtcbiAgcmV0dXJuIEV2ZW50VHlwZTI7XG59KShFdmVudFR5cGUgfHwge30pO1xudmFyIEluY3JlbWVudGFsU291cmNlID0gLyogQF9fUFVSRV9fICovKEluY3JlbWVudGFsU291cmNlMiA9PiB7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJNdXRhdGlvblwiXSA9IDBdID0gXCJNdXRhdGlvblwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiTW91c2VNb3ZlXCJdID0gMV0gPSBcIk1vdXNlTW92ZVwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiTW91c2VJbnRlcmFjdGlvblwiXSA9IDJdID0gXCJNb3VzZUludGVyYWN0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJTY3JvbGxcIl0gPSAzXSA9IFwiU2Nyb2xsXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJWaWV3cG9ydFJlc2l6ZVwiXSA9IDRdID0gXCJWaWV3cG9ydFJlc2l6ZVwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiSW5wdXRcIl0gPSA1XSA9IFwiSW5wdXRcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIlRvdWNoTW92ZVwiXSA9IDZdID0gXCJUb3VjaE1vdmVcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIk1lZGlhSW50ZXJhY3Rpb25cIl0gPSA3XSA9IFwiTWVkaWFJbnRlcmFjdGlvblwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiU3R5bGVTaGVldFJ1bGVcIl0gPSA4XSA9IFwiU3R5bGVTaGVldFJ1bGVcIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIkNhbnZhc011dGF0aW9uXCJdID0gOV0gPSBcIkNhbnZhc011dGF0aW9uXCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJGb250XCJdID0gMTBdID0gXCJGb250XCI7XG4gIEluY3JlbWVudGFsU291cmNlMltJbmNyZW1lbnRhbFNvdXJjZTJbXCJMb2dcIl0gPSAxMV0gPSBcIkxvZ1wiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiRHJhZ1wiXSA9IDEyXSA9IFwiRHJhZ1wiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiU3R5bGVEZWNsYXJhdGlvblwiXSA9IDEzXSA9IFwiU3R5bGVEZWNsYXJhdGlvblwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiU2VsZWN0aW9uXCJdID0gMTRdID0gXCJTZWxlY3Rpb25cIjtcbiAgSW5jcmVtZW50YWxTb3VyY2UyW0luY3JlbWVudGFsU291cmNlMltcIkFkb3B0ZWRTdHlsZVNoZWV0XCJdID0gMTVdID0gXCJBZG9wdGVkU3R5bGVTaGVldFwiO1xuICBJbmNyZW1lbnRhbFNvdXJjZTJbSW5jcmVtZW50YWxTb3VyY2UyW1wiQ3VzdG9tRWxlbWVudFwiXSA9IDE2XSA9IFwiQ3VzdG9tRWxlbWVudFwiO1xuICByZXR1cm4gSW5jcmVtZW50YWxTb3VyY2UyO1xufSkoSW5jcmVtZW50YWxTb3VyY2UgfHwge30pO1xudmFyIE1vdXNlSW50ZXJhY3Rpb25zID0gLyogQF9fUFVSRV9fICovKE1vdXNlSW50ZXJhY3Rpb25zMiA9PiB7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJNb3VzZVVwXCJdID0gMF0gPSBcIk1vdXNlVXBcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIk1vdXNlRG93blwiXSA9IDFdID0gXCJNb3VzZURvd25cIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIkNsaWNrXCJdID0gMl0gPSBcIkNsaWNrXCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJDb250ZXh0TWVudVwiXSA9IDNdID0gXCJDb250ZXh0TWVudVwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiRGJsQ2xpY2tcIl0gPSA0XSA9IFwiRGJsQ2xpY2tcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIkZvY3VzXCJdID0gNV0gPSBcIkZvY3VzXCI7XG4gIE1vdXNlSW50ZXJhY3Rpb25zMltNb3VzZUludGVyYWN0aW9uczJbXCJCbHVyXCJdID0gNl0gPSBcIkJsdXJcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIlRvdWNoU3RhcnRcIl0gPSA3XSA9IFwiVG91Y2hTdGFydFwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiVG91Y2hNb3ZlX0RlcGFydGVkXCJdID0gOF0gPSBcIlRvdWNoTW92ZV9EZXBhcnRlZFwiO1xuICBNb3VzZUludGVyYWN0aW9uczJbTW91c2VJbnRlcmFjdGlvbnMyW1wiVG91Y2hFbmRcIl0gPSA5XSA9IFwiVG91Y2hFbmRcIjtcbiAgTW91c2VJbnRlcmFjdGlvbnMyW01vdXNlSW50ZXJhY3Rpb25zMltcIlRvdWNoQ2FuY2VsXCJdID0gMTBdID0gXCJUb3VjaENhbmNlbFwiO1xuICByZXR1cm4gTW91c2VJbnRlcmFjdGlvbnMyO1xufSkoTW91c2VJbnRlcmFjdGlvbnMgfHwge30pO1xudmFyIFBvaW50ZXJUeXBlcyA9IC8qIEBfX1BVUkVfXyAqLyhQb2ludGVyVHlwZXMyID0+IHtcbiAgUG9pbnRlclR5cGVzMltQb2ludGVyVHlwZXMyW1wiTW91c2VcIl0gPSAwXSA9IFwiTW91c2VcIjtcbiAgUG9pbnRlclR5cGVzMltQb2ludGVyVHlwZXMyW1wiUGVuXCJdID0gMV0gPSBcIlBlblwiO1xuICBQb2ludGVyVHlwZXMyW1BvaW50ZXJUeXBlczJbXCJUb3VjaFwiXSA9IDJdID0gXCJUb3VjaFwiO1xuICByZXR1cm4gUG9pbnRlclR5cGVzMjtcbn0pKFBvaW50ZXJUeXBlcyB8fCB7fSk7XG52YXIgTWVkaWFJbnRlcmFjdGlvbnMgPSAvKiBAX19QVVJFX18gKi8oTWVkaWFJbnRlcmFjdGlvbnMyID0+IHtcbiAgTWVkaWFJbnRlcmFjdGlvbnMyW01lZGlhSW50ZXJhY3Rpb25zMltcIlBsYXlcIl0gPSAwXSA9IFwiUGxheVwiO1xuICBNZWRpYUludGVyYWN0aW9uczJbTWVkaWFJbnRlcmFjdGlvbnMyW1wiUGF1c2VcIl0gPSAxXSA9IFwiUGF1c2VcIjtcbiAgTWVkaWFJbnRlcmFjdGlvbnMyW01lZGlhSW50ZXJhY3Rpb25zMltcIlNlZWtlZFwiXSA9IDJdID0gXCJTZWVrZWRcIjtcbiAgTWVkaWFJbnRlcmFjdGlvbnMyW01lZGlhSW50ZXJhY3Rpb25zMltcIlZvbHVtZUNoYW5nZVwiXSA9IDNdID0gXCJWb2x1bWVDaGFuZ2VcIjtcbiAgTWVkaWFJbnRlcmFjdGlvbnMyW01lZGlhSW50ZXJhY3Rpb25zMltcIlJhdGVDaGFuZ2VcIl0gPSA0XSA9IFwiUmF0ZUNoYW5nZVwiO1xuICByZXR1cm4gTWVkaWFJbnRlcmFjdGlvbnMyO1xufSkoTWVkaWFJbnRlcmFjdGlvbnMgfHwge30pO1xuZnVuY3Rpb24gZ2V0SUZyYW1lQ29udGVudERvY3VtZW50KGlmcmFtZSkge1xuICB0cnkge1xuICAgIHJldHVybiBpZnJhbWUuY29udGVudERvY3VtZW50O1xuICB9IGNhdGNoIChlMikge31cbn1cbmZ1bmN0aW9uIGdldElGcmFtZUNvbnRlbnRXaW5kb3coaWZyYW1lKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGlmcmFtZS5jb250ZW50V2luZG93O1xuICB9IGNhdGNoIChlMikge31cbn1cbmZ1bmN0aW9uIGlzTm9kZUluTGlua2VkTGlzdChuMikge1xuICByZXR1cm4gXCJfX2xuXCIgaW4gbjI7XG59XG5jbGFzcyBEb3VibGVMaW5rZWRMaXN0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuaGVhZCA9IG51bGw7XG4gICAgdGhpcy50YWlsID0gbnVsbDtcbiAgfVxuICBnZXQocG9zaXRpb24pIHtcbiAgICBpZiAocG9zaXRpb24gPj0gdGhpcy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlBvc2l0aW9uIG91dHNpZGUgb2YgbGlzdCByYW5nZVwiKTtcbiAgICB9XG4gICAgbGV0IGN1cnJlbnQgPSB0aGlzLmhlYWQ7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHBvc2l0aW9uOyBpbmRleCsrKSB7XG4gICAgICBjdXJyZW50ID0gY3VycmVudD8ubmV4dCB8fCBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuICBhZGROb2RlKG4yKSB7XG4gICAgY29uc3Qgbm9kZSA9IHtcbiAgICAgIHZhbHVlOiBuMixcbiAgICAgIHByZXZpb3VzOiBudWxsLFxuICAgICAgbmV4dDogbnVsbFxuICAgIH07XG4gICAgbjIuX19sbiA9IG5vZGU7XG4gICAgaWYgKG4yLnByZXZpb3VzU2libGluZyAmJiBpc05vZGVJbkxpbmtlZExpc3QobjIucHJldmlvdXNTaWJsaW5nKSkge1xuICAgICAgY29uc3QgY3VycmVudCA9IG4yLnByZXZpb3VzU2libGluZy5fX2xuLm5leHQ7XG4gICAgICBub2RlLm5leHQgPSBjdXJyZW50O1xuICAgICAgbm9kZS5wcmV2aW91cyA9IG4yLnByZXZpb3VzU2libGluZy5fX2xuO1xuICAgICAgbjIucHJldmlvdXNTaWJsaW5nLl9fbG4ubmV4dCA9IG5vZGU7XG4gICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICBjdXJyZW50LnByZXZpb3VzID0gbm9kZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG4yLm5leHRTaWJsaW5nICYmIGlzTm9kZUluTGlua2VkTGlzdChuMi5uZXh0U2libGluZykgJiYgbjIubmV4dFNpYmxpbmcuX19sbi5wcmV2aW91cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IG4yLm5leHRTaWJsaW5nLl9fbG4ucHJldmlvdXM7XG4gICAgICBub2RlLnByZXZpb3VzID0gY3VycmVudDtcbiAgICAgIG5vZGUubmV4dCA9IG4yLm5leHRTaWJsaW5nLl9fbG47XG4gICAgICBuMi5uZXh0U2libGluZy5fX2xuLnByZXZpb3VzID0gbm9kZTtcbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIGN1cnJlbnQubmV4dCA9IG5vZGU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmhlYWQpIHtcbiAgICAgICAgdGhpcy5oZWFkLnByZXZpb3VzID0gbm9kZTtcbiAgICAgIH1cbiAgICAgIG5vZGUubmV4dCA9IHRoaXMuaGVhZDtcbiAgICAgIHRoaXMuaGVhZCA9IG5vZGU7XG4gICAgfVxuICAgIGlmIChub2RlLm5leHQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMudGFpbCA9IG5vZGU7XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoKys7XG4gIH1cbiAgcmVtb3ZlTm9kZShuMikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBuMi5fX2xuO1xuICAgIGlmICghdGhpcy5oZWFkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghY3VycmVudC5wcmV2aW91cykge1xuICAgICAgdGhpcy5oZWFkID0gY3VycmVudC5uZXh0O1xuICAgICAgaWYgKHRoaXMuaGVhZCkge1xuICAgICAgICB0aGlzLmhlYWQucHJldmlvdXMgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50YWlsID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudC5wcmV2aW91cy5uZXh0ID0gY3VycmVudC5uZXh0O1xuICAgICAgaWYgKGN1cnJlbnQubmV4dCkge1xuICAgICAgICBjdXJyZW50Lm5leHQucHJldmlvdXMgPSBjdXJyZW50LnByZXZpb3VzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50YWlsID0gY3VycmVudC5wcmV2aW91cztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG4yLl9fbG4pIHtcbiAgICAgIGRlbGV0ZSBuMi5fX2xuO1xuICAgIH1cbiAgICB0aGlzLmxlbmd0aC0tO1xuICB9XG59XG5jb25zdCBtb3ZlS2V5ID0gKGlkLCBwYXJlbnRJZCkgPT4gYCR7aWR9QCR7cGFyZW50SWR9YDtcbmNsYXNzIE11dGF0aW9uQnVmZmVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5mcm96ZW4gPSBmYWxzZTtcbiAgICB0aGlzLmxvY2tlZCA9IGZhbHNlO1xuICAgIHRoaXMudGV4dHMgPSBbXTtcbiAgICB0aGlzLmF0dHJpYnV0ZXMgPSBbXTtcbiAgICB0aGlzLmF0dHJpYnV0ZU1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gICAgdGhpcy5yZW1vdmVzID0gW107XG4gICAgdGhpcy5tYXBSZW1vdmVzID0gW107XG4gICAgdGhpcy5tb3ZlZE1hcCA9IHt9O1xuICAgIHRoaXMuYWRkZWRTZXQgPSAvKiBAX19QVVJFX18gKi9uZXcgU2V0KCk7XG4gICAgdGhpcy5tb3ZlZFNldCA9IC8qIEBfX1BVUkVfXyAqL25ldyBTZXQoKTtcbiAgICB0aGlzLmRyb3BwZWRTZXQgPSAvKiBAX19QVVJFX18gKi9uZXcgU2V0KCk7XG4gICAgdGhpcy5wcm9jZXNzTXV0YXRpb25zID0gbXV0YXRpb25zID0+IHtcbiAgICAgIG11dGF0aW9ucy5mb3JFYWNoKHRoaXMucHJvY2Vzc011dGF0aW9uKTtcbiAgICAgIHRoaXMuZW1pdCgpO1xuICAgIH07XG4gICAgdGhpcy5lbWl0ID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZnJvemVuIHx8IHRoaXMubG9ja2VkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFkZHMgPSBbXTtcbiAgICAgIGNvbnN0IGFkZGVkSWRzID0gLyogQF9fUFVSRV9fICovbmV3IFNldCgpO1xuICAgICAgY29uc3QgYWRkTGlzdCA9IG5ldyBEb3VibGVMaW5rZWRMaXN0KCk7XG4gICAgICBjb25zdCBnZXROZXh0SWQgPSBuMiA9PiB7XG4gICAgICAgIGxldCBucyA9IG4yO1xuICAgICAgICBsZXQgbmV4dElkID0gSUdOT1JFRF9OT0RFO1xuICAgICAgICB3aGlsZSAobmV4dElkID09PSBJR05PUkVEX05PREUpIHtcbiAgICAgICAgICBucyA9IG5zICYmIG5zLm5leHRTaWJsaW5nO1xuICAgICAgICAgIG5leHRJZCA9IG5zICYmIHRoaXMubWlycm9yLmdldElkKG5zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dElkO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IHB1c2hBZGQgPSBuMiA9PiB7XG4gICAgICAgIGlmICghbjIucGFyZW50Tm9kZSB8fCAhaW5Eb20objIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudElkID0gaXNTaGFkb3dSb290KG4yLnBhcmVudE5vZGUpID8gdGhpcy5taXJyb3IuZ2V0SWQoZ2V0U2hhZG93SG9zdChuMikpIDogdGhpcy5taXJyb3IuZ2V0SWQobjIucGFyZW50Tm9kZSk7XG4gICAgICAgIGNvbnN0IG5leHRJZCA9IGdldE5leHRJZChuMik7XG4gICAgICAgIGlmIChwYXJlbnRJZCA9PT0gLTEgfHwgbmV4dElkID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiBhZGRMaXN0LmFkZE5vZGUobjIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNuID0gc2VyaWFsaXplTm9kZVdpdGhJZChuMiwge1xuICAgICAgICAgIGRvYzogdGhpcy5kb2MsXG4gICAgICAgICAgbWlycm9yOiB0aGlzLm1pcnJvcixcbiAgICAgICAgICBibG9ja0NsYXNzOiB0aGlzLmJsb2NrQ2xhc3MsXG4gICAgICAgICAgYmxvY2tTZWxlY3RvcjogdGhpcy5ibG9ja1NlbGVjdG9yLFxuICAgICAgICAgIG1hc2tBbGxUZXh0OiB0aGlzLm1hc2tBbGxUZXh0LFxuICAgICAgICAgIHVuYmxvY2tTZWxlY3RvcjogdGhpcy51bmJsb2NrU2VsZWN0b3IsXG4gICAgICAgICAgbWFza1RleHRDbGFzczogdGhpcy5tYXNrVGV4dENsYXNzLFxuICAgICAgICAgIHVubWFza1RleHRDbGFzczogdGhpcy51bm1hc2tUZXh0Q2xhc3MsXG4gICAgICAgICAgbWFza1RleHRTZWxlY3RvcjogdGhpcy5tYXNrVGV4dFNlbGVjdG9yLFxuICAgICAgICAgIHVubWFza1RleHRTZWxlY3RvcjogdGhpcy51bm1hc2tUZXh0U2VsZWN0b3IsXG4gICAgICAgICAgc2tpcENoaWxkOiB0cnVlLFxuICAgICAgICAgIG5ld2x5QWRkZWRFbGVtZW50OiB0cnVlLFxuICAgICAgICAgIGlubGluZVN0eWxlc2hlZXQ6IHRoaXMuaW5saW5lU3R5bGVzaGVldCxcbiAgICAgICAgICBtYXNrSW5wdXRPcHRpb25zOiB0aGlzLm1hc2tJbnB1dE9wdGlvbnMsXG4gICAgICAgICAgbWFza0F0dHJpYnV0ZUZuOiB0aGlzLm1hc2tBdHRyaWJ1dGVGbixcbiAgICAgICAgICBtYXNrVGV4dEZuOiB0aGlzLm1hc2tUZXh0Rm4sXG4gICAgICAgICAgbWFza0lucHV0Rm46IHRoaXMubWFza0lucHV0Rm4sXG4gICAgICAgICAgc2xpbURPTU9wdGlvbnM6IHRoaXMuc2xpbURPTU9wdGlvbnMsXG4gICAgICAgICAgZGF0YVVSTE9wdGlvbnM6IHRoaXMuZGF0YVVSTE9wdGlvbnMsXG4gICAgICAgICAgcmVjb3JkQ2FudmFzOiB0aGlzLnJlY29yZENhbnZhcyxcbiAgICAgICAgICBpbmxpbmVJbWFnZXM6IHRoaXMuaW5saW5lSW1hZ2VzLFxuICAgICAgICAgIG9uU2VyaWFsaXplOiBjdXJyZW50TiA9PiB7XG4gICAgICAgICAgICBpZiAoaXNTZXJpYWxpemVkSWZyYW1lKGN1cnJlbnROLCB0aGlzLm1pcnJvcikgJiYgIWlzQmxvY2tlZChjdXJyZW50TiwgdGhpcy5ibG9ja0NsYXNzLCB0aGlzLmJsb2NrU2VsZWN0b3IsIHRoaXMudW5ibG9ja1NlbGVjdG9yLCBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5pZnJhbWVNYW5hZ2VyLmFkZElmcmFtZShjdXJyZW50Tik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNTZXJpYWxpemVkU3R5bGVzaGVldChjdXJyZW50TiwgdGhpcy5taXJyb3IpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3R5bGVzaGVldE1hbmFnZXIudHJhY2tMaW5rRWxlbWVudChjdXJyZW50Tik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzU2hhZG93Um9vdChuMikpIHtcbiAgICAgICAgICAgICAgdGhpcy5zaGFkb3dEb21NYW5hZ2VyLmFkZFNoYWRvd1Jvb3QobjIuc2hhZG93Um9vdCwgdGhpcy5kb2MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb25JZnJhbWVMb2FkOiAoaWZyYW1lLCBjaGlsZFNuKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNCbG9ja2VkKGlmcmFtZSwgdGhpcy5ibG9ja0NsYXNzLCB0aGlzLmJsb2NrU2VsZWN0b3IsIHRoaXMudW5ibG9ja1NlbGVjdG9yLCBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pZnJhbWVNYW5hZ2VyLmF0dGFjaElmcmFtZShpZnJhbWUsIGNoaWxkU24pO1xuICAgICAgICAgICAgaWYgKGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICAgIHRoaXMuY2FudmFzTWFuYWdlci5hZGRXaW5kb3coaWZyYW1lLmNvbnRlbnRXaW5kb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zaGFkb3dEb21NYW5hZ2VyLm9ic2VydmVBdHRhY2hTaGFkb3coaWZyYW1lKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uU3R5bGVzaGVldExvYWQ6IChsaW5rLCBjaGlsZFNuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlc2hlZXRNYW5hZ2VyLmF0dGFjaExpbmtFbGVtZW50KGxpbmssIGNoaWxkU24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzbikge1xuICAgICAgICAgIGFkZHMucHVzaCh7XG4gICAgICAgICAgICBwYXJlbnRJZCxcbiAgICAgICAgICAgIG5leHRJZCxcbiAgICAgICAgICAgIG5vZGU6IHNuXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYWRkZWRJZHMuYWRkKHNuLmlkKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdoaWxlICh0aGlzLm1hcFJlbW92ZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubWlycm9yLnJlbW92ZU5vZGVGcm9tTWFwKHRoaXMubWFwUmVtb3Zlcy5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgbjIgb2YgdGhpcy5tb3ZlZFNldCkge1xuICAgICAgICBpZiAoaXNQYXJlbnRSZW1vdmVkKHRoaXMucmVtb3ZlcywgbjIsIHRoaXMubWlycm9yKSAmJiAhdGhpcy5tb3ZlZFNldC5oYXMobjIucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwdXNoQWRkKG4yKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgbjIgb2YgdGhpcy5hZGRlZFNldCkge1xuICAgICAgICBpZiAoIWlzQW5jZXN0b3JJblNldCh0aGlzLmRyb3BwZWRTZXQsIG4yKSAmJiAhaXNQYXJlbnRSZW1vdmVkKHRoaXMucmVtb3ZlcywgbjIsIHRoaXMubWlycm9yKSkge1xuICAgICAgICAgIHB1c2hBZGQobjIpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQW5jZXN0b3JJblNldCh0aGlzLm1vdmVkU2V0LCBuMikpIHtcbiAgICAgICAgICBwdXNoQWRkKG4yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRyb3BwZWRTZXQuYWRkKG4yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNhbmRpZGF0ZSA9IG51bGw7XG4gICAgICB3aGlsZSAoYWRkTGlzdC5sZW5ndGgpIHtcbiAgICAgICAgbGV0IG5vZGUgPSBudWxsO1xuICAgICAgICBpZiAoY2FuZGlkYXRlKSB7XG4gICAgICAgICAgY29uc3QgcGFyZW50SWQgPSB0aGlzLm1pcnJvci5nZXRJZChjYW5kaWRhdGUudmFsdWUucGFyZW50Tm9kZSk7XG4gICAgICAgICAgY29uc3QgbmV4dElkID0gZ2V0TmV4dElkKGNhbmRpZGF0ZS52YWx1ZSk7XG4gICAgICAgICAgaWYgKHBhcmVudElkICE9PSAtMSAmJiBuZXh0SWQgIT09IC0xKSB7XG4gICAgICAgICAgICBub2RlID0gY2FuZGlkYXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICBsZXQgdGFpbE5vZGUgPSBhZGRMaXN0LnRhaWw7XG4gICAgICAgICAgd2hpbGUgKHRhaWxOb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBfbm9kZSA9IHRhaWxOb2RlO1xuICAgICAgICAgICAgdGFpbE5vZGUgPSB0YWlsTm9kZS5wcmV2aW91cztcbiAgICAgICAgICAgIGlmIChfbm9kZSkge1xuICAgICAgICAgICAgICBjb25zdCBwYXJlbnRJZCA9IHRoaXMubWlycm9yLmdldElkKF9ub2RlLnZhbHVlLnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgICBjb25zdCBuZXh0SWQgPSBnZXROZXh0SWQoX25vZGUudmFsdWUpO1xuICAgICAgICAgICAgICBpZiAobmV4dElkID09PSAtMSkgY29udGludWU7ZWxzZSBpZiAocGFyZW50SWQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IF9ub2RlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuaGFuZGxlZE5vZGUgPSBfbm9kZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodW5oYW5kbGVkTm9kZS5wYXJlbnROb2RlICYmIHVuaGFuZGxlZE5vZGUucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBzaGFkb3dIb3N0ID0gdW5oYW5kbGVkTm9kZS5wYXJlbnROb2RlLmhvc3Q7XG4gICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRJZDIgPSB0aGlzLm1pcnJvci5nZXRJZChzaGFkb3dIb3N0KTtcbiAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRJZDIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBfbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIHdoaWxlIChhZGRMaXN0LmhlYWQpIHtcbiAgICAgICAgICAgIGFkZExpc3QucmVtb3ZlTm9kZShhZGRMaXN0LmhlYWQudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYW5kaWRhdGUgPSBub2RlLnByZXZpb3VzO1xuICAgICAgICBhZGRMaXN0LnJlbW92ZU5vZGUobm9kZS52YWx1ZSk7XG4gICAgICAgIHB1c2hBZGQobm9kZS52YWx1ZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICB0ZXh0czogdGhpcy50ZXh0cy5tYXAodGV4dCA9PiAoe1xuICAgICAgICAgIGlkOiB0aGlzLm1pcnJvci5nZXRJZCh0ZXh0Lm5vZGUpLFxuICAgICAgICAgIHZhbHVlOiB0ZXh0LnZhbHVlXG4gICAgICAgIH0pKS5maWx0ZXIodGV4dCA9PiAhYWRkZWRJZHMuaGFzKHRleHQuaWQpKS5maWx0ZXIodGV4dCA9PiB0aGlzLm1pcnJvci5oYXModGV4dC5pZCkpLFxuICAgICAgICBhdHRyaWJ1dGVzOiB0aGlzLmF0dHJpYnV0ZXMubWFwKGF0dHJpYnV0ZSA9PiB7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYXR0cmlidXRlc1xuICAgICAgICAgIH0gPSBhdHRyaWJ1dGU7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLnN0eWxlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBkaWZmQXNTdHIgPSBKU09OLnN0cmluZ2lmeShhdHRyaWJ1dGUuc3R5bGVEaWZmKTtcbiAgICAgICAgICAgIGNvbnN0IHVuY2hhbmdlZEFzU3RyID0gSlNPTi5zdHJpbmdpZnkoYXR0cmlidXRlLl91bmNoYW5nZWRTdHlsZXMpO1xuICAgICAgICAgICAgaWYgKGRpZmZBc1N0ci5sZW5ndGggPCBhdHRyaWJ1dGVzLnN0eWxlLmxlbmd0aCkge1xuICAgICAgICAgICAgICBpZiAoKGRpZmZBc1N0ciArIHVuY2hhbmdlZEFzU3RyKS5zcGxpdChcInZhcihcIikubGVuZ3RoID09PSBhdHRyaWJ1dGVzLnN0eWxlLnNwbGl0KFwidmFyKFwiKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnN0eWxlID0gYXR0cmlidXRlLnN0eWxlRGlmZjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRoaXMubWlycm9yLmdldElkKGF0dHJpYnV0ZS5ub2RlKSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNcbiAgICAgICAgICB9O1xuICAgICAgICB9KS5maWx0ZXIoYXR0cmlidXRlID0+ICFhZGRlZElkcy5oYXMoYXR0cmlidXRlLmlkKSkuZmlsdGVyKGF0dHJpYnV0ZSA9PiB0aGlzLm1pcnJvci5oYXMoYXR0cmlidXRlLmlkKSksXG4gICAgICAgIHJlbW92ZXM6IHRoaXMucmVtb3ZlcyxcbiAgICAgICAgYWRkc1xuICAgICAgfTtcbiAgICAgIGlmICghcGF5bG9hZC50ZXh0cy5sZW5ndGggJiYgIXBheWxvYWQuYXR0cmlidXRlcy5sZW5ndGggJiYgIXBheWxvYWQucmVtb3Zlcy5sZW5ndGggJiYgIXBheWxvYWQuYWRkcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy50ZXh0cyA9IFtdO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gW107XG4gICAgICB0aGlzLmF0dHJpYnV0ZU1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gICAgICB0aGlzLnJlbW92ZXMgPSBbXTtcbiAgICAgIHRoaXMuYWRkZWRTZXQgPSAvKiBAX19QVVJFX18gKi9uZXcgU2V0KCk7XG4gICAgICB0aGlzLm1vdmVkU2V0ID0gLyogQF9fUFVSRV9fICovbmV3IFNldCgpO1xuICAgICAgdGhpcy5kcm9wcGVkU2V0ID0gLyogQF9fUFVSRV9fICovbmV3IFNldCgpO1xuICAgICAgdGhpcy5tb3ZlZE1hcCA9IHt9O1xuICAgICAgdGhpcy5tdXRhdGlvbkNiKHBheWxvYWQpO1xuICAgIH07XG4gICAgdGhpcy5wcm9jZXNzTXV0YXRpb24gPSBtID0+IHtcbiAgICAgIGlmIChpc0lnbm9yZWQobS50YXJnZXQsIHRoaXMubWlycm9yKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKG0udHlwZSkge1xuICAgICAgICBjYXNlIFwiY2hhcmFjdGVyRGF0YVwiOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbS50YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBpZiAoIWlzQmxvY2tlZChtLnRhcmdldCwgdGhpcy5ibG9ja0NsYXNzLCB0aGlzLmJsb2NrU2VsZWN0b3IsIHRoaXMudW5ibG9ja1NlbGVjdG9yLCBmYWxzZSkgJiYgdmFsdWUgIT09IG0ub2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy50ZXh0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmVlZE1hc2tpbmdUZXh0KG0udGFyZ2V0LCB0aGlzLm1hc2tUZXh0Q2xhc3MsIHRoaXMubWFza1RleHRTZWxlY3RvciwgdGhpcy51bm1hc2tUZXh0Q2xhc3MsIHRoaXMudW5tYXNrVGV4dFNlbGVjdG9yLCB0aGlzLm1hc2tBbGxUZXh0KSAmJiB2YWx1ZSA/IHRoaXMubWFza1RleHRGbiA/IHRoaXMubWFza1RleHRGbih2YWx1ZSwgY2xvc2VzdEVsZW1lbnRPZk5vZGUkMShtLnRhcmdldCkpIDogdmFsdWUucmVwbGFjZSgvW1xcU10vZywgXCIqXCIpIDogdmFsdWUsXG4gICAgICAgICAgICAgICAgbm9kZTogbS50YXJnZXRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJhdHRyaWJ1dGVzXCI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbS50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgYXR0cmlidXRlTmFtZSA9IG0uYXR0cmlidXRlTmFtZTtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IG0udGFyZ2V0LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVOYW1lID09PSBcInZhbHVlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGdldElucHV0VHlwZSh0YXJnZXQpO1xuICAgICAgICAgICAgICBjb25zdCB0YWdOYW1lID0gdGFyZ2V0LnRhZ05hbWU7XG4gICAgICAgICAgICAgIHZhbHVlID0gZ2V0SW5wdXRWYWx1ZSh0YXJnZXQsIHRhZ05hbWUsIHR5cGUpO1xuICAgICAgICAgICAgICBjb25zdCBpc0lucHV0TWFza2VkID0gc2hvdWxkTWFza0lucHV0KHtcbiAgICAgICAgICAgICAgICBtYXNrSW5wdXRPcHRpb25zOiB0aGlzLm1hc2tJbnB1dE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGFnTmFtZSxcbiAgICAgICAgICAgICAgICB0eXBlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBjb25zdCBmb3JjZU1hc2sgPSBuZWVkTWFza2luZ1RleHQobS50YXJnZXQsIHRoaXMubWFza1RleHRDbGFzcywgdGhpcy5tYXNrVGV4dFNlbGVjdG9yLCB0aGlzLnVubWFza1RleHRDbGFzcywgdGhpcy51bm1hc2tUZXh0U2VsZWN0b3IsIGlzSW5wdXRNYXNrZWQpO1xuICAgICAgICAgICAgICB2YWx1ZSA9IG1hc2tJbnB1dFZhbHVlKHtcbiAgICAgICAgICAgICAgICBpc01hc2tlZDogZm9yY2VNYXNrLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRhcmdldCxcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICBtYXNrSW5wdXRGbjogdGhpcy5tYXNrSW5wdXRGblxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0Jsb2NrZWQobS50YXJnZXQsIHRoaXMuYmxvY2tDbGFzcywgdGhpcy5ibG9ja1NlbGVjdG9yLCB0aGlzLnVuYmxvY2tTZWxlY3RvciwgZmFsc2UpIHx8IHZhbHVlID09PSBtLm9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpdGVtID0gdGhpcy5hdHRyaWJ1dGVNYXAuZ2V0KG0udGFyZ2V0KTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gXCJJRlJBTUVcIiAmJiBhdHRyaWJ1dGVOYW1lID09PSBcInNyY1wiICYmICF0aGlzLmtlZXBJZnJhbWVTcmNGbih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29uc3QgaWZyYW1lRG9jID0gZ2V0SUZyYW1lQ29udGVudERvY3VtZW50KHRhcmdldCk7XG4gICAgICAgICAgICAgIGlmICghaWZyYW1lRG9jKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZSA9IFwicnJfc3JjXCI7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgaXRlbSA9IHtcbiAgICAgICAgICAgICAgICBub2RlOiBtLnRhcmdldCxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7fSxcbiAgICAgICAgICAgICAgICBzdHlsZURpZmY6IHt9LFxuICAgICAgICAgICAgICAgIF91bmNoYW5nZWRTdHlsZXM6IHt9XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU1hcC5zZXQobS50YXJnZXQsIGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZU5hbWUgPT09IFwidHlwZVwiICYmIHRhcmdldC50YWdOYW1lID09PSBcIklOUFVUXCIgJiYgKG0ub2xkVmFsdWUgfHwgXCJcIikudG9Mb3dlckNhc2UoKSA9PT0gXCJwYXNzd29yZFwiKSB7XG4gICAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJyLWlzLXBhc3N3b3JkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaWdub3JlQXR0cmlidXRlKHRhcmdldC50YWdOYW1lLCBhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgICAgICAgICBpdGVtLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPSB0cmFuc2Zvcm1BdHRyaWJ1dGUodGhpcy5kb2MsIHRvTG93ZXJDYXNlKHRhcmdldC50YWdOYW1lKSwgdG9Mb3dlckNhc2UoYXR0cmlidXRlTmFtZSksIHZhbHVlLCB0YXJnZXQsIHRoaXMubWFza0F0dHJpYnV0ZUZuKTtcbiAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZU5hbWUgPT09IFwic3R5bGVcIikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy51bmF0dGFjaGVkRG9jKSB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYXR0YWNoZWREb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5hdHRhY2hlZERvYyA9IHRoaXMuZG9jO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvbGQgPSB0aGlzLnVuYXR0YWNoZWREb2MuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgaWYgKG0ub2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIG9sZC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBtLm9sZFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwbmFtZSBvZiBBcnJheS5mcm9tKHRhcmdldC5zdHlsZSkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGFyZ2V0LnN0eWxlLmdldFByb3BlcnR5VmFsdWUocG5hbWUpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UHJpb3JpdHkgPSB0YXJnZXQuc3R5bGUuZ2V0UHJvcGVydHlQcmlvcml0eShwbmFtZSk7XG4gICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZC5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHBuYW1lKSB8fCBuZXdQcmlvcml0eSAhPT0gb2xkLnN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkocG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcmlvcml0eSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGVEaWZmW3BuYW1lXSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGVEaWZmW3BuYW1lXSA9IFtuZXdWYWx1ZSwgbmV3UHJpb3JpdHldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLl91bmNoYW5nZWRTdHlsZXNbcG5hbWVdID0gW25ld1ZhbHVlLCBuZXdQcmlvcml0eV07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcG5hbWUgb2YgQXJyYXkuZnJvbShvbGQuc3R5bGUpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LnN0eWxlLmdldFByb3BlcnR5VmFsdWUocG5hbWUpID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGVEaWZmW3BuYW1lXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICBjYXNlIFwiY2hpbGRMaXN0XCI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgaWYgKGlzQmxvY2tlZChtLnRhcmdldCwgdGhpcy5ibG9ja0NsYXNzLCB0aGlzLmJsb2NrU2VsZWN0b3IsIHRoaXMudW5ibG9ja1NlbGVjdG9yLCB0cnVlKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtLmFkZGVkTm9kZXMuZm9yRWFjaChuMiA9PiB0aGlzLmdlbkFkZHMobjIsIG0udGFyZ2V0KSk7XG4gICAgICAgICAgICBtLnJlbW92ZWROb2Rlcy5mb3JFYWNoKG4yID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgbm9kZUlkID0gdGhpcy5taXJyb3IuZ2V0SWQobjIpO1xuICAgICAgICAgICAgICBjb25zdCBwYXJlbnRJZCA9IGlzU2hhZG93Um9vdChtLnRhcmdldCkgPyB0aGlzLm1pcnJvci5nZXRJZChtLnRhcmdldC5ob3N0KSA6IHRoaXMubWlycm9yLmdldElkKG0udGFyZ2V0KTtcbiAgICAgICAgICAgICAgaWYgKGlzQmxvY2tlZChtLnRhcmdldCwgdGhpcy5ibG9ja0NsYXNzLCB0aGlzLmJsb2NrU2VsZWN0b3IsIHRoaXMudW5ibG9ja1NlbGVjdG9yLCBmYWxzZSkgfHwgaXNJZ25vcmVkKG4yLCB0aGlzLm1pcnJvcikgfHwgIWlzU2VyaWFsaXplZChuMiwgdGhpcy5taXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh0aGlzLmFkZGVkU2V0LmhhcyhuMikpIHtcbiAgICAgICAgICAgICAgICBkZWVwRGVsZXRlKHRoaXMuYWRkZWRTZXQsIG4yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BwZWRTZXQuYWRkKG4yKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFkZGVkU2V0LmhhcyhtLnRhcmdldCkgJiYgbm9kZUlkID09PSAtMSkgO2Vsc2UgaWYgKGlzQW5jZXN0b3JSZW1vdmVkKG0udGFyZ2V0LCB0aGlzLm1pcnJvcikpIDtlbHNlIGlmICh0aGlzLm1vdmVkU2V0LmhhcyhuMikgJiYgdGhpcy5tb3ZlZE1hcFttb3ZlS2V5KG5vZGVJZCwgcGFyZW50SWQpXSkge1xuICAgICAgICAgICAgICAgIGRlZXBEZWxldGUodGhpcy5tb3ZlZFNldCwgbjIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3Zlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICAgICAgICAgICAgaWQ6IG5vZGVJZCxcbiAgICAgICAgICAgICAgICAgIGlzU2hhZG93OiBpc1NoYWRvd1Jvb3QobS50YXJnZXQpICYmIGlzTmF0aXZlU2hhZG93RG9tKG0udGFyZ2V0KSA/IHRydWUgOiB2b2lkIDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLm1hcFJlbW92ZXMucHVzaChuMik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuZ2VuQWRkcyA9IChuMiwgdGFyZ2V0KSA9PiB7XG4gICAgICBpZiAodGhpcy5wcm9jZXNzZWROb2RlTWFuYWdlci5pbk90aGVyQnVmZmVyKG4yLCB0aGlzKSkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuYWRkZWRTZXQuaGFzKG4yKSB8fCB0aGlzLm1vdmVkU2V0LmhhcyhuMikpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLm1pcnJvci5oYXNOb2RlKG4yKSkge1xuICAgICAgICBpZiAoaXNJZ25vcmVkKG4yLCB0aGlzLm1pcnJvcikpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb3ZlZFNldC5hZGQobjIpO1xuICAgICAgICBsZXQgdGFyZ2V0SWQgPSBudWxsO1xuICAgICAgICBpZiAodGFyZ2V0ICYmIHRoaXMubWlycm9yLmhhc05vZGUodGFyZ2V0KSkge1xuICAgICAgICAgIHRhcmdldElkID0gdGhpcy5taXJyb3IuZ2V0SWQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0SWQgJiYgdGFyZ2V0SWQgIT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5tb3ZlZE1hcFttb3ZlS2V5KHRoaXMubWlycm9yLmdldElkKG4yKSwgdGFyZ2V0SWQpXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkZWRTZXQuYWRkKG4yKTtcbiAgICAgICAgdGhpcy5kcm9wcGVkU2V0LmRlbGV0ZShuMik7XG4gICAgICB9XG4gICAgICBpZiAoIWlzQmxvY2tlZChuMiwgdGhpcy5ibG9ja0NsYXNzLCB0aGlzLmJsb2NrU2VsZWN0b3IsIHRoaXMudW5ibG9ja1NlbGVjdG9yLCBmYWxzZSkpIHtcbiAgICAgICAgbjIuY2hpbGROb2Rlcy5mb3JFYWNoKGNoaWxkTiA9PiB0aGlzLmdlbkFkZHMoY2hpbGROKSk7XG4gICAgICAgIGlmIChoYXNTaGFkb3dSb290KG4yKSkge1xuICAgICAgICAgIG4yLnNoYWRvd1Jvb3QuY2hpbGROb2Rlcy5mb3JFYWNoKGNoaWxkTiA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NlZE5vZGVNYW5hZ2VyLmFkZChjaGlsZE4sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5nZW5BZGRzKGNoaWxkTiwgbjIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBpbml0KG9wdGlvbnMpIHtcbiAgICBbXCJtdXRhdGlvbkNiXCIsIFwiYmxvY2tDbGFzc1wiLCBcImJsb2NrU2VsZWN0b3JcIiwgXCJ1bmJsb2NrU2VsZWN0b3JcIiwgXCJtYXNrQWxsVGV4dFwiLCBcIm1hc2tUZXh0Q2xhc3NcIiwgXCJ1bm1hc2tUZXh0Q2xhc3NcIiwgXCJtYXNrVGV4dFNlbGVjdG9yXCIsIFwidW5tYXNrVGV4dFNlbGVjdG9yXCIsIFwiaW5saW5lU3R5bGVzaGVldFwiLCBcIm1hc2tJbnB1dE9wdGlvbnNcIiwgXCJtYXNrQXR0cmlidXRlRm5cIiwgXCJtYXNrVGV4dEZuXCIsIFwibWFza0lucHV0Rm5cIiwgXCJrZWVwSWZyYW1lU3JjRm5cIiwgXCJyZWNvcmRDYW52YXNcIiwgXCJpbmxpbmVJbWFnZXNcIiwgXCJzbGltRE9NT3B0aW9uc1wiLCBcImRhdGFVUkxPcHRpb25zXCIsIFwiZG9jXCIsIFwibWlycm9yXCIsIFwiaWZyYW1lTWFuYWdlclwiLCBcInN0eWxlc2hlZXRNYW5hZ2VyXCIsIFwic2hhZG93RG9tTWFuYWdlclwiLCBcImNhbnZhc01hbmFnZXJcIiwgXCJwcm9jZXNzZWROb2RlTWFuYWdlclwiXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgfSk7XG4gIH1cbiAgZnJlZXplKCkge1xuICAgIHRoaXMuZnJvemVuID0gdHJ1ZTtcbiAgICB0aGlzLmNhbnZhc01hbmFnZXIuZnJlZXplKCk7XG4gIH1cbiAgdW5mcmVlemUoKSB7XG4gICAgdGhpcy5mcm96ZW4gPSBmYWxzZTtcbiAgICB0aGlzLmNhbnZhc01hbmFnZXIudW5mcmVlemUoKTtcbiAgICB0aGlzLmVtaXQoKTtcbiAgfVxuICBpc0Zyb3plbigpIHtcbiAgICByZXR1cm4gdGhpcy5mcm96ZW47XG4gIH1cbiAgbG9jaygpIHtcbiAgICB0aGlzLmxvY2tlZCA9IHRydWU7XG4gICAgdGhpcy5jYW52YXNNYW5hZ2VyLmxvY2soKTtcbiAgfVxuICB1bmxvY2soKSB7XG4gICAgdGhpcy5sb2NrZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhbnZhc01hbmFnZXIudW5sb2NrKCk7XG4gICAgdGhpcy5lbWl0KCk7XG4gIH1cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5zaGFkb3dEb21NYW5hZ2VyLnJlc2V0KCk7XG4gICAgdGhpcy5jYW52YXNNYW5hZ2VyLnJlc2V0KCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlZXBEZWxldGUoYWRkc1NldCwgbjIpIHtcbiAgYWRkc1NldC5kZWxldGUobjIpO1xuICBuMi5jaGlsZE5vZGVzLmZvckVhY2goY2hpbGROID0+IGRlZXBEZWxldGUoYWRkc1NldCwgY2hpbGROKSk7XG59XG5mdW5jdGlvbiBpc1BhcmVudFJlbW92ZWQocmVtb3ZlcywgbjIsIG1pcnJvcjIpIHtcbiAgaWYgKHJlbW92ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBfaXNQYXJlbnRSZW1vdmVkKHJlbW92ZXMsIG4yLCBtaXJyb3IyKTtcbn1cbmZ1bmN0aW9uIF9pc1BhcmVudFJlbW92ZWQocmVtb3ZlcywgbjIsIG1pcnJvcjIpIHtcbiAgbGV0IG5vZGUgPSBuMi5wYXJlbnROb2RlO1xuICB3aGlsZSAobm9kZSkge1xuICAgIGNvbnN0IHBhcmVudElkID0gbWlycm9yMi5nZXRJZChub2RlKTtcbiAgICBpZiAocmVtb3Zlcy5zb21lKHIyID0+IHIyLmlkID09PSBwYXJlbnRJZCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzQW5jZXN0b3JJblNldChzZXQsIG4yKSB7XG4gIGlmIChzZXQuc2l6ZSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gX2lzQW5jZXN0b3JJblNldChzZXQsIG4yKTtcbn1cbmZ1bmN0aW9uIF9pc0FuY2VzdG9ySW5TZXQoc2V0LCBuMikge1xuICBjb25zdCB7XG4gICAgcGFyZW50Tm9kZVxuICB9ID0gbjI7XG4gIGlmICghcGFyZW50Tm9kZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoc2V0LmhhcyhwYXJlbnROb2RlKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBfaXNBbmNlc3RvckluU2V0KHNldCwgcGFyZW50Tm9kZSk7XG59XG5sZXQgZXJyb3JIYW5kbGVyO1xuZnVuY3Rpb24gcmVnaXN0ZXJFcnJvckhhbmRsZXIoaGFuZGxlcikge1xuICBlcnJvckhhbmRsZXIgPSBoYW5kbGVyO1xufVxuZnVuY3Rpb24gdW5yZWdpc3RlckVycm9ySGFuZGxlcigpIHtcbiAgZXJyb3JIYW5kbGVyID0gdm9pZCAwO1xufVxuY29uc3QgY2FsbGJhY2tXcmFwcGVyID0gY2IgPT4ge1xuICBpZiAoIWVycm9ySGFuZGxlcikge1xuICAgIHJldHVybiBjYjtcbiAgfVxuICBjb25zdCBycndlYldyYXBwZWQgPSAoLi4ucmVzdCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gY2IoLi4ucmVzdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvckhhbmRsZXIgJiYgZXJyb3JIYW5kbGVyKGVycm9yKSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gKCkgPT4ge307XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIHJldHVybiBycndlYldyYXBwZWQ7XG59O1xuY29uc3QgbXV0YXRpb25CdWZmZXJzID0gW107XG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldChldmVudCkge1xuICB0cnkge1xuICAgIGlmIChcImNvbXBvc2VkUGF0aFwiIGluIGV2ZW50KSB7XG4gICAgICBjb25zdCBwYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCk7XG4gICAgICBpZiAocGF0aC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhbMF07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChcInBhdGhcIiBpbiBldmVudCAmJiBldmVudC5wYXRoLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGV2ZW50LnBhdGhbMF07XG4gICAgfVxuICB9IGNhdGNoIHt9XG4gIHJldHVybiBldmVudCAmJiBldmVudC50YXJnZXQ7XG59XG5mdW5jdGlvbiBpbml0TXV0YXRpb25PYnNlcnZlcihvcHRpb25zLCByb290RWwpIHtcbiAgY29uc3QgbXV0YXRpb25CdWZmZXIgPSBuZXcgTXV0YXRpb25CdWZmZXIoKTtcbiAgbXV0YXRpb25CdWZmZXJzLnB1c2gobXV0YXRpb25CdWZmZXIpO1xuICBtdXRhdGlvbkJ1ZmZlci5pbml0KG9wdGlvbnMpO1xuICBsZXQgbXV0YXRpb25PYnNlcnZlckN0b3IgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fFxuICAvKipcbiAgKiBTb21lIHdlYnNpdGVzIG1heSBkaXNhYmxlIE11dGF0aW9uT2JzZXJ2ZXIgYnkgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgd2luZG93IG9iamVjdC5cbiAgKiBJZiBzb21lb25lIGlzIHVzaW5nIHJyd2ViIHRvIGJ1aWxkIGEgYnJvd3NlciBleHRlbnRpb24gb3IgdGhpbmdzIGxpa2UgaXQsIHRoZXlcbiAgKiBjb3VsZCBub3QgY2hhbmdlIHRoZSB3ZWJzaXRlJ3MgY29kZSBidXQgY2FuIGhhdmUgYW4gb3Bwb3J0dW5pdHkgdG8gaW5qZWN0IHNvbWVcbiAgKiBjb2RlIGJlZm9yZSB0aGUgd2Vic2l0ZSBleGVjdXRpbmcgaXRzIEpTIGxvZ2ljLlxuICAqIFRoZW4gdGhleSBjYW4gZG8gdGhpcyB0byBzdG9yZSB0aGUgbmF0aXZlIE11dGF0aW9uT2JzZXJ2ZXI6XG4gICogd2luZG93Ll9fcnJNdXRhdGlvbk9ic2VydmVyID0gTXV0YXRpb25PYnNlcnZlclxuICAqL1xuICB3aW5kb3cuX19yck11dGF0aW9uT2JzZXJ2ZXI7XG4gIGNvbnN0IGFuZ3VsYXJab25lU3ltYm9sID0gd2luZG93Py5ab25lPy5fX3N5bWJvbF9fPy4oXCJNdXRhdGlvbk9ic2VydmVyXCIpO1xuICBpZiAoYW5ndWxhclpvbmVTeW1ib2wgJiYgd2luZG93W2FuZ3VsYXJab25lU3ltYm9sXSkge1xuICAgIG11dGF0aW9uT2JzZXJ2ZXJDdG9yID0gd2luZG93W2FuZ3VsYXJab25lU3ltYm9sXTtcbiAgfVxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBtdXRhdGlvbk9ic2VydmVyQ3RvcihjYWxsYmFja1dyYXBwZXIobXV0YXRpb25zID0+IHtcbiAgICBpZiAob3B0aW9ucy5vbk11dGF0aW9uICYmIG9wdGlvbnMub25NdXRhdGlvbihtdXRhdGlvbnMpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtdXRhdGlvbkJ1ZmZlci5wcm9jZXNzTXV0YXRpb25zLmJpbmQobXV0YXRpb25CdWZmZXIpKG11dGF0aW9ucyk7XG4gIH0pKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShyb290RWwsIHtcbiAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgIGF0dHJpYnV0ZU9sZFZhbHVlOiB0cnVlLFxuICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiB0cnVlLFxuICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICBzdWJ0cmVlOiB0cnVlXG4gIH0pO1xuICByZXR1cm4gb2JzZXJ2ZXI7XG59XG5mdW5jdGlvbiBpbml0TW92ZU9ic2VydmVyKHtcbiAgbW91c2Vtb3ZlQ2IsXG4gIHNhbXBsaW5nLFxuICBkb2MsXG4gIG1pcnJvcjogbWlycm9yMlxufSkge1xuICBpZiAoc2FtcGxpbmcubW91c2Vtb3ZlID09PSBmYWxzZSkge1xuICAgIHJldHVybiAoKSA9PiB7fTtcbiAgfVxuICBjb25zdCB0aHJlc2hvbGQgPSB0eXBlb2Ygc2FtcGxpbmcubW91c2Vtb3ZlID09PSBcIm51bWJlclwiID8gc2FtcGxpbmcubW91c2Vtb3ZlIDogNTA7XG4gIGNvbnN0IGNhbGxiYWNrVGhyZXNob2xkID0gdHlwZW9mIHNhbXBsaW5nLm1vdXNlbW92ZUNhbGxiYWNrID09PSBcIm51bWJlclwiID8gc2FtcGxpbmcubW91c2Vtb3ZlQ2FsbGJhY2sgOiA1MDA7XG4gIGxldCBwb3NpdGlvbnMgPSBbXTtcbiAgbGV0IHRpbWVCYXNlbGluZTtcbiAgY29uc3Qgd3JhcHBlZENiID0gdGhyb3R0bGUkMShjYWxsYmFja1dyYXBwZXIoc291cmNlID0+IHtcbiAgICBjb25zdCB0b3RhbE9mZnNldCA9IERhdGUubm93KCkgLSB0aW1lQmFzZWxpbmU7XG4gICAgbW91c2Vtb3ZlQ2IocG9zaXRpb25zLm1hcChwID0+IHtcbiAgICAgIHAudGltZU9mZnNldCAtPSB0b3RhbE9mZnNldDtcbiAgICAgIHJldHVybiBwO1xuICAgIH0pLCBzb3VyY2UpO1xuICAgIHBvc2l0aW9ucyA9IFtdO1xuICAgIHRpbWVCYXNlbGluZSA9IG51bGw7XG4gIH0pLCBjYWxsYmFja1RocmVzaG9sZCk7XG4gIGNvbnN0IHVwZGF0ZVBvc2l0aW9uID0gY2FsbGJhY2tXcmFwcGVyKHRocm90dGxlJDEoY2FsbGJhY2tXcmFwcGVyKGV2dCA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZ0KTtcbiAgICBjb25zdCB7XG4gICAgICBjbGllbnRYLFxuICAgICAgY2xpZW50WVxuICAgIH0gPSBsZWdhY3lfaXNUb3VjaEV2ZW50KGV2dCkgPyBldnQuY2hhbmdlZFRvdWNoZXNbMF0gOiBldnQ7XG4gICAgaWYgKCF0aW1lQmFzZWxpbmUpIHtcbiAgICAgIHRpbWVCYXNlbGluZSA9IG5vd1RpbWVzdGFtcCgpO1xuICAgIH1cbiAgICBwb3NpdGlvbnMucHVzaCh7XG4gICAgICB4OiBjbGllbnRYLFxuICAgICAgeTogY2xpZW50WSxcbiAgICAgIGlkOiBtaXJyb3IyLmdldElkKHRhcmdldCksXG4gICAgICB0aW1lT2Zmc2V0OiBub3dUaW1lc3RhbXAoKSAtIHRpbWVCYXNlbGluZVxuICAgIH0pO1xuICAgIHdyYXBwZWRDYih0eXBlb2YgRHJhZ0V2ZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIGV2dCBpbnN0YW5jZW9mIERyYWdFdmVudCA/IEluY3JlbWVudGFsU291cmNlLkRyYWcgOiBldnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ID8gSW5jcmVtZW50YWxTb3VyY2UuTW91c2VNb3ZlIDogSW5jcmVtZW50YWxTb3VyY2UuVG91Y2hNb3ZlKTtcbiAgfSksIHRocmVzaG9sZCwge1xuICAgIHRyYWlsaW5nOiBmYWxzZVxuICB9KSk7XG4gIGNvbnN0IGhhbmRsZXJzID0gW29uKFwibW91c2Vtb3ZlXCIsIHVwZGF0ZVBvc2l0aW9uLCBkb2MpLCBvbihcInRvdWNobW92ZVwiLCB1cGRhdGVQb3NpdGlvbiwgZG9jKSwgb24oXCJkcmFnXCIsIHVwZGF0ZVBvc2l0aW9uLCBkb2MpXTtcbiAgcmV0dXJuIGNhbGxiYWNrV3JhcHBlcigoKSA9PiB7XG4gICAgaGFuZGxlcnMuZm9yRWFjaChoID0+IGgoKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaW5pdE1vdXNlSW50ZXJhY3Rpb25PYnNlcnZlcih7XG4gIG1vdXNlSW50ZXJhY3Rpb25DYixcbiAgZG9jLFxuICBtaXJyb3I6IG1pcnJvcjIsXG4gIGJsb2NrQ2xhc3MsXG4gIGJsb2NrU2VsZWN0b3IsXG4gIHVuYmxvY2tTZWxlY3RvcixcbiAgc2FtcGxpbmdcbn0pIHtcbiAgaWYgKHNhbXBsaW5nLm1vdXNlSW50ZXJhY3Rpb24gPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuICgpID0+IHt9O1xuICB9XG4gIGNvbnN0IGRpc2FibGVNYXAgPSBzYW1wbGluZy5tb3VzZUludGVyYWN0aW9uID09PSB0cnVlIHx8IHNhbXBsaW5nLm1vdXNlSW50ZXJhY3Rpb24gPT09IHZvaWQgMCA/IHt9IDogc2FtcGxpbmcubW91c2VJbnRlcmFjdGlvbjtcbiAgY29uc3QgaGFuZGxlcnMgPSBbXTtcbiAgbGV0IGN1cnJlbnRQb2ludGVyVHlwZSA9IG51bGw7XG4gIGNvbnN0IGdldEhhbmRsZXIgPSBldmVudEtleSA9PiB7XG4gICAgcmV0dXJuIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGV2ZW50KTtcbiAgICAgIGlmIChpc0Jsb2NrZWQodGFyZ2V0LCBibG9ja0NsYXNzLCBibG9ja1NlbGVjdG9yLCB1bmJsb2NrU2VsZWN0b3IsIHRydWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxldCBwb2ludGVyVHlwZSA9IG51bGw7XG4gICAgICBsZXQgdGhpc0V2ZW50S2V5ID0gZXZlbnRLZXk7XG4gICAgICBpZiAoXCJwb2ludGVyVHlwZVwiIGluIGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQucG9pbnRlclR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwibW91c2VcIjpcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlID0gUG9pbnRlclR5cGVzLk1vdXNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcInRvdWNoXCI6XG4gICAgICAgICAgICBwb2ludGVyVHlwZSA9IFBvaW50ZXJUeXBlcy5Ub3VjaDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJwZW5cIjpcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlID0gUG9pbnRlclR5cGVzLlBlbjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb2ludGVyVHlwZSA9PT0gUG9pbnRlclR5cGVzLlRvdWNoKSB7XG4gICAgICAgICAgaWYgKE1vdXNlSW50ZXJhY3Rpb25zW2V2ZW50S2V5XSA9PT0gTW91c2VJbnRlcmFjdGlvbnMuTW91c2VEb3duKSB7XG4gICAgICAgICAgICB0aGlzRXZlbnRLZXkgPSBcIlRvdWNoU3RhcnRcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKE1vdXNlSW50ZXJhY3Rpb25zW2V2ZW50S2V5XSA9PT0gTW91c2VJbnRlcmFjdGlvbnMuTW91c2VVcCkge1xuICAgICAgICAgICAgdGhpc0V2ZW50S2V5ID0gXCJUb3VjaEVuZFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwb2ludGVyVHlwZSA9PT0gUG9pbnRlclR5cGVzLlBlbikgO1xuICAgICAgfSBlbHNlIGlmIChsZWdhY3lfaXNUb3VjaEV2ZW50KGV2ZW50KSkge1xuICAgICAgICBwb2ludGVyVHlwZSA9IFBvaW50ZXJUeXBlcy5Ub3VjaDtcbiAgICAgIH1cbiAgICAgIGlmIChwb2ludGVyVHlwZSAhPT0gbnVsbCkge1xuICAgICAgICBjdXJyZW50UG9pbnRlclR5cGUgPSBwb2ludGVyVHlwZTtcbiAgICAgICAgaWYgKHRoaXNFdmVudEtleS5zdGFydHNXaXRoKFwiVG91Y2hcIikgJiYgcG9pbnRlclR5cGUgPT09IFBvaW50ZXJUeXBlcy5Ub3VjaCB8fCB0aGlzRXZlbnRLZXkuc3RhcnRzV2l0aChcIk1vdXNlXCIpICYmIHBvaW50ZXJUeXBlID09PSBQb2ludGVyVHlwZXMuTW91c2UpIHtcbiAgICAgICAgICBwb2ludGVyVHlwZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoTW91c2VJbnRlcmFjdGlvbnNbZXZlbnRLZXldID09PSBNb3VzZUludGVyYWN0aW9ucy5DbGljaykge1xuICAgICAgICBwb2ludGVyVHlwZSA9IGN1cnJlbnRQb2ludGVyVHlwZTtcbiAgICAgICAgY3VycmVudFBvaW50ZXJUeXBlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGUyID0gbGVnYWN5X2lzVG91Y2hFdmVudChldmVudCkgPyBldmVudC5jaGFuZ2VkVG91Y2hlc1swXSA6IGV2ZW50O1xuICAgICAgaWYgKCFlMikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBpZCA9IG1pcnJvcjIuZ2V0SWQodGFyZ2V0KTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY2xpZW50WCxcbiAgICAgICAgY2xpZW50WVxuICAgICAgfSA9IGUyO1xuICAgICAgY2FsbGJhY2tXcmFwcGVyKG1vdXNlSW50ZXJhY3Rpb25DYikoe1xuICAgICAgICB0eXBlOiBNb3VzZUludGVyYWN0aW9uc1t0aGlzRXZlbnRLZXldLFxuICAgICAgICBpZCxcbiAgICAgICAgeDogY2xpZW50WCxcbiAgICAgICAgeTogY2xpZW50WSxcbiAgICAgICAgLi4uKHBvaW50ZXJUeXBlICE9PSBudWxsICYmIHtcbiAgICAgICAgICBwb2ludGVyVHlwZVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcbiAgT2JqZWN0LmtleXMoTW91c2VJbnRlcmFjdGlvbnMpLmZpbHRlcihrZXkgPT4gTnVtYmVyLmlzTmFOKE51bWJlcihrZXkpKSAmJiAha2V5LmVuZHNXaXRoKFwiX0RlcGFydGVkXCIpICYmIGRpc2FibGVNYXBba2V5XSAhPT0gZmFsc2UpLmZvckVhY2goZXZlbnRLZXkgPT4ge1xuICAgIGxldCBldmVudE5hbWUgPSB0b0xvd2VyQ2FzZShldmVudEtleSk7XG4gICAgY29uc3QgaGFuZGxlciA9IGdldEhhbmRsZXIoZXZlbnRLZXkpO1xuICAgIGlmICh3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgICBzd2l0Y2ggKE1vdXNlSW50ZXJhY3Rpb25zW2V2ZW50S2V5XSkge1xuICAgICAgICBjYXNlIE1vdXNlSW50ZXJhY3Rpb25zLk1vdXNlRG93bjpcbiAgICAgICAgY2FzZSBNb3VzZUludGVyYWN0aW9ucy5Nb3VzZVVwOlxuICAgICAgICAgIGV2ZW50TmFtZSA9IGV2ZW50TmFtZS5yZXBsYWNlKFwibW91c2VcIiwgXCJwb2ludGVyXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE1vdXNlSW50ZXJhY3Rpb25zLlRvdWNoU3RhcnQ6XG4gICAgICAgIGNhc2UgTW91c2VJbnRlcmFjdGlvbnMuVG91Y2hFbmQ6XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVycy5wdXNoKG9uKGV2ZW50TmFtZSwgaGFuZGxlciwgZG9jKSk7XG4gIH0pO1xuICByZXR1cm4gY2FsbGJhY2tXcmFwcGVyKCgpID0+IHtcbiAgICBoYW5kbGVycy5mb3JFYWNoKGggPT4gaCgpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBpbml0U2Nyb2xsT2JzZXJ2ZXIoe1xuICBzY3JvbGxDYixcbiAgZG9jLFxuICBtaXJyb3I6IG1pcnJvcjIsXG4gIGJsb2NrQ2xhc3MsXG4gIGJsb2NrU2VsZWN0b3IsXG4gIHVuYmxvY2tTZWxlY3RvcixcbiAgc2FtcGxpbmdcbn0pIHtcbiAgY29uc3QgdXBkYXRlUG9zaXRpb24gPSBjYWxsYmFja1dyYXBwZXIodGhyb3R0bGUkMShjYWxsYmFja1dyYXBwZXIoZXZ0ID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBnZXRFdmVudFRhcmdldChldnQpO1xuICAgIGlmICghdGFyZ2V0IHx8IGlzQmxvY2tlZCh0YXJnZXQsIGJsb2NrQ2xhc3MsIGJsb2NrU2VsZWN0b3IsIHVuYmxvY2tTZWxlY3RvciwgdHJ1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaWQgPSBtaXJyb3IyLmdldElkKHRhcmdldCk7XG4gICAgaWYgKHRhcmdldCA9PT0gZG9jICYmIGRvYy5kZWZhdWx0Vmlldykge1xuICAgICAgY29uc3Qgc2Nyb2xsTGVmdFRvcCA9IGdldFdpbmRvd1Njcm9sbChkb2MuZGVmYXVsdFZpZXcpO1xuICAgICAgc2Nyb2xsQ2Ioe1xuICAgICAgICBpZCxcbiAgICAgICAgeDogc2Nyb2xsTGVmdFRvcC5sZWZ0LFxuICAgICAgICB5OiBzY3JvbGxMZWZ0VG9wLnRvcFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjcm9sbENiKHtcbiAgICAgICAgaWQsXG4gICAgICAgIHg6IHRhcmdldC5zY3JvbGxMZWZ0LFxuICAgICAgICB5OiB0YXJnZXQuc2Nyb2xsVG9wXG4gICAgICB9KTtcbiAgICB9XG4gIH0pLCBzYW1wbGluZy5zY3JvbGwgfHwgMTAwKSk7XG4gIHJldHVybiBvbihcInNjcm9sbFwiLCB1cGRhdGVQb3NpdGlvbiwgZG9jKTtcbn1cbmZ1bmN0aW9uIGluaXRWaWV3cG9ydFJlc2l6ZU9ic2VydmVyKHtcbiAgdmlld3BvcnRSZXNpemVDYlxufSwge1xuICB3aW5cbn0pIHtcbiAgbGV0IGxhc3RIID0gLTE7XG4gIGxldCBsYXN0VyA9IC0xO1xuICBjb25zdCB1cGRhdGVEaW1lbnNpb24gPSBjYWxsYmFja1dyYXBwZXIodGhyb3R0bGUkMShjYWxsYmFja1dyYXBwZXIoKCkgPT4ge1xuICAgIGNvbnN0IGhlaWdodCA9IGdldFdpbmRvd0hlaWdodCgpO1xuICAgIGNvbnN0IHdpZHRoID0gZ2V0V2luZG93V2lkdGgoKTtcbiAgICBpZiAobGFzdEggIT09IGhlaWdodCB8fCBsYXN0VyAhPT0gd2lkdGgpIHtcbiAgICAgIHZpZXdwb3J0UmVzaXplQ2Ioe1xuICAgICAgICB3aWR0aDogTnVtYmVyKHdpZHRoKSxcbiAgICAgICAgaGVpZ2h0OiBOdW1iZXIoaGVpZ2h0KVxuICAgICAgfSk7XG4gICAgICBsYXN0SCA9IGhlaWdodDtcbiAgICAgIGxhc3RXID0gd2lkdGg7XG4gICAgfVxuICB9KSwgMjAwKSk7XG4gIHJldHVybiBvbihcInJlc2l6ZVwiLCB1cGRhdGVEaW1lbnNpb24sIHdpbik7XG59XG5jb25zdCBJTlBVVF9UQUdTID0gW1wiSU5QVVRcIiwgXCJURVhUQVJFQVwiLCBcIlNFTEVDVFwiXTtcbmNvbnN0IGxhc3RJbnB1dFZhbHVlTWFwID0gLyogQF9fUFVSRV9fICovbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIGluaXRJbnB1dE9ic2VydmVyKHtcbiAgaW5wdXRDYixcbiAgZG9jLFxuICBtaXJyb3I6IG1pcnJvcjIsXG4gIGJsb2NrQ2xhc3MsXG4gIGJsb2NrU2VsZWN0b3IsXG4gIHVuYmxvY2tTZWxlY3RvcixcbiAgaWdub3JlQ2xhc3MsXG4gIGlnbm9yZVNlbGVjdG9yLFxuICBtYXNrSW5wdXRPcHRpb25zLFxuICBtYXNrSW5wdXRGbixcbiAgc2FtcGxpbmcsXG4gIHVzZXJUcmlnZ2VyZWRPbklucHV0LFxuICBtYXNrVGV4dENsYXNzLFxuICB1bm1hc2tUZXh0Q2xhc3MsXG4gIG1hc2tUZXh0U2VsZWN0b3IsXG4gIHVubWFza1RleHRTZWxlY3RvclxufSkge1xuICBmdW5jdGlvbiBldmVudEhhbmRsZXIoZXZlbnQpIHtcbiAgICBsZXQgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpO1xuICAgIGNvbnN0IHVzZXJUcmlnZ2VyZWQgPSBldmVudC5pc1RydXN0ZWQ7XG4gICAgY29uc3QgdGFnTmFtZSA9IHRhcmdldCAmJiB0b1VwcGVyQ2FzZSh0YXJnZXQudGFnTmFtZSk7XG4gICAgaWYgKHRhZ05hbWUgPT09IFwiT1BUSU9OXCIpIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgIGlmICghdGFyZ2V0IHx8ICF0YWdOYW1lIHx8IElOUFVUX1RBR1MuaW5kZXhPZih0YWdOYW1lKSA8IDAgfHwgaXNCbG9ja2VkKHRhcmdldCwgYmxvY2tDbGFzcywgYmxvY2tTZWxlY3RvciwgdW5ibG9ja1NlbGVjdG9yLCB0cnVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlbCA9IHRhcmdldDtcbiAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGlnbm9yZUNsYXNzKSB8fCBpZ25vcmVTZWxlY3RvciAmJiBlbC5tYXRjaGVzKGlnbm9yZVNlbGVjdG9yKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gZ2V0SW5wdXRUeXBlKHRhcmdldCk7XG4gICAgbGV0IHRleHQgPSBnZXRJbnB1dFZhbHVlKGVsLCB0YWdOYW1lLCB0eXBlKTtcbiAgICBsZXQgaXNDaGVja2VkID0gZmFsc2U7XG4gICAgY29uc3QgaXNJbnB1dE1hc2tlZCA9IHNob3VsZE1hc2tJbnB1dCh7XG4gICAgICBtYXNrSW5wdXRPcHRpb25zLFxuICAgICAgdGFnTmFtZSxcbiAgICAgIHR5cGVcbiAgICB9KTtcbiAgICBjb25zdCBmb3JjZU1hc2sgPSBuZWVkTWFza2luZ1RleHQodGFyZ2V0LCBtYXNrVGV4dENsYXNzLCBtYXNrVGV4dFNlbGVjdG9yLCB1bm1hc2tUZXh0Q2xhc3MsIHVubWFza1RleHRTZWxlY3RvciwgaXNJbnB1dE1hc2tlZCk7XG4gICAgaWYgKHR5cGUgPT09IFwicmFkaW9cIiB8fCB0eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgIGlzQ2hlY2tlZCA9IHRhcmdldC5jaGVja2VkO1xuICAgIH1cbiAgICB0ZXh0ID0gbWFza0lucHV0VmFsdWUoe1xuICAgICAgaXNNYXNrZWQ6IGZvcmNlTWFzayxcbiAgICAgIGVsZW1lbnQ6IHRhcmdldCxcbiAgICAgIHZhbHVlOiB0ZXh0LFxuICAgICAgbWFza0lucHV0Rm5cbiAgICB9KTtcbiAgICBjYldpdGhEZWR1cCh0YXJnZXQsIHVzZXJUcmlnZ2VyZWRPbklucHV0ID8ge1xuICAgICAgdGV4dCxcbiAgICAgIGlzQ2hlY2tlZCxcbiAgICAgIHVzZXJUcmlnZ2VyZWRcbiAgICB9IDoge1xuICAgICAgdGV4dCxcbiAgICAgIGlzQ2hlY2tlZFxuICAgIH0pO1xuICAgIGNvbnN0IG5hbWUgPSB0YXJnZXQubmFtZTtcbiAgICBpZiAodHlwZSA9PT0gXCJyYWRpb1wiICYmIG5hbWUgJiYgaXNDaGVja2VkKSB7XG4gICAgICBkb2MucXVlcnlTZWxlY3RvckFsbChgaW5wdXRbdHlwZT1cInJhZGlvXCJdW25hbWU9XCIke25hbWV9XCJdYCkuZm9yRWFjaChlbDIgPT4ge1xuICAgICAgICBpZiAoZWwyICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICBjb25zdCB0ZXh0MiA9IG1hc2tJbnB1dFZhbHVlKHtcbiAgICAgICAgICAgIC8vIHNoYXJlIG1hc2sgYmVoYXZpb3Igb2YgYHRhcmdldGBcbiAgICAgICAgICAgIGlzTWFza2VkOiBmb3JjZU1hc2ssXG4gICAgICAgICAgICBlbGVtZW50OiBlbDIsXG4gICAgICAgICAgICB2YWx1ZTogZ2V0SW5wdXRWYWx1ZShlbDIsIHRhZ05hbWUsIHR5cGUpLFxuICAgICAgICAgICAgbWFza0lucHV0Rm5cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjYldpdGhEZWR1cChlbDIsIHVzZXJUcmlnZ2VyZWRPbklucHV0ID8ge1xuICAgICAgICAgICAgdGV4dDogdGV4dDIsXG4gICAgICAgICAgICBpc0NoZWNrZWQ6ICFpc0NoZWNrZWQsXG4gICAgICAgICAgICB1c2VyVHJpZ2dlcmVkOiBmYWxzZVxuICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICB0ZXh0OiB0ZXh0MixcbiAgICAgICAgICAgIGlzQ2hlY2tlZDogIWlzQ2hlY2tlZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gY2JXaXRoRGVkdXAodGFyZ2V0LCB2Mikge1xuICAgIGNvbnN0IGxhc3RJbnB1dFZhbHVlID0gbGFzdElucHV0VmFsdWVNYXAuZ2V0KHRhcmdldCk7XG4gICAgaWYgKCFsYXN0SW5wdXRWYWx1ZSB8fCBsYXN0SW5wdXRWYWx1ZS50ZXh0ICE9PSB2Mi50ZXh0IHx8IGxhc3RJbnB1dFZhbHVlLmlzQ2hlY2tlZCAhPT0gdjIuaXNDaGVja2VkKSB7XG4gICAgICBsYXN0SW5wdXRWYWx1ZU1hcC5zZXQodGFyZ2V0LCB2Mik7XG4gICAgICBjb25zdCBpZCA9IG1pcnJvcjIuZ2V0SWQodGFyZ2V0KTtcbiAgICAgIGNhbGxiYWNrV3JhcHBlcihpbnB1dENiKSh7XG4gICAgICAgIC4uLnYyLFxuICAgICAgICBpZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGV2ZW50cyA9IHNhbXBsaW5nLmlucHV0ID09PSBcImxhc3RcIiA/IFtcImNoYW5nZVwiXSA6IFtcImlucHV0XCIsIFwiY2hhbmdlXCJdO1xuICBjb25zdCBoYW5kbGVycyA9IGV2ZW50cy5tYXAoZXZlbnROYW1lID0+IG9uKGV2ZW50TmFtZSwgY2FsbGJhY2tXcmFwcGVyKGV2ZW50SGFuZGxlciksIGRvYykpO1xuICBjb25zdCBjdXJyZW50V2luZG93ID0gZG9jLmRlZmF1bHRWaWV3O1xuICBpZiAoIWN1cnJlbnRXaW5kb3cpIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaGFuZGxlcnMuZm9yRWFjaChoID0+IGgoKSk7XG4gICAgfTtcbiAgfVxuICBjb25zdCBwcm9wZXJ0eURlc2NyaXB0b3IgPSBjdXJyZW50V2luZG93Lk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY3VycmVudFdpbmRvdy5IVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZSwgXCJ2YWx1ZVwiKTtcbiAgY29uc3QgaG9va1Byb3BlcnRpZXMgPSBbW2N1cnJlbnRXaW5kb3cuSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUsIFwidmFsdWVcIl0sIFtjdXJyZW50V2luZG93LkhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLCBcImNoZWNrZWRcIl0sIFtjdXJyZW50V2luZG93LkhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZSwgXCJ2YWx1ZVwiXSwgW2N1cnJlbnRXaW5kb3cuSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUsIFwidmFsdWVcIl0sXG4gIC8vIFNvbWUgVUkgbGlicmFyeSB1c2Ugc2VsZWN0ZWRJbmRleCB0byBzZXQgc2VsZWN0IHZhbHVlXG4gIFtjdXJyZW50V2luZG93LkhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZEluZGV4XCJdLCBbY3VycmVudFdpbmRvdy5IVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIl1dO1xuICBpZiAocHJvcGVydHlEZXNjcmlwdG9yICYmIHByb3BlcnR5RGVzY3JpcHRvci5zZXQpIHtcbiAgICBoYW5kbGVycy5wdXNoKC4uLmhvb2tQcm9wZXJ0aWVzLm1hcChwID0+IGhvb2tTZXR0ZXIocFswXSwgcFsxXSwge1xuICAgICAgc2V0KCkge1xuICAgICAgICBjYWxsYmFja1dyYXBwZXIoZXZlbnRIYW5kbGVyKSh7XG4gICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgIGlzVHJ1c3RlZDogZmFsc2VcbiAgICAgICAgICAvLyB1c2VyVHJpZ2dlcmVkIHRvIGZhbHNlIGFzIHRoaXMgY291bGQgd2VsbCBiZSBwcm9ncmFtbWF0aWNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwgZmFsc2UsIGN1cnJlbnRXaW5kb3cpKSk7XG4gIH1cbiAgcmV0dXJuIGNhbGxiYWNrV3JhcHBlcigoKSA9PiB7XG4gICAgaGFuZGxlcnMuZm9yRWFjaChoID0+IGgoKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0TmVzdGVkQ1NTUnVsZVBvc2l0aW9ucyhydWxlKSB7XG4gIGNvbnN0IHBvc2l0aW9ucyA9IFtdO1xuICBmdW5jdGlvbiByZWN1cnNlKGNoaWxkUnVsZSwgcG9zKSB7XG4gICAgaWYgKGhhc05lc3RlZENTU1J1bGUoXCJDU1NHcm91cGluZ1J1bGVcIikgJiYgY2hpbGRSdWxlLnBhcmVudFJ1bGUgaW5zdGFuY2VvZiBDU1NHcm91cGluZ1J1bGUgfHwgaGFzTmVzdGVkQ1NTUnVsZShcIkNTU01lZGlhUnVsZVwiKSAmJiBjaGlsZFJ1bGUucGFyZW50UnVsZSBpbnN0YW5jZW9mIENTU01lZGlhUnVsZSB8fCBoYXNOZXN0ZWRDU1NSdWxlKFwiQ1NTU3VwcG9ydHNSdWxlXCIpICYmIGNoaWxkUnVsZS5wYXJlbnRSdWxlIGluc3RhbmNlb2YgQ1NTU3VwcG9ydHNSdWxlIHx8IGhhc05lc3RlZENTU1J1bGUoXCJDU1NDb25kaXRpb25SdWxlXCIpICYmIGNoaWxkUnVsZS5wYXJlbnRSdWxlIGluc3RhbmNlb2YgQ1NTQ29uZGl0aW9uUnVsZSkge1xuICAgICAgY29uc3QgcnVsZXMyID0gQXJyYXkuZnJvbShjaGlsZFJ1bGUucGFyZW50UnVsZS5jc3NSdWxlcyk7XG4gICAgICBjb25zdCBpbmRleCA9IHJ1bGVzMi5pbmRleE9mKGNoaWxkUnVsZSk7XG4gICAgICBwb3MudW5zaGlmdChpbmRleCk7XG4gICAgfSBlbHNlIGlmIChjaGlsZFJ1bGUucGFyZW50U3R5bGVTaGVldCkge1xuICAgICAgY29uc3QgcnVsZXMyID0gQXJyYXkuZnJvbShjaGlsZFJ1bGUucGFyZW50U3R5bGVTaGVldC5jc3NSdWxlcyk7XG4gICAgICBjb25zdCBpbmRleCA9IHJ1bGVzMi5pbmRleE9mKGNoaWxkUnVsZSk7XG4gICAgICBwb3MudW5zaGlmdChpbmRleCk7XG4gICAgfVxuICAgIHJldHVybiBwb3M7XG4gIH1cbiAgcmV0dXJuIHJlY3Vyc2UocnVsZSwgcG9zaXRpb25zKTtcbn1cbmZ1bmN0aW9uIGdldElkQW5kU3R5bGVJZChzaGVldCwgbWlycm9yMiwgc3R5bGVNaXJyb3IpIHtcbiAgbGV0IGlkLCBzdHlsZUlkO1xuICBpZiAoIXNoZWV0KSByZXR1cm4ge307XG4gIGlmIChzaGVldC5vd25lck5vZGUpIGlkID0gbWlycm9yMi5nZXRJZChzaGVldC5vd25lck5vZGUpO2Vsc2Ugc3R5bGVJZCA9IHN0eWxlTWlycm9yLmdldElkKHNoZWV0KTtcbiAgcmV0dXJuIHtcbiAgICBzdHlsZUlkLFxuICAgIGlkXG4gIH07XG59XG5mdW5jdGlvbiBpbml0U3R5bGVTaGVldE9ic2VydmVyKHtcbiAgc3R5bGVTaGVldFJ1bGVDYixcbiAgbWlycm9yOiBtaXJyb3IyLFxuICBzdHlsZXNoZWV0TWFuYWdlclxufSwge1xuICB3aW5cbn0pIHtcbiAgaWYgKCF3aW4uQ1NTU3R5bGVTaGVldCB8fCAhd2luLkNTU1N0eWxlU2hlZXQucHJvdG90eXBlKSB7XG4gICAgcmV0dXJuICgpID0+IHt9O1xuICB9XG4gIGNvbnN0IGluc2VydFJ1bGUgPSB3aW4uQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUuaW5zZXJ0UnVsZTtcbiAgd2luLkNTU1N0eWxlU2hlZXQucHJvdG90eXBlLmluc2VydFJ1bGUgPSBuZXcgUHJveHkoaW5zZXJ0UnVsZSwge1xuICAgIGFwcGx5OiBjYWxsYmFja1dyYXBwZXIoKHRhcmdldCwgdGhpc0FyZywgYXJndW1lbnRzTGlzdCkgPT4ge1xuICAgICAgY29uc3QgW3J1bGUsIGluZGV4XSA9IGFyZ3VtZW50c0xpc3Q7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGlkLFxuICAgICAgICBzdHlsZUlkXG4gICAgICB9ID0gZ2V0SWRBbmRTdHlsZUlkKHRoaXNBcmcsIG1pcnJvcjIsIHN0eWxlc2hlZXRNYW5hZ2VyLnN0eWxlTWlycm9yKTtcbiAgICAgIGlmIChpZCAmJiBpZCAhPT0gLTEgfHwgc3R5bGVJZCAmJiBzdHlsZUlkICE9PSAtMSkge1xuICAgICAgICBzdHlsZVNoZWV0UnVsZUNiKHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBzdHlsZUlkLFxuICAgICAgICAgIGFkZHM6IFt7XG4gICAgICAgICAgICBydWxlLFxuICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXJnZXQuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzTGlzdCk7XG4gICAgfSlcbiAgfSk7XG4gIGNvbnN0IGRlbGV0ZVJ1bGUgPSB3aW4uQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUuZGVsZXRlUnVsZTtcbiAgd2luLkNTU1N0eWxlU2hlZXQucHJvdG90eXBlLmRlbGV0ZVJ1bGUgPSBuZXcgUHJveHkoZGVsZXRlUnVsZSwge1xuICAgIGFwcGx5OiBjYWxsYmFja1dyYXBwZXIoKHRhcmdldCwgdGhpc0FyZywgYXJndW1lbnRzTGlzdCkgPT4ge1xuICAgICAgY29uc3QgW2luZGV4XSA9IGFyZ3VtZW50c0xpc3Q7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGlkLFxuICAgICAgICBzdHlsZUlkXG4gICAgICB9ID0gZ2V0SWRBbmRTdHlsZUlkKHRoaXNBcmcsIG1pcnJvcjIsIHN0eWxlc2hlZXRNYW5hZ2VyLnN0eWxlTWlycm9yKTtcbiAgICAgIGlmIChpZCAmJiBpZCAhPT0gLTEgfHwgc3R5bGVJZCAmJiBzdHlsZUlkICE9PSAtMSkge1xuICAgICAgICBzdHlsZVNoZWV0UnVsZUNiKHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBzdHlsZUlkLFxuICAgICAgICAgIHJlbW92ZXM6IFt7XG4gICAgICAgICAgICBpbmRleFxuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHNMaXN0KTtcbiAgICB9KVxuICB9KTtcbiAgbGV0IHJlcGxhY2U7XG4gIGlmICh3aW4uQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUucmVwbGFjZSkge1xuICAgIHJlcGxhY2UgPSB3aW4uQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUucmVwbGFjZTtcbiAgICB3aW4uQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUucmVwbGFjZSA9IG5ldyBQcm94eShyZXBsYWNlLCB7XG4gICAgICBhcHBseTogY2FsbGJhY2tXcmFwcGVyKCh0YXJnZXQsIHRoaXNBcmcsIGFyZ3VtZW50c0xpc3QpID0+IHtcbiAgICAgICAgY29uc3QgW3RleHRdID0gYXJndW1lbnRzTGlzdDtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHN0eWxlSWRcbiAgICAgICAgfSA9IGdldElkQW5kU3R5bGVJZCh0aGlzQXJnLCBtaXJyb3IyLCBzdHlsZXNoZWV0TWFuYWdlci5zdHlsZU1pcnJvcik7XG4gICAgICAgIGlmIChpZCAmJiBpZCAhPT0gLTEgfHwgc3R5bGVJZCAmJiBzdHlsZUlkICE9PSAtMSkge1xuICAgICAgICAgIHN0eWxlU2hlZXRSdWxlQ2Ioe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBzdHlsZUlkLFxuICAgICAgICAgICAgcmVwbGFjZTogdGV4dFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzTGlzdCk7XG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIGxldCByZXBsYWNlU3luYztcbiAgaWYgKHdpbi5DU1NTdHlsZVNoZWV0LnByb3RvdHlwZS5yZXBsYWNlU3luYykge1xuICAgIHJlcGxhY2VTeW5jID0gd2luLkNTU1N0eWxlU2hlZXQucHJvdG90eXBlLnJlcGxhY2VTeW5jO1xuICAgIHdpbi5DU1NTdHlsZVNoZWV0LnByb3RvdHlwZS5yZXBsYWNlU3luYyA9IG5ldyBQcm94eShyZXBsYWNlU3luYywge1xuICAgICAgYXBwbHk6IGNhbGxiYWNrV3JhcHBlcigodGFyZ2V0LCB0aGlzQXJnLCBhcmd1bWVudHNMaXN0KSA9PiB7XG4gICAgICAgIGNvbnN0IFt0ZXh0XSA9IGFyZ3VtZW50c0xpc3Q7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBzdHlsZUlkXG4gICAgICAgIH0gPSBnZXRJZEFuZFN0eWxlSWQodGhpc0FyZywgbWlycm9yMiwgc3R5bGVzaGVldE1hbmFnZXIuc3R5bGVNaXJyb3IpO1xuICAgICAgICBpZiAoaWQgJiYgaWQgIT09IC0xIHx8IHN0eWxlSWQgJiYgc3R5bGVJZCAhPT0gLTEpIHtcbiAgICAgICAgICBzdHlsZVNoZWV0UnVsZUNiKHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgc3R5bGVJZCxcbiAgICAgICAgICAgIHJlcGxhY2VTeW5jOiB0ZXh0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHNMaXN0KTtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cbiAgY29uc3Qgc3VwcG9ydGVkTmVzdGVkQ1NTUnVsZVR5cGVzID0ge307XG4gIGlmIChjYW5Nb25rZXlQYXRjaE5lc3RlZENTU1J1bGUoXCJDU1NHcm91cGluZ1J1bGVcIikpIHtcbiAgICBzdXBwb3J0ZWROZXN0ZWRDU1NSdWxlVHlwZXMuQ1NTR3JvdXBpbmdSdWxlID0gd2luLkNTU0dyb3VwaW5nUnVsZTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoY2FuTW9ua2V5UGF0Y2hOZXN0ZWRDU1NSdWxlKFwiQ1NTTWVkaWFSdWxlXCIpKSB7XG4gICAgICBzdXBwb3J0ZWROZXN0ZWRDU1NSdWxlVHlwZXMuQ1NTTWVkaWFSdWxlID0gd2luLkNTU01lZGlhUnVsZTtcbiAgICB9XG4gICAgaWYgKGNhbk1vbmtleVBhdGNoTmVzdGVkQ1NTUnVsZShcIkNTU0NvbmRpdGlvblJ1bGVcIikpIHtcbiAgICAgIHN1cHBvcnRlZE5lc3RlZENTU1J1bGVUeXBlcy5DU1NDb25kaXRpb25SdWxlID0gd2luLkNTU0NvbmRpdGlvblJ1bGU7XG4gICAgfVxuICAgIGlmIChjYW5Nb25rZXlQYXRjaE5lc3RlZENTU1J1bGUoXCJDU1NTdXBwb3J0c1J1bGVcIikpIHtcbiAgICAgIHN1cHBvcnRlZE5lc3RlZENTU1J1bGVUeXBlcy5DU1NTdXBwb3J0c1J1bGUgPSB3aW4uQ1NTU3VwcG9ydHNSdWxlO1xuICAgIH1cbiAgfVxuICBjb25zdCB1bm1vZGlmaWVkRnVuY3Rpb25zID0ge307XG4gIE9iamVjdC5lbnRyaWVzKHN1cHBvcnRlZE5lc3RlZENTU1J1bGVUeXBlcykuZm9yRWFjaCgoW3R5cGVLZXksIHR5cGVdKSA9PiB7XG4gICAgdW5tb2RpZmllZEZ1bmN0aW9uc1t0eXBlS2V5XSA9IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbiAgICAgIGluc2VydFJ1bGU6IHR5cGUucHJvdG90eXBlLmluc2VydFJ1bGUsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgICBkZWxldGVSdWxlOiB0eXBlLnByb3RvdHlwZS5kZWxldGVSdWxlXG4gICAgfTtcbiAgICB0eXBlLnByb3RvdHlwZS5pbnNlcnRSdWxlID0gbmV3IFByb3h5KHVubW9kaWZpZWRGdW5jdGlvbnNbdHlwZUtleV0uaW5zZXJ0UnVsZSwge1xuICAgICAgYXBwbHk6IGNhbGxiYWNrV3JhcHBlcigodGFyZ2V0LCB0aGlzQXJnLCBhcmd1bWVudHNMaXN0KSA9PiB7XG4gICAgICAgIGNvbnN0IFtydWxlLCBpbmRleF0gPSBhcmd1bWVudHNMaXN0O1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgc3R5bGVJZFxuICAgICAgICB9ID0gZ2V0SWRBbmRTdHlsZUlkKHRoaXNBcmcucGFyZW50U3R5bGVTaGVldCwgbWlycm9yMiwgc3R5bGVzaGVldE1hbmFnZXIuc3R5bGVNaXJyb3IpO1xuICAgICAgICBpZiAoaWQgJiYgaWQgIT09IC0xIHx8IHN0eWxlSWQgJiYgc3R5bGVJZCAhPT0gLTEpIHtcbiAgICAgICAgICBzdHlsZVNoZWV0UnVsZUNiKHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgc3R5bGVJZCxcbiAgICAgICAgICAgIGFkZHM6IFt7XG4gICAgICAgICAgICAgIHJ1bGUsXG4gICAgICAgICAgICAgIGluZGV4OiBbLi4uZ2V0TmVzdGVkQ1NTUnVsZVBvc2l0aW9ucyh0aGlzQXJnKSwgaW5kZXggfHwgMFxuICAgICAgICAgICAgICAvLyBkZWZhdWx0cyB0byAwXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHNMaXN0KTtcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgdHlwZS5wcm90b3R5cGUuZGVsZXRlUnVsZSA9IG5ldyBQcm94eSh1bm1vZGlmaWVkRnVuY3Rpb25zW3R5cGVLZXldLmRlbGV0ZVJ1bGUsIHtcbiAgICAgIGFwcGx5OiBjYWxsYmFja1dyYXBwZXIoKHRhcmdldCwgdGhpc0FyZywgYXJndW1lbnRzTGlzdCkgPT4ge1xuICAgICAgICBjb25zdCBbaW5kZXhdID0gYXJndW1lbnRzTGlzdDtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHN0eWxlSWRcbiAgICAgICAgfSA9IGdldElkQW5kU3R5bGVJZCh0aGlzQXJnLnBhcmVudFN0eWxlU2hlZXQsIG1pcnJvcjIsIHN0eWxlc2hlZXRNYW5hZ2VyLnN0eWxlTWlycm9yKTtcbiAgICAgICAgaWYgKGlkICYmIGlkICE9PSAtMSB8fCBzdHlsZUlkICYmIHN0eWxlSWQgIT09IC0xKSB7XG4gICAgICAgICAgc3R5bGVTaGVldFJ1bGVDYih7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHN0eWxlSWQsXG4gICAgICAgICAgICByZW1vdmVzOiBbe1xuICAgICAgICAgICAgICBpbmRleDogWy4uLmdldE5lc3RlZENTU1J1bGVQb3NpdGlvbnModGhpc0FyZyksIGluZGV4XVxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50c0xpc3QpO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBjYWxsYmFja1dyYXBwZXIoKCkgPT4ge1xuICAgIHdpbi5DU1NTdHlsZVNoZWV0LnByb3RvdHlwZS5pbnNlcnRSdWxlID0gaW5zZXJ0UnVsZTtcbiAgICB3aW4uQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUuZGVsZXRlUnVsZSA9IGRlbGV0ZVJ1bGU7XG4gICAgcmVwbGFjZSAmJiAod2luLkNTU1N0eWxlU2hlZXQucHJvdG90eXBlLnJlcGxhY2UgPSByZXBsYWNlKTtcbiAgICByZXBsYWNlU3luYyAmJiAod2luLkNTU1N0eWxlU2hlZXQucHJvdG90eXBlLnJlcGxhY2VTeW5jID0gcmVwbGFjZVN5bmMpO1xuICAgIE9iamVjdC5lbnRyaWVzKHN1cHBvcnRlZE5lc3RlZENTU1J1bGVUeXBlcykuZm9yRWFjaCgoW3R5cGVLZXksIHR5cGVdKSA9PiB7XG4gICAgICB0eXBlLnByb3RvdHlwZS5pbnNlcnRSdWxlID0gdW5tb2RpZmllZEZ1bmN0aW9uc1t0eXBlS2V5XS5pbnNlcnRSdWxlO1xuICAgICAgdHlwZS5wcm90b3R5cGUuZGVsZXRlUnVsZSA9IHVubW9kaWZpZWRGdW5jdGlvbnNbdHlwZUtleV0uZGVsZXRlUnVsZTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBpbml0QWRvcHRlZFN0eWxlU2hlZXRPYnNlcnZlcih7XG4gIG1pcnJvcjogbWlycm9yMixcbiAgc3R5bGVzaGVldE1hbmFnZXJcbn0sIGhvc3QpIHtcbiAgbGV0IGhvc3RJZCA9IG51bGw7XG4gIGlmIChob3N0Lm5vZGVOYW1lID09PSBcIiNkb2N1bWVudFwiKSBob3N0SWQgPSBtaXJyb3IyLmdldElkKGhvc3QpO2Vsc2UgaG9zdElkID0gbWlycm9yMi5nZXRJZChob3N0Lmhvc3QpO1xuICBjb25zdCBwYXRjaFRhcmdldCA9IGhvc3Qubm9kZU5hbWUgPT09IFwiI2RvY3VtZW50XCIgPyBob3N0LmRlZmF1bHRWaWV3Py5Eb2N1bWVudCA6IGhvc3Qub3duZXJEb2N1bWVudD8uZGVmYXVsdFZpZXc/LlNoYWRvd1Jvb3Q7XG4gIGNvbnN0IG9yaWdpbmFsUHJvcGVydHlEZXNjcmlwdG9yID0gcGF0Y2hUYXJnZXQ/LnByb3RvdHlwZSA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocGF0Y2hUYXJnZXQ/LnByb3RvdHlwZSwgXCJhZG9wdGVkU3R5bGVTaGVldHNcIikgOiB2b2lkIDA7XG4gIGlmIChob3N0SWQgPT09IG51bGwgfHwgaG9zdElkID09PSAtMSB8fCAhcGF0Y2hUYXJnZXQgfHwgIW9yaWdpbmFsUHJvcGVydHlEZXNjcmlwdG9yKSByZXR1cm4gKCkgPT4ge307XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShob3N0LCBcImFkb3B0ZWRTdHlsZVNoZWV0c1wiLCB7XG4gICAgY29uZmlndXJhYmxlOiBvcmlnaW5hbFByb3BlcnR5RGVzY3JpcHRvci5jb25maWd1cmFibGUsXG4gICAgZW51bWVyYWJsZTogb3JpZ2luYWxQcm9wZXJ0eURlc2NyaXB0b3IuZW51bWVyYWJsZSxcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gb3JpZ2luYWxQcm9wZXJ0eURlc2NyaXB0b3IuZ2V0Py5jYWxsKHRoaXMpO1xuICAgIH0sXG4gICAgc2V0KHNoZWV0cykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxQcm9wZXJ0eURlc2NyaXB0b3Iuc2V0Py5jYWxsKHRoaXMsIHNoZWV0cyk7XG4gICAgICBpZiAoaG9zdElkICE9PSBudWxsICYmIGhvc3RJZCAhPT0gLTEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdHlsZXNoZWV0TWFuYWdlci5hZG9wdFN0eWxlU2hlZXRzKHNoZWV0cywgaG9zdElkKTtcbiAgICAgICAgfSBjYXRjaCAoZTIpIHt9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBjYWxsYmFja1dyYXBwZXIoKCkgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShob3N0LCBcImFkb3B0ZWRTdHlsZVNoZWV0c1wiLCB7XG4gICAgICBjb25maWd1cmFibGU6IG9yaWdpbmFsUHJvcGVydHlEZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSxcbiAgICAgIGVudW1lcmFibGU6IG9yaWdpbmFsUHJvcGVydHlEZXNjcmlwdG9yLmVudW1lcmFibGUsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgICBnZXQ6IG9yaWdpbmFsUHJvcGVydHlEZXNjcmlwdG9yLmdldCxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbiAgICAgIHNldDogb3JpZ2luYWxQcm9wZXJ0eURlc2NyaXB0b3Iuc2V0XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaW5pdFN0eWxlRGVjbGFyYXRpb25PYnNlcnZlcih7XG4gIHN0eWxlRGVjbGFyYXRpb25DYixcbiAgbWlycm9yOiBtaXJyb3IyLFxuICBpZ25vcmVDU1NBdHRyaWJ1dGVzLFxuICBzdHlsZXNoZWV0TWFuYWdlclxufSwge1xuICB3aW5cbn0pIHtcbiAgY29uc3Qgc2V0UHJvcGVydHkgPSB3aW4uQ1NTU3R5bGVEZWNsYXJhdGlvbi5wcm90b3R5cGUuc2V0UHJvcGVydHk7XG4gIHdpbi5DU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZS5zZXRQcm9wZXJ0eSA9IG5ldyBQcm94eShzZXRQcm9wZXJ0eSwge1xuICAgIGFwcGx5OiBjYWxsYmFja1dyYXBwZXIoKHRhcmdldCwgdGhpc0FyZywgYXJndW1lbnRzTGlzdCkgPT4ge1xuICAgICAgY29uc3QgW3Byb3BlcnR5LCB2YWx1ZSwgcHJpb3JpdHldID0gYXJndW1lbnRzTGlzdDtcbiAgICAgIGlmIChpZ25vcmVDU1NBdHRyaWJ1dGVzLmhhcyhwcm9wZXJ0eSkpIHtcbiAgICAgICAgcmV0dXJuIHNldFByb3BlcnR5LmFwcGx5KHRoaXNBcmcsIFtwcm9wZXJ0eSwgdmFsdWUsIHByaW9yaXR5XSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7XG4gICAgICAgIGlkLFxuICAgICAgICBzdHlsZUlkXG4gICAgICB9ID0gZ2V0SWRBbmRTdHlsZUlkKHRoaXNBcmcucGFyZW50UnVsZT8ucGFyZW50U3R5bGVTaGVldCwgbWlycm9yMiwgc3R5bGVzaGVldE1hbmFnZXIuc3R5bGVNaXJyb3IpO1xuICAgICAgaWYgKGlkICYmIGlkICE9PSAtMSB8fCBzdHlsZUlkICYmIHN0eWxlSWQgIT09IC0xKSB7XG4gICAgICAgIHN0eWxlRGVjbGFyYXRpb25DYih7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgc3R5bGVJZCxcbiAgICAgICAgICBzZXQ6IHtcbiAgICAgICAgICAgIHByb3BlcnR5LFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBwcmlvcml0eVxuICAgICAgICAgIH0sXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICBpbmRleDogZ2V0TmVzdGVkQ1NTUnVsZVBvc2l0aW9ucyh0aGlzQXJnLnBhcmVudFJ1bGUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHNMaXN0KTtcbiAgICB9KVxuICB9KTtcbiAgY29uc3QgcmVtb3ZlUHJvcGVydHkgPSB3aW4uQ1NTU3R5bGVEZWNsYXJhdGlvbi5wcm90b3R5cGUucmVtb3ZlUHJvcGVydHk7XG4gIHdpbi5DU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZS5yZW1vdmVQcm9wZXJ0eSA9IG5ldyBQcm94eShyZW1vdmVQcm9wZXJ0eSwge1xuICAgIGFwcGx5OiBjYWxsYmFja1dyYXBwZXIoKHRhcmdldCwgdGhpc0FyZywgYXJndW1lbnRzTGlzdCkgPT4ge1xuICAgICAgY29uc3QgW3Byb3BlcnR5XSA9IGFyZ3VtZW50c0xpc3Q7XG4gICAgICBpZiAoaWdub3JlQ1NTQXR0cmlidXRlcy5oYXMocHJvcGVydHkpKSB7XG4gICAgICAgIHJldHVybiByZW1vdmVQcm9wZXJ0eS5hcHBseSh0aGlzQXJnLCBbcHJvcGVydHldKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaWQsXG4gICAgICAgIHN0eWxlSWRcbiAgICAgIH0gPSBnZXRJZEFuZFN0eWxlSWQodGhpc0FyZy5wYXJlbnRSdWxlPy5wYXJlbnRTdHlsZVNoZWV0LCBtaXJyb3IyLCBzdHlsZXNoZWV0TWFuYWdlci5zdHlsZU1pcnJvcik7XG4gICAgICBpZiAoaWQgJiYgaWQgIT09IC0xIHx8IHN0eWxlSWQgJiYgc3R5bGVJZCAhPT0gLTEpIHtcbiAgICAgICAgc3R5bGVEZWNsYXJhdGlvbkNiKHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBzdHlsZUlkLFxuICAgICAgICAgIHJlbW92ZToge1xuICAgICAgICAgICAgcHJvcGVydHlcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgaW5kZXg6IGdldE5lc3RlZENTU1J1bGVQb3NpdGlvbnModGhpc0FyZy5wYXJlbnRSdWxlKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXJnZXQuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzTGlzdCk7XG4gICAgfSlcbiAgfSk7XG4gIHJldHVybiBjYWxsYmFja1dyYXBwZXIoKCkgPT4ge1xuICAgIHdpbi5DU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZS5zZXRQcm9wZXJ0eSA9IHNldFByb3BlcnR5O1xuICAgIHdpbi5DU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZS5yZW1vdmVQcm9wZXJ0eSA9IHJlbW92ZVByb3BlcnR5O1xuICB9KTtcbn1cbmZ1bmN0aW9uIGluaXRNZWRpYUludGVyYWN0aW9uT2JzZXJ2ZXIoe1xuICBtZWRpYUludGVyYWN0aW9uQ2IsXG4gIGJsb2NrQ2xhc3MsXG4gIGJsb2NrU2VsZWN0b3IsXG4gIHVuYmxvY2tTZWxlY3RvcixcbiAgbWlycm9yOiBtaXJyb3IyLFxuICBzYW1wbGluZyxcbiAgZG9jXG59KSB7XG4gIGNvbnN0IGhhbmRsZXIgPSBjYWxsYmFja1dyYXBwZXIodHlwZSA9PiB0aHJvdHRsZSQxKGNhbGxiYWNrV3JhcHBlcihldmVudCA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpO1xuICAgIGlmICghdGFyZ2V0IHx8IGlzQmxvY2tlZCh0YXJnZXQsIGJsb2NrQ2xhc3MsIGJsb2NrU2VsZWN0b3IsIHVuYmxvY2tTZWxlY3RvciwgdHJ1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgY3VycmVudFRpbWUsXG4gICAgICB2b2x1bWUsXG4gICAgICBtdXRlZCxcbiAgICAgIHBsYXliYWNrUmF0ZVxuICAgIH0gPSB0YXJnZXQ7XG4gICAgbWVkaWFJbnRlcmFjdGlvbkNiKHtcbiAgICAgIHR5cGUsXG4gICAgICBpZDogbWlycm9yMi5nZXRJZCh0YXJnZXQpLFxuICAgICAgY3VycmVudFRpbWUsXG4gICAgICB2b2x1bWUsXG4gICAgICBtdXRlZCxcbiAgICAgIHBsYXliYWNrUmF0ZVxuICAgIH0pO1xuICB9KSwgc2FtcGxpbmcubWVkaWEgfHwgNTAwKSk7XG4gIGNvbnN0IGhhbmRsZXJzID0gW29uKFwicGxheVwiLCBoYW5kbGVyKE1lZGlhSW50ZXJhY3Rpb25zLlBsYXkpLCBkb2MpLCBvbihcInBhdXNlXCIsIGhhbmRsZXIoTWVkaWFJbnRlcmFjdGlvbnMuUGF1c2UpLCBkb2MpLCBvbihcInNlZWtlZFwiLCBoYW5kbGVyKE1lZGlhSW50ZXJhY3Rpb25zLlNlZWtlZCksIGRvYyksIG9uKFwidm9sdW1lY2hhbmdlXCIsIGhhbmRsZXIoTWVkaWFJbnRlcmFjdGlvbnMuVm9sdW1lQ2hhbmdlKSwgZG9jKSwgb24oXCJyYXRlY2hhbmdlXCIsIGhhbmRsZXIoTWVkaWFJbnRlcmFjdGlvbnMuUmF0ZUNoYW5nZSksIGRvYyldO1xuICByZXR1cm4gY2FsbGJhY2tXcmFwcGVyKCgpID0+IHtcbiAgICBoYW5kbGVycy5mb3JFYWNoKGggPT4gaCgpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBpbml0Rm9udE9ic2VydmVyKHtcbiAgZm9udENiLFxuICBkb2Ncbn0pIHtcbiAgY29uc3Qgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuICBpZiAoIXdpbikge1xuICAgIHJldHVybiAoKSA9PiB7fTtcbiAgfVxuICBjb25zdCBoYW5kbGVycyA9IFtdO1xuICBjb25zdCBmb250TWFwID0gLyogQF9fUFVSRV9fICovbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgb3JpZ2luYWxGb250RmFjZSA9IHdpbi5Gb250RmFjZTtcbiAgd2luLkZvbnRGYWNlID0gZnVuY3Rpb24gRm9udEZhY2UyKGZhbWlseSwgc291cmNlLCBkZXNjcmlwdG9ycykge1xuICAgIGNvbnN0IGZvbnRGYWNlID0gbmV3IG9yaWdpbmFsRm9udEZhY2UoZmFtaWx5LCBzb3VyY2UsIGRlc2NyaXB0b3JzKTtcbiAgICBmb250TWFwLnNldChmb250RmFjZSwge1xuICAgICAgZmFtaWx5LFxuICAgICAgYnVmZmVyOiB0eXBlb2Ygc291cmNlICE9PSBcInN0cmluZ1wiLFxuICAgICAgZGVzY3JpcHRvcnMsXG4gICAgICBmb250U291cmNlOiB0eXBlb2Ygc291cmNlID09PSBcInN0cmluZ1wiID8gc291cmNlIDogSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShzb3VyY2UpKSlcbiAgICB9KTtcbiAgICByZXR1cm4gZm9udEZhY2U7XG4gIH07XG4gIGNvbnN0IHJlc3RvcmVIYW5kbGVyID0gcGF0Y2goZG9jLmZvbnRzLCBcImFkZFwiLCBmdW5jdGlvbiAob3JpZ2luYWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZvbnRGYWNlKSB7XG4gICAgICBzZXRUaW1lb3V0JDEoY2FsbGJhY2tXcmFwcGVyKCgpID0+IHtcbiAgICAgICAgY29uc3QgcCA9IGZvbnRNYXAuZ2V0KGZvbnRGYWNlKTtcbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICBmb250Q2IocCk7XG4gICAgICAgICAgZm9udE1hcC5kZWxldGUoZm9udEZhY2UpO1xuICAgICAgICB9XG4gICAgICB9KSwgMCk7XG4gICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgW2ZvbnRGYWNlXSk7XG4gICAgfTtcbiAgfSk7XG4gIGhhbmRsZXJzLnB1c2goKCkgPT4ge1xuICAgIHdpbi5Gb250RmFjZSA9IG9yaWdpbmFsRm9udEZhY2U7XG4gIH0pO1xuICBoYW5kbGVycy5wdXNoKHJlc3RvcmVIYW5kbGVyKTtcbiAgcmV0dXJuIGNhbGxiYWNrV3JhcHBlcigoKSA9PiB7XG4gICAgaGFuZGxlcnMuZm9yRWFjaChoID0+IGgoKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaW5pdFNlbGVjdGlvbk9ic2VydmVyKHBhcmFtKSB7XG4gIGNvbnN0IHtcbiAgICBkb2MsXG4gICAgbWlycm9yOiBtaXJyb3IyLFxuICAgIGJsb2NrQ2xhc3MsXG4gICAgYmxvY2tTZWxlY3RvcixcbiAgICB1bmJsb2NrU2VsZWN0b3IsXG4gICAgc2VsZWN0aW9uQ2JcbiAgfSA9IHBhcmFtO1xuICBsZXQgY29sbGFwc2VkID0gdHJ1ZTtcbiAgY29uc3QgdXBkYXRlU2VsZWN0aW9uID0gY2FsbGJhY2tXcmFwcGVyKCgpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBkb2MuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKCFzZWxlY3Rpb24gfHwgY29sbGFwc2VkICYmIHNlbGVjdGlvbj8uaXNDb2xsYXBzZWQpIHJldHVybjtcbiAgICBjb2xsYXBzZWQgPSBzZWxlY3Rpb24uaXNDb2xsYXBzZWQgfHwgZmFsc2U7XG4gICAgY29uc3QgcmFuZ2VzID0gW107XG4gICAgY29uc3QgY291bnQgPSBzZWxlY3Rpb24ucmFuZ2VDb3VudCB8fCAwO1xuICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBjb3VudDsgaTIrKykge1xuICAgICAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdChpMik7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHN0YXJ0Q29udGFpbmVyLFxuICAgICAgICBzdGFydE9mZnNldCxcbiAgICAgICAgZW5kQ29udGFpbmVyLFxuICAgICAgICBlbmRPZmZzZXRcbiAgICAgIH0gPSByYW5nZTtcbiAgICAgIGNvbnN0IGJsb2NrZWQgPSBpc0Jsb2NrZWQoc3RhcnRDb250YWluZXIsIGJsb2NrQ2xhc3MsIGJsb2NrU2VsZWN0b3IsIHVuYmxvY2tTZWxlY3RvciwgdHJ1ZSkgfHwgaXNCbG9ja2VkKGVuZENvbnRhaW5lciwgYmxvY2tDbGFzcywgYmxvY2tTZWxlY3RvciwgdW5ibG9ja1NlbGVjdG9yLCB0cnVlKTtcbiAgICAgIGlmIChibG9ja2VkKSBjb250aW51ZTtcbiAgICAgIHJhbmdlcy5wdXNoKHtcbiAgICAgICAgc3RhcnQ6IG1pcnJvcjIuZ2V0SWQoc3RhcnRDb250YWluZXIpLFxuICAgICAgICBzdGFydE9mZnNldCxcbiAgICAgICAgZW5kOiBtaXJyb3IyLmdldElkKGVuZENvbnRhaW5lciksXG4gICAgICAgIGVuZE9mZnNldFxuICAgICAgfSk7XG4gICAgfVxuICAgIHNlbGVjdGlvbkNiKHtcbiAgICAgIHJhbmdlc1xuICAgIH0pO1xuICB9KTtcbiAgdXBkYXRlU2VsZWN0aW9uKCk7XG4gIHJldHVybiBvbihcInNlbGVjdGlvbmNoYW5nZVwiLCB1cGRhdGVTZWxlY3Rpb24pO1xufVxuZnVuY3Rpb24gaW5pdEN1c3RvbUVsZW1lbnRPYnNlcnZlcih7XG4gIGRvYyxcbiAgY3VzdG9tRWxlbWVudENiXG59KSB7XG4gIGNvbnN0IHdpbiA9IGRvYy5kZWZhdWx0VmlldztcbiAgaWYgKCF3aW4gfHwgIXdpbi5jdXN0b21FbGVtZW50cykgcmV0dXJuICgpID0+IHt9O1xuICBjb25zdCByZXN0b3JlSGFuZGxlciA9IHBhdGNoKHdpbi5jdXN0b21FbGVtZW50cywgXCJkZWZpbmVcIiwgZnVuY3Rpb24gKG9yaWdpbmFsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lLCBjb25zdHJ1Y3Rvciwgb3B0aW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY3VzdG9tRWxlbWVudENiKHtcbiAgICAgICAgICBkZWZpbmU6IHtcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZTIpIHt9XG4gICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgW25hbWUsIGNvbnN0cnVjdG9yLCBvcHRpb25zXSk7XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiByZXN0b3JlSGFuZGxlcjtcbn1cbmZ1bmN0aW9uIGluaXRPYnNlcnZlcnMobzIsIF9ob29rcyA9IHt9KSB7XG4gIGNvbnN0IGN1cnJlbnRXaW5kb3cgPSBvMi5kb2MuZGVmYXVsdFZpZXc7XG4gIGlmICghY3VycmVudFdpbmRvdykge1xuICAgIHJldHVybiAoKSA9PiB7fTtcbiAgfVxuICBsZXQgbXV0YXRpb25PYnNlcnZlcjtcbiAgaWYgKG8yLnJlY29yZERPTSkge1xuICAgIG11dGF0aW9uT2JzZXJ2ZXIgPSBpbml0TXV0YXRpb25PYnNlcnZlcihvMiwgbzIuZG9jKTtcbiAgfVxuICBjb25zdCBtb3VzZW1vdmVIYW5kbGVyID0gaW5pdE1vdmVPYnNlcnZlcihvMik7XG4gIGNvbnN0IG1vdXNlSW50ZXJhY3Rpb25IYW5kbGVyID0gaW5pdE1vdXNlSW50ZXJhY3Rpb25PYnNlcnZlcihvMik7XG4gIGNvbnN0IHNjcm9sbEhhbmRsZXIgPSBpbml0U2Nyb2xsT2JzZXJ2ZXIobzIpO1xuICBjb25zdCB2aWV3cG9ydFJlc2l6ZUhhbmRsZXIgPSBpbml0Vmlld3BvcnRSZXNpemVPYnNlcnZlcihvMiwge1xuICAgIHdpbjogY3VycmVudFdpbmRvd1xuICB9KTtcbiAgY29uc3QgaW5wdXRIYW5kbGVyID0gaW5pdElucHV0T2JzZXJ2ZXIobzIpO1xuICBjb25zdCBtZWRpYUludGVyYWN0aW9uSGFuZGxlciA9IGluaXRNZWRpYUludGVyYWN0aW9uT2JzZXJ2ZXIobzIpO1xuICBsZXQgc3R5bGVTaGVldE9ic2VydmVyID0gKCkgPT4ge307XG4gIGxldCBhZG9wdGVkU3R5bGVTaGVldE9ic2VydmVyID0gKCkgPT4ge307XG4gIGxldCBzdHlsZURlY2xhcmF0aW9uT2JzZXJ2ZXIgPSAoKSA9PiB7fTtcbiAgbGV0IGZvbnRPYnNlcnZlciA9ICgpID0+IHt9O1xuICBpZiAobzIucmVjb3JkRE9NKSB7XG4gICAgc3R5bGVTaGVldE9ic2VydmVyID0gaW5pdFN0eWxlU2hlZXRPYnNlcnZlcihvMiwge1xuICAgICAgd2luOiBjdXJyZW50V2luZG93XG4gICAgfSk7XG4gICAgYWRvcHRlZFN0eWxlU2hlZXRPYnNlcnZlciA9IGluaXRBZG9wdGVkU3R5bGVTaGVldE9ic2VydmVyKG8yLCBvMi5kb2MpO1xuICAgIHN0eWxlRGVjbGFyYXRpb25PYnNlcnZlciA9IGluaXRTdHlsZURlY2xhcmF0aW9uT2JzZXJ2ZXIobzIsIHtcbiAgICAgIHdpbjogY3VycmVudFdpbmRvd1xuICAgIH0pO1xuICAgIGlmIChvMi5jb2xsZWN0Rm9udHMpIHtcbiAgICAgIGZvbnRPYnNlcnZlciA9IGluaXRGb250T2JzZXJ2ZXIobzIpO1xuICAgIH1cbiAgfVxuICBjb25zdCBzZWxlY3Rpb25PYnNlcnZlciA9IGluaXRTZWxlY3Rpb25PYnNlcnZlcihvMik7XG4gIGNvbnN0IGN1c3RvbUVsZW1lbnRPYnNlcnZlciA9IGluaXRDdXN0b21FbGVtZW50T2JzZXJ2ZXIobzIpO1xuICBjb25zdCBwbHVnaW5IYW5kbGVycyA9IFtdO1xuICBmb3IgKGNvbnN0IHBsdWdpbiBvZiBvMi5wbHVnaW5zKSB7XG4gICAgcGx1Z2luSGFuZGxlcnMucHVzaChwbHVnaW4ub2JzZXJ2ZXIocGx1Z2luLmNhbGxiYWNrLCBjdXJyZW50V2luZG93LCBwbHVnaW4ub3B0aW9ucykpO1xuICB9XG4gIHJldHVybiBjYWxsYmFja1dyYXBwZXIoKCkgPT4ge1xuICAgIG11dGF0aW9uQnVmZmVycy5mb3JFYWNoKGIgPT4gYi5yZXNldCgpKTtcbiAgICBtdXRhdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgbW91c2Vtb3ZlSGFuZGxlcigpO1xuICAgIG1vdXNlSW50ZXJhY3Rpb25IYW5kbGVyKCk7XG4gICAgc2Nyb2xsSGFuZGxlcigpO1xuICAgIHZpZXdwb3J0UmVzaXplSGFuZGxlcigpO1xuICAgIGlucHV0SGFuZGxlcigpO1xuICAgIG1lZGlhSW50ZXJhY3Rpb25IYW5kbGVyKCk7XG4gICAgc3R5bGVTaGVldE9ic2VydmVyKCk7XG4gICAgYWRvcHRlZFN0eWxlU2hlZXRPYnNlcnZlcigpO1xuICAgIHN0eWxlRGVjbGFyYXRpb25PYnNlcnZlcigpO1xuICAgIGZvbnRPYnNlcnZlcigpO1xuICAgIHNlbGVjdGlvbk9ic2VydmVyKCk7XG4gICAgY3VzdG9tRWxlbWVudE9ic2VydmVyKCk7XG4gICAgcGx1Z2luSGFuZGxlcnMuZm9yRWFjaChoID0+IGgoKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaGFzTmVzdGVkQ1NTUnVsZShwcm9wKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93W3Byb3BdICE9PSBcInVuZGVmaW5lZFwiO1xufVxuZnVuY3Rpb24gY2FuTW9ua2V5UGF0Y2hOZXN0ZWRDU1NSdWxlKHByb3ApIHtcbiAgcmV0dXJuIEJvb2xlYW4odHlwZW9mIHdpbmRvd1twcm9wXSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAvLyBOb3RlOiBHZW5lcmFsbHksIHRoaXMgY2hlY2sgX3Nob3VsZG4ndF8gYmUgbmVjZXNzYXJ5XG4gIC8vIEhvd2V2ZXIsIGluIHNvbWUgc2NlbmFyaW9zIChlLmcuIGpzZG9tKSB0aGlzIGNhbiBzb21ldGltZXMgZmFpbCwgc28gd2UgY2hlY2sgZm9yIGl0IGhlcmVcbiAgd2luZG93W3Byb3BdLnByb3RvdHlwZSAmJiBcImluc2VydFJ1bGVcIiBpbiB3aW5kb3dbcHJvcF0ucHJvdG90eXBlICYmIFwiZGVsZXRlUnVsZVwiIGluIHdpbmRvd1twcm9wXS5wcm90b3R5cGUpO1xufVxuY2xhc3MgQ3Jvc3NPcmlnaW5JZnJhbWVNaXJyb3Ige1xuICBjb25zdHJ1Y3RvcihnZW5lcmF0ZUlkRm4pIHtcbiAgICB0aGlzLmdlbmVyYXRlSWRGbiA9IGdlbmVyYXRlSWRGbjtcbiAgICB0aGlzLmlmcmFtZUlkVG9SZW1vdGVJZE1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gICAgdGhpcy5pZnJhbWVSZW1vdGVJZFRvSWRNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuICB9XG4gIGdldElkKGlmcmFtZSwgcmVtb3RlSWQsIGlkVG9SZW1vdGVNYXAsIHJlbW90ZVRvSWRNYXApIHtcbiAgICBjb25zdCBpZFRvUmVtb3RlSWRNYXAgPSBpZFRvUmVtb3RlTWFwIHx8IHRoaXMuZ2V0SWRUb1JlbW90ZUlkTWFwKGlmcmFtZSk7XG4gICAgY29uc3QgcmVtb3RlSWRUb0lkTWFwID0gcmVtb3RlVG9JZE1hcCB8fCB0aGlzLmdldFJlbW90ZUlkVG9JZE1hcChpZnJhbWUpO1xuICAgIGxldCBpZCA9IGlkVG9SZW1vdGVJZE1hcC5nZXQocmVtb3RlSWQpO1xuICAgIGlmICghaWQpIHtcbiAgICAgIGlkID0gdGhpcy5nZW5lcmF0ZUlkRm4oKTtcbiAgICAgIGlkVG9SZW1vdGVJZE1hcC5zZXQocmVtb3RlSWQsIGlkKTtcbiAgICAgIHJlbW90ZUlkVG9JZE1hcC5zZXQoaWQsIHJlbW90ZUlkKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIGdldElkcyhpZnJhbWUsIHJlbW90ZUlkKSB7XG4gICAgY29uc3QgaWRUb1JlbW90ZUlkTWFwID0gdGhpcy5nZXRJZFRvUmVtb3RlSWRNYXAoaWZyYW1lKTtcbiAgICBjb25zdCByZW1vdGVJZFRvSWRNYXAgPSB0aGlzLmdldFJlbW90ZUlkVG9JZE1hcChpZnJhbWUpO1xuICAgIHJldHVybiByZW1vdGVJZC5tYXAoaWQgPT4gdGhpcy5nZXRJZChpZnJhbWUsIGlkLCBpZFRvUmVtb3RlSWRNYXAsIHJlbW90ZUlkVG9JZE1hcCkpO1xuICB9XG4gIGdldFJlbW90ZUlkKGlmcmFtZSwgaWQsIG1hcCkge1xuICAgIGNvbnN0IHJlbW90ZUlkVG9JZE1hcCA9IG1hcCB8fCB0aGlzLmdldFJlbW90ZUlkVG9JZE1hcChpZnJhbWUpO1xuICAgIGlmICh0eXBlb2YgaWQgIT09IFwibnVtYmVyXCIpIHJldHVybiBpZDtcbiAgICBjb25zdCByZW1vdGVJZCA9IHJlbW90ZUlkVG9JZE1hcC5nZXQoaWQpO1xuICAgIGlmICghcmVtb3RlSWQpIHJldHVybiAtMTtcbiAgICByZXR1cm4gcmVtb3RlSWQ7XG4gIH1cbiAgZ2V0UmVtb3RlSWRzKGlmcmFtZSwgaWRzKSB7XG4gICAgY29uc3QgcmVtb3RlSWRUb0lkTWFwID0gdGhpcy5nZXRSZW1vdGVJZFRvSWRNYXAoaWZyYW1lKTtcbiAgICByZXR1cm4gaWRzLm1hcChpZCA9PiB0aGlzLmdldFJlbW90ZUlkKGlmcmFtZSwgaWQsIHJlbW90ZUlkVG9JZE1hcCkpO1xuICB9XG4gIHJlc2V0KGlmcmFtZSkge1xuICAgIGlmICghaWZyYW1lKSB7XG4gICAgICB0aGlzLmlmcmFtZUlkVG9SZW1vdGVJZE1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gICAgICB0aGlzLmlmcmFtZVJlbW90ZUlkVG9JZE1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaWZyYW1lSWRUb1JlbW90ZUlkTWFwLmRlbGV0ZShpZnJhbWUpO1xuICAgIHRoaXMuaWZyYW1lUmVtb3RlSWRUb0lkTWFwLmRlbGV0ZShpZnJhbWUpO1xuICB9XG4gIGdldElkVG9SZW1vdGVJZE1hcChpZnJhbWUpIHtcbiAgICBsZXQgaWRUb1JlbW90ZUlkTWFwID0gdGhpcy5pZnJhbWVJZFRvUmVtb3RlSWRNYXAuZ2V0KGlmcmFtZSk7XG4gICAgaWYgKCFpZFRvUmVtb3RlSWRNYXApIHtcbiAgICAgIGlkVG9SZW1vdGVJZE1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBNYXAoKTtcbiAgICAgIHRoaXMuaWZyYW1lSWRUb1JlbW90ZUlkTWFwLnNldChpZnJhbWUsIGlkVG9SZW1vdGVJZE1hcCk7XG4gICAgfVxuICAgIHJldHVybiBpZFRvUmVtb3RlSWRNYXA7XG4gIH1cbiAgZ2V0UmVtb3RlSWRUb0lkTWFwKGlmcmFtZSkge1xuICAgIGxldCByZW1vdGVJZFRvSWRNYXAgPSB0aGlzLmlmcmFtZVJlbW90ZUlkVG9JZE1hcC5nZXQoaWZyYW1lKTtcbiAgICBpZiAoIXJlbW90ZUlkVG9JZE1hcCkge1xuICAgICAgcmVtb3RlSWRUb0lkTWFwID0gLyogQF9fUFVSRV9fICovbmV3IE1hcCgpO1xuICAgICAgdGhpcy5pZnJhbWVSZW1vdGVJZFRvSWRNYXAuc2V0KGlmcmFtZSwgcmVtb3RlSWRUb0lkTWFwKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW90ZUlkVG9JZE1hcDtcbiAgfVxufVxuY2xhc3MgSWZyYW1lTWFuYWdlck5vb3Age1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNyb3NzT3JpZ2luSWZyYW1lTWlycm9yID0gbmV3IENyb3NzT3JpZ2luSWZyYW1lTWlycm9yKGdlbklkKTtcbiAgICB0aGlzLmNyb3NzT3JpZ2luSWZyYW1lUm9vdElkTWFwID0gLyogQF9fUFVSRV9fICovbmV3IFdlYWtNYXAoKTtcbiAgfVxuICBhZGRJZnJhbWUoKSB7fVxuICBhZGRMb2FkTGlzdGVuZXIoKSB7fVxuICBhdHRhY2hJZnJhbWUoKSB7fVxufVxuY2xhc3MgSWZyYW1lTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLmlmcmFtZXMgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuICAgIHRoaXMuY3Jvc3NPcmlnaW5JZnJhbWVNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuICAgIHRoaXMuY3Jvc3NPcmlnaW5JZnJhbWVNaXJyb3IgPSBuZXcgQ3Jvc3NPcmlnaW5JZnJhbWVNaXJyb3IoZ2VuSWQpO1xuICAgIHRoaXMuY3Jvc3NPcmlnaW5JZnJhbWVSb290SWRNYXAgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha01hcCgpO1xuICAgIHRoaXMubXV0YXRpb25DYiA9IG9wdGlvbnMubXV0YXRpb25DYjtcbiAgICB0aGlzLndyYXBwZWRFbWl0ID0gb3B0aW9ucy53cmFwcGVkRW1pdDtcbiAgICB0aGlzLnN0eWxlc2hlZXRNYW5hZ2VyID0gb3B0aW9ucy5zdHlsZXNoZWV0TWFuYWdlcjtcbiAgICB0aGlzLnJlY29yZENyb3NzT3JpZ2luSWZyYW1lcyA9IG9wdGlvbnMucmVjb3JkQ3Jvc3NPcmlnaW5JZnJhbWVzO1xuICAgIHRoaXMuY3Jvc3NPcmlnaW5JZnJhbWVTdHlsZU1pcnJvciA9IG5ldyBDcm9zc09yaWdpbklmcmFtZU1pcnJvcih0aGlzLnN0eWxlc2hlZXRNYW5hZ2VyLnN0eWxlTWlycm9yLmdlbmVyYXRlSWQuYmluZCh0aGlzLnN0eWxlc2hlZXRNYW5hZ2VyLnN0eWxlTWlycm9yKSk7XG4gICAgdGhpcy5taXJyb3IgPSBvcHRpb25zLm1pcnJvcjtcbiAgICBpZiAodGhpcy5yZWNvcmRDcm9zc09yaWdpbklmcmFtZXMpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLmhhbmRsZU1lc3NhZ2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XG4gIGFkZElmcmFtZShpZnJhbWVFbCkge1xuICAgIHRoaXMuaWZyYW1lcy5zZXQoaWZyYW1lRWwsIHRydWUpO1xuICAgIGlmIChpZnJhbWVFbC5jb250ZW50V2luZG93KSB0aGlzLmNyb3NzT3JpZ2luSWZyYW1lTWFwLnNldChpZnJhbWVFbC5jb250ZW50V2luZG93LCBpZnJhbWVFbCk7XG4gIH1cbiAgYWRkTG9hZExpc3RlbmVyKGNiKSB7XG4gICAgdGhpcy5sb2FkTGlzdGVuZXIgPSBjYjtcbiAgfVxuICBhdHRhY2hJZnJhbWUoaWZyYW1lRWwsIGNoaWxkU24pIHtcbiAgICB0aGlzLm11dGF0aW9uQ2Ioe1xuICAgICAgYWRkczogW3tcbiAgICAgICAgcGFyZW50SWQ6IHRoaXMubWlycm9yLmdldElkKGlmcmFtZUVsKSxcbiAgICAgICAgbmV4dElkOiBudWxsLFxuICAgICAgICBub2RlOiBjaGlsZFNuXG4gICAgICB9XSxcbiAgICAgIHJlbW92ZXM6IFtdLFxuICAgICAgdGV4dHM6IFtdLFxuICAgICAgYXR0cmlidXRlczogW10sXG4gICAgICBpc0F0dGFjaElmcmFtZTogdHJ1ZVxuICAgIH0pO1xuICAgIGlmICh0aGlzLnJlY29yZENyb3NzT3JpZ2luSWZyYW1lcykgaWZyYW1lRWwuY29udGVudFdpbmRvdz8uYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5oYW5kbGVNZXNzYWdlLmJpbmQodGhpcykpO1xuICAgIHRoaXMubG9hZExpc3RlbmVyPy4oaWZyYW1lRWwpO1xuICAgIGNvbnN0IGlmcmFtZURvYyA9IGdldElGcmFtZUNvbnRlbnREb2N1bWVudChpZnJhbWVFbCk7XG4gICAgaWYgKGlmcmFtZURvYyAmJiBpZnJhbWVEb2MuYWRvcHRlZFN0eWxlU2hlZXRzICYmIGlmcmFtZURvYy5hZG9wdGVkU3R5bGVTaGVldHMubGVuZ3RoID4gMCkgdGhpcy5zdHlsZXNoZWV0TWFuYWdlci5hZG9wdFN0eWxlU2hlZXRzKGlmcmFtZURvYy5hZG9wdGVkU3R5bGVTaGVldHMsIHRoaXMubWlycm9yLmdldElkKGlmcmFtZURvYykpO1xuICB9XG4gIGhhbmRsZU1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGNvbnN0IGNyb3NzT3JpZ2luTWVzc2FnZUV2ZW50ID0gbWVzc2FnZTtcbiAgICBpZiAoY3Jvc3NPcmlnaW5NZXNzYWdlRXZlbnQuZGF0YS50eXBlICE9PSBcInJyd2ViXCIgfHxcbiAgICAvLyBUbyBmaWx0ZXIgb3V0IHRoZSBycndlYiBtZXNzYWdlcyB3aGljaCBhcmUgZm9yd2FyZGVkIGJ5IHNvbWUgc2l0ZXMuXG4gICAgY3Jvc3NPcmlnaW5NZXNzYWdlRXZlbnQub3JpZ2luICE9PSBjcm9zc09yaWdpbk1lc3NhZ2VFdmVudC5kYXRhLm9yaWdpbikgcmV0dXJuO1xuICAgIGNvbnN0IGlmcmFtZVNvdXJjZVdpbmRvdyA9IG1lc3NhZ2Uuc291cmNlO1xuICAgIGlmICghaWZyYW1lU291cmNlV2luZG93KSByZXR1cm47XG4gICAgY29uc3QgaWZyYW1lRWwgPSB0aGlzLmNyb3NzT3JpZ2luSWZyYW1lTWFwLmdldChtZXNzYWdlLnNvdXJjZSk7XG4gICAgaWYgKCFpZnJhbWVFbCkgcmV0dXJuO1xuICAgIGNvbnN0IHRyYW5zZm9ybWVkRXZlbnQgPSB0aGlzLnRyYW5zZm9ybUNyb3NzT3JpZ2luRXZlbnQoaWZyYW1lRWwsIGNyb3NzT3JpZ2luTWVzc2FnZUV2ZW50LmRhdGEuZXZlbnQpO1xuICAgIGlmICh0cmFuc2Zvcm1lZEV2ZW50KSB0aGlzLndyYXBwZWRFbWl0KHRyYW5zZm9ybWVkRXZlbnQsIGNyb3NzT3JpZ2luTWVzc2FnZUV2ZW50LmRhdGEuaXNDaGVja291dCk7XG4gIH1cbiAgdHJhbnNmb3JtQ3Jvc3NPcmlnaW5FdmVudChpZnJhbWVFbCwgZTIpIHtcbiAgICBzd2l0Y2ggKGUyLnR5cGUpIHtcbiAgICAgIGNhc2UgRXZlbnRUeXBlLkZ1bGxTbmFwc2hvdDpcbiAgICAgICAge1xuICAgICAgICAgIHRoaXMuY3Jvc3NPcmlnaW5JZnJhbWVNaXJyb3IucmVzZXQoaWZyYW1lRWwpO1xuICAgICAgICAgIHRoaXMuY3Jvc3NPcmlnaW5JZnJhbWVTdHlsZU1pcnJvci5yZXNldChpZnJhbWVFbCk7XG4gICAgICAgICAgdGhpcy5yZXBsYWNlSWRPbk5vZGUoZTIuZGF0YS5ub2RlLCBpZnJhbWVFbCk7XG4gICAgICAgICAgY29uc3Qgcm9vdElkID0gZTIuZGF0YS5ub2RlLmlkO1xuICAgICAgICAgIHRoaXMuY3Jvc3NPcmlnaW5JZnJhbWVSb290SWRNYXAuc2V0KGlmcmFtZUVsLCByb290SWQpO1xuICAgICAgICAgIHRoaXMucGF0Y2hSb290SWRPbk5vZGUoZTIuZGF0YS5ub2RlLCByb290SWQpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0aW1lc3RhbXA6IGUyLnRpbWVzdGFtcCxcbiAgICAgICAgICAgIHR5cGU6IEV2ZW50VHlwZS5JbmNyZW1lbnRhbFNuYXBzaG90LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBzb3VyY2U6IEluY3JlbWVudGFsU291cmNlLk11dGF0aW9uLFxuICAgICAgICAgICAgICBhZGRzOiBbe1xuICAgICAgICAgICAgICAgIHBhcmVudElkOiB0aGlzLm1pcnJvci5nZXRJZChpZnJhbWVFbCksXG4gICAgICAgICAgICAgICAgbmV4dElkOiBudWxsLFxuICAgICAgICAgICAgICAgIG5vZGU6IGUyLmRhdGEubm9kZVxuICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgcmVtb3ZlczogW10sXG4gICAgICAgICAgICAgIHRleHRzOiBbXSxcbiAgICAgICAgICAgICAgYXR0cmlidXRlczogW10sXG4gICAgICAgICAgICAgIGlzQXR0YWNoSWZyYW1lOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBFdmVudFR5cGUuTWV0YTpcbiAgICAgIGNhc2UgRXZlbnRUeXBlLkxvYWQ6XG4gICAgICBjYXNlIEV2ZW50VHlwZS5Eb21Db250ZW50TG9hZGVkOlxuICAgICAgICB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICBjYXNlIEV2ZW50VHlwZS5QbHVnaW46XG4gICAgICAgIHtcbiAgICAgICAgICByZXR1cm4gZTI7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgRXZlbnRUeXBlLkN1c3RvbTpcbiAgICAgICAge1xuICAgICAgICAgIHRoaXMucmVwbGFjZUlkcyhlMi5kYXRhLnBheWxvYWQsIGlmcmFtZUVsLCBbXCJpZFwiLCBcInBhcmVudElkXCIsIFwicHJldmlvdXNJZFwiLCBcIm5leHRJZFwiXSk7XG4gICAgICAgICAgcmV0dXJuIGUyO1xuICAgICAgICB9XG4gICAgICBjYXNlIEV2ZW50VHlwZS5JbmNyZW1lbnRhbFNuYXBzaG90OlxuICAgICAgICB7XG4gICAgICAgICAgc3dpdGNoIChlMi5kYXRhLnNvdXJjZSkge1xuICAgICAgICAgICAgY2FzZSBJbmNyZW1lbnRhbFNvdXJjZS5NdXRhdGlvbjpcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGUyLmRhdGEuYWRkcy5mb3JFYWNoKG4yID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZUlkcyhuMiwgaWZyYW1lRWwsIFtcInBhcmVudElkXCIsIFwibmV4dElkXCIsIFwicHJldmlvdXNJZFwiXSk7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VJZE9uTm9kZShuMi5ub2RlLCBpZnJhbWVFbCk7XG4gICAgICAgICAgICAgICAgICBjb25zdCByb290SWQgPSB0aGlzLmNyb3NzT3JpZ2luSWZyYW1lUm9vdElkTWFwLmdldChpZnJhbWVFbCk7XG4gICAgICAgICAgICAgICAgICByb290SWQgJiYgdGhpcy5wYXRjaFJvb3RJZE9uTm9kZShuMi5ub2RlLCByb290SWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUyLmRhdGEucmVtb3Zlcy5mb3JFYWNoKG4yID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZUlkcyhuMiwgaWZyYW1lRWwsIFtcInBhcmVudElkXCIsIFwiaWRcIl0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUyLmRhdGEuYXR0cmlidXRlcy5mb3JFYWNoKG4yID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZUlkcyhuMiwgaWZyYW1lRWwsIFtcImlkXCJdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlMi5kYXRhLnRleHRzLmZvckVhY2gobjIgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYWNlSWRzKG4yLCBpZnJhbWVFbCwgW1wiaWRcIl0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBlMjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBJbmNyZW1lbnRhbFNvdXJjZS5EcmFnOlxuICAgICAgICAgICAgY2FzZSBJbmNyZW1lbnRhbFNvdXJjZS5Ub3VjaE1vdmU6XG4gICAgICAgICAgICBjYXNlIEluY3JlbWVudGFsU291cmNlLk1vdXNlTW92ZTpcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGUyLmRhdGEucG9zaXRpb25zLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VJZHMocCwgaWZyYW1lRWwsIFtcImlkXCJdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgSW5jcmVtZW50YWxTb3VyY2UuVmlld3BvcnRSZXNpemU6XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgSW5jcmVtZW50YWxTb3VyY2UuTWVkaWFJbnRlcmFjdGlvbjpcbiAgICAgICAgICAgIGNhc2UgSW5jcmVtZW50YWxTb3VyY2UuTW91c2VJbnRlcmFjdGlvbjpcbiAgICAgICAgICAgIGNhc2UgSW5jcmVtZW50YWxTb3VyY2UuU2Nyb2xsOlxuICAgICAgICAgICAgY2FzZSBJbmNyZW1lbnRhbFNvdXJjZS5DYW52YXNNdXRhdGlvbjpcbiAgICAgICAgICAgIGNhc2UgSW5jcmVtZW50YWxTb3VyY2UuSW5wdXQ6XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VJZHMoZTIuZGF0YSwgaWZyYW1lRWwsIFtcImlkXCJdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgSW5jcmVtZW50YWxTb3VyY2UuU3R5bGVTaGVldFJ1bGU6XG4gICAgICAgICAgICBjYXNlIEluY3JlbWVudGFsU291cmNlLlN0eWxlRGVjbGFyYXRpb246XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VJZHMoZTIuZGF0YSwgaWZyYW1lRWwsIFtcImlkXCJdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VTdHlsZUlkcyhlMi5kYXRhLCBpZnJhbWVFbCwgW1wic3R5bGVJZFwiXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIEluY3JlbWVudGFsU291cmNlLkZvbnQ6XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgSW5jcmVtZW50YWxTb3VyY2UuU2VsZWN0aW9uOlxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZTIuZGF0YS5yYW5nZXMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VJZHMocmFuZ2UsIGlmcmFtZUVsLCBbXCJzdGFydFwiLCBcImVuZFwiXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIEluY3JlbWVudGFsU291cmNlLkFkb3B0ZWRTdHlsZVNoZWV0OlxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBsYWNlSWRzKGUyLmRhdGEsIGlmcmFtZUVsLCBbXCJpZFwiXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBsYWNlU3R5bGVJZHMoZTIuZGF0YSwgaWZyYW1lRWwsIFtcInN0eWxlSWRzXCJdKTtcbiAgICAgICAgICAgICAgICBlMi5kYXRhLnN0eWxlcz8uZm9yRWFjaChzdHlsZSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VTdHlsZUlkcyhzdHlsZSwgaWZyYW1lRWwsIFtcInN0eWxlSWRcIl0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBlMjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmVwbGFjZShpZnJhbWVNaXJyb3IsIG9iaiwgaWZyYW1lRWwsIGtleXMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqW2tleV0pICYmIHR5cGVvZiBvYmpba2V5XSAhPT0gXCJudW1iZXJcIikgY29udGludWU7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmpba2V5XSkpIHtcbiAgICAgICAgb2JqW2tleV0gPSBpZnJhbWVNaXJyb3IuZ2V0SWRzKGlmcmFtZUVsLCBvYmpba2V5XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IGlmcmFtZU1pcnJvci5nZXRJZChpZnJhbWVFbCwgb2JqW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIHJlcGxhY2VJZHMob2JqLCBpZnJhbWVFbCwga2V5cykge1xuICAgIHJldHVybiB0aGlzLnJlcGxhY2UodGhpcy5jcm9zc09yaWdpbklmcmFtZU1pcnJvciwgb2JqLCBpZnJhbWVFbCwga2V5cyk7XG4gIH1cbiAgcmVwbGFjZVN0eWxlSWRzKG9iaiwgaWZyYW1lRWwsIGtleXMpIHtcbiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKHRoaXMuY3Jvc3NPcmlnaW5JZnJhbWVTdHlsZU1pcnJvciwgb2JqLCBpZnJhbWVFbCwga2V5cyk7XG4gIH1cbiAgcmVwbGFjZUlkT25Ob2RlKG5vZGUsIGlmcmFtZUVsKSB7XG4gICAgdGhpcy5yZXBsYWNlSWRzKG5vZGUsIGlmcmFtZUVsLCBbXCJpZFwiLCBcInJvb3RJZFwiXSk7XG4gICAgaWYgKFwiY2hpbGROb2Rlc1wiIGluIG5vZGUpIHtcbiAgICAgIG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgdGhpcy5yZXBsYWNlSWRPbk5vZGUoY2hpbGQsIGlmcmFtZUVsKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBwYXRjaFJvb3RJZE9uTm9kZShub2RlLCByb290SWQpIHtcbiAgICBpZiAobm9kZS50eXBlICE9PSBOb2RlVHlwZSQyLkRvY3VtZW50ICYmICFub2RlLnJvb3RJZCkgbm9kZS5yb290SWQgPSByb290SWQ7XG4gICAgaWYgKFwiY2hpbGROb2Rlc1wiIGluIG5vZGUpIHtcbiAgICAgIG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgdGhpcy5wYXRjaFJvb3RJZE9uTm9kZShjaGlsZCwgcm9vdElkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuY2xhc3MgU2hhZG93RG9tTWFuYWdlck5vb3Age1xuICBpbml0KCkge31cbiAgYWRkU2hhZG93Um9vdCgpIHt9XG4gIG9ic2VydmVBdHRhY2hTaGFkb3coKSB7fVxuICByZXNldCgpIHt9XG59XG5jbGFzcyBTaGFkb3dEb21NYW5hZ2VyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuc2hhZG93RG9tcyA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrU2V0KCk7XG4gICAgdGhpcy5yZXN0b3JlSGFuZGxlcnMgPSBbXTtcbiAgICB0aGlzLm11dGF0aW9uQ2IgPSBvcHRpb25zLm11dGF0aW9uQ2I7XG4gICAgdGhpcy5zY3JvbGxDYiA9IG9wdGlvbnMuc2Nyb2xsQ2I7XG4gICAgdGhpcy5ieXBhc3NPcHRpb25zID0gb3B0aW9ucy5ieXBhc3NPcHRpb25zO1xuICAgIHRoaXMubWlycm9yID0gb3B0aW9ucy5taXJyb3I7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cbiAgaW5pdCgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5wYXRjaEF0dGFjaFNoYWRvdyhFbGVtZW50LCBkb2N1bWVudCk7XG4gIH1cbiAgYWRkU2hhZG93Um9vdChzaGFkb3dSb290LCBkb2MpIHtcbiAgICBpZiAoIWlzTmF0aXZlU2hhZG93RG9tKHNoYWRvd1Jvb3QpKSByZXR1cm47XG4gICAgaWYgKHRoaXMuc2hhZG93RG9tcy5oYXMoc2hhZG93Um9vdCkpIHJldHVybjtcbiAgICB0aGlzLnNoYWRvd0RvbXMuYWRkKHNoYWRvd1Jvb3QpO1xuICAgIHRoaXMuYnlwYXNzT3B0aW9ucy5jYW52YXNNYW5hZ2VyLmFkZFNoYWRvd1Jvb3Qoc2hhZG93Um9vdCk7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBpbml0TXV0YXRpb25PYnNlcnZlcih7XG4gICAgICAuLi50aGlzLmJ5cGFzc09wdGlvbnMsXG4gICAgICBkb2MsXG4gICAgICBtdXRhdGlvbkNiOiB0aGlzLm11dGF0aW9uQ2IsXG4gICAgICBtaXJyb3I6IHRoaXMubWlycm9yLFxuICAgICAgc2hhZG93RG9tTWFuYWdlcjogdGhpc1xuICAgIH0sIHNoYWRvd1Jvb3QpO1xuICAgIHRoaXMucmVzdG9yZUhhbmRsZXJzLnB1c2goKCkgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpKTtcbiAgICB0aGlzLnJlc3RvcmVIYW5kbGVycy5wdXNoKGluaXRTY3JvbGxPYnNlcnZlcih7XG4gICAgICAuLi50aGlzLmJ5cGFzc09wdGlvbnMsXG4gICAgICBzY3JvbGxDYjogdGhpcy5zY3JvbGxDYixcbiAgICAgIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3ByYXZlZW5wdWdsaWEvMDgzMmRhNjg3ZWQ1YTVkN2EwOTA3MDQ2YzllZjE4MTNcbiAgICAgIC8vIHNjcm9sbCBpcyBub3QgYWxsb3dlZCB0byBwYXNzIHRoZSBib3VuZGFyeSwgc28gd2UgbmVlZCB0byBsaXN0ZW4gdGhlIHNoYWRvdyBkb2N1bWVudFxuICAgICAgZG9jOiBzaGFkb3dSb290LFxuICAgICAgbWlycm9yOiB0aGlzLm1pcnJvclxuICAgIH0pKTtcbiAgICBzZXRUaW1lb3V0JDEoKCkgPT4ge1xuICAgICAgaWYgKHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzICYmIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzLmxlbmd0aCA+IDApIHRoaXMuYnlwYXNzT3B0aW9ucy5zdHlsZXNoZWV0TWFuYWdlci5hZG9wdFN0eWxlU2hlZXRzKHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzLCB0aGlzLm1pcnJvci5nZXRJZChzaGFkb3dSb290Lmhvc3QpKTtcbiAgICAgIHRoaXMucmVzdG9yZUhhbmRsZXJzLnB1c2goaW5pdEFkb3B0ZWRTdHlsZVNoZWV0T2JzZXJ2ZXIoe1xuICAgICAgICBtaXJyb3I6IHRoaXMubWlycm9yLFxuICAgICAgICBzdHlsZXNoZWV0TWFuYWdlcjogdGhpcy5ieXBhc3NPcHRpb25zLnN0eWxlc2hlZXRNYW5hZ2VyXG4gICAgICB9LCBzaGFkb3dSb290KSk7XG4gICAgfSwgMCk7XG4gIH1cbiAgLyoqXG4gICAqIE1vbmtleSBwYXRjaCAnYXR0YWNoU2hhZG93JyBvZiBhbiBJRnJhbWVFbGVtZW50IHRvIG9ic2VydmUgbmV3bHkgYWRkZWQgc2hhZG93IGRvbXMuXG4gICAqL1xuICBvYnNlcnZlQXR0YWNoU2hhZG93KGlmcmFtZUVsZW1lbnQpIHtcbiAgICBjb25zdCBpZnJhbWVEb2MgPSBnZXRJRnJhbWVDb250ZW50RG9jdW1lbnQoaWZyYW1lRWxlbWVudCk7XG4gICAgY29uc3QgaWZyYW1lV2luZG93ID0gZ2V0SUZyYW1lQ29udGVudFdpbmRvdyhpZnJhbWVFbGVtZW50KTtcbiAgICBpZiAoIWlmcmFtZURvYyB8fCAhaWZyYW1lV2luZG93KSByZXR1cm47XG4gICAgdGhpcy5wYXRjaEF0dGFjaFNoYWRvdyhpZnJhbWVXaW5kb3cuRWxlbWVudCwgaWZyYW1lRG9jKTtcbiAgfVxuICAvKipcbiAgICogUGF0Y2ggJ2F0dGFjaFNoYWRvdycgdG8gb2JzZXJ2ZSBuZXdseSBhZGRlZCBzaGFkb3cgZG9tcy5cbiAgICovXG4gIHBhdGNoQXR0YWNoU2hhZG93KGVsZW1lbnQsIGRvYykge1xuICAgIGNvbnN0IG1hbmFnZXIgPSB0aGlzO1xuICAgIHRoaXMucmVzdG9yZUhhbmRsZXJzLnB1c2gocGF0Y2goZWxlbWVudC5wcm90b3R5cGUsIFwiYXR0YWNoU2hhZG93XCIsIGZ1bmN0aW9uIChvcmlnaW5hbCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IG9yaWdpbmFsLmNhbGwodGhpcywgb3B0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuc2hhZG93Um9vdCAmJiBpbkRvbSh0aGlzKSkgbWFuYWdlci5hZGRTaGFkb3dSb290KHRoaXMuc2hhZG93Um9vdCwgZG9jKTtcbiAgICAgICAgcmV0dXJuIHNoYWRvd1Jvb3Q7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfVxuICByZXNldCgpIHtcbiAgICB0aGlzLnJlc3RvcmVIYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaGFuZGxlcigpO1xuICAgICAgfSBjYXRjaCAoZTIpIHt9XG4gICAgfSk7XG4gICAgdGhpcy5yZXN0b3JlSGFuZGxlcnMgPSBbXTtcbiAgICB0aGlzLnNoYWRvd0RvbXMgPSAvKiBAX19QVVJFX18gKi9uZXcgV2Vha1NldCgpO1xuICAgIHRoaXMuYnlwYXNzT3B0aW9ucy5jYW52YXNNYW5hZ2VyLnJlc2V0U2hhZG93Um9vdHMoKTtcbiAgfVxufVxudmFyIGNoYXJzID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7XG52YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09IFwidW5kZWZpbmVkXCIgPyBbXSA6IG5ldyBVaW50OEFycmF5KDI1Nik7XG5mb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjaGFycy5sZW5ndGg7IGkkMSsrKSB7XG4gIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkkMSldID0gaSQxO1xufVxuY2xhc3MgQ2FudmFzTWFuYWdlck5vb3Age1xuICByZXNldCgpIHt9XG4gIGZyZWV6ZSgpIHt9XG4gIHVuZnJlZXplKCkge31cbiAgbG9jaygpIHt9XG4gIHVubG9jaygpIHt9XG4gIHNuYXBzaG90KCkge31cbiAgYWRkV2luZG93KCkge31cbiAgYWRkU2hhZG93Um9vdCgpIHt9XG4gIHJlc2V0U2hhZG93Um9vdHMoKSB7fVxufVxuY2xhc3MgU3R5bGVzaGVldE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy50cmFja2VkTGlua0VsZW1lbnRzID0gLyogQF9fUFVSRV9fICovbmV3IFdlYWtTZXQoKTtcbiAgICB0aGlzLnN0eWxlTWlycm9yID0gbmV3IFN0eWxlU2hlZXRNaXJyb3IoKTtcbiAgICB0aGlzLm11dGF0aW9uQ2IgPSBvcHRpb25zLm11dGF0aW9uQ2I7XG4gICAgdGhpcy5hZG9wdGVkU3R5bGVTaGVldENiID0gb3B0aW9ucy5hZG9wdGVkU3R5bGVTaGVldENiO1xuICB9XG4gIGF0dGFjaExpbmtFbGVtZW50KGxpbmtFbCwgY2hpbGRTbikge1xuICAgIGlmIChcIl9jc3NUZXh0XCIgaW4gY2hpbGRTbi5hdHRyaWJ1dGVzKSB0aGlzLm11dGF0aW9uQ2Ioe1xuICAgICAgYWRkczogW10sXG4gICAgICByZW1vdmVzOiBbXSxcbiAgICAgIHRleHRzOiBbXSxcbiAgICAgIGF0dHJpYnV0ZXM6IFt7XG4gICAgICAgIGlkOiBjaGlsZFNuLmlkLFxuICAgICAgICBhdHRyaWJ1dGVzOiBjaGlsZFNuLmF0dHJpYnV0ZXNcbiAgICAgIH1dXG4gICAgfSk7XG4gICAgdGhpcy50cmFja0xpbmtFbGVtZW50KGxpbmtFbCk7XG4gIH1cbiAgdHJhY2tMaW5rRWxlbWVudChsaW5rRWwpIHtcbiAgICBpZiAodGhpcy50cmFja2VkTGlua0VsZW1lbnRzLmhhcyhsaW5rRWwpKSByZXR1cm47XG4gICAgdGhpcy50cmFja2VkTGlua0VsZW1lbnRzLmFkZChsaW5rRWwpO1xuICAgIHRoaXMudHJhY2tTdHlsZXNoZWV0SW5MaW5rRWxlbWVudChsaW5rRWwpO1xuICB9XG4gIGFkb3B0U3R5bGVTaGVldHMoc2hlZXRzLCBob3N0SWQpIHtcbiAgICBpZiAoc2hlZXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGNvbnN0IGFkb3B0ZWRTdHlsZVNoZWV0RGF0YSA9IHtcbiAgICAgIGlkOiBob3N0SWQsXG4gICAgICBzdHlsZUlkczogW11cbiAgICB9O1xuICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzKSB7XG4gICAgICBsZXQgc3R5bGVJZDtcbiAgICAgIGlmICghdGhpcy5zdHlsZU1pcnJvci5oYXMoc2hlZXQpKSB7XG4gICAgICAgIHN0eWxlSWQgPSB0aGlzLnN0eWxlTWlycm9yLmFkZChzaGVldCk7XG4gICAgICAgIHN0eWxlcy5wdXNoKHtcbiAgICAgICAgICBzdHlsZUlkLFxuICAgICAgICAgIHJ1bGVzOiBBcnJheS5mcm9tKHNoZWV0LnJ1bGVzIHx8IENTU1J1bGUsIChyMiwgaW5kZXgpID0+ICh7XG4gICAgICAgICAgICBydWxlOiBzdHJpbmdpZnlSdWxlKHIyKSxcbiAgICAgICAgICAgIGluZGV4XG4gICAgICAgICAgfSkpXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHN0eWxlSWQgPSB0aGlzLnN0eWxlTWlycm9yLmdldElkKHNoZWV0KTtcbiAgICAgIGFkb3B0ZWRTdHlsZVNoZWV0RGF0YS5zdHlsZUlkcy5wdXNoKHN0eWxlSWQpO1xuICAgIH1cbiAgICBpZiAoc3R5bGVzLmxlbmd0aCA+IDApIGFkb3B0ZWRTdHlsZVNoZWV0RGF0YS5zdHlsZXMgPSBzdHlsZXM7XG4gICAgdGhpcy5hZG9wdGVkU3R5bGVTaGVldENiKGFkb3B0ZWRTdHlsZVNoZWV0RGF0YSk7XG4gIH1cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5zdHlsZU1pcnJvci5yZXNldCgpO1xuICAgIHRoaXMudHJhY2tlZExpbmtFbGVtZW50cyA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrU2V0KCk7XG4gIH1cbiAgLy8gVE9ETzogdGFrZSBzbmFwc2hvdCBvbiBzdHlsZXNoZWV0IHJlbG9hZCBieSBhcHBseWluZyBldmVudCBsaXN0ZW5lclxuICB0cmFja1N0eWxlc2hlZXRJbkxpbmtFbGVtZW50KF9saW5rRWwpIHt9XG59XG5jbGFzcyBQcm9jZXNzZWROb2RlTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubm9kZU1hcCA9IC8qIEBfX1BVUkVfXyAqL25ldyBXZWFrTWFwKCk7XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgfVxuICBpbk90aGVyQnVmZmVyKG5vZGUsIHRoaXNCdWZmZXIpIHtcbiAgICBjb25zdCBidWZmZXJzID0gdGhpcy5ub2RlTWFwLmdldChub2RlKTtcbiAgICByZXR1cm4gYnVmZmVycyAmJiBBcnJheS5mcm9tKGJ1ZmZlcnMpLnNvbWUoYnVmZmVyID0+IGJ1ZmZlciAhPT0gdGhpc0J1ZmZlcik7XG4gIH1cbiAgYWRkKG5vZGUsIGJ1ZmZlcikge1xuICAgIGlmICghdGhpcy5hY3RpdmUpIHtcbiAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgIG9uUmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5ub2RlTWFwID0gLyogQF9fUFVSRV9fICovbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLm5vZGVNYXAuc2V0KG5vZGUsICh0aGlzLm5vZGVNYXAuZ2V0KG5vZGUpIHx8IC8qIEBfX1BVUkVfXyAqL25ldyBTZXQoKSkuYWRkKGJ1ZmZlcikpO1xuICB9XG4gIGRlc3Ryb3koKSB7fVxufVxubGV0IHdyYXBwZWRFbWl0O1xubGV0IF90YWtlRnVsbFNuYXBzaG90O1xudHJ5IHtcbiAgaWYgKEFycmF5LmZyb20oWzFdLCB4ID0+IHggKiAyKVswXSAhPT0gMikge1xuICAgIGNvbnN0IGNsZWFuRnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2xlYW5GcmFtZSk7XG4gICAgQXJyYXkuZnJvbSA9IGNsZWFuRnJhbWUuY29udGVudFdpbmRvdz8uQXJyYXkuZnJvbSB8fCBBcnJheS5mcm9tO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY2xlYW5GcmFtZSk7XG4gIH1cbn0gY2F0Y2ggKGVycikge1xuICBjb25zb2xlLmRlYnVnKFwiVW5hYmxlIHRvIG92ZXJyaWRlIEFycmF5LmZyb21cIiwgZXJyKTtcbn1cbmNvbnN0IG1pcnJvciA9IGNyZWF0ZU1pcnJvciQyKCk7XG5mdW5jdGlvbiByZWNvcmQob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBlbWl0LFxuICAgIGNoZWNrb3V0RXZlcnlObXMsXG4gICAgY2hlY2tvdXRFdmVyeU50aCxcbiAgICBibG9ja0NsYXNzID0gXCJyci1ibG9ja1wiLFxuICAgIGJsb2NrU2VsZWN0b3IgPSBudWxsLFxuICAgIHVuYmxvY2tTZWxlY3RvciA9IG51bGwsXG4gICAgaWdub3JlQ2xhc3MgPSBcInJyLWlnbm9yZVwiLFxuICAgIGlnbm9yZVNlbGVjdG9yID0gbnVsbCxcbiAgICBtYXNrQWxsVGV4dCA9IGZhbHNlLFxuICAgIG1hc2tUZXh0Q2xhc3MgPSBcInJyLW1hc2tcIixcbiAgICB1bm1hc2tUZXh0Q2xhc3MgPSBudWxsLFxuICAgIG1hc2tUZXh0U2VsZWN0b3IgPSBudWxsLFxuICAgIHVubWFza1RleHRTZWxlY3RvciA9IG51bGwsXG4gICAgaW5saW5lU3R5bGVzaGVldCA9IHRydWUsXG4gICAgbWFza0FsbElucHV0cyxcbiAgICBtYXNrSW5wdXRPcHRpb25zOiBfbWFza0lucHV0T3B0aW9ucyxcbiAgICBzbGltRE9NT3B0aW9uczogX3NsaW1ET01PcHRpb25zLFxuICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICBtYXNrSW5wdXRGbixcbiAgICBtYXNrVGV4dEZuLFxuICAgIG1heENhbnZhc1NpemUgPSBudWxsLFxuICAgIHBhY2tGbixcbiAgICBzYW1wbGluZyA9IHt9LFxuICAgIGRhdGFVUkxPcHRpb25zID0ge30sXG4gICAgbW91c2Vtb3ZlV2FpdCxcbiAgICByZWNvcmRET00gPSB0cnVlLFxuICAgIHJlY29yZENhbnZhcyA9IGZhbHNlLFxuICAgIHJlY29yZENyb3NzT3JpZ2luSWZyYW1lcyA9IGZhbHNlLFxuICAgIHJlY29yZEFmdGVyID0gb3B0aW9ucy5yZWNvcmRBZnRlciA9PT0gXCJET01Db250ZW50TG9hZGVkXCIgPyBvcHRpb25zLnJlY29yZEFmdGVyIDogXCJsb2FkXCIsXG4gICAgdXNlclRyaWdnZXJlZE9uSW5wdXQgPSBmYWxzZSxcbiAgICBjb2xsZWN0Rm9udHMgPSBmYWxzZSxcbiAgICBpbmxpbmVJbWFnZXMgPSBmYWxzZSxcbiAgICBwbHVnaW5zLFxuICAgIGtlZXBJZnJhbWVTcmNGbiA9ICgpID0+IGZhbHNlLFxuICAgIGlnbm9yZUNTU0F0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi9uZXcgU2V0KFtdKSxcbiAgICBlcnJvckhhbmRsZXI6IGVycm9ySGFuZGxlcjIsXG4gICAgb25NdXRhdGlvbixcbiAgICBnZXRDYW52YXNNYW5hZ2VyXG4gIH0gPSBvcHRpb25zO1xuICByZWdpc3RlckVycm9ySGFuZGxlcihlcnJvckhhbmRsZXIyKTtcbiAgY29uc3QgaW5FbWl0dGluZ0ZyYW1lID0gcmVjb3JkQ3Jvc3NPcmlnaW5JZnJhbWVzID8gd2luZG93LnBhcmVudCA9PT0gd2luZG93IDogdHJ1ZTtcbiAgbGV0IHBhc3NFbWl0c1RvUGFyZW50ID0gZmFsc2U7XG4gIGlmICghaW5FbWl0dGluZ0ZyYW1lKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh3aW5kb3cucGFyZW50LmRvY3VtZW50KSB7XG4gICAgICAgIHBhc3NFbWl0c1RvUGFyZW50ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZTIpIHtcbiAgICAgIHBhc3NFbWl0c1RvUGFyZW50ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGluRW1pdHRpbmdGcmFtZSAmJiAhZW1pdCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImVtaXQgZnVuY3Rpb24gaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgaWYgKCFpbkVtaXR0aW5nRnJhbWUgJiYgIXBhc3NFbWl0c1RvUGFyZW50KSB7XG4gICAgcmV0dXJuICgpID0+IHt9O1xuICB9XG4gIGlmIChtb3VzZW1vdmVXYWl0ICE9PSB2b2lkIDAgJiYgc2FtcGxpbmcubW91c2Vtb3ZlID09PSB2b2lkIDApIHtcbiAgICBzYW1wbGluZy5tb3VzZW1vdmUgPSBtb3VzZW1vdmVXYWl0O1xuICB9XG4gIG1pcnJvci5yZXNldCgpO1xuICBjb25zdCBtYXNrSW5wdXRPcHRpb25zID0gbWFza0FsbElucHV0cyA9PT0gdHJ1ZSA/IHtcbiAgICBjb2xvcjogdHJ1ZSxcbiAgICBkYXRlOiB0cnVlLFxuICAgIFwiZGF0ZXRpbWUtbG9jYWxcIjogdHJ1ZSxcbiAgICBlbWFpbDogdHJ1ZSxcbiAgICBtb250aDogdHJ1ZSxcbiAgICBudW1iZXI6IHRydWUsXG4gICAgcmFuZ2U6IHRydWUsXG4gICAgc2VhcmNoOiB0cnVlLFxuICAgIHRlbDogdHJ1ZSxcbiAgICB0ZXh0OiB0cnVlLFxuICAgIHRpbWU6IHRydWUsXG4gICAgdXJsOiB0cnVlLFxuICAgIHdlZWs6IHRydWUsXG4gICAgdGV4dGFyZWE6IHRydWUsXG4gICAgc2VsZWN0OiB0cnVlLFxuICAgIHJhZGlvOiB0cnVlLFxuICAgIGNoZWNrYm94OiB0cnVlXG4gIH0gOiBfbWFza0lucHV0T3B0aW9ucyAhPT0gdm9pZCAwID8gX21hc2tJbnB1dE9wdGlvbnMgOiB7fTtcbiAgY29uc3Qgc2xpbURPTU9wdGlvbnMgPSBfc2xpbURPTU9wdGlvbnMgPT09IHRydWUgfHwgX3NsaW1ET01PcHRpb25zID09PSBcImFsbFwiID8ge1xuICAgIHNjcmlwdDogdHJ1ZSxcbiAgICBjb21tZW50OiB0cnVlLFxuICAgIGhlYWRGYXZpY29uOiB0cnVlLFxuICAgIGhlYWRXaGl0ZXNwYWNlOiB0cnVlLFxuICAgIGhlYWRNZXRhU29jaWFsOiB0cnVlLFxuICAgIGhlYWRNZXRhUm9ib3RzOiB0cnVlLFxuICAgIGhlYWRNZXRhSHR0cEVxdWl2OiB0cnVlLFxuICAgIGhlYWRNZXRhVmVyaWZpY2F0aW9uOiB0cnVlLFxuICAgIC8vIHRoZSBmb2xsb3dpbmcgYXJlIG9mZiBmb3Igc2xpbURPTU9wdGlvbnMgPT09IHRydWUsXG4gICAgLy8gYXMgdGhleSBkZXN0cm95IHNvbWUgKGhpZGRlbikgaW5mbzpcbiAgICBoZWFkTWV0YUF1dGhvcnNoaXA6IF9zbGltRE9NT3B0aW9ucyA9PT0gXCJhbGxcIixcbiAgICBoZWFkTWV0YURlc2NLZXl3b3JkczogX3NsaW1ET01PcHRpb25zID09PSBcImFsbFwiXG4gIH0gOiBfc2xpbURPTU9wdGlvbnMgPyBfc2xpbURPTU9wdGlvbnMgOiB7fTtcbiAgcG9seWZpbGwkMSgpO1xuICBsZXQgbGFzdEZ1bGxTbmFwc2hvdEV2ZW50O1xuICBsZXQgaW5jcmVtZW50YWxTbmFwc2hvdENvdW50ID0gMDtcbiAgY29uc3QgZXZlbnRQcm9jZXNzb3IgPSBlMiA9PiB7XG4gICAgZm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucyB8fCBbXSkge1xuICAgICAgaWYgKHBsdWdpbi5ldmVudFByb2Nlc3Nvcikge1xuICAgICAgICBlMiA9IHBsdWdpbi5ldmVudFByb2Nlc3NvcihlMik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwYWNrRm4gJiZcbiAgICAvLyBEaXNhYmxlIHBhY2tpbmcgZXZlbnRzIHdoaWNoIHdpbGwgYmUgZW1pdHRlZCB0byBwYXJlbnQgZnJhbWVzLlxuICAgICFwYXNzRW1pdHNUb1BhcmVudCkge1xuICAgICAgZTIgPSBwYWNrRm4oZTIpO1xuICAgIH1cbiAgICByZXR1cm4gZTI7XG4gIH07XG4gIHdyYXBwZWRFbWl0ID0gKHIyLCBpc0NoZWNrb3V0KSA9PiB7XG4gICAgY29uc3QgZTIgPSByMjtcbiAgICBlMi50aW1lc3RhbXAgPSBub3dUaW1lc3RhbXAoKTtcbiAgICBpZiAobXV0YXRpb25CdWZmZXJzWzBdPy5pc0Zyb3plbigpICYmIGUyLnR5cGUgIT09IEV2ZW50VHlwZS5GdWxsU25hcHNob3QgJiYgIShlMi50eXBlID09PSBFdmVudFR5cGUuSW5jcmVtZW50YWxTbmFwc2hvdCAmJiBlMi5kYXRhLnNvdXJjZSA9PT0gSW5jcmVtZW50YWxTb3VyY2UuTXV0YXRpb24pKSB7XG4gICAgICBtdXRhdGlvbkJ1ZmZlcnMuZm9yRWFjaChidWYgPT4gYnVmLnVuZnJlZXplKCkpO1xuICAgIH1cbiAgICBpZiAoaW5FbWl0dGluZ0ZyYW1lKSB7XG4gICAgICBlbWl0Py4oZXZlbnRQcm9jZXNzb3IoZTIpLCBpc0NoZWNrb3V0KTtcbiAgICB9IGVsc2UgaWYgKHBhc3NFbWl0c1RvUGFyZW50KSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICB0eXBlOiBcInJyd2ViXCIsXG4gICAgICAgIGV2ZW50OiBldmVudFByb2Nlc3NvcihlMiksXG4gICAgICAgIG9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgaXNDaGVja291dFxuICAgICAgfTtcbiAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UobWVzc2FnZSwgXCIqXCIpO1xuICAgIH1cbiAgICBpZiAoZTIudHlwZSA9PT0gRXZlbnRUeXBlLkZ1bGxTbmFwc2hvdCkge1xuICAgICAgbGFzdEZ1bGxTbmFwc2hvdEV2ZW50ID0gZTI7XG4gICAgICBpbmNyZW1lbnRhbFNuYXBzaG90Q291bnQgPSAwO1xuICAgIH0gZWxzZSBpZiAoZTIudHlwZSA9PT0gRXZlbnRUeXBlLkluY3JlbWVudGFsU25hcHNob3QpIHtcbiAgICAgIGlmIChlMi5kYXRhLnNvdXJjZSA9PT0gSW5jcmVtZW50YWxTb3VyY2UuTXV0YXRpb24gJiYgZTIuZGF0YS5pc0F0dGFjaElmcmFtZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpbmNyZW1lbnRhbFNuYXBzaG90Q291bnQrKztcbiAgICAgIGNvbnN0IGV4Y2VlZENvdW50ID0gY2hlY2tvdXRFdmVyeU50aCAmJiBpbmNyZW1lbnRhbFNuYXBzaG90Q291bnQgPj0gY2hlY2tvdXRFdmVyeU50aDtcbiAgICAgIGNvbnN0IGV4Y2VlZFRpbWUgPSBjaGVja291dEV2ZXJ5Tm1zICYmIGxhc3RGdWxsU25hcHNob3RFdmVudCAmJiBlMi50aW1lc3RhbXAgLSBsYXN0RnVsbFNuYXBzaG90RXZlbnQudGltZXN0YW1wID4gY2hlY2tvdXRFdmVyeU5tcztcbiAgICAgIGlmIChleGNlZWRDb3VudCB8fCBleGNlZWRUaW1lKSB7XG4gICAgICAgIHRha2VGdWxsU25hcHNob3QyKHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgd3JhcHBlZE11dGF0aW9uRW1pdCA9IG0gPT4ge1xuICAgIHdyYXBwZWRFbWl0KHtcbiAgICAgIHR5cGU6IEV2ZW50VHlwZS5JbmNyZW1lbnRhbFNuYXBzaG90LFxuICAgICAgZGF0YToge1xuICAgICAgICBzb3VyY2U6IEluY3JlbWVudGFsU291cmNlLk11dGF0aW9uLFxuICAgICAgICAuLi5tXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHdyYXBwZWRTY3JvbGxFbWl0ID0gcCA9PiB3cmFwcGVkRW1pdCh7XG4gICAgdHlwZTogRXZlbnRUeXBlLkluY3JlbWVudGFsU25hcHNob3QsXG4gICAgZGF0YToge1xuICAgICAgc291cmNlOiBJbmNyZW1lbnRhbFNvdXJjZS5TY3JvbGwsXG4gICAgICAuLi5wXG4gICAgfVxuICB9KTtcbiAgY29uc3Qgd3JhcHBlZENhbnZhc011dGF0aW9uRW1pdCA9IHAgPT4gd3JhcHBlZEVtaXQoe1xuICAgIHR5cGU6IEV2ZW50VHlwZS5JbmNyZW1lbnRhbFNuYXBzaG90LFxuICAgIGRhdGE6IHtcbiAgICAgIHNvdXJjZTogSW5jcmVtZW50YWxTb3VyY2UuQ2FudmFzTXV0YXRpb24sXG4gICAgICAuLi5wXG4gICAgfVxuICB9KTtcbiAgY29uc3Qgd3JhcHBlZEFkb3B0ZWRTdHlsZVNoZWV0RW1pdCA9IGEyID0+IHdyYXBwZWRFbWl0KHtcbiAgICB0eXBlOiBFdmVudFR5cGUuSW5jcmVtZW50YWxTbmFwc2hvdCxcbiAgICBkYXRhOiB7XG4gICAgICBzb3VyY2U6IEluY3JlbWVudGFsU291cmNlLkFkb3B0ZWRTdHlsZVNoZWV0LFxuICAgICAgLi4uYTJcbiAgICB9XG4gIH0pO1xuICBjb25zdCBzdHlsZXNoZWV0TWFuYWdlciA9IG5ldyBTdHlsZXNoZWV0TWFuYWdlcih7XG4gICAgbXV0YXRpb25DYjogd3JhcHBlZE11dGF0aW9uRW1pdCxcbiAgICBhZG9wdGVkU3R5bGVTaGVldENiOiB3cmFwcGVkQWRvcHRlZFN0eWxlU2hlZXRFbWl0XG4gIH0pO1xuICBjb25zdCBpZnJhbWVNYW5hZ2VyID0gdHlwZW9mIF9fUlJXRUJfRVhDTFVERV9JRlJBTUVfXyA9PT0gXCJib29sZWFuXCIgJiYgX19SUldFQl9FWENMVURFX0lGUkFNRV9fID8gbmV3IElmcmFtZU1hbmFnZXJOb29wKCkgOiBuZXcgSWZyYW1lTWFuYWdlcih7XG4gICAgbWlycm9yLFxuICAgIG11dGF0aW9uQ2I6IHdyYXBwZWRNdXRhdGlvbkVtaXQsXG4gICAgc3R5bGVzaGVldE1hbmFnZXIsXG4gICAgcmVjb3JkQ3Jvc3NPcmlnaW5JZnJhbWVzLFxuICAgIHdyYXBwZWRFbWl0XG4gIH0pO1xuICBmb3IgKGNvbnN0IHBsdWdpbiBvZiBwbHVnaW5zIHx8IFtdKSB7XG4gICAgaWYgKHBsdWdpbi5nZXRNaXJyb3IpIHBsdWdpbi5nZXRNaXJyb3Ioe1xuICAgICAgbm9kZU1pcnJvcjogbWlycm9yLFxuICAgICAgY3Jvc3NPcmlnaW5JZnJhbWVNaXJyb3I6IGlmcmFtZU1hbmFnZXIuY3Jvc3NPcmlnaW5JZnJhbWVNaXJyb3IsXG4gICAgICBjcm9zc09yaWdpbklmcmFtZVN0eWxlTWlycm9yOiBpZnJhbWVNYW5hZ2VyLmNyb3NzT3JpZ2luSWZyYW1lU3R5bGVNaXJyb3JcbiAgICB9KTtcbiAgfVxuICBjb25zdCBwcm9jZXNzZWROb2RlTWFuYWdlciA9IG5ldyBQcm9jZXNzZWROb2RlTWFuYWdlcigpO1xuICBjb25zdCBjYW52YXNNYW5hZ2VyID0gX2dldENhbnZhc01hbmFnZXIoZ2V0Q2FudmFzTWFuYWdlciwge1xuICAgIG1pcnJvcixcbiAgICB3aW46IHdpbmRvdyxcbiAgICBtdXRhdGlvbkNiOiBwID0+IHdyYXBwZWRFbWl0KHtcbiAgICAgIHR5cGU6IEV2ZW50VHlwZS5JbmNyZW1lbnRhbFNuYXBzaG90LFxuICAgICAgZGF0YToge1xuICAgICAgICBzb3VyY2U6IEluY3JlbWVudGFsU291cmNlLkNhbnZhc011dGF0aW9uLFxuICAgICAgICAuLi5wXG4gICAgICB9XG4gICAgfSksXG4gICAgcmVjb3JkQ2FudmFzLFxuICAgIGJsb2NrQ2xhc3MsXG4gICAgYmxvY2tTZWxlY3RvcixcbiAgICB1bmJsb2NrU2VsZWN0b3IsXG4gICAgbWF4Q2FudmFzU2l6ZSxcbiAgICBzYW1wbGluZzogc2FtcGxpbmdbXCJjYW52YXNcIl0sXG4gICAgZGF0YVVSTE9wdGlvbnMsXG4gICAgZXJyb3JIYW5kbGVyOiBlcnJvckhhbmRsZXIyXG4gIH0pO1xuICBjb25zdCBzaGFkb3dEb21NYW5hZ2VyID0gdHlwZW9mIF9fUlJXRUJfRVhDTFVERV9TSEFET1dfRE9NX18gPT09IFwiYm9vbGVhblwiICYmIF9fUlJXRUJfRVhDTFVERV9TSEFET1dfRE9NX18gPyBuZXcgU2hhZG93RG9tTWFuYWdlck5vb3AoKSA6IG5ldyBTaGFkb3dEb21NYW5hZ2VyKHtcbiAgICBtdXRhdGlvbkNiOiB3cmFwcGVkTXV0YXRpb25FbWl0LFxuICAgIHNjcm9sbENiOiB3cmFwcGVkU2Nyb2xsRW1pdCxcbiAgICBieXBhc3NPcHRpb25zOiB7XG4gICAgICBvbk11dGF0aW9uLFxuICAgICAgYmxvY2tDbGFzcyxcbiAgICAgIGJsb2NrU2VsZWN0b3IsXG4gICAgICB1bmJsb2NrU2VsZWN0b3IsXG4gICAgICBtYXNrQWxsVGV4dCxcbiAgICAgIG1hc2tUZXh0Q2xhc3MsXG4gICAgICB1bm1hc2tUZXh0Q2xhc3MsXG4gICAgICBtYXNrVGV4dFNlbGVjdG9yLFxuICAgICAgdW5tYXNrVGV4dFNlbGVjdG9yLFxuICAgICAgaW5saW5lU3R5bGVzaGVldCxcbiAgICAgIG1hc2tJbnB1dE9wdGlvbnMsXG4gICAgICBkYXRhVVJMT3B0aW9ucyxcbiAgICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICAgIG1hc2tUZXh0Rm4sXG4gICAgICBtYXNrSW5wdXRGbixcbiAgICAgIHJlY29yZENhbnZhcyxcbiAgICAgIGlubGluZUltYWdlcyxcbiAgICAgIHNhbXBsaW5nLFxuICAgICAgc2xpbURPTU9wdGlvbnMsXG4gICAgICBpZnJhbWVNYW5hZ2VyLFxuICAgICAgc3R5bGVzaGVldE1hbmFnZXIsXG4gICAgICBjYW52YXNNYW5hZ2VyLFxuICAgICAga2VlcElmcmFtZVNyY0ZuLFxuICAgICAgcHJvY2Vzc2VkTm9kZU1hbmFnZXJcbiAgICB9LFxuICAgIG1pcnJvclxuICB9KTtcbiAgY29uc3QgdGFrZUZ1bGxTbmFwc2hvdDIgPSAoaXNDaGVja291dCA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKCFyZWNvcmRET00pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd3JhcHBlZEVtaXQoe1xuICAgICAgdHlwZTogRXZlbnRUeXBlLk1ldGEsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGhyZWY6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgICB3aWR0aDogZ2V0V2luZG93V2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0OiBnZXRXaW5kb3dIZWlnaHQoKVxuICAgICAgfVxuICAgIH0sIGlzQ2hlY2tvdXQpO1xuICAgIHN0eWxlc2hlZXRNYW5hZ2VyLnJlc2V0KCk7XG4gICAgc2hhZG93RG9tTWFuYWdlci5pbml0KCk7XG4gICAgbXV0YXRpb25CdWZmZXJzLmZvckVhY2goYnVmID0+IGJ1Zi5sb2NrKCkpO1xuICAgIGNvbnN0IG5vZGUgPSBzbmFwc2hvdChkb2N1bWVudCwge1xuICAgICAgbWlycm9yLFxuICAgICAgYmxvY2tDbGFzcyxcbiAgICAgIGJsb2NrU2VsZWN0b3IsXG4gICAgICB1bmJsb2NrU2VsZWN0b3IsXG4gICAgICBtYXNrQWxsVGV4dCxcbiAgICAgIG1hc2tUZXh0Q2xhc3MsXG4gICAgICB1bm1hc2tUZXh0Q2xhc3MsXG4gICAgICBtYXNrVGV4dFNlbGVjdG9yLFxuICAgICAgdW5tYXNrVGV4dFNlbGVjdG9yLFxuICAgICAgaW5saW5lU3R5bGVzaGVldCxcbiAgICAgIG1hc2tBbGxJbnB1dHM6IG1hc2tJbnB1dE9wdGlvbnMsXG4gICAgICBtYXNrQXR0cmlidXRlRm4sXG4gICAgICBtYXNrSW5wdXRGbixcbiAgICAgIG1hc2tUZXh0Rm4sXG4gICAgICBzbGltRE9NOiBzbGltRE9NT3B0aW9ucyxcbiAgICAgIGRhdGFVUkxPcHRpb25zLFxuICAgICAgcmVjb3JkQ2FudmFzLFxuICAgICAgaW5saW5lSW1hZ2VzLFxuICAgICAgb25TZXJpYWxpemU6IG4yID0+IHtcbiAgICAgICAgaWYgKGlzU2VyaWFsaXplZElmcmFtZShuMiwgbWlycm9yKSkge1xuICAgICAgICAgIGlmcmFtZU1hbmFnZXIuYWRkSWZyYW1lKG4yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNTZXJpYWxpemVkU3R5bGVzaGVldChuMiwgbWlycm9yKSkge1xuICAgICAgICAgIHN0eWxlc2hlZXRNYW5hZ2VyLnRyYWNrTGlua0VsZW1lbnQobjIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNTaGFkb3dSb290KG4yKSkge1xuICAgICAgICAgIHNoYWRvd0RvbU1hbmFnZXIuYWRkU2hhZG93Um9vdChuMi5zaGFkb3dSb290LCBkb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbklmcmFtZUxvYWQ6IChpZnJhbWUsIGNoaWxkU24pID0+IHtcbiAgICAgICAgaWZyYW1lTWFuYWdlci5hdHRhY2hJZnJhbWUoaWZyYW1lLCBjaGlsZFNuKTtcbiAgICAgICAgaWYgKGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgY2FudmFzTWFuYWdlci5hZGRXaW5kb3coaWZyYW1lLmNvbnRlbnRXaW5kb3cpO1xuICAgICAgICB9XG4gICAgICAgIHNoYWRvd0RvbU1hbmFnZXIub2JzZXJ2ZUF0dGFjaFNoYWRvdyhpZnJhbWUpO1xuICAgICAgfSxcbiAgICAgIG9uU3R5bGVzaGVldExvYWQ6IChsaW5rRWwsIGNoaWxkU24pID0+IHtcbiAgICAgICAgc3R5bGVzaGVldE1hbmFnZXIuYXR0YWNoTGlua0VsZW1lbnQobGlua0VsLCBjaGlsZFNuKTtcbiAgICAgIH0sXG4gICAgICBrZWVwSWZyYW1lU3JjRm5cbiAgICB9KTtcbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gc25hcHNob3QgdGhlIGRvY3VtZW50XCIpO1xuICAgIH1cbiAgICB3cmFwcGVkRW1pdCh7XG4gICAgICB0eXBlOiBFdmVudFR5cGUuRnVsbFNuYXBzaG90LFxuICAgICAgZGF0YToge1xuICAgICAgICBub2RlLFxuICAgICAgICBpbml0aWFsT2Zmc2V0OiBnZXRXaW5kb3dTY3JvbGwod2luZG93KVxuICAgICAgfVxuICAgIH0pO1xuICAgIG11dGF0aW9uQnVmZmVycy5mb3JFYWNoKGJ1ZiA9PiBidWYudW5sb2NrKCkpO1xuICAgIGlmIChkb2N1bWVudC5hZG9wdGVkU3R5bGVTaGVldHMgJiYgZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzLmxlbmd0aCA+IDApIHN0eWxlc2hlZXRNYW5hZ2VyLmFkb3B0U3R5bGVTaGVldHMoZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzLCBtaXJyb3IuZ2V0SWQoZG9jdW1lbnQpKTtcbiAgfTtcbiAgX3Rha2VGdWxsU25hcHNob3QgPSB0YWtlRnVsbFNuYXBzaG90MjtcbiAgdHJ5IHtcbiAgICBjb25zdCBoYW5kbGVycyA9IFtdO1xuICAgIGNvbnN0IG9ic2VydmUgPSBkb2MgPT4ge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrV3JhcHBlcihpbml0T2JzZXJ2ZXJzKSh7XG4gICAgICAgIG9uTXV0YXRpb24sXG4gICAgICAgIG11dGF0aW9uQ2I6IHdyYXBwZWRNdXRhdGlvbkVtaXQsXG4gICAgICAgIG1vdXNlbW92ZUNiOiAocG9zaXRpb25zLCBzb3VyY2UpID0+IHdyYXBwZWRFbWl0KHtcbiAgICAgICAgICB0eXBlOiBFdmVudFR5cGUuSW5jcmVtZW50YWxTbmFwc2hvdCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICBwb3NpdGlvbnNcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBtb3VzZUludGVyYWN0aW9uQ2I6IGQgPT4gd3JhcHBlZEVtaXQoe1xuICAgICAgICAgIHR5cGU6IEV2ZW50VHlwZS5JbmNyZW1lbnRhbFNuYXBzaG90LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHNvdXJjZTogSW5jcmVtZW50YWxTb3VyY2UuTW91c2VJbnRlcmFjdGlvbixcbiAgICAgICAgICAgIC4uLmRcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBzY3JvbGxDYjogd3JhcHBlZFNjcm9sbEVtaXQsXG4gICAgICAgIHZpZXdwb3J0UmVzaXplQ2I6IGQgPT4gd3JhcHBlZEVtaXQoe1xuICAgICAgICAgIHR5cGU6IEV2ZW50VHlwZS5JbmNyZW1lbnRhbFNuYXBzaG90LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHNvdXJjZTogSW5jcmVtZW50YWxTb3VyY2UuVmlld3BvcnRSZXNpemUsXG4gICAgICAgICAgICAuLi5kXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgaW5wdXRDYjogdjIgPT4gd3JhcHBlZEVtaXQoe1xuICAgICAgICAgIHR5cGU6IEV2ZW50VHlwZS5JbmNyZW1lbnRhbFNuYXBzaG90LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHNvdXJjZTogSW5jcmVtZW50YWxTb3VyY2UuSW5wdXQsXG4gICAgICAgICAgICAuLi52MlxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIG1lZGlhSW50ZXJhY3Rpb25DYjogcCA9PiB3cmFwcGVkRW1pdCh7XG4gICAgICAgICAgdHlwZTogRXZlbnRUeXBlLkluY3JlbWVudGFsU25hcHNob3QsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc291cmNlOiBJbmNyZW1lbnRhbFNvdXJjZS5NZWRpYUludGVyYWN0aW9uLFxuICAgICAgICAgICAgLi4ucFxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIHN0eWxlU2hlZXRSdWxlQ2I6IHIyID0+IHdyYXBwZWRFbWl0KHtcbiAgICAgICAgICB0eXBlOiBFdmVudFR5cGUuSW5jcmVtZW50YWxTbmFwc2hvdCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzb3VyY2U6IEluY3JlbWVudGFsU291cmNlLlN0eWxlU2hlZXRSdWxlLFxuICAgICAgICAgICAgLi4ucjJcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBzdHlsZURlY2xhcmF0aW9uQ2I6IHIyID0+IHdyYXBwZWRFbWl0KHtcbiAgICAgICAgICB0eXBlOiBFdmVudFR5cGUuSW5jcmVtZW50YWxTbmFwc2hvdCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzb3VyY2U6IEluY3JlbWVudGFsU291cmNlLlN0eWxlRGVjbGFyYXRpb24sXG4gICAgICAgICAgICAuLi5yMlxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGNhbnZhc011dGF0aW9uQ2I6IHdyYXBwZWRDYW52YXNNdXRhdGlvbkVtaXQsXG4gICAgICAgIGZvbnRDYjogcCA9PiB3cmFwcGVkRW1pdCh7XG4gICAgICAgICAgdHlwZTogRXZlbnRUeXBlLkluY3JlbWVudGFsU25hcHNob3QsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc291cmNlOiBJbmNyZW1lbnRhbFNvdXJjZS5Gb250LFxuICAgICAgICAgICAgLi4ucFxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIHNlbGVjdGlvbkNiOiBwID0+IHtcbiAgICAgICAgICB3cmFwcGVkRW1pdCh7XG4gICAgICAgICAgICB0eXBlOiBFdmVudFR5cGUuSW5jcmVtZW50YWxTbmFwc2hvdCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgc291cmNlOiBJbmNyZW1lbnRhbFNvdXJjZS5TZWxlY3Rpb24sXG4gICAgICAgICAgICAgIC4uLnBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgY3VzdG9tRWxlbWVudENiOiBjMiA9PiB7XG4gICAgICAgICAgd3JhcHBlZEVtaXQoe1xuICAgICAgICAgICAgdHlwZTogRXZlbnRUeXBlLkluY3JlbWVudGFsU25hcHNob3QsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHNvdXJjZTogSW5jcmVtZW50YWxTb3VyY2UuQ3VzdG9tRWxlbWVudCxcbiAgICAgICAgICAgICAgLi4uYzJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYmxvY2tDbGFzcyxcbiAgICAgICAgaWdub3JlQ2xhc3MsXG4gICAgICAgIGlnbm9yZVNlbGVjdG9yLFxuICAgICAgICBtYXNrQWxsVGV4dCxcbiAgICAgICAgbWFza1RleHRDbGFzcyxcbiAgICAgICAgdW5tYXNrVGV4dENsYXNzLFxuICAgICAgICBtYXNrVGV4dFNlbGVjdG9yLFxuICAgICAgICB1bm1hc2tUZXh0U2VsZWN0b3IsXG4gICAgICAgIG1hc2tJbnB1dE9wdGlvbnMsXG4gICAgICAgIGlubGluZVN0eWxlc2hlZXQsXG4gICAgICAgIHNhbXBsaW5nLFxuICAgICAgICByZWNvcmRET00sXG4gICAgICAgIHJlY29yZENhbnZhcyxcbiAgICAgICAgaW5saW5lSW1hZ2VzLFxuICAgICAgICB1c2VyVHJpZ2dlcmVkT25JbnB1dCxcbiAgICAgICAgY29sbGVjdEZvbnRzLFxuICAgICAgICBkb2MsXG4gICAgICAgIG1hc2tBdHRyaWJ1dGVGbixcbiAgICAgICAgbWFza0lucHV0Rm4sXG4gICAgICAgIG1hc2tUZXh0Rm4sXG4gICAgICAgIGtlZXBJZnJhbWVTcmNGbixcbiAgICAgICAgYmxvY2tTZWxlY3RvcixcbiAgICAgICAgdW5ibG9ja1NlbGVjdG9yLFxuICAgICAgICBzbGltRE9NT3B0aW9ucyxcbiAgICAgICAgZGF0YVVSTE9wdGlvbnMsXG4gICAgICAgIG1pcnJvcixcbiAgICAgICAgaWZyYW1lTWFuYWdlcixcbiAgICAgICAgc3R5bGVzaGVldE1hbmFnZXIsXG4gICAgICAgIHNoYWRvd0RvbU1hbmFnZXIsXG4gICAgICAgIHByb2Nlc3NlZE5vZGVNYW5hZ2VyLFxuICAgICAgICBjYW52YXNNYW5hZ2VyLFxuICAgICAgICBpZ25vcmVDU1NBdHRyaWJ1dGVzLFxuICAgICAgICBwbHVnaW5zOiBwbHVnaW5zPy5maWx0ZXIocCA9PiBwLm9ic2VydmVyKT8ubWFwKHAgPT4gKHtcbiAgICAgICAgICBvYnNlcnZlcjogcC5vYnNlcnZlcixcbiAgICAgICAgICBvcHRpb25zOiBwLm9wdGlvbnMsXG4gICAgICAgICAgY2FsbGJhY2s6IHBheWxvYWQgPT4gd3JhcHBlZEVtaXQoe1xuICAgICAgICAgICAgdHlwZTogRXZlbnRUeXBlLlBsdWdpbixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgcGx1Z2luOiBwLm5hbWUsXG4gICAgICAgICAgICAgIHBheWxvYWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KSkgfHwgW11cbiAgICAgIH0sIHt9KTtcbiAgICB9O1xuICAgIGlmcmFtZU1hbmFnZXIuYWRkTG9hZExpc3RlbmVyKGlmcmFtZUVsID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGhhbmRsZXJzLnB1c2gob2JzZXJ2ZShpZnJhbWVFbC5jb250ZW50RG9jdW1lbnQpKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAgIHRha2VGdWxsU25hcHNob3QyKCk7XG4gICAgICBoYW5kbGVycy5wdXNoKG9ic2VydmUoZG9jdW1lbnQpKTtcbiAgICB9O1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImludGVyYWN0aXZlXCIgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICBpbml0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZXJzLnB1c2gob24oXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICAgICAgd3JhcHBlZEVtaXQoe1xuICAgICAgICAgIHR5cGU6IEV2ZW50VHlwZS5Eb21Db250ZW50TG9hZGVkLFxuICAgICAgICAgIGRhdGE6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVjb3JkQWZ0ZXIgPT09IFwiRE9NQ29udGVudExvYWRlZFwiKSBpbml0KCk7XG4gICAgICB9KSk7XG4gICAgICBoYW5kbGVycy5wdXNoKG9uKFwibG9hZFwiLCAoKSA9PiB7XG4gICAgICAgIHdyYXBwZWRFbWl0KHtcbiAgICAgICAgICB0eXBlOiBFdmVudFR5cGUuTG9hZCxcbiAgICAgICAgICBkYXRhOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlY29yZEFmdGVyID09PSBcImxvYWRcIikgaW5pdCgpO1xuICAgICAgfSwgd2luZG93KSk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBoYW5kbGVycy5mb3JFYWNoKGggPT4gaCgpKTtcbiAgICAgIHByb2Nlc3NlZE5vZGVNYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICAgIF90YWtlRnVsbFNuYXBzaG90ID0gdm9pZCAwO1xuICAgICAgdW5yZWdpc3RlckVycm9ySGFuZGxlcigpO1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgfVxufVxuZnVuY3Rpb24gdGFrZUZ1bGxTbmFwc2hvdChpc0NoZWNrb3V0KSB7XG4gIGlmICghX3Rha2VGdWxsU25hcHNob3QpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJwbGVhc2UgdGFrZSBmdWxsIHNuYXBzaG90IGFmdGVyIHN0YXJ0IHJlY29yZGluZ1wiKTtcbiAgfVxuICBfdGFrZUZ1bGxTbmFwc2hvdChpc0NoZWNrb3V0KTtcbn1cbnJlY29yZC5taXJyb3IgPSBtaXJyb3I7XG5yZWNvcmQudGFrZUZ1bGxTbmFwc2hvdCA9IHRha2VGdWxsU25hcHNob3Q7XG5mdW5jdGlvbiBfZ2V0Q2FudmFzTWFuYWdlcihnZXRDYW52YXNNYW5hZ2VyRm4sIG9wdGlvbnMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZ2V0Q2FudmFzTWFuYWdlckZuID8gZ2V0Q2FudmFzTWFuYWdlckZuKG9wdGlvbnMpIDogbmV3IENhbnZhc01hbmFnZXJOb29wKCk7XG4gIH0gY2F0Y2gge1xuICAgIGNvbnNvbGUud2FybihcIlVuYWJsZSB0byBpbml0aWFsaXplIENhbnZhc01hbmFnZXJcIik7XG4gICAgcmV0dXJuIG5ldyBDYW52YXNNYW5hZ2VyTm9vcCgpO1xuICB9XG59XG52YXIgbjtcbiFmdW5jdGlvbiAodDIpIHtcbiAgdDJbdDIuTm90U3RhcnRlZCA9IDBdID0gXCJOb3RTdGFydGVkXCIsIHQyW3QyLlJ1bm5pbmcgPSAxXSA9IFwiUnVubmluZ1wiLCB0Mlt0Mi5TdG9wcGVkID0gMl0gPSBcIlN0b3BwZWRcIjtcbn0obiB8fCAobiA9IHt9KSk7XG5jb25zdCBSZXBsYXlFdmVudFR5cGVJbmNyZW1lbnRhbFNuYXBzaG90ID0gMztcbmNvbnN0IFJlcGxheUV2ZW50VHlwZUN1c3RvbSA9IDU7XG5cbi8qKlxuICogQ29udmVydHMgYSB0aW1lc3RhbXAgdG8gbXMsIGlmIGl0IHdhcyBpbiBzLCBvciBrZWVwcyBpdCBhcyBtcy5cbiAqL1xuZnVuY3Rpb24gdGltZXN0YW1wVG9Ncyh0aW1lc3RhbXApIHtcbiAgY29uc3QgaXNNcyA9IHRpbWVzdGFtcCA+IDk5OTk5OTk5OTk7XG4gIHJldHVybiBpc01zID8gdGltZXN0YW1wIDogdGltZXN0YW1wICogMTAwMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHRpbWVzdGFtcCB0byBzLCBpZiBpdCB3YXMgaW4gbXMsIG9yIGtlZXBzIGl0IGFzIHMuXG4gKi9cbmZ1bmN0aW9uIHRpbWVzdGFtcFRvUyh0aW1lc3RhbXApIHtcbiAgY29uc3QgaXNNcyA9IHRpbWVzdGFtcCA+IDk5OTk5OTk5OTk7XG4gIHJldHVybiBpc01zID8gdGltZXN0YW1wIC8gMTAwMCA6IHRpbWVzdGFtcDtcbn1cblxuLyoqXG4gKiBBZGQgYSBicmVhZGNydW1iIGV2ZW50IHRvIHJlcGxheS5cbiAqL1xuZnVuY3Rpb24gYWRkQnJlYWRjcnVtYkV2ZW50KHJlcGxheSwgYnJlYWRjcnVtYikge1xuICBpZiAoYnJlYWRjcnVtYi5jYXRlZ29yeSA9PT0gJ3NlbnRyeS50cmFuc2FjdGlvbicpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKFsndWkuY2xpY2snLCAndWkuaW5wdXQnXS5pbmNsdWRlcyhicmVhZGNydW1iLmNhdGVnb3J5KSkge1xuICAgIHJlcGxheS50cmlnZ2VyVXNlckFjdGl2aXR5KCk7XG4gIH0gZWxzZSB7XG4gICAgcmVwbGF5LmNoZWNrQW5kSGFuZGxlRXhwaXJlZFNlc3Npb24oKTtcbiAgfVxuICByZXBsYXkuYWRkVXBkYXRlKCgpID0+IHtcbiAgICAvLyBUaGlzIHNob3VsZCBuZXZlciByZWplY3RcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgcmVwbGF5LnRocm90dGxlZEFkZEV2ZW50KHtcbiAgICAgIHR5cGU6IEV2ZW50VHlwZS5DdXN0b20sXG4gICAgICAvLyBUT0RPOiBXZSB3ZXJlIGNvbnZlcnRpbmcgZnJvbSBtcyB0byBzZWNvbmRzIGZvciBicmVhZGNydW1icywgc3BhbnMsXG4gICAgICAvLyBidXQgbWF5YmUgd2Ugc2hvdWxkIGp1c3Qga2VlcCB0aGVtIGFzIG1pbGxpc2Vjb25kc1xuICAgICAgdGltZXN0YW1wOiAoYnJlYWRjcnVtYi50aW1lc3RhbXAgfHwgMCkgKiAxMDAwLFxuICAgICAgZGF0YToge1xuICAgICAgICB0YWc6ICdicmVhZGNydW1iJyxcbiAgICAgICAgLy8gbm9ybWFsaXplIHRvIG1heC4gMTAgZGVwdGggYW5kIDFfMDAwIHByb3BlcnRpZXMgcGVyIG9iamVjdFxuICAgICAgICBwYXlsb2FkOiBub3JtYWxpemUoYnJlYWRjcnVtYiwgMTAsIDEwMDApXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBEbyBub3QgZmx1c2ggYWZ0ZXIgY29uc29sZSBsb2cgbWVzc2FnZXNcbiAgICByZXR1cm4gYnJlYWRjcnVtYi5jYXRlZ29yeSA9PT0gJ2NvbnNvbGUnO1xuICB9KTtcbn1cbmNvbnN0IElOVEVSQUNUSVZFX1NFTEVDVE9SID0gJ2J1dHRvbixhJztcblxuLyoqIEdldCB0aGUgY2xvc2VzdCBpbnRlcmFjdGl2ZSBwYXJlbnQgZWxlbWVudCwgb3IgZWxzZSByZXR1cm4gdGhlIGdpdmVuIGVsZW1lbnQuICovXG5mdW5jdGlvbiBnZXRDbG9zZXN0SW50ZXJhY3RpdmUoZWxlbWVudCkge1xuICBjb25zdCBjbG9zZXN0SW50ZXJhY3RpdmUgPSBlbGVtZW50LmNsb3Nlc3QoSU5URVJBQ1RJVkVfU0VMRUNUT1IpO1xuICByZXR1cm4gY2xvc2VzdEludGVyYWN0aXZlIHx8IGVsZW1lbnQ7XG59XG5cbi8qKlxuICogRm9yIGNsaWNrcywgd2UgY2hlY2sgaWYgdGhlIHRhcmdldCBpcyBpbnNpZGUgb2YgYSBidXR0b24gb3IgbGlua1xuICogSWYgc28sIHdlIHVzZSB0aGlzIGFzIHRoZSB0YXJnZXQgaW5zdGVhZFxuICogVGhpcyBpcyB1c2VmdWwgYmVjYXVzZSBpZiB5b3UgY2xpY2sgb24gdGhlIGltYWdlIGluIDxidXR0b24+PGltZz48L2J1dHRvbj4sXG4gKiBUaGUgdGFyZ2V0IHdpbGwgYmUgdGhlIGltYWdlLCBub3QgdGhlIGJ1dHRvbiwgd2hpY2ggd2UgZG9uJ3Qgd2FudCBoZXJlXG4gKi9cbmZ1bmN0aW9uIGdldENsaWNrVGFyZ2V0Tm9kZShldmVudCkge1xuICBjb25zdCB0YXJnZXQgPSBnZXRUYXJnZXROb2RlKGV2ZW50KTtcbiAgaWYgKCF0YXJnZXQgfHwgISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgcmV0dXJuIGdldENsb3Nlc3RJbnRlcmFjdGl2ZSh0YXJnZXQpO1xufVxuXG4vKiogR2V0IHRoZSBldmVudCB0YXJnZXQgbm9kZS4gKi9cbmZ1bmN0aW9uIGdldFRhcmdldE5vZGUoZXZlbnQpIHtcbiAgaWYgKGlzRXZlbnRXaXRoVGFyZ2V0KGV2ZW50KSkge1xuICAgIHJldHVybiBldmVudC50YXJnZXQ7XG4gIH1cbiAgcmV0dXJuIGV2ZW50O1xufVxuZnVuY3Rpb24gaXNFdmVudFdpdGhUYXJnZXQoZXZlbnQpIHtcbiAgcmV0dXJuIHR5cGVvZiBldmVudCA9PT0gJ29iamVjdCcgJiYgISFldmVudCAmJiAndGFyZ2V0JyBpbiBldmVudDtcbn1cbmxldCBoYW5kbGVycztcblxuLyoqXG4gKiBSZWdpc3RlciBhIGhhbmRsZXIgdG8gYmUgY2FsbGVkIHdoZW4gYHdpbmRvdy5vcGVuKClgIGlzIGNhbGxlZC5cbiAqIFJldHVybnMgYSBjbGVhbnVwIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvbldpbmRvd09wZW4oY2IpIHtcbiAgLy8gRW5zdXJlIHRvIG9ubHkgcmVnaXN0ZXIgdGhpcyBvbmNlXG4gIGlmICghaGFuZGxlcnMpIHtcbiAgICBoYW5kbGVycyA9IFtdO1xuICAgIG1vbmtleVBhdGNoV2luZG93T3BlbigpO1xuICB9XG4gIGhhbmRsZXJzLnB1c2goY2IpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnN0IHBvcyA9IGhhbmRsZXJzID8gaGFuZGxlcnMuaW5kZXhPZihjYikgOiAtMTtcbiAgICBpZiAocG9zID4gLTEpIHtcbiAgICAgIGhhbmRsZXJzLnNwbGljZShwb3MsIDEpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIG1vbmtleVBhdGNoV2luZG93T3BlbigpIHtcbiAgZmlsbChXSU5ET1csICdvcGVuJywgZnVuY3Rpb24gKG9yaWdpbmFsV2luZG93T3Blbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IGhhbmRsZXIoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIGhlcmVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdpbmFsV2luZG93T3Blbi5hcHBseShXSU5ET1csIGFyZ3MpO1xuICAgIH07XG4gIH0pO1xufVxuXG4vKiogQW55IEluY3JlbWVudGFsU291cmNlIGZvciBycndlYiB0aGF0IHdlIGludGVycHJldCBhcyBhIGtpbmQgb2YgbXV0YXRpb24uICovXG5jb25zdCBJbmNyZW1lbnRhbE11dGF0aW9uU291cmNlcyA9IG5ldyBTZXQoW0luY3JlbWVudGFsU291cmNlLk11dGF0aW9uLCBJbmNyZW1lbnRhbFNvdXJjZS5TdHlsZVNoZWV0UnVsZSwgSW5jcmVtZW50YWxTb3VyY2UuU3R5bGVEZWNsYXJhdGlvbiwgSW5jcmVtZW50YWxTb3VyY2UuQWRvcHRlZFN0eWxlU2hlZXQsIEluY3JlbWVudGFsU291cmNlLkNhbnZhc011dGF0aW9uLCBJbmNyZW1lbnRhbFNvdXJjZS5TZWxlY3Rpb24sIEluY3JlbWVudGFsU291cmNlLk1lZGlhSW50ZXJhY3Rpb25dKTtcblxuLyoqIEhhbmRsZSBhIGNsaWNrLiAqL1xuZnVuY3Rpb24gaGFuZGxlQ2xpY2soY2xpY2tEZXRlY3RvciwgY2xpY2tCcmVhZGNydW1iLCBub2RlKSB7XG4gIGNsaWNrRGV0ZWN0b3IuaGFuZGxlQ2xpY2soY2xpY2tCcmVhZGNydW1iLCBub2RlKTtcbn1cblxuLyoqIEEgY2xpY2sgZGV0ZWN0b3IgY2xhc3MgdGhhdCBjYW4gYmUgdXNlZCB0byBkZXRlY3Qgc2xvdyBvciByYWdlIGNsaWNrcyBvbiBlbGVtZW50cy4gKi9cbmNsYXNzIENsaWNrRGV0ZWN0b3Ige1xuICAvLyBwcm90ZWN0ZWQgZm9yIHRlc3RpbmdcblxuICBjb25zdHJ1Y3RvcihyZXBsYXksIHNsb3dDbGlja0NvbmZpZyxcbiAgLy8gSnVzdCBmb3IgZWFzaWVyIHRlc3RpbmdcbiAgX2FkZEJyZWFkY3J1bWJFdmVudCA9IGFkZEJyZWFkY3J1bWJFdmVudCkge1xuICAgIHRoaXMuX2xhc3RNdXRhdGlvbiA9IDA7XG4gICAgdGhpcy5fbGFzdFNjcm9sbCA9IDA7XG4gICAgdGhpcy5fY2xpY2tzID0gW107XG5cbiAgICAvLyBXZSB3YW50IGV2ZXJ5dGhpbmcgaW4gcywgYnV0IG9wdGlvbnMgYXJlIGluIG1zXG4gICAgdGhpcy5fdGltZW91dCA9IHNsb3dDbGlja0NvbmZpZy50aW1lb3V0IC8gMTAwMDtcbiAgICB0aGlzLl90aHJlc2hvbGQgPSBzbG93Q2xpY2tDb25maWcudGhyZXNob2xkIC8gMTAwMDtcbiAgICB0aGlzLl9zY3JvbGxUaW1lb3V0ID0gc2xvd0NsaWNrQ29uZmlnLnNjcm9sbFRpbWVvdXQgLyAxMDAwO1xuICAgIHRoaXMuX3JlcGxheSA9IHJlcGxheTtcbiAgICB0aGlzLl9pZ25vcmVTZWxlY3RvciA9IHNsb3dDbGlja0NvbmZpZy5pZ25vcmVTZWxlY3RvcjtcbiAgICB0aGlzLl9hZGRCcmVhZGNydW1iRXZlbnQgPSBfYWRkQnJlYWRjcnVtYkV2ZW50O1xuICB9XG5cbiAgLyoqIFJlZ2lzdGVyIGNsaWNrIGRldGVjdGlvbiBoYW5kbGVycyBvbiBtdXRhdGlvbiBvciBzY3JvbGwuICovXG4gIGFkZExpc3RlbmVycygpIHtcbiAgICBjb25zdCBjbGVhbnVwV2luZG93T3BlbiA9IG9uV2luZG93T3BlbigoKSA9PiB7XG4gICAgICAvLyBUcmVhdCB3aW5kb3cub3BlbiBhcyBtdXRhdGlvblxuICAgICAgdGhpcy5fbGFzdE11dGF0aW9uID0gbm93SW5TZWNvbmRzKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdGVhcmRvd24gPSAoKSA9PiB7XG4gICAgICBjbGVhbnVwV2luZG93T3BlbigpO1xuICAgICAgdGhpcy5fY2xpY2tzID0gW107XG4gICAgICB0aGlzLl9sYXN0TXV0YXRpb24gPSAwO1xuICAgICAgdGhpcy5fbGFzdFNjcm9sbCA9IDA7XG4gICAgfTtcbiAgfVxuXG4gIC8qKiBDbGVhbiB1cCBsaXN0ZW5lcnMuICovXG4gIHJlbW92ZUxpc3RlbmVycygpIHtcbiAgICBpZiAodGhpcy5fdGVhcmRvd24pIHtcbiAgICAgIHRoaXMuX3RlYXJkb3duKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9jaGVja0NsaWNrVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2NoZWNrQ2xpY2tUaW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgaGFuZGxlQ2xpY2soYnJlYWRjcnVtYiwgbm9kZSkge1xuICAgIGlmIChpZ25vcmVFbGVtZW50KG5vZGUsIHRoaXMuX2lnbm9yZVNlbGVjdG9yKSB8fCAhaXNDbGlja0JyZWFkY3J1bWIoYnJlYWRjcnVtYikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbmV3Q2xpY2sgPSB7XG4gICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcFRvUyhicmVhZGNydW1iLnRpbWVzdGFtcCksXG4gICAgICBjbGlja0JyZWFkY3J1bWI6IGJyZWFkY3J1bWIsXG4gICAgICAvLyBTZXQgdGhpcyB0byAwIHNvIHdlIGtub3cgaXQgb3JpZ2luYXRlcyBmcm9tIHRoZSBjbGljayBicmVhZGNydW1iXG4gICAgICBjbGlja0NvdW50OiAwLFxuICAgICAgbm9kZVxuICAgIH07XG5cbiAgICAvLyBJZiB0aGVyZSB3YXMgYSBjbGljayBpbiB0aGUgbGFzdCAxcyBvbiB0aGUgc2FtZSBlbGVtZW50LCBpZ25vcmUgaXQgLSBvbmx5IGtlZXAgYSBzaW5nbGUgcmVmZXJlbmNlIHBlciBzZWNvbmRcbiAgICBpZiAodGhpcy5fY2xpY2tzLnNvbWUoY2xpY2sgPT4gY2xpY2subm9kZSA9PT0gbmV3Q2xpY2subm9kZSAmJiBNYXRoLmFicyhjbGljay50aW1lc3RhbXAgLSBuZXdDbGljay50aW1lc3RhbXApIDwgMSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY2xpY2tzLnB1c2gobmV3Q2xpY2spO1xuXG4gICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgbmV3IGNsaWNrLCBzZXQgYSB0aW1lb3V0IHRvIGNoZWNrIGZvciBtdWx0aSBjbGlja3NcbiAgICBpZiAodGhpcy5fY2xpY2tzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5fc2NoZWR1bGVDaGVja0NsaWNrcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICByZWdpc3Rlck11dGF0aW9uKHRpbWVzdGFtcCA9IERhdGUubm93KCkpIHtcbiAgICB0aGlzLl9sYXN0TXV0YXRpb24gPSB0aW1lc3RhbXBUb1ModGltZXN0YW1wKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICByZWdpc3RlclNjcm9sbCh0aW1lc3RhbXAgPSBEYXRlLm5vdygpKSB7XG4gICAgdGhpcy5fbGFzdFNjcm9sbCA9IHRpbWVzdGFtcFRvUyh0aW1lc3RhbXApO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIHJlZ2lzdGVyQ2xpY2soZWxlbWVudCkge1xuICAgIGNvbnN0IG5vZGUgPSBnZXRDbG9zZXN0SW50ZXJhY3RpdmUoZWxlbWVudCk7XG4gICAgdGhpcy5faGFuZGxlTXVsdGlDbGljayhub2RlKTtcbiAgfVxuXG4gIC8qKiBDb3VudCBtdWx0aXBsZSBjbGlja3Mgb24gZWxlbWVudHMuICovXG4gIF9oYW5kbGVNdWx0aUNsaWNrKG5vZGUpIHtcbiAgICB0aGlzLl9nZXRDbGlja3Mobm9kZSkuZm9yRWFjaChjbGljayA9PiB7XG4gICAgICBjbGljay5jbGlja0NvdW50Kys7XG4gICAgfSk7XG4gIH1cblxuICAvKiogR2V0IGFsbCBwZW5kaW5nIGNsaWNrcyBmb3IgYSBnaXZlbiBub2RlLiAqL1xuICBfZ2V0Q2xpY2tzKG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xpY2tzLmZpbHRlcihjbGljayA9PiBjbGljay5ub2RlID09PSBub2RlKTtcbiAgfVxuXG4gIC8qKiBDaGVjayB0aGUgY2xpY2tzIHRoYXQgaGFwcGVuZWQuICovXG4gIF9jaGVja0NsaWNrcygpIHtcbiAgICBjb25zdCB0aW1lZE91dENsaWNrcyA9IFtdO1xuICAgIGNvbnN0IG5vdyA9IG5vd0luU2Vjb25kcygpO1xuICAgIHRoaXMuX2NsaWNrcy5mb3JFYWNoKGNsaWNrID0+IHtcbiAgICAgIGlmICghY2xpY2subXV0YXRpb25BZnRlciAmJiB0aGlzLl9sYXN0TXV0YXRpb24pIHtcbiAgICAgICAgY2xpY2subXV0YXRpb25BZnRlciA9IGNsaWNrLnRpbWVzdGFtcCA8PSB0aGlzLl9sYXN0TXV0YXRpb24gPyB0aGlzLl9sYXN0TXV0YXRpb24gLSBjbGljay50aW1lc3RhbXAgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAoIWNsaWNrLnNjcm9sbEFmdGVyICYmIHRoaXMuX2xhc3RTY3JvbGwpIHtcbiAgICAgICAgY2xpY2suc2Nyb2xsQWZ0ZXIgPSBjbGljay50aW1lc3RhbXAgPD0gdGhpcy5fbGFzdFNjcm9sbCA/IHRoaXMuX2xhc3RTY3JvbGwgLSBjbGljay50aW1lc3RhbXAgOiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIEFsbCBvZiB0aGVzZSBhcmUgaW4gc2Vjb25kcyFcbiAgICAgIGlmIChjbGljay50aW1lc3RhbXAgKyB0aGlzLl90aW1lb3V0IDw9IG5vdykge1xuICAgICAgICB0aW1lZE91dENsaWNrcy5wdXNoKGNsaWNrKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlbW92ZSBcIm9sZFwiIGNsaWNrc1xuICAgIGZvciAoY29uc3QgY2xpY2sgb2YgdGltZWRPdXRDbGlja3MpIHtcbiAgICAgIGNvbnN0IHBvcyA9IHRoaXMuX2NsaWNrcy5pbmRleE9mKGNsaWNrKTtcbiAgICAgIGlmIChwb3MgPiAtMSkge1xuICAgICAgICB0aGlzLl9nZW5lcmF0ZUJyZWFkY3J1bWJzKGNsaWNrKTtcbiAgICAgICAgdGhpcy5fY2xpY2tzLnNwbGljZShwb3MsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyaWdnZXIgbmV3IGNoZWNrLCB1bmxlc3Mgbm8gY2xpY2tzIGxlZnRcbiAgICBpZiAodGhpcy5fY2xpY2tzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fc2NoZWR1bGVDaGVja0NsaWNrcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBHZW5lcmF0ZSBtYXRjaGluZyBicmVhZGNydW1iKHMpIGZvciB0aGUgY2xpY2suICovXG4gIF9nZW5lcmF0ZUJyZWFkY3J1bWJzKGNsaWNrKSB7XG4gICAgY29uc3QgcmVwbGF5ID0gdGhpcy5fcmVwbGF5O1xuICAgIGNvbnN0IGhhZFNjcm9sbCA9IGNsaWNrLnNjcm9sbEFmdGVyICYmIGNsaWNrLnNjcm9sbEFmdGVyIDw9IHRoaXMuX3Njcm9sbFRpbWVvdXQ7XG4gICAgY29uc3QgaGFkTXV0YXRpb24gPSBjbGljay5tdXRhdGlvbkFmdGVyICYmIGNsaWNrLm11dGF0aW9uQWZ0ZXIgPD0gdGhpcy5fdGhyZXNob2xkO1xuICAgIGNvbnN0IGlzU2xvd0NsaWNrID0gIWhhZFNjcm9sbCAmJiAhaGFkTXV0YXRpb247XG4gICAgY29uc3Qge1xuICAgICAgY2xpY2tDb3VudCxcbiAgICAgIGNsaWNrQnJlYWRjcnVtYlxuICAgIH0gPSBjbGljaztcblxuICAgIC8vIFNsb3cgY2xpY2tcbiAgICBpZiAoaXNTbG93Q2xpY2spIHtcbiAgICAgIC8vIElmIGBtdXRhdGlvbkFmdGVyYCBpcyBzZXQsIGl0IG1lYW5zIGEgbXV0YXRpb24gaGFwcGVuZWQgYWZ0ZXIgdGhlIHRocmVzaG9sZCwgYnV0IGJlZm9yZSB0aGUgdGltZW91dFxuICAgICAgLy8gSWYgbm90LCBpdCBtZWFucyB3ZSBqdXN0IHRpbWVkIG91dCB3aXRob3V0IHNjcm9sbCAmIG11dGF0aW9uXG4gICAgICBjb25zdCB0aW1lQWZ0ZXJDbGlja01zID0gTWF0aC5taW4oY2xpY2subXV0YXRpb25BZnRlciB8fCB0aGlzLl90aW1lb3V0LCB0aGlzLl90aW1lb3V0KSAqIDEwMDA7XG4gICAgICBjb25zdCBlbmRSZWFzb24gPSB0aW1lQWZ0ZXJDbGlja01zIDwgdGhpcy5fdGltZW91dCAqIDEwMDAgPyAnbXV0YXRpb24nIDogJ3RpbWVvdXQnO1xuICAgICAgY29uc3QgYnJlYWRjcnVtYiA9IHtcbiAgICAgICAgdHlwZTogJ2RlZmF1bHQnLFxuICAgICAgICBtZXNzYWdlOiBjbGlja0JyZWFkY3J1bWIubWVzc2FnZSxcbiAgICAgICAgdGltZXN0YW1wOiBjbGlja0JyZWFkY3J1bWIudGltZXN0YW1wLFxuICAgICAgICBjYXRlZ29yeTogJ3VpLnNsb3dDbGlja0RldGVjdGVkJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLmNsaWNrQnJlYWRjcnVtYi5kYXRhLFxuICAgICAgICAgIHVybDogV0lORE9XLmxvY2F0aW9uLmhyZWYsXG4gICAgICAgICAgcm91dGU6IHJlcGxheS5nZXRDdXJyZW50Um91dGUoKSxcbiAgICAgICAgICB0aW1lQWZ0ZXJDbGlja01zLFxuICAgICAgICAgIGVuZFJlYXNvbixcbiAgICAgICAgICAvLyBJZiBjbGlja0NvdW50ID09PSAwLCBpdCBtZWFucyBtdWx0aUNsaWNrIHdhcyBub3QgY29ycmVjdGx5IGNhcHR1cmVkIGhlcmVcbiAgICAgICAgICAvLyAtIHdlIHN0aWxsIHdhbnQgdG8gc2VuZCAxIGluIHRoaXMgY2FzZVxuICAgICAgICAgIGNsaWNrQ291bnQ6IGNsaWNrQ291bnQgfHwgMVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdGhpcy5fYWRkQnJlYWRjcnVtYkV2ZW50KHJlcGxheSwgYnJlYWRjcnVtYik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTXVsdGkgY2xpY2tcbiAgICBpZiAoY2xpY2tDb3VudCA+IDEpIHtcbiAgICAgIGNvbnN0IGJyZWFkY3J1bWIgPSB7XG4gICAgICAgIHR5cGU6ICdkZWZhdWx0JyxcbiAgICAgICAgbWVzc2FnZTogY2xpY2tCcmVhZGNydW1iLm1lc3NhZ2UsXG4gICAgICAgIHRpbWVzdGFtcDogY2xpY2tCcmVhZGNydW1iLnRpbWVzdGFtcCxcbiAgICAgICAgY2F0ZWdvcnk6ICd1aS5tdWx0aUNsaWNrJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLmNsaWNrQnJlYWRjcnVtYi5kYXRhLFxuICAgICAgICAgIHVybDogV0lORE9XLmxvY2F0aW9uLmhyZWYsXG4gICAgICAgICAgcm91dGU6IHJlcGxheS5nZXRDdXJyZW50Um91dGUoKSxcbiAgICAgICAgICBjbGlja0NvdW50LFxuICAgICAgICAgIG1ldHJpYzogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdGhpcy5fYWRkQnJlYWRjcnVtYkV2ZW50KHJlcGxheSwgYnJlYWRjcnVtYik7XG4gICAgfVxuICB9XG5cbiAgLyoqIFNjaGVkdWxlIHRvIGNoZWNrIGN1cnJlbnQgY2xpY2tzLiAqL1xuICBfc2NoZWR1bGVDaGVja0NsaWNrcygpIHtcbiAgICBpZiAodGhpcy5fY2hlY2tDbGlja1RpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9jaGVja0NsaWNrVGltZW91dCk7XG4gICAgfVxuICAgIHRoaXMuX2NoZWNrQ2xpY2tUaW1lb3V0ID0gc2V0VGltZW91dCQzKCgpID0+IHRoaXMuX2NoZWNrQ2xpY2tzKCksIDEwMDApO1xuICB9XG59XG5jb25zdCBTTE9XX0NMSUNLX1RBR1MgPSBbJ0EnLCAnQlVUVE9OJywgJ0lOUFVUJ107XG5cbi8qKiBleHBvcnRlZCBmb3IgdGVzdHMgb25seSAqL1xuZnVuY3Rpb24gaWdub3JlRWxlbWVudChub2RlLCBpZ25vcmVTZWxlY3Rvcikge1xuICBpZiAoIVNMT1dfQ0xJQ0tfVEFHUy5pbmNsdWRlcyhub2RlLnRhZ05hbWUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBJZiA8aW5wdXQ+IHRhZywgd2Ugb25seSB3YW50IHRvIGNvbnNpZGVyIGlucHV0W3R5cGU9J3N1Ym1pdCddICYgaW5wdXRbdHlwZT0nYnV0dG9uJ11cbiAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiAhWydzdWJtaXQnLCAnYnV0dG9uJ10uaW5jbHVkZXMobm9kZS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSB8fCAnJykpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIElmIDxhPiB0YWcsIGRldGVjdCBzcGVjaWFsIHZhcmlhbnRzIHRoYXQgbWF5IG5vdCBsZWFkIHRvIGFuIGFjdGlvblxuICAvLyBJZiB0YXJnZXQgIT09IF9zZWxmLCB3ZSBtYXkgb3BlbiB0aGUgbGluayBzb21ld2hlcmUgZWxzZSwgd2hpY2ggd291bGQgbGVhZCB0byBubyBhY3Rpb25cbiAgLy8gQWxzbywgd2hlbiBkb3dubG9hZGluZyBhIGZpbGUsIHdlIG1heSBub3QgbGVhdmUgdGhlIHBhZ2UsIGJ1dCBzdGlsbCBub3QgdHJpZ2dlciBhbiBhY3Rpb25cbiAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ0EnICYmIChub2RlLmhhc0F0dHJpYnV0ZSgnZG93bmxvYWQnKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndGFyZ2V0JykgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpICE9PSAnX3NlbGYnKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChpZ25vcmVTZWxlY3RvciAmJiBub2RlLm1hdGNoZXMoaWdub3JlU2VsZWN0b3IpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNDbGlja0JyZWFkY3J1bWIoYnJlYWRjcnVtYikge1xuICByZXR1cm4gISEoYnJlYWRjcnVtYi5kYXRhICYmIHR5cGVvZiBicmVhZGNydW1iLmRhdGEubm9kZUlkID09PSAnbnVtYmVyJyAmJiBicmVhZGNydW1iLnRpbWVzdGFtcCk7XG59XG5cbi8vIFRoaXMgaXMgZ29vZCBlbm91Z2ggZm9yIHVzLCBhbmQgaXMgZWFzaWVyIHRvIHRlc3QvbW9jayB0aGFuIGB0aW1lc3RhbXBJblNlY29uZHNgXG5mdW5jdGlvbiBub3dJblNlY29uZHMoKSB7XG4gIHJldHVybiBEYXRlLm5vdygpIC8gMTAwMDtcbn1cblxuLyoqIFVwZGF0ZSB0aGUgY2xpY2sgZGV0ZWN0b3IgYmFzZWQgb24gYSByZWNvcmRpbmcgZXZlbnQgb2YgcnJ3ZWIuICovXG5mdW5jdGlvbiB1cGRhdGVDbGlja0RldGVjdG9yRm9yUmVjb3JkaW5nRXZlbnQoY2xpY2tEZXRlY3RvciwgZXZlbnQpIHtcbiAgdHJ5IHtcbiAgICAvLyBub3RlOiBXZSBvbmx5IGNvbnNpZGVyIGluY3JlbWVudGFsIHNuYXBzaG90cyBoZXJlXG4gICAgLy8gVGhpcyBtZWFucyB0aGF0IGFueSBmdWxsIHNuYXBzaG90IGlzIGlnbm9yZWQgZm9yIG11dGF0aW9uIGRldGVjdGlvbiAtIHRoZSByZWFzb24gaXMgdGhhdCB3ZSBzaW1wbHkgY2Fubm90IGtub3cgaWYgYSBtdXRhdGlvbiBoYXBwZW5lZCBoZXJlLlxuICAgIC8vIEUuZy4gdGhpbmsgdGhhdCB3ZSBhcmUgYnVmZmVyaW5nLCBhbiBlcnJvciBoYXBwZW5zIGFuZCB3ZSB0YWtlIGEgZnVsbCBzbmFwc2hvdCBiZWNhdXNlIHdlIHN3aXRjaGVkIHRvIHNlc3Npb24gbW9kZSAtXG4gICAgLy8gaW4gdGhpcyBzY2VuYXJpbywgd2Ugd291bGQgbm90IGtub3cgaWYgYSBkZWFkIGNsaWNrIGhhcHBlbmVkIGJlY2F1c2Ugb2YgdGhlIGVycm9yLCB3aGljaCBpcyBhIGtleSBkZWFkIGNsaWNrIHNjZW5hcmlvLlxuICAgIC8vIEluc3RlYWQsIGJ5IGlnbm9yaW5nIGZ1bGwgc25hcHNob3RzLCB3ZSBoYXZlIHRoZSByaXNrIHRoYXQgd2UgZ2VuZXJhdGUgYSBmYWxzZSBwb3NpdGl2ZVxuICAgIC8vIChpZiBhIG11dGF0aW9uIF9kaWRfIGhhcHBlbiBidXQgd2FzIFwic3dhbGxvd2VkXCIgYnkgdGhlIGZ1bGwgc25hcHNob3QpXG4gICAgLy8gQnV0IHRoaXMgc2hvdWxkIGJlIG1vcmUgdW5saWtlbHkgYXMgd2UnZCBnZW5lcmFsbHkgY2FwdHVyZSB0aGUgaW5jcmVtZW50YWwgc25hcHNob3QgcmlnaHQgYXdheVxuXG4gICAgaWYgKCFpc0luY3JlbWVudGFsRXZlbnQoZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIHNvdXJjZVxuICAgIH0gPSBldmVudC5kYXRhO1xuICAgIGlmIChJbmNyZW1lbnRhbE11dGF0aW9uU291cmNlcy5oYXMoc291cmNlKSkge1xuICAgICAgY2xpY2tEZXRlY3Rvci5yZWdpc3Rlck11dGF0aW9uKGV2ZW50LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGlmIChzb3VyY2UgPT09IEluY3JlbWVudGFsU291cmNlLlNjcm9sbCkge1xuICAgICAgY2xpY2tEZXRlY3Rvci5yZWdpc3RlclNjcm9sbChldmVudC50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpZiAoaXNJbmNyZW1lbnRhbE1vdXNlSW50ZXJhY3Rpb24oZXZlbnQpKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHR5cGUsXG4gICAgICAgIGlkXG4gICAgICB9ID0gZXZlbnQuZGF0YTtcbiAgICAgIGNvbnN0IG5vZGUgPSByZWNvcmQubWlycm9yLmdldE5vZGUoaWQpO1xuICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiB0eXBlID09PSBNb3VzZUludGVyYWN0aW9ucy5DbGljaykge1xuICAgICAgICBjbGlja0RldGVjdG9yLnJlZ2lzdGVyQ2xpY2sobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICAvLyBpZ25vcmUgZXJyb3JzIGhlcmUsIGUuZy4gaWYgYWNjZXNzaW5nIHNvbWV0aGluZyB0aGF0IGRvZXMgbm90IGV4aXN0XG4gIH1cbn1cbmZ1bmN0aW9uIGlzSW5jcmVtZW50YWxFdmVudChldmVudCkge1xuICByZXR1cm4gZXZlbnQudHlwZSA9PT0gUmVwbGF5RXZlbnRUeXBlSW5jcmVtZW50YWxTbmFwc2hvdDtcbn1cbmZ1bmN0aW9uIGlzSW5jcmVtZW50YWxNb3VzZUludGVyYWN0aW9uKGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5kYXRhLnNvdXJjZSA9PT0gSW5jcmVtZW50YWxTb3VyY2UuTW91c2VJbnRlcmFjdGlvbjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBicmVhZGNydW1iIGZvciBhIHJlcGxheS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQnJlYWRjcnVtYihicmVhZGNydW1iKSB7XG4gIHJldHVybiB7XG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC8gMTAwMCxcbiAgICB0eXBlOiAnZGVmYXVsdCcsXG4gICAgLi4uYnJlYWRjcnVtYlxuICB9O1xufVxudmFyIE5vZGVUeXBlID0gLyogQF9fUFVSRV9fICovKE5vZGVUeXBlMiA9PiB7XG4gIE5vZGVUeXBlMltOb2RlVHlwZTJbXCJEb2N1bWVudFwiXSA9IDBdID0gXCJEb2N1bWVudFwiO1xuICBOb2RlVHlwZTJbTm9kZVR5cGUyW1wiRG9jdW1lbnRUeXBlXCJdID0gMV0gPSBcIkRvY3VtZW50VHlwZVwiO1xuICBOb2RlVHlwZTJbTm9kZVR5cGUyW1wiRWxlbWVudFwiXSA9IDJdID0gXCJFbGVtZW50XCI7XG4gIE5vZGVUeXBlMltOb2RlVHlwZTJbXCJUZXh0XCJdID0gM10gPSBcIlRleHRcIjtcbiAgTm9kZVR5cGUyW05vZGVUeXBlMltcIkNEQVRBXCJdID0gNF0gPSBcIkNEQVRBXCI7XG4gIE5vZGVUeXBlMltOb2RlVHlwZTJbXCJDb21tZW50XCJdID0gNV0gPSBcIkNvbW1lbnRcIjtcbiAgcmV0dXJuIE5vZGVUeXBlMjtcbn0pKE5vZGVUeXBlIHx8IHt9KTtcblxuLy8gTm90ZSB0aGF0IHRoZXNlIGFyZSB0aGUgc2VyaWFsaXplZCBhdHRyaWJ1dGVzIGFuZCBub3QgYXR0cmlidXRlcyBkaXJlY3RseSBvblxuLy8gdGhlIERPTSBOb2RlLiBBdHRyaWJ1dGVzIHdlIGFyZSBpbnRlcmVzdGVkIGluOlxuY29uc3QgQVRUUklCVVRFU19UT19SRUNPUkQgPSBuZXcgU2V0KFsnaWQnLCAnY2xhc3MnLCAnYXJpYS1sYWJlbCcsICdyb2xlJywgJ25hbWUnLCAnYWx0JywgJ3RpdGxlJywgJ2RhdGEtdGVzdC1pZCcsICdkYXRhLXRlc3RpZCcsICdkaXNhYmxlZCcsICdhcmlhLWRpc2FibGVkJywgJ2RhdGEtc2VudHJ5LWNvbXBvbmVudCddKTtcblxuLyoqXG4gKiBJbmNsdXNpb24gbGlzdCBvZiBhdHRyaWJ1dGVzIHRoYXQgd2Ugd2FudCB0byByZWNvcmQgZnJvbSB0aGUgRE9NIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0QXR0cmlidXRlc1RvUmVjb3JkKGF0dHJpYnV0ZXMpIHtcbiAgY29uc3Qgb2JqID0ge307XG4gIGlmICghYXR0cmlidXRlc1snZGF0YS1zZW50cnktY29tcG9uZW50J10gJiYgYXR0cmlidXRlc1snZGF0YS1zZW50cnktZWxlbWVudCddKSB7XG4gICAgYXR0cmlidXRlc1snZGF0YS1zZW50cnktY29tcG9uZW50J10gPSBhdHRyaWJ1dGVzWydkYXRhLXNlbnRyeS1lbGVtZW50J107XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgIGlmIChBVFRSSUJVVEVTX1RPX1JFQ09SRC5oYXMoa2V5KSkge1xuICAgICAgbGV0IG5vcm1hbGl6ZWRLZXkgPSBrZXk7XG4gICAgICBpZiAoa2V5ID09PSAnZGF0YS10ZXN0aWQnIHx8IGtleSA9PT0gJ2RhdGEtdGVzdC1pZCcpIHtcbiAgICAgICAgbm9ybWFsaXplZEtleSA9ICd0ZXN0SWQnO1xuICAgICAgfVxuICAgICAgb2JqW25vcm1hbGl6ZWRLZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqO1xufVxuY29uc3QgaGFuZGxlRG9tTGlzdGVuZXIgPSByZXBsYXkgPT4ge1xuICByZXR1cm4gaGFuZGxlckRhdGEgPT4ge1xuICAgIGlmICghcmVwbGF5LmlzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGhhbmRsZURvbShoYW5kbGVyRGF0YSk7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaXNDbGljayA9IGhhbmRsZXJEYXRhLm5hbWUgPT09ICdjbGljayc7XG4gICAgY29uc3QgZXZlbnQgPSBpc0NsaWNrID8gaGFuZGxlckRhdGEuZXZlbnQgOiB1bmRlZmluZWQ7XG4gICAgLy8gSWdub3JlIGNsaWNrcyBpZiBjdHJsL2FsdC9tZXRhL3NoaWZ0IGtleXMgYXJlIGhlbGQgZG93biBhcyB0aGV5IGFsdGVyIGJlaGF2aW9yIG9mIGNsaWNrcyAoZS5nLiBvcGVuIGluIG5ldyB0YWIpXG4gICAgaWYgKGlzQ2xpY2sgJiYgcmVwbGF5LmNsaWNrRGV0ZWN0b3IgJiYgZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmICFldmVudC5hbHRLZXkgJiYgIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICBoYW5kbGVDbGljayhyZXBsYXkuY2xpY2tEZXRlY3RvciwgcmVzdWx0LCBnZXRDbGlja1RhcmdldE5vZGUoaGFuZGxlckRhdGEuZXZlbnQpKTtcbiAgICB9XG4gICAgYWRkQnJlYWRjcnVtYkV2ZW50KHJlcGxheSwgcmVzdWx0KTtcbiAgfTtcbn07XG5cbi8qKiBHZXQgdGhlIGJhc2UgRE9NIGJyZWFkY3J1bWIuICovXG5mdW5jdGlvbiBnZXRCYXNlRG9tQnJlYWRjcnVtYih0YXJnZXQsIG1lc3NhZ2UpIHtcbiAgY29uc3Qgbm9kZUlkID0gcmVjb3JkLm1pcnJvci5nZXRJZCh0YXJnZXQpO1xuICBjb25zdCBub2RlID0gbm9kZUlkICYmIHJlY29yZC5taXJyb3IuZ2V0Tm9kZShub2RlSWQpO1xuICBjb25zdCBtZXRhID0gbm9kZSAmJiByZWNvcmQubWlycm9yLmdldE1ldGEobm9kZSk7XG4gIGNvbnN0IGVsZW1lbnQgPSBtZXRhICYmIGlzRWxlbWVudChtZXRhKSA/IG1ldGEgOiBudWxsO1xuICByZXR1cm4ge1xuICAgIG1lc3NhZ2UsXG4gICAgZGF0YTogZWxlbWVudCA/IHtcbiAgICAgIG5vZGVJZCxcbiAgICAgIG5vZGU6IHtcbiAgICAgICAgaWQ6IG5vZGVJZCxcbiAgICAgICAgdGFnTmFtZTogZWxlbWVudC50YWdOYW1lLFxuICAgICAgICB0ZXh0Q29udGVudDogQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkTm9kZXMpLm1hcChub2RlID0+IG5vZGUudHlwZSA9PT0gTm9kZVR5cGUuVGV4dCAmJiBub2RlLnRleHRDb250ZW50KS5maWx0ZXIoQm9vbGVhbikgLy8gZmlsdGVyIG91dCBlbXB0eSB2YWx1ZXNcbiAgICAgICAgLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpKS5qb2luKCcnKSxcbiAgICAgICAgYXR0cmlidXRlczogZ2V0QXR0cmlidXRlc1RvUmVjb3JkKGVsZW1lbnQuYXR0cmlidXRlcylcbiAgICAgIH1cbiAgICB9IDoge31cbiAgfTtcbn1cblxuLyoqXG4gKiBBbiBldmVudCBoYW5kbGVyIHRvIHJlYWN0IHRvIERPTSBldmVudHMuXG4gKiBFeHBvcnRlZCBmb3IgdGVzdHMuXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZURvbShoYW5kbGVyRGF0YSkge1xuICBjb25zdCB7XG4gICAgdGFyZ2V0LFxuICAgIG1lc3NhZ2VcbiAgfSA9IGdldERvbVRhcmdldChoYW5kbGVyRGF0YSk7XG4gIHJldHVybiBjcmVhdGVCcmVhZGNydW1iKHtcbiAgICBjYXRlZ29yeTogYHVpLiR7aGFuZGxlckRhdGEubmFtZX1gLFxuICAgIC4uLmdldEJhc2VEb21CcmVhZGNydW1iKHRhcmdldCwgbWVzc2FnZSlcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXREb21UYXJnZXQoaGFuZGxlckRhdGEpIHtcbiAgY29uc3QgaXNDbGljayA9IGhhbmRsZXJEYXRhLm5hbWUgPT09ICdjbGljayc7XG4gIGxldCBtZXNzYWdlO1xuICBsZXQgdGFyZ2V0ID0gbnVsbDtcblxuICAvLyBBY2Nlc3NpbmcgZXZlbnQudGFyZ2V0IGNhbiB0aHJvdyAoc2VlIGdldHNlbnRyeS9yYXZlbi1qcyM4MzgsICM3NjgpXG4gIHRyeSB7XG4gICAgdGFyZ2V0ID0gaXNDbGljayA/IGdldENsaWNrVGFyZ2V0Tm9kZShoYW5kbGVyRGF0YS5ldmVudCkgOiBnZXRUYXJnZXROb2RlKGhhbmRsZXJEYXRhLmV2ZW50KTtcbiAgICBtZXNzYWdlID0gaHRtbFRyZWVBc1N0cmluZyh0YXJnZXQsIHtcbiAgICAgIG1heFN0cmluZ0xlbmd0aDogMjAwXG4gICAgfSkgfHwgJzx1bmtub3duPic7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBtZXNzYWdlID0gJzx1bmtub3duPic7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB0YXJnZXQsXG4gICAgbWVzc2FnZVxuICB9O1xufVxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUudHlwZSA9PT0gTm9kZVR5cGUuRWxlbWVudDtcbn1cblxuLyoqIEhhbmRsZSBrZXlib2FyZCBldmVudHMgJiBjcmVhdGUgYnJlYWRjcnVtYnMuICovXG5mdW5jdGlvbiBoYW5kbGVLZXlib2FyZEV2ZW50KHJlcGxheSwgZXZlbnQpIHtcbiAgaWYgKCFyZXBsYXkuaXNFbmFibGVkKCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBVcGRhdGUgdXNlciBhY3Rpdml0eSwgYnV0IGRvIG5vdCByZXN0YXJ0IHJlY29yZGluZyBhcyBpdCBjYW4gY3JlYXRlXG4gIC8vIG5vaXN5L2xvdy12YWx1ZSByZXBsYXlzIChlLmcuIHVzZXIgY29tZXMgYmFjayBmcm9tIGlkbGUsIGhpdHMgYWx0LXRhYiwgbmV3XG4gIC8vIHNlc3Npb24gd2l0aCBhIHNpbmdsZSBcImtleWRvd25cIiBicmVhZGNydW1iIGlzIGNyZWF0ZWQpXG4gIHJlcGxheS51cGRhdGVVc2VyQWN0aXZpdHkoKTtcbiAgY29uc3QgYnJlYWRjcnVtYiA9IGdldEtleWJvYXJkQnJlYWRjcnVtYihldmVudCk7XG4gIGlmICghYnJlYWRjcnVtYikge1xuICAgIHJldHVybjtcbiAgfVxuICBhZGRCcmVhZGNydW1iRXZlbnQocmVwbGF5LCBicmVhZGNydW1iKTtcbn1cblxuLyoqIGV4cG9ydGVkIG9ubHkgZm9yIHRlc3RzICovXG5mdW5jdGlvbiBnZXRLZXlib2FyZEJyZWFkY3J1bWIoZXZlbnQpIHtcbiAgY29uc3Qge1xuICAgIG1ldGFLZXksXG4gICAgc2hpZnRLZXksXG4gICAgY3RybEtleSxcbiAgICBhbHRLZXksXG4gICAga2V5LFxuICAgIHRhcmdldFxuICB9ID0gZXZlbnQ7XG5cbiAgLy8gbmV2ZXIgY2FwdHVyZSBmb3IgaW5wdXQgZmllbGRzXG4gIGlmICghdGFyZ2V0IHx8IGlzSW5wdXRFbGVtZW50KHRhcmdldCkgfHwgIWtleSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gTm90ZTogV2UgZG8gbm90IGNvbnNpZGVyIHNoaWZ0IGhlcmUsIGFzIHRoYXQgbWVhbnMgXCJ1cHBlcmNhc2VcIlxuICBjb25zdCBoYXNNb2RpZmllcktleSA9IG1ldGFLZXkgfHwgY3RybEtleSB8fCBhbHRLZXk7XG4gIGNvbnN0IGlzQ2hhcmFjdGVyS2V5ID0ga2V5Lmxlbmd0aCA9PT0gMTsgLy8gb3RoZXIga2V5cyBsaWtlIEVzY2FwZSwgVGFiLCBldGMgaGF2ZSBhIGxvbmdlciBsZW5ndGhcblxuICAvLyBEbyBub3QgY2FwdHVyZSBicmVhZGNydW1iIGlmIG9ubHkgYSB3b3JkIGtleSBpcyBwcmVzc2VkXG4gIC8vIFRoaXMgY291bGQgbGVhayBlLmcuIHVzZXIgaW5wdXRcbiAgaWYgKCFoYXNNb2RpZmllcktleSAmJiBpc0NoYXJhY3RlcktleSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IG1lc3NhZ2UgPSBodG1sVHJlZUFzU3RyaW5nKHRhcmdldCwge1xuICAgIG1heFN0cmluZ0xlbmd0aDogMjAwXG4gIH0pIHx8ICc8dW5rbm93bj4nO1xuICBjb25zdCBiYXNlQnJlYWRjcnVtYiA9IGdldEJhc2VEb21CcmVhZGNydW1iKHRhcmdldCwgbWVzc2FnZSk7XG4gIHJldHVybiBjcmVhdGVCcmVhZGNydW1iKHtcbiAgICBjYXRlZ29yeTogJ3VpLmtleURvd24nLFxuICAgIG1lc3NhZ2UsXG4gICAgZGF0YToge1xuICAgICAgLi4uYmFzZUJyZWFkY3J1bWIuZGF0YSxcbiAgICAgIG1ldGFLZXksXG4gICAgICBzaGlmdEtleSxcbiAgICAgIGN0cmxLZXksXG4gICAgICBhbHRLZXksXG4gICAgICBrZXlcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gaXNJbnB1dEVsZW1lbnQodGFyZ2V0KSB7XG4gIHJldHVybiB0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCB0YXJnZXQudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCB0YXJnZXQuaXNDb250ZW50RWRpdGFibGU7XG59XG5cbi8vIE1hcCBlbnRyeVR5cGUgLT4gZnVuY3Rpb24gdG8gbm9ybWFsaXplIGRhdGEgZm9yIGV2ZW50XG5jb25zdCBFTlRSWV9UWVBFUyA9IHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBlbnRyeSB0eXBlIGRvZXMgbm90IGZpdCB0aGUgY3JlYXRlKiBmdW5jdGlvbnMgZW50cnkgdHlwZVxuICByZXNvdXJjZTogY3JlYXRlUmVzb3VyY2VFbnRyeSxcbiAgcGFpbnQ6IGNyZWF0ZVBhaW50RW50cnksXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogZW50cnkgdHlwZSBkb2VzIG5vdCBmaXQgdGhlIGNyZWF0ZSogZnVuY3Rpb25zIGVudHJ5IHR5cGVcbiAgbmF2aWdhdGlvbjogY3JlYXRlTmF2aWdhdGlvbkVudHJ5XG59O1xuXG4vKipcbiAqIEhhbmRsZXIgY3JlYXRlciBmb3Igd2ViIHZpdGFsc1xuICovXG5mdW5jdGlvbiB3ZWJWaXRhbEhhbmRsZXIoZ2V0dGVyLCByZXBsYXkpIHtcbiAgcmV0dXJuICh7XG4gICAgbWV0cmljXG4gIH0pID0+IHZvaWQgcmVwbGF5LnJlcGxheVBlcmZvcm1hbmNlRW50cmllcy5wdXNoKGdldHRlcihtZXRyaWMpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgcmVwbGF5IHBlcmZvcm1hbmNlIGVudHJpZXMgZnJvbSB0aGUgYnJvd3NlciBwZXJmb3JtYW5jZSBlbnRyaWVzLlxuICovXG5mdW5jdGlvbiBjcmVhdGVQZXJmb3JtYW5jZUVudHJpZXMoZW50cmllcykge1xuICByZXR1cm4gZW50cmllcy5tYXAoY3JlYXRlUGVyZm9ybWFuY2VFbnRyeSkuZmlsdGVyKEJvb2xlYW4pO1xufVxuZnVuY3Rpb24gY3JlYXRlUGVyZm9ybWFuY2VFbnRyeShlbnRyeSkge1xuICBjb25zdCBlbnRyeVR5cGUgPSBFTlRSWV9UWVBFU1tlbnRyeS5lbnRyeVR5cGVdO1xuICBpZiAoIWVudHJ5VHlwZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBlbnRyeVR5cGUoZW50cnkpO1xufVxuZnVuY3Rpb24gZ2V0QWJzb2x1dGVUaW1lKHRpbWUpIHtcbiAgLy8gYnJvd3NlclBlcmZvcm1hbmNlVGltZU9yaWdpbiBjYW4gYmUgdW5kZWZpbmVkIGlmIGBwZXJmb3JtYW5jZWAgb3JcbiAgLy8gYHBlcmZvcm1hbmNlLm5vd2AgZG9lc24ndCBleGlzdCwgYnV0IHRoaXMgaXMgYWxyZWFkeSBjaGVja2VkIGJ5IHRoaXMgaW50ZWdyYXRpb25cbiAgcmV0dXJuICgoYnJvd3NlclBlcmZvcm1hbmNlVGltZU9yaWdpbigpIHx8IFdJTkRPVy5wZXJmb3JtYW5jZS50aW1lT3JpZ2luKSArIHRpbWUpIC8gMTAwMDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBhaW50RW50cnkoZW50cnkpIHtcbiAgY29uc3Qge1xuICAgIGR1cmF0aW9uLFxuICAgIGVudHJ5VHlwZSxcbiAgICBuYW1lLFxuICAgIHN0YXJ0VGltZVxuICB9ID0gZW50cnk7XG4gIGNvbnN0IHN0YXJ0ID0gZ2V0QWJzb2x1dGVUaW1lKHN0YXJ0VGltZSk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogZW50cnlUeXBlLFxuICAgIG5hbWUsXG4gICAgc3RhcnQsXG4gICAgZW5kOiBzdGFydCArIGR1cmF0aW9uLFxuICAgIGRhdGE6IHVuZGVmaW5lZFxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlTmF2aWdhdGlvbkVudHJ5KGVudHJ5KSB7XG4gIGNvbnN0IHtcbiAgICBlbnRyeVR5cGUsXG4gICAgbmFtZSxcbiAgICBkZWNvZGVkQm9keVNpemUsXG4gICAgZHVyYXRpb24sXG4gICAgZG9tQ29tcGxldGUsXG4gICAgZW5jb2RlZEJvZHlTaXplLFxuICAgIGRvbUNvbnRlbnRMb2FkZWRFdmVudFN0YXJ0LFxuICAgIGRvbUNvbnRlbnRMb2FkZWRFdmVudEVuZCxcbiAgICBkb21JbnRlcmFjdGl2ZSxcbiAgICBsb2FkRXZlbnRTdGFydCxcbiAgICBsb2FkRXZlbnRFbmQsXG4gICAgcmVkaXJlY3RDb3VudCxcbiAgICBzdGFydFRpbWUsXG4gICAgdHJhbnNmZXJTaXplLFxuICAgIHR5cGVcbiAgfSA9IGVudHJ5O1xuXG4gIC8vIElnbm9yZSBlbnRyaWVzIHdpdGggbm8gZHVyYXRpb24sIHRoZXkgZG8gbm90IHNlZW0gdG8gYmUgdXNlZnVsIGFuZCBjYXVzZSBkdXBlc1xuICBpZiAoZHVyYXRpb24gPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHR5cGU6IGAke2VudHJ5VHlwZX0uJHt0eXBlfWAsXG4gICAgc3RhcnQ6IGdldEFic29sdXRlVGltZShzdGFydFRpbWUpLFxuICAgIGVuZDogZ2V0QWJzb2x1dGVUaW1lKGRvbUNvbXBsZXRlKSxcbiAgICBuYW1lLFxuICAgIGRhdGE6IHtcbiAgICAgIHNpemU6IHRyYW5zZmVyU2l6ZSxcbiAgICAgIGRlY29kZWRCb2R5U2l6ZSxcbiAgICAgIGVuY29kZWRCb2R5U2l6ZSxcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgZG9tSW50ZXJhY3RpdmUsXG4gICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRTdGFydCxcbiAgICAgIGRvbUNvbnRlbnRMb2FkZWRFdmVudEVuZCxcbiAgICAgIGxvYWRFdmVudFN0YXJ0LFxuICAgICAgbG9hZEV2ZW50RW5kLFxuICAgICAgZG9tQ29tcGxldGUsXG4gICAgICByZWRpcmVjdENvdW50XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlUmVzb3VyY2VFbnRyeShlbnRyeSkge1xuICBjb25zdCB7XG4gICAgZW50cnlUeXBlLFxuICAgIGluaXRpYXRvclR5cGUsXG4gICAgbmFtZSxcbiAgICByZXNwb25zZUVuZCxcbiAgICBzdGFydFRpbWUsXG4gICAgZGVjb2RlZEJvZHlTaXplLFxuICAgIGVuY29kZWRCb2R5U2l6ZSxcbiAgICByZXNwb25zZVN0YXR1cyxcbiAgICB0cmFuc2ZlclNpemVcbiAgfSA9IGVudHJ5O1xuXG4gIC8vIENvcmUgU0RLIGhhbmRsZXMgdGhlc2VcbiAgaWYgKFsnZmV0Y2gnLCAneG1saHR0cHJlcXVlc3QnXS5pbmNsdWRlcyhpbml0aWF0b3JUeXBlKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiB7XG4gICAgdHlwZTogYCR7ZW50cnlUeXBlfS4ke2luaXRpYXRvclR5cGV9YCxcbiAgICBzdGFydDogZ2V0QWJzb2x1dGVUaW1lKHN0YXJ0VGltZSksXG4gICAgZW5kOiBnZXRBYnNvbHV0ZVRpbWUocmVzcG9uc2VFbmQpLFxuICAgIG5hbWUsXG4gICAgZGF0YToge1xuICAgICAgc2l6ZTogdHJhbnNmZXJTaXplLFxuICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2VTdGF0dXMsXG4gICAgICBkZWNvZGVkQm9keVNpemUsXG4gICAgICBlbmNvZGVkQm9keVNpemVcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQWRkIGEgTENQIGV2ZW50IHRvIHRoZSByZXBsYXkgYmFzZWQgb24gYSBMQ1AgbWV0cmljLlxuICovXG5mdW5jdGlvbiBnZXRMYXJnZXN0Q29udGVudGZ1bFBhaW50KG1ldHJpYykge1xuICBjb25zdCBsYXN0RW50cnkgPSBtZXRyaWMuZW50cmllc1ttZXRyaWMuZW50cmllcy5sZW5ndGggLSAxXTtcbiAgY29uc3Qgbm9kZSA9IGxhc3RFbnRyeT8uZWxlbWVudCA/IFtsYXN0RW50cnkuZWxlbWVudF0gOiB1bmRlZmluZWQ7XG4gIHJldHVybiBnZXRXZWJWaXRhbChtZXRyaWMsICdsYXJnZXN0LWNvbnRlbnRmdWwtcGFpbnQnLCBub2RlKTtcbn1cbmZ1bmN0aW9uIGlzTGF5b3V0U2hpZnQoZW50cnkpIHtcbiAgcmV0dXJuIGVudHJ5LnNvdXJjZXMgIT09IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBBZGQgYSBDTFMgZXZlbnQgdG8gdGhlIHJlcGxheSBiYXNlZCBvbiBhIENMUyBtZXRyaWMuXG4gKi9cbmZ1bmN0aW9uIGdldEN1bXVsYXRpdmVMYXlvdXRTaGlmdChtZXRyaWMpIHtcbiAgY29uc3QgbGF5b3V0U2hpZnRzID0gW107XG4gIGNvbnN0IG5vZGVzID0gW107XG4gIGZvciAoY29uc3QgZW50cnkgb2YgbWV0cmljLmVudHJpZXMpIHtcbiAgICBpZiAoaXNMYXlvdXRTaGlmdChlbnRyeSkpIHtcbiAgICAgIGNvbnN0IG5vZGVJZHMgPSBbXTtcbiAgICAgIGZvciAoY29uc3Qgc291cmNlIG9mIGVudHJ5LnNvdXJjZXMpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5ub2RlKSB7XG4gICAgICAgICAgbm9kZXMucHVzaChzb3VyY2Uubm9kZSk7XG4gICAgICAgICAgY29uc3Qgbm9kZUlkID0gcmVjb3JkLm1pcnJvci5nZXRJZChzb3VyY2Uubm9kZSk7XG4gICAgICAgICAgaWYgKG5vZGVJZCkge1xuICAgICAgICAgICAgbm9kZUlkcy5wdXNoKG5vZGVJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsYXlvdXRTaGlmdHMucHVzaCh7XG4gICAgICAgIHZhbHVlOiBlbnRyeS52YWx1ZSxcbiAgICAgICAgbm9kZUlkczogbm9kZUlkcy5sZW5ndGggPyBub2RlSWRzIDogdW5kZWZpbmVkXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdldFdlYlZpdGFsKG1ldHJpYywgJ2N1bXVsYXRpdmUtbGF5b3V0LXNoaWZ0Jywgbm9kZXMsIGxheW91dFNoaWZ0cyk7XG59XG5cbi8qKlxuICogQWRkIGEgRklEIGV2ZW50IHRvIHRoZSByZXBsYXkgYmFzZWQgb24gYSBGSUQgbWV0cmljLlxuICovXG5mdW5jdGlvbiBnZXRGaXJzdElucHV0RGVsYXkobWV0cmljKSB7XG4gIGNvbnN0IGxhc3RFbnRyeSA9IG1ldHJpYy5lbnRyaWVzW21ldHJpYy5lbnRyaWVzLmxlbmd0aCAtIDFdO1xuICBjb25zdCBub2RlID0gbGFzdEVudHJ5Py50YXJnZXQgPyBbbGFzdEVudHJ5LnRhcmdldF0gOiB1bmRlZmluZWQ7XG4gIHJldHVybiBnZXRXZWJWaXRhbChtZXRyaWMsICdmaXJzdC1pbnB1dC1kZWxheScsIG5vZGUpO1xufVxuXG4vKipcbiAqIEFkZCBhbiBJTlAgZXZlbnQgdG8gdGhlIHJlcGxheSBiYXNlZCBvbiBhbiBJTlAgbWV0cmljLlxuICovXG5mdW5jdGlvbiBnZXRJbnRlcmFjdGlvblRvTmV4dFBhaW50KG1ldHJpYykge1xuICBjb25zdCBsYXN0RW50cnkgPSBtZXRyaWMuZW50cmllc1ttZXRyaWMuZW50cmllcy5sZW5ndGggLSAxXTtcbiAgY29uc3Qgbm9kZSA9IGxhc3RFbnRyeT8udGFyZ2V0ID8gW2xhc3RFbnRyeS50YXJnZXRdIDogdW5kZWZpbmVkO1xuICByZXR1cm4gZ2V0V2ViVml0YWwobWV0cmljLCAnaW50ZXJhY3Rpb24tdG8tbmV4dC1wYWludCcsIG5vZGUpO1xufVxuXG4vKipcbiAqIEFkZCBhbiB3ZWIgdml0YWwgZXZlbnQgdG8gdGhlIHJlcGxheSBiYXNlZCBvbiB0aGUgd2ViIHZpdGFsIG1ldHJpYy5cbiAqL1xuZnVuY3Rpb24gZ2V0V2ViVml0YWwobWV0cmljLCBuYW1lLCBub2RlcywgYXR0cmlidXRpb25zKSB7XG4gIGNvbnN0IHZhbHVlID0gbWV0cmljLnZhbHVlO1xuICBjb25zdCByYXRpbmcgPSBtZXRyaWMucmF0aW5nO1xuICBjb25zdCBlbmQgPSBnZXRBYnNvbHV0ZVRpbWUodmFsdWUpO1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICd3ZWItdml0YWwnLFxuICAgIG5hbWUsXG4gICAgc3RhcnQ6IGVuZCxcbiAgICBlbmQsXG4gICAgZGF0YToge1xuICAgICAgdmFsdWUsXG4gICAgICBzaXplOiB2YWx1ZSxcbiAgICAgIHJhdGluZyxcbiAgICAgIG5vZGVJZHM6IG5vZGVzID8gbm9kZXMubWFwKG5vZGUgPT4gcmVjb3JkLm1pcnJvci5nZXRJZChub2RlKSkgOiB1bmRlZmluZWQsXG4gICAgICBhdHRyaWJ1dGlvbnNcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogU2V0cyB1cCBhIFBlcmZvcm1hbmNlT2JzZXJ2ZXIgdG8gbGlzdGVuIHRvIGFsbCBwZXJmb3JtYW5jZSBlbnRyeSB0eXBlcy5cbiAqIFJldHVybnMgYSBjYWxsYmFjayB0byBzdG9wIG9ic2VydmluZy5cbiAqL1xuZnVuY3Rpb24gc2V0dXBQZXJmb3JtYW5jZU9ic2VydmVyKHJlcGxheSkge1xuICBmdW5jdGlvbiBhZGRQZXJmb3JtYW5jZUVudHJ5KGVudHJ5KSB7XG4gICAgLy8gSXQgaXMgcG9zc2libGUgZm9yIGVudHJpZXMgdG8gY29tZSB1cCBtdWx0aXBsZSB0aW1lc1xuICAgIGlmICghcmVwbGF5LnBlcmZvcm1hbmNlRW50cmllcy5pbmNsdWRlcyhlbnRyeSkpIHtcbiAgICAgIHJlcGxheS5wZXJmb3JtYW5jZUVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG9uRW50cmllcyh7XG4gICAgZW50cmllc1xuICB9KSB7XG4gICAgZW50cmllcy5mb3JFYWNoKGFkZFBlcmZvcm1hbmNlRW50cnkpO1xuICB9XG4gIGNvbnN0IGNsZWFyQ2FsbGJhY2tzID0gW107XG4gIFsnbmF2aWdhdGlvbicsICdwYWludCcsICdyZXNvdXJjZSddLmZvckVhY2godHlwZSA9PiB7XG4gICAgY2xlYXJDYWxsYmFja3MucHVzaChhZGRQZXJmb3JtYW5jZUluc3RydW1lbnRhdGlvbkhhbmRsZXIodHlwZSwgb25FbnRyaWVzKSk7XG4gIH0pO1xuICBjbGVhckNhbGxiYWNrcy5wdXNoKGFkZExjcEluc3RydW1lbnRhdGlvbkhhbmRsZXIod2ViVml0YWxIYW5kbGVyKGdldExhcmdlc3RDb250ZW50ZnVsUGFpbnQsIHJlcGxheSkpLCBhZGRDbHNJbnN0cnVtZW50YXRpb25IYW5kbGVyKHdlYlZpdGFsSGFuZGxlcihnZXRDdW11bGF0aXZlTGF5b3V0U2hpZnQsIHJlcGxheSkpLCBhZGRGaWRJbnN0cnVtZW50YXRpb25IYW5kbGVyKHdlYlZpdGFsSGFuZGxlcihnZXRGaXJzdElucHV0RGVsYXksIHJlcGxheSkpLCBhZGRJbnBJbnN0cnVtZW50YXRpb25IYW5kbGVyKHdlYlZpdGFsSGFuZGxlcihnZXRJbnRlcmFjdGlvblRvTmV4dFBhaW50LCByZXBsYXkpKSk7XG5cbiAgLy8gQSBjYWxsYmFjayB0byBjbGVhbnVwIGFsbCBoYW5kbGVyc1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGNsZWFyQ2FsbGJhY2tzLmZvckVhY2goY2xlYXJDYWxsYmFjayA9PiBjbGVhckNhbGxiYWNrKCkpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgc2VydmVzIGFzIGEgYnVpbGQgdGltZSBmbGFnIHRoYXQgd2lsbCBiZSB0cnVlIGJ5IGRlZmF1bHQsIGJ1dCBmYWxzZSBpbiBub24tZGVidWcgYnVpbGRzIG9yIGlmIHVzZXJzIHJlcGxhY2UgYF9fU0VOVFJZX0RFQlVHX19gIGluIHRoZWlyIGdlbmVyYXRlZCBjb2RlLlxuICpcbiAqIEFUVEVOVElPTjogVGhpcyBjb25zdGFudCBtdXN0IG5ldmVyIGNyb3NzIHBhY2thZ2UgYm91bmRhcmllcyAoaS5lLiBiZSBleHBvcnRlZCkgdG8gZ3VhcmFudGVlIHRoYXQgaXQgY2FuIGJlIHVzZWQgZm9yIHRyZWUgc2hha2luZy5cbiAqL1xuY29uc3QgREVCVUdfQlVJTEQgPSB0eXBlb2YgX19TRU5UUllfREVCVUdfXyA9PT0gJ3VuZGVmaW5lZCcgfHwgX19TRU5UUllfREVCVUdfXztcbmNvbnN0IHIgPSBgdmFyIHQ9VWludDhBcnJheSxuPVVpbnQxNkFycmF5LHI9SW50MzJBcnJheSxlPW5ldyB0KFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDAsMCwwLDBdKSxpPW5ldyB0KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzLDAsMF0pLHM9bmV3IHQoWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdKSxhPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPW5ldyBuKDMxKSxzPTA7czwzMTsrK3MpaVtzXT1lKz0xPDx0W3MtMV07dmFyIGE9bmV3IHIoaVszMF0pO2ZvcihzPTE7czwzMDsrK3MpZm9yKHZhciBvPWlbc107bzxpW3MrMV07KytvKWFbb109by1pW3NdPDw1fHM7cmV0dXJue2I6aSxyOmF9fSxvPWEoZSwyKSxoPW8uYixmPW8ucjtoWzI4XT0yNTgsZlsyNThdPTI4O2Zvcih2YXIgbD1hKGksMCkucix1PW5ldyBuKDMyNzY4KSxjPTA7YzwzMjc2ODsrK2Mpe3ZhciB2PSg0MzY5MCZjKT4+MXwoMjE4NDUmYyk8PDE7dj0oNjE2ODAmKHY9KDUyNDI4JnYpPj4yfCgxMzEwNyZ2KTw8MikpPj40fCgzODU1JnYpPDw0LHVbY109KCg2NTI4MCZ2KT4+OHwoMjU1JnYpPDw4KT4+MX12YXIgZD1mdW5jdGlvbih0LHIsZSl7Zm9yKHZhciBpPXQubGVuZ3RoLHM9MCxhPW5ldyBuKHIpO3M8aTsrK3MpdFtzXSYmKythW3Rbc10tMV07dmFyIG8saD1uZXcgbihyKTtmb3Iocz0xO3M8cjsrK3MpaFtzXT1oW3MtMV0rYVtzLTFdPDwxO2lmKGUpe289bmV3IG4oMTw8cik7dmFyIGY9MTUtcjtmb3Iocz0wO3M8aTsrK3MpaWYodFtzXSlmb3IodmFyIGw9czw8NHx0W3NdLGM9ci10W3NdLHY9aFt0W3NdLTFdKys8PGMsZD12fCgxPDxjKS0xO3Y8PWQ7Kyt2KW9bdVt2XT4+Zl09bH1lbHNlIGZvcihvPW5ldyBuKGkpLHM9MDtzPGk7KytzKXRbc10mJihvW3NdPXVbaFt0W3NdLTFdKytdPj4xNS10W3NdKTtyZXR1cm4gb30scD1uZXcgdCgyODgpO2ZvcihjPTA7YzwxNDQ7KytjKXBbY109ODtmb3IoYz0xNDQ7YzwyNTY7KytjKXBbY109OTtmb3IoYz0yNTY7YzwyODA7KytjKXBbY109Nztmb3IoYz0yODA7YzwyODg7KytjKXBbY109ODt2YXIgZz1uZXcgdCgzMik7Zm9yKGM9MDtjPDMyOysrYylnW2NdPTU7dmFyIHc9ZChwLDksMCkseT1kKGcsNSwwKSxtPWZ1bmN0aW9uKHQpe3JldHVybih0KzcpLzh8MH0sYj1mdW5jdGlvbihuLHIsZSl7cmV0dXJuKG51bGw9PWV8fGU+bi5sZW5ndGgpJiYoZT1uLmxlbmd0aCksbmV3IHQobi5zdWJhcnJheShyLGUpKX0sTT1bXCJ1bmV4cGVjdGVkIEVPRlwiLFwiaW52YWxpZCBibG9jayB0eXBlXCIsXCJpbnZhbGlkIGxlbmd0aC9saXRlcmFsXCIsXCJpbnZhbGlkIGRpc3RhbmNlXCIsXCJzdHJlYW0gZmluaXNoZWRcIixcIm5vIHN0cmVhbSBoYW5kbGVyXCIsLFwibm8gY2FsbGJhY2tcIixcImludmFsaWQgVVRGLTggZGF0YVwiLFwiZXh0cmEgZmllbGQgdG9vIGxvbmdcIixcImRhdGUgbm90IGluIHJhbmdlIDE5ODAtMjA5OVwiLFwiZmlsZW5hbWUgdG9vIGxvbmdcIixcInN0cmVhbSBmaW5pc2hpbmdcIixcImludmFsaWQgemlwIGRhdGFcIl0sRT1mdW5jdGlvbih0LG4scil7dmFyIGU9bmV3IEVycm9yKG58fE1bdF0pO2lmKGUuY29kZT10LEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShlLEUpLCFyKXRocm93IGU7cmV0dXJuIGV9LHo9ZnVuY3Rpb24odCxuLHIpe3I8PD03Jm47dmFyIGU9bi84fDA7dFtlXXw9cix0W2UrMV18PXI+Pjh9LF89ZnVuY3Rpb24odCxuLHIpe3I8PD03Jm47dmFyIGU9bi84fDA7dFtlXXw9cix0W2UrMV18PXI+PjgsdFtlKzJdfD1yPj4xNn0seD1mdW5jdGlvbihyLGUpe2Zvcih2YXIgaT1bXSxzPTA7czxyLmxlbmd0aDsrK3MpcltzXSYmaS5wdXNoKHtzOnMsZjpyW3NdfSk7dmFyIGE9aS5sZW5ndGgsbz1pLnNsaWNlKCk7aWYoIWEpcmV0dXJue3Q6RixsOjB9O2lmKDE9PWEpe3ZhciBoPW5ldyB0KGlbMF0ucysxKTtyZXR1cm4gaFtpWzBdLnNdPTEse3Q6aCxsOjF9fWkuc29ydChmdW5jdGlvbih0LG4pe3JldHVybiB0LmYtbi5mfSksaS5wdXNoKHtzOi0xLGY6MjUwMDF9KTt2YXIgZj1pWzBdLGw9aVsxXSx1PTAsYz0xLHY9Mjtmb3IoaVswXT17czotMSxmOmYuZitsLmYsbDpmLHI6bH07YyE9YS0xOylmPWlbaVt1XS5mPGlbdl0uZj91Kys6disrXSxsPWlbdSE9YyYmaVt1XS5mPGlbdl0uZj91Kys6disrXSxpW2MrK109e3M6LTEsZjpmLmYrbC5mLGw6ZixyOmx9O3ZhciBkPW9bMF0ucztmb3Iocz0xO3M8YTsrK3Mpb1tzXS5zPmQmJihkPW9bc10ucyk7dmFyIHA9bmV3IG4oZCsxKSxnPUEoaVtjLTFdLHAsMCk7aWYoZz5lKXtzPTA7dmFyIHc9MCx5PWctZSxtPTE8PHk7Zm9yKG8uc29ydChmdW5jdGlvbih0LG4pe3JldHVybiBwW24uc10tcFt0LnNdfHx0LmYtbi5mfSk7czxhOysrcyl7dmFyIGI9b1tzXS5zO2lmKCEocFtiXT5lKSlicmVhazt3Kz1tLSgxPDxnLXBbYl0pLHBbYl09ZX1mb3Iodz4+PXk7dz4wOyl7dmFyIE09b1tzXS5zO3BbTV08ZT93LT0xPDxlLXBbTV0rKy0xOisrc31mb3IoO3M+PTAmJnc7LS1zKXt2YXIgRT1vW3NdLnM7cFtFXT09ZSYmKC0tcFtFXSwrK3cpfWc9ZX1yZXR1cm57dDpuZXcgdChwKSxsOmd9fSxBPWZ1bmN0aW9uKHQsbixyKXtyZXR1cm4tMT09dC5zP01hdGgubWF4KEEodC5sLG4scisxKSxBKHQucixuLHIrMSkpOm5bdC5zXT1yfSxEPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj10Lmxlbmd0aDtyJiYhdFstLXJdOyk7Zm9yKHZhciBlPW5ldyBuKCsrciksaT0wLHM9dFswXSxhPTEsbz1mdW5jdGlvbih0KXtlW2krK109dH0saD0xO2g8PXI7KytoKWlmKHRbaF09PXMmJmghPXIpKythO2Vsc2V7aWYoIXMmJmE+Mil7Zm9yKDthPjEzODthLT0xMzgpbygzMjc1NCk7YT4yJiYobyhhPjEwP2EtMTE8PDV8Mjg2OTA6YS0zPDw1fDEyMzA1KSxhPTApfWVsc2UgaWYoYT4zKXtmb3IobyhzKSwtLWE7YT42O2EtPTYpbyg4MzA0KTthPjImJihvKGEtMzw8NXw4MjA4KSxhPTApfWZvcig7YS0tOylvKHMpO2E9MSxzPXRbaF19cmV0dXJue2M6ZS5zdWJhcnJheSgwLGkpLG46cn19LFQ9ZnVuY3Rpb24odCxuKXtmb3IodmFyIHI9MCxlPTA7ZTxuLmxlbmd0aDsrK2Upcis9dFtlXSpuW2VdO3JldHVybiByfSxrPWZ1bmN0aW9uKHQsbixyKXt2YXIgZT1yLmxlbmd0aCxpPW0obisyKTt0W2ldPTI1NSZlLHRbaSsxXT1lPj44LHRbaSsyXT0yNTVedFtpXSx0W2krM109MjU1XnRbaSsxXTtmb3IodmFyIHM9MDtzPGU7KytzKXRbaStzKzRdPXJbc107cmV0dXJuIDgqKGkrNCtlKX0sVT1mdW5jdGlvbih0LHIsYSxvLGgsZixsLHUsYyx2LG0pe3oocixtKyssYSksKytoWzI1Nl07Zm9yKHZhciBiPXgoaCwxNSksTT1iLnQsRT1iLmwsQT14KGYsMTUpLFU9QS50LEM9QS5sLEY9RChNKSxJPUYuYyxTPUYubixMPUQoVSksTz1MLmMsaj1MLm4scT1uZXcgbigxOSksQj0wO0I8SS5sZW5ndGg7KytCKSsrcVszMSZJW0JdXTtmb3IoQj0wO0I8Ty5sZW5ndGg7KytCKSsrcVszMSZPW0JdXTtmb3IodmFyIEc9eChxLDcpLEg9Ry50LEo9Ry5sLEs9MTk7Sz40JiYhSFtzW0stMV1dOy0tSyk7dmFyIE4sUCxRLFIsVj12KzU8PDMsVz1UKGgscCkrVChmLGcpK2wsWD1UKGgsTSkrVChmLFUpK2wrMTQrMypLK1QocSxIKSsyKnFbMTZdKzMqcVsxN10rNypxWzE4XTtpZihjPj0wJiZWPD1XJiZWPD1YKXJldHVybiBrKHIsbSx0LnN1YmFycmF5KGMsYyt2KSk7aWYoeihyLG0sMSsoWDxXKSksbSs9MixYPFcpe049ZChNLEUsMCksUD1NLFE9ZChVLEMsMCksUj1VO3ZhciBZPWQoSCxKLDApO3oocixtLFMtMjU3KSx6KHIsbSs1LGotMSkseihyLG0rMTAsSy00KSxtKz0xNDtmb3IoQj0wO0I8SzsrK0IpeihyLG0rMypCLEhbc1tCXV0pO20rPTMqSztmb3IodmFyIFo9W0ksT10sJD0wOyQ8MjsrKyQpe3ZhciB0dD1aWyRdO2ZvcihCPTA7Qjx0dC5sZW5ndGg7KytCKXt2YXIgbnQ9MzEmdHRbQl07eihyLG0sWVtudF0pLG0rPUhbbnRdLG50PjE1JiYoeihyLG0sdHRbQl0+PjUmMTI3KSxtKz10dFtCXT4+MTIpfX19ZWxzZSBOPXcsUD1wLFE9eSxSPWc7Zm9yKEI9MDtCPHU7KytCKXt2YXIgcnQ9b1tCXTtpZihydD4yNTUpe18ocixtLE5bKG50PXJ0Pj4xOCYzMSkrMjU3XSksbSs9UFtudCsyNTddLG50PjcmJih6KHIsbSxydD4+MjMmMzEpLG0rPWVbbnRdKTt2YXIgZXQ9MzEmcnQ7XyhyLG0sUVtldF0pLG0rPVJbZXRdLGV0PjMmJihfKHIsbSxydD4+NSY4MTkxKSxtKz1pW2V0XSl9ZWxzZSBfKHIsbSxOW3J0XSksbSs9UFtydF19cmV0dXJuIF8ocixtLE5bMjU2XSksbStQWzI1Nl19LEM9bmV3IHIoWzY1NTQwLDEzMTA4MCwxMzEwODgsMTMxMTA0LDI2MjE3NiwxMDQ4NzA0LDEwNDg4MzIsMjExNDU2MCwyMTE3NjMyXSksRj1uZXcgdCgwKSxJPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBJbnQzMkFycmF5KDI1Niksbj0wO248MjU2Oysrbil7Zm9yKHZhciByPW4sZT05Oy0tZTspcj0oMSZyJiYtMzA2Njc0OTEyKV5yPj4+MTt0W25dPXJ9cmV0dXJuIHR9KCksUz1mdW5jdGlvbigpe3ZhciB0PTEsbj0wO3JldHVybntwOmZ1bmN0aW9uKHIpe2Zvcih2YXIgZT10LGk9bixzPTB8ci5sZW5ndGgsYT0wO2EhPXM7KXtmb3IodmFyIG89TWF0aC5taW4oYSsyNjU1LHMpO2E8bzsrK2EpaSs9ZSs9clthXTtlPSg2NTUzNSZlKSsxNSooZT4+MTYpLGk9KDY1NTM1JmkpKzE1KihpPj4xNil9dD1lLG49aX0sZDpmdW5jdGlvbigpe3JldHVybigyNTUmKHQlPTY1NTIxKSk8PDI0fCg2NTI4MCZ0KTw8OHwoMjU1JihuJT02NTUyMSkpPDw4fG4+Pjh9fX0sTD1mdW5jdGlvbihzLGEsbyxoLHUpe2lmKCF1JiYodT17bDoxfSxhLmRpY3Rpb25hcnkpKXt2YXIgYz1hLmRpY3Rpb25hcnkuc3ViYXJyYXkoLTMyNzY4KSx2PW5ldyB0KGMubGVuZ3RoK3MubGVuZ3RoKTt2LnNldChjKSx2LnNldChzLGMubGVuZ3RoKSxzPXYsdS53PWMubGVuZ3RofXJldHVybiBmdW5jdGlvbihzLGEsbyxoLHUsYyl7dmFyIHY9Yy56fHxzLmxlbmd0aCxkPW5ldyB0KGgrdis1KigxK01hdGguY2VpbCh2LzdlMykpK3UpLHA9ZC5zdWJhcnJheShoLGQubGVuZ3RoLXUpLGc9Yy5sLHc9NyYoYy5yfHwwKTtpZihhKXt3JiYocFswXT1jLnI+PjMpO2Zvcih2YXIgeT1DW2EtMV0sTT15Pj4xMyxFPTgxOTEmeSx6PSgxPDxvKS0xLF89Yy5wfHxuZXcgbigzMjc2OCkseD1jLmh8fG5ldyBuKHorMSksQT1NYXRoLmNlaWwoby8zKSxEPTIqQSxUPWZ1bmN0aW9uKHQpe3JldHVybihzW3RdXnNbdCsxXTw8QV5zW3QrMl08PEQpJnp9LEY9bmV3IHIoMjVlMyksST1uZXcgbigyODgpLFM9bmV3IG4oMzIpLEw9MCxPPTAsaj1jLml8fDAscT0wLEI9Yy53fHwwLEc9MDtqKzI8djsrK2ope3ZhciBIPVQoaiksSj0zMjc2NyZqLEs9eFtIXTtpZihfW0pdPUsseFtIXT1KLEI8PWope3ZhciBOPXYtajtpZigoTD43ZTN8fHE+MjQ1NzYpJiYoTj40MjN8fCFnKSl7dz1VKHMscCwwLEYsSSxTLE8scSxHLGotRyx3KSxxPUw9Tz0wLEc9ajtmb3IodmFyIFA9MDtQPDI4NjsrK1ApSVtQXT0wO2ZvcihQPTA7UDwzMDsrK1ApU1tQXT0wfXZhciBRPTIsUj0wLFY9RSxXPUotSyYzMjc2NztpZihOPjImJkg9PVQoai1XKSlmb3IodmFyIFg9TWF0aC5taW4oTSxOKS0xLFk9TWF0aC5taW4oMzI3NjcsaiksWj1NYXRoLm1pbigyNTgsTik7Vzw9WSYmLS1WJiZKIT1LOyl7aWYoc1tqK1FdPT1zW2orUS1XXSl7Zm9yKHZhciAkPTA7JDxaJiZzW2orJF09PXNbaiskLVddOysrJCk7aWYoJD5RKXtpZihRPSQsUj1XLCQ+WClicmVhazt2YXIgdHQ9TWF0aC5taW4oVywkLTIpLG50PTA7Zm9yKFA9MDtQPHR0OysrUCl7dmFyIHJ0PWotVytQJjMyNzY3LGV0PXJ0LV9bcnRdJjMyNzY3O2V0Pm50JiYobnQ9ZXQsSz1ydCl9fX1XKz0oSj1LKS0oSz1fW0pdKSYzMjc2N31pZihSKXtGW3ErK109MjY4NDM1NDU2fGZbUV08PDE4fGxbUl07dmFyIGl0PTMxJmZbUV0sc3Q9MzEmbFtSXTtPKz1lW2l0XStpW3N0XSwrK0lbMjU3K2l0XSwrK1Nbc3RdLEI9aitRLCsrTH1lbHNlIEZbcSsrXT1zW2pdLCsrSVtzW2pdXX19Zm9yKGo9TWF0aC5tYXgoaixCKTtqPHY7KytqKUZbcSsrXT1zW2pdLCsrSVtzW2pdXTt3PVUocyxwLGcsRixJLFMsTyxxLEcsai1HLHcpLGd8fChjLnI9NyZ3fHBbdy84fDBdPDwzLHctPTcsYy5oPXgsYy5wPV8sYy5pPWosYy53PUIpfWVsc2V7Zm9yKGo9Yy53fHwwO2o8ditnO2orPTY1NTM1KXt2YXIgYXQ9ais2NTUzNTthdD49diYmKHBbdy84fDBdPWcsYXQ9diksdz1rKHAsdysxLHMuc3ViYXJyYXkoaixhdCkpfWMuaT12fXJldHVybiBiKGQsMCxoK20odykrdSl9KHMsbnVsbD09YS5sZXZlbD82OmEubGV2ZWwsbnVsbD09YS5tZW0/dS5sP01hdGguY2VpbCgxLjUqTWF0aC5tYXgoOCxNYXRoLm1pbigxMyxNYXRoLmxvZyhzLmxlbmd0aCkpKSk6MjA6MTIrYS5tZW0sbyxoLHUpfSxPPWZ1bmN0aW9uKHQsbixyKXtmb3IoO3I7KytuKXRbbl09cixyPj4+PTh9LGo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4scil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKHI9bixuPXt9KSx0aGlzLm9uZGF0YT1yLHRoaXMubz1ufHx7fSx0aGlzLnM9e2w6MCxpOjMyNzY4LHc6MzI3NjgsejozMjc2OH0sdGhpcy5iPW5ldyB0KDk4MzA0KSx0aGlzLm8uZGljdGlvbmFyeSl7dmFyIGU9dGhpcy5vLmRpY3Rpb25hcnkuc3ViYXJyYXkoLTMyNzY4KTt0aGlzLmIuc2V0KGUsMzI3NjgtZS5sZW5ndGgpLHRoaXMucy5pPTMyNzY4LWUubGVuZ3RofX1yZXR1cm4gbi5wcm90b3R5cGUucD1mdW5jdGlvbih0LG4pe3RoaXMub25kYXRhKEwodCx0aGlzLm8sMCwwLHRoaXMucyksbil9LG4ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24obixyKXt0aGlzLm9uZGF0YXx8RSg1KSx0aGlzLnMubCYmRSg0KTt2YXIgZT1uLmxlbmd0aCt0aGlzLnMuejtpZihlPnRoaXMuYi5sZW5ndGgpe2lmKGU+Mip0aGlzLmIubGVuZ3RoLTMyNzY4KXt2YXIgaT1uZXcgdCgtMzI3NjgmZSk7aS5zZXQodGhpcy5iLnN1YmFycmF5KDAsdGhpcy5zLnopKSx0aGlzLmI9aX12YXIgcz10aGlzLmIubGVuZ3RoLXRoaXMucy56O3RoaXMuYi5zZXQobi5zdWJhcnJheSgwLHMpLHRoaXMucy56KSx0aGlzLnMuej10aGlzLmIubGVuZ3RoLHRoaXMucCh0aGlzLmIsITEpLHRoaXMuYi5zZXQodGhpcy5iLnN1YmFycmF5KC0zMjc2OCkpLHRoaXMuYi5zZXQobi5zdWJhcnJheShzKSwzMjc2OCksdGhpcy5zLno9bi5sZW5ndGgtcyszMjc2OCx0aGlzLnMuaT0zMjc2Nix0aGlzLnMudz0zMjc2OH1lbHNlIHRoaXMuYi5zZXQobix0aGlzLnMueiksdGhpcy5zLnorPW4ubGVuZ3RoO3RoaXMucy5sPTEmciwodGhpcy5zLno+dGhpcy5zLncrODE5MXx8cikmJih0aGlzLnAodGhpcy5iLHJ8fCExKSx0aGlzLnMudz10aGlzLnMuaSx0aGlzLnMuaS09Mil9LG4ucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7dGhpcy5vbmRhdGF8fEUoNSksdGhpcy5zLmwmJkUoNCksdGhpcy5wKHRoaXMuYiwhMSksdGhpcy5zLnc9dGhpcy5zLmksdGhpcy5zLmktPTJ9LG59KCk7ZnVuY3Rpb24gcSh0LG4pe258fChuPXt9KTt2YXIgcj1mdW5jdGlvbigpe3ZhciB0PS0xO3JldHVybntwOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj10LGU9MDtlPG4ubGVuZ3RoOysrZSlyPUlbMjU1JnJebltlXV1ecj4+Pjg7dD1yfSxkOmZ1bmN0aW9uKCl7cmV0dXJufnR9fX0oKSxlPXQubGVuZ3RoO3IucCh0KTt2YXIgaSxzPUwodCxuLDEwKygoaT1uKS5maWxlbmFtZT9pLmZpbGVuYW1lLmxlbmd0aCsxOjApLDgpLGE9cy5sZW5ndGg7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIHI9bi5maWxlbmFtZTtpZih0WzBdPTMxLHRbMV09MTM5LHRbMl09OCx0WzhdPW4ubGV2ZWw8Mj80Ojk9PW4ubGV2ZWw/MjowLHRbOV09MywwIT1uLm10aW1lJiZPKHQsNCxNYXRoLmZsb29yKG5ldyBEYXRlKG4ubXRpbWV8fERhdGUubm93KCkpLzFlMykpLHIpe3RbM109ODtmb3IodmFyIGU9MDtlPD1yLmxlbmd0aDsrK2UpdFtlKzEwXT1yLmNoYXJDb2RlQXQoZSl9fShzLG4pLE8ocyxhLTgsci5kKCkpLE8ocyxhLTQsZSksc312YXIgQj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxuKXt0aGlzLmM9UygpLHRoaXMudj0xLGouY2FsbCh0aGlzLHQsbil9cmV0dXJuIHQucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCxuKXt0aGlzLmMucCh0KSxqLnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcyx0LG4pfSx0LnByb3RvdHlwZS5wPWZ1bmN0aW9uKHQsbil7dmFyIHI9TCh0LHRoaXMubyx0aGlzLnYmJih0aGlzLm8uZGljdGlvbmFyeT82OjIpLG4mJjQsdGhpcy5zKTt0aGlzLnYmJihmdW5jdGlvbih0LG4pe3ZhciByPW4ubGV2ZWwsZT0wPT1yPzA6cjw2PzE6OT09cj8zOjI7aWYodFswXT0xMjAsdFsxXT1lPDw2fChuLmRpY3Rpb25hcnkmJjMyKSx0WzFdfD0zMS0odFswXTw8OHx0WzFdKSUzMSxuLmRpY3Rpb25hcnkpe3ZhciBpPVMoKTtpLnAobi5kaWN0aW9uYXJ5KSxPKHQsMixpLmQoKSl9fShyLHRoaXMubyksdGhpcy52PTApLG4mJk8ocixyLmxlbmd0aC00LHRoaXMuYy5kKCkpLHRoaXMub25kYXRhKHIsbil9LHQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7ai5wcm90b3R5cGUuZmx1c2guY2FsbCh0aGlzKX0sdH0oKSxHPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBUZXh0RW5jb2RlciYmbmV3IFRleHRFbmNvZGVyLEg9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFRleHREZWNvZGVyJiZuZXcgVGV4dERlY29kZXI7dHJ5e0guZGVjb2RlKEYse3N0cmVhbTohMH0pfWNhdGNoKHQpe312YXIgSj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5vbmRhdGE9dH1yZXR1cm4gdC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0LG4pe3RoaXMub25kYXRhfHxFKDUpLHRoaXMuZCYmRSg0KSx0aGlzLm9uZGF0YShLKHQpLHRoaXMuZD1ufHwhMSl9LHR9KCk7ZnVuY3Rpb24gSyhuLHIpe2lmKEcpcmV0dXJuIEcuZW5jb2RlKG4pO2Zvcih2YXIgZT1uLmxlbmd0aCxpPW5ldyB0KG4ubGVuZ3RoKyhuLmxlbmd0aD4+MSkpLHM9MCxhPWZ1bmN0aW9uKHQpe2lbcysrXT10fSxvPTA7bzxlOysrbyl7aWYocys1PmkubGVuZ3RoKXt2YXIgaD1uZXcgdChzKzgrKGUtbzw8MSkpO2guc2V0KGkpLGk9aH12YXIgZj1uLmNoYXJDb2RlQXQobyk7ZjwxMjh8fHI/YShmKTpmPDIwNDg/KGEoMTkyfGY+PjYpLGEoMTI4fDYzJmYpKTpmPjU1Mjk1JiZmPDU3MzQ0PyhhKDI0MHwoZj02NTUzNisoMTA0NzU1MiZmKXwxMDIzJm4uY2hhckNvZGVBdCgrK28pKT4+MTgpLGEoMTI4fGY+PjEyJjYzKSxhKDEyOHxmPj42JjYzKSxhKDEyOHw2MyZmKSk6KGEoMjI0fGY+PjEyKSxhKDEyOHxmPj42JjYzKSxhKDEyOHw2MyZmKSl9cmV0dXJuIGIoaSwwLHMpfWNvbnN0IE49bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5faW5pdCgpfWNsZWFyKCl7dGhpcy5faW5pdCgpfWFkZEV2ZW50KHQpe2lmKCF0KXRocm93IG5ldyBFcnJvcihcIkFkZGluZyBpbnZhbGlkIGV2ZW50XCIpO2NvbnN0IG49dGhpcy5faGFzRXZlbnRzP1wiLFwiOlwiXCI7dGhpcy5zdHJlYW0ucHVzaChuK3QpLHRoaXMuX2hhc0V2ZW50cz0hMH1maW5pc2goKXt0aGlzLnN0cmVhbS5wdXNoKFwiXVwiLCEwKTtjb25zdCB0PWZ1bmN0aW9uKHQpe2xldCBuPTA7Zm9yKGNvbnN0IHIgb2YgdCluKz1yLmxlbmd0aDtjb25zdCByPW5ldyBVaW50OEFycmF5KG4pO2ZvcihsZXQgbj0wLGU9MCxpPXQubGVuZ3RoO248aTtuKyspe2NvbnN0IGk9dFtuXTtyLnNldChpLGUpLGUrPWkubGVuZ3RofXJldHVybiByfSh0aGlzLl9kZWZsYXRlZERhdGEpO3JldHVybiB0aGlzLl9pbml0KCksdH1faW5pdCgpe3RoaXMuX2hhc0V2ZW50cz0hMSx0aGlzLl9kZWZsYXRlZERhdGE9W10sdGhpcy5kZWZsYXRlPW5ldyBCLHRoaXMuZGVmbGF0ZS5vbmRhdGE9KHQsbik9Pnt0aGlzLl9kZWZsYXRlZERhdGEucHVzaCh0KX0sdGhpcy5zdHJlYW09bmV3IEooKHQsbik9Pnt0aGlzLmRlZmxhdGUucHVzaCh0LG4pfSksdGhpcy5zdHJlYW0ucHVzaChcIltcIil9fSxQPXtjbGVhcjooKT0+e04uY2xlYXIoKX0sYWRkRXZlbnQ6dD0+Ti5hZGRFdmVudCh0KSxmaW5pc2g6KCk9Pk4uZmluaXNoKCksY29tcHJlc3M6dD0+ZnVuY3Rpb24odCl7cmV0dXJuIHEoSyh0KSl9KHQpfTthZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGZ1bmN0aW9uKHQpe2NvbnN0IG49dC5kYXRhLm1ldGhvZCxyPXQuZGF0YS5pZCxlPXQuZGF0YS5hcmc7aWYobiBpbiBQJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBQW25dKXRyeXtjb25zdCB0PVBbbl0oZSk7cG9zdE1lc3NhZ2Uoe2lkOnIsbWV0aG9kOm4sc3VjY2VzczohMCxyZXNwb25zZTp0fSl9Y2F0Y2godCl7cG9zdE1lc3NhZ2Uoe2lkOnIsbWV0aG9kOm4sc3VjY2VzczohMSxyZXNwb25zZTp0Lm1lc3NhZ2V9KSxjb25zb2xlLmVycm9yKHQpfX0pLHBvc3RNZXNzYWdlKHtpZDp2b2lkIDAsbWV0aG9kOlwiaW5pdFwiLHN1Y2Nlc3M6ITAscmVzcG9uc2U6dm9pZCAwfSk7YDtcbmZ1bmN0aW9uIGUoKSB7XG4gIGNvbnN0IGUgPSBuZXcgQmxvYihbcl0pO1xuICByZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChlKTtcbn1cbmNvbnN0IENPTlNPTEVfTEVWRUxTID0gWydpbmZvJywgJ3dhcm4nLCAnZXJyb3InLCAnbG9nJ107XG5jb25zdCBQUkVGSVggPSAnW1JlcGxheV0gJztcbmZ1bmN0aW9uIF9hZGRCcmVhZGNydW1iKG1lc3NhZ2UsIGxldmVsID0gJ2luZm8nKSB7XG4gIGFkZEJyZWFkY3J1bWIoe1xuICAgIGNhdGVnb3J5OiAnY29uc29sZScsXG4gICAgZGF0YToge1xuICAgICAgbG9nZ2VyOiAncmVwbGF5J1xuICAgIH0sXG4gICAgbGV2ZWwsXG4gICAgbWVzc2FnZTogYCR7UFJFRklYfSR7bWVzc2FnZX1gXG4gIH0sIHtcbiAgICBsZXZlbFxuICB9KTtcbn1cbmZ1bmN0aW9uIG1ha2VSZXBsYXlMb2dnZXIoKSB7XG4gIGxldCBfY2FwdHVyZSA9IGZhbHNlO1xuICBsZXQgX3RyYWNlID0gZmFsc2U7XG4gIGNvbnN0IF9sb2dnZXIgPSB7XG4gICAgZXhjZXB0aW9uOiAoKSA9PiB1bmRlZmluZWQsXG4gICAgaW5mb1RpY2s6ICgpID0+IHVuZGVmaW5lZCxcbiAgICBzZXRDb25maWc6IG9wdHMgPT4ge1xuICAgICAgX2NhcHR1cmUgPSAhIW9wdHMuY2FwdHVyZUV4Y2VwdGlvbnM7XG4gICAgICBfdHJhY2UgPSAhIW9wdHMudHJhY2VJbnRlcm5hbHM7XG4gICAgfVxuICB9O1xuICBpZiAoREVCVUdfQlVJTEQpIHtcbiAgICBDT05TT0xFX0xFVkVMUy5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgX2xvZ2dlcltuYW1lXSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGxvZ2dlciQxW25hbWVdKFBSRUZJWCwgLi4uYXJncyk7XG4gICAgICAgIGlmIChfdHJhY2UpIHtcbiAgICAgICAgICBfYWRkQnJlYWRjcnVtYihhcmdzLmpvaW4oJycpLCBzZXZlcml0eUxldmVsRnJvbVN0cmluZyhuYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gICAgX2xvZ2dlci5leGNlcHRpb24gPSAoZXJyb3IsIC4uLm1lc3NhZ2UpID0+IHtcbiAgICAgIGlmIChtZXNzYWdlLmxlbmd0aCAmJiBfbG9nZ2VyLmVycm9yKSB7XG4gICAgICAgIF9sb2dnZXIuZXJyb3IoLi4ubWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBsb2dnZXIkMS5lcnJvcihQUkVGSVgsIGVycm9yKTtcbiAgICAgIGlmIChfY2FwdHVyZSkge1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKGVycm9yKTtcbiAgICAgIH0gZWxzZSBpZiAoX3RyYWNlKSB7XG4gICAgICAgIC8vIE5vIG5lZWQgZm9yIGEgYnJlYWRjcnVtYiBpZiBgX2NhcHR1cmVgIGlzIGVuYWJsZWQgc2luY2UgaXQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGNhcHR1cmVkIGFzIGFuIGV4Y2VwdGlvblxuICAgICAgICBfYWRkQnJlYWRjcnVtYihlcnJvciwgJ2Vycm9yJyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBfbG9nZ2VyLmluZm9UaWNrID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgIGxvZ2dlciQxLmluZm8oUFJFRklYLCAuLi5hcmdzKTtcbiAgICAgIGlmIChfdHJhY2UpIHtcbiAgICAgICAgLy8gV2FpdCBhIHRpY2sgaGVyZSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnMgZm9yIHNvbWUgaW5pdGlhbCBsb2dzXG4gICAgICAgIC8vIHdoaWNoIG1heSBiZSBhZGRlZCBiZWZvcmUgcmVwbGF5IGlzIGluaXRpYWxpemVkXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gX2FkZEJyZWFkY3J1bWIoYXJnc1swXSksIDApO1xuICAgICAgfVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgQ09OU09MRV9MRVZFTFMuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgIF9sb2dnZXJbbmFtZV0gPSAoKSA9PiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIF9sb2dnZXI7XG59XG5jb25zdCBsb2dnZXIgPSBtYWtlUmVwbGF5TG9nZ2VyKCk7XG5cbi8qKiBUaGlzIGVycm9yIGluZGljYXRlcyB0aGF0IHRoZSBldmVudCBidWZmZXIgc2l6ZSBleGNlZWRlZCB0aGUgbGltaXQuLiAqL1xuY2xhc3MgRXZlbnRCdWZmZXJTaXplRXhjZWVkZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoYEV2ZW50IGJ1ZmZlciBleGNlZWRlZCBtYXhpbXVtIHNpemUgb2YgJHtSRVBMQVlfTUFYX0VWRU5UX0JVRkZFUl9TSVpFfS5gKTtcbiAgfVxufVxuXG4vKipcbiAqIEEgYmFzaWMgZXZlbnQgYnVmZmVyIHRoYXQgZG9lcyBub3QgZG8gYW55IGNvbXByZXNzaW9uLlxuICogVXNlZCBhcyBmYWxsYmFjayBpZiB0aGUgY29tcHJlc3Npb24gd29ya2VyIGNhbm5vdCBiZSBsb2FkZWQgb3IgaXMgZGlzYWJsZWQuXG4gKi9cbmNsYXNzIEV2ZW50QnVmZmVyQXJyYXkge1xuICAvKiogQWxsIHRoZSBldmVudHMgdGhhdCBhcmUgYnVmZmVyZWQgdG8gYmUgc2VudC4gKi9cblxuICAvKiogQGluaGVyaXRkb2MgKi9cblxuICAvKiogQGluaGVyaXRkb2MgKi9cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmV2ZW50cyA9IFtdO1xuICAgIHRoaXMuX3RvdGFsU2l6ZSA9IDA7XG4gICAgdGhpcy5oYXNDaGVja291dCA9IGZhbHNlO1xuICAgIHRoaXMud2FpdEZvckNoZWNrb3V0ID0gZmFsc2U7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IGhhc0V2ZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHMubGVuZ3RoID4gMDtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gJ3N5bmMnO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5ldmVudHMgPSBbXTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBhc3luYyBhZGRFdmVudChldmVudCkge1xuICAgIGNvbnN0IGV2ZW50U2l6ZSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50KS5sZW5ndGg7XG4gICAgdGhpcy5fdG90YWxTaXplICs9IGV2ZW50U2l6ZTtcbiAgICBpZiAodGhpcy5fdG90YWxTaXplID4gUkVQTEFZX01BWF9FVkVOVF9CVUZGRVJfU0laRSkge1xuICAgICAgdGhyb3cgbmV3IEV2ZW50QnVmZmVyU2l6ZUV4Y2VlZGVkRXJyb3IoKTtcbiAgICB9XG4gICAgdGhpcy5ldmVudHMucHVzaChldmVudCk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZmluaXNoKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIC8vIE1ha2UgYSBjb3B5IG9mIHRoZSBldmVudHMgYXJyYXkgcmVmZXJlbmNlIGFuZCBpbW1lZGlhdGVseSBjbGVhciB0aGVcbiAgICAgIC8vIGV2ZW50cyBtZW1iZXIgc28gdGhhdCB3ZSBkbyBub3QgbG9zZSBuZXcgZXZlbnRzIHdoaWxlIHVwbG9hZGluZ1xuICAgICAgLy8gYXR0YWNobWVudC5cbiAgICAgIGNvbnN0IGV2ZW50c1JldCA9IHRoaXMuZXZlbnRzO1xuICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgcmVzb2x2ZShKU09OLnN0cmluZ2lmeShldmVudHNSZXQpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmV2ZW50cyA9IFtdO1xuICAgIHRoaXMuX3RvdGFsU2l6ZSA9IDA7XG4gICAgdGhpcy5oYXNDaGVja291dCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGdldEVhcmxpZXN0VGltZXN0YW1wKCkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMuZXZlbnRzLm1hcChldmVudCA9PiBldmVudC50aW1lc3RhbXApLnNvcnQoKVswXTtcbiAgICBpZiAoIXRpbWVzdGFtcCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aW1lc3RhbXBUb01zKHRpbWVzdGFtcCk7XG4gIH1cbn1cblxuLyoqXG4gKiBFdmVudCBidWZmZXIgdGhhdCB1c2VzIGEgd2ViIHdvcmtlciB0byBjb21wcmVzcyBldmVudHMuXG4gKiBFeHBvcnRlZCBvbmx5IGZvciB0ZXN0aW5nLlxuICovXG5jbGFzcyBXb3JrZXJIYW5kbGVyIHtcbiAgY29uc3RydWN0b3Iod29ya2VyKSB7XG4gICAgdGhpcy5fd29ya2VyID0gd29ya2VyO1xuICAgIHRoaXMuX2lkID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgdGhlIHdvcmtlciBpcyByZWFkeSAob3Igbm90KS5cbiAgICogVGhpcyB3aWxsIGVpdGhlciByZXNvbHZlIHdoZW4gdGhlIHdvcmtlciBpcyByZWFkeSwgb3IgcmVqZWN0IGlmIGFuIGVycm9yIG9jY3VycmVkLlxuICAgKi9cbiAgZW5zdXJlUmVhZHkoKSB7XG4gICAgLy8gRW5zdXJlIHdlIG9ubHkgY2hlY2sgb25jZVxuICAgIGlmICh0aGlzLl9lbnN1cmVSZWFkeVByb21pc2UpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbnN1cmVSZWFkeVByb21pc2U7XG4gICAgfVxuICAgIHRoaXMuX2Vuc3VyZVJlYWR5UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3dvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKHtcbiAgICAgICAgZGF0YVxuICAgICAgfSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIG9uY2U6IHRydWVcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IgPT4ge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSwge1xuICAgICAgICBvbmNlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZW5zdXJlUmVhZHlQcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgdGhlIHdvcmtlci5cbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm8oJ0Rlc3Ryb3lpbmcgY29tcHJlc3Npb24gd29ya2VyJyk7XG4gICAgdGhpcy5fd29ya2VyLnRlcm1pbmF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBvc3QgbWVzc2FnZSB0byB3b3JrZXIgYW5kIHdhaXQgZm9yIHJlc3BvbnNlIGJlZm9yZSByZXNvbHZpbmcgcHJvbWlzZS5cbiAgICovXG4gIHBvc3RNZXNzYWdlKG1ldGhvZCwgYXJnKSB7XG4gICAgY29uc3QgaWQgPSB0aGlzLl9nZXRBbmRJbmNyZW1lbnRJZCgpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBsaXN0ZW5lciA9ICh7XG4gICAgICAgIGRhdGFcbiAgICAgIH0pID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBkYXRhO1xuICAgICAgICBpZiAocmVzcG9uc2UubWV0aG9kICE9PSBtZXRob2QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGVyZSBjYW4gYmUgbXVsdGlwbGUgbGlzdGVuZXJzIGZvciBhIHNpbmdsZSBtZXRob2QsIHRoZSBpZCBlbnN1cmVzXG4gICAgICAgIC8vIHRoYXQgdGhlIHJlc3BvbnNlIG1hdGNoZXMgdGhlIGNhbGxlci5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmlkICE9PSBpZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHdlJ2xsIGFsd2F5cyB3YW50IHRvIHJlbW92ZSBsaXN0ZW5lciByZWdhcmRsZXNzIG9mIHJlc3VsdCBzdGF0dXNcbiAgICAgICAgdGhpcy5fd29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lcik7XG4gICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgIC8vIFRPRE86IERvIHNvbWUgZXJyb3IgaGFuZGxpbmcsIG5vdCBzdXJlIHdoYXRcbiAgICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGNvbXByZXNzaW9uIHdvcmtlcjogJywgcmVzcG9uc2UucmVzcG9uc2UpO1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0Vycm9yIGluIGNvbXByZXNzaW9uIHdvcmtlcicpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5yZXNwb25zZSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBOb3RlOiB3ZSBjYW4ndCB1c2UgYG9uY2VgIG9wdGlvbiBiZWNhdXNlIGl0J3MgcG9zc2libGUgaXQgbmVlZHMgdG9cbiAgICAgIC8vIGxpc3RlbiB0byBtdWx0aXBsZSBtZXNzYWdlc1xuICAgICAgdGhpcy5fd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lcik7XG4gICAgICB0aGlzLl93b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICBpZCxcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBhcmdcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEdldCB0aGUgY3VycmVudCBJRCBhbmQgaW5jcmVtZW50IGl0IGZvciB0aGUgbmV4dCBjYWxsLiAqL1xuICBfZ2V0QW5kSW5jcmVtZW50SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkKys7XG4gIH1cbn1cblxuLyoqXG4gKiBFdmVudCBidWZmZXIgdGhhdCB1c2VzIGEgd2ViIHdvcmtlciB0byBjb21wcmVzcyBldmVudHMuXG4gKiBFeHBvcnRlZCBvbmx5IGZvciB0ZXN0aW5nLlxuICovXG5jbGFzcyBFdmVudEJ1ZmZlckNvbXByZXNzaW9uV29ya2VyIHtcbiAgLyoqIEBpbmhlcml0ZG9jICovXG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG5cbiAgY29uc3RydWN0b3Iod29ya2VyKSB7XG4gICAgdGhpcy5fd29ya2VyID0gbmV3IFdvcmtlckhhbmRsZXIod29ya2VyKTtcbiAgICB0aGlzLl9lYXJsaWVzdFRpbWVzdGFtcCA9IG51bGw7XG4gICAgdGhpcy5fdG90YWxTaXplID0gMDtcbiAgICB0aGlzLmhhc0NoZWNrb3V0ID0gZmFsc2U7XG4gICAgdGhpcy53YWl0Rm9yQ2hlY2tvdXQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXQgaGFzRXZlbnRzKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2VhcmxpZXN0VGltZXN0YW1wO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiAnd29ya2VyJztcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgdGhlIHdvcmtlciBpcyByZWFkeSAob3Igbm90KS5cbiAgICogVGhpcyB3aWxsIGVpdGhlciByZXNvbHZlIHdoZW4gdGhlIHdvcmtlciBpcyByZWFkeSwgb3IgcmVqZWN0IGlmIGFuIGVycm9yIG9jY3VycmVkLlxuICAgKi9cbiAgZW5zdXJlUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmtlci5lbnN1cmVSZWFkeSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgdGhlIGV2ZW50IGJ1ZmZlci5cbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fd29ya2VyLmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgdG8gdGhlIGV2ZW50IGJ1ZmZlci5cbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIGV2ZW50IHdhcyBzdWNjZXNzZnVsbHkgcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZCBieSB3b3JrZXIuXG4gICAqL1xuICBhZGRFdmVudChldmVudCkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRpbWVzdGFtcFRvTXMoZXZlbnQudGltZXN0YW1wKTtcbiAgICBpZiAoIXRoaXMuX2VhcmxpZXN0VGltZXN0YW1wIHx8IHRpbWVzdGFtcCA8IHRoaXMuX2VhcmxpZXN0VGltZXN0YW1wKSB7XG4gICAgICB0aGlzLl9lYXJsaWVzdFRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50KTtcbiAgICB0aGlzLl90b3RhbFNpemUgKz0gZGF0YS5sZW5ndGg7XG4gICAgaWYgKHRoaXMuX3RvdGFsU2l6ZSA+IFJFUExBWV9NQVhfRVZFTlRfQlVGRkVSX1NJWkUpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXZlbnRCdWZmZXJTaXplRXhjZWVkZWRFcnJvcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NlbmRFdmVudFRvV29ya2VyKGRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmlzaCB0aGUgZXZlbnQgYnVmZmVyIGFuZCByZXR1cm4gdGhlIGNvbXByZXNzZWQgZGF0YS5cbiAgICovXG4gIGZpbmlzaCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmluaXNoUmVxdWVzdCgpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuX2VhcmxpZXN0VGltZXN0YW1wID0gbnVsbDtcbiAgICB0aGlzLl90b3RhbFNpemUgPSAwO1xuICAgIHRoaXMuaGFzQ2hlY2tvdXQgPSBmYWxzZTtcblxuICAgIC8vIFdlIGRvIG5vdCB3YWl0IG9uIHRoaXMsIGFzIHdlIGFzc3VtZSB0aGUgb3JkZXIgb2YgbWVzc2FnZXMgaXMgY29uc2lzdGVudCBmb3IgdGhlIHdvcmtlclxuICAgIHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSgnY2xlYXInKS50aGVuKG51bGwsIGUgPT4ge1xuICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlLCAnU2VuZGluZyBcImNsZWFyXCIgbWVzc2FnZSB0byB3b3JrZXIgZmFpbGVkJywgZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0RWFybGllc3RUaW1lc3RhbXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VhcmxpZXN0VGltZXN0YW1wO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgdGhlIGV2ZW50IHRvIHRoZSB3b3JrZXIuXG4gICAqL1xuICBfc2VuZEV2ZW50VG9Xb3JrZXIoZGF0YSkge1xuICAgIHJldHVybiB0aGlzLl93b3JrZXIucG9zdE1lc3NhZ2UoJ2FkZEV2ZW50JywgZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogRmluaXNoIHRoZSByZXF1ZXN0IGFuZCByZXR1cm4gdGhlIGNvbXByZXNzZWQgZGF0YSBmcm9tIHRoZSB3b3JrZXIuXG4gICAqL1xuICBhc3luYyBfZmluaXNoUmVxdWVzdCgpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSgnZmluaXNoJyk7XG4gICAgdGhpcy5fZWFybGllc3RUaW1lc3RhbXAgPSBudWxsO1xuICAgIHRoaXMuX3RvdGFsU2l6ZSA9IDA7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBwcm94eSB3aWxsIHRyeSB0byB1c2UgdGhlIGNvbXByZXNzaW9uIHdvcmtlciwgYW5kIGZhbGwgYmFjayB0byB1c2UgdGhlIHNpbXBsZSBidWZmZXIgaWYgYW4gZXJyb3Igb2NjdXJzIHRoZXJlLlxuICogVGhpcyBjYW4gaGFwcGVuIGUuZy4gaWYgdGhlIHdvcmtlciBjYW5ub3QgYmUgbG9hZGVkLlxuICogRXhwb3J0ZWQgb25seSBmb3IgdGVzdGluZy5cbiAqL1xuY2xhc3MgRXZlbnRCdWZmZXJQcm94eSB7XG4gIGNvbnN0cnVjdG9yKHdvcmtlcikge1xuICAgIHRoaXMuX2ZhbGxiYWNrID0gbmV3IEV2ZW50QnVmZmVyQXJyYXkoKTtcbiAgICB0aGlzLl9jb21wcmVzc2lvbiA9IG5ldyBFdmVudEJ1ZmZlckNvbXByZXNzaW9uV29ya2VyKHdvcmtlcik7XG4gICAgdGhpcy5fdXNlZCA9IHRoaXMuX2ZhbGxiYWNrO1xuICAgIHRoaXMuX2Vuc3VyZVdvcmtlcklzTG9hZGVkUHJvbWlzZSA9IHRoaXMuX2Vuc3VyZVdvcmtlcklzTG9hZGVkKCk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IHdhaXRGb3JDaGVja291dCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlZC53YWl0Rm9yQ2hlY2tvdXQ7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZWQudHlwZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBnZXQgaGFzRXZlbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl91c2VkLmhhc0V2ZW50cztcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBnZXQgaGFzQ2hlY2tvdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZWQuaGFzQ2hlY2tvdXQ7XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHNldCBoYXNDaGVja291dCh2YWx1ZSkge1xuICAgIHRoaXMuX3VzZWQuaGFzQ2hlY2tvdXQgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2FkamFjZW50LW92ZXJsb2FkLXNpZ25hdHVyZXNcbiAgc2V0IHdhaXRGb3JDaGVja291dCh2YWx1ZSkge1xuICAgIHRoaXMuX3VzZWQud2FpdEZvckNoZWNrb3V0ID0gdmFsdWU7XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLl9mYWxsYmFjay5kZXN0cm95KCk7XG4gICAgdGhpcy5fY29tcHJlc3Npb24uZGVzdHJveSgpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGNsZWFyKCkge1xuICAgIHJldHVybiB0aGlzLl91c2VkLmNsZWFyKCk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0RWFybGllc3RUaW1lc3RhbXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZWQuZ2V0RWFybGllc3RUaW1lc3RhbXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgdG8gdGhlIGV2ZW50IGJ1ZmZlci5cbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIGV2ZW50IHdhcyBzdWNjZXNzZnVsbHkgYWRkZWQuXG4gICAqL1xuICBhZGRFdmVudChldmVudCkge1xuICAgIHJldHVybiB0aGlzLl91c2VkLmFkZEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBhc3luYyBmaW5pc2goKSB7XG4gICAgLy8gRW5zdXJlIHRoZSB3b3JrZXIgaXMgbG9hZGVkLCBzbyB0aGUgc2VudCBldmVudCBpcyBjb21wcmVzc2VkXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVXb3JrZXJJc0xvYWRlZCgpO1xuICAgIHJldHVybiB0aGlzLl91c2VkLmZpbmlzaCgpO1xuICB9XG5cbiAgLyoqIEVuc3VyZSB0aGUgd29ya2VyIGhhcyBsb2FkZWQuICovXG4gIGVuc3VyZVdvcmtlcklzTG9hZGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9lbnN1cmVXb3JrZXJJc0xvYWRlZFByb21pc2U7XG4gIH1cblxuICAvKiogQWN0dWFsbHkgY2hlY2sgaWYgdGhlIHdvcmtlciBoYXMgYmVlbiBsb2FkZWQuICovXG4gIGFzeW5jIF9lbnN1cmVXb3JrZXJJc0xvYWRlZCgpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5fY29tcHJlc3Npb24uZW5zdXJlUmVhZHkoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gSWYgdGhlIHdvcmtlciBmYWlscyB0byBsb2FkLCB3ZSBmYWxsIGJhY2sgdG8gdGhlIHNpbXBsZSBidWZmZXIuXG4gICAgICAvLyBOb3RoaW5nIG1vcmUgdG8gZG8gZnJvbSBvdXIgc2lkZSBoZXJlXG4gICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuZXhjZXB0aW9uKGVycm9yLCAnRmFpbGVkIHRvIGxvYWQgdGhlIGNvbXByZXNzaW9uIHdvcmtlciwgZmFsbGluZyBiYWNrIHRvIHNpbXBsZSBidWZmZXInKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBOb3cgd2UgbmVlZCB0byBzd2l0Y2ggb3ZlciB0aGUgYXJyYXkgYnVmZmVyIHRvIHRoZSBjb21wcmVzc2lvbiB3b3JrZXJcbiAgICBhd2FpdCB0aGlzLl9zd2l0Y2hUb0NvbXByZXNzaW9uV29ya2VyKCk7XG4gIH1cblxuICAvKiogU3dpdGNoIHRoZSB1c2VkIGJ1ZmZlciB0byB0aGUgY29tcHJlc3Npb24gd29ya2VyLiAqL1xuICBhc3luYyBfc3dpdGNoVG9Db21wcmVzc2lvbldvcmtlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBldmVudHMsXG4gICAgICBoYXNDaGVja291dCxcbiAgICAgIHdhaXRGb3JDaGVja291dFxuICAgIH0gPSB0aGlzLl9mYWxsYmFjaztcbiAgICBjb25zdCBhZGRFdmVudFByb21pc2VzID0gW107XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBldmVudHMpIHtcbiAgICAgIGFkZEV2ZW50UHJvbWlzZXMucHVzaCh0aGlzLl9jb21wcmVzc2lvbi5hZGRFdmVudChldmVudCkpO1xuICAgIH1cbiAgICB0aGlzLl9jb21wcmVzc2lvbi5oYXNDaGVja291dCA9IGhhc0NoZWNrb3V0O1xuICAgIHRoaXMuX2NvbXByZXNzaW9uLndhaXRGb3JDaGVja291dCA9IHdhaXRGb3JDaGVja291dDtcblxuICAgIC8vIFdlIHN3aXRjaCBvdmVyIHRvIHRoZSBuZXcgYnVmZmVyIGltbWVkaWF0ZWx5IC0gYW55IGZ1cnRoZXIgZXZlbnRzIHdpbGwgYmUgYWRkZWRcbiAgICAvLyBhZnRlciB0aGUgcHJldmlvdXNseSBidWZmZXJlZCBvbmVzXG4gICAgdGhpcy5fdXNlZCA9IHRoaXMuX2NvbXByZXNzaW9uO1xuXG4gICAgLy8gV2FpdCBmb3Igb3JpZ2luYWwgZXZlbnRzIHRvIGJlIHJlLWFkZGVkIGJlZm9yZSByZXNvbHZpbmdcbiAgICB0cnkge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYWRkRXZlbnRQcm9taXNlcyk7XG5cbiAgICAgIC8vIENhbiBub3cgY2xlYXIgZmFsbGJhY2sgYnVmZmVyIGFzIGl0J3Mgbm8gbG9uZ2VyIG5lY2Vzc2FyeVxuICAgICAgdGhpcy5fZmFsbGJhY2suY2xlYXIoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlcnJvciwgJ0ZhaWxlZCB0byBhZGQgZXZlbnRzIHdoZW4gc3dpdGNoaW5nIGJ1ZmZlcnMuJyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGV2ZW50IGJ1ZmZlciBmb3IgcmVwbGF5cy5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRXZlbnRCdWZmZXIoe1xuICB1c2VDb21wcmVzc2lvbixcbiAgd29ya2VyVXJsOiBjdXN0b21Xb3JrZXJVcmxcbn0pIHtcbiAgaWYgKHVzZUNvbXByZXNzaW9uICYmXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgd2luZG93Lldvcmtlcikge1xuICAgIGNvbnN0IHdvcmtlciA9IF9sb2FkV29ya2VyKGN1c3RvbVdvcmtlclVybCk7XG4gICAgaWYgKHdvcmtlcikge1xuICAgICAgcmV0dXJuIHdvcmtlcjtcbiAgICB9XG4gIH1cbiAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm8oJ1VzaW5nIHNpbXBsZSBidWZmZXInKTtcbiAgcmV0dXJuIG5ldyBFdmVudEJ1ZmZlckFycmF5KCk7XG59XG5mdW5jdGlvbiBfbG9hZFdvcmtlcihjdXN0b21Xb3JrZXJVcmwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB3b3JrZXJVcmwgPSBjdXN0b21Xb3JrZXJVcmwgfHwgX2dldFdvcmtlclVybCgpO1xuICAgIGlmICghd29ya2VyVXJsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5pbmZvKGBVc2luZyBjb21wcmVzc2lvbiB3b3JrZXIke2N1c3RvbVdvcmtlclVybCA/IGAgZnJvbSAke2N1c3RvbVdvcmtlclVybH1gIDogJyd9YCk7XG4gICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcih3b3JrZXJVcmwpO1xuICAgIHJldHVybiBuZXcgRXZlbnRCdWZmZXJQcm94eSh3b3JrZXIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5leGNlcHRpb24oZXJyb3IsICdGYWlsZWQgdG8gY3JlYXRlIGNvbXByZXNzaW9uIHdvcmtlcicpO1xuICAgIC8vIEZhbGwgYmFjayB0byB1c2Ugc2ltcGxlIGV2ZW50IGJ1ZmZlciBhcnJheVxuICB9XG59XG5mdW5jdGlvbiBfZ2V0V29ya2VyVXJsKCkge1xuICBpZiAodHlwZW9mIF9fU0VOVFJZX0VYQ0xVREVfUkVQTEFZX1dPUktFUl9fID09PSAndW5kZWZpbmVkJyB8fCAhX19TRU5UUllfRVhDTFVERV9SRVBMQVlfV09SS0VSX18pIHtcbiAgICByZXR1cm4gZSgpO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqIElmIHNlc3Npb25TdG9yYWdlIGlzIGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIGhhc1Nlc3Npb25TdG9yYWdlKCkge1xuICB0cnkge1xuICAgIC8vIFRoaXMgY2FuIHRocm93LCBlLmcuIHdoZW4gYmVpbmcgYWNjZXNzZWQgaW4gYSBzYW5kYm94ZWQgaWZyYW1lXG4gICAgcmV0dXJuICdzZXNzaW9uU3RvcmFnZScgaW4gV0lORE9XICYmICEhV0lORE9XLnNlc3Npb25TdG9yYWdlO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBzZXNzaW9uIGZyb20gU2Vzc2lvbiBTdG9yYWdlIGFuZCB1bnNldHMgc2Vzc2lvbiBpbiByZXBsYXkgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gY2xlYXJTZXNzaW9uKHJlcGxheSkge1xuICBkZWxldGVTZXNzaW9uKCk7XG4gIHJlcGxheS5zZXNzaW9uID0gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIERlbGV0ZXMgYSBzZXNzaW9uIGZyb20gc3RvcmFnZVxuICovXG5mdW5jdGlvbiBkZWxldGVTZXNzaW9uKCkge1xuICBpZiAoIWhhc1Nlc3Npb25TdG9yYWdlKCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBXSU5ET1cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShSRVBMQVlfU0VTU0lPTl9LRVkpO1xuICB9IGNhdGNoIHtcbiAgICAvLyBJZ25vcmUgcG90ZW50aWFsIFNlY3VyaXR5RXJyb3IgZXhjZXB0aW9uc1xuICB9XG59XG5cbi8qKlxuICogR2l2ZW4gYSBzYW1wbGUgcmF0ZSwgcmV0dXJucyB0cnVlIGlmIHJlcGxheSBzaG91bGQgYmUgc2FtcGxlZC5cbiAqXG4gKiAxLjAgPSAxMDAlIHNhbXBsaW5nXG4gKiAwLjAgPSAwJSBzYW1wbGluZ1xuICovXG5mdW5jdGlvbiBpc1NhbXBsZWQoc2FtcGxlUmF0ZSkge1xuICBpZiAoc2FtcGxlUmF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gTWF0aC5yYW5kb20oKSByZXR1cm5zIGEgbnVtYmVyIGluIHJhbmdlIG9mIDAgdG8gMSAoaW5jbHVzaXZlIG9mIDAsIGJ1dCBub3QgMSlcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkgPCBzYW1wbGVSYXRlO1xufVxuXG4vKipcbiAqIFNhdmUgYSBzZXNzaW9uIHRvIHNlc3Npb24gc3RvcmFnZS5cbiAqL1xuZnVuY3Rpb24gc2F2ZVNlc3Npb24oc2Vzc2lvbikge1xuICBpZiAoIWhhc1Nlc3Npb25TdG9yYWdlKCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBXSU5ET1cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShSRVBMQVlfU0VTU0lPTl9LRVksIEpTT04uc3RyaW5naWZ5KHNlc3Npb24pKTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gSWdub3JlIHBvdGVudGlhbCBTZWN1cml0eUVycm9yIGV4Y2VwdGlvbnNcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIHNlc3Npb24gd2l0aCBkZWZhdWx0cyAmIGFwcGxpZWQgc2FtcGxpbmcuXG4gKi9cbmZ1bmN0aW9uIG1ha2VTZXNzaW9uKHNlc3Npb24pIHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgaWQgPSBzZXNzaW9uLmlkIHx8IHV1aWQ0KCk7XG4gIC8vIE5vdGUgdGhhdCB0aGlzIG1lYW5zIHdlIGNhbm5vdCBzZXQgYSBzdGFydGVkL2xhc3RBY3Rpdml0eSBvZiBgMGAsIGJ1dCB0aGlzIHNob3VsZCBub3QgYmUgcmVsZXZhbnQgb3V0c2lkZSBvZiB0ZXN0cy5cbiAgY29uc3Qgc3RhcnRlZCA9IHNlc3Npb24uc3RhcnRlZCB8fCBub3c7XG4gIGNvbnN0IGxhc3RBY3Rpdml0eSA9IHNlc3Npb24ubGFzdEFjdGl2aXR5IHx8IG5vdztcbiAgY29uc3Qgc2VnbWVudElkID0gc2Vzc2lvbi5zZWdtZW50SWQgfHwgMDtcbiAgY29uc3Qgc2FtcGxlZCA9IHNlc3Npb24uc2FtcGxlZDtcbiAgY29uc3QgcHJldmlvdXNTZXNzaW9uSWQgPSBzZXNzaW9uLnByZXZpb3VzU2Vzc2lvbklkO1xuICByZXR1cm4ge1xuICAgIGlkLFxuICAgIHN0YXJ0ZWQsXG4gICAgbGFzdEFjdGl2aXR5LFxuICAgIHNlZ21lbnRJZCxcbiAgICBzYW1wbGVkLFxuICAgIHByZXZpb3VzU2Vzc2lvbklkXG4gIH07XG59XG5cbi8qKlxuICogR2V0IHRoZSBzYW1wbGVkIHN0YXR1cyBmb3IgYSBzZXNzaW9uIGJhc2VkIG9uIHNhbXBsZSByYXRlcyAmIGN1cnJlbnQgc2FtcGxlZCBzdGF0dXMuXG4gKi9cbmZ1bmN0aW9uIGdldFNlc3Npb25TYW1wbGVUeXBlKHNlc3Npb25TYW1wbGVSYXRlLCBhbGxvd0J1ZmZlcmluZykge1xuICByZXR1cm4gaXNTYW1wbGVkKHNlc3Npb25TYW1wbGVSYXRlKSA/ICdzZXNzaW9uJyA6IGFsbG93QnVmZmVyaW5nID8gJ2J1ZmZlcicgOiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc2Vzc2lvbiwgd2hpY2ggaW4gaXRzIGN1cnJlbnQgaW1wbGVtZW50YXRpb24gaXMgYSBTZW50cnkgZXZlbnRcbiAqIHRoYXQgYWxsIHJlcGxheXMgd2lsbCBiZSBzYXZlZCB0byBhcyBhdHRhY2htZW50cy4gQ3VycmVudGx5LCB3ZSBvbmx5IGV4cGVjdFxuICogb25lIG9mIHRoZXNlIFNlbnRyeSBldmVudHMgcGVyIFwicmVwbGF5IHNlc3Npb25cIi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbih7XG4gIHNlc3Npb25TYW1wbGVSYXRlLFxuICBhbGxvd0J1ZmZlcmluZyxcbiAgc3RpY2t5U2Vzc2lvbiA9IGZhbHNlXG59LCB7XG4gIHByZXZpb3VzU2Vzc2lvbklkXG59ID0ge30pIHtcbiAgY29uc3Qgc2FtcGxlZCA9IGdldFNlc3Npb25TYW1wbGVUeXBlKHNlc3Npb25TYW1wbGVSYXRlLCBhbGxvd0J1ZmZlcmluZyk7XG4gIGNvbnN0IHNlc3Npb24gPSBtYWtlU2Vzc2lvbih7XG4gICAgc2FtcGxlZCxcbiAgICBwcmV2aW91c1Nlc3Npb25JZFxuICB9KTtcbiAgaWYgKHN0aWNreVNlc3Npb24pIHtcbiAgICBzYXZlU2Vzc2lvbihzZXNzaW9uKTtcbiAgfVxuICByZXR1cm4gc2Vzc2lvbjtcbn1cblxuLyoqXG4gKiBGZXRjaGVzIGEgc2Vzc2lvbiBmcm9tIHN0b3JhZ2VcbiAqL1xuZnVuY3Rpb24gZmV0Y2hTZXNzaW9uKCkge1xuICBpZiAoIWhhc1Nlc3Npb25TdG9yYWdlKCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB0cnkge1xuICAgIC8vIFRoaXMgY2FuIHRocm93IGlmIGNvb2tpZXMgYXJlIGRpc2FibGVkXG4gICAgY29uc3Qgc2Vzc2lvblN0cmluZ0Zyb21TdG9yYWdlID0gV0lORE9XLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUkVQTEFZX1NFU1NJT05fS0VZKTtcbiAgICBpZiAoIXNlc3Npb25TdHJpbmdGcm9tU3RvcmFnZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHNlc3Npb25PYmogPSBKU09OLnBhcnNlKHNlc3Npb25TdHJpbmdGcm9tU3RvcmFnZSk7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm9UaWNrKCdMb2FkaW5nIGV4aXN0aW5nIHNlc3Npb24nKTtcbiAgICByZXR1cm4gbWFrZVNlc3Npb24oc2Vzc2lvbk9iaik7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gaW5pdGlhbCB0aW1lc3RhbXAgYW5kIGFuIGV4cGlyeSBkdXJhdGlvbiwgY2hlY2tzIHRvIHNlZSBpZiBjdXJyZW50XG4gKiB0aW1lIHNob3VsZCBiZSBjb25zaWRlcmVkIGFzIGV4cGlyZWQuXG4gKi9cbmZ1bmN0aW9uIGlzRXhwaXJlZChpbml0aWFsVGltZSwgZXhwaXJ5LCB0YXJnZXRUaW1lID0gK25ldyBEYXRlKCkpIHtcbiAgLy8gQWx3YXlzIGV4cGlyZWQgaWYgPCAwXG4gIGlmIChpbml0aWFsVGltZSA9PT0gbnVsbCB8fCBleHBpcnkgPT09IHVuZGVmaW5lZCB8fCBleHBpcnkgPCAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBOZXZlciBleHBpcmVzIGlmID09IDBcbiAgaWYgKGV4cGlyeSA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gaW5pdGlhbFRpbWUgKyBleHBpcnkgPD0gdGFyZ2V0VGltZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgdG8gc2VlIGlmIHNlc3Npb24gaXMgZXhwaXJlZFxuICovXG5mdW5jdGlvbiBpc1Nlc3Npb25FeHBpcmVkKHNlc3Npb24sIHtcbiAgbWF4UmVwbGF5RHVyYXRpb24sXG4gIHNlc3Npb25JZGxlRXhwaXJlLFxuICB0YXJnZXRUaW1lID0gRGF0ZS5ub3coKVxufSkge1xuICByZXR1cm4gKFxuICAgIC8vIEZpcnN0LCBjaGVjayB0aGF0IG1heGltdW0gc2Vzc2lvbiBsZW5ndGggaGFzIG5vdCBiZWVuIGV4Y2VlZGVkXG4gICAgaXNFeHBpcmVkKHNlc3Npb24uc3RhcnRlZCwgbWF4UmVwbGF5RHVyYXRpb24sIHRhcmdldFRpbWUpIHx8XG4gICAgLy8gY2hlY2sgdGhhdCB0aGUgaWRsZSB0aW1lb3V0IGhhcyBub3QgYmVlbiBleGNlZWRlZCAoaS5lLiB1c2VyIGhhc1xuICAgIC8vIHBlcmZvcm1lZCBhbiBhY3Rpb24gd2l0aGluIHRoZSBsYXN0IGBzZXNzaW9uSWRsZUV4cGlyZWAgbXMpXG4gICAgaXNFeHBpcmVkKHNlc3Npb24ubGFzdEFjdGl2aXR5LCBzZXNzaW9uSWRsZUV4cGlyZSwgdGFyZ2V0VGltZSlcbiAgKTtcbn1cblxuLyoqIElmIHRoZSBzZXNzaW9uIHNob3VsZCBiZSByZWZyZXNoZWQgb3Igbm90LiAqL1xuZnVuY3Rpb24gc2hvdWxkUmVmcmVzaFNlc3Npb24oc2Vzc2lvbiwge1xuICBzZXNzaW9uSWRsZUV4cGlyZSxcbiAgbWF4UmVwbGF5RHVyYXRpb25cbn0pIHtcbiAgLy8gSWYgbm90IGV4cGlyZWQsIGFsbCBnb29kLCBqdXN0IGtlZXAgdGhlIHNlc3Npb25cbiAgaWYgKCFpc1Nlc3Npb25FeHBpcmVkKHNlc3Npb24sIHtcbiAgICBzZXNzaW9uSWRsZUV4cGlyZSxcbiAgICBtYXhSZXBsYXlEdXJhdGlvblxuICB9KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIElmIHdlIGFyZSBidWZmZXJpbmcgJiBoYXZlbid0IGV2ZXIgZmx1c2hlZCB5ZXQsIGFsd2F5cyBjb250aW51ZVxuICBpZiAoc2Vzc2lvbi5zYW1wbGVkID09PSAnYnVmZmVyJyAmJiBzZXNzaW9uLnNlZ21lbnRJZCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBHZXQgb3IgY3JlYXRlIGEgc2Vzc2lvbiwgd2hlbiBpbml0aWFsaXppbmcgdGhlIHJlcGxheS5cbiAqIFJldHVybnMgYSBzZXNzaW9uIHRoYXQgbWF5IGJlIHVuc2FtcGxlZC5cbiAqL1xuZnVuY3Rpb24gbG9hZE9yQ3JlYXRlU2Vzc2lvbih7XG4gIHNlc3Npb25JZGxlRXhwaXJlLFxuICBtYXhSZXBsYXlEdXJhdGlvbixcbiAgcHJldmlvdXNTZXNzaW9uSWRcbn0sIHNlc3Npb25PcHRpb25zKSB7XG4gIGNvbnN0IGV4aXN0aW5nU2Vzc2lvbiA9IHNlc3Npb25PcHRpb25zLnN0aWNreVNlc3Npb24gJiYgZmV0Y2hTZXNzaW9uKCk7XG5cbiAgLy8gTm8gc2Vzc2lvbiBleGlzdHMgeWV0LCBqdXN0IGNyZWF0ZSBhIG5ldyBvbmVcbiAgaWYgKCFleGlzdGluZ1Nlc3Npb24pIHtcbiAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuaW5mb1RpY2soJ0NyZWF0aW5nIG5ldyBzZXNzaW9uJyk7XG4gICAgcmV0dXJuIGNyZWF0ZVNlc3Npb24oc2Vzc2lvbk9wdGlvbnMsIHtcbiAgICAgIHByZXZpb3VzU2Vzc2lvbklkXG4gICAgfSk7XG4gIH1cbiAgaWYgKCFzaG91bGRSZWZyZXNoU2Vzc2lvbihleGlzdGluZ1Nlc3Npb24sIHtcbiAgICBzZXNzaW9uSWRsZUV4cGlyZSxcbiAgICBtYXhSZXBsYXlEdXJhdGlvblxuICB9KSkge1xuICAgIHJldHVybiBleGlzdGluZ1Nlc3Npb247XG4gIH1cbiAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm9UaWNrKCdTZXNzaW9uIGluIHNlc3Npb25TdG9yYWdlIGlzIGV4cGlyZWQsIGNyZWF0aW5nIG5ldyBvbmUuLi4nKTtcbiAgcmV0dXJuIGNyZWF0ZVNlc3Npb24oc2Vzc2lvbk9wdGlvbnMsIHtcbiAgICBwcmV2aW91c1Nlc3Npb25JZDogZXhpc3RpbmdTZXNzaW9uLmlkXG4gIH0pO1xufVxuZnVuY3Rpb24gaXNDdXN0b21FdmVudChldmVudCkge1xuICByZXR1cm4gZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkN1c3RvbTtcbn1cblxuLyoqXG4gKiBBZGQgYW4gZXZlbnQgdG8gdGhlIGV2ZW50IGJ1ZmZlci5cbiAqIEluIGNvbnRyYXN0IHRvIGBhZGRFdmVudGAsIHRoaXMgZG9lcyBub3QgcmV0dXJuIGEgcHJvbWlzZSAmIGRvZXMgbm90IHdhaXQgZm9yIHRoZSBhZGRpbmcgb2YgdGhlIGV2ZW50IHRvIHN1Y2NlZWQvZmFpbC5cbiAqIEluc3RlYWQgdGhpcyByZXR1cm5zIGB0cnVlYCBpZiB3ZSB0cmllZCB0byBhZGQgdGhlIGV2ZW50LCBlbHNlIGZhbHNlLlxuICogSXQgcmV0dXJucyBgZmFsc2VgIGUuZy4gaWYgd2UgYXJlIHBhdXNlZCwgZGlzYWJsZWQsIG9yIG91dCBvZiB0aGUgbWF4IHJlcGxheSBkdXJhdGlvbi5cbiAqXG4gKiBgaXNDaGVja291dGAgaXMgdHJ1ZSBpZiB0aGlzIGlzIGVpdGhlciB0aGUgdmVyeSBmaXJzdCBldmVudCwgb3IgYW4gZXZlbnQgdHJpZ2dlcmVkIGJ5IGBjaGVja291dEV2ZXJ5Tm1zYC5cbiAqL1xuZnVuY3Rpb24gYWRkRXZlbnRTeW5jKHJlcGxheSwgZXZlbnQsIGlzQ2hlY2tvdXQpIHtcbiAgaWYgKCFzaG91bGRBZGRFdmVudChyZXBsYXksIGV2ZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFRoaXMgc2hvdWxkIG5ldmVyIHJlamVjdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gIF9hZGRFdmVudChyZXBsYXksIGV2ZW50LCBpc0NoZWNrb3V0KTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQWRkIGFuIGV2ZW50IHRvIHRoZSBldmVudCBidWZmZXIuXG4gKiBSZXNvbHZlcyB0byBgbnVsbGAgaWYgbm8gZXZlbnQgd2FzIGFkZGVkLCBlbHNlIHRvIGB2b2lkYC5cbiAqXG4gKiBgaXNDaGVja291dGAgaXMgdHJ1ZSBpZiB0aGlzIGlzIGVpdGhlciB0aGUgdmVyeSBmaXJzdCBldmVudCwgb3IgYW4gZXZlbnQgdHJpZ2dlcmVkIGJ5IGBjaGVja291dEV2ZXJ5Tm1zYC5cbiAqL1xuZnVuY3Rpb24gYWRkRXZlbnQocmVwbGF5LCBldmVudCwgaXNDaGVja291dCkge1xuICBpZiAoIXNob3VsZEFkZEV2ZW50KHJlcGxheSwgZXZlbnQpKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgfVxuICByZXR1cm4gX2FkZEV2ZW50KHJlcGxheSwgZXZlbnQsIGlzQ2hlY2tvdXQpO1xufVxuYXN5bmMgZnVuY3Rpb24gX2FkZEV2ZW50KHJlcGxheSwgZXZlbnQsIGlzQ2hlY2tvdXQpIHtcbiAgY29uc3Qge1xuICAgIGV2ZW50QnVmZmVyXG4gIH0gPSByZXBsYXk7XG4gIGlmICghZXZlbnRCdWZmZXIgfHwgZXZlbnRCdWZmZXIud2FpdEZvckNoZWNrb3V0ICYmICFpc0NoZWNrb3V0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgaXNCdWZmZXJNb2RlID0gcmVwbGF5LnJlY29yZGluZ01vZGUgPT09ICdidWZmZXInO1xuICB0cnkge1xuICAgIGlmIChpc0NoZWNrb3V0ICYmIGlzQnVmZmVyTW9kZSkge1xuICAgICAgZXZlbnRCdWZmZXIuY2xlYXIoKTtcbiAgICB9XG4gICAgaWYgKGlzQ2hlY2tvdXQpIHtcbiAgICAgIGV2ZW50QnVmZmVyLmhhc0NoZWNrb3V0ID0gdHJ1ZTtcbiAgICAgIGV2ZW50QnVmZmVyLndhaXRGb3JDaGVja291dCA9IGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByZXBsYXlPcHRpb25zID0gcmVwbGF5LmdldE9wdGlvbnMoKTtcbiAgICBjb25zdCBldmVudEFmdGVyUG9zc2libGVDYWxsYmFjayA9IG1heWJlQXBwbHlDYWxsYmFjayhldmVudCwgcmVwbGF5T3B0aW9ucy5iZWZvcmVBZGRSZWNvcmRpbmdFdmVudCk7XG4gICAgaWYgKCFldmVudEFmdGVyUG9zc2libGVDYWxsYmFjaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgZXZlbnRCdWZmZXIuYWRkRXZlbnQoZXZlbnRBZnRlclBvc3NpYmxlQ2FsbGJhY2spO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IGlzRXhjZWVkZWQgPSBlcnJvciAmJiBlcnJvciBpbnN0YW5jZW9mIEV2ZW50QnVmZmVyU2l6ZUV4Y2VlZGVkRXJyb3I7XG4gICAgY29uc3QgcmVhc29uID0gaXNFeGNlZWRlZCA/ICdhZGRFdmVudFNpemVFeGNlZWRlZCcgOiAnYWRkRXZlbnQnO1xuICAgIGlmIChpc0V4Y2VlZGVkICYmIGlzQnVmZmVyTW9kZSkge1xuICAgICAgLy8gQ2xlYXIgYnVmZmVyIGFuZCB3YWl0IGZvciBuZXh0IGNoZWNrb3V0XG4gICAgICBldmVudEJ1ZmZlci5jbGVhcigpO1xuICAgICAgZXZlbnRCdWZmZXIud2FpdEZvckNoZWNrb3V0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXBsYXkuaGFuZGxlRXhjZXB0aW9uKGVycm9yKTtcbiAgICBhd2FpdCByZXBsYXkuc3RvcCh7XG4gICAgICByZWFzb25cbiAgICB9KTtcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgICBpZiAoY2xpZW50KSB7XG4gICAgICBjbGllbnQucmVjb3JkRHJvcHBlZEV2ZW50KCdpbnRlcm5hbF9zZGtfZXJyb3InLCAncmVwbGF5Jyk7XG4gICAgfVxuICB9XG59XG5cbi8qKiBFeHBvcnRlZCBvbmx5IGZvciB0ZXN0cy4gKi9cbmZ1bmN0aW9uIHNob3VsZEFkZEV2ZW50KHJlcGxheSwgZXZlbnQpIHtcbiAgaWYgKCFyZXBsYXkuZXZlbnRCdWZmZXIgfHwgcmVwbGF5LmlzUGF1c2VkKCkgfHwgIXJlcGxheS5pc0VuYWJsZWQoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB0aW1lc3RhbXBJbk1zID0gdGltZXN0YW1wVG9NcyhldmVudC50aW1lc3RhbXApO1xuXG4gIC8vIFRocm93IG91dCBldmVudHMgdGhhdCBoYXBwZW4gbW9yZSB0aGFuIDUgbWludXRlcyBhZ28uIFRoaXMgY2FuIGhhcHBlbiBpZlxuICAvLyBwYWdlIGhhcyBiZWVuIGxlZnQgb3BlbiBhbmQgaWRsZSBmb3IgYSBsb25nIHBlcmlvZCBvZiB0aW1lIGFuZCB1c2VyXG4gIC8vIGNvbWVzIGJhY2sgdG8gdHJpZ2dlciBhIG5ldyBzZXNzaW9uLiBUaGUgcGVyZm9ybWFuY2UgZW50cmllcyByZWx5IG9uXG4gIC8vIGBwZXJmb3JtYW5jZS50aW1lT3JpZ2luYCwgd2hpY2ggaXMgd2hlbiB0aGUgcGFnZSBmaXJzdCBvcGVuZWQuXG4gIGlmICh0aW1lc3RhbXBJbk1zICsgcmVwbGF5LnRpbWVvdXRzLnNlc3Npb25JZGxlUGF1c2UgPCBEYXRlLm5vdygpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gVGhyb3cgb3V0IGV2ZW50cyB0aGF0IGFyZSArNjBtaW4gZnJvbSB0aGUgaW5pdGlhbCB0aW1lc3RhbXBcbiAgaWYgKHRpbWVzdGFtcEluTXMgPiByZXBsYXkuZ2V0Q29udGV4dCgpLmluaXRpYWxUaW1lc3RhbXAgKyByZXBsYXkuZ2V0T3B0aW9ucygpLm1heFJlcGxheUR1cmF0aW9uKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm9UaWNrKGBTa2lwcGluZyBldmVudCB3aXRoIHRpbWVzdGFtcCAke3RpbWVzdGFtcEluTXN9IGJlY2F1c2UgaXQgaXMgYWZ0ZXIgbWF4UmVwbGF5RHVyYXRpb25gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBtYXliZUFwcGx5Q2FsbGJhY2soZXZlbnQsIGNhbGxiYWNrKSB7XG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBpc0N1c3RvbUV2ZW50KGV2ZW50KSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKGV2ZW50KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlcnJvciwgJ0FuIGVycm9yIG9jY3VycmVkIGluIHRoZSBgYmVmb3JlQWRkUmVjb3JkaW5nRXZlbnRgIGNhbGxiYWNrLCBza2lwcGluZyB0aGUgZXZlbnQuLi4nKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gZXZlbnQ7XG59XG5cbi8qKiBJZiB0aGUgZXZlbnQgaXMgYW4gZXJyb3IgZXZlbnQgKi9cbmZ1bmN0aW9uIGlzRXJyb3JFdmVudChldmVudCkge1xuICByZXR1cm4gIWV2ZW50LnR5cGU7XG59XG5cbi8qKiBJZiB0aGUgZXZlbnQgaXMgYSB0cmFuc2FjdGlvbiBldmVudCAqL1xuZnVuY3Rpb24gaXNUcmFuc2FjdGlvbkV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC50eXBlID09PSAndHJhbnNhY3Rpb24nO1xufVxuXG4vKiogSWYgdGhlIGV2ZW50IGlzIGFuIHJlcGxheSBldmVudCAqL1xuZnVuY3Rpb24gaXNSZXBsYXlFdmVudChldmVudCkge1xuICByZXR1cm4gZXZlbnQudHlwZSA9PT0gJ3JlcGxheV9ldmVudCc7XG59XG5cbi8qKiBJZiB0aGUgZXZlbnQgaXMgYSBmZWVkYmFjayBldmVudCAqL1xuZnVuY3Rpb24gaXNGZWVkYmFja0V2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC50eXBlID09PSAnZmVlZGJhY2snO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBsaXN0ZW5lciB0byBiZSBhZGRlZCB0byBgY2xpZW50Lm9uKCdhZnRlclNlbmRFcnJvckV2ZW50LCBsaXN0ZW5lcilgLlxuICovXG5mdW5jdGlvbiBoYW5kbGVBZnRlclNlbmRFdmVudChyZXBsYXkpIHtcbiAgcmV0dXJuIChldmVudCwgc2VuZFJlc3BvbnNlKSA9PiB7XG4gICAgaWYgKCFyZXBsYXkuaXNFbmFibGVkKCkgfHwgIWlzRXJyb3JFdmVudChldmVudCkgJiYgIWlzVHJhbnNhY3Rpb25FdmVudChldmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IHNlbmRSZXNwb25zZT8uc3RhdHVzQ29kZTtcblxuICAgIC8vIFdlIG9ubHkgd2FudCB0byBkbyBzdHVmZiBvbiBzdWNjZXNzZnVsIGVycm9yIHNlbmRpbmcsIG90aGVyd2lzZSB5b3UgZ2V0IGVycm9yIHJlcGxheXMgd2l0aG91dCBlcnJvcnMgYXR0YWNoZWRcbiAgICAvLyBJZiBub3QgdXNpbmcgdGhlIGJhc2UgdHJhbnNwb3J0LCB3ZSBhbGxvdyBgdW5kZWZpbmVkYCByZXNwb25zZSAoYXMgYSBjdXN0b20gdHJhbnNwb3J0IG1heSBub3QgaW1wbGVtZW50IHRoaXMgY29ycmVjdGx5IHlldClcbiAgICAvLyBJZiB3ZSBkbyB1c2UgdGhlIGJhc2UgdHJhbnNwb3J0LCB3ZSBza2lwIGlmIHdlIGVuY291bnRlcmVkIGFuIG5vbi1PSyBzdGF0dXMgY29kZVxuICAgIGlmICghc3RhdHVzQ29kZSB8fCBzdGF0dXNDb2RlIDwgMjAwIHx8IHN0YXR1c0NvZGUgPj0gMzAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc1RyYW5zYWN0aW9uRXZlbnQoZXZlbnQpKSB7XG4gICAgICBoYW5kbGVUcmFuc2FjdGlvbkV2ZW50KHJlcGxheSwgZXZlbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVFcnJvckV2ZW50KHJlcGxheSwgZXZlbnQpO1xuICB9O1xufVxuZnVuY3Rpb24gaGFuZGxlVHJhbnNhY3Rpb25FdmVudChyZXBsYXksIGV2ZW50KSB7XG4gIGNvbnN0IHJlcGxheUNvbnRleHQgPSByZXBsYXkuZ2V0Q29udGV4dCgpO1xuXG4gIC8vIENvbGxlY3QgdHJhY2VJZHMgaW4gX2NvbnRleHQgcmVnYXJkbGVzcyBvZiBgcmVjb3JkaW5nTW9kZWBcbiAgLy8gSW4gZXJyb3IgbW9kZSwgX2NvbnRleHQgZ2V0cyBjbGVhcmVkIG9uIGV2ZXJ5IGNoZWNrb3V0XG4gIC8vIFdlIGxpbWl0IHRvIG1heC4gMTAwIHRyYW5zYWN0aW9ucyBsaW5rZWRcbiAgaWYgKGV2ZW50LmNvbnRleHRzPy50cmFjZT8udHJhY2VfaWQgJiYgcmVwbGF5Q29udGV4dC50cmFjZUlkcy5zaXplIDwgMTAwKSB7XG4gICAgcmVwbGF5Q29udGV4dC50cmFjZUlkcy5hZGQoZXZlbnQuY29udGV4dHMudHJhY2UudHJhY2VfaWQpO1xuICB9XG59XG5mdW5jdGlvbiBoYW5kbGVFcnJvckV2ZW50KHJlcGxheSwgZXZlbnQpIHtcbiAgY29uc3QgcmVwbGF5Q29udGV4dCA9IHJlcGxheS5nZXRDb250ZXh0KCk7XG5cbiAgLy8gQWRkIGVycm9yIHRvIGxpc3Qgb2YgZXJyb3JJZHMgb2YgcmVwbGF5LiBUaGlzIGlzIG9rIHRvIGRvIGV2ZW4gaWYgbm90XG4gIC8vIHNhbXBsZWQgYmVjYXVzZSBjb250ZXh0IHdpbGwgZ2V0IHJlc2V0IGF0IG5leHQgY2hlY2tvdXQuXG4gIC8vIFhYWDogVGhlcmUgaXMgYWxzbyBhIHJhY2UgY29uZGl0aW9uIHdoZXJlIGl0J3MgcG9zc2libGUgdG8gY2FwdHVyZSBhblxuICAvLyBlcnJvciB0byBTZW50cnkgYmVmb3JlIFJlcGxheSBTREsgaGFzIGxvYWRlZCwgYnV0IHJlc3BvbnNlIHJldHVybnMgYWZ0ZXJcbiAgLy8gaXQgd2FzIGxvYWRlZCwgYW5kIHRoaXMgZ2V0cyBjYWxsZWQuXG4gIC8vIFdlIGxpbWl0IHRvIG1heC4gMTAwIGVycm9ycyBsaW5rZWRcbiAgaWYgKGV2ZW50LmV2ZW50X2lkICYmIHJlcGxheUNvbnRleHQuZXJyb3JJZHMuc2l6ZSA8IDEwMCkge1xuICAgIHJlcGxheUNvbnRleHQuZXJyb3JJZHMuYWRkKGV2ZW50LmV2ZW50X2lkKTtcbiAgfVxuXG4gIC8vIElmIGVycm9yIGV2ZW50IGlzIHRhZ2dlZCB3aXRoIHJlcGxheSBpZCBpdCBtZWFucyBpdCB3YXMgc2FtcGxlZCAod2hlbiBpbiBidWZmZXIgbW9kZSlcbiAgLy8gTmVlZCB0byBiZSB2ZXJ5IGNhcmVmdWwgdGhhdCB0aGlzIGRvZXMgbm90IGNhdXNlIGFuIGluZmluaXRlIGxvb3BcbiAgaWYgKHJlcGxheS5yZWNvcmRpbmdNb2RlICE9PSAnYnVmZmVyJyB8fCAhZXZlbnQudGFncyB8fCAhZXZlbnQudGFncy5yZXBsYXlJZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB7XG4gICAgYmVmb3JlRXJyb3JTYW1wbGluZ1xuICB9ID0gcmVwbGF5LmdldE9wdGlvbnMoKTtcbiAgaWYgKHR5cGVvZiBiZWZvcmVFcnJvclNhbXBsaW5nID09PSAnZnVuY3Rpb24nICYmICFiZWZvcmVFcnJvclNhbXBsaW5nKGV2ZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBzZXRUaW1lb3V0JDMoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDYXB0dXJlIGN1cnJlbnQgZXZlbnQgYnVmZmVyIGFzIG5ldyByZXBsYXlcbiAgICAgIGF3YWl0IHJlcGxheS5zZW5kQnVmZmVyZWRSZXBsYXlPckZsdXNoKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXBsYXkuaGFuZGxlRXhjZXB0aW9uKGVycik7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbGlzdGVuZXIgdG8gYmUgYWRkZWQgdG8gYGNsaWVudC5vbignYWZ0ZXJTZW5kRXJyb3JFdmVudCwgbGlzdGVuZXIpYC5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlQmVmb3JlU2VuZEV2ZW50KHJlcGxheSkge1xuICByZXR1cm4gZXZlbnQgPT4ge1xuICAgIGlmICghcmVwbGF5LmlzRW5hYmxlZCgpIHx8ICFpc0Vycm9yRXZlbnQoZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZUh5ZHJhdGlvbkVycm9yKHJlcGxheSwgZXZlbnQpO1xuICB9O1xufVxuZnVuY3Rpb24gaGFuZGxlSHlkcmF0aW9uRXJyb3IocmVwbGF5LCBldmVudCkge1xuICBjb25zdCBleGNlcHRpb25WYWx1ZSA9IGV2ZW50LmV4Y2VwdGlvbj8udmFsdWVzPy5bMF0/LnZhbHVlO1xuICBpZiAodHlwZW9mIGV4Y2VwdGlvblZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoXG4gIC8vIE9ubHkgbWF0Y2hlcyBlcnJvcnMgaW4gcHJvZHVjdGlvbiBidWlsZHMgb2YgcmVhY3QtZG9tXG4gIC8vIEV4YW1wbGUgaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2Vycm9yLWRlY29kZXIuaHRtbD9pbnZhcmlhbnQ9NDIzXG4gIC8vIFdpdGggbmV3ZXIgUmVhY3QgdmVyc2lvbnMsIHRoZSBtZXNzYWdlcyBjaGFuZ2VkIHRvIGEgZGlmZmVyZW50IHdlYnNpdGUgaHR0cHM6Ly9yZWFjdC5kZXYvZXJyb3JzLzQxOFxuICBleGNlcHRpb25WYWx1ZS5tYXRjaCgvKHJlYWN0anNcXC5vcmdcXC9kb2NzXFwvZXJyb3ItZGVjb2RlclxcLmh0bWxcXD9pbnZhcmlhbnQ9fHJlYWN0XFwuZGV2XFwvZXJyb3JzXFwvKSg0MTh8NDE5fDQyMnw0MjN8NDI1KS8pIHx8XG4gIC8vIERldmVsb3BtZW50IGJ1aWxkcyBvZiByZWFjdC1kb21cbiAgLy8gRXJyb3IgMTogSHlkcmF0aW9uIGZhaWxlZCBiZWNhdXNlIHRoZSBpbml0aWFsIFVJIGRvZXMgbm90IG1hdGNoIHdoYXQgd2FzIHJlbmRlcmVkIG9uIHRoZSBzZXJ2ZXIuXG4gIC8vIEVycm9yIDI6IFRleHQgY29udGVudCBkb2VzIG5vdCBtYXRjaCBzZXJ2ZXItcmVuZGVyZWQgSFRNTC4gV2FybmluZzogVGV4dCBjb250ZW50IGRpZCBub3QgbWF0Y2guXG4gIGV4Y2VwdGlvblZhbHVlLm1hdGNoKC8oZG9lcyBub3QgbWF0Y2ggc2VydmVyLXJlbmRlcmVkIEhUTUx8SHlkcmF0aW9uIGZhaWxlZCBiZWNhdXNlKS9pKSkge1xuICAgIGNvbnN0IGJyZWFkY3J1bWIgPSBjcmVhdGVCcmVhZGNydW1iKHtcbiAgICAgIGNhdGVnb3J5OiAncmVwbGF5Lmh5ZHJhdGUtZXJyb3InLFxuICAgICAgZGF0YToge1xuICAgICAgICB1cmw6IGdldExvY2F0aW9uSHJlZigpXG4gICAgICB9XG4gICAgfSk7XG4gICAgYWRkQnJlYWRjcnVtYkV2ZW50KHJlcGxheSwgYnJlYWRjcnVtYik7XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGUgYnJlYWRjcnVtYnMgdGhhdCBTZW50cnkgY2FwdHVyZXMsIGFuZCBtYWtlIHN1cmUgdG8gY2FwdHVyZSByZWxldmFudCBicmVhZGNydW1icyB0byBSZXBsYXkgYXMgd2VsbC5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlQnJlYWRjcnVtYnMocmVwbGF5KSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBpZiAoIWNsaWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjbGllbnQub24oJ2JlZm9yZUFkZEJyZWFkY3J1bWInLCBicmVhZGNydW1iID0+IGJlZm9yZUFkZEJyZWFkY3J1bWIocmVwbGF5LCBicmVhZGNydW1iKSk7XG59XG5mdW5jdGlvbiBiZWZvcmVBZGRCcmVhZGNydW1iKHJlcGxheSwgYnJlYWRjcnVtYikge1xuICBpZiAoIXJlcGxheS5pc0VuYWJsZWQoKSB8fCAhaXNCcmVhZGNydW1iV2l0aENhdGVnb3J5KGJyZWFkY3J1bWIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IG5vcm1hbGl6ZUJyZWFkY3J1bWIoYnJlYWRjcnVtYik7XG4gIGlmIChyZXN1bHQpIHtcbiAgICBhZGRCcmVhZGNydW1iRXZlbnQocmVwbGF5LCByZXN1bHQpO1xuICB9XG59XG5cbi8qKiBFeHBvcnRlZCBvbmx5IGZvciB0ZXN0cy4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZUJyZWFkY3J1bWIoYnJlYWRjcnVtYikge1xuICBpZiAoIWlzQnJlYWRjcnVtYldpdGhDYXRlZ29yeShicmVhZGNydW1iKSB8fCBbXG4gIC8vIGZldGNoICYgeGhyIGFyZSBoYW5kbGVkIHNlcGFyYXRlbHksaW4gaGFuZGxlTmV0d29ya0JyZWFkY3J1bWJzXG4gICdmZXRjaCcsICd4aHInLFxuICAvLyBUaGVzZSB0d28gYXJlIGJyZWFkY3J1bWJzIGZvciBlbWl0dGVkIHNlbnRyeSBldmVudHMsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlbVxuICAnc2VudHJ5LmV2ZW50JywgJ3NlbnRyeS50cmFuc2FjdGlvbiddLmluY2x1ZGVzKGJyZWFkY3J1bWIuY2F0ZWdvcnkpIHx8XG4gIC8vIFdlIGNhcHR1cmUgVUkgYnJlYWRjcnVtYnMgc2VwYXJhdGVseVxuICBicmVhZGNydW1iLmNhdGVnb3J5LnN0YXJ0c1dpdGgoJ3VpLicpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGJyZWFkY3J1bWIuY2F0ZWdvcnkgPT09ICdjb25zb2xlJykge1xuICAgIHJldHVybiBub3JtYWxpemVDb25zb2xlQnJlYWRjcnVtYihicmVhZGNydW1iKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQnJlYWRjcnVtYihicmVhZGNydW1iKTtcbn1cblxuLyoqIGV4cG9ydGVkIGZvciB0ZXN0cyBvbmx5ICovXG5mdW5jdGlvbiBub3JtYWxpemVDb25zb2xlQnJlYWRjcnVtYihicmVhZGNydW1iKSB7XG4gIGNvbnN0IGFyZ3MgPSBicmVhZGNydW1iLmRhdGE/LmFyZ3VtZW50cztcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFyZ3MpIHx8IGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJyZWFkY3J1bWIoYnJlYWRjcnVtYik7XG4gIH1cbiAgbGV0IGlzVHJ1bmNhdGVkID0gZmFsc2U7XG5cbiAgLy8gQXZvaWQgZ2lhbnQgYXJncyBjYXB0dXJlc1xuICBjb25zdCBub3JtYWxpemVkQXJncyA9IGFyZ3MubWFwKGFyZyA9PiB7XG4gICAgaWYgKCFhcmcpIHtcbiAgICAgIHJldHVybiBhcmc7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGFyZy5sZW5ndGggPiBDT05TT0xFX0FSR19NQVhfU0laRSkge1xuICAgICAgICBpc1RydW5jYXRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBgJHthcmcuc2xpY2UoMCwgQ09OU09MRV9BUkdfTUFYX1NJWkUpfeKApmA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRBcmcgPSBub3JtYWxpemUoYXJnLCA3KTtcbiAgICAgICAgY29uc3Qgc3RyaW5naWZpZWQgPSBKU09OLnN0cmluZ2lmeShub3JtYWxpemVkQXJnKTtcbiAgICAgICAgaWYgKHN0cmluZ2lmaWVkLmxlbmd0aCA+IENPTlNPTEVfQVJHX01BWF9TSVpFKSB7XG4gICAgICAgICAgaXNUcnVuY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgIC8vIFdlIHVzZSB0aGUgcHJldHR5IHByaW50ZWQgSlNPTiBzdHJpbmcgaGVyZSBhcyBhIGJhc2VcbiAgICAgICAgICByZXR1cm4gYCR7SlNPTi5zdHJpbmdpZnkobm9ybWFsaXplZEFyZywgbnVsbCwgMikuc2xpY2UoMCwgQ09OU09MRV9BUkdfTUFYX1NJWkUpfeKApmA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRBcmc7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8gZmFsbCBiYWNrIHRvIGRlZmF1bHRcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyZztcbiAgfSk7XG4gIHJldHVybiBjcmVhdGVCcmVhZGNydW1iKHtcbiAgICAuLi5icmVhZGNydW1iLFxuICAgIGRhdGE6IHtcbiAgICAgIC4uLmJyZWFkY3J1bWIuZGF0YSxcbiAgICAgIGFyZ3VtZW50czogbm9ybWFsaXplZEFyZ3MsXG4gICAgICAuLi4oaXNUcnVuY2F0ZWQgPyB7XG4gICAgICAgIF9tZXRhOiB7XG4gICAgICAgICAgd2FybmluZ3M6IFsnQ09OU09MRV9BUkdfVFJVTkNBVEVEJ11cbiAgICAgICAgfVxuICAgICAgfSA6IHt9KVxuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBpc0JyZWFkY3J1bWJXaXRoQ2F0ZWdvcnkoYnJlYWRjcnVtYikge1xuICByZXR1cm4gISFicmVhZGNydW1iLmNhdGVnb3J5O1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSB0aGluayB0aGUgZ2l2ZW4gZXZlbnQgaXMgYW4gZXJyb3Igb3JpZ2luYXRpbmcgaW5zaWRlIG9mIHJyd2ViLlxuICovXG5mdW5jdGlvbiBpc1Jyd2ViRXJyb3IoZXZlbnQsIGhpbnQpIHtcbiAgaWYgKGV2ZW50LnR5cGUgfHwgIWV2ZW50LmV4Y2VwdGlvbiB8fCAhZXZlbnQuZXhjZXB0aW9uLnZhbHVlcyB8fCAhZXZlbnQuZXhjZXB0aW9uLnZhbHVlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoaXMgbWF5IGJlIHNldCBieSBycndlYiB3aGVuIGl0IGZpbmRzIGVycm9yc1xuICBpZiAoaGludC5vcmlnaW5hbEV4Y2VwdGlvbj8uX19ycndlYl9fKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJlc2V0IHRoZSBgcmVwbGF5X2lkYCBmaWVsZCBvbiB0aGUgRFNDLlxuICovXG5mdW5jdGlvbiByZXNldFJlcGxheUlkT25EeW5hbWljU2FtcGxpbmdDb250ZXh0KCkge1xuICAvLyBSZXNldCBEU0Mgb24gdGhlIGN1cnJlbnQgc2NvcGUsIGlmIHRoZXJlIGlzIG9uZVxuICBjb25zdCBkc2MgPSBnZXRDdXJyZW50U2NvcGUoKS5nZXRQcm9wYWdhdGlvbkNvbnRleHQoKS5kc2M7XG4gIGlmIChkc2MpIHtcbiAgICBkZWxldGUgZHNjLnJlcGxheV9pZDtcbiAgfVxuXG4gIC8vIENsZWFyIGl0IGZyb20gZnJvemVuIERTQyBvbiB0aGUgYWN0aXZlIHNwYW5cbiAgY29uc3QgYWN0aXZlU3BhbiA9IGdldEFjdGl2ZVNwYW4oKTtcbiAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICBjb25zdCBkc2MgPSBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4oYWN0aXZlU3Bhbik7XG4gICAgZGVsZXRlIGRzYy5yZXBsYXlfaWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgYSBmZWVkYmFjayBicmVhZGNydW1iIGV2ZW50IHRvIHJlcGxheS5cbiAqL1xuZnVuY3Rpb24gYWRkRmVlZGJhY2tCcmVhZGNydW1iKHJlcGxheSwgZXZlbnQpIHtcbiAgcmVwbGF5LnRyaWdnZXJVc2VyQWN0aXZpdHkoKTtcbiAgcmVwbGF5LmFkZFVwZGF0ZSgoKSA9PiB7XG4gICAgaWYgKCFldmVudC50aW1lc3RhbXApIHtcbiAgICAgIC8vIElnbm9yZSBldmVudHMgdGhhdCBkb24ndCBoYXZlIHRpbWVzdGFtcHMgKHRoaXMgc2hvdWxkbid0IGhhcHBlbiwgbW9yZSBvZiBhIHR5cGluZyBpc3N1ZSlcbiAgICAgIC8vIFJldHVybiB0cnVlIGhlcmUgc28gdGhhdCB3ZSBkb24ndCBmbHVzaFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgcmVqZWN0XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgIHJlcGxheS50aHJvdHRsZWRBZGRFdmVudCh7XG4gICAgICB0eXBlOiBFdmVudFR5cGUuQ3VzdG9tLFxuICAgICAgdGltZXN0YW1wOiBldmVudC50aW1lc3RhbXAgKiAxMDAwLFxuICAgICAgZGF0YToge1xuICAgICAgICB0YWc6ICdicmVhZGNydW1iJyxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIHRpbWVzdGFtcDogZXZlbnQudGltZXN0YW1wLFxuICAgICAgICAgIHR5cGU6ICdkZWZhdWx0JyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3NlbnRyeS5mZWVkYmFjaycsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZmVlZGJhY2tJZDogZXZlbnQuZXZlbnRfaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBldmVudCBzaG91bGQgYmUgc2FtcGxlZCAob25seSBhcHBsaWVzIGluIGJ1ZmZlciBtb2RlKS5cbiAqIFdoZW4gYW4gZXZlbnQgaXMgY2FwdHVyZWQgYnkgYGhhbmRsZUdsb2JhbEV2ZW50YCwgd2hlbiBpbiBidWZmZXIgbW9kZVxuICogd2UgZGV0ZXJtaW5lIGlmIHdlIHdhbnQgdG8gc2FtcGxlIHRoZSBlcnJvciBvciBub3QuXG4gKi9cbmZ1bmN0aW9uIHNob3VsZFNhbXBsZUZvckJ1ZmZlckV2ZW50KHJlcGxheSwgZXZlbnQpIHtcbiAgaWYgKHJlcGxheS5yZWNvcmRpbmdNb2RlICE9PSAnYnVmZmVyJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIGlnbm9yZSB0aGlzIGVycm9yIGJlY2F1c2Ugb3RoZXJ3aXNlIHdlIGNvdWxkIGxvb3AgaW5kZWZpbml0ZWx5IHdpdGhcbiAgLy8gdHJ5aW5nIHRvIGNhcHR1cmUgcmVwbGF5IGFuZCBmYWlsaW5nXG4gIGlmIChldmVudC5tZXNzYWdlID09PSBVTkFCTEVfVE9fU0VORF9SRVBMQVkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBSZXF1aXJlIHRoZSBldmVudCB0byBiZSBhbiBlcnJvciBldmVudCAmIHRvIGhhdmUgYW4gZXhjZXB0aW9uXG4gIGlmICghZXZlbnQuZXhjZXB0aW9uIHx8IGV2ZW50LnR5cGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGlzU2FtcGxlZChyZXBsYXkuZ2V0T3B0aW9ucygpLmVycm9yU2FtcGxlUmF0ZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGxpc3RlbmVyIHRvIGJlIGFkZGVkIHRvIGBhZGRFdmVudFByb2Nlc3NvcihsaXN0ZW5lcilgLlxuICovXG5mdW5jdGlvbiBoYW5kbGVHbG9iYWxFdmVudExpc3RlbmVyKHJlcGxheSkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbigoZXZlbnQsIGhpbnQpID0+IHtcbiAgICAvLyBEbyBub3RoaW5nIGlmIHJlcGxheSBoYXMgYmVlbiBkaXNhYmxlZCBvciBwYXVzZWRcbiAgICBpZiAoIXJlcGxheS5pc0VuYWJsZWQoKSB8fCByZXBsYXkuaXNQYXVzZWQoKSkge1xuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cbiAgICBpZiAoaXNSZXBsYXlFdmVudChldmVudCkpIHtcbiAgICAgIC8vIFJlcGxheXMgaGF2ZSBzZXBhcmF0ZSBzZXQgb2YgYnJlYWRjcnVtYnMsIGRvIG5vdCBpbmNsdWRlIGJyZWFkY3J1bWJzXG4gICAgICAvLyBmcm9tIGNvcmUgU0RLXG4gICAgICBkZWxldGUgZXZlbnQuYnJlYWRjcnVtYnM7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuXG4gICAgLy8gV2Ugb25seSB3YW50IHRvIGhhbmRsZSBlcnJvcnMsIHRyYW5zYWN0aW9ucywgYW5kIGZlZWRiYWNrcywgbm90aGluZyBlbHNlXG4gICAgaWYgKCFpc0Vycm9yRXZlbnQoZXZlbnQpICYmICFpc1RyYW5zYWN0aW9uRXZlbnQoZXZlbnQpICYmICFpc0ZlZWRiYWNrRXZlbnQoZXZlbnQpKSB7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHdlIGRvIG5vdCBhZGQgcmVwbGF5X2lkIGlmIHRoZSBzZXNzaW9uIGlzIGV4cGlyZWRcbiAgICBjb25zdCBpc1Nlc3Npb25BY3RpdmUgPSByZXBsYXkuY2hlY2tBbmRIYW5kbGVFeHBpcmVkU2Vzc2lvbigpO1xuICAgIGlmICghaXNTZXNzaW9uQWN0aXZlKSB7XG4gICAgICAvLyBwcmV2ZW50IGV4Y2VlZGluZyByZXBsYXkgZHVyYXRpb25zIGJ5IHJlbW92aW5nIHRoZSBleHBpcmVkIHJlcGxheUlkIGZyb20gdGhlIERTQ1xuICAgICAgcmVzZXRSZXBsYXlJZE9uRHluYW1pY1NhbXBsaW5nQ29udGV4dCgpO1xuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cbiAgICBpZiAoaXNGZWVkYmFja0V2ZW50KGV2ZW50KSkge1xuICAgICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgcmVqZWN0XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICByZXBsYXkuZmx1c2goKTtcbiAgICAgIGV2ZW50LmNvbnRleHRzLmZlZWRiYWNrLnJlcGxheV9pZCA9IHJlcGxheS5nZXRTZXNzaW9uSWQoKTtcbiAgICAgIC8vIEFkZCBhIHJlcGxheSBicmVhZGNydW1iIGZvciB0aGlzIHBpZWNlIG9mIGZlZWRiYWNrXG4gICAgICBhZGRGZWVkYmFja0JyZWFkY3J1bWIocmVwbGF5LCBldmVudCk7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuXG4gICAgLy8gVW5sZXNzIGBjYXB0dXJlRXhjZXB0aW9uc2AgaXMgZW5hYmxlZCwgd2Ugd2FudCB0byBpZ25vcmUgZXJyb3JzIGNvbWluZyBmcm9tIHJyd2ViXG4gICAgLy8gQXMgdGhlcmUgY2FuIGJlIGEgYnVuY2ggb2Ygc3R1ZmYgZ29pbmcgd3JvbmcgaW4gaW50ZXJuYWxzIHRoZXJlLCB0aGF0IHdlIGRvbid0IHdhbnQgdG8gYnViYmxlIHVwIHRvIHVzZXJzXG4gICAgaWYgKGlzUnJ3ZWJFcnJvcihldmVudCwgaGludCkgJiYgIXJlcGxheS5nZXRPcHRpb25zKCkuX2V4cGVyaW1lbnRzLmNhcHR1cmVFeGNlcHRpb25zKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIubG9nKCdJZ25vcmluZyBlcnJvciBmcm9tIHJyd2ViIGludGVybmFscycsIGV2ZW50KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFdoZW4gaW4gYnVmZmVyIG1vZGUsIHdlIGRlY2lkZSB0byBzYW1wbGUgaGVyZS5cbiAgICAvLyBMYXRlciwgaW4gYGhhbmRsZUFmdGVyU2VuZEV2ZW50YCwgaWYgdGhlIHJlcGxheUlkIGlzIHNldCwgd2Uga25vdyB0aGF0IHdlIHNhbXBsZWRcbiAgICAvLyBBbmQgY29udmVydCB0aGUgYnVmZmVyIHNlc3Npb24gdG8gYSBmdWxsIHNlc3Npb25cbiAgICBjb25zdCBpc0Vycm9yRXZlbnRTYW1wbGVkID0gc2hvdWxkU2FtcGxlRm9yQnVmZmVyRXZlbnQocmVwbGF5LCBldmVudCk7XG5cbiAgICAvLyBUYWcgZXJyb3JzIGlmIGl0IGhhcyBiZWVuIHNhbXBsZWQgaW4gYnVmZmVyIG1vZGUsIG9yIGlmIGl0IGlzIHNlc3Npb24gbW9kZVxuICAgIC8vIE9ubHkgdGFnIHRyYW5zYWN0aW9ucyBpZiBpbiBzZXNzaW9uIG1vZGVcbiAgICBjb25zdCBzaG91bGRUYWdSZXBsYXlJZCA9IGlzRXJyb3JFdmVudFNhbXBsZWQgfHwgcmVwbGF5LnJlY29yZGluZ01vZGUgPT09ICdzZXNzaW9uJztcbiAgICBpZiAoc2hvdWxkVGFnUmVwbGF5SWQpIHtcbiAgICAgIGV2ZW50LnRhZ3MgPSB7XG4gICAgICAgIC4uLmV2ZW50LnRhZ3MsXG4gICAgICAgIHJlcGxheUlkOiByZXBsYXkuZ2V0U2Vzc2lvbklkKClcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBldmVudDtcbiAgfSwge1xuICAgIGlkOiAnUmVwbGF5J1xuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBcInNwYW5cIiBmb3IgZWFjaCBwZXJmb3JtYW5jZSBlbnRyeS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGVyZm9ybWFuY2VTcGFucyhyZXBsYXksIGVudHJpZXMpIHtcbiAgcmV0dXJuIGVudHJpZXMubWFwKCh7XG4gICAgdHlwZSxcbiAgICBzdGFydCxcbiAgICBlbmQsXG4gICAgbmFtZSxcbiAgICBkYXRhXG4gIH0pID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IHJlcGxheS50aHJvdHRsZWRBZGRFdmVudCh7XG4gICAgICB0eXBlOiBFdmVudFR5cGUuQ3VzdG9tLFxuICAgICAgdGltZXN0YW1wOiBzdGFydCxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdGFnOiAncGVyZm9ybWFuY2VTcGFuJyxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIG9wOiB0eXBlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBuYW1lLFxuICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiBzdGFydCxcbiAgICAgICAgICBlbmRUaW1lc3RhbXA6IGVuZCxcbiAgICAgICAgICBkYXRhXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIElmIHJlc3BvbnNlIGlzIGEgc3RyaW5nLCBpdCBtZWFucyBpdHMgZWl0aGVyIFRIUk9UVExFRCBvciBTS0lQUEVEXG4gICAgcmV0dXJuIHR5cGVvZiByZXNwb25zZSA9PT0gJ3N0cmluZycgPyBQcm9taXNlLnJlc29sdmUobnVsbCkgOiByZXNwb25zZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGVIaXN0b3J5KGhhbmRsZXJEYXRhKSB7XG4gIGNvbnN0IHtcbiAgICBmcm9tLFxuICAgIHRvXG4gIH0gPSBoYW5kbGVyRGF0YTtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKSAvIDEwMDA7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ25hdmlnYXRpb24ucHVzaCcsXG4gICAgc3RhcnQ6IG5vdyxcbiAgICBlbmQ6IG5vdyxcbiAgICBuYW1lOiB0byxcbiAgICBkYXRhOiB7XG4gICAgICBwcmV2aW91czogZnJvbVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbGlzdGVuZXIgdG8gYmUgYWRkZWQgdG8gYGFkZEhpc3RvcnlJbnN0cnVtZW50YXRpb25IYW5kbGVyKGxpc3RlbmVyKWAuXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUhpc3RvcnlTcGFuTGlzdGVuZXIocmVwbGF5KSB7XG4gIHJldHVybiBoYW5kbGVyRGF0YSA9PiB7XG4gICAgaWYgKCFyZXBsYXkuaXNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gaGFuZGxlSGlzdG9yeShoYW5kbGVyRGF0YSk7XG4gICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE5lZWQgdG8gY29sbGVjdCB2aXNpdGVkIFVSTHNcbiAgICByZXBsYXkuZ2V0Q29udGV4dCgpLnVybHMucHVzaChyZXN1bHQubmFtZSk7XG4gICAgcmVwbGF5LnRyaWdnZXJVc2VyQWN0aXZpdHkoKTtcbiAgICByZXBsYXkuYWRkVXBkYXRlKCgpID0+IHtcbiAgICAgIGNyZWF0ZVBlcmZvcm1hbmNlU3BhbnMocmVwbGF5LCBbcmVzdWx0XSk7XG4gICAgICAvLyBSZXR1cm5pbmcgZmFsc2UgdG8gZmx1c2hcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGEgZ2l2ZW4gcmVxdWVzdCBVUkwgc2hvdWxkIGJlIGZpbHRlcmVkIG91dC4gVGhpcyBpcyBzbyB3ZVxuICogZG9uJ3QgbG9nIFNlbnRyeSBpbmdlc3QgcmVxdWVzdHMuXG4gKi9cbmZ1bmN0aW9uIHNob3VsZEZpbHRlclJlcXVlc3QocmVwbGF5LCB1cmwpIHtcbiAgLy8gSWYgd2UgZW5hYmxlZCB0aGUgYHRyYWNlSW50ZXJuYWxzYCBleHBlcmltZW50LCB3ZSB3YW50IHRvIHRyYWNlIGV2ZXJ5dGhpbmdcbiAgaWYgKERFQlVHX0JVSUxEICYmIHJlcGxheS5nZXRPcHRpb25zKCkuX2V4cGVyaW1lbnRzLnRyYWNlSW50ZXJuYWxzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBpc1NlbnRyeVJlcXVlc3RVcmwodXJsLCBnZXRDbGllbnQoKSk7XG59XG5cbi8qKiBBZGQgYSBwZXJmb3JtYW5jZSBlbnRyeSBicmVhZGNydW1iICovXG5mdW5jdGlvbiBhZGROZXR3b3JrQnJlYWRjcnVtYihyZXBsYXksIHJlc3VsdCkge1xuICBpZiAoIXJlcGxheS5pc0VuYWJsZWQoKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzaG91bGRGaWx0ZXJSZXF1ZXN0KHJlcGxheSwgcmVzdWx0Lm5hbWUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlcGxheS5hZGRVcGRhdGUoKCkgPT4ge1xuICAgIGNyZWF0ZVBlcmZvcm1hbmNlU3BhbnMocmVwbGF5LCBbcmVzdWx0XSk7XG4gICAgLy8gUmV0dXJuaW5nIHRydWUgd2lsbCBjYXVzZSBgYWRkVXBkYXRlYCB0byBub3QgZmx1c2hcbiAgICAvLyBXZSBkbyBub3Qgd2FudCBuZXR3b3JrIHJlcXVlc3RzIHRvIGNhdXNlIGEgZmx1c2guIFRoaXMgd2lsbCBwcmV2ZW50XG4gICAgLy8gcmVjdXJyaW5nL3BvbGxpbmcgcmVxdWVzdHMgZnJvbSBrZWVwaW5nIHRoZSByZXBsYXkgc2Vzc2lvbiBhbGl2ZS5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG59XG5cbi8qKiBHZXQgdGhlIHNpemUgb2YgYSBib2R5LiAqL1xuZnVuY3Rpb24gZ2V0Qm9keVNpemUoYm9keSkge1xuICBpZiAoIWJvZHkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHRleHRFbmNvZGVyLmVuY29kZShib2R5KS5sZW5ndGg7XG4gICAgfVxuICAgIGlmIChib2R5IGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zKSB7XG4gICAgICByZXR1cm4gdGV4dEVuY29kZXIuZW5jb2RlKGJvZHkudG9TdHJpbmcoKSkubGVuZ3RoO1xuICAgIH1cbiAgICBpZiAoYm9keSBpbnN0YW5jZW9mIEZvcm1EYXRhKSB7XG4gICAgICBjb25zdCBmb3JtRGF0YVN0ciA9IHNlcmlhbGl6ZUZvcm1EYXRhKGJvZHkpO1xuICAgICAgcmV0dXJuIHRleHRFbmNvZGVyLmVuY29kZShmb3JtRGF0YVN0cikubGVuZ3RoO1xuICAgIH1cbiAgICBpZiAoYm9keSBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgIHJldHVybiBib2R5LnNpemU7XG4gICAgfVxuICAgIGlmIChib2R5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBib2R5LmJ5dGVMZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gQ3VycmVudGx5IHVuaGFuZGxlZCB0eXBlczogQXJyYXlCdWZmZXJWaWV3LCBSZWFkYWJsZVN0cmVhbVxuICB9IGNhdGNoIHtcbiAgICAvLyBqdXN0IHJldHVybiB1bmRlZmluZWRcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4vKiogQ29udmVydCBhIENvbnRlbnQtTGVuZ3RoIGhlYWRlciB0byBudW1iZXIvdW5kZWZpbmVkLiAgKi9cbmZ1bmN0aW9uIHBhcnNlQ29udGVudExlbmd0aEhlYWRlcihoZWFkZXIpIHtcbiAgaWYgKCFoZWFkZXIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGNvbnN0IHNpemUgPSBwYXJzZUludChoZWFkZXIsIDEwKTtcbiAgcmV0dXJuIGlzTmFOKHNpemUpID8gdW5kZWZpbmVkIDogc2l6ZTtcbn1cblxuLyoqIE1lcmdlIGEgd2FybmluZyBpbnRvIGFuIGV4aXN0aW5nIG5ldHdvcmsgcmVxdWVzdC9yZXNwb25zZS4gKi9cbmZ1bmN0aW9uIG1lcmdlV2FybmluZyhpbmZvLCB3YXJuaW5nKSB7XG4gIGlmICghaW5mbykge1xuICAgIHJldHVybiB7XG4gICAgICBoZWFkZXJzOiB7fSxcbiAgICAgIHNpemU6IHVuZGVmaW5lZCxcbiAgICAgIF9tZXRhOiB7XG4gICAgICAgIHdhcm5pbmdzOiBbd2FybmluZ11cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGNvbnN0IG5ld01ldGEgPSB7XG4gICAgLi4uaW5mby5fbWV0YVxuICB9O1xuICBjb25zdCBleGlzdGluZ1dhcm5pbmdzID0gbmV3TWV0YS53YXJuaW5ncyB8fCBbXTtcbiAgbmV3TWV0YS53YXJuaW5ncyA9IFsuLi5leGlzdGluZ1dhcm5pbmdzLCB3YXJuaW5nXTtcbiAgaW5mby5fbWV0YSA9IG5ld01ldGE7XG4gIHJldHVybiBpbmZvO1xufVxuXG4vKiogQ29udmVydCBSZXBsYXlOZXR3b3JrUmVxdWVzdERhdGEgdG8gYSBQZXJmb3JtYW5jZUVudHJ5LiAqL1xuZnVuY3Rpb24gbWFrZU5ldHdvcmtSZXBsYXlCcmVhZGNydW1iKHR5cGUsIGRhdGEpIHtcbiAgaWYgKCFkYXRhKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3Qge1xuICAgIHN0YXJ0VGltZXN0YW1wLFxuICAgIGVuZFRpbWVzdGFtcCxcbiAgICB1cmwsXG4gICAgbWV0aG9kLFxuICAgIHN0YXR1c0NvZGUsXG4gICAgcmVxdWVzdCxcbiAgICByZXNwb25zZVxuICB9ID0gZGF0YTtcbiAgY29uc3QgcmVzdWx0ID0ge1xuICAgIHR5cGUsXG4gICAgc3RhcnQ6IHN0YXJ0VGltZXN0YW1wIC8gMTAwMCxcbiAgICBlbmQ6IGVuZFRpbWVzdGFtcCAvIDEwMDAsXG4gICAgbmFtZTogdXJsLFxuICAgIGRhdGE6IHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIHN0YXR1c0NvZGUsXG4gICAgICByZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICB9XG4gIH07XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKiBCdWlsZCB0aGUgcmVxdWVzdCBvciByZXNwb25zZSBwYXJ0IG9mIGEgcmVwbGF5IG5ldHdvcmsgYnJlYWRjcnVtYiB0aGF0IHdhcyBza2lwcGVkLiAqL1xuZnVuY3Rpb24gYnVpbGRTa2lwcGVkTmV0d29ya1JlcXVlc3RPclJlc3BvbnNlKGJvZHlTaXplKSB7XG4gIHJldHVybiB7XG4gICAgaGVhZGVyczoge30sXG4gICAgc2l6ZTogYm9keVNpemUsXG4gICAgX21ldGE6IHtcbiAgICAgIHdhcm5pbmdzOiBbJ1VSTF9TS0lQUEVEJ11cbiAgICB9XG4gIH07XG59XG5cbi8qKiBCdWlsZCB0aGUgcmVxdWVzdCBvciByZXNwb25zZSBwYXJ0IG9mIGEgcmVwbGF5IG5ldHdvcmsgYnJlYWRjcnVtYi4gKi9cbmZ1bmN0aW9uIGJ1aWxkTmV0d29ya1JlcXVlc3RPclJlc3BvbnNlKGhlYWRlcnMsIGJvZHlTaXplLCBib2R5KSB7XG4gIGlmICghYm9keVNpemUgJiYgT2JqZWN0LmtleXMoaGVhZGVycykubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWJvZHlTaXplKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhlYWRlcnNcbiAgICB9O1xuICB9XG4gIGlmICghYm9keSkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWFkZXJzLFxuICAgICAgc2l6ZTogYm9keVNpemVcbiAgICB9O1xuICB9XG4gIGNvbnN0IGluZm8gPSB7XG4gICAgaGVhZGVycyxcbiAgICBzaXplOiBib2R5U2l6ZVxuICB9O1xuICBjb25zdCB7XG4gICAgYm9keTogbm9ybWFsaXplZEJvZHksXG4gICAgd2FybmluZ3NcbiAgfSA9IG5vcm1hbGl6ZU5ldHdvcmtCb2R5KGJvZHkpO1xuICBpbmZvLmJvZHkgPSBub3JtYWxpemVkQm9keTtcbiAgaWYgKHdhcm5pbmdzPy5sZW5ndGgpIHtcbiAgICBpbmZvLl9tZXRhID0ge1xuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIHJldHVybiBpbmZvO1xufVxuXG4vKiogRmlsdGVyIGEgc2V0IG9mIGhlYWRlcnMgKi9cbmZ1bmN0aW9uIGdldEFsbG93ZWRIZWFkZXJzKGhlYWRlcnMsIGFsbG93ZWRIZWFkZXJzKSB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhoZWFkZXJzKS5yZWR1Y2UoKGZpbHRlcmVkSGVhZGVycywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIEF2b2lkIHB1dHRpbmcgZW1wdHkgc3RyaW5ncyBpbnRvIHRoZSBoZWFkZXJzXG4gICAgaWYgKGFsbG93ZWRIZWFkZXJzLmluY2x1ZGVzKG5vcm1hbGl6ZWRLZXkpICYmIGhlYWRlcnNba2V5XSkge1xuICAgICAgZmlsdGVyZWRIZWFkZXJzW25vcm1hbGl6ZWRLZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmaWx0ZXJlZEhlYWRlcnM7XG4gIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZU5ldHdvcmtCb2R5KGJvZHkpIHtcbiAgaWYgKCFib2R5IHx8IHR5cGVvZiBib2R5ICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB7XG4gICAgICBib2R5XG4gICAgfTtcbiAgfVxuICBjb25zdCBleGNlZWRzU2l6ZUxpbWl0ID0gYm9keS5sZW5ndGggPiBORVRXT1JLX0JPRFlfTUFYX1NJWkU7XG4gIGNvbnN0IGlzUHJvYmFibHlKc29uID0gX3N0cklzUHJvYmFibHlKc29uKGJvZHkpO1xuICBpZiAoZXhjZWVkc1NpemVMaW1pdCkge1xuICAgIGNvbnN0IHRydW5jYXRlZEJvZHkgPSBib2R5LnNsaWNlKDAsIE5FVFdPUktfQk9EWV9NQVhfU0laRSk7XG4gICAgaWYgKGlzUHJvYmFibHlKc29uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBib2R5OiB0cnVuY2F0ZWRCb2R5LFxuICAgICAgICB3YXJuaW5nczogWydNQVlCRV9KU09OX1RSVU5DQVRFRCddXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYm9keTogYCR7dHJ1bmNhdGVkQm9keX3igKZgLFxuICAgICAgd2FybmluZ3M6IFsnVEVYVF9UUlVOQ0FURUQnXVxuICAgIH07XG4gIH1cbiAgaWYgKGlzUHJvYmFibHlKc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGpzb25Cb2R5ID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJvZHk6IGpzb25Cb2R5XG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gZmFsbCBiYWNrIHRvIGp1c3Qgc2VuZCB0aGUgYm9keSBhcyBzdHJpbmdcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBib2R5XG4gIH07XG59XG5mdW5jdGlvbiBfc3RySXNQcm9iYWJseUpzb24oc3RyKSB7XG4gIGNvbnN0IGZpcnN0ID0gc3RyWzBdO1xuICBjb25zdCBsYXN0ID0gc3RyW3N0ci5sZW5ndGggLSAxXTtcblxuICAvLyBTaW1wbGUgY2hlY2s6IElmIHRoaXMgZG9lcyBub3Qgc3RhcnQgJiBlbmQgd2l0aCB7fSBvciBbXSwgaXQncyBub3QgSlNPTlxuICByZXR1cm4gZmlyc3QgPT09ICdbJyAmJiBsYXN0ID09PSAnXScgfHwgZmlyc3QgPT09ICd7JyAmJiBsYXN0ID09PSAnfSc7XG59XG5cbi8qKiBNYXRjaCBhbiBVUkwgYWdhaW5zdCBhIGxpc3Qgb2Ygc3RyaW5ncy9SZWdleC4gKi9cbmZ1bmN0aW9uIHVybE1hdGNoZXModXJsLCB1cmxzKSB7XG4gIGNvbnN0IGZ1bGxVcmwgPSBnZXRGdWxsVXJsKHVybCk7XG4gIHJldHVybiBzdHJpbmdNYXRjaGVzU29tZVBhdHRlcm4oZnVsbFVybCwgdXJscyk7XG59XG5cbi8qKiBleHBvcnRlZCBmb3IgdGVzdHMgKi9cbmZ1bmN0aW9uIGdldEZ1bGxVcmwodXJsLCBiYXNlVVJJID0gV0lORE9XLmRvY3VtZW50LmJhc2VVUkkpIHtcbiAgLy8gU2hvcnQgY2lyY3VpdCBmb3IgY29tbW9uIGNhc2VzOlxuICBpZiAodXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSB8fCB1cmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSB8fCB1cmwuc3RhcnRzV2l0aChXSU5ET1cubG9jYXRpb24ub3JpZ2luKSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgY29uc3QgZml4ZWRVcmwgPSBuZXcgVVJMKHVybCwgYmFzZVVSSSk7XG5cbiAgLy8gSWYgdGhlc2UgZG8gbm90IG1hdGNoLCB3ZSBhcmUgbm90IGRlYWxpbmcgd2l0aCBhIHJlbGF0aXZlIFVSTCwgc28ganVzdCByZXR1cm4gaXRcbiAgaWYgKGZpeGVkVXJsLm9yaWdpbiAhPT0gbmV3IFVSTChiYXNlVVJJKS5vcmlnaW4pIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIGNvbnN0IGZ1bGxVcmwgPSBmaXhlZFVybC5ocmVmO1xuXG4gIC8vIFJlbW92ZSB0cmFpbGluZyBzbGFzaGVzLCBpZiB0aGV5IGRvbid0IG1hdGNoIHRoZSBvcmlnaW5hbCBVUkxcbiAgaWYgKCF1cmwuZW5kc1dpdGgoJy8nKSAmJiBmdWxsVXJsLmVuZHNXaXRoKCcvJykpIHtcbiAgICByZXR1cm4gZnVsbFVybC5zbGljZSgwLCAtMSk7XG4gIH1cbiAgcmV0dXJuIGZ1bGxVcmw7XG59XG5cbi8qKlxuICogQ2FwdHVyZSBhIGZldGNoIGJyZWFkY3J1bWIgdG8gYSByZXBsYXkuXG4gKiBUaGlzIGFkZHMgYWRkaXRpb25hbCBkYXRhICh3aGVyZSBhcHByb3ByaWF0ZSkuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNhcHR1cmVGZXRjaEJyZWFkY3J1bWJUb1JlcGxheShicmVhZGNydW1iLCBoaW50LCBvcHRpb25zKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IF9wcmVwYXJlRmV0Y2hEYXRhKGJyZWFkY3J1bWIsIGhpbnQsIG9wdGlvbnMpO1xuXG4gICAgLy8gQ3JlYXRlIGEgcmVwbGF5IHBlcmZvcm1hbmNlIGVudHJ5IGZyb20gdGhpcyBicmVhZGNydW1iXG4gICAgY29uc3QgcmVzdWx0ID0gbWFrZU5ldHdvcmtSZXBsYXlCcmVhZGNydW1iKCdyZXNvdXJjZS5mZXRjaCcsIGRhdGEpO1xuICAgIGFkZE5ldHdvcmtCcmVhZGNydW1iKG9wdGlvbnMucmVwbGF5LCByZXN1bHQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5leGNlcHRpb24oZXJyb3IsICdGYWlsZWQgdG8gY2FwdHVyZSBmZXRjaCBicmVhZGNydW1iJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbnJpY2ggYSBicmVhZGNydW1iIHdpdGggYWRkaXRpb25hbCBkYXRhLlxuICogVGhpcyBoYXMgdG8gYmUgc3luYyAmIG11dGF0ZSB0aGUgZ2l2ZW4gYnJlYWRjcnVtYixcbiAqIGFzIHRoZSBicmVhZGNydW1iIGlzIGFmdGVyd2FyZHMgY29uc3VtZWQgYnkgb3RoZXIgaGFuZGxlcnMuXG4gKi9cbmZ1bmN0aW9uIGVucmljaEZldGNoQnJlYWRjcnVtYihicmVhZGNydW1iLCBoaW50KSB7XG4gIGNvbnN0IHtcbiAgICBpbnB1dCxcbiAgICByZXNwb25zZVxuICB9ID0gaGludDtcbiAgY29uc3QgYm9keSA9IGlucHV0ID8gZ2V0RmV0Y2hSZXF1ZXN0QXJnQm9keShpbnB1dCkgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IHJlcVNpemUgPSBnZXRCb2R5U2l6ZShib2R5KTtcbiAgY29uc3QgcmVzU2l6ZSA9IHJlc3BvbnNlID8gcGFyc2VDb250ZW50TGVuZ3RoSGVhZGVyKHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LWxlbmd0aCcpKSA6IHVuZGVmaW5lZDtcbiAgaWYgKHJlcVNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgIGJyZWFkY3J1bWIuZGF0YS5yZXF1ZXN0X2JvZHlfc2l6ZSA9IHJlcVNpemU7XG4gIH1cbiAgaWYgKHJlc1NpemUgIT09IHVuZGVmaW5lZCkge1xuICAgIGJyZWFkY3J1bWIuZGF0YS5yZXNwb25zZV9ib2R5X3NpemUgPSByZXNTaXplO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBfcHJlcGFyZUZldGNoRGF0YShicmVhZGNydW1iLCBoaW50LCBvcHRpb25zKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIGNvbnN0IHtcbiAgICBzdGFydFRpbWVzdGFtcCA9IG5vdyxcbiAgICBlbmRUaW1lc3RhbXAgPSBub3dcbiAgfSA9IGhpbnQ7XG4gIGNvbnN0IHtcbiAgICB1cmwsXG4gICAgbWV0aG9kLFxuICAgIHN0YXR1c19jb2RlOiBzdGF0dXNDb2RlID0gMCxcbiAgICByZXF1ZXN0X2JvZHlfc2l6ZTogcmVxdWVzdEJvZHlTaXplLFxuICAgIHJlc3BvbnNlX2JvZHlfc2l6ZTogcmVzcG9uc2VCb2R5U2l6ZVxuICB9ID0gYnJlYWRjcnVtYi5kYXRhO1xuICBjb25zdCBjYXB0dXJlRGV0YWlscyA9IHVybE1hdGNoZXModXJsLCBvcHRpb25zLm5ldHdvcmtEZXRhaWxBbGxvd1VybHMpICYmICF1cmxNYXRjaGVzKHVybCwgb3B0aW9ucy5uZXR3b3JrRGV0YWlsRGVueVVybHMpO1xuICBjb25zdCByZXF1ZXN0ID0gY2FwdHVyZURldGFpbHMgPyBfZ2V0UmVxdWVzdEluZm8ob3B0aW9ucywgaGludC5pbnB1dCwgcmVxdWVzdEJvZHlTaXplKSA6IGJ1aWxkU2tpcHBlZE5ldHdvcmtSZXF1ZXN0T3JSZXNwb25zZShyZXF1ZXN0Qm9keVNpemUpO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9nZXRSZXNwb25zZUluZm8oY2FwdHVyZURldGFpbHMsIG9wdGlvbnMsIGhpbnQucmVzcG9uc2UsIHJlc3BvbnNlQm9keVNpemUpO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0VGltZXN0YW1wLFxuICAgIGVuZFRpbWVzdGFtcCxcbiAgICB1cmwsXG4gICAgbWV0aG9kLFxuICAgIHN0YXR1c0NvZGUsXG4gICAgcmVxdWVzdCxcbiAgICByZXNwb25zZVxuICB9O1xufVxuZnVuY3Rpb24gX2dldFJlcXVlc3RJbmZvKHtcbiAgbmV0d29ya0NhcHR1cmVCb2RpZXMsXG4gIG5ldHdvcmtSZXF1ZXN0SGVhZGVyc1xufSwgaW5wdXQsIHJlcXVlc3RCb2R5U2l6ZSkge1xuICBjb25zdCBoZWFkZXJzID0gaW5wdXQgPyBnZXRSZXF1ZXN0SGVhZGVycyhpbnB1dCwgbmV0d29ya1JlcXVlc3RIZWFkZXJzKSA6IHt9O1xuICBpZiAoIW5ldHdvcmtDYXB0dXJlQm9kaWVzKSB7XG4gICAgcmV0dXJuIGJ1aWxkTmV0d29ya1JlcXVlc3RPclJlc3BvbnNlKGhlYWRlcnMsIHJlcXVlc3RCb2R5U2l6ZSwgdW5kZWZpbmVkKTtcbiAgfVxuXG4gIC8vIFdlIG9ubHkgd2FudCB0byB0cmFuc21pdCBzdHJpbmcgb3Igc3RyaW5nLWxpa2UgYm9kaWVzXG4gIGNvbnN0IHJlcXVlc3RCb2R5ID0gZ2V0RmV0Y2hSZXF1ZXN0QXJnQm9keShpbnB1dCk7XG4gIGNvbnN0IFtib2R5U3RyLCB3YXJuaW5nXSA9IGdldEJvZHlTdHJpbmcocmVxdWVzdEJvZHksIGxvZ2dlcik7XG4gIGNvbnN0IGRhdGEgPSBidWlsZE5ldHdvcmtSZXF1ZXN0T3JSZXNwb25zZShoZWFkZXJzLCByZXF1ZXN0Qm9keVNpemUsIGJvZHlTdHIpO1xuICBpZiAod2FybmluZykge1xuICAgIHJldHVybiBtZXJnZVdhcm5pbmcoZGF0YSwgd2FybmluZyk7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8qKiBFeHBvcnRlZCBvbmx5IGZvciB0ZXN0cy4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9nZXRSZXNwb25zZUluZm8oY2FwdHVyZURldGFpbHMsIHtcbiAgbmV0d29ya0NhcHR1cmVCb2RpZXMsXG4gIG5ldHdvcmtSZXNwb25zZUhlYWRlcnNcbn0sIHJlc3BvbnNlLCByZXNwb25zZUJvZHlTaXplKSB7XG4gIGlmICghY2FwdHVyZURldGFpbHMgJiYgcmVzcG9uc2VCb2R5U2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGJ1aWxkU2tpcHBlZE5ldHdvcmtSZXF1ZXN0T3JSZXNwb25zZShyZXNwb25zZUJvZHlTaXplKTtcbiAgfVxuICBjb25zdCBoZWFkZXJzID0gcmVzcG9uc2UgPyBnZXRBbGxIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMsIG5ldHdvcmtSZXNwb25zZUhlYWRlcnMpIDoge307XG4gIGlmICghcmVzcG9uc2UgfHwgIW5ldHdvcmtDYXB0dXJlQm9kaWVzICYmIHJlc3BvbnNlQm9keVNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBidWlsZE5ldHdvcmtSZXF1ZXN0T3JSZXNwb25zZShoZWFkZXJzLCByZXNwb25zZUJvZHlTaXplLCB1bmRlZmluZWQpO1xuICB9XG4gIGNvbnN0IFtib2R5VGV4dCwgd2FybmluZ10gPSBhd2FpdCBfcGFyc2VGZXRjaFJlc3BvbnNlQm9keShyZXNwb25zZSk7XG4gIGNvbnN0IHJlc3VsdCA9IGdldFJlc3BvbnNlRGF0YShib2R5VGV4dCwge1xuICAgIG5ldHdvcmtDYXB0dXJlQm9kaWVzLFxuICAgIHJlc3BvbnNlQm9keVNpemUsXG4gICAgY2FwdHVyZURldGFpbHMsXG4gICAgaGVhZGVyc1xuICB9KTtcbiAgaWYgKHdhcm5pbmcpIHtcbiAgICByZXR1cm4gbWVyZ2VXYXJuaW5nKHJlc3VsdCwgd2FybmluZyk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGdldFJlc3BvbnNlRGF0YShib2R5VGV4dCwge1xuICBuZXR3b3JrQ2FwdHVyZUJvZGllcyxcbiAgcmVzcG9uc2VCb2R5U2l6ZSxcbiAgY2FwdHVyZURldGFpbHMsXG4gIGhlYWRlcnNcbn0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzaXplID0gYm9keVRleHQ/Lmxlbmd0aCAmJiByZXNwb25zZUJvZHlTaXplID09PSB1bmRlZmluZWQgPyBnZXRCb2R5U2l6ZShib2R5VGV4dCkgOiByZXNwb25zZUJvZHlTaXplO1xuICAgIGlmICghY2FwdHVyZURldGFpbHMpIHtcbiAgICAgIHJldHVybiBidWlsZFNraXBwZWROZXR3b3JrUmVxdWVzdE9yUmVzcG9uc2Uoc2l6ZSk7XG4gICAgfVxuICAgIGlmIChuZXR3b3JrQ2FwdHVyZUJvZGllcykge1xuICAgICAgcmV0dXJuIGJ1aWxkTmV0d29ya1JlcXVlc3RPclJlc3BvbnNlKGhlYWRlcnMsIHNpemUsIGJvZHlUZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1aWxkTmV0d29ya1JlcXVlc3RPclJlc3BvbnNlKGhlYWRlcnMsIHNpemUsIHVuZGVmaW5lZCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlcnJvciwgJ0ZhaWxlZCB0byBzZXJpYWxpemUgcmVzcG9uc2UgYm9keScpO1xuICAgIC8vIGZhbGxiYWNrXG4gICAgcmV0dXJuIGJ1aWxkTmV0d29ya1JlcXVlc3RPclJlc3BvbnNlKGhlYWRlcnMsIHJlc3BvbnNlQm9keVNpemUsIHVuZGVmaW5lZCk7XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIF9wYXJzZUZldGNoUmVzcG9uc2VCb2R5KHJlc3BvbnNlKSB7XG4gIGNvbnN0IHJlcyA9IF90cnlDbG9uZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgaWYgKCFyZXMpIHtcbiAgICByZXR1cm4gW3VuZGVmaW5lZCwgJ0JPRFlfUEFSU0VfRVJST1InXTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHRleHQgPSBhd2FpdCBfdHJ5R2V0UmVzcG9uc2VUZXh0KHJlcyk7XG4gICAgcmV0dXJuIFt0ZXh0XTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluZGV4T2YoJ1RpbWVvdXQnKSA+IC0xKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIud2FybignUGFyc2luZyB0ZXh0IGJvZHkgZnJvbSByZXNwb25zZSB0aW1lZCBvdXQnKTtcbiAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAnQk9EWV9QQVJTRV9USU1FT1VUJ107XG4gICAgfVxuICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5leGNlcHRpb24oZXJyb3IsICdGYWlsZWQgdG8gZ2V0IHRleHQgYm9keSBmcm9tIHJlc3BvbnNlJyk7XG4gICAgcmV0dXJuIFt1bmRlZmluZWQsICdCT0RZX1BBUlNFX0VSUk9SJ107XG4gIH1cbn1cbmZ1bmN0aW9uIGdldEFsbEhlYWRlcnMoaGVhZGVycywgYWxsb3dlZEhlYWRlcnMpIHtcbiAgY29uc3QgYWxsSGVhZGVycyA9IHt9O1xuICBhbGxvd2VkSGVhZGVycy5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgaWYgKGhlYWRlcnMuZ2V0KGhlYWRlcikpIHtcbiAgICAgIGFsbEhlYWRlcnNbaGVhZGVyXSA9IGhlYWRlcnMuZ2V0KGhlYWRlcik7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGFsbEhlYWRlcnM7XG59XG5mdW5jdGlvbiBnZXRSZXF1ZXN0SGVhZGVycyhmZXRjaEFyZ3MsIGFsbG93ZWRIZWFkZXJzKSB7XG4gIGlmIChmZXRjaEFyZ3MubGVuZ3RoID09PSAxICYmIHR5cGVvZiBmZXRjaEFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGdldEhlYWRlcnNGcm9tT3B0aW9ucyhmZXRjaEFyZ3NbMF0sIGFsbG93ZWRIZWFkZXJzKTtcbiAgfVxuICBpZiAoZmV0Y2hBcmdzLmxlbmd0aCA9PT0gMikge1xuICAgIHJldHVybiBnZXRIZWFkZXJzRnJvbU9wdGlvbnMoZmV0Y2hBcmdzWzFdLCBhbGxvd2VkSGVhZGVycyk7XG4gIH1cbiAgcmV0dXJuIHt9O1xufVxuZnVuY3Rpb24gZ2V0SGVhZGVyc0Zyb21PcHRpb25zKGlucHV0LCBhbGxvd2VkSGVhZGVycykge1xuICBpZiAoIWlucHV0KSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGNvbnN0IGhlYWRlcnMgPSBpbnB1dC5oZWFkZXJzO1xuICBpZiAoIWhlYWRlcnMpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgcmV0dXJuIGdldEFsbEhlYWRlcnMoaGVhZGVycywgYWxsb3dlZEhlYWRlcnMpO1xuICB9XG5cbiAgLy8gV2UgZG8gbm90IHN1cHBvcnQgdGhpcywgYXMgaXQgaXMgbm90IHJlYWxseSBkb2N1bWVudGVkIChhbnltb3JlPylcbiAgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgcmV0dXJuIGdldEFsbG93ZWRIZWFkZXJzKGhlYWRlcnMsIGFsbG93ZWRIZWFkZXJzKTtcbn1cbmZ1bmN0aW9uIF90cnlDbG9uZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgLy8gV2UgaGF2ZSB0byBjbG9uZSB0aGlzLCBhcyB0aGUgYm9keSBjYW4gb25seSBiZSByZWFkIG9uY2VcbiAgICByZXR1cm4gcmVzcG9uc2UuY2xvbmUoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyB0aGlzIGNhbiB0aHJvdyBpZiB0aGUgcmVzcG9uc2Ugd2FzIGFscmVhZHkgY29uc3VtZWQgYmVmb3JlXG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlcnJvciwgJ0ZhaWxlZCB0byBjbG9uZSByZXNwb25zZSBib2R5Jyk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgdGhlIHJlc3BvbnNlIGJvZHkgb2YgYSBmZXRjaCByZXF1ZXN0LCBvciB0aW1lb3V0IGFmdGVyIDUwMG1zLlxuICogRmV0Y2ggY2FuIHJldHVybiBhIHN0cmVhbWluZyBib2R5LCB0aGF0IG1heSBub3QgcmVzb2x2ZSAob3Igbm90IGZvciBhIGxvbmcgdGltZSkuXG4gKiBJZiB0aGF0IGhhcHBlbnMsIHdlIHJhdGhlciBhYm9ydCBhZnRlciBhIHNob3J0IHRpbWUgdGhhbiBrZWVwIHdhaXRpbmcgZm9yIHRoaXMuXG4gKi9cbmZ1bmN0aW9uIF90cnlHZXRSZXNwb25zZVRleHQocmVzcG9uc2UpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCQzKCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ1RpbWVvdXQgd2hpbGUgdHJ5aW5nIHRvIHJlYWQgcmVzcG9uc2UgYm9keScpKSwgNTAwKTtcbiAgICBfZ2V0UmVzcG9uc2VUZXh0KHJlc3BvbnNlKS50aGVuKHR4dCA9PiByZXNvbHZlKHR4dCksIHJlYXNvbiA9PiByZWplY3QocmVhc29uKSkuZmluYWxseSgoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dCkpO1xuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIF9nZXRSZXNwb25zZVRleHQocmVzcG9uc2UpIHtcbiAgLy8gRm9yY2UgdGhpcyB0byBiZSBhIHByb21pc2UsIGp1c3QgdG8gYmUgc2FmZVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmV0dXJuLWF3YWl0XG4gIHJldHVybiBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG59XG5cbi8qKlxuICogQ2FwdHVyZSBhbiBYSFIgYnJlYWRjcnVtYiB0byBhIHJlcGxheS5cbiAqIFRoaXMgYWRkcyBhZGRpdGlvbmFsIGRhdGEgKHdoZXJlIGFwcHJvcHJpYXRlKS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2FwdHVyZVhockJyZWFkY3J1bWJUb1JlcGxheShicmVhZGNydW1iLCBoaW50LCBvcHRpb25zKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGF0YSA9IF9wcmVwYXJlWGhyRGF0YShicmVhZGNydW1iLCBoaW50LCBvcHRpb25zKTtcblxuICAgIC8vIENyZWF0ZSBhIHJlcGxheSBwZXJmb3JtYW5jZSBlbnRyeSBmcm9tIHRoaXMgYnJlYWRjcnVtYlxuICAgIGNvbnN0IHJlc3VsdCA9IG1ha2VOZXR3b3JrUmVwbGF5QnJlYWRjcnVtYigncmVzb3VyY2UueGhyJywgZGF0YSk7XG4gICAgYWRkTmV0d29ya0JyZWFkY3J1bWIob3B0aW9ucy5yZXBsYXksIHJlc3VsdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlcnJvciwgJ0ZhaWxlZCB0byBjYXB0dXJlIHhociBicmVhZGNydW1iJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbnJpY2ggYSBicmVhZGNydW1iIHdpdGggYWRkaXRpb25hbCBkYXRhLlxuICogVGhpcyBoYXMgdG8gYmUgc3luYyAmIG11dGF0ZSB0aGUgZ2l2ZW4gYnJlYWRjcnVtYixcbiAqIGFzIHRoZSBicmVhZGNydW1iIGlzIGFmdGVyd2FyZHMgY29uc3VtZWQgYnkgb3RoZXIgaGFuZGxlcnMuXG4gKi9cbmZ1bmN0aW9uIGVucmljaFhockJyZWFkY3J1bWIoYnJlYWRjcnVtYiwgaGludCkge1xuICBjb25zdCB7XG4gICAgeGhyLFxuICAgIGlucHV0XG4gIH0gPSBoaW50O1xuICBpZiAoIXhocikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCByZXFTaXplID0gZ2V0Qm9keVNpemUoaW5wdXQpO1xuICBjb25zdCByZXNTaXplID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdjb250ZW50LWxlbmd0aCcpID8gcGFyc2VDb250ZW50TGVuZ3RoSGVhZGVyKHhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC1sZW5ndGgnKSkgOiBfZ2V0Qm9keVNpemUoeGhyLnJlc3BvbnNlLCB4aHIucmVzcG9uc2VUeXBlKTtcbiAgaWYgKHJlcVNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgIGJyZWFkY3J1bWIuZGF0YS5yZXF1ZXN0X2JvZHlfc2l6ZSA9IHJlcVNpemU7XG4gIH1cbiAgaWYgKHJlc1NpemUgIT09IHVuZGVmaW5lZCkge1xuICAgIGJyZWFkY3J1bWIuZGF0YS5yZXNwb25zZV9ib2R5X3NpemUgPSByZXNTaXplO1xuICB9XG59XG5mdW5jdGlvbiBfcHJlcGFyZVhockRhdGEoYnJlYWRjcnVtYiwgaGludCwgb3B0aW9ucykge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBjb25zdCB7XG4gICAgc3RhcnRUaW1lc3RhbXAgPSBub3csXG4gICAgZW5kVGltZXN0YW1wID0gbm93LFxuICAgIGlucHV0LFxuICAgIHhoclxuICB9ID0gaGludDtcbiAgY29uc3Qge1xuICAgIHVybCxcbiAgICBtZXRob2QsXG4gICAgc3RhdHVzX2NvZGU6IHN0YXR1c0NvZGUgPSAwLFxuICAgIHJlcXVlc3RfYm9keV9zaXplOiByZXF1ZXN0Qm9keVNpemUsXG4gICAgcmVzcG9uc2VfYm9keV9zaXplOiByZXNwb25zZUJvZHlTaXplXG4gIH0gPSBicmVhZGNydW1iLmRhdGE7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCF4aHIgfHwgIXVybE1hdGNoZXModXJsLCBvcHRpb25zLm5ldHdvcmtEZXRhaWxBbGxvd1VybHMpIHx8IHVybE1hdGNoZXModXJsLCBvcHRpb25zLm5ldHdvcmtEZXRhaWxEZW55VXJscykpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYnVpbGRTa2lwcGVkTmV0d29ya1JlcXVlc3RPclJlc3BvbnNlKHJlcXVlc3RCb2R5U2l6ZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBidWlsZFNraXBwZWROZXR3b3JrUmVxdWVzdE9yUmVzcG9uc2UocmVzcG9uc2VCb2R5U2l6ZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0VGltZXN0YW1wLFxuICAgICAgZW5kVGltZXN0YW1wLFxuICAgICAgdXJsLFxuICAgICAgbWV0aG9kLFxuICAgICAgc3RhdHVzQ29kZSxcbiAgICAgIHJlcXVlc3QsXG4gICAgICByZXNwb25zZVxuICAgIH07XG4gIH1cblxuICAvLyAtLS0tIFRoaXMgYWRkaXRpb25hbCBuZXR3b3JrIGRhdGEgYmVsb3cgaXMgb25seSBjYXB0dXJlZCBmb3IgVVJMcyBkZWZpbmVkIGluIGBuZXR3b3JrRGV0YWlsQWxsb3dVcmxzYCAtLS0tXG5cbiAgY29uc3QgeGhySW5mbyA9IHhocltTRU5UUllfWEhSX0RBVEFfS0VZXTtcbiAgY29uc3QgbmV0d29ya1JlcXVlc3RIZWFkZXJzID0geGhySW5mbyA/IGdldEFsbG93ZWRIZWFkZXJzKHhockluZm8ucmVxdWVzdF9oZWFkZXJzLCBvcHRpb25zLm5ldHdvcmtSZXF1ZXN0SGVhZGVycykgOiB7fTtcbiAgY29uc3QgbmV0d29ya1Jlc3BvbnNlSGVhZGVycyA9IGdldEFsbG93ZWRIZWFkZXJzKGdldFJlc3BvbnNlSGVhZGVycyh4aHIpLCBvcHRpb25zLm5ldHdvcmtSZXNwb25zZUhlYWRlcnMpO1xuICBjb25zdCBbcmVxdWVzdEJvZHksIHJlcXVlc3RXYXJuaW5nXSA9IG9wdGlvbnMubmV0d29ya0NhcHR1cmVCb2RpZXMgPyBnZXRCb2R5U3RyaW5nKGlucHV0LCBsb2dnZXIpIDogW3VuZGVmaW5lZF07XG4gIGNvbnN0IFtyZXNwb25zZUJvZHksIHJlc3BvbnNlV2FybmluZ10gPSBvcHRpb25zLm5ldHdvcmtDYXB0dXJlQm9kaWVzID8gX2dldFhoclJlc3BvbnNlQm9keSh4aHIpIDogW3VuZGVmaW5lZF07XG4gIGNvbnN0IHJlcXVlc3QgPSBidWlsZE5ldHdvcmtSZXF1ZXN0T3JSZXNwb25zZShuZXR3b3JrUmVxdWVzdEhlYWRlcnMsIHJlcXVlc3RCb2R5U2l6ZSwgcmVxdWVzdEJvZHkpO1xuICBjb25zdCByZXNwb25zZSA9IGJ1aWxkTmV0d29ya1JlcXVlc3RPclJlc3BvbnNlKG5ldHdvcmtSZXNwb25zZUhlYWRlcnMsIHJlc3BvbnNlQm9keVNpemUsIHJlc3BvbnNlQm9keSk7XG4gIHJldHVybiB7XG4gICAgc3RhcnRUaW1lc3RhbXAsXG4gICAgZW5kVGltZXN0YW1wLFxuICAgIHVybCxcbiAgICBtZXRob2QsXG4gICAgc3RhdHVzQ29kZSxcbiAgICByZXF1ZXN0OiByZXF1ZXN0V2FybmluZyA/IG1lcmdlV2FybmluZyhyZXF1ZXN0LCByZXF1ZXN0V2FybmluZykgOiByZXF1ZXN0LFxuICAgIHJlc3BvbnNlOiByZXNwb25zZVdhcm5pbmcgPyBtZXJnZVdhcm5pbmcocmVzcG9uc2UsIHJlc3BvbnNlV2FybmluZykgOiByZXNwb25zZVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0UmVzcG9uc2VIZWFkZXJzKHhocikge1xuICBjb25zdCBoZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO1xuICBpZiAoIWhlYWRlcnMpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgcmV0dXJuIGhlYWRlcnMuc3BsaXQoJ1xcclxcbicpLnJlZHVjZSgoYWNjLCBsaW5lKSA9PiB7XG4gICAgY29uc3QgW2tleSwgdmFsdWVdID0gbGluZS5zcGxpdCgnOiAnKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGFjY1trZXkudG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuZnVuY3Rpb24gX2dldFhoclJlc3BvbnNlQm9keSh4aHIpIHtcbiAgLy8gV2UgY29sbGVjdCBlcnJvcnMgdGhhdCBoYXBwZW4sIGJ1dCBvbmx5IGxvZyB0aGVtIGlmIHdlIGNhbid0IGdldCBhbnkgcmVzcG9uc2UgYm9keVxuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gW3hoci5yZXNwb25zZVRleHRdO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3JzLnB1c2goZSk7XG4gIH1cblxuICAvLyBUcnkgdG8gbWFudWFsbHkgcGFyc2UgdGhlIHJlc3BvbnNlIGJvZHksIGlmIHJlc3BvbnNlVGV4dCBmYWlsc1xuICB0cnkge1xuICAgIHJldHVybiBfcGFyc2VYaHJSZXNwb25zZSh4aHIucmVzcG9uc2UsIHhoci5yZXNwb25zZVR5cGUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3JzLnB1c2goZSk7XG4gIH1cbiAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBnZXQgeGhyIHJlc3BvbnNlIGJvZHknLCAuLi5lcnJvcnMpO1xuICByZXR1cm4gW3VuZGVmaW5lZF07XG59XG5cbi8qKlxuICogR2V0IHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFhIUiByZXNwb25zZS5cbiAqIEJhc2VkIG9uIE1ETiwgdGhlc2UgYXJlIHRoZSBwb3NzaWJsZSB0eXBlcyBvZiB0aGUgcmVzcG9uc2U6XG4gKiBzdHJpbmdcbiAqIEFycmF5QnVmZmVyXG4gKiBCbG9iXG4gKiBEb2N1bWVudFxuICogUE9KT1xuICpcbiAqIEV4cG9ydGVkIG9ubHkgZm9yIHRlc3RzLlxuICovXG5mdW5jdGlvbiBfcGFyc2VYaHJSZXNwb25zZShib2R5LCByZXNwb25zZVR5cGUpIHtcbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gW2JvZHldO1xuICAgIH1cbiAgICBpZiAoYm9keSBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICByZXR1cm4gW2JvZHkuYm9keS5vdXRlckhUTUxdO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2VUeXBlID09PSAnanNvbicgJiYgYm9keSAmJiB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBbSlNPTi5zdHJpbmdpZnkoYm9keSldO1xuICAgIH1cbiAgICBpZiAoIWJvZHkpIHtcbiAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlcnJvciwgJ0ZhaWxlZCB0byBzZXJpYWxpemUgYm9keScsIGJvZHkpO1xuICAgIHJldHVybiBbdW5kZWZpbmVkLCAnQk9EWV9QQVJTRV9FUlJPUiddO1xuICB9XG4gIERFQlVHX0JVSUxEICYmIGxvZ2dlci5pbmZvKCdTa2lwcGluZyBuZXR3b3JrIGJvZHkgYmVjYXVzZSBvZiBib2R5IHR5cGUnLCBib2R5KTtcbiAgcmV0dXJuIFt1bmRlZmluZWQsICdVTlBBUlNFQUJMRV9CT0RZX1RZUEUnXTtcbn1cbmZ1bmN0aW9uIF9nZXRCb2R5U2l6ZShib2R5LCByZXNwb25zZVR5cGUpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5U3RyID0gcmVzcG9uc2VUeXBlID09PSAnanNvbicgJiYgYm9keSAmJiB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgPyBKU09OLnN0cmluZ2lmeShib2R5KSA6IGJvZHk7XG4gICAgcmV0dXJuIGdldEJvZHlTaXplKGJvZHlTdHIpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgZG9lcyB0d28gdGhpbmdzOlxuICogLSBJdCBlbnJpY2hlcyB0aGUgcmVndWxhciBYSFIvZmV0Y2ggYnJlYWRjcnVtYnMgd2l0aCByZXF1ZXN0L3Jlc3BvbnNlIHNpemUgZGF0YVxuICogLSBJdCBjYXB0dXJlcyB0aGUgWEhSL2ZldGNoIGJyZWFkY3J1bWJzIHRvIHRoZSByZXBsYXlcbiAqICAgKGVucmljaGluZyBpdCB3aXRoIGZ1cnRoZXIgZGF0YSB0aGF0IGlzIF9ub3RfIGFkZGVkIHRvIHRoZSByZWd1bGFyIGJyZWFkY3J1bWJzKVxuICovXG5mdW5jdGlvbiBoYW5kbGVOZXR3b3JrQnJlYWRjcnVtYnMocmVwbGF5KSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICB0cnkge1xuICAgIGNvbnN0IHtcbiAgICAgIG5ldHdvcmtEZXRhaWxBbGxvd1VybHMsXG4gICAgICBuZXR3b3JrRGV0YWlsRGVueVVybHMsXG4gICAgICBuZXR3b3JrQ2FwdHVyZUJvZGllcyxcbiAgICAgIG5ldHdvcmtSZXF1ZXN0SGVhZGVycyxcbiAgICAgIG5ldHdvcmtSZXNwb25zZUhlYWRlcnNcbiAgICB9ID0gcmVwbGF5LmdldE9wdGlvbnMoKTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgcmVwbGF5LFxuICAgICAgbmV0d29ya0RldGFpbEFsbG93VXJscyxcbiAgICAgIG5ldHdvcmtEZXRhaWxEZW55VXJscyxcbiAgICAgIG5ldHdvcmtDYXB0dXJlQm9kaWVzLFxuICAgICAgbmV0d29ya1JlcXVlc3RIZWFkZXJzLFxuICAgICAgbmV0d29ya1Jlc3BvbnNlSGVhZGVyc1xuICAgIH07XG4gICAgaWYgKGNsaWVudCkge1xuICAgICAgY2xpZW50Lm9uKCdiZWZvcmVBZGRCcmVhZGNydW1iJywgKGJyZWFkY3J1bWIsIGhpbnQpID0+IGJlZm9yZUFkZE5ldHdvcmtCcmVhZGNydW1iKG9wdGlvbnMsIGJyZWFkY3J1bWIsIGhpbnQpKTtcbiAgICB9XG4gIH0gY2F0Y2gge1xuICAgIC8vIERvIG5vdGhpbmdcbiAgfVxufVxuXG4vKioganVzdCBleHBvcnRlZCBmb3IgdGVzdHMgKi9cbmZ1bmN0aW9uIGJlZm9yZUFkZE5ldHdvcmtCcmVhZGNydW1iKG9wdGlvbnMsIGJyZWFkY3J1bWIsIGhpbnQpIHtcbiAgaWYgKCFicmVhZGNydW1iLmRhdGEpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAoX2lzWGhyQnJlYWRjcnVtYihicmVhZGNydW1iKSAmJiBfaXNYaHJIaW50KGhpbnQpKSB7XG4gICAgICAvLyBUaGlzIGhhcyB0byBiZSBzeW5jLCBhcyB3ZSBuZWVkIHRvIGVuc3VyZSB0aGUgYnJlYWRjcnVtYiBpcyBlbnJpY2hlZCBpbiB0aGUgc2FtZSB0aWNrXG4gICAgICAvLyBCZWNhdXNlIHRoZSBob29rIHJ1bnMgc3luY2hyb25vdXNseSwgYW5kIHRoZSBicmVhZGNydW1iIGlzIGFmdGVyd2FyZHMgcGFzc2VkIG9uXG4gICAgICAvLyBTbyBhbnkgYXN5bmMgbXV0YXRpb25zIHRvIGl0IHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgZmluYWwgYnJlYWRjcnVtYlxuICAgICAgZW5yaWNoWGhyQnJlYWRjcnVtYihicmVhZGNydW1iLCBoaW50KTtcblxuICAgICAgLy8gVGhpcyBjYWxsIHNob3VsZCBub3QgcmVqZWN0XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICBjYXB0dXJlWGhyQnJlYWRjcnVtYlRvUmVwbGF5KGJyZWFkY3J1bWIsIGhpbnQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoX2lzRmV0Y2hCcmVhZGNydW1iKGJyZWFkY3J1bWIpICYmIF9pc0ZldGNoSGludChoaW50KSkge1xuICAgICAgLy8gVGhpcyBoYXMgdG8gYmUgc3luYywgYXMgd2UgbmVlZCB0byBlbnN1cmUgdGhlIGJyZWFkY3J1bWIgaXMgZW5yaWNoZWQgaW4gdGhlIHNhbWUgdGlja1xuICAgICAgLy8gQmVjYXVzZSB0aGUgaG9vayBydW5zIHN5bmNocm9ub3VzbHksIGFuZCB0aGUgYnJlYWRjcnVtYiBpcyBhZnRlcndhcmRzIHBhc3NlZCBvblxuICAgICAgLy8gU28gYW55IGFzeW5jIG11dGF0aW9ucyB0byBpdCB3aWxsIG5vdCBiZSByZWZsZWN0ZWQgaW4gdGhlIGZpbmFsIGJyZWFkY3J1bWJcbiAgICAgIGVucmljaEZldGNoQnJlYWRjcnVtYihicmVhZGNydW1iLCBoaW50KTtcblxuICAgICAgLy8gVGhpcyBjYWxsIHNob3VsZCBub3QgcmVqZWN0XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICBjYXB0dXJlRmV0Y2hCcmVhZGNydW1iVG9SZXBsYXkoYnJlYWRjcnVtYiwgaGludCwgb3B0aW9ucyk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlLCAnRXJyb3Igd2hlbiBlbnJpY2hpbmcgbmV0d29yayBicmVhZGNydW1iJyk7XG4gIH1cbn1cbmZ1bmN0aW9uIF9pc1hockJyZWFkY3J1bWIoYnJlYWRjcnVtYikge1xuICByZXR1cm4gYnJlYWRjcnVtYi5jYXRlZ29yeSA9PT0gJ3hocic7XG59XG5mdW5jdGlvbiBfaXNGZXRjaEJyZWFkY3J1bWIoYnJlYWRjcnVtYikge1xuICByZXR1cm4gYnJlYWRjcnVtYi5jYXRlZ29yeSA9PT0gJ2ZldGNoJztcbn1cbmZ1bmN0aW9uIF9pc1hockhpbnQoaGludCkge1xuICByZXR1cm4gaGludD8ueGhyO1xufVxuZnVuY3Rpb24gX2lzRmV0Y2hIaW50KGhpbnQpIHtcbiAgcmV0dXJuIGhpbnQ/LnJlc3BvbnNlO1xufVxuXG4vKipcbiAqIEFkZCBnbG9iYWwgbGlzdGVuZXJzIHRoYXQgY2Fubm90IGJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIGFkZEdsb2JhbExpc3RlbmVycyhyZXBsYXksIHtcbiAgYXV0b0ZsdXNoT25GZWVkYmFja1xufSkge1xuICAvLyBMaXN0ZW5lcnMgZnJvbSBjb3JlIFNESyAvL1xuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgYWRkQ2xpY2tLZXlwcmVzc0luc3RydW1lbnRhdGlvbkhhbmRsZXIoaGFuZGxlRG9tTGlzdGVuZXIocmVwbGF5KSk7XG4gIGFkZEhpc3RvcnlJbnN0cnVtZW50YXRpb25IYW5kbGVyKGhhbmRsZUhpc3RvcnlTcGFuTGlzdGVuZXIocmVwbGF5KSk7XG4gIGhhbmRsZUJyZWFkY3J1bWJzKHJlcGxheSk7XG4gIGhhbmRsZU5ldHdvcmtCcmVhZGNydW1icyhyZXBsYXkpO1xuXG4gIC8vIFRhZyBhbGwgKG5vbiByZXBsYXkpIGV2ZW50cyB0aGF0IGdldCBzZW50IHRvIFNlbnRyeSB3aXRoIHRoZSBjdXJyZW50XG4gIC8vIHJlcGxheSBJRCBzbyB0aGF0IHdlIGNhbiByZWZlcmVuY2UgdGhlbSBsYXRlciBpbiB0aGUgVUlcbiAgY29uc3QgZXZlbnRQcm9jZXNzb3IgPSBoYW5kbGVHbG9iYWxFdmVudExpc3RlbmVyKHJlcGxheSk7XG4gIGFkZEV2ZW50UHJvY2Vzc29yKGV2ZW50UHJvY2Vzc29yKTtcblxuICAvLyBJZiBhIGN1c3RvbSBjbGllbnQgaGFzIG5vIGhvb2tzIHlldCwgd2UgY29udGludWUgdG8gdXNlIHRoZSBcIm9sZFwiIGltcGxlbWVudGF0aW9uXG4gIGlmIChjbGllbnQpIHtcbiAgICBjbGllbnQub24oJ2JlZm9yZVNlbmRFdmVudCcsIGhhbmRsZUJlZm9yZVNlbmRFdmVudChyZXBsYXkpKTtcbiAgICBjbGllbnQub24oJ2FmdGVyU2VuZEV2ZW50JywgaGFuZGxlQWZ0ZXJTZW5kRXZlbnQocmVwbGF5KSk7XG4gICAgY2xpZW50Lm9uKCdjcmVhdGVEc2MnLCBkc2MgPT4ge1xuICAgICAgY29uc3QgcmVwbGF5SWQgPSByZXBsYXkuZ2V0U2Vzc2lvbklkKCk7XG4gICAgICAvLyBXZSBkbyBub3Qgd2FudCB0byBzZXQgdGhlIERTQyB3aGVuIGluIGJ1ZmZlciBtb2RlLCBhcyB0aGF0IG1lYW5zIHRoZSByZXBsYXkgaGFzIG5vdCBiZWVuIHNlbnQgKHlldClcbiAgICAgIGlmIChyZXBsYXlJZCAmJiByZXBsYXkuaXNFbmFibGVkKCkgJiYgcmVwbGF5LnJlY29yZGluZ01vZGUgPT09ICdzZXNzaW9uJykge1xuICAgICAgICAvLyBFbnN1cmUgdG8gY2hlY2sgdGhhdCB0aGUgc2Vzc2lvbiBpcyBzdGlsbCBhY3RpdmUgLSBpdCBjb3VsZCBoYXZlIGV4cGlyZWQgaW4gdGhlIG1lYW53aGlsZVxuICAgICAgICBjb25zdCBpc1Nlc3Npb25BY3RpdmUgPSByZXBsYXkuY2hlY2tBbmRIYW5kbGVFeHBpcmVkU2Vzc2lvbigpO1xuICAgICAgICBpZiAoaXNTZXNzaW9uQWN0aXZlKSB7XG4gICAgICAgICAgZHNjLnJlcGxheV9pZCA9IHJlcGxheUlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgY2xpZW50Lm9uKCdzcGFuU3RhcnQnLCBzcGFuID0+IHtcbiAgICAgIHJlcGxheS5sYXN0QWN0aXZlU3BhbiA9IHNwYW47XG4gICAgfSk7XG5cbiAgICAvLyBXZSBtYXkgYmUgbWlzc2luZyB0aGUgaW5pdGlhbCBzcGFuU3RhcnQgZHVlIHRvIHRpbWluZyBpc3N1ZXMsXG4gICAgLy8gc28gd2UgY2FwdHVyZSBpdCBvbiBmaW5pc2ggYWdhaW4uXG4gICAgY2xpZW50Lm9uKCdzcGFuRW5kJywgc3BhbiA9PiB7XG4gICAgICByZXBsYXkubGFzdEFjdGl2ZVNwYW4gPSBzcGFuO1xuICAgIH0pO1xuXG4gICAgLy8gV2Ugd2FudCB0byBhdHRhY2ggdGhlIHJlcGxheSBpZCB0byB0aGUgZmVlZGJhY2sgZXZlbnRcbiAgICBjbGllbnQub24oJ2JlZm9yZVNlbmRGZWVkYmFjaycsIGFzeW5jIChmZWVkYmFja0V2ZW50LCBvcHRpb25zKSA9PiB7XG4gICAgICBjb25zdCByZXBsYXlJZCA9IHJlcGxheS5nZXRTZXNzaW9uSWQoKTtcbiAgICAgIGlmIChvcHRpb25zPy5pbmNsdWRlUmVwbGF5ICYmIHJlcGxheS5pc0VuYWJsZWQoKSAmJiByZXBsYXlJZCAmJiBmZWVkYmFja0V2ZW50LmNvbnRleHRzPy5mZWVkYmFjaykge1xuICAgICAgICAvLyBJbiBjYXNlIHRoZSBmZWVkYmFjayBpcyBzZW50IHZpYSBBUEkgYW5kIG5vdCB0aHJvdWdoIG91ciB3aWRnZXQsIHdlIHdhbnQgdG8gZmx1c2ggcmVwbGF5XG4gICAgICAgIGlmIChmZWVkYmFja0V2ZW50LmNvbnRleHRzLmZlZWRiYWNrLnNvdXJjZSA9PT0gJ2FwaScgJiYgYXV0b0ZsdXNoT25GZWVkYmFjaykge1xuICAgICAgICAgIGF3YWl0IHJlcGxheS5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgICAgIGZlZWRiYWNrRXZlbnQuY29udGV4dHMuZmVlZGJhY2sucmVwbGF5X2lkID0gcmVwbGF5SWQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGF1dG9GbHVzaE9uRmVlZGJhY2spIHtcbiAgICAgIGNsaWVudC5vbignb3BlbkZlZWRiYWNrV2lkZ2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXBsYXkuZmx1c2goKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIFwic3BhblwiIGZvciB0aGUgdG90YWwgYW1vdW50IG9mIG1lbW9yeSBiZWluZyB1c2VkIGJ5IEpTIG9iamVjdHNcbiAqIChpbmNsdWRpbmcgdjggaW50ZXJuYWwgb2JqZWN0cykuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGFkZE1lbW9yeUVudHJ5KHJlcGxheSkge1xuICAvLyB3aW5kb3cucGVyZm9ybWFuY2UubWVtb3J5IGlzIGEgbm9uLXN0YW5kYXJkIEFQSSBhbmQgZG9lc24ndCB3b3JrIG9uIGFsbCBicm93c2Vycywgc28gd2UgdHJ5LWNhdGNoIHRoaXNcbiAgdHJ5IHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoY3JlYXRlUGVyZm9ybWFuY2VTcGFucyhyZXBsYXksIFtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIG1lbW9yeSBkb2Vzbid0IGV4aXN0IG9uIHR5cGUgUGVyZm9ybWFuY2UgYXMgdGhlIEFQSSBpcyBub24tc3RhbmRhcmQgKHdlIGNoZWNrIHRoYXQgaXQgZXhpc3RzIGFib3ZlKVxuICAgIGNyZWF0ZU1lbW9yeUVudHJ5KFdJTkRPVy5wZXJmb3JtYW5jZS5tZW1vcnkpXSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIERvIG5vdGhpbmdcbiAgICByZXR1cm4gW107XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUVudHJ5KG1lbW9yeUVudHJ5KSB7XG4gIGNvbnN0IHtcbiAgICBqc0hlYXBTaXplTGltaXQsXG4gICAgdG90YWxKU0hlYXBTaXplLFxuICAgIHVzZWRKU0hlYXBTaXplXG4gIH0gPSBtZW1vcnlFbnRyeTtcbiAgLy8gd2UgZG9uJ3Qgd2FudCB0byB1c2UgYGdldEFic29sdXRlVGltZWAgYmVjYXVzZSBpdCBhZGRzIHRoZSBldmVudCB0aW1lIHRvIHRoZVxuICAvLyB0aW1lIG9yaWdpbiwgc28gd2UgZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBpbnN0ZWFkXG4gIGNvbnN0IHRpbWUgPSBEYXRlLm5vdygpIC8gMTAwMDtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnbWVtb3J5JyxcbiAgICBuYW1lOiAnbWVtb3J5JyxcbiAgICBzdGFydDogdGltZSxcbiAgICBlbmQ6IHRpbWUsXG4gICAgZGF0YToge1xuICAgICAgbWVtb3J5OiB7XG4gICAgICAgIGpzSGVhcFNpemVMaW1pdCxcbiAgICAgICAgdG90YWxKU0hlYXBTaXplLFxuICAgICAgICB1c2VkSlNIZWFwU2l6ZVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBIZWF2aWx5IHNpbXBsaWZpZWQgZGVib3VuY2UgZnVuY3Rpb24gYmFzZWQgb24gbG9kYXNoLmRlYm91bmNlLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYSBjYWxsYmFjayBmdW5jdGlvbiAoQHBhcmFtIGZ1bikgYW5kIGRlbGF5cyBpdHMgaW52b2NhdGlvblxuICogYnkgQHBhcmFtIHdhaXQgbWlsbGlzZWNvbmRzLiBPcHRpb25hbGx5LCBhIG1heFdhaXQgY2FuIGJlIHNwZWNpZmllZCBpbiBAcGFyYW0gb3B0aW9ucyxcbiAqIHdoaWNoIGVuc3VyZXMgdGhhdCB0aGUgY2FsbGJhY2sgaXMgaW52b2tlZCBhdCBsZWFzdCBvbmNlIGFmdGVyIHRoZSBzcGVjaWZpZWQgbWF4LiB3YWl0IHRpbWUuXG4gKlxuICogQHBhcmFtIGZ1bmMgdGhlIGZ1bmN0aW9uIHdob3NlIGludm9jYXRpb24gaXMgdG8gYmUgZGVib3VuY2VkXG4gKiBAcGFyYW0gd2FpdCB0aGUgbWluaW11bSB0aW1lIHVudGlsIHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIGFmdGVyIGl0IHdhcyBjYWxsZWQgb25jZVxuICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gY29udGFpbiB0aGUgYG1heFdhaXRgIHByb3BlcnR5XG4gKlxuICogQHJldHVybnMgdGhlIGRlYm91bmNlZCB2ZXJzaW9uIG9mIHRoZSBmdW5jdGlvbiwgd2hpY2ggbmVlZHMgdG8gYmUgY2FsbGVkIGF0IGxlYXN0IG9uY2UgdG8gc3RhcnQgdGhlXG4gKiAgICAgICAgICBkZWJvdW5jaW5nIHByb2Nlc3MuIFN1YnNlcXVlbnQgY2FsbHMgd2lsbCByZXNldCB0aGUgZGVib3VuY2luZyB0aW1lciBhbmQsIGluIGNhc2UgQHBhcmFtZnVuY1xuICogICAgICAgICAgd2FzIGFscmVhZHkgaW52b2tlZCBpbiB0aGUgbWVhbnRpbWUsIHJldHVybiBAcGFyYW0gZnVuYydzIHJldHVybiB2YWx1ZS5cbiAqICAgICAgICAgIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gaGFzIHR3byBhZGRpdGlvbmFsIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAtIGBmbHVzaGA6IEludm9rZXMgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiBpbW1lZGlhdGVseSBhbmQgcmV0dXJucyBpdHMgcmV0dXJuIHZhbHVlXG4gKiAgICAgICAgICAtIGBjYW5jZWxgOiBDYW5jZWxzIHRoZSBkZWJvdW5jaW5nIHByb2Nlc3MgYW5kIHJlc2V0cyB0aGUgZGVib3VuY2luZyB0aW1lclxuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHJldHVybiBkZWJvdW5jZSQxKGZ1bmMsIHdhaXQsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBOb3QgcXVpdGUgc3VyZSB3aHkgdGhlc2UgdHlwZXMgZG8gbm90IG1hdGNoLCBidXQgdGhpcyBpcyBmaW5lXG4gICAgc2V0VGltZW91dEltcGw6IHNldFRpbWVvdXQkM1xuICB9KTtcbn1cbmNvbnN0IE5BVklHQVRPUiA9IEdMT0JBTF9PQkoubmF2aWdhdG9yO1xuXG4vKipcbiAqICBEaXNhYmxlIHNhbXBsaW5nIG1vdXNlbW92ZSBldmVudHMgb24gaU9TIGJyb3dzZXJzIGFzIHRoaXMgY2FuIGNhdXNlIGJsb2NraW5nIHRoZSBtYWluIHRocmVhZFxuICogIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzE0NTM0XG4gKi9cbmZ1bmN0aW9uIGdldFJlY29yZGluZ1NhbXBsaW5nT3B0aW9ucygpIHtcbiAgaWYgKC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChOQVZJR0FUT1I/LnVzZXJBZ2VudCA/PyAnJykgfHwgL01hY2ludG9zaC9pLnRlc3QoTkFWSUdBVE9SPy51c2VyQWdlbnQgPz8gJycpICYmIE5BVklHQVRPUj8ubWF4VG91Y2hQb2ludHMgJiYgTkFWSUdBVE9SPy5tYXhUb3VjaFBvaW50cyA+IDEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2FtcGxpbmc6IHtcbiAgICAgICAgbW91c2Vtb3ZlOiBmYWxzZVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHt9O1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIHJlY29yZGluZyBldmVudHMuXG4gKlxuICogQWRkcyB0byBldmVudCBidWZmZXIsIGFuZCBoYXMgdmFyeWluZyBmbHVzaGluZyBiZWhhdmlvcnMgaWYgdGhlIGV2ZW50IHdhcyBhIGNoZWNrb3V0LlxuICovXG5mdW5jdGlvbiBnZXRIYW5kbGVSZWNvcmRpbmdFbWl0KHJlcGxheSkge1xuICBsZXQgaGFkRmlyc3RFdmVudCA9IGZhbHNlO1xuICByZXR1cm4gKGV2ZW50LCBfaXNDaGVja291dCkgPT4ge1xuICAgIC8vIElmIHRoaXMgaXMgZmFsc2UsIGl0IG1lYW5zIHNlc3Npb24gaXMgZXhwaXJlZCwgY3JlYXRlIGFuZCBhIG5ldyBzZXNzaW9uIGFuZCB3YWl0IGZvciBjaGVja291dFxuICAgIGlmICghcmVwbGF5LmNoZWNrQW5kSGFuZGxlRXhwaXJlZFNlc3Npb24oKSkge1xuICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oJ1JlY2VpdmVkIHJlcGxheSBldmVudCBhZnRlciBzZXNzaW9uIGV4cGlyZWQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYF9pc0NoZWNrb3V0YCBpcyBvbmx5IHNldCB3aGVuIHRoZSBjaGVja291dCBpcyBkdWUgdG8gYGNoZWNrb3V0RXZlcnlObXNgXG4gICAgLy8gV2UgYWxzbyB3YW50IHRvIHRyZWF0IHRoZSBmaXJzdCBldmVudCBhcyBhIGNoZWNrb3V0LCBzbyB3ZSBoYW5kbGUgdGhpcyBzcGVjaWZpY2FsbHkgaGVyZVxuICAgIGNvbnN0IGlzQ2hlY2tvdXQgPSBfaXNDaGVja291dCB8fCAhaGFkRmlyc3RFdmVudDtcbiAgICBoYWRGaXJzdEV2ZW50ID0gdHJ1ZTtcbiAgICBpZiAocmVwbGF5LmNsaWNrRGV0ZWN0b3IpIHtcbiAgICAgIHVwZGF0ZUNsaWNrRGV0ZWN0b3JGb3JSZWNvcmRpbmdFdmVudChyZXBsYXkuY2xpY2tEZXRlY3RvciwgZXZlbnQpO1xuICAgIH1cblxuICAgIC8vIFRoZSBoYW5kbGVyIHJldHVybnMgYHRydWVgIGlmIHdlIGRvIG5vdCB3YW50IHRvIHRyaWdnZXIgZGVib3VuY2VkIGZsdXNoLCBgZmFsc2VgIGlmIHdlIHdhbnQgdG8gZGVib3VuY2UgZmx1c2guXG4gICAgcmVwbGF5LmFkZFVwZGF0ZSgoKSA9PiB7XG4gICAgICAvLyBUaGUgc2Vzc2lvbiBpcyBhbHdheXMgc3RhcnRlZCBpbW1lZGlhdGVseSBvbiBwYWdlbG9hZC9pbml0LCBidXQgZm9yXG4gICAgICAvLyBlcnJvci1vbmx5IHJlcGxheXMsIGl0IHNob3VsZCByZWZsZWN0IHRoZSBtb3N0IHJlY2VudCBjaGVja291dFxuICAgICAgLy8gd2hlbiBhbiBlcnJvciBvY2N1cnMuIENsZWFyIGFueSBzdGF0ZSB0aGF0IGhhcHBlbnMgYmVmb3JlIHRoaXMgY3VycmVudFxuICAgICAgLy8gY2hlY2tvdXQuIFRoaXMgbmVlZHMgdG8gaGFwcGVuIGJlZm9yZSBgYWRkRXZlbnQoKWAgd2hpY2ggdXBkYXRlcyBzdGF0ZVxuICAgICAgLy8gZGVwZW5kZW50IG9uIHRoaXMgcmVzZXQuXG4gICAgICBpZiAocmVwbGF5LnJlY29yZGluZ01vZGUgPT09ICdidWZmZXInICYmIGlzQ2hlY2tvdXQpIHtcbiAgICAgICAgcmVwbGF5LnNldEluaXRpYWxTdGF0ZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgZXZlbnQgaXMgbm90IGFkZGVkIChlLmcuIGR1ZSB0byBiZWluZyBwYXVzZWQsIGRpc2FibGVkLCBvciBvdXQgb2YgdGhlIG1heCByZXBsYXkgZHVyYXRpb24pLFxuICAgICAgLy8gU2tpcCBhbGwgZnVydGhlciBzdGVwc1xuICAgICAgaWYgKCFhZGRFdmVudFN5bmMocmVwbGF5LCBldmVudCwgaXNDaGVja291dCkpIHtcbiAgICAgICAgLy8gUmV0dXJuIHRydWUgdG8gc2tpcCBzY2hlZHVsaW5nIGEgZGVib3VuY2VkIGZsdXNoXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBEaWZmZXJlbnQgYmVoYXZpb3IgZm9yIGZ1bGwgc25hcHNob3RzICh0eXBlPTIpLCBpZ25vcmUgb3RoZXIgZXZlbnQgdHlwZXNcbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcnJ3ZWItaW8vcnJ3ZWIvYmxvYi9kOGY5MjkwY2E0OTY3MTJhYTFlN2Q0NzI1NDk0ODBjNGU3ODc2NTk0L3BhY2thZ2VzL3Jyd2ViL3NyYy90eXBlcy50cyNMMTZcbiAgICAgIGlmICghaXNDaGVja291dCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBzZXNzaW9uID0gcmVwbGF5LnNlc3Npb247XG5cbiAgICAgIC8vIEFkZGl0aW9uYWxseSwgY3JlYXRlIGEgbWV0YSBldmVudCB0aGF0IHdpbGwgY2FwdHVyZSBjZXJ0YWluIFNESyBzZXR0aW5ncy5cbiAgICAgIC8vIEluIG9yZGVyIHRvIGhhbmRsZSBidWZmZXIgbW9kZSwgdGhpcyBuZWVkcyB0byBlaXRoZXIgYmUgZG9uZSB3aGVuIHdlXG4gICAgICAvLyByZWNlaXZlIGNoZWNrb3V0IGV2ZW50cyBvciBhdCBmbHVzaCB0aW1lLiBXZSBoYXZlIGFuIGV4cGVyaW1lbnRhbCBtb2RlXG4gICAgICAvLyB0byBwZXJmb3JtIG11bHRpcGxlIGNoZWNrb3V0cyBhIHNlc3Npb24gKHRoZSBpZGVhIGlzIHRvIGltcHJvdmVcbiAgICAgIC8vIHNlZWtpbmcgZHVyaW5nIHBsYXliYWNrKSwgc28gYWxzbyBvbmx5IGluY2x1ZGUgaWYgc2VnbWVudElkIGlzIDBcbiAgICAgIC8vIChoYW5kbGVkIGluIGBhZGRTZXR0aW5nc0V2ZW50YCkuXG4gICAgICAvL1xuICAgICAgLy8gYGlzQ2hlY2tvdXRgIGlzIGFsd2F5cyB0cnVlLCBidXQgd2FudCB0byBiZSBleHBsaWNpdCB0aGF0IGl0IHNob3VsZFxuICAgICAgLy8gb25seSBiZSBhZGRlZCBmb3IgY2hlY2tvdXRzXG4gICAgICBhZGRTZXR0aW5nc0V2ZW50KHJlcGxheSwgaXNDaGVja291dCk7XG5cbiAgICAgIC8vIFdoZW4gaW4gYnVmZmVyIG1vZGUsIG1ha2Ugc3VyZSB3ZSBhZGp1c3QgdGhlIHNlc3Npb24gc3RhcnRlZCBkYXRlIHRvIHRoZSBjdXJyZW50IGVhcmxpZXN0IGV2ZW50IG9mIHRoZSBidWZmZXJcbiAgICAgIC8vIHRoaXMgc2hvdWxkIHVzdWFsbHkgYmUgdGhlIHRpbWVzdGFtcCBvZiB0aGUgY2hlY2tvdXQgZXZlbnQsIGJ1dCB0byBiZSBzYWZlLi4uXG4gICAgICBpZiAocmVwbGF5LnJlY29yZGluZ01vZGUgPT09ICdidWZmZXInICYmIHNlc3Npb24gJiYgcmVwbGF5LmV2ZW50QnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IGVhcmxpZXN0RXZlbnQgPSByZXBsYXkuZXZlbnRCdWZmZXIuZ2V0RWFybGllc3RUaW1lc3RhbXAoKTtcbiAgICAgICAgaWYgKGVhcmxpZXN0RXZlbnQpIHtcbiAgICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuaW5mbyhgVXBkYXRpbmcgc2Vzc2lvbiBzdGFydCB0aW1lIHRvIGVhcmxpZXN0IGV2ZW50IGluIGJ1ZmZlciB0byAke25ldyBEYXRlKGVhcmxpZXN0RXZlbnQpfWApO1xuICAgICAgICAgIHNlc3Npb24uc3RhcnRlZCA9IGVhcmxpZXN0RXZlbnQ7XG4gICAgICAgICAgaWYgKHJlcGxheS5nZXRPcHRpb25zKCkuc3RpY2t5U2Vzc2lvbikge1xuICAgICAgICAgICAgc2F2ZVNlc3Npb24oc2Vzc2lvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGlzIGEgcHJldmlvdXNTZXNzaW9uSWQgYWZ0ZXIgYSBmdWxsIHNuYXBzaG90IG9jY3VycywgdGhlblxuICAgICAgLy8gdGhlIHJlcGxheSBzZXNzaW9uIHdhcyBzdGFydGVkIGR1ZSB0byBzZXNzaW9uIGV4cGlyYXRpb24uIFRoZSBuZXcgc2Vzc2lvblxuICAgICAgLy8gaXMgc3RhcnRlZCBiZWZvcmUgdHJpZ2dlcmluZyBhIG5ldyBjaGVja291dCBhbmQgY29udGFpbnMgdGhlIGlkXG4gICAgICAvLyBvZiB0aGUgcHJldmlvdXMgc2Vzc2lvbi4gRG8gbm90IGltbWVkaWF0ZWx5IGZsdXNoIGluIHRoaXMgY2FzZVxuICAgICAgLy8gdG8gYXZvaWQgY2FwdHVyaW5nIG9ubHkgdGhlIGNoZWNrb3V0IGFuZCBpbnN0ZWFkIHRoZSByZXBsYXkgd2lsbFxuICAgICAgLy8gYmUgY2FwdHVyZWQgaWYgdGhleSBwZXJmb3JtIGFueSBmb2xsb3ctdXAgYWN0aW9ucy5cbiAgICAgIGlmIChzZXNzaW9uPy5wcmV2aW91c1Nlc3Npb25JZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXBsYXkucmVjb3JkaW5nTW9kZSA9PT0gJ3Nlc3Npb24nKSB7XG4gICAgICAgIC8vIElmIHRoZSBmdWxsIHNuYXBzaG90IGlzIGR1ZSB0byBhbiBpbml0aWFsIGxvYWQsIHdlIHdpbGwgbm90IGhhdmVcbiAgICAgICAgLy8gYSBwcmV2aW91cyBzZXNzaW9uIElELiBJbiB0aGlzIGNhc2UsIHdlIHdhbnQgdG8gYnVmZmVyIGV2ZW50c1xuICAgICAgICAvLyBmb3IgYSBzZXQgYW1vdW50IG9mIHRpbWUgYmVmb3JlIGZsdXNoaW5nLiBUaGlzIGNhbiBoZWxwIGF2b2lkXG4gICAgICAgIC8vIGNhcHR1cmluZyByZXBsYXlzIG9mIHVzZXJzIHRoYXQgaW1tZWRpYXRlbHkgY2xvc2UgdGhlIHdpbmRvdy5cblxuICAgICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciByZWplY3RcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB2b2lkIHJlcGxheS5mbHVzaCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogRXhwb3J0ZWQgZm9yIHRlc3RzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNFdmVudChyZXBsYXkpIHtcbiAgY29uc3Qgb3B0aW9ucyA9IHJlcGxheS5nZXRPcHRpb25zKCk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogRXZlbnRUeXBlLkN1c3RvbSxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgZGF0YToge1xuICAgICAgdGFnOiAnb3B0aW9ucycsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIHNob3VsZFJlY29yZENhbnZhczogcmVwbGF5LmlzUmVjb3JkaW5nQ2FudmFzKCksXG4gICAgICAgIHNlc3Npb25TYW1wbGVSYXRlOiBvcHRpb25zLnNlc3Npb25TYW1wbGVSYXRlLFxuICAgICAgICBlcnJvclNhbXBsZVJhdGU6IG9wdGlvbnMuZXJyb3JTYW1wbGVSYXRlLFxuICAgICAgICB1c2VDb21wcmVzc2lvbk9wdGlvbjogb3B0aW9ucy51c2VDb21wcmVzc2lvbixcbiAgICAgICAgYmxvY2tBbGxNZWRpYTogb3B0aW9ucy5ibG9ja0FsbE1lZGlhLFxuICAgICAgICBtYXNrQWxsVGV4dDogb3B0aW9ucy5tYXNrQWxsVGV4dCxcbiAgICAgICAgbWFza0FsbElucHV0czogb3B0aW9ucy5tYXNrQWxsSW5wdXRzLFxuICAgICAgICB1c2VDb21wcmVzc2lvbjogcmVwbGF5LmV2ZW50QnVmZmVyID8gcmVwbGF5LmV2ZW50QnVmZmVyLnR5cGUgPT09ICd3b3JrZXInIDogZmFsc2UsXG4gICAgICAgIG5ldHdvcmtEZXRhaWxIYXNVcmxzOiBvcHRpb25zLm5ldHdvcmtEZXRhaWxBbGxvd1VybHMubGVuZ3RoID4gMCxcbiAgICAgICAgbmV0d29ya0NhcHR1cmVCb2RpZXM6IG9wdGlvbnMubmV0d29ya0NhcHR1cmVCb2RpZXMsXG4gICAgICAgIG5ldHdvcmtSZXF1ZXN0SGFzSGVhZGVyczogb3B0aW9ucy5uZXR3b3JrUmVxdWVzdEhlYWRlcnMubGVuZ3RoID4gMCxcbiAgICAgICAgbmV0d29ya1Jlc3BvbnNlSGFzSGVhZGVyczogb3B0aW9ucy5uZXR3b3JrUmVzcG9uc2VIZWFkZXJzLmxlbmd0aCA+IDBcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQWRkIGEgXCJtZXRhXCIgZXZlbnQgdGhhdCBjb250YWlucyBhIHNpbXBsaWZpZWQgdmlldyBvbiBjdXJyZW50IGNvbmZpZ3VyYXRpb25cbiAqIG9wdGlvbnMuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW5jbHVkZWQgb24gdGhlIGZpcnN0IHNlZ21lbnQgb2YgYSByZWNvcmRpbmcuXG4gKi9cbmZ1bmN0aW9uIGFkZFNldHRpbmdzRXZlbnQocmVwbGF5LCBpc0NoZWNrb3V0KSB7XG4gIC8vIE9ubHkgbmVlZCB0byBhZGQgdGhpcyBldmVudCB3aGVuIHNlbmRpbmcgdGhlIGZpcnN0IHNlZ21lbnRcbiAgaWYgKCFpc0NoZWNrb3V0IHx8ICFyZXBsYXkuc2Vzc2lvbiB8fCByZXBsYXkuc2Vzc2lvbi5zZWdtZW50SWQgIT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWRkRXZlbnRTeW5jKHJlcGxheSwgY3JlYXRlT3B0aW9uc0V2ZW50KHJlcGxheSksIGZhbHNlKTtcbn1cblxuLyoqXG4gKiBWZW5kb3JlZCBpbiBmcm9tIEBzZW50cnktaW50ZXJuYWwvcnJ3ZWIuXG4gKlxuICogVGhpcyBpcyBhIGNvcHkgb2YgdGhlIGZ1bmN0aW9uIGZyb20gcnJ3ZWIsIGl0IGlzIG5vdCBuaWNlbHkgZXhwb3J0ZWQgdGhlcmUuXG4gKi9cbmZ1bmN0aW9uIGNsb3Nlc3RFbGVtZW50T2ZOb2RlKG5vZGUpIHtcbiAgaWYgKCFub2RlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBDYXRjaCBhY2Nlc3MgdG8gbm9kZSBwcm9wZXJ0aWVzIHRvIGF2b2lkIEZpcmVmb3ggXCJwZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yc1xuICB0cnkge1xuICAgIGNvbnN0IGVsID0gbm9kZS5ub2RlVHlwZSA9PT0gbm9kZS5FTEVNRU5UX05PREUgPyBub2RlIDogbm9kZS5wYXJlbnRFbGVtZW50O1xuICAgIHJldHVybiBlbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJlcGxheSBlbnZlbG9wZSByZWFkeSB0byBiZSBzZW50LlxuICogVGhpcyBpbmNsdWRlcyBib3RoIHRoZSByZXBsYXkgZXZlbnQsIGFzIHdlbGwgYXMgdGhlIHJlY29yZGluZyBkYXRhLlxuICovXG5mdW5jdGlvbiBjcmVhdGVSZXBsYXlFbnZlbG9wZShyZXBsYXlFdmVudCwgcmVjb3JkaW5nRGF0YSwgZHNuLCB0dW5uZWwpIHtcbiAgcmV0dXJuIGNyZWF0ZUVudmVsb3BlKGNyZWF0ZUV2ZW50RW52ZWxvcGVIZWFkZXJzKHJlcGxheUV2ZW50LCBnZXRTZGtNZXRhZGF0YUZvckVudmVsb3BlSGVhZGVyKHJlcGxheUV2ZW50KSwgdHVubmVsLCBkc24pLCBbW3tcbiAgICB0eXBlOiAncmVwbGF5X2V2ZW50J1xuICB9LCByZXBsYXlFdmVudF0sIFt7XG4gICAgdHlwZTogJ3JlcGxheV9yZWNvcmRpbmcnLFxuICAgIC8vIElmIHN0cmluZyB0aGVuIHdlIG5lZWQgdG8gZW5jb2RlIHRvIFVURjgsIG90aGVyd2lzZSB3aWxsIGhhdmVcbiAgICAvLyB3cm9uZyBzaXplLiBUZXh0RW5jb2RlciBoYXMgc2ltaWxhciBicm93c2VyIHN1cHBvcnQgdG9cbiAgICAvLyBNdXRhdGlvbk9ic2VydmVyLCBhbHRob3VnaCBpdCBkb2VzIG5vdCBhY2NlcHQgSUUxMS5cbiAgICBsZW5ndGg6IHR5cGVvZiByZWNvcmRpbmdEYXRhID09PSAnc3RyaW5nJyA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShyZWNvcmRpbmdEYXRhKS5sZW5ndGggOiByZWNvcmRpbmdEYXRhLmxlbmd0aFxuICB9LCByZWNvcmRpbmdEYXRhXV0pO1xufVxuXG4vKipcbiAqIFByZXBhcmUgdGhlIHJlY29yZGluZyBkYXRhIHJlYWR5IHRvIGJlIHNlbnQuXG4gKi9cbmZ1bmN0aW9uIHByZXBhcmVSZWNvcmRpbmdEYXRhKHtcbiAgcmVjb3JkaW5nRGF0YSxcbiAgaGVhZGVyc1xufSkge1xuICBsZXQgcGF5bG9hZFdpdGhTZXF1ZW5jZTtcblxuICAvLyBYWFg6IG5ld2xpbmUgaXMgbmVlZGVkIHRvIHNlcGFyYXRlIHNlcXVlbmNlIGlkIGZyb20gZXZlbnRzXG4gIGNvbnN0IHJlcGxheUhlYWRlcnMgPSBgJHtKU09OLnN0cmluZ2lmeShoZWFkZXJzKX1cbmA7XG4gIGlmICh0eXBlb2YgcmVjb3JkaW5nRGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICBwYXlsb2FkV2l0aFNlcXVlbmNlID0gYCR7cmVwbGF5SGVhZGVyc30ke3JlY29yZGluZ0RhdGF9YDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlbmMgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICAvLyBYWFg6IG5ld2xpbmUgaXMgbmVlZGVkIHRvIHNlcGFyYXRlIHNlcXVlbmNlIGlkIGZyb20gZXZlbnRzXG4gICAgY29uc3Qgc2VxdWVuY2UgPSBlbmMuZW5jb2RlKHJlcGxheUhlYWRlcnMpO1xuICAgIC8vIE1lcmdlIHRoZSB0d28gVWludDhBcnJheXNcbiAgICBwYXlsb2FkV2l0aFNlcXVlbmNlID0gbmV3IFVpbnQ4QXJyYXkoc2VxdWVuY2UubGVuZ3RoICsgcmVjb3JkaW5nRGF0YS5sZW5ndGgpO1xuICAgIHBheWxvYWRXaXRoU2VxdWVuY2Uuc2V0KHNlcXVlbmNlKTtcbiAgICBwYXlsb2FkV2l0aFNlcXVlbmNlLnNldChyZWNvcmRpbmdEYXRhLCBzZXF1ZW5jZS5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBwYXlsb2FkV2l0aFNlcXVlbmNlO1xufVxuXG4vKipcbiAqIFByZXBhcmUgYSByZXBsYXkgZXZlbnQgJiBlbnJpY2ggaXQgd2l0aCB0aGUgU0RLIG1ldGFkYXRhLlxuICovXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlUmVwbGF5RXZlbnQoe1xuICBjbGllbnQsXG4gIHNjb3BlLFxuICByZXBsYXlJZDogZXZlbnRfaWQsXG4gIGV2ZW50XG59KSB7XG4gIGNvbnN0IGludGVncmF0aW9ucyA9IHR5cGVvZiBjbGllbnRbJ19pbnRlZ3JhdGlvbnMnXSA9PT0gJ29iamVjdCcgJiYgY2xpZW50WydfaW50ZWdyYXRpb25zJ10gIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoY2xpZW50WydfaW50ZWdyYXRpb25zJ10pID8gT2JqZWN0LmtleXMoY2xpZW50WydfaW50ZWdyYXRpb25zJ10pIDogdW5kZWZpbmVkO1xuICBjb25zdCBldmVudEhpbnQgPSB7XG4gICAgZXZlbnRfaWQsXG4gICAgaW50ZWdyYXRpb25zXG4gIH07XG4gIGNsaWVudC5lbWl0KCdwcmVwcm9jZXNzRXZlbnQnLCBldmVudCwgZXZlbnRIaW50KTtcbiAgY29uc3QgcHJlcGFyZWRFdmVudCA9IGF3YWl0IHByZXBhcmVFdmVudChjbGllbnQuZ2V0T3B0aW9ucygpLCBldmVudCwgZXZlbnRIaW50LCBzY29wZSwgY2xpZW50LCBnZXRJc29sYXRpb25TY29wZSgpKTtcblxuICAvLyBJZiBlLmcuIGEgZ2xvYmFsIGV2ZW50IHByb2Nlc3NvciByZXR1cm5lZCBudWxsXG4gIGlmICghcHJlcGFyZWRFdmVudCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNsaWVudC5lbWl0KCdwb3N0cHJvY2Vzc0V2ZW50JywgcHJlcGFyZWRFdmVudCwgZXZlbnRIaW50KTtcblxuICAvLyBUaGlzIG5vcm1hbGx5IGhhcHBlbnMgaW4gYnJvd3NlciBjbGllbnQgXCJfcHJlcGFyZUV2ZW50XCJcbiAgLy8gYnV0IHNpbmNlIHdlIGRvIG5vdCB1c2UgdGhpcyBwcml2YXRlIG1ldGhvZCBmcm9tIHRoZSBjbGllbnQsIGJ1dCByYXRoZXIgdGhlIHBsYWluIGltcG9ydFxuICAvLyB3ZSBuZWVkIHRvIGRvIHRoaXMgbWFudWFsbHkuXG4gIHByZXBhcmVkRXZlbnQucGxhdGZvcm0gPSBwcmVwYXJlZEV2ZW50LnBsYXRmb3JtIHx8ICdqYXZhc2NyaXB0JztcblxuICAvLyBleHRyYWN0IHRoZSBTREsgbmFtZSBiZWNhdXNlIGBjbGllbnQuX3ByZXBhcmVFdmVudGAgZG9lc24ndCBhZGQgaXQgdG8gdGhlIGV2ZW50XG4gIGNvbnN0IG1ldGFkYXRhID0gY2xpZW50LmdldFNka01ldGFkYXRhKCk7XG4gIGNvbnN0IHtcbiAgICBuYW1lLFxuICAgIHZlcnNpb25cbiAgfSA9IG1ldGFkYXRhPy5zZGsgfHwge307XG4gIHByZXBhcmVkRXZlbnQuc2RrID0ge1xuICAgIC4uLnByZXBhcmVkRXZlbnQuc2RrLFxuICAgIG5hbWU6IG5hbWUgfHwgJ3NlbnRyeS5qYXZhc2NyaXB0LnVua25vd24nLFxuICAgIHZlcnNpb246IHZlcnNpb24gfHwgJzAuMC4wJ1xuICB9O1xuICByZXR1cm4gcHJlcGFyZWRFdmVudDtcbn1cblxuLyoqXG4gKiBTZW5kIHJlcGxheSBhdHRhY2htZW50IHVzaW5nIGBmZXRjaCgpYFxuICovXG5hc3luYyBmdW5jdGlvbiBzZW5kUmVwbGF5UmVxdWVzdCh7XG4gIHJlY29yZGluZ0RhdGEsXG4gIHJlcGxheUlkLFxuICBzZWdtZW50SWQ6IHNlZ21lbnRfaWQsXG4gIGV2ZW50Q29udGV4dCxcbiAgdGltZXN0YW1wLFxuICBzZXNzaW9uXG59KSB7XG4gIGNvbnN0IHByZXBhcmVkUmVjb3JkaW5nRGF0YSA9IHByZXBhcmVSZWNvcmRpbmdEYXRhKHtcbiAgICByZWNvcmRpbmdEYXRhLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIHNlZ21lbnRfaWRcbiAgICB9XG4gIH0pO1xuICBjb25zdCB7XG4gICAgdXJscyxcbiAgICBlcnJvcklkcyxcbiAgICB0cmFjZUlkcyxcbiAgICBpbml0aWFsVGltZXN0YW1wXG4gIH0gPSBldmVudENvbnRleHQ7XG4gIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICBjb25zdCBzY29wZSA9IGdldEN1cnJlbnRTY29wZSgpO1xuICBjb25zdCB0cmFuc3BvcnQgPSBjbGllbnQ/LmdldFRyYW5zcG9ydCgpO1xuICBjb25zdCBkc24gPSBjbGllbnQ/LmdldERzbigpO1xuICBpZiAoIWNsaWVudCB8fCAhdHJhbnNwb3J0IHx8ICFkc24gfHwgIXNlc3Npb24uc2FtcGxlZCkge1xuICAgIHJldHVybiByZXNvbHZlZFN5bmNQcm9taXNlKHt9KTtcbiAgfVxuICBjb25zdCBiYXNlRXZlbnQgPSB7XG4gICAgdHlwZTogUkVQTEFZX0VWRU5UX05BTUUsXG4gICAgcmVwbGF5X3N0YXJ0X3RpbWVzdGFtcDogaW5pdGlhbFRpbWVzdGFtcCAvIDEwMDAsXG4gICAgdGltZXN0YW1wOiB0aW1lc3RhbXAgLyAxMDAwLFxuICAgIGVycm9yX2lkczogZXJyb3JJZHMsXG4gICAgdHJhY2VfaWRzOiB0cmFjZUlkcyxcbiAgICB1cmxzLFxuICAgIHJlcGxheV9pZDogcmVwbGF5SWQsXG4gICAgc2VnbWVudF9pZCxcbiAgICByZXBsYXlfdHlwZTogc2Vzc2lvbi5zYW1wbGVkXG4gIH07XG4gIGNvbnN0IHJlcGxheUV2ZW50ID0gYXdhaXQgcHJlcGFyZVJlcGxheUV2ZW50KHtcbiAgICBzY29wZSxcbiAgICBjbGllbnQsXG4gICAgcmVwbGF5SWQsXG4gICAgZXZlbnQ6IGJhc2VFdmVudFxuICB9KTtcbiAgaWYgKCFyZXBsYXlFdmVudCkge1xuICAgIC8vIFRha2VuIGZyb20gYmFzZWNsaWVudCdzIGBfcHJvY2Vzc0V2ZW50YCBtZXRob2QsIHdoZXJlIHRoaXMgaXMgaGFuZGxlZCBmb3IgZXJyb3JzL3RyYW5zYWN0aW9uc1xuICAgIGNsaWVudC5yZWNvcmREcm9wcGVkRXZlbnQoJ2V2ZW50X3Byb2Nlc3NvcicsICdyZXBsYXknKTtcbiAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuaW5mbygnQW4gZXZlbnQgcHJvY2Vzc29yIHJldHVybmVkIGBudWxsYCwgd2lsbCBub3Qgc2VuZCBldmVudC4nKTtcbiAgICByZXR1cm4gcmVzb2x2ZWRTeW5jUHJvbWlzZSh7fSk7XG4gIH1cblxuICAvKlxuICBGb3IgcmVmZXJlbmNlLCB0aGUgZnVsbHkgYnVpbHQgZXZlbnQgbG9va3Mgc29tZXRoaW5nIGxpa2UgdGhpczpcbiAge1xuICAgICAgXCJ0eXBlXCI6IFwicmVwbGF5X2V2ZW50XCIsXG4gICAgICBcInRpbWVzdGFtcFwiOiAxNjcwODM3MDA4LjYzNCxcbiAgICAgIFwiZXJyb3JfaWRzXCI6IFtcbiAgICAgICAgICBcImVycm9ySWRcIlxuICAgICAgXSxcbiAgICAgIFwidHJhY2VfaWRzXCI6IFtcbiAgICAgICAgICBcInRyYWNlSWRcIlxuICAgICAgXSxcbiAgICAgIFwidXJsc1wiOiBbXG4gICAgICAgICAgXCJodHRwczovL2V4YW1wbGUuY29tXCJcbiAgICAgIF0sXG4gICAgICBcInJlcGxheV9pZFwiOiBcImV2ZW50SWRcIixcbiAgICAgIFwic2VnbWVudF9pZFwiOiAzLFxuICAgICAgXCJyZXBsYXlfdHlwZVwiOiBcImVycm9yXCIsXG4gICAgICBcInBsYXRmb3JtXCI6IFwiamF2YXNjcmlwdFwiLFxuICAgICAgXCJldmVudF9pZFwiOiBcImV2ZW50SWRcIixcbiAgICAgIFwiZW52aXJvbm1lbnRcIjogXCJwcm9kdWN0aW9uXCIsXG4gICAgICBcInNka1wiOiB7XG4gICAgICAgICAgXCJpbnRlZ3JhdGlvbnNcIjogW1xuICAgICAgICAgICAgICBcIkJyb3dzZXJUcmFjaW5nXCIsXG4gICAgICAgICAgICAgIFwiUmVwbGF5XCJcbiAgICAgICAgICBdLFxuICAgICAgICAgIFwibmFtZVwiOiBcInNlbnRyeS5qYXZhc2NyaXB0LmJyb3dzZXJcIixcbiAgICAgICAgICBcInZlcnNpb25cIjogXCI3LjI1LjBcIlxuICAgICAgfSxcbiAgICAgIFwic2RrUHJvY2Vzc2luZ01ldGFkYXRhXCI6IHt9LFxuICAgICAgXCJjb250ZXh0c1wiOiB7XG4gICAgICB9LFxuICB9XG4gICovXG5cbiAgLy8gUHJldmVudCB0aGlzIGRhdGEgKHdoaWNoLCBpZiBpdCBleGlzdHMsIHdhcyB1c2VkIGluIGVhcmxpZXIgc3RlcHMgaW4gdGhlIHByb2Nlc3NpbmcgcGlwZWxpbmUpIGZyb20gYmVpbmcgc2VudCB0b1xuICAvLyBzZW50cnkuIChOb3RlOiBPdXIgdXNlIG9mIHRoaXMgcHJvcGVydHkgY29tZXMgYW5kIGdvZXMgd2l0aCB3aGF0ZXZlciB3ZSBtaWdodCBiZSBkZWJ1Z2dpbmcsIHdoYXRldmVyIGhhY2tzIHdlIG1heVxuICAvLyBoYXZlIHRlbXBvcmFyaWx5IGFkZGVkLCBldGMuIEV2ZW4gaWYgd2UgZG9uJ3QgaGFwcGVuIHRvIGJlIHVzaW5nIGl0IGF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZSwgbGV0J3Mgbm90IGdldCByaWRcbiAgLy8gb2YgdGhpcyBgZGVsZXRlYCwgbGVzdCB3ZSBtaXNzIHB1dHRpbmcgaXQgYmFjayBpbiB0aGUgbmV4dCB0aW1lIHRoZSBwcm9wZXJ0eSBpcyBpbiB1c2UuKVxuICBkZWxldGUgcmVwbGF5RXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhO1xuICBjb25zdCBlbnZlbG9wZSA9IGNyZWF0ZVJlcGxheUVudmVsb3BlKHJlcGxheUV2ZW50LCBwcmVwYXJlZFJlY29yZGluZ0RhdGEsIGRzbiwgY2xpZW50LmdldE9wdGlvbnMoKS50dW5uZWwpO1xuICBsZXQgcmVzcG9uc2U7XG4gIHRyeSB7XG4gICAgcmVzcG9uc2UgPSBhd2FpdCB0cmFuc3BvcnQuc2VuZChlbnZlbG9wZSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFVOQUJMRV9UT19TRU5EX1JFUExBWSk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEluIGNhc2UgYnJvd3NlcnMgZG9uJ3QgYWxsb3cgdGhpcyBwcm9wZXJ0eSB0byBiZSB3cml0YWJsZVxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUaGlzIG5lZWRzIGxpYiBlczIwMjIgYW5kIG5ld2VyXG4gICAgICBlcnJvci5jYXVzZSA9IGVycjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cblxuICAvLyBJZiB0aGUgc3RhdHVzIGNvZGUgaXMgaW52YWxpZCwgd2Ugd2FudCB0byBpbW1lZGlhdGVseSBzdG9wICYgbm90IHJldHJ5XG4gIGlmICh0eXBlb2YgcmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gJ251bWJlcicgJiYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSAzMDApKSB7XG4gICAgdGhyb3cgbmV3IFRyYW5zcG9ydFN0YXR1c0NvZGVFcnJvcihyZXNwb25zZS5zdGF0dXNDb2RlKTtcbiAgfVxuICBjb25zdCByYXRlTGltaXRzID0gdXBkYXRlUmF0ZUxpbWl0cyh7fSwgcmVzcG9uc2UpO1xuICBpZiAoaXNSYXRlTGltaXRlZChyYXRlTGltaXRzLCAncmVwbGF5JykpIHtcbiAgICB0aHJvdyBuZXcgUmF0ZUxpbWl0RXJyb3IocmF0ZUxpbWl0cyk7XG4gIH1cbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG4vKipcbiAqIFRoaXMgZXJyb3IgaW5kaWNhdGVzIHRoYXQgdGhlIHRyYW5zcG9ydCByZXR1cm5lZCBhbiBpbnZhbGlkIHN0YXR1cyBjb2RlLlxuICovXG5jbGFzcyBUcmFuc3BvcnRTdGF0dXNDb2RlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHN0YXR1c0NvZGUpIHtcbiAgICBzdXBlcihgVHJhbnNwb3J0IHJldHVybmVkIHN0YXR1cyBjb2RlICR7c3RhdHVzQ29kZX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgZXJyb3IgaW5kaWNhdGVzIHRoYXQgd2UgaGl0IGEgcmF0ZSBsaW1pdCBBUEkgZXJyb3IuXG4gKi9cbmNsYXNzIFJhdGVMaW1pdEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyYXRlTGltaXRzKSB7XG4gICAgc3VwZXIoJ1JhdGUgbGltaXQgaGl0Jyk7XG4gICAgdGhpcy5yYXRlTGltaXRzID0gcmF0ZUxpbWl0cztcbiAgfVxufVxuXG4vKipcbiAqIEZpbmFsaXplIGFuZCBzZW5kIHRoZSBjdXJyZW50IHJlcGxheSBldmVudCB0byBTZW50cnlcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2VuZFJlcGxheShyZXBsYXlEYXRhLCByZXRyeUNvbmZpZyA9IHtcbiAgY291bnQ6IDAsXG4gIGludGVydmFsOiBSRVRSWV9CQVNFX0lOVEVSVkFMXG59KSB7XG4gIGNvbnN0IHtcbiAgICByZWNvcmRpbmdEYXRhLFxuICAgIG9uRXJyb3JcbiAgfSA9IHJlcGxheURhdGE7XG5cbiAgLy8gc2hvcnQgY2lyY3VpdCBpZiB0aGVyZSdzIG5vIGV2ZW50cyB0byB1cGxvYWQgKHRoaXMgc2hvdWxkbid0IGhhcHBlbiBhcyBfcnVuRmx1c2ggbWFrZXMgdGhpcyBjaGVjaylcbiAgaWYgKCFyZWNvcmRpbmdEYXRhLmxlbmd0aCkge1xuICAgIHJldHVybjtcbiAgfVxuICB0cnkge1xuICAgIGF3YWl0IHNlbmRSZXBsYXlSZXF1ZXN0KHJlcGxheURhdGEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgVHJhbnNwb3J0U3RhdHVzQ29kZUVycm9yIHx8IGVyciBpbnN0YW5jZW9mIFJhdGVMaW1pdEVycm9yKSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgLy8gQ2FwdHVyZSBlcnJvciBmb3IgZXZlcnkgZmFpbGVkIHJlcGxheVxuICAgIHNldENvbnRleHQoJ1JlcGxheXMnLCB7XG4gICAgICBfcmV0cnlDb3VudDogcmV0cnlDb25maWcuY291bnRcbiAgICB9KTtcbiAgICBpZiAob25FcnJvcikge1xuICAgICAgb25FcnJvcihlcnIpO1xuICAgIH1cblxuICAgIC8vIElmIGFuIGVycm9yIGhhcHBlbmVkIGhlcmUsIGl0J3MgbGlrZWx5IHRoYXQgdXBsb2FkaW5nIHRoZSBhdHRhY2htZW50XG4gICAgLy8gZmFpbGVkLCB3ZSdsbCBjYW4gcmV0cnkgd2l0aCB0aGUgc2FtZSBldmVudHMgcGF5bG9hZFxuICAgIGlmIChyZXRyeUNvbmZpZy5jb3VudCA+PSBSRVRSWV9NQVhfQ09VTlQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGAke1VOQUJMRV9UT19TRU5EX1JFUExBWX0gLSBtYXggcmV0cmllcyBleGNlZWRlZGApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gSW4gY2FzZSBicm93c2VycyBkb24ndCBhbGxvdyB0aGlzIHByb3BlcnR5IHRvIGJlIHdyaXRhYmxlXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVGhpcyBuZWVkcyBsaWIgZXMyMDIyIGFuZCBuZXdlclxuICAgICAgICBlcnJvci5jYXVzZSA9IGVycjtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBub3RoaW5nIHRvIGRvXG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICAvLyB3aWxsIHJldHJ5IGluIGludGVydmFscyBvZiA1LCAxMCwgMzBcbiAgICByZXRyeUNvbmZpZy5pbnRlcnZhbCAqPSArK3JldHJ5Q29uZmlnLmNvdW50O1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBzZXRUaW1lb3V0JDMoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHNlbmRSZXBsYXkocmVwbGF5RGF0YSwgcmV0cnlDb25maWcpO1xuICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9XG4gICAgICB9LCByZXRyeUNvbmZpZy5pbnRlcnZhbCk7XG4gICAgfSk7XG4gIH1cbn1cbmNvbnN0IFRIUk9UVExFRCA9ICdfX1RIUk9UVExFRCc7XG5jb25zdCBTS0lQUEVEID0gJ19fU0tJUFBFRCc7XG5cbi8qKlxuICogQ3JlYXRlIGEgdGhyb3R0bGVkIGZ1bmN0aW9uIG9mZiBhIGdpdmVuIGZ1bmN0aW9uLlxuICogV2hlbiBjYWxsaW5nIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24sIGl0IHdpbGwgY2FsbCB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gb25seVxuICogaWYgaXQgaGFzbid0IGJlZW4gY2FsbGVkIG1vcmUgdGhhbiBgbWF4Q291bnRgIHRpbWVzIGluIHRoZSBsYXN0IGBkdXJhdGlvblNlY29uZHNgLlxuICpcbiAqIFJldHVybnMgYFRIUk9UVExFRGAgaWYgdGhyb3R0bGVkIGZvciB0aGUgZmlyc3QgdGltZSwgYWZ0ZXIgdGhhdCBgU0tJUFBFRGAsXG4gKiBvciBlbHNlIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gdGhyb3R0bGUoZm4sIG1heENvdW50LCBkdXJhdGlvblNlY29uZHMpIHtcbiAgY29uc3QgY291bnRlciA9IG5ldyBNYXAoKTtcbiAgY29uc3QgX2NsZWFudXAgPSBub3cgPT4ge1xuICAgIGNvbnN0IHRocmVzaG9sZCA9IG5vdyAtIGR1cmF0aW9uU2Vjb25kcztcbiAgICBjb3VudGVyLmZvckVhY2goKF92YWx1ZSwga2V5KSA9PiB7XG4gICAgICBpZiAoa2V5IDwgdGhyZXNob2xkKSB7XG4gICAgICAgIGNvdW50ZXIuZGVsZXRlKGtleSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IF9nZXRUb3RhbENvdW50ID0gKCkgPT4ge1xuICAgIHJldHVybiBbLi4uY291bnRlci52YWx1ZXMoKV0ucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gIH07XG4gIGxldCBpc1Rocm90dGxlZCA9IGZhbHNlO1xuICByZXR1cm4gKC4uLnJlc3QpID0+IHtcbiAgICAvLyBEYXRlIGluIHNlY29uZC1wcmVjaXNpb24sIHdoaWNoIHdlIHVzZSBhcyBiYXNpcyBmb3IgdGhlIHRocm90dGxpbmdcbiAgICBjb25zdCBub3cgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcblxuICAgIC8vIEZpcnN0LCBtYWtlIHN1cmUgdG8gZGVsZXRlIGFueSBvbGQgZW50cmllc1xuICAgIF9jbGVhbnVwKG5vdyk7XG5cbiAgICAvLyBJZiBhbHJlYWR5IG92ZXIgbGltaXQsIGRvIG5vdGhpbmdcbiAgICBpZiAoX2dldFRvdGFsQ291bnQoKSA+PSBtYXhDb3VudCkge1xuICAgICAgY29uc3Qgd2FzVGhyb3R0bGVkID0gaXNUaHJvdHRsZWQ7XG4gICAgICBpc1Rocm90dGxlZCA9IHRydWU7XG4gICAgICByZXR1cm4gd2FzVGhyb3R0bGVkID8gU0tJUFBFRCA6IFRIUk9UVExFRDtcbiAgICB9XG4gICAgaXNUaHJvdHRsZWQgPSBmYWxzZTtcbiAgICBjb25zdCBjb3VudCA9IGNvdW50ZXIuZ2V0KG5vdykgfHwgMDtcbiAgICBjb3VudGVyLnNldChub3csIGNvdW50ICsgMSk7XG4gICAgcmV0dXJuIGZuKC4uLnJlc3QpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBtYWluIHJlcGxheSBjb250YWluZXIgY2xhc3MsIHdoaWNoIGhvbGRzIGFsbCB0aGUgc3RhdGUgYW5kIG1ldGhvZHMgZm9yIHJlY29yZGluZyBhbmQgc2VuZGluZyByZXBsYXlzLlxuICovXG5jbGFzcyBSZXBsYXlDb250YWluZXIge1xuICAvKipcbiAgICogUmVjb3JkaW5nIGNhbiBoYXBwZW4gaW4gb25lIG9mIHR3byBtb2RlczpcbiAgICogICAtIHNlc3Npb246IFJlY29yZCB0aGUgd2hvbGUgc2Vzc2lvbiwgc2VuZGluZyBpdCBjb250aW51b3VzbHlcbiAgICogICAtIGJ1ZmZlcjogQWx3YXlzIGtlZXAgdGhlIGxhc3QgNjBzIG9mIHJlY29yZGluZywgcmVxdWlyZXM6XG4gICAqICAgICAtIGhhdmluZyByZXBsYXlzT25FcnJvclNhbXBsZVJhdGUgPiAwIHRvIGNhcHR1cmUgcmVwbGF5IHdoZW4gYW4gZXJyb3Igb2NjdXJzXG4gICAqICAgICAtIG9yIGNhbGxpbmcgYGZsdXNoKClgIHRvIHNlbmQgdGhlIHJlcGxheVxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgb3IgbGFzdCBhY3RpdmUgc3Bhbi5cbiAgICogVGhpcyBpcyBvbmx5IGF2YWlsYWJsZSB3aGVuIHBlcmZvcm1hbmNlIGlzIGVuYWJsZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGVzZSBhcmUgaGVyZSBzbyB3ZSBjYW4gb3ZlcndyaXRlIHRoZW0gaW4gdGVzdHMgZXRjLlxuICAgKiBAaGlkZGVuXG4gICAqL1xuXG4gIC8qKiBUaGUgcmVwbGF5IGhhcyB0byBiZSBtYW51YWxseSBzdGFydGVkLCBiZWNhdXNlIG5vIHNhbXBsZSByYXRlIChuZWl0aGVyIHNlc3Npb24gb3IgZXJyb3IpIHdhcyBwcm92aWRlZC4gKi9cblxuICAvKipcbiAgICogT3B0aW9ucyB0byBwYXNzIHRvIGBycndlYi5yZWNvcmQoKWBcbiAgICovXG5cbiAgLyoqXG4gICAqIFRpbWVzdGFtcCBvZiB0aGUgbGFzdCB1c2VyIGFjdGl2aXR5LiBUaGlzIGxpdmVzIGFjcm9zcyBzZXNzaW9ucy5cbiAgICovXG5cbiAgLyoqXG4gICAqIElzIHRoZSBpbnRlZ3JhdGlvbiBjdXJyZW50bHkgYWN0aXZlP1xuICAgKi9cblxuICAvKipcbiAgICogUGF1c2VkIGlzIGEgc3RhdGUgd2hlcmU6XG4gICAqIC0gRE9NIFJlY29yZGluZyBpcyBub3QgbGlzdGVuaW5nIGF0IGFsbFxuICAgKiAtIE5vdGhpbmcgd2lsbCBiZSBhZGRlZCB0byBldmVudCBidWZmZXIgKGUuZy4gY29yZSBTREsgZXZlbnRzKVxuICAgKi9cblxuICAvKipcbiAgICogSGF2ZSB3ZSBhdHRhY2hlZCBsaXN0ZW5lcnMgdG8gdGhlIGNvcmUgU0RLP1xuICAgKiBOb3RlIHdlIGhhdmUgdG8gdHJhY2sgdGhpcyBhcyB0aGVyZSBpcyBubyB3YXkgdG8gcmVtb3ZlIGluc3RydW1lbnRhdGlvbiBoYW5kbGVycy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRvIHN0b3AgcmVjb3JkaW5nXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCB1c2UgZm9yIGNhbnZhcyByZWNvcmRpbmcgb3B0aW9uc1xuICAgKi9cblxuICAvKipcbiAgICogSGFuZGxlIHdoZW4gdmlzaWJpbGl0eSBvZiB0aGUgcGFnZSBjb250ZW50IGNoYW5nZXMuIE9wZW5pbmcgYSBuZXcgdGFiIHdpbGxcbiAgICogY2F1c2UgdGhlIHN0YXRlIHRvIGNoYW5nZSB0byBoaWRkZW4gYmVjYXVzZSBvZiBjb250ZW50IG9mIGN1cnJlbnQgcGFnZSB3aWxsXG4gICAqIGJlIGhpZGRlbi4gTGlrZXdpc2UsIG1vdmluZyBhIGRpZmZlcmVudCB3aW5kb3cgdG8gY292ZXIgdGhlIGNvbnRlbnRzIG9mIHRoZVxuICAgKiBwYWdlIHdpbGwgYWxzbyB0cmlnZ2VyIGEgY2hhbmdlIHRvIGEgaGlkZGVuIHN0YXRlLlxuICAgKi9cblxuICAvKipcbiAgICogSGFuZGxlIHdoZW4gcGFnZSBpcyBibHVycmVkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgd2hlbiBwYWdlIGlzIGZvY3VzZWRcbiAgICovXG5cbiAgLyoqIEVuc3VyZSBwYWdlIHJlbWFpbnMgYWN0aXZlIHdoZW4gYSBrZXkgaXMgcHJlc3NlZC4gKi9cblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgb3B0aW9ucyxcbiAgICByZWNvcmRpbmdPcHRpb25zXG4gIH0pIHtcbiAgICB0aGlzLmV2ZW50QnVmZmVyID0gbnVsbDtcbiAgICB0aGlzLnBlcmZvcm1hbmNlRW50cmllcyA9IFtdO1xuICAgIHRoaXMucmVwbGF5UGVyZm9ybWFuY2VFbnRyaWVzID0gW107XG4gICAgdGhpcy5yZWNvcmRpbmdNb2RlID0gJ3Nlc3Npb24nO1xuICAgIHRoaXMudGltZW91dHMgPSB7XG4gICAgICBzZXNzaW9uSWRsZVBhdXNlOiBTRVNTSU9OX0lETEVfUEFVU0VfRFVSQVRJT04sXG4gICAgICBzZXNzaW9uSWRsZUV4cGlyZTogU0VTU0lPTl9JRExFX0VYUElSRV9EVVJBVElPTlxuICAgIH07XG4gICAgdGhpcy5fbGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLl9pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlcXVpcmVzTWFudWFsU3RhcnQgPSBmYWxzZTtcbiAgICB0aGlzLl9oYXNJbml0aWFsaXplZENvcmVMaXN0ZW5lcnMgPSBmYWxzZTtcbiAgICB0aGlzLl9jb250ZXh0ID0ge1xuICAgICAgZXJyb3JJZHM6IG5ldyBTZXQoKSxcbiAgICAgIHRyYWNlSWRzOiBuZXcgU2V0KCksXG4gICAgICB1cmxzOiBbXSxcbiAgICAgIGluaXRpYWxUaW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBpbml0aWFsVXJsOiAnJ1xuICAgIH07XG4gICAgdGhpcy5fcmVjb3JkaW5nT3B0aW9ucyA9IHJlY29yZGluZ09wdGlvbnM7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5fZGVib3VuY2VkRmx1c2ggPSBkZWJvdW5jZSgoKSA9PiB0aGlzLl9mbHVzaCgpLCB0aGlzLl9vcHRpb25zLmZsdXNoTWluRGVsYXksIHtcbiAgICAgIG1heFdhaXQ6IHRoaXMuX29wdGlvbnMuZmx1c2hNYXhEZWxheVxuICAgIH0pO1xuICAgIHRoaXMuX3Rocm90dGxlZEFkZEV2ZW50ID0gdGhyb3R0bGUoKGV2ZW50LCBpc0NoZWNrb3V0KSA9PiBhZGRFdmVudCh0aGlzLCBldmVudCwgaXNDaGVja291dCksXG4gICAgLy8gTWF4IDMwMCBldmVudHMuLi5cbiAgICAzMDAsXG4gICAgLy8gLi4uIHBlciA1c1xuICAgIDUpO1xuICAgIGNvbnN0IHtcbiAgICAgIHNsb3dDbGlja1RpbWVvdXQsXG4gICAgICBzbG93Q2xpY2tJZ25vcmVTZWxlY3RvcnNcbiAgICB9ID0gdGhpcy5nZXRPcHRpb25zKCk7XG4gICAgY29uc3Qgc2xvd0NsaWNrQ29uZmlnID0gc2xvd0NsaWNrVGltZW91dCA/IHtcbiAgICAgIHRocmVzaG9sZDogTWF0aC5taW4oU0xPV19DTElDS19USFJFU0hPTEQsIHNsb3dDbGlja1RpbWVvdXQpLFxuICAgICAgdGltZW91dDogc2xvd0NsaWNrVGltZW91dCxcbiAgICAgIHNjcm9sbFRpbWVvdXQ6IFNMT1dfQ0xJQ0tfU0NST0xMX1RJTUVPVVQsXG4gICAgICBpZ25vcmVTZWxlY3Rvcjogc2xvd0NsaWNrSWdub3JlU2VsZWN0b3JzID8gc2xvd0NsaWNrSWdub3JlU2VsZWN0b3JzLmpvaW4oJywnKSA6ICcnXG4gICAgfSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoc2xvd0NsaWNrQ29uZmlnKSB7XG4gICAgICB0aGlzLmNsaWNrRGV0ZWN0b3IgPSBuZXcgQ2xpY2tEZXRlY3Rvcih0aGlzLCBzbG93Q2xpY2tDb25maWcpO1xuICAgIH1cblxuICAgIC8vIENvbmZpZ3VyZSByZXBsYXkgbG9nZ2VyIHcvIGV4cGVyaW1lbnRhbCBvcHRpb25zXG4gICAgaWYgKERFQlVHX0JVSUxEKSB7XG4gICAgICBjb25zdCBleHBlcmltZW50cyA9IG9wdGlvbnMuX2V4cGVyaW1lbnRzO1xuICAgICAgbG9nZ2VyLnNldENvbmZpZyh7XG4gICAgICAgIGNhcHR1cmVFeGNlcHRpb25zOiAhIWV4cGVyaW1lbnRzLmNhcHR1cmVFeGNlcHRpb25zLFxuICAgICAgICB0cmFjZUludGVybmFsczogISFleHBlcmltZW50cy50cmFjZUludGVybmFsc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2Ugc2V0IHRoZXNlIGhhbmRsZXIgcHJvcGVydGllcyBhcyBjbGFzcyBwcm9wZXJ0aWVzLCB0byBtYWtlIGJpbmRpbmcvdW5iaW5kaW5nIHRoZW0gZWFzaWVyXG4gICAgdGhpcy5faGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmIChXSU5ET1cuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHtcbiAgICAgICAgdGhpcy5fZG9DaGFuZ2VUb0ZvcmVncm91bmRUYXNrcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZG9DaGFuZ2VUb0JhY2tncm91bmRUYXNrcygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgd2hlbiBwYWdlIGlzIGJsdXJyZWRcbiAgICAgKi9cbiAgICB0aGlzLl9oYW5kbGVXaW5kb3dCbHVyID0gKCkgPT4ge1xuICAgICAgY29uc3QgYnJlYWRjcnVtYiA9IGNyZWF0ZUJyZWFkY3J1bWIoe1xuICAgICAgICBjYXRlZ29yeTogJ3VpLmJsdXInXG4gICAgICB9KTtcblxuICAgICAgLy8gRG8gbm90IGNvdW50IGJsdXIgYXMgYSB1c2VyIGFjdGlvbiAtLSBpdCdzIHBhcnQgb2YgdGhlIHByb2Nlc3Mgb2YgdGhlbVxuICAgICAgLy8gbGVhdmluZyB0aGUgcGFnZVxuICAgICAgdGhpcy5fZG9DaGFuZ2VUb0JhY2tncm91bmRUYXNrcyhicmVhZGNydW1iKTtcbiAgICB9O1xuICAgIHRoaXMuX2hhbmRsZVdpbmRvd0ZvY3VzID0gKCkgPT4ge1xuICAgICAgY29uc3QgYnJlYWRjcnVtYiA9IGNyZWF0ZUJyZWFkY3J1bWIoe1xuICAgICAgICBjYXRlZ29yeTogJ3VpLmZvY3VzJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIERvIG5vdCBjb3VudCBmb2N1cyBhcyBhIHVzZXIgYWN0aW9uIC0tIGluc3RlYWQgd2FpdCB1bnRpbCB0aGV5IGZvY3VzIGFuZFxuICAgICAgLy8gaW50ZXJhY3RpdmUgd2l0aCBwYWdlXG4gICAgICB0aGlzLl9kb0NoYW5nZVRvRm9yZWdyb3VuZFRhc2tzKGJyZWFkY3J1bWIpO1xuICAgIH07XG5cbiAgICAvKiogRW5zdXJlIHBhZ2UgcmVtYWlucyBhY3RpdmUgd2hlbiBhIGtleSBpcyBwcmVzc2VkLiAqL1xuICAgIHRoaXMuX2hhbmRsZUtleWJvYXJkRXZlbnQgPSBldmVudCA9PiB7XG4gICAgICBoYW5kbGVLZXlib2FyZEV2ZW50KHRoaXMsIGV2ZW50KTtcbiAgICB9O1xuICB9XG5cbiAgLyoqIEdldCB0aGUgZXZlbnQgY29udGV4dC4gKi9cbiAgZ2V0Q29udGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dDtcbiAgfVxuXG4gIC8qKiBJZiByZWNvcmRpbmcgaXMgY3VycmVudGx5IGVuYWJsZWQuICovXG4gIGlzRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNFbmFibGVkO1xuICB9XG5cbiAgLyoqIElmIHJlY29yZGluZyBpcyBjdXJyZW50bHkgcGF1c2VkLiAqL1xuICBpc1BhdXNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNQYXVzZWQ7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIGNhbnZhcyByZWNvcmRpbmcgaXMgZW5hYmxlZFxuICAgKi9cbiAgaXNSZWNvcmRpbmdDYW52YXMoKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5fY2FudmFzKTtcbiAgfVxuXG4gIC8qKiBHZXQgdGhlIHJlcGxheSBpbnRlZ3JhdGlvbiBvcHRpb25zLiAqL1xuICBnZXRPcHRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICB9XG5cbiAgLyoqIEEgd3JhcHBlciB0byBjb25kaXRpb25hbGx5IGNhcHR1cmUgZXhjZXB0aW9ucy4gKi9cbiAgaGFuZGxlRXhjZXB0aW9uKGVycm9yKSB7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmV4Y2VwdGlvbihlcnJvcik7XG4gICAgaWYgKHRoaXMuX29wdGlvbnMub25FcnJvcikge1xuICAgICAgdGhpcy5fb3B0aW9ucy5vbkVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIHBsdWdpbiBiYXNlZCBvbiBzYW1wbGluZyBjb25maWd1cmF0aW9uLiBTaG91bGQgbm90IGJlXG4gICAqIGNhbGxlZCBvdXRzaWRlIG9mIGNvbnN0cnVjdG9yLlxuICAgKi9cbiAgaW5pdGlhbGl6ZVNhbXBsaW5nKHByZXZpb3VzU2Vzc2lvbklkKSB7XG4gICAgY29uc3Qge1xuICAgICAgZXJyb3JTYW1wbGVSYXRlLFxuICAgICAgc2Vzc2lvblNhbXBsZVJhdGVcbiAgICB9ID0gdGhpcy5fb3B0aW9ucztcblxuICAgIC8vIElmIG5laXRoZXIgc2FtcGxlIHJhdGUgaXMgPiAwLCB0aGVuIGRvIG5vdGhpbmcgLSB1c2VyIHdpbGwgbmVlZCB0byBjYWxsIG9uZSBvZlxuICAgIC8vIGBzdGFydCgpYCBvciBgc3RhcnRCdWZmZXJpbmdgIHRoZW1zZWx2ZXMuXG4gICAgY29uc3QgcmVxdWlyZXNNYW51YWxTdGFydCA9IGVycm9yU2FtcGxlUmF0ZSA8PSAwICYmIHNlc3Npb25TYW1wbGVSYXRlIDw9IDA7XG4gICAgdGhpcy5fcmVxdWlyZXNNYW51YWxTdGFydCA9IHJlcXVpcmVzTWFudWFsU3RhcnQ7XG4gICAgaWYgKHJlcXVpcmVzTWFudWFsU3RhcnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgaWYgdGhlcmUgaXMgX2FueV8gc2FtcGxlIHJhdGUgc2V0LCB0cnkgdG8gbG9hZCBhbiBleGlzdGluZ1xuICAgIC8vIHNlc3Npb24sIG9yIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgdGhpcy5faW5pdGlhbGl6ZVNlc3Npb25Gb3JTYW1wbGluZyhwcmV2aW91c1Nlc3Npb25JZCk7XG4gICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgIC8vIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4sIHNvbWV0aGluZyB3cm9uZyBoYXMgb2NjdXJyZWRcbiAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5leGNlcHRpb24obmV3IEVycm9yKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBhbmQgY3JlYXRlIHNlc3Npb24nKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnNlc3Npb24uc2FtcGxlZCA9PT0gZmFsc2UpIHtcbiAgICAgIC8vIFRoaXMgc2hvdWxkIG9ubHkgb2NjdXIgaWYgYGVycm9yU2FtcGxlUmF0ZWAgaXMgMCBhbmQgd2FzIHVuc2FtcGxlZCBmb3JcbiAgICAgIC8vIHNlc3Npb24tYmFzZWQgcmVwbGF5LiBJbiB0aGlzIGNhc2UgdGhlcmUgaXMgbm90aGluZyB0byBkby5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBzZWdtZW50SWQgPiAwLCBpdCBtZWFucyB3ZSd2ZSBwcmV2aW91c2x5IGFscmVhZHkgY2FwdHVyZWQgdGhpcyBzZXNzaW9uXG4gICAgLy8gSW4gdGhpcyBjYXNlLCB3ZSBzdGlsbCB3YW50IHRvIGNvbnRpbnVlIGluIGBzZXNzaW9uYCByZWNvcmRpbmcgbW9kZVxuICAgIHRoaXMucmVjb3JkaW5nTW9kZSA9IHRoaXMuc2Vzc2lvbi5zYW1wbGVkID09PSAnYnVmZmVyJyAmJiB0aGlzLnNlc3Npb24uc2VnbWVudElkID09PSAwID8gJ2J1ZmZlcicgOiAnc2Vzc2lvbic7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm9UaWNrKGBTdGFydGluZyByZXBsYXkgaW4gJHt0aGlzLnJlY29yZGluZ01vZGV9IG1vZGVgKTtcbiAgICB0aGlzLl9pbml0aWFsaXplUmVjb3JkaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYSByZXBsYXkgcmVnYXJkbGVzcyBvZiBzYW1wbGluZyByYXRlLiBDYWxsaW5nIHRoaXMgd2lsbCBhbHdheXNcbiAgICogY3JlYXRlIGEgbmV3IHNlc3Npb24uIFdpbGwgbG9nIGEgbWVzc2FnZSBpZiByZXBsYXkgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy5cbiAgICpcbiAgICogQ3JlYXRlcyBvciBsb2FkcyBhIHNlc3Npb24sIGF0dGFjaGVzIGxpc3RlbmVycyB0byB2YXJ5aW5nIGV2ZW50cyAoRE9NLFxuICAgKiBfcGVyZm9ybWFuY2VPYnNlcnZlciwgUmVjb3JkaW5nLCBTZW50cnkgU0RLLCBldGMpXG4gICAqL1xuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5faXNFbmFibGVkICYmIHRoaXMucmVjb3JkaW5nTW9kZSA9PT0gJ3Nlc3Npb24nKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuaW5mbygnUmVjb3JkaW5nIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2lzRW5hYmxlZCAmJiB0aGlzLnJlY29yZGluZ01vZGUgPT09ICdidWZmZXInKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuaW5mbygnQnVmZmVyaW5nIGlzIGluIHByb2dyZXNzLCBjYWxsIGBmbHVzaCgpYCB0byBzYXZlIHRoZSByZXBsYXknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm9UaWNrKCdTdGFydGluZyByZXBsYXkgaW4gc2Vzc2lvbiBtb2RlJyk7XG5cbiAgICAvLyBSZXF1aXJlZCBhcyB1c2VyIGFjdGl2aXR5IGlzIGluaXRpYWxseSBzZXQgaW5cbiAgICAvLyBjb25zdHJ1Y3Rvciwgc28gaWYgYHN0YXJ0KClgIGlzIGNhbGxlZCBhZnRlclxuICAgIC8vIHNlc3Npb24gaWRsZSBleHBpcmF0aW9uLCBhIHJlcGxheSB3aWxsIG5vdCBiZVxuICAgIC8vIGNyZWF0ZWQgZHVlIHRvIGFuIGlkbGUgdGltZW91dC5cbiAgICB0aGlzLl91cGRhdGVVc2VyQWN0aXZpdHkoKTtcbiAgICBjb25zdCBzZXNzaW9uID0gbG9hZE9yQ3JlYXRlU2Vzc2lvbih7XG4gICAgICBtYXhSZXBsYXlEdXJhdGlvbjogdGhpcy5fb3B0aW9ucy5tYXhSZXBsYXlEdXJhdGlvbixcbiAgICAgIHNlc3Npb25JZGxlRXhwaXJlOiB0aGlzLnRpbWVvdXRzLnNlc3Npb25JZGxlRXhwaXJlXG4gICAgfSwge1xuICAgICAgc3RpY2t5U2Vzc2lvbjogdGhpcy5fb3B0aW9ucy5zdGlja3lTZXNzaW9uLFxuICAgICAgLy8gVGhpcyBpcyBpbnRlbnRpb25hbDogY3JlYXRlIGEgbmV3IHNlc3Npb24tYmFzZWQgcmVwbGF5IHdoZW4gY2FsbGluZyBgc3RhcnQoKWBcbiAgICAgIHNlc3Npb25TYW1wbGVSYXRlOiAxLFxuICAgICAgYWxsb3dCdWZmZXJpbmc6IGZhbHNlXG4gICAgfSk7XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICB0aGlzLl9pbml0aWFsaXplUmVjb3JkaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgcmVwbGF5IGJ1ZmZlcmluZy4gQnVmZmVycyB1bnRpbCBgZmx1c2goKWAgaXMgY2FsbGVkIG9yLCBpZlxuICAgKiBgcmVwbGF5c09uRXJyb3JTYW1wbGVSYXRlYCA+IDAsIGFuIGVycm9yIG9jY3Vycy5cbiAgICovXG4gIHN0YXJ0QnVmZmVyaW5nKCkge1xuICAgIGlmICh0aGlzLl9pc0VuYWJsZWQpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5pbmZvKCdCdWZmZXJpbmcgaXMgaW4gcHJvZ3Jlc3MsIGNhbGwgYGZsdXNoKClgIHRvIHNhdmUgdGhlIHJlcGxheScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuaW5mb1RpY2soJ1N0YXJ0aW5nIHJlcGxheSBpbiBidWZmZXIgbW9kZScpO1xuICAgIGNvbnN0IHNlc3Npb24gPSBsb2FkT3JDcmVhdGVTZXNzaW9uKHtcbiAgICAgIHNlc3Npb25JZGxlRXhwaXJlOiB0aGlzLnRpbWVvdXRzLnNlc3Npb25JZGxlRXhwaXJlLFxuICAgICAgbWF4UmVwbGF5RHVyYXRpb246IHRoaXMuX29wdGlvbnMubWF4UmVwbGF5RHVyYXRpb25cbiAgICB9LCB7XG4gICAgICBzdGlja3lTZXNzaW9uOiB0aGlzLl9vcHRpb25zLnN0aWNreVNlc3Npb24sXG4gICAgICBzZXNzaW9uU2FtcGxlUmF0ZTogMCxcbiAgICAgIGFsbG93QnVmZmVyaW5nOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICB0aGlzLnJlY29yZGluZ01vZGUgPSAnYnVmZmVyJztcbiAgICB0aGlzLl9pbml0aWFsaXplUmVjb3JkaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgcmVjb3JkaW5nLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgdGhpcyB3aWxsIGNhdXNlIGEgbmV3IERPTSBjaGVja291dFxuICAgKi9cbiAgc3RhcnRSZWNvcmRpbmcoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNhbnZhc09wdGlvbnMgPSB0aGlzLl9jYW52YXM7XG4gICAgICB0aGlzLl9zdG9wUmVjb3JkaW5nID0gcmVjb3JkKHtcbiAgICAgICAgLi4udGhpcy5fcmVjb3JkaW5nT3B0aW9ucyxcbiAgICAgICAgLy8gV2hlbiBydW5uaW5nIGluIGVycm9yIHNhbXBsaW5nIG1vZGUsIHdlIG5lZWQgdG8gb3ZlcndyaXRlIGBjaGVja291dEV2ZXJ5Tm1zYFxuICAgICAgICAvLyBXaXRob3V0IHRoaXMsIGl0IHdvdWxkIHJlY29yZCBmb3JldmVyLCB1bnRpbCBhbiBlcnJvciBoYXBwZW5zLCB3aGljaCB3ZSBkb24ndCB3YW50XG4gICAgICAgIC8vIGluc3RlYWQsIHdlJ2xsIGFsd2F5cyBrZWVwIHRoZSBsYXN0IDYwIHNlY29uZHMgb2YgcmVwbGF5IGJlZm9yZSBhbiBlcnJvciBoYXBwZW5lZFxuICAgICAgICAuLi4odGhpcy5yZWNvcmRpbmdNb2RlID09PSAnYnVmZmVyJyA/IHtcbiAgICAgICAgICBjaGVja291dEV2ZXJ5Tm1zOiBCVUZGRVJfQ0hFQ0tPVVRfVElNRVxuICAgICAgICB9IDpcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB1c2UgZXhwZXJpbWVudGFsIG9wdGlvbiB3LyBtaW4gY2hlY2tvdXQgdGltZSBvZiA2IG1pbnV0ZXNcbiAgICAgICAgLy8gVGhpcyBpcyB0byBpbXByb3ZlIHBsYXliYWNrIHNlZWtpbmcgYXMgdGhlcmUgY291bGQgcG90ZW50aWFsbHkgYmVcbiAgICAgICAgLy8gbGVzcyBtdXRhdGlvbnMgdG8gcHJvY2VzcyBpbiB0aGUgd29yc2UgY2FzZXMuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGNoZWNrb3V0IGJ5IFwiTlwiIGV2ZW50cyBpcyBwcm9iYWJseSBpZGVhbCwgYnV0IG1lYW5zIHdlIGhhdmUgbGVzc1xuICAgICAgICAvLyBjb250cm9sIGFib3V0IHRoZSBudW1iZXIgb2YgY2hlY2tvdXRzIHdlIG1ha2UgKHdoaWNoIGdlbmVyYWxseVxuICAgICAgICAvLyBpbmNyZWFzZXMgcmVwbGF5IHNpemUpXG4gICAgICAgIHRoaXMuX29wdGlvbnMuX2V4cGVyaW1lbnRzLmNvbnRpbnVvdXNDaGVja291dCAmJiB7XG4gICAgICAgICAgLy8gTWluaW11bSBjaGVja291dCB0aW1lIGlzIDYgbWludXRlc1xuICAgICAgICAgIGNoZWNrb3V0RXZlcnlObXM6IE1hdGgubWF4KDM2MDAwMCwgdGhpcy5fb3B0aW9ucy5fZXhwZXJpbWVudHMuY29udGludW91c0NoZWNrb3V0KVxuICAgICAgICB9KSxcbiAgICAgICAgZW1pdDogZ2V0SGFuZGxlUmVjb3JkaW5nRW1pdCh0aGlzKSxcbiAgICAgICAgLi4uZ2V0UmVjb3JkaW5nU2FtcGxpbmdPcHRpb25zKCksXG4gICAgICAgIG9uTXV0YXRpb246IHRoaXMuX29uTXV0YXRpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgIC4uLihjYW52YXNPcHRpb25zID8ge1xuICAgICAgICAgIHJlY29yZENhbnZhczogY2FudmFzT3B0aW9ucy5yZWNvcmRDYW52YXMsXG4gICAgICAgICAgZ2V0Q2FudmFzTWFuYWdlcjogY2FudmFzT3B0aW9ucy5nZXRDYW52YXNNYW5hZ2VyLFxuICAgICAgICAgIHNhbXBsaW5nOiBjYW52YXNPcHRpb25zLnNhbXBsaW5nLFxuICAgICAgICAgIGRhdGFVUkxPcHRpb25zOiBjYW52YXNPcHRpb25zLmRhdGFVUkxPcHRpb25zXG4gICAgICAgIH0gOiB7fSlcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5oYW5kbGVFeGNlcHRpb24oZXJyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcHMgdGhlIHJlY29yZGluZywgaWYgaXQgd2FzIHJ1bm5pbmcuXG4gICAqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBpdCB3YXMgcHJldmlvdXNseSBzdG9wcGVkLCBvciBpcyBub3cgc3RvcHBlZCxcbiAgICogb3RoZXJ3aXNlIGZhbHNlLlxuICAgKi9cbiAgc3RvcFJlY29yZGluZygpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuX3N0b3BSZWNvcmRpbmcpIHtcbiAgICAgICAgdGhpcy5fc3RvcFJlY29yZGluZygpO1xuICAgICAgICB0aGlzLl9zdG9wUmVjb3JkaW5nID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmhhbmRsZUV4Y2VwdGlvbihlcnIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDdXJyZW50bHksIHRoaXMgbmVlZHMgdG8gYmUgbWFudWFsbHkgY2FsbGVkIChlLmcuIGZvciB0ZXN0cykuIFNlbnRyeSBTREtcbiAgICogZG9lcyBub3Qgc3VwcG9ydCBhIHRlYXJkb3duXG4gICAqL1xuICBhc3luYyBzdG9wKHtcbiAgICBmb3JjZUZsdXNoID0gZmFsc2UsXG4gICAgcmVhc29uXG4gIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gV2UgY2FuJ3QgbW92ZSBgX2lzRW5hYmxlZGAgYWZ0ZXIgYXdhaXRpbmcgYSBmbHVzaCwgb3RoZXJ3aXNlIHdlIGNhblxuICAgIC8vIGVudGVyIGludG8gYW4gaW5maW5pdGUgbG9vcCB3aGVuIGBzdG9wKClgIGlzIGNhbGxlZCB3aGlsZSBmbHVzaGluZy5cbiAgICB0aGlzLl9pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm8oYFN0b3BwaW5nIFJlcGxheSR7cmVhc29uID8gYCB0cmlnZ2VyZWQgYnkgJHtyZWFzb259YCA6ICcnfWApO1xuICAgICAgcmVzZXRSZXBsYXlJZE9uRHluYW1pY1NhbXBsaW5nQ29udGV4dCgpO1xuICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLnN0b3BSZWNvcmRpbmcoKTtcbiAgICAgIHRoaXMuX2RlYm91bmNlZEZsdXNoLmNhbmNlbCgpO1xuICAgICAgLy8gU2VlIGNvbW1lbnQgYWJvdmUgcmU6IGBfaXNFbmFibGVkYCwgd2UgXCJmb3JjZVwiIGEgZmx1c2gsIGlnbm9yaW5nIHRoZVxuICAgICAgLy8gYF9pc0VuYWJsZWRgIHN0YXRlIG9mIHRoZSBwbHVnaW4gc2luY2UgaXQgd2FzIGRpc2FibGVkIGFib3ZlLlxuICAgICAgaWYgKGZvcmNlRmx1c2gpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fZmx1c2goe1xuICAgICAgICAgIGZvcmNlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBBZnRlciBmbHVzaCwgZGVzdHJveSBldmVudCBidWZmZXJcbiAgICAgIHRoaXMuZXZlbnRCdWZmZXI/LmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuZXZlbnRCdWZmZXIgPSBudWxsO1xuXG4gICAgICAvLyBDbGVhciBzZXNzaW9uIGZyb20gc2Vzc2lvbiBzdG9yYWdlLCBub3RlIHRoaXMgbWVhbnMgaWYgYSBuZXcgc2Vzc2lvblxuICAgICAgLy8gaXMgc3RhcnRlZCBhZnRlciwgaXQgd2lsbCBub3QgaGF2ZSBgcHJldmlvdXNTZXNzaW9uSWRgXG4gICAgICBjbGVhclNlc3Npb24odGhpcyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmhhbmRsZUV4Y2VwdGlvbihlcnIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXVzZSBzb21lIHJlcGxheSBmdW5jdGlvbmFsaXR5LiBTZWUgY29tbWVudHMgZm9yIGBfaXNQYXVzZWRgLlxuICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBzdG9wIGFzIHRoaXMgb25seSBzdG9wcyBET00gcmVjb3JkaW5nLCBpdCBpc1xuICAgKiBub3QgYXMgdGhvcm91Z2ggb2YgYSBzaHV0ZG93biBhcyBgc3RvcCgpYC5cbiAgICovXG4gIHBhdXNlKCkge1xuICAgIGlmICh0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pc1BhdXNlZCA9IHRydWU7XG4gICAgdGhpcy5zdG9wUmVjb3JkaW5nKCk7XG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm8oJ1BhdXNpbmcgcmVwbGF5Jyk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdW1lcyByZWNvcmRpbmcsIHNlZSBub3RlcyBmb3IgYHBhdXNlKCkuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBjYWxsaW5nIGBzdGFydFJlY29yZGluZygpYCBoZXJlIHdpbGwgY2F1c2UgYVxuICAgKiBuZXcgRE9NIGNoZWNrb3V0LmBcbiAgICovXG4gIHJlc3VtZSgpIHtcbiAgICBpZiAoIXRoaXMuX2lzUGF1c2VkIHx8ICF0aGlzLl9jaGVja1Nlc3Npb24oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuc3RhcnRSZWNvcmRpbmcoKTtcbiAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuaW5mbygnUmVzdW1pbmcgcmVwbGF5Jyk7XG4gIH1cblxuICAvKipcbiAgICogSWYgbm90IGluIFwic2Vzc2lvblwiIHJlY29yZGluZyBtb2RlLCBmbHVzaCBldmVudCBidWZmZXIgd2hpY2ggd2lsbCBjcmVhdGUgYSBuZXcgcmVwbGF5LlxuICAgKiBVbmxlc3MgYGNvbnRpbnVlUmVjb3JkaW5nYCBpcyBmYWxzZSwgdGhlIHJlcGxheSB3aWxsIGNvbnRpbnVlIHRvIHJlY29yZCBhbmRcbiAgICogYmVoYXZlIGFzIGEgXCJzZXNzaW9uXCItYmFzZWQgcmVwbGF5LlxuICAgKlxuICAgKiBPdGhlcndpc2UsIHF1ZXVlIHVwIGEgZmx1c2guXG4gICAqL1xuICBhc3luYyBzZW5kQnVmZmVyZWRSZXBsYXlPckZsdXNoKHtcbiAgICBjb250aW51ZVJlY29yZGluZyA9IHRydWVcbiAgfSA9IHt9KSB7XG4gICAgaWYgKHRoaXMucmVjb3JkaW5nTW9kZSA9PT0gJ3Nlc3Npb24nKSB7XG4gICAgICByZXR1cm4gdGhpcy5mbHVzaEltbWVkaWF0ZSgpO1xuICAgIH1cbiAgICBjb25zdCBhY3Rpdml0eVRpbWUgPSBEYXRlLm5vdygpO1xuICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5pbmZvKCdDb252ZXJ0aW5nIGJ1ZmZlciB0byBzZXNzaW9uJyk7XG5cbiAgICAvLyBBbGxvdyBmbHVzaCB0byBjb21wbGV0ZSBiZWZvcmUgcmVzdW1pbmcgYXMgYSBzZXNzaW9uIHJlY29yZGluZywgb3RoZXJ3aXNlXG4gICAgLy8gdGhlIGNoZWNrb3V0IGZyb20gYHN0YXJ0UmVjb3JkaW5nYCBtYXkgYmUgaW5jbHVkZWQgaW4gdGhlIHBheWxvYWQuXG4gICAgLy8gUHJlZmVyIHRvIGtlZXAgdGhlIGVycm9yIHJlcGxheSBhcyBhIHNlcGFyYXRlIChhbmQgc21hbGxlcikgc2VnbWVudFxuICAgIC8vIHRoYW4gdGhlIHNlc3Npb24gcmVwbGF5LlxuICAgIGF3YWl0IHRoaXMuZmx1c2hJbW1lZGlhdGUoKTtcbiAgICBjb25zdCBoYXNTdG9wcGVkUmVjb3JkaW5nID0gdGhpcy5zdG9wUmVjb3JkaW5nKCk7XG4gICAgaWYgKCFjb250aW51ZVJlY29yZGluZyB8fCAhaGFzU3RvcHBlZFJlY29yZGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRvIGF2b2lkIHJhY2UgY29uZGl0aW9ucyB3aGVyZSB0aGlzIGlzIGNhbGxlZCBtdWx0aXBsZSB0aW1lcywgd2UgY2hlY2sgaGVyZSBhZ2FpbiB0aGF0IHdlIGFyZSBzdGlsbCBidWZmZXJpbmdcbiAgICBpZiAodGhpcy5yZWNvcmRpbmdNb2RlID09PSAnc2Vzc2lvbicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZS1zdGFydCByZWNvcmRpbmcgaW4gc2Vzc2lvbi1tb2RlXG4gICAgdGhpcy5yZWNvcmRpbmdNb2RlID0gJ3Nlc3Npb24nO1xuXG4gICAgLy8gT25jZSB0aGlzIHNlc3Npb24gZW5kcywgd2UgZG8gbm90IHdhbnQgdG8gcmVmcmVzaCBpdFxuICAgIGlmICh0aGlzLnNlc3Npb24pIHtcbiAgICAgIHRoaXMuX3VwZGF0ZVVzZXJBY3Rpdml0eShhY3Rpdml0eVRpbWUpO1xuICAgICAgdGhpcy5fdXBkYXRlU2Vzc2lvbkFjdGl2aXR5KGFjdGl2aXR5VGltZSk7XG4gICAgICB0aGlzLl9tYXliZVNhdmVTZXNzaW9uKCk7XG4gICAgfVxuICAgIHRoaXMuc3RhcnRSZWNvcmRpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXZSB3YW50IHRvIGJhdGNoIHVwbG9hZHMgb2YgcmVwbGF5IGV2ZW50cy4gU2F2ZSBldmVudHMgb25seSBpZlxuICAgKiBgPGZsdXNoTWluRGVsYXk+YCBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IGV2ZW50XG4gICAqICpPUiogaWYgYDxmbHVzaE1heERlbGF5PmAgbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZC5cbiAgICpcbiAgICogQWNjZXB0cyBhIGNhbGxiYWNrIHRvIHBlcmZvcm0gc2lkZS1lZmZlY3RzIGFuZCByZXR1cm5zIHRydWUgdG8gc3RvcCBiYXRjaFxuICAgKiBwcm9jZXNzaW5nIGFuZCBoYW5kIGJhY2sgY29udHJvbCB0byBjYWxsZXIuXG4gICAqL1xuICBhZGRVcGRhdGUoY2IpIHtcbiAgICAvLyBXZSBuZWVkIHRvIGFsd2F5cyBydW4gYGNiYCAoZS5nLiBpbiB0aGUgY2FzZSBvZiBgdGhpcy5yZWNvcmRpbmdNb2RlID09ICdidWZmZXInYClcbiAgICBjb25zdCBjYlJlc3VsdCA9IGNiKCk7XG5cbiAgICAvLyBJZiB0aGlzIG9wdGlvbiBpcyB0dXJuZWQgb24gdGhlbiB3ZSB3aWxsIG9ubHkgd2FudCB0byBjYWxsIGBmbHVzaGBcbiAgICAvLyBleHBsaWNpdGx5XG4gICAgaWYgKHRoaXMucmVjb3JkaW5nTW9kZSA9PT0gJ2J1ZmZlcicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBjYWxsYmFjayBpcyB0cnVlLCB3ZSBkbyBub3Qgd2FudCB0byBjb250aW51ZSB3aXRoIGZsdXNoaW5nIC0tIHRoZVxuICAgIC8vIGNhbGxlciB3aWxsIG5lZWQgdG8gaGFuZGxlIGl0LlxuICAgIGlmIChjYlJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFkZFVwZGF0ZSBpcyBjYWxsZWQgcXVpdGUgZnJlcXVlbnRseSAtIHVzZSBfZGVib3VuY2VkRmx1c2ggc28gdGhhdCBpdFxuICAgIC8vIHJlc3BlY3RzIHRoZSBmbHVzaCBkZWxheXMgYW5kIGRvZXMgbm90IGZsdXNoIGltbWVkaWF0ZWx5XG4gICAgdGhpcy5fZGVib3VuY2VkRmx1c2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB1c2VyIGFjdGl2aXR5IHRpbWVzdGFtcCBhbmQgcmVzdW1lcyByZWNvcmRpbmcuIFRoaXMgc2hvdWxkIGJlXG4gICAqIGNhbGxlZCBpbiBhbiBldmVudCBoYW5kbGVyIGZvciBhIHVzZXIgYWN0aW9uIHRoYXQgd2UgY29uc2lkZXIgYXMgdGhlIHVzZXJcbiAgICogYmVpbmcgXCJhY3RpdmVcIiAoZS5nLiBhIG1vdXNlIGNsaWNrKS5cbiAgICovXG4gIHRyaWdnZXJVc2VyQWN0aXZpdHkoKSB7XG4gICAgdGhpcy5fdXBkYXRlVXNlckFjdGl2aXR5KCk7XG5cbiAgICAvLyBUaGlzIGNhc2UgbWVhbnMgdGhhdCByZWNvcmRpbmcgd2FzIG9uY2Ugc3RvcHBlZCBkdWUgdG8gaW5hY3Rpdml0eS5cbiAgICAvLyBFbnN1cmUgdGhhdCByZWNvcmRpbmcgaXMgcmVzdW1lZC5cbiAgICBpZiAoIXRoaXMuX3N0b3BSZWNvcmRpbmcpIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBzZXNzaW9uLCBvdGhlcndpc2Ugd2hlbiB0aGUgdXNlciBhY3Rpb24gaXMgZmx1c2hlZCwgaXRcbiAgICAgIC8vIHdpbGwgZ2V0IHJlamVjdGVkIGR1ZSB0byBhbiBleHBpcmVkIHNlc3Npb24uXG4gICAgICBpZiAoIXRoaXMuX2NoZWNrU2Vzc2lvbigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTm90ZTogVGhpcyB3aWxsIGNhdXNlIGEgbmV3IERPTSBjaGVja291dFxuICAgICAgdGhpcy5yZXN1bWUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UuLi4gcmVjb3JkaW5nIHdhcyBuZXZlciBzdXNwZW5kZWQsIGNvbnRpbnVlIGFzIG5vcm1hbGlzaFxuICAgIHRoaXMuY2hlY2tBbmRIYW5kbGVFeHBpcmVkU2Vzc2lvbigpO1xuICAgIHRoaXMuX3VwZGF0ZVNlc3Npb25BY3Rpdml0eSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHVzZXIgYWN0aXZpdHkgdGltZXN0YW1wICp3aXRob3V0KiByZXN1bWluZ1xuICAgKiByZWNvcmRpbmcuIFNvbWUgdXNlciBldmVudHMgKGUuZy4ga2V5ZG93bikgY2FuIGJlIGNyZWF0ZVxuICAgKiBsb3ctdmFsdWUgcmVwbGF5cyB0aGF0IG9ubHkgY29udGFpbiB0aGUga2V5cHJlc3MgYXMgYVxuICAgKiBicmVhZGNydW1iLiBJbnN0ZWFkIHRoaXMgd291bGQgcmVxdWlyZSBvdGhlciBldmVudHMgdG9cbiAgICogY3JlYXRlIGEgbmV3IHJlcGxheSBhZnRlciBhIHNlc3Npb24gaGFzIGV4cGlyZWQuXG4gICAqL1xuICB1cGRhdGVVc2VyQWN0aXZpdHkoKSB7XG4gICAgdGhpcy5fdXBkYXRlVXNlckFjdGl2aXR5KCk7XG4gICAgdGhpcy5fdXBkYXRlU2Vzc2lvbkFjdGl2aXR5KCk7XG4gIH1cblxuICAvKipcbiAgICogT25seSBmbHVzaCBpZiBgdGhpcy5yZWNvcmRpbmdNb2RlID09PSAnc2Vzc2lvbidgXG4gICAqL1xuICBjb25kaXRpb25hbEZsdXNoKCkge1xuICAgIGlmICh0aGlzLnJlY29yZGluZ01vZGUgPT09ICdidWZmZXInKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZsdXNoSW1tZWRpYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogRmx1c2ggdXNpbmcgZGVib3VuY2UgZmx1c2hcbiAgICovXG4gIGZsdXNoKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWJvdW5jZWRGbHVzaCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsd2F5cyBmbHVzaCB2aWEgYF9kZWJvdW5jZWRGbHVzaGAgc28gdGhhdCB3ZSBkbyBub3QgaGF2ZSBmbHVzaGVzIHRyaWdnZXJlZFxuICAgKiBmcm9tIGNhbGxpbmcgYm90aCBgZmx1c2hgIGFuZCBgX2RlYm91bmNlZEZsdXNoYC4gT3RoZXJ3aXNlLCB0aGVyZSBjb3VsZCBiZVxuICAgKiBjYXNlcyBvZiBtdWx0aXBsZSBmbHVzaGVzIGhhcHBlbmluZyBjbG9zZWx5IHRvZ2V0aGVyLlxuICAgKi9cbiAgZmx1c2hJbW1lZGlhdGUoKSB7XG4gICAgdGhpcy5fZGVib3VuY2VkRmx1c2goKTtcbiAgICAvLyBgLmZsdXNoYCBpcyBwcm92aWRlZCBieSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLCBhbmFsb2dvdXNseSB0byBsb2Rhc2guZGVib3VuY2VcbiAgICByZXR1cm4gdGhpcy5fZGVib3VuY2VkRmx1c2guZmx1c2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIHF1ZXVlZCB1cCBmbHVzaGVzLlxuICAgKi9cbiAgY2FuY2VsRmx1c2goKSB7XG4gICAgdGhpcy5fZGVib3VuY2VkRmx1c2guY2FuY2VsKCk7XG4gIH1cblxuICAvKiogR2V0IHRoZSBjdXJyZW50IHNlc3Npb24gKD1yZXBsYXkpIElEICovXG4gIGdldFNlc3Npb25JZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uPy5pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgcmVjb3JkaW5nIHNob3VsZCBiZSBzdG9wcGVkIGR1ZSB0byB1c2VyIGluYWN0aXZpdHkuIE90aGVyd2lzZVxuICAgKiBjaGVjayBpZiBzZXNzaW9uIGlzIGV4cGlyZWQgYW5kIGNyZWF0ZSBhIG5ldyBzZXNzaW9uIGlmIHNvLiBUcmlnZ2VycyBhIG5ld1xuICAgKiBmdWxsIHNuYXBzaG90IG9uIG5ldyBzZXNzaW9uLlxuICAgKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgc2Vzc2lvbiBpcyBub3QgZXhwaXJlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBjaGVja0FuZEhhbmRsZUV4cGlyZWRTZXNzaW9uKCkge1xuICAgIC8vIFByZXZlbnQgc3RhcnRpbmcgYSBuZXcgc2Vzc2lvbiBpZiB0aGUgbGFzdCB1c2VyIGFjdGl2aXR5IGlzIG9sZGVyIHRoYW5cbiAgICAvLyBTRVNTSU9OX0lETEVfUEFVU0VfRFVSQVRJT04uIE90aGVyd2lzZSBub24tdXNlciBhY3Rpdml0eSBjYW4gdHJpZ2dlciBhIG5ld1xuICAgIC8vIHNlc3Npb24rcmVjb3JkaW5nLiBUaGlzIGNyZWF0ZXMgbm9pc3kgcmVwbGF5cyB0aGF0IGRvIG5vdCBoYXZlIG11Y2hcbiAgICAvLyBjb250ZW50IGluIHRoZW0uXG4gICAgaWYgKHRoaXMuX2xhc3RBY3Rpdml0eSAmJiBpc0V4cGlyZWQodGhpcy5fbGFzdEFjdGl2aXR5LCB0aGlzLnRpbWVvdXRzLnNlc3Npb25JZGxlUGF1c2UpICYmIHRoaXMuc2Vzc2lvbiAmJiB0aGlzLnNlc3Npb24uc2FtcGxlZCA9PT0gJ3Nlc3Npb24nKSB7XG4gICAgICAvLyBQYXVzZSByZWNvcmRpbmcgb25seSBmb3Igc2Vzc2lvbi1iYXNlZCByZXBsYXlzLiBPdGhlcndpc2UsIHJlc3VtaW5nXG4gICAgICAvLyB3aWxsIGNyZWF0ZSBhIG5ldyByZXBsYXkgYW5kIHdpbGwgY29uZmxpY3Qgd2l0aCB1c2VycyB3aG8gb25seSBjaG9vc2VcbiAgICAgIC8vIHRvIHJlY29yZCBlcnJvci1iYXNlZCByZXBsYXlzIG9ubHkuIChlLmcuIHRoZSByZXN1bWVkIHJlcGxheSB3aWxsIG5vdFxuICAgICAgLy8gY29udGFpbiBhIHJlZmVyZW5jZSB0byBhbiBlcnJvcilcbiAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAtLS0gVGhlcmUgaXMgcmVjZW50IHVzZXIgYWN0aXZpdHkgLS0tIC8vXG4gICAgLy8gVGhpcyB3aWxsIGNyZWF0ZSBhIG5ldyBzZXNzaW9uIGlmIGV4cGlyZWQsIGJhc2VkIG9uIGV4cGlyeSBsZW5ndGhcbiAgICBpZiAoIXRoaXMuX2NoZWNrU2Vzc2lvbigpKSB7XG4gICAgICAvLyBDaGVjayBzZXNzaW9uIGhhbmRsZXMgdGhlIHJlZnJlc2hpbmcgaXRzZWxmXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENhcHR1cmUgc29tZSBpbml0aWFsIHN0YXRlIHRoYXQgY2FuIGNoYW5nZSB0aHJvdWdob3V0IHRoZSBsaWZlc3BhbiBvZiB0aGVcbiAgICogcmVwbGF5LiBUaGlzIGlzIHJlcXVpcmVkIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZXkgd291bGQgYmUgY2FwdHVyZWQgYXQgdGhlXG4gICAqIGZpcnN0IGZsdXNoLlxuICAgKi9cbiAgc2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIGNvbnN0IHVybFBhdGggPSBgJHtXSU5ET1cubG9jYXRpb24ucGF0aG5hbWV9JHtXSU5ET1cubG9jYXRpb24uaGFzaH0ke1dJTkRPVy5sb2NhdGlvbi5zZWFyY2h9YDtcbiAgICBjb25zdCB1cmwgPSBgJHtXSU5ET1cubG9jYXRpb24ub3JpZ2lufSR7dXJsUGF0aH1gO1xuICAgIHRoaXMucGVyZm9ybWFuY2VFbnRyaWVzID0gW107XG4gICAgdGhpcy5yZXBsYXlQZXJmb3JtYW5jZUVudHJpZXMgPSBbXTtcblxuICAgIC8vIFJlc2V0IF9jb250ZXh0IGFzIHdlbGxcbiAgICB0aGlzLl9jbGVhckNvbnRleHQoKTtcbiAgICB0aGlzLl9jb250ZXh0LmluaXRpYWxVcmwgPSB1cmw7XG4gICAgdGhpcy5fY29udGV4dC5pbml0aWFsVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLl9jb250ZXh0LnVybHMucHVzaCh1cmwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGJyZWFkY3J1bWIgZXZlbnQsIHRoYXQgbWF5IGJlIHRocm90dGxlZC5cbiAgICogSWYgaXQgd2FzIHRocm90dGxlZCwgd2UgYWRkIGEgY3VzdG9tIGJyZWFkY3J1bWIgdG8gaW5kaWNhdGUgdGhhdC5cbiAgICovXG4gIHRocm90dGxlZEFkZEV2ZW50KGV2ZW50LCBpc0NoZWNrb3V0KSB7XG4gICAgY29uc3QgcmVzID0gdGhpcy5fdGhyb3R0bGVkQWRkRXZlbnQoZXZlbnQsIGlzQ2hlY2tvdXQpO1xuXG4gICAgLy8gSWYgdGhpcyBpcyBUSFJPVFRMRUQsIGl0IG1lYW5zIHdlIGhhdmUgdGhyb3R0bGVkIHRoZSBldmVudCBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAvLyBJbiB0aGlzIGNhc2UsIHdlIHdhbnQgdG8gYWRkIGEgYnJlYWRjcnVtYiBpbmRpY2F0aW5nIHRoYXQgc29tZXRoaW5nIHdhcyBza2lwcGVkXG4gICAgaWYgKHJlcyA9PT0gVEhST1RUTEVEKSB7XG4gICAgICBjb25zdCBicmVhZGNydW1iID0gY3JlYXRlQnJlYWRjcnVtYih7XG4gICAgICAgIGNhdGVnb3J5OiAncmVwbGF5LnRocm90dGxlZCdcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hZGRVcGRhdGUoKCkgPT4ge1xuICAgICAgICAvLyBSZXR1cm4gYGZhbHNlYCBpZiB0aGUgZXZlbnQgX3dhc18gYWRkZWQsIGFzIHRoYXQgbWVhbnMgd2Ugc2NoZWR1bGUgYSBmbHVzaFxuICAgICAgICByZXR1cm4gIWFkZEV2ZW50U3luYyh0aGlzLCB7XG4gICAgICAgICAgdHlwZTogUmVwbGF5RXZlbnRUeXBlQ3VzdG9tLFxuICAgICAgICAgIHRpbWVzdGFtcDogYnJlYWRjcnVtYi50aW1lc3RhbXAgfHwgMCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0YWc6ICdicmVhZGNydW1iJyxcbiAgICAgICAgICAgIHBheWxvYWQ6IGJyZWFkY3J1bWIsXG4gICAgICAgICAgICBtZXRyaWM6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyB3aWxsIGdldCB0aGUgcGFyYW1ldHJpemVkIHJvdXRlIG5hbWUgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAgICogVGhpcyBpcyBvbmx5IGF2YWlsYWJsZSBpZiBwZXJmb3JtYW5jZSBpcyBlbmFibGVkLCBhbmQgaWYgYW4gaW5zdHJ1bWVudGVkIHJvdXRlciBpcyB1c2VkLlxuICAgKi9cbiAgZ2V0Q3VycmVudFJvdXRlKCkge1xuICAgIGNvbnN0IGxhc3RBY3RpdmVTcGFuID0gdGhpcy5sYXN0QWN0aXZlU3BhbiB8fCBnZXRBY3RpdmVTcGFuKCk7XG4gICAgY29uc3QgbGFzdFJvb3RTcGFuID0gbGFzdEFjdGl2ZVNwYW4gJiYgZ2V0Um9vdFNwYW4obGFzdEFjdGl2ZVNwYW4pO1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBsYXN0Um9vdFNwYW4gJiYgc3BhblRvSlNPTihsYXN0Um9vdFNwYW4pLmRhdGEgfHwge307XG4gICAgY29uc3Qgc291cmNlID0gYXR0cmlidXRlc1tTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRV07XG4gICAgaWYgKCFsYXN0Um9vdFNwYW4gfHwgIXNvdXJjZSB8fCAhWydyb3V0ZScsICdjdXN0b20nXS5pbmNsdWRlcyhzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gc3BhblRvSlNPTihsYXN0Um9vdFNwYW4pLmRlc2NyaXB0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYW5kIHN0YXJ0IGFsbCBsaXN0ZW5lcnMgdG8gdmFyeWluZyBldmVudHMgKERPTSxcbiAgICogUGVyZm9ybWFuY2UgT2JzZXJ2ZXIsIFJlY29yZGluZywgU2VudHJ5IFNESywgZXRjKVxuICAgKi9cbiAgX2luaXRpYWxpemVSZWNvcmRpbmcoKSB7XG4gICAgdGhpcy5zZXRJbml0aWFsU3RhdGUoKTtcblxuICAgIC8vIHRoaXMgbWV0aG9kIGlzIGdlbmVyYWxseSBjYWxsZWQgb24gcGFnZSBsb2FkIG9yIG1hbnVhbGx5IC0gaW4gYm90aCBjYXNlc1xuICAgIC8vIHdlIHNob3VsZCB0cmVhdCBpdCBhcyBhbiBhY3Rpdml0eVxuICAgIHRoaXMuX3VwZGF0ZVNlc3Npb25BY3Rpdml0eSgpO1xuICAgIHRoaXMuZXZlbnRCdWZmZXIgPSBjcmVhdGVFdmVudEJ1ZmZlcih7XG4gICAgICB1c2VDb21wcmVzc2lvbjogdGhpcy5fb3B0aW9ucy51c2VDb21wcmVzc2lvbixcbiAgICAgIHdvcmtlclVybDogdGhpcy5fb3B0aW9ucy53b3JrZXJVcmxcbiAgICB9KTtcbiAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9hZGRMaXN0ZW5lcnMoKTtcblxuICAgIC8vIE5lZWQgdG8gc2V0IGFzIGVuYWJsZWQgYmVmb3JlIHdlIHN0YXJ0IHJlY29yZGluZywgYXMgYHJlY29yZCgpYCBjYW4gdHJpZ2dlciBhIGZsdXNoIHdpdGggYSBuZXcgY2hlY2tvdXRcbiAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5zdGFydFJlY29yZGluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWRzIChvciByZWZyZXNoZXMpIHRoZSBjdXJyZW50IHNlc3Npb24uXG4gICAqL1xuICBfaW5pdGlhbGl6ZVNlc3Npb25Gb3JTYW1wbGluZyhwcmV2aW91c1Nlc3Npb25JZCkge1xuICAgIC8vIFdoZW5ldmVyIHRoZXJlIGlzIF9hbnlfIGVycm9yIHNhbXBsZSByYXRlLCB3ZSBhbHdheXMgYWxsb3cgYnVmZmVyaW5nXG4gICAgLy8gQmVjYXVzZSB3ZSBkZWNpZGUgb24gc2FtcGxpbmcgd2hlbiBhbiBlcnJvciBvY2N1cnMsIHdlIG5lZWQgdG8gYnVmZmVyIGF0IGFsbCB0aW1lcyBpZiBzYW1wbGluZyBmb3IgZXJyb3JzXG4gICAgY29uc3QgYWxsb3dCdWZmZXJpbmcgPSB0aGlzLl9vcHRpb25zLmVycm9yU2FtcGxlUmF0ZSA+IDA7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGxvYWRPckNyZWF0ZVNlc3Npb24oe1xuICAgICAgc2Vzc2lvbklkbGVFeHBpcmU6IHRoaXMudGltZW91dHMuc2Vzc2lvbklkbGVFeHBpcmUsXG4gICAgICBtYXhSZXBsYXlEdXJhdGlvbjogdGhpcy5fb3B0aW9ucy5tYXhSZXBsYXlEdXJhdGlvbixcbiAgICAgIHByZXZpb3VzU2Vzc2lvbklkXG4gICAgfSwge1xuICAgICAgc3RpY2t5U2Vzc2lvbjogdGhpcy5fb3B0aW9ucy5zdGlja3lTZXNzaW9uLFxuICAgICAgc2Vzc2lvblNhbXBsZVJhdGU6IHRoaXMuX29wdGlvbnMuc2Vzc2lvblNhbXBsZVJhdGUsXG4gICAgICBhbGxvd0J1ZmZlcmluZ1xuICAgIH0pO1xuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGFuZCBwb3RlbnRpYWxseSByZWZyZXNoZXMgdGhlIGN1cnJlbnQgc2Vzc2lvbi5cbiAgICogUmV0dXJucyBmYWxzZSBpZiBzZXNzaW9uIGlzIG5vdCByZWNvcmRlZC5cbiAgICovXG4gIF9jaGVja1Nlc3Npb24oKSB7XG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gc2Vzc2lvbiB5ZXQsIHdlIGRvIG5vdCB3YW50IHRvIHJlZnJlc2ggYW55dGhpbmdcbiAgICAvLyBUaGlzIHNob3VsZCBnZW5lcmFsbHkgbm90IGhhcHBlbiwgYnV0IHRvIGJlIHNhZmUuLi4uXG4gICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgaWYgKHNob3VsZFJlZnJlc2hTZXNzaW9uKGN1cnJlbnRTZXNzaW9uLCB7XG4gICAgICBzZXNzaW9uSWRsZUV4cGlyZTogdGhpcy50aW1lb3V0cy5zZXNzaW9uSWRsZUV4cGlyZSxcbiAgICAgIG1heFJlcGxheUR1cmF0aW9uOiB0aGlzLl9vcHRpb25zLm1heFJlcGxheUR1cmF0aW9uXG4gICAgfSkpIHtcbiAgICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIHJlamVjdFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgdGhpcy5fcmVmcmVzaFNlc3Npb24oY3VycmVudFNlc3Npb24pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoIGEgc2Vzc2lvbiB3aXRoIGEgbmV3IG9uZS5cbiAgICogVGhpcyBzdG9wcyB0aGUgY3VycmVudCBzZXNzaW9uICh3aXRob3V0IGZvcmNpbmcgYSBmbHVzaCwgYXMgdGhhdCB3b3VsZCBuZXZlciB3b3JrIHNpbmNlIHdlIGFyZSBleHBpcmVkKSxcbiAgICogYW5kIHRoZW4gZG9lcyBhIG5ldyBzYW1wbGluZyBiYXNlZCBvbiB0aGUgcmVmcmVzaGVkIHNlc3Npb24uXG4gICAqL1xuICBhc3luYyBfcmVmcmVzaFNlc3Npb24oc2Vzc2lvbikge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc3RvcCh7XG4gICAgICByZWFzb246ICdyZWZyZXNoIHNlc3Npb24nXG4gICAgfSk7XG4gICAgdGhpcy5pbml0aWFsaXplU2FtcGxpbmcoc2Vzc2lvbi5pZCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBsaXN0ZW5lcnMgdG8gcmVjb3JkIGV2ZW50cyBmb3IgdGhlIHJlcGxheVxuICAgKi9cbiAgX2FkZExpc3RlbmVycygpIHtcbiAgICB0cnkge1xuICAgICAgV0lORE9XLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCB0aGlzLl9oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgIFdJTkRPVy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlV2luZG93Qmx1cik7XG4gICAgICBXSU5ET1cuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVXaW5kb3dGb2N1cyk7XG4gICAgICBXSU5ET1cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUtleWJvYXJkRXZlbnQpO1xuICAgICAgaWYgKHRoaXMuY2xpY2tEZXRlY3Rvcikge1xuICAgICAgICB0aGlzLmNsaWNrRGV0ZWN0b3IuYWRkTGlzdGVuZXJzKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZXJlIGlzIG5vIHdheSB0byByZW1vdmUgdGhlc2UgbGlzdGVuZXJzLCBzbyBlbnN1cmUgdGhleSBhcmUgb25seSBhZGRlZCBvbmNlXG4gICAgICBpZiAoIXRoaXMuX2hhc0luaXRpYWxpemVkQ29yZUxpc3RlbmVycykge1xuICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcnModGhpcywge1xuICAgICAgICAgIGF1dG9GbHVzaE9uRmVlZGJhY2s6IHRoaXMuX29wdGlvbnMuX2V4cGVyaW1lbnRzLmF1dG9GbHVzaE9uRmVlZGJhY2tcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2hhc0luaXRpYWxpemVkQ29yZUxpc3RlbmVycyA9IHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmhhbmRsZUV4Y2VwdGlvbihlcnIpO1xuICAgIH1cbiAgICB0aGlzLl9wZXJmb3JtYW5jZUNsZWFudXBDYWxsYmFjayA9IHNldHVwUGVyZm9ybWFuY2VPYnNlcnZlcih0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgbGlzdGVuZXJzIHRoYXQgd2VyZSBjcmVhdGVkIGluIGBfYWRkTGlzdGVuZXJzYFxuICAgKi9cbiAgX3JlbW92ZUxpc3RlbmVycygpIHtcbiAgICB0cnkge1xuICAgICAgV0lORE9XLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCB0aGlzLl9oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgIFdJTkRPVy5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlV2luZG93Qmx1cik7XG4gICAgICBXSU5ET1cucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVXaW5kb3dGb2N1cyk7XG4gICAgICBXSU5ET1cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUtleWJvYXJkRXZlbnQpO1xuICAgICAgaWYgKHRoaXMuY2xpY2tEZXRlY3Rvcikge1xuICAgICAgICB0aGlzLmNsaWNrRGV0ZWN0b3IucmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fcGVyZm9ybWFuY2VDbGVhbnVwQ2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fcGVyZm9ybWFuY2VDbGVhbnVwQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXhjZXB0aW9uKGVycik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRhc2tzIHRvIHJ1biB3aGVuIHdlIGNvbnNpZGVyIGEgcGFnZSB0byBiZSBoaWRkZW4gKHZpYSBibHVycmluZyBhbmQvb3IgdmlzaWJpbGl0eSlcbiAgICovXG4gIF9kb0NoYW5nZVRvQmFja2dyb3VuZFRhc2tzKGJyZWFkY3J1bWIpIHtcbiAgICBpZiAoIXRoaXMuc2Vzc2lvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBleHBpcmVkID0gaXNTZXNzaW9uRXhwaXJlZCh0aGlzLnNlc3Npb24sIHtcbiAgICAgIG1heFJlcGxheUR1cmF0aW9uOiB0aGlzLl9vcHRpb25zLm1heFJlcGxheUR1cmF0aW9uLFxuICAgICAgc2Vzc2lvbklkbGVFeHBpcmU6IHRoaXMudGltZW91dHMuc2Vzc2lvbklkbGVFeHBpcmVcbiAgICB9KTtcbiAgICBpZiAoZXhwaXJlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoYnJlYWRjcnVtYikge1xuICAgICAgdGhpcy5fY3JlYXRlQ3VzdG9tQnJlYWRjcnVtYihicmVhZGNydW1iKTtcbiAgICB9XG5cbiAgICAvLyBTZW5kIHJlcGxheSB3aGVuIHRoZSBwYWdlL3RhYiBiZWNvbWVzIGhpZGRlbi4gVGhlcmUgaXMgbm8gcmVhc29uIHRvIHNlbmRcbiAgICAvLyByZXBsYXkgaWYgaXQgYmVjb21lcyB2aXNpYmxlLCBzaW5jZSBubyBhY3Rpb25zIHdlIGNhcmUgYWJvdXQgd2VyZSBkb25lXG4gICAgLy8gd2hpbGUgaXQgd2FzIGhpZGRlblxuICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIHJlamVjdFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICB2b2lkIHRoaXMuY29uZGl0aW9uYWxGbHVzaCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRhc2tzIHRvIHJ1biB3aGVuIHdlIGNvbnNpZGVyIGEgcGFnZSB0byBiZSB2aXNpYmxlICh2aWEgZm9jdXMgYW5kL29yIHZpc2liaWxpdHkpXG4gICAqL1xuICBfZG9DaGFuZ2VUb0ZvcmVncm91bmRUYXNrcyhicmVhZGNydW1iKSB7XG4gICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaXNTZXNzaW9uQWN0aXZlID0gdGhpcy5jaGVja0FuZEhhbmRsZUV4cGlyZWRTZXNzaW9uKCk7XG4gICAgaWYgKCFpc1Nlc3Npb25BY3RpdmUpIHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIGhhcyBjb21lIGJhY2sgdG8gdGhlIHBhZ2Ugd2l0aGluIFNFU1NJT05fSURMRV9QQVVTRV9EVVJBVElPTlxuICAgICAgLy8gbXMsIHdlIHdpbGwgcmUtdXNlIHRoZSBleGlzdGluZyBzZXNzaW9uLCBvdGhlcndpc2UgY3JlYXRlIGEgbmV3XG4gICAgICAvLyBzZXNzaW9uXG4gICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuaW5mbygnRG9jdW1lbnQgaGFzIGJlY29tZSBhY3RpdmUsIGJ1dCBzZXNzaW9uIGhhcyBleHBpcmVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChicmVhZGNydW1iKSB7XG4gICAgICB0aGlzLl9jcmVhdGVDdXN0b21CcmVhZGNydW1iKGJyZWFkY3J1bWIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdXNlciBhY3Rpdml0eSAoYWNyb3NzIHNlc3Npb24gbGlmZXNwYW5zKVxuICAgKi9cbiAgX3VwZGF0ZVVzZXJBY3Rpdml0eShfbGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKSkge1xuICAgIHRoaXMuX2xhc3RBY3Rpdml0eSA9IF9sYXN0QWN0aXZpdHk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgc2Vzc2lvbidzIGxhc3QgYWN0aXZpdHkgdGltZXN0YW1wXG4gICAqL1xuICBfdXBkYXRlU2Vzc2lvbkFjdGl2aXR5KF9sYXN0QWN0aXZpdHkgPSBEYXRlLm5vdygpKSB7XG4gICAgaWYgKHRoaXMuc2Vzc2lvbikge1xuICAgICAgdGhpcy5zZXNzaW9uLmxhc3RBY3Rpdml0eSA9IF9sYXN0QWN0aXZpdHk7XG4gICAgICB0aGlzLl9tYXliZVNhdmVTZXNzaW9uKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBjcmVhdGUgKGFuZCBidWZmZXIpIGEgcmVwbGF5IGJyZWFkY3J1bWIgZnJvbSBhIGNvcmUgU0RLIGJyZWFkY3J1bWJcbiAgICovXG4gIF9jcmVhdGVDdXN0b21CcmVhZGNydW1iKGJyZWFkY3J1bWIpIHtcbiAgICB0aGlzLmFkZFVwZGF0ZSgoKSA9PiB7XG4gICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciByZWplY3RcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgIHRoaXMudGhyb3R0bGVkQWRkRXZlbnQoe1xuICAgICAgICB0eXBlOiBFdmVudFR5cGUuQ3VzdG9tLFxuICAgICAgICB0aW1lc3RhbXA6IGJyZWFkY3J1bWIudGltZXN0YW1wIHx8IDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0YWc6ICdicmVhZGNydW1iJyxcbiAgICAgICAgICBwYXlsb2FkOiBicmVhZGNydW1iXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE9ic2VydmVkIHBlcmZvcm1hbmNlIGV2ZW50cyBhcmUgYWRkZWQgdG8gYHRoaXMucGVyZm9ybWFuY2VFbnRyaWVzYC4gVGhlc2VcbiAgICogYXJlIGluY2x1ZGVkIGluIHRoZSByZXBsYXkgZXZlbnQgYmVmb3JlIGl0IGlzIGZpbmlzaGVkIGFuZCBzZW50IHRvIFNlbnRyeS5cbiAgICovXG4gIF9hZGRQZXJmb3JtYW5jZUVudHJpZXMoKSB7XG4gICAgbGV0IHBlcmZvcm1hbmNlRW50cmllcyA9IGNyZWF0ZVBlcmZvcm1hbmNlRW50cmllcyh0aGlzLnBlcmZvcm1hbmNlRW50cmllcykuY29uY2F0KHRoaXMucmVwbGF5UGVyZm9ybWFuY2VFbnRyaWVzKTtcbiAgICB0aGlzLnBlcmZvcm1hbmNlRW50cmllcyA9IFtdO1xuICAgIHRoaXMucmVwbGF5UGVyZm9ybWFuY2VFbnRyaWVzID0gW107XG5cbiAgICAvLyBJZiB3ZSBhcmUgbWFudWFsbHkgc3RhcnRpbmcsIHdlIHdhbnQgdG8gZW5zdXJlIHdlIG9ubHkgaW5jbHVkZSBwZXJmb3JtYW5jZSBlbnRyaWVzXG4gICAgLy8gdGhhdCBhcmUgYWZ0ZXIgdGhlIGluaXRpYWwgdGltZXN0YW1wXG4gICAgLy8gVGhlIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGF0IHdlIG1heSBoYXZlIHBlcmZvcm1hbmNlIGVudHJpZXMgZnJvbSB0aGUgcGFnZSBsb2FkLCBidXQgbWF5IGRlY2lkZSB0byBzdGFydFxuICAgIC8vIHRoZSByZXBsYXkgbGF0ZXIgb24sIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGVzZSBlbnRyaWVzLlxuICAgIC8vIHdpdGhvdXQgdGhpcywgbWFudWFsbHkgc3RhcnRlZCByZXBsYXlzIGNhbiBoYXZlIGV2ZW50cyBsb25nIGJlZm9yZSB0aGUgYWN0dWFsIHJlcGxheSByZWNvcmRpbmcgc3RhcnRzLFxuICAgIC8vIHdoaWNoIG1lc3NlcyB3aXRoIHRoZSB0aW1lbGluZSBldGMuXG4gICAgaWYgKHRoaXMuX3JlcXVpcmVzTWFudWFsU3RhcnQpIHtcbiAgICAgIGNvbnN0IGluaXRpYWxUaW1lc3RhbXBJblNlY29uZHMgPSB0aGlzLl9jb250ZXh0LmluaXRpYWxUaW1lc3RhbXAgLyAxMDAwO1xuICAgICAgcGVyZm9ybWFuY2VFbnRyaWVzID0gcGVyZm9ybWFuY2VFbnRyaWVzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5zdGFydCA+PSBpbml0aWFsVGltZXN0YW1wSW5TZWNvbmRzKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGNyZWF0ZVBlcmZvcm1hbmNlU3BhbnModGhpcywgcGVyZm9ybWFuY2VFbnRyaWVzKSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgX2NvbnRleHRcbiAgICovXG4gIF9jbGVhckNvbnRleHQoKSB7XG4gICAgLy8gWFhYOiBgaW5pdGlhbFRpbWVzdGFtcGAgYW5kIGBpbml0aWFsVXJsYCBkbyBub3QgZ2V0IGNsZWFyZWRcbiAgICB0aGlzLl9jb250ZXh0LmVycm9ySWRzLmNsZWFyKCk7XG4gICAgdGhpcy5fY29udGV4dC50cmFjZUlkcy5jbGVhcigpO1xuICAgIHRoaXMuX2NvbnRleHQudXJscyA9IFtdO1xuICB9XG5cbiAgLyoqIFVwZGF0ZSB0aGUgaW5pdGlhbCB0aW1lc3RhbXAgYmFzZWQgb24gdGhlIGJ1ZmZlciBjb250ZW50LiAqL1xuICBfdXBkYXRlSW5pdGlhbFRpbWVzdGFtcEZyb21FdmVudEJ1ZmZlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBzZXNzaW9uLFxuICAgICAgZXZlbnRCdWZmZXJcbiAgICB9ID0gdGhpcztcbiAgICAvLyBJZiByZXBsYXkgd2FzIHN0YXJ0ZWQgbWFudWFsbHkgKD1ubyBzYW1wbGUgcmF0ZSB3YXMgZ2l2ZW4pLFxuICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIGJhY2stcG9ydCB0aGUgaW5pdGlhbCB0aW1lc3RhbXBcbiAgICBpZiAoIXNlc3Npb24gfHwgIWV2ZW50QnVmZmVyIHx8IHRoaXMuX3JlcXVpcmVzTWFudWFsU3RhcnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyB3ZSBvbmx5IGV2ZXIgdXBkYXRlIHRoaXMgb24gdGhlIGluaXRpYWwgc2VnbWVudFxuICAgIGlmIChzZXNzaW9uLnNlZ21lbnRJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlYXJsaWVzdEV2ZW50ID0gZXZlbnRCdWZmZXIuZ2V0RWFybGllc3RUaW1lc3RhbXAoKTtcbiAgICBpZiAoZWFybGllc3RFdmVudCAmJiBlYXJsaWVzdEV2ZW50IDwgdGhpcy5fY29udGV4dC5pbml0aWFsVGltZXN0YW1wKSB7XG4gICAgICB0aGlzLl9jb250ZXh0LmluaXRpYWxUaW1lc3RhbXAgPSBlYXJsaWVzdEV2ZW50O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW5kIGNsZWFyIF9jb250ZXh0XG4gICAqL1xuICBfcG9wRXZlbnRDb250ZXh0KCkge1xuICAgIGNvbnN0IF9jb250ZXh0ID0ge1xuICAgICAgaW5pdGlhbFRpbWVzdGFtcDogdGhpcy5fY29udGV4dC5pbml0aWFsVGltZXN0YW1wLFxuICAgICAgaW5pdGlhbFVybDogdGhpcy5fY29udGV4dC5pbml0aWFsVXJsLFxuICAgICAgZXJyb3JJZHM6IEFycmF5LmZyb20odGhpcy5fY29udGV4dC5lcnJvcklkcyksXG4gICAgICB0cmFjZUlkczogQXJyYXkuZnJvbSh0aGlzLl9jb250ZXh0LnRyYWNlSWRzKSxcbiAgICAgIHVybHM6IHRoaXMuX2NvbnRleHQudXJsc1xuICAgIH07XG4gICAgdGhpcy5fY2xlYXJDb250ZXh0KCk7XG4gICAgcmV0dXJuIF9jb250ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoZXMgcmVwbGF5IGV2ZW50IGJ1ZmZlciB0byBTZW50cnkuXG4gICAqXG4gICAqIFBlcmZvcm1hbmNlIGV2ZW50cyBhcmUgb25seSBhZGRlZCByaWdodCBiZWZvcmUgZmx1c2hpbmcgLSB0aGlzIGlzXG4gICAqIGR1ZSB0byB0aGUgYnVmZmVyZWQgcGVyZm9ybWFuY2Ugb2JzZXJ2ZXIgZXZlbnRzLlxuICAgKlxuICAgKiBTaG91bGQgbmV2ZXIgYmUgY2FsbGVkIGRpcmVjdGx5LCBvbmx5IGJ5IGBmbHVzaGBcbiAgICovXG4gIGFzeW5jIF9ydW5GbHVzaCgpIHtcbiAgICBjb25zdCByZXBsYXlJZCA9IHRoaXMuZ2V0U2Vzc2lvbklkKCk7XG4gICAgaWYgKCF0aGlzLnNlc3Npb24gfHwgIXRoaXMuZXZlbnRCdWZmZXIgfHwgIXJlcGxheUlkKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuZXJyb3IoJ05vIHNlc3Npb24gb3IgZXZlbnRCdWZmZXIgZm91bmQgdG8gZmx1c2guJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuX2FkZFBlcmZvcm1hbmNlRW50cmllcygpO1xuXG4gICAgLy8gQ2hlY2sgZXZlbnRCdWZmZXIgYWdhaW4sIGFzIGl0IGNvdWxkIGhhdmUgYmVlbiBzdG9wcGVkIGluIHRoZSBtZWFud2hpbGVcbiAgICBpZiAoIXRoaXMuZXZlbnRCdWZmZXI/Lmhhc0V2ZW50cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE9ubHkgYXR0YWNoIG1lbW9yeSBldmVudCBpZiBldmVudEJ1ZmZlciBpcyBub3QgZW1wdHlcbiAgICBhd2FpdCBhZGRNZW1vcnlFbnRyeSh0aGlzKTtcblxuICAgIC8vIENoZWNrIGV2ZW50QnVmZmVyIGFnYWluLCBhcyBpdCBjb3VsZCBoYXZlIGJlZW4gc3RvcHBlZCBpbiB0aGUgbWVhbndoaWxlXG4gICAgaWYgKCF0aGlzLmV2ZW50QnVmZmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgdGhpcyBjaGFuZ2VkIGluIHRoZSBtZWFud2hpbGUsIGUuZy4gYmVjYXVzZSB0aGUgc2Vzc2lvbiB3YXMgcmVmcmVzaGVkIG9yIHNpbWlsYXIsIHdlIGFib3J0IGhlcmVcbiAgICBpZiAocmVwbGF5SWQgIT09IHRoaXMuZ2V0U2Vzc2lvbklkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRoaXMgdXNlcyB0aGUgZGF0YSBmcm9tIHRoZSBldmVudEJ1ZmZlciwgc28gd2UgbmVlZCB0byBjYWxsIHRoaXMgYmVmb3JlIGBmaW5pc2goKVxuICAgICAgdGhpcy5fdXBkYXRlSW5pdGlhbFRpbWVzdGFtcEZyb21FdmVudEJ1ZmZlcigpO1xuICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gQ2hlY2sgdG90YWwgZHVyYXRpb24gYWdhaW4sIHRvIGF2b2lkIHNlbmRpbmcgb3V0ZGF0ZWQgc3R1ZmZcbiAgICAgIC8vIFdlIGxlYXZlIDMwcyB3aWdnbGUgcm9vbSB0byBhY2NvbW1vZGF0ZSBsYXRlIGZsdXNoaW5nIGV0Yy5cbiAgICAgIC8vIFRoaXMgX2NvdWxkXyBoYXBwZW4gd2hlbiB0aGUgYnJvd3NlciBpcyBzdXNwZW5kZWQgZHVyaW5nIGZsdXNoaW5nLCBpbiB3aGljaCBjYXNlIHdlIGp1c3Qgd2FudCB0byBzdG9wXG4gICAgICBpZiAodGltZXN0YW1wIC0gdGhpcy5fY29udGV4dC5pbml0aWFsVGltZXN0YW1wID4gdGhpcy5fb3B0aW9ucy5tYXhSZXBsYXlEdXJhdGlvbiArIDMwMDAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2Vzc2lvbiBpcyB0b28gbG9uZywgbm90IHNlbmRpbmcgcmVwbGF5Jyk7XG4gICAgICB9XG4gICAgICBjb25zdCBldmVudENvbnRleHQgPSB0aGlzLl9wb3BFdmVudENvbnRleHQoKTtcbiAgICAgIC8vIEFsd2F5cyBpbmNyZW1lbnQgc2VnbWVudElkIHJlZ2FyZGxlc3Mgb2Ygb3V0Y29tZSBvZiBzZW5kaW5nIHJlcGxheVxuICAgICAgY29uc3Qgc2VnbWVudElkID0gdGhpcy5zZXNzaW9uLnNlZ21lbnRJZCsrO1xuICAgICAgdGhpcy5fbWF5YmVTYXZlU2Vzc2lvbigpO1xuXG4gICAgICAvLyBOb3RlIHRoaXMgZW1wdGllcyB0aGUgZXZlbnQgYnVmZmVyIHJlZ2FyZGxlc3Mgb2Ygb3V0Y29tZSBvZiBzZW5kaW5nIHJlcGxheVxuICAgICAgY29uc3QgcmVjb3JkaW5nRGF0YSA9IGF3YWl0IHRoaXMuZXZlbnRCdWZmZXIuZmluaXNoKCk7XG4gICAgICBhd2FpdCBzZW5kUmVwbGF5KHtcbiAgICAgICAgcmVwbGF5SWQsXG4gICAgICAgIHJlY29yZGluZ0RhdGEsXG4gICAgICAgIHNlZ21lbnRJZCxcbiAgICAgICAgZXZlbnRDb250ZXh0LFxuICAgICAgICBzZXNzaW9uOiB0aGlzLnNlc3Npb24sXG4gICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgb25FcnJvcjogZXJyID0+IHRoaXMuaGFuZGxlRXhjZXB0aW9uKGVycilcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5oYW5kbGVFeGNlcHRpb24oZXJyKTtcblxuICAgICAgLy8gVGhpcyBtZWFucyB3ZSByZXRyaWVkIDMgdGltZXMgYW5kIGFsbCBvZiB0aGVtIGZhaWxlZCxcbiAgICAgIC8vIG9yIHdlIHJhbiBpbnRvIGEgcHJvYmxlbSB3ZSBkb24ndCB3YW50IHRvIHJldHJ5LCBsaWtlIHJhdGUgbGltaXRpbmcuXG4gICAgICAvLyBJbiB0aGlzIGNhc2UsIHdlIHdhbnQgdG8gY29tcGxldGVseSBzdG9wIHRoZSByZXBsYXkgLSBvdGhlcndpc2UsIHdlIG1heSBnZXQgaW5jb25zaXN0ZW50IHNlZ21lbnRzXG4gICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciByZWplY3RcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgIHRoaXMuc3RvcCh7XG4gICAgICAgIHJlYXNvbjogJ3NlbmRSZXBsYXknXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xuICAgICAgaWYgKGNsaWVudCkge1xuICAgICAgICBjb25zdCBkcm9wUmVhc29uID0gZXJyIGluc3RhbmNlb2YgUmF0ZUxpbWl0RXJyb3IgPyAncmF0ZWxpbWl0X2JhY2tvZmYnIDogJ3NlbmRfZXJyb3InO1xuICAgICAgICBjbGllbnQucmVjb3JkRHJvcHBlZEV2ZW50KGRyb3BSZWFzb24sICdyZXBsYXknKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmx1c2ggcmVjb3JkaW5nIGRhdGEgdG8gU2VudHJ5LiBDcmVhdGVzIGEgbG9jayBzbyB0aGF0IG9ubHkgYSBzaW5nbGUgZmx1c2hcbiAgICogY2FuIGJlIGFjdGl2ZSBhdCBhIHRpbWUuIERvIG5vdCBjYWxsIHRoaXMgZGlyZWN0bHkuXG4gICAqL1xuICBhc3luYyBfZmx1c2goe1xuICAgIGZvcmNlID0gZmFsc2VcbiAgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQgJiYgIWZvcmNlKSB7XG4gICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgZS5nLiB0aGUgcmVwbGF5IHdhcyBzdG9wcGVkIGJlY2F1c2Ugb2YgZXhjZWVkaW5nIHRoZSByZXRyeSBsaW1pdFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuY2hlY2tBbmRIYW5kbGVFeHBpcmVkU2Vzc2lvbigpKSB7XG4gICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuZXJyb3IoJ0F0dGVtcHRpbmcgdG8gZmluaXNoIHJlcGxheSBldmVudCBhZnRlciBzZXNzaW9uIGV4cGlyZWQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy5zZXNzaW9uKSB7XG4gICAgICAvLyBzaG91bGQgbmV2ZXIgaGFwcGVuLCBhcyB3ZSB3b3VsZCBoYXZlIGJhaWxlZCBvdXQgYmVmb3JlXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5zZXNzaW9uLnN0YXJ0ZWQ7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IG5vdyAtIHN0YXJ0O1xuXG4gICAgLy8gQSBmbHVzaCBpcyBhYm91dCB0byBoYXBwZW4sIGNhbmNlbCBhbnkgcXVldWVkIGZsdXNoZXNcbiAgICB0aGlzLl9kZWJvdW5jZWRGbHVzaC5jYW5jZWwoKTtcblxuICAgIC8vIElmIHNlc3Npb24gaXMgdG9vIHNob3J0LCBvciB0b28gbG9uZyAoYWxsb3cgc29tZSB3aWdnbGUgcm9vbSBvdmVyIG1heFJlcGxheUR1cmF0aW9uKSwgZG8gbm90IHNlbmQgaXRcbiAgICAvLyBUaGlzIF9zaG91bGRfIG5vdCBoYXBwZW4sIGJ1dCBpdCBtYXkgaGFwcGVuIGlmIGZsdXNoIGlzIHRyaWdnZXJlZCBkdWUgdG8gYSBwYWdlIGFjdGl2aXR5IGNoYW5nZSBvciBzaW1pbGFyXG4gICAgY29uc3QgdG9vU2hvcnQgPSBkdXJhdGlvbiA8IHRoaXMuX29wdGlvbnMubWluUmVwbGF5RHVyYXRpb247XG4gICAgY29uc3QgdG9vTG9uZyA9IGR1cmF0aW9uID4gdGhpcy5fb3B0aW9ucy5tYXhSZXBsYXlEdXJhdGlvbiArIDUwMDA7XG4gICAgaWYgKHRvb1Nob3J0IHx8IHRvb0xvbmcpIHtcbiAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5pbmZvKGBTZXNzaW9uIGR1cmF0aW9uICgke01hdGguZmxvb3IoZHVyYXRpb24gLyAxMDAwKX1zKSBpcyB0b28gJHt0b29TaG9ydCA/ICdzaG9ydCcgOiAnbG9uZyd9LCBub3Qgc2VuZGluZyByZXBsYXkuYCk7XG4gICAgICBpZiAodG9vU2hvcnQpIHtcbiAgICAgICAgdGhpcy5fZGVib3VuY2VkRmx1c2goKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZXZlbnRCdWZmZXIgPSB0aGlzLmV2ZW50QnVmZmVyO1xuICAgIGlmIChldmVudEJ1ZmZlciAmJiB0aGlzLnNlc3Npb24uc2VnbWVudElkID09PSAwICYmICFldmVudEJ1ZmZlci5oYXNDaGVja291dCkge1xuICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmluZm8oJ0ZsdXNoaW5nIGluaXRpYWwgc2VnbWVudCB3aXRob3V0IGNoZWNrb3V0LicpO1xuICAgICAgLy8gVE9ETyBGTjogRXZhbHVhdGUgaWYgd2Ugd2FudCB0byBzdG9wIGhlcmUsIG9yIHJlbW92ZSB0aGlzIGFnYWluP1xuICAgIH1cbiAgICBjb25zdCBfZmx1c2hJblByb2dyZXNzID0gISF0aGlzLl9mbHVzaExvY2s7XG5cbiAgICAvLyB0aGlzLl9mbHVzaExvY2sgYWN0cyBhcyBhIGxvY2sgc28gdGhhdCBmdXR1cmUgY2FsbHMgdG8gYF9mbHVzaCgpYCB3aWxsXG4gICAgLy8gYmUgYmxvY2tlZCB1bnRpbCBjdXJyZW50IGZsdXNoIGlzIGZpbmlzaGVkIChpLmUuIHRoaXMgcHJvbWlzZSByZXNvbHZlcylcbiAgICBpZiAoIXRoaXMuX2ZsdXNoTG9jaykge1xuICAgICAgdGhpcy5fZmx1c2hMb2NrID0gdGhpcy5fcnVuRmx1c2goKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuX2ZsdXNoTG9jaztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXhjZXB0aW9uKGVycik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuX2ZsdXNoTG9jayA9IHVuZGVmaW5lZDtcbiAgICAgIGlmIChfZmx1c2hJblByb2dyZXNzKSB7XG4gICAgICAgIC8vIFdhaXQgZm9yIHByZXZpb3VzIGZsdXNoIHRvIGZpbmlzaCwgdGhlbiBjYWxsIHRoZSBkZWJvdW5jZWRcbiAgICAgICAgLy8gYF9mbHVzaCgpYC4gSXQncyBwb3NzaWJsZSB0aGVyZSBhcmUgb3RoZXIgZmx1c2ggcmVxdWVzdHMgcXVldWVkIGFuZFxuICAgICAgICAvLyB3YWl0aW5nIGZvciBpdCB0byByZXNvbHZlLiBXZSB3YW50IHRvIHJlZHVjZSBhbGwgb3V0c3RhbmRpbmdcbiAgICAgICAgLy8gcmVxdWVzdHMgKGFzIHdlbGwgYXMgYW55IG5ldyBmbHVzaCByZXF1ZXN0cyB0aGF0IG9jY3VyIHdpdGhpbiBhXG4gICAgICAgIC8vIHNlY29uZCBvZiB0aGUgbG9ja2VkIGZsdXNoIGNvbXBsZXRpbmcpIGludG8gYSBzaW5nbGUgZmx1c2guXG4gICAgICAgIHRoaXMuX2RlYm91bmNlZEZsdXNoKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIFNhdmUgdGhlIHNlc3Npb24sIGlmIGl0IGlzIHN0aWNreSAqL1xuICBfbWF5YmVTYXZlU2Vzc2lvbigpIHtcbiAgICBpZiAodGhpcy5zZXNzaW9uICYmIHRoaXMuX29wdGlvbnMuc3RpY2t5U2Vzc2lvbikge1xuICAgICAgc2F2ZVNlc3Npb24odGhpcy5zZXNzaW9uKTtcbiAgICB9XG4gIH1cblxuICAvKiogSGFuZGxlciBmb3IgcnJ3ZWIucmVjb3JkLm9uTXV0YXRpb24gKi9cbiAgX29uTXV0YXRpb25IYW5kbGVyKG11dGF0aW9ucykge1xuICAgIGNvbnN0IHtcbiAgICAgIGlnbm9yZU11dGF0aW9uc1xuICAgIH0gPSB0aGlzLl9vcHRpb25zLl9leHBlcmltZW50cztcbiAgICBpZiAoaWdub3JlTXV0YXRpb25zPy5sZW5ndGgpIHtcbiAgICAgIGlmIChtdXRhdGlvbnMuc29tZShtdXRhdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IGVsID0gY2xvc2VzdEVsZW1lbnRPZk5vZGUobXV0YXRpb24udGFyZ2V0KTtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBpZ25vcmVNdXRhdGlvbnMuam9pbignLCcpO1xuICAgICAgICByZXR1cm4gZWw/Lm1hdGNoZXMoc2VsZWN0b3IpO1xuICAgICAgfSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjb3VudCA9IG11dGF0aW9ucy5sZW5ndGg7XG4gICAgY29uc3QgbXV0YXRpb25MaW1pdCA9IHRoaXMuX29wdGlvbnMubXV0YXRpb25MaW1pdDtcbiAgICBjb25zdCBtdXRhdGlvbkJyZWFkY3J1bWJMaW1pdCA9IHRoaXMuX29wdGlvbnMubXV0YXRpb25CcmVhZGNydW1iTGltaXQ7XG4gICAgY29uc3Qgb3Zlck11dGF0aW9uTGltaXQgPSBtdXRhdGlvbkxpbWl0ICYmIGNvdW50ID4gbXV0YXRpb25MaW1pdDtcblxuICAgIC8vIENyZWF0ZSBhIGJyZWFkY3J1bWIgaWYgYSBsb3Qgb2YgbXV0YXRpb25zIGhhcHBlbiBhdCB0aGUgc2FtZSB0aW1lXG4gICAgLy8gV2UgY2FuIHNob3cgdGhpcyBpbiB0aGUgVUkgYXMgYW4gaW5mb3JtYXRpb24gd2l0aCBwb3RlbnRpYWwgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzXG4gICAgaWYgKGNvdW50ID4gbXV0YXRpb25CcmVhZGNydW1iTGltaXQgfHwgb3Zlck11dGF0aW9uTGltaXQpIHtcbiAgICAgIGNvbnN0IGJyZWFkY3J1bWIgPSBjcmVhdGVCcmVhZGNydW1iKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdyZXBsYXkubXV0YXRpb25zJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNvdW50LFxuICAgICAgICAgIGxpbWl0OiBvdmVyTXV0YXRpb25MaW1pdFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2NyZWF0ZUN1c3RvbUJyZWFkY3J1bWIoYnJlYWRjcnVtYik7XG4gICAgfVxuXG4gICAgLy8gU3RvcCByZXBsYXkgaWYgb3ZlciB0aGUgbXV0YXRpb24gbGltaXRcbiAgICBpZiAob3Zlck11dGF0aW9uTGltaXQpIHtcbiAgICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIHJlamVjdFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgdGhpcy5zdG9wKHtcbiAgICAgICAgcmVhc29uOiAnbXV0YXRpb25MaW1pdCcsXG4gICAgICAgIGZvcmNlRmx1c2g6IHRoaXMucmVjb3JkaW5nTW9kZSA9PT0gJ3Nlc3Npb24nXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBgdHJ1ZWAgbWVhbnMgd2UgdXNlIHRoZSByZWd1bGFyIG11dGF0aW9uIGhhbmRsaW5nIGJ5IHJyd2ViXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldE9wdGlvbihzZWxlY3RvcnMsIGRlZmF1bHRTZWxlY3RvcnMpIHtcbiAgcmV0dXJuIFsuLi5zZWxlY3RvcnMsXG4gIC8vIHNlbnRyeSBkZWZhdWx0c1xuICAuLi5kZWZhdWx0U2VsZWN0b3JzXS5qb2luKCcsJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBwcml2YWN5IHJlbGF0ZWQgY29uZmlndXJhdGlvbiBmb3IgdXNlIGluIHJyd2ViXG4gKi9cbmZ1bmN0aW9uIGdldFByaXZhY3lPcHRpb25zKHtcbiAgbWFzayxcbiAgdW5tYXNrLFxuICBibG9jayxcbiAgdW5ibG9jayxcbiAgaWdub3JlXG59KSB7XG4gIGNvbnN0IGRlZmF1bHRCbG9ja2VkRWxlbWVudHMgPSBbJ2Jhc2UnLCAnaWZyYW1lW3NyY2RvY106bm90KFtzcmNdKSddO1xuICBjb25zdCBtYXNrU2VsZWN0b3IgPSBnZXRPcHRpb24obWFzaywgWycuc2VudHJ5LW1hc2snLCAnW2RhdGEtc2VudHJ5LW1hc2tdJ10pO1xuICBjb25zdCB1bm1hc2tTZWxlY3RvciA9IGdldE9wdGlvbih1bm1hc2ssIFtdKTtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAvLyBXZSBhcmUgbWFraW5nIHRoZSBkZWNpc2lvbiB0byBtYWtlIHRleHQgYW5kIGlucHV0IHNlbGVjdG9ycyB0aGUgc2FtZVxuICAgIG1hc2tUZXh0U2VsZWN0b3I6IG1hc2tTZWxlY3RvcixcbiAgICB1bm1hc2tUZXh0U2VsZWN0b3I6IHVubWFza1NlbGVjdG9yLFxuICAgIGJsb2NrU2VsZWN0b3I6IGdldE9wdGlvbihibG9jaywgWycuc2VudHJ5LWJsb2NrJywgJ1tkYXRhLXNlbnRyeS1ibG9ja10nLCAuLi5kZWZhdWx0QmxvY2tlZEVsZW1lbnRzXSksXG4gICAgdW5ibG9ja1NlbGVjdG9yOiBnZXRPcHRpb24odW5ibG9jaywgW10pLFxuICAgIGlnbm9yZVNlbGVjdG9yOiBnZXRPcHRpb24oaWdub3JlLCBbJy5zZW50cnktaWdub3JlJywgJ1tkYXRhLXNlbnRyeS1pZ25vcmVdJywgJ2lucHV0W3R5cGU9XCJmaWxlXCJdJ10pXG4gIH07XG4gIHJldHVybiBvcHRpb25zO1xufVxuXG4vKipcbiAqIE1hc2tzIGFuIGF0dHJpYnV0ZSBpZiBuZWNlc3NhcnksIG90aGVyd2lzZSByZXR1cm4gYXR0cmlidXRlIHZhbHVlIGFzLWlzLlxuICovXG5mdW5jdGlvbiBtYXNrQXR0cmlidXRlKHtcbiAgZWwsXG4gIGtleSxcbiAgbWFza0F0dHJpYnV0ZXMsXG4gIG1hc2tBbGxUZXh0LFxuICBwcml2YWN5T3B0aW9ucyxcbiAgdmFsdWVcbn0pIHtcbiAgLy8gV2Ugb25seSBtYXNrIGF0dHJpYnV0ZXMgaWYgYG1hc2tBbGxUZXh0YCBpcyB0cnVlXG4gIGlmICghbWFza0FsbFRleHQpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvLyB1bm1hc2tUZXh0U2VsZWN0b3IgdGFrZXMgcHJlY2VkZW5jZVxuICBpZiAocHJpdmFjeU9wdGlvbnMudW5tYXNrVGV4dFNlbGVjdG9yICYmIGVsLm1hdGNoZXMocHJpdmFjeU9wdGlvbnMudW5tYXNrVGV4dFNlbGVjdG9yKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAobWFza0F0dHJpYnV0ZXMuaW5jbHVkZXMoa2V5KSB8fFxuICAvLyBOZWVkIHRvIG1hc2sgYHZhbHVlYCBhdHRyaWJ1dGUgZm9yIGA8aW5wdXQ+YCBpZiBpdCdzIGEgYnV0dG9uLWxpa2VcbiAgLy8gdHlwZVxuICBrZXkgPT09ICd2YWx1ZScgJiYgZWwudGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiBbJ3N1Ym1pdCcsICdidXR0b24nXS5pbmNsdWRlcyhlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSB8fCAnJykpIHtcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvW1xcU10vZywgJyonKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5jb25zdCBNRURJQV9TRUxFQ1RPUlMgPSAnaW1nLGltYWdlLHN2Zyx2aWRlbyxvYmplY3QscGljdHVyZSxlbWJlZCxtYXAsYXVkaW8sbGlua1tyZWw9XCJpY29uXCJdLGxpbmtbcmVsPVwiYXBwbGUtdG91Y2gtaWNvblwiXSc7XG5jb25zdCBERUZBVUxUX05FVFdPUktfSEVBREVSUyA9IFsnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2FjY2VwdCddO1xubGV0IF9pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4vKipcbiAqIFNlbnRyeSBpbnRlZ3JhdGlvbiBmb3IgW1Nlc3Npb24gUmVwbGF5XShodHRwczovL3NlbnRyeS5pby9mb3Ivc2Vzc2lvbi1yZXBsYXkvKS5cbiAqXG4gKiBTZWUgdGhlIFtSZXBsYXkgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9kb2NzLnNlbnRyeS5pby9wbGF0Zm9ybXMvamF2YXNjcmlwdC9ndWlkZXMvc2Vzc2lvbi1yZXBsYXkvKSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYFxuICogU2VudHJ5LmluaXQoe1xuICogICBkc246ICdfX0RTTl9fJyxcbiAqICAgaW50ZWdyYXRpb25zOiBbU2VudHJ5LnJlcGxheUludGVncmF0aW9uKCldLFxuICogfSk7XG4gKiBgYGBcbiAqL1xuY29uc3QgcmVwbGF5SW50ZWdyYXRpb24gPSBvcHRpb25zID0+IHtcbiAgcmV0dXJuIG5ldyBSZXBsYXkob3B0aW9ucyk7XG59O1xuXG4vKipcbiAqIFJlcGxheSBpbnRlZ3JhdGlvblxuICovXG5jbGFzcyBSZXBsYXkge1xuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG5cbiAgLyoqXG4gICAqIE9wdGlvbnMgdG8gcGFzcyB0byBgcnJ3ZWIucmVjb3JkKClgXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSByZXBsYXkgaW50ZWdyYXRpb24sIG1lcmdlZCB3aXRoIGRlZmF1bHQgdmFsdWVzLlxuICAgKiBOb3RlOiBgc2Vzc2lvblNhbXBsZVJhdGVgIGFuZCBgZXJyb3JTYW1wbGVSYXRlYCBhcmUgbm90IHJlcXVpcmVkIGhlcmUsIGFzIHRoZXlcbiAgICogY2FuIG9ubHkgYmUgZmluYWxseSBzZXQgd2hlbiBzZXR1cE9uY2UoKSBpcyBjYWxsZWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBmbHVzaE1pbkRlbGF5ID0gREVGQVVMVF9GTFVTSF9NSU5fREVMQVksXG4gICAgZmx1c2hNYXhEZWxheSA9IERFRkFVTFRfRkxVU0hfTUFYX0RFTEFZLFxuICAgIG1pblJlcGxheUR1cmF0aW9uID0gTUlOX1JFUExBWV9EVVJBVElPTixcbiAgICBtYXhSZXBsYXlEdXJhdGlvbiA9IE1BWF9SRVBMQVlfRFVSQVRJT04sXG4gICAgc3RpY2t5U2Vzc2lvbiA9IHRydWUsXG4gICAgdXNlQ29tcHJlc3Npb24gPSB0cnVlLFxuICAgIHdvcmtlclVybCxcbiAgICBfZXhwZXJpbWVudHMgPSB7fSxcbiAgICBtYXNrQWxsVGV4dCA9IHRydWUsXG4gICAgbWFza0FsbElucHV0cyA9IHRydWUsXG4gICAgYmxvY2tBbGxNZWRpYSA9IHRydWUsXG4gICAgbXV0YXRpb25CcmVhZGNydW1iTGltaXQgPSA3NTAsXG4gICAgbXV0YXRpb25MaW1pdCA9IDEwMDAwLFxuICAgIHNsb3dDbGlja1RpbWVvdXQgPSA3MDAwLFxuICAgIHNsb3dDbGlja0lnbm9yZVNlbGVjdG9ycyA9IFtdLFxuICAgIG5ldHdvcmtEZXRhaWxBbGxvd1VybHMgPSBbXSxcbiAgICBuZXR3b3JrRGV0YWlsRGVueVVybHMgPSBbXSxcbiAgICBuZXR3b3JrQ2FwdHVyZUJvZGllcyA9IHRydWUsXG4gICAgbmV0d29ya1JlcXVlc3RIZWFkZXJzID0gW10sXG4gICAgbmV0d29ya1Jlc3BvbnNlSGVhZGVycyA9IFtdLFxuICAgIG1hc2sgPSBbXSxcbiAgICBtYXNrQXR0cmlidXRlcyA9IFsndGl0bGUnLCAncGxhY2Vob2xkZXInLCAnYXJpYS1sYWJlbCddLFxuICAgIHVubWFzayA9IFtdLFxuICAgIGJsb2NrID0gW10sXG4gICAgdW5ibG9jayA9IFtdLFxuICAgIGlnbm9yZSA9IFtdLFxuICAgIG1hc2tGbixcbiAgICBiZWZvcmVBZGRSZWNvcmRpbmdFdmVudCxcbiAgICBiZWZvcmVFcnJvclNhbXBsaW5nLFxuICAgIG9uRXJyb3JcbiAgfSA9IHt9KSB7XG4gICAgdGhpcy5uYW1lID0gJ1JlcGxheSc7XG4gICAgY29uc3QgcHJpdmFjeU9wdGlvbnMgPSBnZXRQcml2YWN5T3B0aW9ucyh7XG4gICAgICBtYXNrLFxuICAgICAgdW5tYXNrLFxuICAgICAgYmxvY2ssXG4gICAgICB1bmJsb2NrLFxuICAgICAgaWdub3JlXG4gICAgfSk7XG4gICAgdGhpcy5fcmVjb3JkaW5nT3B0aW9ucyA9IHtcbiAgICAgIG1hc2tBbGxJbnB1dHMsXG4gICAgICBtYXNrQWxsVGV4dCxcbiAgICAgIG1hc2tJbnB1dE9wdGlvbnM6IHtcbiAgICAgICAgcGFzc3dvcmQ6IHRydWVcbiAgICAgIH0sXG4gICAgICBtYXNrVGV4dEZuOiBtYXNrRm4sXG4gICAgICBtYXNrSW5wdXRGbjogbWFza0ZuLFxuICAgICAgbWFza0F0dHJpYnV0ZUZuOiAoa2V5LCB2YWx1ZSwgZWwpID0+IG1hc2tBdHRyaWJ1dGUoe1xuICAgICAgICBtYXNrQXR0cmlidXRlcyxcbiAgICAgICAgbWFza0FsbFRleHQsXG4gICAgICAgIHByaXZhY3lPcHRpb25zLFxuICAgICAgICBrZXksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBlbFxuICAgICAgfSksXG4gICAgICAuLi5wcml2YWN5T3B0aW9ucyxcbiAgICAgIC8vIE91ciBkZWZhdWx0c1xuICAgICAgc2xpbURPTU9wdGlvbnM6ICdhbGwnLFxuICAgICAgaW5saW5lU3R5bGVzaGVldDogdHJ1ZSxcbiAgICAgIC8vIERpc2FibGUgaW5saW5lIGltYWdlcyBhcyBpdCB3aWxsIGluY3JlYXNlIHNlZ21lbnQvcmVwbGF5IHNpemVcbiAgICAgIGlubGluZUltYWdlczogZmFsc2UsXG4gICAgICAvLyBjb2xsZWN0IGZvbnRzLCBidXQgYmUgYXdhcmUgdGhhdCBgc2VudHJ5LmlvYCBuZWVkcyB0byBiZSBhbiBhbGxvd2VkXG4gICAgICAvLyBvcmlnaW4gZm9yIHBsYXliYWNrXG4gICAgICBjb2xsZWN0Rm9udHM6IHRydWUsXG4gICAgICBlcnJvckhhbmRsZXI6IGVyciA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZXJyLl9fcnJ3ZWJfXyA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBoZXJlXG4gICAgICAgICAgLy8gdGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBlcnJvciBpcyBmcm96ZW4gb3IgZG9lcyBub3QgYWxsb3cgbXV0YXRpb24gZm9yIG90aGVyIHJlYXNvbnNcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIGV4cGVyaW1lbnRhbCBzdXBwb3J0IGZvciByZWNvcmRpbmcgaWZyYW1lcyBmcm9tIGRpZmZlcmVudCBvcmlnaW5zXG4gICAgICByZWNvcmRDcm9zc09yaWdpbklmcmFtZXM6IEJvb2xlYW4oX2V4cGVyaW1lbnRzLnJlY29yZENyb3NzT3JpZ2luSWZyYW1lcylcbiAgICB9O1xuICAgIHRoaXMuX2luaXRpYWxPcHRpb25zID0ge1xuICAgICAgZmx1c2hNaW5EZWxheSxcbiAgICAgIGZsdXNoTWF4RGVsYXksXG4gICAgICBtaW5SZXBsYXlEdXJhdGlvbjogTWF0aC5taW4obWluUmVwbGF5RHVyYXRpb24sIE1JTl9SRVBMQVlfRFVSQVRJT05fTElNSVQpLFxuICAgICAgbWF4UmVwbGF5RHVyYXRpb246IE1hdGgubWluKG1heFJlcGxheUR1cmF0aW9uLCBNQVhfUkVQTEFZX0RVUkFUSU9OKSxcbiAgICAgIHN0aWNreVNlc3Npb24sXG4gICAgICB1c2VDb21wcmVzc2lvbixcbiAgICAgIHdvcmtlclVybCxcbiAgICAgIGJsb2NrQWxsTWVkaWEsXG4gICAgICBtYXNrQWxsSW5wdXRzLFxuICAgICAgbWFza0FsbFRleHQsXG4gICAgICBtdXRhdGlvbkJyZWFkY3J1bWJMaW1pdCxcbiAgICAgIG11dGF0aW9uTGltaXQsXG4gICAgICBzbG93Q2xpY2tUaW1lb3V0LFxuICAgICAgc2xvd0NsaWNrSWdub3JlU2VsZWN0b3JzLFxuICAgICAgbmV0d29ya0RldGFpbEFsbG93VXJscyxcbiAgICAgIG5ldHdvcmtEZXRhaWxEZW55VXJscyxcbiAgICAgIG5ldHdvcmtDYXB0dXJlQm9kaWVzLFxuICAgICAgbmV0d29ya1JlcXVlc3RIZWFkZXJzOiBfZ2V0TWVyZ2VkTmV0d29ya0hlYWRlcnMobmV0d29ya1JlcXVlc3RIZWFkZXJzKSxcbiAgICAgIG5ldHdvcmtSZXNwb25zZUhlYWRlcnM6IF9nZXRNZXJnZWROZXR3b3JrSGVhZGVycyhuZXR3b3JrUmVzcG9uc2VIZWFkZXJzKSxcbiAgICAgIGJlZm9yZUFkZFJlY29yZGluZ0V2ZW50LFxuICAgICAgYmVmb3JlRXJyb3JTYW1wbGluZyxcbiAgICAgIG9uRXJyb3IsXG4gICAgICBfZXhwZXJpbWVudHNcbiAgICB9O1xuICAgIGlmICh0aGlzLl9pbml0aWFsT3B0aW9ucy5ibG9ja0FsbE1lZGlhKSB7XG4gICAgICAvLyBgYmxvY2tBbGxNZWRpYWAgaXMgYSBtb3JlIHVzZXIgZnJpZW5kbHkgb3B0aW9uIHRvIGNvbmZpZ3VyZSBibG9ja2luZ1xuICAgICAgLy8gZW1iZWRkZWQgbWVkaWEgZWxlbWVudHNcbiAgICAgIHRoaXMuX3JlY29yZGluZ09wdGlvbnMuYmxvY2tTZWxlY3RvciA9ICF0aGlzLl9yZWNvcmRpbmdPcHRpb25zLmJsb2NrU2VsZWN0b3IgPyBNRURJQV9TRUxFQ1RPUlMgOiBgJHt0aGlzLl9yZWNvcmRpbmdPcHRpb25zLmJsb2NrU2VsZWN0b3J9LCR7TUVESUFfU0VMRUNUT1JTfWA7XG4gICAgfVxuICAgIGlmICh0aGlzLl9pc0luaXRpYWxpemVkICYmIGlzQnJvd3NlcigpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ011bHRpcGxlIFNlbnRyeSBTZXNzaW9uIFJlcGxheSBpbnN0YW5jZXMgYXJlIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9XG4gICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XG4gIH1cblxuICAvKiogSWYgcmVwbGF5IGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQgKi9cbiAgZ2V0IF9pc0luaXRpYWxpemVkKCkge1xuICAgIHJldHVybiBfaW5pdGlhbGl6ZWQ7XG4gIH1cblxuICAvKiogVXBkYXRlIF9pc0luaXRpYWxpemVkICovXG4gIHNldCBfaXNJbml0aWFsaXplZCh2YWx1ZSkge1xuICAgIF9pbml0aWFsaXplZCA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGFuZCBpbml0aWFsaXplIHJlcGxheSBjb250YWluZXJcbiAgICovXG4gIGFmdGVyQWxsU2V0dXAoY2xpZW50KSB7XG4gICAgaWYgKCFpc0Jyb3dzZXIoKSB8fCB0aGlzLl9yZXBsYXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fc2V0dXAoY2xpZW50KTtcbiAgICB0aGlzLl9pbml0aWFsaXplKGNsaWVudCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYSByZXBsYXkgcmVnYXJkbGVzcyBvZiBzYW1wbGluZyByYXRlLiBDYWxsaW5nIHRoaXMgd2lsbCBhbHdheXNcbiAgICogY3JlYXRlIGEgbmV3IHNlc3Npb24uIFdpbGwgbG9nIGEgbWVzc2FnZSBpZiByZXBsYXkgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy5cbiAgICpcbiAgICogQ3JlYXRlcyBvciBsb2FkcyBhIHNlc3Npb24sIGF0dGFjaGVzIGxpc3RlbmVycyB0byB2YXJ5aW5nIGV2ZW50cyAoRE9NLFxuICAgKiBQZXJmb3JtYW5jZU9ic2VydmVyLCBSZWNvcmRpbmcsIFNlbnRyeSBTREssIGV0YylcbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5fcmVwbGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3JlcGxheS5zdGFydCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHJlcGxheSBidWZmZXJpbmcuIEJ1ZmZlcnMgdW50aWwgYGZsdXNoKClgIGlzIGNhbGxlZCBvciwgaWZcbiAgICogYHJlcGxheXNPbkVycm9yU2FtcGxlUmF0ZWAgPiAwLCB1bnRpbCBhbiBlcnJvciBvY2N1cnMuXG4gICAqL1xuICBzdGFydEJ1ZmZlcmluZygpIHtcbiAgICBpZiAoIXRoaXMuX3JlcGxheSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9yZXBsYXkuc3RhcnRCdWZmZXJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDdXJyZW50bHksIHRoaXMgbmVlZHMgdG8gYmUgbWFudWFsbHkgY2FsbGVkIChlLmcuIGZvciB0ZXN0cykuIFNlbnRyeSBTREtcbiAgICogZG9lcyBub3Qgc3VwcG9ydCBhIHRlYXJkb3duXG4gICAqL1xuICBzdG9wKCkge1xuICAgIGlmICghdGhpcy5fcmVwbGF5KSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yZXBsYXkuc3RvcCh7XG4gICAgICBmb3JjZUZsdXNoOiB0aGlzLl9yZXBsYXkucmVjb3JkaW5nTW9kZSA9PT0gJ3Nlc3Npb24nXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSWYgbm90IGluIFwic2Vzc2lvblwiIHJlY29yZGluZyBtb2RlLCBmbHVzaCBldmVudCBidWZmZXIgd2hpY2ggd2lsbCBjcmVhdGUgYSBuZXcgcmVwbGF5LlxuICAgKiBJZiByZXBsYXkgaXMgbm90IGVuYWJsZWQsIGEgbmV3IHNlc3Npb24gcmVwbGF5IGlzIHN0YXJ0ZWQuXG4gICAqIFVubGVzcyBgY29udGludWVSZWNvcmRpbmdgIGlzIGZhbHNlLCB0aGUgcmVwbGF5IHdpbGwgY29udGludWUgdG8gcmVjb3JkIGFuZFxuICAgKiBiZWhhdmUgYXMgYSBcInNlc3Npb25cIi1iYXNlZCByZXBsYXkuXG4gICAqXG4gICAqIE90aGVyd2lzZSwgcXVldWUgdXAgYSBmbHVzaC5cbiAgICovXG4gIGZsdXNoKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuX3JlcGxheSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8vIGFzc3VtaW5nIGEgc2Vzc2lvbiBzaG91bGQgYmUgcmVjb3JkZWQgaW4gdGhpcyBjYXNlXG4gICAgaWYgKCF0aGlzLl9yZXBsYXkuaXNFbmFibGVkKCkpIHtcbiAgICAgIHRoaXMuX3JlcGxheS5zdGFydCgpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVwbGF5LnNlbmRCdWZmZXJlZFJlcGxheU9yRmx1c2gob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHNlc3Npb24gSUQuXG4gICAqL1xuICBnZXRSZXBsYXlJZCgpIHtcbiAgICBpZiAoIXRoaXMuX3JlcGxheT8uaXNFbmFibGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3JlcGxheS5nZXRTZXNzaW9uSWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVjb3JkaW5nIG1vZGUuIFRoaXMgY2FuIGJlIGVpdGhlciBgc2Vzc2lvbmAgb3IgYGJ1ZmZlcmAuXG4gICAqXG4gICAqIGBzZXNzaW9uYDogUmVjb3JkaW5nIHRoZSB3aG9sZSBzZXNzaW9uLCBzZW5kaW5nIGl0IGNvbnRpbnVvdXNseVxuICAgKiBgYnVmZmVyYDogQWx3YXlzIGtlZXBpbmcgdGhlIGxhc3QgNjBzIG9mIHJlY29yZGluZywgcmVxdWlyZXM6XG4gICAqICAgLSBoYXZpbmcgcmVwbGF5c09uRXJyb3JTYW1wbGVSYXRlID4gMCB0byBjYXB0dXJlIHJlcGxheSB3aGVuIGFuIGVycm9yIG9jY3Vyc1xuICAgKiAgIC0gb3IgY2FsbGluZyBgZmx1c2goKWAgdG8gc2VuZCB0aGUgcmVwbGF5XG4gICAqL1xuICBnZXRSZWNvcmRpbmdNb2RlKCkge1xuICAgIGlmICghdGhpcy5fcmVwbGF5Py5pc0VuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVwbGF5LnJlY29yZGluZ01vZGU7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgcmVwbGF5LlxuICAgKi9cbiAgX2luaXRpYWxpemUoY2xpZW50KSB7XG4gICAgaWYgKCF0aGlzLl9yZXBsYXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fbWF5YmVMb2FkRnJvbVJlcGxheUNhbnZhc0ludGVncmF0aW9uKGNsaWVudCk7XG4gICAgdGhpcy5fcmVwbGF5LmluaXRpYWxpemVTYW1wbGluZygpO1xuICB9XG5cbiAgLyoqIFNldHVwIHRoZSBpbnRlZ3JhdGlvbi4gKi9cbiAgX3NldHVwKGNsaWVudCkge1xuICAgIC8vIENsaWVudCBpcyBub3QgYXZhaWxhYmxlIGluIGNvbnN0cnVjdG9yLCBzbyB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgc2V0dXBPbmNlXG4gICAgY29uc3QgZmluYWxPcHRpb25zID0gbG9hZFJlcGxheU9wdGlvbnNGcm9tQ2xpZW50KHRoaXMuX2luaXRpYWxPcHRpb25zLCBjbGllbnQpO1xuICAgIHRoaXMuX3JlcGxheSA9IG5ldyBSZXBsYXlDb250YWluZXIoe1xuICAgICAgb3B0aW9uczogZmluYWxPcHRpb25zLFxuICAgICAgcmVjb3JkaW5nT3B0aW9uczogdGhpcy5fcmVjb3JkaW5nT3B0aW9uc1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEdldCBjYW52YXMgb3B0aW9ucyBmcm9tIFJlcGxheUNhbnZhcyBpbnRlZ3JhdGlvbiwgaWYgaXQgaXMgYWxzbyBhZGRlZC4gKi9cbiAgX21heWJlTG9hZEZyb21SZXBsYXlDYW52YXNJbnRlZ3JhdGlvbihjbGllbnQpIHtcbiAgICAvLyBUbyBzYXZlIGJ1bmRsZSBzaXplLCB3ZSBza2lwIGNoZWNraW5nIGZvciBzdHVmZiBoZXJlXG4gICAgLy8gYW5kIGluc3RlYWQganVzdCB0cnktY2F0Y2ggZXZlcnl0aGluZyAtIGFzIGdlbmVyYWxseSB0aGlzIHNob3VsZCBhbGwgYmUgZGVmaW5lZFxuICAgIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FudmFzSW50ZWdyYXRpb24gPSBjbGllbnQuZ2V0SW50ZWdyYXRpb25CeU5hbWUoJ1JlcGxheUNhbnZhcycpO1xuICAgICAgaWYgKCFjYW52YXNJbnRlZ3JhdGlvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9yZXBsYXlbJ19jYW52YXMnXSA9IGNhbnZhc0ludGVncmF0aW9uLmdldE9wdGlvbnMoKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaGVyZVxuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiAgfVxufVxuXG4vKiogUGFyc2UgUmVwbGF5LXJlbGF0ZWQgb3B0aW9ucyBmcm9tIFNESyBvcHRpb25zICovXG5mdW5jdGlvbiBsb2FkUmVwbGF5T3B0aW9uc0Zyb21DbGllbnQoaW5pdGlhbE9wdGlvbnMsIGNsaWVudCkge1xuICBjb25zdCBvcHQgPSBjbGllbnQuZ2V0T3B0aW9ucygpO1xuICBjb25zdCBmaW5hbE9wdGlvbnMgPSB7XG4gICAgc2Vzc2lvblNhbXBsZVJhdGU6IDAsXG4gICAgZXJyb3JTYW1wbGVSYXRlOiAwLFxuICAgIC4uLmluaXRpYWxPcHRpb25zXG4gIH07XG4gIGNvbnN0IHJlcGxheXNTZXNzaW9uU2FtcGxlUmF0ZSA9IHBhcnNlU2FtcGxlUmF0ZShvcHQucmVwbGF5c1Nlc3Npb25TYW1wbGVSYXRlKTtcbiAgY29uc3QgcmVwbGF5c09uRXJyb3JTYW1wbGVSYXRlID0gcGFyc2VTYW1wbGVSYXRlKG9wdC5yZXBsYXlzT25FcnJvclNhbXBsZVJhdGUpO1xuICBpZiAocmVwbGF5c1Nlc3Npb25TYW1wbGVSYXRlID09IG51bGwgJiYgcmVwbGF5c09uRXJyb3JTYW1wbGVSYXRlID09IG51bGwpIHtcbiAgICBjb25zb2xlU2FuZGJveCgoKSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKCdSZXBsYXkgaXMgZGlzYWJsZWQgYmVjYXVzZSBuZWl0aGVyIGByZXBsYXlzU2Vzc2lvblNhbXBsZVJhdGVgIG5vciBgcmVwbGF5c09uRXJyb3JTYW1wbGVSYXRlYCBhcmUgc2V0LicpO1xuICAgIH0pO1xuICB9XG4gIGlmIChyZXBsYXlzU2Vzc2lvblNhbXBsZVJhdGUgIT0gbnVsbCkge1xuICAgIGZpbmFsT3B0aW9ucy5zZXNzaW9uU2FtcGxlUmF0ZSA9IHJlcGxheXNTZXNzaW9uU2FtcGxlUmF0ZTtcbiAgfVxuICBpZiAocmVwbGF5c09uRXJyb3JTYW1wbGVSYXRlICE9IG51bGwpIHtcbiAgICBmaW5hbE9wdGlvbnMuZXJyb3JTYW1wbGVSYXRlID0gcmVwbGF5c09uRXJyb3JTYW1wbGVSYXRlO1xuICB9XG4gIHJldHVybiBmaW5hbE9wdGlvbnM7XG59XG5mdW5jdGlvbiBfZ2V0TWVyZ2VkTmV0d29ya0hlYWRlcnMoaGVhZGVycykge1xuICByZXR1cm4gWy4uLkRFRkFVTFRfTkVUV09SS19IRUFERVJTLCAuLi5oZWFkZXJzLm1hcChoZWFkZXIgPT4gaGVhZGVyLnRvTG93ZXJDYXNlKCkpXTtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGEgc21hbGwgdXRpbGl0eSB0byBnZXQgYSB0eXBlLXNhZmUgaW5zdGFuY2Ugb2YgdGhlIFJlcGxheSBpbnRlZ3JhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVwbGF5KCkge1xuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgcmV0dXJuIGNsaWVudD8uZ2V0SW50ZWdyYXRpb25CeU5hbWUoJ1JlcGxheScpO1xufVxuZXhwb3J0IHsgZ2V0UmVwbGF5LCByZXBsYXlJbnRlZ3JhdGlvbiB9O1xuIiwiaW1wb3J0IHsgYnJvd3NlclBlcmZvcm1hbmNlVGltZU9yaWdpbiB9IGZyb20gJ0BzZW50cnkvY29yZSc7XG5pbXBvcnQgeyBleHRyYWN0TmV0d29ya1Byb3RvY29sIH0gZnJvbSAnQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzJztcbmZ1bmN0aW9uIGdldEFic29sdXRlVGltZSh0aW1lID0gMCkge1xuICByZXR1cm4gKChicm93c2VyUGVyZm9ybWFuY2VUaW1lT3JpZ2luKCkgfHwgcGVyZm9ybWFuY2UudGltZU9yaWdpbikgKyB0aW1lKSAvIDEwMDA7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBQZXJmb3JtYW5jZVJlc291cmNlVGltaW5nIGVudHJ5IHRvIHNwYW4gZGF0YSBmb3IgdGhlIHJlc291cmNlIHNwYW4uXG4gKlxuICogQHBhcmFtIHJlc291cmNlVGltaW5nXG4gKiBAcmV0dXJucyBBbiBhcnJheSB3aGVyZSB0aGUgZmlyc3QgZWxlbWVudCBpcyB0aGUgYXR0cmlidXRlIG5hbWUgYW5kIHRoZSBzZWNvbmQgZWxlbWVudCBpcyB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICovXG5mdW5jdGlvbiByZXNvdXJjZVRpbWluZ1RvU3BhbkF0dHJpYnV0ZXMocmVzb3VyY2VUaW1pbmcpIHtcbiAgY29uc3QgdGltaW5nU3BhbkRhdGEgPSBbXTtcbiAgLy8gQ2hlY2tpbmcgZm9yIG9ubHkgYHVuZGVmaW5lZGAgYW5kIGBudWxsYCBpcyBpbnRlbnRpb25hbCBiZWNhdXNlIGl0J3NcbiAgLy8gdmFsaWQgZm9yIGBuZXh0SG9wUHJvdG9jb2xgIHRvIGJlIGFuIGVtcHR5IHN0cmluZy5cbiAgaWYgKHJlc291cmNlVGltaW5nLm5leHRIb3BQcm90b2NvbCAhPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgdmVyc2lvblxuICAgIH0gPSBleHRyYWN0TmV0d29ya1Byb3RvY29sKHJlc291cmNlVGltaW5nLm5leHRIb3BQcm90b2NvbCk7XG4gICAgdGltaW5nU3BhbkRhdGEucHVzaChbJ25ldHdvcmsucHJvdG9jb2wudmVyc2lvbicsIHZlcnNpb25dLCBbJ25ldHdvcmsucHJvdG9jb2wubmFtZScsIG5hbWVdKTtcbiAgfVxuICBpZiAoIWJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4oKSkge1xuICAgIHJldHVybiB0aW1pbmdTcGFuRGF0YTtcbiAgfVxuICByZXR1cm4gWy4uLnRpbWluZ1NwYW5EYXRhLCBbJ2h0dHAucmVxdWVzdC5yZWRpcmVjdF9zdGFydCcsIGdldEFic29sdXRlVGltZShyZXNvdXJjZVRpbWluZy5yZWRpcmVjdFN0YXJ0KV0sIFsnaHR0cC5yZXF1ZXN0LmZldGNoX3N0YXJ0JywgZ2V0QWJzb2x1dGVUaW1lKHJlc291cmNlVGltaW5nLmZldGNoU3RhcnQpXSwgWydodHRwLnJlcXVlc3QuZG9tYWluX2xvb2t1cF9zdGFydCcsIGdldEFic29sdXRlVGltZShyZXNvdXJjZVRpbWluZy5kb21haW5Mb29rdXBTdGFydCldLCBbJ2h0dHAucmVxdWVzdC5kb21haW5fbG9va3VwX2VuZCcsIGdldEFic29sdXRlVGltZShyZXNvdXJjZVRpbWluZy5kb21haW5Mb29rdXBFbmQpXSwgWydodHRwLnJlcXVlc3QuY29ubmVjdF9zdGFydCcsIGdldEFic29sdXRlVGltZShyZXNvdXJjZVRpbWluZy5jb25uZWN0U3RhcnQpXSwgWydodHRwLnJlcXVlc3Quc2VjdXJlX2Nvbm5lY3Rpb25fc3RhcnQnLCBnZXRBYnNvbHV0ZVRpbWUocmVzb3VyY2VUaW1pbmcuc2VjdXJlQ29ubmVjdGlvblN0YXJ0KV0sIFsnaHR0cC5yZXF1ZXN0LmNvbm5lY3Rpb25fZW5kJywgZ2V0QWJzb2x1dGVUaW1lKHJlc291cmNlVGltaW5nLmNvbm5lY3RFbmQpXSwgWydodHRwLnJlcXVlc3QucmVxdWVzdF9zdGFydCcsIGdldEFic29sdXRlVGltZShyZXNvdXJjZVRpbWluZy5yZXF1ZXN0U3RhcnQpXSwgWydodHRwLnJlcXVlc3QucmVzcG9uc2Vfc3RhcnQnLCBnZXRBYnNvbHV0ZVRpbWUocmVzb3VyY2VUaW1pbmcucmVzcG9uc2VTdGFydCldLCBbJ2h0dHAucmVxdWVzdC5yZXNwb25zZV9lbmQnLCBnZXRBYnNvbHV0ZVRpbWUocmVzb3VyY2VUaW1pbmcucmVzcG9uc2VFbmQpXV07XG59XG5leHBvcnQgeyByZXNvdXJjZVRpbWluZ1RvU3BhbkF0dHJpYnV0ZXMgfTtcbiIsImltcG9ydCB7IGFkZEZldGNoRW5kSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgYWRkRmV0Y2hJbnN0cnVtZW50YXRpb25IYW5kbGVyLCBpbnN0cnVtZW50RmV0Y2hSZXF1ZXN0LCBwYXJzZVVybCwgZ2V0TG9jYXRpb25IcmVmLCBzdHJpbmdNYXRjaGVzU29tZVBhdHRlcm4sIHNwYW5Ub0pTT04sIGhhc1NwYW5zRW5hYmxlZCwgc2V0SHR0cFN0YXR1cywgc3RyaXBVcmxRdWVyeUFuZEZyYWdtZW50LCBnZXRBY3RpdmVTcGFuLCBzdGFydEluYWN0aXZlU3BhbiwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU4sIFNlbnRyeU5vblJlY29yZGluZ1NwYW4sIGdldENsaWVudCwgZ2V0VHJhY2VEYXRhIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IGFkZFhockluc3RydW1lbnRhdGlvbkhhbmRsZXIsIGFkZFBlcmZvcm1hbmNlSW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgU0VOVFJZX1hIUl9EQVRBX0tFWSB9IGZyb20gJ0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscyc7XG5pbXBvcnQgeyBXSU5ET1cgfSBmcm9tICcuLi9oZWxwZXJzLmpzJztcbmltcG9ydCB7IHJlc291cmNlVGltaW5nVG9TcGFuQXR0cmlidXRlcyB9IGZyb20gJy4vcmVzb3VyY2UtdGltaW5nLmpzJztcblxuLyoqIE9wdGlvbnMgZm9yIFJlcXVlc3QgSW5zdHJ1bWVudGF0aW9uICovXG5cbmNvbnN0IHJlc3BvbnNlVG9TcGFuSWQgPSBuZXcgV2Vha01hcCgpO1xuY29uc3Qgc3BhbklkVG9FbmRUaW1lc3RhbXAgPSBuZXcgTWFwKCk7XG5jb25zdCBkZWZhdWx0UmVxdWVzdEluc3RydW1lbnRhdGlvbk9wdGlvbnMgPSB7XG4gIHRyYWNlRmV0Y2g6IHRydWUsXG4gIHRyYWNlWEhSOiB0cnVlLFxuICBlbmFibGVIVFRQVGltaW5nczogdHJ1ZSxcbiAgdHJhY2tGZXRjaFN0cmVhbVBlcmZvcm1hbmNlOiBmYWxzZVxufTtcblxuLyoqIFJlZ2lzdGVycyBzcGFuIGNyZWF0b3JzIGZvciB4aHIgYW5kIGZldGNoIHJlcXVlc3RzICAqL1xuZnVuY3Rpb24gaW5zdHJ1bWVudE91dGdvaW5nUmVxdWVzdHMoY2xpZW50LCBfb3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgdHJhY2VGZXRjaCxcbiAgICB0cmFjZVhIUixcbiAgICB0cmFja0ZldGNoU3RyZWFtUGVyZm9ybWFuY2UsXG4gICAgc2hvdWxkQ3JlYXRlU3BhbkZvclJlcXVlc3QsXG4gICAgZW5hYmxlSFRUUFRpbWluZ3MsXG4gICAgdHJhY2VQcm9wYWdhdGlvblRhcmdldHMsXG4gICAgb25SZXF1ZXN0U3BhblN0YXJ0XG4gIH0gPSB7XG4gICAgLi4uZGVmYXVsdFJlcXVlc3RJbnN0cnVtZW50YXRpb25PcHRpb25zLFxuICAgIC4uLl9vcHRpb25zXG4gIH07XG4gIGNvbnN0IHNob3VsZENyZWF0ZVNwYW4gPSB0eXBlb2Ygc2hvdWxkQ3JlYXRlU3BhbkZvclJlcXVlc3QgPT09ICdmdW5jdGlvbicgPyBzaG91bGRDcmVhdGVTcGFuRm9yUmVxdWVzdCA6IF8gPT4gdHJ1ZTtcbiAgY29uc3Qgc2hvdWxkQXR0YWNoSGVhZGVyc1dpdGhUYXJnZXRzID0gdXJsID0+IHNob3VsZEF0dGFjaEhlYWRlcnModXJsLCB0cmFjZVByb3BhZ2F0aW9uVGFyZ2V0cyk7XG4gIGNvbnN0IHNwYW5zID0ge307XG4gIGlmICh0cmFjZUZldGNoKSB7XG4gICAgLy8gS2VlcGluZyB0cmFjayBvZiBodHRwIHJlcXVlc3RzLCB3aG9zZSBib2R5IHBheWxvYWRzIHJlc29sdmVkIGxhdGVyIHRoYW4gdGhlIGluaXRpYWwgcmVzb2x2ZWQgcmVxdWVzdFxuICAgIC8vIGUuZy4gc3RyZWFtaW5nIHVzaW5nIHNlcnZlciBzZW50IGV2ZW50cyAoU1NFKVxuICAgIGNsaWVudC5hZGRFdmVudFByb2Nlc3NvcihldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RyYW5zYWN0aW9uJyAmJiBldmVudC5zcGFucykge1xuICAgICAgICBldmVudC5zcGFucy5mb3JFYWNoKHNwYW4gPT4ge1xuICAgICAgICAgIGlmIChzcGFuLm9wID09PSAnaHR0cC5jbGllbnQnKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkVGltZXN0YW1wID0gc3BhbklkVG9FbmRUaW1lc3RhbXAuZ2V0KHNwYW4uc3Bhbl9pZCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICBzcGFuLnRpbWVzdGFtcCA9IHVwZGF0ZWRUaW1lc3RhbXAgLyAxMDAwO1xuICAgICAgICAgICAgICBzcGFuSWRUb0VuZFRpbWVzdGFtcC5kZWxldGUoc3Bhbi5zcGFuX2lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH0pO1xuICAgIGlmICh0cmFja0ZldGNoU3RyZWFtUGVyZm9ybWFuY2UpIHtcbiAgICAgIGFkZEZldGNoRW5kSW5zdHJ1bWVudGF0aW9uSGFuZGxlcihoYW5kbGVyRGF0YSA9PiB7XG4gICAgICAgIGlmIChoYW5kbGVyRGF0YS5yZXNwb25zZSkge1xuICAgICAgICAgIGNvbnN0IHNwYW4gPSByZXNwb25zZVRvU3BhbklkLmdldChoYW5kbGVyRGF0YS5yZXNwb25zZSk7XG4gICAgICAgICAgaWYgKHNwYW4gJiYgaGFuZGxlckRhdGEuZW5kVGltZXN0YW1wKSB7XG4gICAgICAgICAgICBzcGFuSWRUb0VuZFRpbWVzdGFtcC5zZXQoc3BhbiwgaGFuZGxlckRhdGEuZW5kVGltZXN0YW1wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRGZXRjaEluc3RydW1lbnRhdGlvbkhhbmRsZXIoaGFuZGxlckRhdGEgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlZFNwYW4gPSBpbnN0cnVtZW50RmV0Y2hSZXF1ZXN0KGhhbmRsZXJEYXRhLCBzaG91bGRDcmVhdGVTcGFuLCBzaG91bGRBdHRhY2hIZWFkZXJzV2l0aFRhcmdldHMsIHNwYW5zKTtcbiAgICAgIGlmIChoYW5kbGVyRGF0YS5yZXNwb25zZSAmJiBoYW5kbGVyRGF0YS5mZXRjaERhdGEuX19zcGFuKSB7XG4gICAgICAgIHJlc3BvbnNlVG9TcGFuSWQuc2V0KGhhbmRsZXJEYXRhLnJlc3BvbnNlLCBoYW5kbGVyRGF0YS5mZXRjaERhdGEuX19zcGFuKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgY2Fubm90IHVzZSBgd2luZG93LmxvY2F0aW9uYCBpbiB0aGUgZ2VuZXJpYyBmZXRjaCBpbnN0cnVtZW50YXRpb24sXG4gICAgICAvLyBidXQgd2UgbmVlZCBpdCBmb3IgcmVsaWFibGUgYHNlcnZlci5hZGRyZXNzYCBhdHRyaWJ1dGUuXG4gICAgICAvLyBzbyB3ZSBleHRlbmQgdGhpcyBpbiBoZXJlXG4gICAgICBpZiAoY3JlYXRlZFNwYW4pIHtcbiAgICAgICAgY29uc3QgZnVsbFVybCA9IGdldEZ1bGxVUkwoaGFuZGxlckRhdGEuZmV0Y2hEYXRhLnVybCk7XG4gICAgICAgIGNvbnN0IGhvc3QgPSBmdWxsVXJsID8gcGFyc2VVcmwoZnVsbFVybCkuaG9zdCA6IHVuZGVmaW5lZDtcbiAgICAgICAgY3JlYXRlZFNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgJ2h0dHAudXJsJzogZnVsbFVybCxcbiAgICAgICAgICAnc2VydmVyLmFkZHJlc3MnOiBob3N0XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZW5hYmxlSFRUUFRpbWluZ3MpIHtcbiAgICAgICAgICBhZGRIVFRQVGltaW5ncyhjcmVhdGVkU3Bhbik7XG4gICAgICAgIH1cbiAgICAgICAgb25SZXF1ZXN0U3BhblN0YXJ0Py4oY3JlYXRlZFNwYW4sIHtcbiAgICAgICAgICBoZWFkZXJzOiBoYW5kbGVyRGF0YS5oZWFkZXJzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGlmICh0cmFjZVhIUikge1xuICAgIGFkZFhockluc3RydW1lbnRhdGlvbkhhbmRsZXIoaGFuZGxlckRhdGEgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlZFNwYW4gPSB4aHJDYWxsYmFjayhoYW5kbGVyRGF0YSwgc2hvdWxkQ3JlYXRlU3Bhbiwgc2hvdWxkQXR0YWNoSGVhZGVyc1dpdGhUYXJnZXRzLCBzcGFucyk7XG4gICAgICBpZiAoY3JlYXRlZFNwYW4pIHtcbiAgICAgICAgaWYgKGVuYWJsZUhUVFBUaW1pbmdzKSB7XG4gICAgICAgICAgYWRkSFRUUFRpbWluZ3MoY3JlYXRlZFNwYW4pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBoZWFkZXJzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGhlYWRlcnMgPSBuZXcgSGVhZGVycyhoYW5kbGVyRGF0YS54aHIuX19zZW50cnlfeGhyX3YzX18/LnJlcXVlc3RfaGVhZGVycyk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgfVxuICAgICAgICBvblJlcXVlc3RTcGFuU3RhcnQ/LihjcmVhdGVkU3Bhbiwge1xuICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzUGVyZm9ybWFuY2VSZXNvdXJjZVRpbWluZyhlbnRyeSkge1xuICByZXR1cm4gZW50cnkuZW50cnlUeXBlID09PSAncmVzb3VyY2UnICYmICdpbml0aWF0b3JUeXBlJyBpbiBlbnRyeSAmJiB0eXBlb2YgZW50cnkubmV4dEhvcFByb3RvY29sID09PSAnc3RyaW5nJyAmJiAoZW50cnkuaW5pdGlhdG9yVHlwZSA9PT0gJ2ZldGNoJyB8fCBlbnRyeS5pbml0aWF0b3JUeXBlID09PSAneG1saHR0cHJlcXVlc3QnKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdGVtcG9yYXJ5IG9ic2VydmVyIHRvIGxpc3RlbiB0byB0aGUgbmV4dCBmZXRjaC94aHIgcmVzb3VyY2luZyB0aW1pbmdzLFxuICogc28gdGhhdCB3aGVuIHRpbWluZ3MgaGl0IHRoZWlyIHBlci1icm93c2VyIGxpbWl0IHRoZXkgZG9uJ3QgbmVlZCB0byBiZSByZW1vdmVkLlxuICpcbiAqIEBwYXJhbSBzcGFuIEEgc3BhbiB0aGF0IGhhcyB5ZXQgdG8gYmUgZmluaXNoZWQsIG11c3QgY29udGFpbiBgdXJsYCBvbiBkYXRhLlxuICovXG5mdW5jdGlvbiBhZGRIVFRQVGltaW5ncyhzcGFuKSB7XG4gIGNvbnN0IHtcbiAgICB1cmxcbiAgfSA9IHNwYW5Ub0pTT04oc3BhbikuZGF0YTtcbiAgaWYgKCF1cmwgfHwgdHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY2xlYW51cCA9IGFkZFBlcmZvcm1hbmNlSW5zdHJ1bWVudGF0aW9uSGFuZGxlcigncmVzb3VyY2UnLCAoe1xuICAgIGVudHJpZXNcbiAgfSkgPT4ge1xuICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICBpZiAoaXNQZXJmb3JtYW5jZVJlc291cmNlVGltaW5nKGVudHJ5KSAmJiBlbnRyeS5uYW1lLmVuZHNXaXRoKHVybCkpIHtcbiAgICAgICAgY29uc3Qgc3BhbkF0dHJpYnV0ZXMgPSByZXNvdXJjZVRpbWluZ1RvU3BhbkF0dHJpYnV0ZXMoZW50cnkpO1xuICAgICAgICBzcGFuQXR0cmlidXRlcy5mb3JFYWNoKGF0dHJpYnV0ZUFycmF5ID0+IHNwYW4uc2V0QXR0cmlidXRlKC4uLmF0dHJpYnV0ZUFycmF5KSk7XG4gICAgICAgIC8vIEluIHRoZSBuZXh0IHRpY2ssIGNsZWFuIHRoaXMgaGFuZGxlciB1cFxuICAgICAgICAvLyBXZSBoYXZlIHRvIHdhaXQgaGVyZSBiZWNhdXNlIG90aGVyd2lzZSB0aGlzIGNsZWFucyBpdHNlbGYgdXAgYmVmb3JlIGl0IGlzIGZ1bGx5IGRvbmVcbiAgICAgICAgc2V0VGltZW91dChjbGVhbnVwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IGRldGVybWluZXMgd2hldGhlciB0byBhdHRhY2ggdHJhY2luZyBoZWFkZXJzIHRvIGEgcmVxdWVzdC5cbiAqIFdlIG9ubHkgZXhwb3J0IHRoaXMgZnVuY3Rpb24gZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gKi9cbmZ1bmN0aW9uIHNob3VsZEF0dGFjaEhlYWRlcnModGFyZ2V0VXJsLCB0cmFjZVByb3BhZ2F0aW9uVGFyZ2V0cykge1xuICAvLyB3aW5kb3cubG9jYXRpb24uaHJlZiBub3QgYmVpbmcgZGVmaW5lZCBpcyBhbiBlZGdlIGNhc2UgaW4gdGhlIGJyb3dzZXIgYnV0IHdlIG5lZWQgdG8gaGFuZGxlIGl0LlxuICAvLyBQb3RlbnRpYWxseSBkYW5nZXJvdXMgc2l0dWF0aW9ucyB3aGVyZSBpdCBtYXkgbm90IGJlIGRlZmluZWQ6IEJyb3dzZXIgRXh0ZW5zaW9ucywgV2ViIFdvcmtlcnMsIHBhdGNoaW5nIG9mIHRoZSBsb2NhdGlvbiBvYmpcbiAgY29uc3QgaHJlZiA9IGdldExvY2F0aW9uSHJlZigpO1xuICBpZiAoIWhyZWYpIHtcbiAgICAvLyBJZiB0aGVyZSBpcyBubyB3aW5kb3cubG9jYXRpb24ub3JpZ2luLCB3ZSBkZWZhdWx0IHRvIG9ubHkgYXR0YWNoaW5nIHRyYWNpbmcgaGVhZGVycyB0byByZWxhdGl2ZSByZXF1ZXN0cywgaS5lLiBvbmVzIHRoYXQgc3RhcnQgd2l0aCBgL2BcbiAgICAvLyBCSUcgRElTQ0xBSU1FUjogVXNlcnMgY2FuIGNhbGwgVVJMcyB3aXRoIGEgZG91YmxlIHNsYXNoIChmZXRjaChcIi8vZXhhbXBsZS5jb20vYXBpXCIpKSwgdGhpcyBpcyBhIHNob3J0aGFuZCBmb3IgXCJzZW5kIHRvIHRoZSBzYW1lIHByb3RvY29sXCIsXG4gICAgLy8gc28gd2UgbmVlZCBhIHRvIGV4Y2x1ZGUgdGhvc2UgcmVxdWVzdHMsIGJlY2F1c2UgdGhleSBtaWdodCBiZSBjcm9zcyBvcmlnaW4uXG4gICAgY29uc3QgaXNSZWxhdGl2ZVNhbWVPcmlnaW5SZXF1ZXN0ID0gISF0YXJnZXRVcmwubWF0Y2goL15cXC8oPyFcXC8pLyk7XG4gICAgaWYgKCF0cmFjZVByb3BhZ2F0aW9uVGFyZ2V0cykge1xuICAgICAgcmV0dXJuIGlzUmVsYXRpdmVTYW1lT3JpZ2luUmVxdWVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0cmluZ01hdGNoZXNTb21lUGF0dGVybih0YXJnZXRVcmwsIHRyYWNlUHJvcGFnYXRpb25UYXJnZXRzKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IHJlc29sdmVkVXJsO1xuICAgIGxldCBjdXJyZW50T3JpZ2luO1xuXG4gICAgLy8gVVJMIHBhcnNpbmcgbWF5IGZhaWwsIHdlIGRlZmF1bHQgdG8gbm90IGF0dGFjaGluZyB0cmFjZSBoZWFkZXJzIGluIHRoYXQgY2FzZS5cbiAgICB0cnkge1xuICAgICAgcmVzb2x2ZWRVcmwgPSBuZXcgVVJMKHRhcmdldFVybCwgaHJlZik7XG4gICAgICBjdXJyZW50T3JpZ2luID0gbmV3IFVSTChocmVmKS5vcmlnaW47XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBpc1NhbWVPcmlnaW5SZXF1ZXN0ID0gcmVzb2x2ZWRVcmwub3JpZ2luID09PSBjdXJyZW50T3JpZ2luO1xuICAgIGlmICghdHJhY2VQcm9wYWdhdGlvblRhcmdldHMpIHtcbiAgICAgIHJldHVybiBpc1NhbWVPcmlnaW5SZXF1ZXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3RyaW5nTWF0Y2hlc1NvbWVQYXR0ZXJuKHJlc29sdmVkVXJsLnRvU3RyaW5nKCksIHRyYWNlUHJvcGFnYXRpb25UYXJnZXRzKSB8fCBpc1NhbWVPcmlnaW5SZXF1ZXN0ICYmIHN0cmluZ01hdGNoZXNTb21lUGF0dGVybihyZXNvbHZlZFVybC5wYXRobmFtZSwgdHJhY2VQcm9wYWdhdGlvblRhcmdldHMpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbmQgdHJhY2sgeGhyIHJlcXVlc3Qgc3BhbnNcbiAqXG4gKiBAcmV0dXJucyBTcGFuIGlmIGEgc3BhbiB3YXMgY3JlYXRlZCwgb3RoZXJ3aXNlIHZvaWQuXG4gKi9cbmZ1bmN0aW9uIHhockNhbGxiYWNrKGhhbmRsZXJEYXRhLCBzaG91bGRDcmVhdGVTcGFuLCBzaG91bGRBdHRhY2hIZWFkZXJzLCBzcGFucykge1xuICBjb25zdCB4aHIgPSBoYW5kbGVyRGF0YS54aHI7XG4gIGNvbnN0IHNlbnRyeVhockRhdGEgPSB4aHI/LltTRU5UUllfWEhSX0RBVEFfS0VZXTtcbiAgaWYgKCF4aHIgfHwgeGhyLl9fc2VudHJ5X293bl9yZXF1ZXN0X18gfHwgIXNlbnRyeVhockRhdGEpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGNvbnN0IHtcbiAgICB1cmwsXG4gICAgbWV0aG9kXG4gIH0gPSBzZW50cnlYaHJEYXRhO1xuICBjb25zdCBzaG91bGRDcmVhdGVTcGFuUmVzdWx0ID0gaGFzU3BhbnNFbmFibGVkKCkgJiYgc2hvdWxkQ3JlYXRlU3Bhbih1cmwpO1xuXG4gIC8vIGNoZWNrIGZpcnN0IGlmIHRoZSByZXF1ZXN0IGhhcyBmaW5pc2hlZCBhbmQgaXMgdHJhY2tlZCBieSBhbiBleGlzdGluZyBzcGFuIHdoaWNoIHNob3VsZCBub3cgZW5kXG4gIGlmIChoYW5kbGVyRGF0YS5lbmRUaW1lc3RhbXAgJiYgc2hvdWxkQ3JlYXRlU3BhblJlc3VsdCkge1xuICAgIGNvbnN0IHNwYW5JZCA9IHhoci5fX3NlbnRyeV94aHJfc3Bhbl9pZF9fO1xuICAgIGlmICghc3BhbklkKSByZXR1cm47XG4gICAgY29uc3Qgc3BhbiA9IHNwYW5zW3NwYW5JZF07XG4gICAgaWYgKHNwYW4gJiYgc2VudHJ5WGhyRGF0YS5zdGF0dXNfY29kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZXRIdHRwU3RhdHVzKHNwYW4sIHNlbnRyeVhockRhdGEuc3RhdHVzX2NvZGUpO1xuICAgICAgc3Bhbi5lbmQoKTtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1keW5hbWljLWRlbGV0ZVxuICAgICAgZGVsZXRlIHNwYW5zW3NwYW5JZF07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgY29uc3QgZnVsbFVybCA9IGdldEZ1bGxVUkwodXJsKTtcbiAgY29uc3QgcGFyc2VkVXJsID0gZnVsbFVybCA/IHBhcnNlVXJsKGZ1bGxVcmwpIDogcGFyc2VVcmwodXJsKTtcbiAgY29uc3QgdXJsRm9yU3Bhbk5hbWUgPSBzdHJpcFVybFF1ZXJ5QW5kRnJhZ21lbnQodXJsKTtcbiAgY29uc3QgaGFzUGFyZW50ID0gISFnZXRBY3RpdmVTcGFuKCk7XG4gIGNvbnN0IHNwYW4gPSBzaG91bGRDcmVhdGVTcGFuUmVzdWx0ICYmIGhhc1BhcmVudCA/IHN0YXJ0SW5hY3RpdmVTcGFuKHtcbiAgICBuYW1lOiBgJHttZXRob2R9ICR7dXJsRm9yU3Bhbk5hbWV9YCxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICB1cmwsXG4gICAgICB0eXBlOiAneGhyJyxcbiAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICdodHRwLnVybCc6IGZ1bGxVcmwsXG4gICAgICAnc2VydmVyLmFkZHJlc3MnOiBwYXJzZWRVcmw/Lmhvc3QsXG4gICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by5odHRwLmJyb3dzZXInLFxuICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1BdOiAnaHR0cC5jbGllbnQnLFxuICAgICAgLi4uKHBhcnNlZFVybD8uc2VhcmNoICYmIHtcbiAgICAgICAgJ2h0dHAucXVlcnknOiBwYXJzZWRVcmw/LnNlYXJjaFxuICAgICAgfSksXG4gICAgICAuLi4ocGFyc2VkVXJsPy5oYXNoICYmIHtcbiAgICAgICAgJ2h0dHAuZnJhZ21lbnQnOiBwYXJzZWRVcmw/Lmhhc2hcbiAgICAgIH0pXG4gICAgfVxuICB9KSA6IG5ldyBTZW50cnlOb25SZWNvcmRpbmdTcGFuKCk7XG4gIHhoci5fX3NlbnRyeV94aHJfc3Bhbl9pZF9fID0gc3Bhbi5zcGFuQ29udGV4dCgpLnNwYW5JZDtcbiAgc3BhbnNbeGhyLl9fc2VudHJ5X3hocl9zcGFuX2lkX19dID0gc3BhbjtcbiAgaWYgKHNob3VsZEF0dGFjaEhlYWRlcnModXJsKSkge1xuICAgIGFkZFRyYWNpbmdIZWFkZXJzVG9YaHJSZXF1ZXN0KHhocixcbiAgICAvLyBJZiBwZXJmb3JtYW5jZSBpcyBkaXNhYmxlZCAoVFdQKSBvciB0aGVyZSdzIG5vIGFjdGl2ZSByb290IHNwYW4gKHBhZ2Vsb2FkL25hdmlnYXRpb24vaW50ZXJhY3Rpb24pLFxuICAgIC8vIHdlIGRvIG5vdCB3YW50IHRvIHVzZSB0aGUgc3BhbiBhcyBiYXNlIGZvciB0aGUgdHJhY2UgaGVhZGVycyxcbiAgICAvLyB3aGljaCBtZWFucyB0aGF0IHRoZSBoZWFkZXJzIHdpbGwgYmUgZ2VuZXJhdGVkIGZyb20gdGhlIHNjb3BlIGFuZCB0aGUgc2FtcGxpbmcgZGVjaXNpb24gaXMgZGVmZXJyZWRcbiAgICBoYXNTcGFuc0VuYWJsZWQoKSAmJiBoYXNQYXJlbnQgPyBzcGFuIDogdW5kZWZpbmVkKTtcbiAgfVxuICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgaWYgKGNsaWVudCkge1xuICAgIGNsaWVudC5lbWl0KCdiZWZvcmVPdXRnb2luZ1JlcXVlc3RTcGFuJywgc3BhbiwgaGFuZGxlckRhdGEpO1xuICB9XG4gIHJldHVybiBzcGFuO1xufVxuZnVuY3Rpb24gYWRkVHJhY2luZ0hlYWRlcnNUb1hoclJlcXVlc3QoeGhyLCBzcGFuKSB7XG4gIGNvbnN0IHtcbiAgICAnc2VudHJ5LXRyYWNlJzogc2VudHJ5VHJhY2UsXG4gICAgYmFnZ2FnZVxuICB9ID0gZ2V0VHJhY2VEYXRhKHtcbiAgICBzcGFuXG4gIH0pO1xuICBpZiAoc2VudHJ5VHJhY2UpIHtcbiAgICBzZXRIZWFkZXJPblhocih4aHIsIHNlbnRyeVRyYWNlLCBiYWdnYWdlKTtcbiAgfVxufVxuZnVuY3Rpb24gc2V0SGVhZGVyT25YaHIoeGhyLCBzZW50cnlUcmFjZUhlYWRlciwgc2VudHJ5QmFnZ2FnZUhlYWRlcikge1xuICBjb25zdCBvcmlnaW5hbEhlYWRlcnMgPSB4aHIuX19zZW50cnlfeGhyX3YzX18/LnJlcXVlc3RfaGVhZGVycztcbiAgaWYgKG9yaWdpbmFsSGVhZGVycz8uWydzZW50cnktdHJhY2UnXSkge1xuICAgIC8vIGJhaWwgaWYgYSBzZW50cnktdHJhY2UgaGVhZGVyIGlzIGFscmVhZHkgc2V0XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignc2VudHJ5LXRyYWNlJywgc2VudHJ5VHJhY2VIZWFkZXIpO1xuICAgIGlmIChzZW50cnlCYWdnYWdlSGVhZGVyKSB7XG4gICAgICAvLyBvbmx5IGFkZCBvdXIgaGVhZGVycyBpZlxuICAgICAgLy8gLSBubyBwcmUtZXhpc3RpbmcgYmFnZ2FnZSBoZWFkZXIgZXhpc3RzXG4gICAgICAvLyAtIG9yIGl0IGlzIHNldCBhbmQgZG9lc24ndCB5ZXQgY29udGFpbiBzZW50cnkgdmFsdWVzXG4gICAgICBjb25zdCBvcmlnaW5hbEJhZ2dhZ2VIZWFkZXIgPSBvcmlnaW5hbEhlYWRlcnM/LlsnYmFnZ2FnZSddO1xuICAgICAgaWYgKCFvcmlnaW5hbEJhZ2dhZ2VIZWFkZXIgfHwgIWJhZ2dhZ2VIZWFkZXJIYXNTZW50cnlWYWx1ZXMob3JpZ2luYWxCYWdnYWdlSGVhZGVyKSkge1xuICAgICAgICAvLyBGcm9tIE1ETjogXCJJZiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgc2V2ZXJhbCB0aW1lcyB3aXRoIHRoZSBzYW1lIGhlYWRlciwgdGhlIHZhbHVlcyBhcmUgbWVyZ2VkIGludG8gb25lIHNpbmdsZSByZXF1ZXN0IGhlYWRlci5cIlxuICAgICAgICAvLyBXZSBjYW4gdGhlcmVmb3JlIHNpbXBseSBzZXQgYSBiYWdnYWdlIGhlYWRlciB3aXRob3V0IGNoZWNraW5nIHdoYXQgd2FzIHRoZXJlIGJlZm9yZVxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvWE1MSHR0cFJlcXVlc3Qvc2V0UmVxdWVzdEhlYWRlclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignYmFnZ2FnZScsIHNlbnRyeUJhZ2dhZ2VIZWFkZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoXykge1xuICAgIC8vIEVycm9yOiBJbnZhbGlkU3RhdGVFcnJvcjogRmFpbGVkIHRvIGV4ZWN1dGUgJ3NldFJlcXVlc3RIZWFkZXInIG9uICdYTUxIdHRwUmVxdWVzdCc6IFRoZSBvYmplY3QncyBzdGF0ZSBtdXN0IGJlIE9QRU5FRC5cbiAgfVxufVxuZnVuY3Rpb24gYmFnZ2FnZUhlYWRlckhhc1NlbnRyeVZhbHVlcyhiYWdnYWdlSGVhZGVyKSB7XG4gIHJldHVybiBiYWdnYWdlSGVhZGVyLnNwbGl0KCcsJykuc29tZSh2YWx1ZSA9PiB2YWx1ZS50cmltKCkuc3RhcnRzV2l0aCgnc2VudHJ5LScpKTtcbn1cbmZ1bmN0aW9uIGdldEZ1bGxVUkwodXJsKSB7XG4gIHRyeSB7XG4gICAgLy8gQnkgYWRkaW5nIGEgYmFzZSBVUkwgdG8gbmV3IFVSTCgpLCB0aGlzIHdpbGwgYWxzbyB3b3JrIGZvciByZWxhdGl2ZSB1cmxzXG4gICAgLy8gSWYgYHVybGAgaXMgYSBmdWxsIFVSTCwgdGhlIGJhc2UgVVJMIGlzIGlnbm9yZWQgYW55aG93XG4gICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwsIFdJTkRPVy5sb2NhdGlvbi5vcmlnaW4pO1xuICAgIHJldHVybiBwYXJzZWQuaHJlZjtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuZXhwb3J0IHsgZGVmYXVsdFJlcXVlc3RJbnN0cnVtZW50YXRpb25PcHRpb25zLCBpbnN0cnVtZW50T3V0Z29pbmdSZXF1ZXN0cywgc2hvdWxkQXR0YWNoSGVhZGVycywgeGhyQ2FsbGJhY2sgfTtcbiIsImltcG9ydCB7IGdldEFjdGl2ZVNwYW4sIGdldFJvb3RTcGFuLCBzcGFuVG9KU09OLCBsb2dnZXIsIFNQQU5fU1RBVFVTX0VSUk9SIH0gZnJvbSAnQHNlbnRyeS9jb3JlJztcbmltcG9ydCB7IERFQlVHX0JVSUxEIH0gZnJvbSAnLi4vZGVidWctYnVpbGQuanMnO1xuaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vaGVscGVycy5qcyc7XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgdGhhdCBjYW5jZWxzIGFuZCBmaW5pc2hlcyBhIHRyYW5zYWN0aW9uIHdoZW4gdGhlIGdsb2JhbFxuICogZG9jdW1lbnQgaXMgaGlkZGVuLlxuICovXG5mdW5jdGlvbiByZWdpc3RlckJhY2tncm91bmRUYWJEZXRlY3Rpb24oKSB7XG4gIGlmIChXSU5ET1cuZG9jdW1lbnQpIHtcbiAgICBXSU5ET1cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSBnZXRBY3RpdmVTcGFuKCk7XG4gICAgICBpZiAoIWFjdGl2ZVNwYW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgcm9vdFNwYW4gPSBnZXRSb290U3BhbihhY3RpdmVTcGFuKTtcbiAgICAgIGlmIChXSU5ET1cuZG9jdW1lbnQuaGlkZGVuICYmIHJvb3RTcGFuKSB7XG4gICAgICAgIGNvbnN0IGNhbmNlbGxlZFN0YXR1cyA9ICdjYW5jZWxsZWQnO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgb3AsXG4gICAgICAgICAgc3RhdHVzXG4gICAgICAgIH0gPSBzcGFuVG9KU09OKHJvb3RTcGFuKTtcbiAgICAgICAgaWYgKERFQlVHX0JVSUxEKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgW1RyYWNpbmddIFRyYW5zYWN0aW9uOiAke2NhbmNlbGxlZFN0YXR1c30gLT4gc2luY2UgdGFiIG1vdmVkIHRvIHRoZSBiYWNrZ3JvdW5kLCBvcDogJHtvcH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIHNob3VsZCBub3Qgc2V0IHN0YXR1cyBpZiBpdCBpcyBhbHJlYWR5IHNldCwgdGhpcyBwcmV2ZW50IGltcG9ydGFudCBzdGF0dXNlcyBsaWtlXG4gICAgICAgIC8vIGVycm9yIG9yIGRhdGEgbG9zcyBmcm9tIGJlaW5nIG92ZXJ3cml0dGVuIG9uIHRyYW5zYWN0aW9uLlxuICAgICAgICBpZiAoIXN0YXR1cykge1xuICAgICAgICAgIHJvb3RTcGFuLnNldFN0YXR1cyh7XG4gICAgICAgICAgICBjb2RlOiBTUEFOX1NUQVRVU19FUlJPUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNhbmNlbGxlZFN0YXR1c1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJvb3RTcGFuLnNldEF0dHJpYnV0ZSgnc2VudHJ5LmNhbmNlbGxhdGlvbl9yZWFzb24nLCAnZG9jdW1lbnQuaGlkZGVuJyk7XG4gICAgICAgIHJvb3RTcGFuLmVuZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci53YXJuKCdbVHJhY2luZ10gQ291bGQgbm90IHNldCB1cCBiYWNrZ3JvdW5kIHRhYiBkZXRlY3Rpb24gZHVlIHRvIGxhY2sgb2YgZ2xvYmFsIGRvY3VtZW50Jyk7XG4gIH1cbn1cbmV4cG9ydCB7IHJlZ2lzdGVyQmFja2dyb3VuZFRhYkRldGVjdGlvbiB9O1xuIiwiaW1wb3J0IHsgZ2V0Um9vdFNwYW4sIGdldEN1cnJlbnRTY29wZSwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9QUkVWSU9VU19UUkFDRV9TQU1QTEVfUkFURSwgc3BhblRvSlNPTiwgbG9nZ2VyLCBTRU1BTlRJQ19MSU5LX0FUVFJJQlVURV9MSU5LX1RZUEUsIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU0FNUExFX1JBVEUgfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHsgREVCVUdfQlVJTEQgfSBmcm9tICcuLi9kZWJ1Zy1idWlsZC5qcyc7XG5pbXBvcnQgeyBXSU5ET1cgfSBmcm9tICcuLi9oZWxwZXJzLmpzJztcbmltcG9ydCAnQHNlbnRyeS1pbnRlcm5hbC9icm93c2VyLXV0aWxzJztcbmltcG9ydCAnLi4vc3RhY2stcGFyc2Vycy5qcyc7XG5pbXBvcnQgJy4uL2ludGVncmF0aW9ucy9icmVhZGNydW1icy5qcyc7XG5pbXBvcnQgJy4uL2ludGVncmF0aW9ucy9icm93c2VyYXBpZXJyb3JzLmpzJztcbmltcG9ydCAnLi4vaW50ZWdyYXRpb25zL2Jyb3dzZXJzZXNzaW9uLmpzJztcbmltcG9ydCAnLi4vaW50ZWdyYXRpb25zL2dsb2JhbGhhbmRsZXJzLmpzJztcbmltcG9ydCAnLi4vaW50ZWdyYXRpb25zL2h0dHBjb250ZXh0LmpzJztcbmltcG9ydCAnLi4vaW50ZWdyYXRpb25zL2xpbmtlZGVycm9ycy5qcyc7XG5cbi8vIDFoIGluIHNlY29uZHNcbmNvbnN0IFBSRVZJT1VTX1RSQUNFX01BWF9EVVJBVElPTiA9IDM2MDA7XG5cbi8vIHNlc3Npb24gc3RvcmFnZSBrZXlcbmNvbnN0IFBSRVZJT1VTX1RSQUNFX0tFWSA9ICdzZW50cnlfcHJldmlvdXNfdHJhY2UnO1xuY29uc3QgUFJFVklPVVNfVFJBQ0VfVE1QX1NQQU5fQVRUUklCVVRFID0gJ3NlbnRyeS5wcmV2aW91c190cmFjZSc7XG5cbi8qKlxuICogVGFrZXMgY2FyZSBvZiBsaW5raW5nIHRyYWNlcyBhbmQgYXBwbHlpbmcgdGhlIChjb25zaXN0ZW50KSBzYW1wbGluZyBiZWhhdm9pb3VyIGJhc2VkIG9uIHRoZSBwYXNzZWQgb3B0aW9uc1xuICogQHBhcmFtIG9wdGlvbnMgLSBvcHRpb25zIGZvciBsaW5raW5nIHRyYWNlcyBhbmQgY29uc2lzdGVudCB0cmFjZSBzYW1wbGluZyAoQHNlZSBCcm93c2VyVHJhY2luZ09wdGlvbnMpXG4gKiBAcGFyYW0gY2xpZW50IC0gU2VudHJ5IGNsaWVudFxuICovXG5mdW5jdGlvbiBsaW5rVHJhY2VzKGNsaWVudCwge1xuICBsaW5rUHJldmlvdXNUcmFjZSxcbiAgY29uc2lzdGVudFRyYWNlU2FtcGxpbmdcbn0pIHtcbiAgY29uc3QgdXNlU2Vzc2lvblN0b3JhZ2UgPSBsaW5rUHJldmlvdXNUcmFjZSA9PT0gJ3Nlc3Npb24tc3RvcmFnZSc7XG4gIGxldCBpbk1lbW9yeVByZXZpb3VzVHJhY2VJbmZvID0gdXNlU2Vzc2lvblN0b3JhZ2UgPyBnZXRQcmV2aW91c1RyYWNlRnJvbVNlc3Npb25TdG9yYWdlKCkgOiB1bmRlZmluZWQ7XG4gIGNsaWVudC5vbignc3BhblN0YXJ0Jywgc3BhbiA9PiB7XG4gICAgaWYgKGdldFJvb3RTcGFuKHNwYW4pICE9PSBzcGFuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9sZFByb3BhZ2F0aW9uQ29udGV4dCA9IGdldEN1cnJlbnRTY29wZSgpLmdldFByb3BhZ2F0aW9uQ29udGV4dCgpO1xuICAgIGluTWVtb3J5UHJldmlvdXNUcmFjZUluZm8gPSBhZGRQcmV2aW91c1RyYWNlU3BhbkxpbmsoaW5NZW1vcnlQcmV2aW91c1RyYWNlSW5mbywgc3Bhbiwgb2xkUHJvcGFnYXRpb25Db250ZXh0KTtcbiAgICBpZiAodXNlU2Vzc2lvblN0b3JhZ2UpIHtcbiAgICAgIHN0b3JlUHJldmlvdXNUcmFjZUluU2Vzc2lvblN0b3JhZ2UoaW5NZW1vcnlQcmV2aW91c1RyYWNlSW5mbyk7XG4gICAgfVxuICB9KTtcbiAgbGV0IGlzRmlyc3RUcmFjZU9uUGFnZWxvYWQgPSB0cnVlO1xuICBpZiAoY29uc2lzdGVudFRyYWNlU2FtcGxpbmcpIHtcbiAgICAvKlxuICAgIFdoZW4gdXNlcnMgb3B0IGludG8gYGNvbnNpc3RlbnRUcmFjZVNhbXBsaW5nYCwgd2UgbmVlZCB0byBlbnN1cmUgdGhhdCB3ZSBwcm9wYWdhdGVcbiAgICB0aGUgcHJldmlvdXMgdHJhY2UncyBzYW1wbGUgcmF0ZSBhbmQgcmFuZCB0byB0aGUgY3VycmVudCB0cmFjZS4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBvdGhlcndpc2UsIHNwYW5cbiAgICBtZXRyaWMgZXh0cmFwb2xhdGlvbiBpcyBpbmFjY3VyYXRlLCBhcyB3ZSdkIHByb3BhZ2F0ZSB0b28gaGlnaCBvZiBhIHNhbXBsZSByYXRlIGZvciB0aGUgc3Vic2VxdWVudCB0cmFjZXMuXG4gICAgIFNvIHRoZXJlZm9yZSwgd2UgcHJldGVuZCB0aGF0IHRoZSBwcmV2aW91cyB0cmFjZSB3YXMgdGhlIHBhcmVudCB0cmFjZSBvZiB0aGUgbmV3bHkgc3RhcnRlZCB0cmFjZS4gVG8gZG8gdGhhdCxcbiAgICB3ZSBtdXRhdGUgdGhlIHByb3BhZ2F0aW9uIGNvbnRleHQgb2YgdGhlIGN1cnJlbnQgdHJhY2UgYW5kIHNldCB0aGUgc2FtcGxlIHJhdGUgYW5kIHNhbXBsZSByYW5kIG9mIHRoZSBwcmV2aW91cyB0cmFjZS5cbiAgICBUaW1pbmctd2lzZSwgaXQgaXMgZmluZSBiZWNhdXNlIGl0IGhhcHBlbnMgYmVmb3JlIHdlIGV2ZW4gc2FtcGxlIHRoZSByb290IHNwYW4uXG4gICAgIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvMTU3NTRcbiAgICAqL1xuICAgIGNsaWVudC5vbignYmVmb3JlU2FtcGxpbmcnLCBtdXRhYmxlU2FtcGxpbmdDb250ZXh0RGF0YSA9PiB7XG4gICAgICBpZiAoIWluTWVtb3J5UHJldmlvdXNUcmFjZUluZm8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2NvcGUgPSBnZXRDdXJyZW50U2NvcGUoKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRQcm9wYWdhdGlvbkNvbnRleHQgPSBzY29wZS5nZXRQcm9wYWdhdGlvbkNvbnRleHQoKTtcblxuICAgICAgLy8gV2UgZG8gbm90IHdhbnQgdG8gZm9yY2UtY29udGludWUgdGhlIHNhbXBsaW5nIGRlY2lzaW9uIGlmIHdlIGNvbnRpbnVlIGEgdHJhY2VcbiAgICAgIC8vIHRoYXQgd2FzIHN0YXJ0ZWQgb24gdGhlIGJhY2tlbmQuIE1vc3QgcHJvbWluZW50bHksIHRoaXMgd2lsbCBoYXBwZW4gaW4gTVBBcyB3aGVyZVxuICAgICAgLy8gdXNlcnMgaGFyZC1uYXZpZ2F0ZSBiZXR3ZWVuIHBhZ2VzLiBJbiB0aGlzIGNhc2UsIHRoZSBzYW1wbGluZyBkZWNpc2lvbiBvZiBhIHBvdGVudGlhbGx5XG4gICAgICAvLyBzdGFydGVkIHRyYWNlIG9uIHRoZSBzZXJ2ZXIgdGFrZXMgcHJlY2VkZW5jZS5cbiAgICAgIC8vIFdoeT8gV2Ugd2FudCB0byBwcmlvcml0aXplIGludGVyLXRyYWNlIGNvbnNpc3RlbmN5IG92ZXIgaW50cmEtdHJhY2UgY29uc2lzdGVuY3kuXG4gICAgICBpZiAoaXNGaXJzdFRyYWNlT25QYWdlbG9hZCAmJiBjdXJyZW50UHJvcGFnYXRpb25Db250ZXh0LnBhcmVudFNwYW5JZCkge1xuICAgICAgICBpc0ZpcnN0VHJhY2VPblBhZ2Vsb2FkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNjb3BlLnNldFByb3BhZ2F0aW9uQ29udGV4dCh7XG4gICAgICAgIC4uLmN1cnJlbnRQcm9wYWdhdGlvbkNvbnRleHQsXG4gICAgICAgIGRzYzoge1xuICAgICAgICAgIC4uLmN1cnJlbnRQcm9wYWdhdGlvbkNvbnRleHQuZHNjLFxuICAgICAgICAgIHNhbXBsZV9yYXRlOiBTdHJpbmcoaW5NZW1vcnlQcmV2aW91c1RyYWNlSW5mby5zYW1wbGVSYXRlKSxcbiAgICAgICAgICBzYW1wbGVkOiBTdHJpbmcoc3BhbkNvbnRleHRTYW1wbGVkKGluTWVtb3J5UHJldmlvdXNUcmFjZUluZm8uc3BhbkNvbnRleHQpKVxuICAgICAgICB9LFxuICAgICAgICBzYW1wbGVSYW5kOiBpbk1lbW9yeVByZXZpb3VzVHJhY2VJbmZvLnNhbXBsZVJhbmRcbiAgICAgIH0pO1xuICAgICAgbXV0YWJsZVNhbXBsaW5nQ29udGV4dERhdGEucGFyZW50U2FtcGxlZCA9IHNwYW5Db250ZXh0U2FtcGxlZChpbk1lbW9yeVByZXZpb3VzVHJhY2VJbmZvLnNwYW5Db250ZXh0KTtcbiAgICAgIG11dGFibGVTYW1wbGluZ0NvbnRleHREYXRhLnBhcmVudFNhbXBsZVJhdGUgPSBpbk1lbW9yeVByZXZpb3VzVHJhY2VJbmZvLnNhbXBsZVJhdGU7XG4gICAgICBtdXRhYmxlU2FtcGxpbmdDb250ZXh0RGF0YS5zcGFuQXR0cmlidXRlcyA9IHtcbiAgICAgICAgLi4ubXV0YWJsZVNhbXBsaW5nQ29udGV4dERhdGEuc3BhbkF0dHJpYnV0ZXMsXG4gICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1BSRVZJT1VTX1RSQUNFX1NBTVBMRV9SQVRFXTogaW5NZW1vcnlQcmV2aW91c1RyYWNlSW5mby5zYW1wbGVSYXRlXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQWRkcyBhIHByZXZpb3VzX3RyYWNlIHNwYW4gbGluayB0byB0aGUgcGFzc2VkIHNwYW4gaWYgdGhlIHBhc3NlZFxuICogcHJldmlvdXNUcmFjZUluZm8gaXMgc3RpbGwgdmFsaWQuXG4gKlxuICogQHJldHVybnMgdGhlIHVwZGF0ZWQgcHJldmlvdXMgdHJhY2UgaW5mbyAoYmFzZWQgb24gdGhlIGN1cnJlbnQgc3Bhbi90cmFjZSkgdG9cbiAqIGJlIHVzZWQgb24gdGhlIG5leHQgY2FsbFxuICovXG5mdW5jdGlvbiBhZGRQcmV2aW91c1RyYWNlU3BhbkxpbmsocHJldmlvdXNUcmFjZUluZm8sIHNwYW4sIG9sZFByb3BhZ2F0aW9uQ29udGV4dCkge1xuICBjb25zdCBzcGFuSnNvbiA9IHNwYW5Ub0pTT04oc3Bhbik7XG4gIGZ1bmN0aW9uIGdldFNhbXBsZVJhdGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBOdW1iZXIob2xkUHJvcGFnYXRpb25Db250ZXh0LmRzYz8uc2FtcGxlX3JhdGUpID8/IE51bWJlcihzcGFuSnNvbi5kYXRhPy5bU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TQU1QTEVfUkFURV0pO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG4gIGNvbnN0IHVwZGF0ZWRQcmV2aW91c1RyYWNlSW5mbyA9IHtcbiAgICBzcGFuQ29udGV4dDogc3Bhbi5zcGFuQ29udGV4dCgpLFxuICAgIHN0YXJ0VGltZXN0YW1wOiBzcGFuSnNvbi5zdGFydF90aW1lc3RhbXAsXG4gICAgc2FtcGxlUmF0ZTogZ2V0U2FtcGxlUmF0ZSgpLFxuICAgIHNhbXBsZVJhbmQ6IG9sZFByb3BhZ2F0aW9uQ29udGV4dC5zYW1wbGVSYW5kXG4gIH07XG4gIGlmICghcHJldmlvdXNUcmFjZUluZm8pIHtcbiAgICByZXR1cm4gdXBkYXRlZFByZXZpb3VzVHJhY2VJbmZvO1xuICB9XG4gIGNvbnN0IHByZXZpb3VzVHJhY2VTcGFuQ3R4ID0gcHJldmlvdXNUcmFjZUluZm8uc3BhbkNvbnRleHQ7XG4gIGlmIChwcmV2aW91c1RyYWNlU3BhbkN0eC50cmFjZUlkID09PSBzcGFuSnNvbi50cmFjZV9pZCkge1xuICAgIC8vIFRoaXMgbWVhbnMsIHdlJ3JlIHN0aWxsIGluIHRoZSBzYW1lIHRyYWNlIHNvIGxldCdzIG5vdCB1cGRhdGUgdGhlIHByZXZpb3VzIHRyYWNlIGluZm9cbiAgICAvLyBvciBhZGQgYSBsaW5rIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gICAgLy8gT25jZSB3ZSBtb3ZlIGF3YXkgZnJvbSB0aGUgbG9uZy1saXZlZCwgcm91dGUtYmFzZWQgdHJhY2UgbW9kZWwsIHdlIGNhbiByZW1vdmUgdGhpcyBjYXNlc1xuICAgIHJldHVybiBwcmV2aW91c1RyYWNlSW5mbztcbiAgfVxuXG4gIC8vIE9ubHkgYWRkIHRoZSBsaW5rIGlmIHRoZSBzdGFydFRpbWVTdGFtcCBvZiB0aGUgcHJldmlvdXMgdHJhY2UncyByb290IHNwYW4gaXMgd2l0aGluXG4gIC8vIFBSRVZJT1VTX1RSQUNFX01BWF9EVVJBVElPTiAoMWgpIG9mIHRoZSBjdXJyZW50IHJvb3Qgc3BhbidzIHN0YXJ0VGltZXN0YW1wXG4gIC8vIFRoaXMgaXMgZG9uZSB0b1xuICAvLyAtIGF2b2lkIGFkZGluZyBsaW5rcyB0byBcInN0YWxlXCIgdHJhY2VzXG4gIC8vIC0gZW5hYmxlIG1vcmUgZWZmaWNpZW50IHF1ZXJ5aW5nIGZvciBwcmV2aW91cy9uZXh0IHRyYWNlcyBpbiBTZW50cnlcbiAgaWYgKERhdGUubm93KCkgLyAxMDAwIC0gcHJldmlvdXNUcmFjZUluZm8uc3RhcnRUaW1lc3RhbXAgPD0gUFJFVklPVVNfVFJBQ0VfTUFYX0RVUkFUSU9OKSB7XG4gICAgaWYgKERFQlVHX0JVSUxEKSB7XG4gICAgICBsb2dnZXIuaW5mbyhgQWRkaW5nIHByZXZpb3VzX3RyYWNlICR7cHJldmlvdXNUcmFjZVNwYW5DdHh9IGxpbmsgdG8gc3BhbiAke3tcbiAgICAgICAgb3A6IHNwYW5Kc29uLm9wLFxuICAgICAgICAuLi5zcGFuLnNwYW5Db250ZXh0KClcbiAgICAgIH19YCk7XG4gICAgfVxuICAgIHNwYW4uYWRkTGluayh7XG4gICAgICBjb250ZXh0OiBwcmV2aW91c1RyYWNlU3BhbkN0eCxcbiAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgW1NFTUFOVElDX0xJTktfQVRUUklCVVRFX0xJTktfVFlQRV06ICdwcmV2aW91c190cmFjZSdcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIG9uY2UgRUFQIGNhbiBzdG9yZSBzcGFuIGxpbmtzLiBXZSBjdXJyZW50bHkgb25seSBzZXQgdGhpcyBhdHRyaWJ1dGUgc28gdGhhdCB3ZVxuICAgIC8vIGNhbiBvYnRhaW4gdGhlIHByZXZpb3VzIHRyYWNlIGluZm9ybWF0aW9uIGZyb20gdGhlIEVBUCBzdG9yZS4gTG9uZy10ZXJtLCBFQVAgd2lsbCBoYW5kbGVcbiAgICAvLyBzcGFuIGxpbmtzIGFuZCB0aGVuIHdlIHNob3VsZCByZW1vdmUgdGhpcyBhZ2Fpbi4gQWxzbyB0aHJvd2luZyBpbiBhIFRPRE8odjEwKSwgdG8gcmVtaW5kIHVzXG4gICAgLy8gdG8gY2hlY2sgdGhpcyBhdCB2MTAgdGltZSA6KVxuICAgIHNwYW4uc2V0QXR0cmlidXRlKFBSRVZJT1VTX1RSQUNFX1RNUF9TUEFOX0FUVFJJQlVURSwgYCR7cHJldmlvdXNUcmFjZVNwYW5DdHgudHJhY2VJZH0tJHtwcmV2aW91c1RyYWNlU3BhbkN0eC5zcGFuSWR9LSR7c3BhbkNvbnRleHRTYW1wbGVkKHByZXZpb3VzVHJhY2VTcGFuQ3R4KSA/IDEgOiAwfWApO1xuICB9XG4gIHJldHVybiB1cGRhdGVkUHJldmlvdXNUcmFjZUluZm87XG59XG5cbi8qKlxuICogU3RvcmVzIEBwYXJhbSBwcmV2aW91c1RyYWNlSW5mbyBpbiBzZXNzaW9uU3RvcmFnZS5cbiAqL1xuZnVuY3Rpb24gc3RvcmVQcmV2aW91c1RyYWNlSW5TZXNzaW9uU3RvcmFnZShwcmV2aW91c1RyYWNlSW5mbykge1xuICB0cnkge1xuICAgIFdJTkRPVy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBSRVZJT1VTX1RSQUNFX0tFWSwgSlNPTi5zdHJpbmdpZnkocHJldmlvdXNUcmFjZUluZm8pKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElnbm9yZSBwb3RlbnRpYWwgZXJyb3JzIChlLmcuIGlmIHNlc3Npb25TdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUpXG4gICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oJ0NvdWxkIG5vdCBzdG9yZSBwcmV2aW91cyB0cmFjZSBpbiBzZXNzaW9uU3RvcmFnZScsIGUpO1xuICB9XG59XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBwcmV2aW91cyB0cmFjZSBmcm9tIHNlc3Npb25TdG9yYWdlIGlmIGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gZ2V0UHJldmlvdXNUcmFjZUZyb21TZXNzaW9uU3RvcmFnZSgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwcmV2aW91c1RyYWNlSW5mbyA9IFdJTkRPVy5zZXNzaW9uU3RvcmFnZT8uZ2V0SXRlbShQUkVWSU9VU19UUkFDRV9LRVkpO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBpbnRlbnRpb25hbGx5IHJpc2tpbmcgSlNPTi5wYXJzZSB0aHJvd2luZyB3aGVuIHByZXZpb3VzVHJhY2VJbmZvIGlzIG51bGwgdG8gc2F2ZSBidW5kbGUgc2l6ZVxuICAgIHJldHVybiBKU09OLnBhcnNlKHByZXZpb3VzVHJhY2VJbmZvKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBzZWUge0BsaW5rIGltcG9ydCgnQHNlbnRyeS9jb3JlJykuc3BhbklzU2FtcGxlZH1cbiAqL1xuZnVuY3Rpb24gc3BhbkNvbnRleHRTYW1wbGVkKGN0eCkge1xuICByZXR1cm4gY3R4LnRyYWNlRmxhZ3MgPT09IDB4MTtcbn1cbmV4cG9ydCB7IFBSRVZJT1VTX1RSQUNFX0tFWSwgUFJFVklPVVNfVFJBQ0VfTUFYX0RVUkFUSU9OLCBQUkVWSU9VU19UUkFDRV9UTVBfU1BBTl9BVFRSSUJVVEUsIGFkZFByZXZpb3VzVHJhY2VTcGFuTGluaywgZ2V0UHJldmlvdXNUcmFjZUZyb21TZXNzaW9uU3RvcmFnZSwgbGlua1RyYWNlcywgc3BhbkNvbnRleHRTYW1wbGVkLCBzdG9yZVByZXZpb3VzVHJhY2VJblNlc3Npb25TdG9yYWdlIH07XG4iLCJpbXBvcnQgeyBUUkFDSU5HX0RFRkFVTFRTLCBnZXRMb2NhdGlvbkhyZWYsIGJyb3dzZXJQZXJmb3JtYW5jZVRpbWVPcmlnaW4sIHBhcnNlU3RyaW5nVG9VUkxPYmplY3QsIHJlZ2lzdGVyU3BhbkVycm9ySW5zdHJ1bWVudGF0aW9uLCBHTE9CQUxfT0JKLCBnZXRDbGllbnQsIGxvZ2dlciwgZ2V0SXNvbGF0aW9uU2NvcGUsIGdlbmVyYXRlVHJhY2VJZCwgZ2V0Q3VycmVudFNjb3BlLCBwcm9wYWdhdGlvbkNvbnRleHRGcm9tSGVhZGVycywgc3BhblRvSlNPTiwgZGF0ZVRpbWVzdGFtcEluU2Vjb25kcywgdGltZXN0YW1wSW5TZWNvbmRzLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRSwgc3RhcnRJbmFjdGl2ZVNwYW4sIHN0YXJ0SWRsZVNwYW4sIGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU3Bhbiwgc3BhbklzU2FtcGxlZCwgU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9JRExFX1NQQU5fRklOSVNIX1JFQVNPTiwgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5LCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTiB9IGZyb20gJ0BzZW50cnkvY29yZSc7XG5pbXBvcnQgeyBhZGRIaXN0b3J5SW5zdHJ1bWVudGF0aW9uSGFuZGxlciwgcmVnaXN0ZXJJbnBJbnRlcmFjdGlvbkxpc3RlbmVyLCBzdGFydFRyYWNraW5nV2ViVml0YWxzLCBzdGFydFRyYWNraW5nSU5QLCBzdGFydFRyYWNraW5nRWxlbWVudFRpbWluZywgc3RhcnRUcmFja2luZ0xvbmdBbmltYXRpb25GcmFtZXMsIHN0YXJ0VHJhY2tpbmdMb25nVGFza3MsIHN0YXJ0VHJhY2tpbmdJbnRlcmFjdGlvbnMsIGFkZFBlcmZvcm1hbmNlRW50cmllcyB9IGZyb20gJ0BzZW50cnktaW50ZXJuYWwvYnJvd3Nlci11dGlscyc7XG5pbXBvcnQgeyBERUJVR19CVUlMRCB9IGZyb20gJy4uL2RlYnVnLWJ1aWxkLmpzJztcbmltcG9ydCB7IFdJTkRPVywgZ2V0SHR0cFJlcXVlc3REYXRhIH0gZnJvbSAnLi4vaGVscGVycy5qcyc7XG5pbXBvcnQgeyByZWdpc3RlckJhY2tncm91bmRUYWJEZXRlY3Rpb24gfSBmcm9tICcuL2JhY2tncm91bmR0YWIuanMnO1xuaW1wb3J0IHsgbGlua1RyYWNlcyB9IGZyb20gJy4vbGlua2VkVHJhY2VzLmpzJztcbmltcG9ydCB7IGRlZmF1bHRSZXF1ZXN0SW5zdHJ1bWVudGF0aW9uT3B0aW9ucywgaW5zdHJ1bWVudE91dGdvaW5nUmVxdWVzdHMgfSBmcm9tICcuL3JlcXVlc3QuanMnO1xuY29uc3QgQlJPV1NFUl9UUkFDSU5HX0lOVEVHUkFUSU9OX0lEID0gJ0Jyb3dzZXJUcmFjaW5nJztcbmNvbnN0IERFRkFVTFRfQlJPV1NFUl9UUkFDSU5HX09QVElPTlMgPSB7XG4gIC4uLlRSQUNJTkdfREVGQVVMVFMsXG4gIGluc3RydW1lbnROYXZpZ2F0aW9uOiB0cnVlLFxuICBpbnN0cnVtZW50UGFnZUxvYWQ6IHRydWUsXG4gIG1hcmtCYWNrZ3JvdW5kU3BhbjogdHJ1ZSxcbiAgZW5hYmxlTG9uZ1Rhc2s6IHRydWUsXG4gIGVuYWJsZUxvbmdBbmltYXRpb25GcmFtZTogdHJ1ZSxcbiAgZW5hYmxlSW5wOiB0cnVlLFxuICBlbmFibGVFbGVtZW50VGltaW5nOiB0cnVlLFxuICBpZ25vcmVSZXNvdXJjZVNwYW5zOiBbXSxcbiAgaWdub3JlUGVyZm9ybWFuY2VBcGlTcGFuczogW10sXG4gIGRldGVjdFJlZGlyZWN0czogdHJ1ZSxcbiAgbGlua1ByZXZpb3VzVHJhY2U6ICdpbi1tZW1vcnknLFxuICBjb25zaXN0ZW50VHJhY2VTYW1wbGluZzogZmFsc2UsXG4gIF9leHBlcmltZW50czoge30sXG4gIC4uLmRlZmF1bHRSZXF1ZXN0SW5zdHJ1bWVudGF0aW9uT3B0aW9uc1xufTtcblxuLyoqXG4gKiBUaGUgQnJvd3NlciBUcmFjaW5nIGludGVncmF0aW9uIGF1dG9tYXRpY2FsbHkgaW5zdHJ1bWVudHMgYnJvd3NlciBwYWdlbG9hZC9uYXZpZ2F0aW9uXG4gKiBhY3Rpb25zIGFzIHRyYW5zYWN0aW9ucywgYW5kIGNhcHR1cmVzIHJlcXVlc3RzLCBtZXRyaWNzIGFuZCBlcnJvcnMgYXMgc3BhbnMuXG4gKlxuICogVGhlIGludGVncmF0aW9uIGNhbiBiZSBjb25maWd1cmVkIHdpdGggYSB2YXJpZXR5IG9mIG9wdGlvbnMsIGFuZCBjYW4gYmUgZXh0ZW5kZWQgdG8gdXNlXG4gKiBhbnkgcm91dGluZyBsaWJyYXJ5LlxuICpcbiAqIFdlIGV4cGxpY2l0bHkgZXhwb3J0IHRoZSBwcm9wZXIgdHlwZSBoZXJlLCBhcyB0aGlzIGhhcyB0byBiZSBleHRlbmRlZCBpbiBzb21lIGNhc2VzLlxuICovXG5jb25zdCBicm93c2VyVHJhY2luZ0ludGVncmF0aW9uID0gKF9vcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgbGF0ZXN0Um91dGUgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgIHNvdXJjZTogdW5kZWZpbmVkXG4gIH07XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMganVzdCBhIHNtYWxsIHdyYXBwZXIgdGhhdCBtYWtlcyBgZG9jdW1lbnRgIG9wdGlvbmFsLlxuICAgKiBXZSB3YW50IHRvIGJlIGV4dHJhLXNhZmUgYW5kIGFsd2F5cyBjaGVjayB0aGF0IHRoaXMgZXhpc3RzLCB0byBlbnN1cmUgd2VpcmQgZW52aXJvbm1lbnRzIGRvIG5vdCBibG93IHVwLlxuICAgKi9cbiAgY29uc3Qgb3B0aW9uYWxXaW5kb3dEb2N1bWVudCA9IFdJTkRPVy5kb2N1bWVudDtcbiAgY29uc3Qge1xuICAgIGVuYWJsZUlucCxcbiAgICBlbmFibGVFbGVtZW50VGltaW5nLFxuICAgIGVuYWJsZUxvbmdUYXNrLFxuICAgIGVuYWJsZUxvbmdBbmltYXRpb25GcmFtZSxcbiAgICBfZXhwZXJpbWVudHM6IHtcbiAgICAgIGVuYWJsZUludGVyYWN0aW9ucyxcbiAgICAgIGVuYWJsZVN0YW5kYWxvbmVDbHNTcGFucyxcbiAgICAgIGVuYWJsZVN0YW5kYWxvbmVMY3BTcGFuc1xuICAgIH0sXG4gICAgYmVmb3JlU3RhcnRTcGFuLFxuICAgIGlkbGVUaW1lb3V0LFxuICAgIGZpbmFsVGltZW91dCxcbiAgICBjaGlsZFNwYW5UaW1lb3V0LFxuICAgIG1hcmtCYWNrZ3JvdW5kU3BhbixcbiAgICB0cmFjZUZldGNoLFxuICAgIHRyYWNlWEhSLFxuICAgIHRyYWNrRmV0Y2hTdHJlYW1QZXJmb3JtYW5jZSxcbiAgICBzaG91bGRDcmVhdGVTcGFuRm9yUmVxdWVzdCxcbiAgICBlbmFibGVIVFRQVGltaW5ncyxcbiAgICBpZ25vcmVSZXNvdXJjZVNwYW5zLFxuICAgIGlnbm9yZVBlcmZvcm1hbmNlQXBpU3BhbnMsXG4gICAgaW5zdHJ1bWVudFBhZ2VMb2FkLFxuICAgIGluc3RydW1lbnROYXZpZ2F0aW9uLFxuICAgIGRldGVjdFJlZGlyZWN0cyxcbiAgICBsaW5rUHJldmlvdXNUcmFjZSxcbiAgICBjb25zaXN0ZW50VHJhY2VTYW1wbGluZyxcbiAgICBvblJlcXVlc3RTcGFuU3RhcnRcbiAgfSA9IHtcbiAgICAuLi5ERUZBVUxUX0JST1dTRVJfVFJBQ0lOR19PUFRJT05TLFxuICAgIC4uLl9vcHRpb25zXG4gIH07XG4gIGxldCBfY29sbGVjdFdlYlZpdGFscztcbiAgbGV0IGxhc3RJbnRlcmFjdGlvblRpbWVzdGFtcDtcblxuICAvKiogQ3JlYXRlIHJvdXRpbmcgaWRsZSB0cmFuc2FjdGlvbi4gKi9cbiAgZnVuY3Rpb24gX2NyZWF0ZVJvdXRlU3BhbihjbGllbnQsIHN0YXJ0U3Bhbk9wdGlvbnMsIG1ha2VBY3RpdmUgPSB0cnVlKSB7XG4gICAgY29uc3QgaXNQYWdlbG9hZFRyYW5zYWN0aW9uID0gc3RhcnRTcGFuT3B0aW9ucy5vcCA9PT0gJ3BhZ2Vsb2FkJztcbiAgICBjb25zdCBmaW5hbFN0YXJ0U3Bhbk9wdGlvbnMgPSBiZWZvcmVTdGFydFNwYW4gPyBiZWZvcmVTdGFydFNwYW4oc3RhcnRTcGFuT3B0aW9ucykgOiBzdGFydFNwYW5PcHRpb25zO1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBmaW5hbFN0YXJ0U3Bhbk9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICAgIC8vIElmIGBmaW5hbFN0YXJ0U3Bhbk9wdGlvbnMubmFtZWAgaXMgZGlmZmVyZW50IHRoYW4gYHN0YXJ0U3Bhbk9wdGlvbnMubmFtZWBcbiAgICAvLyBpdCBpcyBiZWNhdXNlIGBiZWZvcmVTdGFydFNwYW5gIHNldCBhIGN1c3RvbSBuYW1lLiBUaGVyZWZvcmUgd2Ugc2V0IHRoZSBzb3VyY2UgdG8gJ2N1c3RvbScuXG4gICAgaWYgKHN0YXJ0U3Bhbk9wdGlvbnMubmFtZSAhPT0gZmluYWxTdGFydFNwYW5PcHRpb25zLm5hbWUpIHtcbiAgICAgIGF0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0VdID0gJ2N1c3RvbSc7XG4gICAgICBmaW5hbFN0YXJ0U3Bhbk9wdGlvbnMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIGlmICghbWFrZUFjdGl2ZSkge1xuICAgICAgLy8gV2Ugd2FudCB0byBlbnN1cmUgdGhpcyBoYXMgMHMgZHVyYXRpb25cbiAgICAgIGNvbnN0IG5vdyA9IGRhdGVUaW1lc3RhbXBJblNlY29uZHMoKTtcbiAgICAgIHN0YXJ0SW5hY3RpdmVTcGFuKHtcbiAgICAgICAgLi4uZmluYWxTdGFydFNwYW5PcHRpb25zLFxuICAgICAgICBzdGFydFRpbWU6IG5vd1xuICAgICAgfSkuZW5kKG5vdyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxhdGVzdFJvdXRlLm5hbWUgPSBmaW5hbFN0YXJ0U3Bhbk9wdGlvbnMubmFtZTtcbiAgICBsYXRlc3RSb3V0ZS5zb3VyY2UgPSBhdHRyaWJ1dGVzW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFXTtcbiAgICBjb25zdCBpZGxlU3BhbiA9IHN0YXJ0SWRsZVNwYW4oZmluYWxTdGFydFNwYW5PcHRpb25zLCB7XG4gICAgICBpZGxlVGltZW91dCxcbiAgICAgIGZpbmFsVGltZW91dCxcbiAgICAgIGNoaWxkU3BhblRpbWVvdXQsXG4gICAgICAvLyBzaG91bGQgd2FpdCBmb3IgZmluaXNoIHNpZ25hbCBpZiBpdCdzIGEgcGFnZWxvYWQgdHJhbnNhY3Rpb25cbiAgICAgIGRpc2FibGVBdXRvRmluaXNoOiBpc1BhZ2Vsb2FkVHJhbnNhY3Rpb24sXG4gICAgICBiZWZvcmVTcGFuRW5kOiBzcGFuID0+IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGdlbmVyYWxseSBhbHdheXMgYmUgZGVmaW5lZCBoZXJlLCBiZWNhdXNlIGl0IGlzIHNldCBpbiBgc2V0dXAoKWAgb2YgdGhlIGludGVncmF0aW9uXG4gICAgICAgIC8vIGJ1dCB0ZWNobmljYWxseSwgaXQgaXMgb3B0aW9uYWwsIHNvIHdlIGd1YXJkIGhlcmUgdG8gYmUgZXh0cmEgc2FmZVxuICAgICAgICBfY29sbGVjdFdlYlZpdGFscz8uKCk7XG4gICAgICAgIGFkZFBlcmZvcm1hbmNlRW50cmllcyhzcGFuLCB7XG4gICAgICAgICAgcmVjb3JkQ2xzT25QYWdlbG9hZFNwYW46ICFlbmFibGVTdGFuZGFsb25lQ2xzU3BhbnMsXG4gICAgICAgICAgcmVjb3JkTGNwT25QYWdlbG9hZFNwYW46ICFlbmFibGVTdGFuZGFsb25lTGNwU3BhbnMsXG4gICAgICAgICAgaWdub3JlUmVzb3VyY2VTcGFucyxcbiAgICAgICAgICBpZ25vcmVQZXJmb3JtYW5jZUFwaVNwYW5zXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRBY3RpdmVJZGxlU3BhbihjbGllbnQsIHVuZGVmaW5lZCk7XG5cbiAgICAgICAgLy8gQSB0cmFjZSBzaG91bGQgc3RheSBjb25zaXN0ZW50IG92ZXIgdGhlIGVudGlyZSB0aW1lc3BhbiBvZiBvbmUgcm91dGUgLSBldmVuIGFmdGVyIHRoZSBwYWdlbG9hZC9uYXZpZ2F0aW9uIGVuZGVkLlxuICAgICAgICAvLyBPbmx5IHdoZW4gYW5vdGhlciBuYXZpZ2F0aW9uIGhhcHBlbnMsIHdlIHdhbnQgdG8gY3JlYXRlIGEgbmV3IHRyYWNlLlxuICAgICAgICAvLyBUaGlzIHdheSwgZS5nLiBlcnJvcnMgdGhhdCBvY2N1ciBhZnRlciB0aGUgcGFnZWxvYWQgc3BhbiBlbmRlZCBhcmUgc3RpbGwgYXNzb2NpYXRlZCB0byB0aGUgcGFnZWxvYWQgdHJhY2UuXG4gICAgICAgIGNvbnN0IHNjb3BlID0gZ2V0Q3VycmVudFNjb3BlKCk7XG4gICAgICAgIGNvbnN0IG9sZFByb3BhZ2F0aW9uQ29udGV4dCA9IHNjb3BlLmdldFByb3BhZ2F0aW9uQ29udGV4dCgpO1xuICAgICAgICBzY29wZS5zZXRQcm9wYWdhdGlvbkNvbnRleHQoe1xuICAgICAgICAgIC4uLm9sZFByb3BhZ2F0aW9uQ29udGV4dCxcbiAgICAgICAgICB0cmFjZUlkOiBpZGxlU3Bhbi5zcGFuQ29udGV4dCgpLnRyYWNlSWQsXG4gICAgICAgICAgc2FtcGxlZDogc3BhbklzU2FtcGxlZChpZGxlU3BhbiksXG4gICAgICAgICAgZHNjOiBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4oc3BhbilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2V0QWN0aXZlSWRsZVNwYW4oY2xpZW50LCBpZGxlU3Bhbik7XG4gICAgZnVuY3Rpb24gZW1pdEZpbmlzaCgpIHtcbiAgICAgIGlmIChvcHRpb25hbFdpbmRvd0RvY3VtZW50ICYmIFsnaW50ZXJhY3RpdmUnLCAnY29tcGxldGUnXS5pbmNsdWRlcyhvcHRpb25hbFdpbmRvd0RvY3VtZW50LnJlYWR5U3RhdGUpKSB7XG4gICAgICAgIGNsaWVudC5lbWl0KCdpZGxlU3BhbkVuYWJsZUF1dG9GaW5pc2gnLCBpZGxlU3Bhbik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc1BhZ2Vsb2FkVHJhbnNhY3Rpb24gJiYgb3B0aW9uYWxXaW5kb3dEb2N1bWVudCkge1xuICAgICAgb3B0aW9uYWxXaW5kb3dEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICBlbWl0RmluaXNoKCk7XG4gICAgICB9KTtcbiAgICAgIGVtaXRGaW5pc2goKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBCUk9XU0VSX1RSQUNJTkdfSU5URUdSQVRJT05fSUQsXG4gICAgc2V0dXAoY2xpZW50KSB7XG4gICAgICByZWdpc3RlclNwYW5FcnJvckluc3RydW1lbnRhdGlvbigpO1xuICAgICAgX2NvbGxlY3RXZWJWaXRhbHMgPSBzdGFydFRyYWNraW5nV2ViVml0YWxzKHtcbiAgICAgICAgcmVjb3JkQ2xzU3RhbmRhbG9uZVNwYW5zOiBlbmFibGVTdGFuZGFsb25lQ2xzU3BhbnMgfHwgZmFsc2UsXG4gICAgICAgIHJlY29yZExjcFN0YW5kYWxvbmVTcGFuczogZW5hYmxlU3RhbmRhbG9uZUxjcFNwYW5zIHx8IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIGlmIChlbmFibGVJbnApIHtcbiAgICAgICAgc3RhcnRUcmFja2luZ0lOUCgpO1xuICAgICAgfVxuICAgICAgaWYgKGVuYWJsZUVsZW1lbnRUaW1pbmcpIHtcbiAgICAgICAgc3RhcnRUcmFja2luZ0VsZW1lbnRUaW1pbmcoKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmFibGVMb25nQW5pbWF0aW9uRnJhbWUgJiYgR0xPQkFMX09CSi5QZXJmb3JtYW5jZU9ic2VydmVyICYmIFBlcmZvcm1hbmNlT2JzZXJ2ZXIuc3VwcG9ydGVkRW50cnlUeXBlcyAmJiBQZXJmb3JtYW5jZU9ic2VydmVyLnN1cHBvcnRlZEVudHJ5VHlwZXMuaW5jbHVkZXMoJ2xvbmctYW5pbWF0aW9uLWZyYW1lJykpIHtcbiAgICAgICAgc3RhcnRUcmFja2luZ0xvbmdBbmltYXRpb25GcmFtZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoZW5hYmxlTG9uZ1Rhc2spIHtcbiAgICAgICAgc3RhcnRUcmFja2luZ0xvbmdUYXNrcygpO1xuICAgICAgfVxuICAgICAgaWYgKGVuYWJsZUludGVyYWN0aW9ucykge1xuICAgICAgICBzdGFydFRyYWNraW5nSW50ZXJhY3Rpb25zKCk7XG4gICAgICB9XG4gICAgICBpZiAoZGV0ZWN0UmVkaXJlY3RzICYmIG9wdGlvbmFsV2luZG93RG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25IYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICAgIGxhc3RJbnRlcmFjdGlvblRpbWVzdGFtcCA9IHRpbWVzdGFtcEluU2Vjb25kcygpO1xuICAgICAgICB9O1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGludGVyYWN0aW9uSGFuZGxlciwge1xuICAgICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBpbnRlcmFjdGlvbkhhbmRsZXIsIHtcbiAgICAgICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBtYXliZUVuZEFjdGl2ZVNwYW4oKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSBnZXRBY3RpdmVJZGxlU3BhbihjbGllbnQpO1xuICAgICAgICBpZiAoYWN0aXZlU3BhbiAmJiAhc3BhblRvSlNPTihhY3RpdmVTcGFuKS50aW1lc3RhbXApIHtcbiAgICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIubG9nKGBbVHJhY2luZ10gRmluaXNoaW5nIGN1cnJlbnQgYWN0aXZlIHNwYW4gd2l0aCBvcDogJHtzcGFuVG9KU09OKGFjdGl2ZVNwYW4pLm9wfWApO1xuICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYW4gb3BlbiBhY3RpdmUgc3Bhbiwgd2UgbmVlZCB0byBmaW5pc2ggaXQgYmVmb3JlIGNyZWF0aW5nIGFuIG5ldyBvbmUuXG4gICAgICAgICAgYWN0aXZlU3Bhbi5zZXRBdHRyaWJ1dGUoU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9JRExFX1NQQU5fRklOSVNIX1JFQVNPTiwgJ2NhbmNlbGxlZCcpO1xuICAgICAgICAgIGFjdGl2ZVNwYW4uZW5kKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNsaWVudC5vbignc3RhcnROYXZpZ2F0aW9uU3BhbicsIChzdGFydFNwYW5PcHRpb25zLCBuYXZpZ2F0aW9uT3B0aW9ucykgPT4ge1xuICAgICAgICBpZiAoZ2V0Q2xpZW50KCkgIT09IGNsaWVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmF2aWdhdGlvbk9wdGlvbnM/LmlzUmVkaXJlY3QpIHtcbiAgICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIud2FybignW1RyYWNpbmddIERldGVjdGVkIHJlZGlyZWN0LCBuYXZpZ2F0aW9uIHNwYW4gd2lsbCBub3QgYmUgdGhlIHJvb3Qgc3BhbiwgYnV0IGEgY2hpbGQgc3Bhbi4nKTtcbiAgICAgICAgICBfY3JlYXRlUm91dGVTcGFuKGNsaWVudCwge1xuICAgICAgICAgICAgb3A6ICduYXZpZ2F0aW9uLnJlZGlyZWN0JyxcbiAgICAgICAgICAgIC4uLnN0YXJ0U3Bhbk9wdGlvbnNcbiAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG1heWJlRW5kQWN0aXZlU3BhbigpO1xuICAgICAgICBnZXRJc29sYXRpb25TY29wZSgpLnNldFByb3BhZ2F0aW9uQ29udGV4dCh7XG4gICAgICAgICAgdHJhY2VJZDogZ2VuZXJhdGVUcmFjZUlkKCksXG4gICAgICAgICAgc2FtcGxlUmFuZDogTWF0aC5yYW5kb20oKVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2NvcGUgPSBnZXRDdXJyZW50U2NvcGUoKTtcbiAgICAgICAgc2NvcGUuc2V0UHJvcGFnYXRpb25Db250ZXh0KHtcbiAgICAgICAgICB0cmFjZUlkOiBnZW5lcmF0ZVRyYWNlSWQoKSxcbiAgICAgICAgICBzYW1wbGVSYW5kOiBNYXRoLnJhbmRvbSgpXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBXZSByZXNldCB0aGlzIHRvIGVuc3VyZSB3ZSBkbyBub3QgaGF2ZSBsaW5nZXJpbmcgaW5jb3JyZWN0IGRhdGEgaGVyZVxuICAgICAgICAvLyBwbGFjZXMgdGhhdCBjYWxsIHRoaXMgaG9vayBtYXkgc2V0IHRoaXMgd2hlcmUgYXBwcm9wcmlhdGUgLSBlbHNlLCB0aGUgVVJMIGF0IHNwYW4gc2VuZGluZyB0aW1lIGlzIHVzZWRcbiAgICAgICAgc2NvcGUuc2V0U0RLUHJvY2Vzc2luZ01ldGFkYXRhKHtcbiAgICAgICAgICBub3JtYWxpemVkUmVxdWVzdDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgICAgICBfY3JlYXRlUm91dGVTcGFuKGNsaWVudCwge1xuICAgICAgICAgIG9wOiAnbmF2aWdhdGlvbicsXG4gICAgICAgICAgLi4uc3RhcnRTcGFuT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY2xpZW50Lm9uKCdzdGFydFBhZ2VMb2FkU3BhbicsIChzdGFydFNwYW5PcHRpb25zLCB0cmFjZU9wdGlvbnMgPSB7fSkgPT4ge1xuICAgICAgICBpZiAoZ2V0Q2xpZW50KCkgIT09IGNsaWVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBtYXliZUVuZEFjdGl2ZVNwYW4oKTtcbiAgICAgICAgY29uc3Qgc2VudHJ5VHJhY2UgPSB0cmFjZU9wdGlvbnMuc2VudHJ5VHJhY2UgfHwgZ2V0TWV0YUNvbnRlbnQoJ3NlbnRyeS10cmFjZScpO1xuICAgICAgICBjb25zdCBiYWdnYWdlID0gdHJhY2VPcHRpb25zLmJhZ2dhZ2UgfHwgZ2V0TWV0YUNvbnRlbnQoJ2JhZ2dhZ2UnKTtcbiAgICAgICAgY29uc3QgcHJvcGFnYXRpb25Db250ZXh0ID0gcHJvcGFnYXRpb25Db250ZXh0RnJvbUhlYWRlcnMoc2VudHJ5VHJhY2UsIGJhZ2dhZ2UpO1xuICAgICAgICBjb25zdCBzY29wZSA9IGdldEN1cnJlbnRTY29wZSgpO1xuICAgICAgICBzY29wZS5zZXRQcm9wYWdhdGlvbkNvbnRleHQocHJvcGFnYXRpb25Db250ZXh0KTtcblxuICAgICAgICAvLyBXZSBzdG9yZSB0aGUgbm9ybWFsaXplZCByZXF1ZXN0IGRhdGEgb24gdGhlIHNjb3BlLCBzbyB3ZSBnZXQgdGhlIHJlcXVlc3QgZGF0YSBhdCB0aW1lIG9mIHNwYW4gY3JlYXRpb25cbiAgICAgICAgLy8gb3RoZXJ3aXNlLCB0aGUgVVJMIGV0Yy4gbWF5IGFscmVhZHkgYmUgb2YgdGhlIGZvbGxvd2luZyBuYXZpZ2F0aW9uLCBhbmQgd2UnZCByZXBvcnQgdGhlIHdyb25nIFVSTFxuICAgICAgICBzY29wZS5zZXRTREtQcm9jZXNzaW5nTWV0YWRhdGEoe1xuICAgICAgICAgIG5vcm1hbGl6ZWRSZXF1ZXN0OiBnZXRIdHRwUmVxdWVzdERhdGEoKVxuICAgICAgICB9KTtcbiAgICAgICAgX2NyZWF0ZVJvdXRlU3BhbihjbGllbnQsIHtcbiAgICAgICAgICBvcDogJ3BhZ2Vsb2FkJyxcbiAgICAgICAgICAuLi5zdGFydFNwYW5PcHRpb25zXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBhZnRlckFsbFNldHVwKGNsaWVudCkge1xuICAgICAgbGV0IHN0YXJ0aW5nVXJsID0gZ2V0TG9jYXRpb25IcmVmKCk7XG4gICAgICBpZiAobGlua1ByZXZpb3VzVHJhY2UgIT09ICdvZmYnKSB7XG4gICAgICAgIGxpbmtUcmFjZXMoY2xpZW50LCB7XG4gICAgICAgICAgbGlua1ByZXZpb3VzVHJhY2UsXG4gICAgICAgICAgY29uc2lzdGVudFRyYWNlU2FtcGxpbmdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoV0lORE9XLmxvY2F0aW9uKSB7XG4gICAgICAgIGlmIChpbnN0cnVtZW50UGFnZUxvYWQpIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW4gPSBicm93c2VyUGVyZm9ybWFuY2VUaW1lT3JpZ2luKCk7XG4gICAgICAgICAgc3RhcnRCcm93c2VyVHJhY2luZ1BhZ2VMb2FkU3BhbihjbGllbnQsIHtcbiAgICAgICAgICAgIG5hbWU6IFdJTkRPVy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICAgIC8vIHBhZ2Vsb2FkIHNob3VsZCBhbHdheXMgc3RhcnQgYXQgdGltZU9yaWdpbiAoYW5kIG5lZWRzIHRvIGJlIGluIHMsIG5vdCBtcylcbiAgICAgICAgICAgIHN0YXJ0VGltZTogb3JpZ2luID8gb3JpZ2luIC8gMTAwMCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFXTogJ3VybCcsXG4gICAgICAgICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTl06ICdhdXRvLnBhZ2Vsb2FkLmJyb3dzZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RydW1lbnROYXZpZ2F0aW9uKSB7XG4gICAgICAgICAgYWRkSGlzdG9yeUluc3RydW1lbnRhdGlvbkhhbmRsZXIoKHtcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgZnJvbVxuICAgICAgICAgIH0pID0+IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhpcyBlYXJseSByZXR1cm4gaXMgdGhlcmUgdG8gYWNjb3VudCBmb3Igc29tZSBjYXNlcyB3aGVyZSBhIG5hdmlnYXRpb24gdHJhbnNhY3Rpb24gc3RhcnRzIHJpZ2h0IGFmdGVyXG4gICAgICAgICAgICAgKiBsb25nLXJ1bm5pbmcgcGFnZWxvYWQuIFdlIG1ha2Ugc3VyZSB0aGF0IGlmIGBmcm9tYCBpcyB1bmRlZmluZWQgYW5kIGEgdmFsaWQgYHN0YXJ0aW5nVVJMYCBleGlzdHMsIHdlIGRvbid0XG4gICAgICAgICAgICAgKiBjcmVhdGUgYW4gdW5lY2Nlc3NhcnkgbmF2aWdhdGlvbiB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBUaGlzIHdhcyBoYXJkIHRvIGR1cGxpY2F0ZSwgYnV0IHRoaXMgYmVoYXZpb3Igc3RvcHBlZCBhcyBzb29uIGFzIHRoaXMgZml4IHdhcyBhcHBsaWVkLiBUaGlzIGlzc3VlIG1pZ2h0IGFsc29cbiAgICAgICAgICAgICAqIG9ubHkgYmUgY2F1c2VkIGluIGNlcnRhaW4gZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzIHdoZXJlIHRoZSB1c2FnZSBvZiBhIGhvdCBtb2R1bGUgcmVsb2FkZXIgaXMgY2F1c2luZ1xuICAgICAgICAgICAgICogZXJyb3JzLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoZnJvbSA9PT0gdW5kZWZpbmVkICYmIHN0YXJ0aW5nVXJsPy5pbmRleE9mKHRvKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgc3RhcnRpbmdVcmwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXJ0aW5nVXJsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VTdHJpbmdUb1VSTE9iamVjdCh0byk7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVTcGFuID0gZ2V0QWN0aXZlSWRsZVNwYW4oY2xpZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG5hdmlnYXRpb25Jc1JlZGlyZWN0ID0gYWN0aXZlU3BhbiAmJiBkZXRlY3RSZWRpcmVjdHMgJiYgaXNSZWRpcmVjdChhY3RpdmVTcGFuLCBsYXN0SW50ZXJhY3Rpb25UaW1lc3RhbXApO1xuICAgICAgICAgICAgc3RhcnRCcm93c2VyVHJhY2luZ05hdmlnYXRpb25TcGFuKGNsaWVudCwge1xuICAgICAgICAgICAgICBuYW1lOiBwYXJzZWQ/LnBhdGhuYW1lIHx8IFdJTkRPVy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRV06ICd1cmwnLFxuICAgICAgICAgICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTl06ICdhdXRvLm5hdmlnYXRpb24uYnJvd3NlcidcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICB1cmw6IHRvLFxuICAgICAgICAgICAgICBpc1JlZGlyZWN0OiBuYXZpZ2F0aW9uSXNSZWRpcmVjdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtYXJrQmFja2dyb3VuZFNwYW4pIHtcbiAgICAgICAgcmVnaXN0ZXJCYWNrZ3JvdW5kVGFiRGV0ZWN0aW9uKCk7XG4gICAgICB9XG4gICAgICBpZiAoZW5hYmxlSW50ZXJhY3Rpb25zKSB7XG4gICAgICAgIHJlZ2lzdGVySW50ZXJhY3Rpb25MaXN0ZW5lcihjbGllbnQsIGlkbGVUaW1lb3V0LCBmaW5hbFRpbWVvdXQsIGNoaWxkU3BhblRpbWVvdXQsIGxhdGVzdFJvdXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmFibGVJbnApIHtcbiAgICAgICAgcmVnaXN0ZXJJbnBJbnRlcmFjdGlvbkxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgICBpbnN0cnVtZW50T3V0Z29pbmdSZXF1ZXN0cyhjbGllbnQsIHtcbiAgICAgICAgdHJhY2VGZXRjaCxcbiAgICAgICAgdHJhY2VYSFIsXG4gICAgICAgIHRyYWNrRmV0Y2hTdHJlYW1QZXJmb3JtYW5jZSxcbiAgICAgICAgdHJhY2VQcm9wYWdhdGlvblRhcmdldHM6IGNsaWVudC5nZXRPcHRpb25zKCkudHJhY2VQcm9wYWdhdGlvblRhcmdldHMsXG4gICAgICAgIHNob3VsZENyZWF0ZVNwYW5Gb3JSZXF1ZXN0LFxuICAgICAgICBlbmFibGVIVFRQVGltaW5ncyxcbiAgICAgICAgb25SZXF1ZXN0U3BhblN0YXJ0XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIE1hbnVhbGx5IHN0YXJ0IGEgcGFnZSBsb2FkIHNwYW4uXG4gKiBUaGlzIHdpbGwgb25seSBkbyBzb21ldGhpbmcgaWYgYSBicm93c2VyIHRyYWNpbmcgaW50ZWdyYXRpb24gaW50ZWdyYXRpb24gaGFzIGJlZW4gc2V0dXAuXG4gKlxuICogSWYgeW91IHByb3ZpZGUgYSBjdXN0b20gYHRyYWNlT3B0aW9uc2Agb2JqZWN0LCBpdCB3aWxsIGJlIHVzZWQgdG8gY29udGludWUgdGhlIHRyYWNlXG4gKiBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGJlaGF2aW9yLCB3aGljaCBpcyB0byBsb29rIGl0IHVwIG9uIHRoZSA8bWV0YT4gdGFncy5cbiAqL1xuZnVuY3Rpb24gc3RhcnRCcm93c2VyVHJhY2luZ1BhZ2VMb2FkU3BhbihjbGllbnQsIHNwYW5PcHRpb25zLCB0cmFjZU9wdGlvbnMpIHtcbiAgY2xpZW50LmVtaXQoJ3N0YXJ0UGFnZUxvYWRTcGFuJywgc3Bhbk9wdGlvbnMsIHRyYWNlT3B0aW9ucyk7XG4gIGdldEN1cnJlbnRTY29wZSgpLnNldFRyYW5zYWN0aW9uTmFtZShzcGFuT3B0aW9ucy5uYW1lKTtcbiAgcmV0dXJuIGdldEFjdGl2ZUlkbGVTcGFuKGNsaWVudCk7XG59XG5cbi8qKlxuICogTWFudWFsbHkgc3RhcnQgYSBuYXZpZ2F0aW9uIHNwYW4uXG4gKiBUaGlzIHdpbGwgb25seSBkbyBzb21ldGhpbmcgaWYgYSBicm93c2VyIHRyYWNpbmcgaW50ZWdyYXRpb24gaGFzIGJlZW4gc2V0dXAuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0QnJvd3NlclRyYWNpbmdOYXZpZ2F0aW9uU3BhbihjbGllbnQsIHNwYW5PcHRpb25zLCBvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICB1cmwsXG4gICAgaXNSZWRpcmVjdFxuICB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgY2xpZW50LmVtaXQoJ2JlZm9yZVN0YXJ0TmF2aWdhdGlvblNwYW4nLCBzcGFuT3B0aW9ucywge1xuICAgIGlzUmVkaXJlY3RcbiAgfSk7XG4gIGNsaWVudC5lbWl0KCdzdGFydE5hdmlnYXRpb25TcGFuJywgc3Bhbk9wdGlvbnMsIHtcbiAgICBpc1JlZGlyZWN0XG4gIH0pO1xuICBjb25zdCBzY29wZSA9IGdldEN1cnJlbnRTY29wZSgpO1xuICBzY29wZS5zZXRUcmFuc2FjdGlvbk5hbWUoc3Bhbk9wdGlvbnMubmFtZSk7XG5cbiAgLy8gV2Ugc3RvcmUgdGhlIG5vcm1hbGl6ZWQgcmVxdWVzdCBkYXRhIG9uIHRoZSBzY29wZSwgc28gd2UgZ2V0IHRoZSByZXF1ZXN0IGRhdGEgYXQgdGltZSBvZiBzcGFuIGNyZWF0aW9uXG4gIC8vIG90aGVyd2lzZSwgdGhlIFVSTCBldGMuIG1heSBhbHJlYWR5IGJlIG9mIHRoZSBmb2xsb3dpbmcgbmF2aWdhdGlvbiwgYW5kIHdlJ2QgcmVwb3J0IHRoZSB3cm9uZyBVUkxcbiAgaWYgKHVybCAmJiAhaXNSZWRpcmVjdCkge1xuICAgIHNjb3BlLnNldFNES1Byb2Nlc3NpbmdNZXRhZGF0YSh7XG4gICAgICBub3JtYWxpemVkUmVxdWVzdDoge1xuICAgICAgICAuLi5nZXRIdHRwUmVxdWVzdERhdGEoKSxcbiAgICAgICAgdXJsXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGdldEFjdGl2ZUlkbGVTcGFuKGNsaWVudCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBhIG1ldGEgdGFnICovXG5mdW5jdGlvbiBnZXRNZXRhQ29udGVudChtZXRhTmFtZSkge1xuICAvKipcbiAgICogVGhpcyBpcyBqdXN0IGEgc21hbGwgd3JhcHBlciB0aGF0IG1ha2VzIGBkb2N1bWVudGAgb3B0aW9uYWwuXG4gICAqIFdlIHdhbnQgdG8gYmUgZXh0cmEtc2FmZSBhbmQgYWx3YXlzIGNoZWNrIHRoYXQgdGhpcyBleGlzdHMsIHRvIGVuc3VyZSB3ZWlyZCBlbnZpcm9ubWVudHMgZG8gbm90IGJsb3cgdXAuXG4gICAqL1xuICBjb25zdCBvcHRpb25hbFdpbmRvd0RvY3VtZW50ID0gV0lORE9XLmRvY3VtZW50O1xuICBjb25zdCBtZXRhVGFnID0gb3B0aW9uYWxXaW5kb3dEb2N1bWVudD8ucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPSR7bWV0YU5hbWV9XWApO1xuICByZXR1cm4gbWV0YVRhZz8uZ2V0QXR0cmlidXRlKCdjb250ZW50JykgfHwgdW5kZWZpbmVkO1xufVxuXG4vKiogU3RhcnQgbGlzdGVuZXIgZm9yIGludGVyYWN0aW9uIHRyYW5zYWN0aW9ucyAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJJbnRlcmFjdGlvbkxpc3RlbmVyKGNsaWVudCwgaWRsZVRpbWVvdXQsIGZpbmFsVGltZW91dCwgY2hpbGRTcGFuVGltZW91dCwgbGF0ZXN0Um91dGUpIHtcbiAgLyoqXG4gICAqIFRoaXMgaXMganVzdCBhIHNtYWxsIHdyYXBwZXIgdGhhdCBtYWtlcyBgZG9jdW1lbnRgIG9wdGlvbmFsLlxuICAgKiBXZSB3YW50IHRvIGJlIGV4dHJhLXNhZmUgYW5kIGFsd2F5cyBjaGVjayB0aGF0IHRoaXMgZXhpc3RzLCB0byBlbnN1cmUgd2VpcmQgZW52aXJvbm1lbnRzIGRvIG5vdCBibG93IHVwLlxuICAgKi9cbiAgY29uc3Qgb3B0aW9uYWxXaW5kb3dEb2N1bWVudCA9IFdJTkRPVy5kb2N1bWVudDtcbiAgbGV0IGluZmxpZ2h0SW50ZXJhY3Rpb25TcGFuO1xuICBjb25zdCByZWdpc3RlckludGVyYWN0aW9uVHJhbnNhY3Rpb24gPSAoKSA9PiB7XG4gICAgY29uc3Qgb3AgPSAndWkuYWN0aW9uLmNsaWNrJztcbiAgICBjb25zdCBhY3RpdmVJZGxlU3BhbiA9IGdldEFjdGl2ZUlkbGVTcGFuKGNsaWVudCk7XG4gICAgaWYgKGFjdGl2ZUlkbGVTcGFuKSB7XG4gICAgICBjb25zdCBjdXJyZW50Um9vdFNwYW5PcCA9IHNwYW5Ub0pTT04oYWN0aXZlSWRsZVNwYW4pLm9wO1xuICAgICAgaWYgKFsnbmF2aWdhdGlvbicsICdwYWdlbG9hZCddLmluY2x1ZGVzKGN1cnJlbnRSb290U3Bhbk9wKSkge1xuICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIud2FybihgW1RyYWNpbmddIERpZCBub3QgY3JlYXRlICR7b3B9IHNwYW4gYmVjYXVzZSBhIHBhZ2Vsb2FkIG9yIG5hdmlnYXRpb24gc3BhbiBpcyBpbiBwcm9ncmVzcy5gKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluZmxpZ2h0SW50ZXJhY3Rpb25TcGFuKSB7XG4gICAgICBpbmZsaWdodEludGVyYWN0aW9uU3Bhbi5zZXRBdHRyaWJ1dGUoU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9JRExFX1NQQU5fRklOSVNIX1JFQVNPTiwgJ2ludGVyYWN0aW9uSW50ZXJydXB0ZWQnKTtcbiAgICAgIGluZmxpZ2h0SW50ZXJhY3Rpb25TcGFuLmVuZCgpO1xuICAgICAgaW5mbGlnaHRJbnRlcmFjdGlvblNwYW4gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghbGF0ZXN0Um91dGUubmFtZSkge1xuICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oYFtUcmFjaW5nXSBEaWQgbm90IGNyZWF0ZSAke29wfSB0cmFuc2FjdGlvbiBiZWNhdXNlIF9sYXRlc3RSb3V0ZU5hbWUgaXMgbWlzc2luZy5gKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGluZmxpZ2h0SW50ZXJhY3Rpb25TcGFuID0gc3RhcnRJZGxlU3Bhbih7XG4gICAgICBuYW1lOiBsYXRlc3RSb3V0ZS5uYW1lLFxuICAgICAgb3AsXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRV06IGxhdGVzdFJvdXRlLnNvdXJjZSB8fCAndXJsJ1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGlkbGVUaW1lb3V0LFxuICAgICAgZmluYWxUaW1lb3V0LFxuICAgICAgY2hpbGRTcGFuVGltZW91dFxuICAgIH0pO1xuICB9O1xuICBpZiAob3B0aW9uYWxXaW5kb3dEb2N1bWVudCkge1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVnaXN0ZXJJbnRlcmFjdGlvblRyYW5zYWN0aW9uLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlXG4gICAgfSk7XG4gIH1cbn1cblxuLy8gV2Ugc3RvcmUgdGhlIGFjdGl2ZSBpZGxlIHNwYW4gb24gdGhlIGNsaWVudCBvYmplY3QsIHNvIHdlIGNhbiBhY2Nlc3MgaXQgZnJvbSBleHBvcnRlZCBmdW5jdGlvbnNcbmNvbnN0IEFDVElWRV9JRExFX1NQQU5fUFJPUEVSVFkgPSAnX3NlbnRyeV9pZGxlU3Bhbic7XG5mdW5jdGlvbiBnZXRBY3RpdmVJZGxlU3BhbihjbGllbnQpIHtcbiAgcmV0dXJuIGNsaWVudFtBQ1RJVkVfSURMRV9TUEFOX1BST1BFUlRZXTtcbn1cbmZ1bmN0aW9uIHNldEFjdGl2ZUlkbGVTcGFuKGNsaWVudCwgc3Bhbikge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoY2xpZW50LCBBQ1RJVkVfSURMRV9TUEFOX1BST1BFUlRZLCBzcGFuKTtcbn1cblxuLy8gVGhlIG1heC4gdGltZSBpbiBzZWNvbmRzIGJldHdlZW4gdHdvIHBhZ2Vsb2FkL25hdmlnYXRpb24gc3BhbnMgdGhhdCBtYWtlcyB1cyBjb25zaWRlciB0aGUgc2Vjb25kIG9uZSBhIHJlZGlyZWN0XG5jb25zdCBSRURJUkVDVF9USFJFU0hPTEQgPSAwLjM7XG5mdW5jdGlvbiBpc1JlZGlyZWN0KGFjdGl2ZVNwYW4sIGxhc3RJbnRlcmFjdGlvblRpbWVzdGFtcCkge1xuICBjb25zdCBzcGFuRGF0YSA9IHNwYW5Ub0pTT04oYWN0aXZlU3Bhbik7XG4gIGNvbnN0IG5vdyA9IGRhdGVUaW1lc3RhbXBJblNlY29uZHMoKTtcblxuICAvLyBNb3JlIHRoYW4gMzAwbXMgc2luY2UgbGFzdCBuYXZpZ2F0aW9uL3BhZ2Vsb2FkIHNwYW4/XG4gIC8vIC0tPiBuZXZlciBjb25zaWRlciB0aGlzIGEgcmVkaXJlY3RcbiAgY29uc3Qgc3RhcnRUaW1lc3RhbXAgPSBzcGFuRGF0YS5zdGFydF90aW1lc3RhbXA7XG4gIGlmIChub3cgLSBzdGFydFRpbWVzdGFtcCA+IFJFRElSRUNUX1RIUkVTSE9MRCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIEEgY2xpY2sgaGFwcGVuZWQgaW4gdGhlIGxhc3QgMzAwbXM/XG4gIC8vIC0tPiBuZXZlciBjb25zaWRlciB0aGlzIGEgcmVkaXJlY3RcbiAgaWYgKGxhc3RJbnRlcmFjdGlvblRpbWVzdGFtcCAmJiBub3cgLSBsYXN0SW50ZXJhY3Rpb25UaW1lc3RhbXAgPD0gUkVESVJFQ1RfVEhSRVNIT0xEKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IHsgQlJPV1NFUl9UUkFDSU5HX0lOVEVHUkFUSU9OX0lELCBicm93c2VyVHJhY2luZ0ludGVncmF0aW9uLCBnZXRNZXRhQ29udGVudCwgc3RhcnRCcm93c2VyVHJhY2luZ05hdmlnYXRpb25TcGFuLCBzdGFydEJyb3dzZXJUcmFjaW5nUGFnZUxvYWRTcGFuIH07XG4iLCJpbXBvcnQgKiBhcyBTZW50cnkgZnJvbSAnQHNlbnRyeS9icm93c2VyJztcbmltcG9ydCB7IGJyZWFkY3J1bWJzSW50ZWdyYXRpb24sIGdsb2JhbEhhbmRsZXJzSW50ZWdyYXRpb24sIGxpbmtlZEVycm9yc0ludGVncmF0aW9uLCBodHRwQ29udGV4dEludGVncmF0aW9uLCBicm93c2VyU2Vzc2lvbkludGVncmF0aW9uLCBpbml0IGFzIGluaXQkMSwgc2V0Q29udGV4dCwgYnJvd3NlclRyYWNpbmdJbnRlZ3JhdGlvbiBhcyBicm93c2VyVHJhY2luZ0ludGVncmF0aW9uJDEsIHNwYW5Ub0pTT04sIFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfU09VUkNFLCBTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTiwgZ2V0Q2xpZW50LCBzdGFydEJyb3dzZXJUcmFjaW5nTmF2aWdhdGlvblNwYW4sIHN0YXJ0SW5hY3RpdmVTcGFuLCBnZXRDdXJyZW50U2NvcGUsIGdldEFjdGl2ZVNwYW4sIGdldFJvb3RTcGFuIH0gZnJvbSAnQHNlbnRyeS9icm93c2VyJztcbmV4cG9ydCAqIGZyb20gJ0BzZW50cnkvYnJvd3Nlcic7XG5pbXBvcnQgKiBhcyBpMCBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFZFUlNJT04sIEluamVjdGFibGUsIEluamVjdCwgRGlyZWN0aXZlLCBJbnB1dCwgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGluYm91bmRGaWx0ZXJzSW50ZWdyYXRpb24sIGZ1bmN0aW9uVG9TdHJpbmdJbnRlZ3JhdGlvbiwgZGVkdXBlSW50ZWdyYXRpb24sIGFwcGx5U2RrTWV0YWRhdGEsIGxvZ2dlciwgaXNTdHJpbmcsIGNvbnNvbGVTYW5kYm94LCBzdHJpcFVybFF1ZXJ5QW5kRnJhZ21lbnQsIHRpbWVzdGFtcEluU2Vjb25kcyB9IGZyb20gJ0BzZW50cnkvY29yZSc7XG5pbXBvcnQgeyBIdHRwRXJyb3JSZXNwb25zZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCAqIGFzIGkxIGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBOYXZpZ2F0aW9uU3RhcnQsIFJlc29sdmVFbmQsIE5hdmlnYXRpb25FbmQsIE5hdmlnYXRpb25DYW5jZWwsIE5hdmlnYXRpb25FcnJvciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGZpbHRlciwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG4vKlxuICogVGhpcyBmaWxlIGRlZmluZXMgZmxhZ3MgYW5kIGNvbnN0YW50cyB0aGF0IGNhbiBiZSBtb2RpZmllZCBkdXJpbmcgY29tcGlsZSB0aW1lIGluIG9yZGVyIHRvIGZhY2lsaXRhdGUgdHJlZSBzaGFraW5nXG4gKiBmb3IgdXNlcnMuXG4gKlxuICogV2UgZGVmaW5lIFwibWFnaWMgc3RyaW5nc1wiIGxpa2UgYF9fU0VOVFJZX0RFQlVHX19gIHRoYXQgbWF5IGdldCByZXBsYWNlZCB3aXRoIGFjdHVhbCB2YWx1ZXMgZHVyaW5nIG91ciwgb3IgdGhlIHVzZXInc1xuICogYnVpbGQgcHJvY2Vzcy4gVGFrZSBjYXJlIHdoZW4gaW50cm9kdWNpbmcgbmV3IGZsYWdzIC0gdGhleSBtdXN0IG5vdCB0aHJvdyBpZiB0aGV5IGFyZSBub3QgcmVwbGFjZWQuIFNlZSB0aGUgRGVidWdcbiAqIEJ1aWxkIEZsYWdzIHNlY3Rpb24gaW4gQ09OVFJJQlVUSU5HLm1kLlxuICovXG4vKiogRmxhZyB0aGF0IGlzIHRydWUgZm9yIGRlYnVnIGJ1aWxkcywgZmFsc2Ugb3RoZXJ3aXNlLiAqL1xuY29uc3QgSVNfREVCVUdfQlVJTEQgPSB0eXBlb2YgX19TRU5UUllfREVCVUdfXyA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogX19TRU5UUllfREVCVUdfXztcblxuLyoqXG4gKiBHZXQgdGhlIGRlZmF1bHQgaW50ZWdyYXRpb25zIGZvciB0aGUgQW5ndWxhciBTREsuXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRJbnRlZ3JhdGlvbnMoX29wdGlvbnMgPSB7fSkge1xuICAvLyBEb24ndCBpbmNsdWRlIHRoZSBCcm93c2VyQXBpRXJyb3JzIGludGVncmF0aW9uIGFzIGl0IGludGVyZmVyZXMgd2l0aCB0aGUgQW5ndWxhciBTREsncyBgRXJyb3JIYW5kbGVyYDpcbiAgLy8gQnJvd3NlckFwaUVycm9ycyB3b3VsZCBjYXRjaCBjZXJ0YWluIGVycm9ycyBiZWZvcmUgdGhleSByZWFjaCB0aGUgYEVycm9ySGFuZGxlcmAgYW5kXG4gIC8vIHRodXMgcHJvdmlkZSBhIGxvd2VyIGZpZGVsaXR5IGVycm9yIHRoYW4gd2hhdCBgU2VudHJ5RXJyb3JIYW5kbGVyYFxuICAvLyAoc2VlIGVycm9yaGFuZGxlci50cykgd291bGQgcHJvdmlkZS5cbiAgLy9cbiAgLy8gc2VlOlxuICAvLyAgLSBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy81NDE3I2lzc3VlY29tbWVudC0xNDUzNDA3MDk3XG4gIC8vICAtIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzI3NDRcbiAgcmV0dXJuIFtcbiAgLy8gVE9ETyh2MTApOiBSZXBsYWNlIHdpdGggYGV2ZW50RmlsdGVyc0ludGVncmF0aW9uYCBvbmNlIHdlIHJlbW92ZSB0aGUgZGVwcmVjYXRlZCBgaW5ib3VuZEZpbHRlcnNJbnRlZ3JhdGlvbmBcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gIGluYm91bmRGaWx0ZXJzSW50ZWdyYXRpb24oKSwgZnVuY3Rpb25Ub1N0cmluZ0ludGVncmF0aW9uKCksIGJyZWFkY3J1bWJzSW50ZWdyYXRpb24oKSwgZ2xvYmFsSGFuZGxlcnNJbnRlZ3JhdGlvbigpLCBsaW5rZWRFcnJvcnNJbnRlZ3JhdGlvbigpLCBkZWR1cGVJbnRlZ3JhdGlvbigpLCBodHRwQ29udGV4dEludGVncmF0aW9uKCksIGJyb3dzZXJTZXNzaW9uSW50ZWdyYXRpb24oKV07XG59XG4vKipcbiAqIEluaXRzIHRoZSBBbmd1bGFyIFNES1xuICovXG5mdW5jdGlvbiBpbml0KG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBkZWZhdWx0SW50ZWdyYXRpb25zOiBnZXREZWZhdWx0SW50ZWdyYXRpb25zKCksXG4gICAgLi4ub3B0aW9uc1xuICB9O1xuICBhcHBseVNka01ldGFkYXRhKG9wdHMsICdhbmd1bGFyJyk7XG4gIGNoZWNrQW5kU2V0QW5ndWxhclZlcnNpb24oKTtcbiAgcmV0dXJuIGluaXQkMShvcHRzKTtcbn1cbmZ1bmN0aW9uIGNoZWNrQW5kU2V0QW5ndWxhclZlcnNpb24oKSB7XG4gIGNvbnN0IEFOR1VMQVJfTUlOSU1VTV9WRVJTSU9OID0gMTQ7XG4gIGNvbnN0IGFuZ3VsYXJWZXJzaW9uID0gVkVSU0lPTj8ubWFqb3IgJiYgcGFyc2VJbnQoVkVSU0lPTi5tYWpvciwgMTApO1xuICBpZiAoYW5ndWxhclZlcnNpb24pIHtcbiAgICBpZiAoYW5ndWxhclZlcnNpb24gPCBBTkdVTEFSX01JTklNVU1fVkVSU0lPTikge1xuICAgICAgSVNfREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oYFRoaXMgU2VudHJ5IFNESyBkb2VzIG5vdCBvZmZpY2lhbGx5IHN1cHBvcnQgQW5ndWxhciAke2FuZ3VsYXJWZXJzaW9ufS5gLCBgVGhpcyBTREsgb25seSBzdXBwb3J0cyBBbmd1bGFyICR7QU5HVUxBUl9NSU5JTVVNX1ZFUlNJT059IGFuZCBhYm92ZS5gLCBcIklmIHlvdSdyZSB1c2luZyBsb3dlciBBbmd1bGFyIHZlcnNpb25zLCBjaGVjayB0aGUgQW5ndWxhciBWZXJzaW9uIENvbXBhdGliaWxpdHkgdGFibGUgaW4gb3VyIGRvY3M6IGh0dHBzOi8vZG9jcy5zZW50cnkuaW8vcGxhdGZvcm1zL2phdmFzY3JpcHQvZ3VpZGVzL2FuZ3VsYXIvI2FuZ3VsYXItdmVyc2lvbi1jb21wYXRpYmlsaXR5LlwiLCAnT3RoZXJ3aXNlLCBwbGVhc2UgY29uc2lkZXIgdXBncmFkaW5nIHlvdXIgQW5ndWxhciB2ZXJzaW9uLicpO1xuICAgIH1cbiAgICBzZXRDb250ZXh0KCdhbmd1bGFyJywge1xuICAgICAgdmVyc2lvbjogYW5ndWxhclZlcnNpb25cbiAgICB9KTtcbiAgfVxufVxuXG4vLyBJbiBBbmd1bGFyIDE3IGFuZCBmdXR1cmUgdmVyc2lvbnMsIHpvbmVsZXNzIHN1cHBvcnQgaXMgZm9ydGhjb21pbmcuXG4vLyBUaGVyZWZvcmUsIGl0J3MgYWR2aXNhYmxlIHRvIHNhZmVseSBjaGVjayB3aGV0aGVyIHRoZSBgcnVuYCBmdW5jdGlvbiBpc1xuLy8gYXZhaWxhYmxlIGluIHRoZSBgPHJvb3Q+YCBjb250ZXh0LlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuY29uc3QgaXNOZ1pvbmVFbmFibGVkID0gdHlwZW9mIFpvbmUgIT09ICd1bmRlZmluZWQnICYmIFpvbmUucm9vdD8ucnVuO1xuLyoqXG4gKiBUaGUgZnVuY3Rpb24gdGhhdCBkb2VzIHRoZSBzYW1lIGpvYiBhcyBgTmdab25lLnJ1bk91dHNpZGVBbmd1bGFyYC5cbiAqXG4gKiDimqDvuI8gTm90ZTogQWxsIG9mIHRoZSBTZW50cnkgZnVuY3Rpb25hbGl0eSBjYWxsZWQgZnJvbSBpbnNpZGUgdGhlIEFuZ3VsYXJcbiAqIGV4ZWN1dGlvbiBjb250ZXh0IG11c3QgYmUgd3JhcHBlZCBpbiB0aGlzIGZ1bmN0aW9uLiBBbmd1bGFyJ3MgcmVuZGVyaW5nXG4gKiByZWxpZXMgb24gYXN5bmNocm9ub3VzIHRhc2tzIGJlaW5nIHNjaGVkdWxlZCB3aXRoaW4gaXRzIGV4ZWN1dGlvbiBjb250ZXh0LlxuICogU2luY2UgU2VudHJ5IHNjaGVkdWxlcyB0YXNrcyB0aGF0IGRvIG5vdCBpbnRlcmFjdCB3aXRoIEFuZ3VsYXIncyByZW5kZXJpbmcsXG4gKiBpdCBtYXkgcHJldmVudCBBbmd1bGFyIGZyb20gZnVuY3Rpb25pbmcgcmVsaWFibHkuIENvbnNlcXVlbnRseSwgaXQgbWF5IGRpc3J1cHRcbiAqIHByb2Nlc3NlcyBzdWNoIGFzIHNlcnZlci1zaWRlIHJlbmRlcmluZyBvciBjbGllbnQtc2lkZSBoeWRyYXRpb24uXG4gKi9cbmZ1bmN0aW9uIHJ1bk91dHNpZGVBbmd1bGFyKGNhbGxiYWNrKSB7XG4gIC8vIFJ1bm5pbmcgdGhlIGBjYWxsYmFja2Agd2l0aGluIHRoZSByb290IGV4ZWN1dGlvbiBjb250ZXh0IGVuYWJsZXMgQW5ndWxhclxuICAvLyBwcm9jZXNzZXMgKHN1Y2ggYXMgU1NSIGFuZCBoeWRyYXRpb24pIHRvIGNvbnRpbnVlIGZ1bmN0aW9uaW5nIG5vcm1hbGx5IHdpdGhvdXRcbiAgLy8gdGltZW91dHMgYW5kIGRlbGF5cyB0aGF0IGNvdWxkIGFmZmVjdCB0aGUgdXNlciBleHBlcmllbmNlLiBUaGlzIGFwcHJvYWNoIGlzXG4gIC8vIG5lY2Vzc2FyeSBiZWNhdXNlIHNvbWUgb2YgdGhlIFNlbnRyeSBmdW5jdGlvbmFsaXR5IGNvbnRpbnVlcyB0byBydW4gaW4gdGhlIGJhY2tncm91bmQuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgcmV0dXJuIGlzTmdab25lRW5hYmxlZCA/IFpvbmUucm9vdC5ydW4oY2FsbGJhY2spIDogY2FsbGJhY2soKTtcbn1cblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9ibG9iL21hc3Rlci9wYWNrYWdlcy9jb3JlL3NyYy91dGlsL2Vycm9ycy50c1xuZnVuY3Rpb24gdHJ5VG9VbndyYXBab25lanNFcnJvcihlcnJvcikge1xuICAvLyBUT0RPOiBvbmNlIEFuZ3VsYXIxNCBpcyB0aGUgbWluaW11bSByZXF1aXJlbWVudCBFUlJPUl9PUklHSU5BTF9FUlJPUiBhbmRcbiAgLy8gIGdldE9yaWdpbmFsRXJyb3IgZnJvbSBlcnJvci50cyBjYW4gYmUgdXNlZCBkaXJlY3RseS5cbiAgcmV0dXJuIGVycm9yICYmIGVycm9yLm5nT3JpZ2luYWxFcnJvciA/IGVycm9yLm5nT3JpZ2luYWxFcnJvciA6IGVycm9yO1xufVxuZnVuY3Rpb24gZXh0cmFjdEh0dHBNb2R1bGVFcnJvcihlcnJvcikge1xuICAvLyBUaGUgYGVycm9yYCBwcm9wZXJ0eSBvZiBodHRwIGV4Y2VwdGlvbiBjYW4gYmUgZWl0aGVyIGFuIGBFcnJvcmAgb2JqZWN0LCB3aGljaCB3ZSBjYW4gdXNlIGRpcmVjdGx5Li4uXG4gIGlmIChpc0Vycm9yT3JFcnJvckxpa2VPYmplY3QoZXJyb3IuZXJyb3IpKSB7XG4gICAgcmV0dXJuIGVycm9yLmVycm9yO1xuICB9XG4gIC8vIC4uLiBvciBhbmBFcnJvckV2ZW50YCwgd2hpY2ggY2FuIHByb3ZpZGUgdXMgd2l0aCB0aGUgbWVzc2FnZSBidXQgbm8gc3RhY2suLi5cbiAgLy8gZ3VhcmRpbmcgYEVycm9yRXZlbnRgIGFnYWluc3QgYHVuZGVmaW5lZGAgYXMgaXQncyBub3QgZGVmaW5lZCBpbiBOb2RlIGVudmlyb25tZW50c1xuICBpZiAodHlwZW9mIEVycm9yRXZlbnQgIT09ICd1bmRlZmluZWQnICYmIGVycm9yLmVycm9yIGluc3RhbmNlb2YgRXJyb3JFdmVudCAmJiBlcnJvci5lcnJvci5tZXNzYWdlKSB7XG4gICAgcmV0dXJuIGVycm9yLmVycm9yLm1lc3NhZ2U7XG4gIH1cbiAgLy8gLi4ub3IgdGhlIHJlcXVlc3QgYm9keSBpdHNlbGYsIHdoaWNoIHdlIGNhbiB1c2UgYXMgYSBtZXNzYWdlIGluc3RlYWQuXG4gIGlmICh0eXBlb2YgZXJyb3IuZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGBTZXJ2ZXIgcmV0dXJuZWQgY29kZSAke2Vycm9yLnN0YXR1c30gd2l0aCBib2R5IFwiJHtlcnJvci5lcnJvcn1cImA7XG4gIH1cbiAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbnkgZGV0YWlsZWQgaW5mb3JtYXRpb24sIGZhbGxiYWNrIHRvIHRoZSByZXF1ZXN0IG1lc3NhZ2UgaXRzZWxmLlxuICByZXR1cm4gZXJyb3IubWVzc2FnZTtcbn1cbmZ1bmN0aW9uIGlzRXJyb3JPckVycm9yTGlrZU9iamVjdCh2YWx1ZSkge1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xuICByZXR1cm4gaXNTdHJpbmcoY2FuZGlkYXRlLm5hbWUpICYmIGlzU3RyaW5nKGNhbmRpZGF0ZS5tZXNzYWdlKSAmJiAodW5kZWZpbmVkID09PSBjYW5kaWRhdGUuc3RhY2sgfHwgaXNTdHJpbmcoY2FuZGlkYXRlLnN0YWNrKSk7XG59XG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIEFuZ3VsYXIncyBFcnJvckhhbmRsZXIgcHJvdmlkZXIgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIHRoZSBzdG9jayBvbmUuXG4gKi9cbmNsYXNzIFNlbnRyeUVycm9ySGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9vcHRpb25zID0ge1xuICAgICAgbG9nRXJyb3JzOiB0cnVlLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIE1ldGhvZCBleGVjdXRlZCB3aGVuIHRoZSBpbmplY3RvciBpcyBkZXN0cm95ZWQuXG4gICAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5fcmVtb3ZlQWZ0ZXJTZW5kRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdGhpcy5fcmVtb3ZlQWZ0ZXJTZW5kRXZlbnRMaXN0ZW5lcigpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTWV0aG9kIGNhbGxlZCBmb3IgZXZlcnkgdmFsdWUgY2FwdHVyZWQgdGhyb3VnaCB0aGUgRXJyb3JIYW5kbGVyXG4gICAqL1xuICBoYW5kbGVFcnJvcihlcnJvcikge1xuICAgIGNvbnN0IGV4dHJhY3RlZEVycm9yID0gdGhpcy5fZXh0cmFjdEVycm9yKGVycm9yKSB8fCAnSGFuZGxlZCB1bmtub3duIGVycm9yJztcbiAgICAvLyBDYXB0dXJlIGhhbmRsZWQgZXhjZXB0aW9uIGFuZCBzZW5kIGl0IHRvIFNlbnRyeS5cbiAgICBjb25zdCBldmVudElkID0gcnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gU2VudHJ5LmNhcHR1cmVFeGNlcHRpb24oZXh0cmFjdGVkRXJyb3IsIHtcbiAgICAgIG1lY2hhbmlzbToge1xuICAgICAgICB0eXBlOiAnYW5ndWxhcicsXG4gICAgICAgIGhhbmRsZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgfSkpO1xuICAgIC8vIFdoZW4gaW4gZGV2ZWxvcG1lbnQgbW9kZSwgbG9nIHRoZSBlcnJvciB0byBjb25zb2xlIGZvciBpbW1lZGlhdGUgZmVlZGJhY2suXG4gICAgaWYgKHRoaXMuX29wdGlvbnMubG9nRXJyb3JzKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZVNhbmRib3goKCkgPT4gY29uc29sZS5lcnJvcihleHRyYWN0ZWRFcnJvcikpO1xuICAgIH1cbiAgICAvLyBPcHRpb25hbGx5IHNob3cgdXNlciBkaWFsb2cgdG8gcHJvdmlkZSBkZXRhaWxzIG9uIHdoYXQgaGFwcGVuZWQuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMuc2hvd0RpYWxvZykge1xuICAgICAgY29uc3QgY2xpZW50ID0gU2VudHJ5LmdldENsaWVudCgpO1xuICAgICAgaWYgKGNsaWVudCAmJiAhdGhpcy5fcmVtb3ZlQWZ0ZXJTZW5kRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLl9yZW1vdmVBZnRlclNlbmRFdmVudExpc3RlbmVyID0gY2xpZW50Lm9uKCdhZnRlclNlbmRFdmVudCcsIGV2ZW50ID0+IHtcbiAgICAgICAgICBpZiAoIWV2ZW50LnR5cGUgJiYgZXZlbnQuZXZlbnRfaWQpIHtcbiAgICAgICAgICAgIHJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgICAgU2VudHJ5LnNob3dSZXBvcnREaWFsb2coe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX29wdGlvbnMuZGlhbG9nT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBldmVudElkOiBldmVudC5ldmVudF9pZFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKCFjbGllbnQpIHtcbiAgICAgICAgcnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgIFNlbnRyeS5zaG93UmVwb3J0RGlhbG9nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX29wdGlvbnMuZGlhbG9nT3B0aW9ucyxcbiAgICAgICAgICAgIGV2ZW50SWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVc2VkIHRvIHB1bGwgYSBkZXNpcmVkIHZhbHVlIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGNhcHR1cmUgYW4gZXZlbnQgb3V0IG9mIHRoZSByYXcgdmFsdWUgY2FwdHVyZWQgYnkgRXJyb3JIYW5kbGVyLlxuICAgKi9cbiAgX2V4dHJhY3RFcnJvcihlcnJvcikge1xuICAgIC8vIEFsbG93IGN1c3RvbSBvdmVycmlkZXMgb2YgZXh0cmFjdGluZyBmdW5jdGlvblxuICAgIGlmICh0aGlzLl9vcHRpb25zLmV4dHJhY3Rvcikge1xuICAgICAgY29uc3QgZGVmYXVsdEV4dHJhY3RvciA9IHRoaXMuX2RlZmF1bHRFeHRyYWN0b3IuYmluZCh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zLmV4dHJhY3RvcihlcnJvciwgZGVmYXVsdEV4dHJhY3Rvcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kZWZhdWx0RXh0cmFjdG9yKGVycm9yKTtcbiAgfVxuICAvKipcbiAgICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBlcnJvciBleHRyYWN0aW9uIHRoYXQgaGFuZGxlcyBkZWZhdWx0IGVycm9yIHdyYXBwaW5nLCBIVFRQIHJlc3BvbnNlcywgRXJyb3JFdmVudCBhbmQgZmV3IG90aGVyIGtub3duIGNhc2VzLlxuICAgKi9cbiAgX2RlZmF1bHRFeHRyYWN0b3IoZXJyb3JDYW5kaWRhdGUpIHtcbiAgICBjb25zdCBlcnJvciA9IHRyeVRvVW53cmFwWm9uZWpzRXJyb3IoZXJyb3JDYW5kaWRhdGUpO1xuICAgIC8vIElmIGl0J3MgaHR0cCBtb2R1bGUgZXJyb3IsIGV4dHJhY3QgYXMgbXVjaCBpbmZvcm1hdGlvbiBmcm9tIGl0IGFzIHdlIGNhbi5cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBIdHRwRXJyb3JSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIGV4dHJhY3RIdHRwTW9kdWxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgICAvLyBXZSBjYW4gaGFuZGxlIG1lc3NhZ2VzIGFuZCBFcnJvciBvYmplY3RzIGRpcmVjdGx5LlxuICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnIHx8IGlzRXJyb3JPckVycm9yTGlrZU9iamVjdChlcnJvcikpIHtcbiAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gICAgLy8gTm90aGluZyB3YXMgZXh0cmFjdGVkLCBmYWxsYmFjayB0byBkZWZhdWx0IGVycm9yIG1lc3NhZ2UuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblNlbnRyeUVycm9ySGFuZGxlci7JtWZhYyA9IGZ1bmN0aW9uIFNlbnRyeUVycm9ySGFuZGxlcl9GYWN0b3J5KF9fbmdGYWN0b3J5VHlwZV9fKSB7XG4gIHJldHVybiBuZXcgKF9fbmdGYWN0b3J5VHlwZV9fIHx8IFNlbnRyeUVycm9ySGFuZGxlcikoaTAuybXJtWluamVjdCgnZXJyb3JIYW5kbGVyT3B0aW9ucycpKTtcbn07XG5TZW50cnlFcnJvckhhbmRsZXIuybVwcm92ID0gLyogQF9fUFVSRV9fICovaTAuybXJtWRlZmluZUluamVjdGFibGUoe1xuICB0b2tlbjogU2VudHJ5RXJyb3JIYW5kbGVyLFxuICBmYWN0b3J5OiBTZW50cnlFcnJvckhhbmRsZXIuybVmYWMsXG4gIHByb3ZpZGVkSW46ICdyb290J1xufSk7XG4oKCkgPT4ge1xuICAodHlwZW9mIG5nRGV2TW9kZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBuZ0Rldk1vZGUpICYmIGkwLsm1c2V0Q2xhc3NNZXRhZGF0YShTZW50cnlFcnJvckhhbmRsZXIsIFt7XG4gICAgdHlwZTogSW5qZWN0YWJsZSxcbiAgICBhcmdzOiBbe1xuICAgICAgcHJvdmlkZWRJbjogJ3Jvb3QnXG4gICAgfV1cbiAgfV0sIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHR5cGU6IHVuZGVmaW5lZCxcbiAgICAgIGRlY29yYXRvcnM6IFt7XG4gICAgICAgIHR5cGU6IEluamVjdCxcbiAgICAgICAgYXJnczogWydlcnJvckhhbmRsZXJPcHRpb25zJ11cbiAgICAgIH1dXG4gICAgfV07XG4gIH0sIG51bGwpO1xufSkoKTtcbi8qKlxuICogRmFjdG9yeSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYSBwcmVjb25maWd1cmVkIEVycm9ySGFuZGxlciBwcm92aWRlci5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRXJyb3JIYW5kbGVyKGNvbmZpZykge1xuICByZXR1cm4gbmV3IFNlbnRyeUVycm9ySGFuZGxlcihjb25maWcpO1xufVxuY29uc3QgQU5HVUxBUl9ST1VUSU5HX09QID0gJ3VpLmFuZ3VsYXIucm91dGluZyc7XG5jb25zdCBBTkdVTEFSX0lOSVRfT1AgPSAndWkuYW5ndWxhci5pbml0JztcbmNvbnN0IEFOR1VMQVJfT1AgPSAndWkuYW5ndWxhcic7XG5sZXQgaW5zdHJ1bWVudGF0aW9uSW5pdGlhbGl6ZWQ7XG4vKipcbiAqIEEgY3VzdG9tIGJyb3dzZXIgdHJhY2luZyBpbnRlZ3JhdGlvbiBmb3IgQW5ndWxhci5cbiAqXG4gKiBVc2UgdGhpcyBpbnRlZ3JhdGlvbiBpbiBjb21iaW5hdGlvbiB3aXRoIGBUcmFjZVNlcnZpY2VgXG4gKi9cbmZ1bmN0aW9uIGJyb3dzZXJUcmFjaW5nSW50ZWdyYXRpb24ob3B0aW9ucyA9IHt9KSB7XG4gIC8vIElmIHRoZSB1c2VyIG9wdHMgb3V0IHRvIHNldCB0aGlzIHVwLCB3ZSBqdXN0IGRvbid0IGluaXRpYWxpemUgdGhpcy5cbiAgLy8gVGhhdCB3YXksIHRoZSBUcmFjZVNlcnZpY2Ugd2lsbCBub3QgYWN0dWFsbHkgZG8gYW55dGhpbmcsIGZ1bmN0aW9uYWxseSBkaXNhYmxpbmcgdGhpcy5cbiAgaWYgKG9wdGlvbnMuaW5zdHJ1bWVudE5hdmlnYXRpb24gIT09IGZhbHNlKSB7XG4gICAgaW5zdHJ1bWVudGF0aW9uSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICB9XG4gIHJldHVybiBicm93c2VyVHJhY2luZ0ludGVncmF0aW9uJDEoe1xuICAgIC4uLm9wdGlvbnMsXG4gICAgaW5zdHJ1bWVudE5hdmlnYXRpb246IGZhbHNlXG4gIH0pO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGV4dHJhY3RlZCB0byBtYWtlIHVuaXQgdGVzdGluZyBlYXNpZXIuXG4gKi9cbmZ1bmN0aW9uIF91cGRhdGVTcGFuQXR0cmlidXRlc0ZvclBhcmFtZXRyaXplZFVybChyb3V0ZSwgc3Bhbikge1xuICBjb25zdCBhdHRyaWJ1dGVzID0gc3BhbiAmJiBzcGFuVG9KU09OKHNwYW4pLmRhdGEgfHwge307XG4gIGlmIChzcGFuICYmIGF0dHJpYnV0ZXNbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0VdID09PSAndXJsJykge1xuICAgIHNwYW4udXBkYXRlTmFtZShyb3V0ZSk7XG4gICAgc3Bhbi5zZXRBdHRyaWJ1dGUoU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0UsICdyb3V0ZScpO1xuICAgIHNwYW4uc2V0QXR0cmlidXRlKFNFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOLCBgYXV0by4ke3NwYW5Ub0pTT04oc3Bhbikub3B9LmFuZ3VsYXJgKTtcbiAgfVxufVxuLyoqXG4gKiBBbmd1bGFyJ3MgU2VydmljZSByZXNwb25zaWJsZSBmb3IgaG9va2luZyBpbnRvIEFuZ3VsYXIgUm91dGVyIGFuZCB0cmFja2luZyBjdXJyZW50IG5hdmlnYXRpb24gcHJvY2Vzcy5cbiAqIENyZWF0ZXMgYSBuZXcgdHJhbnNhY3Rpb24gZm9yIGV2ZXJ5IHJvdXRlIGNoYW5nZSBhbmQgbWVhc3VyZXMgYSBkdXJhdGlvbiBvZiByb3V0aW5nIHByb2Nlc3MuXG4gKi9cbmNsYXNzIFRyYWNlU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKF9yb3V0ZXIpIHtcbiAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xuICAgIHRoaXMubmF2U3RhcnQkID0gdGhpcy5fcm91dGVyLmV2ZW50cy5waXBlKGZpbHRlcihldmVudCA9PiBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25TdGFydCksIHRhcChuYXZpZ2F0aW9uRXZlbnQgPT4ge1xuICAgICAgaWYgKCFpbnN0cnVtZW50YXRpb25Jbml0aWFsaXplZCkge1xuICAgICAgICBJU19ERUJVR19CVUlMRCAmJiBsb2dnZXIuZXJyb3IoJ0FuZ3VsYXIgaW50ZWdyYXRpb24gaGFzIHRyYWNpbmcgZW5hYmxlZCwgYnV0IFRyYWNpbmcgaW50ZWdyYXRpb24gaXMgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3JvdXRpbmdTcGFuKSB7XG4gICAgICAgIHRoaXMuX3JvdXRpbmdTcGFuLmVuZCgpO1xuICAgICAgICB0aGlzLl9yb3V0aW5nU3BhbiA9IG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgICAgIGNvbnN0IHN0cmlwcGVkVXJsID0gc3RyaXBVcmxRdWVyeUFuZEZyYWdtZW50KG5hdmlnYXRpb25FdmVudC51cmwpO1xuICAgICAgaWYgKGNsaWVudCkge1xuICAgICAgICAvLyBzZWUgY29tbWVudCBpbiBgX2lzUGFnZWxvYWRPbmdvaW5nYCBmb3IgcmF0aW9uYWxlXG4gICAgICAgIGlmICghdGhpcy5faXNQYWdlbG9hZE9uZ29pbmcoKSkge1xuICAgICAgICAgIHJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHN0YXJ0QnJvd3NlclRyYWNpbmdOYXZpZ2F0aW9uU3BhbihjbGllbnQsIHtcbiAgICAgICAgICAgICAgbmFtZTogc3RyaXBwZWRVcmwsXG4gICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by5uYXZpZ2F0aW9uLmFuZ3VsYXInLFxuICAgICAgICAgICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX1NPVVJDRV06ICd1cmwnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRoZSBmaXJzdCB0aW1lIHdlIGVuZCB1cCBoZXJlLCB3ZSBzZXQgdGhlIHBhZ2Vsb2FkIGZsYWcgdG8gZmFsc2VcbiAgICAgICAgICAvLyBTdWJzZXF1ZW50IG5hdmlnYXRpb25zIGFyZSBnb2luZyB0byBnZXQgdGhlaXIgb3duIG5hdmlnYXRpb24gcm9vdCBzcGFuXG4gICAgICAgICAgLy8gZXZlbiBpZiB0aGUgcGFnZWxvYWQgcm9vdCBzcGFuIGlzIHN0aWxsIG9uZ29pbmcuXG4gICAgICAgICAgdGhpcy5fcGFnZWxvYWRPbmdvaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcm91dGluZ1NwYW4gPSBydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBzdGFydEluYWN0aXZlU3Bhbih7XG4gICAgICAgICAgbmFtZTogYCR7bmF2aWdhdGlvbkV2ZW50LnVybH1gLFxuICAgICAgICAgIG9wOiBBTkdVTEFSX1JPVVRJTkdfT1AsXG4gICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOXTogJ2F1dG8udWkuYW5ndWxhcicsXG4gICAgICAgICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9TT1VSQ0VdOiAndXJsJyxcbiAgICAgICAgICAgIHVybDogc3RyaXBwZWRVcmwsXG4gICAgICAgICAgICAuLi4obmF2aWdhdGlvbkV2ZW50Lm5hdmlnYXRpb25UcmlnZ2VyICYmIHtcbiAgICAgICAgICAgICAgbmF2aWdhdGlvblRyaWdnZXI6IG5hdmlnYXRpb25FdmVudC5uYXZpZ2F0aW9uVHJpZ2dlclxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pKSB8fCBudWxsO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSkpO1xuICAgIC8vIFRoZSBSZXNvbHZlRW5kIGV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIEFuZ3VsYXIgcm91dGVyIGhhcyByZXNvbHZlZCB0aGUgVVJMIGFuZFxuICAgIC8vIHRoZSBwYXJhbWV0ZXI8LT52YWx1ZSBtYXBwaW5nLiBJdCBob2xkcyB0aGUgbmV3IHJlc29sdmVkIHJvdXRlciBzdGF0ZSB3aXRoXG4gICAgLy8gdGhlIG1hcHBpbmcgYW5kIHRoZSBuZXcgVVJMLlxuICAgIC8vIE9ubHkgQWZ0ZXIgdGhpcyBldmVudCwgdGhlIHJvdXRlIGlzIGFjdGl2YXRlZCwgbWVhbmluZyB0aGF0IHRoZSB0cmFuc2FjdGlvblxuICAgIC8vIGNhbiBiZSB1cGRhdGVkIHdpdGggdGhlIHBhcmFtZXRlcml6ZWQgcm91dGUgbmFtZSBiZWZvcmUgZS5nLiB0aGUgcm91dGUncyByb290XG4gICAgLy8gY29tcG9uZW50IGlzIGluaXRpYWxpemVkLiBUaGlzIHNob3VsZCBiZSBlYXJseSBlbm91Z2ggYmVmb3JlIG91dGdvaW5nIHJlcXVlc3RzXG4gICAgLy8gYXJlIG1hZGUgZnJvbSB0aGUgbmV3IHJvdXRlLCB3aXRoIHRoZSBleGNlcHRpb25zIG9mIHJlcXVlc3RzIGJlaW5nIG1hZGUgZHVyaW5nXG4gICAgLy8gYSBuYXZpZ2F0aW9uLlxuICAgIHRoaXMucmVzRW5kJCA9IHRoaXMuX3JvdXRlci5ldmVudHMucGlwZShmaWx0ZXIoZXZlbnQgPT4gZXZlbnQgaW5zdGFuY2VvZiBSZXNvbHZlRW5kKSwgdGFwKGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHJvdXRlID0gZ2V0UGFyYW1ldGVyaXplZFJvdXRlRnJvbVNuYXBzaG90KGV2ZW50LnN0YXRlLnJvb3QpO1xuICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgIGdldEN1cnJlbnRTY29wZSgpLnNldFRyYW5zYWN0aW9uTmFtZShyb3V0ZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBhY3RpdmVTcGFuID0gZ2V0QWN0aXZlU3BhbigpO1xuICAgICAgY29uc3Qgcm9vdFNwYW4gPSBhY3RpdmVTcGFuICYmIGdldFJvb3RTcGFuKGFjdGl2ZVNwYW4pO1xuICAgICAgX3VwZGF0ZVNwYW5BdHRyaWJ1dGVzRm9yUGFyYW1ldHJpemVkVXJsKHJvdXRlLCByb290U3Bhbik7XG4gICAgfSkpO1xuICAgIHRoaXMubmF2RW5kJCA9IHRoaXMuX3JvdXRlci5ldmVudHMucGlwZShmaWx0ZXIoZXZlbnQgPT4gZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kIHx8IGV2ZW50IGluc3RhbmNlb2YgTmF2aWdhdGlvbkNhbmNlbCB8fCBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FcnJvciksIHRhcCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fcm91dGluZ1NwYW4pIHtcbiAgICAgICAgcnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgdGhpcy5fcm91dGluZ1NwYW4uZW5kKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9yb3V0aW5nU3BhbiA9IG51bGw7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIHRoaXMuX3JvdXRpbmdTcGFuID0gbnVsbDtcbiAgICB0aGlzLl9wYWdlbG9hZE9uZ29pbmcgPSB0cnVlO1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICB0aGlzLl9zdWJzY3JpcHRpb24uYWRkKHRoaXMubmF2U3RhcnQkLnN1YnNjcmliZSgpKTtcbiAgICB0aGlzLl9zdWJzY3JpcHRpb24uYWRkKHRoaXMucmVzRW5kJC5zdWJzY3JpYmUoKSk7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uLmFkZCh0aGlzLm5hdkVuZCQuc3Vic2NyaWJlKCkpO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gcHJldmVudCBtZW1vcnkgbGVha3Mgd2hlbiB0aGUgcm9vdCB2aWV3IGlzIGNyZWF0ZWQgYW5kIGRlc3Ryb3llZCBtdWx0aXBsZSB0aW1lcyxcbiAgICogc2luY2UgYHN1YnNjcmliZWAgY2FsbGJhY2tzIGNhcHR1cmUgYHRoaXNgIGFuZCBwcmV2ZW50IG1hbnkgcmVzb3VyY2VzIGZyb20gYmVpbmcgR0MnZC5cbiAgICovXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9XG4gIC8qKlxuICAgKiBXZSBvbmx5IF9hdm9pZF8gY3JlYXRpbmcgYSBuYXZpZ2F0aW9uIHJvb3Qgc3BhbiBpbiBvbmUgY2FzZTpcbiAgICpcbiAgICogVGhlcmUgaXMgYW4gb25nb2luZyBwYWdlbG9hZCBzcGFuIEFORCB0aGUgcm91dGVyIGRpZG4ndCB5ZXQgZW1pdCB0aGUgZmlyc3QgbmF2aWdhdGlvbiBzdGFydCBldmVudFxuICAgKlxuICAgKiBUaGUgZmlyc3QgbmF2aWdhdGlvbiBzdGFydCBldmVudCB3aWxsIGNyZWF0ZSB0aGUgY2hpbGQgcm91dGluZyBzcGFuXG4gICAqIGFuZCB1cGRhdGUgdGhlIHBhZ2Vsb2FkIHJvb3Qgc3BhbiBuYW1lIG9uIFJlc29sdmVFbmQuXG4gICAqXG4gICAqIFRoZXJlJ3MgYW4gZWRnZSBjYXNlIHdlIG5lZWQgdG8gYXZvaWQgaGVyZTogSWYgdGhlIHJvdXRlciBmaXJlcyB0aGUgZmlyc3QgbmF2aWdhdGlvbiBzdGFydCBldmVudFxuICAgKiBfYWZ0ZXJfIHRoZSBwYWdlbG9hZCByb290IHNwYW4gZmluaXNoZWQuIFRoaXMgaXMgd2h5IHdlIGNoZWNrIGZvciB0aGUgcGFnZWxvYWQgcm9vdCBzcGFuLlxuICAgKiBQb3NzaWJsZSByZWFsLXdvcmxkIHNjZW5hcmlvOiBBbmd1bGFyIGFwcGxpY2F0aW9uIGFuZC9vciByb3V0ZXIgaXMgYm9vdHN0cmFwcGVkIGFmdGVyIHRoZSBwYWdlbG9hZFxuICAgKiBpZGxlIHJvb3Qgc3BhbiBmaW5pc2hlZFxuICAgKlxuICAgKiBUaGUgb3ZlcmFsbCByYXRpb25hbGUgaXM6XG4gICAqIC0gaWYgd2UgYWxyZWFkeSBhdm9pZGVkIGNyZWF0aW5nIGEgbmF2aWdhdGlvbiByb290IHNwYW4gb25jZSwgd2UgZG9uJ3QgYXZvaWQgaXQgYWdhaW5cbiAgICogICAoaS5lLiBzZXQgYF9wYWdlbG9hZE9uZ29pbmdgIHRvIGBmYWxzZWApXG4gICAqIC0gaWYgYF9wYWdlbG9hZE9uZ29pbmdgIGlzIGFscmVhZHkgYGZhbHNlYCwgY3JlYXRlIGEgbmF2aWdhdGlvbiByb290IHNwYW5cbiAgICogLSBpZiB0aGVyZSdzIG5vIGFjdGl2ZS9wYWdlbG9hZCByb290IHNwYW4sIGNyZWF0ZSBhIG5hdmlnYXRpb24gcm9vdCBzcGFuXG4gICAqIC0gb25seSBpZiB0aGVyZSdzIGFuIG9uZ29pbmcgcGFnZWxvYWQgcm9vdCBzcGFuIEFORCBgX3BhZ2Vsb2FkT25nb2luZ2AgaXMgc3RpbGwgYHRydWUsXG4gICAqICAgZG9uJ3QgY3JlYXRlIGEgbmF2aWdhdGlvbiByb290IHNwYW5cbiAgICovXG4gIF9pc1BhZ2Vsb2FkT25nb2luZygpIHtcbiAgICBpZiAoIXRoaXMuX3BhZ2Vsb2FkT25nb2luZykge1xuICAgICAgLy8gcGFnZWxvYWQgaXMgYWxyZWFkeSBmaW5pc2hlZCwgbm8gbmVlZCB0byB1cGRhdGVcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IGdldEFjdGl2ZVNwYW4oKTtcbiAgICBpZiAoIWFjdGl2ZVNwYW4pIHtcbiAgICAgIHRoaXMuX3BhZ2Vsb2FkT25nb2luZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByb290U3BhbiA9IGdldFJvb3RTcGFuKGFjdGl2ZVNwYW4pO1xuICAgIHRoaXMuX3BhZ2Vsb2FkT25nb2luZyA9IHNwYW5Ub0pTT04ocm9vdFNwYW4pLm9wID09PSAncGFnZWxvYWQnO1xuICAgIHJldHVybiB0aGlzLl9wYWdlbG9hZE9uZ29pbmc7XG4gIH1cbn1cblRyYWNlU2VydmljZS7JtWZhYyA9IGZ1bmN0aW9uIFRyYWNlU2VydmljZV9GYWN0b3J5KF9fbmdGYWN0b3J5VHlwZV9fKSB7XG4gIHJldHVybiBuZXcgKF9fbmdGYWN0b3J5VHlwZV9fIHx8IFRyYWNlU2VydmljZSkoaTAuybXJtWluamVjdChpMS5Sb3V0ZXIpKTtcbn07XG5UcmFjZVNlcnZpY2UuybVwcm92ID0gLyogQF9fUFVSRV9fICovaTAuybXJtWRlZmluZUluamVjdGFibGUoe1xuICB0b2tlbjogVHJhY2VTZXJ2aWNlLFxuICBmYWN0b3J5OiBUcmFjZVNlcnZpY2UuybVmYWMsXG4gIHByb3ZpZGVkSW46ICdyb290J1xufSk7XG4oKCkgPT4ge1xuICAodHlwZW9mIG5nRGV2TW9kZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBuZ0Rldk1vZGUpICYmIGkwLsm1c2V0Q2xhc3NNZXRhZGF0YShUcmFjZVNlcnZpY2UsIFt7XG4gICAgdHlwZTogSW5qZWN0YWJsZSxcbiAgICBhcmdzOiBbe1xuICAgICAgcHJvdmlkZWRJbjogJ3Jvb3QnXG4gICAgfV1cbiAgfV0sIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHR5cGU6IGkxLlJvdXRlclxuICAgIH1dO1xuICB9LCBudWxsKTtcbn0pKCk7XG4vKipcbiAqIENhcHR1cmVzIHRoZSBpbml0aWFsaXphdGlvbiBsaWZlY3ljbGUgb2YgdGhlIGNvbXBvbmVudCB0aGlzIGRpcmVjdGl2ZSBpcyBhcHBsaWVkIHRvLlxuICogU3BlY2lmaWNhbGx5LCB0aGlzIGRpcmVjdGl2ZSBtZWFzdXJlcyB0aGUgdGltZSBiZXR3ZWVuIGBuZ09uSW5pdGAgYW5kIGBuZ0FmdGVyVmlld0luaXRgXG4gKiBvZiB0aGUgY29tcG9uZW50LlxuICpcbiAqIEZhbGxzIGJhY2sgdG8gdGhlIGNvbXBvbmVudCdzIHNlbGVjdG9yIGlmIG5vIG5hbWUgaXMgcHJvdmlkZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGh0bWxcbiAqIDxhcHAtbXktY29tcG9uZW50IHRyYWNlPVwibXlDb21wb25lbnRcIj48L2FwcC1teS1jb21wb25lbnQ+XG4gKiBgYGBcbiAqL1xuY2xhc3MgVHJhY2VEaXJlY3RpdmUge1xuICBjb25zdHJ1Y3RvcihfaG9zdCkge1xuICAgIHRoaXMuX2hvc3QgPSBfaG9zdDtcbiAgfVxuICAvKipcbiAgICogSW1wbGVtZW50YXRpb24gb2YgT25Jbml0IGxpZmVjeWNsZSBtZXRob2RcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICghdGhpcy5jb21wb25lbnROYW1lKSB7XG4gICAgICAvLyBUZWNobmljYWxseSwgdGhlIGB0cmFjZWAgYmluZGluZyBzaG91bGQgYWx3YXlzIGJlIHByb3ZpZGVkLlxuICAgICAgLy8gSG93ZXZlciwgaWYgaXQgaXMgaW5jb3JyZWN0bHkgZGVjbGFyZWQgb24gdGhlIGVsZW1lbnQgd2l0aG91dCBhXG4gICAgICAvLyB2YWx1ZSAoZS5nLiwgYDxhcHAtY29tcG9uZW50IHRyYWNlIC8+YCksIHdlIGZhbGwgYmFjayB0byB1c2luZyBgdGFnTmFtZWBcbiAgICAgIC8vICh3aGljaCBpcyBlLmcuIGBBUFAtQ09NUE9ORU5UYCkuXG4gICAgICB0aGlzLmNvbXBvbmVudE5hbWUgPSB0aGlzLl9ob3N0Lm5hdGl2ZUVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBpZiAoZ2V0QWN0aXZlU3BhbigpKSB7XG4gICAgICB0aGlzLl90cmFjaW5nU3BhbiA9IHJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHN0YXJ0SW5hY3RpdmVTcGFuKHtcbiAgICAgICAgbmFtZTogYDwke3RoaXMuY29tcG9uZW50TmFtZX0+YCxcbiAgICAgICAgb3A6IEFOR1VMQVJfSU5JVF9PUCxcbiAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgIFtTRU1BTlRJQ19BVFRSSUJVVEVfU0VOVFJZX09SSUdJTl06ICdhdXRvLnVpLmFuZ3VsYXIudHJhY2VfZGlyZWN0aXZlJ1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBJbXBsZW1lbnRhdGlvbiBvZiBBZnRlclZpZXdJbml0IGxpZmVjeWNsZSBtZXRob2RcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBjb25zdCBzcGFuID0gdGhpcy5fdHJhY2luZ1NwYW47XG4gICAgaWYgKHNwYW4pIHtcbiAgICAgIHJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHNwYW4uZW5kKCkpO1xuICAgIH1cbiAgfVxufVxuVHJhY2VEaXJlY3RpdmUuybVmYWMgPSBmdW5jdGlvbiBUcmFjZURpcmVjdGl2ZV9GYWN0b3J5KF9fbmdGYWN0b3J5VHlwZV9fKSB7XG4gIHJldHVybiBuZXcgKF9fbmdGYWN0b3J5VHlwZV9fIHx8IFRyYWNlRGlyZWN0aXZlKShpMC7Jtcm1ZGlyZWN0aXZlSW5qZWN0KGkwLkVsZW1lbnRSZWYpKTtcbn07XG5UcmFjZURpcmVjdGl2ZS7JtWRpciA9IC8qIEBfX1BVUkVfXyAqL2kwLsm1ybVkZWZpbmVEaXJlY3RpdmUoe1xuICB0eXBlOiBUcmFjZURpcmVjdGl2ZSxcbiAgc2VsZWN0b3JzOiBbW1wiXCIsIFwidHJhY2VcIiwgXCJcIl1dLFxuICBpbnB1dHM6IHtcbiAgICBjb21wb25lbnROYW1lOiBbMCwgXCJ0cmFjZVwiLCBcImNvbXBvbmVudE5hbWVcIl1cbiAgfSxcbiAgc3RhbmRhbG9uZTogZmFsc2Vcbn0pO1xuKCgpID0+IHtcbiAgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBpMC7JtXNldENsYXNzTWV0YWRhdGEoVHJhY2VEaXJlY3RpdmUsIFt7XG4gICAgdHlwZTogRGlyZWN0aXZlLFxuICAgIGFyZ3M6IFt7XG4gICAgICBzZWxlY3RvcjogJ1t0cmFjZV0nXG4gICAgfV1cbiAgfV0sIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHR5cGU6IGkwLkVsZW1lbnRSZWZcbiAgICB9XTtcbiAgfSwge1xuICAgIGNvbXBvbmVudE5hbWU6IFt7XG4gICAgICB0eXBlOiBJbnB1dCxcbiAgICAgIGFyZ3M6IFsndHJhY2UnXVxuICAgIH1dXG4gIH0pO1xufSkoKTtcbi8qKlxuICogQSBtb2R1bGUgc2VydmVzIGFzIGEgc2luZ2xlIGNvbXBpbGF0aW9uIHVuaXQgZm9yIHRoZSBgVHJhY2VEaXJlY3RpdmVgIGFuZCBjYW4gYmUgcmUtdXNlZCBieSBhbnkgb3RoZXIgbW9kdWxlLlxuICovXG5jbGFzcyBUcmFjZU1vZHVsZSB7fVxuVHJhY2VNb2R1bGUuybVmYWMgPSBmdW5jdGlvbiBUcmFjZU1vZHVsZV9GYWN0b3J5KF9fbmdGYWN0b3J5VHlwZV9fKSB7XG4gIHJldHVybiBuZXcgKF9fbmdGYWN0b3J5VHlwZV9fIHx8IFRyYWNlTW9kdWxlKSgpO1xufTtcblRyYWNlTW9kdWxlLsm1bW9kID0gLyogQF9fUFVSRV9fICovaTAuybXJtWRlZmluZU5nTW9kdWxlKHtcbiAgdHlwZTogVHJhY2VNb2R1bGUsXG4gIGRlY2xhcmF0aW9uczogW1RyYWNlRGlyZWN0aXZlXSxcbiAgZXhwb3J0czogW1RyYWNlRGlyZWN0aXZlXVxufSk7XG5UcmFjZU1vZHVsZS7JtWluaiA9IC8qIEBfX1BVUkVfXyAqL2kwLsm1ybVkZWZpbmVJbmplY3Rvcih7fSk7XG4oKCkgPT4ge1xuICAodHlwZW9mIG5nRGV2TW9kZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBuZ0Rldk1vZGUpICYmIGkwLsm1c2V0Q2xhc3NNZXRhZGF0YShUcmFjZU1vZHVsZSwgW3tcbiAgICB0eXBlOiBOZ01vZHVsZSxcbiAgICBhcmdzOiBbe1xuICAgICAgZGVjbGFyYXRpb25zOiBbVHJhY2VEaXJlY3RpdmVdLFxuICAgICAgZXhwb3J0czogW1RyYWNlRGlyZWN0aXZlXVxuICAgIH1dXG4gIH1dLCBudWxsLCBudWxsKTtcbn0pKCk7XG4vKipcbiAqIERlY29yYXRvciBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNhcHR1cmUgaW5pdGlhbGl6YXRpb24gbGlmZWN5Y2xlIG9mIHRoZSB3aG9sZSBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIFRyYWNlQ2xhc3Mob3B0aW9ucykge1xuICBsZXQgdHJhY2luZ1NwYW47XG4gIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyAqL1xuICByZXR1cm4gdGFyZ2V0ID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbE9uSW5pdCA9IHRhcmdldC5wcm90b3R5cGUubmdPbkluaXQ7XG4gICAgdGFyZ2V0LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICB0cmFjaW5nU3BhbiA9IHJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHN0YXJ0SW5hY3RpdmVTcGFuKHtcbiAgICAgICAgb25seUlmUGFyZW50OiB0cnVlLFxuICAgICAgICBuYW1lOiBgPCR7b3B0aW9ucz8ubmFtZSB8fCAndW5uYW1lZCd9PmAsXG4gICAgICAgIG9wOiBBTkdVTEFSX0lOSVRfT1AsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICBbU0VNQU5USUNfQVRUUklCVVRFX1NFTlRSWV9PUklHSU5dOiAnYXV0by51aS5hbmd1bGFyLnRyYWNlX2NsYXNzX2RlY29yYXRvcidcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgICAgaWYgKG9yaWdpbmFsT25Jbml0KSB7XG4gICAgICAgIHJldHVybiBvcmlnaW5hbE9uSW5pdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9yaWdpbmFsQWZ0ZXJWaWV3SW5pdCA9IHRhcmdldC5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0O1xuICAgIHRhcmdldC5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgIGlmICh0cmFjaW5nU3Bhbikge1xuICAgICAgICBydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0cmFjaW5nU3Bhbi5lbmQoKSk7XG4gICAgICB9XG4gICAgICBpZiAob3JpZ2luYWxBZnRlclZpZXdJbml0KSB7XG4gICAgICAgIHJldHVybiBvcmlnaW5hbEFmdGVyVmlld0luaXQuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MgKi9cbn1cbi8qKlxuICogRGVjb3JhdG9yIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FwdHVyZSBhIHNpbmdsZSBsaWZlY3ljbGUgbWV0aG9kcyBvZiB0aGUgY29tcG9uZW50LlxuICovXG5mdW5jdGlvbiBUcmFjZU1ldGhvZChvcHRpb25zKSB7XG4gIHJldHVybiAoX3RhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgZGVzY3JpcHRvci52YWx1ZSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICBjb25zdCBub3cgPSB0aW1lc3RhbXBJblNlY29uZHMoKTtcbiAgICAgIHJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgc3RhcnRJbmFjdGl2ZVNwYW4oe1xuICAgICAgICAgIG9ubHlJZlBhcmVudDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiBgPCR7b3B0aW9ucz8ubmFtZSA/IG9wdGlvbnMubmFtZSA6ICd1bm5hbWVkJ30+YCxcbiAgICAgICAgICBvcDogYCR7QU5HVUxBUl9PUH0uJHtTdHJpbmcocHJvcGVydHlLZXkpfWAsXG4gICAgICAgICAgc3RhcnRUaW1lOiBub3csXG4gICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgW1NFTUFOVElDX0FUVFJJQlVURV9TRU5UUllfT1JJR0lOXTogJ2F1dG8udWkuYW5ndWxhci50cmFjZV9tZXRob2RfZGVjb3JhdG9yJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSkuZW5kKG5vdyk7XG4gICAgICB9KTtcbiAgICAgIGlmIChvcmlnaW5hbE1ldGhvZCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgIHJldHVybiBvcmlnaW5hbE1ldGhvZC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBkZXNjcmlwdG9yO1xuICB9O1xufVxuLyoqXG4gKiBUYWtlcyB0aGUgcGFyYW1ldGVyaXplZCByb3V0ZSBmcm9tIGEgZ2l2ZW4gQWN0aXZhdGVkUm91dGVTbmFwc2hvdCBhbmQgY29uY2F0ZW5hdGVzIHRoZSBzbmFwc2hvdCdzXG4gKiBjaGlsZCByb3V0ZSB3aXRoIGl0cyBwYXJlbnQgdG8gcHJvZHVjZSB0aGUgY29tcGxldGUgcGFyYW1ldGVyaXplZCBVUkwgb2YgdGhlIGFjdGl2YXRlZCByb3V0ZS5cbiAqIFRoaXMgaGFwcGVucyByZWN1cnNpdmVseSB1bnRpbCB0aGUgbGFzdCBjaGlsZCAoaS5lLiB0aGUgZW5kIG9mIHRoZSBVUkwpIGlzIHJlYWNoZWQuXG4gKlxuICogQHBhcmFtIHJvdXRlIHRoZSBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90IG9mIHdoaWNoIGl0cyBwYXRoIGFuZCBpdHMgY2hpbGQncyBwYXRoIGlzIGNvbmNhdGVuYXRlZFxuICpcbiAqIEByZXR1cm5zIHRoZSBjb25jYXRlbmF0ZWQgcGFyYW1ldGVyaXplZCByb3V0ZSBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZ2V0UGFyYW1ldGVyaXplZFJvdXRlRnJvbVNuYXBzaG90KHJvdXRlKSB7XG4gIGNvbnN0IHBhcnRzID0gW107XG4gIGxldCBjdXJyZW50Um91dGUgPSByb3V0ZT8uZmlyc3RDaGlsZDtcbiAgd2hpbGUgKGN1cnJlbnRSb3V0ZSkge1xuICAgIGNvbnN0IHBhdGggPSBjdXJyZW50Um91dGU/LnJvdXRlQ29uZmlnICYmIGN1cnJlbnRSb3V0ZS5yb3V0ZUNvbmZpZy5wYXRoO1xuICAgIGlmIChwYXRoID09PSBudWxsIHx8IHBhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHBhcnRzLnB1c2gocGF0aCk7XG4gICAgY3VycmVudFJvdXRlID0gY3VycmVudFJvdXRlLmZpcnN0Q2hpbGQ7XG4gIH1cbiAgY29uc3QgZnVsbFBhdGggPSBwYXJ0cy5maWx0ZXIocGFydCA9PiBwYXJ0KS5qb2luKCcvJyk7XG4gIHJldHVybiBmdWxsUGF0aCA/IGAvJHtmdWxsUGF0aH0vYCA6ICcvJztcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZWQgYnVuZGxlIGluZGV4LiBEbyBub3QgZWRpdC5cbiAqL1xuXG5leHBvcnQgeyBTZW50cnlFcnJvckhhbmRsZXIsIFRyYWNlQ2xhc3MsIFRyYWNlRGlyZWN0aXZlLCBUcmFjZU1ldGhvZCwgVHJhY2VNb2R1bGUsIFRyYWNlU2VydmljZSwgYnJvd3NlclRyYWNpbmdJbnRlZ3JhdGlvbiwgY3JlYXRlRXJyb3JIYW5kbGVyLCBnZXREZWZhdWx0SW50ZWdyYXRpb25zLCBpbml0IH07XG4iLCJpbXBvcnQgeyBlZmZlY3QsIEluamVjdGFibGUsIHNpZ25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInXG5pbXBvcnQge1xuICBzaWduSW4sXG4gIHNpZ25VcCxcbiAgc2lnbk91dCxcbiAgZmV0Y2hBdXRoU2Vzc2lvbixcbiAgZmV0Y2hVc2VyQXR0cmlidXRlcyxcbiAgcmVzZXRQYXNzd29yZCxcbiAgY29uZmlybVJlc2V0UGFzc3dvcmQsXG59IGZyb20gJ2F3cy1hbXBsaWZ5L2F1dGgnXG5pbXBvcnQgeyBCcm93c2VyIH0gZnJvbSAnQGNhcGFjaXRvci9icm93c2VyJ1xuaW1wb3J0IHtcbiAgQ29nbml0b1VzZXJQb29sLFxuICBDb2duaXRvVXNlcixcbiAgQ29nbml0b1VzZXJTZXNzaW9uLFxuICBDb2duaXRvSWRUb2tlbixcbiAgQ29nbml0b0FjY2Vzc1Rva2VuLFxuICBDb2duaXRvUmVmcmVzaFRva2VuLFxufSBmcm9tICdhbWF6b24tY29nbml0by1pZGVudGl0eS1qcydcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vdXRpbHMvc3RvcmFnZS5zZXJ2aWNlJ1xuaW1wb3J0IHsgQ2FwYWNpdG9yIH0gZnJvbSAnQGNhcGFjaXRvci9jb3JlJ1xuaW1wb3J0IHsgQWNjb3VudFNlcnZpY2UgfSBmcm9tICcuLi9hcGktd3JhcHBlcnMvYWNjb3VudC5zZXJ2aWNlJ1xuaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tICdzcmMvZW52aXJvbm1lbnRzL2Vudmlyb25tZW50J1xuaW1wb3J0IHsgUmVjYXB0Y2hhU2VydmljZSB9IGZyb20gJy4vcmVjYXB0Y2hhLnNlcnZpY2UnXG5pbXBvcnQgeyBBcHBzdGF0ZVNlcnZpY2UgfSBmcm9tICcuLi9pbnRlcm5hbC9hcHBzdGF0ZS5zZXJ2aWNlJ1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uUHJvY2Vzc1NlcnZpY2UgfSBmcm9tICcuLi91dGlscy9zdWJzY3JpcHRpb24tcHJvY2Vzcy5zZXJ2aWNlJ1xuaW1wb3J0IHsgRmNtU2VydmljZSB9IGZyb20gJy4vZmNtLnNlcnZpY2UnXG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSAnQHNlbnRyeS9hbmd1bGFyJ1xuaW1wb3J0IHsgUHVzaE5vdGlmaWNhdGlvbnMgfSBmcm9tICdAY2FwYWNpdG9yL3B1c2gtbm90aWZpY2F0aW9ucydcbmltcG9ydCB7IEtZQ1dyYXBwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpLXdyYXBwZXJzL2t5Yy5zZXJ2aWNlJ1xuaW1wb3J0IHsgRm9yZmFpdHNXcmFwcGVyU2VydmljZSB9IGZyb20gJy4uL2FwaS13cmFwcGVycy9mb3JmYWl0cy5zZXJ2aWNlJ1xuaW1wb3J0IHsgRXJyb3JIYW5kbGVyU2VydmljZSB9IGZyb20gJy4uL3V0aWxzL2Vycm9yLWhhbmRsZXIuc2VydmljZSdcbmltcG9ydCB7IGNhdGNoRXJyb3IsIGZyb20sIE9ic2VydmFibGUsIHRhcCwgdGhyb3dFcnJvciB9IGZyb20gJ3J4anMnXG5cbmV4cG9ydCB0eXBlIEF1dGhTdGF0ZSA9XG4gIHwge1xuICAgICAgc3RhdGU6ICdTaWduZWRPdXQnXG4gICAgfVxuICB8IHtcbiAgICAgIHN0YXRlOiAnU2lnbmVkSW4nXG4gICAgfVxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290Jyxcbn0pXG5leHBvcnQgY2xhc3MgQXV0aFNlcnZpY2Uge1xuICBwdWJsaWMgYXV0aFN0YXRlID0gc2lnbmFsPEF1dGhTdGF0ZT4oe1xuICAgIHN0YXRlOiAnU2lnbmVkT3V0JyxcbiAgfSlcbiAgcHJpdmF0ZSB1c2VyUG9vbDogQ29nbml0b1VzZXJQb29sXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICBwcml2YXRlIHN0b3JhZ2U6IFN0b3JhZ2VTZXJ2aWNlLFxuICAgIHByaXZhdGUgYWNjb3VudFNlcnZpY2U6IEFjY291bnRTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVjYXB0Y2hhU2VydmljZTogUmVjYXB0Y2hhU2VydmljZSxcbiAgICBwcml2YXRlIGFwcFN0YXRlU2VydmljZTogQXBwc3RhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgc3Vic2NyaXB0aW9uUHJvY2VzczogU3Vic2NyaXB0aW9uUHJvY2Vzc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBmY21TZXJ2aWNlOiBGY21TZXJ2aWNlLFxuICAgIHByaXZhdGUga3ljV3JhcHBlclNlcnZpY2U6IEtZQ1dyYXBwZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgZm9yZmFpdHNTZXJ2aWNlOiBGb3JmYWl0c1dyYXBwZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgZXJyb3JIYW5kbGVyOiBFcnJvckhhbmRsZXJTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuY2hlY2tBdXRoU3RhdHVzKClcbiAgICB0aGlzLnVzZXJQb29sID0gbmV3IENvZ25pdG9Vc2VyUG9vbCh7XG4gICAgICBVc2VyUG9vbElkOiBlbnZpcm9ubWVudC5jb2duaXRvLnVzZXJQb29sSWQsXG4gICAgICBDbGllbnRJZDogZW52aXJvbm1lbnQuY29nbml0by51c2VyUG9vbENsaWVudElkLFxuICAgIH0pXG5cbiAgICBlZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgY3ljbGlzdFN0YXRlID0gdGhpcy5hY2NvdW50U2VydmljZS5jeWNsaXN0U3RhdGUoKVxuICAgICAgaWYgKGN5Y2xpc3RTdGF0ZS5zdGF0ZSA9PT0gJ2RlbGV0ZWQnKSB7XG4gICAgICAgIHRoaXMuc2lnbk91dCgpXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGN5Y2xpc3RTdGF0ZS5zdGF0ZSA9PT0gJ2Vycm9yJyAmJlxuICAgICAgICB0aGlzLmF1dGhTdGF0ZSgpLnN0YXRlID09PSAnU2lnbmVkSW4nXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zaWduT3V0KClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGNoZWNrQXV0aFN0YXR1cyhmb3JjZVJlZnJlc2g/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBmZXRjaEF1dGhTZXNzaW9uKHtcbiAgICAgICAgZm9yY2VSZWZyZXNoOlxuICAgICAgICAgIGZvcmNlUmVmcmVzaCAhPT0gdW5kZWZpbmVkID8gZm9yY2VSZWZyZXNoIDogZW52aXJvbm1lbnQucHJvZHVjdGlvbixcbiAgICAgIH0pXG4gICAgICBpZiAoc2Vzc2lvbi50b2tlbnMpIHtcbiAgICAgICAgdGhpcy5hdXRoU3RhdGUuc2V0KHsgc3RhdGU6ICdTaWduZWRJbicgfSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuYWNjb3VudFNlcnZpY2UuY3ljbGlzdFN0YXRlKCkuc3RhdGUgPT09ICd1bmtub3duJyB8fFxuICAgICAgICAgIHRoaXMuYWNjb3VudFNlcnZpY2UuY3ljbGlzdFN0YXRlKCkuc3RhdGUgPT09ICdlcnJvcidcbiAgICAgICAgKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50U2VydmljZS5sb2FkQ3ljbGlzdCgpXG5cbiAgICAgICAgICAvLyBMb2FkIG9yZ2FuaXphdGlvbiBmb3JmYWl0cyBvbmx5IGlmIGN5Y2xpc3QgaGFzIG1lbWJlcnNoaXBzXG4gICAgICAgICAgY29uc3QgY3ljbGlzdFN0YXRlID0gdGhpcy5hY2NvdW50U2VydmljZS5jeWNsaXN0U3RhdGUoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICdjeWNsaXN0JyBpbiBjeWNsaXN0U3RhdGUgJiZcbiAgICAgICAgICAgIGN5Y2xpc3RTdGF0ZS5jeWNsaXN0LnJlZ2lzdHJhdGlvbnM/LmRhdGE/LlswXT8ubWVtYmVyc2hpcHM/LmRhdGEgJiZcbiAgICAgICAgICAgIGN5Y2xpc3RTdGF0ZS5jeWNsaXN0LnJlZ2lzdHJhdGlvbnMuZGF0YVswXS5tZW1iZXJzaGlwcy5kYXRhLmxlbmd0aCA+XG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuZm9yZmFpdHNTZXJ2aWNlLmxvYWRPcmdhbml6YXRpb25Gb3JmYWl0cygpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgJ0NvdWxkIG5vdCBsb2FkIG9yZ2FuaXphdGlvbiBmb3JmYWl0cyBhZnRlciBjeWNsaXN0IGxvYWQ6JyxcbiAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmF1dGhTdGF0ZS5zZXQoeyBzdGF0ZTogJ1NpZ25lZE91dCcgfSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5hdXRoU3RhdGUuc2V0KHsgc3RhdGU6ICdTaWduZWRPdXQnIH0pXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHNpZ25Jbih1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHNpZ25Jbih7XG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGF1dGhGbG93VHlwZTogJ1VTRVJfUEFTU1dPUkRfQVVUSCcsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVTdWNjZXNzZnVsQXV0aGVudGljYXRpb24oKVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGlmIChlcnJvci5uYW1lID09PSAnVXNlckFscmVhZHlBdXRoZW50aWNhdGVkRXhjZXB0aW9uJykge1xuICAgICAgICAvLyBJZiB1c2VyIGlzIGFscmVhZHkgYXV0aGVudGljYXRlZCwgc2lnbiBvdXQgZmlyc3QgYW5kIHJldHJ5XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgc2lnbk91dCgpXG4gICAgICAgICAgdGhpcy5hdXRoU3RhdGUuc2V0KHsgc3RhdGU6ICdTaWduZWRPdXQnIH0pXG4gICAgICAgICAgdGhpcy5yZXNldFN0YXRlKClcbiAgICAgICAgICAvLyBSZXRyeSBzaWduIGluIGFmdGVyIHNpZ25vdXRcbiAgICAgICAgICBhd2FpdCBzaWduSW4oe1xuICAgICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgYXV0aEZsb3dUeXBlOiAnVVNFUl9QQVNTV09SRF9BVVRIJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVN1Y2Nlc3NmdWxBdXRoZW50aWNhdGlvbigpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH0gY2F0Y2ggKHJldHJ5RXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihyZXRyeUVycm9yKVxuICAgICAgICAgIHRocm93IHJldHJ5RXJyb3JcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnTm90QXV0aG9yaXplZEV4Y2VwdGlvbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBhbHRlcm5hdGl2ZVNpZ25JblJlc3BvbnNlID0gYXdhaXQgc2lnbkluKHtcbiAgICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGlmIChhbHRlcm5hdGl2ZVNpZ25JblJlc3BvbnNlLm5leHRTdGVwLnNpZ25JblN0ZXAgPT09ICdET05FJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVTdWNjZXNzZnVsQXV0aGVudGljYXRpb24oKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChhbHRlcm5hdGl2ZUVycm9yKSB7XG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoYWx0ZXJuYXRpdmVFcnJvcilcbiAgICAgICAgICB0aHJvdyBhbHRlcm5hdGl2ZUVycm9yXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ0RldmljZU1ldGFkYXRhTm90Rm91bmRFeGNlcHRpb24nKSB7XG4gICAgICAgIC8vIFBvdXIgQW1wbGlmeSB2NiwgZXNzYXlvbnMgdW5lIGFwcHJvY2hlIGRpZmbDqXJlbnRlOiBub3VzIGZhaXNvbnMgZCdhYm9yZCB1bmUgYWN0dWFsaXNhdGlvbiBkZSBsYSBzZXNzaW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgZmV0Y2hBdXRoU2Vzc2lvbih7IGZvcmNlUmVmcmVzaDogdHJ1ZSB9KVxuICAgICAgICAgIC8vIFB1aXMgb24gZXNzYWllIMOgIG5vdXZlYXUgYXZlYyBsJ2F1dGhlbnRpZmljYXRpb24gcGFyIGTDqWZhdXRcbiAgICAgICAgICBjb25zdCBhbHRlcm5hdGl2ZVNpZ25JblJlc3BvbnNlID0gYXdhaXQgc2lnbkluKHtcbiAgICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGlmIChhbHRlcm5hdGl2ZVNpZ25JblJlc3BvbnNlLm5leHRTdGVwLnNpZ25JblN0ZXAgPT09ICdET05FJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVTdWNjZXNzZnVsQXV0aGVudGljYXRpb24oKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChhbHRlcm5hdGl2ZUVycm9yKSB7XG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoYWx0ZXJuYXRpdmVFcnJvcilcbiAgICAgICAgICB0aHJvdyBhbHRlcm5hdGl2ZUVycm9yXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVN1Y2Nlc3NmdWxBdXRoZW50aWNhdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmF1dGhTdGF0ZS5zZXQoeyBzdGF0ZTogJ1NpZ25lZEluJyB9KVxuICAgIGF3YWl0IHRoaXMuYWNjb3VudFNlcnZpY2UubG9hZEN5Y2xpc3QoKVxuXG4gICAgLy8gTG9hZCBvcmdhbml6YXRpb24gZm9yZmFpdHMgb25seSBpZiBjeWNsaXN0IGhhcyBtZW1iZXJzaGlwc1xuICAgIGNvbnN0IGN5Y2xpc3RTdGF0ZSA9IHRoaXMuYWNjb3VudFNlcnZpY2UuY3ljbGlzdFN0YXRlKClcbiAgICBpZiAoXG4gICAgICAnY3ljbGlzdCcgaW4gY3ljbGlzdFN0YXRlICYmXG4gICAgICBjeWNsaXN0U3RhdGUuY3ljbGlzdC5yZWdpc3RyYXRpb25zPy5kYXRhPy5bMF0/Lm1lbWJlcnNoaXBzPy5kYXRhICYmXG4gICAgICBjeWNsaXN0U3RhdGUuY3ljbGlzdC5yZWdpc3RyYXRpb25zLmRhdGFbMF0ubWVtYmVyc2hpcHMuZGF0YS5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmZvcmZhaXRzU2VydmljZS5sb2FkT3JnYW5pemF0aW9uRm9yZmFpdHMoKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICdDb3VsZCBub3QgbG9hZCBvcmdhbml6YXRpb24gZm9yZmFpdHMgYWZ0ZXIgY3ljbGlzdCBsb2FkOicsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChDYXBhY2l0b3IuaXNOYXRpdmVQbGF0Zm9ybSgpKSB7XG4gICAgICBjb25zdCBwdXNoUGVybWlzc2lvbiA9IGF3YWl0IFB1c2hOb3RpZmljYXRpb25zLmNoZWNrUGVybWlzc2lvbnMoKVxuICAgICAgaWYgKHB1c2hQZXJtaXNzaW9uLnJlY2VpdmUgPT09ICdncmFudGVkJykge1xuICAgICAgICBhd2FpdCB0aGlzLmZjbVNlcnZpY2UucmVnaXN0ZXJQdXNoKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgZXh0ZXJuYWwgdXNlcnMgZmlyc3QgLSByb2xlIHRha2VzIHByaW9yaXR5XG4gICAgaWYgKFxuICAgICAgJ2N5Y2xpc3QnIGluIGN5Y2xpc3RTdGF0ZSAmJlxuICAgICAgKGN5Y2xpc3RTdGF0ZS5jeWNsaXN0LnJvbGUgPT0gJ2d1ZXN0JyB8fFxuICAgICAgICBjeWNsaXN0U3RhdGUuY3ljbGlzdC5yZWdpc3RyYXRpb25zPy5kYXRhPy5bMF0/LnJvbGUgPT0gJ2d1ZXN0JylcbiAgICApIHtcbiAgICAgIC8vIEV4dGVybmFsIHVzZXJzIHNob3VsZCB2ZXJpZnkgcGhvbmUgbnVtYmVyIGJ1dCBza2lwIHBheW1lbnQgZmxvd1xuICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvdmVyaWZ5LXBob25lJ10sIHsgcmVwbGFjZVVybDogdHJ1ZSB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHJlZ3VsYXIgY3ljbGlzdHMgYmFzZWQgb24gY29uZmlybWF0aW9uIHN0YXR1c1xuICAgIGlmIChjeWNsaXN0U3RhdGUuc3RhdGUgPT09ICd1bmNvbmZpcm1lZCcpIHtcbiAgICAgIHRoaXMuYWNjb3VudFNlcnZpY2UuaGFzTWlzc2luZ1BheW1lbnRNZXRob2RPckNndSgpXG4gICAgICAgID8gdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvcGF5bWVudC1tZXRob2QnXSwgeyByZXBsYWNlVXJsOiB0cnVlIH0pXG4gICAgICAgIDogdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvdmVyaWZ5LXBob25lJ10sIHsgcmVwbGFjZVVybDogdHJ1ZSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDaGVjayBpZiB1c2VyIG5lZWRzIHRvIGNvbXBsZXRlIEtZQyBmaXJzdFxuICAgICAgaWYgKGF3YWl0IHRoaXMuc2hvdWxkUmVkaXJlY3RUb0t5YygpKSB7XG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL2t5YyddLCB7IHJlcGxhY2VVcmw6IHRydWUgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmFwcFN0YXRlU2VydmljZS5nZXRBcHBTdGF0ZSgpLnN0YXRlID09PSAnb25ib2FyZGluZycpIHtcbiAgICAgICAgICB0aGlzLmFwcFN0YXRlU2VydmljZS5zZXRBcHBTdGF0ZSh7XG4gICAgICAgICAgICBzdGF0ZTogJ25ld19jeWNsaXN0JyxcbiAgICAgICAgICAgIGRyaW5nX3N0YXRlOiB7XG4gICAgICAgICAgICAgIGdlb2xvY2F0aW9uX2RyaW5nOiAnbm90X3Nob3duJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwdXNoX25vdGlmaWNhdGlvbnM6ICdub3Rfc2hvd24nLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvbWFwJ10sIHsgcmVwbGFjZVVybDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzaWduVXAodXNlcjoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGVtYWlsOiBzdHJpbmdcbiAgICBwaG9uZTogc3RyaW5nXG4gICAgcGFzc3dvcmQ6IHN0cmluZ1xuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5yZWNhcHRjaGFTZXJ2aWNlLmV4ZWN1dGVSZWNhcHRjaGEoJ3NpZ251cCcpXG4gICAgICBhd2FpdCBzaWduVXAoe1xuICAgICAgICB1c2VybmFtZTogdXNlci5waG9uZSxcbiAgICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICB1c2VyQXR0cmlidXRlczoge1xuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IHVzZXIucGhvbmUsXG4gICAgICAgICAgICAnY3VzdG9tOnByb2dyYW0nOiBlbnZpcm9ubWVudC5wcm9ncmFtLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsaWRhdGlvbkRhdGE6IHsgcmVjYXB0Y2hhVG9rZW46IHRva2VuIH0sXG4gICAgICAgICAgYXV0b1NpZ25JbjogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgYXdhaXQgdGhpcy5zaWduSW4odXNlci5waG9uZSwgdXNlci5wYXNzd29yZClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHNpZ25PdXQoYnlwYXNzUmVkaXJlY3Rpb24gPSBmYWxzZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFVucmVnaXN0ZXIgcHVzaCBub3RpZmljYXRpb25zIGJlZm9yZSBzaWduaW5nIG91dFxuICAgIGlmIChDYXBhY2l0b3IuaXNOYXRpdmVQbGF0Zm9ybSgpKSB7XG4gICAgICBhd2FpdCBQdXNoTm90aWZpY2F0aW9ucy5jaGVja1Blcm1pc3Npb25zKClcbiAgICAgICAgLnRoZW4oYXN5bmMgKHBlcm1pc3Npb24pID0+IHtcbiAgICAgICAgICBpZiAocGVybWlzc2lvbi5yZWNlaXZlID09PSAnZ3JhbnRlZCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmNtU2VydmljZS51blJlZ2lzdGVyUHVzaCgpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgc2lnbk91dCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNldFN0YXRlKClcbiAgICAgICAgICAgIGlmICghYnlwYXNzUmVkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvbWFwJ10pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgc2lnbk91dCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnJlc2V0U3RhdGUoKVxuICAgICAgICBpZiAoIWJ5cGFzc1JlZGlyZWN0aW9uKSB7XG4gICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvbWFwJ10pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIHJlc2V0U3RhdGUoKSB7XG4gICAgdGhpcy5hdXRoU3RhdGUuc2V0KHsgc3RhdGU6ICdTaWduZWRPdXQnIH0pXG4gICAgdGhpcy5hY2NvdW50U2VydmljZS5jeWNsaXN0U3RhdGUuc2V0KHtcbiAgICAgIHN0YXRlOiAndW5rbm93bicsXG4gICAgICBibG9ja2VkX3JlYXNvbnM6IFsnVW5rbm93biBhY2NvdW50IHN0YXRlJ10sXG4gICAgfSlcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlKCdtZScpXG4gICAgdGhpcy5zdWJzY3JpcHRpb25Qcm9jZXNzLmNsZWFyUHJvY2VzcygpXG4gIH1cbiAgcHVibGljIGFzeW5jIHNpZ25JbldpdGhTb2NpYWxQcm92aWRlcihcbiAgICBwcm92aWRlcjogJ0dvb2dsZScgfCAnQXBwbGUnXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGxpdmVNb2RlID0gZW52aXJvbm1lbnQucHJvZHVjdGlvblxuICAgIGNvbnN0IHByb2dyYW0gPSBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0KCdwcm9ncmFtJylcbiAgICBpZiAoIXByb2dyYW0pIHtcbiAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKHsgZXJyb3I6IHsgdGl0bGU6ICdwcm9ncmFtX25vdF9mb3VuZCcgfSB9KVxuICAgIH1cbiAgICBpZiAoQ2FwYWNpdG9yLmlzTmF0aXZlUGxhdGZvcm0oKSkge1xuICAgICAgYXdhaXQgQnJvd3Nlci5vcGVuKHtcbiAgICAgICAgdXJsOiBgaHR0cHM6Ly9hdXRoLmVjb3ZlbG8ubW9iaS9hdXRoLWluaXRpYXRlP3Byb3ZpZGVyPSR7cHJvdmlkZXJ9JmxpdmVNb2RlPSR7bGl2ZU1vZGV9JmFwcEJ1bmRsZT0ke1xuICAgICAgICAgIHByb2dyYW0uY29uZmlnLmFwcF9idW5kbGUgPyBwcm9ncmFtLmNvbmZpZy5hcHBfYnVuZGxlIDogcHJvZ3JhbS5pZFxuICAgICAgICB9YCxcbiAgICAgICAgcHJlc2VudGF0aW9uU3R5bGU6ICdwb3BvdmVyJyxcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghcHJvZ3JhbT8uY29uZmlnPy53ZWJhcHApIHtcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoeyBlcnJvcjogeyB0aXRsZTogJ3Byb2dyYW1fbm90X2ZvdW5kJyB9IH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgaHR0cDovL2F1dGguZWNvdmVsby5tb2JpL2F1dGgtaW5pdGlhdGU/cHJvdmlkZXI9JHtwcm92aWRlcn0mbGl2ZU1vZGU9JHtsaXZlTW9kZX0md2ViQXBwVXJsPSR7cHJvZ3JhbS5jb25maWcud2ViYXBwfWBcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVkaXJlY3RzIHRoZSB1c2VyIHRvIHRoZSBGbGVldGl6IGF1dGggcG9ydGFsIHdpdGggYSB2YWxpZCBhY2Nlc3MgdG9rZW4uXG4gICAqIE9uIG5hdGl2ZSwgb3BlbnMgaW4gYW4gaW4tYXBwIGJyb3dzZXI7IG9uIHdlYiwgcGVyZm9ybXMgYSBmdWxsIHBhZ2UgcmVkaXJlY3QuXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcmVkaXJlY3RUb0xsZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGZldGNoQXV0aFNlc3Npb24oeyBmb3JjZVJlZnJlc2g6IGZhbHNlIH0pXG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHNlc3Npb24/LnRva2Vucz8uYWNjZXNzVG9rZW4/LnRvU3RyaW5nKClcbiAgICAgIGlmICghYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgIGVycm9yOiB7IHRpdGxlOiAnYWNjZXNzX3Rva2VuX25vdF9mb3VuZCcgfSxcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb2dyYW0gPSBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0KCdwcm9ncmFtJylcbiAgICAgIGlmICghcHJvZ3JhbSkge1xuICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7IGVycm9yOiB7IHRpdGxlOiAncHJvZ3JhbV9ub3RfZm91bmQnIH0gfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBleHRPcmlnaW4gcGFyYW1ldGVyIGJhc2VkIG9uIHBsYXRmb3JtIHdpdGggcm9idXN0IHZhbGlkYXRpb25cbiAgICAgIGxldCBleHRPcmlnaW4gPSAnJ1xuICAgICAgaWYgKENhcGFjaXRvci5pc05hdGl2ZVBsYXRmb3JtKCkpIHtcbiAgICAgICAgaWYgKCFwcm9ncmFtLmNvbmZpZy5hcHBfYnVuZGxlKSB7XG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgZXJyb3I6IHsgdGl0bGU6ICdhcHBfYnVuZGxlX25vdF9mb3VuZCcgfSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGV4dE9yaWdpbiA9IHByb2dyYW0uY29uZmlnLmFwcF9idW5kbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghcHJvZ3JhbS5jb25maWcud2ViYXBwKSB7XG4gICAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgZXJyb3I6IHsgdGl0bGU6ICd3ZWJhcHBfbm90X2ZvdW5kJyB9LFxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgZXh0T3JpZ2luID0gcHJvZ3JhbS5jb25maWcud2ViYXBwXG4gICAgICB9XG5cbiAgICAgIC8vIEluY2x1ZGUgZXh0T3JpZ2luIGFzIHF1ZXJ5IHBhcmFtZXRlciB3aXRoaW4gdGhlIHRhcmdldCBVUkxcbiAgICAgIGNvbnN0IHRhcmdldFVybCA9IGAke1xuICAgICAgICBwcm9ncmFtLmNvbmZpZy5sbGRfdXJsXG4gICAgICB9JHthY2Nlc3NUb2tlbn0mZXh0T3JpZ2luPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGV4dE9yaWdpbil9YFxuICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXV0aC5lY292ZWxvLm1vYmkvYXV0aC1yZWRpcmVjdD91cmw9JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgIHRhcmdldFVybFxuICAgICAgKX1gXG5cbiAgICAgIGlmIChDYXBhY2l0b3IuaXNOYXRpdmVQbGF0Zm9ybSgpKSB7XG4gICAgICAgIGF3YWl0IEJyb3dzZXIub3Blbih7IHVybCwgcHJlc2VudGF0aW9uU3R5bGU6ICdmdWxsc2NyZWVuJyB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjcmVhdGVTZXNzaW9uRnJvbVRva2VucyhzZXNzaW9uRGF0YToge1xuICAgIGlkVG9rZW46IHN0cmluZ1xuICAgIGFjY2Vzc1Rva2VuOiBzdHJpbmdcbiAgICByZWZyZXNoVG9rZW46IHN0cmluZ1xuICB9KTogUHJvbWlzZTxDb2duaXRvVXNlclNlc3Npb24+IHtcbiAgICBjb25zdCBpZFRva2VuID0gbmV3IENvZ25pdG9JZFRva2VuKHsgSWRUb2tlbjogc2Vzc2lvbkRhdGEuaWRUb2tlbiB9KVxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gbmV3IENvZ25pdG9BY2Nlc3NUb2tlbih7XG4gICAgICBBY2Nlc3NUb2tlbjogc2Vzc2lvbkRhdGEuYWNjZXNzVG9rZW4sXG4gICAgfSlcbiAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBuZXcgQ29nbml0b1JlZnJlc2hUb2tlbih7XG4gICAgICBSZWZyZXNoVG9rZW46IHNlc3Npb25EYXRhLnJlZnJlc2hUb2tlbixcbiAgICB9KVxuXG4gICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBDb2duaXRvVXNlclNlc3Npb24oe1xuICAgICAgSWRUb2tlbjogaWRUb2tlbixcbiAgICAgIEFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbixcbiAgICAgIFJlZnJlc2hUb2tlbjogcmVmcmVzaFRva2VuLFxuICAgIH0pXG4gICAgY29uc3QgdXNlciA9IG5ldyBDb2duaXRvVXNlcih7XG4gICAgICBVc2VybmFtZTogc2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLnBheWxvYWRbJ3VzZXJuYW1lJ10sXG4gICAgICBQb29sOiB0aGlzLnVzZXJQb29sLFxuICAgIH0pXG4gICAgdXNlci5zZXRTaWduSW5Vc2VyU2Vzc2lvbihzZXNzaW9uKVxuICAgIHJldHVybiBzZXNzaW9uXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0VXNlclBob25lTnVtYmVyKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGZldGNoVXNlckF0dHJpYnV0ZXMoKVxuICAgIGlmICh1c2VyLnBob25lX251bWJlcikge1xuICAgICAgcmV0dXJuIHVzZXIucGhvbmVfbnVtYmVyXG4gICAgfSBlbHNlIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24obmV3IEVycm9yKCdObyBwaG9uZSBudW1iZXIgZm91bmQgZm9yIHVzZXInKSlcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY3R1YWxpc2UgZXhwbGljaXRlbWVudCBsYSBzZXNzaW9uIGQnYXV0aGVudGlmaWNhdGlvbi5cbiAgICogQ2V0dGUgbcOpdGhvZGUgZXN0IHV0aWxlIGF2YW50IGQnZWZmZWN0dWVyIGRlcyBvcMOpcmF0aW9ucyBzZW5zaWJsZXMgY29tbWVcbiAgICogbGVzIHTDqWzDqWNoYXJnZW1lbnRzIHZlcnMgUzMsIHN1cnRvdXQgYXByw6hzIHF1ZSBsJ2FwcGxpY2F0aW9uIGEgw6l0w6kgZW4gYXJyacOocmUtcGxhbi5cbiAgICogQHJldHVybnMgUsOpc3VsdGF0IGRlIGxhIHNlc3Npb24gYWN0dWFsaXPDqWVcbiAgICovXG4gIHB1YmxpYyBhc3luYyByZWZyZXNoU2Vzc2lvbigpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGZldGNoQXV0aFNlc3Npb24oeyBmb3JjZVJlZnJlc2g6IHRydWUgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcmVmcmVzaCBhdXRoZW50aWNhdGlvbiBzZXNzaW9uOicsIGVycm9yKVxuICAgICAgdGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2hvdWxkUmVkaXJlY3RUb0t5YygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBPbmx5IHJlZGlyZWN0IGlmIHVzZXIgaXMgc2lnbmVkIGluIGFuZCBoYXMgS1lDIGRvY3VtZW50cyBlbmFibGVkXG4gICAgaWYgKFxuICAgICAgdGhpcy5hdXRoU3RhdGUoKS5zdGF0ZSAhPT0gJ1NpZ25lZEluJyB8fFxuICAgICAgdGhpcy5reWNXcmFwcGVyU2VydmljZS5lbmFibGVkRG9jdW1lbnRUeXBlcygpLmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIGN5Y2xpc3QgZGF0YSBpcyBsb2FkZWRcbiAgICBsZXQgY3ljbGlzdFN0YXRlID0gdGhpcy5hY2NvdW50U2VydmljZS5jeWNsaXN0U3RhdGUoKVxuXG4gICAgLy8gSWYgY3ljbGlzdCBkYXRhIGlzIG5vdCBsb2FkZWQgeWV0LCB3YWl0IGZvciBpdFxuICAgIGlmIChjeWNsaXN0U3RhdGUuc3RhdGUgPT09ICd1bmtub3duJyB8fCBjeWNsaXN0U3RhdGUuc3RhdGUgPT09ICdlcnJvcicpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWNjb3VudFNlcnZpY2UubG9hZEN5Y2xpc3QoKVxuICAgICAgY3ljbGlzdFN0YXRlID0gdGhpcy5hY2NvdW50U2VydmljZS5jeWNsaXN0U3RhdGUoKVxuICAgIH1cblxuICAgIGlmIChjeWNsaXN0U3RhdGUuc3RhdGUgPT09ICd1bmtub3duJyB8fCBjeWNsaXN0U3RhdGUuc3RhdGUgPT09ICdlcnJvcicpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IGt5Y1N0YXRlID0gdGhpcy5reWNXcmFwcGVyU2VydmljZS5reWNDb21wbGV0aW9uU3RhdGUoKVxuICAgIHJldHVybiBreWNTdGF0ZSA9PT0gJ21pc3NpbmcnIHx8IGt5Y1N0YXRlID09PSAncmVqZWN0ZWQnXG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFFQSxZQUFRLGFBQWE7QUFDckIsWUFBUSxjQUFjO0FBQ3RCLFlBQVEsZ0JBQWdCO0FBQ3hCLFFBQUlBLFVBQVMsQ0FBQztBQUNkLFFBQUksWUFBWSxDQUFDO0FBQ2pCLFFBQUks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QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBeUVmLElBQU0sZ0JBQWdCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBK0J0QixJQUFNLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUEyRmIsSUFBTSxTQUFTO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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QUNFLEtBQUssVUFBUyxFQUFHLFVBQVUsY0FDM0IsS0FBSyxrQkFBa0IscUJBQW9CLEVBQUcsV0FBVyxHQUN6RDtBQUNBLGVBQU87TUFDVDtBQUdBLFVBQUksZUFBZSxLQUFLLGVBQWUsYUFBWTtBQUduRCxVQUFJLGFBQWEsVUFBVSxhQUFhLGFBQWEsVUFBVSxTQUFTO0FBQ3RFLGNBQU0sS0FBSyxlQUFlLFlBQVc7QUFDckMsdUJBQWUsS0FBSyxlQUFlLGFBQVk7TUFDakQ7QUFFQSxVQUFJLGFBQWEsVUFBVSxhQUFhLGFBQWEsVUFBVSxTQUFTO0FBQ3RFLGVBQU87TUFDVDtBQUVBLFlBQU0sV0FBVyxLQUFLLGtCQUFrQixtQkFBa0I7QUFDMUQsYUFBTyxhQUFhLGFBQWEsYUFBYTtJQUNoRDs7OzttQ0FsYlcsY0FBVyxtQkFBQSxNQUFBLEdBQUEsbUJBQUEsY0FBQSxHQUFBLG1CQUFBLGNBQUEsR0FBQSxtQkFBQSxnQkFBQSxHQUFBLG1CQUFBLGVBQUEsR0FBQSxtQkFBQSwwQkFBQSxHQUFBLG1CQUFBLFVBQUEsR0FBQSxtQkFBQSxpQkFBQSxHQUFBLG1CQUFBLHNCQUFBLEdBQUEsbUJBQUEsbUJBQUEsQ0FBQTtBQUFBO2dGQUFYLGNBQVcsU0FBWCxhQUFXLFdBQUEsWUFGVixPQUFNLENBQUE7QUFFZCxJQUFPLGNBQVA7O3NFQUFPLGFBQVcsQ0FBQTtVQUh2QjtXQUFXO01BQ1YsWUFBWTtLQUNiOzs7IiwibmFtZXMiOlsibG9va3VwIiwiaSIsImxlbiIsImxlbjIiLCJlIiwibSIsImkiLCJkIiwicyIsImMiLCJtb2R1bGUiLCJCdWZmZXIiLCJlIiwiZmlsbCIsImkiLCJiIiwiYSIsIngiLCJ5IiwibiIsIm0iLCJqIiwiYnl0ZUxlbmd0aCIsImMiLCJkIiwiYiIsInMiLCJlIiwidCIsInAiLCJpIiwiYyIsInIiLCJQIiwiXyIsImYiLCJ5IiwiZyIsIm4iLCJ2IiwibyIsIm0iLCJrIiwiazIiLCJlcnJvciIsImEiLCJqIiwicSIsIl9fYXNzaWduIiwiUmF3U2hhMjU2IiwiaSIsIl9hIiwidSIsImkiLCJmcm9tVXRmOCIsInRvVXRmOCIsImZyb21VdGY4IiwidG9VdGY4IiwiZnJvbVV0ZjgiLCJTaGEyNTYiLCJpIiwiZSIsIl9hIiwicmVxdWlyZV9idWlsZCIsImUiLCJuIiwidCIsInIiLCJzIiwibyIsInUiLCJpIiwiYSIsImwiLCJtb2R1bGUiLCJtb2R1bGUiLCJpIiwicyIsImluaXQiLCJzZXQiLCJlIiwiZ2V0IiwibSIsImVycm9ySGFuZGxlciIsIl9hIiwiZXJyb3IiLCJpIiwiV29yZEFycmF5IiwiYSIsImIiLCJpIiwieCIsInciLCJqIiwiYyIsIm4iLCJ2IiwibCIsImgiLCJtIiwicyIsInIiLCJrIiwiZCIsInAiLCJ0IiwieSIsInEiLCJlIiwieiIsImciLCJnMiIsInIyIiwiQXV0aGVudGljYXRpb25IZWxwZXIiLCJhIiwiQSIsIkIiLCJ4IiwiaW1wb3J0X2J1ZmZlciIsIkNvZ25pdG9Kd3RUb2tlbiIsInQiLCJvIiwiZSIsIkNvZ25pdG9BY2Nlc3NUb2tlbiIsIl9pbmhlcml0c0xvb3NlIiwidCIsIm8iLCJfc2V0UHJvdG90eXBlT2YiLCJlIiwiQ29nbml0b0lkVG9rZW4iLCJDb2duaXRvUmVmcmVzaFRva2VuIiwiaW1wb3J0X2J1ZmZlciIsImltcG9ydF9zaGEyNTZfanMiLCJnZXRVc2VyQWdlbnQiLCJDb2duaXRvVXNlclNlc3Npb24iLCJEYXRlSGVscGVyIiwiQ29nbml0b1VzZXJBdHRyaWJ1dGUiLCJNZW1vcnlTdG9yYWdlIiwiU3RvcmFnZUhlbHBlciIsIkNvZ25pdG9Vc2VyIiwiaSIsInNpZ25PdXQiLCJlcnJvciIsInJldm9rZVRva2VuQ2FsbGJhY2siLCJnZXRBbXBsaWZ5VXNlckFnZW50IiwidXNlckFnZW50IiwiX2luaGVyaXRzTG9vc2UiLCJ0IiwibyIsIl9zZXRQcm90b3R5cGVPZiIsInIiLCJfd3JhcE5hdGl2ZVN1cGVyIiwiZSIsInAiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwibiIsIkNvZ25pdG9FcnJvciIsIkNsaWVudCIsImVycm9yIiwiaXNOb25SZXRyeWFibGVFcnJvciIsIkNvZ25pdG9Vc2VyUG9vbCIsInNpZ25VcCIsImNvbnNvbGUiLCJsb2dnZXIiLCJkZWJ1ZyIsImEiLCJiIiwicCIsImkiLCJlIiwiZSIsImRlYnVnIiwiZXJyb3IiLCJlIiwiYyIsImsiLCJpIiwiaSIsImUiLCJkZWJ1ZyIsImNyeXB0byIsIl8iLCJjIiwiX2EiLCJwZXJmb3JtYW5jZSIsIl9hIiwibGFzdEV2ZW50SWQiLCJfYSIsImRlYnVnIiwiZSIsIndpdGhTY29wZSIsImRlYnVnIiwiX2EiLCJzcGFuIiwiZGVidWciLCJfYSIsImRlYnVnIiwiX2EiLCJkc2MiLCJlIiwib3AiLCJkZXNjcmlwdGlvbiIsImRlYnVnIiwiZGVidWciLCJlIiwidmVyc2lvbiIsIl9hIiwiZHNjIiwiZGVidWciLCJkZWJ1ZyIsIl9hIiwiYSIsImIiLCJ3aXRoU2NvcGUiLCJ3aXRoU2NvcGUiLCJ3aXRoU2NvcGUiLCJzcGFuIiwiX2EiLCJkZWJ1ZyIsInNwYW4iLCJ0aW1lc3RhbXAiLCJkZWJ1ZyIsIl8iLCJlIiwiZGVidWciLCJpIiwiaSIsImVudmlyb25tZW50IiwiX2EiLCJfYiIsImIiLCJpc0VuYWJsZWQiLCJ1c2VyQWdlbnQiLCJkZWJ1ZyIsImUiLCJfYSIsImVycm9yIiwiQ2xpZW50IiwiZGVidWciLCJob29rcyIsIl9hIiwiaXNFcnJvckV2ZW50IiwiaXNFcnJvciIsImUiLCJpc0Vycm9yRXZlbnQiLCJfYSIsImRlYnVnIiwicmVtb3ZlIiwiZmx1c2giLCJkZWJ1ZyIsImVycm9yIiwiX2EiLCJuYW1lIiwiaXNFbmFibGVkIiwiZGVidWciLCJmbHVzaCIsIklOVEVHUkFUSU9OX05BTUUiLCJkZWJ1ZyIsImkiLCJfYSIsIl9iIiwiX2MiLCJfYSIsImVycm9yIiwiaSIsImxvZyIsIklOVEVHUkFUSU9OX05BTUUiLCJfc2hvdWxkRHJvcEV2ZW50IiwiZGVidWciLCJpIiwiX2EiLCJzaG91bGRBdHRhY2hIZWFkZXJzIiwic3BhbiIsIl9hIiwiV0lORE9XIiwiV0lORE9XIiwiV0lORE9XIiwiZSIsIl9hIiwiZGVidWciLCJlcnJvciIsInVybCIsInByb2Nlc3MiLCJXSU5ET1ciLCJERUJVR19CVUlMRCIsIl9hIiwiZXJyb3IiLCJnIiwibG9nZ2VyIiwiaGFuZGxlQ2xpY2siLCJuIiwibCIsInUiLCJ0IiwiaSIsIm8iLCJyIiwiZiIsImUiLCJhIiwiaCIsInYiLCJwIiwieSIsImQiLCJfIiwiZyIsImIiLCJjIiwicyIsIm0iLCJ3IiwiayIsIngiLCJDIiwiUyIsIiQiLCJJIiwiVCIsIkEiLCJlcnJvciIsIkRFQlVHX0JVSUxEIiwibG9nZ2VyIiwiV0lORE9XIiwiX2EiLCJzZW5kRmVlZGJhY2siLCJob29rcyIsInN0YXJ0aW5nUG9pbnQiLCJXSU5ET1ciLCJmbiIsImUiLCJ3aXRoU2NvcGUiLCJ1c2VyQWdlbnQiLCJlIiwiQ2xpZW50IiwiV0lORE9XIiwiX2EiLCJERUJVR19CVUlMRCIsIldJTkRPVyIsIl9hIiwiV0lORE9XIiwiX2EiLCJfYSIsIldJTkRPVyIsIl9hIiwicG8iLCJfYSIsIldJTkRPVyIsImUiLCJfYSIsIldJTkRPVyIsInBvIiwiX2EiLCJwbyIsIldJTkRPVyIsIl9hIiwiV0lORE9XIiwicG8iLCJlIiwiX2EiLCJhIiwiYiIsImludGVyYWN0aW9uIiwiX2EiLCJXSU5ET1ciLCJfYSIsInBvIiwiX2EiLCJwbyIsIldJTkRPVyIsIl9hIiwiV0lORE9XIiwiaGFuZGxlcnMiLCJpbnN0cnVtZW50ZWQiLCJhZGRIYW5kbGVyIiwidHJpZ2dlckhhbmRsZXJzIiwiZSIsIkRFQlVHX0JVSUxEIiwibG9nZ2VyIiwiX2EiLCJlbnZpcm9ubWVudCIsIldJTkRPVyIsInZlcnNpb24iLCJfIiwiX2EiLCJERUJVR19CVUlMRCIsImxvZ2dlciIsIkRFQlVHX0JVSUxEIiwibG9nZ2VyIiwicGVyZm9ybWFuY2UiLCJXSU5ET1ciLCJ2ZXJzaW9uIiwibmF2aWdhdG9yIiwiX21lYXN1cmVtZW50cyIsInBlcmZvcm1hbmNlIiwiX2EiLCJXSU5ET1ciLCJfYSIsImhhbmRsZXJzIiwiZSIsIldJTkRPVyIsIldJTkRPVyIsImRvY3VtZW50IiwiZSIsIkRFQlVHX0JVSUxEIiwibG9nZ2VyIiwic2V0VGltZW91dCIsIldJTkRPVyIsImUiLCJsb2dnZXIiLCJlcnJvciIsIkRFQlVHX0JVSUxEIiwicGVyZm9ybWFuY2UiLCJlbnRyeSIsImUiLCJsaW5lIiwiREVCVUdfQlVJTEQiLCJJTlRFR1JBVElPTl9OQU1FIiwiREVCVUdfQlVJTEQiLCJsb2dnZXIiLCJlIiwiV0lORE9XIiwiSU5URUdSQVRJT05fTkFNRSIsIldJTkRPVyIsIl9hIiwiZSIsIldJTkRPVyIsIkRFQlVHX0JVSUxEIiwibG9nZ2VyIiwiSU5URUdSQVRJT05fTkFNRSIsImVycm9yIiwiZSIsIkRFQlVHX0JVSUxEIiwibG9nZ2VyIiwiX2EiLCJXSU5ET1ciLCJJTlRFR1JBVElPTl9OQU1FIiwib3B0aW9ucyIsIkRFQlVHX0JVSUxEIiwiX2EiLCJXSU5ET1ciLCJXSU5ET1ciLCJERUJVR19CVUlMRCIsImxvZ2dlciIsIm9uTG9hZCIsIldJTkRPVyIsIm4yIiwiZXJyb3IiLCJfYSIsIngiLCJ5IiwiZTIiLCJkIiwiY2FjaGVkSW1wbGVtZW50YXRpb25zIiwibSIsInIyIiwic2V0IiwiZ2V0RXZlbnRUYXJnZXQiLCJwIiwiaGFuZGxlcnMiLCJoIiwiYiIsImkkMSIsIm9ic2VydmUiLCJpbml0IiwibiIsImUiLCJzZXRUaW1lb3V0IiwiaXNFbGVtZW50Iiwibm9kZSIsIkRFQlVHX0JVSUxEIiwiciIsIkNPTlNPTEVfTEVWRUxTIiwiUFJFRklYIiwibG9nZ2VyIiwibWFrZVNlc3Npb24iLCJpc0Vycm9yRXZlbnQiLCJpc1RyYW5zYWN0aW9uRXZlbnQiLCJkc2MiLCJpbmZvIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiZGVib3VuY2UiLCJOQVZJR0FUT1IiLCJ2ZXJzaW9uIiwiZXJyIiwiYSIsImdldEFic29sdXRlVGltZSIsInZlcnNpb24iLCJfIiwiX2EiLCJlIiwic2hvdWxkQXR0YWNoSGVhZGVycyIsInNwYW4iLCJXSU5ET1ciLCJXSU5ET1ciLCJERUJVR19CVUlMRCIsImxvZ2dlciIsIl9hIiwiREVCVUdfQlVJTEQiLCJsb2dnZXIiLCJXSU5ET1ciLCJlIiwiV0lORE9XIiwiREVCVUdfQlVJTEQiLCJsb2dnZXIiLCJpc1JlZGlyZWN0IiwiZ2V0RGVmYXVsdEludGVncmF0aW9ucyIsImluaXQiLCJfYSIsImxvZ2dlciIsImVycm9yIiwiYnJvd3NlclRyYWNpbmdJbnRlZ3JhdGlvbiIsImxvZ2dlciIsImVycm9ySGFuZGxlciIsIl9hIiwiZXJyb3IiXSwieF9nb29nbGVfaWdub3JlTGlzdCI6WzAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTEsNTIsNTMsNTQsNTUsNTYsNTcsNTgsNTksNjAsNjEsNjIsNjMsNjQsNjUsNjYsNjcsNjgsNjksNzAsNzEsNzIsNzMsNzQsNzUsNzYsNzcsNzgsNzksODAsODEsODIsODMsODQsODUsODYsODcsODgsODksOTAsOTEsOTIsOTMsOTQsOTUsOTYsOTcsOTgsOTksMTAwLDEwMSwxMDIsMTAzLDEwNCwxMDUsMTA2LDEwNywxMDgsMTA5LDExMCwxMTEsMTEyLDExMywxMTQsMTE1LDExNiwxMTcsMTE4LDExOSwxMjAsMTIxLDEyMiwxMjMsMTI0LDEyNSwxMjYsMTI3LDEyOCwxMjksMTMwLDEzMSwxMzIsMTMzLDEzNCwxMzUsMTM2LDEzNywxMzgsMTM5LDE0MCwxNDEsMTQyLDE0MywxNDQsMTQ1LDE0NiwxNDcsMTQ4LDE0OSwxNTAsMTUxLDE1MiwxNTMsMTU0LDE1NSwxNTYsMTU3LDE1OCwxNTksMTYwLDE2MSwxNjIsMTYzLDE2NCwxNjUsMTY2LDE2NywxNjgsMTY5LDE3MCwxNzEsMTcyLDE3MywxNzQsMTc1LDE3NiwxNzcsMTc4LDE3OSwxODAsMTgxLDE4MiwxODMsMTg0LDE4NSwxODZdfQ==
